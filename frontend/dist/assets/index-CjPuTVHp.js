const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-xoAzfled.js","assets/react-CEiyV7wC.js","assets/react-B4RIKRNM.css","assets/firebase-D__xqFPR.js"])))=>i.map(i=>d[i]);
var l2=Object.defineProperty;var c2=(r,e,t)=>e in r?l2(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Gt=(r,e,t)=>c2(r,typeof e!="symbol"?e+"":e,t);import{r as oe,j as d,u as gd,a as N1,L as Nt,P as io,M as f2,X as oa,C as so,b as d2,c as u2,N as h2,B as Da,d as p2,e as g2,I as m2,f as Oa,T as D1,g as Ws,E as md,h as Hs,R as k1,i as Qn,U as j1,k as O1,l as Ti,m as pc,n as qs,o as xd,p as x2,S as gc,q as bu,s as v2,t as vd,v as y2,w as T1,x as Ff,y as R1,z as hi,F as b2,A as wu,D as w2,G as A2,H as S2,J as _2,K as Au,O as C2,Q as I2,V as E2,W as N2,Y as D2,Z as k2,_ as j2,$ as O2,a0 as T2,a1 as R2,a2 as L2,a3 as P2,a4 as M2,a5 as B2,a6 as F2,a7 as sn,a8 as z2,a9 as U2}from"./react-CEiyV7wC.js";import{i as W2,g as H2,a as q2,b as V2,c as G2,o as $2,d as Ho,e as zt,f as Vs,s as X2,q as mi,h as L1,j as vt,w as ia,k as Mt,l as Y2,m as K2,n as Z2,p as yd,r as Q2,t as lo,u as Vo,v as tr,x as zr,T as P1}from"./firebase-D__xqFPR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const J2={apiKey:"AIzaSyD2okbjcvN3V4Qpd4deo59qZZNNRBIWX58",authDomain:"gmach-inventory-system.firebaseapp.com",projectId:"gmach-inventory-system",storageBucket:"gmach-inventory-system.appspot.com",messagingSenderId:"687472851540",appId:"1:687472851540:web:f846506cccaaefc1e74bc1",measurementId:"G-ZM8S3K7E2V"},mc=W2(J2);H2(mc);const Ps=q2(mc),We=V2(mc);G2(mc);const M1=oe.createContext(),B1=({children:r})=>{const[e,t]=oe.useState(null),[n,i]=oe.useState(!0);return oe.useEffect(()=>{const a=$2(Ps,async o=>{if(o&&o.emailVerified){const l=await Ho(zt(We,"users",o.uid));if(l.exists()){const c=l.data();t({uid:o.uid,email:o.email,username:c.username,role:c.role})}}else t(null)});return(async()=>{const o=await Ho(zt(We,"settings","onlineOrdering"));if(o.exists()){const l=o.data();i(l.enabled===!0)}})(),()=>a()},[]),d.jsx(M1.Provider,{value:{user:e,setUser:t,onlineOrderingEnabled:n,setOnlineOrderingEnabled:i},children:r})},En=()=>oe.useContext(M1),eg=()=>{const{user:r,setUser:e}=En(),t=gd(),n=N1(),[i,a]=oe.useState(!1),[s,o]=oe.useState(null),[l,c]=oe.useState(null),[f,u]=oe.useState(!1);oe.useEffect(()=>{const T=zt(We,"settings","onlineOrdering"),L=Vs(T,Y=>{Y.exists()&&o(Y.data().enabled)},Y=>{console.error("×©×’×™××” ×‘×§×‘×œ×ª ×¢×“×›×•× ×™× ×‘×–×ž×Ÿ ××ž×ª:",Y)});return()=>L()},[]),oe.useEffect(()=>{const T=()=>{c(window.innerWidth<=768)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const p=()=>{u(!0)},h=async()=>{try{await X2(Ps),e(null),u(!1),t("/login")}catch(T){alert("×©×’×™××” ×‘×”×ª× ×ª×§×•×ª: "+T.message)}},m=()=>{u(!1)},v=()=>{a(!1)},b=T=>{switch(T){case"MainAdmin":return"×ž× ×”×œ ×¨××©×™";case"GmachAdmin":return"×ž× ×”×œ ×’×ž×—";default:return"×ž×©×ª×ž×©"}},y=T=>n.pathname===T,E=T=>({...k,backgroundColor:y(T)?"#0056b3":"transparent",color:y(T)?"white":"#0056b3",borderRadius:y(T)?"6px":"0",fontWeight:y(T)?"600":"500",transition:"all 0.3s ease"}),D=()=>!r||r.role==="User",C=()=>!r||r.role==="User";if(l===null)return null;const z={backgroundColor:"white",padding:"10px 0",direction:"rtl",borderBottom:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",zIndex:1e3,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},k={padding:"12px 16px",textDecoration:"none",color:"#0056b3",fontWeight:"500",fontSize:"16px",display:"block"},W={position:"absolute",top:"10px",left:l?"20px":"auto",right:l?"auto":"20px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold",color:"#333"},j={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},I={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},P={position:"fixed",top:0,right:i?0:"-70%",height:"100%",width:"70%",backgroundColor:"#ffffff",background:"#ffffff",backgroundImage:"none",boxShadow:"0 0 12px rgba(0,0,0,0.25)",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",transition:"right 0.3s ease",zIndex:1e3},N={display:"flex",justifyContent:"center",gap:"10px",padding:"10px 0"},S={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},O={backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",textAlign:"center",maxWidth:"300px",width:"90%"},A={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"},B={backgroundColor:"#6c757d",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"};return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
          .mobile-sidebar-force-white {
            background: white !important;
            background-color: white !important;
            background-image: none !important;
            backdrop-filter: none !important;
          }
        `}),d.jsxs("div",{style:z,children:[l&&d.jsx("button",{onClick:()=>a(!0),style:{fontSize:"24px",background:"none",border:"none",cursor:"pointer",padding:"0 1rem"},children:"â˜°"}),!l&&d.jsxs("div",{style:N,children:[d.jsx(Nt,{to:"/",style:E("/"),children:"×“×£ ×”×‘×™×ª"}),C()&&d.jsx(Nt,{to:"/about",style:E("/about"),children:"××•×“×•×ª"}),d.jsx(Nt,{to:"/catalog",style:E("/catalog"),children:"×§×˜×œ×•×’ ×ž×•×¦×¨×™×"}),!r&&d.jsx(Nt,{to:"/borrowing-guidelines",style:E("/borrowing-guidelines"),children:"× ×•×”×œ ×”×©××œ×”"}),(r==null?void 0:r.role)==="User"&&d.jsxs(d.Fragment,{children:[d.jsx(Nt,{to:"/my-orders",style:E("/my-orders"),children:"×”×”×–×ž× ×•×ª ×©×œ×™"}),s&&d.jsx(Nt,{to:"/request",style:E("/request"),children:"×‘×§×©×ª ×”×©××œ×”"}),d.jsx(Nt,{to:"/borrowing-guidelines",style:E("/borrowing-guidelines"),children:"× ×•×”×œ ×”×©××œ×”"})]}),((r==null?void 0:r.role)==="GmachAdmin"||(r==null?void 0:r.role)==="MainAdmin")&&d.jsxs(d.Fragment,{children:[d.jsx(Nt,{to:"/new-loan",style:E("/new-loan"),children:"×”×–×ž× ×” ×—×“×©×”"}),s&&d.jsx(Nt,{to:"/requests",style:E("/requests"),children:"×‘×§×©×•×ª ×œ×”×–×ž× ×”"}),d.jsx(Nt,{to:"/Calendar",style:E("/Calendar"),children:"×”×©××œ×•×ª ×¤×ª×•×—×•×ª"}),d.jsx(Nt,{to:"/history",style:E("/history"),children:"×”×™×¡×˜×•×¨×™×™×ª ×”×©××œ×•×ª"})]}),(r==null?void 0:r.role)==="MainAdmin"&&d.jsxs(d.Fragment,{children:[d.jsx(Nt,{to:"/manage-product",style:E("/manage-product"),children:"× ×™×”×•×œ ×ž×•×¦×¨×™×"}),d.jsx(Nt,{to:"/manage-users",style:E("/manage-users"),children:"× ×™×”×•×œ ×ž×©×ª×ž×©×™×"}),d.jsx(Nt,{to:"/alerts",style:E("/alerts"),children:"× ×™×”×•×œ ×”×ª×¨××•×ª"})]}),((r==null?void 0:r.role)==="GmachAdmin"||(r==null?void 0:r.role)==="MainAdmin")&&d.jsx(Nt,{to:"/borrowing-guidelines",style:E("/borrowing-guidelines"),children:"× ×•×”×œ ×”×©××œ×”"}),D()&&d.jsx(Nt,{to:"/donations",style:E("/donations"),children:"×œ×ª×¨×•×ž×•×ª"}),!r&&d.jsxs(d.Fragment,{children:[d.jsx(Nt,{to:"/login",style:{...E("/login"),marginRight:"20px",backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600"},children:"×”×ª×—×‘×¨×•×ª"}),d.jsx(Nt,{to:"/register",style:{...E("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600"},children:"×”×¨×©×ž×”"})]})]}),i&&l&&d.jsxs(d.Fragment,{children:[d.jsx("div",{style:I,onClick:v}),d.jsxs("div",{style:P,className:"mobile-sidebar-force-white",children:[d.jsx(Nt,{to:"/",style:E("/"),onClick:v,children:"×“×£ ×”×‘×™×ª"}),C()&&d.jsx(Nt,{to:"/about",style:E("/about"),onClick:v,children:"××•×“×•×ª"}),d.jsx(Nt,{to:"/catalog",style:E("/catalog"),onClick:v,children:"×§×˜×œ×•×’ ×ž×•×¦×¨×™×"}),!r&&d.jsx(Nt,{to:"/borrowing-guidelines",style:E("/borrowing-guidelines"),onClick:v,children:"× ×•×”×œ ×”×©××œ×”"}),(r==null?void 0:r.role)==="User"&&d.jsxs(d.Fragment,{children:[d.jsx(Nt,{to:"/my-orders",style:E("/my-orders"),onClick:v,children:"×”×”×–×ž× ×•×ª ×©×œ×™"}),s&&d.jsx(Nt,{to:"/request",style:E("/request"),onClick:v,children:"×‘×§×©×ª ×”×©××œ×”"}),d.jsx(Nt,{to:"/borrowing-guidelines",style:E("/borrowing-guidelines"),onClick:v,children:"× ×•×”×œ ×”×©××œ×”"})]}),((r==null?void 0:r.role)==="GmachAdmin"||(r==null?void 0:r.role)==="MainAdmin")&&d.jsxs(d.Fragment,{children:[d.jsx(Nt,{to:"/new-loan",style:E("/new-loan"),onClick:v,children:"×”×–×ž× ×” ×—×“×©×”"}),s&&d.jsx(Nt,{to:"/requests",style:E("/requests"),onClick:v,children:"×‘×§×©×•×ª ×œ×”×–×ž× ×”"}),d.jsx(Nt,{to:"/Calendar",style:E("/Calendar"),onClick:v,children:"×”×©××œ×•×ª ×¤×ª×•×—×•×ª"}),d.jsx(Nt,{to:"/history",style:E("/history"),onClick:v,children:"×”×™×¡×˜×•×¨×™×™×ª ×”×©××œ×•×ª"})]}),(r==null?void 0:r.role)==="MainAdmin"&&d.jsxs(d.Fragment,{children:[d.jsx(Nt,{to:"/manage-product",style:E("/manage-product"),onClick:v,children:"× ×™×”×•×œ ×ž×•×¦×¨×™×"}),d.jsx(Nt,{to:"/manage-users",style:E("/manage-users"),onClick:v,children:"× ×™×”×•×œ ×ž×©×ª×ž×©×™×"}),d.jsx(Nt,{to:"/alerts",style:E("/alerts"),onClick:v,children:"× ×™×”×•×œ ×”×ª×¨××•×ª"})]}),((r==null?void 0:r.role)==="GmachAdmin"||(r==null?void 0:r.role)==="MainAdmin")&&d.jsx(Nt,{to:"/borrowing-guidelines",style:E("/borrowing-guidelines"),onClick:v,children:"× ×•×”×œ ×”×©××œ×”"}),D()&&d.jsx(Nt,{to:"/donations",style:E("/donations"),onClick:v,children:"×œ×ª×¨×•×ž×•×ª"}),!r&&d.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:[d.jsx(Nt,{to:"/login",style:{...E("/login"),backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600",textAlign:"center",marginBottom:"10px"},onClick:v,children:"×”×ª×—×‘×¨×•×ª"}),d.jsx(Nt,{to:"/register",style:{...E("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600",textAlign:"center"},onClick:v,children:"×”×¨×©×ž×”"})]})]})]}),r&&d.jsxs("div",{style:W,children:["×©×œ×•× ",r.username," (",b(r.role),")",d.jsx("button",{style:j,onClick:p,children:"×”×ª× ×ª×§"})]})]}),f&&d.jsx("div",{style:S,children:d.jsxs("div",{style:O,children:[d.jsx("h3",{style:{marginBottom:"15px",color:"#333"},children:"××™×©×•×¨ ×”×ª× ×ª×§×•×ª"}),d.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×ª× ×ª×§?"}),d.jsxs("div",{children:[d.jsx("button",{style:A,onClick:h,children:"×›×Ÿ, ×”×ª× ×ª×§"}),d.jsx("button",{style:B,onClick:m,children:"×‘×™×˜×•×œ"})]})]})})]})},tg="/assets/GmachPic-D1t0vS9u.jpeg",rg=()=>{const{user:r}=En(),[e,t]=oe.useState(!1),[n,i]=oe.useState(!1),[a,s]=oe.useState("phone"),[o,l]=oe.useState("fade-in"),c=oe.useRef(null),f="054-257-5886",u="0542575886",p="054-4473-388",h="0544473388",m="972542575886";if(oe.useEffect(()=>{const k=W=>{c.current&&!c.current.contains(W.target)&&e&&E()};return e&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[e]),oe.useEffect(()=>{const k=()=>{e&&E()};return window.addEventListener("hoursBubbleOpened",k),window.addEventListener("navigationBubbleOpened",k),()=>{window.removeEventListener("hoursBubbleOpened",k),window.removeEventListener("navigationBubbleOpened",k)}},[e]),r&&r.role!=="User")return null;const v=()=>{window.open(`tel:${u}`,"_self")},b=()=>{window.open(`tel:${h}`,"_self")},y=()=>{const k=encodeURIComponent("×©×œ×•×, ×× ×™ ×ž×¢×•× ×™×™×Ÿ ×œ×§×‘×œ ×ž×™×“×¢ × ×•×¡×£ ×¢×œ ×”×©×™×¨×•×ª"),W=`https://wa.me/${m}?text=${k}`;window.open(W,"_blank")},E=()=>{i(!0),l("fade-out"),setTimeout(()=>{s("phone"),l("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},D=()=>{e?E():(window.dispatchEvent(new CustomEvent("contactBubbleOpened")),t(!0),l("fade-out"),setTimeout(()=>{s("close"),l("fade-in")},150))},C={contactBubble:{position:"fixed",bottom:"160px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},contactBubbleMobile:{position:"fixed",bottom:"160px",right:"20px",left:"auto",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(37, 99, 235, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",fontWeight:"500",fontSize:"14px",overflow:"hidden",position:"relative",minWidth:"56px",minHeight:"56px"},bubbleMainCollapsed:{width:"56px",height:"56px",padding:"0",justifyContent:"center",borderRadius:"50%"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"70px",background:"white",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15)",padding:"16px",minWidth:"260px",border:"1px solid #e5e7eb",animation:"slideUp 0.3s ease"},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s",border:"none",width:"100%",textAlign:"right",background:"none",color:"#374151",fontSize:"14px",marginBottom:"4px"},menuItemPhone:{color:"#2563eb"},menuItemPhone2:{color:"#7c3aed"},menuItemWhatsapp:{color:"#10b981"},menuHeader:{textAlign:"center",marginBottom:"12px",color:"#1f2937",fontWeight:"600",fontSize:"16px"}},z=window.innerWidth<=768;return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            }
          }

          .contact-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .contact-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(37, 99, 235, 0.4);
            background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
          }

          .menu-item-hover:hover {
            background-color: #f3f4f6;
          }
        `}),d.jsxs("div",{ref:c,style:z?C.contactBubbleMobile:C.contactBubble,children:[(e||n)&&d.jsxs("div",{style:{...C.expandedMenu,...n?C.expandedMenuClosing:{}},dir:"rtl",children:[d.jsx("div",{style:C.menuHeader,children:"×¦×•×¨ ×§×©×¨"}),d.jsxs("button",{onClick:v,style:{...C.menuItem,...C.menuItemPhone},className:"menu-item-hover",children:[d.jsx(io,{size:20}),d.jsxs("div",{children:[d.jsx("div",{style:{fontWeight:"500"},children:"×œ×ª×™××•× ×•×”×’×¢×”"}),d.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:f})]})]}),d.jsxs("button",{onClick:b,style:{...C.menuItem,...C.menuItemPhone2},className:"menu-item-hover",children:[d.jsx(io,{size:20}),d.jsxs("div",{children:[d.jsx("div",{style:{fontWeight:"500"},children:'×œ×ž× ×”×œ×ª ×”×’×ž"×—'}),d.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:p})]})]}),d.jsxs("button",{onClick:y,style:{...C.menuItem,...C.menuItemWhatsapp},className:"menu-item-hover",children:[d.jsx(f2,{size:20}),d.jsxs("div",{children:[d.jsx("div",{style:{fontWeight:"500"},children:"WhatsApp"}),d.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"×©×œ×— ×”×•×“×¢×” ×ž×”×™×¨×”"})]})]})]}),d.jsx("button",{onClick:D,style:{...C.bubbleMain,...e?{}:C.bubbleMainCollapsed},className:`contact-bubble-hover ${e?"":"contact-bubble-pulse"}`,"aria-label":"×¦×•×¨ ×§×©×¨",children:d.jsx("div",{style:{...C.bubbleContent,...o==="fade-out"?C.bubbleContentFadeOut:{}},children:a==="close"?d.jsxs(d.Fragment,{children:[d.jsx(oa,{size:20}),d.jsx("span",{children:"×¡×’×•×¨"})," "]}):d.jsx(io,{size:24})})})]})]})},ng=()=>{const{user:r}=En(),[e,t]=oe.useState(!1),[n,i]=oe.useState(!1),[a,s]=oe.useState("clock"),[o,l]=oe.useState("fade-in"),c=oe.useRef(null);oe.useEffect(()=>{const m=v=>{c.current&&!c.current.contains(v.target)&&e&&f()};return e&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[e]),oe.useEffect(()=>{const m=()=>{e&&f()};return window.addEventListener("contactBubbleOpened",m),window.addEventListener("navigationBubbleOpened",m),()=>{window.removeEventListener("contactBubbleOpened",m),window.removeEventListener("navigationBubbleOpened",m)}},[e]);const f=()=>{i(!0),l("fade-out"),setTimeout(()=>{s("clock"),l("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},u=()=>{e?f():(window.dispatchEvent(new CustomEvent("hoursBubbleOpened")),t(!0),l("fade-out"),setTimeout(()=>{s("close"),l("fade-in")},150))};if(r&&r.role!=="User")return null;const p={hoursBubble:{position:"fixed",bottom:"20px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(16, 185, 129, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"16px 24px",fontWeight:"600",fontSize:"16px",overflow:"hidden",position:"relative",whiteSpace:"nowrap",minWidth:"160px"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"130px",background:"white",borderRadius:"16px",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.2)",padding:"24px",minWidth:"320px",border:"3px solid #e5e7eb",color:"#1f2937",textAlign:"center",zIndex:901},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuHeader:{textAlign:"center",marginBottom:"16px",color:"#1f2937",fontWeight:"800",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},hoursContent:{lineHeight:"1.7",textAlign:"center"},hoursSection:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},hoursSectionLast:{marginBottom:"0",paddingBottom:"0",borderBottom:"none"},hoursTitle:{fontWeight:"700",color:"#374151",marginBottom:"6px",fontSize:"16px"},hoursDays:{color:"#6b7280",fontSize:"15px",marginBottom:"4px"},hoursTime:{fontWeight:"700",color:"#059669",fontSize:"16px"},hoursTimeDetail:{fontSize:"15px",marginBottom:"4px"}},h=window.innerWidth<=768;return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            }
          }

          .hours-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .hours-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
          }

          .expanded-menu-animation {
            animation: slideUp 0.3s ease;
          }

          @media (max-width: 768px) {
            .hours-bubble-mobile {
              bottom: 20px !important;
              right: 20px !important;
            }
            
            .expanded-menu-hours-mobile {
              width: 300px !important;
              right: 120px !important; /* ×’× ×‘×ž×•×‘×™×™×œ ×™×•×ª×¨ ×©×ž××œ×” */
              bottom: 65px !important;
              padding: 20px !important;
              border-radius: 12px !important;
              min-width: 280px !important;
            }
            
            .bubble-main-hours-mobile {
              padding: 12px 18px !important;
              font-size: 14px !important;
              min-height: 48px !important;
            }
          }
        `}),d.jsxs("div",{ref:c,style:p.hoursBubble,className:h?"hours-bubble-mobile":"",children:[(e||n)&&d.jsxs("div",{style:{...p.expandedMenu,...n?p.expandedMenuClosing:{}},className:`expanded-menu-animation ${h?"expanded-menu-hours-mobile":""}`,dir:"rtl",children:[d.jsx("div",{style:p.menuHeader,children:"ðŸ• ×©×¢×•×ª ×¤×ª×™×—×”"}),d.jsxs("div",{style:p.hoursContent,children:[d.jsxs("div",{style:{...p.hoursSection},children:[d.jsx("div",{style:p.hoursTitle,children:"×™×ž×™× ×¨×’×™×œ×™×"}),d.jsx("div",{style:p.hoursDays,children:"×¨××©×•×Ÿ, ×¨×‘×™×¢×™, ×—×ž×™×©×™"}),d.jsx("div",{style:p.hoursTime,children:"21:00 - 20:30"})]}),d.jsxs("div",{style:{...p.hoursSection,...p.hoursSectionLast},children:[d.jsx("div",{style:p.hoursTitle,children:"×ž×•×¦××™ ×©×‘×ª"}),d.jsxs("div",{style:p.hoursTimeDetail,children:[d.jsx("span",{style:{fontWeight:"700"},children:"×§×™×¥:"}),d.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"21:30 - 21:00"})]}),d.jsxs("div",{style:p.hoursTimeDetail,children:[d.jsx("span",{style:{fontWeight:"700"},children:"×—×•×¨×£:"}),d.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"20:30 - 20:00"})]})]})]})]}),d.jsx("button",{onClick:u,style:p.bubbleMain,className:`hours-bubble-hover ${h?"bubble-main-hours-mobile":""} ${e?"":"hours-bubble-pulse"}`,"aria-label":"×©×¢×•×ª ×¤×ª×™×—×”",children:d.jsx("div",{style:{...p.bubbleContent,...o==="fade-out"?p.bubbleContentFadeOut:{}},children:a==="close"?d.jsxs(d.Fragment,{children:[d.jsx(oa,{size:20}),e&&d.jsx("span",{children:"×¡×’×•×¨"})]}):d.jsxs(d.Fragment,{children:[d.jsx(so,{size:20}),d.jsx("span",{children:"×©×¢×•×ª ×¤×ª×™×—×”"})]})})})]})]})},ig=()=>{const{user:r}=En(),[e,t]=oe.useState(!1),[n,i]=oe.useState(!1),[a,s]=oe.useState("navigation"),[o,l]=oe.useState("fade-in"),c=oe.useRef(null);oe.useEffect(()=>{const b=y=>{c.current&&!c.current.contains(y.target)&&e&&p()};return e&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[e]),oe.useEffect(()=>{const b=()=>{e&&p()};return window.addEventListener("contactBubbleOpened",b),window.addEventListener("hoursBubbleOpened",b),()=>{window.removeEventListener("contactBubbleOpened",b),window.removeEventListener("navigationBubbleOpened",b)}},[e]);const f=()=>{window.open("https://www.google.com/maps/place/31%C2%B047'20.2%22N+34%C2%B047'59.5%22E/@31.7876206,34.8006596,16.5z/data=!4m4!3m3!8m2!3d31.7889462!4d34.79986?hl=en-US&entry=ttu&g_ep=EgoyMDI1MDYzMC4wIKXMDSoASAFQAw%3D%3D","_blank")},u=()=>{window.open("https://waze.com/ul?ll=31.7889462,34.79986","_blank")},p=()=>{i(!0),l("fade-out"),setTimeout(()=>{s("navigation"),l("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},h=()=>{e?p():(window.dispatchEvent(new CustomEvent("navigationBubbleOpened")),t(!0),l("fade-out"),setTimeout(()=>{s("close"),l("fade-in")},150))};if(r&&r.role!=="User")return null;const m={navigationBubble:{position:"fixed",bottom:"90px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(124, 58, 237, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"16px 24px",fontWeight:"600",fontSize:"16px",overflow:"hidden",position:"relative",whiteSpace:"nowrap",minWidth:"120px"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"70px",background:"white",borderRadius:"16px",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.2)",padding:"16px",minWidth:"260px",border:"3px solid #e5e7eb",color:"#1f2937",zIndex:901},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",border:"none",width:"100%",textAlign:"right",background:"none",color:"white",fontSize:"14px",marginBottom:"8px",fontWeight:"600",textDecoration:"none"},menuItemGoogleMaps:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",boxShadow:"0 6px 20px rgba(59, 130, 246, 0.3)"},menuItemWaze:{background:"linear-gradient(135deg, #f59e0b, #d97706)",boxShadow:"0 6px 20px rgba(245, 158, 11, 0.3)"},locationInfo:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",color:"#374151",padding:"12px 16px",borderRadius:"15px",fontSize:"12px",fontWeight:"600",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.6)",textAlign:"center",marginTop:"8px"}},v=window.innerWidth<=768;return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            }
          }

          .navigation-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .navigation-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(124, 58, 237, 0.4);
            background: linear-gradient(135deg, #6d28d9 0%, #7c3aed 100%);
          }

          .menu-item-google-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
          }

          .menu-item-waze-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
          }

          .expanded-menu-navigation {
            animation: slideUp 0.3s ease;
          }

          @media (max-width: 768px) {
            .navigation-bubble-mobile {
              bottom: 90px !important;
              right: 20px !important;
            }
            
            .expanded-menu-mobile {
              width: 240px !important;
              right: 70px !important;
              bottom: 65px !important;
              padding: 14px !important;
              border-radius: 12px !important;
              min-width: 240px !important;
            }
            
            .bubble-main-mobile {
              padding: 12px 18px !important;
              font-size: 14px !important;
              min-height: 48px !important;
            }
          }
        `}),d.jsxs("div",{ref:c,style:m.navigationBubble,className:v?"navigation-bubble-mobile":"",children:[(e||n)&&d.jsxs("div",{style:{...m.expandedMenu,...n?m.expandedMenuClosing:{}},className:`expanded-menu-navigation ${v?"expanded-menu-mobile":""}`,dir:"rtl",children:[d.jsxs("button",{onClick:f,style:{...m.menuItem,...m.menuItemGoogleMaps},className:"menu-item-google-hover",children:[d.jsx(d2,{size:20}),d.jsx("span",{children:"ðŸ—ºï¸ Google Maps"})]}),d.jsxs("button",{onClick:u,style:{...m.menuItem,...m.menuItemWaze},className:"menu-item-waze-hover",children:[d.jsx(u2,{size:20}),d.jsx("span",{children:"ðŸš— Waze"})]}),d.jsx("div",{style:m.locationInfo,children:d.jsx("strong",{children:"×§×™×‘×•×¥ ×—×¤×¥ ×—×™×™×"})})]}),d.jsx("button",{onClick:h,style:m.bubbleMain,className:`navigation-bubble-hover ${v?"bubble-main-mobile":""} ${e?"":"navigation-bubble-pulse"}`,"aria-label":"× ×™×•×•×˜",children:d.jsx("div",{style:{...m.bubbleContent,...o==="fade-out"?m.bubbleContentFadeOut:{}},children:a==="close"?d.jsxs(d.Fragment,{children:[d.jsx(oa,{size:20}),e&&d.jsx("span",{children:"×¡×’×•×¨"})]}):d.jsxs(d.Fragment,{children:[d.jsx(h2,{size:20}),d.jsx("span",{children:"× ×™×•×•×˜"})]})})})]})]})},ag=()=>{const[r,e]=oe.useState([]),[t,n]=oe.useState(new Set),[i,a]=oe.useState(!0),[s,o]=oe.useState(!1),[l,c]=oe.useState(3);oe.useEffect(()=>{const C=sessionStorage.getItem("dismissedAlerts");C&&n(new Set(JSON.parse(C)));const z=mi(vt(We,"alerts"),L1("createdAt","desc")),k=Vs(z,W=>{const j=[];W.docs.forEach(I=>{const P={id:I.id,...I.data()};if(P.isActive)if(P.expirationDate){const N=new Date,S=P.expirationDate.toDate?P.expirationDate.toDate():new Date(P.expirationDate);N<=S&&j.push(P)}else j.push(P)}),e(j),a(!1)});return()=>k()},[]),oe.useEffect(()=>{const C=()=>{const z=window.innerWidth<=768;c(z?2:3)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const f=C=>{const z=new Set([...t,C]);n(z),sessionStorage.setItem("dismissedAlerts",JSON.stringify([...z]))},u=()=>{n(new Set),sessionStorage.removeItem("dismissedAlerts")},p=C=>{const z={filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.1))",flexShrink:0};switch(C){case"warning":return d.jsx(D1,{size:20,style:{...z,color:"#d97706"}});case"success":return d.jsx(Oa,{size:20,style:{...z,color:"#059669"}});case"info":return d.jsx(m2,{size:20,style:{...z,color:"#2563eb"}});default:return d.jsx(Da,{size:20,style:{...z,color:"#6b7280"}})}},h=(C,z=!1)=>{const k={position:"relative",padding:z?"12px 16px":"16px 20px",marginBottom:"8px",borderRadius:"12px",display:"flex",alignItems:"flex-start",justifyContent:"space-between",direction:"rtl",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:z?"14px":"15px",fontWeight:"500",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid rgba(255,255,255,0.2)",overflow:"hidden",transition:"all 0.2s ease",cursor:"default"},W={warning:{background:"rgba(255, 255, 255, 0.98)",color:"#b45309",borderLeft:"3px solid #f59e0b"},success:{background:"rgba(255, 255, 255, 0.98)",color:"#047857",borderLeft:"3px solid #10b981"},info:{background:"rgba(255, 255, 255, 0.98)",color:"#1d4ed8",borderLeft:"3px solid #3b82f6"},default:{background:"rgba(255, 255, 255, 0.98)",color:"#374151",borderLeft:"3px solid #6b7280"}};return{...k,...W[C]||W.default}},m=C=>{switch(C){case"warning":return"×—×©×•×‘";case"success":return"×¢×“×›×•×Ÿ";case"info":return"×ž×™×“×¢";default:return"×”×•×“×¢×”"}},v=r.filter(C=>!t.has(C.id)),b=r.length-v.length;if(i)return d.jsx("div",{style:{position:"sticky",top:0,zIndex:500,height:"0px",overflow:"hidden"}});if(v.length===0&&b>0)return d.jsx("div",{style:{position:"sticky",top:0,zIndex:500,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"8px 16px",borderBottom:"1px solid rgba(0,0,0,0.08)",textAlign:"center"},children:d.jsxs("button",{onClick:u,style:{background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",border:"1px solid #d1d5db",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontSize:"13px",fontWeight:"500",color:"#374151",display:"flex",alignItems:"center",gap:"6px",margin:"0 auto",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:C=>{C.target.style.background="linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)",C.target.style.transform="translateY(-1px)"},onMouseOut:C=>{C.target.style.background="linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",C.target.style.transform="translateY(0)"},children:[d.jsx(Da,{size:14}),"×”×¦×’ ",b," ×”×•×“×¢",b===1?"×”":"×•×ª"," ×©×”×•×¡×ª×¨",b===1?"×”":"×•"]})});if(v.length===0)return null;const y=s?v.slice(0,l):v,E=v.length>l,D=E||b>0;return d.jsxs(d.Fragment,{children:[d.jsx("style",{jsx:!0,children:`
                .alert-container {
                    opacity: 1;
                    transform: translateY(0);
                }
                
                .alert-banner:hover {
                    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
                }
                
                .dismiss-button:hover {
                    background-color: rgba(0,0,0,0.15) !important;
                }
                
                .collapse-button:hover {
                    background-color: rgba(59, 130, 246, 0.1) !important;
                }
                
                /* Mobile optimizations */
                @media (max-width: 768px) {
                    .alert-banner:hover {
                        box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
                    }
                }
            `}),d.jsxs("div",{style:{position:"sticky",top:0,zIndex:500,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"12px 16px 8px 16px",borderBottom:"1px solid rgba(0,0,0,0.08)",maxHeight:"50vh",overflowY:E&&!s?"auto":"visible"},className:"alert-container",children:[D&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",padding:"8px 12px",background:"rgba(59, 130, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[d.jsxs("div",{style:{fontSize:"13px",color:"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[d.jsx(Da,{size:14}),v.length," ×”×•×“×¢×•×ª ×—×“×©×•×ª",b>0&&d.jsxs("span",{style:{fontSize:"11px",color:"#6b7280",fontWeight:"400"},children:["â€¢ ",b," ×ž×•×¡×ª×¨",b===1?"×ª":"×•×ª"]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[b>0&&d.jsxs("button",{onClick:u,style:{background:"none",border:"1px solid rgba(59, 130, 246, 0.2)",color:"#2563eb",cursor:"pointer",padding:"3px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseOver:C=>{C.target.style.backgroundColor="rgba(59, 130, 246, 0.1)"},onMouseOut:C=>{C.target.style.backgroundColor="transparent"},title:`×”×¦×’ ${b} ×”×•×“×¢×•×ª ×©×”×•×¡×ª×¨×•`,children:["×”×¦×’ ×ž×•×¡×ª×¨ (",b,")"]}),E&&d.jsx("button",{onClick:()=>o(!s),style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",fontWeight:"500",transition:"background-color 0.2s ease",whiteSpace:"nowrap"},className:"collapse-button",children:s?d.jsxs(d.Fragment,{children:["×”×¦×’ ×”×›×œ",d.jsx(p2,{size:14})]}):d.jsxs(d.Fragment,{children:["×¦×ž×¦×",d.jsx(g2,{size:14})]})})]})]}),y.map((C,z)=>{const k=E&&z>=l-1;return d.jsxs("div",{style:h(C.type,k),className:"alert-banner",children:[d.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",flex:1,minWidth:0},children:[d.jsx("div",{style:{padding:"4px 6px",backgroundColor:"rgba(0,0,0,0.04)",borderRadius:"6px",marginTop:"1px"},children:p(C.type)}),d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:C.title?"6px":"2px",flexWrap:"wrap"},children:[d.jsx("span",{style:{padding:"2px 8px",backgroundColor:"rgba(0,0,0,0.06)",borderRadius:"10px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px"},children:m(C.type)}),C.title&&d.jsx("h3",{style:{margin:0,fontSize:k?"15px":"16px",fontWeight:"600",lineHeight:"1.2"},children:C.title})]}),d.jsx("div",{style:{fontSize:k?"13px":"14px",lineHeight:"1.4",fontWeight:"500",wordBreak:"break-word",color:"inherit"},children:C.message}),!k&&C.createdAt&&d.jsxs("div",{style:{marginTop:"6px",fontSize:"11px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx(so,{size:11}),C.createdAt.toDate().toLocaleDateString("he-IL",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),d.jsx("button",{onClick:()=>f(C.id),style:{backgroundColor:"rgba(0,0,0,0.08)",border:"none",borderRadius:"6px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease",marginTop:"1px",flexShrink:0},className:"dismiss-button",title:"×¡×’×•×¨ ×”×•×“×¢×”",children:d.jsx(oa,{size:16,style:{color:"currentColor"}})})]},C.id)}),s&&E&&d.jsxs("div",{style:{textAlign:"center",padding:"8px",fontSize:"12px",color:"#6b7280",backgroundColor:"rgba(0,0,0,0.02)",borderRadius:"6px",marginTop:"4px"},children:["×•×¢×•×“ ",v.length-l," ×”×•×“×¢×•×ª..."]})]})]})},og="/assets/1-C0fYk9e0.jpg",sg="/assets/2-D1YHjbfq.jpg",lg="/assets/3-9zdlhfJf.jpg",cg="/assets/4-BAjrNR16.jpg",fg="/assets/5-CswG83Xw.jpg",dg="/assets/6-ChleApYI.jpg",ug="/assets/7-C0oDsTci.jpg",hg="/assets/9-BFtDqp3_.jpg",pg="/assets/10-Dw-XIxLk.jpg",gg="/assets/11-CA5zm9C5.jpg",mg="/assets/12-CI7MWke0.jpg",xg=()=>{const{user:r}=En(),e=[og,sg,lg,cg,fg,dg,ug,hg,pg,gg,mg];return d.jsxs(d.Fragment,{children:[d.jsx(ag,{}),d.jsx("div",{style:{minHeight:"100vh",background:"transparent",width:"100%",overflowX:"hidden"},children:d.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[d.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"0 0.5rem"},className:"fade-in",children:[d.jsx("div",{style:{marginBottom:"1.5rem"},children:d.jsx("img",{src:tg,alt:"×œ×•×’×• ×©×ž×—×ª ×–×§× ×ª×™",style:{margin:"0 auto",height:"clamp(250px, 35vw, 450px)",width:"auto",objectFit:"contain",filter:"drop-shadow(0 15px 35px rgba(0,0,0,0.15))",borderRadius:"20px"}})}),d.jsx("h1",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(28px, 6vw, 52px)",fontWeight:"700",color:"#059669",marginBottom:"1.5rem",textShadow:"0 3px 6px rgba(0,0,0,0.12)",letterSpacing:"0.5px",lineHeight:"1.2",padding:"0 0.5rem"},children:'×’×ž"×— ×œ×¢×™×¦×•×‘ ××¨×•×¢×™×'}),d.jsx("p",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(18px, 3.5vw, 28px)",color:"#374151",maxWidth:"900px",margin:"0 auto",lineHeight:"1.7",fontWeight:"500",padding:"0 1rem"},children:"×ž×¤×•×ª, ××‘×™×–×¨×™× ×œ×§×™×©×•×˜ ×©×•×œ×—× ×•×ª, ×ž×–× ×•× ×™×, ×¤×™× ×•×ª ×¦×™×œ×•× ×•××•×•×™×¨×”"})]}),d.jsx("div",{style:{marginBottom:"4rem",width:"100%",overflowX:"hidden"},className:"slide-in-left",children:d.jsx("div",{style:{position:"relative",width:"100%",margin:"0 auto",padding:"0 0.5rem"},children:d.jsx("div",{style:{position:"relative",overflow:"hidden",borderRadius:"15px",boxShadow:"0 15px 40px rgba(0,0,0,0.12)",background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.8)",height:"clamp(250px, 35vw, 400px)",width:"100%",maskImage:"linear-gradient(to right, transparent 0%, black 8%, black 92%, transparent 100%)"},children:d.jsx("div",{style:{display:"flex",height:"100%",animation:"panoramaSlide 45s linear infinite",gap:"clamp(8px, 2vw, 16px)",willChange:"transform"},children:e.concat(e).map((t,n)=>d.jsx("div",{style:{flexShrink:0,width:"clamp(180px, 18vw, 300px)",height:"100%",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",transition:"transform 0.3s ease"},children:d.jsx("img",{src:t,alt:`×ª×ž×•× ×” ${n%e.length+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},`img-${n}`))})})})}),d.jsx("div",{className:"fade-in",style:{padding:"0 0.5rem",width:"100%",boxSizing:"border-box"},children:d.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85))",backdropFilter:"blur(10px)",borderRadius:"15px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"clamp(1rem, 3vw, 1.5rem)",border:"1px solid rgba(255,255,255,0.6)",width:"100%",maxWidth:"900px",margin:"0 auto",boxSizing:"border-box"},children:d.jsx("iframe",{src:"https://www.google.com/maps?q=31.7889462,34.79986&output=embed",width:"100%",height:"350",style:{borderRadius:"15px",border:"none",width:"100%",display:"block"},allowFullScreen:"",loading:"lazy",title:'×ž×™×§×•× ×’×ž"×—'})})})]})}),d.jsx("style",{children:`
        * {
          box-sizing: border-box;
        }
        
        body {
          overflow-x: hidden;
        }
        
        @keyframes panoramaSlide {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(calc(-${e.length} * (clamp(180px, 18vw, 300px) + clamp(8px, 2vw, 16px))));
          }
        }
        
        /* ×× ×™×ž×¦×™×•×ª ×›× ×™×¡×” ×ž×•×ª××ž×•×ª ×œ×ž×•×‘×™×™×œ */
        .fade-in {
          animation: fadeIn 1s ease-out;
        }
        
        .slide-in-left {
          animation: slideInLeft 1.2s ease-out;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        
        /* ×ž×™×˜×•×‘ ×œ×ž×›×©×™×¨×™× ×§×˜× ×™× */
        @media (max-width: 480px) {
          .panorama-container {
            height: 180px !important;
          }
          
          iframe {
            height: 220px !important;
          }
        }
        
        /* ×ž×™×˜×•×‘ ×œ×ž×›×©×™×¨×™× ×‘×™× ×•× ×™×™× */
        @media (min-width: 481px) and (max-width: 768px) {
          .panorama-container {
            height: 250px !important;
          }
          
          iframe {
            height: 280px !important;
          }
        }
        
        /* ×ž×™×˜×•×‘ ×œ×˜××‘×œ×˜×™× */
        @media (min-width: 769px) and (max-width: 1024px) {
          .panorama-container {
            height: 300px !important;
          }
          
          iframe {
            height: 320px !important;
          }
        }
        
        /* ×”×¡×ª×¨×ª ×’×œ×™×œ×” ××•×¤×§×™×ª */
        html, body {
          overflow-x: hidden;
          max-width: 100vw;
        }
      `}),d.jsx(ng,{}),d.jsx(ig,{}),d.jsx(rg,{})]})},vg=()=>d.jsxs(d.Fragment,{children:[d.jsx(d.Fragment,{}),d.jsx("div",{style:{minHeight:"100vh",background:"transparent",padding:"2rem 0"},children:d.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"0 1rem"},children:[d.jsx("div",{style:{textAlign:"center",marginBottom:"3rem"},className:"fade-in",children:d.jsx("h1",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(28px, 5vw, 42px)",fontWeight:"800",color:"#059669",marginBottom:"1rem",textShadow:"0 2px 4px rgba(0,0,0,0.1)",letterSpacing:"0.5px"},children:'××•×“×•×ª ×’×ž"×— ×©×ž×—×ª ×–×§× ×ª×™'})}),d.jsx("div",{className:"fade-in",style:{marginBottom:"3rem"},children:d.jsx("div",{style:{background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",borderRadius:"20px",boxShadow:"0 15px 40px rgba(0,0,0,0.1)",padding:"clamp(1.5rem, 4vw, 3rem)",border:"1px solid rgba(255,255,255,0.5)",margin:"0 auto"},children:d.jsxs("div",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(16px, 2.2vw, 20px)",lineHeight:"1.8",color:"#374151",textAlign:"justify",direction:"rtl"},children:[d.jsxs("p",{style:{marginBottom:"1.5rem"},children:[d.jsx("strong",{style:{color:"#059669",fontSize:"1.1em"},children:'×’×ž"×— ×©×ž×—×ª ×–×§× ×ª×™ ×”×•× ×’×ž"×— ××¨×•×¢×™× ×”×¤×•×¢×œ ×ž×©× ×ª 2013.'}),'×”×’×ž"×— ×ž×¦×™×¢ ×”×©××œ×ª ×¦×™×•×“ ×œ××™×¨×•×¢×™×, ×›×•×œ×œ ×ž×¤×•×ª ×§×˜×™×¤×” ×‘×ž×’×•×•×Ÿ ×¦×‘×¢×™×, ×¢×™×¦×•×‘×™ ×©×•×œ×—×Ÿ, ×¢×™×¦×•×‘×™× ×œ×ž×–× ×•× ×™× ×•×¢×•×“.']}),d.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×”×•×§× ',d.jsx("strong",{style:{color:"#c2185b"},children:'×œ×¢×™×œ×•×™ × ×©×ž×ª ×¡×‘×” ×•×¡×‘×ª×” ×©×œ ×¢× ×‘×¨, ×™×•×–×ž×ª ×•×ž× ×”×œ×ª ×”×’×ž"×—, ××‘×¨×”× ×•××¡×ª×¨ ×œ×™×‘×Ÿ ×–"×œ'}),", ×ž×ž×§×™×ž×™ ×§×™×‘×•×¥ ×—×¤×¥ ×—×™×™×."]}),d.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×ž×©×¨×ª ××ª ×ª×•×©×‘×™ ×”×ž×•×¢×¦×” ×”××–×•×¨×™×ª × ×—×œ ×©×•×¨×§ ×›×ž×• ×’× ×™×™×©×•×‘×™× ×ž×¨×•×—×§×™× ×™×•×ª×¨ ×›×ž×• ',d.jsx("strong",{children:"××œ×•×ž×”, ××©×“×•×“, × ×™×¦×Ÿ, ×ž×–×›×¨×ª ×‘×ª×™×”, ×™×‘× ×” ×•×¢×•×“"}),"."]}),d.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×–×•×›×” ×œ×ª×ž×™×›×” ×§×‘×•×¢×” ×©×œ ×”× ×”×œ×ª ×§×™×‘×•×¥ ×—×¤×¥ ×—×™×™× ×•×”×ž×•×¢×¦×” ×”××–×•×¨×™×ª × ×—×œ ×©×•×¨×§ ×©×¨×•××™× ×‘×’×ž"×— ',d.jsx("strong",{style:{color:"#059669"},children:"×™×•×–×ž×” ×‘×¨×•×›×” ×©×œ ×—×¡×“ ×•×¢×–×¨×” ×œ×–×•×œ×ª ×•×‘×¢×œ×ª ×—×©×™×‘×•×ª ×§×”×™×œ×ª×™×ª ×ž×¨×•×‘×”"}),"."]}),d.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×ž×•×¤×¢×œ ×¢"×™ ',d.jsx("strong",{children:"×¦×•×•×ª ×ž×ª× ×“×‘×•×ª ×ž×¡×•×¨"}),", ×“×•×¨×© ×ª×—×–×•×§×” ×©×•×˜×¤×ª- × ×™×§×•×™, ×¡×™×“×•×¨, ×¨×›×™×©×ª ×¦×™×•×“ ×•×—×™×“×•×© ×”×ž×œ××™ ×‘××•×¤×Ÿ ×§×‘×•×¢."]}),d.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×ž×©×¨×ª ',d.jsx("strong",{style:{color:"#c2185b"},children:"×¢×©×¨×•×ª ××¨×•×¢×™× ×ž×™×“×™ ×—×•×“×©"}),", ×•× ×©×¢×Ÿ ×¢×œ ×ª×¨×•×ž×•×ª ×”×ž×©×ª×ž×©×™× ×‘×œ×‘×“. × ×©×ž×— ×× ×ª×”×™×• ×©×•×ª×¤×™×."]}),d.jsx("p",{style:{marginBottom:"1.5rem"},children:"×¤×¨×˜×™× ×‘×“×£ ×”×ª×¨×•×ž×•×ª."}),d.jsx("div",{style:{textAlign:"center",marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(139, 92, 246, 0.1))",borderRadius:"12px",border:"1px solid rgba(5, 150, 105, 0.2)"},children:d.jsx("p",{style:{fontSize:"clamp(18px, 3vw, 24px)",fontWeight:"700",color:"#059669",textShadow:"0 1px 2px rgba(0,0,0,0.1)",margin:0},children:"ðŸŽ‰ × ×ª×¨××” ×‘×©×ž×—×•×ª! ðŸŽ‰"})})]})})})]})})]}),yg=()=>{const[r,e]=oe.useState(""),[t,n]=oe.useState(""),[i,a]=oe.useState(""),{setUser:s}=En(),o=gd(),l=async()=>{if(!r||!r.includes("@")){a("×™×© ×œ×”×–×™×Ÿ ××™×ž×™×™×œ ×ª×§×™×Ÿ ×œ×©×—×–×•×¨ ×¡×™×¡×ž×”");return}try{await K2(Ps,r),a("×§×™×©×•×¨ ×œ××™×¤×•×¡ ×¡×™×¡×ž×” × ×©×œ×— ×œ××™×ž×™×™×œ")}catch(u){a("×©×’×™××” ×‘×©×œ×™×—×ª ×§×™×©×•×¨ ×œ××™×¤×•×¡ ×¡×™×¡×ž×”: "+u.message)}},c=async u=>{u.preventDefault(),a("");let p=r;if(!r.includes("@"))try{const h=mi(vt(We,"users"),ia("username","==",r)),m=await Mt(h);if(!m.empty)p=m.docs[0].data().email;else{a("×©× ×ž×©×ª×ž×© ×œ× × ×ž×¦×");return}}catch{a("×©×’×™××” ×‘××—×–×•×¨ ××™×ž×™×™×œ ×œ×¤×™ ×©× ×ž×©×ª×ž×©");return}try{const m=(await Y2(Ps,p,t)).user;if(!m.emailVerified){a("× × ×œ××ž×ª ××ª ×›×ª×•×‘×ª ×”××™×ž×™×™×œ ×œ×¤× ×™ ×”×”×ª×—×‘×¨×•×ª");return}const v=zt(We,"users",m.uid),b=await Ho(v);if(b.exists()){const y=b.data();s({uid:m.uid,email:m.email,username:y.username,role:y.role}),o("/")}else a("×œ× × ×ž×¦××• × ×ª×•× ×™ ×ž×©×ª×ž×© ×‘×ž×¡×“ ×”× ×ª×•× ×™×")}catch(h){switch(h.code){case"auth/invalid-credential":case"auth/wrong-password":a("×¡×™×¡×ž×” ×©×’×•×™×”");break;case"auth/user-not-found":a("×”×ž×©×ª×ž×© ×œ× × ×ž×¦×");break;default:a("×©×’×™××”: "+h.message)}}},f={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",background:"transparent"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return d.jsx("div",{style:f.container,children:d.jsxs("form",{onSubmit:c,style:f.form,children:[d.jsx("h2",{style:f.title,children:"×”×ª×—×‘×¨×•×ª"}),d.jsx("input",{type:"text",placeholder:"×©× ×ž×©×ª×ž×© ××• ××™×ž×™×™×œ",value:r,onChange:u=>e(u.target.value),style:f.input,required:!0}),d.jsx("input",{type:"password",placeholder:"×¡×™×¡×ž×”",value:t,onChange:u=>n(u.target.value),style:f.input,required:!0}),i&&d.jsx("div",{style:f.error,children:i}),d.jsx("button",{type:"submit",style:f.button,children:"×”×ª×—×‘×¨"}),d.jsx("button",{type:"button",onClick:l,style:{marginTop:"0.5rem",backgroundColor:"transparent",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"×©×›×—×ª ×¡×™×¡×ž×”?"})]})})},bg=()=>{const[r,e]=oe.useState(""),[t,n]=oe.useState(""),[i,a]=oe.useState(""),[s,o]=oe.useState(""),l=u=>u.length>=8&&/[a-zA-Z]/.test(u),c=async u=>{if(u.preventDefault(),!l(i)){o("×”×¡×™×¡×ž×” ×—×™×™×‘×ª ×œ×”×›×™×œ ×œ×¤×—×•×ª 8 ×ª×•×•×™× ×•×œ×¤×—×•×ª ××•×ª ××—×ª ×‘×× ×’×œ×™×ª A-Z / a-z");return}try{const h=(await Z2(Ps,r,i)).user;await yd(zt(We,"users",h.uid),{email:r,username:t,role:"User"}),await Q2(h),alert("× ×¨×©×ž×ª ×‘×”×¦×œ×—×”! × ×©×œ×— ××œ×™×š ×ž×™×™×œ ×œ××™×ž×•×ª.")}catch(p){o(p.message)}},f={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",background:"transparent"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return d.jsx("div",{style:f.container,children:d.jsxs("form",{onSubmit:c,style:f.form,children:[d.jsx("h2",{style:f.title,children:"×”×¨×©×ž×”"}),d.jsx("input",{type:"text",placeholder:"×©× ×ž×©×ª×ž×©",value:t,onChange:u=>n(u.target.value),style:f.input,required:!0}),d.jsx("input",{type:"email",placeholder:"××™×ž×™×™×œ",value:r,onChange:u=>e(u.target.value),style:f.input,required:!0}),d.jsx("input",{type:"password",placeholder:"×¡×™×¡×ž×”",value:i,onChange:u=>a(u.target.value),style:f.input,required:!0}),s&&d.jsx("div",{style:f.error,children:s}),d.jsx("button",{type:"submit",style:f.button,children:"×”×¨×©×"})]})})},wg=({form:r,errors:e,handleChange:t,handleConfirm:n,handleClear:i,setShowCatalogPopup:a,saving:s,isLoadingClientData:o=!1})=>{const l=[{label:"×ž×¡×¤×¨ ×¤×œ××¤×•×Ÿ",name:"phone",required:!0},{label:"×©× ×ž×ª× ×“×‘×ª",name:"volunteerName",required:!0},{label:"×©× ×œ×§×•×—",name:"clientName",required:!0},{label:"×ž×§×•× ×ž×’×•×¨×™×",name:"address",required:!0},{label:"××™×ž×™×™×œ",name:"email",required:!1},{label:"×¡×•×’ ×”××™×¨×•×¢",name:"eventType",required:!0},{label:"×ª××¨×™×š ×œ×§×™×—×ª ×ž×•×¦×¨×™×",name:"pickupDate",type:"date",required:!0},{label:"×ª××¨×™×š ×”××™×¨×•×¢",name:"eventDate",type:"date",required:!0},{label:"×ª××¨×™×š ×”×—×–×¨×ª ×ž×•×¦×¨×™×",name:"returnDate",type:"date",required:!0}];return d.jsxs("div",{className:"loan-form-box",children:[d.jsx("h2",{style:{textAlign:"center"},children:"×”×–×ž× ×” ×—×“×©×”"}),l.map(({label:c,name:f,type:u="text",required:p})=>d.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[d.jsxs("label",{htmlFor:f,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[c,p&&" *",o&&(f==="clientName"||f==="address"||f==="email")&&d.jsx("span",{style:{marginRight:"0.5rem",color:"#2196f3"},children:"â³"})]}),d.jsxs("div",{style:{position:"relative"},children:[d.jsx("input",{id:f,type:u,name:f,value:r[f],onChange:t,disabled:o&&(f==="clientName"||f==="address"||f==="email"),inputMode:f==="phone"?"numeric":void 0,pattern:f==="phone"?"[0-9]*":void 0,min:u==="date"?f==="pickupDate"?new Date().toISOString().split("T")[0]:f==="eventDate"||f==="returnDate"?r.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:e[f]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:o&&(f==="clientName"||f==="address"||f==="email")?"#f5f5f5":"white",opacity:o&&(f==="clientName"||f==="address"||f==="email")?.7:1},placeholder:o&&(f==="clientName"||f==="address"||f==="email")?"×˜×•×¢×Ÿ...":""}),o&&f==="phone"&&d.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#2196f3"},children:d.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e3f2fd",borderTop:"2px solid #2196f3",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),e[f]&&d.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:e[f]})]},f)),d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:d.jsx("button",{className:"btn btn-blue",onClick:()=>a(!0),children:"×‘×—×™×¨×ª ×ž×•×¦×¨×™×"})}),d.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[d.jsx("button",{className:"btn btn-green",onClick:n,disabled:s||o,children:s?"×©×•×ž×¨...":"××™×©×•×¨ ×”×–×ž× ×”"}),d.jsx("button",{className:"btn btn-red",onClick:i,disabled:s||o,children:"×‘×™×˜×•×œ ×”×–×ž× ×”"})]}),d.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: translateY(-50%) rotate(0deg); }
          100% { transform: translateY(-50%) rotate(360deg); }
        }
      `})]})};function Ag(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function Sg(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var _g=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cg=function(r){_g(e,r);function e(t,n){var i=this.constructor,a=r.call(this,t,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Ag(a,i.prototype),Sg(a),a}return e}(Error),Ig=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nn=function(r){Ig(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Cg),Eg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),di=function(r){Eg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Nn),Ng=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lt=function(r){Ng(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Nn),Dg=function(){function r(e){if(this.binarizer=e,e===null)throw new lt("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,i){var a=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new r(this.binarizer.createBinarizer(a))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r}(),kg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gr=function(r){kg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Nn),jg=function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r}(),ar=function(){function r(){}return r.arraycopy=function(e,t,n,i,a){for(;a--;)n[i++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r}(),Og=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bd=function(r){Og(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Nn),Tg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Su=function(r){Tg(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var i=r.call(this,n)||this;return i.index=t,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(bd),Rg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Br=function(){function r(){}return r.fill=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]=t},r.fillWithin=function(e,t,n,i){r.rangeCheck(e.length,t,n);for(var a=t;a<n;a++)e[a]=i},r.rangeCheck=function(e,t,n){if(t>n)throw new lt("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Su(t);if(n>e)throw new Su(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var i=1;try{for(var a=Rg(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var i=n-t,a=new Int32Array(i);return ar.arraycopy(e,t,a,0,i),a},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=n(t,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},r.numberComparator=function(e,t){return e-t},r}(),It=function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),$r=function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);ar.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var s=n.length;a===0;){if(++i===s)return t;a=n[i]}var o=i*32+It.numberOfTrailingZeros(a);return o>t?t:o},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var s=n.length;a===0;){if(++i===s)return t;a=~n[i]}var o=i*32+It.numberOfTrailingZeros(a);return o>t?t:o},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new lt;if(t!==e){t--;for(var n=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=n;s<=i;s++){var o=s>n?0:e&31,l=s<i?31:t&31,c=(2<<l)-(1<<o);a[s]|=c}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new lt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,o=i;o<=a;o++){var l=o>i?0:e&31,c=o<a?31:t&31,f=(2<<c)-(1<<l)&4294967295;if((s[o]&f)!==(n?f:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new lt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new lt("Sizes don't match");for(var t=this.bits,n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[n+a]=s}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits,a=0;a<n;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==n*32){for(var o=n*32-this.size,l=e[0]>>>o,a=1;a<n;a++){var c=e[a];l|=c<<32-o,e[a-1]=l,l=c>>>o}e[n-1]=l}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&Br.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+Br.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r}(),zf;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(zf||(zf={}));const dr=zf;var Lg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pe=function(r){Lg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Nn),Pg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$t;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})($t||($t={}));var Mr=function(){function r(e,t,n){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var l=this.values,c=0,f=l.length;c!==f;c++){var u=l[c];r.VALUES_TO_ECI.set(u,this)}try{for(var p=Pg(s),h=p.next();!h.done;h=p.next()){var m=h.value;r.NAME_TO_ECI.set(m,this)}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Pe("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new Pe("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new Pe("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r($t.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r($t.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r($t.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r($t.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r($t.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r($t.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r($t.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r($t.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r($t.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r($t.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r($t.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r($t.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r($t.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r($t.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r($t.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r($t.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r($t.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r($t.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r($t.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r($t.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r($t.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r($t.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r($t.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r($t.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r($t.Big5,28,"Big5"),r.GB18030=new r($t.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r($t.EUC_KR,30,"EUC_KR","EUC-KR"),r}(),Mg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vl=function(r){Mg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Nn),Jn=function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof Mr?e:Mr.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(n.equals(Mr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Vl("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(Mr.UTF8)||e.equals(Mr.ISO8859_1)||e.equals(Mr.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},r}(),Ot=function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return Jn.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(dr.CHARACTER_SET)!==void 0)return t.get(dr.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,s=!0,o=0,l=0,c=0,f=0,u=0,p=0,h=0,m=0,v=0,b=0,y=0,E=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,D=0;D<n&&(i||a||s);D++){var C=e[D]&255;s&&(o>0?(C&128)===0?s=!1:o--:(C&128)!==0&&((C&64)===0?s=!1:(o++,(C&32)===0?l++:(o++,(C&16)===0?c++:(o++,(C&8)===0?f++:s=!1))))),i&&(C>127&&C<160?i=!1:C>159&&(C<192||C===215||C===247)&&y++),a&&(u>0?C<64||C===127||C>252?a=!1:u--:C===128||C===160||C>239?a=!1:C>160&&C<224?(p++,m=0,h++,h>v&&(v=h)):C>127?(u++,h=0,m++,m>b&&(b=m)):(h=0,m=0))}return s&&o>0&&(s=!1),a&&u>0&&(a=!1),s&&(E||l+c+f>0)?r.UTF8:a&&(r.ASSUME_SHIFT_JIS||v>=3||b>=3)?r.SHIFT_JIS:i&&a?v===2&&p===2||y*10>=n?r.SHIFT_JIS:r.ISO88591:i?r.ISO88591:a?r.SHIFT_JIS:s?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=-1;function a(o,l,c,f,u,p){if(o==="%%")return"%";if(t[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var h=u?parseInt(u.substr(1)):void 0,m;switch(p){case"s":m=t[i];break;case"c":m=t[i][0];break;case"f":m=parseFloat(t[i]).toFixed(o);break;case"p":m=parseFloat(t[i]).toPrecision(o);break;case"e":m=parseFloat(t[i]).toExponential(o);break;case"x":m=parseInt(t[i]).toString(h||16);break;case"d":m=parseFloat(parseInt(t[i],h||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(h);for(var v=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";m.length<v;)m=l!==void 0?m+b:b+m;return m}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},r.getBytes=function(e,t){return Jn.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=Mr.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=Mr.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=Mr.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r}(),Ct=function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ot.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var i=t;t<t+n;i++)this.append(e[i]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r}(),Ri=function(){function r(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new lt("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,i=new r(n,t),a=0;a<t;a++)for(var s=e[a],o=0;o<n;o++)s[o]&&i.set(o,a);return i},r.parseFromString=function(e,t,n){if(e===null)throw new lt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,l=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new lt("row lengths do not match");s=a,l++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,i[a]=!0,a++;else if(e.substring(c,c+n.length)===n)c+=n.length,i[a]=!1,a++;else throw new lt("illegal character encountered: "+e.substring(c));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new lt("row lengths do not match");l++}for(var f=new r(o,l),u=0;u<a;u++)i[u]&&f.set(Math.floor(u%o),Math.floor(u/o));return f},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new lt("input matrix dimensions do not match");for(var t=new $r(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*n,l=e.getRow(a,t).getBitArray(),c=0;c<n;c++)i[o+c]^=l[c]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,i){if(t<0||e<0)throw new lt("Left and top must be nonnegative");if(i<1||n<1)throw new lt("Height and width must be at least 1");var a=e+n,s=t+i;if(s>this.height||a>this.width)throw new lt("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,c=t;c<s;c++)for(var f=c*o,u=e;u<a;u++)l[f+Math.floor(u/32)]|=1<<(u&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new $r(this.width):t.clear();for(var n=this.rowSize,i=this.bits,a=e*n,s=0;s<n;s++)t.setBulk(s*32,i[a+s]);return t},r.prototype.setRow=function(e,t){ar.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new $r(e),i=new $r(e),a=0,s=Math.floor((t+1)/2);a<s;a++)n=this.getRow(a,n),i=this.getRow(t-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,i=this.bits,a=e,s=t,o=-1,l=-1,c=0;c<t;c++)for(var f=0;f<n;f++){var u=i[c*n+f];if(u!==0){if(c<s&&(s=c),c>l&&(l=c),f*32<a){for(var p=0;(u<<31-p&4294967295)===0;)p++;f*32+p<a&&(a=f*32+p)}if(f*32+31>o){for(var p=31;!(u>>>p);)p--;f*32+p>o&&(o=f*32+p)}}}return o<a||l<s?null:Int32Array.from([a,s,o-a+1,l-s+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var i=n/e,a=n%e*32,s=t[n],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,s=t[n],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Br.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Br.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var i=new Ct,a=0,s=this.height;a<s;a++){for(var o=0,l=this.width;o<l;o++)i.append(this.get(o,a)?e:t);i.append(n)}return i.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r}(),Bg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ae=function(r){Bg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Nn),Fg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zg=function(r){Fg(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new $r(a):n.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),o=this.buckets,l=0;l<a;l++)o[(s[l]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(o);if(a<3)for(var l=0;l<a;l++)(s[l]&255)<c&&n.set(l);else for(var f=s[0]&255,u=s[1]&255,l=1;l<a-1;l++){var p=s[l+1]&255;(u*4-f-p)/2<c&&n.set(l),f=u,u=p}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight(),a=new Ri(n,i);this.initArrays(n);for(var s=this.buckets,o=1;o<5;o++)for(var l=Math.floor(i*o/5),c=t.getRow(l,this.luminances),f=Math.floor(n*4/5),u=Math.floor(n/5);u<f;u++){var p=c[u]&255;s[p>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(s),m=t.getMatrix(),o=0;o<i;o++)for(var v=o*n,u=0;u<n;u++){var p=m[v+u]&255;p<h&&a.set(u,o)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(t){for(var n=t.length,i=0,a=0,s=0,o=0;o<n;o++)t[o]>s&&(a=o,s=t[o]),t[o]>i&&(i=t[o]);for(var l=0,c=0,o=0;o<n;o++){var f=o-a,u=t[o]*f*f;u>c&&(l=o,c=u)}if(a>l){var p=a;a=l,l=p}if(l-a<=n/16)throw new Ae;for(var h=l-1,m=-1,o=l-1;o>a;o--){var v=o-a,u=v*v*(l-o)*(i-t[o]);u>m&&(h=o,m=u)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(jg),Ug=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wg=function(r){Ug(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var l=e.calculateBlackPoints(a,s,o,n,i),c=new Ri(n,i);e.calculateThresholdForBlock(a,s,o,n,i,l,c),this.matrix=c}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,i,a,s,o,l){for(var c=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,u=0;u<i;u++){var p=u<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var h=e.cap(u,2,i-3),m=0;m<n;m++){var v=m<<e.BLOCK_SIZE_POWER;v>f&&(v=f);for(var b=e.cap(m,2,n-3),y=0,E=-2;E<=2;E++){var D=o[h+E];y+=D[b-2]+D[b-1]+D[b]+D[b+1]+D[b+2]}var C=y/25;e.thresholdBlock(t,v,p,C,a,l)}}},e.cap=function(t,n,i){return t<n?n:t>i?i:t},e.thresholdBlock=function(t,n,i,a,s,o){for(var l=0,c=i*s+n;l<e.BLOCK_SIZE;l++,c+=s)for(var f=0;f<e.BLOCK_SIZE;f++)(t[c+f]&255)<=a&&o.set(n+f,i+l)},e.calculateBlackPoints=function(t,n,i,a,s){for(var o=s-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,c=new Array(i),f=0;f<i;f++){c[f]=new Int32Array(n);var u=f<<e.BLOCK_SIZE_POWER;u>o&&(u=o);for(var p=0;p<n;p++){var h=p<<e.BLOCK_SIZE_POWER;h>l&&(h=l);for(var m=0,v=255,b=0,y=0,E=u*a+h;y<e.BLOCK_SIZE;y++,E+=a){for(var D=0;D<e.BLOCK_SIZE;D++){var C=t[E+D]&255;m+=C,C<v&&(v=C),C>b&&(b=C)}if(b-v>e.MIN_DYNAMIC_RANGE)for(y++,E+=a;y<e.BLOCK_SIZE;y++,E+=a)for(var D=0;D<e.BLOCK_SIZE;D++)m+=t[E+D]&255}var z=m>>e.BLOCK_SIZE_POWER*2;if(b-v<=e.MIN_DYNAMIC_RANGE&&(z=v/2,f>0&&p>0)){var k=(c[f-1][p]+2*c[f][p-1]+c[f-1][p-1])/4;v<k&&(z=k)}c[f][p]=z}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(zg),xc=function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,i){throw new Vl("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new Vl("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new Vl("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ct,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",t.append(o)}t.append(`
`)}return t.toString()},r}(),Hg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wd=function(r){Hg(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var i=this.delegate.getRow(t,n),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,i,a){return new e(this.delegate.crop(t,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(xc),qg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vg=function(r){qg(e,r);function e(t,n){n===void 0&&(n=!1);var i=r.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,n),i}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,l=0,c=t.length;o<c;o+=4,l++){var f=void 0,u=t[o+3];if(u===0)f=255;else{var p=t[o],h=t[o+1],m=t[o+2];f=306*p+601*h+117*m+512>>10}s[l]=f}else for(var o=0,l=0,v=t.length;o<v;o+=4,l++){var f=void 0,u=t[o+3];if(u===0)f=255;else{var p=t[o],h=t[o+1],m=t[o+2];f=306*p+601*h+117*m+512>>10}s[l]=255-f}return s},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new lt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return r.prototype.crop.call(this,t,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return n.width=l,n.height=c,i.translate(l/2,c/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new wd(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(xc),Gg=function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r}(),yn=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(f){try{c(n.next(f))}catch(u){s(u)}}function l(f){try{c(n.throw(f))}catch(u){s(u)}}function c(f){f.done?a(f.value):i(f.value).then(o,l)}c((n=n.apply(r,e||[])).next())})},bn=function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(f){c=[6,f],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},$g=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Go=function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return yn(this,void 0,void 0,function(){var e,t,n,i,a,s,o,l,c,f,u,p;return bn(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=$g(e),i=n.next();!i.done;i=n.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,l=a.label||"Video device "+(t.length+1),c=a.groupId,f={deviceId:o,label:l,kind:s,groupId:c},t.push(f))}catch(m){u={error:m}}finally{try{i&&!i.done&&(p=n.return)&&p.call(n)}finally{if(u)throw u.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return yn(this,void 0,void 0,function(){var e;return bn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new Gg(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return yn(this,void 0,void 0,function(){var t;return bn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return yn(this,void 0,void 0,function(){return bn(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return yn(this,void 0,void 0,function(){var n,i;return bn(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return yn(this,void 0,void 0,function(){var n;return bn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return yn(this,void 0,void 0,function(){var n,i;return bn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return yn(this,void 0,void 0,function(){return bn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,i.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return yn(this,void 0,void 0,function(){var i,a;return bn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,n)];case 1:return[2,s.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return yn(this,void 0,void 0,function(){var i;return bn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,n)];case 2:return[2,a.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return yn(this,void 0,void 0,function(){var i;return bn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return yn(this,void 0,void 0,function(){var n;return bn(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,i){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return yn(this,void 0,void 0,function(){return bn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new di("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new di("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new di("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new di("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new di("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new di("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new di("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new di("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new di("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new di("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return yn(this,void 0,void 0,function(){return bn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return yn(this,void 0,void 0,function(){return bn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var i=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new Ae("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);s(l)}catch(p){var c=t&&p instanceof Ae,f=p instanceof Gr||p instanceof Pe,u=f&&n;if(c||u)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(p)}};return new Promise(function(s,o){return a(s,o)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);t(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(l){t(null,l);var s=l instanceof Gr||l instanceof Pe,o=l instanceof Ae;(s||o)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new Vg(n,t),a=new Wg(i);return new Dg(a)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r}(),pn=function(){function r(e,t,n,i,a,s){n===void 0&&(n=t==null?0:8*t.length),s===void 0&&(s=ar.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=ar.currentTimeMillis():this.timestamp=s}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);ar.arraycopy(t,0,n,0,t.length),ar.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r}(),Uf;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Uf||(Uf={}));const ot=Uf;var Wf;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Wf||(Wf={}));const an=Wf;var vc=function(){function r(e,t,n,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r}(),Ds=function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new lt;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r}(),ka=function(){function r(e,t){if(t.length===0)throw new lt;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),ar.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];n=Ds.addOrSubtract(n,s)}return n}n=t[0];for(var o=t.length,l=this.field,i=1;i<o;i++)n=Ds.addOrSubtract(l.multiply(e,n),t[i]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new lt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var a=new Int32Array(n.length),s=n.length-t.length;ar.arraycopy(n,0,a,0,s);for(var o=s;o<n.length;o++)a[o]=Ds.addOrSubtract(t[o-s],n[o]);return new r(this.field,a)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new lt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,i=e.coefficients,a=i.length,s=new Int32Array(n+a-1),o=this.field,l=0;l<n;l++)for(var c=t[l],f=0;f<a;f++)s[l+f]=Ds.addOrSubtract(s[l+f],o.multiply(c,i[f]));return new r(o,s)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=n.multiply(a[s],e);return new r(n,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new lt;if(t===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(n[o],t);return new r(s,a)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new lt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new lt("Divide by 0");for(var t=this.field,n=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),l=t.multiply(i.getCoefficient(i.getDegree()),s),c=e.multiplyByMonomial(o,l),f=t.buildMonomial(o,l);n=n.addOrSubtract(f),i=i.addOrSubtract(c)}return[n,i]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r}(),Xg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),F1=function(r){Xg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Nn),Yg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),In=function(r){Yg(e,r);function e(t,n,i){var a=r.call(this)||this;a.primitive=t,a.size=n,a.generatorBase=i;for(var s=new Int32Array(n),o=1,l=0;l<n;l++)s[l]=o,o*=2,o>=n&&(o^=t,o&=n-1);a.expTable=s;for(var c=new Int32Array(n),l=0;l<n-1;l++)c[s[l]]=l;return a.logTable=c,a.zero=new ka(a,Int32Array.from([0])),a.one=new ka(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new lt;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new ka(this,i)},e.prototype.inverse=function(t){if(t===0)throw new F1;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+It.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Ds),Kg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jl=function(r){Kg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Nn),Zg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gs=function(r){Zg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Nn),yc=function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,i=new ka(n,e),a=new Int32Array(t),s=!0,o=0;o<t;o++){var l=i.evaluateAt(n.exp(o+n.getGeneratorBase()));a[a.length-1-o]=l,l!==0&&(s=!1)}if(!s)for(var c=new ka(n,a),f=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),u=f[0],p=f[1],h=this.findErrorLocations(u),m=this.findErrorMagnitudes(p,h),o=0;o<h.length;o++){var v=e.length-1-n.log(h[o]);if(v<0)throw new jl("Bad error location");e[v]=In.addOrSubtract(e[v],m[o])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,o=t,l=a.getZero(),c=a.getOne();o.getDegree()>=(n/2|0);){var f=s,u=l;if(s=o,l=c,s.isZero())throw new jl("r_{i-1} was zero");o=f;for(var p=a.getZero(),h=s.getCoefficient(s.getDegree()),m=a.inverse(h);o.getDegree()>=s.getDegree()&&!o.isZero();){var v=o.getDegree()-s.getDegree(),b=a.multiply(o.getCoefficient(o.getDegree()),m);p=p.addOrSubtract(a.buildMonomial(v,b)),o=o.addOrSubtract(s.multiplyByMonomial(v,b))}if(c=p.multiply(l).addOrSubtract(u),o.getDegree()>=s.getDegree())throw new Gs("Division algorithm failed to reduce polynomial?")}var y=c.getCoefficient(0);if(y===0)throw new jl("sigmaTilde(0) was zero");var E=a.inverse(y),D=c.multiplyScalar(E),C=o.multiplyScalar(E);return[D,C]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(n[i]=a.inverse(s),i++);if(i!==t)throw new jl("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,i=new Int32Array(n),a=this.field,s=0;s<n;s++){for(var o=a.inverse(t[s]),l=1,c=0;c<n;c++)if(s!==c){var f=a.multiply(t[c],o),u=(f&1)===0?f|1:f&-2;l=a.multiply(l,u)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(l)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},r}(),tn;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(tn||(tn={}));var _u=function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),a=r.convertBoolArrayToByteArray(i),s=r.getEncodedData(i),o=new vc(a,s,null,null);return o.setNumBits(i.length),o},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=tn.UPPER,i=tn.UPPER,a="",s=0;s<t;)if(i===tn.BINARY){if(t-s<5)break;var o=r.readCode(e,s,5);if(s+=5,o===0){if(t-s<11)break;o=r.readCode(e,s,11)+31,s+=11}for(var l=0;l<o;l++){if(t-s<8){s=t;break}var c=r.readCode(e,s,8);a+=Ot.castAsNonUtf8Char(c),s+=8}i=n}else{var f=i===tn.DIGIT?4:5;if(t-s<f)break;var c=r.readCode(e,s,f);s+=f;var u=r.getCharacter(i,c);u.startsWith("CTRL_")?(n=i,i=r.getTable(u.charAt(5)),u.charAt(6)==="L"&&(n=i)):(a+=u,i=n)}return a},r.getTable=function(e){switch(e){case"L":return tn.LOWER;case"P":return tn.PUNCT;case"M":return tn.MIXED;case"D":return tn.DIGIT;case"B":return tn.BINARY;case"U":default:return tn.UPPER}},r.getCharacter=function(e,t){switch(e){case tn.UPPER:return r.UPPER_TABLE[t];case tn.LOWER:return r.LOWER_TABLE[t];case tn.MIXED:return r.MIXED_TABLE[t];case tn.PUNCT:return r.PUNCT_TABLE[t];case tn.DIGIT:return r.DIGIT_TABLE[t];default:throw new Gs("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=In.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=In.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=In.AZTEC_DATA_10):(n=12,t=In.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new Pe;for(var s=e.length%n,o=new Int32Array(a),l=0;l<a;l++,s+=n)o[l]=r.readCode(e,s,n);try{var c=new yc(t);c.decode(o,a-i)}catch(b){throw new Pe(b)}for(var f=(1<<n)-1,u=0,l=0;l<i;l++){var p=o[l];if(p===0||p===f)throw new Pe;(p===1||p===f-1)&&u++}for(var h=new Array(i*n-u),m=0,l=0;l<i;l++){var p=o[l];if(p===1||p===f-1)h.fill(p>1,m,m+n-1),m+=n-1;else for(var v=n-1;v>=0;--v)h[m++]=(p&1<<v)!==0}return h},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(n,t));if(t)for(var o=0;o<a.length;o++)a[o]=o;else for(var l=i+1+2*It.truncDivision(It.truncDivision(i,2)-1,15),c=i/2,f=It.truncDivision(l,2),o=0;o<c;o++){var u=o+It.truncDivision(o,15);a[c-o-1]=f-u-1,a[c+o]=f+u+1}for(var o=0,p=0;o<n;o++){for(var h=(n-o)*4+(t?9:12),m=o*2,v=i-1-m,b=0;b<h;b++)for(var y=b*2,E=0;E<2;E++)s[p+y+E]=e.get(a[m+E],a[m+b]),s[p+2*h+y+E]=e.get(a[m+b],a[v-E]),s[p+4*h+y+E]=e.get(a[v-E],a[v-b]),s[p+6*h+y+E]=e.get(a[v-b],a[m+E]);p+=h*8}return s},r.readCode=function(e,t,n){for(var i=0,a=t;a<t+n;a++)i<<=1,e[a]&&(i|=1);return i},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r}(),Pt=function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,i){var a=e-n,s=t-i;return Math.sqrt(a*a+s*s)},r.sum=function(e){for(var t=0,n=0,i=e.length;n!==i;n++){var a=e[n];t+=a}return t},r}(),Hf=function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),Ye=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*Hf.floatToIntBits(this.x)+Hf.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(n>=t&&n>=i?(s=e[0],a=e[1],o=e[2]):i>=n&&i>=t?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var l=a;a=o,o=l}e[0]=a,e[1]=s,e[2]=o},r.distance=function(e,t){return Pt.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var i=t.x,a=t.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},r}(),Ad=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),Qg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jg=function(r){Qg(e,r);function e(t,n,i,a,s){var o=r.call(this,t,n)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Ad),qf=function(){function r(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Ae}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,l=!1,c=!1,f=!1,u=!1,p=this.width,h=this.height;s;){s=!1;for(var m=!0;(m||!l)&&t<p;)m=this.containsBlackPoint(n,i,t,!1),m?(t++,s=!0,l=!0):l||t++;if(t>=p){a=!0;break}for(var v=!0;(v||!c)&&i<h;)v=this.containsBlackPoint(e,t,i,!0),v?(i++,s=!0,c=!0):c||i++;if(i>=h){a=!0;break}for(var b=!0;(b||!f)&&e>=0;)b=this.containsBlackPoint(n,i,e,!1),b?(e--,s=!0,f=!0):f||e--;if(e<0){a=!0;break}for(var y=!0;(y||!u)&&n>=0;)y=this.containsBlackPoint(e,t,n,!0),y?(n--,s=!0,u=!0):u||n--;if(n<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var E=t-e,D=null,C=1;D===null&&C<E;C++)D=this.getBlackPointOnSegment(e,i-C,e+C,i);if(D==null)throw new Ae;for(var z=null,C=1;z===null&&C<E;C++)z=this.getBlackPointOnSegment(e,n+C,e+C,n);if(z==null)throw new Ae;for(var k=null,C=1;k===null&&C<E;C++)k=this.getBlackPointOnSegment(t,n+C,t-C,n);if(k==null)throw new Ae;for(var W=null,C=1;W===null&&C<E;C++)W=this.getBlackPointOnSegment(t,i-C,t-C,i);if(W==null)throw new Ae;return this.centerEdges(W,D,k,z)}else throw new Ae},r.prototype.getBlackPointOnSegment=function(e,t,n,i){for(var a=Pt.round(Pt.distance(e,t,n,i)),s=(n-e)/a,o=(i-t)/a,l=this.image,c=0;c<a;c++){var f=Pt.round(e+c*s),u=Pt.round(t+c*o);if(l.get(f,u))return new Ye(f,u)}return null},r.prototype.centerEdges=function(e,t,n,i){var a=e.getX(),s=e.getY(),o=t.getX(),l=t.getY(),c=n.getX(),f=n.getY(),u=i.getX(),p=i.getY(),h=r.CORR;return a<this.width/2?[new Ye(u-h,p+h),new Ye(o+h,l+h),new Ye(c-h,f-h),new Ye(a+h,s-h)]:[new Ye(u+h,p+h),new Ye(o+h,l-h),new Ye(c-h,f+h),new Ye(a-h,s-h)]},r.prototype.containsBlackPoint=function(e,t,n,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,n))return!0}else for(var o=e;o<=t;o++)if(a.get(n,o))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r}(),Cu=function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var o=Math.floor(t[s]),l=Math.floor(t[s+1]);if(o<-1||o>n||l<-1||l>i)throw new Ae;a=!1,o===-1?(t[s]=0,a=!0):o===n&&(t[s]=n-1,a=!0),l===-1?(t[s+1]=0,a=!0):l===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var o=Math.floor(t[s]),l=Math.floor(t[s+1]);if(o<-1||o>n||l<-1||l>i)throw new Ae;a=!1,o===-1?(t[s]=0,a=!0):o===n&&(t[s]=n-1,a=!0),l===-1?(t[s+1]=0,a=!0):l===i&&(t[s+1]=i-1,a=!0)}},r}(),z1=function(){function r(e,t,n,i,a,s,o,l,c){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=l,this.a33=c}return r.quadrilateralToQuadrilateral=function(e,t,n,i,a,s,o,l,c,f,u,p,h,m,v,b){var y=r.quadrilateralToSquare(e,t,n,i,a,s,o,l),E=r.squareToQuadrilateral(c,f,u,p,h,m,v,b);return E.times(y)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,l=this.a23,c=this.a31,f=this.a32,u=this.a33,p=0;p<t;p+=2){var h=e[p],m=e[p+1],v=a*h+l*m+u;e[p]=(n*h+s*m+c)/v,e[p+1]=(i*h+o*m+f)/v}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,l=this.a23,c=this.a31,f=this.a32,u=this.a33,p=e.length,h=0;h<p;h++){var m=e[h],v=t[h],b=a*m+l*v+u;e[h]=(n*m+s*v+c)/b,t[h]=(i*m+o*v+f)/b}},r.squareToQuadrilateral=function(e,t,n,i,a,s,o,l){var c=e-n+a-o,f=t-i+s-l;if(c===0&&f===0)return new r(n-e,a-n,e,i-t,s-i,t,0,0,1);var u=n-a,p=o-a,h=i-s,m=l-s,v=u*m-p*h,b=(c*m-p*f)/v,y=(u*f-c*h)/v;return new r(n-e+b*n,o-e+y*o,e,i-t+b*i,l-t+y*l,t,b,y,1)},r.quadrilateralToSquare=function(e,t,n,i,a,s,o,l){return r.squareToQuadrilateral(e,t,n,i,a,s,o,l).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r}(),em=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tm=function(r){em(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,i,a,s,o,l,c,f,u,p,h,m,v,b,y,E,D,C){var z=z1.quadrilateralToQuadrilateral(a,s,o,l,c,f,u,p,h,m,v,b,y,E,D,C);return this.sampleGridWithTransform(t,n,i,z)},e.prototype.sampleGridWithTransform=function(t,n,i,a){if(n<=0||i<=0)throw new Ae;for(var s=new Ri(n,i),o=new Float32Array(2*n),l=0;l<i;l++){for(var c=o.length,f=l+.5,u=0;u<c;u+=2)o[u]=u/2+.5,o[u+1]=f;a.transformPoints(o),Cu.checkAndNudgePoints(t,o);try{for(var u=0;u<c;u+=2)t.get(Math.floor(o[u]),Math.floor(o[u+1]))&&s.set(u/2,l)}catch{throw new Ae}}return s},e}(Cu),Sd=function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new tm,r}(),_n=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new Ye(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r}(),rm=function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new Jg(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Ae;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var i=0,a=0;a<4;a++){var s=n[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(a,s,o){var l=(a>>t-2<<1)+(a&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(It.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new Ae},r.prototype.getCorrectedParameterData=function(e,t){var n,i;t?(n=7,i=2):(n=10,i=4);for(var a=n-i,s=new Int32Array(n),o=n-1;o>=0;--o)s[o]=e&15,e>>=4;try{var l=new yc(In.AZTEC_PARAM);l.decode(s,a)}catch{throw new Ae}for(var c=0,o=0;o<i;o++)c=(c<<4)+s[o];return c},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(t,s,1,-1),l=this.getFirstDifferent(n,s,1,1),c=this.getFirstDifferent(i,s,-1,1),f=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var u=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(u<.75||u>1.25||!this.isWhiteOrBlackRectangle(o,l,c,f))break}t=o,n=l,i=c,a=f,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Ae;this.compact=this.nbCenterLayers===5;var p=new Ye(t.getX()+.5,t.getY()-.5),h=new Ye(n.getX()+.5,n.getY()+.5),m=new Ye(i.getX()-.5,i.getY()+.5),v=new Ye(a.getX()-.5,a.getY()-.5);return this.expandSquare([p,h,m,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,i;try{var a=new qf(this.image).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new _n(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new _n(s+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new _n(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new _n(s-7,o-7),!1,-1,-1).toResultPoint()}var l=Pt.round((e.getX()+i.getX()+t.getX()+n.getX())/4),c=Pt.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{var a=new qf(this.image,15,l,c).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new _n(l+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new _n(l+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new _n(l-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new _n(l-7,c-7),!1,-1,-1).toResultPoint()}return l=Pt.round((e.getX()+i.getX()+t.getX()+n.getX())/4),c=Pt.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new _n(l,c)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,i,a){var s=Sd.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,c=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,l,l,c,l,c,c,l,c,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},r.prototype.sampleLine=function(e,t,n){for(var i=0,a=this.distanceResultPoint(e,t),s=a/n,o=e.getX(),l=e.getY(),c=s*(t.getX()-e.getX())/a,f=s*(t.getY()-e.getY())/a,u=0;u<n;u++)this.image.get(Pt.round(o+u*c),Pt.round(l+u*f))&&(i|=1<<n-u-1);return i},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,i){var a=3;e=new _n(e.getX()-a,e.getY()+a),t=new _n(t.getX()-a,t.getY()-a),n=new _n(n.getX()+a,n.getY()-a),i=new _n(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,t);return o!==s||(o=this.getColor(t,n),o!==s)?!1:(o=this.getColor(n,i),o===s)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,a=(t.getY()-e.getY())/n,s=0,o=e.getX(),l=e.getY(),c=this.image.get(e.getX(),e.getY()),f=Math.ceil(n),u=0;u<f;u++)o+=i,l+=a,this.image.get(Pt.round(o),Pt.round(l))!==c&&s++;var p=s/n;return p>.1&&p<.9?0:p<=.1===c?1:-1},r.prototype.getFirstDifferent=function(e,t,n,i){for(var a=e.getX()+n,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=n,s+=i;for(a-=n,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=n;for(a-=n;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new _n(a,s)},r.prototype.expandSquare=function(e,t,n){var i=n/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,c=new Ye(o+i*a,l+i*s),f=new Ye(o-i*a,l-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var u=new Ye(o+i*a,l+i*s),p=new Ye(o-i*a,l-i*s),h=[c,u,f,p];return h},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=Pt.round(e.getX()),n=Pt.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return Pt.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return Pt.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(It.truncDivision(this.nbLayers-4,8)+1)+15},r}(),Vf=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,i=new rm(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new _u().decode(o)}catch(u){n=u}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new _u().decode(o)}catch(u){throw n??u}var l=new pn(s.getText(),s.getRawBytes(),s.getNumBits(),a,ot.AZTEC,ar.currentTimeMillis()),c=s.getByteSegments();c!=null&&l.putMetadata(an.BYTE_SEGMENTS,c);var f=s.getECLevel();return f!=null&&l.putMetadata(an.ERROR_CORRECTION_LEVEL,f),l},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(dr.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(i,a,s){n.foundPossibleResultPoint(i)})}},r.prototype.reset=function(){},r}(),nm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){nm(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Vf,t)||this}return e})(Go);var Fr=function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(dr.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),o=270;s!==null&&s.get(an.ORIENTATION)===!0&&(o=o+s.get(an.ORIENTATION)%360),a.putMetadata(an.ORIENTATION,o);var l=a.getResultPoints();if(l!==null)for(var c=i.getHeight(),f=0;f<l.length;f++)l[f]=new Ye(c-l[f].getY()-1,l[f].getX());return a}else throw new Ae}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),i=e.getHeight(),a=new $r(n),s=t&&t.get(dr.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),l;s?l=i:l=15;for(var c=Math.trunc(i/2),f=0;f<l;f++){var u=Math.trunc((f+1)/2),p=(f&1)===0,h=c+o*(p?u:-u);if(h<0||h>=i)break;try{a=e.getBlackRow(h,a)}catch{continue}for(var m=function(E){if(E===1&&(a.reverse(),t&&t.get(dr.NEED_RESULT_POINT_CALLBACK)===!0)){var D=new Map;t.forEach(function(k,W){return D.set(W,k)}),D.delete(dr.NEED_RESULT_POINT_CALLBACK),t=D}try{var C=v.decodeRow(h,a,t);if(E===1){C.putMetadata(an.ORIENTATION,180);var z=C.getResultPoints();z!==null&&(z[0]=new Ye(n-z[0].getX()-1,z[0].getY()),z[1]=new Ye(n-z[1].getX()-1,z[1].getY()))}return{value:C}}catch{}},v=this,b=0;b<2;b++){var y=m(b);if(typeof y=="object")return y.value}}throw new Ae},r.recordPattern=function(e,t,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var s=e.getSize();if(t>=s)throw new Ae;for(var o=!e.get(t),l=0,c=t;c<s;){if(e.get(c)!==o)n[l]++;else{if(++l===i)break;n[l]=1,o=!o}c++}if(!(l===i||l===i-1&&c===s))throw new Ae},r.recordPatternInReverse=function(e,t,n){for(var i=n.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new Ae;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return Number.POSITIVE_INFINITY;var l=a/s;n*=l;for(var c=0,f=0;f<i;f++){var u=e[f],p=t[f]*l,h=u>p?u-p:p-u;if(h>n)return Number.POSITIVE_INFINITY;c+=h}return c/a},r}(),im=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Iu=function(r){im(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,l=!1,c=6,f=i;f<n;f++)if(t.get(f)!==l)s[a]++;else{if(a===c-1){for(var u=e.MAX_AVG_VARIANCE,p=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var m=Fr.patternMatchVariance(s,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);m<u&&(u=m,p=h)}if(p>=0&&t.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,p]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,l=!l}throw new Ae},e.decodeCode=function(t,n,i){Fr.recordPattern(t,i,n);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var l=e.CODE_PATTERNS[o],c=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);c<a&&(a=c,s=o)}if(s>=0)return s;throw new Ae},e.prototype.decodeRow=function(t,n,i){var a=i&&i.get(dr.ASSUME_GS1)===!0,s=e.findStartPattern(n),o=s[2],l=0,c=new Uint8Array(20);c[l++]=o;var f;switch(o){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new Pe}for(var u=!1,p=!1,h="",m=s[0],v=s[1],b=Int32Array.from([0,0,0,0,0,0]),y=0,E=0,D=o,C=0,z=!0,k=!1,W=!1;!u;){var j=p;switch(p=!1,y=E,E=e.decodeCode(n,b,v),c[l++]=E,E!==e.CODE_STOP&&(z=!0),E!==e.CODE_STOP&&(C++,D+=C*E),m=v,v+=b.reduce(function(L,Y){return L+Y},0),E){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Pe}switch(f){case e.CODE_CODE_A:if(E<64)W===k?h+=String.fromCharCode(32+E):h+=String.fromCharCode(32+E+128),W=!1;else if(E<96)W===k?h+=String.fromCharCode(E-64):h+=String.fromCharCode(E+64),W=!1;else switch(E!==e.CODE_STOP&&(z=!1),E){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!k&&W?(k=!0,W=!1):k&&W?(k=!1,W=!1):W=!0;break;case e.CODE_SHIFT:p=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:u=!0;break}break;case e.CODE_CODE_B:if(E<96)W===k?h+=String.fromCharCode(32+E):h+=String.fromCharCode(32+E+128),W=!1;else switch(E!==e.CODE_STOP&&(z=!1),E){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!k&&W?(k=!0,W=!1):k&&W?(k=!1,W=!1):W=!0;break;case e.CODE_SHIFT:p=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:u=!0;break}break;case e.CODE_CODE_C:if(E<100)E<10&&(h+="0"),h+=E;else switch(E!==e.CODE_STOP&&(z=!1),E){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:u=!0;break}break}j&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var I=v-m;if(v=n.getNextUnset(v),!n.isRange(v,Math.min(n.getSize(),v+(v-m)/2),!1))throw new Ae;if(D-=C*y,D%103!==y)throw new Gr;var P=h.length;if(P===0)throw new Ae;P>0&&z&&(f===e.CODE_CODE_C?h=h.substring(0,P-2):h=h.substring(0,P-1));for(var N=(s[1]+s[0])/2,S=m+I/2,O=c.length,A=new Uint8Array(O),B=0;B<O;B++)A[B]=c[B];var T=[new Ye(N,t),new Ye(S,t)];return new pn(h,A,0,T,ot.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Fr),am=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eu=function(r){am(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=r.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,n,i){var a,s,o,l,c=this.counters;c.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(n,c),u=n.getNextSet(f[1]),p=n.getSize(),h,m;do{e.recordPattern(n,u,c);var v=e.toNarrowWidePattern(c);if(v<0)throw new Ae;h=e.patternToChar(v),this.decodeRowResult+=h,m=u;try{for(var b=(a=void 0,rf(c)),y=b.next();!y.done;y=b.next()){var E=y.value;u+=E}}catch(O){a={error:O}}finally{try{y&&!y.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}u=n.getNextSet(u)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var D=0;try{for(var C=rf(c),z=C.next();!z.done;z=C.next()){var E=z.value;D+=E}}catch(O){o={error:O}}finally{try{z&&!z.done&&(l=C.return)&&l.call(C)}finally{if(o)throw o.error}}var k=u-m-D;if(u!==p&&k*2<D)throw new Ae;if(this.usingCheckDigit){for(var W=this.decodeRowResult.length-1,j=0,I=0;I<W;I++)j+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(I));if(this.decodeRowResult.charAt(W)!==e.ALPHABET_STRING.charAt(j%43))throw new Gr;this.decodeRowResult=this.decodeRowResult.substring(0,W)}if(this.decodeRowResult.length===0)throw new Ae;var P;this.extendedMode?P=e.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;var N=(f[1]+f[0])/2,S=m+D/2;return new pn(P,null,0,[new Ye(N,t),new Ye(S,t)],ot.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var i=t.getSize(),a=t.getNextSet(0),s=0,o=a,l=!1,c=n.length,f=a;f<i;f++)if(t.get(f)!==l)n[s]++;else{if(s===c-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,l=!l}throw new Ae},e.toNarrowWidePattern=function(t){var n,i,a=t.length,s=0,o;do{var l=2147483647;try{for(var c=(n=void 0,rf(t)),f=c.next();!f.done;f=c.next()){var u=f.value;u<l&&u>s&&(l=u)}}catch(v){n={error:v}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}s=l,o=0;for(var p=0,h=0,m=0;m<a;m++){var u=t[m];u>s&&(h|=1<<a-1-m,o++,p+=u)}if(o===3){for(var m=0;m<a&&o>0;m++){var u=t[m];if(u>s&&(o--,u*2>=p))return-1}return h}}while(o>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new Ae},e.decodeExtended=function(t){for(var n=t.length,i="",a=0;a<n;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=t.charAt(a+1),l="\0";switch(s){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Pe;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Pe;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new Pe;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Pe;break}i+=l,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Fr),om=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nu=function(r){om(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,i){var a,s,o,l,c=this.findAsteriskPattern(n),f=n.getNextSet(c[1]),u=n.getSize(),p=this.counters;p.fill(0),this.decodeRowResult="";var h,m;do{e.recordPattern(n,f,p);var v=this.toPattern(p);if(v<0)throw new Ae;h=this.patternToChar(v),this.decodeRowResult+=h,m=f;try{for(var b=(a=void 0,nf(p)),y=b.next();!y.done;y=b.next()){var E=y.value;f+=E}}catch(I){a={error:I}}finally{try{y&&!y.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var D=0;try{for(var C=nf(p),z=C.next();!z.done;z=C.next()){var E=z.value;D+=E}}catch(I){o={error:I}}finally{try{z&&!z.done&&(l=C.return)&&l.call(C)}finally{if(o)throw o.error}}if(f===u||!n.get(f))throw new Ae;if(this.decodeRowResult.length<2)throw new Ae;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var k=this.decodeExtended(this.decodeRowResult),W=(c[1]+c[0])/2,j=m+D/2;return new pn(k,null,0,[new Ye(W,t),new Ye(j,t)],ot.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,l=a.length,c=0,f=i;f<n;f++)if(t.get(f)!==o)a[c]++;else{if(c===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,f]);s+=a[0]+a[1],a.copyWithin(0,2,2+c-1),a[c-1]=0,a[c]=0,c--}else c++;a[c]=1,o=!o}throw new Ae},e.prototype.toPattern=function(t){var n,i,a=0;try{for(var s=nf(t),o=s.next();!o.done;o=s.next()){var l=o.value;a+=l}}catch(m){n={error:m}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}for(var c=0,f=t.length,u=0;u<f;u++){var p=Math.round(t[u]*9/a);if(p<1||p>4)return-1;if((u&1)===0)for(var h=0;h<p;h++)c=c<<1|1;else c<<=p}return c},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new Ae},e.prototype.decodeExtended=function(t){for(var n=t.length,i="",a=0;a<n;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=n-1)throw new Pe;var o=t.charAt(a+1),l="\0";switch(s){case"d":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Pe;break;case"a":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Pe;break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o>="X"&&o<="Z")l="";else throw new Pe;break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Pe;break}i+=l,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,i){for(var a=1,s=0,o=n-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(o)),++a>i&&(a=1);if(t.charAt(n)!==e.ALPHABET_STRING[s%47])throw new Gr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Fr),sm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Du=function(r){sm(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,i){var a,s,o=this.decodeStart(n),l=this.decodeEnd(n),c=new Ct;e.decodeMiddle(n,o[1],l[0],c);var f=c.toString(),u=null;i!=null&&(u=i.get(dr.ALLOWED_LENGTHS)),u==null&&(u=e.DEFAULT_ALLOWED_LENGTHS);var p=f.length,h=!1,m=0;try{for(var v=lm(u),b=v.next();!b.done;b=v.next()){var y=b.value;if(p===y){h=!0;break}y>m&&(m=y)}}catch(C){a={error:C}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(!h&&p>m&&(h=!0),!h)throw new Pe;var E=[new Ye(o[1],t),new Ye(l[0],t)],D=new pn(f,null,0,E,ot.ITF,new Date().getTime());return D},e.decodeMiddle=function(t,n,i,a){var s=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(s.fill(0),o.fill(0),l.fill(0);n<i;){Fr.recordPattern(t,n,s);for(var c=0;c<5;c++){var f=2*c;o[c]=s[f],l[c]=s[f+1]}var u=e.decodeDigit(o);a.append(u.toString()),u=this.decodeDigit(l),a.append(u.toString()),s.forEach(function(p){n+=p})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),i=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new Ae},e.skipWhiteSpace=function(t){var n=t.getSize(),i=t.getNextSet(0);if(i===n)throw new Ae;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof Ae&&(i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,n,i){var a=i.length,s=new Int32Array(a),o=t.getSize(),l=!1,c=0,f=n;s.fill(0);for(var u=n;u<o;u++)if(t.get(u)!==l)s[c]++;else{if(c===a-1){if(Fr.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,u];f+=s[0]+s[1],ar.arraycopy(s,2,s,0,c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,l=!l}throw new Ae},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],l=Fr.patternMatchVariance(t,o,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,i=s):l===n&&(i=-1)}if(i>=0)return i%10;throw new Ae},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Fr),cm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qo=function(r){cm(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,i,a=0,s=Int32Array.from([0,0,0]);!n;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var l=o-(a-o);l>=0&&(n=t.isRange(l,o,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,a=n-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Pe;i+=s}i*=3;for(var a=n-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Pe;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,i,a){return this.findGuardPattern(t,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,n,i,a,s){var o=t.getSize();n=i?t.getNextUnset(n):t.getNextSet(n);for(var l=0,c=n,f=a.length,u=i,p=n;p<o;p++)if(t.get(p)!==u)s[l]++;else{if(l===f-1){if(Fr.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,p]);c+=s[0]+s[1];for(var h=s.slice(2,s.length),m=0;m<l-1;m++)s[m]=h[m];s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,u=!u}throw new Ae},e.decodeDigit=function(t,n,i,a){this.recordPattern(t,i,n);for(var s=this.MAX_AVG_VARIANCE,o=-1,l=a.length,c=0;c<l;c++){var f=a[c],u=Fr.patternMatchVariance(n,f,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,o=c)}if(o>=0)return o;throw new Ae},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Fr),fm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dm=function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,i),s=i.toString(),o=r.parseExtensionString(s),l=[new Ye((n[0]+n[1])/2,e),new Ye(a,e)],c=new pn(s,null,0,l,ot.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&c.putAllMetadata(o),c},r.prototype.decodeMiddle=function(e,t,n){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),l=t[1],c=0,f=0;f<5&&l<o;f++){var u=qo.decodeDigit(e,s,l,qo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+u%10);try{for(var p=(i=void 0,fm(s)),h=p.next();!h.done;h=p.next()){var m=h.value;l+=m}}catch(b){i={error:b}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u>=10&&(c|=1<<4-f),f!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new Ae;var v=this.determineCheckDigit(c);if(r.extensionChecksum(n.toString())!==v)throw new Ae;return l},r.extensionChecksum=function(e){for(var t=e.length,n=0,i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new Ae},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[an.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="Â£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},r}(),um=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hm=function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,i),s=i.toString(),o=r.parseExtensionString(s),l=[new Ye((n[0]+n[1])/2,e),new Ye(a,e)],c=new pn(s,null,0,l,ot.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&c.putAllMetadata(o),c},r.prototype.decodeMiddle=function(e,t,n){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),l=t[1],c=0,f=0;f<2&&l<o;f++){var u=qo.decodeDigit(e,s,l,qo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+u%10);try{for(var p=(i=void 0,um(s)),h=p.next();!h.done;h=p.next()){var m=h.value;l+=m}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u>=10&&(c|=1<<1-f),f!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new Ae;if(parseInt(n.toString())%4!==c)throw new Ae;return l},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[an.ISSUE_NUMBER,parseInt(e)]])},r}(),pm=function(){function r(){}return r.decodeRow=function(e,t,n){var i=qo.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new dm;return a.decodeRow(e,t,i)}catch{var s=new hm;return s.decodeRow(e,t,i)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r}(),gm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pr=function(r){gm(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[n]=a}return t}return e.prototype.decodeRow=function(t,n,i){var a=e.findStartGuardPattern(n),s=i==null?null:i.get(dr.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new Ye((a[0]+a[1])/2,t);s.foundPossibleResultPoint(o)}var l=this.decodeMiddle(n,a,this.decodeRowStringBuffer),c=l.rowOffset,f=l.resultString;if(s!=null){var u=new Ye(c,t);s.foundPossibleResultPoint(u)}var p=e.decodeEnd(n,c);if(s!=null){var h=new Ye((p[0]+p[1])/2,t);s.foundPossibleResultPoint(h)}var m=p[1],v=m+(m-p[0]);if(v>=n.getSize()||!n.isRange(m,v,!1))throw new Ae;var b=f.toString();if(b.length<8)throw new Pe;if(!e.checkChecksum(b))throw new Gr;var y=(a[1]+a[0])/2,E=(p[1]+p[0])/2,D=this.getBarcodeFormat(),C=[new Ye(y,t),new Ye(E,t)],z=new pn(b,null,0,C,D,new Date().getTime()),k=0;try{var W=pm.decodeRow(t,n,p[1]);z.putMetadata(an.UPC_EAN_EXTENSION,W.getText()),z.putAllMetadata(W.getResultMetadata()),z.addResultPoints(W.getResultPoints()),k=W.getText().length}catch{}var j=i==null?null:i.get(dr.ALLOWED_EAN_EXTENSIONS);if(j!=null){var I=!1;for(var P in j)if(k.toString()===P){I=!0;break}if(!I)throw new Ae}return D===ot.EAN_13||ot.UPC_A,z},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,a=n-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Pe;i+=s}i*=3;for(var a=n-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Pe;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(qo),mm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ku=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gf=function(r){mm(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,o,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var f=t.getSize(),u=n[1],p=0,h=0;h<6&&u<f;h++){var m=Pr.decodeDigit(t,c,u,Pr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var v=(a=void 0,ku(c)),b=v.next();!b.done;b=v.next()){var y=b.value;u+=y}}catch(z){a={error:z}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}m>=10&&(p|=1<<5-h)}i=e.determineFirstDigit(i,p);var E=Pr.findGuardPattern(t,u,!0,Pr.MIDDLE_PATTERN,new Int32Array(Pr.MIDDLE_PATTERN.length).fill(0));u=E[1];for(var h=0;h<6&&u<f;h++){var m=Pr.decodeDigit(t,c,u,Pr.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var D=(o=void 0,ku(c)),C=D.next();!C.done;C=D.next()){var y=C.value;u+=y}}catch(W){o={error:W}}finally{try{C&&!C.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}}return{rowOffset:u,resultString:i}},e.prototype.getBarcodeFormat=function(){return ot.EAN_13},e.determineFirstDigit=function(t,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new Ae},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Pr),xm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ju=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ou=function(r){xm(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,o,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var f=t.getSize(),u=n[1],p=0;p<4&&u<f;p++){var h=Pr.decodeDigit(t,c,u,Pr.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var m=(a=void 0,ju(c)),v=m.next();!v.done;v=m.next()){var b=v.value;u+=b}}catch(C){a={error:C}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}var y=Pr.findGuardPattern(t,u,!0,Pr.MIDDLE_PATTERN,new Int32Array(Pr.MIDDLE_PATTERN.length).fill(0));u=y[1];for(var p=0;p<4&&u<f;p++){var h=Pr.decodeDigit(t,c,u,Pr.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var E=(o=void 0,ju(c)),D=E.next();!D.done;D=E.next()){var b=D.value;u+=b}}catch(k){o={error:k}}finally{try{D&&!D.done&&(l=E.return)&&l.call(E)}finally{if(o)throw o.error}}}return{rowOffset:u,resultString:i}},e.prototype.getBarcodeFormat=function(){return ot.EAN_8},e}(Pr),vm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tu=function(r){vm(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new Gf,t}return e.prototype.getBarcodeFormat=function(){return ot.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,i))},e.prototype.decodeMiddle=function(t,n,i){return this.ean13Reader.decodeMiddle(t,n,i)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var i=new pn(n.substring(1),null,null,t.getResultPoints(),ot.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new Ae},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Pr),ym=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ru=function(r){ym(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,o=this.decodeMiddleCounters.map(function(b){return b});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=t.getSize(),c=n[1],f=0,u=0;u<6&&c<l;u++){var p=e.decodeDigit(t,o,c,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var h=(a=void 0,bm(o)),m=h.next();!m.done;m=h.next()){var v=m.value;c+=v}}catch(b){a={error:b}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}p>=10&&(f|=1<<5-u)}return e.determineNumSysAndCheckDigit(new Ct(i),f),c},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Pr.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw Ae.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ot.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Ct;i.append(t.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Pr),wm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},af=function(r){wm(e,r);function e(t){var n=r.call(this)||this,i=t==null?null:t.get(dr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(ot.EAN_13)>-1&&a.push(new Gf),i.indexOf(ot.UPC_A)>-1&&a.push(new Tu),i.indexOf(ot.EAN_8)>-1&&a.push(new Ou),i.indexOf(ot.UPC_E)>-1&&a.push(new Ru)),a.length===0&&(a.push(new Gf),a.push(new Tu),a.push(new Ou),a.push(new Ru)),n.readers=a,n}return e.prototype.decodeRow=function(t,n,i){var a,s;try{for(var o=Lu(this.readers),l=o.next();!l.done;l=o.next()){var c=l.value;try{var f=c.decodeRow(t,n,i),u=f.getBarcodeFormat()===ot.EAN_13&&f.getText().charAt(0)==="0",p=i==null?null:i.get(dr.POSSIBLE_FORMATS),h=p==null||p.includes(ot.UPC_A);if(u&&h){var m=f.getRawBytes(),v=new pn(f.getText().substring(1),m,m?m.length:null,f.getResultPoints(),ot.UPC_A);return v.putAllMetadata(f.getResultMetadata()),v}return f}catch{}}}catch(b){a={error:b}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new Ae},e.prototype.reset=function(){var t,n;try{for(var i=Lu(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}(Fr),Am=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sm=function(r){Am(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,i){var a=this.getValidRowData(n);if(!a)throw new Ae;var s=this.codaBarDecodeRow(a.row);if(!s)throw new Ae;return new pn(s,null,0,[new Ye(a.left,t),new Ye(a.right,t)],ot.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var s=[],o=n[0],l=1,c=1;c<n.length;c++)n[c]===o?l++:(o=n[c],s.push(l),l=1);return s.push(l),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],i=Math.ceil(t.reduce(function(l,c){return(l+c)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[s])}var o=n.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e}(Fr),_m=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ja=function(r){_m(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var i=0;i<n.length;i++)if(Fr.patternMatchVariance(t,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new Ae},e.count=function(t){return Pt.sum(new Int32Array(t))},e.increment=function(t,n){for(var i=0,a=n[0],s=1;s<t.length;s++)n[s]>a&&(a=n[s],i=s);t[i]++},e.decrement=function(t,n){for(var i=0,a=n[0],s=1;s<t.length;s++)n[s]<a&&(a=n[s],i=s);t[i]--},e.isFinderPattern=function(t){var n,i,a=t[0]+t[1],s=a+t[2]+t[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var f=Cm(t),u=f.next();!u.done;u=f.next()){var p=u.value;p>c&&(c=p),p<l&&(l=p)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}return c<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Fr),tc=function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r}(),U1=function(){function r(e,t,n,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ye(n,a)),this.resultPoints.push(new Ye(i,a))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r}(),Im=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ro=function(){function r(){}return r.getRSSvalue=function(e,t,n){var i,a,s=0;try{for(var o=Im(e),l=o.next();!l.done;l=o.next()){var c=l.value;s+=c}}catch(E){i={error:E}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var f=0,u=0,p=e.length,h=0;h<p-1;h++){var m=void 0;for(m=1,u|=1<<h;m<e[h];m++,u&=~(1<<h)){var v=r.combins(s-m-1,p-h-2);if(n&&u===0&&s-m-(p-h-1)>=p-h-1&&(v-=r.combins(s-m-(p-h),p-h-2)),p-h-1>1){for(var b=0,y=s-m-(p-h-2);y>t;y--)b+=r.combins(s-m-y-1,p-h-3);v-=b*(p-1-h)}else s-m>t&&v--;f+=v}s-=m}return f},r.combins=function(e,t){var n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);for(var a=1,s=1,o=e;o>n;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},r}(),Em=function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,i=new $r(n),a=0,s=e[0],o=s.getRightChar().getValue(),l=11;l>=0;--l)(o&1<<l)!==0&&i.set(a),a++;for(var l=1;l<e.length;++l){for(var c=e[l],f=c.getLeftChar().getValue(),u=11;u>=0;--u)(f&1<<u)!==0&&i.set(a),a++;if(c.getRightChar()!==null)for(var p=c.getRightChar().getValue(),u=11;u>=0;--u)(p&1<<u)!==0&&i.set(a),a++}return i},r}(),Za=function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r}(),_d=function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r}(),Nm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ci=function(r){Nm(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(_d),Dm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qa=function(r){Dm(e,r);function e(t,n,i){var a=r.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(_d),km=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eo=function(r){km(e,r);function e(t,n,i){var a=r.call(this,t)||this;if(n<0||n>10||i<0||i>10)throw new Pe;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(_d),Ol=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jm=function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,i,a,s,o,l,c;if(!e)return null;if(e.length<2)throw new Ae;var f=e.substring(0,2);try{for(var u=Ol(r.TWO_DIGIT_DATA_LENGTH),p=u.next();!p.done;p=u.next()){var h=p.value;if(h[0]===f)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,h[2],e):r.processFixedAI(2,h[1],e)}}catch(k){t={error:k}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}if(e.length<3)throw new Ae;var m=e.substring(0,3);try{for(var v=Ol(r.THREE_DIGIT_DATA_LENGTH),b=v.next();!b.done;b=v.next()){var h=b.value;if(h[0]===m)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,h[2],e):r.processFixedAI(3,h[1],e)}}catch(k){i={error:k}}finally{try{b&&!b.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}try{for(var y=Ol(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),E=y.next();!E.done;E=y.next()){var h=E.value;if(h[0]===m)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(k){s={error:k}}finally{try{E&&!E.done&&(o=y.return)&&o.call(y)}finally{if(s)throw s.error}}if(e.length<4)throw new Ae;var D=e.substring(0,4);try{for(var C=Ol(r.FOUR_DIGIT_DATA_LENGTH),z=C.next();!z.done;z=C.next()){var h=z.value;if(h[0]===D)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(k){l={error:k}}finally{try{z&&!z.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}throw new Ae},r.processFixedAI=function(e,t,n){if(n.length<e)throw new Ae;var i=n.substring(0,e);if(n.length<e+t)throw new Ae;var a=n.substring(e,e+t),s=n.substring(e+t),o="("+i+")"+a,l=r.parseFieldsInGeneralPurpose(s);return l==null?o:o+l},r.processVariableAI=function(e,t,n){var i=n.substring(0,e),a;n.length<e+t?a=n.length:a=e+t;var s=n.substring(e,a),o=n.substring(a),l="("+i+")"+s,c=r.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r}(),Gl=function(){function r(e){this.buffer=new Ct,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,i=null;do{var a=this.decodeGeneralPurposeField(n,i),s=jm.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Eo(this.information.getSize(),Eo.FNC1,Eo.FNC1):new Eo(this.information.getSize(),t-1,Eo.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new Eo(e+7,i,a)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var i=0,a=0;a<n;++a)e.get(t+a)&&(i|=1<<n-a-1);return i},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Qa(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Qa(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Qa(this.current.getPosition(),this.buffer.toString()):t=new Qa(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Za(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Qa(this.current.getPosition(),this.buffer.toString());return new Za(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Za(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Qa(this.current.getPosition(),this.buffer.toString());return new Za(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Za(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Qa(this.current.getPosition(),this.buffer.toString());return new Za(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Za(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ci(e+5,ci.FNC1);if(t>=5&&t<15)return new ci(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ci(e+7,""+(n+1));if(n>=90&&n<116)return new ci(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new Pe}return new ci(e+8,a)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ci(e+5,ci.FNC1);if(t>=5&&t<15)return new ci(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ci(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Gs("Decoding invalid alphanumeric value: "+n)}return new ci(e+6,i)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r}(),W1=function(){function r(e){this.information=e,this.generalDecoder=new Gl(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r}(),Om=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pi=function(r){Om(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,n){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+n).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(W1),Tm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rm=function(r){Tm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ct;t.append("(01)");var n=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(pi),Lm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pm=function(r){Lm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ct;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(W1),Mm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$l=function(r){Mm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),o=1e5,l=0;l<5;++l)s/o===0&&t.append("0"),o/=10;t.append(s)},e}(pi),Bm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),H1=function(r){Bm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+$l.GTIN_SIZE+e.WEIGHT_SIZE)throw new Ae;var t=new Ct;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+$l.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}($l),Fm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zm=function(r){Fm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(H1),Um=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wm=function(r){Um(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(H1),Hm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qm=function(r){Hm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+pi.GTIN_SIZE)throw new Ae;var t=new Ct;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+pi.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(pi),Vm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gm=function(r){Vm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+pi.GTIN_SIZE)throw new Ae;var t=new Ct;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pi.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+pi.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(pi),$m=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sa=function(r){$m(e,r);function e(t,n,i){var a=r.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Ae;var t=new Ct;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&t.append("0"),t.append(o),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}($l);function Xm(r){try{if(r.get(1))return new Rm(r);if(!r.get(2))return new Pm(r);var e=Gl.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new zm(r);case 5:return new Wm(r)}var t=Gl.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new qm(r);case 13:return new Gm(r)}var n=Gl.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new Sa(r,"310","11");case 57:return new Sa(r,"320","11");case 58:return new Sa(r,"310","13");case 59:return new Sa(r,"320","13");case 60:return new Sa(r,"310","15");case 61:return new Sa(r,"320","15");case 62:return new Sa(r,"310","17");case 63:return new Sa(r,"320","17")}}catch(i){throw console.log(i),new Gs("unknown decoder: "+r)}}var Pu=function(){function r(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r}(),Ym=function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}},r}(),Km=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_a=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zm=function(r){Km(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(o){if(o instanceof Ae){if(!this.pairs.length)throw new Ae;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new Ae},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var i,a,s=n;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var l=(i=void 0,_a(t)),c=l.next();!c.done;c=l.next()){var f=c.value;this.pairs.push(f.getPairs())}}catch(p){i={error:p}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var u=new Array(t);u.push(o);try{return this.checkRows(u,s+1)}catch(p){console.log(p)}}}throw new Ae},e.isValidSequence=function(t){var n,i;try{for(var a=_a(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(t.length>o.length)){for(var l=!0,c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!==o[c]){l=!1;break}if(l)return!0}}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>t){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Ym(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var i,a,s,o,l,c;try{for(var f=_a(n),u=f.next();!u.done;u=f.next()){var p=u.value;if(p.getPairs().length!==t.length){var h=!0;try{for(var m=(s=void 0,_a(p.getPairs())),v=m.next();!v.done;v=m.next()){var b=v.value,y=!1;try{for(var E=(l=void 0,_a(t)),D=E.next();!D.done;D=E.next()){var C=D.value;if(Pu.equals(b,C)){y=!0;break}}}catch(z){l={error:z}}finally{try{D&&!D.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}y||(h=!1)}}catch(z){s={error:z}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}}}catch(z){i={error:z}}finally{try{u&&!u.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,n){var i,a,s,o,l,c;try{for(var f=_a(n),u=f.next();!u.done;u=f.next()){var p=u.value,h=!0;try{for(var m=(s=void 0,_a(t)),v=m.next();!v.done;v=m.next()){var b=v.value,y=!1;try{for(var E=(l=void 0,_a(p.getPairs())),D=E.next();!D.done;D=E.next()){var C=D.value;if(b.equals(C)){y=!0;break}}}catch(z){l={error:z}}finally{try{D&&!D.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}if(!y){h=!1;break}}}catch(z){s={error:z}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}if(h)return!0}}catch(z){i={error:z}}finally{try{u&&!u.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=Em.buildBitArray(t),i=Xm(n),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),l=[s[0],s[1],o[0],o[1]];return new pn(a,null,null,l,ot.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);a+=l.getLeftChar().getChecksumPortion(),s++;var c=l.getRightChar();c!=null&&(a+=c.getChecksumPortion(),s++)}a%=211;var f=211*(s-4)+a;return f===n.getValue()},e.getNextSecondBar=function(t,n){var i;return t.get(n)?(i=t.getNextUnset(n),i=t.getNextSet(i)):(i=t.getNextSet(n),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,l=-1;do this.findNextPair(t,n,l),s=this.parseFoundFinderPattern(t,i,a),s===null?l=e.getNextSecondBar(t,this.startEnd[0]):o=!1;while(o);var c=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Ae;var f;try{f=this.decodeDataCharacter(t,s,a,!1)}catch(u){f=null,console.log(u)}return new Pu(c,f,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(n))o=0;else{var l=n[n.length-1];o=l.getFinderPattern().getStartEnd()[1]}var c=n.length%2!==0;this.startFromEven&&(c=!c);for(var f=!1;o<s&&(f=!t.get(o),!!f);)o++;for(var u=0,p=o,h=o;h<s;h++)if(t.get(h)!==f)a[u]++;else{if(u===3){if(c&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=p,this.startEnd[1]=h;return}c&&e.reverseCounters(a),p+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,u--}else u++;a[u]=1,f=!f}throw new Ae},e.reverseCounters=function(t){for(var n=t.length,i=0;i<n/2;++i){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,n,i){var a,s,o;if(i){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,a=this.startEnd[0]-l,s=l,o=this.startEnd[1]}else s=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var c=this.getDecodeFinderCounters();ar.arraycopy(c,0,c,1,c.length-1),c[0]=a;var f;try{f=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new U1(f,[s,o],s,o,n)},e.prototype.decodeDataCharacter=function(t,n,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(t,n.getStartEnd()[0],s);else{e.recordPattern(t,n.getStartEnd()[1],s);for(var l=0,c=s.length-1;l<c;l++,c--){var f=s[l];s[l]=s[c],s[c]=f}}var u=17,p=Pt.sum(new Int32Array(s))/u,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(p-h)/h>.3)throw new Ae;for(var m=this.getOddCounts(),v=this.getEvenCounts(),b=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var E=1*s[l]/p,D=E+.5;if(D<1){if(E<.3)throw new Ae;D=1}else if(D>8){if(E>8.7)throw new Ae;D=8}var C=l/2;(l&1)===0?(m[C]=D,b[C]=E-D):(v[C]=D,y[C]=E-D)}this.adjustOddEvenCounts(u);for(var z=4*n.getValue()+(i?0:2)+(a?0:1)-1,k=0,W=0,l=m.length-1;l>=0;l--){if(e.isNotA1left(n,i,a)){var j=e.WEIGHTS[z][2*l];W+=m[l]*j}k+=m[l]}for(var I=0,l=v.length-1;l>=0;l--)if(e.isNotA1left(n,i,a)){var j=e.WEIGHTS[z][2*l+1];I+=v[l]*j}var P=W+I;if((k&1)!==0||k>13||k<4)throw new Ae;var N=(13-k)/2,S=e.SYMBOL_WIDEST[N],O=9-S,A=Ro.getRSSvalue(m,S,!0),B=Ro.getRSSvalue(v,O,!1),T=e.EVEN_TOTAL_SUBSET[N],L=e.GSUM[N],Y=A*T+B+L;return new tc(Y,P)},e.isNotA1left=function(t,n,i){return!(t.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(t){var n=Pt.sum(new Int32Array(this.getOddCounts())),i=Pt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;n>13?s=!0:n<4&&(a=!0);var o=!1,l=!1;i>13?l=!0:i<4&&(o=!0);var c=n+i-t,f=(n&1)===1,u=(i&1)===0;if(c===1)if(f){if(u)throw new Ae;s=!0}else{if(!u)throw new Ae;l=!0}else if(c===-1)if(f){if(u)throw new Ae;a=!0}else{if(!u)throw new Ae;o=!0}else if(c===0){if(f){if(!u)throw new Ae;n<i?(a=!0,l=!0):(s=!0,o=!0)}else if(u)throw new Ae}else throw new Ae;if(a){if(s)throw new Ae;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new Ae;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Ja),Qm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jm=function(r){Qm(e,r);function e(t,n,i){var a=r.call(this,t,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(tc),ex=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),of=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mu=function(r){ex(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,i){var a,s,o,l,c=this.decodePair(n,!1,t,i);e.addOrTally(this.possibleLeftPairs,c),n.reverse();var f=this.decodePair(n,!0,t,i);e.addOrTally(this.possibleRightPairs,f),n.reverse();try{for(var u=of(this.possibleLeftPairs),p=u.next();!p.done;p=u.next()){var h=p.value;if(h.getCount()>1)try{for(var m=(o=void 0,of(this.possibleRightPairs)),v=m.next();!v.done;v=m.next()){var b=v.value;if(b.getCount()>1&&e.checkChecksum(h,b))return e.constructResult(h,b)}}catch(y){o={error:y}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}}}catch(y){a={error:y}}finally{try{p&&!p.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}throw new Ae},e.addOrTally=function(t,n){var i,a;if(n!=null){var s=!1;try{for(var o=of(t),l=o.next();!l.done;l=o.next()){var c=l.value;if(c.getValue()===n.getValue()){c.incrementCount(),s=!0;break}}}catch(f){i={error:f}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var i=4537077*t.getValue()+n.getValue(),a=new String(i).toString(),s=new Ct,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var l=0,o=0;o<13;o++){var c=s.charAt(o).charCodeAt(0)-48;l+=(o&1)===0?3*c:c}l=10-l%10,l===10&&(l=0),s.append(l.toString());var f=t.getFinderPattern().getResultPoints(),u=n.getFinderPattern().getResultPoints();return new pn(s.toString(),null,0,[f[0],f[1],u[0],u[1]],ot.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var i=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,n,i,a){try{var s=this.findFinderPattern(t,n),o=this.parseFoundFinderPattern(t,i,n,s),l=a==null?null:a.get(dr.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=(s[0]+s[1])/2;n&&(c=t.getSize()-1-c),l.foundPossibleResultPoint(new Ye(c,i))}var f=this.decodeDataCharacter(t,o,!0),u=this.decodeDataCharacter(t,o,!1);return new Jm(1597*f.getValue()+u.getValue(),f.getChecksumPortion()+4*u.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Fr.recordPatternInReverse(t,n.getStartEnd()[0],a);else{Fr.recordPattern(t,n.getStartEnd()[1]+1,a);for(var o=0,l=a.length-1;o<l;o++,l--){var c=a[o];a[o]=a[l],a[l]=c}}for(var f=i?16:15,u=Pt.sum(new Int32Array(a))/f,p=this.getOddCounts(),h=this.getEvenCounts(),m=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var b=a[o]/u,y=Math.floor(b+.5);y<1?y=1:y>8&&(y=8);var E=Math.floor(o/2);(o&1)===0?(p[E]=y,m[E]=b-y):(h[E]=y,v[E]=b-y)}this.adjustOddEvenCounts(i,f);for(var D=0,C=0,o=p.length-1;o>=0;o--)C*=9,C+=p[o],D+=p[o];for(var z=0,k=0,o=h.length-1;o>=0;o--)z*=9,z+=h[o],k+=h[o];var W=C+3*z;if(i){if((D&1)!==0||D>12||D<4)throw new Ae;var j=(12-D)/2,I=e.OUTSIDE_ODD_WIDEST[j],P=9-I,N=Ro.getRSSvalue(p,I,!1),S=Ro.getRSSvalue(h,P,!0),O=e.OUTSIDE_EVEN_TOTAL_SUBSET[j],A=e.OUTSIDE_GSUM[j];return new tc(N*O+S+A,W)}else{if((k&1)!==0||k>10||k<4)throw new Ae;var j=(10-k)/2,I=e.INSIDE_ODD_WIDEST[j],P=9-I,N=Ro.getRSSvalue(p,I,!0),S=Ro.getRSSvalue(h,P,!1),B=e.INSIDE_ODD_TOTAL_SUBSET[j],A=e.INSIDE_GSUM[j];return new tc(S*B+N+A,W)}},e.prototype.findFinderPattern=function(t,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,o=0;o<a&&(s=!t.get(o),n!==s);)o++;for(var l=0,c=o,f=o;f<a;f++)if(t.get(f)!==s)i[l]++;else{if(l===3){if(Ja.isFinderPattern(i))return[c,f];c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,s=!s}throw new Ae},e.prototype.parseFoundFinderPattern=function(t,n,i,a){for(var s=t.get(a[0]),o=a[0]-1;o>=0&&s!==t.get(o);)o--;o++;var l=a[0]-o,c=this.getDecodeFinderCounters(),f=new Int32Array(c.length);ar.arraycopy(c,0,f,1,c.length-1),f[0]=l;var u=this.parseFinderValue(f,e.FINDER_PATTERNS),p=o,h=a[1];return i&&(p=t.getSize()-1-p,h=t.getSize()-1-h),new U1(u,[o,a[1]],p,h,n)},e.prototype.adjustOddEvenCounts=function(t,n){var i=Pt.sum(new Int32Array(this.getOddCounts())),a=Pt.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,l=!1,c=!1;t?(i>12?o=!0:i<4&&(s=!0),a>12?c=!0:a<4&&(l=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?c=!0:a<4&&(l=!0));var f=i+a-n,u=(i&1)===(t?1:0),p=(a&1)===1;if(f===1)if(u){if(p)throw new Ae;o=!0}else{if(!p)throw new Ae;c=!0}else if(f===-1)if(u){if(p)throw new Ae;s=!0}else{if(!p)throw new Ae;l=!0}else if(f===0){if(u){if(!p)throw new Ae;i<a?(s=!0,c=!0):(o=!0,l=!0)}else if(p)throw new Ae}else throw new Ae;if(s){if(o)throw new Ae;Ja.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Ja.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Ae;Ja.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&Ja.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Ja),tx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ks=function(r){tx(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var i=t?t.get(dr.POSSIBLE_FORMATS):null,a=t&&t.get(dr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(dr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(ot.EAN_13)||i.includes(ot.UPC_A)||i.includes(ot.EAN_8)||i.includes(ot.UPC_E))&&n.readers.push(new af(t)),i.includes(ot.CODE_39)&&n.readers.push(new Eu(a,s)),i.includes(ot.CODE_93)&&n.readers.push(new Nu),i.includes(ot.CODE_128)&&n.readers.push(new Iu),i.includes(ot.ITF)&&n.readers.push(new Du),i.includes(ot.CODABAR)&&n.readers.push(new Sm),i.includes(ot.RSS_14)&&n.readers.push(new Mu),i.includes(ot.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new Zm))),n.readers.length===0&&(n.readers.push(new af(t)),n.readers.push(new Eu),n.readers.push(new Nu),n.readers.push(new af(t)),n.readers.push(new Iu),n.readers.push(new Du),n.readers.push(new Mu)),n}return e.prototype.decodeRow=function(t,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,n,i)}catch{}throw new Ae},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Fr),rx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){rx(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new ks(n),t,n)||this}return e})(Go);var Bu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ht=function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),Bt=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),nx=function(){function r(e,t,n,i,a,s){var o,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var c=0,f=s.getECCodewords(),u=s.getECBlocks();try{for(var p=Bu(u),h=p.next();!h.done;h=p.next()){var m=h.value;c+=m.getCount()*(m.getDataCodewords()+f)}}catch(v){o={error:v}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(o)throw o.error}}this.totalCodewords=c}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,i;if((e&1)!==0||(t&1)!==0)throw new Pe;try{for(var a=Bu(r.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===t)return o}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new Pe},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new Ht(5,new Bt(1,3))),new r(2,12,12,10,10,new Ht(7,new Bt(1,5))),new r(3,14,14,12,12,new Ht(10,new Bt(1,8))),new r(4,16,16,14,14,new Ht(12,new Bt(1,12))),new r(5,18,18,16,16,new Ht(14,new Bt(1,18))),new r(6,20,20,18,18,new Ht(18,new Bt(1,22))),new r(7,22,22,20,20,new Ht(20,new Bt(1,30))),new r(8,24,24,22,22,new Ht(24,new Bt(1,36))),new r(9,26,26,24,24,new Ht(28,new Bt(1,44))),new r(10,32,32,14,14,new Ht(36,new Bt(1,62))),new r(11,36,36,16,16,new Ht(42,new Bt(1,86))),new r(12,40,40,18,18,new Ht(48,new Bt(1,114))),new r(13,44,44,20,20,new Ht(56,new Bt(1,144))),new r(14,48,48,22,22,new Ht(68,new Bt(1,174))),new r(15,52,52,24,24,new Ht(42,new Bt(2,102))),new r(16,64,64,14,14,new Ht(56,new Bt(2,140))),new r(17,72,72,16,16,new Ht(36,new Bt(4,92))),new r(18,80,80,18,18,new Ht(48,new Bt(4,114))),new r(19,88,88,20,20,new Ht(56,new Bt(4,144))),new r(20,96,96,22,22,new Ht(68,new Bt(4,174))),new r(21,104,104,24,24,new Ht(56,new Bt(6,136))),new r(22,120,120,18,18,new Ht(68,new Bt(6,175))),new r(23,132,132,20,20,new Ht(62,new Bt(8,163))),new r(24,144,144,22,22,new Ht(62,new Bt(8,156),new Bt(2,155))),new r(25,8,18,6,16,new Ht(7,new Bt(1,5))),new r(26,8,32,6,14,new Ht(11,new Bt(1,10))),new r(27,12,26,10,24,new Ht(14,new Bt(1,16))),new r(28,12,36,10,16,new Ht(18,new Bt(1,22))),new r(29,16,36,14,16,new Ht(24,new Bt(1,32))),new r(30,16,48,14,22,new Ht(28,new Bt(1,49)))]},r.VERSIONS=r.buildVersions(),r}(),ix=function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new Pe;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ri(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return nx.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,l=!1,c=!1,f=!1;do if(n===a&&i===0&&!o)e[t++]=this.readCorner1(a,s)&255,n-=2,i+=2,o=!0;else if(n===a-2&&i===0&&(s&3)!==0&&!l)e[t++]=this.readCorner2(a,s)&255,n-=2,i+=2,l=!0;else if(n===a+4&&i===2&&(s&7)===0&&!c)e[t++]=this.readCorner3(a,s)&255,n-=2,i+=2,c=!0;else if(n===a-2&&i===0&&(s&7)===4&&!f)e[t++]=this.readCorner4(a,s)&255,n-=2,i+=2,f=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,a,s)&255),n-=2,i+=2;while(n>=0&&i<s);n+=1,i+=3;do n>=0&&i<s&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,a,s)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<s);if(t!==this.version.getTotalCodewords())throw new Pe;return e},r.prototype.readModule=function(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,i){var a=0;return this.readModule(e-2,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t,n,i)&&(a|=1),a<<=1,this.readModule(e,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e,t,n,i)&&(a|=1),a},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new lt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,o=n/a|0,l=s*i,c=o*a,f=new Ri(c,l),u=0;u<s;++u)for(var p=u*i,h=0;h<o;++h)for(var m=h*a,v=0;v<i;++v)for(var b=u*(i+2)+1+v,y=p+v,E=0;E<a;++E){var D=h*(a+2)+1+E;if(e.get(D,b)){var C=m+E;f.set(C,y)}}return f},r}(),Fu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ax=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,i,a,s,o=t.getECBlocks(),l=0,c=o.getECBlocks();try{for(var f=Fu(c),u=f.next();!u.done;u=f.next()){var p=u.value;l+=p.getCount()}}catch(A){n={error:A}}finally{try{u&&!u.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}var h=new Array(l),m=0;try{for(var v=Fu(c),b=v.next();!b.done;b=v.next())for(var p=b.value,y=0;y<p.getCount();y++){var E=p.getDataCodewords(),D=o.getECCodewords()+E;h[m++]=new r(E,new Uint8Array(D))}}catch(A){a={error:A}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}for(var C=h[0].codewords.length,z=C-o.getECCodewords(),k=z-1,W=0,y=0;y<k;y++)for(var j=0;j<m;j++)h[j].codewords[y]=e[W++];for(var I=t.getVersionNumber()===24,P=I?8:m,j=0;j<P;j++)h[j].codewords[z-1]=e[W++];for(var N=h[0].codewords.length,y=z;y<N;y++)for(var j=0;j<m;j++){var S=I?(j+8)%m:j,O=I&&S>7?y-1:y;h[S].codewords[O]=e[W++]}if(W!==e.length)throw new lt;return h},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),q1=function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new lt(""+e);var t=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var s=8-n,o=e<s?e:s,l=s-o,c=255>>8-o<<l;t=(a[i]&c)>>l,e-=o,n+=o,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;t=t<<e|(a[i]&c)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}(),Rr;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(Rr||(Rr={}));var ox=function(){function r(){}return r.decode=function(e){var t=new q1(e),n=new Ct,i=new Ct,a=new Array,s=Rr.ASCII_ENCODE;do if(s===Rr.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,i);else{switch(s){case Rr.C40_ENCODE:this.decodeC40Segment(t,n);break;case Rr.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Rr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Rr.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Rr.BASE256_ENCODE:this.decodeBase256Segment(t,n,a);break;default:throw new Pe}s=Rr.ASCII_ENCODE}while(s!==Rr.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new vc(e,n.toString(),a.length===0?null:a,null)},r.decodeAsciiSegment=function(e,t,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new Pe;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Rr.ASCII_ENCODE;if(a===129)return Rr.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return Rr.C40_ENCODE;case 231:return Rr.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return Rr.ANSIX12_ENCODE;case 239:return Rr.TEXT_ENCODE;case 240:return Rr.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new Pe;break}}while(e.available()>0);return Rr.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new Pe;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new Pe}a=0;break;case 3:n?(t.append(String.fromCharCode(l+224)),n=!1):t.append(String.fromCharCode(l+96)),a=0;break;default:throw new Pe}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new Pe;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new Pe}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),a=0}else throw new Pe;break;default:throw new Pe}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new Pe;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var i=(e<<8)+t-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new Pe;for(var o=new Uint8Array(s),l=0;l<s;l++){if(e.available()<8)throw new Pe;o[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(o);try{t.append(Jn.decode(o,Ot.ISO88591))}catch(c){throw new Gs("Platform does not support required encoding: "+c.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,i=e-n;return i>=0?i:i+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r}(),sx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lx=function(){function r(){this.rsDecoder=new yc(In.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,i=new ix(e),a=i.getVersion(),s=i.readCodewords(),o=ax.getDataBlocks(s,a),l=0;try{for(var c=sx(o),f=c.next();!f.done;f=c.next()){var u=f.value;l+=u.getNumDataCodewords()}}catch(D){t={error:D}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}for(var p=new Uint8Array(l),h=o.length,m=0;m<h;m++){var v=o[m],b=v.getCodewords(),y=v.getNumDataCodewords();this.correctErrors(b,y);for(var E=0;E<y;E++)p[E*h+m]=b[E]}return ox.decode(p)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Gr}for(var i=0;i<t;i++)e[i]=n[i]},r}(),cx=function(){function r(e){this.image=e,this.rectangleDetector=new qf(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new Ae;t=this.shiftToModuleCenter(t);var n=t[0],i=t[1],a=t[2],s=t[3],o=this.transitionsBetween(n,s)+1,l=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(l&1)===1&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var c=r.sampleGrid(this.image,n,i,a,s,o,l);return new Ad(c,[n,i,a,s])},r.shiftPoint=function(e,t,n){var i=(t.getX()-e.getX())/(n+1),a=(t.getY()-e.getY())/(n+1);return new Ye(e.getX()+i,e.getY()+a)},r.moveAway=function(e,t,n){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<n?a-=1:a+=1,new Ye(i,a)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,n),o=this.transitionsBetween(n,i),l=this.transitionsBetween(i,a),c=this.transitionsBetween(a,t),f=s,u=[a,t,n,i];return f>o&&(f=o,u[0]=t,u[1]=n,u[2]=i,u[3]=a),f>l&&(f=l,u[0]=n,u[1]=i,u[2]=a,u[3]=t),f>c&&(u[0]=i,u[1]=a,u[2]=t,u[3]=n),u},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=r.shiftPoint(n,i,(s+1)*4),l=r.shiftPoint(i,n,(s+1)*4),c=this.transitionsBetween(o,t),f=this.transitionsBetween(l,a);return c<f?(e[0]=t,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=this.transitionsBetween(n,a),l=r.shiftPoint(t,n,(o+1)*4),c=r.shiftPoint(i,n,(s+1)*4);s=this.transitionsBetween(l,a),o=this.transitionsBetween(c,a);var f=new Ye(a.getX()+(i.getX()-n.getX())/(s+1),a.getY()+(i.getY()-n.getY())/(s+1)),u=new Ye(a.getX()+(t.getX()-n.getX())/(o+1),a.getY()+(t.getY()-n.getY())/(o+1));if(!this.isValid(f))return this.isValid(u)?u:null;if(!this.isValid(u))return f;var p=this.transitionsBetween(l,f)+this.transitionsBetween(c,f),h=this.transitionsBetween(l,u)+this.transitionsBetween(c,u);return p>h?f:u},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,o=this.transitionsBetween(i,a)+1,l=r.shiftPoint(t,n,o*4),c=r.shiftPoint(i,n,s*4);s=this.transitionsBetween(l,a)+1,o=this.transitionsBetween(c,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var f=(t.getX()+n.getX()+i.getX()+a.getX())/4,u=(t.getY()+n.getY()+i.getY()+a.getY())/4;t=r.moveAway(t,f,u),n=r.moveAway(n,f,u),i=r.moveAway(i,f,u),a=r.moveAway(a,f,u);var p,h;return l=r.shiftPoint(t,n,o*4),l=r.shiftPoint(l,a,s*4),p=r.shiftPoint(n,t,o*4),p=r.shiftPoint(p,i,s*4),c=r.shiftPoint(i,a,o*4),c=r.shiftPoint(c,n,s*4),h=r.shiftPoint(a,i,o*4),h=r.shiftPoint(h,t,s*4),[l,p,c,h]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,i,a,s,o){var l=Sd.getInstance();return l.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-i)>Math.abs(a-n);if(o){var l=n;n=i,i=l,l=a,a=s,s=l}for(var c=Math.abs(a-n),f=Math.abs(s-i),u=-c/2,p=i<s?1:-1,h=n<a?1:-1,m=0,v=this.image.get(o?i:n,o?n:i),b=n,y=i;b!==a;b+=h){var E=this.image.get(o?y:b,o?b:y);if(E!==v&&(m++,v=E),u+=f,u>0){if(y===s)break;y+=p,u-=c}}return m},r}(),$f=function(){function r(){this.decoder=new lx}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,i;if(t!=null&&t.has(dr.PURE_BARCODE)){var a=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=r.NO_POINTS}else{var s=new cx(e.getBlackMatrix()).detect();n=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=n.getRawBytes(),l=new pn(n.getText(),o,8*o.length,i,ot.DATA_MATRIX,ar.currentTimeMillis()),c=n.getByteSegments();c!=null&&l.putMetadata(an.BYTE_SEGMENTS,c);var f=n.getECLevel();return f!=null&&l.putMetadata(an.ERROR_CORRECTION_LEVEL,f),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new Ae;var i=this.moduleSize(t,e),a=t[1],s=n[1],o=t[0],l=n[0],c=(l-o+1)/i,f=(s-a+1)/i;if(c<=0||f<=0)throw new Ae;var u=i/2;a+=u,o+=u;for(var p=new Ri(c,f),h=0;h<f;h++)for(var m=a+h*i,v=0;v<c;v++)e.get(o+v*i,m)&&p.set(v,h);return p},r.moduleSize=function(e,t){for(var n=t.getWidth(),i=e[0],a=e[1];i<n&&t.get(i,a);)i++;if(i===n)throw new Ae;var s=i-e[0];if(s===0)throw new Ae;return s},r.NO_POINTS=[],r}(),fx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){fx(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new $f,t)||this}return e})(Go);var Lo;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(Lo||(Lo={}));var dx=function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new di(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new lt;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(Lo.L,"L",1),r.M=new r(Lo.M,"M",0),r.Q=new r(Lo.Q,"Q",3),r.H=new r(Lo.H,"H",2),r}(),ux=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V1=function(){function r(e){this.errorCorrectionLevel=dx.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return It.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=ux(r.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var c=l.value,f=c[0];if(f===e||f===t)return new r(c[1]);var u=r.numBitsDiffering(e,f);u<a&&(s=c[1],a=u),e!==t&&(u=r.numBitsDiffering(t,f),u<a&&(s=c[1],a=u))}}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a<=3?new r(s):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r}(),hx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xe=function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,i=this.ecBlocks;try{for(var a=hx(i),s=a.next();!s.done;s=a.next()){var o=s.value;n+=o.getCount()}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),ee=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),px=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ao=function(){function r(e,t){for(var n,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var o=0,l=a[0].getECCodewordsPerBlock(),c=a[0].getECBlocks();try{for(var f=px(c),u=f.next();!u.done;u=f.next()){var p=u.value;o+=p.getCount()*(p.getDataCodewords()+l)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}this.totalCodewords=o}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Pe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Pe}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new lt;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=0;i<r.VERSION_DECODE_INFO.length;i++){var a=r.VERSION_DECODE_INFO[i];if(a===e)return r.getVersionForNumber(i+7);var s=V1.numBitsDiffering(e,a);s<t&&(n=i+7,t=s)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Ri(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<n;s++)i===0&&(s===0||s===n-1)||i===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new xe(7,new ee(1,19)),new xe(10,new ee(1,16)),new xe(13,new ee(1,13)),new xe(17,new ee(1,9))),new r(2,Int32Array.from([6,18]),new xe(10,new ee(1,34)),new xe(16,new ee(1,28)),new xe(22,new ee(1,22)),new xe(28,new ee(1,16))),new r(3,Int32Array.from([6,22]),new xe(15,new ee(1,55)),new xe(26,new ee(1,44)),new xe(18,new ee(2,17)),new xe(22,new ee(2,13))),new r(4,Int32Array.from([6,26]),new xe(20,new ee(1,80)),new xe(18,new ee(2,32)),new xe(26,new ee(2,24)),new xe(16,new ee(4,9))),new r(5,Int32Array.from([6,30]),new xe(26,new ee(1,108)),new xe(24,new ee(2,43)),new xe(18,new ee(2,15),new ee(2,16)),new xe(22,new ee(2,11),new ee(2,12))),new r(6,Int32Array.from([6,34]),new xe(18,new ee(2,68)),new xe(16,new ee(4,27)),new xe(24,new ee(4,19)),new xe(28,new ee(4,15))),new r(7,Int32Array.from([6,22,38]),new xe(20,new ee(2,78)),new xe(18,new ee(4,31)),new xe(18,new ee(2,14),new ee(4,15)),new xe(26,new ee(4,13),new ee(1,14))),new r(8,Int32Array.from([6,24,42]),new xe(24,new ee(2,97)),new xe(22,new ee(2,38),new ee(2,39)),new xe(22,new ee(4,18),new ee(2,19)),new xe(26,new ee(4,14),new ee(2,15))),new r(9,Int32Array.from([6,26,46]),new xe(30,new ee(2,116)),new xe(22,new ee(3,36),new ee(2,37)),new xe(20,new ee(4,16),new ee(4,17)),new xe(24,new ee(4,12),new ee(4,13))),new r(10,Int32Array.from([6,28,50]),new xe(18,new ee(2,68),new ee(2,69)),new xe(26,new ee(4,43),new ee(1,44)),new xe(24,new ee(6,19),new ee(2,20)),new xe(28,new ee(6,15),new ee(2,16))),new r(11,Int32Array.from([6,30,54]),new xe(20,new ee(4,81)),new xe(30,new ee(1,50),new ee(4,51)),new xe(28,new ee(4,22),new ee(4,23)),new xe(24,new ee(3,12),new ee(8,13))),new r(12,Int32Array.from([6,32,58]),new xe(24,new ee(2,92),new ee(2,93)),new xe(22,new ee(6,36),new ee(2,37)),new xe(26,new ee(4,20),new ee(6,21)),new xe(28,new ee(7,14),new ee(4,15))),new r(13,Int32Array.from([6,34,62]),new xe(26,new ee(4,107)),new xe(22,new ee(8,37),new ee(1,38)),new xe(24,new ee(8,20),new ee(4,21)),new xe(22,new ee(12,11),new ee(4,12))),new r(14,Int32Array.from([6,26,46,66]),new xe(30,new ee(3,115),new ee(1,116)),new xe(24,new ee(4,40),new ee(5,41)),new xe(20,new ee(11,16),new ee(5,17)),new xe(24,new ee(11,12),new ee(5,13))),new r(15,Int32Array.from([6,26,48,70]),new xe(22,new ee(5,87),new ee(1,88)),new xe(24,new ee(5,41),new ee(5,42)),new xe(30,new ee(5,24),new ee(7,25)),new xe(24,new ee(11,12),new ee(7,13))),new r(16,Int32Array.from([6,26,50,74]),new xe(24,new ee(5,98),new ee(1,99)),new xe(28,new ee(7,45),new ee(3,46)),new xe(24,new ee(15,19),new ee(2,20)),new xe(30,new ee(3,15),new ee(13,16))),new r(17,Int32Array.from([6,30,54,78]),new xe(28,new ee(1,107),new ee(5,108)),new xe(28,new ee(10,46),new ee(1,47)),new xe(28,new ee(1,22),new ee(15,23)),new xe(28,new ee(2,14),new ee(17,15))),new r(18,Int32Array.from([6,30,56,82]),new xe(30,new ee(5,120),new ee(1,121)),new xe(26,new ee(9,43),new ee(4,44)),new xe(28,new ee(17,22),new ee(1,23)),new xe(28,new ee(2,14),new ee(19,15))),new r(19,Int32Array.from([6,30,58,86]),new xe(28,new ee(3,113),new ee(4,114)),new xe(26,new ee(3,44),new ee(11,45)),new xe(26,new ee(17,21),new ee(4,22)),new xe(26,new ee(9,13),new ee(16,14))),new r(20,Int32Array.from([6,34,62,90]),new xe(28,new ee(3,107),new ee(5,108)),new xe(26,new ee(3,41),new ee(13,42)),new xe(30,new ee(15,24),new ee(5,25)),new xe(28,new ee(15,15),new ee(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new xe(28,new ee(4,116),new ee(4,117)),new xe(26,new ee(17,42)),new xe(28,new ee(17,22),new ee(6,23)),new xe(30,new ee(19,16),new ee(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new xe(28,new ee(2,111),new ee(7,112)),new xe(28,new ee(17,46)),new xe(30,new ee(7,24),new ee(16,25)),new xe(24,new ee(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new xe(30,new ee(4,121),new ee(5,122)),new xe(28,new ee(4,47),new ee(14,48)),new xe(30,new ee(11,24),new ee(14,25)),new xe(30,new ee(16,15),new ee(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new xe(30,new ee(6,117),new ee(4,118)),new xe(28,new ee(6,45),new ee(14,46)),new xe(30,new ee(11,24),new ee(16,25)),new xe(30,new ee(30,16),new ee(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new xe(26,new ee(8,106),new ee(4,107)),new xe(28,new ee(8,47),new ee(13,48)),new xe(30,new ee(7,24),new ee(22,25)),new xe(30,new ee(22,15),new ee(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new xe(28,new ee(10,114),new ee(2,115)),new xe(28,new ee(19,46),new ee(4,47)),new xe(28,new ee(28,22),new ee(6,23)),new xe(30,new ee(33,16),new ee(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new xe(30,new ee(8,122),new ee(4,123)),new xe(28,new ee(22,45),new ee(3,46)),new xe(30,new ee(8,23),new ee(26,24)),new xe(30,new ee(12,15),new ee(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new xe(30,new ee(3,117),new ee(10,118)),new xe(28,new ee(3,45),new ee(23,46)),new xe(30,new ee(4,24),new ee(31,25)),new xe(30,new ee(11,15),new ee(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new xe(30,new ee(7,116),new ee(7,117)),new xe(28,new ee(21,45),new ee(7,46)),new xe(30,new ee(1,23),new ee(37,24)),new xe(30,new ee(19,15),new ee(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new xe(30,new ee(5,115),new ee(10,116)),new xe(28,new ee(19,47),new ee(10,48)),new xe(30,new ee(15,24),new ee(25,25)),new xe(30,new ee(23,15),new ee(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new xe(30,new ee(13,115),new ee(3,116)),new xe(28,new ee(2,46),new ee(29,47)),new xe(30,new ee(42,24),new ee(1,25)),new xe(30,new ee(23,15),new ee(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new xe(30,new ee(17,115)),new xe(28,new ee(10,46),new ee(23,47)),new xe(30,new ee(10,24),new ee(35,25)),new xe(30,new ee(19,15),new ee(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new xe(30,new ee(17,115),new ee(1,116)),new xe(28,new ee(14,46),new ee(21,47)),new xe(30,new ee(29,24),new ee(19,25)),new xe(30,new ee(11,15),new ee(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new xe(30,new ee(13,115),new ee(6,116)),new xe(28,new ee(14,46),new ee(23,47)),new xe(30,new ee(44,24),new ee(7,25)),new xe(30,new ee(59,16),new ee(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new xe(30,new ee(12,121),new ee(7,122)),new xe(28,new ee(12,47),new ee(26,48)),new xe(30,new ee(39,24),new ee(14,25)),new xe(30,new ee(22,15),new ee(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new xe(30,new ee(6,121),new ee(14,122)),new xe(28,new ee(6,47),new ee(34,48)),new xe(30,new ee(46,24),new ee(10,25)),new xe(30,new ee(2,15),new ee(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new xe(30,new ee(17,122),new ee(4,123)),new xe(28,new ee(29,46),new ee(14,47)),new xe(30,new ee(49,24),new ee(10,25)),new xe(30,new ee(24,15),new ee(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new xe(30,new ee(4,122),new ee(18,123)),new xe(28,new ee(13,46),new ee(32,47)),new xe(30,new ee(48,24),new ee(14,25)),new xe(30,new ee(42,15),new ee(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new xe(30,new ee(20,117),new ee(4,118)),new xe(28,new ee(40,47),new ee(7,48)),new xe(30,new ee(43,24),new ee(22,25)),new xe(30,new ee(10,15),new ee(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new xe(30,new ee(19,118),new ee(6,119)),new xe(28,new ee(18,47),new ee(31,48)),new xe(30,new ee(34,24),new ee(34,25)),new xe(30,new ee(20,15),new ee(61,16)))],r}(),Hr;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(Hr||(Hr={}));var zu=function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)},r.values=new Map([[Hr.DATA_MASK_000,new r(Hr.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Hr.DATA_MASK_001,new r(Hr.DATA_MASK_001,function(e,t){return(e&1)===0})],[Hr.DATA_MASK_010,new r(Hr.DATA_MASK_010,function(e,t){return t%3===0})],[Hr.DATA_MASK_011,new r(Hr.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Hr.DATA_MASK_100,new r(Hr.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Hr.DATA_MASK_101,new r(Hr.DATA_MASK_101,function(e,t){return e*t%6===0})],[Hr.DATA_MASK_110,new r(Hr.DATA_MASK_110,function(e,t){return e*t%6<3})],[Hr.DATA_MASK_111,new r(Hr.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r}(),gx=function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new Pe;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,n=i-1;n>=s;n--)a=this.copyBit(8,n,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=V1.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Pe},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ao.getVersionForNumber(t);for(var n=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)n=this.copyBit(s,a,n);var o=ao.decodeVersionInformation(n);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;n=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)n=this.copyBit(s,a,n);if(o=ao.decodeVersionInformation(n),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new Pe},r.prototype.copyBit=function(e,t,n){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=zu.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,o=new Uint8Array(t.getTotalCodewords()),l=0,c=0,f=0,u=i-1;u>0;u-=2){u===6&&u--;for(var p=0;p<i;p++)for(var h=s?i-1-p:p,m=0;m<2;m++)a.get(u-m,h)||(f++,c<<=1,this.bitMatrix.get(u-m,h)&&(c|=1),f===8&&(o[l++]=c,f=0,c=0));s=!s}if(l!==t.getTotalCodewords())throw new Pe;return o},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=zu.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},r}(),Uu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mx=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var i,a,s,o;if(e.length!==t.getTotalCodewords())throw new lt;var l=t.getECBlocksForLevel(n),c=0,f=l.getECBlocks();try{for(var u=Uu(f),p=u.next();!p.done;p=u.next()){var h=p.value;c+=h.getCount()}}catch(O){i={error:O}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var m=new Array(c),v=0;try{for(var b=Uu(f),y=b.next();!y.done;y=b.next())for(var h=y.value,E=0;E<h.getCount();E++){var D=h.getDataCodewords(),C=l.getECCodewordsPerBlock()+D;m[v++]=new r(D,new Uint8Array(C))}}catch(O){s={error:O}}finally{try{y&&!y.done&&(o=b.return)&&o.call(b)}finally{if(s)throw s.error}}for(var z=m[0].codewords.length,k=m.length-1;k>=0;){var W=m[k].codewords.length;if(W===z)break;k--}k++;for(var j=z-l.getECCodewordsPerBlock(),I=0,E=0;E<j;E++)for(var P=0;P<v;P++)m[P].codewords[E]=e[I++];for(var P=k;P<v;P++)m[P].codewords[j]=e[I++];for(var N=m[0].codewords.length,E=j;E<N;E++)for(var P=0;P<v;P++){var S=P<k?E:E+1;m[P].codewords[S]=e[I++]}return m},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),Kn;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(Kn||(Kn={}));var lr=function(){function r(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new lt;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(Kn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(Kn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(Kn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(Kn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(Kn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(Kn.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(Kn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(Kn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(Kn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(Kn.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r}(),xx=function(){function r(){}return r.decode=function(e,t,n,i){var a=new q1(e),s=new Ct,o=new Array,l=-1,c=-1;try{var f=null,u=!1,p=void 0;do{if(a.available()<4)p=lr.TERMINATOR;else{var h=a.readBits(4);p=lr.forBits(h)}switch(p){case lr.TERMINATOR:break;case lr.FNC1_FIRST_POSITION:case lr.FNC1_SECOND_POSITION:u=!0;break;case lr.STRUCTURED_APPEND:if(a.available()<16)throw new Pe;l=a.readBits(8),c=a.readBits(8);break;case lr.ECI:var m=r.parseECIValue(a);if(f=Mr.getCharacterSetECIByValue(m),f===null)throw new Pe;break;case lr.HANZI:var v=a.readBits(4),b=a.readBits(p.getCharacterCountBits(t));v===r.GB2312_SUBSET&&r.decodeHanziSegment(a,s,b);break;default:var y=a.readBits(p.getCharacterCountBits(t));switch(p){case lr.NUMERIC:r.decodeNumericSegment(a,s,y);break;case lr.ALPHANUMERIC:r.decodeAlphanumericSegment(a,s,y,u);break;case lr.BYTE:r.decodeByteSegment(a,s,y,f,o,i);break;case lr.KANJI:r.decodeKanjiSegment(a,s,y);break;default:throw new Pe}break}}while(p!==lr.TERMINATOR)}catch{throw new Pe}return new vc(e,s.toString(),o.length===0?null:o,n===null?null:n.toString(),l,c)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new Pe;for(var i=new Uint8Array(2*n),a=0;n>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,n--}try{t.append(Jn.decode(i,Ot.GB2312))}catch(l){throw new Pe(l)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new Pe;for(var i=new Uint8Array(2*n),a=0;n>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,n--}try{t.append(Jn.decode(i,Ot.SHIFT_JIS))}catch(l){throw new Pe(l)}},r.decodeByteSegment=function(e,t,n,i,a,s){if(8*n>e.available())throw new Pe;for(var o=new Uint8Array(n),l=0;l<n;l++)o[l]=e.readBits(8);var c;i===null?c=Ot.guessEncoding(o,s):c=i.getName();try{t.append(Jn.decode(o,c))}catch(f){throw new Pe(f)}a.push(o)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new Pe;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,i){for(var a=t.length();n>1;){if(e.available()<11)throw new Pe;var s=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(s/45))),t.append(r.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new Pe;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new Pe;var i=e.readBits(10);if(i>=1e3)throw new Pe;t.append(r.toAlphaNumericChar(Math.floor(i/100))),t.append(r.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(r.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new Pe;var a=e.readBits(7);if(a>=100)throw new Pe;t.append(r.toAlphaNumericChar(Math.floor(a/10))),t.append(r.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new Pe;var s=e.readBits(4);if(s>=10)throw new Pe;t.append(r.toAlphaNumericChar(s))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new Pe},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r}(),G1=function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r}(),Wu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vx=function(){function r(){this.rsDecoder=new yc(In.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Ri.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new gx(e),i=null;try{return this.decodeBitMatrixParser(n,t)}catch(s){i=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,t);return a.setOther(new G1(!0)),a}catch(s){throw i!==null?i:s}},r.prototype.decodeBitMatrixParser=function(e,t){var n,i,a,s,o=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),f=mx.getDataBlocks(c,o,l),u=0;try{for(var p=Wu(f),h=p.next();!h.done;h=p.next()){var m=h.value;u+=m.getNumDataCodewords()}}catch(k){n={error:k}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}var v=new Uint8Array(u),b=0;try{for(var y=Wu(f),E=y.next();!E.done;E=y.next()){var m=E.value,D=m.getCodewords(),C=m.getNumDataCodewords();this.correctErrors(D,C);for(var z=0;z<C;z++)v[b++]=D[z]}}catch(k){a={error:k}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}return xx.decode(v,o,l,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Gr}for(var i=0;i<t;i++)e[i]=n[i]},r}(),yx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bx=function(r){yx(e,r);function e(t,n,i){var a=r.call(this,t,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var a=(this.getX()+n)/2,s=(this.getY()+t)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(Ye),wx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ax=function(){function r(e,t,n,i,a,s,o){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,i=e+n,a=this.startY+t/2,s=new Int32Array(3),o=this.image,l=0;l<t;l++){var c=a+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var f=e;f<i&&!o.get(f,c);)f++;for(var u=0;f<i;){if(o.get(f,c))if(u===1)s[1]++;else if(u===2){if(this.foundPatternCross(s)){var p=this.handlePossibleCenter(s,c,f);if(p!==null)return p}s[0]=s[2],s[1]=1,s[2]=0,u=1}else s[++u]++;else u===1&&u++,s[u]++;f++}if(this.foundPatternCross(s)){var p=this.handlePossibleCenter(s,c,i);if(p!==null)return p}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Ae},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=e;l>=0&&a.get(t,l)&&o[1]<=n;)o[1]++,l--;if(l<0||o[1]>n)return NaN;for(;l>=0&&!a.get(t,l)&&o[0]<=n;)o[0]++,l--;if(o[0]>n)return NaN;for(l=e+1;l<s&&a.get(t,l)&&o[1]<=n;)o[1]++,l++;if(l===s||o[1]>n)return NaN;for(;l<s&&!a.get(t,l)&&o[2]<=n;)o[2]++,l++;if(o[2]>n)return NaN;var c=o[0]+o[1]+o[2];return 5*Math.abs(c-i)>=2*i?NaN:this.foundPatternCross(o)?r.centerFromEnd(o,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var i,a,s=e[0]+e[1]+e[2],o=r.centerFromEnd(e,n),l=this.crossCheckVertical(t,o,2*e[1],s);if(!isNaN(l)){var c=(e[0]+e[1]+e[2])/3;try{for(var f=wx(this.possibleCenters),u=f.next();!u.done;u=f.next()){var p=u.value;if(p.aboutEquals(c,l,o))return p.combineEstimate(l,o,c)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var h=new bx(o,l,c);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},r}(),Sx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_x=function(r){Sx(e,r);function e(t,n,i,a){var s=r.call(this,t,n)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var a=this.count+1,s=(this.count*this.getX()+n)/a,o=(this.count*this.getY()+t)/a,l=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,l,a)},e}(Ye),Cx=function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r}(),As=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ix=function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(dr.TRY_HARDER)!==void 0,n=e!=null&&e.get(dr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*r.MAX_MODULES));(o<r.MIN_SKIP||t)&&(o=r.MIN_SKIP);for(var l=!1,c=new Int32Array(5),f=o-1;f<a&&!l;f+=o){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var u=0,p=0;p<s;p++)if(i.get(p,f))(u&1)===1&&u++,c[u]++;else if((u&1)===0)if(u===4)if(r.foundPatternCross(c)){var h=this.handlePossibleCenter(c,f,p,n);if(h===!0)if(o=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>c[2]&&(f+=m-c[2]-o,p=s-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,u=3;continue}u=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,u=3;else c[++u]++;else c[u]++;if(r.foundPatternCross(c)){var h=this.handlePossibleCenter(c,f,s,n);h===!0&&(o=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var v=this.selectBestPatterns();return Ye.orderBestPatterns(v),new Cx(v)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&t>=s&&o.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&a[1]<=n;)a[1]++,s++;if(e<s||t<s||a[1]>n)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&a[0]<=n;)a[0]++,s++;if(a[0]>n)return!1;var l=o.getHeight(),c=o.getWidth();for(s=1;e+s<l&&t+s<c&&o.get(t+s,e+s);)a[2]++,s++;if(e+s>=l||t+s>=c)return!1;for(;e+s<l&&t+s<c&&!o.get(t+s,e+s)&&a[3]<n;)a[3]++,s++;if(e+s>=l||t+s>=c||a[3]>=n)return!1;for(;e+s<l&&t+s<c&&o.get(t+s,e+s)&&a[4]<n;)a[4]++,s++;if(a[4]>=n)return!1;var f=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(f-i)<2*i&&r.foundPatternCross(a)},r.prototype.crossCheckVertical=function(e,t,n,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(t,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(t,l)&&o[1]<=n;)o[1]++,l--;if(l<0||o[1]>n)return NaN;for(;l>=0&&a.get(t,l)&&o[0]<=n;)o[0]++,l--;if(o[0]>n)return NaN;for(l=e+1;l<s&&a.get(t,l);)o[2]++,l++;if(l===s)return NaN;for(;l<s&&!a.get(t,l)&&o[3]<n;)o[3]++,l++;if(l===s||o[3]>=n)return NaN;for(;l<s&&a.get(t,l)&&o[4]<n;)o[4]++,l++;if(o[4]>=n)return NaN;var c=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(c-i)>=2*i?NaN:r.foundPatternCross(o)?r.centerFromEnd(o,l):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,t);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,t)&&o[1]<=n;)o[1]++,l--;if(l<0||o[1]>n)return NaN;for(;l>=0&&a.get(l,t)&&o[0]<=n;)o[0]++,l--;if(o[0]>n)return NaN;for(l=e+1;l<s&&a.get(l,t);)o[2]++,l++;if(l===s)return NaN;for(;l<s&&!a.get(l,t)&&o[3]<n;)o[3]++,l++;if(l===s||o[3]>=n)return NaN;for(;l<s&&a.get(l,t)&&o[4]<n;)o[4]++,l++;if(o[4]>=n)return NaN;var c=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(c-i)>=i?NaN:r.foundPatternCross(o)?r.centerFromEnd(o,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=r.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var l=a/7,c=!1,f=this.possibleCenters,u=0,p=f.length;u<p;u++){var h=f[u];if(h.aboutEquals(l,o,s)){f[u]=h.combineEstimate(o,s,l),c=!0;break}}if(!c){var m=new _x(s,o,l);f.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=As(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=r.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,i,a=0,s=0,o=this.possibleCenters.length;try{for(var l=As(this.possibleCenters),c=l.next();!c.done;c=l.next()){var f=c.value;f.getCount()>=r.CENTER_QUORUM&&(a++,s+=f.getEstimatedModuleSize())}}catch(v){e={error:v}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var u=s/o,p=0;try{for(var h=As(this.possibleCenters),m=h.next();!m.done;m=h.next()){var f=m.value;p+=Math.abs(f.getEstimatedModuleSize()-u)}}catch(v){n={error:v}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return p<=.05*s},r.prototype.selectBestPatterns=function(){var e,t,n,i,a=this.possibleCenters.length;if(a<3)throw new Ae;var s=this.possibleCenters,o;if(a>3){var l=0,c=0;try{for(var f=As(this.possibleCenters),u=f.next();!u.done;u=f.next()){var p=u.value,h=p.getEstimatedModuleSize();l+=h,c+=h*h}}catch(z){e={error:z}}finally{try{u&&!u.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}o=l/a;var m=Math.sqrt(c/a-o*o);s.sort(function(z,k){var W=Math.abs(k.getEstimatedModuleSize()-o),j=Math.abs(z.getEstimatedModuleSize()-o);return W<j?-1:W>j?1:0});for(var v=Math.max(.2*o,m),b=0;b<s.length&&s.length>3;b++){var y=s[b];Math.abs(y.getEstimatedModuleSize()-o)>v&&(s.splice(b,1),b--)}}if(s.length>3){var l=0;try{for(var E=As(s),D=E.next();!D.done;D=E.next()){var C=D.value;l+=C.getEstimatedModuleSize()}}catch(k){n={error:k}}finally{try{D&&!D.done&&(i=E.return)&&i.call(E)}finally{if(n)throw n.error}}o=l/s.length,s.sort(function(k,W){if(W.getCount()===k.getCount()){var j=Math.abs(W.getEstimatedModuleSize()-o),I=Math.abs(k.getEstimatedModuleSize()-o);return j<I?1:j>I?-1:0}else return W.getCount()-k.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r}(),Ex=function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(dr.NEED_RESULT_POINT_CALLBACK);var t=new Ix(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,n,i);if(a<1)throw new Ae("No pattern found in proccess finder.");var s=r.computeDimension(t,n,i,a),o=ao.getProvisionalVersionForDimension(s),l=o.getDimensionForVersion()-7,c=null;if(o.getAlignmentPatternCenters().length>0)for(var f=n.getX()-t.getX()+i.getX(),u=n.getY()-t.getY()+i.getY(),p=1-3/l,h=Math.floor(t.getX()+p*(f-t.getX())),m=Math.floor(t.getY()+p*(u-t.getY())),v=4;v<=16;v<<=1)try{c=this.findAlignmentInRegion(a,h,m,v);break}catch(D){if(!(D instanceof Ae))throw D}var b=r.createTransform(t,n,i,c,s),y=r.sampleGrid(this.image,b,s),E;return c===null?E=[i,t,n]:E=[i,t,n,c],new Ad(y,E)},r.createTransform=function(e,t,n,i,a){var s=a-3.5,o,l,c,f;return i!==null?(o=i.getX(),l=i.getY(),c=s-3,f=c):(o=t.getX()-e.getX()+n.getX(),l=t.getY()-e.getY()+n.getY(),c=s,f=s),z1.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,c,f,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,l,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var i=Sd.getInstance();return i.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,i){var a=Pt.round(Ye.distance(e,t)/i),s=Pt.round(Ye.distance(e,n)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new Ae("Dimensions could be not found.")}return o},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,n,i),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var l=Math.floor(t-(i-t)*s);return s=1,l<0?(s=t/(t-l),l=0):l>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,o,l),a-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,i){var a=Math.abs(i-t)>Math.abs(n-e);if(a){var s=e;e=t,t=s,s=n,n=i,i=s}for(var o=Math.abs(n-e),l=Math.abs(i-t),c=-o/2,f=e<n?1:-1,u=t<i?1:-1,p=0,h=n+f,m=e,v=t;m!==h;m+=f){var b=a?v:m,y=a?m:v;if(p===1===this.image.get(b,y)){if(p===2)return Pt.distance(m,v,e,t);p++}if(c+=l,c>0){if(v===i)break;v+=u,c-=o}}return p===2?Pt.distance(n+f,i,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,i){var a=Math.floor(i*e),s=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-s<e*3)throw new Ae("Alignment top exceeds estimated module size.");var l=Math.max(0,n-a),c=Math.min(this.image.getHeight()-1,n+a);if(c-l<e*3)throw new Ae("Alignment bottom exceeds estimated module size.");var f=new Ax(this.image,s,l,o-s,c-l,e,this.resultPointCallback);return f.find()},r}(),Xf=function(){function r(){this.decoder=new vx}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,i;if(t!=null&&t.get(dr.PURE_BARCODE)!==void 0){var a=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),i=r.NO_POINTS}else{var s=new Ex(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}n.getOther()instanceof G1&&n.getOther().applyMirroredCorrection(i);var o=new pn(n.getText(),n.getRawBytes(),void 0,i,ot.QR_CODE,void 0),l=n.getByteSegments();l!==null&&o.putMetadata(an.BYTE_SEGMENTS,l);var c=n.getECLevel();return c!==null&&o.putMetadata(an.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(o.putMetadata(an.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),o.putMetadata(an.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),o},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new Ae;var i=this.moduleSize(t,e),a=t[1],s=n[1],o=t[0],l=n[0];if(o>=l||a>=s)throw new Ae;if(s-a!==l-o&&(l=o+(s-a),l>=e.getWidth()))throw new Ae;var c=Math.round((l-o+1)/i),f=Math.round((s-a+1)/i);if(c<=0||f<=0)throw new Ae;if(f!==c)throw new Ae;var u=Math.floor(i/2);a+=u,o+=u;var p=o+Math.floor((c-1)*i)-l;if(p>0){if(p>u)throw new Ae;o-=p}var h=a+Math.floor((f-1)*i)-s;if(h>0){if(h>u)throw new Ae;a-=h}for(var m=new Ri(c,f),v=0;v<f;v++)for(var b=a+Math.floor(v*i),y=0;y<c;y++)e.get(o+Math.floor(y*i),b)&&m.set(y,v);return m},r.moduleSize=function(e,t){for(var n=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],o=!0,l=0;a<i&&s<n;){if(o!==t.get(a,s)){if(++l===5)break;o=!o}a++,s++}if(a===i||s===n)throw new Ae;return(a-e[0])/7},r.NO_POINTS=new Array,r}(),Nx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return Pt.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=Nx(e),o=s.next();!o.done;o=s.next()){var l=o.value;i[a++]=l}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},r.getCodeword=function(e){var t=Br.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r}(),Dx=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),kx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jx=function(){function r(){}return r.detectMultiple=function(e,t,n){var i=e.getBlackMatrix(),a=r.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=r.detect(n,i)),new Dx(i,a)},r.detect=function(e,t){for(var n,i,a=new Array,s=0,o=0,l=!1;s<t.getHeight();){var c=r.findVertices(t,s,o);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,o=0;try{for(var f=(n=void 0,kx(a)),u=f.next();!u.done;u=f.next()){var p=u.value;p[1]!=null&&(s=Math.trunc(Math.max(s,p[1].getY()))),p[3]!=null&&(s=Math.max(s,Math.trunc(p[3].getY())))}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}s+=r.ROW_STEP;continue}if(l=!0,a.push(c),!e)break;c[2]!=null?(o=Math.trunc(c[2].getX()),s=Math.trunc(c[2].getY())):(o=Math.trunc(c[4].getX()),s=Math.trunc(c[4].getY()))}return a},r.findVertices=function(e,t,n){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return r.copyToResult(s,r.findRowsWithPattern(e,i,a,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),r.copyToResult(s,r.findRowsWithPattern(e,i,a,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),s},r.copyToResult=function(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i]},r.findRowsWithPattern=function(e,t,n,i,a,s){for(var o=new Array(4),l=!1,c=new Int32Array(s.length);i<t;i+=r.ROW_STEP){var f=r.findGuardPattern(e,a,i,n,!1,s,c);if(f!=null){for(;i>0;){var u=r.findGuardPattern(e,a,--i,n,!1,s,c);if(u!=null)f=u;else{i++;break}}o[0]=new Ye(f[0],i),o[1]=new Ye(f[1],i),l=!0;break}}var p=i+1;if(l){for(var h=0,u=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);p<t;p++){var f=r.findGuardPattern(e,u[0],p,n,!1,s,c);if(f!=null&&Math.abs(u[0]-f[0])<r.MAX_PATTERN_DRIFT&&Math.abs(u[1]-f[1])<r.MAX_PATTERN_DRIFT)u=f,h=0;else{if(h>r.SKIPPED_ROW_COUNT_MAX)break;h++}}p-=h+1,o[2]=new Ye(u[0],p),o[3]=new Ye(u[1],p)}return p-i<r.BARCODE_MIN_HEIGHT&&Br.fill(o,null),o},r.findGuardPattern=function(e,t,n,i,a,s,o){Br.fillWithin(o,0,o.length,0);for(var l=t,c=0;e.get(l,n)&&l>0&&c++<r.MAX_PIXEL_DRIFT;)l--;for(var f=l,u=0,p=s.length,h=a;f<i;f++){var m=e.get(f,n);if(m!==h)o[u]++;else{if(u===p-1){if(r.patternMatchVariance(o,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([l,f]);l+=o[0]+o[1],ar.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,h=!h}}return u===p-1&&r.patternMatchVariance(o,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([l,f-1]):null},r.patternMatchVariance=function(e,t,n){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return 1/0;var l=a/s;n*=l;for(var c=0,f=0;f<i;f++){var u=e[f],p=t[f]*l,h=u>p?u-p:p-u;if(h>n)return 1/0;c+=h}return c/a},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r}(),Ox=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ro=function(){function r(e,t){if(t.length===0)throw new lt;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),ar.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=Ox(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}for(var l=this.coefficients[0],c=this.coefficients.length,f=1;f<c;f++)l=this.field.add(this.field.multiply(e,l),this.coefficients[f]);return l},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new lt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var a=new Int32Array(n.length),s=n.length-t.length;ar.arraycopy(n,0,a,0,s);for(var o=s;o<n.length;o++)a[o]=this.field.add(t[o-s],n[o]);return new r(this.field,a)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new lt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new lt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,i=e.coefficients,a=i.length,s=new Int32Array(n+a-1),o=0;o<n;o++)for(var l=t[o],c=0;c<a;c++)s[o+c]=this.field.add(s[o+c],this.field.multiply(l,i[c]));return new r(this.field,s)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new lt;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new r(this.field,i)},r.prototype.toString=function(){for(var e=new Ct,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r}(),Tx=function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new lt;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new F1;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r}(),Rx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lx=function(r){Rx(e,r);function e(t,n){var i=r.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*n%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new ro(i,new Int32Array([0])),i.one=new ro(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new lt;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new ro(this,i)},e.PDF417_GF=new e(Lt.NUMBER_OF_CODEWORDS,3),e}(Tx),Px=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mx=function(){function r(){this.field=Lx.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var i,a,s=new ro(this.field,e),o=new Int32Array(t),l=!1,c=t;c>0;c--){var f=s.evaluateAt(this.field.exp(c));o[t-c]=f,f!==0&&(l=!0)}if(!l)return 0;var u=this.field.getOne();if(n!=null)try{for(var p=Px(n),h=p.next();!h.done;h=p.next()){var m=h.value,v=this.field.exp(e.length-1-m),b=new ro(this.field,new Int32Array([this.field.subtract(0,v),1]));u=u.multiply(b)}}catch(j){i={error:j}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}for(var y=new ro(this.field,o),E=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),y,t),D=E[0],C=E[1],z=this.findErrorLocations(D),k=this.findErrorMagnitudes(C,D,z),c=0;c<z.length;c++){var W=e.length-1-this.field.log(z[c]);if(W<0)throw Gr.getChecksumInstance();e[W]=this.field.subtract(e[W],k[c])}return z.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,o=this.field.getZero(),l=this.field.getOne();s.getDegree()>=Math.round(n/2);){var c=a,f=o;if(a=s,o=l,a.isZero())throw Gr.getChecksumInstance();s=c;for(var u=this.field.getZero(),p=a.getCoefficient(a.getDegree()),h=this.field.inverse(p);s.getDegree()>=a.getDegree()&&!s.isZero();){var m=s.getDegree()-a.getDegree(),v=this.field.multiply(s.getCoefficient(s.getDegree()),h);u=u.add(this.field.buildMonomial(m,v)),s=s.subtract(a.multiplyByMonomial(m,v))}l=u.multiply(o).subtract(f).negative()}var b=l.getCoefficient(0);if(b===0)throw Gr.getChecksumInstance();var y=this.field.inverse(b),E=l.multiply(y),D=s.multiply(y);return[E,D]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==t)throw Gr.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var o=new ro(this.field,a),l=n.length,c=new Int32Array(l),s=0;s<l;s++){var f=this.field.inverse(n[s]),u=this.field.subtract(0,e.evaluateAt(f)),p=this.field.inverse(o.evaluateAt(f));c[s]=this.field.multiply(u,p)}return c},r}(),Yf=function(){function r(e,t,n,i,a){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,i,a)}return r.prototype.constructor_1=function(e,t,n,i,a){var s=t==null||n==null,o=i==null||a==null;if(s&&o)throw new Ae;s?(t=new Ye(0,i.getY()),n=new Ye(0,a.getY())):o&&(i=new Ye(e.getWidth()-1,t.getY()),a=new Ye(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,c=Math.trunc(l.getY()-e);c<0&&(c=0);var f=new Ye(l.getX(),c);n?i=f:s=f}if(t>0){var u=n?this.bottomLeft:this.bottomRight,p=Math.trunc(u.getY()+t);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);var h=new Ye(u.getX(),p);n?a=h:o=h}return new r(this.image,i,a,s,o)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r}(),Bx=function(){function r(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r}(),Cd=function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function i(s,o,l,c,f,u){if(s==="%%")return"%";if(t[++n]!==void 0){s=c?parseInt(c.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,h;switch(u){case"s":h=t[n];break;case"c":h=t[n][0];break;case"f":h=parseFloat(t[n]).toFixed(s);break;case"p":h=parseFloat(t[n]).toPrecision(s);break;case"e":h=parseFloat(t[n]).toExponential(s);break;case"x":h=parseInt(t[n]).toString(p||16);break;case"d":h=parseFloat(parseInt(t[n],p||10).toPrecision(s)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(p);for(var m=parseInt(l),v=l&&l[0]+""=="0"?"0":" ";h.length<m;)h=o!==void 0?h+v:v+h;return h}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r}(),Fx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$1=function(){function r(e){this.boundingBox=new Yf(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new Cd,i=0;try{for(var a=Fx(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r}(),zx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ux=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return a},js=function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,i=new Array,a=function(u,p){var h={getKey:function(){return u},getValue:function(){return p}};h.getValue()>n?(n=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===n&&i.push(h.getKey())};try{for(var s=zx(this.values.entries()),o=s.next();!o.done;o=s.next()){var l=Ux(o.value,2),c=l[0],f=l[1];a(c,f)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Lt.toIntArray(i)},r.prototype.getConfidence=function(e){return this.values.get(e)},r}(),Wx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hu=function(r){Wx(e,r);function e(t,n){var i=r.call(this,t)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var t,n;try{for(var i=sf(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=-1,f=1,u=0,p=o;p<l;p++)if(n[p]!=null){var h=n[p],m=h.getRowNumber()-c;if(m===0)u++;else if(m===1)f=Math.max(f,u),u=1,c=h.getRowNumber();else if(m<0||h.getRowNumber()>=t.getRowCount()||m>p)n[p]=null;else{var v=void 0;f>2?v=(f-2)*m:v=m;for(var b=v>=p,y=1;y<=v&&!b;y++)b=n[p-y]!=null;b?n[p]=null:(c=h.getRowNumber(),u=1)}}},e.prototype.getRowHeights=function(){var t,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=sf(this.getCodewords()),o=s.next();!o.done;o=s.next()){var l=o.value;if(l!=null){var c=l.getRowNumber();if(c>=a.length)continue;a[c]++}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),c=-1,f=s;f<o;f++)if(l[f]!=null){var u=l[f];u.setRowNumberAsRowIndicatorColumn();var p=u.getRowNumber()-c;p===0||(p===1?c=u.getRowNumber():u.getRowNumber()>=t.getRowCount()?l[f]=null:c=u.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,i=this.getCodewords(),a=new js,s=new js,o=new js,l=new js;try{for(var c=sf(i),f=c.next();!f.done;f=c.next()){var u=f.value;if(u!=null){u.setRowNumberAsRowIndicatorColumn();var p=u.getValue()%30,h=u.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:s.setValue(p*3+1);break;case 1:l.setValue(p/3),o.setValue(p%3);break;case 2:a.setValue(p+1);break}}}}catch(v){t={error:v}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<Lt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>Lt.MAX_ROWS_IN_BARCODE)return null;var m=new Bx(a.getValue()[0],s.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(t,n){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>n.getRowCount()){t[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==n.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==n.getErrorCorrectionLevel()||s%3!==n.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==n.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e}($1),Hx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qx=function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Lt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[n];o!=null&&(a=r.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[n];o!=null&&(a=r.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=n[t],o=this.detectionResultColumns[e-1].getCodewords(),l=o;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=o[t],c[3]=l[t],t>0&&(c[0]=n[t-1],c[4]=o[t-1],c[5]=l[t-1]),t>1&&(c[8]=n[t-2],c[10]=o[t-2],c[11]=l[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=o[t+1],c[7]=l[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=o[t+2],c[13]=l[t+2]);try{for(var f=Hx(c),u=f.next();!u.done;u=f.next()){var p=u.value;if(r.adjustRowNumber(s,p))return}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Cd,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},r}(),Vx=function(){function r(e,t,n,i){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r}(),Gx=function(){function r(){}return r.initialize=function(){for(var e=0;e<Lt.SYMBOL_TABLE.length;e++)for(var t=Lt.SYMBOL_TABLE[e],n=t&1,i=0;i<Lt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===n;)a+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(Lt.BARS_IN_MODULE)),r.RATIOS_TABLE[e][Lt.BARS_IN_MODULE-i-1]=Math.fround(a/Lt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=Pt.sum(e),n=new Int32Array(Lt.BARS_IN_MODULE),i=0,a=0,s=0;s<Lt.MODULES_IN_CODEWORD;s++){var o=t/(2*Lt.MODULES_IN_CODEWORD)+s*t/Lt.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),n[i]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return Lt.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=Pt.sum(e),n=new Array(Lt.BARS_IN_MODULE);if(t>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);var a=Hf.MAX_VALUE,s=-1;this.bSymbolTableReady||r.initialize();for(var o=0;o<r.RATIOS_TABLE.length;o++){for(var l=0,c=r.RATIOS_TABLE[o],f=0;f<Lt.BARS_IN_MODULE;f++){var u=Math.fround(c[f]-n[f]);if(l+=Math.fround(u*u),l>=a)break}l<a&&(a=l,s=Lt.SYMBOL_TABLE[o])}return s},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(Lt.SYMBOL_TABLE.length).map(function(e){return new Array(Lt.BARS_IN_MODULE)}),r}(),$x=function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r}(),qu=function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r}(),Xx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yx=function(r){Xx(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Nn),Kx=function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new Yx;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new bd;if(n===0)return;for(var i=0;i<n;i++)this.write(e[t+i])},r.prototype.flush=function(){},r.prototype.close=function(){},r}(),Zx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qx=function(r){Zx(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Nn),Jx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),e5=function(r){Jx(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new lt("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,i=n<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new Qx;i=It.MAX_VALUE}this.buf=Br.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,i){if(n<0||n>t.length||i<0||n+i-t.length>0)throw new bd;this.ensureCapacity(this.count+i),ar.arraycopy(t,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Br.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(Kx),Zt;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Zt||(Zt={}));function X1(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Tl;function Ea(r){if(typeof Tl>"u"&&(Tl=X1()),Tl===null)throw new Error("BigInt is not supported!");return Tl(r)}function t5(){var r=[];r[0]=Ea(1);var e=Ea(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var r5=function(){function r(){}return r.decode=function(e,t){var n=new Ct(""),i=Mr.ISO8859_1;n.enableDecoding(i);for(var a=1,s=e[a++],o=new $x;a<e[0];){switch(s){case r.TEXT_COMPACTION_MODE_LATCH:a=r.textCompaction(e,a,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:a=r.byteCompaction(s,e,i,a,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:a=r.numericCompaction(e,a,n);break;case r.ECI_CHARSET:Mr.getCharacterSetECIByValue(e[a++]);break;case r.ECI_GENERAL_PURPOSE:a+=2;break;case r.ECI_USER_DEFINED:a++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=r.decodeMacroBlock(e,a,o);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new Pe;default:a--,a=r.textCompaction(e,a,n);break}if(a<e.length)s=e[a++];else throw Pe.getFormatInstance()}if(n.length()===0)throw Pe.getFormatInstance();var l=new vc(null,n.toString(),null,t);return l.setOther(o),l},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Pe.getFormatInstance();for(var i=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<r.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];n.setSegmentIndex(It.parseInt(r.decodeBase900toBase10(i,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Ct;t=r.textCompaction(e,t,s),n.setFileId(s.toString());var o=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new Ct;t=r.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new Ct;t=r.textCompaction(e,t+1,c),n.setSender(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new Ct;t=r.textCompaction(e,t+1,f),n.setAddressee(f.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var u=new Ct;t=r.numericCompaction(e,t+1,u),n.setSegmentCount(It.parseInt(u.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var p=new Ct;t=r.numericCompaction(e,t+1,p),n.setTimestamp(qu.parseLong(p.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Ct;t=r.numericCompaction(e,t+1,h),n.setChecksum(It.parseInt(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new Ct;t=r.numericCompaction(e,t+1,m),n.setFileSize(qu.parseLong(m.toString()));break;default:throw Pe.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw Pe.getFormatInstance()}if(o!==-1){var v=t-o;n.isLastSegment()&&v--,n.setOptionalData(Br.copyOfRange(e,o,o+v))}return t},r.textCompaction=function(e,t,n){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,o=!1;t<e[0]&&!o;){var l=e[t++];if(l<r.TEXT_COMPACTION_MODE_LATCH)i[s]=l/30,i[s+1]=l%30,s+=2;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:i[s++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],a[s]=l,s++;break}}return r.decodeTextCompaction(i,a,s,n),t},r.decodeTextCompaction=function(e,t,n,i){for(var a=Zt.ALPHA,s=Zt.ALPHA,o=0;o<n;){var l=e[o],c="";switch(a){case Zt.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case r.LL:a=Zt.LOWER;break;case r.ML:a=Zt.MIXED;break;case r.PS:s=a,a=Zt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case r.AS:s=a,a=Zt.ALPHA_SHIFT;break;case r.ML:a=Zt.MIXED;break;case r.PS:s=a,a=Zt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.MIXED:if(l<r.PL)c=r.MIXED_CHARS[l];else switch(l){case r.PL:a=Zt.PUNCT;break;case 26:c=" ";break;case r.LL:a=Zt.LOWER;break;case r.AL:a=Zt.ALPHA;break;case r.PS:s=a,a=Zt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.PUNCT:if(l<r.PAL)c=r.PUNCT_CHARS[l];else switch(l){case r.PAL:a=Zt.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.ALPHA_SHIFT:if(a=s,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.PUNCT_SHIFT:if(a=s,l<r.PAL)c=r.PUNCT_CHARS[l];else switch(l){case r.PAL:a=Zt.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break}c!==""&&i.append(c),o++}},r.byteCompaction=function(e,t,n,i,a){var s=new e5,o=0,l=0,c=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),u=t[i++];i<t[0]&&!c;)switch(f[o++]=u,l=900*l+u,u=t[i++],u){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,c=!0;break;default:if(o%5===0&&o>0){for(var p=0;p<6;++p)s.write(Number(Ea(l)>>Ea(8*(5-p))));l=0,o=0}break}i===t[0]&&u<r.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=u);for(var h=0;h<o;h++)s.write(f[h]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!c;){var m=t[i++];if(m<r.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+m;else switch(m){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,c=!0;break}if(o%5===0&&o>0){for(var p=0;p<6;++p)s.write(Number(Ea(l)>>Ea(8*(5-p))));l=0,o=0}}break}return a.append(Jn.decode(s.toByteArray(),n)),i},r.numericCompaction=function(e,t,n){for(var i=0,a=!1,s=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var o=e[t++];if(t===e[0]&&(a=!0),o<r.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%r.MAX_NUMERIC_CODEWORDS===0||o===r.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(r.decodeBase900toBase10(s,i)),i=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=Ea(0),i=0;i<t;i++)n+=r.EXP900[t-i-1]*Ea(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new Pe;return a.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=X1()?t5():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r}(),Ss=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n5=function(){function r(){}return r.decode=function(e,t,n,i,a,s,o){for(var l=new Yf(e,t,n,i,a),c=null,f=null,u,p=!0;;p=!1){if(t!=null&&(c=r.getRowIndicatorColumn(e,l,t,!0,s,o)),i!=null&&(f=r.getRowIndicatorColumn(e,l,i,!1,s,o)),u=r.merge(c,f),u==null)throw Ae.getNotFoundInstance();var h=u.getBoundingBox();if(p&&h!=null&&(h.getMinY()<l.getMinY()||h.getMaxY()>l.getMaxY()))l=h;else break}u.setBoundingBox(l);var m=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,c),u.setDetectionResultColumn(m,f);for(var v=c!=null,b=1;b<=m;b++){var y=v?b:m-b;if(u.getDetectionResultColumn(y)===void 0){var E=void 0;y===0||y===m?E=new Hu(l,y===0):E=new $1(l),u.setDetectionResultColumn(y,E);for(var D=-1,C=D,z=l.getMinY();z<=l.getMaxY();z++){if(D=r.getStartColumn(u,y,z,v),D<0||D>l.getMaxX()){if(C===-1)continue;D=C}var k=r.detectCodeword(e,l.getMinX(),l.getMaxX(),v,D,z,s,o);k!=null&&(E.setCodeword(z,k),C=D,s=Math.min(s,k.getWidth()),o=Math.max(o,k.getWidth()))}}}return r.createDecoderResult(u)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var i=Yf.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new qx(n,i)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=r.getMax(i),s=0;try{for(var o=Ss(i),l=o.next();!l.done;l=o.next()){var c=l.value;if(s+=a-c,c>0)break}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var f=e.getCodewords(),u=0;s>0&&f[u]==null;u++)s--;for(var p=0,u=i.length-1;u>=0&&(p+=a-i[u],!(i[u]>0));u--);for(var u=f.length-1;p>0&&f[u]==null;u--)p--;return e.getBoundingBox().addMissingRows(s,p,e.isLeft())},r.getMax=function(e){var t,n,i=-1;try{for(var a=Ss(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,i,a,s){for(var o=new Hu(t,i),l=0;l<2;l++)for(var c=l===0?1:-1,f=Math.trunc(Math.trunc(n.getX())),u=Math.trunc(Math.trunc(n.getY()));u<=t.getMaxY()&&u>=t.getMinY();u+=c){var p=r.detectCodeword(e,0,e.getWidth(),i,f,u,a,s);p!=null&&(o.setCodeword(u,p),i?f=p.getStartX():f=p.getEndX())}return o},r.adjustCodewordCount=function(e,t){var n=t[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Lt.MAX_CODEWORDS_IN_BARCODE)throw Ae.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var l=0;l<e.getBarcodeColumnCount();l++){var c=t[o][l+1].getValue(),f=o*e.getBarcodeColumnCount()+l;c.length===0?n.push(f):c.length===1?i[f]=c[0]:(s.push(f),a.push(c))}for(var u=new Array(a.length),p=0;p<u.length;p++)u[p]=a[p];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Lt.toIntArray(n),Lt.toIntArray(s),u)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var l=0;l<s.length;l++)t[i[l]]=a[l][s[l]];try{return r.decodeCodewords(t,e,n)}catch(f){var c=f instanceof Gr;if(!c)throw f}if(s.length===0)throw Gr.getChecksumInstance();for(var l=0;l<s.length;l++)if(s[l]<a[l].length-1){s[l]++;break}else if(s[l]=0,l===s.length-1)throw Gr.getChecksumInstance()}throw Gr.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var l=0;l<s[o].length;l++)s[o][l]=new js;var c=0;try{for(var f=Ss(e.getDetectionResultColumns()),u=f.next();!u.done;u=f.next()){var p=u.value;if(p!=null)try{for(var h=(i=void 0,Ss(p.getCodewords())),m=h.next();!m.done;m=h.next()){var v=m.value;if(v!=null){var b=v.getRowNumber();if(b>=0){if(b>=s.length)continue;s[b][c].setValue(v.getValue())}}}}catch(y){i={error:y}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}c++}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}return s},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,i){var a,s,o=i?1:-1,l=null;if(r.isValidBarcodeColumn(e,t-o)&&(l=e.getDetectionResultColumn(t-o).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(r.isValidBarcodeColumn(e,t-o)&&(l=e.getDetectionResultColumn(t-o).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();for(var c=0;r.isValidBarcodeColumn(e,t-o);){t-=o;try{for(var f=(a=void 0,Ss(e.getDetectionResultColumn(t).getCodewords())),u=f.next();!u.done;u=f.next()){var p=u.value;if(p!=null)return(i?p.getEndX():p.getStartX())+o*c*(p.getEndX()-p.getStartX())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,i,a,s,o,l){a=r.adjustCodewordStartColumn(e,t,n,i,a,s);var c=r.getModuleBitCount(e,t,n,i,a,s);if(c==null)return null;var f,u=Pt.sum(c);if(i)f=a+u;else{for(var p=0;p<c.length/2;p++){var h=c[p];c[p]=c[c.length-1-p],c[c.length-1-p]=h}f=a,a=f-u}if(!r.checkCodewordSkew(u,o,l))return null;var m=Gx.getDecodedValue(c),v=Lt.getCodeword(m);return v===-1?null:new Vx(a,f,r.getCodewordBucketNumber(m),v)},r.getModuleBitCount=function(e,t,n,i,a,s){for(var o=a,l=new Int32Array(8),c=0,f=i?1:-1,u=i;(i?o<n:o>=t)&&c<l.length;)e.get(o,s)===u?(l[c]++,o+=f):(c++,u=!u);return c===l.length||o===(i?n:t)&&c===l.length-1?l:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,i,a,s){for(var o=a,l=i?-1:1,c=0;c<2;c++){for(;(i?o>=t:o<n)&&i===e.get(o,s);){if(Math.abs(a-o)>r.CODEWORD_SKEW_SIZE)return a;o+=l}l=-l,i=!i}return o},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw Pe.getFormatInstance();var i=1<<t+1,a=r.correctErrors(e,n,i);r.verifyCodewordCount(e,i);var s=r5.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(n.length),s},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw Gr.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw Pe.getFormatInstance();var n=e[0];if(n>e.length)throw Pe.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw Pe.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,i=t.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new Cd,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new Mx,r}(),i5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kf=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw Ae.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof Pe||n instanceof Gr?Ae.getNotFoundInstance():n}},r.decode=function(e,t,n){var i,a,s=new Array,o=jx.detectMultiple(e,t,n);try{for(var l=i5(o.getPoints()),c=l.next();!c.done;c=l.next()){var f=c.value,u=n5.decode(o.getBits(),f[4],f[5],f[6],f[7],r.getMinCodewordWidth(f),r.getMaxCodewordWidth(f)),p=new pn(u.getText(),u.getRawBytes(),void 0,f,ot.PDF_417);p.putMetadata(an.ERROR_CORRECTION_LEVEL,u.getECLevel());var h=u.getOther();h!=null&&p.putMetadata(an.PDF417_EXTRA_METADATA,h),s.push(p)}}catch(m){i={error:m}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return s.map(function(m){return m})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?It.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r}(),a5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vu=function(r){a5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e}(Nn),Gu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o5=function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(dr.TRY_HARDER)!==void 0,n=e==null?null:e.get(dr.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(s){return s===ot.UPC_A||s===ot.UPC_E||s===ot.EAN_13||s===ot.EAN_8||s===ot.CODABAR||s===ot.CODE_39||s===ot.CODE_93||s===ot.CODE_128||s===ot.ITF||s===ot.RSS_14||s===ot.RSS_EXPANDED});a&&!t&&i.push(new ks(e)),n.includes(ot.QR_CODE)&&i.push(new Xf),n.includes(ot.DATA_MATRIX)&&i.push(new $f),n.includes(ot.AZTEC)&&i.push(new Vf),n.includes(ot.PDF_417)&&i.push(new Kf),a&&t&&i.push(new ks(e))}i.length===0&&(t||i.push(new ks(e)),i.push(new Xf),i.push(new $f),i.push(new Vf),i.push(new Kf),t&&i.push(new ks(e))),this.readers=i},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=Gu(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new Vu("No readers where selected, nothing can be read.");try{for(var i=Gu(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof Vu)continue}}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new Ae("No MultiFormat Readers were able to detect the code.")},r}(),s5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),l5=function(r){s5(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var i=this,a=new o5;return a.setHints(t),i=r.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Go),c5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){c5(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Kf,t)||this}return e})(Go);var f5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){f5(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Xf,t)||this}return e})(Go);var Zf;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(Zf||(Zf={}));const Rl=Zf;var Y1=function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ka(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=n.multiply(new ka(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),n=s}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new lt("No error correction bytes");var n=e.length-t;if(n<=0)throw new lt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(n);ar.arraycopy(e,0,a,0,n);var s=new ka(this.field,a);s=s.multiplyByMonomial(t,1);for(var o=s.divide(i)[1],l=o.getCoefficients(),c=t-l.length,f=0;f<c;f++)e[n+f]=0;ar.arraycopy(l,0,e,n+c,l.length)},r}(),Os=function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=n[s],l=0;l<i-1;l++){var c=o[l];c===o[l+1]&&c===n[s+1][l]&&c===n[s+1][l+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var l=n[s];o+6<i&&l[o]===1&&l[o+1]===0&&l[o+2]===1&&l[o+3]===1&&l[o+4]===1&&l[o+5]===0&&l[o+6]===1&&(r.isWhiteHorizontal(l,o-4,o)||r.isWhiteHorizontal(l,o+7,o+11))&&t++,s+6<a&&n[s][o]===1&&n[s+1][o]===0&&n[s+2][o]===1&&n[s+3][o]===1&&n[s+4][o]===1&&n[s+5][o]===0&&n[s+6][o]===1&&(r.isWhiteVertical(n,o,s-4,s)||r.isWhiteVertical(n,o,s+7,s+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var i=t;i<n;i++)if(e[i]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=n[s],l=0;l<i;l++)o[l]===1&&t++;var c=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(t*2-c)*10/c);return f*r.N4},r.getDataMaskBit=function(e,t,n){var i,a;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:a=n*t,i=(a&1)+a%3;break;case 6:a=n*t,i=(a&1)+a%3&1;break;case 7:a=n*t,i=a%3+(n+t&1)&1;break;default:throw new lt("Invalid mask pattern: "+e)}return i===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var l=0,c=-1,f=0;f<a;f++){var u=t?s[o][f]:s[f][o];u===c?l++:(l>=5&&(n+=r.N1+(l-5)),l=1,c=u)}l>=5&&(n+=r.N1+(l-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r}(),d5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u5=function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var i=d5(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Br.fill(s,e)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],s=t.bytes[n],o=0,l=this.width;o<l;++o)if(a[o]!==s[o])return!1;return!0},r.prototype.toString=function(){for(var e=new Ct,t=0,n=this.height;t<n;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r}(),Qf=function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new Ct;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r}(),h5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sr=function(r){h5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e}(Nn),$u=function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,i,a){r.clearMatrix(a),r.embedBasicPatterns(n,a),r.embedTypeInfo(t,i,a),r.maybeEmbedVersionInfo(n,a),r.embedDataBits(e,i,a)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var i=new $r;r.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),l=r.TYPE_INFO_COORDINATES[a],c=l[0],f=l[1];if(n.setBoolean(c,f,o),a<8){var u=n.getWidth()-a-1,p=8;n.setBoolean(u,p,o)}else{var u=8,p=n.getHeight()-7+(a-8);n.setBoolean(u,p,o)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new $r;r.makeVersionInfoBits(e,n);for(var i=6*3-1,a=0;a<6;++a)for(var s=0;s<3;++s){var o=n.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,a,o)}}},r.embedDataBits=function(e,t,n){for(var i=0,a=-1,s=n.getWidth()-1,o=n.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<n.getHeight();){for(var l=0;l<2;++l){var c=s-l;if(r.isEmpty(n.get(c,o))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,t!==255&&Os.getDataMaskBit(t,c,o)&&(f=!f),n.setBoolean(c,o,f)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new sr("Not all bits consumed: "+i+"/"+e.getSize())},r.findMSBSet=function(e){return 32-It.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new lt("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!Qf.isValidMaskPattern(t))throw new sr("Invalid mask pattern");var i=e.getBits()<<3|t;n.appendBits(i,5);var a=r.calculateBCHCode(i,r.TYPE_INFO_POLY);n.appendBits(a,10);var s=new $r;if(s.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new sr("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new sr("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new sr;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var i=0;i<8;++i){if(!r.isEmpty(n.get(e+i,t)))throw new sr;n.setNumber(e+i,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var i=0;i<7;++i){if(!r.isEmpty(n.get(e,t+i)))throw new sr;n.setNumber(e,t+i,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var i=0;i<5;++i)for(var a=r.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)n.setNumber(e+s,t+i,a[s])},r.embedPositionDetectionPattern=function(e,t,n){for(var i=0;i<7;++i)for(var a=r.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)n.setNumber(e+s,t+i,a[s])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;r.embedVerticalSeparationPattern(i,0,e),r.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),r.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var l=0;l!==s;l++){var c=i[l];c>=0&&r.isEmpty(t.get(c,o))&&r.embedPositionAdjustmentPattern(c-2,o-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r}(),p5=function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r}(),Xu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Os.applyMaskPenaltyRule1(e)+Os.applyMaskPenaltyRule2(e)+Os.applyMaskPenaltyRule3(e)+Os.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var i=r.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(Rl.CHARACTER_SET)!==void 0;a&&(i=n.get(Rl.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new $r;if(s===lr.BYTE&&(a||r.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Mr.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,o)}this.appendModeInfo(s,o);var c=new $r;this.appendBytes(e,s,c,i);var f;if(n!==null&&n.get(Rl.QR_VERSION)!==void 0){var u=Number.parseInt(n.get(Rl.QR_VERSION).toString(),10);f=ao.getVersionForNumber(u);var p=this.calculateBitsNeeded(s,o,c,f);if(!this.willFit(p,f,t))throw new sr("Data too big for requested version")}else f=this.recommendVersion(t,s,o,c);var h=new $r;h.appendBitArray(o);var m=s===lr.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(m,f,s,h),h.appendBitArray(c);var v=f.getECBlocksForLevel(t),b=f.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(b,h);var y=this.interleaveWithECBytes(h,f.getTotalCodewords(),b,v.getNumBlocks()),E=new Qf;E.setECLevel(t),E.setMode(s),E.setVersion(f);var D=f.getDimensionForVersion(),C=new u5(D,D),z=this.chooseMaskPattern(y,t,f,C);return E.setMaskPattern(z),$u.buildMatrix(y,t,f,z,C),E.setMatrix(C),E},r.recommendVersion=function(e,t,n,i){var a=this.calculateBitsNeeded(t,n,i,ao.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,n,i,s);return this.chooseVersion(o,e)},r.calculateBitsNeeded=function(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),Mr.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return lr.KANJI;for(var n=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(r.isDigit(o))n=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return lr.BYTE}return i?lr.ALPHANUMERIC:n?lr.NUMERIC:lr.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=Jn.encode(e,Mr.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<Qf.NUM_MASK_PATTERNS;o++){$u.buildMatrix(e,t,n,o,i);var l=this.calculateMaskPenalty(i);l<a&&(a=l,s=o)}return s},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var i=ao.getVersionForNumber(n);if(r.willFit(e,i,t))return i}throw new sr("Data too big")},r.willFit=function(e,t,n){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(n),s=a.getTotalECCodewords(),o=i-s,l=(e+7)/8;return o>=l},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new sr("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==n)throw new sr("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,i,a,s){if(i>=n)throw new sr("Block ID too large");var o=e%n,l=n-o,c=Math.floor(e/n),f=c+1,u=Math.floor(t/n),p=u+1,h=c-u,m=f-p;if(h!==m)throw new sr("EC bytes mismatch");if(n!==l+o)throw new sr("RS blocks mismatch");if(e!==(u+h)*l+(p+m)*o)throw new sr("Total bytes mismatch");i<l?(a[0]=u,s[0]=h):(a[0]=p,s[0]=m)},r.interleaveWithECBytes=function(e,t,n,i){var a,s,o,l;if(e.getSizeInBytes()!==n)throw new sr("Number of bits and data bytes does not match");for(var c=0,f=0,u=0,p=new Array,h=0;h<i;++h){var m=new Int32Array(1),v=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,i,h,m,v);var b=m[0],y=new Uint8Array(b);e.toBytes(8*c,y,0,b);var E=r.generateECBytes(y,v[0]);p.push(new p5(y,E)),f=Math.max(f,b),u=Math.max(u,E.length),c+=m[0]}if(n!==c)throw new sr("Data bytes does not match offset");for(var D=new $r,h=0;h<f;++h)try{for(var C=(a=void 0,Xu(p)),z=C.next();!z.done;z=C.next()){var k=z.value,y=k.getDataBytes();h<y.length&&D.appendBits(y[h],8)}}catch(P){a={error:P}}finally{try{z&&!z.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}for(var h=0;h<u;++h)try{for(var W=(o=void 0,Xu(p)),j=W.next();!j.done;j=W.next()){var k=j.value,E=k.getErrorCorrectionBytes();h<E.length&&D.appendBits(E[h],8)}}catch(P){o={error:P}}finally{try{j&&!j.done&&(l=W.return)&&l.call(W)}finally{if(o)throw o.error}}if(t!==D.getSizeInBytes())throw new sr("Interleaving error: "+t+" and "+D.getSizeInBytes()+" differ.");return D},r.generateECBytes=function(e,t){for(var n=e.length,i=new Int32Array(n+t),a=0;a<n;a++)i[a]=e[a]&255;new Y1(In.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[n+a];return s},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,i){var a=n.getCharacterCountBits(t);if(e>=1<<a)throw new sr(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},r.appendBytes=function(e,t,n,i){switch(t){case lr.NUMERIC:r.appendNumericBytes(e,n);break;case lr.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case lr.BYTE:r.append8BitBytes(e,n,i);break;case lr.KANJI:r.appendKanjiBytes(e,n);break;default:throw new sr("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var a=r.getDigit(e.charAt(i));if(i+2<n){var s=r.getDigit(e.charAt(i+1)),o=r.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<n){var s=r.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var a=r.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new sr;if(i+1<n){var s=r.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new sr;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},r.append8BitBytes=function(e,t,n){var i;try{i=Jn.encode(e,n)}catch(l){throw new sr(l)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];t.appendBits(o,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=Jn.encode(e,Mr.SJIS)}catch(u){throw new sr(u)}for(var i=n.length,a=0;a<i;a+=2){var s=n[a]&255,o=n[a+1]&255,l=s<<8&4294967295|o,c=-1;if(l>=33088&&l<=40956?c=l-33088:l>=57408&&l<=60351&&(c=l-49472),c===-1)throw new sr("Invalid byte sequence");var f=(c>>8)*192+(c&255);t.appendBits(f,13)}},r.appendECI=function(e,t){t.appendBits(lr.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=Mr.UTF8.getName(),r})();var g5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){g5(e,r);function e(t,n,i,a,s,o,l,c){var f=r.call(this,o,l)||this;if(f.yuvData=t,f.dataWidth=n,f.dataHeight=i,f.left=a,f.top=s,a+o>n||s+l>i)throw new lt("Crop rectangle does not fit within image data.");return c&&f.reverseHorizontal(o,l),f}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new lt("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return ar.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=t*n,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ar.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<n;o++){var l=o*t;ar.arraycopy(this.yuvData,s,a,l,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*n),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<n;o++){for(var l=o*t,c=0;c<t;c++){var f=a[s+c*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+c]=4278190080|f*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<n;a++,s+=this.dataWidth)for(var o=s+t/2,l=s,c=s+t-1;l<o;l++,c--){var f=i[l];i[l]=i[c],i[c]=f}},e.prototype.invert=function(){return new wd(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(xc);var m5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){m5(e,r);function e(t,n,i,a,s,o,l){var c=r.call(this,n,i)||this;if(c.dataWidth=a,c.dataHeight=s,c.left=o,c.top=l,t.BYTES_PER_ELEMENT===4){for(var f=n*i,u=new Uint8ClampedArray(f),p=0;p<f;p++){var h=t[p],m=h>>16&255,v=h>>7&510,b=h&255;u[p]=(m+v+b)/4&255}c.luminances=u}else c.luminances=t;if(a===void 0&&(c.dataWidth=n),s===void 0&&(c.dataHeight=i),o===void 0&&(c.left=0),l===void 0&&(c.top=0),c.left+n>c.dataWidth||c.top+i>c.dataHeight)throw new lt("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new lt("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return ar.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=t*n,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ar.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<n;o++){var l=o*t;ar.arraycopy(this.luminances,s,a,l,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new wd(this)},e})(xc);var x5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),v5=function(r){x5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Mr),y5=function(){function r(){}return r.ISO_8859_1=Mr.ISO8859_1,r}(),Jf,b5=301,w5=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=b5);return{LOG:r,ALOG:e}};Jf=w5([],[]),Jf.LOG;Jf.ALOG;var Yu;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Yu||(Yu={}));var Ku=129,K1=230,A5=231,S5=235,_5=236,C5=237,I5=238,E5=239,N5=240,lf=254,D5=254,Zu="[)>05",Qu="[)>06",Ju="",Xt=0,rn=1,wn=2,Lr=3,qr=4,hn=5,k5=function(){function r(){}return r.prototype.getEncodingMode=function(){return Xt},r.prototype.encode=function(e){var t=gi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=gi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case hn:e.writeCodeword(A5),e.signalEncoderChange(hn);return;case rn:e.writeCodeword(K1),e.signalEncoderChange(rn);return;case Lr:e.writeCodeword(I5),e.signalEncoderChange(Lr);break;case wn:e.writeCodeword(E5),e.signalEncoderChange(wn);break;case qr:e.writeCodeword(N5),e.signalEncoderChange(qr);break;default:throw new Error("Illegal mode: "+i)}else gi.isExtendedASCII(n)?(e.writeCodeword(S5),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(gi.isDigit(e)&&gi.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r}(),j5=function(){function r(){}return r.prototype.getEncodingMode=function(){return hn},r.prototype.encode=function(e){var t=new Ct;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var i=gi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Xt);break}}var a=t.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||l)if(a<=249)t.setCharAt(0,Ot.getCharAt(a));else if(a<=1555)t.setCharAt(0,Ot.getCharAt(Math.floor(a/250)+249)),t.insert(1,Ot.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var c=0,n=t.length();c<n;c++)e.writeCodeword(this.randomize255State(t.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,i=e+n;return i<=255?i:i-256},r}(),Id=function(){function r(){}return r.prototype.getEncodingMode=function(){return rn},r.prototype.encodeMaximal=function(e){for(var t=new Ct,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,n=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var o=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l,f=Math.floor(t.length()%3);(f===2&&c!==2||f===1&&(n>3||c!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(K1),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new Ct;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var l=new Ct;for(t.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,t,l,i));t.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,t,l,i);break}var c=t.length();if(c%3===0){var f=gi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(Xt);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,n),e.resetSymbolInfo(),i},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(lf)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(lf),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(lf)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Xt)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,i=t%256,a=new Ct;return a.append(n),a.append(i),a.toString()},r}(),O5=function(){function r(){}return r.prototype.getEncodingMode=function(){return qr},r.prototype.encode=function(e){for(var t=new Ct;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=gi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Xt);break}}}t.append(Ot.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var s=n-1,o=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),c=l&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}c?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(Xt)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Ot.getCharAt(e-64)):gi.illegalCharacter(Ot.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,o=(n<<18)+(i<<12)+(a<<6)+s,l=o>>16&255,c=o>>8&255,f=o&255,u=new Ct;return u.append(l),t>=2&&u.append(c),t>=3&&u.append(f),u.toString()},r}(),T5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ft=function(){function r(e,t,n,i,a,s,o,l){o===void 0&&(o=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=l}return r.lookup=function(e,t,n,i,a){var s,o;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var l=R5(P5),c=l.next();!c.done;c=l.next()){var f=c.value;if(!(t===1&&f.rectangular)&&!(t===2&&!f.rectangular)&&!(n!=null&&(f.getSymbolWidth()<n.getWidth()||f.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(u){s={error:u}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r}(),L5=function(r){T5(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Ft),P5=[new Ft(!1,3,5,8,8,1),new Ft(!1,5,7,10,10,1),new Ft(!0,5,7,16,6,1),new Ft(!1,8,10,12,12,1),new Ft(!0,10,11,14,6,2),new Ft(!1,12,12,14,14,1),new Ft(!0,16,14,24,10,1),new Ft(!1,18,14,16,16,1),new Ft(!1,22,18,18,18,1),new Ft(!0,22,18,16,10,2),new Ft(!1,30,20,20,20,1),new Ft(!0,32,24,16,14,2),new Ft(!1,36,24,22,22,1),new Ft(!1,44,28,24,24,1),new Ft(!0,49,28,22,14,2),new Ft(!1,62,36,14,14,4),new Ft(!1,86,42,16,16,4),new Ft(!1,114,48,18,18,4),new Ft(!1,144,56,20,20,4),new Ft(!1,174,68,22,22,4),new Ft(!1,204,84,24,24,4,102,42),new Ft(!1,280,112,14,14,16,140,56),new Ft(!1,368,144,16,16,16,92,36),new Ft(!1,456,192,18,18,16,114,48),new Ft(!1,576,224,20,20,16,144,56),new Ft(!1,696,272,22,22,16,174,68),new Ft(!1,816,336,24,24,16,136,56),new Ft(!1,1050,408,18,18,36,175,68),new Ft(!1,1304,496,20,20,36,163,62),new L5],M5=function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(o){return o.charCodeAt(0)}),n=new Ct,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(s)}this.msg=n.toString(),this.shape=0,this.codewords=new Ct,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ft.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r}(),B5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),F5=function(r){B5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Lr},e.prototype.encode=function(t){for(var n=new Ct;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(t,n);var s=gi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Xt);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):gi.illegalCharacter(Ot.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=n.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(D5),t.getNewEncoding()<0&&t.signalEncoderChange(Xt)},e}(Id),z5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),U5=function(r){z5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return wn},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(t-128,n),i},e}(Id),gi=function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=Ku+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,i,a){t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new Id,o=[new k5,s,new U5,new F5,new O5,new j5],l=new M5(e);l.setSymbolShape(t),l.setSizeConstraints(n,i),e.startsWith(Zu)&&e.endsWith(Ju)?(l.writeCodeword(_5),l.setSkipAtEnd(2),l.pos+=Zu.length):e.startsWith(Qu)&&e.endsWith(Ju)&&(l.writeCodeword(C5),l.setSkipAtEnd(2),l.pos+=Qu.length);var c=Xt;for(a&&(s.encodeMaximal(l),c=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[c].encode(l),l.getNewEncoding()>=0&&(c=l.getNewEncoding(),l.resetEncoderSignal());var f=l.getCodewordCount();l.updateSymbolInfo();var u=l.getSymbolInfo().getDataCapacity();f<u&&c!==Xt&&c!==hn&&c!==qr&&l.writeCodeword("Ã¾");var p=l.getCodewords();for(p.length()<u&&p.append(Ku);p.length()<u;)p.append(this.randomize253State(p.length()+1));return l.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var i=this.lookAheadTestIntern(e,t,n);if(n===Lr&&i===Lr){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Xt}else if(n===qr&&i===qr){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Xt}return i},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var i;n===Xt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(t+a===e.length){Br.fill(s,0),Br.fill(o,0);var l=this.findMinimums(i,o,It.MAX_VALUE,s),c=this.getMinimumCount(s);if(o[Xt]===l)return Xt;if(c===1){if(s[hn]>0)return hn;if(s[qr]>0)return qr;if(s[wn]>0)return wn;if(s[Lr]>0)return Lr}return rn}var f=e.charCodeAt(t+a);if(a++,this.isDigit(f)?i[Xt]+=.5:this.isExtendedASCII(f)?(i[Xt]=Math.ceil(i[Xt]),i[Xt]+=2):(i[Xt]=Math.ceil(i[Xt]),i[Xt]++),this.isNativeC40(f)?i[rn]+=2/3:this.isExtendedASCII(f)?i[rn]+=8/3:i[rn]+=4/3,this.isNativeText(f)?i[wn]+=2/3:this.isExtendedASCII(f)?i[wn]+=8/3:i[wn]+=4/3,this.isNativeX12(f)?i[Lr]+=2/3:this.isExtendedASCII(f)?i[Lr]+=13/3:i[Lr]+=10/3,this.isNativeEDIFACT(f)?i[qr]+=3/4:this.isExtendedASCII(f)?i[qr]+=17/4:i[qr]+=13/4,this.isSpecialB256(f)?i[hn]+=4:i[hn]++,a>=4){if(Br.fill(s,0),Br.fill(o,0),this.findMinimums(i,o,It.MAX_VALUE,s),o[Xt]<this.min(o[hn],o[rn],o[wn],o[Lr],o[qr]))return Xt;if(o[hn]<o[Xt]||o[hn]+1<this.min(o[rn],o[wn],o[Lr],o[qr]))return hn;if(o[qr]+1<this.min(o[hn],o[rn],o[wn],o[Lr],o[Xt]))return qr;if(o[wn]+1<this.min(o[hn],o[rn],o[qr],o[Lr],o[Xt]))return wn;if(o[Lr]+1<this.min(o[hn],o[rn],o[qr],o[wn],o[Xt]))return Lr;if(o[rn]+1<this.min(o[Xt],o[hn],o[qr],o[wn])){if(o[rn]<o[Lr])return rn;if(o[rn]===o[Lr]){for(var u=t+a+1;u<e.length;){var p=e.charCodeAt(u);if(this.isX12TermSep(p))return Lr;if(!this.isNativeX12(p))break;u++}return rn}}}}},r.min=function(e,t,n,i,a){var s=Math.min(e,Math.min(t,Math.min(n,i)));return a===void 0?s:Math.min(s,a)},r.findMinimums=function(e,t,n,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);n>s&&(n=s,Br.fill(i,0)),n===s&&(i[a]=i[a]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,i=t;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-t},r.illegalCharacter=function(e){var t=It.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r}(),cf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e0=function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return Jn.encode(e,this.charset)!=null}catch{return!1}},r}(),W5=function(){function r(e,t,n){var i,a,s,o,l,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(I){return new e0(v5.forName(I))}),this.encoders=[];var f=[];f.push(new e0(y5.ISO_8859_1));for(var u=t!=null&&t.name.startsWith("UTF"),p=0;p<e.length;p++){var h=!1;try{for(var m=(i=void 0,cf(f)),v=m.next();!v.done;v=m.next()){var b=v.value,y=e.charAt(p),E=y.charCodeAt(0);if(E===n||b.canEncode(y)){h=!0;break}}}catch(I){i={error:I}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(!h)try{for(var D=(s=void 0,cf(this.ENCODERS)),C=D.next();!C.done;C=D.next()){var b=C.value;if(b.canEncode(e.charAt(p))){f.push(b),h=!0;break}}}catch(I){s={error:I}}finally{try{C&&!C.done&&(o=D.return)&&o.call(D)}finally{if(s)throw s.error}}h||(u=!0)}if(f.length===1&&!u)this.encoders=[f[0]];else{this.encoders=[];var z=0;try{for(var k=cf(f),W=k.next();!W.done;W=k.next()){var b=W.value;this.encoders[z++]=b}}catch(I){l={error:I}}finally{try{W&&!W.done&&(c=k.return)&&c.call(k)}finally{if(l)throw l.error}}}var j=-1;if(t!=null){for(var p=0;p<this.encoders.length;p++)if(this.encoders[p]!=null&&t.name===this.encoders[p].name){j=p;break}}this.priorityEncoderIndex=j}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Jn.encode(Ot.getCharAt(e),this.encoders[t].name)},r}(),H5=3,q5=function(){function r(e,t,n){this.fnc1=n;var i=new W5(e,t,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===n?1e3:s}else this.bytes=this.encodeMinimally(e,i,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new Ct,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,i,a,s){var o=e.charAt(i).charCodeAt(0),l=0,c=t.length();t.getPriorityEncoderIndex()>=0&&(o===s||t.canEncode(o,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),c=l+1);for(var f=l;f<c;f++)(o===s||t.canEncode(o,f))&&this.addEdge(n,i+1,new t0(o,t,f,a,s))},r.prototype.encodeMinimally=function(e,t,n){var i=e.length,a=new t0[i+1][t.length()];this.addEdges(e,t,a,0,null,n);for(var s=1;s<=i;s++){for(var o=0;o<t.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][o],n);for(var o=0;o<t.length();o++)a[s-1][o]=null}for(var l=-1,c=It.MAX_VALUE,o=0;o<t.length();o++)if(a[i][o]!=null){var f=a[i][o];f.cachedTotalSize<c&&(c=f.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var u=[],p=a[i][l];p!=null;){if(p.isFNC1())u.unshift(1e3);else for(var h=t.encode(p.c,p.encoderIndex),s=h.length-1;s>=0;s--)u.unshift(h[s]&255);var m=p.previous===null?0:p.previous.encoderIndex;m!==p.encoderIndex&&u.unshift(256+t.getECIValue(p.encoderIndex)),p=p.previous}for(var v=[],s=0;s<v.length;s++)v[s]=u[s];return v},r}(),t0=function(){function r(e,t,n,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,n).length,o=i===null?0:i.encoderIndex;o!==n&&(s+=H5),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return r.prototype.isFNC1=function(){return this.c===1e3},r}(),V5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var r0;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(r0||(r0={}));(function(r){V5(e,r);function e(t,n,i,a,s){var o=r.call(this,t,n,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(q5);var G5=function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r}(),n0=function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r}(),$5=function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r}(),X5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ed=function(r){X5(e,r);function e(t,n,i){var a=r.call(this,t)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+It.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}($5),Y5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),K5=function(r){Y5(e,r);function e(t,n,i){var a=r.call(this,t,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Ed);function Z5(r,e,t){return new K5(r,e,t)}function _s(r,e,t){return new Ed(r,e,t)}var Q5=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ja=0,rc=1,Zn=2,Z1=3,ji=4,J5=new Ed(null,0,0),ff=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],ev=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function tv(r){var e,t;try{for(var n=ev(r),i=n.next();!i.done;i=n.next()){var a=i.value;Br.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[ja][ji]=0,r[rc][ji]=0,r[rc][ja]=28,r[Z1][ji]=0,r[Zn][ji]=0,r[Zn][ja]=15,r}var Q1=tv(Br.createInt32Array(6,6)),rv=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nv=function(){function r(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=ff[this.mode][e];i=_s(i,a&65535,a>>16),n+=a>>16}var s=e===Zn?4:5;return i=_s(i,t,s),new r(i,e,0,n+s)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,i=this.mode===Zn?4:5;return n=_s(n,Q1[this.mode][e],i),n=_s(n,t,5),new r(n,this.mode,0,this.bitCount+i+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,i=this.bitCount;if(this.mode===ji||this.mode===Zn){var a=ff[n][ja];t=_s(t,a&65535,a>>16),i+=a>>16,n=ja}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new r(t,n,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=Z5(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(ff[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new $r;try{for(var o=rv(i),l=o.next();!l.done;l=o.next()){var c=l.value;c.appendTo(s,e)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return s},r.prototype.toString=function(){return Ot.format("%s bits=%d bytes=%d",Q5[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(J5,ja,0,0),r}();function iv(r){var e=Ot.getCharCode(" "),t=Ot.getCharCode("."),n=Ot.getCharCode(",");r[ja][e]=1;for(var i=Ot.getCharCode("Z"),a=Ot.getCharCode("A"),s=a;s<=i;s++)r[ja][s]=s-a+2;r[rc][e]=1;for(var o=Ot.getCharCode("z"),l=Ot.getCharCode("a"),s=l;s<=o;s++)r[rc][s]=s-l+2;r[Zn][e]=1;for(var c=Ot.getCharCode("9"),f=Ot.getCharCode("0"),s=f;s<=c;s++)r[Zn][s]=s-f+2;r[Zn][n]=12,r[Zn][t]=13;for(var u=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],p=0;p<u.length;p++)r[Z1][Ot.getCharCode(u[p])]=p;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],p=0;p<h.length;p++)Ot.getCharCode(h[p])>0&&(r[ji][Ot.getCharCode(h[p])]=p);return r}var df=iv(Br.createInt32Array(5,256)),Ll=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},av=function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=Ot.getCharCode(" "),t=Ot.getCharCode(`
`),n=n0.singletonList(nv.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Ot.getCharCode("\r"):a=s===t?2:0;break;case Ot.getCharCode("."):a=s===e?3:0;break;case Ot.getCharCode(","):a=s===e?4:0;break;case Ot.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(n=r.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var o=n0.min(n,function(l,c){return l.getBitCount()-c.getBitCount()});return o.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,i,a=[];try{for(var s=Ll(e),o=s.next();!o.done;o=s.next()){var l=o.value;this.updateStateForChar(l,t,a)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r.simplifyStates(a)},r.prototype.updateStateForChar=function(e,t,n){for(var i=this.text[t]&255,a=df[e.getMode()][i]>0,s=null,o=0;o<=ji;o++){var l=df[o][i];if(l>0){if(s==null&&(s=e.endBinaryShift(t)),!a||o===e.getMode()||o===Zn){var c=s.latchAndAppend(o,l);n.push(c)}if(!a&&Q1[e.getMode()][o]>=0){var f=s.shiftAndAppend(o,l);n.push(f)}}}if(e.getBinaryShiftByteCount()>0||df[e.getMode()][i]===0){var u=e.addBinaryShiftChar(t);n.push(u)}},r.updateStateListForPair=function(e,t,n){var i,a,s=[];try{for(var o=Ll(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForPair(c,t,n,s)}}catch(f){i={error:f}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},r.updateStateForPair=function(e,t,n,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(ji,n)),e.getMode()!==ji&&i.push(a.shiftAndAppend(ji,n)),n===3||n===4){var s=a.latchAndAppend(Zn,16-n).latchAndAppend(Zn,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(o)}},r.simplifyStates=function(e){var t,n,i,a,s=[];try{for(var o=Ll(e),l=o.next();!l.done;l=o.next()){var c=l.value,f=!0,u=function(b){if(b.isBetterThanOrEqualTo(c))return f=!1,"break";c.isBetterThanOrEqualTo(b)&&(s=s.filter(function(y){return y!==b}))};try{for(var p=(i=void 0,Ll(s)),h=p.next();!h.done;h=p.next()){var m=h.value,v=u(m);if(v==="break")break}}catch(b){i={error:b}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}f&&s.push(c)}}catch(b){t={error:b}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return s},r}(),ov=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var i=new av(e).encode(),a=It.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,o,l,c,f,u;if(n!==r.DEFAULT_AZTEC_LAYERS){if(o=n<0,l=Math.abs(n),l>(o?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new lt(Ot.format("Illegal value %s for layers",n));c=r.totalBitsInLayer(l,o),f=r.WORD_SIZE[l];var p=c-c%f;if(u=r.stuffBits(i,f),u.getSize()+a>p)throw new lt("Data to large for user specified layer");if(o&&u.getSize()>f*64)throw new lt("Data to large for user specified layer")}else{f=0,u=null;for(var h=0;;h++){if(h>r.MAX_NB_BITS)throw new lt("Data too large for an Aztec code");if(o=h<=3,l=o?h+1:h,c=r.totalBitsInLayer(l,o),!(s>c)){(u==null||f!==r.WORD_SIZE[l])&&(f=r.WORD_SIZE[l],u=r.stuffBits(i,f));var p=c-c%f;if(!(o&&u.getSize()>f*64)&&u.getSize()+a<=p)break}}}var m=r.generateCheckWords(u,c,f),v=u.getSize()/f,b=r.generateModeMessage(o,l,v),y=(o?11:14)+l*4,E=new Int32Array(y),D;if(o){D=y;for(var h=0;h<E.length;h++)E[h]=h}else{D=y+1+2*It.truncDivision(It.truncDivision(y,2)-1,15);for(var C=It.truncDivision(y,2),z=It.truncDivision(D,2),h=0;h<C;h++){var k=h+It.truncDivision(h,15);E[C-h-1]=z-k-1,E[C+h]=z+k+1}}for(var W=new Ri(D),h=0,j=0;h<l;h++){for(var I=(l-h)*4+(o?9:12),P=0;P<I;P++)for(var N=P*2,S=0;S<2;S++)m.get(j+N+S)&&W.set(E[h*2+S],E[h*2+P]),m.get(j+I*2+N+S)&&W.set(E[h*2+P],E[y-1-h*2-S]),m.get(j+I*4+N+S)&&W.set(E[y-1-h*2-S],E[y-1-h*2-P]),m.get(j+I*6+N+S)&&W.set(E[y-1-h*2-P],E[h*2+S]);j+=I*8}if(r.drawModeMessage(W,o,D,b),o)r.drawBullsEye(W,It.truncDivision(D,2),5);else{r.drawBullsEye(W,It.truncDivision(D,2),7);for(var h=0,P=0;h<It.truncDivision(y,2)-1;h+=15,P+=16)for(var S=It.truncDivision(D,2)&1;S<D;S+=2)W.set(It.truncDivision(D,2)-P,S),W.set(It.truncDivision(D,2)+P,S),W.set(S,It.truncDivision(D,2)-P),W.set(S,It.truncDivision(D,2)+P)}var O=new G5;return O.setCompact(o),O.setSize(D),O.setLayers(l),O.setCodeWords(v),O.setMatrix(W),O},r.drawBullsEye=function(e,t,n){for(var i=0;i<n;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var i=new $r;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=r.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=r.generateCheckWords(i,40,4)),i},r.drawModeMessage=function(e,t,n,i){var a=It.truncDivision(n,2);if(t)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+It.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},r.generateCheckWords=function(e,t,n){var i,a,s=e.getSize()/n,o=new Y1(r.getGF(n)),l=It.truncDivision(t,n),c=r.bitsToWords(e,n,l);o.encode(c,l-s);var f=t%n,u=new $r;u.appendBits(0,f);try{for(var p=ov(Array.from(c)),h=p.next();!h.done;h=p.next()){var m=h.value;u.appendBits(m,n)}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return u},r.bitsToWords=function(e,t,n){var i=new Int32Array(n),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var o=0,l=0;l<t;l++)o|=e.get(a*t+l)?1<<t-l-1:0;i[a]=o}return i},r.getGF=function(e){switch(e){case 4:return In.AZTEC_PARAM;case 6:return In.AZTEC_DATA_6;case 8:return In.AZTEC_DATA_8;case 10:return In.AZTEC_DATA_10;case 12:return In.AZTEC_DATA_12;default:throw new lt("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new $r,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var o=0,l=0;l<t;l++)(s+l>=i||e.get(s+l))&&(o|=1<<t-1-l);(o&a)===a?(n.appendBits(o&a,t),s--):(o&a)===0?(n.appendBits(o|1,t),s--):n.appendBits(o,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();const sv=({onScanSuccess:r,onClose:e})=>{const t=oe.useRef(null),n=oe.useRef(null);return oe.useEffect(()=>{const i=new l5;return n.current=i,i.decodeFromVideoDevice(null,t.current,a=>{a&&(i.reset(),r(a.getText()))}),()=>{try{i.reset()}catch{}}},[r]),d.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000e6",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[d.jsx("video",{ref:t,style:{width:"90%",maxWidth:"500px",borderRadius:"12px",border:"3px solid white"},muted:!0,autoPlay:!0,playsInline:!0}),d.jsx("button",{onClick:()=>{var i;(i=n.current)==null||i.reset(),e()},style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"×¡×’×•×¨ ×¡×•×¨×§"})]})};function lv(r){const e=[...new Set(r)].sort((t,n)=>t-n);for(let t=1;t<=e.length+1;t++)if(!e.includes(t))return t}async function cv(r,e=""){const t=zt(We,"items",r),n=await Ho(t);if(!n.exists())throw new Error("Item not found");const{ItemId:i,...a}=n.data();await lo(vt(We,"deletedItems"),{...a,deletedAt:tr(),deletedBy:e}),await Vo(t)}async function fv(r,e=""){const t=zt(We,"deletedItems",r),n=await Ho(t);if(!n.exists())throw new Error("Deleted item not found");const i=n.data(),s=(await Mt(vt(We,"items"))).docs.map(l=>l.data().ItemId).filter(l=>typeof l=="number"),o=lv(s);await yd(zt(vt(We,"items")),{...i,ItemId:o,createdAt:tr(),updatedAt:tr(),createdBy:e,updatedBy:e,isActive:!0}),await Vo(t)}async function dv(r){const e=mi(vt(We,"items"),ia("ItemId","==",Number(r))),t=await Mt(e);if(!t.empty){const n=t.docs[0];return{id:n.id,...n.data()}}throw new Error("×œ× × ×ž×¦× ×ž×•×¦×¨ ×¢× ×‘×¨×§×•×“ ×–×”")}const uv=({item:r,onConfirm:e,onCancel:t})=>{const[n,i]=oe.useState(1),a=n>=1&&n<=r.quantity;return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-box",dir:"rtl",children:[d.jsx("h3",{style:{textAlign:"center"},children:r.name}),d.jsx("img",{src:r.imageUrl,alt:r.name,style:{width:"100%",maxHeight:"200px",objectFit:"cover"}}),d.jsxs("p",{children:["×ž×–×”×” ×ž×•×¦×¨: ",r.ItemId]}),d.jsxs("p",{children:["×›×ž×•×ª ×–×ž×™× ×”: ",r.quantity]}),d.jsxs("div",{style:{marginTop:"1rem"},children:[d.jsx("label",{children:"×‘×—×¨ ×›×ž×•×ª:"}),d.jsx("input",{type:"number",value:n,min:1,max:r.quantity,onChange:s=>i(+s.target.value),style:{width:"100%",padding:"10px",marginTop:"0.5rem",border:a?"1px solid #ccc":"2px solid red"}}),!a&&d.jsxs("p",{style:{color:"red",marginTop:"0.5rem"},children:["×›×ž×•×ª ×œ× ×ª×§×™× ×”. ×™×© ×œ×‘×—×•×¨ ×‘×™×Ÿ 1 ×œÖ¾",r.quantity]})]}),d.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between"},children:[d.jsx("button",{className:"btn btn-red",onClick:t,children:"×‘×™×˜×•×œ"}),d.jsx("button",{className:"btn btn-green",onClick:()=>e(n),disabled:!a,children:"××™×©×•×¨"})]})]})})},hv=({currentPage:r,totalItems:e,itemsPerPage:t,onPageChange:n,className:i=""})=>{const a=Math.ceil(e/t),s=window.innerWidth<=768;if(a<=1)return null;const l=(()=>{const u=s?5:7,p=Math.floor(u/2);let h=Math.max(1,r-p),m=Math.min(a,h+u-1);m-h+1<u&&(h=Math.max(1,m-u+1));const v=[];h>1&&(v.push(1),h>2&&v.push("..."));for(let b=h;b<=m;b++)v.push(b);return m<a&&(m<a-1&&v.push("..."),v.push(a)),v})(),c=(r-1)*t+1,f=Math.min(r*t,e);return d.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"1.5rem 0",direction:"rtl"},children:[d.jsxs("div",{style:{fontSize:s?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["×ž×¦×™×’ ",c,"-",f," ×ž×ª×•×š ",e," ×ž×•×¦×¨×™×"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[d.jsx("button",{onClick:()=>n(r-1),disabled:r===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===1?"#f9fafb":"white",color:r===1?"#9ca3af":"#374151",cursor:r===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:d.jsx(Ws,{size:s?16:20})}),l.map((u,p)=>{if(u==="...")return d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",color:"#9ca3af"},children:d.jsx(md,{size:s?16:20})},`dots-${p}`);const h=u===r;return d.jsx("button",{onClick:()=>n(u),style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:h?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:h?"#3b82f6":"white",color:h?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:h?"bold":"normal",fontSize:s?"14px":"16px"},children:u},u)}),d.jsx("button",{onClick:()=>n(r+1),disabled:r===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===a?"#f9fafb":"white",color:r===a?"#9ca3af":"#374151",cursor:r===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:d.jsx(Hs,{size:s?16:20})})]})]})},J1=({showCatalogPopup:r,setShowCatalogPopup:e,searchTerm:t,setSearchTerm:n,searchIdTerm:i,setSearchIdTerm:a,availableItems:s,toggleSelectItem:o,changeQty:l,form:c,loadingItems:f,setAvailableItems:u,hideBarcodeScanner:p=!1})=>{const[h,m]=oe.useState(!1),[v,b]=oe.useState(null),[y,E]=oe.useState([]),[D,C]=oe.useState(1),[z,k]=oe.useState(window.innerWidth<=768),W=z?6:8;if(oe.useEffect(()=>{const Q=()=>{const M=window.innerWidth<=768;M!==z&&(k(M),C(1))};return window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[z]),oe.useEffect(()=>{C(1)},[t,i]),oe.useEffect(()=>{r&&(console.log("ðŸ” Modal × ×¤×ª×—, ×ž××ª×—×œ local state ×¢× ×¤×¨×™×˜×™×:",s.length),E([...s]))},[r,s]),!r)return null;const j=async Q=>{console.log("ðŸ“± ×‘×¨×§×•×“ × ×¡×¨×§:",Q);try{const M=await dv(Q);console.log("ðŸ” ×¤×¨×™×˜ × ×ž×¦× ×‘×ž××’×¨:",M);const F=s.find(V=>V.ItemId===M.ItemId||V.id===M.id);if(console.log("ðŸ” ×ž×—×¤×© ×¤×¨×™×˜ ×‘×¨×©×™×ž×” ×–×ž×™× ×”:",F),!F){console.log("âŒ ×”×¤×¨×™×˜ ×œ× × ×ž×¦× ×‘×¨×©×™×ž×ª ×”×¤×¨×™×˜×™× ×”×–×ž×™× ×™× ×œ×ª×§×•×¤×” ×–×•"),alert("×”×¤×¨×™×˜ ×œ× ×–×ž×™×Ÿ ×œ×ª×§×•×¤×ª ×”×”×–×ž× ×” ×©×œ×š"),m(!1);return}if(y.some(V=>(V.ItemId===M.ItemId||V.id===M.id)&&V.selected)){console.log("âš ï¸ ×”×ž×•×¦×¨ ×›×‘×¨ × ×‘×—×¨ ×‘×¨×©×™×ž×”"),alert("×”×ž×•×¦×¨ ×›×‘×¨ × ×‘×—×¨ ×‘×¨×©×™×ž×”"),m(!1);return}F.quantity>0?(console.log("âœ… ×”×ž×•×¦×¨ ×–×ž×™×Ÿ, ×¤×•×ª×— ×ž×•×“×œ ××™×©×•×¨"),b(F),m(!1)):(console.log("âŒ ×”×ž×•×¦×¨ ×œ× ×–×ž×™×Ÿ ×‘×ž×œ××™ ×œ×ª×§×•×¤×” ×–×•"),alert("×”×ž×•×¦×¨ ×œ× ×–×ž×™×Ÿ ×‘×ž×œ××™ ×œ×ª×§×•×¤×” ×–×•"),m(!1))}catch(M){console.error("âŒ ×©×’×™××” ×‘××™×ª×•×¨ ×”×¤×¨×™×˜:",M),alert(M.message),m(!1)}},I=Q=>{console.log("ðŸ”„ ×ž×©× ×” ×‘×—×™×¨×” ×¢×‘×•×¨ ×¤×¨×™×˜:",Q),E(M=>M.map(F=>F.id===Q?{...F,selected:!F.selected,selectedQty:F.selected?0:1}:F))},P=(Q,M)=>{let F=parseInt(M)||0;F>Q.quantity&&(F=Q.quantity),F<0&&(F=0),console.log("ðŸ”¢ ×ž×©× ×” ×›×ž×•×ª ×¢×‘×•×¨",Q.name,"×œ×›×ž×•×ª:",F),E(U=>U.map(V=>V.id===Q.id?{...V,selectedQty:F,selected:F>0}:V))},N=()=>{console.log("ðŸ’¾ ×ž×—×™×œ ×©×™× ×•×™×™× ×¢×œ state ×”×¨××©×™..."),y.forEach(Q=>{const M=s.find(F=>F.id===Q.id);M&&(Q.selected!==M.selected&&o(Q.id),Q.selectedQty!==M.selectedQty&&l(Q.id,Q.selectedQty))})},S=()=>{console.log("âœ… ×ž××©×¨ ×‘×—×™×¨×•×ª ×•×ž×—×™×œ ×©×™× ×•×™×™×..."),N(),e(!1)},O=(Q="unknown")=>{console.log("âŒ ×ž×‘×˜×œ ×‘×—×™×¨×•×ª ×•×¡×•×’×¨ ×ž×•×“×œ - ×ž×§×•×¨:",Q),e(!1)},A=Q=>{Q.target===Q.currentTarget?(console.log("ðŸ–±ï¸ ×§×œ×™×§ ×¢×œ overlay - ×¡×•×’×¨ ×ž×•×“×œ"),O("overlay-click")):console.log("ðŸ–±ï¸ ×§×œ×™×§ ×‘×ª×•×š ×”×ž×•×“×œ - ×œ× ×¡×•×’×¨")},B=t.toLowerCase(),T=i.trim().toLowerCase(),L=y.filter(Q=>Q.name.toLowerCase().includes(B)&&(T===""||String(Q.ItemId||Q.itemId||"").toLowerCase()===T)),Y=(D-1)*W,X=Y+W,ae=L.slice(Y,X);return console.log("ðŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª ×¤×¨×™×˜×™×:",{totalItems:y.length,filteredItems:L.length,currentPageItems:ae.length,currentPage:D,itemsPerPage:W}),d.jsxs("div",{className:"modal-overlay",onClick:A,children:[d.jsxs("div",{className:"modal-box",dir:"rtl",onClick:Q=>Q.stopPropagation(),children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[!p&&d.jsx("button",{style:{width:"180px"},className:"btn btn-gray",onClick:()=>{console.log("ðŸ“± ×¤×•×ª×— ×¡×•×¨×§ ×‘×¨×§×•×“..."),m(!0)},children:"×¡×¨×™×§×ª ×‘×¨×§×•×“"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",width:p?"100%":"60%"},children:[d.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×ž×•×¦×¨ ×œ×¤×™ ×©×...",value:t,onChange:Q=>n(Q.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px"}}),d.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×ž×•×¦×¨ ×œ×¤×™ ×ž×¡×¤×¨ ×ž×–×”×”...",value:i,onChange:Q=>a(Q.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px"}})]})]}),d.jsxs("h3",{style:{textAlign:"center",marginBottom:"1rem"},children:["×ž×•×¦×¨×™× ×–×ž×™× ×™× (",c.pickupDate," â†’ ",c.returnDate,")"]}),f?d.jsx("p",{style:{textAlign:"center"},children:"×˜×•×¢×Ÿ ×ž×•×¦×¨×™×â€¦"}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"modal-grid",children:ae.length===0?d.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:t?`×œ× × ×ž×¦××• ×ž×•×¦×¨×™× ×œ×—×™×¤×•×© "${t}"`:"×œ× × ×ž×¦××• ×ž×•×¦×¨×™× ×–×ž×™× ×™×"}):ae.map(Q=>d.jsxs("div",{className:`item-card ${Q.selected?"selected":""}`,children:[d.jsx("img",{src:Q.imageUrl||"/no-image-available.png",alt:Q.name,className:"item-image"}),d.jsx("h4",{children:Q.name}),d.jsxs("p",{children:["×–×ž×™×Ÿ: ",Q.quantity]}),d.jsxs("p",{children:["×ž×–×”×” ×ž×•×¦×¨: ",Q.ItemId]}),d.jsxs("div",{style:{margin:"0.5rem 0"},children:[d.jsx("label",{style:{marginBottom:"0.3rem",display:"block"},children:"×›×ž×•×ª:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[d.jsx("button",{onClick:()=>P(Q,Math.max(0,Q.selectedQty-1)),disabled:Q.selectedQty<=0,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:Q.selectedQty<=0?"#f5f5f5":"#fff",cursor:Q.selectedQty<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:Q.selectedQty<=0?"#ccc":"#333"},children:"-"}),d.jsx("input",{type:"number",min:0,max:Q.quantity,value:Q.selectedQty,onChange:M=>P(Q,M.target.value),onBlur:M=>{(parseInt(M.target.value)||0)>Q.quantity&&P(Q,Q.quantity)},style:{width:"50px",height:"30px",padding:"5px",textAlign:"center",borderRadius:"6px",border:Q.selectedQty>Q.quantity?"2px solid red":"1px solid #ccc",backgroundColor:Q.selectedQty>0?"#e3f2fd":"#fff",fontSize:"14px",fontWeight:"bold",appearance:"textfield",MozAppearance:"textfield"}}),d.jsx("button",{onClick:()=>P(Q,Math.min(Q.quantity,Q.selectedQty+1)),disabled:Q.selectedQty>=Q.quantity,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:Q.selectedQty>=Q.quantity?"#f5f5f5":"#fff",cursor:Q.selectedQty>=Q.quantity?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:Q.selectedQty>=Q.quantity?"#ccc":"#333"},children:"+"})]}),Q.selectedQty>Q.quantity&&d.jsxs("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"0.2rem"},children:["×ž×§×¡×™×ž×•×: ",Q.quantity]})]}),d.jsx("button",{onClick:()=>I(Q.id),className:`btn ${Q.selected?"btn-red":"btn-blue"}`,style:{width:"100%",marginTop:"0.5rem"},children:Q.selected?"âŒ ×”×¡×¨ ×ž×•×¦×¨":"ðŸ›’ ×‘×—×¨ ×ž×•×¦×¨"})]},Q.id))}),d.jsx(hv,{currentPage:D,totalItems:L.length,itemsPerPage:W,onPageChange:C})]}),d.jsxs("div",{className:"modal-actions",children:[d.jsx("button",{className:"btn btn-blue",onClick:()=>{console.log("âœ… ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ ××™×©×•×¨"),S()},children:"âœ”ï¸ ××™×©×•×¨"}),d.jsx("button",{className:"btn btn-gray",onClick:()=>{console.log("âŒ ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ ×‘×™×˜×•×œ"),O("cancel-button")},children:"âŒ ×‘×™×˜×•×œ"})]})]}),!p&&h&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:Q=>{console.log("ðŸ“± ×§×œ×™×§ ×¢×œ ×¨×§×¢ ×”×¡×•×¨×§"),Q.stopPropagation()},children:d.jsx(sv,{onScanSuccess:j,onClose:()=>{console.log("ðŸ“± ×¡×•×¨×§ ×‘×¨×§×•×“ × ×¡×’×¨"),m(!1)}})}),!p&&v&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10001,backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:Q=>{console.log("ðŸ“¦ ×§×œ×™×§ ×¢×œ ×¨×§×¢ ×ž×•×“×œ ×ª×•×¦××ª ×¡×¨×™×§×”"),Q.stopPropagation()},children:d.jsx(uv,{item:v,onCancel:()=>{console.log("âŒ ×ž×‘×˜×œ ×ª×•×¦××ª ×¡×¨×™×§×”"),b(null),m(!1)},onConfirm:Q=>{console.log("âœ… ×ž××©×¨ ×”×•×¡×¤×ª ×¤×¨×™×˜ ×ž×¡×¨×™×§×”:",v.name,"×›×ž×•×ª:",Q),E(F=>{const U=F.map(V=>V.id===v.id||V.ItemId===v.ItemId?(console.log("ðŸ“ ×ž×¢×“×›×Ÿ ×¤×¨×™×˜ ×‘-localItems:",V.name,"×›×ž×•×ª ×—×“×©×”:",Q),{...V,selected:!0,selectedQty:Q}):V);return console.log("ðŸ“Š localItems ××—×¨×™ ×¢×“×›×•×Ÿ:",U.filter(V=>V.selected)),U}),b(null),console.log("ðŸŽ¯ ×¤×¨×™×˜ × ×•×¡×£ ×‘×”×¦×œ×—×” ×ž×¡×¨×™×§×”, ×”×ž×•×“×œ × ×©××¨ ×¤×ª×•×— ×œ×”×ž×©×š ×‘×—×™×¨×”");const M=y.findIndex(F=>F.id===v.id||F.ItemId===v.ItemId);if(M>=0){const F=Math.ceil((M+1)/W);console.log("ðŸ“„ ×ž×¢×‘×¨ ×œ×¢×ž×•×“",F,"×›×“×™ ×œ×”×¦×™×’ ××ª ×”×¤×¨×™×˜ ×©× ×•×¡×£"),C(F)}}})})]})},eh={async findClientByPhone(r){try{if(console.log("ðŸ” ×ž×—×¤×© ×¤×¨×˜×™ ×œ×§×•×— ×œ×ž×¡×¤×¨ ×˜×œ×¤×•×Ÿ:",r),!r||r.length<10)return{found:!1};const e=r.replace(/[\s\-]/g,""),t=mi(vt(We,"orders"),ia("phone","==",e)),n=await Mt(t);if(n.empty)return console.log("âŒ ×œ× × ×ž×¦××• ×”×–×ž× ×•×ª ×¢×‘×•×¨ ×ž×¡×¤×¨ ×–×”"),{found:!1};const i=n.docs.map(s=>({id:s.id,...s.data()}));i.sort((s,o)=>{var f,u;const l=((f=s.createdAt)==null?void 0:f.seconds)||0;return(((u=o.createdAt)==null?void 0:u.seconds)||0)-l});const a=i[0];return console.log("âœ… × ×ž×¦××” ×”×–×ž× ×”:",{clientName:a.clientName,address:a.address,email:a.email}),{found:!0,clientData:{clientName:a.clientName||"",address:a.address||"",email:a.email||""}}}catch(e){return console.error("âŒ ×©×’×™××” ×‘×—×™×¤×•×© ×¤×¨×˜×™ ×œ×§×•×—:",e),{found:!1}}}},ra={async getClosedDates(){try{const e=(await Mt(vt(We,"closedDates"))).docs.map(t=>({id:t.id,...t.data()}));return console.log("ðŸ“… × ×˜×¢× ×• ×™×ž×™× ×¡×’×•×¨×™×:",e.map(t=>({id:t.id,date:t.date}))),e}catch(r){return console.error("âŒ ×©×’×™××” ×‘×©×œ×™×¤×ª ×™×ž×™× ×¡×’×•×¨×™×:",r),[]}},async addClosedDate(r,e,t="×™×•× ×¡×’×•×¨"){try{const n=this.formatDateToString(r);if(!n)return console.error("âŒ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ:",r),!1;console.log(`ðŸ”’ ×ž×•×¡×™×£ ×™×•× ×¡×’×•×¨: ${n} (×ž×§×•×¨×™: ${r})`);const i=zt(We,"closedDates",n);return await yd(i,{date:n,reason:t,createdBy:e,createdAt:tr()}),console.log("âœ… ×™×•× ×¡×’×•×¨ × ×•×¡×£ ×‘×”×¦×œ×—×”:",n),!0}catch(n){return console.error("âŒ ×©×’×™××” ×‘×”×•×¡×¤×ª ×™×•× ×¡×’×•×¨:",n),!1}},async removeClosedDate(r){try{const e=this.formatDateToString(r);if(!e)return console.error("âŒ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ:",r),!1;console.log(`ðŸ—‘ï¸ ×ž×¡×™×¨ ×™×•× ×¡×’×•×¨: ${e} (×ž×§×•×¨×™: ${r})`);const t=zt(We,"closedDates",e);return await Vo(t),console.log("âœ… ×™×•× ×¡×’×•×¨ ×”×•×¡×¨ ×‘×”×¦×œ×—×”:",e),!0}catch(e){return console.error("âŒ ×©×’×™××” ×‘×”×¡×¨×ª ×™×•× ×¡×’×•×¨:",e),!1}},isDateClosed(r,e=null){try{const t=this.formatDateToString(r);if(!t)return console.warn("âš ï¸ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ ×‘×‘×“×™×§×ª ×¡×’×™×¨×”:",r),!1;if(e&&Array.isArray(e)){const n=e.some(i=>{const a=i.date||i.id,s=a===t;return s&&console.log(`ðŸ”’ × ×ž×¦× ×™×•× ×¡×’×•×¨: ${a} === ${t}`),s});return console.log(`ðŸ” ×‘×•×“×§ ×ª××¨×™×š ${t} - ×¡×’×•×¨: ${n}`),n}return console.log(`ðŸ” ×‘×•×“×§ ×ª××¨×™×š ${t} - ××™×Ÿ ×¨×©×™×ž×” ×¡×’×•×¨×™×`),!1}catch(t){return console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×ª ×ª××¨×™×š ×¡×’×•×¨:",t),!1}},formatDateToString(r){try{let e;if(typeof r=="string"){if(r.match(/^\d{4}-\d{2}-\d{2}$/))return console.log(`ðŸ“… ×ª××¨×™×š ×›×‘×¨ ×‘×¤×•×¨×ž×˜ × ×›×•×Ÿ: ${r}`),r;e=new Date(r+"T00:00:00")}else if(r instanceof Date)e=new Date(r);else return console.warn("âš ï¸ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ:",r),"";if(isNaN(e.getTime()))return console.warn("âš ï¸ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ ××—×¨×™ ×”×ž×¨×”:",r),"";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=`${t}-${n}-${i}`;return console.log(`ðŸ“… ×”×ž×¨×ª ×ª××¨×™×š: ${r} â†’ ${a}`),a}catch(e){return console.error("âŒ ×©×’×™××” ×‘×”×ž×¨×ª ×ª××¨×™×š:",e,r),""}},canCloseDateValidation(r,e=[]){const t=new Date().toISOString().split("T")[0];return this.formatDateToString(r)<t?{valid:!1,reason:"×œ× × ×™×ª×Ÿ ×œ×¡×’×•×¨ ×ª××¨×™×›×™× ×‘×¢×‘×¨"}:e&&e.length>0&&e.filter(a=>a.type!=="×”×©××œ×” ×¤×¢×™×œ×”").length>0?{valid:!1,reason:"×§×™×™×ž×™× ××™×¨×•×¢×™× ×‘×ª××¨×™×š ×–×”"}:{valid:!0,reason:"× ×™×ª×Ÿ ×œ×¡×’×™×¨×”"}},async addMultipleClosedDates(r,e,t="×™×ž×™× ×¡×’×•×¨×™×"){const n={success:[],failed:[]};console.log("ðŸ“… ×ž×ª×—×™×œ ×œ×”×•×¡×™×£ ×™×ž×™× ×¡×’×•×¨×™×:",r);for(const i of r)try{await this.addClosedDate(i,e,t)?n.success.push(i):n.failed.push(i)}catch(a){console.error(`âŒ ×©×’×™××” ×‘×¡×’×™×¨×ª ${i}:`,a),n.failed.push(i)}return console.log("ðŸ“Š ×ª×•×¦××•×ª ×¡×’×™×¨×ª ×™×ž×™×:",n),n},validateOrderDates(r,e,t){const n={};return r&&this.isDateClosed(r,t)&&(n.pickupDate="ðŸ”’ ×ª××¨×™×š ×œ×§×™×—×ª ×”×ž×•×¦×¨×™× ×—×œ ×‘×™×•× ×¡×’×•×¨"),e&&this.isDateClosed(e,t)&&(n.returnDate="ðŸ”’ ×ª××¨×™×š ×”×—×–×¨×ª ×”×ž×•×¦×¨×™× ×—×œ ×‘×™×•× ×¡×’×•×¨"),{isValid:Object.keys(n).length===0,errors:n}}},pv=({onOrderCreated:r})=>{const e="newLoanDraft",[n,i]=oe.useState({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[a,s]=oe.useState({}),[o,l]=oe.useState(!1),[c,f]=oe.useState([]),[u,p]=oe.useState(!1),[h,m]=oe.useState(""),[v,b]=oe.useState(""),[y,E]=oe.useState([]),[D,C]=oe.useState(!1),[z,k]=oe.useState(!1),[W,j]=oe.useState([]),[I,P]=oe.useState(!1),N=X=>{if(I)try{const Q=(X&&X.length>0?X:c.length>0?c:y).map(U=>{const V=U.selectedQty??0,te=U.selected||V>0;return{id:U.id,ItemId:U.ItemId,selectedQty:te?Math.max(V,1):0,_selected:te}}).filter(U=>U._selected).map(({id:U,ItemId:V,selectedQty:te})=>({id:U,ItemId:V,selectedQty:te})),M={form:n,selectedItems:Q,timestamp:Date.now()};localStorage.setItem(e,JSON.stringify(M));const F=U=>U.map(V=>`${V.id}|${V.ItemId}|${V.selectedQty}`).sort().join(",");F(Q)!==F(y)&&E(Q)}catch(ae){console.warn("Failed to save draft",ae)}};oe.useEffect(()=>{try{const X=localStorage.getItem(e);if(!X)return;const ae=JSON.parse(X);if(!ae.timestamp||Date.now()-ae.timestamp>36e5){localStorage.removeItem(e);return}ae.form&&i(Q=>({...Q,...ae.form})),Array.isArray(ae.selectedItems)&&E(ae.selectedItems)}catch(X){console.warn("Failed to load draft",X),localStorage.removeItem(e)}finally{P(!0)}},[]),oe.useEffect(()=>{S()},[]),oe.useEffect(()=>{I&&N()},[n,c,I]);const S=async()=>{try{const X=await ra.getClosedDates();j(X),console.log("ðŸ“… × ×˜×¢× ×• ×™×ž×™× ×¡×’×•×¨×™× ×œ×ž×¢×¨×›×ª ×”×–×ž× ×•×ª:",X.length)}catch(X){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×™×ž×™× ×¡×’×•×¨×™×:",X)}},O=async X=>{const{name:ae,value:Q}=X.target;if(i(M=>({...M,[ae]:Q})),ae==="phone"&&Q.length===10&&/^\d{10}$/.test(Q)){k(!0);try{const M=await eh.findClientByPhone(Q);M.found&&(i(F=>({...F,phone:Q,clientName:M.clientData.clientName,address:M.clientData.address,email:M.clientData.email})),alert(`× ×ž×¦× ×œ×§×•×— ×§×™×™×! ×”×¤×¨×˜×™× ×ž×•×œ××• ××•×˜×•×ž×˜×™×ª:
×©×: ${M.clientData.clientName}
×›×ª×•×‘×ª: ${M.clientData.address}`))}catch(M){console.error("×©×’×™××” ×‘×—×™×¤×•×© ×¤×¨×˜×™ ×œ×§×•×—:",M)}finally{k(!1)}}},A=()=>{const X={},ae=new Date().toISOString().split("T")[0],{pickupDate:Q,eventDate:M,returnDate:F}=n;n.volunteerName!==void 0&&!n.volunteerName.trim()&&(X.volunteerName="×©×“×” ×—×•×‘×”"),n.clientName.trim()||(X.clientName="×©×“×” ×—×•×‘×”"),n.address.trim()||(X.address="×©×“×” ×—×•×‘×”"),n.phone.trim()?/^\d{10}$/.test(n.phone)||(X.phone="×ž×¡×¤×¨ ×˜×œ×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ"):X.phone="×©×“×” ×—×•×‘×”",n.eventType.trim()||(X.eventType="×©×“×” ×—×•×‘×”"),Q||(X.pickupDate="×©×“×” ×—×•×‘×”"),M||(X.eventDate="×©×“×” ×—×•×‘×”"),F||(X.returnDate="×©×“×” ×—×•×‘×”"),Q&&Q<ae&&(X.pickupDate="×ª××¨×™×š ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×‘×¢×‘×¨"),M&&Q&&M<Q&&(X.eventDate="×ª××¨×™×š ×”××™×¨×•×¢ ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×œ×¤× ×™ ×œ×§×™×—×”"),F&&Q&&F<=Q&&(X.returnDate="×”×—×–×¨×” ××—×¨×™ ×œ×§×™×—×”");const U=ra.validateOrderDates(Q,F,W);return U.isValid||Object.assign(X,U.errors),console.log("ðŸ” ×‘×“×™×§×ª ×ª××¨×™×›×™×:",{pickupDate:Q,returnDate:F,closedDatesCount:W.length,validation:U,errors:X}),s(X),Object.keys(X).length===0},B=()=>{window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”×”×–×ž× ×”?")&&(i({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),s({}),f([]),m(""),b(""),l(!1),E([]),localStorage.removeItem(e))},T=async()=>{if(!A())return;const ae=(await Mt(vt(We,"orders"))).docs.map(F=>F.data().simpleId).filter(F=>typeof F=="number"),Q=ae.length>0?Math.max(...ae)+1:1,M=c.filter(F=>F.selected).map(F=>({id:F.id,ItemId:F.ItemId,name:F.name,quantity:F.selectedQty,imageUrl:F.imageUrl}));C(!0);try{const F=await lo(vt(We,"orders"),{...n,items:M,status:"open",simpleId:Q,createdAt:tr()});await zr(F,{orderId:F.id}),i({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),f([]),m(""),b(""),l(!1),E([]),localStorage.removeItem(e),alert(`×”×”×–×ž× ×” × ×©×ž×¨×”! ×ž×¡' ×”×–×ž× ×”: ${Q}`),r&&await r()}catch(F){console.error("×©×’×™××” ×‘×©×ž×™×¨×”:",F),alert("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×”×–×ž× ×”")}C(!1)};oe.useEffect(()=>{if(!o)return;(async()=>{p(!0);const ae=Q=>Q?Q.toDate?Q.toDate():typeof Q=="string"?new Date(Q):Q:null;try{const M=(await Mt(vt(We,"items"))).docs.map(de=>({id:de.id,...de.data()})).filter(de=>de.isDeleted!==!0),F=await Mt(vt(We,"orders")),U=ae(n.pickupDate),V=ae(n.returnDate),te=F.docs.map(de=>de.data()).filter(de=>{const be=ae(de.pickupDate),Ee=ae(de.returnDate);return de.status==="open"&&be&&Ee&&U&&V&&Ee>=U&&be<=V}),le={};te.forEach(de=>{var be;(be=de.items)==null||be.forEach(Ee=>{le[Ee.id]=(le[Ee.id]||0)+Ee.quantity})});const he={};c.forEach(de=>{de.selected&&de.selectedQty>0&&(he[de.id]={selected:de.selected,selectedQty:de.selectedQty})}),y.forEach(de=>{de.selectedQty>0&&(he[de.id]={selected:!0,selectedQty:de.selectedQty})});const pe=M.map(de=>{const be=(de.quantity||0)-(le[de.id]||0),Ee=he[de.id];return{...de,quantity:be,selected:Ee?Ee.selected:!1,selectedQty:Ee?Ee.selectedQty:0}}).filter(de=>de.quantity>0);f(pe)}catch(Q){console.error("×©×’×™××” ×‘×—×™×©×•×‘ ×–×ž×™× ×•×ª:",Q),f([])}p(!1)})()},[o,n.pickupDate,n.returnDate,y]);const L=X=>{f(ae=>{const Q=ae.map(M=>M.id===X?{...M,selected:!M.selected,selectedQty:M.selected?0:1}:M);return N(Q),Q})},Y=(X,ae)=>{f(Q=>{const M=Q.map(F=>F.id===X?{...F,selected:ae>0,selectedQty:ae}:F);return N(M),M})};return d.jsxs("div",{className:"new-loan-container",children:[d.jsx(wg,{form:n,errors:a,handleChange:O,handleConfirm:T,handleClear:B,setShowCatalogPopup:l,saving:D,isLoadingClientData:z}),d.jsx(J1,{showCatalogPopup:o,setShowCatalogPopup:l,searchTerm:h,setSearchTerm:m,searchIdTerm:v,setSearchIdTerm:b,setAvailableItems:f,availableItems:c,toggleSelectItem:L,changeQty:Y,form:n,loadingItems:u})]})},gv=({onRequestSubmitted:r})=>{const{user:e}=En(),[t,n]=oe.useState({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[i,a]=oe.useState({}),[s,o]=oe.useState(!1),[l,c]=oe.useState([]),[f,u]=oe.useState(!1),[p,h]=oe.useState(""),[m,v]=oe.useState(!1),[b,y]=oe.useState(!1),[E,D]=oe.useState([]);oe.useEffect(()=>{C()},[]);const C=async()=>{try{const O=await ra.getClosedDates();D(O),console.log("ðŸ“… × ×˜×¢× ×• ×™×ž×™× ×¡×’×•×¨×™× ×œ×ž×¢×¨×›×ª ×‘×§×©×•×ª:",O.length)}catch(O){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×™×ž×™× ×¡×’×•×¨×™×:",O)}},z=oe.useCallback(async O=>{const{name:A,value:B}=O.target;if(n(T=>({...T,[A]:B})),A==="phone"&&B.length===10&&/^\d{10}$/.test(B)){y(!0);try{const T=await eh.findClientByPhone(B);T.found&&(n(L=>({...L,phone:B,clientName:T.clientData.clientName,address:T.clientData.address,email:T.clientData.email})),alert(`× ×ž×¦× ×œ×§×•×— ×§×™×™×! ×”×¤×¨×˜×™× ×ž×•×œ××• ××•×˜×•×ž×˜×™×ª:
×©×: ${T.clientData.clientName}
×›×ª×•×‘×ª: ${T.clientData.address}`))}catch(T){console.error("×©×’×™××” ×‘×—×™×¤×•×© ×¤×¨×˜×™ ×œ×§×•×—:",T)}finally{y(!1)}}},[]),k=()=>{const O={},A=new Date().toISOString().split("T")[0],{pickupDate:B,eventDate:T,returnDate:L}=t;t.volunteerName!==void 0&&!t.volunteerName.trim()&&(O.volunteerName="×©×“×” ×—×•×‘×”"),t.clientName.trim()||(O.clientName="×©×“×” ×—×•×‘×”"),t.address.trim()||(O.address="×©×“×” ×—×•×‘×”"),t.phone.trim()?/^\d{10}$/.test(t.phone)||(O.phone="×ž×¡×¤×¨ ×˜×œ×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ"):O.phone="×©×“×” ×—×•×‘×”",t.eventType.trim()||(O.eventType="×©×“×” ×—×•×‘×”"),B||(O.pickupDate="×©×“×” ×—×•×‘×”"),T||(O.eventDate="×©×“×” ×—×•×‘×”"),L||(O.returnDate="×©×“×” ×—×•×‘×”"),B&&B<A&&(O.pickupDate="×ª××¨×™×š ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×‘×¢×‘×¨"),T&&B&&T<B&&(O.eventDate="×ª××¨×™×š ×”××™×¨×•×¢ ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×œ×¤× ×™ ×œ×§×™×—×”"),L&&B&&L<=B&&(O.returnDate="×”×—×–×¨×” ××—×¨×™ ×œ×§×™×—×”");const Y=ra.validateOrderDates(B,L,E);return Y.isValid||Object.assign(O,Y.errors),console.log("ðŸ” ×‘×“×™×§×ª ×ª××¨×™×›×™×:",{pickupDate:B,returnDate:L,closedDatesCount:E.length,validation:Y,errors:O}),a(O),Object.keys(O).length===0},W=()=>{window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”×‘×§×©×”?")&&(n({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),a({}),c([]),h(""),o(!1))},j=async()=>{if(!k())return;const O=l.filter(A=>A.selected).map(A=>({id:A.id,ItemId:A.ItemId,name:A.name,quantity:A.selectedQty,imageUrl:A.imageUrl}));if(O.length===0){alert("×™×© ×œ×‘×—×•×¨ ×œ×¤×—×•×ª ×¤×¨×™×˜ ××—×“");return}v(!0);try{await lo(vt(We,"orderRequests"),{...t,items:O,status:"pending",requestedBy:e.uid,requestedByUsername:e.username,requestedByEmail:e.email,requestedAt:tr(),approvedBy:null,approvedAt:null}),n({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),c([]),h(""),o(!1),alert("ðŸŽ‰ ×”×‘×§×©×” × ×©×œ×—×” ×‘×”×¦×œ×—×”! ×ª×§×‘×œ ×¢×“×›×•×Ÿ ×›××©×¨ ×”×‘×§×©×” ×ª××•×©×¨."),r&&await r()}catch(A){console.error("×©×’×™××” ×‘×©×œ×™×—×ª ×”×‘×§×©×”:",A),alert("×©×’×™××” ×‘×©×œ×™×—×ª ×”×‘×§×©×”. ×× × × ×¡×” ×©×•×‘.")}v(!1)},I=k1.useRef([]);oe.useEffect(()=>{if(!s)return;(async()=>{u(!0);const A=B=>B?B.toDate?B.toDate():typeof B=="string"?new Date(B):B:null;try{const T=(await Mt(vt(We,"items"))).docs.map(U=>({id:U.id,...U.data()})).filter(U=>U.isDeleted!==!0),L=await Mt(vt(We,"orders")),Y=A(t.pickupDate),X=A(t.returnDate),ae=L.docs.map(U=>U.data()).filter(U=>{const V=A(U.pickupDate),te=A(U.returnDate);return U.status==="open"&&V&&te&&Y&&X&&te>=Y&&V<=X}),Q={};ae.forEach(U=>{var V;(V=U.items)==null||V.forEach(te=>{Q[te.id]=(Q[te.id]||0)+te.quantity})});const M={};I.current.forEach(U=>{U.selected&&U.selectedQty>0&&(M[U.id]={selected:U.selected,selectedQty:U.selectedQty})});const F=T.map(U=>{const V=(U.quantity||0)-(Q[U.id]||0),te=M[U.id];return{...U,quantity:V,selected:te?te.selected:!1,selectedQty:te?te.selectedQty:0}}).filter(U=>U.quantity>0);I.current=F,c(F)}catch(B){console.error("×©×’×™××” ×‘×—×™×©×•×‘ ×–×ž×™× ×•×ª:",B),c([])}u(!1)})()},[s,t.pickupDate,t.returnDate]);const P=O=>{c(A=>{const B=A.map(T=>T.id===O?{...T,selected:!T.selected,selectedQty:T.selected?0:1}:T);return I.current=B,B})},N=(O,A)=>{c(B=>{const T=B.map(L=>L.id===O?{...L,selected:A>0,selectedQty:A}:L);return I.current=T,T})},S=[{label:"×ž×¡×¤×¨ ×¤×œ××¤×•×Ÿ",name:"phone",required:!0},{label:"×©× ×œ×§×•×—",name:"clientName",required:!0},{label:"×ž×§×•× ×ž×’×•×¨×™×",name:"address",required:!0},{label:"××™×ž×™×™×œ",name:"email",required:!1},{label:"×¡×•×’ ×”××™×¨×•×¢",name:"eventType",required:!0},{label:"×ª××¨×™×š ×œ×§×™×—×ª ×ž×•×¦×¨×™×",name:"pickupDate",type:"date",required:!0},{label:"×ª××¨×™×š ×”××™×¨×•×¢",name:"eventDate",type:"date",required:!0},{label:"×ª××¨×™×š ×”×—×–×¨×ª ×ž×•×¦×¨×™×",name:"returnDate",type:"date",required:!0}];return d.jsxs("div",{className:"new-loan-container",children:[d.jsxs("div",{className:"loan-form-box",children:[d.jsx("h2",{style:{textAlign:"center"},children:"ðŸ™ ×‘×§×©×ª ×”×©××œ×”"}),d.jsx("p",{style:{textAlign:"center",color:"#666",marginBottom:"2rem"},children:"×ž×œ× ××ª ×”×¤×¨×˜×™× ×•×”×‘×§×©×” ×ª×™×©×œ×— ×œ××™×©×•×¨ ×”×ž× ×”×œ×™×"}),S.map(({label:O,name:A,type:B="text",required:T})=>d.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[d.jsxs("label",{htmlFor:A,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[O,T&&" *",b&&(A==="clientName"||A==="address"||A==="email")&&d.jsx("span",{style:{marginRight:"0.5rem",color:"#4caf50"},children:"â³"})]}),d.jsxs("div",{style:{position:"relative"},children:[d.jsx("input",{id:A,type:B,name:A,value:t[A]||"",onChange:z,autoComplete:"off",disabled:b&&(A==="clientName"||A==="address"||A==="email"),min:B==="date"?A==="pickupDate"?new Date().toISOString().split("T")[0]:A==="eventDate"||A==="returnDate"?t.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:i[A]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:b&&(A==="clientName"||A==="address"||A==="email")?"#f5f5f5":"white",opacity:b&&(A==="clientName"||A==="address"||A==="email")?.7:1},placeholder:b&&(A==="clientName"||A==="address"||A==="email")?"×˜×•×¢×Ÿ...":""}),b&&A==="phone"&&d.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#4caf50"},children:d.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e8f5e8",borderTop:"2px solid #4caf50",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),i[A]&&d.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:i[A]})]},A)),d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:d.jsx("button",{className:"btn btn-blue",onClick:()=>o(!0),disabled:b,children:"×‘×—×™×¨×ª ×ž×•×¦×¨×™×"})}),d.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[d.jsx("button",{className:"btn btn-green",onClick:j,disabled:m||b,children:m?"×©×•×œ×— ×‘×§×©×”...":"ðŸ“¨ ×©×œ×— ×‘×§×©×” ×œ××™×©×•×¨"}),d.jsx("button",{className:"btn btn-red",onClick:W,disabled:m||b,children:"×‘×™×˜×•×œ"})]}),d.jsx("style",{jsx:!0,children:`
          @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
          }
        `})]}),d.jsx(J1,{showCatalogPopup:s,setShowCatalogPopup:o,searchTerm:p,setSearchTerm:h,setAvailableItems:c,availableItems:l,toggleSelectItem:P,changeQty:N,form:t,loadingItems:f,hideBarcodeScanner:!0})]})},mv=()=>{const{user:r}=En(),[e,t]=oe.useState([]),[n,i]=oe.useState(!0),[a,s]=oe.useState(null),[o,l]=oe.useState(null),c=async()=>{try{i(!0);const v=(await Mt(vt(We,"orderRequests"))).docs.map(b=>({id:b.id,...b.data()})).filter(b=>b.status==="pending").sort((b,y)=>{var C,z;const E=((C=b.requestedAt)==null?void 0:C.seconds)||0;return(((z=y.requestedAt)==null?void 0:z.seconds)||0)-E});t(v)}catch(m){console.error("×©×’×™××” ×‘×˜×¢×™× ×ª ×‘×§×©×•×ª:",m)}finally{i(!1)}};oe.useEffect(()=>{c()},[]);const f=async m=>{if(window.confirm(`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××©×¨ ××ª ×”×‘×§×©×” ×©×œ ${m.clientName}?`)){l(m.id),console.log("ðŸš€ ×ž×ª×—×™×œ ××™×©×•×¨ ×‘×§×©×”:",m);try{console.log("ðŸ“¦ ×˜×•×¢×Ÿ × ×ª×•× ×™ ×ž×œ××™ ×•×”×–×ž× ×•×ª...");const v=await Mt(vt(We,"items")),b=await Mt(vt(We,"orders")),y=A=>A?A.toDate?A.toDate():typeof A=="string"?new Date(A):A:null,E=y(m.pickupDate),D=y(m.returnDate),C=b.docs.map(A=>A.data()).filter(A=>{const B=y(A.pickupDate),T=y(A.returnDate);return A.status==="open"&&B&&T&&E&&D&&T>=E&&B<=D}),z={};C.forEach(A=>{var B;(B=A.items)==null||B.forEach(T=>{z[T.id]=(z[T.id]||0)+T.quantity})});const k=v.docs.map(A=>({id:A.id,...A.data()}));console.log("ðŸ” ×‘×•×“×§ ×–×ž×™× ×•×ª ×¤×¨×™×˜×™×...",m.items);let W=!0,j=[];for(const A of m.items){console.log(`ðŸ”Ž ×‘×•×“×§ ×¤×¨×™×˜: ${A.name}`,A);const B=k.find(L=>L.id===A.id);if(!B){console.log(`âŒ ×¤×¨×™×˜ ×œ× × ×ž×¦× ×‘×ž×œ××™: ${A.name}`),W=!1,j.push(`${A.name} (×œ× × ×ž×¦× ×‘×ž×œ××™)`);continue}const T=(B.quantity||0)-(z[A.id]||0);console.log(`ðŸ“Š ${A.name}: ×ž×œ××™=${B.quantity}, ×©×ž×•×¨=${z[A.id]||0}, ×–×ž×™×Ÿ=${T}, × ×“×¨×©=${A.quantity}`),A.quantity>T&&(W=!1,j.push(`${A.name} (×–×ž×™×Ÿ: ${T}, × ×“×¨×©: ${A.quantity})`))}if(!W){console.log("âŒ ×œ× ×›×œ ×”×¤×¨×™×˜×™× ×–×ž×™× ×™×:",j),alert(`×œ× × ×™×ª×Ÿ ×œ××©×¨ ××ª ×”×‘×§×©×” - ×¤×¨×™×˜×™× ×œ× ×–×ž×™× ×™×:
${j.join(`
`)}`),l(null);return}console.log("âœ… ×›×œ ×”×¤×¨×™×˜×™× ×–×ž×™× ×™×, ×ž×ž×©×™×š ×œ×™×¦×™×¨×ª ×”×–×ž× ×”..."),console.log("ðŸ”¢ ×™×•×¦×¨ ×ž×–×”×” ×”×–×ž× ×” ×—×“×©...");const P=(await Mt(vt(We,"orders"))).docs.map(A=>A.data().simpleId).filter(A=>typeof A=="number"),N=P.length>0?Math.max(...P)+1:1;console.log("ðŸŽ¯ ×ž×–×”×” ×”×–×ž× ×” ×—×“×©:",N),console.log("ðŸ“ ×™×•×¦×¨ ×”×–×ž× ×” ×—×“×©×”..."),console.log("ðŸ‘¤ ×¤×¨×˜×™ ×ž×©×ª×ž×©:",r);const S={clientName:m.clientName,address:m.address,phone:m.phone,email:m.email,eventType:m.eventType,pickupDate:m.pickupDate,eventDate:m.eventDate,returnDate:m.returnDate,items:m.items,simpleId:N,status:"open",volunteerName:`×ž××•×©×¨ ×¢"×™ ${(r==null?void 0:r.username)||(r==null?void 0:r.email)||"×ž× ×”×œ"}`,createdAt:tr(),approvedBy:(r==null?void 0:r.uid)||"unknown",approvedByUsername:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"×ž× ×”×œ",approvedAt:tr(),orderId:null};console.log("ðŸ’¾ ×©×•×ž×¨ ×”×–×ž× ×” ×—×“×©×”:",S);const O=await lo(vt(We,"orders"),S);console.log("âœ… ×”×–×ž× ×” × ×©×ž×¨×” ×¢× ID:",O.id),await zr(O,{orderId:O.id}),console.log("ðŸ”„ ×¢×“×›×•×Ÿ orderId ×”×•×©×œ×"),console.log("ðŸ“‹ ×ž×¢×“×›×Ÿ ×¡×˜×˜×•×¡ ×‘×§×©×” ×œ××•×©×¨×”..."),await zr(zt(We,"orderRequests",m.id),{status:"approved",approvedBy:(r==null?void 0:r.uid)||"unknown",approvedByUsername:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"×ž× ×”×œ",approvedAt:tr(),orderId:O.id}),console.log("ðŸŽ‰ ×ª×”×œ×™×š ×”××™×©×•×¨ ×”×•×©×œ× ×‘×”×¦×œ×—×”!"),alert(`âœ… ×”×‘×§×©×” ××•×©×¨×” ×‘×”×¦×œ×—×”! ×ž×¡×¤×¨ ×”×–×ž× ×”: ${N}`),await c()}catch(v){console.error("âŒ ×©×’×™××” ×‘××™×©×•×¨ ×”×‘×§×©×”:",v),console.error("Stack trace:",v.stack),alert(`×©×’×™××” ×‘××™×©×•×¨ ×”×‘×§×©×”: ${v.message}`)}finally{l(null)}}},u=async m=>{const v=prompt(`×ž×“×•×¢ ××ª×” ×“×•×—×” ××ª ×”×‘×§×©×” ×©×œ ${m.clientName}?
(×”×”×•×“×¢×” ×”×–×• ×ª×™×©×œ×— ×œ×œ×§×•×—)`);if(v!==null){l(m.id),console.log("ðŸš« ×ž×ª×—×™×œ ×“×—×™×™×ª ×‘×§×©×”:",m.id,"×¡×™×‘×”:",v);try{console.log("ðŸ“ ×ž×¢×“×›×Ÿ ×¡×˜×˜×•×¡ ×‘×§×©×” ×œ× ×“×—×ª×”..."),console.log("ðŸ‘¤ ×¤×¨×˜×™ ×ž×©×ª×ž×©:",r),await zr(zt(We,"orderRequests",m.id),{status:"rejected",rejectedBy:(r==null?void 0:r.uid)||"unknown",rejectedByUsername:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"×ž× ×”×œ",rejectedAt:tr(),rejectionReason:v}),console.log("âœ… ×‘×§×©×” × ×“×—×ª×” ×‘×”×¦×œ×—×”"),alert("âŒ ×”×‘×§×©×” × ×“×—×ª×”. ×”×œ×§×•×— ×™×§×‘×œ ×”×•×“×¢×”."),await c()}catch(b){console.error("âŒ ×©×’×™××” ×‘×“×—×™×™×ª ×”×‘×§×©×”:",b),console.error("Stack trace:",b.stack),alert(`×©×’×™××” ×‘×“×—×™×™×ª ×”×‘×§×©×”: ${b.message}`)}finally{l(null)}}},p=m=>new Date(m).toLocaleDateString("he-IL"),h=m=>m?(m.seconds?new Date(m.seconds*1e3):new Date(m)).toLocaleString("he-IL"):"";return n?d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),d.jsx("p",{children:"×˜×•×¢×Ÿ ×‘×§×©×•×ª..."})]})}):d.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[d.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[d.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"ðŸ“‹ ×‘×§×©×•×ª ×œ×”×–×ž× ×”"}),d.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"×‘×§×©×•×ª ×ž×ž×ª×™× ×•×ª ×œ××™×©×•×¨ ×ž× ×”×œ×™×"})]}),e.length===0?d.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[d.jsx(Qn,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),d.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"××™×Ÿ ×‘×§×©×•×ª ×ž×ž×ª×™× ×•×ª"}),d.jsx("p",{style:{color:"#9ca3af"},children:"×›×œ ×”×‘×§×©×•×ª ×¢×•×‘×“×• ××• ×©××™×Ÿ ×‘×§×©×•×ª ×—×“×©×•×ª"})]}):d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(m=>{var v;return d.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:m.clientName}),d.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["× ×©×œ×—: ",h(m.requestedAt)]})]}),d.jsx("div",{style:{background:"#fef3c7",color:"#92400e",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:"×ž×ž×ª×™×Ÿ"})]}),d.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(j1,{size:16,style:{color:"#6b7280"}}),d.jsxs("span",{style:{fontSize:"0.875rem"},children:["×ž×‘×§×©: ",m.requestedByUsername]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(io,{size:16,style:{color:"#6b7280"}}),d.jsx("span",{style:{fontSize:"0.875rem"},children:m.phone})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(O1,{size:16,style:{color:"#6b7280"}}),d.jsx("span",{style:{fontSize:"0.875rem"},children:m.address})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Ti,{size:16,style:{color:"#6b7280"}}),d.jsxs("span",{style:{fontSize:"0.875rem"},children:[p(m.pickupDate)," â†’ ",p(m.returnDate)]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Qn,{size:16,style:{color:"#6b7280"}}),d.jsxs("span",{style:{fontSize:"0.875rem"},children:[(v=m.items)==null?void 0:v.reduce((b,y)=>b+y.quantity,0)," ×¤×¨×™×˜×™×"]})]})]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[d.jsxs("button",{onClick:()=>s(m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[d.jsx(pc,{size:16}),"×”×¦×’ ×¤×¨×˜×™×"]}),d.jsxs("button",{onClick:()=>f(m),disabled:o===m.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:o===m.id?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:o===m.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[d.jsx(Oa,{size:16}),o===m.id?"×ž×¢×‘×“...":"××©×¨"]}),d.jsxs("button",{onClick:()=>u(m),disabled:o===m.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:o===m.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:o===m.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[d.jsx(qs,{size:16}),"×“×—×”"]})]})]},m.id)})}),a&&d.jsx(xv,{request:a,onClose:()=>s(null),onApprove:()=>{s(null),f(a)},onReject:()=>{s(null),u(a)},processing:o===a.id}),d.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},xv=({request:r,onClose:e,onApprove:t,onReject:n,processing:i})=>{var o,l;const a=c=>new Date(c).toLocaleDateString("he-IL"),s=c=>{c.target===c.currentTarget&&e()};return d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:s,children:d.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:c=>c.stopPropagation(),children:[d.jsxs("div",{style:{background:"#1f2937",color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["×¤×¨×˜×™ ×‘×§×©×” - ",r.clientName]}),d.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"Ã—"})]}),d.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"×¤×¨×˜×™ ×”×œ×§×•×—"}),d.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×©× ×œ×§×•×—"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.clientName})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×˜×œ×¤×•×Ÿ"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.phone})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×›×ª×•×‘×ª"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.address})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"××™×ž×™×™×œ"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.email||"×œ× ×¦×•×™×Ÿ"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×¡×•×’ ××™×¨×•×¢"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.eventType})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×ª××¨×™×›×™×"}),d.jsxs("span",{style:{fontWeight:"bold"},children:[a(r.pickupDate)," â†’ ",a(r.returnDate)]})]})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["×¤×¨×™×˜×™× ×ž×‘×•×§×©×™× (",((o=r.items)==null?void 0:o.length)||0,")"]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(l=r.items)==null?void 0:l.map((c,f)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[d.jsx("img",{src:c.imageUrl||"/no-image-available.png",alt:c.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),d.jsxs("div",{style:{flex:1},children:[d.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:c.name}),d.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["×ž×–×”×”: ",c.ItemId]})]}),d.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["Ã—",c.quantity]})]},f))})]})]}),d.jsxs("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center",gap:"1rem"},children:[d.jsxs("button",{onClick:t,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[d.jsx(Oa,{size:20}),i?"×ž×¢×‘×“...":"××©×¨ ×‘×§×©×”"]}),d.jsxs("button",{onClick:n,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[d.jsx(qs,{size:20}),"×“×—×” ×‘×§×©×”"]}),d.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"×¡×’×•×¨"})]})]})})},vv=()=>{const{user:r}=En(),[e,t]=oe.useState([]),[n,i]=oe.useState(!0),[a,s]=oe.useState(null),[o,l]=oe.useState(null),c=async()=>{if(!(r!=null&&r.uid)){console.log("âŒ ××™×Ÿ ×ž×©×ª×ž×© ×ž×—×•×‘×¨:",r),i(!1);return}try{i(!0),console.log("ðŸ” ×ž×—×¤×© ×”×–×ž× ×•×ª ×¢×‘×•×¨ ×ž×©×ª×ž×©:",r.uid);const m=mi(vt(We,"orderRequests"),ia("requestedBy","==",r.uid));console.log("ðŸ“‹ ×ž×‘×¦×¢ ×©××™×œ×ª×” ×œ-orderRequests...");const v=await Mt(m);console.log("ðŸ“Š × ×ž×¦××•",v.size,"×‘×§×©×•×ª");const b=v.docs.map(E=>{const D={id:E.id,type:"request",...E.data()};return console.log("ðŸ“ ×‘×§×©×” × ×ž×¦××”:",D),D});console.log('âœ… ×¡×”"×› ×‘×§×©×•×ª ×©× ×ž×¦××•:',b.length);const y=[...b].sort((E,D)=>{var k,W,j,I;const C=((k=E.requestedAt)==null?void 0:k.seconds)||((W=E.createdAt)==null?void 0:W.seconds)||0;return(((j=D.requestedAt)==null?void 0:j.seconds)||((I=D.createdAt)==null?void 0:I.seconds)||0)-C});console.log("ðŸŽ¯ ×”×–×ž× ×•×ª ×¡×•×¤×™×•×ª:",y),t(y)}catch(m){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×–×ž× ×•×ª:",m),console.error("Stack trace:",m.stack)}finally{i(!1)}},f=async m=>{const v=u(m).text;if(window.confirm(`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×”×–×ž× ×”?

×¤×¨×˜×™×:
â€¢ ×œ×§×•×—: ${m.clientName}
â€¢ ×¡×˜×˜×•×¡: ${v}
â€¢ ×ª××¨×™×š: ${p(m.pickupDate)}

×¤×¢×•×œ×” ×–×• ××™× ×” × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.`)){l(m.id),console.log("ðŸ—‘ï¸ ×ž×•×—×§ ×”×–×ž× ×”:",m.id);try{await Vo(zt(We,"orderRequests",m.id)),console.log("âœ… ×”×–×ž× ×” × ×ž×—×§×” ×‘×”×¦×œ×—×”"),t(b=>b.filter(y=>y.id!==m.id)),alert("ðŸ—‘ï¸ ×”×”×–×ž× ×” × ×ž×—×§×” ×‘×”×¦×œ×—×” ×ž×”×¨×©×™×ž×” ×©×œ×š")}catch(b){console.error("âŒ ×©×’×™××” ×‘×ž×—×™×§×ª ×”×–×ž× ×”:",b),alert(`×©×’×™××” ×‘×ž×—×™×§×ª ×”×”×–×ž× ×”: ${b.message}`)}finally{l(null)}}};oe.useEffect(()=>{console.log("ðŸ‘¤ ×ž×©×ª×ž×© ×”×©×ª× ×”:",r),r!=null&&r.uid?(console.log("ðŸš€ ×§×•×¨× ×œ×˜×¢×™× ×ª ×”×–×ž× ×•×ª..."),c()):(console.log("â³ ×ž×—×›×” ×œ×ž×©×ª×ž×© ×œ×”×™×˜×¢×Ÿ..."),i(!1))},[r]);const u=m=>{switch(m.status){case"pending":return{text:"×ž×—×›×” ×œ××™×©×•×¨",color:"#f59e0b",bgColor:"#fef3c7",icon:d.jsx(so,{size:16})};case"approved":return{text:"×ž××•×©×¨",color:"#10b981",bgColor:"#d1fae5",icon:d.jsx(Oa,{size:16})};case"rejected":return{text:"× ×“×—×”",color:"#ef4444",bgColor:"#fee2e2",icon:d.jsx(qs,{size:16})};default:return{text:"×œ× ×™×“×•×¢",color:"#6b7280",bgColor:"#f3f4f6",icon:d.jsx(Qn,{size:16})}}},p=m=>new Date(m).toLocaleDateString("he-IL"),h=m=>m?(m.seconds?new Date(m.seconds*1e3):new Date(m)).toLocaleString("he-IL"):"";return n?d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),d.jsx("p",{children:"×˜×•×¢×Ÿ ×”×–×ž× ×•×ª..."})]})}):d.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[d.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[d.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"ðŸ“‹ ×”×”×–×ž× ×•×ª ×©×œ×™"}),d.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"×›×œ ×”×‘×§×©×•×ª ×•×”×”×–×ž× ×•×ª ×©×œ×š ×‘×ž×§×•× ××—×“"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[d.jsxs("div",{style:{background:"#fef3c7",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fde68a"},children:[d.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#92400e"},children:e.filter(m=>m.status==="pending").length}),d.jsx("div",{style:{color:"#92400e",fontSize:"0.875rem"},children:"×ž×—×›×•×ª ×œ××™×©×•×¨"})]}),d.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #a7f3d0"},children:[d.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#065f46"},children:e.filter(m=>m.status==="approved").length}),d.jsx("div",{style:{color:"#065f46",fontSize:"0.875rem"},children:"×ž××•×©×¨×•×ª"})]}),d.jsxs("div",{style:{background:"#fee2e2",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fecaca"},children:[d.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#991b1b"},children:e.filter(m=>m.status==="rejected").length}),d.jsx("div",{style:{color:"#991b1b",fontSize:"0.875rem"},children:"× ×“×—×•"})]}),d.jsxs("div",{style:{background:"#eff6ff",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #dbeafe"},children:[d.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1e40af"},children:e.length}),d.jsx("div",{style:{color:"#1e40af",fontSize:"0.875rem"},children:'×¡×”"×› ×”×–×ž× ×•×ª'})]})]}),e.length===0?d.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[d.jsx(Qn,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),d.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"××™×Ÿ ×”×–×ž× ×•×ª ×¢×“×™×™×Ÿ"}),d.jsx("p",{style:{color:"#9ca3af",marginBottom:"1.5rem"},children:"×¢×“×™×™×Ÿ ×œ× ×©×œ×—×ª ×‘×§×©×•×ª ×”×©××œ×”"}),d.jsx("a",{href:"/request",style:{display:"inline-block",background:"#3b82f6",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",textDecoration:"none",fontWeight:"500"},children:"ðŸ“ ×¦×•×¨ ×‘×§×©×ª ×”×©××œ×” ×¨××©×•× ×”"})]}):d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(m=>{var b;const v=u(m);return d.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:y=>{y.currentTarget.style.transform="translateY(-2px)",y.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:y=>{y.currentTarget.style.transform="translateY(0)",y.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:m.clientName}),d.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["× ×©×œ×—: ",h(m.requestedAt)]})]}),d.jsxs("div",{style:{background:v.bgColor,color:v.color,padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.icon,v.text]})]}),d.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(io,{size:16,style:{color:"#6b7280"}}),d.jsx("span",{style:{fontSize:"0.875rem"},children:m.phone})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(O1,{size:16,style:{color:"#6b7280"}}),d.jsx("span",{style:{fontSize:"0.875rem"},children:m.address})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Ti,{size:16,style:{color:"#6b7280"}}),d.jsxs("span",{style:{fontSize:"0.875rem"},children:[p(m.pickupDate)," â†’ ",p(m.returnDate)]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Qn,{size:16,style:{color:"#6b7280"}}),d.jsxs("span",{style:{fontSize:"0.875rem"},children:[(b=m.items)==null?void 0:b.reduce((y,E)=>y+E.quantity,0)," ×¤×¨×™×˜×™×"]})]}),m.status==="rejected"&&m.rejectionReason&&d.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",padding:"0.75rem",marginTop:"0.5rem"},children:[d.jsx("div",{style:{fontSize:"0.75rem",color:"#991b1b",fontWeight:"bold",marginBottom:"0.25rem"},children:"×¡×™×‘×ª ×“×—×™×™×”:"}),d.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d"},children:m.rejectionReason})]})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[d.jsxs("button",{onClick:()=>s(m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[d.jsx(pc,{size:16}),"×”×¦×’ ×¤×¨×˜×™×"]}),d.jsxs("button",{onClick:()=>f(m),disabled:o===m.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:o===m.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:o===m.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",opacity:o===m.id?.6:1},children:[d.jsx(xd,{size:16}),o===m.id?"×ž×•×—×§...":"×ž×—×§"]})]})]},m.id)})}),a&&d.jsx(yv,{order:a,onClose:()=>s(null)}),d.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},yv=({order:r,onClose:e})=>{var s,o;const t=l=>{switch(l.status){case"pending":return{text:"×ž×—×›×” ×œ××™×©×•×¨",color:"#f59e0b",bgColor:"#fef3c7",icon:d.jsx(so,{size:20})};case"approved":return{text:"×ž××•×©×¨",color:"#10b981",bgColor:"#d1fae5",icon:d.jsx(Oa,{size:20})};case"rejected":return{text:"× ×“×—×”",color:"#ef4444",bgColor:"#fee2e2",icon:d.jsx(qs,{size:20})};default:return{text:"×œ× ×™×“×•×¢",color:"#6b7280",bgColor:"#f3f4f6",icon:d.jsx(Qn,{size:20})}}},n=l=>new Date(l).toLocaleDateString("he-IL"),i=t(r),a=l=>{l.target===l.currentTarget&&e()};return d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:a,children:d.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:l=>l.stopPropagation(),children:[d.jsxs("div",{style:{background:i.color,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.icon,d.jsxs("div",{children:[d.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["×”×–×ž× ×” - ",r.clientName]}),d.jsx("p",{style:{fontSize:"0.875rem",margin:"0.25rem 0 0 0",opacity:.9},children:i.text})]})]}),d.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"Ã—"})]}),d.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"×¤×¨×˜×™ ×”×”×–×ž× ×”"}),d.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×©× ×œ×§×•×—"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.clientName})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×˜×œ×¤×•×Ÿ"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.phone})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×›×ª×•×‘×ª"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.address})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"××™×ž×™×™×œ"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.email||"×œ× ×¦×•×™×Ÿ"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×¡×•×’ ××™×¨×•×¢"}),d.jsx("span",{style:{fontWeight:"bold"},children:r.eventType})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×ª××¨×™×›×™×"}),d.jsxs("span",{style:{fontWeight:"bold"},children:[n(r.pickupDate)," â†’ ",n(r.returnDate)]})]})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["×¤×¨×™×˜×™× (",((s=r.items)==null?void 0:s.length)||0,")"]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(o=r.items)==null?void 0:o.map((l,c)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[d.jsx("img",{src:l.imageUrl||"/no-image-available.png",alt:l.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),d.jsxs("div",{style:{flex:1},children:[d.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:l.name}),d.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["×ž×–×”×”: ",l.ItemId]})]}),d.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["Ã—",l.quantity]})]},c))})]}),r.status==="rejected"&&r.rejectionReason&&d.jsxs("div",{style:{marginTop:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"1rem"},children:[d.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",color:"#991b1b",margin:"0 0 0.5rem 0"},children:"×¡×™×‘×ª ×“×—×™×™×”:"}),d.jsx("p",{style:{fontSize:"0.875rem",color:"#7f1d1d",margin:0},children:r.rejectionReason})]})]}),d.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center"},children:d.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"×¡×’×•×¨"})})]})})},bv=["×™× ×•××¨","×¤×‘×¨×•××¨","×ž×¨×¥","××¤×¨×™×œ","×ž××™","×™×•× ×™","×™×•×œ×™","××•×’×•×¡×˜","×¡×¤×˜×ž×‘×¨","××•×§×˜×•×‘×¨","× ×•×‘×ž×‘×¨","×“×¦×ž×‘×¨"],wv=["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—×ž×™×©×™","×©×™×©×™","×©×‘×ª"],Av=r=>new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),Sv=r=>new Date(r.getFullYear(),r.getMonth(),1).getDay(),_v=({currentDate:r,events:e=[],setCurrentDate:t,setSelectedEvents:n,setSelectedDate:i,setShowReport:a,fetchItemsAndOrders:s})=>{const{user:o}=En(),[l,c]=oe.useState([]),[f,u]=oe.useState(!1),[p,h]=oe.useState(new Set),[m,v]=oe.useState(!1),[b,y]=oe.useState(new Set);oe.useEffect(()=>{E()},[]);const E=async()=>{try{const F=await ra.getClosedDates();console.log("×™×ž×™× ×¡×’×•×¨×™× × ×˜×¢× ×•:",F.map(U=>({id:U.id,date:U.date}))),c(F)}catch(F){console.error("×©×’×™××” ×‘×˜×¢×™× ×ª ×™×ž×™× ×¡×’×•×¨×™×:",F)}},D=()=>{if(!o)return console.log("××™×Ÿ ×ž×©×ª×ž×© ×ž×—×•×‘×¨"),!1;const F=o.role==="MainAdmin";return console.log("×™×© ×”×¨×©××•×ª ×ž× ×”×œ:",F,"×ª×¤×§×™×“:",o.role),F},C=(F,U,V)=>{const te=new Date(F,U,V),le=te.getFullYear(),he=String(te.getMonth()+1).padStart(2,"0"),pe=String(te.getDate()).padStart(2,"0");return`${le}-${he}-${pe}`},z=F=>{if(!Array.isArray(e))return[];const U=C(r.getFullYear(),r.getMonth(),F);return e.filter(V=>V.date?ra.formatDateToString(V.date)===U:!1)},k=F=>z(F).some(V=>e.some(le=>le.orderId===V.orderId&&le.availabilityStatus==="CONFLICT")),W=F=>z(F).some(V=>V.isOverdue),j=F=>{const U=C(r.getFullYear(),r.getMonth(),F);return ra.isDateClosed(U,l)},I=F=>{const U=new Date(r.getFullYear(),r.getMonth(),F),V=new Date;return V.setHours(0,0,0,0),U.setHours(0,0,0,0),U<V?!1:!z(F).some(he=>he.type!=="×”×©××œ×” ×¤×¢×™×œ×”")},P=F=>{const U=new Date(r.getFullYear(),r.getMonth(),F),V=new Date;return V.setHours(0,0,0,0),U.setHours(0,0,0,0),U<V},N=F=>{const U=new Date(r.getFullYear(),r.getMonth(),F),V=new Date;return U.getDate()===V.getDate()&&U.getMonth()===V.getMonth()&&U.getFullYear()===V.getFullYear()},S=()=>{if(p.size>0)return!0;const F=new Set(l.map(U=>U.date||U.id));if(F.size!==b.size)return!0;for(const U of F)if(!b.has(U))return!0;return!1},O=F=>{if(f){A(F);return}const U=z(F);U.length>0&&U.every(te=>te.type==="×”×©××œ×” ×¤×¢×™×œ×”")||U.length>0&&(n(U),i(new Date(r.getFullYear(),r.getMonth(),F)),a(!0))},A=async F=>{console.log(`×œ×—×™×¦×” ×¢×œ ×™×•× ${F} ×‘×ž×¦×‘ ×¢×¨×™×›×”`);const U=j(F);if(console.log(`×”×™×•× ×¡×’×•×¨: ${U}, ×ž×¦×‘ ×¢×¨×™×›×”: ${f}`),U){const le=C(r.getFullYear(),r.getMonth(),F);console.log(`×ž×‘×˜×œ ×¡×’×™×¨×” ×©×œ ${le} - ×¢×“×›×•×Ÿ ×ž×™×™×“×™ + × ×©××¨ ×‘×ž×¦×‘ ×¢×¨×™×›×”`),c(he=>{const pe=he.filter(de=>de.date!==le&&de.id!==le);return console.log(`×¢×“×›×•×Ÿ ×ž×™×™×“×™: ×”×•×¡×¨×• ${he.length-pe.length} ×™×ž×™×`),pe}),await B(le),console.log(`×¡×™×•× ×˜×™×¤×•×œ ×‘×™×•× ${F} - ×ž×¦×‘ ×¢×¨×™×›×”: ${f}`);return}if(!I(F)){P(F)?alert("×œ× × ×™×ª×Ÿ ×œ×¡×’×•×¨ ×ª××¨×™×›×™× ×©×›×‘×¨ ×¢×‘×¨×•"):alert("× ×™×ª×Ÿ ×œ×¡×’×•×¨ ×¨×§ ×™×ž×™× ×œ×œ× ××™×¨×•×¢×™× ×§×™×™×ž×™×");return}const V=C(r.getFullYear(),r.getMonth(),F);console.log(`×ž×¡×ž×Ÿ ×™×•× ×œ×‘×Ÿ ${V} ×œ×¡×’×™×¨×”`);const te=new Set(p);te.has(V)?(te.delete(V),console.log(`×”×•×¡×¨ ×ž×”×‘×—×™×¨×”: ${V}`)):(te.add(V),console.log(`× ×•×¡×£ ×œ×‘×—×™×¨×”: ${V}`)),h(te),console.log(`×¡×”"×› × ×‘×—×¨×• ×œ×¡×’×™×¨×”: ${te.size} ×™×ž×™×`)},B=async F=>{try{console.log(`×ž×‘×˜×œ ×¡×’×™×¨×” ×‘×ž×¦×‘ ×¢×¨×™×›×”: ${F}`),await ra.removeClosedDate(F)?(console.log(`×”×¡×’×™×¨×” ×©×œ ${F} ×‘×•×˜×œ×” - × ×©××¨ ×‘×ž×¦×‘ ×¢×¨×™×›×”`),await E(),console.log("×™×•× ×‘×•×˜×œ ×ž×”×¡×’×™×¨×” - × ×©××¨ ×‘×ž×¦×‘ ×¢×¨×™×›×”")):(await E(),alert("×©×’×™××” ×‘×‘×™×˜×•×œ ×”×¡×’×™×¨×”"))}catch(U){console.error("×©×’×™××” ×‘×‘×™×˜×•×œ ×¡×’×™×¨×ª ×™×•×:",U),await E(),alert("×©×’×™××” ×‘×‘×™×˜×•×œ ×”×¡×’×™×¨×”")}},T=()=>{console.log("×ž×¤×¢×™×œ ×ž×¦×‘ ×¢×¨×™×›×”"),u(!0),h(new Set);const F=new Set(l.map(U=>U.date||U.id));y(F),console.log("×ž×¦×‘ ×¢×¨×™×›×” ×¤×¢×™×œ, × ×©×ž×¨ ×ž×¦×‘ ×ž×§×•×¨×™:",F)},L=()=>{console.log("×ž×‘×˜×œ ×ž×¦×‘ ×¢×¨×™×›×”"),u(!1),h(new Set),y(new Set),console.log("×™×¦×× ×• ×ž×ž×¦×‘ ×¢×¨×™×›×”")},Y=async()=>{v(!0);try{if(p.size>0){const F=Array.from(p);console.log("×©×•×ž×¨ ×™×ž×™× ×¡×’×•×¨×™×:",F);const U=await ra.addMultipleClosedDates(F,o.uid,"×™×•× ×¡×’×•×¨ - × ×§×‘×¢ ×¢×œ ×™×“×™ ×”×ž× ×”×œ");U.success.length>0&&(alert(`${U.success.length} ×™×ž×™× × ×¡×’×¨×• ×‘×”×¦×œ×—×”`),await E(),s&&await s()),U.failed.length>0&&alert(`${U.failed.length} ×™×ž×™× ×œ× ×”×¦×œ×™×—×• ×œ×”×™×¡×’×¨`)}else console.log("×©×™× ×•×™×™× ×›×‘×¨ ×‘×•×¦×¢×• (×‘×™×˜×•×œ ×™×ž×™× ×¡×’×•×¨×™×), ×ž×¡×™×™× ×ž×¦×‘ ×¢×¨×™×›×”"),alert("×”×©×™× ×•×™×™× × ×©×ž×¨×• ×‘×”×¦×œ×—×”!"),s&&await s();u(!1),h(new Set),y(new Set)}catch(F){console.error("×©×’×™××” ×‘×©×ž×™×¨×ª ×©×™× ×•×™×™×:",F),alert("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×©×™× ×•×™×™×")}finally{v(!1)}},X=F=>{const U=z(F),V=new Map;return U.forEach(te=>{V.has(te.orderId)||V.set(te.orderId,{...te,allEventsForOrder:U.filter(le=>le.orderId===te.orderId)})}),Array.from(V.values())},ae=Av(r),Q=Sv(r),M=[];console.log("CalendarGrid - ×‘×•× ×” ×œ×•×— ×œ×—×•×“×©:",r.getMonth()+1,"×©× ×”:",r.getFullYear()),console.log("×™×ž×™× ×‘×—×•×“×©:",ae,"×™×•× ×¨××©×•×Ÿ:",Q);for(let F=0;F<Q;F++)M.push(d.jsx("div",{className:"day-cell empty"},`empty-${F}`));for(let F=1;F<=ae;F++){const U=z(F),V=X(F),te=U.filter(fe=>fe.type==="×”×©××œ×”"),le=U.filter(fe=>fe.type==="×”×—×–×¨×”"),he=U.length>0,pe=V.length,de=j(F),be=I(F),Ee=P(F),Re=N(F),Fe=k(F),Z=W(F),je=C(r.getFullYear(),r.getMonth(),F),He=p.has(je);let Te="day-cell";he&&(Te+=" has-events"),te.length>0&&(Te+=" pickup-day"),le.length>0&&(Te+=" return-day"),de&&(Te+=" closed-day"),Ee&&(Te+=" past-day"),Re&&(Te+=" today"),f&&(be||de)&&(Te+=" can-manage"),He&&(Te+=" selected-for-closure"),Fe&&(Te+=" availability-conflict"),Z&&(Te+=" overdue-orders"),F===4&&r.getMonth()===6&&console.log("×™×•× 4 ×‘×™×•×œ×™ - × ×•×¦×¨ ×¢×:",{day:F,month:r.getMonth()+1,year:r.getFullYear(),dateStr:je,hasEvents:he,hasConflicts:Fe,hasOverdue:Z,dayClasses:Te}),M.push(d.jsxs("div",{className:Te,onClick:()=>O(F),"data-day":F,"data-month":r.getMonth()+1,style:{cursor:f?be||de?"pointer":"not-allowed":U.some(fe=>fe.type!=="×”×©××œ×” ×¤×¢×™×œ×”")?"pointer":"default"},children:[d.jsx("span",{className:"day-number",children:F}),Re&&d.jsx("div",{className:"today-indicator",title:"×”×™×•×",children:"ðŸ“…"}),de&&d.jsx("div",{className:"closed-indicator",title:"×™×•× ×¡×’×•×¨ - ×‘×ž×¦×‘ ×¢×¨×™×›×”: ×œ×—×¥ ×œ×‘×™×˜×•×œ ×ž×™×™×“×™",children:"ðŸ”’"}),Z&&!de&&d.jsx("div",{className:"overdue-indicator",title:"×”×–×ž× ×•×ª ×©×œ× ×”×•×—×–×¨×• ×‘×–×ž×Ÿ",children:"ðŸš¨"}),Fe&&!de&&!Z&&d.jsx("div",{className:"conflict-indicator",title:"×‘×¢×™×•×ª ×–×ž×™× ×•×ª - ×œ×—×¥ ×œ×¤×¨×˜×™×",children:d.jsx(Da,{size:16,style:{color:"#9333ea"}})}),f&&(be||de)&&d.jsx("div",{className:"closure-selector",title:de?"×œ×—×¥ ×œ×‘×™×˜×•×œ ×ž×™×™×“×™":"×œ×—×¥ ×œ×‘×—×™×¨×” ×œ×¡×’×™×¨×”",children:de?"ðŸ”“":He?"âœ…":"â­•"}),!de&&d.jsxs("div",{className:"event-icons",children:[te.length>0&&d.jsxs("div",{className:`event-tag pickup-tag ${Z?"overdue":Fe?"conflict":""}`,title:"××™×¡×•×£ ×ž×•×¦×¨×™×",children:["ðŸ“¦ ",te.length>1&&te.length]}),le.length>0&&d.jsxs("div",{className:`event-tag return-tag ${Z?"overdue":Fe?"conflict":""}`,title:"×”×—×–×¨×ª ×ž×•×¦×¨×™×",children:["ðŸ”„ ",le.length>1&&le.length]})]}),!de&&pe>0&&d.jsx("div",{className:`event-count ${Z?"overdue":Fe?"conflict":""}`,title:`${pe} ×”×–×ž× ×•×ª`,children:pe})]},F))}return d.jsxs("div",{className:"calendar-container",children:[d.jsxs("div",{className:"calendar-header",children:[d.jsx("button",{onClick:()=>t(new Date(r.getFullYear(),r.getMonth()-1,1)),children:d.jsx(Ws,{size:20})}),d.jsxs("h2",{className:"calendar-title",children:[d.jsx(Ti,{size:24})," ",bv[r.getMonth()]," ",r.getFullYear()]}),d.jsx("button",{onClick:()=>t(new Date(r.getFullYear(),r.getMonth()+1,1)),children:d.jsx(Hs,{size:20})})]}),D()&&d.jsx("div",{className:"calendar-controls",children:f?d.jsxs("div",{className:"edit-controls",children:[d.jsxs("span",{className:"edit-mode-indicator",children:["ðŸ“ ×ž×¦×‘ ×¢×¨×™×›×”: ×‘×—×¨ ×™×ž×™× ×œ×‘× ×™× ×œ×¡×’×™×¨×” ××• ×™×ž×™× ×¡×’×•×¨×™× ×œ×‘×™×˜×•×œ (",p.size," × ×‘×—×¨×•)"]}),d.jsxs("div",{className:"edit-buttons",children:[d.jsxs("button",{className:"btn-save",onClick:Y,disabled:m||!S(),children:[d.jsx(gc,{size:16}),m?"×©×•×ž×¨...":"×©×ž×•×¨"]}),d.jsxs("button",{className:"btn-cancel",onClick:L,disabled:m,children:[d.jsx(oa,{size:16}),"×‘×™×˜×•×œ"]})]})]}):d.jsx("div",{className:"control-buttons",children:d.jsxs("button",{className:"btn-edit-dates",onClick:T,title:"×‘×˜×œ ×ª××¨×™×›×™×",children:[d.jsx(x2,{size:18}),"×‘×˜×œ ×ª××¨×™×›×™×"]})})}),d.jsx("div",{className:"day-names",children:wv.map(F=>d.jsx("div",{className:"day-name",children:F},F))}),d.jsx("div",{className:"calendar-grid",children:M}),d.jsxs("div",{className:"calendar-footer",children:[d.jsxs("div",{className:"calendar-legend",children:[d.jsx("span",{className:"legend-item",children:"ðŸ“¦ ××™×¡×•×£ ×ž×•×¦×¨×™×"}),d.jsx("span",{className:"legend-item",children:"ðŸ”„ ×”×—×–×¨×ª ×ž×•×¦×¨×™×"}),l.length>0&&d.jsxs("span",{className:"legend-item",children:["ðŸ”’ ×™×ž×™× ×¡×’×•×¨×™× (",l.length,")"]}),d.jsx("span",{className:"legend-item",children:"ðŸš¨ ×”×–×ž× ×•×ª ×©×œ× ×”×•×—×–×¨×•"}),d.jsx("span",{className:"legend-item",children:"ðŸ”” ×‘×¢×™×•×ª ×–×ž×™× ×•×ª"}),f&&d.jsx("span",{className:"legend-item",children:"â­• ×–×ž×™×Ÿ ×œ×¡×’×™×¨×” â€¢ ðŸ”“ ×–×ž×™×Ÿ ×œ×‘×™×˜×•×œ"}),d.jsx("span",{className:"legend-item",children:"ðŸ“… ×”×™×•×"})]}),d.jsxs("div",{className:"calendar-stats",children:['×œ×—×¥ ×¢×œ ×™×•× ×¢× ××™×¨×•×¢×™× ×›×“×™ ×œ×¨××•×ª ×¤×¨×˜×™× â€¢ ×¡×”"×› ××™×¨×•×¢×™×: ',Array.isArray(e)?e.length:0,l.length>0&&` â€¢ ×™×ž×™× ×¡×’×•×¨×™×: ${l.length}`]}),(!Array.isArray(e)||e.length===0)&&d.jsx("div",{className:"warning",children:"××™×Ÿ ××™×¨×•×¢×™× × ×˜×¢× ×™× - ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ×ž×¡×“ ×”× ×ª×•× ×™×"})]})]})};class $s{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const Cv=()=>{if(!(typeof localStorage>"u"))return{get:r=>Promise.resolve(localStorage.getItem(r)),set:(r,e)=>Promise.resolve(localStorage.setItem(r,e)),remove:r=>Promise.resolve(localStorage.removeItem(r))}},nn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Cv()},Nd=r=>r?typeof r=="string"?{publicKey:r}:r.toString()==="[object Object]"?r:{}:{},Iv=(r,e="https://api.emailjs.com")=>{if(!r)return;const t=Nd(r);nn.publicKey=t.publicKey,nn.blockHeadless=t.blockHeadless,nn.storageProvider=t.storageProvider,nn.blockList=t.blockList,nn.limitRate=t.limitRate,nn.origin=t.origin||e},th=async(r,e,t={})=>{const n=await fetch(nn.origin+r,{method:"POST",headers:t,body:e}),i=await n.text(),a=new $s(n.status,i);if(n.ok)return a;throw a},rh=(r,e,t)=>{if(!r||typeof r!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Ev=r=>{if(r&&r.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},nh=r=>r.webdriver||!r.languages||r.languages.length===0,ih=()=>new $s(451,"Unavailable For Headless Browser"),Nv=(r,e)=>{if(!Array.isArray(r))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Dv=r=>{var e;return!((e=r.list)!=null&&e.length)||!r.watchVariable},kv=(r,e)=>r instanceof FormData?r.get(e):r[e],ah=(r,e)=>{if(Dv(r))return!1;Nv(r.list,r.watchVariable);const t=kv(e,r.watchVariable);return typeof t!="string"?!1:r.list.includes(t)},oh=()=>new $s(403,"Forbidden"),jv=(r,e)=>{if(typeof r!="number"||r<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},Ov=async(r,e,t)=>{const n=Number(await t.get(r)||0);return e-Date.now()+n},sh=async(r,e,t)=>{if(!e.throttle||!t)return!1;jv(e.throttle,e.id);const n=e.id||r;return await Ov(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},lh=()=>new $s(429,"Too Many Requests"),Tv=async(r,e,t,n)=>{const i=Nd(n),a=i.publicKey||nn.publicKey,s=i.blockHeadless||nn.blockHeadless,o=i.storageProvider||nn.storageProvider,l={...nn.blockList,...i.blockList},c={...nn.limitRate,...i.limitRate};return s&&nh(navigator)?Promise.reject(ih()):(rh(a,r,e),Ev(t),t&&ah(l,t)?Promise.reject(oh()):await sh(location.pathname,c,o)?Promise.reject(lh()):th("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"}))},Rv=r=>{if(!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Lv=r=>typeof r=="string"?document.querySelector(r):r,Pv=async(r,e,t,n)=>{const i=Nd(n),a=i.publicKey||nn.publicKey,s=i.blockHeadless||nn.blockHeadless,o=nn.storageProvider||i.storageProvider,l={...nn.blockList,...i.blockList},c={...nn.limitRate,...i.limitRate};if(s&&nh(navigator))return Promise.reject(ih());const f=Lv(t);rh(a,r,e),Rv(f);const u=new FormData(f);return ah(l,u)?Promise.reject(oh()):await sh(location.pathname,c,o)?Promise.reject(lh()):(u.append("lib_version","4.4.1"),u.append("service_id",r),u.append("template_id",e),u.append("user_id",a),th("/api/v1.0/email/send-form",u))},Dd={init:Iv,send:Tv,sendForm:Pv,EmailJSResponseStatus:$s},Ms={serviceId:"service_zbzqfa3",reminderTemplateId:"template_02cqfdn",confirmationTemplateId:"template_lv2sc1p",publicKey:"gJHtAe_l22dY8tKju"};Dd.init(Ms.publicKey);const nc=r=>r?new Date(r).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):"",Mv=async(r,e)=>{var t,n;try{console.log(`ðŸ“§ Sending manual pickup email for order ${e}`);const i={to_email:r.email,to_name:r.clientName,client_name:r.clientName,pickup_date:nc(r.pickupDate),return_date:nc(r.returnDate),volunteer_name:"×¦×•×•×ª ×”××¨×’×•×Ÿ",volunteer_phone:"054-2575886",organization_name:"×’×ž×— ×©×ž×—×ª ×–×§× ×ª×™",items_list:((t=r.items)==null?void 0:t.map(s=>`â€¢ ${s.name} - ×›×ž×•×ª: ${s.quantity}`).join(`
`))||"×œ× ×¦×•×™× ×• ×¤×¨×™×˜×™×",total_items:((n=r.items)==null?void 0:n.reduce((s,o)=>s+o.quantity,0))||0,event_type:r.eventType||"×›×œ×œ×™",order_id:e,pickup_location:r.pickupLocation||"×ž×™×§×•× ×œ×¤×™ ×ª×™××•×",special_instructions:r.specialInstructions||"××™×Ÿ ×”×•×¨××•×ª ×ž×™×•×—×“×•×ª"},a=await Dd.send(Ms.serviceId,Ms.confirmationTemplateId,i);return console.log("âœ… Manual pickup email sent successfully:",a),await zr(zt(We,"orders",e),{manualEmailSent:!0,manualEmailSentAt:P1.now(),manualEmailResult:{status:a.status,text:a.text,sentAt:new Date().toISOString(),sentBy:"admin"}}),{success:!0,result:a}}catch(i){return console.error(`âŒ Failed to send manual pickup email for order ${e}:`,i),{success:!1,error:i.message}}},Bv=async(r,e)=>{var t,n;try{console.log(`ðŸ“§ Sending reminder email for order ${e}`);const i={to_email:r.email,to_name:r.clientName,client_name:r.clientName,return_date:nc(r.returnDate),volunteer_name:r.volunteerName||"×¦×•×•×ª ×”××¨×’×•×Ÿ",volunteer_phone:"054-2575886",organization_name:"×’×ž×— ×©×ž×—×ª ×–×§× ×ª×™",items_list:((t=r.items)==null?void 0:t.map(s=>`â€¢ ${s.name} - ×›×ž×•×ª: ${s.quantity}`).join(`
`))||"×œ× ×¦×•×™× ×• ×¤×¨×™×˜×™×",total_items:((n=r.items)==null?void 0:n.reduce((s,o)=>s+o.quantity,0))||0,event_type:r.eventType||"×›×œ×œ×™",pickup_date:nc(r.pickupDate),order_id:e},a=await Dd.send(Ms.serviceId,Ms.reminderTemplateId,i);return console.log("âœ… Reminder email sent successfully:",a),await zr(zt(We,"orders",e),{reminderSent:!0,reminderSentAt:P1.now(),emailSentResult:{status:a.status,text:a.text,sentAt:new Date().toISOString()}}),{success:!0,result:a}}catch(i){return console.error(`âŒ Failed to send reminder for order ${e}:`,i),{success:!1,error:i.message}}},ch=async()=>{const r=new Date,e=new Date(r);e.setDate(r.getDate()+2);const t=e.toISOString().split("T")[0];console.log(`ðŸ“… Checking emails for reminder date: ${t}`);const n={reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0};try{console.log("ðŸ” Checking for reminders...");const i=mi(vt(We,"orders"),ia("status","in",["active","confirmed","picked_up","open"]),ia("returnDate","==",t)),a=await Mt(i);n.totalFound=a.size;for(const l of a.docs){const c=l.data(),f=l.id;if(c.reminderSent)n.reminders.alreadySent++;else{const u=await Bv(c,f);u.success?n.reminders.sent++:n.reminders.errors.push({orderId:f,email:c.email,clientName:c.clientName,error:u.error})}}const s=n.reminders.sent,o=n.reminders.errors.length;return console.log("ðŸ“Š Email check results:",{reminders:n.reminders,totalSent:s,totalErrors:o}),{...n,totalSent:s,totalErrors:o,message:s>0?`×‘×“×™×§×” ×”×•×©×œ×ž×”: ${s} ×ª×–×›×•×¨×•×ª × ×©×œ×—×•`:"×œ× × ×ž×¦××• ×ª×–×›×•×¨×•×ª ×œ×©×œ×™×—×” ×”×™×•×"}}catch(i){return console.error("âŒ Error in email check:",i),{reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:i.message}],message:"×©×’×™××” ×‘×‘×“×™×§×ª ××™×ž×™×™×œ×™×"}}},Fv=({show:r,selectedDate:e,selectedEvents:t,allItems:n,setShowReport:i,setShowItemsModal:a,setEditItemModal:s,fetchItemsAndOrders:o,onStartReturnInspection:l})=>{const[c,f]=oe.useState(null),[u,p]=oe.useState(new Set);if(oe.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r)return null;const h=async S=>{try{return await Vo(zt(We,"orders",S)),!0}catch(O){throw console.error("Error deleting order:",O),O}},m=S=>{const O=new Date;O.setHours(0,0,0,0);const A=new Date(S.returnDate);A.setHours(0,0,0,0);const B=O>A,T=B?Math.ceil((O-A)/(1e3*60*60*24)):0;return{isOverdue:B,overdueDays:T}},v=S=>{const O=new Date(S.pickupDate),A=new Date;return O.setHours(0,0,0,0),A.setHours(0,0,0,0),O.getTime()===A.getTime()},b=S=>S.events.some(O=>O.type==="×”×©××œ×”"),y=S=>{const O=S.manualEmailSent===!0,A=u.has(S.orderId);return O||A},E=S=>S.email&&v(S)&&b(S)&&!y(S),D=async S=>{if(E(S)){f(S.orderId);try{console.log("ðŸš€ Sending manual pickup email for order:",S.orderId);const O=await Mv({email:S.email,clientName:S.clientName,phone:S.phone,items:S.items||[],pickupDate:S.pickupDate,returnDate:S.returnDate,eventType:S.eventType||"×›×œ×œ×™",pickupLocation:S.pickupLocation||"×ž×™×§×•× ×œ×¤×™ ×ª×™××•×",specialInstructions:S.specialInstructions||"××™×Ÿ ×”×•×¨××•×ª ×ž×™×•×—×“×•×ª"},S.orderId);if(console.log("ðŸ“§ Email send result:",O),O.success)p(A=>new Set([...A,S.orderId])),console.log("âœ… Email sent successfully, refreshing data..."),o&&await o(),alert("âœ… ××™×ž×™×™×œ × ×©×œ×— ×‘×”×¦×œ×—×”!");else throw new Error(O.error||"Unknown error")}catch(O){console.error("âŒ ×©×’×™××” ×‘×©×œ×™×—×ª ××™×ž×™×™×œ:",O),alert(`âŒ ×©×’×™××” ×‘×©×œ×™×—×ª ×”××™×ž×™×™×œ: ${O.message}`)}finally{f(null)}}},C=S=>c===S.orderId?"×©×•×œ×—...":y(S)?"× ×©×œ×— âœ“":v(S)?"×©×œ×— ××™×ž×™×™×œ ××™×¡×•×£":"×–×ž×™×Ÿ ×‘×™×•× ×”××™×¡×•×£",z=S=>S.email?b(S)?y(S)?"××™×ž×™×™×œ ×›×‘×¨ × ×©×œ×— ×¢×‘×•×¨ ×”×–×ž× ×” ×–×•":v(S)?"×©×œ×— ××™×ž×™×™×œ ××™×©×•×¨ ××™×¡×•×£ ×œ×œ×§×•×—":`×”×›×¤×ª×•×¨ ×™×”×™×” ×–×ž×™×Ÿ ×‘×™×•× ×”××™×¡×•×£: ${new Date(S.pickupDate).toLocaleDateString("he-IL")}`:"×›×¤×ª×•×¨ ×”××™×ž×™×™×œ ×–×ž×™×Ÿ ×¨×§ ×‘×™×ž×™ ××™×¡×•×£ (×œ× ×”×—×–×¨×”)":"××™×Ÿ ×›×ª×•×‘×ª ××™×ž×™×™×œ ×¢×‘×•×¨ ×”×–×ž× ×” ×–×•",W=(S=>{const O=new Map;return S.forEach(A=>{O.has(A.orderId)||O.set(A.orderId,{orderId:A.orderId,clientName:A.clientName,phone:A.phone,email:A.email,items:A.items,pickupDate:A.pickupDate,returnDate:A.returnDate,manualEmailSent:A.manualEmailSent||!1,availabilityStatus:A.availabilityStatus,availabilityConflicts:A.availabilityConflicts||[],needsAttention:A.needsAttention,events:[]}),O.get(A.orderId).events.push(A)}),Array.from(O.values())})(t),j=W.some(S=>S.availabilityStatus==="CONFLICT"&&S.availabilityConflicts.length>0),I=W.some(S=>{const{isOverdue:O}=m(S);return O}),P=async S=>{if(S&&window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×”×–×ž× ×”?"))try{await h(S),await o(),i(!1),alert("×”×”×–×ž× ×” × ×ž×—×§×” ×‘×”×¦×œ×—×”.")}catch(O){console.error(O),alert("×ž×—×™×§×” × ×›×©×œ×”. × ×¡×” ×©×•×‘.")}},N=S=>{S.target===S.currentTarget&&i(!1)};return d.jsxs(d.Fragment,{children:[d.jsx("style",{jsx:!0,global:!0,children:`
        .modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 32rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
        
        .availability-warning {
          background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          border: 2px solid #9333ea !important;
          border-radius: 8px !important;
          padding: 1rem !important;
          margin-bottom: 1rem !important;
          animation: warningPulse 2s ease-in-out infinite !important;
        }
        
        @keyframes warningPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        @media (min-width: 768px) {
          .modal-content {
            max-width: 42rem !important;
          }
        }
      `}),d.jsx("div",{className:"modal-overlay",onClick:N,children:d.jsxs("div",{className:"modal-content",dir:"rtl",onClick:S=>S.stopPropagation(),style:{display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[d.jsxs("div",{style:{background:I?"linear-gradient(to right, #dc2626, #b91c1c)":j?"linear-gradient(to right, #9333ea, #7c3aed)":"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[I?d.jsx("span",{style:{fontSize:"24px"},children:"ðŸš¨"}):d.jsx(Ti,{size:24}),d.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:["××™×¨×•×¢×™× ×œ×™×•× ",e==null?void 0:e.toLocaleDateString("he-IL")]})]}),d.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"Ã—"})]}),d.jsxs("div",{style:{marginTop:"0.5rem",color:I?"#fecaca":j?"#e9d5ff":"#bfdbfe"},children:[W.length," ×”×–×ž× ",W.length!==1?"×•×ª":"×”",I&&" â€¢ ðŸš¨ ×“×•×¨×© ×˜×™×¤×•×œ ×“×—×•×£",j&&!I&&" â€¢ × ×“×¨×© ×¢×“×›×•×Ÿ ×“×—×•×£"]})]}),d.jsx("div",{style:{padding:"1.5rem",paddingBottom:"2.5rem",overflowY:"auto",flex:1,minHeight:0},children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:W.map((S,O)=>{const A=S.availabilityStatus==="CONFLICT"&&S.availabilityConflicts.length>0,{isOverdue:B,overdueDays:T}=m(S);return d.jsxs("div",{style:{border:B?"2px solid #dc2626":A?"2px solid #9333ea":"1px solid #e5e7eb",borderRadius:"8px",background:B?"#fef2f2":A?"#faf5ff":"white",boxShadow:B?"0 4px 12px rgba(220, 38, 38, 0.15)":A?"0 4px 12px rgba(147, 51, 234, 0.15)":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[B&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",padding:"0.75rem",borderBottom:"1px solid #f87171",borderTopLeftRadius:"6px",borderTopRightRadius:"6px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[d.jsx("span",{style:{fontSize:"18px"},children:"ðŸš¨"}),d.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#dc2626"},children:"×”×–×ž× ×” ×©×œ× ×”×•×—×–×¨×” ×‘×–×ž×Ÿ!"})]}),d.jsxs("div",{style:{fontSize:"0.8rem",color:"#b91c1c"},children:["××™×—×•×¨ ×©×œ ",T," ×™×•×",T>1?"×™×":""," â€¢ ×ª××¨×™×š ×”×—×–×¨×”: ",new Date(S.returnDate).toLocaleDateString("he-IL")]})]}),A&&!B&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",padding:"0.75rem",borderBottom:"1px solid #c084fc",borderTopLeftRadius:"6px",borderTopRightRadius:"6px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[d.jsx(Da,{size:16,style:{color:"#9333ea"}}),d.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#581c87"},children:"×‘×¢×™×•×ª ×–×ž×™× ×•×ª ×‘×”×–×ž× ×” ×–×•:"})]}),d.jsx("div",{style:{fontSize:"0.8rem",color:"#4c1d95"},children:S.availabilityConflicts.map((L,Y)=>d.jsxs("div",{style:{marginBottom:"0.25rem"},children:["â€¢ ",d.jsxs("strong",{children:[L.itemName,":"]})," ",L.message]},Y))})]}),d.jsxs("div",{style:{padding:"1rem",borderBottom:A||B?"none":"1px solid #f3f4f6"},children:[d.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[d.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",color:B?"#dc2626":A?"#581c87":"#1f2937",margin:0},children:S.clientName}),d.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",background:B?"#dc2626":A?"#9333ea":"#3b82f6",color:"white"},children:B?`ðŸš¨ ××™×—×•×¨ ${T} ×™×•×`:A?"ðŸ”” ×‘×¢×™×•×ª ×–×ž×™× ×•×ª":`×”×–×ž× ×” #${O+1}`})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:B?"#b91c1c":A?"#4c1d95":"#4b5563",marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[d.jsx(io,{size:16}),d.jsx("span",{children:S.phone})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[d.jsx(Ti,{size:16}),d.jsxs("span",{children:[new Date(S.pickupDate).toLocaleDateString("he-IL")," - ",new Date(S.returnDate).toLocaleDateString("he-IL")]})]})]}),d.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:S.events.map((L,Y)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:B?"#dc2626":A?"#9333ea":L.type==="×”×©××œ×”"?"#10b981":L.type==="×”×—×–×¨×”"?"#f59e0b":"#3b82f6",color:"white",border:B||A?"1px solid rgba(255,255,255,0.3)":"none"},children:[d.jsx("span",{children:L.icon}),d.jsx("span",{children:L.description}),L.isMultiDay&&d.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:["(×™×•× ",L.dayNumber,"/",L.totalDays,")"]})]},Y))})]})}),S.items&&S.items.length>0&&d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[d.jsx(Qn,{size:16,style:{color:B?"#dc2626":A?"#9333ea":"#6b7280"}}),d.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:B?"#dc2626":A?"#581c87":"#374151"},children:["×¤×¨×™×˜×™× (",S.items.reduce((L,Y)=>L+(Y.quantity||1),0),")"]})]}),d.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[S.items.slice(0,3).map((L,Y)=>{const X=A&&S.availabilityConflicts.some(ae=>ae.itemName===L.name);return d.jsxs("div",{style:{background:B?"#fee2e2":X?"#f3e8ff":"#f9fafb",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:B?"#dc2626":X?"#581c87":"#4b5563",border:B?"1px solid #f87171":X?"1px solid #c084fc":"1px solid #e5e7eb",fontWeight:B||X?"bold":"normal"},children:[B?"ðŸš¨ ":X?"ðŸ”” ":"",L.name," ",L.quantity>1?`(Ã—${L.quantity})`:""]},Y)}),S.items.length>3&&d.jsxs("div",{style:{background:B?"#fee2e2":A?"#f3e8ff":"#eff6ff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:B?"#dc2626":A?"#581c87":"#2563eb",border:B?"1px solid #f87171":A?"1px solid #c084fc":"1px solid #dbeafe"},children:["+",S.items.length-3," × ×•×¡×¤×™×"]})]})]})]}),d.jsx("div",{style:{padding:"1rem",background:B?"#fef2f2":A?"#faf5ff":"#f9fafb"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",flexWrap:"wrap"},children:[B&&l&&d.jsxs("button",{onClick:()=>l(S.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold",boxShadow:"0 4px 12px rgba(220, 38, 38, 0.25)",animation:"pulse 2s infinite"},children:[d.jsx(bu,{size:16}),"×¡×’×•×¨ ×”×–×ž× ×” - ×“×—×•×£!"]}),S.email&&v(S)&&b(S)&&d.jsx("button",{onClick:()=>D(S),disabled:c===S.orderId||y(S),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:c===S.orderId?"#f59e0b":y(S)?"#22c55e":"#7c3aed",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:c===S.orderId||y(S)?"not-allowed":"pointer",fontSize:"0.875rem",opacity:y(S)?.8:1,fontWeight:y(S)?"bold":"normal"},title:z(S),children:c===S.orderId?d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"×©×•×œ×—..."]}):d.jsxs(d.Fragment,{children:[d.jsx(v2,{size:16}),C(S)]})}),S.events.some(L=>L.icon==="ðŸ“¦"||L.icon==="ðŸ”„")&&d.jsxs("button",{onClick:()=>s({open:!0,eventId:`${S.orderId}-edit`,items:S.items.map(L=>({...L}))}),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:B?"#dc2626":A?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:B||A?"bold":"normal",boxShadow:B||A?"0 4px 12px rgba(147, 51, 234, 0.25)":"none",animation:B||A?"pulse 2s infinite":"none"},children:[d.jsx(vd,{size:16}),B||A?"×¢×¨×•×š ×”×–×ž× ×” - ×“×—×•×£!":"×¢×¨×•×š ×”×–×ž× ×”"]}),d.jsxs("button",{onClick:()=>{const L=t.filter(Y=>Y.orderId===S.orderId);a(L)},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[d.jsx(pc,{size:16}),"×”×¦×’ ×¤×¨×˜×™×"]}),S.events.some(L=>L.icon==="ðŸ“¦")&&d.jsxs("button",{onClick:()=>P(S.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[d.jsx(xd,{size:16}),"×ž×—×§"]}),l&&S.events.some(L=>L.type==="×”×—×–×¨×”")&&!B&&d.jsxs("button",{onClick:()=>l(S.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f59e0b",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[d.jsx(bu,{size:16}),"×‘×“×™×§×ª ×”×—×–×¨×”"]})]})})]},S.orderId)})})}),d.jsx("div",{style:{background:I?"#fef2f2":j?"#faf5ff":"#f9fafb",padding:"1rem 1.5rem",borderTop:I?"1px solid #f87171":j?"1px solid #d8b4fe":"1px solid #e5e7eb"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{fontSize:"0.875rem",color:I?"#dc2626":j?"#581c87":"#4b5563"},children:['×¡×”"×› ',W.reduce((S,O)=>{var A;return S+(((A=O.items)==null?void 0:A.reduce((B,T)=>B+(T.quantity||1),0))||0)},0)," ×¤×¨×™×˜×™×",I&&" â€¢ ðŸš¨ ×™×© ×”×–×ž× ×•×ª ×©×œ× ×”×•×—×–×¨×•",j&&!I&&" â€¢ ðŸ”” ×™×© ×‘×¢×™×•×ª ×–×ž×™× ×•×ª"]}),d.jsx("button",{onClick:()=>i(!1),style:{background:I?"#dc2626":j?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer"},children:"×¡×’×•×¨"})]})})]})})]})},zv=({show:r,setShow:e,selectedEvents:t,allItems:n})=>{var s;if(oe.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r)return null;const i=((s=t==null?void 0:t[0])==null?void 0:s.items)||[],a=o=>{o.target===o.currentTarget&&e(!1)};return d.jsxs(d.Fragment,{children:[d.jsx("style",{jsx:!0,global:!0,children:`
        .items-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .items-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 28rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
      `}),d.jsx("div",{className:"items-modal-overlay",onClick:a,children:d.jsxs("div",{className:"items-modal-content",dir:"rtl",onClick:o=>o.stopPropagation(),children:[d.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #047857)",color:"white",padding:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[d.jsx(Qn,{size:24}),d.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"×¨×©×™×ž×ª ×ž×•×¦×¨×™×"})]}),d.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:d.jsx(oa,{size:20})})]}),d.jsxs("div",{style:{marginTop:"0.5rem",color:"#a7f3d0"},children:[i.length," ×¤×¨×™×˜",i.length!==1?"×™×":""," ×‘×”×–×ž× ×”"]})]}),d.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:i.length>0?d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map((o,l)=>(n.find(c=>c.name===o.name),d.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.imageUrl&&d.jsx("img",{src:o.imageUrl,alt:o.name,style:{width:"4rem",height:"4rem",objectFit:"cover",borderRadius:"8px",border:"2px solid #e5e7eb"}}),d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:o.name}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[d.jsxs("span",{children:[d.jsx("strong",{children:"×›×ž×•×ª:"})," ",o.quantity]}),d.jsxs("span",{children:[d.jsx("strong",{children:"×ž×–×”×” ×ž×•×¦×¨:"}),d.jsx("code",{style:{background:"#f3f4f6",padding:"0.125rem 0.375rem",borderRadius:"4px",marginRight:"0.25rem"},children:o.itemId||"×œ× × ×ž×¦×"})]})]})]}),d.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["Ã—",o.quantity]})]})},l)))}):d.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[d.jsx(Qn,{size:48,style:{color:"#d1d5db",marginBottom:"1rem"}}),d.jsx("p",{children:"××™×Ÿ ×¤×¨×™×˜×™× ×‘×”×–×ž× ×” ×–×•"})]})}),d.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['×¡×”"×› ×›×ž×•×ª: ',i.reduce((o,l)=>o+(l.quantity||1),0)]}),d.jsx("button",{onClick:()=>e(!1),style:{background:"#059669",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"500"},children:"×¡×’×•×¨"})]})})]})})]})},Uv=({show:r,data:e,setData:t,allItems:n,setShowReport:i,fetchItemsAndOrders:a,allEvents:s})=>{const[o,l]=oe.useState({items:[]}),[c,f]=oe.useState(!1),[u,p]=oe.useState(""),[h,m]=oe.useState(""),[v,b]=oe.useState({pickupDate:null,returnDate:null}),[y,E]=oe.useState(new Set);if(oe.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),oe.useEffect(()=>{if(r&&e.eventId&&s.length>0){console.log("ðŸš€ Initializing edit modal");const O=e.eventId.split("-")[0],A=s.filter(B=>B.orderId===O);if(A.length>0){const B=A[0];b({pickupDate:new Date(B.pickupDate),returnDate:new Date(B.returnDate)});const T=new Set;B.availabilityConflicts&&B.availabilityConflicts.length>0&&B.availabilityConflicts.forEach(L=>{T.add(L.itemName)}),E(T),console.log("ðŸ“… Order dates:",{pickup:B.pickupDate,return:B.returnDate}),console.log("âš ï¸ Problematic items:",Array.from(T))}l({items:[...e.items||[]]})}},[r,e,s]),!r)return null;const D=O=>{var Q,M;const A=n.find(F=>F.name===O);if(!A)return console.warn(`âŒ Stock not found for ${O}`),0;const B=A.quantity||0,T=(Q=e.eventId)==null?void 0:Q.split("-")[0];if(!v.pickupDate||!v.returnDate)return console.warn("âš ï¸ Missing pickup/return dates for current order."),B;console.log(`ðŸ”Ž Checking "${O}" availability from ${v.pickupDate.toDateString()} to ${v.returnDate.toDateString()}`),console.log(`ðŸ“¦ Total stock from database: ${B}`);let L=0;const Y=new Set;s.forEach(F=>{if(F.orderId===T||Y.has(`${F.orderId}-${O}`))return;const U=new Date(F.pickupDate),V=new Date(F.returnDate);if(U<=v.returnDate&&V>=v.pickupDate&&F.items){const le=F.items.find(he=>he.name===O);le&&(console.log(`âž¡ï¸ Overlapping Order ID: ${F.orderId}`),console.log(`    Dates: ${U.toDateString()} - ${V.toDateString()}`),console.log(`    Reserved: ${le.quantity}`),L+=le.quantity||0,Y.add(`${F.orderId}-${O}`))}});const X=((M=o.items.find(F=>F.name===O))==null?void 0:M.quantity)||0,ae=B-L-X;return console.log(`âœ… Available: ${ae} = ${B} - ${L} - ${X} (already in order)`),Math.max(0,ae)},C=O=>{console.log("âž• Trying to add item:",O.name);const A=D(O.name);if(A<=0){alert(`âŒ ×œ× × ×™×ª×Ÿ ×œ×”×•×¡×™×£ ×ž-${O.name}. ×–×ž×™×Ÿ: ${A}`);return}const B=o.items.findIndex(T=>T.name===O.name);if(B>=0){const T=[...o.items];T[B]={...T[B],quantity:T[B].quantity+1},l({...o,items:T})}else{const T={name:O.name,quantity:1,ItemId:O.ItemId||O.itemId||O.id,itemId:O.ItemId||O.itemId||O.id,id:O.id,imageUrl:O.imageUrl||""};l({...o,items:[...o.items,T]})}},z=(O,A)=>{var Y;if(console.log(`ðŸ”„ Updating ${O} to quantity: ${A}`),A<=0){l({...o,items:o.items.filter(X=>X.name!==O)});return}const B=((Y=o.items.find(X=>X.name===O))==null?void 0:Y.quantity)||0,T=D(O)+B;if(A>T){alert(`âŒ ×œ× × ×™×ª×Ÿ ×œ×”×–×ž×™×Ÿ ${A} ×ž-${O}. ×–×ž×™×Ÿ: ${T}`);return}const L=o.items.map(X=>X.name===O?{...X,quantity:A}:X);l({...o,items:L})},k=O=>{console.log("ðŸ—‘ï¸ Removing item:",O),l({...o,items:o.items.filter(A=>A.name!==O)})},W=async()=>{var O;try{f(!0);const A=(O=e.eventId)==null?void 0:O.split("-")[0];if(!A)throw new Error("×©×’×™××”: ×œ× × ×ž×¦× ×ž×–×”×” ×”×–×ž× ×”");console.log("ðŸ’¾ Saving items:",o.items);const B=o.items.map(T=>({...T,ItemId:T.ItemId||T.itemId||T.id,itemId:T.ItemId||T.itemId||T.id}));await zr(zt(We,"orders",A),{items:B,availabilityStatus:"OK",availabilityConflicts:[],needsAttention:!1,lastAvailabilityCheck:tr()}),await a(),t({open:!1,eventId:null,items:[]}),i(!1),alert("ðŸŽ‰ ×”×©×™× ×•×™×™× × ×©×ž×¨×• ×‘×”×¦×œ×—×”!")}catch(A){console.error("âŒ ×©×’×™××” ×‘×©×ž×™×¨×”:",A),alert(A.message||"×©×ž×™×¨×” × ×›×©×œ×”. × ×¡×” ×©×•×‘.")}finally{f(!1)}},j=()=>{t({open:!1,eventId:null,items:[]})},I=u.toLowerCase(),P=h.trim().toLowerCase(),N=n.filter(O=>O.name.toLowerCase().includes(I)&&(P===""||String(O.ItemId||O.itemId||"").toLowerCase()===P)),S=O=>{O.target===O.currentTarget&&j()};return d.jsxs(d.Fragment,{children:[d.jsx("style",{jsx:!0,global:!0,children:`
        .edit-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .edit-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .problematic-item {
          border: 2px solid #9333ea !important;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%) !important;
          animation: problemPulse 3s ease-in-out infinite !important;
        }

        @keyframes problemPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 4px rgba(147, 51, 234, 0.1); }
        }

        .problematic-item-indicator {
          background: #9333ea !important;
          color: white !important;
          padding: 0.25rem 0.5rem !important;
          border-radius: 4px !important;
          font-size: 0.75rem !important;
          font-weight: bold !important;
          margin-left: 0.5rem !important;
        }

        @keyframes warningPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @media (max-width: 768px) {
          .edit-modal-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .edit-modal-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .modal-footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
          }
          
          .modal-footer-mobile button {
            width: 100% !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),d.jsx("div",{className:"edit-modal-overlay",onClick:S,children:d.jsxs("div",{className:"edit-modal-content",dir:"rtl",onClick:O=>O.stopPropagation(),children:[d.jsxs("div",{style:{background:y.size>0?"linear-gradient(to right, #9333ea, #7c3aed)":"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1rem",flexShrink:0},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.size>0?d.jsx(Da,{size:24,style:{animation:"bellRing 2s infinite"}}):d.jsx(vd,{size:24}),d.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:y.size>0?"ðŸ”” ×¢×¨×™×›×ª ×”×–×ž× ×” - ×™×© ×‘×¢×™×•×ª ×–×ž×™× ×•×ª":"×¢×¨×™×›×ª ×”×–×ž× ×”"})]}),d.jsx("button",{onClick:j,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"Ã—"})]}),v.pickupDate&&v.returnDate&&d.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:y.size>0?"#e9d5ff":"#bfdbfe"},children:["ðŸ“… ×ª××¨×™×›×™ ×”×”×–×ž× ×”: ",v.pickupDate.toLocaleDateString("he-IL")," - ",v.returnDate.toLocaleDateString("he-IL"),y.size>0&&d.jsxs("div",{style:{marginTop:"0.25rem",fontWeight:"bold"},children:["ðŸ”” ",y.size," ×¤×¨×™×˜×™× ×“×•×¨×©×™× ×¢×“×›×•×Ÿ"]})]})]}),d.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[y.size>0&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",border:"2px solid #9333ea",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem",animation:"warningPulse 2s ease-in-out infinite"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[d.jsx(Da,{size:20,style:{color:"#9333ea"}}),d.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#581c87"},children:["× ×ž×¦××• ",y.size," ×¤×¨×™×˜×™× ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª!"]})]}),d.jsx("p",{style:{fontSize:"0.875rem",color:"#4c1d95",margin:"0 0 0.5rem 0"},children:"×”×¤×¨×™×˜×™× ×”×ž×¡×•×ž× ×™× ×‘×¡×’×•×œ ×œ×ž×˜×” ××™× × ×–×ž×™× ×™× ×‘×›×ž×•×ª ×”×ž×‘×•×§×©×ª. ×”×ª×× ××ª ×”×›×ž×•×™×•×ª ××• ×”×¡×¨ ×¤×¨×™×˜×™× ×›×“×™ ×œ×¤×ª×•×¨ ××ª ×”×‘×¢×™×”."}),d.jsxs("div",{style:{background:"rgba(243, 232, 255, 0.7)",padding:"0.5rem",borderRadius:"6px",fontSize:"0.8rem",color:"#4c1d95"},children:["ðŸ’¡ ×¤×¨×™×˜×™× ×‘×¢×™×™×ª×™×™×: ",Array.from(y).join(", ")]})]}),d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["×¤×¨×™×˜×™× × ×•×›×—×™×™× ×‘×”×–×ž× ×” (",o.items.length,")"]}),o.items.length>0?d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:o.items.map((O,A)=>{const B=n.find(X=>X.name===O.name),L=D(O.name)+O.quantity,Y=y.has(O.name);return d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:Y?"#faf5ff":"#f9fafb",padding:"0.75rem",borderRadius:"8px",border:Y?"2px solid #9333ea":"1px solid #e5e7eb"},className:Y?"problematic-item":"",children:[Y&&d.jsx("div",{className:"problematic-item-indicator",children:"ðŸ”” ×‘×¢×™×”"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[(B==null?void 0:B.imageUrl)&&d.jsx("img",{src:B.imageUrl,alt:O.name,style:{width:"4.5rem",height:"4.5rem",objectFit:"cover",borderRadius:"6px",flexShrink:0,border:Y?"2px solid #9333ea":"none"}}),d.jsxs("div",{style:{minWidth:0,flex:1},children:[d.jsxs("div",{style:{fontWeight:"500",color:Y?"#581c87":"#1f2937",fontSize:"0.9rem"},children:[Y&&"ðŸ”” ",O.name]}),d.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["×ž×–×”×”: ",(B==null?void 0:B.ItemId)||(B==null?void 0:B.itemId)||"×œ× × ×ž×¦×"]}),d.jsxs("div",{style:{fontSize:"0.7rem",color:Y?"#9333ea":"#059669",fontWeight:Y?"bold":"500"},children:["×ž×§×¡×™×ž×•×: ",L,Y&&" (×œ× ×ž×¡×¤×™×§!)"]})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},children:[d.jsx("button",{onClick:()=>z(O.name,O.quantity-1),style:{background:"#ef4444",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:c,children:d.jsx(y2,{size:12})}),d.jsx("span",{style:{width:"1.5rem",textAlign:"center",fontWeight:"500",fontSize:"0.9rem",color:Y?"#9333ea":"#1f2937"},children:O.quantity}),d.jsx("button",{onClick:()=>z(O.name,O.quantity+1),style:{background:O.quantity>=L?"#9ca3af":"#10b981",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:O.quantity>=L?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:c||O.quantity>=L,children:d.jsx(T1,{size:12})}),d.jsx("button",{onClick:()=>k(O.name),style:{background:Y?"#9333ea":"#ef4444",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",border:"none",cursor:"pointer",marginRight:"0.3rem",fontSize:"0.75rem",fontWeight:Y?"bold":"normal"},disabled:c,children:Y?"×”×¡×¨ ×‘×¢×™×”":"×”×¡×¨"})]})]},A)})}):d.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"#6b7280"},children:"××™×Ÿ ×¤×¨×™×˜×™× ×‘×”×–×ž× ×”"})]}),d.jsxs("div",{children:[d.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"×”×•×¡×£ ×¤×¨×™×˜×™× ×ž×”×ž×œ××™"}),d.jsx("div",{style:{marginBottom:"1rem"},children:d.jsxs("div",{style:{position:"relative"},children:[d.jsx(Ff,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),d.jsx("input",{type:"text",placeholder:"×—×¤×© ×¤×¨×™×˜ ×œ×¤×™ ×©×...",value:u,onChange:O=>p(O.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:c})]})}),d.jsx("div",{style:{marginBottom:"1rem"},children:d.jsxs("div",{style:{position:"relative"},children:[d.jsx(Ff,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),d.jsx("input",{type:"text",placeholder:"×—×¤×© ×¤×¨×™×˜ ×œ×¤×™ ×ž×¡×¤×¨ ×ž×–×”×”...",value:h,onChange:O=>m(O.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:c})]})}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",maxHeight:"12rem",overflowY:"auto",overflowX:"hidden"},children:N.map((O,A)=>{var ae;const B=o.items.some(Q=>Q.name===O.name),T=B?(ae=o.items.find(Q=>Q.name===O.name))==null?void 0:ae.quantity:0,L=D(O.name),Y=T<L+T,X=y.has(O.name);return d.jsx("div",{onClick:()=>!c&&Y&&C(O),style:{padding:"0.6rem",borderRadius:"8px",border:B?X?"2px solid #9333ea":"2px solid #3b82f6":"1px solid #e5e7eb",background:B?X?"#faf5ff":"#eff6ff":"white",cursor:c||!Y?"not-allowed":"pointer",transition:"all 0.2s",opacity:c||!Y?.6:1},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.imageUrl&&d.jsx("img",{src:O.imageUrl,alt:O.name,style:{width:"6rem",height:"6rem",objectFit:"cover",borderRadius:"6px",flexShrink:0,border:X?"1px solid #9333ea":"none"}}),d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsxs("div",{style:{fontWeight:"500",fontSize:"0.8rem",color:X?"#581c87":"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[X&&"ðŸ”” ",O.name]}),d.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["×ž×–×”×”: ",O.itemId||O.ItemId]}),d.jsxs("div",{style:{fontSize:"0.65rem",color:L>0?"#059669":"#dc2626",fontWeight:"500"},children:["×–×ž×™×Ÿ: ",L]}),B&&d.jsxs("div",{style:{fontSize:"0.65rem",color:X?"#9333ea":"#2563eb",fontWeight:"500"},children:["×‘×”×–×ž× ×”: ",T,X&&" (×‘×¢×™×”!)"]})]})]})},A)})})]})]}),d.jsx("div",{style:{background:y.size>0?"#faf5ff":"#f9fafb",padding:"1rem",borderTop:y.size>0?"1px solid #d8b4fe":"1px solid #e5e7eb",flexShrink:0},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"modal-footer-mobile",children:[d.jsxs("div",{style:{fontSize:"0.875rem",color:y.size>0?"#581c87":"#4b5563"},children:['×¡×”"×› ×¤×¨×™×˜×™×: ',o.items.reduce((O,A)=>O+A.quantity,0),y.size>0&&` â€¢ ðŸ”” ${y.size} ×‘×¢×™×•×ª`]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"modal-footer-mobile",children:[d.jsx("button",{onClick:j,disabled:c,style:{background:"#6b7280",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:c?"not-allowed":"pointer",fontSize:"0.875rem",opacity:c?.6:1},children:"×‘×™×˜×•×œ"}),d.jsx("button",{onClick:W,disabled:c||o.items.length===0,style:{background:o.items.length===0?"#9ca3af":y.size>0?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:o.items.length===0||c?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:y.size>0?"bold":"normal"},children:c?d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"×©×•×ž×¨..."]}):d.jsxs(d.Fragment,{children:[d.jsx(gc,{size:16}),y.size>0?"×©×ž×•×¨ ×•×ª×§×Ÿ ×‘×¢×™×•×ª":"×©×ž×•×¨ ×©×™× ×•×™×™×"]})})]})]})})]})})]})};class Wv{static async checkAllActiveOrders(){try{console.log("ðŸ” ×ž×ª×—×™×œ ×‘×“×™×§×ª ×–×ž×™× ×•×ª ×œ×›×œ ×”×”×–×ž× ×•×ª ×”×¤×¢×™×œ×•×ª...");const[e,t]=await Promise.all([this.getAllActiveOrders(),this.getAllItems()]);console.log(`ðŸ“Š × ×ž×¦××• ${e.length} ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª ×•-${t.length} ×¤×¨×™×˜×™× ×‘×ž×œ××™`);const n=[];for(const i of e){const a=await this.checkOrderAvailability(i,e,t);a.length>0&&n.push({order:i,conflicts:a})}return console.log(`âš ï¸ × ×ž×¦××• ${n.length} ×”×–×ž× ×•×ª ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª`),await this.updateOrdersWithConflicts(n),{success:!0,totalOrders:e.length,problematicOrders:n.length,conflicts:n}}catch(e){return console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×ª ×–×ž×™× ×•×ª:",e),{success:!1,error:e.message}}}static async getAllActiveOrders(){return(await Mt(vt(We,"orders"))).docs.map(t=>({id:t.id,...t.data()})).filter(t=>t.status==="open").sort((t,n)=>new Date(t.pickupDate)-new Date(n.pickupDate))}static async getAllItems(){return(await Mt(vt(We,"items"))).docs.map(t=>({id:t.id,...t.data()})).filter(t=>t.isDeleted!==!0)}static async checkOrderAvailability(e,t,n){const i=[];if(!e.items||!e.pickupDate||!e.returnDate)return i;const a=new Date(e.pickupDate),s=new Date(e.returnDate);for(const o of e.items){const l=n.find(f=>f.id===o.id||f.name===o.name);if(!l){i.push({itemName:o.name,itemId:o.ItemId||o.itemId,requested:o.quantity,available:0,issue:"ITEM_NOT_FOUND",message:"×”×¤×¨×™×˜ ×œ× × ×ž×¦× ×‘×ž×œ××™"});continue}const c=this.calculateAvailableQuantity(l,e,t,a,s);o.quantity>c&&i.push({itemName:o.name,itemId:l.ItemId,requested:o.quantity,available:c,totalStock:l.quantity,issue:"INSUFFICIENT_STOCK",message:`×ž×‘×•×§×©: ${o.quantity}, ×–×ž×™×Ÿ: ${c}`})}return i}static calculateAvailableQuantity(e,t,n,i,a){const s=e.quantity||0;let o=0;for(const l of n){if(l.id===t.id||!l.pickupDate||!l.returnDate||!l.items)continue;const c=new Date(l.pickupDate);if(new Date(l.returnDate)>=i&&c<=a){const p=l.items.find(h=>h.id===e.id||h.name===e.name);p&&(o+=p.quantity||0)}}return Math.max(0,s-o)}static async updateOrdersWithConflicts(e){const t=[];for(const{order:n,conflicts:i}of e)try{const a={availabilityStatus:"CONFLICT",availabilityConflicts:i,conflictDetectedAt:new Date().toISOString(),needsAttention:!0,lastAvailabilityCheck:tr()};t.push(zr(zt(We,"orders",n.id),a)),console.log(`âš ï¸ ×¢×•×“×›× ×” ×”×–×ž× ×” ${n.simpleId||n.id} ×¢× ${i.length} ×‘×¢×™×•×ª ×–×ž×™× ×•×ª`)}catch(a){console.error(`âŒ ×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×–×ž× ×” ${n.id}:`,a)}t.length>0&&(await Promise.all(t),console.log(`âœ… ×¢×•×“×›× ×• ${t.length} ×”×–×ž× ×•×ª ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª`))}static async clearAvailabilityConflict(e){try{await zr(zt(We,"orders",e),{availabilityStatus:"OK",availabilityConflicts:[],needsAttention:!1,lastAvailabilityCheck:tr()}),console.log(`âœ… × ×•×§×” ×¡×˜×˜×•×¡ ×–×ž×™× ×•×ª ×ž×”×–×ž× ×” ${e}`)}catch(t){console.error("âŒ ×©×’×™××” ×‘× ×™×§×•×™ ×¡×˜×˜×•×¡ ×–×ž×™× ×•×ª:",t)}}static async runAfterOrderClosure(e){console.log(`ðŸ”„ ×ž×¨×™×¥ ×‘×“×™×§×ª ×–×ž×™× ×•×ª ××—×¨×™ ×¡×’×™×¨×ª ×”×–×ž× ×” ${e}`);const t=await this.checkAllActiveOrders();return t.success&&t.problematicOrders>0?(console.log(`ðŸš¨ × ×ž×¦××• ${t.problematicOrders} ×”×–×ž× ×•×ª ×©×“×•×¨×©×•×ª ×¢×“×›×•×Ÿ ××—×¨×™ ×¡×’×™×¨×ª ×”×”×–×ž× ×”`),{shouldShowAlert:!0,message:`× ×ž×¦××• ${t.problematicOrders} ×”×–×ž× ×•×ª ×¢×ª×™×“×™×•×ª ×©×“×•×¨×©×•×ª ×¢×“×›×•×Ÿ ×‘×’×œ×œ ×©×™× ×•×™×™ ×ž×œ××™`,conflicts:t.conflicts}):{shouldShowAlert:!1}}static async quickCheckOrder(e){try{const[t,n]=await Promise.all([this.getAllActiveOrders(),this.getAllItems()]),i=t.find(s=>s.id===e);if(!i)return{hasConflicts:!1};const a=await this.checkOrderAvailability(i,t,n);return{hasConflicts:a.length>0,conflicts:a}}catch(t){return console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×” ×ž×”×™×¨×”:",t),{hasConflicts:!1,error:t.message}}}}const Hv=({show:r,order:e,onClose:t,onCompleteInspection:n,allItems:i=[],updateItemQuantities:a})=>{const[s,o]=oe.useState([]),[l,c]=oe.useState(new Set),[f,u]=oe.useState(""),[p,h]=oe.useState(!1),[m,v]=oe.useState(null);if(oe.useEffect(()=>{if(r&&(e!=null&&e.items)){const k=e.items.map(W=>({itemId:W.id||W.itemId,name:W.name,quantityExpected:W.quantity||1,quantityReturned:W.quantity||1,isFullyReturned:!0,condition:"good",damageDescription:"",repairCost:0,notes:""}));o(k),c(new Set),u(""),v(null)}},[r,e]),oe.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r||!e)return null;const b=(k,W,j)=>{o(I=>I.map((P,N)=>{if(N===k){const S={...P,[W]:j};return S.isFullyReturned=j>=P.quantityExpected,j<P.quantityExpected?S.condition="lost":S.condition==="lost"&&(S.condition="good"),S}return P})),c(I=>{const P=new Set(I);return P.delete(k),P})},y=k=>{c(W=>new Set([...W,k]))},E=()=>s.length>0&&l.size===s.length,D=async()=>{if(!E()){alert("×™×© ×œ××©×¨ ××ª ×›×œ ×”×¤×¨×™×˜×™× ×œ×¤× ×™ ×”×©×œ×ž×ª ×”×‘×“×™×§×”");return}const k=s.reduce((P,N)=>P+N.quantityExpected,0),W=s.reduce((P,N)=>P+N.quantityReturned,0),j=Math.round(W/k*100),I=`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×¡×™×™× ××ª ×‘×“×™×§×ª ×”×”×—×–×¨×”?

×¡×™×›×•×:
â€¢ ×¤×¨×™×˜×™× ×©×”×•×©××œ×•: ${k}/${k}
â€¢ ×¤×¨×™×˜×™× ×©×—×–×¨×•: ${W}/${k}
â€¢ ××—×•×– ×”×—×–×¨×”: ${j}%

×”×”×–×ž× ×” ×ª×¢×‘×•×¨ ×œ××™×¡×•×£ ×”×”×–×ž× ×•×ª ×”×¡×’×•×¨×•×ª.`;if(window.confirm(I))try{h(!0);const P=s.reduce((T,L)=>T+L.quantityExpected,0),N=s.reduce((T,L)=>T+L.quantityReturned,0),S=s.filter(T=>T.condition==="damaged").length,O=s.reduce((T,L)=>T+(L.repairCost||0),0),A={totalItemsExpected:P,totalItemsReturned:N,totalDamages:S,totalRepairCost:O,managerNotes:f,customerNotified:!1,customerAgreedToCharges:!1};for(const T of s){const L=i.find(Y=>Y.id===T.itemId||Y.name===T.name);if(L){let Y=0;const X=T.quantityExpected-T.quantityReturned,ae=T.condition==="damaged"?T.quantityReturned:0;Y=X+ae;const Q=L.quantity-Y,M=Math.max(0,Q);Y>0&&await zr(zt(We,"items",L.id),{quantity:M,lastUpdated:tr()})}}await n(e.id,s,A),a&&await a(),console.log("ðŸ” ×‘×•×“×§ ×–×ž×™× ×•×ª ×œ×”×–×ž× ×•×ª ×¢×ª×™×“×™×•×ª ××—×¨×™ ×¡×’×™×¨×ª ×”×”×–×ž× ×”...");const B=await Wv.runAfterOrderClosure(e.id);if(B.shouldShowAlert){console.log("ðŸš¨ × ×ž×¦××• ×‘×¢×™×•×ª ×–×ž×™× ×•×ª:",B),v(B),h(!1);return}t()}catch(P){console.error("Error completing return inspection:",P),alert("×©×’×™××” ×‘×”×©×œ×ž×ª ×‘×“×™×§×ª ×”×—×–×¨×”. × ×¡×” ×©×•×‘.")}finally{h(!1)}},C=()=>{v(null),t()},z=k=>{k.target===k.currentTarget&&window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×¡×’×•×¨ ××ª ×—×œ×•×Ÿ ×‘×“×™×§×ª ×”×—×–×¨×”?")&&t()};return d.jsxs(d.Fragment,{children:[d.jsx("style",{jsx:!0,global:!0,children:`
        .return-inspection-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.7) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .return-inspection-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .availability-alert {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important;
          border: 2px solid #f59e0b !important;
          border-radius: 12px !important;
          padding: 1.5rem !important;
          margin: 1rem !important;
          box-shadow: 0 8px 25px rgba(245, 158, 11, 0.2) !important;
        }

        @media (max-width: 768px) {
          .return-inspection-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .return-inspection-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
            align-items: stretch !important;
          }
          
          .footer-mobile button {
            width: 100% !important;
          }
          
          .footer-mobile .summary-text {
            text-align: center !important;
            margin-bottom: 0.5rem !important;
          }

          .availability-alert {
            margin: 0.5rem !important;
            padding: 1rem !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes slideDown {
          0% { transform: translateY(-10px); opacity: 0; }
          100% { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }
      `}),d.jsx("div",{className:"return-inspection-overlay",onClick:z,children:d.jsxs("div",{className:"return-inspection-content",dir:"rtl",onClick:k=>k.stopPropagation(),children:[m&&d.jsxs("div",{className:"availability-alert",style:{animation:"slideDown 0.3s ease-out"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[d.jsx(D1,{size:24,style:{color:"#f59e0b",animation:"pulse 2s infinite"}}),d.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"bold",margin:0,color:"#92400e"},children:"âš ï¸ × ×ž×¦××• ×”×–×ž× ×•×ª ×¢×ª×™×“×™×•×ª ×©×“×•×¨×©×•×ª ×¢×“×›×•×Ÿ!"})]}),d.jsx("p",{style:{color:"#92400e",marginBottom:"1rem",fontSize:"0.95rem",lineHeight:"1.5"},children:m.message}),m.conflicts&&m.conflicts.length>0&&d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#92400e",marginBottom:"0.5rem"},children:"×”×–×ž× ×•×ª ×©×“×•×¨×©×•×ª ×¢×“×›×•×Ÿ:"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.conflicts.slice(0,3).map((k,W)=>d.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.5)",padding:"0.75rem",borderRadius:"8px",border:"1px solid #fbbf24"},children:[d.jsxs("div",{style:{fontWeight:"600",fontSize:"0.9rem",color:"#92400e"},children:["×”×–×ž× ×” #",k.order.simpleId||k.order.id]}),d.jsxs("div",{style:{fontSize:"0.85rem",color:"#78350f",marginTop:"0.25rem"},children:[k.conflicts.length," ×¤×¨×™×˜×™× ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª"]})]},W)),m.conflicts.length>3&&d.jsxs("div",{style:{textAlign:"center",fontSize:"0.85rem",color:"#92400e",fontStyle:"italic"},children:["×•×¢×•×“ ",m.conflicts.length-3," ×”×–×ž× ×•×ª × ×•×¡×¤×•×ª..."]})]})]}),d.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.7)",padding:"0.75rem",borderRadius:"8px",fontSize:"0.9rem",color:"#78350f",marginBottom:"1rem"},children:["ðŸ’¡ ",d.jsx("strong",{children:"×ž×” ×œ×¢×©×•×ª:"}),' ×¢×‘×•×¨ ×œ×œ×•×— ×”×©× ×”, ×ž×¦× ××ª ×”××™×¨×•×¢×™× ×”×‘×¢×™×™×ª×™×™× (×™×•×¤×™×¢×• ×‘×¦×‘×¢ ×©×•× ×”), ×•×œ×—×¥ ×¢×œ "×¢×¨×•×š ×”×–×ž× ×”" ×›×“×™ ×œ×”×ª××™× ××ª ×”×›×ž×•×™×•×ª ×œ×ž×œ××™ ×”×–×ž×™×Ÿ.']}),d.jsx("button",{onClick:C,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",width:"100%",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",transition:"all 0.2s ease"},onMouseOver:k=>k.target.style.transform="translateY(-1px)",onMouseOut:k=>k.target.style.transform="translateY(0)",children:"×”×‘× ×ª×™ - ×¡×’×•×¨ ×‘×“×™×§×ª ×”×—×–×¨×” ×•×¢×‘×•×¨ ×œ×œ×•×— ×”×©× ×”"})]}),d.jsxs("div",{style:{background:"linear-gradient(to right, #fb923c, #f97316)",color:"white",padding:"1rem",flexShrink:0},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[d.jsx(Oa,{size:24}),d.jsxs("div",{children:[d.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"×‘×“×™×§×ª ×”×—×–×¨×ª ×ž×•×¦×¨×™×"}),d.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:["×œ×§×•×—: ",e.clientName," â€¢ ",e.phone]})]})]}),d.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"Ã—"})]}),d.jsxs("div",{style:{marginTop:"1rem",background:"rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.875rem"},children:[d.jsx("span",{children:"×”×ª×§×“×ž×•×ª ×”×‘×“×™×§×”"}),d.jsxs("span",{style:{fontWeight:"bold"},children:[l.size,"/",s.length," ×¤×¨×™×˜×™× ××•×©×¨×•"]})]}),d.jsx("div",{style:{marginTop:"0.5rem",background:"rgba(255, 255, 255, 0.3)",borderRadius:"4px",height:"6px",overflow:"hidden"},children:d.jsx("div",{style:{background:"#10b981",height:"100%",width:`${s.length>0?l.size/s.length*100:0}%`,transition:"width 0.3s ease"}})})]})]}),d.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:s.map((k,W)=>{var I,P;return l.has(W)?null:d.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1rem",background:"#ffffff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[d.jsx("img",{src:((I=e.items.find(N=>N.id===k.itemId))==null?void 0:I.imageUrl)||"/no-image-available.png",alt:k.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb",flexShrink:0}}),d.jsxs("div",{style:{minWidth:0,flex:1},children:[d.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:k.name}),d.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["×ž×–×”×”: ",k.ItemId||((P=e.items.find(N=>N.id===k.itemId))==null?void 0:P.ItemId)||k.itemId]}),d.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["×›×ž×•×ª ×ž×•×–×ž× ×ª: ",k.quantityExpected]})]})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[d.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"×›×ž×•×ª ×©×—×–×¨×”:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[d.jsx("button",{onClick:()=>{const N=Math.max(0,k.quantityReturned-1);b(W,"quantityReturned",N)},disabled:k.quantityReturned<=0,style:{background:k.quantityReturned<=0?"#d1d5db":"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:k.quantityReturned<=0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:k.quantityReturned<=0?.6:1},children:"-"}),d.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"40px",textAlign:"center",color:"#1f2937"},children:k.quantityReturned}),d.jsx("button",{onClick:()=>{const N=Math.min(k.quantityExpected,k.quantityReturned+1);b(W,"quantityReturned",N)},disabled:k.quantityReturned>=k.quantityExpected,style:{background:k.quantityReturned>=k.quantityExpected?"#d1d5db":"#10b981",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:k.quantityReturned>=k.quantityExpected?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:k.quantityReturned>=k.quantityExpected?.6:1},children:"+"}),d.jsxs("button",{onClick:()=>y(W),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",marginRight:"1rem"},children:[d.jsx(R1,{size:16}),"×‘×•×¦×¢"]})]})]}),k.quantityReturned<k.quantityExpected&&d.jsx("div",{style:{padding:"0.5rem",background:"#fef3c7",borderRadius:"6px",textAlign:"center"},children:d.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"500"},children:["âš ï¸ ×—×¡×¨×™× ",k.quantityExpected-k.quantityReturned," ×¤×¨×™×˜×™×"]})})]})},W)})}),l.size>0&&d.jsxs("div",{style:{marginTop:"2rem",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"12px",padding:"1rem"},children:[d.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"bold",color:"#0369a1",margin:"0 0 1rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Oa,{size:20}),"×¤×¨×™×˜×™× ×©××•×©×¨×• (",l.size,"/",s.length,")"]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Array.from(l).map(k=>{const W=s[k];return d.jsxs("div",{style:{background:"white",border:"1px solid #bae6fd",borderRadius:"8px",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#1f2937"},children:W.name}),d.jsxs("span",{style:{fontSize:"0.875rem",color:"#059669",fontWeight:"500"},children:["×›×ž×•×ª ×©×—×–×¨×”: ",W.quantityReturned]})]},k)})})]})]}),d.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"footer-mobile",children:[d.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"summary-text",children:E()?"×›×œ ×”×¤×¨×™×˜×™× ××•×©×¨×• - × ×™×ª×Ÿ ×œ×”×©×œ×™× ××ª ×”×‘×“×™×§×”":`×™×© ×œ××©×¨ ××ª ×›×œ ×”×¤×¨×™×˜×™× (${l.size}/${s.length})`}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"footer-mobile",children:[d.jsx("button",{onClick:t,disabled:p,style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:p?"not-allowed":"pointer",fontSize:"0.875rem",opacity:p?.6:1},children:"×‘×™×˜×•×œ"}),d.jsx("button",{onClick:D,disabled:p||!E(),style:{background:E()?"#f59e0b":"#9ca3af",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:p||!E()?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:p||!E()?.6:1,justifyContent:"center"},children:p?d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"×ž×¢×‘×“..."]}):d.jsxs(d.Fragment,{children:[d.jsx(gc,{size:16}),"×”×©×œ× ×‘×“×™×§×ª ×”×—×–×¨×”"]})})]})]})})]})})]})},qv=({allItems:r,itemsMap:e,events:t,setAllItems:n,setItemsMap:i,setEvents:a,fetchItemsAndOrders:s})=>{const[o,l]=oe.useState(new Date),[c,f]=oe.useState([]),[u,p]=oe.useState(!1),[h,m]=oe.useState(null),[v,b]=oe.useState(!1),[y,E]=oe.useState({open:!1,eventId:null,items:[]}),[D,C]=oe.useState({show:!1,order:null}),z=async j=>{try{const I=t.filter(P=>P.orderId===j);if(I.length>0){const P={id:j,clientName:I[0].clientName,phone:I[0].phone,items:I[0].items,pickupDate:I[0].pickupDate,returnDate:I[0].returnDate};C({show:!0,order:P}),p(!1)}}catch(I){console.error("Error initializing return inspection:",I),alert("×©×’×™××” ×‘×”×ª×—×œ×ª ×‘×“×™×§×ª ×”×—×–×¨×”. × ×¡×” ×©×•×‘.")}},k=async j=>{try{const I={status:"closed","returnInspection.inspectionStatus":"completed","returnInspection.inspectedBy":"×¡×’×™×¨×” ×™×“× ×™×ª","returnInspection.inspectionDate":tr(),"returnInspection.managerNotes":"×”×–×ž× ×” × ×¡×’×¨×” ×™×“× ×™×ª ×¢×œ ×™×“×™ ×”×ž× ×”×œ","returnInspection.totalItemsReturned":0,"returnInspection.totalDamages":0,"returnInspection.totalRepairCost":0,closedAt:tr(),manuallyClosedAt:tr()};await zr(zt(We,"orders",j),I),await s(),p(!1),alert("×”×”×–×ž× ×” × ×¡×’×¨×” ×™×“× ×™×ª ×•×”×•×¢×‘×¨×” ×œ×”×™×¡×˜×•×¨×™×”!")}catch(I){console.error("Error manually closing order:",I),alert("×©×’×™××” ×‘×¡×’×™×¨×ª ×”×”×–×ž× ×”. × ×¡×” ×©×•×‘.")}},W=async(j,I,P)=>{try{const N={status:"closed",returnInspection:{inspectionStatus:"completed",inspectedBy:"×ž× ×”×œ ×”×ž×¢×¨×›×ª",inspectionDate:tr(),itemInspections:I.map(S=>({itemId:S.itemId,name:S.name,quantityExpected:S.quantityExpected,quantityReturned:S.quantityReturned,condition:S.condition,damageDescription:S.damageDescription||"",repairCost:S.repairCost||0,notes:S.notes||"",inspectedAt:new Date().toISOString()})),totalItemsReturned:P.totalItemsReturned,totalItemsExpected:P.totalItemsExpected,totalDamages:P.totalDamages,totalRepairCost:P.totalRepairCost,managerNotes:P.managerNotes,customerNotified:P.customerNotified,customerAgreedToCharges:P.customerAgreedToCharges},closedAt:tr()};await zr(zt(We,"orders",j),N),await s(),C({show:!1,order:null}),alert("×‘×“×™×§×ª ×”×—×–×¨×” ×”×•×©×œ×ž×” ×‘×”×¦×œ×—×”! ×”×”×–×ž× ×” ×”×•×¢×‘×¨×” ×œ×”×™×¡×˜×•×¨×™×”.")}catch(N){console.error("Error completing return inspection:",N),alert("×©×’×™××” ×‘×”×©×œ×ž×ª ×‘×“×™×§×ª ×”×—×–×¨×”. × ×¡×” ×©×•×‘.")}};return d.jsxs("div",{className:"mt-6",children:[d.jsx(_v,{currentDate:o,events:t,setCurrentDate:l,setSelectedEvents:f,setSelectedDate:m,setShowReport:p,fetchItemsAndOrders:s}),d.jsx(Fv,{show:u,selectedDate:h,selectedEvents:c,allItems:r,setShowReport:p,setShowItemsModal:b,setEditItemModal:E,fetchItemsAndOrders:s,onStartReturnInspection:z,onCloseOrderManually:k}),d.jsx(zv,{show:!!v,setShow:()=>b(!1),selectedEvents:v,allItems:r}),d.jsx(Uv,{show:y.open,data:y,setData:E,allItems:r,setShowReport:p,fetchItemsAndOrders:s,allEvents:t}),d.jsx(Hv,{show:D.show,order:D.order,onClose:()=>C({show:!1,order:null}),onCompleteInspection:W,allItems:r,updateItemQuantities:s})]})},ed=r=>{const e=new Date(r);return e.setHours(0,0,0,0),e},Vv=async(r,e)=>{const t=ed(new Date);for(const n of r.docs){const i=n.data();!i.pickupDate||i.stockUpdated||ed(new Date(i.pickupDate))>t||await zr(zt(e,"orders",n.id),{stockUpdated:!0})}},Gv=(r,e)=>{const t=ed(new Date);return r.docs.flatMap(n=>{const i=n.data();if(i.status==="closed")return[];const a=(o=[])=>o.map(l=>{const c=e.find(f=>f.id===l.id);return{...l,imageUrl:(c==null?void 0:c.imageUrl)||null,itemId:(c==null?void 0:c.itemId)||"×œ× × ×ž×¦×"}}),s=[];if(i.pickupDate&&i.returnDate){const o=new Date(i.pickupDate),l=new Date(i.returnDate);o.setHours(0,0,0,0),l.setHours(0,0,0,0);const c=t>l,f=c?Math.ceil((t-l)/(1e3*60*60*24)):0,u=Math.ceil((l-o)/(1e3*60*60*24));for(let p=0;p<=u;p++){if(p!==0&&p!==u)continue;const h=new Date(o);h.setDate(o.getDate()+p);let m,v,b;p===0?(m="×”×©××œ×”",v="ðŸ“¦",b="××™×¡×•×£ ×ž×•×¦×¨×™×"):p===u&&(m="×”×—×–×¨×”",v="ðŸ”„",b="×”×—×–×¨×ª ×ž×•×¦×¨×™×"),s.push({id:`${n.id}-${h.toISOString().slice(0,10)}`,orderId:n.id,date:new Date(h),clientName:i.clientName,phone:i.phone,email:i.email,manualEmailSent:i.manualEmailSent||!1,manualEmailSentAt:i.manualEmailSentAt||null,type:m,icon:v,description:b,items:a(i.items),pickupDate:i.pickupDate,returnDate:i.returnDate,dayNumber:p+1,totalDays:u+1,isMultiDay:u>0,isOverdue:c,overdueDays:f,availabilityStatus:i.availabilityStatus||"OK",availabilityConflicts:i.availabilityConflicts||[],needsAttention:i.needsAttention||!1,eventType:i.eventType||"×›×œ×œ×™",pickupLocation:i.pickupLocation||"×ž×™×§×•× ×œ×¤×™ ×ª×™××•×",specialInstructions:i.specialInstructions||"××™×Ÿ ×”×•×¨××•×ª ×ž×™×•×—×“×•×ª"})}}return s})},$v=async(r,e,t,n)=>{try{console.log("ðŸ”„ Fetching items and orders...");const a=(await Mt(vt(r,"items"))).docs.map(c=>{const f=c.data();return{id:c.id,itemId:f.ItemId,name:f.name,imageUrl:f.imageUrl,quantity:f.quantity||0,isDeleted:f.isDeleted||!1}}).filter(c=>!c.isDeleted);console.log("ðŸ“Š Items loaded with quantities:",a.map(c=>({name:c.name,quantity:c.quantity}))),e(a);const s={};a.forEach(c=>{s[c.name]=c.imageUrl||null}),t(s);const o=await Mt(vt(r,"orders"));console.log("ðŸ“‹ Orders loaded:",o.docs.length),await Vv(o,r);const l=Gv(o,a);console.log("ðŸ“… Events built:",l.length),n(l),console.log("âœ… Data refresh completed")}catch(i){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×–×ž× ×•×ª ×•×”×¤×¨×™×˜×™×:",i)}},Xv=()=>{const[r,e]=oe.useState([]),[t,n]=oe.useState({}),[i,a]=oe.useState([]),[s,o]=oe.useState(!0),[l,c]=oe.useState(null),[f,u]=oe.useState(new Date),p=async()=>{try{o(!0),c(null),await $v(We,e,n,a)}catch(h){console.error("Error fetching calendar data:",h),c("×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™ ×”×™×•×ž×Ÿ. ×× × × ×¡×” ×©×•×‘.")}finally{o(!1)}};return oe.useEffect(()=>{p()},[]),s?d.jsxs(d.Fragment,{children:[d.jsx("style",{jsx:!0,children:`
          @keyframes highlightFlash {
            0%, 100% { 
              transform: scale(1);
              box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.8);
            }
            25% { 
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.4);
            }
            50% { 
              transform: scale(1.08);
              box-shadow: 0 0 0 20px rgba(147, 51, 234, 0.2);
            }
            75% { 
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.4);
            }
          }
        `}),d.jsx("div",{className:"flex justify-center items-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full border-blue-600 border-t-transparent"}),d.jsx("p",{className:"mt-4 text-gray-600",children:"×˜×•×¢×Ÿ × ×ª×•× ×™ ×™×•×ž×Ÿ..."})]})})]}):l?d.jsx("div",{className:"flex justify-center items-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-red-600 mb-4",children:l}),d.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"× ×¡×” ×©×•×‘"})]})}):d.jsxs(d.Fragment,{children:[d.jsx("style",{jsx:!0,global:!0,children:`
        @keyframes highlightFlash {
          0% { 
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(147, 51, 234, 1);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          }
          15% { 
            transform: scale(1.1);
            box-shadow: 0 0 0 15px rgba(147, 51, 234, 0.6);
            border-color: #7c3aed !important;
            background: linear-gradient(135deg, #e9d5ff 0%, #c4b5fd 100%) !important;
          }
          30% { 
            transform: scale(1.15);
            box-shadow: 0 0 0 25px rgba(147, 51, 234, 0.4);
            border-color: #6d28d9 !important;
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%) !important;
          }
          50% { 
            transform: scale(1.12);
            box-shadow: 0 0 0 30px rgba(147, 51, 234, 0.2);
            border-color: #5b21b6 !important;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%) !important;
          }
          70% { 
            transform: scale(1.08);
            box-shadow: 0 0 0 20px rgba(147, 51, 234, 0.3);
            border-color: #7c3aed !important;
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%) !important;
          }
          85% { 
            transform: scale(1.05);
            box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.5);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #e9d5ff 0%, #c4b5fd 100%) !important;
          }
          100% { 
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.8);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          }
        }
        
        /* ×¡×˜×™×™×œ×™× ×’ × ×•×¡×£ ×œ×ž×—×•×•×Ÿ ×™×•× ×ž×•×“×’×© */
        .day-cell[style*="highlightFlash"] {
          position: relative !important;
          z-index: 1000 !important;
        }
        
        .day-cell[style*="highlightFlash"] .day-number {
          color: #581c87 !important;
          font-weight: bold !important;
          font-size: 1.2rem !important;
        }
      `}),d.jsx("div",{className:"container mx-auto px-4",children:d.jsx(qv,{allItems:r,itemsMap:t,events:i,setAllItems:e,setItemsMap:n,setEvents:a,fetchItemsAndOrders:p,currentDate:f,setCurrentDate:u})})]})};function Yv(r,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in r)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(r)}function fh(r,e){return new Promise(function(t,n){let i;return Kv(r).then(function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return n(s)}},n)})}const Kv=r=>new Promise((e,t)=>{const n=new FileReader;n.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let s=0;if(a.getUint16(s)!==65496)return t("not a valid JPEG");for(s+=2;;){const o=a.getUint16(s);if(o===65498)break;const l=a.getUint16(s+2);if(o===65505&&a.getUint32(s+4)===1165519206){const c=s+10;let f;switch(a.getUint16(c)){case 18761:f=!0;break;case 19789:f=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(c+2,f)!==42)return t("TIFF header contains invalid version");const u=a.getUint32(c+4,f),p=c+u+2+12*a.getUint16(c+u,f);for(let h=c+u+2;h<p;h+=12)if(a.getUint16(h,f)==274){if(a.getUint16(h+2,f)!==3)return t("Orientation data type is invalid");if(a.getUint32(h+4,f)!==1)return t("Orientation data count is invalid");a.setUint16(h+8,1,f);break}return e(i.slice(s,s+2+l))}s+=2+l}return e(new Blob)}),n.readAsArrayBuffer(r)});var ic={},Zv={get exports(){return ic},set exports(r){ic=r}};(function(r){var e,t,n={};Zv.exports=n,n.parse=function(i,a){for(var s=n.bin.readUshort,o=n.bin.readUint,l=0,c={},f=new Uint8Array(i),u=f.length-4;o(f,u)!=101010256;)u--;l=u,l+=4;var p=s(f,l+=4);s(f,l+=2);var h=o(f,l+=2),m=o(f,l+=4);l+=4,l=m;for(var v=0;v<p;v++){o(f,l),l+=4,l+=4,l+=4,o(f,l+=4),h=o(f,l+=4);var b=o(f,l+=4),y=s(f,l+=4),E=s(f,l+2),D=s(f,l+4);l+=6;var C=o(f,l+=8);l+=4,l+=y+E+D,n._readLocal(f,C,c,h,b,a)}return c},n._readLocal=function(i,a,s,o,l,c){var f=n.bin.readUshort,u=n.bin.readUint;u(i,a),f(i,a+=4),f(i,a+=2);var p=f(i,a+=2);u(i,a+=2),u(i,a+=4),a+=4;var h=f(i,a+=8),m=f(i,a+=2);a+=2;var v=n.bin.readUTF8(i,a,h);if(a+=h,a+=m,c)s[v]={size:l,csize:o};else{var b=new Uint8Array(i.buffer,a);if(p==0)s[v]=new Uint8Array(b.buffer.slice(a,a+o));else{if(p!=8)throw"unknown compression method: "+p;var y=new Uint8Array(l);n.inflateRaw(b,y),s[v]=y}}},n.inflateRaw=function(i,a){return n.F.inflate(i,a)},n.inflate=function(i,a){return i[0],i[1],n.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},n.deflate=function(i,a){a==null&&(a={level:6});var s=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[s]=120,o[s+1]=156,s+=2,s=n.F.deflateRaw(i,o,s,a.level);var l=n.adler(i,0,i.length);return o[s+0]=l>>>24&255,o[s+1]=l>>>16&255,o[s+2]=l>>>8&255,o[s+3]=l>>>0&255,new Uint8Array(o.buffer,0,s+4)},n.deflateRaw=function(i,a){a==null&&(a={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),o=n.F.deflateRaw(i,s,o,a.level);return new Uint8Array(s.buffer,0,o)},n.encode=function(i,a){a==null&&(a=!1);var s=0,o=n.bin.writeUint,l=n.bin.writeUshort,c={};for(var f in i){var u=!n._noNeed(f)&&!a,p=i[f],h=n.crc.crc(p,0,p.length);c[f]={cpr:u,usize:p.length,crc:h,file:u?n.deflateRaw(p):p}}for(var f in c)s+=c[f].file.length+30+46+2*n.bin.sizeUTF8(f);s+=22;var m=new Uint8Array(s),v=0,b=[];for(var f in c){var y=c[f];b.push(v),v=n._writeHeader(m,v,f,y,0)}var E=0,D=v;for(var f in c)y=c[f],b.push(v),v=n._writeHeader(m,v,f,y,1,b[E++]);var C=v-D;return o(m,v,101010256),v+=4,l(m,v+=4,E),l(m,v+=2,E),o(m,v+=2,C),o(m,v+=4,D),v+=4,v+=2,m.buffer},n._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},n._writeHeader=function(i,a,s,o,l,c){var f=n.bin.writeUint,u=n.bin.writeUshort,p=o.file;return f(i,a,l==0?67324752:33639248),a+=4,l==1&&(a+=2),u(i,a,20),u(i,a+=2,0),u(i,a+=2,o.cpr?8:0),f(i,a+=2,0),f(i,a+=4,o.crc),f(i,a+=4,p.length),f(i,a+=4,o.usize),u(i,a+=4,n.bin.sizeUTF8(s)),u(i,a+=2,0),a+=2,l==1&&(a+=2,a+=2,f(i,a+=6,c),a+=4),a+=n.bin.writeUTF8(i,a,s),l==0&&(i.set(p,a),a+=p.length),a},n.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var s=a,o=0;o<8;o++)1&s?s=3988292384^s>>>1:s>>>=1;i[a]=s}return i}(),update:function(i,a,s,o){for(var l=0;l<o;l++)i=n.crc.table[255&(i^a[s+l])]^i>>>8;return i},crc:function(i,a,s){return 4294967295^n.crc.update(4294967295,i,a,s)}},n.adler=function(i,a,s){for(var o=1,l=0,c=a,f=a+s;c<f;){for(var u=Math.min(c+5552,f);c<u;)l+=o+=i[c++];o%=65521,l%=65521}return l<<16|o},n.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255,i[a+2]=s>>16&255,i[a+3]=s>>24&255},readASCII:function(i,a,s){for(var o="",l=0;l<s;l++)o+=String.fromCharCode(i[a+l]);return o},writeASCII:function(i,a,s){for(var o=0;o<s.length;o++)i[a+o]=s.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,s){for(var o,l="",c=0;c<s;c++)l+="%"+n.bin.pad(i[a+c].toString(16));try{o=decodeURIComponent(l)}catch{return n.bin.readASCII(i,a,s)}return o},writeUTF8:function(i,a,s){for(var o=s.length,l=0,c=0;c<o;c++){var f=s.charCodeAt(c);if((4294967168&f)==0)i[a+l]=f,l++;else if((4294965248&f)==0)i[a+l]=192|f>>6,i[a+l+1]=128|f>>0&63,l+=2;else if((4294901760&f)==0)i[a+l]=224|f>>12,i[a+l+1]=128|f>>6&63,i[a+l+2]=128|f>>0&63,l+=3;else{if((4292870144&f)!=0)throw"e";i[a+l]=240|f>>18,i[a+l+1]=128|f>>12&63,i[a+l+2]=128|f>>6&63,i[a+l+3]=128|f>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var a=i.length,s=0,o=0;o<a;o++){var l=i.charCodeAt(o);if((4294967168&l)==0)s++;else if((4294965248&l)==0)s+=2;else if((4294901760&l)==0)s+=3;else{if((4292870144&l)!=0)throw"e";s+=4}}return s}},n.F={},n.F.deflateRaw=function(i,a,s,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],c=n.F.U,f=n.F._goodIndex;n.F._hash;var u=n.F._putsE,p=0,h=s<<3,m=0,v=i.length;if(o==0){for(;p<v;)u(a,h,p+(N=Math.min(65535,v-p))==v?1:0),h=n.F._copyExact(i,p,N,a,h+8),p+=N;return h>>>3}var b=c.lits,y=c.strt,E=c.prev,D=0,C=0,z=0,k=0,W=0,j=0;for(v>2&&(y[j=n.F._hash(i,0)]=0),p=0;p<v;p++){if(W=j,p+1<v-2){j=n.F._hash(i,p+1);var I=p+1&32767;E[I]=y[j],y[j]=I}if(m<=p){(D>14e3||C>26697)&&v-p>100&&(m<p&&(b[D]=p-m,D+=2,m=p),h=n.F._writeBlock(p==v-1||m==v?1:0,b,D,k,i,z,p-z,a,h),D=C=k=0,z=p);var P=0;p<v-2&&(P=n.F._bestMatch(i,p,E,W,Math.min(l[2],v-p),l[3]));var N=P>>>16,S=65535&P;if(P!=0){S=65535&P;var O=f(N=P>>>16,c.of0);c.lhst[257+O]++;var A=f(S,c.df0);c.dhst[A]++,k+=c.exb[O]+c.dxb[A],b[D]=N<<23|p-m,b[D+1]=S<<16|O<<8|A,D+=2,m=p+N}else c.lhst[i[p]]++;C++}}for(z==p&&i.length!=0||(m<p&&(b[D]=p-m,D+=2,m=p),h=n.F._writeBlock(1,b,D,k,i,z,p-z,a,h),D=0,C=0,D=C=k=0,z=p);(7&h)!=0;)h++;return h>>>3},n.F._bestMatch=function(i,a,s,o,l,c){var f=32767&a,u=s[f],p=f-u+32768&32767;if(u==f||o!=n.F._hash(i,a-p))return 0;for(var h=0,m=0,v=Math.min(32767,a);p<=v&&--c!=0&&u!=f;){if(h==0||i[a+h]==i[a+h-p]){var b=n.F._howLong(i,a,p);if(b>h){if(m=p,(h=b)>=l)break;p+2<b&&(b=p+2);for(var y=0,E=0;E<b-2;E++){var D=a-p+E+32768&32767,C=D-s[D]+32768&32767;C>y&&(y=C,u=D)}}}p+=(f=u)-(u=s[f])+32768&32767}return h<<16|m},n.F._howLong=function(i,a,s){if(i[a]!=i[a-s]||i[a+1]!=i[a+1-s]||i[a+2]!=i[a+2-s])return 0;var o=a,l=Math.min(i.length,a+258);for(a+=3;a<l&&i[a]==i[a-s];)a++;return a-o},n.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(i,a,s,o,l,c,f,u,p){var h,m,v,b,y,E,D,C,z,k=n.F.U,W=n.F._putsF,j=n.F._putsE;k.lhst[256]++,m=(h=n.F.getTrees())[0],v=h[1],b=h[2],y=h[3],E=h[4],D=h[5],C=h[6],z=h[7];var I=32+((p+3&7)==0?0:8-(p+3&7))+(f<<3),P=o+n.F.contSize(k.fltree,k.lhst)+n.F.contSize(k.fdtree,k.dhst),N=o+n.F.contSize(k.ltree,k.lhst)+n.F.contSize(k.dtree,k.dhst);N+=14+3*D+n.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var S=0;S<286;S++)k.lhst[S]=0;for(S=0;S<30;S++)k.dhst[S]=0;for(S=0;S<19;S++)k.ihst[S]=0;var O=I<P&&I<N?0:P<N?1:2;if(W(u,p,i),W(u,p+1,O),p+=3,O==0){for(;(7&p)!=0;)p++;p=n.F._copyExact(l,c,f,u,p)}else{var A,B;if(O==1&&(A=k.fltree,B=k.fdtree),O==2){n.F.makeCodes(k.ltree,m),n.F.revCodes(k.ltree,m),n.F.makeCodes(k.dtree,v),n.F.revCodes(k.dtree,v),n.F.makeCodes(k.itree,b),n.F.revCodes(k.itree,b),A=k.ltree,B=k.dtree,j(u,p,y-257),j(u,p+=5,E-1),j(u,p+=5,D-4),p+=4;for(var T=0;T<D;T++)j(u,p+3*T,k.itree[1+(k.ordr[T]<<1)]);p+=3*D,p=n.F._codeTiny(C,k.itree,u,p),p=n.F._codeTiny(z,k.itree,u,p)}for(var L=c,Y=0;Y<s;Y+=2){for(var X=a[Y],ae=X>>>23,Q=L+(8388607&X);L<Q;)p=n.F._writeLit(l[L++],A,u,p);if(ae!=0){var M=a[Y+1],F=M>>16,U=M>>8&255,V=255&M;j(u,p=n.F._writeLit(257+U,A,u,p),ae-k.of0[U]),p+=k.exb[U],W(u,p=n.F._writeLit(V,B,u,p),F-k.df0[V]),p+=k.dxb[V],L+=ae}}p=n.F._writeLit(256,A,u,p)}return p},n.F._copyExact=function(i,a,s,o,l){var c=l>>>3;return o[c]=s,o[c+1]=s>>>8,o[c+2]=255-o[c],o[c+3]=255-o[c+1],c+=4,o.set(new Uint8Array(i.buffer,a,s),c),l+(s+4<<3)},n.F.getTrees=function(){for(var i=n.F.U,a=n.F._hufTree(i.lhst,i.ltree,15),s=n.F._hufTree(i.dhst,i.dtree,15),o=[],l=n.F._lenCodes(i.ltree,o),c=[],f=n.F._lenCodes(i.dtree,c),u=0;u<o.length;u+=2)i.ihst[o[u]]++;for(u=0;u<c.length;u+=2)i.ihst[c[u]]++;for(var p=n.F._hufTree(i.ihst,i.itree,7),h=19;h>4&&i.itree[1+(i.ordr[h-1]<<1)]==0;)h--;return[a,s,p,l,f,h,o,c]},n.F.getSecond=function(i){for(var a=[],s=0;s<i.length;s+=2)a.push(i[s+1]);return a},n.F.nonZero=function(i){for(var a="",s=0;s<i.length;s+=2)i[s+1]!=0&&(a+=(s>>1)+",");return a},n.F.contSize=function(i,a){for(var s=0,o=0;o<a.length;o++)s+=a[o]*i[1+(o<<1)];return s},n.F._codeTiny=function(i,a,s,o){for(var l=0;l<i.length;l+=2){var c=i[l],f=i[l+1];o=n.F._writeLit(c,a,s,o);var u=c==16?2:c==17?3:7;c>15&&(n.F._putsE(s,o,f,u),o+=u)}return o},n.F._lenCodes=function(i,a){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var o=0;o<s;o+=2){var l=i[o+1],c=o+3<s?i[o+3]:-1,f=o+5<s?i[o+5]:-1,u=o==0?-1:i[o-1];if(l==0&&c==l&&f==l){for(var p=o+5;p+2<s&&i[p+2]==l;)p+=2;(h=Math.min(p+1-o>>>1,138))<11?a.push(17,h-3):a.push(18,h-11),o+=2*h-2}else if(l==u&&c==l&&f==l){for(p=o+5;p+2<s&&i[p+2]==l;)p+=2;var h=Math.min(p+1-o>>>1,6);a.push(16,h-3),o+=2*h-2}else a.push(l,0)}return s>>>1},n.F._hufTree=function(i,a,s){var o=[],l=i.length,c=a.length,f=0;for(f=0;f<c;f+=2)a[f]=0,a[f+1]=0;for(f=0;f<l;f++)i[f]!=0&&o.push({lit:f,f:i[f]});var u=o.length,p=o.slice(0);if(u==0)return 0;if(u==1){var h=o[0].lit;return p=h==0?1:0,a[1+(h<<1)]=1,a[1+(p<<1)]=1,1}o.sort(function(C,z){return C.f-z.f});var m=o[0],v=o[1],b=0,y=1,E=2;for(o[0]={lit:-1,f:m.f+v.f,l:m,r:v,d:0};y!=u-1;)m=b!=y&&(E==u||o[b].f<o[E].f)?o[b++]:o[E++],v=b!=y&&(E==u||o[b].f<o[E].f)?o[b++]:o[E++],o[y++]={lit:-1,f:m.f+v.f,l:m,r:v};var D=n.F.setDepth(o[y-1],0);for(D>s&&(n.F.restrictDepth(p,s,D),D=s),f=0;f<u;f++)a[1+(p[f].lit<<1)]=p[f].d;return D},n.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(n.F.setDepth(i.l,a+1),n.F.setDepth(i.r,a+1))},n.F.restrictDepth=function(i,a,s){var o=0,l=1<<s-a,c=0;for(i.sort(function(u,p){return p.d==u.d?u.f-p.f:p.d-u.d}),o=0;o<i.length&&i[o].d>a;o++){var f=i[o].d;i[o].d=a,c+=l-(1<<s-f)}for(c>>>=s-a;c>0;)(f=i[o].d)<a?(i[o].d++,c-=1<<a-f-1):o++;for(;o>=0;o--)i[o].d==a&&c<0&&(i[o].d--,c++);c!=0&&console.log("debt left")},n.F._goodIndex=function(i,a){var s=0;return a[16|s]<=i&&(s|=16),a[8|s]<=i&&(s|=8),a[4|s]<=i&&(s|=4),a[2|s]<=i&&(s|=2),a[1|s]<=i&&(s|=1),s},n.F._writeLit=function(i,a,s,o){return n.F._putsF(s,o,a[i<<1]),o+a[1+(i<<1)]},n.F.inflate=function(i,a){var s=Uint8Array;if(i[0]==3&&i[1]==0)return a||new s(0);var o=n.F,l=o._bitsF,c=o._bitsE,f=o._decodeTiny,u=o.makeCodes,p=o.codes2map,h=o._get17,m=o.U,v=a==null;v&&(a=new s(i.length>>>2<<3));for(var b,y,E=0,D=0,C=0,z=0,k=0,W=0,j=0,I=0,P=0;E==0;)if(E=l(i,P,1),D=l(i,P+1,2),P+=3,D!=0){if(v&&(a=n.F._check(a,I+(1<<17))),D==1&&(b=m.flmap,y=m.fdmap,W=511,j=31),D==2){C=c(i,P,5)+257,z=c(i,P+5,5)+1,k=c(i,P+10,4)+4,P+=14;for(var N=0;N<38;N+=2)m.itree[N]=0,m.itree[N+1]=0;var S=1;for(N=0;N<k;N++){var O=c(i,P+3*N,3);m.itree[1+(m.ordr[N]<<1)]=O,O>S&&(S=O)}P+=3*k,u(m.itree,S),p(m.itree,S,m.imap),b=m.lmap,y=m.dmap,P=f(m.imap,(1<<S)-1,C+z,i,P,m.ttree);var A=o._copyOut(m.ttree,0,C,m.ltree);W=(1<<A)-1;var B=o._copyOut(m.ttree,C,z,m.dtree);j=(1<<B)-1,u(m.ltree,A),p(m.ltree,A,b),u(m.dtree,B),p(m.dtree,B,y)}for(;;){var T=b[h(i,P)&W];P+=15&T;var L=T>>>4;if(!(L>>>8))a[I++]=L;else{if(L==256)break;var Y=I+L-254;if(L>264){var X=m.ldef[L-257];Y=I+(X>>>3)+c(i,P,7&X),P+=7&X}var ae=y[h(i,P)&j];P+=15&ae;var Q=ae>>>4,M=m.ddef[Q],F=(M>>>4)+l(i,P,15&M);for(P+=15&M,v&&(a=n.F._check(a,I+(1<<17)));I<Y;)a[I]=a[I++-F],a[I]=a[I++-F],a[I]=a[I++-F],a[I]=a[I++-F];I=Y}}}else{(7&P)!=0&&(P+=8-(7&P));var U=4+(P>>>3),V=i[U-4]|i[U-3]<<8;v&&(a=n.F._check(a,I+V)),a.set(new s(i.buffer,i.byteOffset+U,V),I),P=U+V<<3,I+=V}return a.length==I?a:a.slice(0,I)},n.F._check=function(i,a){var s=i.length;if(a<=s)return i;var o=new Uint8Array(Math.max(s<<1,a));return o.set(i,0),o},n.F._decodeTiny=function(i,a,s,o,l,c){for(var f=n.F._bitsE,u=n.F._get17,p=0;p<s;){var h=i[u(o,l)&a];l+=15&h;var m=h>>>4;if(m<=15)c[p]=m,p++;else{var v=0,b=0;m==16?(b=3+f(o,l,2),l+=2,v=c[p-1]):m==17?(b=3+f(o,l,3),l+=3):m==18&&(b=11+f(o,l,7),l+=7);for(var y=p+b;p<y;)c[p]=v,p++}}return l},n.F._copyOut=function(i,a,s,o){for(var l=0,c=0,f=o.length>>>1;c<s;){var u=i[c+a];o[c<<1]=0,o[1+(c<<1)]=u,u>l&&(l=u),c++}for(;c<f;)o[c<<1]=0,o[1+(c<<1)]=0,c++;return l},n.F.makeCodes=function(i,a){for(var s,o,l,c,f=n.F.U,u=i.length,p=f.bl_count,h=0;h<=a;h++)p[h]=0;for(h=1;h<u;h+=2)p[i[h]]++;var m=f.next_code;for(s=0,p[0]=0,o=1;o<=a;o++)s=s+p[o-1]<<1,m[o]=s;for(l=0;l<u;l+=2)(c=i[l+1])!=0&&(i[l]=m[c],m[c]++)},n.F.codes2map=function(i,a,s){for(var o=i.length,l=n.F.U.rev15,c=0;c<o;c+=2)if(i[c+1]!=0)for(var f=c>>1,u=i[c+1],p=f<<4|u,h=a-u,m=i[c]<<h,v=m+(1<<h);m!=v;)s[l[m]>>>15-a]=p,m++},n.F.revCodes=function(i,a){for(var s=n.F.U.rev15,o=15-a,l=0;l<i.length;l+=2){var c=i[l]<<a-i[l+1];i[l]=s[c]>>>o}},n.F._putsE=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8},n.F._putsF=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8,i[o+2]|=s>>>16},n.F._bitsE=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<s)-1},n.F._bitsF=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<s)-1},n.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},n.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=n.F.U,a=0;a<32768;a++){var s=a;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[a]=(s>>>16|s<<16)>>>17}function o(l,c,f){for(;c--!=0;)l.push(0,f)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),n.F.makeCodes(i.fltree,9),n.F.codes2map(i.fltree,9,i.flmap),n.F.revCodes(i.fltree,9),o(i.fdtree,32,5),n.F.makeCodes(i.fdtree,5),n.F.codes2map(i.fdtree,5,i.fdmap),n.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var Qv=Yv({__proto__:null,default:ic},[ic]);const ui=function(){var r={nextZero(f,u){for(;f[u]!=0;)u++;return u},readUshort:(f,u)=>f[u]<<8|f[u+1],writeUshort(f,u,p){f[u]=p>>8&255,f[u+1]=255&p},readUint:(f,u)=>16777216*f[u]+(f[u+1]<<16|f[u+2]<<8|f[u+3]),writeUint(f,u,p){f[u]=p>>24&255,f[u+1]=p>>16&255,f[u+2]=p>>8&255,f[u+3]=255&p},readASCII(f,u,p){let h="";for(let m=0;m<p;m++)h+=String.fromCharCode(f[u+m]);return h},writeASCII(f,u,p){for(let h=0;h<p.length;h++)f[u+h]=p.charCodeAt(h)},readBytes(f,u,p){const h=[];for(let m=0;m<p;m++)h.push(f[u+m]);return h},pad:f=>f.length<2?`0${f}`:f,readUTF8(f,u,p){let h,m="";for(let v=0;v<p;v++)m+=`%${r.pad(f[u+v].toString(16))}`;try{h=decodeURIComponent(m)}catch{return r.readASCII(f,u,p)}return h}};function e(f,u,p,h){const m=u*p,v=a(h),b=Math.ceil(u*v/8),y=new Uint8Array(4*m),E=new Uint32Array(y.buffer),{ctype:D}=h,{depth:C}=h,z=r.readUshort;if(D==6){const X=m<<2;if(C==8)for(var k=0;k<X;k+=4)y[k]=f[k],y[k+1]=f[k+1],y[k+2]=f[k+2],y[k+3]=f[k+3];if(C==16)for(k=0;k<X;k++)y[k]=f[k<<1]}else if(D==2){const X=h.tabs.tRNS;if(X==null){if(C==8)for(k=0;k<m;k++){var W=3*k;E[k]=255<<24|f[W+2]<<16|f[W+1]<<8|f[W]}if(C==16)for(k=0;k<m;k++)W=6*k,E[k]=255<<24|f[W+4]<<16|f[W+2]<<8|f[W]}else{var j=X[0];const ae=X[1],Q=X[2];if(C==8)for(k=0;k<m;k++){var I=k<<2;W=3*k,E[k]=255<<24|f[W+2]<<16|f[W+1]<<8|f[W],f[W]==j&&f[W+1]==ae&&f[W+2]==Q&&(y[I+3]=0)}if(C==16)for(k=0;k<m;k++)I=k<<2,W=6*k,E[k]=255<<24|f[W+4]<<16|f[W+2]<<8|f[W],z(f,W)==j&&z(f,W+2)==ae&&z(f,W+4)==Q&&(y[I+3]=0)}}else if(D==3){const X=h.tabs.PLTE,ae=h.tabs.tRNS,Q=ae?ae.length:0;if(C==1)for(var P=0;P<p;P++){var N=P*b,S=P*u;for(k=0;k<u;k++){I=S+k<<2;var O=3*(A=f[N+(k>>3)]>>7-((7&k)<<0)&1);y[I]=X[O],y[I+1]=X[O+1],y[I+2]=X[O+2],y[I+3]=A<Q?ae[A]:255}}if(C==2)for(P=0;P<p;P++)for(N=P*b,S=P*u,k=0;k<u;k++)I=S+k<<2,O=3*(A=f[N+(k>>2)]>>6-((3&k)<<1)&3),y[I]=X[O],y[I+1]=X[O+1],y[I+2]=X[O+2],y[I+3]=A<Q?ae[A]:255;if(C==4)for(P=0;P<p;P++)for(N=P*b,S=P*u,k=0;k<u;k++)I=S+k<<2,O=3*(A=f[N+(k>>1)]>>4-((1&k)<<2)&15),y[I]=X[O],y[I+1]=X[O+1],y[I+2]=X[O+2],y[I+3]=A<Q?ae[A]:255;if(C==8)for(k=0;k<m;k++){var A;I=k<<2,O=3*(A=f[k]),y[I]=X[O],y[I+1]=X[O+1],y[I+2]=X[O+2],y[I+3]=A<Q?ae[A]:255}}else if(D==4){if(C==8)for(k=0;k<m;k++){I=k<<2;var B=f[T=k<<1];y[I]=B,y[I+1]=B,y[I+2]=B,y[I+3]=f[T+1]}if(C==16)for(k=0;k<m;k++){var T;I=k<<2,B=f[T=k<<2],y[I]=B,y[I+1]=B,y[I+2]=B,y[I+3]=f[T+2]}}else if(D==0)for(j=h.tabs.tRNS?h.tabs.tRNS:-1,P=0;P<p;P++){const X=P*b,ae=P*u;if(C==1)for(var L=0;L<u;L++){var Y=(B=255*(f[X+(L>>>3)]>>>7-(7&L)&1))==255*j?0:255;E[ae+L]=Y<<24|B<<16|B<<8|B}else if(C==2)for(L=0;L<u;L++)Y=(B=85*(f[X+(L>>>2)]>>>6-((3&L)<<1)&3))==85*j?0:255,E[ae+L]=Y<<24|B<<16|B<<8|B;else if(C==4)for(L=0;L<u;L++)Y=(B=17*(f[X+(L>>>1)]>>>4-((1&L)<<2)&15))==17*j?0:255,E[ae+L]=Y<<24|B<<16|B<<8|B;else if(C==8)for(L=0;L<u;L++)Y=(B=f[X+L])==j?0:255,E[ae+L]=Y<<24|B<<16|B<<8|B;else if(C==16)for(L=0;L<u;L++)B=f[X+(L<<1)],Y=z(f,X+(L<<1))==j?0:255,E[ae+L]=Y<<24|B<<16|B<<8|B}return y}function t(f,u,p,h){const m=a(f),v=Math.ceil(p*m/8),b=new Uint8Array((v+1+f.interlace)*h);return u=f.tabs.CgBI?i(u,b):n(u,b),f.interlace==0?u=s(u,f,0,p,h):f.interlace==1&&(u=function(E,D){const C=D.width,z=D.height,k=a(D),W=k>>3,j=Math.ceil(C*k/8),I=new Uint8Array(z*j);let P=0;const N=[0,0,4,0,2,0,1],S=[0,4,0,2,0,1,0],O=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const L=O[B],Y=A[B];let X=0,ae=0,Q=N[B];for(;Q<z;)Q+=L,ae++;let M=S[B];for(;M<C;)M+=Y,X++;const F=Math.ceil(X*k/8);s(E,D,P,X,ae);let U=0,V=N[B];for(;V<z;){let te=S[B],le=P+U*F<<3;for(;te<C;){var T;if(k==1&&(T=(T=E[le>>3])>>7-(7&le)&1,I[V*j+(te>>3)]|=T<<7-((7&te)<<0)),k==2&&(T=(T=E[le>>3])>>6-(7&le)&3,I[V*j+(te>>2)]|=T<<6-((3&te)<<1)),k==4&&(T=(T=E[le>>3])>>4-(7&le)&15,I[V*j+(te>>1)]|=T<<4-((1&te)<<2)),k>=8){const he=V*j+te*W;for(let pe=0;pe<W;pe++)I[he+pe]=E[(le>>3)+pe]}le+=k,te+=Y}U++,V+=L}X*ae!=0&&(P+=ae*(1+F)),B+=1}return I}(u,f)),u}function n(f,u){return i(new Uint8Array(f.buffer,2,f.length-6),u)}var i=function(){const f={H:{}};return f.H.N=function(u,p){const h=Uint8Array;let m,v,b=0,y=0,E=0,D=0,C=0,z=0,k=0,W=0,j=0;if(u[0]==3&&u[1]==0)return p||new h(0);const I=f.H,P=I.b,N=I.e,S=I.R,O=I.n,A=I.A,B=I.Z,T=I.m,L=p==null;for(L&&(p=new h(u.length>>>2<<5));b==0;)if(b=P(u,j,1),y=P(u,j+1,2),j+=3,y!=0){if(L&&(p=f.H.W(p,W+(1<<17))),y==1&&(m=T.J,v=T.h,z=511,k=31),y==2){E=N(u,j,5)+257,D=N(u,j+5,5)+1,C=N(u,j+10,4)+4,j+=14;let X=1;for(var Y=0;Y<38;Y+=2)T.Q[Y]=0,T.Q[Y+1]=0;for(Y=0;Y<C;Y++){const M=N(u,j+3*Y,3);T.Q[1+(T.X[Y]<<1)]=M,M>X&&(X=M)}j+=3*C,O(T.Q,X),A(T.Q,X,T.u),m=T.w,v=T.d,j=S(T.u,(1<<X)-1,E+D,u,j,T.v);const ae=I.V(T.v,0,E,T.C);z=(1<<ae)-1;const Q=I.V(T.v,E,D,T.D);k=(1<<Q)-1,O(T.C,ae),A(T.C,ae,m),O(T.D,Q),A(T.D,Q,v)}for(;;){const X=m[B(u,j)&z];j+=15&X;const ae=X>>>4;if(!(ae>>>8))p[W++]=ae;else{if(ae==256)break;{let Q=W+ae-254;if(ae>264){const te=T.q[ae-257];Q=W+(te>>>3)+N(u,j,7&te),j+=7&te}const M=v[B(u,j)&k];j+=15&M;const F=M>>>4,U=T.c[F],V=(U>>>4)+P(u,j,15&U);for(j+=15&U;W<Q;)p[W]=p[W++-V],p[W]=p[W++-V],p[W]=p[W++-V],p[W]=p[W++-V];W=Q}}}}else{(7&j)!=0&&(j+=8-(7&j));const X=4+(j>>>3),ae=u[X-4]|u[X-3]<<8;L&&(p=f.H.W(p,W+ae)),p.set(new h(u.buffer,u.byteOffset+X,ae),W),j=X+ae<<3,W+=ae}return p.length==W?p:p.slice(0,W)},f.H.W=function(u,p){const h=u.length;if(p<=h)return u;const m=new Uint8Array(h<<1);return m.set(u,0),m},f.H.R=function(u,p,h,m,v,b){const y=f.H.e,E=f.H.Z;let D=0;for(;D<h;){const C=u[E(m,v)&p];v+=15&C;const z=C>>>4;if(z<=15)b[D]=z,D++;else{let k=0,W=0;z==16?(W=3+y(m,v,2),v+=2,k=b[D-1]):z==17?(W=3+y(m,v,3),v+=3):z==18&&(W=11+y(m,v,7),v+=7);const j=D+W;for(;D<j;)b[D]=k,D++}}return v},f.H.V=function(u,p,h,m){let v=0,b=0;const y=m.length>>>1;for(;b<h;){const E=u[b+p];m[b<<1]=0,m[1+(b<<1)]=E,E>v&&(v=E),b++}for(;b<y;)m[b<<1]=0,m[1+(b<<1)]=0,b++;return v},f.H.n=function(u,p){const h=f.H.m,m=u.length;let v,b,y,E;const D=h.j;for(var C=0;C<=p;C++)D[C]=0;for(C=1;C<m;C+=2)D[u[C]]++;const z=h.K;for(v=0,D[0]=0,b=1;b<=p;b++)v=v+D[b-1]<<1,z[b]=v;for(y=0;y<m;y+=2)E=u[y+1],E!=0&&(u[y]=z[E],z[E]++)},f.H.A=function(u,p,h){const m=u.length,v=f.H.m.r;for(let b=0;b<m;b+=2)if(u[b+1]!=0){const y=b>>1,E=u[b+1],D=y<<4|E,C=p-E;let z=u[b]<<C;const k=z+(1<<C);for(;z!=k;)h[v[z]>>>15-p]=D,z++}},f.H.l=function(u,p){const h=f.H.m.r,m=15-p;for(let v=0;v<u.length;v+=2){const b=u[v]<<p-u[v+1];u[v]=h[b]>>>m}},f.H.M=function(u,p,h){h<<=7&p;const m=p>>>3;u[m]|=h,u[m+1]|=h>>>8},f.H.I=function(u,p,h){h<<=7&p;const m=p>>>3;u[m]|=h,u[m+1]|=h>>>8,u[m+2]|=h>>>16},f.H.e=function(u,p,h){return(u[p>>>3]|u[1+(p>>>3)]<<8)>>>(7&p)&(1<<h)-1},f.H.b=function(u,p,h){return(u[p>>>3]|u[1+(p>>>3)]<<8|u[2+(p>>>3)]<<16)>>>(7&p)&(1<<h)-1},f.H.Z=function(u,p){return(u[p>>>3]|u[1+(p>>>3)]<<8|u[2+(p>>>3)]<<16)>>>(7&p)},f.H.i=function(u,p){return(u[p>>>3]|u[1+(p>>>3)]<<8|u[2+(p>>>3)]<<16|u[3+(p>>>3)]<<24)>>>(7&p)},f.H.m=function(){const u=Uint16Array,p=Uint32Array;return{K:new u(16),j:new u(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new u(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new u(512),_:[],h:new u(32),$:[],w:new u(32768),C:[],v:[],d:new u(32768),D:[],u:new u(512),Q:[],r:new u(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new u(65536),g:new u(32768)}}(),function(){const u=f.H.m;for(var p=0;p<32768;p++){let m=p;m=(2863311530&m)>>>1|(1431655765&m)<<1,m=(3435973836&m)>>>2|(858993459&m)<<2,m=(4042322160&m)>>>4|(252645135&m)<<4,m=(4278255360&m)>>>8|(16711935&m)<<8,u.r[p]=(m>>>16|m<<16)>>>17}function h(m,v,b){for(;v--!=0;)m.push(0,b)}for(p=0;p<32;p++)u.q[p]=u.S[p]<<3|u.T[p],u.c[p]=u.p[p]<<4|u.z[p];h(u._,144,8),h(u._,112,9),h(u._,24,7),h(u._,8,8),f.H.n(u._,9),f.H.A(u._,9,u.J),f.H.l(u._,9),h(u.$,32,5),f.H.n(u.$,5),f.H.A(u.$,5,u.h),f.H.l(u.$,5),h(u.Q,19,0),h(u.C,286,0),h(u.D,30,0),h(u.v,320,0)}(),f.H.N}();function a(f){return[1,null,3,1,2,null,4][f.ctype]*f.depth}function s(f,u,p,h,m){let v=a(u);const b=Math.ceil(h*v/8);let y,E;v=Math.ceil(v/8);let D=f[p],C=0;if(D>1&&(f[p]=[0,0,1][D-2]),D==3)for(C=v;C<b;C++)f[C+1]=f[C+1]+(f[C+1-v]>>>1)&255;for(let z=0;z<m;z++)if(y=p+z*b,E=y+z+1,D=f[E-1],C=0,D==0)for(;C<b;C++)f[y+C]=f[E+C];else if(D==1){for(;C<v;C++)f[y+C]=f[E+C];for(;C<b;C++)f[y+C]=f[E+C]+f[y+C-v]}else if(D==2)for(;C<b;C++)f[y+C]=f[E+C]+f[y+C-b];else if(D==3){for(;C<v;C++)f[y+C]=f[E+C]+(f[y+C-b]>>>1);for(;C<b;C++)f[y+C]=f[E+C]+(f[y+C-b]+f[y+C-v]>>>1)}else{for(;C<v;C++)f[y+C]=f[E+C]+o(0,f[y+C-b],0);for(;C<b;C++)f[y+C]=f[E+C]+o(f[y+C-v],f[y+C-b],f[y+C-v-b])}return f}function o(f,u,p){const h=f+u-p,m=h-f,v=h-u,b=h-p;return m*m<=v*v&&m*m<=b*b?f:v*v<=b*b?u:p}function l(f,u,p){p.width=r.readUint(f,u),u+=4,p.height=r.readUint(f,u),u+=4,p.depth=f[u],u++,p.ctype=f[u],u++,p.compress=f[u],u++,p.filter=f[u],u++,p.interlace=f[u],u++}function c(f,u,p,h,m,v,b,y,E){const D=Math.min(u,m),C=Math.min(p,v);let z=0,k=0;for(let B=0;B<C;B++)for(let T=0;T<D;T++)if(b>=0&&y>=0?(z=B*u+T<<2,k=(y+B)*m+b+T<<2):(z=(-y+B)*u-b+T<<2,k=B*m+T<<2),E==0)h[k]=f[z],h[k+1]=f[z+1],h[k+2]=f[z+2],h[k+3]=f[z+3];else if(E==1){var W=f[z+3]*.00392156862745098,j=f[z]*W,I=f[z+1]*W,P=f[z+2]*W,N=h[k+3]*(1/255),S=h[k]*N,O=h[k+1]*N,A=h[k+2]*N;const L=1-W,Y=W+N*L,X=Y==0?0:1/Y;h[k+3]=255*Y,h[k+0]=(j+S*L)*X,h[k+1]=(I+O*L)*X,h[k+2]=(P+A*L)*X}else if(E==2)W=f[z+3],j=f[z],I=f[z+1],P=f[z+2],N=h[k+3],S=h[k],O=h[k+1],A=h[k+2],W==N&&j==S&&I==O&&P==A?(h[k]=0,h[k+1]=0,h[k+2]=0,h[k+3]=0):(h[k]=j,h[k+1]=I,h[k+2]=P,h[k+3]=W);else if(E==3){if(W=f[z+3],j=f[z],I=f[z+1],P=f[z+2],N=h[k+3],S=h[k],O=h[k+1],A=h[k+2],W==N&&j==S&&I==O&&P==A)continue;if(W<220&&N>20)return!1}return!0}return{decode:function(u){const p=new Uint8Array(u);let h=8;const m=r,v=m.readUshort,b=m.readUint,y={tabs:{},frames:[]},E=new Uint8Array(p.length);let D,C=0,z=0;const k=[137,80,78,71,13,10,26,10];for(var W=0;W<8;W++)if(p[W]!=k[W])throw"The input is not a PNG file!";for(;h<p.length;){const B=m.readUint(p,h);h+=4;const T=m.readASCII(p,h,4);if(h+=4,T=="IHDR")l(p,h,y);else if(T=="iCCP"){for(var j=h;p[j]!=0;)j++;m.readASCII(p,h,j-h),p[j+1];const L=p.slice(j+2,h+B);let Y=null;try{Y=n(L)}catch{Y=i(L)}y.tabs[T]=Y}else if(T=="CgBI")y.tabs[T]=p.slice(h,h+4);else if(T=="IDAT"){for(W=0;W<B;W++)E[C+W]=p[h+W];C+=B}else if(T=="acTL")y.tabs[T]={num_frames:b(p,h),num_plays:b(p,h+4)},D=new Uint8Array(p.length);else if(T=="fcTL"){z!=0&&((A=y.frames[y.frames.length-1]).data=t(y,D.slice(0,z),A.rect.width,A.rect.height),z=0);const L={x:b(p,h+12),y:b(p,h+16),width:b(p,h+4),height:b(p,h+8)};let Y=v(p,h+22);Y=v(p,h+20)/(Y==0?100:Y);const X={rect:L,delay:Math.round(1e3*Y),dispose:p[h+24],blend:p[h+25]};y.frames.push(X)}else if(T=="fdAT"){for(W=0;W<B-4;W++)D[z+W]=p[h+W+4];z+=B-4}else if(T=="pHYs")y.tabs[T]=[m.readUint(p,h),m.readUint(p,h+4),p[h+8]];else if(T=="cHRM")for(y.tabs[T]=[],W=0;W<8;W++)y.tabs[T].push(m.readUint(p,h+4*W));else if(T=="tEXt"||T=="zTXt"){y.tabs[T]==null&&(y.tabs[T]={});var I=m.nextZero(p,h),P=m.readASCII(p,h,I-h),N=h+B-I-1;if(T=="tEXt")O=m.readASCII(p,I+1,N);else{var S=n(p.slice(I+2,I+2+N));O=m.readUTF8(S,0,S.length)}y.tabs[T][P]=O}else if(T=="iTXt"){y.tabs[T]==null&&(y.tabs[T]={}),I=0,j=h,I=m.nextZero(p,j),P=m.readASCII(p,j,I-j);const L=p[j=I+1];var O;p[j+1],j+=2,I=m.nextZero(p,j),m.readASCII(p,j,I-j),j=I+1,I=m.nextZero(p,j),m.readUTF8(p,j,I-j),N=B-((j=I+1)-h),L==0?O=m.readUTF8(p,j,N):(S=n(p.slice(j,j+N)),O=m.readUTF8(S,0,S.length)),y.tabs[T][P]=O}else if(T=="PLTE")y.tabs[T]=m.readBytes(p,h,B);else if(T=="hIST"){const L=y.tabs.PLTE.length/3;for(y.tabs[T]=[],W=0;W<L;W++)y.tabs[T].push(v(p,h+2*W))}else if(T=="tRNS")y.ctype==3?y.tabs[T]=m.readBytes(p,h,B):y.ctype==0?y.tabs[T]=v(p,h):y.ctype==2&&(y.tabs[T]=[v(p,h),v(p,h+2),v(p,h+4)]);else if(T=="gAMA")y.tabs[T]=m.readUint(p,h)/1e5;else if(T=="sRGB")y.tabs[T]=p[h];else if(T=="bKGD")y.ctype==0||y.ctype==4?y.tabs[T]=[v(p,h)]:y.ctype==2||y.ctype==6?y.tabs[T]=[v(p,h),v(p,h+2),v(p,h+4)]:y.ctype==3&&(y.tabs[T]=p[h]);else if(T=="IEND")break;h+=B,m.readUint(p,h),h+=4}var A;return z!=0&&((A=y.frames[y.frames.length-1]).data=t(y,D.slice(0,z),A.rect.width,A.rect.height)),y.data=t(y,E,y.width,y.height),delete y.compress,delete y.interlace,delete y.filter,y},toRGBA8:function(u){const p=u.width,h=u.height;if(u.tabs.acTL==null)return[e(u.data,p,h,u).buffer];const m=[];u.frames[0].data==null&&(u.frames[0].data=u.data);const v=p*h*4,b=new Uint8Array(v),y=new Uint8Array(v),E=new Uint8Array(v);for(let C=0;C<u.frames.length;C++){const z=u.frames[C],k=z.rect.x,W=z.rect.y,j=z.rect.width,I=z.rect.height,P=e(z.data,j,I,u);if(C!=0)for(var D=0;D<v;D++)E[D]=b[D];if(z.blend==0?c(P,j,I,b,p,h,k,W,0):z.blend==1&&c(P,j,I,b,p,h,k,W,1),m.push(b.buffer.slice(0)),z.dispose!=0){if(z.dispose==1)c(y,j,I,b,p,h,k,W,0);else if(z.dispose==2)for(D=0;D<v;D++)b[D]=E[D]}}return m},_paeth:o,_copyTile:c,_bin:r}}();(function(){const{_copyTile:r}=ui,{_bin:e}=ui,t=ui._paeth;var n={table:function(){const j=new Uint32Array(256);for(let I=0;I<256;I++){let P=I;for(let N=0;N<8;N++)1&P?P=3988292384^P>>>1:P>>>=1;j[I]=P}return j}(),update(j,I,P,N){for(let S=0;S<N;S++)j=n.table[255&(j^I[P+S])]^j>>>8;return j},crc:(j,I,P)=>4294967295^n.update(4294967295,j,I,P)};function i(j,I,P,N){I[P]+=j[0]*N>>4,I[P+1]+=j[1]*N>>4,I[P+2]+=j[2]*N>>4,I[P+3]+=j[3]*N>>4}function a(j){return Math.max(0,Math.min(255,j))}function s(j,I){const P=j[0]-I[0],N=j[1]-I[1],S=j[2]-I[2],O=j[3]-I[3];return P*P+N*N+S*S+O*O}function o(j,I,P,N,S,O,A){A==null&&(A=1);const B=N.length,T=[];for(var L=0;L<B;L++){const V=N[L];T.push([V>>>0&255,V>>>8&255,V>>>16&255,V>>>24&255])}for(L=0;L<B;L++){let V=4294967295;for(var Y=0,X=0;X<B;X++){var ae=s(T[L],T[X]);X!=L&&ae<V&&(V=ae,Y=X)}}const Q=new Uint32Array(S.buffer),M=new Int16Array(I*P*4),F=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(L=0;L<F.length;L++)F[L]=255*((F[L]+.5)/16-.5);for(let V=0;V<P;V++)for(let te=0;te<I;te++){var U;L=4*(V*I+te),A!=2?U=[a(j[L]+M[L]),a(j[L+1]+M[L+1]),a(j[L+2]+M[L+2]),a(j[L+3]+M[L+3])]:(ae=F[4*(3&V)+(3&te)],U=[a(j[L]+ae),a(j[L+1]+ae),a(j[L+2]+ae),a(j[L+3]+ae)]),Y=0;let le=16777215;for(X=0;X<B;X++){const de=s(U,T[X]);de<le&&(le=de,Y=X)}const he=T[Y],pe=[U[0]-he[0],U[1]-he[1],U[2]-he[2],U[3]-he[3]];A==1&&(te!=I-1&&i(pe,M,L+4,7),V!=P-1&&(te!=0&&i(pe,M,L+4*I-4,3),i(pe,M,L+4*I,5),te!=I-1&&i(pe,M,L+4*I+4,1))),O[L>>2]=Y,Q[L>>2]=N[Y]}}function l(j,I,P,N,S){S==null&&(S={});const{crc:O}=n,A=e.writeUint,B=e.writeUshort,T=e.writeASCII;let L=8;const Y=j.frames.length>1;let X,ae=!1,Q=33+(Y?20:0);if(S.sRGB!=null&&(Q+=13),S.pHYs!=null&&(Q+=21),S.iCCP!=null&&(X=pako.deflate(S.iCCP),Q+=21+X.length+4),j.ctype==3){for(var M=j.plte.length,F=0;F<M;F++)j.plte[F]>>>24!=255&&(ae=!0);Q+=8+3*M+4+(ae?8+1*M+4:0)}for(var U=0;U<j.frames.length;U++)Y&&(Q+=38),Q+=(he=j.frames[U]).cimg.length+12,U!=0&&(Q+=4);Q+=12;const V=new Uint8Array(Q),te=[137,80,78,71,13,10,26,10];for(F=0;F<8;F++)V[F]=te[F];if(A(V,L,13),L+=4,T(V,L,"IHDR"),L+=4,A(V,L,I),L+=4,A(V,L,P),L+=4,V[L]=j.depth,L++,V[L]=j.ctype,L++,V[L]=0,L++,V[L]=0,L++,V[L]=0,L++,A(V,L,O(V,L-17,17)),L+=4,S.sRGB!=null&&(A(V,L,1),L+=4,T(V,L,"sRGB"),L+=4,V[L]=S.sRGB,L++,A(V,L,O(V,L-5,5)),L+=4),S.iCCP!=null){const pe=13+X.length;A(V,L,pe),L+=4,T(V,L,"iCCP"),L+=4,T(V,L,"ICC profile"),L+=11,L+=2,V.set(X,L),L+=X.length,A(V,L,O(V,L-(pe+4),pe+4)),L+=4}if(S.pHYs!=null&&(A(V,L,9),L+=4,T(V,L,"pHYs"),L+=4,A(V,L,S.pHYs[0]),L+=4,A(V,L,S.pHYs[1]),L+=4,V[L]=S.pHYs[2],L++,A(V,L,O(V,L-13,13)),L+=4),Y&&(A(V,L,8),L+=4,T(V,L,"acTL"),L+=4,A(V,L,j.frames.length),L+=4,A(V,L,S.loop!=null?S.loop:0),L+=4,A(V,L,O(V,L-12,12)),L+=4),j.ctype==3){for(A(V,L,3*(M=j.plte.length)),L+=4,T(V,L,"PLTE"),L+=4,F=0;F<M;F++){const pe=3*F,de=j.plte[F],be=255&de,Ee=de>>>8&255,Re=de>>>16&255;V[L+pe+0]=be,V[L+pe+1]=Ee,V[L+pe+2]=Re}if(L+=3*M,A(V,L,O(V,L-3*M-4,3*M+4)),L+=4,ae){for(A(V,L,M),L+=4,T(V,L,"tRNS"),L+=4,F=0;F<M;F++)V[L+F]=j.plte[F]>>>24&255;L+=M,A(V,L,O(V,L-M-4,M+4)),L+=4}}let le=0;for(U=0;U<j.frames.length;U++){var he=j.frames[U];Y&&(A(V,L,26),L+=4,T(V,L,"fcTL"),L+=4,A(V,L,le++),L+=4,A(V,L,he.rect.width),L+=4,A(V,L,he.rect.height),L+=4,A(V,L,he.rect.x),L+=4,A(V,L,he.rect.y),L+=4,B(V,L,N[U]),L+=2,B(V,L,1e3),L+=2,V[L]=he.dispose,L++,V[L]=he.blend,L++,A(V,L,O(V,L-30,30)),L+=4);const pe=he.cimg;A(V,L,(M=pe.length)+(U==0?0:4)),L+=4;const de=L;T(V,L,U==0?"IDAT":"fdAT"),L+=4,U!=0&&(A(V,L,le++),L+=4),V.set(pe,L),L+=M,A(V,L,O(V,de,L-de)),L+=4}return A(V,L,0),L+=4,T(V,L,"IEND"),L+=4,A(V,L,O(V,L-4,4)),L+=4,V.buffer}function c(j,I,P){for(let N=0;N<j.frames.length;N++){const S=j.frames[N];S.rect.width;const O=S.rect.height,A=new Uint8Array(O*S.bpl+O);S.cimg=h(S.img,O,S.bpp,S.bpl,A,I,P)}}function f(j,I,P,N,S){const O=S[0],A=S[1],B=S[2],T=S[3],L=S[4],Y=S[5];let X=6,ae=8,Q=255;for(var M=0;M<j.length;M++){const je=new Uint8Array(j[M]);for(var F=je.length,U=0;U<F;U+=4)Q&=je[U+3]}const V=Q!=255,te=function(He,Te,fe,Le,Ie,Ue){const Me=[];for(var Oe=0;Oe<He.length;Oe++){const Ve=new Uint8Array(He[Oe]),ze=new Uint32Array(Ve.buffer);var rt;let kt=0,yt=0,ct=Te,ut=fe,Kt=Le?1:0;if(Oe!=0){const at=Ue||Le||Oe==1||Me[Oe-2].dispose!=0?1:2;let Ut=0,st=1e9;for(let dt=0;dt<at;dt++){var Qe=new Uint8Array(He[Oe-1-dt]);const rr=new Uint32Array(He[Oe-1-dt]);let ht=Te,Je=fe,Et=-1,kn=-1;for(let Xr=0;Xr<fe;Xr++)for(let Ur=0;Ur<Te;Ur++)ze[it=Xr*Te+Ur]!=rr[it]&&(Ur<ht&&(ht=Ur),Ur>Et&&(Et=Ur),Xr<Je&&(Je=Xr),Xr>kn&&(kn=Xr));Et==-1&&(ht=Je=Et=kn=0),Ie&&((1&ht)==1&&ht--,(1&Je)==1&&Je--);const Er=(Et-ht+1)*(kn-Je+1);Er<st&&(st=Er,Ut=dt,kt=ht,yt=Je,ct=Et-ht+1,ut=kn-Je+1)}Qe=new Uint8Array(He[Oe-1-Ut]),Ut==1&&(Me[Oe-1].dispose=2),rt=new Uint8Array(ct*ut*4),r(Qe,Te,fe,rt,ct,ut,-kt,-yt,0),Kt=r(Ve,Te,fe,rt,ct,ut,-kt,-yt,3)?1:0,Kt==1?p(Ve,Te,fe,rt,{x:kt,y:yt,width:ct,height:ut}):r(Ve,Te,fe,rt,ct,ut,-kt,-yt,0)}else rt=Ve.slice(0);Me.push({rect:{x:kt,y:yt,width:ct,height:ut},img:rt,blend:Kt,dispose:0})}if(Le)for(Oe=0;Oe<Me.length;Oe++){if((qe=Me[Oe]).blend==1)continue;const Ve=qe.rect,ze=Me[Oe-1].rect,kt=Math.min(Ve.x,ze.x),yt=Math.min(Ve.y,ze.y),ct={x:kt,y:yt,width:Math.max(Ve.x+Ve.width,ze.x+ze.width)-kt,height:Math.max(Ve.y+Ve.height,ze.y+ze.height)-yt};Me[Oe-1].dispose=1,Oe-1!=0&&u(He,Te,fe,Me,Oe-1,ct,Ie),u(He,Te,fe,Me,Oe,ct,Ie)}let At=0;if(He.length!=1)for(var it=0;it<Me.length;it++){var qe;At+=(qe=Me[it]).rect.width*qe.rect.height}return Me}(j,I,P,O,A,B),le={},he=[],pe=[];if(N!=0){const je=[];for(U=0;U<te.length;U++)je.push(te[U].img.buffer);const He=function(Ie){let Ue=0;for(var Me=0;Me<Ie.length;Me++)Ue+=Ie[Me].byteLength;const Oe=new Uint8Array(Ue);let rt=0;for(Me=0;Me<Ie.length;Me++){const Qe=new Uint8Array(Ie[Me]),At=Qe.length;for(let it=0;it<At;it+=4){let qe=Qe[it],Ve=Qe[it+1],ze=Qe[it+2];const kt=Qe[it+3];kt==0&&(qe=Ve=ze=0),Oe[rt+it]=qe,Oe[rt+it+1]=Ve,Oe[rt+it+2]=ze,Oe[rt+it+3]=kt}rt+=At}return Oe.buffer}(je),Te=v(He,N);for(U=0;U<Te.plte.length;U++)he.push(Te.plte[U].est.rgba);let fe=0;for(U=0;U<te.length;U++){const Le=(be=te[U]).img.length;var de=new Uint8Array(Te.inds.buffer,fe>>2,Le>>2);pe.push(de);const Ie=new Uint8Array(Te.abuf,fe,Le);Y&&o(be.img,be.rect.width,be.rect.height,he,Ie,de),be.img.set(Ie),fe+=Le}}else for(M=0;M<te.length;M++){var be=te[M];const je=new Uint32Array(be.img.buffer);var Ee=be.rect.width;for(F=je.length,de=new Uint8Array(F),pe.push(de),U=0;U<F;U++){const He=je[U];if(U!=0&&He==je[U-1])de[U]=de[U-1];else if(U>Ee&&He==je[U-Ee])de[U]=de[U-Ee];else{let Te=le[He];if(Te==null&&(le[He]=Te=he.length,he.push(He),he.length>=300))break;de[U]=Te}}}const Re=he.length;for(Re<=256&&L==0&&(ae=Re<=2?1:Re<=4?2:Re<=16?4:8,ae=Math.max(ae,T)),M=0;M<te.length;M++){(be=te[M]).rect.x,be.rect.y,Ee=be.rect.width;const je=be.rect.height;let He=be.img;new Uint32Array(He.buffer);let Te=4*Ee,fe=4;if(Re<=256&&L==0){Te=Math.ceil(ae*Ee/8);var Fe=new Uint8Array(Te*je);const Le=pe[M];for(let Ie=0;Ie<je;Ie++){U=Ie*Te;const Ue=Ie*Ee;if(ae==8)for(var Z=0;Z<Ee;Z++)Fe[U+Z]=Le[Ue+Z];else if(ae==4)for(Z=0;Z<Ee;Z++)Fe[U+(Z>>1)]|=Le[Ue+Z]<<4-4*(1&Z);else if(ae==2)for(Z=0;Z<Ee;Z++)Fe[U+(Z>>2)]|=Le[Ue+Z]<<6-2*(3&Z);else if(ae==1)for(Z=0;Z<Ee;Z++)Fe[U+(Z>>3)]|=Le[Ue+Z]<<7-1*(7&Z)}He=Fe,X=3,fe=1}else if(V==0&&te.length==1){Fe=new Uint8Array(Ee*je*3);const Le=Ee*je;for(U=0;U<Le;U++){const Ie=3*U,Ue=4*U;Fe[Ie]=He[Ue],Fe[Ie+1]=He[Ue+1],Fe[Ie+2]=He[Ue+2]}He=Fe,X=2,fe=3,Te=3*Ee}be.img=He,be.bpl=Te,be.bpp=fe}return{ctype:X,depth:ae,plte:he,frames:te}}function u(j,I,P,N,S,O,A){const B=Uint8Array,T=Uint32Array,L=new B(j[S-1]),Y=new T(j[S-1]),X=S+1<j.length?new B(j[S+1]):null,ae=new B(j[S]),Q=new T(ae.buffer);let M=I,F=P,U=-1,V=-1;for(let le=0;le<O.height;le++)for(let he=0;he<O.width;he++){const pe=O.x+he,de=O.y+le,be=de*I+pe,Ee=Q[be];Ee==0||N[S-1].dispose==0&&Y[be]==Ee&&(X==null||X[4*be+3]!=0)||(pe<M&&(M=pe),pe>U&&(U=pe),de<F&&(F=de),de>V&&(V=de))}U==-1&&(M=F=U=V=0),A&&((1&M)==1&&M--,(1&F)==1&&F--),O={x:M,y:F,width:U-M+1,height:V-F+1};const te=N[S];te.rect=O,te.blend=1,te.img=new Uint8Array(O.width*O.height*4),N[S-1].dispose==0?(r(L,I,P,te.img,O.width,O.height,-O.x,-O.y,0),p(ae,I,P,te.img,O)):r(ae,I,P,te.img,O.width,O.height,-O.x,-O.y,0)}function p(j,I,P,N,S){r(j,I,P,N,S.width,S.height,-S.x,-S.y,2)}function h(j,I,P,N,S,O,A){const B=[];let T,L=[0,1,2,3,4];O!=-1?L=[O]:(I*N>5e5||P==1)&&(L=[0]),A&&(T={level:0});const Y=Qv;for(var X=0;X<L.length;X++){for(let M=0;M<I;M++)m(S,j,M,N,P,L[X]);B.push(Y.deflate(S,T))}let ae,Q=1e9;for(X=0;X<B.length;X++)B[X].length<Q&&(ae=X,Q=B[X].length);return B[ae]}function m(j,I,P,N,S,O){const A=P*N;let B=A+P;if(j[B]=O,B++,O==0)if(N<500)for(var T=0;T<N;T++)j[B+T]=I[A+T];else j.set(new Uint8Array(I.buffer,A,N),B);else if(O==1){for(T=0;T<S;T++)j[B+T]=I[A+T];for(T=S;T<N;T++)j[B+T]=I[A+T]-I[A+T-S]+256&255}else if(P==0){for(T=0;T<S;T++)j[B+T]=I[A+T];if(O==2)for(T=S;T<N;T++)j[B+T]=I[A+T];if(O==3)for(T=S;T<N;T++)j[B+T]=I[A+T]-(I[A+T-S]>>1)+256&255;if(O==4)for(T=S;T<N;T++)j[B+T]=I[A+T]-t(I[A+T-S],0,0)+256&255}else{if(O==2)for(T=0;T<N;T++)j[B+T]=I[A+T]+256-I[A+T-N]&255;if(O==3){for(T=0;T<S;T++)j[B+T]=I[A+T]+256-(I[A+T-N]>>1)&255;for(T=S;T<N;T++)j[B+T]=I[A+T]+256-(I[A+T-N]+I[A+T-S]>>1)&255}if(O==4){for(T=0;T<S;T++)j[B+T]=I[A+T]+256-t(0,I[A+T-N],0)&255;for(T=S;T<N;T++)j[B+T]=I[A+T]+256-t(I[A+T-S],I[A+T-N],I[A+T-S-N])&255}}}function v(j,I){const P=new Uint8Array(j),N=P.slice(0),S=new Uint32Array(N.buffer),O=b(N,I),A=O[0],B=O[1],T=P.length,L=new Uint8Array(T>>2);let Y;if(P.length<2e7)for(var X=0;X<T;X+=4)Y=y(A,ae=P[X]*(1/255),Q=P[X+1]*(1/255),M=P[X+2]*(1/255),F=P[X+3]*(1/255)),L[X>>2]=Y.ind,S[X>>2]=Y.est.rgba;else for(X=0;X<T;X+=4){var ae=P[X]*.00392156862745098,Q=P[X+1]*(1/255),M=P[X+2]*(1/255),F=P[X+3]*(1/255);for(Y=A;Y.left;)Y=E(Y.est,ae,Q,M,F)<=0?Y.left:Y.right;L[X>>2]=Y.ind,S[X>>2]=Y.est.rgba}return{abuf:N.buffer,inds:L,plte:B}}function b(j,I,P){P==null&&(P=1e-4);const N=new Uint32Array(j.buffer),S={i0:0,i1:j.length,bst:null,est:null,tdst:0,left:null,right:null};S.bst=z(j,S.i0,S.i1),S.est=k(S.bst);const O=[S];for(;O.length<I;){let B=0,T=0;for(var A=0;A<O.length;A++)O[A].est.L>B&&(B=O[A].est.L,T=A);if(B<P)break;const L=O[T],Y=D(j,N,L.i0,L.i1,L.est.e,L.est.eMq255);if(L.i0>=Y||L.i1<=Y){L.est.L=0;continue}const X={i0:L.i0,i1:Y,bst:null,est:null,tdst:0,left:null,right:null};X.bst=z(j,X.i0,X.i1),X.est=k(X.bst);const ae={i0:Y,i1:L.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ae.bst={R:[],m:[],N:L.bst.N-X.bst.N},A=0;A<16;A++)ae.bst.R[A]=L.bst.R[A]-X.bst.R[A];for(A=0;A<4;A++)ae.bst.m[A]=L.bst.m[A]-X.bst.m[A];ae.est=k(ae.bst),L.left=X,L.right=ae,O[T]=X,O.push(ae)}for(O.sort((B,T)=>T.bst.N-B.bst.N),A=0;A<O.length;A++)O[A].ind=A;return[S,O]}function y(j,I,P,N,S){if(j.left==null)return j.tdst=function(X,ae,Q,M,F){const U=ae-X[0],V=Q-X[1],te=M-X[2],le=F-X[3];return U*U+V*V+te*te+le*le}(j.est.q,I,P,N,S),j;const O=E(j.est,I,P,N,S);let A=j.left,B=j.right;O>0&&(A=j.right,B=j.left);const T=y(A,I,P,N,S);if(T.tdst<=O*O)return T;const L=y(B,I,P,N,S);return L.tdst<T.tdst?L:T}function E(j,I,P,N,S){const{e:O}=j;return O[0]*I+O[1]*P+O[2]*N+O[3]*S-j.eMq}function D(j,I,P,N,S,O){for(N-=4;P<N;){for(;C(j,P,S)<=O;)P+=4;for(;C(j,N,S)>O;)N-=4;if(P>=N)break;const A=I[P>>2];I[P>>2]=I[N>>2],I[N>>2]=A,P+=4,N-=4}for(;C(j,P,S)>O;)P-=4;return P+4}function C(j,I,P){return j[I]*P[0]+j[I+1]*P[1]+j[I+2]*P[2]+j[I+3]*P[3]}function z(j,I,P){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=[0,0,0,0],O=P-I>>2;for(let A=I;A<P;A+=4){const B=j[A]*.00392156862745098,T=j[A+1]*(1/255),L=j[A+2]*(1/255),Y=j[A+3]*(1/255);S[0]+=B,S[1]+=T,S[2]+=L,S[3]+=Y,N[0]+=B*B,N[1]+=B*T,N[2]+=B*L,N[3]+=B*Y,N[5]+=T*T,N[6]+=T*L,N[7]+=T*Y,N[10]+=L*L,N[11]+=L*Y,N[15]+=Y*Y}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:S,N:O}}function k(j){const{R:I}=j,{m:P}=j,{N}=j,S=P[0],O=P[1],A=P[2],B=P[3],T=N==0?0:1/N,L=[I[0]-S*S*T,I[1]-S*O*T,I[2]-S*A*T,I[3]-S*B*T,I[4]-O*S*T,I[5]-O*O*T,I[6]-O*A*T,I[7]-O*B*T,I[8]-A*S*T,I[9]-A*O*T,I[10]-A*A*T,I[11]-A*B*T,I[12]-B*S*T,I[13]-B*O*T,I[14]-B*A*T,I[15]-B*B*T],Y=L,X=W;let ae=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,M=0;if(N!=0)for(let U=0;U<16&&(ae=X.multVec(Y,ae),M=Math.sqrt(X.dot(ae,ae)),ae=X.sml(1/M,ae),!(U!=0&&Math.abs(M-Q)<1e-9));U++)Q=M;const F=[S*T,O*T,A*T,B*T];return{Cov:L,q:F,e:ae,L:Q,eMq255:X.dot(X.sml(255,F),ae),eMq:X.dot(ae,F),rgba:(Math.round(255*F[3])<<24|Math.round(255*F[2])<<16|Math.round(255*F[1])<<8|Math.round(255*F[0])<<0)>>>0}}var W={multVec:(j,I)=>[j[0]*I[0]+j[1]*I[1]+j[2]*I[2]+j[3]*I[3],j[4]*I[0]+j[5]*I[1]+j[6]*I[2]+j[7]*I[3],j[8]*I[0]+j[9]*I[1]+j[10]*I[2]+j[11]*I[3],j[12]*I[0]+j[13]*I[1]+j[14]*I[2]+j[15]*I[3]],dot:(j,I)=>j[0]*I[0]+j[1]*I[1]+j[2]*I[2]+j[3]*I[3],sml:(j,I)=>[j*I[0],j*I[1],j*I[2],j*I[3]]};ui.encode=function(I,P,N,S,O,A,B){S==null&&(S=0),B==null&&(B=!1);const T=f(I,P,N,S,[!1,!1,!1,0,B,!1]);return c(T,-1),l(T,P,N,O,A)},ui.encodeLL=function(I,P,N,S,O,A,B,T){const L={ctype:0+(S==1?0:2)+(O==0?0:4),depth:A,frames:[]},Y=(S+O)*A,X=Y*P;for(let ae=0;ae<I.length;ae++)L.frames.push({rect:{x:0,y:0,width:P,height:N},img:new Uint8Array(I[ae]),blend:0,dispose:1,bpp:Math.ceil(Y/8),bpl:Math.ceil(X/8)});return c(L,0,!0),l(L,P,N,B,T)},ui.encode.compress=f,ui.encode.dither=o,ui.quantize=v,ui.quantize.getKDtree=b,ui.quantize.getNearest=y})();const dh={toArrayBuffer(r,e){const t=r.width,n=r.height,i=t<<2,a=r.getContext("2d").getImageData(0,0,t,n),s=new Uint32Array(a.data.buffer),o=(32*t+31)/32<<2,l=o*n,c=122+l,f=new ArrayBuffer(c),u=new DataView(f),p=1<<20;let h,m,v,b,y=p,E=0,D=0,C=0;function z(j){u.setUint16(D,j,!0),D+=2}function k(j){u.setUint32(D,j,!0),D+=4}function W(j){D+=j}z(19778),k(c),W(4),k(122),k(108),k(t),k(-n>>>0),z(1),z(32),k(3),k(l),k(2835),k(2835),W(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),function j(){for(;E<n&&y>0;){for(b=122+E*o,h=0;h<i;)y--,m=s[C++],v=m>>>24,u.setUint32(b+h,m<<8|v),h+=4;E++}C<s.length?(y=p,setTimeout(j,dh._dly)):e(f)}()},toBlob(r,e){this.toArrayBuffer(r,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var Cn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Jv={[Cn.CHROME]:16384,[Cn.FIREFOX]:11180,[Cn.DESKTOP_SAFARI]:16384,[Cn.IE]:8192,[Cn.IOS]:4096,[Cn.ETC]:8192};const kd=typeof window<"u",uh=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ac=kd&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ey=(kd||uh)&&(ac&&ac.getOriginalSymbol(window,"File")||typeof File<"u"&&File),hh=(kd||uh)&&(ac&&ac.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function jd(r,e,t=Date.now()){return new Promise(n=>{const i=r.split(","),a=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let o=s.length;const l=new Uint8Array(o);for(;o--;)l[o]=s.charCodeAt(o);const c=new Blob([l],{type:a});c.name=e,c.lastModified=t,n(c)})}function ph(r){return new Promise((e,t)=>{const n=new hh;n.onload=()=>e(n.result),n.onerror=i=>t(i),n.readAsDataURL(r)})}function gh(r){return new Promise((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=i=>t(i),n.src=r})}function no(){if(no.cachedResult!==void 0)return no.cachedResult;let r=Cn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=Cn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=Cn.IOS:/Safari/i.test(e)?r=Cn.DESKTOP_SAFARI:/Firefox/i.test(e)?r=Cn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=Cn.IE),no.cachedResult=r,no.cachedResult}function mh(r,e){const t=no(),n=Jv[t];let i=r,a=e,s=i*a;const o=i>a?a/i:i/a;for(;s>n*n;){const l=(n+i)/2,c=(n+a)/2;l<c?(a=c,i=c*o):(a=l*o,i=l),s=i*a}return{width:i,height:a}}function bc(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function xh(r,e){const{width:t,height:n}=mh(r.width,r.height),[i,a]=bc(t,n);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(r,0,0,i.width,i.height),i}function Xl(){return Xl.cachedResult!==void 0||(Xl.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Xl.cachedResult}function oc(r,e={}){return new Promise(function(t,n){let i,a;var s=function(){try{return a=xh(i,e.fileType||r.type),t([i,a])}catch(l){return n(l)}},o=function(l){try{var c=function(f){try{throw f}catch(u){return n(u)}};try{let f;return ph(r).then(function(u){try{return f=u,gh(f).then(function(p){try{return i=p,function(){try{return s()}catch(h){return n(h)}}()}catch(h){return c(h)}},c)}catch(p){return c(p)}},c)}catch(f){c(f)}}catch(f){return n(f)}};try{if(Xl()||[Cn.DESKTOP_SAFARI,Cn.MOBILE_SAFARI].includes(no()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then(function(l){try{return i=l,s()}catch{return o()}},o)}catch{o()}})}function sc(r,e,t,n,i=1){return new Promise(function(a,s){let o;if(e==="image/png"){let c,f,u;return c=r.getContext("2d"),{data:f}=c.getImageData(0,0,r.width,r.height),u=ui.encode([f.buffer],r.width,r.height,4096*i),o=new Blob([u],{type:e}),o.name=t,o.lastModified=n,l.call(this)}{let c=function(){return l.call(this)};if(e==="image/bmp")return new Promise(f=>dh.toBlob(r,f)).then((function(f){try{return o=f,o.name=t,o.lastModified=n,c.call(this)}catch(u){return s(u)}}).bind(this),s);{let f=function(){return c.call(this)};if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:i}).then((function(u){try{return o=u,o.name=t,o.lastModified=n,f.call(this)}catch(p){return s(p)}}).bind(this),s);{let u;return u=r.toDataURL(e,i),jd(u,t,n).then((function(p){try{return o=p,f.call(this)}catch(h){return s(h)}}).bind(this),s)}}}function l(){return a(o)}})}function ki(r){r.width=0,r.height=0}function Po(){return new Promise(function(r,e){let t,n,i,a;return Po.cachedResult!==void 0?r(Po.cachedResult):jd("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return t=s,oc(t).then(function(o){try{return n=o[1],sc(n,t.type,t.name,t.lastModified).then(function(l){try{return i=l,ki(n),oc(i).then(function(c){try{return a=c[0],Po.cachedResult=a.width===1&&a.height===2,r(Po.cachedResult)}catch(f){return e(f)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function vh(r){return new Promise((e,t)=>{const n=new hh;n.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const s=a.byteLength;let o=2;for(;o<s;){if(a.getUint16(o+2,!1)<=8)return e(-1);const l=a.getUint16(o,!1);if(o+=2,l==65505){if(a.getUint32(o+=2,!1)!=1165519206)return e(-1);const c=a.getUint16(o+=6,!1)==18761;o+=a.getUint32(o+4,c);const f=a.getUint16(o,c);o+=2;for(let u=0;u<f;u++)if(a.getUint16(o+12*u,c)==274)return e(a.getUint16(o+12*u+8,c))}else{if((65280&l)!=65280)break;o+=a.getUint16(o,!1)}}return e(-1)},n.onerror=i=>t(i),n.readAsArrayBuffer(r)})}function yh(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:i}=e;let a,s=r;return isFinite(i)&&(t>i||n>i)&&([s,a]=bc(t,n),t>n?(s.width=i,s.height=n/t*i):(s.width=t/n*i,s.height=i),a.drawImage(r,0,0,s.width,s.height),ki(r)),s}function bh(r,e){const{width:t}=r,{height:n}=r,[i,a]=bc(t,n);switch(e>4&&e<9?(i.width=n,i.height=t):(i.width=t,i.height=n),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,n);break;case 4:a.transform(1,0,0,-1,0,n);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,n,0);break;case 7:a.transform(0,-1,-1,0,n,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(r,0,0,t,n),ki(r),i}function i0(r,e,t=0){return new Promise(function(n,i){let a,s,o,l,c,f,u,p,h,m,v,b,y,E,D,C,z,k,W,j;function I(N=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=N,e.onProgress(Math.min(a,100))}function P(N){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(N,a),100),e.onProgress(a)}return a=t,s=e.maxIteration||10,o=1024*e.maxSizeMB*1024,I(),oc(r,e).then((function(N){try{return[,l]=N,I(),c=yh(l,e),I(),new Promise(function(S,O){var A;if(!(A=e.exifOrientation))return vh(r).then((function(T){try{return A=T,B.call(this)}catch(L){return O(L)}}).bind(this),O);function B(){return S(A)}return B.call(this)}).then((function(S){try{return f=S,I(),Po().then((function(O){try{return u=O?c:bh(c,f),I(),p=e.initialQuality||1,h=e.fileType||r.type,sc(u,h,r.name,r.lastModified,p).then((function(A){try{{let T=function(){if(s--&&(D>o||D>y)){let Y,X;return Y=j?.95*W.width:W.width,X=j?.95*W.height:W.height,[z,k]=bc(Y,X),k.drawImage(W,0,0,Y,X),p*=h==="image/png"?.85:.95,sc(z,h,r.name,r.lastModified,p).then(function(ae){try{return C=ae,ki(W),W=z,D=C.size,P(Math.min(99,Math.floor((E-D)/(E-o)*100))),T}catch(Q){return i(Q)}},i)}return[1]},L=function(){return ki(W),ki(z),ki(c),ki(u),ki(l),P(100),n(C)};if(m=A,I(),v=m.size>o,b=m.size>r.size,!v&&!b)return P(100),n(m);var B;return y=r.size,E=m.size,D=E,W=u,j=!e.alwaysKeepResolution&&v,(B=(function(Y){for(;Y;){if(Y.then)return void Y.then(B,i);try{if(Y.pop){if(Y.length)return Y.pop()?L.call(this):Y;Y=T}else Y=Y.call(this)}catch(X){return i(X)}}}).bind(this))(T)}}catch(T){return i(T)}}).bind(this),i)}catch(A){return i(A)}}).bind(this),i)}catch(O){return i(O)}}).bind(this),i)}catch(S){return i(S)}}).bind(this),i)})}const ty=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let uf;function ry(r,e){return new Promise((t,n)=>{uf||(uf=function(s){const o=[];return o.push(s),URL.createObjectURL(new Blob(o))}(ty));const i=new Worker(uf);i.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return n(new Error(s.data.error)),void i.terminate();t(s.data.file),i.terminate()}else e.onProgress(s.data.progress)}),i.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",()=>{n(e.signal.reason),i.terminate()}),i.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function un(r,e){return new Promise(function(t,n){let i,a,s,o,l,c;if(i={...e},s=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=h=>{s=h,typeof o=="function"&&o(s)},!(r instanceof Blob||r instanceof ey))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return i0(r,i).then((function(h){try{return a=h,p.call(this)}catch(m){return n(m)}}).bind(this),n);var f=(function(){try{return p.call(this)}catch(h){return n(h)}}).bind(this),u=function(h){try{return i0(r,i).then(function(m){try{return a=m,f()}catch(v){return n(v)}},n)}catch(m){return n(m)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ry(r,i).then(function(h){try{return a=h,f()}catch{return u()}},u)}catch{u()}function p(){try{a.name=r.name,a.lastModified=r.lastModified}catch{}try{i.preserveExif&&r.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===r.type)&&(a=fh(r,a))}catch{}return t(a)}})}un.getDataUrlFromFile=ph,un.getFilefromDataUrl=jd,un.loadImage=gh,un.drawImageInCanvas=xh,un.drawFileInCanvas=oc,un.canvasToFile=sc,un.getExifOrientation=vh,un.handleMaxWidthOrHeight=yh,un.followExifOrientation=bh,un.cleanupCanvasMemory=ki,un.isAutoOrientationInBrowser=Po,un.approximateBelowMaximumCanvasSizeOfBrowser=mh,un.copyExifWithoutOrientation=fh,un.getBrowserName=no,un.version="2.0.2";const Bs=r=>r.images&&Array.isArray(r.images)?{...r,images:r.images.filter(e=>e&&e.trim()),primaryImage:r.images[0]||null}:r.imageUrl&&r.imageUrl.trim()?{...r,images:[r.imageUrl],primaryImage:r.imageUrl}:{...r,images:[],primaryImage:null},ny=r=>Bs(r).primaryImage,wh=r=>Bs(r).images,iy=async(r,e,t,n,i)=>{try{console.log("ðŸ”„ ×ž×ª×—×™×œ migration ×©×œ ×ž×•×¦×¨×™× ×§×™×™×ž×™×...");const a=await n(i(r,"items")),s=[];a.docs.forEach(o=>{const l=o.data();l.images&&Array.isArray(l.images)||l.imageUrl&&l.imageUrl.trim()&&s.push({id:o.id,images:[l.imageUrl]})}),console.log(`ðŸ“Š × ×ž×¦××• ${s.length} ×ž×•×¦×¨×™× ×œ×¢×“×›×•×Ÿ`);for(const o of s)await e(t(r,"items",o.id),{images:o.images}),console.log(`âœ… ×¢×•×“×›×Ÿ ×ž×•×¦×¨: ${o.id}`);return console.log("ðŸŽ‰ Migration ×”×•×©×œ× ×‘×”×¦×œ×—×”!"),{success:!0,updatedCount:s.length}}catch(a){return console.error("âŒ ×©×’×™××” ×‘-migration:",a),{success:!1,error:a.message}}},Fs=({item:r,width:e="100%",height:t="200px",showNavigation:n=!0,className:i="",style:a={},borderRadius:s="8px"})=>{const o=wh(r),[l,c]=oe.useState(0),[f,u]=oe.useState(!1),[p,h]=oe.useState(!1);if(oe.useEffect(()=>{const y=()=>{const E=window.innerWidth<=768,D=window.location.pathname.includes("/management")||document.querySelector(".product-card-mobile")!==null||i.includes("management")||a.managementMode===!0;u(E),h(D)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[i,a]),o.length===0)return d.jsx("div",{style:{width:e,height:t,borderRadius:s,border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",...a},className:i,children:d.jsx("img",{src:"/no-image-available.png",alt:"××™×Ÿ ×ª×ž×•× ×” ×–×ž×™× ×”",style:{maxWidth:"80%",maxHeight:"80%",objectFit:"contain",opacity:.5}})});if(o.length===1)return d.jsx("div",{style:{width:e,height:t,borderRadius:s,overflow:"hidden",position:"relative",...a},className:i,children:d.jsx("img",{src:o[0],alt:r.name||"×ª×ž×•× ×ª ×ž×•×¦×¨",style:{width:"100%",height:"100%",objectFit:"contain",background:"white"}})});const m=()=>{c(y=>(y+1)%o.length)},v=()=>{c(y=>(y-1+o.length)%o.length)},b=y=>{c(y)};return d.jsxs("div",{style:{width:e,height:t,borderRadius:s,overflow:"hidden",position:"relative",background:"#f3f4f6",...a},className:i,children:[d.jsx("img",{src:o[l],alt:`${r.name||"×ž×•×¦×¨"} - ×ª×ž×•× ×” ${l+1}`,style:{width:"100%",height:"100%",objectFit:"contain",transition:"opacity 0.3s ease",background:"white"}}),o.length>1&&d.jsx(d.Fragment,{children:f&&p?d.jsx("button",{onClick:m,style:{position:"absolute",right:"8px",bottom:"8px",background:"rgba(255, 255, 255, 0.9)",color:"#333",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},"aria-label":"×ª×ž×•× ×” ×”×‘××”",children:"â€º"}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:v,style:{position:"absolute",left:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:y=>{y.currentTarget.style.background="rgba(0, 0, 0, 0.9)",y.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:y=>{y.currentTarget.style.background="rgba(0, 0, 0, 0.7)",y.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"×ª×ž×•× ×” ×§×•×“×ž×ª",children:d.jsx(Hs,{size:20})}),d.jsx("button",{onClick:m,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:y=>{y.currentTarget.style.background="rgba(0, 0, 0, 0.9)",y.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:y=>{y.currentTarget.style.background="rgba(0, 0, 0, 0.7)",y.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"×ª×ž×•× ×” ×”×‘××”",children:d.jsx(Ws,{size:20})})]})}),!(f&&p)&&o.length>1&&o.length<=5&&d.jsx("div",{style:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"6px",zIndex:10},children:o.map((y,E)=>d.jsx("button",{onClick:()=>b(E),style:{width:"8px",height:"8px",borderRadius:"50%",border:"none",background:E===l?"white":"rgba(255, 255, 255, 0.5)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":`×ª×ž×•× ×” ${E+1}`},E))}),!(f&&p)&&o.length>5&&d.jsxs("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"bold",zIndex:10},children:[l+1," / ",o.length]}),f&&p&&o.length>1&&d.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5},onTouchStart:y=>{const E=y.touches[0];y.currentTarget.startX=E.clientX},onTouchEnd:y=>{const E=y.changedTouches[0];if(!y.currentTarget.startX)return;const D=y.currentTarget.startX-E.clientX;Math.abs(D)>50&&(D>0?m():v())}}),f&&p&&o.length>1&&d.jsxs("div",{style:{position:"absolute",bottom:"2px",right:"2px",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"1px 4px",borderRadius:"4px",fontSize:"8px",zIndex:10},children:[l+1,"/",o.length]}),d.jsx("div",{tabIndex:0,onKeyDown:y=>{y.key==="ArrowRight"&&m(),y.key==="ArrowLeft"&&v()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",outline:"none"},"aria-label":"×’×œ×¨×™×™×ª ×ª×ž×•× ×•×ª - ×”×©×ª×ž×© ×‘×—×¦×™× ×œ× ×™×•×•×˜"})]})},ay=async r=>{const e="https://api.cloudinary.com/v1_1/dcydl9rz8/image/upload",t=new FormData;return t.append("file",r),t.append("upload_preset","GmachMedia"),(await(await fetch(e,{method:"POST",body:t})).json()).secure_url},oy=({editingItem:r,name:e,quantity:t,imageUrl:n,imageFile:i,onNameChange:a,onQuantityChange:s,onImageUrlChange:o,onImageFileChange:l,onCancel:c,onSubmit:f,publicComment:u,internalComment:p,onPublicCommentChange:h,onInternalCommentChange:m})=>{const v=oe.useRef(null),[b,y]=oe.useState([]),[E,D]=oe.useState(!1);oe.useEffect(()=>{if(r){const P=wh(r);y(P.map((N,S)=>({id:Date.now()+S,url:N,isUploaded:!0})))}else y([])},[r]),oe.useEffect(()=>{const P=S=>{v.current&&!v.current.contains(S.target)&&c()},N=S=>{S.key==="Escape"&&c()};return document.addEventListener("mousedown",P),document.addEventListener("keydown",N),()=>{document.removeEventListener("mousedown",P),document.removeEventListener("keydown",N)}},[c]);const C=()=>{if(n&&n.trim()){const P={id:Date.now(),url:n.trim(),isUploaded:!0};y(N=>[...N,P]),o({target:{value:""}})}},z=async P=>{if(P){D(!0);try{const N=await un(P,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0}),S=await ay(N),O={id:Date.now(),url:S,isUploaded:!0};y(A=>[...A,O]),hi.success("×”×ª×ž×•× ×” ×”×•×¢×œ×ª×” ×‘×”×¦×œ×—×”!")}catch(N){hi.error("×©×’×™××” ×‘×”×¢×œ××ª ×”×ª×ž×•× ×”: "+N.message)}finally{D(!1)}}},k=P=>{y(N=>N.filter(S=>S.id!==P))},W=P=>{P!==0&&y(N=>{const S=[...N];return[S[P-1],S[P]]=[S[P],S[P-1]],S})},j=P=>{P!==b.length-1&&y(N=>{const S=[...N];return[S[P],S[P+1]]=[S[P+1],S[P]],S})},I=async P=>{P.preventDefault();const N=b.map(O=>O.url);N[0];const S={name:e,quantity:t,publicComment:u,internalComment:p,images:N,imageUrl:N[0]||null};await f(P,S)};return d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,direction:"ltr",padding:"1rem"},children:d.jsxs("div",{ref:v,style:{position:"relative",background:"white",padding:"2rem",borderRadius:"12px",width:"95%",maxWidth:"600px",direction:"rtl",textAlign:"initial",maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[d.jsx("button",{onClick:c,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",lineHeight:1,color:"#666",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"×¡×’×•×¨",children:"Ã—"}),d.jsx("h3",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",color:"#333"},children:r?"×¢×¨×™×›×ª ×ž×•×¦×¨":"×”×•×¡×¤×ª ×ž×•×¦×¨ ×—×“×©"}),d.jsxs("form",{onSubmit:I,children:[d.jsxs("div",{style:Cs,children:[d.jsx("label",{style:Is,children:"×©× ×”×ž×•×¦×¨:"}),d.jsx("input",{dir:"rtl",type:"text",value:e,onChange:a,required:!0,style:No})]}),d.jsxs("div",{style:Cs,children:[d.jsx("label",{style:Is,children:"×›×ž×•×ª:"}),d.jsx("input",{dir:"rtl",type:"number",value:t,onChange:s,required:!0,style:No})]}),d.jsxs("div",{style:Cs,children:[d.jsx("label",{style:Is,children:"×”×¢×¨×” ×œ×¤×¨×¡×•× (×—×™×¦×•× ×™×ª):"}),d.jsx("input",{dir:"rtl",type:"text",value:u,onChange:h,style:No})]}),d.jsxs("div",{style:Cs,children:[d.jsx("label",{style:Is,children:"×”×¢×¨×” ×¤× ×™×ž×™×ª:"}),d.jsx("input",{dir:"rtl",type:"text",value:p,onChange:m,style:No})]}),d.jsxs("div",{style:Cs,children:[d.jsx("label",{style:Is,children:"×ª×ž×•× ×•×ª ×”×ž×•×¦×¨:"}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[d.jsx("input",{dir:"rtl",type:"text",value:n,onChange:o,placeholder:"×”×“×‘×§ ×›×ª×•×‘×ª ×ª×ž×•× ×” (URL)",style:{...No,flex:1,margin:0}}),d.jsx("button",{type:"button",onClick:C,disabled:!n.trim(),style:{padding:"8px 12px",backgroundColor:n.trim()?"#1976d2":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:n.trim()?"pointer":"not-allowed",whiteSpace:"nowrap"},children:"×”×•×¡×£"})]}),d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsx("input",{type:"file",accept:"image/*",onChange:P=>{const N=P.target.files[0];N&&(z(N),P.target.value="")},style:{...No,padding:"8px"},disabled:E}),E&&d.jsx("div",{style:{fontSize:"0.875rem",color:"#1976d2",marginTop:"0.5rem"},children:"×ž×¢×œ×” ×ª×ž×•× ×”..."})]}),b.length>0&&d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsxs("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:["×ª×ž×•× ×•×ª (",b.length,")"]}),d.jsx("div",{style:{marginBottom:"1rem"},children:d.jsx(Fs,{item:{images:b.map(P=>P.url)},width:"100%",height:"200px",showNavigation:!0})}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:b.map((P,N)=>d.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"0.5rem",background:"#f9fafb",position:"relative"},children:[d.jsx("img",{src:P.url,alt:`×ª×ž×•× ×” ${N+1}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"4px",marginBottom:"0.5rem"}}),d.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:N+1}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.25rem"},children:[d.jsx("button",{type:"button",onClick:()=>W(N),disabled:N===0,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:N===0?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:N===0?"not-allowed":"pointer",flex:1},children:"â†‘"}),d.jsx("button",{type:"button",onClick:()=>j(N),disabled:N===b.length-1,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:N===b.length-1?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:N===b.length-1?"not-allowed":"pointer",flex:1},children:"â†“"}),d.jsx("button",{type:"button",onClick:()=>k(P.id),style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",flex:1},children:"âœ•"})]})]},P.id))})]})]}),d.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem",flexWrap:"wrap"},children:[d.jsx("button",{type:"submit",disabled:E,style:{...sy,minWidth:"120px",opacity:E?.6:1,cursor:E?"not-allowed":"pointer"},children:E?"×ž×¢×œ×”...":r?"×©×ž×•×¨ ×©×™× ×•×™×™×":"×”×•×¡×£ ×ž×•×¦×¨"}),d.jsx("button",{type:"button",onClick:c,disabled:E,style:{...ly,minWidth:"120px",opacity:E?.6:1,cursor:E?"not-allowed":"pointer"},children:"×‘×™×˜×•×œ"})]})]})]})})},Cs={marginBottom:"1.5rem",width:"100%"},Is={display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"1rem"},No={width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"16px",boxSizing:"border-box",transition:"border-color 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none"},sy={padding:"12px 20px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},ly={padding:"12px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},cy=({item:r,onClose:e})=>{const[t,n]=oe.useState([]),[i,a]=oe.useState(!0);oe.useEffect(()=>{if(!r)return;(async()=>{a(!0);try{console.log("ðŸ” ×ž×—×¤×© ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª ×¢×‘×•×¨ ×ž×•×¦×¨:",r.name,"ID:",r.id);const c=(await Mt(vt(We,"orders"))).docs.map(p=>({id:p.id,...p.data()})).filter(p=>p.status==="open");console.log("ðŸ“‹ ×›×œ ×”×”×–×ž× ×•×ª ×”×¤×¢×™×œ×•×ª:",c.length);const f=c.filter(p=>{var m;return(m=p.items)==null?void 0:m.some(v=>v.id===r.id||v.ItemId===r.ItemId)});console.log("ðŸŽ¯ ×”×–×ž× ×•×ª ×©×ž×›×™×œ×•×ª ××ª ×”×ž×•×¦×¨:",f.length);const u=f.map(p=>{const h=p.items.find(m=>m.id===r.id||m.ItemId===r.ItemId);return{...p,itemQuantity:(h==null?void 0:h.quantity)||0}});u.sort((p,h)=>{var b,y;const m=((b=p.createdAt)==null?void 0:b.seconds)||0;return(((y=h.createdAt)==null?void 0:y.seconds)||0)-m}),n(u)}catch(l){console.error("âŒ ×©×’×™××” ×‘×©×œ×™×¤×ª ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª:",l)}finally{a(!1)}})()},[r]);const s=o=>{if(!o)return"×œ× ×¦×•×™×Ÿ";let l;return o.seconds?l=new Date(o.seconds*1e3):typeof o=="string"?l=new Date(o):l=o,isNaN(l.getTime())?"×ª××¨×™×š ×œ× ×ª×§×™×Ÿ":l.toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"})};return r?d.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1500,padding:"1rem"},onClick:o=>{o.target===o.currentTarget&&e()},children:[d.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"12px",width:"95%",maxWidth:"800px",maxHeight:"85vh",overflowY:"auto",padding:"0",direction:"rtl",boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},onClick:o=>o.stopPropagation(),children:[d.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1.5rem",borderRadius:"12px 12px 0 0",position:"relative"},children:[d.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",left:"1rem",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",color:"white",fontSize:"1.2rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:o=>{o.target.style.background="rgba(255,255,255,0.3)"},onMouseLeave:o=>{o.target.style.background="rgba(255,255,255,0.2)"},children:d.jsx(b2,{})}),d.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",textAlign:"center",paddingRight:"3rem"},children:['ðŸ“‹ ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª ×¢×‘×•×¨ "',r.name,'"']}),d.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,textAlign:"center",fontSize:"0.95rem"},children:["×ž×–×”×” ×ž×•×¦×¨: ",r.ItemId]})]}),d.jsx("div",{style:{padding:"1.5rem"},children:i?d.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[d.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #f3f3f3",borderTop:"3px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"×˜×•×¢×Ÿ ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª..."]}):t.length===0?d.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[d.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",color:"#ddd"},children:"ðŸ“„"}),d.jsx("h3",{style:{color:"#666",marginBottom:"0.5rem"},children:"×œ× × ×ž×¦××• ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª"}),d.jsx("p",{style:{color:"#999",margin:0},children:"×”×ž×•×¦×¨ ×”×–×” ×›×¨×’×¢ ×œ× × ×ž×¦× ×‘××£ ×”×–×ž× ×” ×¤×¢×™×œ×”"})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center",border:"1px solid #e9ecef"},children:d.jsxs("p",{style:{margin:0,color:"#495057",fontSize:"1rem",fontWeight:"500"},children:["ðŸ“Š × ×ž×¦× ×‘-",t.length," ×”×–×ž× ",t.length===1?"×”":"×•×ª"," ×¤×¢×™×œ",t.length===1?"×”":"×•×ª",d.jsx("br",{}),d.jsxs("span",{style:{fontSize:"0.9rem",color:"#6c757d"},children:['×¡×”"×› ×›×ž×•×ª ×ž×•×©××œ×ª: ',t.reduce((o,l)=>o+l.itemQuantity,0)]})]})}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:window.innerWidth<=768?"0 0.5rem":"0"},children:t.map((o,l)=>d.jsxs("div",{style:{border:"1px solid #e9ecef",borderRadius:"10px",padding:"1.25rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:c=>{c.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",c.currentTarget.style.transform="translateY(0)"},children:[d.jsxs("div",{style:{position:"absolute",top:"0.75rem",left:"0.75rem",background:"#667eea",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold"},children:["#",o.simpleId||o.id.slice(0,6)]}),d.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem",marginBottom:"1rem"},children:d.jsx("div",{style:{background:"#28a745",color:"white",padding:window.innerWidth<=768?"0.3rem 0.6rem":"0.4rem 0.8rem",borderRadius:"15px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold",textAlign:"center",lineHeight:"1.2",wordBreak:"break-word",maxWidth:window.innerWidth<=768?"180px":"220px",margin:"0 auto",display:"inline-block"},children:window.innerWidth<=768?d.jsxs(d.Fragment,{children:["×›×ž×•×ª: ",o.itemQuantity]}):d.jsxs(d.Fragment,{children:["×ž×•×¦×¨: ",r.name,d.jsx("br",{}),"×›×ž×•×ª: ",o.itemQuantity]})})}),d.jsxs("div",{style:{marginBottom:"1rem",textAlign:"center"},children:[d.jsxs("h4",{style:{margin:"0 0 0.75rem 0",color:"#333",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[d.jsx(wu,{color:"#667eea"}),o.clientName]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"#555"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(w2,{color:"#28a745",size:14}),d.jsx("span",{children:o.phone})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(A2,{color:"#dc3545",size:14}),d.jsx("span",{children:o.address})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(wu,{color:"#6c757d",size:14}),d.jsxs("span",{children:["×ž×ª× ×“×‘×ª: ",o.volunteerName]})]})]})]}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"0.75rem",borderRadius:"6px",border:"1px solid #e9ecef",textAlign:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500",color:"#495057"},children:[d.jsx(S2,{color:"#667eea",size:14}),"×ª××¨×™×›×™ ×”×©××œ×”"]}),d.jsxs("div",{style:{fontSize:"0.85rem",color:"#6c757d",lineHeight:"1.4"},children:[d.jsxs("div",{children:["ðŸ“¤ ×œ×§×™×—×”: ",s(o.pickupDate)]}),d.jsxs("div",{children:["ðŸŽ‰ ××™×¨×•×¢: ",s(o.eventDate)]}),d.jsxs("div",{children:["ðŸ“¥ ×”×—×–×¨×”: ",s(o.returnDate)]}),o.eventType&&d.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:"500",color:"#495057"},children:["ðŸŽŠ ×¡×•×’ ××™×¨×•×¢: ",o.eventType]})]})]})]},o.id))})]})}),d.jsx("div",{style:{background:"#f8f9fa",padding:"1rem 1.5rem",borderRadius:"0 0 12px 12px",borderTop:"1px solid #e9ecef",textAlign:"center"},children:d.jsx("button",{onClick:e,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"25px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:o=>{o.target.style.transform="translateY(-1px)",o.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)"},onMouseLeave:o=>{o.target.style.transform="translateY(0)",o.target.style.boxShadow="none"},children:"×¡×’×•×¨"})})]}),d.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):null},a0=({currentPage:r,totalItems:e,itemsPerPage:t,onPageChange:n,className:i=""})=>{const a=Math.ceil(e/t),s=window.innerWidth<=768;if(a<=1)return null;const l=(()=>{const u=s?5:7,p=Math.floor(u/2);let h=Math.max(1,r-p),m=Math.min(a,h+u-1);m-h+1<u&&(h=Math.max(1,m-u+1));const v=[];h>1&&(v.push(1),h>2&&v.push("..."));for(let b=h;b<=m;b++)v.push(b);return m<a&&(m<a-1&&v.push("..."),v.push(a)),v})(),c=(r-1)*t+1,f=Math.min(r*t,e);return d.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[d.jsxs("div",{style:{fontSize:s?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["×ž×¦×™×’ ",c,"-",f," ×ž×ª×•×š ",e," ×ž×•×¦×¨×™×"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[d.jsx("button",{onClick:()=>n(r-1),disabled:r===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===1?"#f9fafb":"white",color:r===1?"#9ca3af":"#374151",cursor:r===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:d.jsx(Ws,{size:s?16:20})}),l.map((u,p)=>{if(u==="...")return d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",color:"#9ca3af"},children:d.jsx(md,{size:s?16:20})},`dots-${p}`);const h=u===r;return d.jsx("button",{onClick:()=>n(u),style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:h?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:h?"#3b82f6":"white",color:h?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:h?"bold":"normal",fontSize:s?"14px":"16px"},children:u},u)}),d.jsx("button",{onClick:()=>n(r+1),disabled:r===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===a?"#f9fafb":"white",color:r===a?"#9ca3af":"#374151",cursor:r===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:d.jsx(Hs,{size:s?16:20})})]})]})},fy=()=>{const[r,e]=oe.useState(""),[t,n]=oe.useState(""),[i,a]=oe.useState([]),[s,o]=oe.useState([]),[l,c]=oe.useState(""),[f,u]=oe.useState(""),[p,h]=oe.useState(null),[m,v]=oe.useState(""),[b,y]=oe.useState(!1),[E,D]=oe.useState(!1),[C,z]=oe.useState(null),[k,W]=oe.useState(""),[j,I]=oe.useState(""),[P,N]=oe.useState(1),[S,O]=oe.useState(1),[A,B]=oe.useState(window.innerWidth<=768),[T,L]=oe.useState(!1),[Y,X]=oe.useState(null),{user:ae}=En(),Q=(ae==null?void 0:ae.username)||"×ž×©×ª×ž×© ×œ× ×™×“×•×¢",M=oe.useRef(null),F=A?12:20,U=A?12:20;oe.useEffect(()=>{const fe=()=>{const Le=window.innerWidth<=768;Le!==A&&(B(Le),N(1),O(1))};return window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)},[A]),oe.useEffect(()=>{N(1)},[l]),oe.useEffect(()=>{O(1)},[f]),oe.useEffect(()=>{const fe=document.createElement("style");return fe.innerHTML=`
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] { -moz-appearance: textfield; }
      
      /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª ×ž×©×•×¤×¨×ª */
      .products-grid-mobile {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.2rem;
        padding: 0;
      }
      
      .product-card-mobile {
        min-height: 380px;
        padding: 1rem;
      }
      
      .product-card-mobile img {
        height: 140px;
      }
      
      .product-card-mobile h3 {
        font-size: 1rem;
        margin: 0.5rem 0;
      }
      
      .product-card-mobile p {
        font-size: 0.875rem;
        margin: 0.25rem 0;
      }
      
      .product-card-mobile .button-group {
        flex-direction: row;
        gap: 0.5rem;
        width: 100%;
      }
      
      .product-card-mobile button {
        font-size: 0.8rem;
        padding: 6px 10px;
        flex: 1;
      }
      
      /* ×ž×•×‘×™×™×œ ×‘×œ×‘×“ */
      @media (max-width: 768px) {
        .products-grid-mobile {
          grid-template-columns: 1fr 1fr !important;
          gap: 0.75rem !important;
          padding: 0 0.5rem;
        }
        
        .product-card-mobile {
          min-height: 320px !important;
          padding: 0.75rem !important;
        }
        
        .product-card-mobile img {
          height: 100px !important;
        }
        
        .product-card-mobile h3 {
          font-size: 0.9rem !important;
          margin: 0.5rem 0 !important;
        }
        
        .product-card-mobile p {
          font-size: 0.8rem !important;
          margin: 0.25rem 0 !important;
        }
        
        .product-card-mobile .button-group {
          flex-direction: column !important;
          gap: 0.3rem !important;
        }
        
        .product-card-mobile button {
          font-size: 0.75rem !important;
          padding: 4px 8px !important;
          width: 100% !important;
        }
      }
    `,document.head.appendChild(fe),()=>document.head.removeChild(fe)},[]);const V=async()=>{const Le=(await Mt(vt(We,"orders"))).docs.map(Oe=>Oe.data()).filter(Oe=>Oe.status==="open"),Ie=new Set;Le.forEach(Oe=>{var rt;(rt=Oe.items)==null||rt.forEach(Qe=>{Ie.add(Qe.id)})});const Me=(await Mt(vt(We,"items"))).docs.filter(Oe=>Oe.data().isDeleted!==!0).map(Oe=>{const rt=Oe.data(),Qe=Bs(rt);return{id:Oe.id,...Qe,inUse:Ie.has(Oe.id)}});a(Me)},te=async()=>{const Le=(await Mt(vt(We,"deletedItems"))).docs.map(Ie=>{const Ue=Ie.data();return{id:Ie.id,...Bs(Ue)}});o(Le)};oe.useEffect(()=>{const fe=async()=>{try{console.log("ðŸ”„ ×‘×“×™×§×ª migration ×œ×ž×‘× ×” ×ª×ž×•× ×•×ª ×—×“×©...");const Ie=await iy(We,zr,zt,Mt,vt);console.log("ðŸ“Š ×ª×•×¦××•×ª migration:",Ie)}catch{console.log("âš ï¸ Migration ×›×‘×¨ ×¨×¥ ××• ×©××™×Ÿ ×¦×•×¨×š ×‘×•")}};localStorage.getItem("imagesMigrationComplete")?(V(),te()):fe().then(()=>{localStorage.setItem("imagesMigrationComplete","true"),V(),te()})},[]),oe.useEffect(()=>{const fe=Ie=>{E&&M.current&&!M.current.contains(Ie.target)&&D(!1)},Le=Ie=>{Ie.key==="Escape"&&D(!1)};return document.addEventListener("mousedown",fe),document.addEventListener("keydown",Le),()=>{document.removeEventListener("mousedown",fe),document.removeEventListener("keydown",Le)}},[E]);const le=i.filter(fe=>fe.name.toLowerCase().includes(l.toLowerCase())),he=s.filter(fe=>fe.name.toLowerCase().includes(f.toLowerCase())),pe=(P-1)*F,de=pe+F,be=le.slice(pe,de),Ee=(S-1)*U,Re=Ee+U,Fe=he.slice(Ee,Re),Z=fe=>{console.log("ðŸ” ×¤×•×ª×— ×ž×•×“×œ ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª ×¢×‘×•×¨:",fe.name),X(fe),L(!0)},je=async fe=>{if(window.confirm("×”×× ××ª/×” ×‘×˜×•×—/×” ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×ž×•×¦×¨?"))try{await cv(fe,Q),hi.success("×”×ž×•×¦×¨ ×”×•×¡×¨ ×ž×”×¨×©×™×ž×”."),V(),te();const Le=le.length-1,Ie=Math.ceil(Le/F);P>Ie&&Ie>0&&N(Ie)}catch{hi.error("×©×’×™××” ×‘×ž×—×™×§×ª ×”×ž×•×¦×¨")}},He=async fe=>{if(window.confirm("×”×× ×‘×¨×¦×•× ×š ×œ×”×©×™×‘ ××ª ×”×ž×•×¦×¨ ×œ×ž×œ××™?"))try{await fv(fe,Q),hi.success("×”×ž×•×¦×¨ ×”×•×©×‘ ×œ×ž×œ××™ ×‘×”×¦×œ×—×”."),V(),te();const Le=he.length-1,Ie=Math.ceil(Le/U);S>Ie&&Ie>0&&O(Ie)}catch{hi.error("×©×’×™××” ×‘×”×—×–×¨×ª ×”×ž×•×¦×¨")}},Te=async(fe,Le=null)=>{var Ie,Ue,Me;fe.preventDefault();try{const Oe=Le||{name:r,quantity:parseInt(t),images:m?[m]:[],imageUrl:m,publicComment:k,internalComment:j},rt=mi(vt(We,"items"),ia("name","==",Oe.name.trim())),Qe=await Mt(rt),it=(await Mt(vt(We,"items"))).docs.map(Ve=>Ve.data().ItemId).filter(Ve=>typeof Ve=="number").sort((Ve,ze)=>ze-Ve),qe=it.length>0?it[0]+1:1;if(C)await zr(zt(We,"items",C.id),{name:Oe.name,quantity:parseInt(Oe.quantity),images:Oe.images||[],imageUrl:((Ie=Oe.images)==null?void 0:Ie[0])||null,publicComment:Oe.publicComment||"",internalComment:Oe.internalComment||"",updatedBy:Q,updatedAt:tr()}),hi.success("×”×ž×•×¦×¨ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”");else if(Qe.empty)await lo(vt(We,"items"),{name:Oe.name,quantity:parseInt(Oe.quantity),images:Oe.images||[],imageUrl:((Ue=Oe.images)==null?void 0:Ue[0])||null,publicComment:Oe.publicComment||"",internalComment:Oe.internalComment||"",createdBy:Q,updatedBy:Q,createdAt:tr(),updatedAt:tr(),ItemId:qe}),hi.success(`×”×ž×•×¦×¨ "${Oe.name}" × ×•×¡×£ ×‘×”×¦×œ×—×” ×¢× ${((Me=Oe.images)==null?void 0:Me.length)||0} ×ª×ž×•× ×•×ª`);else{const Ve=Qe.docs[0].data();D2.confirmAlert({title:"×”×ž×•×¦×¨ ×›×‘×¨ ×§×™×™×",message:`×”×ž×•×¦×¨ "${Oe.name}" ×›×‘×¨ ×§×™×™× ×‘×›×ž×•×ª ${Ve.quantity}.
×”×× ×œ×”×•×¡×™×£ ${Oe.quantity}?`,buttons:[{label:"×›×Ÿ",onClick:async()=>{var ze;await lo(vt(We,"items"),{name:Oe.name,quantity:parseInt(Oe.quantity),images:Oe.images||[],imageUrl:((ze=Oe.images)==null?void 0:ze[0])||null,publicComment:Oe.publicComment||"",internalComment:Oe.internalComment||"",createdBy:Q,updatedBy:Q,createdAt:tr(),updatedAt:tr(),ItemId:qe}),hi.success("×”×›×ž×•×ª ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”"),V(),te()}},{label:"×œ×",onClick:()=>hi.info("×‘×•×˜×œ")}]});return}e(""),n(""),h(null),v(""),W(""),I(""),y(!1),z(null),V(),te()}catch(Oe){console.error("×©×’×™××” ×‘×”×•×¡×¤×ª ×”×ž×•×¦×¨:",Oe),hi.error("×”×•×¡×¤×ª ×”×ž×•×¦×¨ × ×›×©×œ×”")}};return d.jsxs("div",{className:"page-container",style:{padding:"1rem",direction:"rtl"},children:[d.jsxs("div",{style:{width:"100%"},children:[d.jsx("h2",{children:"× ×™×”×•×œ ×ž×•×¦×¨×™×"}),d.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[d.jsxs("button",{onClick:()=>{z(null),e(""),n(""),v(""),h(null),y(!0),W(""),I("")},className:"btn-primary",style:{backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[d.jsx(_2,{size:14})," ×”×•×¡×¤×ª ×ž×•×¦×¨"]}),d.jsxs("button",{onClick:()=>D(!0),className:"btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[d.jsx(Au,{size:14})," ×ž×•×¦×¨×™× ×©× ×ž×—×§×•"]})]}),d.jsx("input",{type:"text",dir:"rtl",placeholder:"×—×™×¤×•×© ×ž×•×¦×¨...",value:l,onChange:fe=>c(fe.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",marginBottom:"1rem",boxSizing:"border-box"}}),l&&d.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9"},children:d.jsxs("p",{style:{margin:0,color:"#0369a1"},children:["ðŸ” × ×ž×¦××• ",le.length,' ×ž×•×¦×¨×™× ×¢×‘×•×¨ "',l,'"']})}),d.jsx("div",{className:"products-grid-mobile",children:be.length===0?d.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:l?`×œ× × ×ž×¦××• ×ž×•×¦×¨×™× ×œ×—×™×¤×•×© "${l}"`:"×œ× × ×ž×¦× ×ž×•×¦×¨×™× ×‘×ž×œ××™."}):be.map(fe=>d.jsxs("div",{className:"product-card product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",transition:"transform 0.2s",boxSizing:"border-box"},children:[d.jsx(Fs,{item:fe,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),d.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1rem"},children:fe.name}),d.jsxs("p",{style:{margin:"0.25rem 0"},children:["×›×ž×•×ª: ",fe.quantity]}),fe.internalComment&&d.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"0.25rem",margin:"0.25rem 0"},children:["ðŸ“Œ ",fe.internalComment]}),d.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",margin:"0.25rem 0"},children:["×ž×–×”×” ×ž×•×¦×¨: ",fe.ItemId]}),fe.inUse&&d.jsx("p",{style:{color:"#d97706",fontWeight:"bold",fontSize:"0.85rem",margin:"0.25rem 0"},children:"ðŸ• ×ž×•×¦×¨ ×–×” × ×ž×¦× ×‘×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª"}),d.jsxs("div",{className:"button-group",style:{display:"flex",gap:"0.4rem",marginTop:"auto",width:"100%",flexDirection:"column"},children:[fe.inUse&&d.jsxs("button",{onClick:()=>Z(fe),style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:A?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:A?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",width:"100%",minHeight:A?"28px":"32px"},children:[d.jsx(C2,{size:A?12:14})," ×¨××” ×”×–×ž× ×•×ª"]}),d.jsxs("div",{style:{display:"flex",gap:"0.4rem",width:"100%"},children:[d.jsxs("button",{onClick:()=>{z(fe),e(fe.name),n(fe.quantity.toString()),v(ny(fe)||""),h(null),y(!0),W(fe.publicComment||""),I(fe.internalComment||"")},style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:A?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:A?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:A?"28px":"32px"},children:[d.jsx(I2,{size:A?12:14})," ×¢×¨×™×›×”"]}),d.jsxs("button",{onClick:()=>je(fe.id),style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:A?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:A?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:A?"28px":"32px"},children:[d.jsx(Au,{size:A?12:14})," ×ž×—×™×§×”"]})]})]})]},fe.id))}),d.jsx(a0,{currentPage:P,totalItems:le.length,itemsPerPage:F,onPageChange:N})]}),E&&d.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},children:d.jsxs("div",{className:"modal-content",ref:M,style:{position:"relative",backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80%",overflowY:"auto",padding:"2rem",direction:"rtl"},children:[d.jsx("h2",{children:"×ž×•×¦×¨×™× ×©× ×ž×—×§×•"}),d.jsx("button",{onClick:()=>D(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"Ã—"}),d.jsx("input",{type:"text",dir:"rtl",placeholder:"×—×™×¤×•×© ×ž×•×¦×¨×™× ×©× ×ž×—×§×•...",value:f,onChange:fe=>u(fe.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",margin:"1rem 0",boxSizing:"border-box"}}),f&&d.jsx("div",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fca5a5"},children:d.jsxs("p",{style:{margin:0,color:"#dc2626"},children:["ðŸ” × ×ž×¦××• ",he.length,' ×ž×•×¦×¨×™× ×©× ×ž×—×§×• ×¢×‘×•×¨ "',f,'"']})}),d.jsx("div",{className:"products-grid-mobile",children:Fe.length===0?d.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:f?`×œ× × ×ž×¦××• ×ž×•×¦×¨×™× ×©× ×ž×—×§×• ×œ×—×™×¤×•×© "${f}"`:"××™×Ÿ ×¤×¨×™×˜×™× ×©× ×ž×—×§×•."}):Fe.map(fe=>d.jsxs("div",{className:"product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",boxSizing:"border-box"},children:[d.jsx(Fs,{item:fe,width:"100%",height:"120px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),d.jsx("h3",{style:{margin:"0.5rem 0"},children:fe.name}),d.jsxs("p",{style:{margin:"0.25rem 0"},children:["×›×ž×•×ª: ",fe.quantity]}),d.jsxs("button",{onClick:()=>He(fe.id),style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",marginTop:"auto"},children:[d.jsx(E2,{size:14})," ×”×©×‘×”"]})]},fe.id))}),d.jsx(a0,{currentPage:S,totalItems:he.length,itemsPerPage:U,onPageChange:O})]})}),b&&d.jsx(oy,{editingItem:C,name:r,quantity:t,imageUrl:m,imageFile:p,publicComment:k,internalComment:j,onNameChange:fe=>e(fe.target.value.trimStart()),onQuantityChange:fe=>n(fe.target.value.trimStart()),onImageUrlChange:fe=>v(fe.target.value),onImageFileChange:fe=>h(fe.target.files[0]),onPublicCommentChange:fe=>W(fe.target.value),onInternalCommentChange:fe=>I(fe.target.value),onCancel:()=>y(!1),onSubmit:Te}),T&&d.jsx(cy,{item:Y,onClose:()=>{L(!1),X(null)}}),d.jsx(N2,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},dy=()=>{const{user:r}=En(),[e,t]=oe.useState([]),[n,i]=oe.useState(""),[a,s]=oe.useState(null);oe.useEffect(()=>{(async()=>{const h=vt(We,"users"),v=(await Mt(h)).docs.map(b=>({id:b.id,...b.data()}));t(v)})()},[]),oe.useEffect(()=>{(async()=>{try{const h=zt(We,"settings","onlineOrdering"),m=await Ho(h);m.exists()&&s(m.data().enabled)}catch(h){console.error("×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×’×“×¨×”:",h)}})()},[]);const o=async(p,h)=>{const m=zt(We,"users",p);await zr(m,{role:h}),t(e.map(v=>v.id===p?{...v,role:h}:v))},l=async()=>{try{const p=!a;await zr(zt(We,"settings","onlineOrdering"),{enabled:p}),s(p)}catch(p){alert("×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×”×’×“×¨×”: "+p.message)}},c={container:{padding:"1rem",direction:"rtl",maxWidth:"100%",overflow:"hidden"},header:{fontSize:"1.8rem",marginBottom:"2rem",textAlign:"center",color:"#333",fontWeight:"600"},toggleBox:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"2rem",backgroundColor:"#f8f9fa",padding:"16px 24px",borderRadius:"15px",border:"2px solid #e9ecef",maxWidth:"400px",margin:"0 auto 2rem auto",boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},toggleSwitch:{width:"50px",height:"28px",borderRadius:"50px",backgroundColor:a?"#4caf50":"#e74c3c",position:"relative",cursor:"pointer",transition:"0.3s",flexShrink:0},toggleCircle:{position:"absolute",top:"3px",left:a?"25px":"3px",width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"white",transition:"0.3s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},searchBox:{padding:"12px 16px",width:"100%",maxWidth:"500px",borderRadius:"10px",border:"2px solid #ddd",fontSize:"16px",marginBottom:"2rem",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s ease",display:"block",margin:"0 auto 2rem auto"},tableContainer:{overflowX:"auto",marginTop:"1rem",borderRadius:"12px",border:"1px solid #ddd",maxWidth:"1200px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},table:{width:"100%",borderCollapse:"collapse",minWidth:"600px",backgroundColor:"white"},th:{border:"1px solid #ddd",padding:"12px 8px",backgroundColor:"#f8f9fa",fontWeight:"600",fontSize:"0.9rem",textAlign:"center",whiteSpace:"nowrap"},td:{border:"1px solid #ddd",padding:"12px 8px",textAlign:"center",fontSize:"0.85rem",verticalAlign:"middle"},button:{padding:"8px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"100px",transition:"opacity 0.2s ease"},promoteBtn:{backgroundColor:"#28a745",color:"white"},demoteBtn:{backgroundColor:"#dc3545",color:"white"}};if(!r||r.role!=="MainAdmin")return d.jsx("div",{style:{padding:"2rem",textAlign:"center",direction:"rtl"},children:d.jsx("p",{children:"××™×Ÿ ×œ×š ×’×™×©×” ×œ×¢×ž×•×“ ×–×”"})});const f=e.filter(p=>p.username&&p.username.toLowerCase().includes(n.toLowerCase())),u=({user:p})=>d.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[d.jsx("h4",{style:{margin:0,color:"#333",fontSize:"1.1rem"},children:p.username}),d.jsx("span",{style:{backgroundColor:p.role==="MainAdmin"?"#6f42c1":p.role==="GmachAdmin"?"#17a2b8":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"500"},children:p.role==="User"?"×ž×©×ª×ž×© ×¨×’×™×œ":p.role==="GmachAdmin"?'×ž× ×”×œ ×’×ž"×—':p.role==="MainAdmin"?"×ž× ×”×œ ×¨××©×™":p.role})]}),d.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"0.9rem",wordBreak:"break-all"},children:["ðŸ“§ ",p.email]}),p.role!=="MainAdmin"&&d.jsx("div",{style:{marginTop:"1rem"},children:p.role==="User"?d.jsx("button",{style:{...c.button,...c.promoteBtn,width:"100%"},onClick:()=>o(p.id,"GmachAdmin"),children:'×©×“×¨×’ ×œ×ž× ×”×œ ×’×ž"×—'}):d.jsx("button",{style:{...c.button,...c.demoteBtn,width:"100%"},onClick:()=>o(p.id,"User"),children:"×”×—×–×¨ ×œ×ž×©×ª×ž×© ×¨×’×™×œ"})})]});return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-table {
              display: none !important;
            }
            .mobile-cards {
              display: block !important;
            }
            .container-mobile {
              padding: 1rem !important;
            }
            .header-mobile {
              font-size: 1.5rem !important;
              margin-bottom: 1.5rem !important;
            }
            .toggle-mobile {
              max-width: 100% !important;
              margin: 0 0 1.5rem 0 !important;
              padding: 12px 16px !important;
            }
            .search-mobile {
              margin: 0 0 1.5rem 0 !important;
              max-width: 100% !important;
            }
          }
          
          @media (min-width: 769px) {
            .desktop-table {
              display: table !important;
            }
            .mobile-cards {
              display: none !important;
            }
            .container-desktop {
              padding: 2rem !important;
              max-width: 1400px !important;
              margin: 0 auto !important;
            }
          }
          
          input:focus {
            border-color: #1976d2 !important;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
          }
          
          button:hover {
            opacity: 0.9;
          }
          
          button:active {
            transform: translateY(1px);
          }
        `}),d.jsxs("div",{style:c.container,className:"container-mobile container-desktop",children:[d.jsx("h2",{style:c.header,className:"header-mobile",children:"× ×™×”×•×œ ×ž×©×ª×ž×©×™×"}),a!==null&&d.jsxs("div",{style:c.toggleBox,className:"toggle-mobile",children:[d.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"×”×–×ž× ×•×ª ×“×¨×š ×”××ª×¨:"}),d.jsx("div",{style:c.toggleSwitch,onClick:l,children:d.jsx("div",{style:c.toggleCircle})})]}),d.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×ž×©×ª×ž×©...",value:n,onChange:p=>i(p.target.value),style:c.searchBox,className:"search-mobile",dir:"rtl"}),d.jsx("div",{style:c.tableContainer,className:"desktop-table",children:d.jsxs("table",{style:c.table,children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{style:c.th,children:"×©× ×ž×©×ª×ž×©"}),d.jsx("th",{style:c.th,children:"××™×ž×™×™×œ"}),d.jsx("th",{style:c.th,children:"×”×¨×©××”"}),d.jsx("th",{style:c.th,children:"×¤×¢×•×œ×”"})]})}),d.jsx("tbody",{children:f.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"×œ× × ×ž×¦××• ×ž×©×ª×ž×©×™× ×ª×•××ž×™×"})}):f.map(p=>d.jsxs("tr",{children:[d.jsx("td",{style:c.td,children:p.username}),d.jsx("td",{style:c.td,children:p.email}),d.jsx("td",{style:c.td,children:p.role==="User"?"×ž×©×ª×ž×© ×¨×’×™×œ":p.role==="GmachAdmin"?'×ž× ×”×œ ×’×ž"×—':p.role==="MainAdmin"?"×ž× ×”×œ ×¨××©×™":p.role}),d.jsxs("td",{style:c.td,children:[p.role!=="MainAdmin"&&(p.role==="User"?d.jsx("button",{style:{...c.button,...c.promoteBtn},onClick:()=>o(p.id,"GmachAdmin"),children:'×©×“×¨×’ ×œ×ž× ×”×œ ×’×ž"×—'}):d.jsx("button",{style:{...c.button,...c.demoteBtn},onClick:()=>o(p.id,"User"),children:"×”×—×–×¨ ×œ×ž×©×ª×ž×© ×¨×’×™×œ"})),p.role==="MainAdmin"&&d.jsx("span",{style:{color:"#999",fontSize:"0.8rem"},children:"---"})]})]},p.id))})]})}),d.jsx("div",{className:"mobile-cards",style:{display:"none"},children:f.length===0?d.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",backgroundColor:"white",borderRadius:"12px",border:"1px solid #ddd"},children:"×œ× × ×ž×¦××• ×ž×©×ª×ž×©×™× ×ª×•××ž×™×"}):f.map(p=>d.jsx(u,{user:p},p.id))})]})]})},uy=({item:r,isOpen:e,onClose:t})=>!e||!r?null:d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",direction:"rtl"},onClick:t,children:d.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative",padding:"1.5rem",boxShadow:"0 20px 40px rgba(0,0,0,0.3)"},onClick:n=>n.stopPropagation(),children:[d.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",left:"1rem",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1001,transition:"background 0.2s ease"},onMouseEnter:n=>n.target.style.background="#e5e7eb",onMouseLeave:n=>n.target.style.background="#f3f4f6",children:d.jsx(oa,{size:20})}),d.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"2rem",alignItems:"flex-start"},children:[d.jsx("div",{style:{flex:window.innerWidth<=768?"none":"1",width:window.innerWidth<=768?"100%":"400px"},children:d.jsx(Fs,{item:r,width:"100%",height:window.innerWidth<=768?"300px":"400px",showNavigation:!0,style:{borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})}),d.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[d.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",textAlign:"center"},children:r.name}),d.jsx("div",{style:{backgroundColor:"#f8fafc",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:d.jsxs("p",{style:{fontSize:"1.1rem",color:"#4b5563",margin:0,textAlign:"center"},children:[d.jsx("strong",{children:"×ž×–×”×” ×ž×•×¦×¨:"})," ",r.ItemId]})}),r.publicComment&&d.jsxs("div",{style:{backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[d.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#1e40af",fontSize:"1rem"},children:"ðŸ“ ×”×¢×¨×•×ª"}),d.jsx("p",{style:{margin:0,color:"#1e3a8a",fontSize:"1rem"},children:r.publicComment})]})]})]})]})}),hy=({currentPage:r,totalItems:e,itemsPerPage:t,onPageChange:n,className:i=""})=>{const a=Math.ceil(e/t),s=window.innerWidth<=768;if(a<=1)return null;const l=(()=>{const u=s?5:7,p=Math.floor(u/2);let h=Math.max(1,r-p),m=Math.min(a,h+u-1);m-h+1<u&&(h=Math.max(1,m-u+1));const v=[];h>1&&(v.push(1),h>2&&v.push("..."));for(let b=h;b<=m;b++)v.push(b);return m<a&&(m<a-1&&v.push("..."),v.push(a)),v})(),c=(r-1)*t+1,f=Math.min(r*t,e);return d.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[d.jsxs("div",{style:{fontSize:s?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["×ž×¦×™×’ ",c,"-",f," ×ž×ª×•×š ",e," ×ž×•×¦×¨×™×"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[d.jsx("button",{onClick:()=>n(r-1),disabled:r===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===1?"#f9fafb":"white",color:r===1?"#9ca3af":"#374151",cursor:r===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:d.jsx(Ws,{size:s?16:20})}),l.map((u,p)=>{if(u==="...")return d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",color:"#9ca3af"},children:d.jsx(md,{size:s?16:20})},`dots-${p}`);const h=u===r;return d.jsx("button",{onClick:()=>n(u),style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:h?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:h?"#3b82f6":"white",color:h?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:h?"bold":"normal",fontSize:s?"14px":"16px"},children:u},u)}),d.jsx("button",{onClick:()=>n(r+1),disabled:r===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===a?"#f9fafb":"white",color:r===a?"#9ca3af":"#374151",cursor:r===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:d.jsx(Hs,{size:s?16:20})})]})]})},py=()=>{const[r,e]=oe.useState([]),[t,n]=oe.useState(""),[i,a]=oe.useState(!0),[s,o]=oe.useState(null),[l,c]=oe.useState(!1),[f,u]=oe.useState(1),[p,h]=oe.useState(window.innerWidth<=768),m=p?12:20;oe.useEffect(()=>{const z=()=>{const k=window.innerWidth<=768;k!==p&&(h(k),u(1))};return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[p]),oe.useEffect(()=>{u(1)},[t]),oe.useEffect(()=>{const z=vt(We,"items"),k=Vs(z,W=>{const j=W.docs.map(I=>{const P=I.data(),N=Bs(P);return{id:I.id,...N}}).filter(I=>I.isDeleted!==!0);e(j),a(!1)});return()=>k()},[]);const v=(z,k)=>{k.target.closest("button")||k.target.closest("[data-navigation]")||(o(z),c(!0))},b=()=>{c(!1),o(null)};if(i)return d.jsxs("div",{style:{padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[d.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),d.jsx("h2",{children:"×˜×•×¢×Ÿ ×§×˜×œ×•×’"}),d.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]});const y=r.filter(z=>z.name.toLowerCase().includes(t.toLowerCase())),E=(f-1)*m,D=E+m,C=y.slice(E,D);return d.jsxs("div",{style:{padding:"2rem",direction:"rtl",textAlign:"right",paddingLeft:"1rem",paddingRight:"1rem"},children:[d.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"2rem",color:"#1f2937"},children:"×§×˜×œ×•×’ ×ž×•×¦×¨×™×"}),d.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×¤×¨×™×˜",value:t,onChange:z=>n(z.target.value),dir:"rtl",style:{padding:"12px 16px",width:"100%",marginBottom:"1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:z=>z.target.style.borderColor="#3b82f6",onBlur:z=>z.target.style.borderColor="#e5e7eb"}),t&&d.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #0ea5e9",textAlign:"center"},children:d.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"1rem"},children:["ðŸ” × ×ž×¦××• ",y.length,' ×ž×•×¦×¨×™× ×¢×‘×•×¨ "',t,'"']})}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:C.length===0?d.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",marginTop:"3rem",padding:"2rem"},children:t?d.jsxs(d.Fragment,{children:[d.jsxs("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:['×œ× × ×ž×¦××• ×¤×¨×™×˜×™× ×¢×‘×•×¨ "',t,'"']}),d.jsx("p",{style:{color:"#9ca3af"},children:"× ×¡×” ×œ×—×¤×© ×‘×ž×™×œ×•×ª ×ž×¤×ª×— ××—×¨×•×ª"})]}):d.jsxs(d.Fragment,{children:[d.jsx("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:"×œ× × ×ž×¦××• ×¤×¨×™×˜×™×"}),d.jsx("p",{style:{color:"#9ca3af"},children:"×× × × ×¡×” ×œ×—×¤×© ×©×•×‘ ××• ×¦×•×¨ ×§×©×¨ ×¢× ×”×ž× ×”×œ×™×"})]})}):C.map(z=>d.jsxs("div",{style:{border:"1px solid #e5e7eb",padding:"0.8rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"all 0.3s ease-in-out",minHeight:"250px",maxWidth:"100%",cursor:"pointer"},onMouseEnter:k=>{k.currentTarget.style.transform="scale(1.05) translateY(-8px)",k.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.2)",k.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:k=>{k.currentTarget.style.transform="scale(1) translateY(0)",k.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",k.currentTarget.style.borderColor="#e5e7eb"},onClick:k=>v(z,k),children:[d.jsx(Fs,{item:z,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem",borderRadius:"4px"}}),d.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[d.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"1.1rem",lineHeight:"1.3",textAlign:"center",color:"#1f2937",fontWeight:"700"},children:z.name}),z.publicComment&&d.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",margin:"0.3rem 0",fontStyle:"italic",background:"#f9fafb",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:["ðŸ“ ",z.publicComment]}),d.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",textAlign:"center",marginTop:"auto",paddingTop:"0.5rem"},children:["×ž×–×”×”: ",z.ItemId]})]})]},z.ItemId))}),d.jsx(hy,{currentPage:f,totalItems:y.length,itemsPerPage:m,onPageChange:u}),d.jsx(uy,{item:s,isOpen:l,onClose:b}),d.jsx("style",{jsx:!0,children:`
        @media (max-width: 768px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.8rem !important;
          }
        }
        
        @media (max-width: 480px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
          }
        }
      `})]})},gy="modulepreload",my=function(r){return"/"+r},o0={},hf=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let s=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=s(t.map(c=>{if(c=my(c),c in o0)return;o0[c]=!0;const f=c.endsWith(".css"),u=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":gy,f||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),f)return new Promise((h,m)=>{p.addEventListener("load",h),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Yt(r){"@babel/helpers - typeof";return Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(r)}var xi=Uint8Array,zn=Uint16Array,Od=Int32Array,Td=new xi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Rd=new xi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s0=new xi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ah=function(r,e){for(var t=new zn(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new Od(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)i[a]=a-t[n]<<5|n;return{b:t,r:i}},Sh=Ah(Td,2),xy=Sh.b,td=Sh.r;xy[28]=258,td[258]=28;var vy=Ah(Rd,0),l0=vy.r,rd=new zn(32768);for(var cr=0;cr<32768;++cr){var Ca=(cr&43690)>>1|(cr&21845)<<1;Ca=(Ca&52428)>>2|(Ca&13107)<<2,Ca=(Ca&61680)>>4|(Ca&3855)<<4,rd[cr]=((Ca&65280)>>8|(Ca&255)<<8)>>1}var Ts=function(r,e,t){for(var n=r.length,i=0,a=new zn(e);i<n;++i)r[i]&&++a[r[i]-1];var s=new zn(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(t){o=new zn(1<<e);var l=15-e;for(i=0;i<n;++i)if(r[i])for(var c=i<<4|r[i],f=e-r[i],u=s[r[i]-1]++<<f,p=u|(1<<f)-1;u<=p;++u)o[rd[u]>>l]=c}else for(o=new zn(n),i=0;i<n;++i)r[i]&&(o[i]=rd[s[r[i]-1]++]>>15-r[i]);return o},co=new xi(288);for(var cr=0;cr<144;++cr)co[cr]=8;for(var cr=144;cr<256;++cr)co[cr]=9;for(var cr=256;cr<280;++cr)co[cr]=7;for(var cr=280;cr<288;++cr)co[cr]=8;var lc=new xi(32);for(var cr=0;cr<32;++cr)lc[cr]=5;var yy=Ts(co,9,0),by=Ts(lc,5,0),_h=function(r){return(r+7)/8|0},wy=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new xi(r.subarray(e,t))},Ji=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Es=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},pf=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,a=t.slice();if(!i)return{t:Ih,l:0};if(i==1){var s=new xi(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(z,k){return z.f-k.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,f=1,u=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};f!=i-1;)o=t[t[c].f<t[u].f?c++:u++],l=t[c!=f&&t[c].f<t[u].f?c++:u++],t[f++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,n=1;n<i;++n)a[n].s>p&&(p=a[n].s);var h=new zn(p+1),m=nd(t[f-1],h,0);if(m>e){var n=0,v=0,b=m-e,y=1<<b;for(a.sort(function(k,W){return h[W.s]-h[k.s]||k.f-W.f});n<i;++n){var E=a[n].s;if(h[E]>e)v+=y-(1<<m-h[E]),h[E]=e;else break}for(v>>=b;v>0;){var D=a[n].s;h[D]<e?v-=1<<e-h[D]++-1:++n}for(;n>=0&&v;--n){var C=a[n].s;h[C]==e&&(--h[C],++v)}m=e}return{t:new xi(h),l:m}},nd=function(r,e,t){return r.s==-1?Math.max(nd(r.l,e,t+1),nd(r.r,e,t+1)):e[r.s]=t},c0=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new zn(++e),n=0,i=r[0],a=1,s=function(l){t[n++]=l},o=1;o<=e;++o)if(r[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=r[o]}return{c:t.subarray(0,n),n:e}},Ns=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Ch=function(r,e,t){var n=t.length,i=_h(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var a=0;a<n;++a)r[i+a+4]=t[a];return(i+4+n)*8},f0=function(r,e,t,n,i,a,s,o,l,c,f){Ji(e,f++,t),++i[256];for(var u=pf(i,15),p=u.t,h=u.l,m=pf(a,15),v=m.t,b=m.l,y=c0(p),E=y.c,D=y.n,C=c0(v),z=C.c,k=C.n,W=new zn(19),j=0;j<E.length;++j)++W[E[j]&31];for(var j=0;j<z.length;++j)++W[z[j]&31];for(var I=pf(W,7),P=I.t,N=I.l,S=19;S>4&&!P[s0[S-1]];--S);var O=c+5<<3,A=Ns(i,co)+Ns(a,lc)+s,B=Ns(i,p)+Ns(a,v)+s+14+3*S+Ns(W,P)+2*W[16]+3*W[17]+7*W[18];if(l>=0&&O<=A&&O<=B)return Ch(e,f,r.subarray(l,l+c));var T,L,Y,X;if(Ji(e,f,1+(B<A)),f+=2,B<A){T=Ts(p,h,0),L=p,Y=Ts(v,b,0),X=v;var ae=Ts(P,N,0);Ji(e,f,D-257),Ji(e,f+5,k-1),Ji(e,f+10,S-4),f+=14;for(var j=0;j<S;++j)Ji(e,f+3*j,P[s0[j]]);f+=3*S;for(var Q=[E,z],M=0;M<2;++M)for(var F=Q[M],j=0;j<F.length;++j){var U=F[j]&31;Ji(e,f,ae[U]),f+=P[U],U>15&&(Ji(e,f,F[j]>>5&127),f+=F[j]>>12)}}else T=yy,L=co,Y=by,X=lc;for(var j=0;j<o;++j){var V=n[j];if(V>255){var U=V>>18&31;Es(e,f,T[U+257]),f+=L[U+257],U>7&&(Ji(e,f,V>>23&31),f+=Td[U]);var te=V&31;Es(e,f,Y[te]),f+=X[te],te>3&&(Es(e,f,V>>5&8191),f+=Rd[te])}else Es(e,f,T[V]),f+=L[V]}return Es(e,f,T[256]),f+L[256]},Ay=new Od([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ih=new xi(0),Sy=function(r,e,t,n,i,a){var s=a.z||r.length,o=new xi(n+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(n,o.length-i),c=a.l,f=(a.r||0)&7;if(e){f&&(l[0]=a.r>>3);for(var u=Ay[e-1],p=u>>13,h=u&8191,m=(1<<t)-1,v=a.p||new zn(32768),b=a.h||new zn(m+1),y=Math.ceil(t/3),E=2*y,D=function(Fe){return(r[Fe]^r[Fe+1]<<y^r[Fe+2]<<E)&m},C=new Od(25e3),z=new zn(288),k=new zn(32),W=0,j=0,I=a.i||0,P=0,N=a.w||0,S=0;I+2<s;++I){var O=D(I),A=I&32767,B=b[O];if(v[A]=B,b[O]=A,N<=I){var T=s-I;if((W>7e3||P>24576)&&(T>423||!c)){f=f0(r,l,0,C,z,k,j,P,S,I-S,f),P=W=j=0,S=I;for(var L=0;L<286;++L)z[L]=0;for(var L=0;L<30;++L)k[L]=0}var Y=2,X=0,ae=h,Q=A-B&32767;if(T>2&&O==D(I-Q))for(var M=Math.min(p,T)-1,F=Math.min(32767,I),U=Math.min(258,T);Q<=F&&--ae&&A!=B;){if(r[I+Y]==r[I+Y-Q]){for(var V=0;V<U&&r[I+V]==r[I+V-Q];++V);if(V>Y){if(Y=V,X=Q,V>M)break;for(var te=Math.min(Q,V-2),le=0,L=0;L<te;++L){var he=I-Q+L&32767,pe=v[he],de=he-pe&32767;de>le&&(le=de,B=he)}}}A=B,B=v[A],Q+=A-B&32767}if(X){C[P++]=268435456|td[Y]<<18|l0[X];var be=td[Y]&31,Ee=l0[X]&31;j+=Td[be]+Rd[Ee],++z[257+be],++k[Ee],N=I+Y,++W}else C[P++]=r[I],++z[r[I]]}}for(I=Math.max(I,N);I<s;++I)C[P++]=r[I],++z[r[I]];f=f0(r,l,c,C,z,k,j,P,S,I-S,f),c||(a.r=f&7|l[f/8|0]<<3,f-=7,a.h=b,a.p=v,a.i=I,a.w=N)}else{for(var I=a.w||0;I<s+c;I+=65535){var Re=I+65535;Re>=s&&(l[f/8|0]=c,Re=s),f=Ch(l,f+1,r.subarray(I,Re))}a.i=s}return wy(o,0,n+_h(f)+i)},Eh=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,a=t.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=n+=t[s];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},_y=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new xi(a.length+r.length);s.set(a),s.set(r,a.length),r=s,i.w=a.length}return Sy(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},Nh=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},Cy=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=Eh();i.p(e.dictionary),Nh(r,2,i.d())}};function id(r,e){e||(e={});var t=Eh();t.p(r);var n=_y(r,e,e.dictionary?6:2,4);return Cy(n,e),Nh(n,n.length-4,t.d()),n}var Iy=typeof TextDecoder<"u"&&new TextDecoder,Ey=0;try{Iy.decode(Ih,{stream:!0}),Ey=1}catch{}function Ny(r){if(Array.isArray(r))return r}function Dy(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(l=(n=a.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function d0(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ky(r,e){if(r){if(typeof r=="string")return d0(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d0(r,e):void 0}}function jy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u0(r,e){return Ny(r)||Dy(r,e)||ky(r,e)||jy()}function h0(r,e="utf8"){return new TextDecoder(e).decode(r)}const Oy=new TextEncoder;function Ty(r){return Oy.encode(r)}const Ry=1024*8,Ly=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),gf={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Ld{constructor(e=Ry,t={}){Gt(this,"buffer");Gt(this,"byteLength");Gt(this,"byteOffset");Gt(this,"length");Gt(this,"offset");Gt(this,"lastWrittenByte");Gt(this,"littleEndian");Gt(this,"_data");Gt(this,"_mark");Gt(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,a=e.byteLength-i;let s=i;(ArrayBuffer.isView(e)||e instanceof Ld)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=gf[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===Ly&&t!=="uint8"&&t!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new gf[t](o.buffer);return this.offset+=n,l.reverse(),l}const s=new gf[t](a);return this.offset+=n,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return h0(this.readBytes(e))}decodeText(e=1,t="utf8"){return h0(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Ty(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function $o(r){let e=r.length;for(;--e>=0;)r[e]=0}const Py=3,My=258,Dh=29,By=256,Fy=By+1+Dh,kh=30,zy=512,Uy=new Array((Fy+2)*2);$o(Uy);const Wy=new Array(kh*2);$o(Wy);const Hy=new Array(zy);$o(Hy);const qy=new Array(My-Py+1);$o(qy);const Vy=new Array(Dh);$o(Vy);const Gy=new Array(kh);$o(Gy);const $y=(r,e,t,n)=>{let i=r&65535|0,a=r>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var ad=$y;const Xy=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},Yy=new Uint32Array(Xy()),Ky=(r,e,t,n)=>{const i=Yy,a=n+t;r^=-1;for(let s=n;s<a;s++)r=r>>>8^i[(r^e[s])&255];return r^-1};var Ni=Ky,od={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jh={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Zy=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var Qy=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)Zy(t,n)&&(r[n]=t[n])}}return r},Jy=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,a=r.length;n<a;n++){let s=r[n];t.set(s,i),i+=s.length}return t},Oh={assign:Qy,flattenChunks:Jy};let Th=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Th=!1}const zs=new Uint8Array(256);for(let r=0;r<256;r++)zs[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;zs[254]=zs[254]=1;var eb=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,a,s=r.length,o=0;for(i=0;i<s;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<s&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<s&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const tb=(r,e)=>{if(e<65534&&r.subarray&&Th)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var rb=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const a=new Array(t*2);for(i=0,n=0;n<t;){let s=r[n++];if(s<128){a[i++]=s;continue}let o=zs[s];if(o>4){a[i++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<t;)s=s<<6|r[n++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return tb(a,i)},nb=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+zs[r[t]]>e?t:e},sd={string2buf:eb,buf2string:rb,utf8border:nb};function ib(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ab=ib;const Pl=16209,ob=16191;var sb=function(e,t){let n,i,a,s,o,l,c,f,u,p,h,m,v,b,y,E,D,C,z,k,W,j,I,P;const N=e.state;n=e.next_in,I=e.input,i=n+(e.avail_in-5),a=e.next_out,P=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),l=N.dmax,c=N.wsize,f=N.whave,u=N.wnext,p=N.window,h=N.hold,m=N.bits,v=N.lencode,b=N.distcode,y=(1<<N.lenbits)-1,E=(1<<N.distbits)-1;e:do{m<15&&(h+=I[n++]<<m,m+=8,h+=I[n++]<<m,m+=8),D=v[h&y];t:for(;;){if(C=D>>>24,h>>>=C,m-=C,C=D>>>16&255,C===0)P[a++]=D&65535;else if(C&16){z=D&65535,C&=15,C&&(m<C&&(h+=I[n++]<<m,m+=8),z+=h&(1<<C)-1,h>>>=C,m-=C),m<15&&(h+=I[n++]<<m,m+=8,h+=I[n++]<<m,m+=8),D=b[h&E];r:for(;;){if(C=D>>>24,h>>>=C,m-=C,C=D>>>16&255,C&16){if(k=D&65535,C&=15,m<C&&(h+=I[n++]<<m,m+=8,m<C&&(h+=I[n++]<<m,m+=8)),k+=h&(1<<C)-1,k>l){e.msg="invalid distance too far back",N.mode=Pl;break e}if(h>>>=C,m-=C,C=a-s,k>C){if(C=k-C,C>f&&N.sane){e.msg="invalid distance too far back",N.mode=Pl;break e}if(W=0,j=p,u===0){if(W+=c-C,C<z){z-=C;do P[a++]=p[W++];while(--C);W=a-k,j=P}}else if(u<C){if(W+=c+u-C,C-=u,C<z){z-=C;do P[a++]=p[W++];while(--C);if(W=0,u<z){C=u,z-=C;do P[a++]=p[W++];while(--C);W=a-k,j=P}}}else if(W+=u-C,C<z){z-=C;do P[a++]=p[W++];while(--C);W=a-k,j=P}for(;z>2;)P[a++]=j[W++],P[a++]=j[W++],P[a++]=j[W++],z-=3;z&&(P[a++]=j[W++],z>1&&(P[a++]=j[W++]))}else{W=a-k;do P[a++]=P[W++],P[a++]=P[W++],P[a++]=P[W++],z-=3;while(z>2);z&&(P[a++]=P[W++],z>1&&(P[a++]=P[W++]))}}else if((C&64)===0){D=b[(D&65535)+(h&(1<<C)-1)];continue r}else{e.msg="invalid distance code",N.mode=Pl;break e}break}}else if((C&64)===0){D=v[(D&65535)+(h&(1<<C)-1)];continue t}else if(C&32){N.mode=ob;break e}else{e.msg="invalid literal/length code",N.mode=Pl;break e}break}}while(n<i&&a<o);z=m>>3,n-=z,m-=z<<3,h&=(1<<m)-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=a<o?257+(o-a):257-(a-o),N.hold=h,N.bits=m};const Do=15,p0=852,g0=592,m0=0,mf=1,x0=2,lb=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),cb=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fb=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),db=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ub=(r,e,t,n,i,a,s,o)=>{const l=o.bits;let c=0,f=0,u=0,p=0,h=0,m=0,v=0,b=0,y=0,E=0,D,C,z,k,W,j=null,I;const P=new Uint16Array(Do+1),N=new Uint16Array(Do+1);let S=null,O,A,B;for(c=0;c<=Do;c++)P[c]=0;for(f=0;f<n;f++)P[e[t+f]]++;for(h=l,p=Do;p>=1&&P[p]===0;p--);if(h>p&&(h=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(u=1;u<p&&P[u]===0;u++);for(h<u&&(h=u),b=1,c=1;c<=Do;c++)if(b<<=1,b-=P[c],b<0)return-1;if(b>0&&(r===m0||p!==1))return-1;for(N[1]=0,c=1;c<Do;c++)N[c+1]=N[c]+P[c];for(f=0;f<n;f++)e[t+f]!==0&&(s[N[e[t+f]]++]=f);if(r===m0?(j=S=s,I=20):r===mf?(j=lb,S=cb,I=257):(j=fb,S=db,I=0),E=0,f=0,c=u,W=a,m=h,v=0,z=-1,y=1<<h,k=y-1,r===mf&&y>p0||r===x0&&y>g0)return 1;for(;;){O=c-v,s[f]+1<I?(A=0,B=s[f]):s[f]>=I?(A=S[s[f]-I],B=j[s[f]-I]):(A=96,B=0),D=1<<c-v,C=1<<m,u=C;do C-=D,i[W+(E>>v)+C]=O<<24|A<<16|B|0;while(C!==0);for(D=1<<c-1;E&D;)D>>=1;if(D!==0?(E&=D-1,E+=D):E=0,f++,--P[c]===0){if(c===p)break;c=e[t+s[f]]}if(c>h&&(E&k)!==z){for(v===0&&(v=h),W+=u,m=c-v,b=1<<m;m+v<p&&(b-=P[m+v],!(b<=0));)m++,b<<=1;if(y+=1<<m,r===mf&&y>p0||r===x0&&y>g0)return 1;z=E&k,i[z]=h<<24|m<<16|W-a|0}}return E!==0&&(i[W+E]=c-v<<24|64<<16|0),o.bits=h,0};var Rs=ub;const hb=0,Rh=1,Lh=2,{Z_FINISH:v0,Z_BLOCK:pb,Z_TREES:Ml,Z_OK:fo,Z_STREAM_END:gb,Z_NEED_DICT:mb,Z_STREAM_ERROR:ei,Z_DATA_ERROR:Ph,Z_MEM_ERROR:Mh,Z_BUF_ERROR:xb,Z_DEFLATED:y0}=jh,wc=16180,b0=16181,w0=16182,A0=16183,S0=16184,_0=16185,C0=16186,I0=16187,E0=16188,N0=16189,cc=16190,ea=16191,xf=16192,D0=16193,vf=16194,k0=16195,j0=16196,O0=16197,T0=16198,Bl=16199,Fl=16200,R0=16201,L0=16202,P0=16203,M0=16204,B0=16205,yf=16206,F0=16207,z0=16208,fr=16209,Bh=16210,Fh=16211,vb=852,yb=592,bb=15,wb=bb,U0=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function Ab(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const uo=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<wc||e.mode>Fh?1:0},zh=r=>{if(uo(r))return ei;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=wc,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(vb),e.distcode=e.distdyn=new Int32Array(yb),e.sane=1,e.back=-1,fo},Uh=r=>{if(uo(r))return ei;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,zh(r)},Wh=(r,e)=>{let t;if(uo(r))return ei;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ei:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,Uh(r))},Hh=(r,e)=>{if(!r)return ei;const t=new Ab;r.state=t,t.strm=r,t.window=null,t.mode=wc;const n=Wh(r,e);return n!==fo&&(r.state=null),n},Sb=r=>Hh(r,wb);let W0=!0,bf,wf;const _b=r=>{if(W0){bf=new Int32Array(512),wf=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Rs(Rh,r.lens,0,288,bf,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Rs(Lh,r.lens,0,32,wf,0,r.work,{bits:5}),W0=!1}r.lencode=bf,r.lenbits=9,r.distcode=wf,r.distbits=5},qh=(r,e,t,n)=>{let i;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(e.subarray(t-n,t-n+i),a.wnext),n-=i,n?(a.window.set(e.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Cb=(r,e)=>{let t,n,i,a,s,o,l,c,f,u,p,h,m,v,b=0,y,E,D,C,z,k,W,j;const I=new Uint8Array(4);let P,N;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(uo(r)||!r.output||!r.input&&r.avail_in!==0)return ei;t=r.state,t.mode===ea&&(t.mode=xf),s=r.next_out,i=r.output,l=r.avail_out,a=r.next_in,n=r.input,o=r.avail_in,c=t.hold,f=t.bits,u=o,p=l,j=fo;e:for(;;)switch(t.mode){case wc:if(t.wrap===0){t.mode=xf;break}for(;f<16;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,I[0]=c&255,I[1]=c>>>8&255,t.check=Ni(t.check,I,2,0),c=0,f=0,t.mode=b0;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){r.msg="incorrect header check",t.mode=fr;break}if((c&15)!==y0){r.msg="unknown compression method",t.mode=fr;break}if(c>>>=4,f-=4,W=(c&15)+8,t.wbits===0&&(t.wbits=W),W>15||W>t.wbits){r.msg="invalid window size",t.mode=fr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=c&512?N0:ea,c=0,f=0;break;case b0:for(;f<16;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if(t.flags=c,(t.flags&255)!==y0){r.msg="unknown compression method",t.mode=fr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=fr;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,t.check=Ni(t.check,I,2,0)),c=0,f=0,t.mode=w0;case w0:for(;f<32;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,t.check=Ni(t.check,I,4,0)),c=0,f=0,t.mode=A0;case A0:for(;f<16;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,t.check=Ni(t.check,I,2,0)),c=0,f=0,t.mode=S0;case S0:if(t.flags&1024){for(;f<16;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,t.check=Ni(t.check,I,2,0)),c=0,f=0}else t.head&&(t.head.extra=null);t.mode=_0;case _0:if(t.flags&1024&&(h=t.length,h>o&&(h=o),h&&(t.head&&(W=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+h),W)),t.flags&512&&t.wrap&4&&(t.check=Ni(t.check,n,h,a)),o-=h,a+=h,t.length-=h),t.length))break e;t.length=0,t.mode=C0;case C0:if(t.flags&2048){if(o===0)break e;h=0;do W=n[a+h++],t.head&&W&&t.length<65536&&(t.head.name+=String.fromCharCode(W));while(W&&h<o);if(t.flags&512&&t.wrap&4&&(t.check=Ni(t.check,n,h,a)),o-=h,a+=h,W)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=I0;case I0:if(t.flags&4096){if(o===0)break e;h=0;do W=n[a+h++],t.head&&W&&t.length<65536&&(t.head.comment+=String.fromCharCode(W));while(W&&h<o);if(t.flags&512&&t.wrap&4&&(t.check=Ni(t.check,n,h,a)),o-=h,a+=h,W)break e}else t.head&&(t.head.comment=null);t.mode=E0;case E0:if(t.flags&512){for(;f<16;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if(t.wrap&4&&c!==(t.check&65535)){r.msg="header crc mismatch",t.mode=fr;break}c=0,f=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=ea;break;case N0:for(;f<32;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}r.adler=t.check=U0(c),c=0,f=0,t.mode=cc;case cc:if(t.havedict===0)return r.next_out=s,r.avail_out=l,r.next_in=a,r.avail_in=o,t.hold=c,t.bits=f,mb;r.adler=t.check=1,t.mode=ea;case ea:if(e===pb||e===Ml)break e;case xf:if(t.last){c>>>=f&7,f-=f&7,t.mode=yf;break}for(;f<3;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}switch(t.last=c&1,c>>>=1,f-=1,c&3){case 0:t.mode=D0;break;case 1:if(_b(t),t.mode=Bl,e===Ml){c>>>=2,f-=2;break e}break;case 2:t.mode=j0;break;case 3:r.msg="invalid block type",t.mode=fr}c>>>=2,f-=2;break;case D0:for(c>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if((c&65535)!==(c>>>16^65535)){r.msg="invalid stored block lengths",t.mode=fr;break}if(t.length=c&65535,c=0,f=0,t.mode=vf,e===Ml)break e;case vf:t.mode=k0;case k0:if(h=t.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;i.set(n.subarray(a,a+h),s),o-=h,a+=h,l-=h,s+=h,t.length-=h;break}t.mode=ea;break;case j0:for(;f<14;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if(t.nlen=(c&31)+257,c>>>=5,f-=5,t.ndist=(c&31)+1,c>>>=5,f-=5,t.ncode=(c&15)+4,c>>>=4,f-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=fr;break}t.have=0,t.mode=O0;case O0:for(;t.have<t.ncode;){for(;f<3;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}t.lens[S[t.have++]]=c&7,c>>>=3,f-=3}for(;t.have<19;)t.lens[S[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,P={bits:t.lenbits},j=Rs(hb,t.lens,0,19,t.lencode,0,t.work,P),t.lenbits=P.bits,j){r.msg="invalid code lengths set",t.mode=fr;break}t.have=0,t.mode=T0;case T0:for(;t.have<t.nlen+t.ndist;){for(;b=t.lencode[c&(1<<t.lenbits)-1],y=b>>>24,E=b>>>16&255,D=b&65535,!(y<=f);){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if(D<16)c>>>=y,f-=y,t.lens[t.have++]=D;else{if(D===16){for(N=y+2;f<N;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if(c>>>=y,f-=y,t.have===0){r.msg="invalid bit length repeat",t.mode=fr;break}W=t.lens[t.have-1],h=3+(c&3),c>>>=2,f-=2}else if(D===17){for(N=y+3;f<N;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}c>>>=y,f-=y,W=0,h=3+(c&7),c>>>=3,f-=3}else{for(N=y+7;f<N;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}c>>>=y,f-=y,W=0,h=11+(c&127),c>>>=7,f-=7}if(t.have+h>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=fr;break}for(;h--;)t.lens[t.have++]=W}}if(t.mode===fr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=fr;break}if(t.lenbits=9,P={bits:t.lenbits},j=Rs(Rh,t.lens,0,t.nlen,t.lencode,0,t.work,P),t.lenbits=P.bits,j){r.msg="invalid literal/lengths set",t.mode=fr;break}if(t.distbits=6,t.distcode=t.distdyn,P={bits:t.distbits},j=Rs(Lh,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,P),t.distbits=P.bits,j){r.msg="invalid distances set",t.mode=fr;break}if(t.mode=Bl,e===Ml)break e;case Bl:t.mode=Fl;case Fl:if(o>=6&&l>=258){r.next_out=s,r.avail_out=l,r.next_in=a,r.avail_in=o,t.hold=c,t.bits=f,sb(r,p),s=r.next_out,i=r.output,l=r.avail_out,a=r.next_in,n=r.input,o=r.avail_in,c=t.hold,f=t.bits,t.mode===ea&&(t.back=-1);break}for(t.back=0;b=t.lencode[c&(1<<t.lenbits)-1],y=b>>>24,E=b>>>16&255,D=b&65535,!(y<=f);){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if(E&&(E&240)===0){for(C=y,z=E,k=D;b=t.lencode[k+((c&(1<<C+z)-1)>>C)],y=b>>>24,E=b>>>16&255,D=b&65535,!(C+y<=f);){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}c>>>=C,f-=C,t.back+=C}if(c>>>=y,f-=y,t.back+=y,t.length=D,E===0){t.mode=B0;break}if(E&32){t.back=-1,t.mode=ea;break}if(E&64){r.msg="invalid literal/length code",t.mode=fr;break}t.extra=E&15,t.mode=R0;case R0:if(t.extra){for(N=t.extra;f<N;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=L0;case L0:for(;b=t.distcode[c&(1<<t.distbits)-1],y=b>>>24,E=b>>>16&255,D=b&65535,!(y<=f);){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if((E&240)===0){for(C=y,z=E,k=D;b=t.distcode[k+((c&(1<<C+z)-1)>>C)],y=b>>>24,E=b>>>16&255,D=b&65535,!(C+y<=f);){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}c>>>=C,f-=C,t.back+=C}if(c>>>=y,f-=y,t.back+=y,E&64){r.msg="invalid distance code",t.mode=fr;break}t.offset=D,t.extra=E&15,t.mode=P0;case P0:if(t.extra){for(N=t.extra;f<N;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=fr;break}t.mode=M0;case M0:if(l===0)break e;if(h=p-l,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=fr;break}h>t.wnext?(h-=t.wnext,m=t.wsize-h):m=t.wnext-h,h>t.length&&(h=t.length),v=t.window}else v=i,m=s-t.offset,h=t.length;h>l&&(h=l),l-=h,t.length-=h;do i[s++]=v[m++];while(--h);t.length===0&&(t.mode=Fl);break;case B0:if(l===0)break e;i[s++]=t.length,l--,t.mode=Fl;break;case yf:if(t.wrap){for(;f<32;){if(o===0)break e;o--,c|=n[a++]<<f,f+=8}if(p-=l,r.total_out+=p,t.total+=p,t.wrap&4&&p&&(r.adler=t.check=t.flags?Ni(t.check,i,p,s-p):ad(t.check,i,p,s-p)),p=l,t.wrap&4&&(t.flags?c:U0(c))!==t.check){r.msg="incorrect data check",t.mode=fr;break}c=0,f=0}t.mode=F0;case F0:if(t.wrap&&t.flags){for(;f<32;){if(o===0)break e;o--,c+=n[a++]<<f,f+=8}if(t.wrap&4&&c!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=fr;break}c=0,f=0}t.mode=z0;case z0:j=gb;break e;case fr:j=Ph;break e;case Bh:return Mh;case Fh:default:return ei}return r.next_out=s,r.avail_out=l,r.next_in=a,r.avail_in=o,t.hold=c,t.bits=f,(t.wsize||p!==r.avail_out&&t.mode<fr&&(t.mode<yf||e!==v0))&&qh(r,r.output,r.next_out,p-r.avail_out),u-=r.avail_in,p-=r.avail_out,r.total_in+=u,r.total_out+=p,t.total+=p,t.wrap&4&&p&&(r.adler=t.check=t.flags?Ni(t.check,i,p,r.next_out-p):ad(t.check,i,p,r.next_out-p)),r.data_type=t.bits+(t.last?64:0)+(t.mode===ea?128:0)+(t.mode===Bl||t.mode===vf?256:0),(u===0&&p===0||e===v0)&&j===fo&&(j=xb),j},Ib=r=>{if(uo(r))return ei;let e=r.state;return e.window&&(e.window=null),r.state=null,fo},Eb=(r,e)=>{if(uo(r))return ei;const t=r.state;return(t.wrap&2)===0?ei:(t.head=e,e.done=!1,fo)},Nb=(r,e)=>{const t=e.length;let n,i,a;return uo(r)||(n=r.state,n.wrap!==0&&n.mode!==cc)?ei:n.mode===cc&&(i=1,i=ad(i,e,t,0),i!==n.check)?Ph:(a=qh(r,e,t,t),a?(n.mode=Bh,Mh):(n.havedict=1,fo))};var Db=Uh,kb=Wh,jb=zh,Ob=Sb,Tb=Hh,Rb=Cb,Lb=Ib,Pb=Eb,Mb=Nb,Bb="pako inflate (from Nodeca project)",ta={inflateReset:Db,inflateReset2:kb,inflateResetKeep:jb,inflateInit:Ob,inflateInit2:Tb,inflate:Rb,inflateEnd:Lb,inflateGetHeader:Pb,inflateSetDictionary:Mb,inflateInfo:Bb};function Fb(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var zb=Fb;const Vh=Object.prototype.toString,{Z_NO_FLUSH:Ub,Z_FINISH:Wb,Z_OK:Us,Z_STREAM_END:Af,Z_NEED_DICT:Sf,Z_STREAM_ERROR:Hb,Z_DATA_ERROR:H0,Z_MEM_ERROR:qb}=jh;function Xs(r){this.options=Oh.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ab,this.strm.avail_out=0;let t=ta.inflateInit2(this.strm,e.windowBits);if(t!==Us)throw new Error(od[t]);if(this.header=new zb,ta.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=sd.string2buf(e.dictionary):Vh.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ta.inflateSetDictionary(this.strm,e.dictionary),t!==Us)))throw new Error(od[t])}Xs.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Wb:Ub,Vh.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=ta.inflate(t,s),a===Sf&&i&&(a=ta.inflateSetDictionary(t,i),a===Us?a=ta.inflate(t,s):a===H0&&(a=Sf));t.avail_in>0&&a===Af&&t.state.wrap>0&&r[t.next_in]!==0;)ta.inflateReset(t),a=ta.inflate(t,s);switch(a){case Hb:case H0:case Sf:case qb:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===Af))if(this.options.to==="string"){let l=sd.utf8border(t.output,t.next_out),c=t.next_out-l,f=sd.buf2string(t.output,l);t.next_out=c,t.avail_out=n-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Us&&o===0)){if(a===Af)return a=ta.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Xs.prototype.onData=function(r){this.chunks.push(r)};Xs.prototype.onEnd=function(r){r===Us&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Oh.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Vb(r,e){const t=new Xs(e);if(t.push(r),t.err)throw t.msg||od[t.err];return t.result}var Gb=Xs,$b=Vb,Xb={Inflate:Gb,inflate:$b};const{Inflate:Yb,inflate:Kb}=Xb;var q0=Yb,Zb=Kb;const Gh=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Gh[r]=e}const V0=4294967295;function Qb(r,e,t){let n=r;for(let i=0;i<t;i++)n=Gh[(n^e[i])&255]^n>>>8;return n}function Jb(r,e){return(Qb(V0,r,e)^V0)>>>0}function G0(r,e,t){const n=r.readUint32(),i=Jb(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${i}`)}function $h(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function Xh(r,e,t,n){let i=0;for(;i<n;i++)e[i]=r[i];for(;i<t;i++)e[i]=r[i]+e[i-n]&255}function Yh(r,e,t,n){let i=0;if(t.length===0)for(;i<n;i++)e[i]=r[i];else for(;i<n;i++)e[i]=r[i]+t[i]&255}function Kh(r,e,t,n,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=r[a]+(t[a]>>1)&255;for(;a<n;a++)e[a]=r[a]+(e[a-i]+t[a]>>1)&255}}function Zh(r,e,t,n,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=r[a]+t[a]&255;for(;a<n;a++)e[a]=r[a]+e3(e[a-i],t[a],t[a-i])&255}}function e3(r,e,t){const n=r+e-t,i=Math.abs(n-r),a=Math.abs(n-e),s=Math.abs(n-t);return i<=a&&i<=s?r:a<=s?e:t}function t3(r,e,t,n,i,a){switch(r){case 0:$h(e,t,i);break;case 1:Xh(e,t,i,a);break;case 2:Yh(e,t,n,i);break;case 3:Kh(e,t,n,i,a);break;case 4:Zh(e,t,n,i,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const r3=new Uint16Array([255]),n3=new Uint8Array(r3.buffer),i3=n3[0]===255;function a3(r){const{data:e,width:t,height:n,channels:i,depth:a}=r,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(n*t*o);let c=0;for(let f=0;f<7;f++){const u=s[f],p=Math.ceil((t-u.x)/u.xStep),h=Math.ceil((n-u.y)/u.yStep);if(p<=0||h<=0)continue;const m=p*o,v=new Uint8Array(m);for(let b=0;b<h;b++){const y=e[c++],E=e.subarray(c,c+m);c+=m;const D=new Uint8Array(m);t3(y,E,D,v,m,o),v.set(D);for(let C=0;C<p;C++){const z=u.x+C*u.xStep,k=u.y+b*u.yStep;if(!(z>=t||k>=n))for(let W=0;W<o;W++)l[(k*t+z)*o+W]=D[C*o+W]}}}if(a===16){const f=new Uint16Array(l.buffer);if(i3)for(let u=0;u<f.length;u++)f[u]=o3(f[u]);return f}else return l}function o3(r){return(r&255)<<8|r>>8&255}const s3=new Uint16Array([255]),l3=new Uint8Array(s3.buffer),c3=l3[0]===255,f3=new Uint8Array(0);function $0(r){const{data:e,width:t,height:n,channels:i,depth:a}=r,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*t),l=new Uint8Array(n*o);let c=f3,f=0,u,p;for(let h=0;h<n;h++){switch(u=e.subarray(f+1,f+1+o),p=l.subarray(h*o,(h+1)*o),e[f]){case 0:$h(u,p,o);break;case 1:Xh(u,p,o,s);break;case 2:Yh(u,p,c,o);break;case 3:Kh(u,p,c,o,s);break;case 4:Zh(u,p,c,o,s);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}c=p,f+=o+1}if(a===16){const h=new Uint16Array(l.buffer);if(c3)for(let m=0;m<h.length;m++)h[m]=d3(h[m]);return h}else return l}function d3(r){return(r&255)<<8|r>>8&255}const Yl=Uint8Array.of(137,80,78,71,13,10,26,10);function X0(r){if(!u3(r.readBytes(Yl.length)))throw new Error("wrong PNG signature")}function u3(r){if(r.length<Yl.length)return!1;for(let e=0;e<Yl.length;e++)if(r[e]!==Yl[e])return!1;return!0}const h3="tEXt",p3=0,Qh=new TextDecoder("latin1");function g3(r){if(x3(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const m3=/^[\u0000-\u00FF]*$/;function x3(r){if(!m3.test(r))throw new Error("invalid latin1 text")}function v3(r,e,t){const n=Jh(e);r[n]=y3(e,t-n.length-1)}function Jh(r){for(r.mark();r.readByte()!==p3;);const e=r.offset;r.reset();const t=Qh.decode(r.readBytes(e-r.offset-1));return r.skip(1),g3(t),t}function y3(r,e){return Qh.decode(r.readBytes(e))}const Fn={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},_f={UNKNOWN:-1,DEFLATE:0},Y0={UNKNOWN:-1,ADAPTIVE:0},Cf={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},zl={NONE:0,BACKGROUND:1,PREVIOUS:2},If={SOURCE:0,OVER:1};class b3 extends Ld{constructor(t,n={}){super(t);Gt(this,"_checkCrc");Gt(this,"_inflator");Gt(this,"_png");Gt(this,"_apng");Gt(this,"_end");Gt(this,"_hasPalette");Gt(this,"_palette");Gt(this,"_hasTransparency");Gt(this,"_transparency");Gt(this,"_compressionMethod");Gt(this,"_filterMethod");Gt(this,"_interlaceMethod");Gt(this,"_colorType");Gt(this,"_isAnimated");Gt(this,"_numberOfFrames");Gt(this,"_numberOfPlays");Gt(this,"_frames");Gt(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new q0,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=_f.UNKNOWN,this._filterMethod=Y0.UNKNOWN,this._interlaceMethod=Cf.UNKNOWN,this._colorType=Fn.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(X0(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(X0(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case h3:v3(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?G0(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?G0(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=w3(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Fn.GREYSCALE:i=1;break;case Fn.TRUECOLOUR:i=3;break;case Fn.INDEXED_COLOUR:i=1;break;case Fn.GREYSCALE_ALPHA:i=2;break;case Fn.TRUECOLOUR_ALPHA:i=4;break;case Fn.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==_f.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Fn.GREYSCALE:case Fn.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case Fn.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Fn.UNKNOWN:case Fn.GREYSCALE_ALPHA:case Fn.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=Jh(this),i=this.readUint8();if(i!==_f.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:Zb(a)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=$0({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case zl.NONE:break;case zl.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*t.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case zl.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(s*n.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case If.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=a(s,o);for(let f=0;f<this._png.channels;f++)t.data[l+f]=n.data[c+f]}break;case If.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=a(s,o);for(let f=0;f<this._png.channels;f++){const u=n.data[c+this._png.channels-1]/i,p=f%(this._png.channels-1)===0?1:n.data[c+f],h=Math.floor(u*p+(1-u)*t.data[l+f]);t.data[l+f]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Y0.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Cf.NO_INTERLACE)this._png.data=$0({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Cf.ADAM7)this._png.data=a3({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:zl.NONE,blendOp:If.SOURCE,data:t}),this._inflator=new q0,this._writingDataChunks=!1}}function w3(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var K0;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(K0||(K0={}));function A3(r,e){return new b3(r,e).decode()}var pt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Ef(){pt.console&&typeof pt.console.log=="function"&&pt.console.log.apply(pt.console,arguments)}var er={log:Ef,warn:function(r){pt.console&&(typeof pt.console.warn=="function"?pt.console.warn.apply(pt.console,arguments):Ef.call(null,arguments))},error:function(r){pt.console&&(typeof pt.console.error=="function"?pt.console.error.apply(pt.console,arguments):Ef(r))}};function Nf(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){eo(n.response,e,t)},n.onerror=function(){er.error("could not download file")},n.send()}function Z0(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ul(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var eo=pt.saveAs||((typeof window>"u"?"undefined":Yt(window))!=="object"||window!==pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=pt.URL||pt.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?Z0(i.href)?Nf(r,e,t):Ul(i,i.target="_blank"):Ul(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Ul(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Z0(r))Nf(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Ul(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Yt(a)!=="object"&&(er.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Nf(r,e,t);var i=r.type==="application/octet-stream",a=/constructor/i.test(pt.HTMLElement)||pt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":Yt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=s?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},o.readAsDataURL(r)}else{var l=pt.URL||pt.webkitURL,c=l.createObjectURL(r);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ep(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,a=t[n].process,s=i.exec(r);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var Kl=pt.atob.bind(pt),Q0=pt.btoa.bind(pt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Df(r,e){var t=r[0],n=r[1],i=r[2],a=r[3];t=ln(t,n,i,a,e[0],7,-680876936),a=ln(a,t,n,i,e[1],12,-389564586),i=ln(i,a,t,n,e[2],17,606105819),n=ln(n,i,a,t,e[3],22,-1044525330),t=ln(t,n,i,a,e[4],7,-176418897),a=ln(a,t,n,i,e[5],12,1200080426),i=ln(i,a,t,n,e[6],17,-1473231341),n=ln(n,i,a,t,e[7],22,-45705983),t=ln(t,n,i,a,e[8],7,1770035416),a=ln(a,t,n,i,e[9],12,-1958414417),i=ln(i,a,t,n,e[10],17,-42063),n=ln(n,i,a,t,e[11],22,-1990404162),t=ln(t,n,i,a,e[12],7,1804603682),a=ln(a,t,n,i,e[13],12,-40341101),i=ln(i,a,t,n,e[14],17,-1502002290),t=cn(t,n=ln(n,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=cn(a,t,n,i,e[6],9,-1069501632),i=cn(i,a,t,n,e[11],14,643717713),n=cn(n,i,a,t,e[0],20,-373897302),t=cn(t,n,i,a,e[5],5,-701558691),a=cn(a,t,n,i,e[10],9,38016083),i=cn(i,a,t,n,e[15],14,-660478335),n=cn(n,i,a,t,e[4],20,-405537848),t=cn(t,n,i,a,e[9],5,568446438),a=cn(a,t,n,i,e[14],9,-1019803690),i=cn(i,a,t,n,e[3],14,-187363961),n=cn(n,i,a,t,e[8],20,1163531501),t=cn(t,n,i,a,e[13],5,-1444681467),a=cn(a,t,n,i,e[2],9,-51403784),i=cn(i,a,t,n,e[7],14,1735328473),t=fn(t,n=cn(n,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=fn(a,t,n,i,e[8],11,-2022574463),i=fn(i,a,t,n,e[11],16,1839030562),n=fn(n,i,a,t,e[14],23,-35309556),t=fn(t,n,i,a,e[1],4,-1530992060),a=fn(a,t,n,i,e[4],11,1272893353),i=fn(i,a,t,n,e[7],16,-155497632),n=fn(n,i,a,t,e[10],23,-1094730640),t=fn(t,n,i,a,e[13],4,681279174),a=fn(a,t,n,i,e[0],11,-358537222),i=fn(i,a,t,n,e[3],16,-722521979),n=fn(n,i,a,t,e[6],23,76029189),t=fn(t,n,i,a,e[9],4,-640364487),a=fn(a,t,n,i,e[12],11,-421815835),i=fn(i,a,t,n,e[15],16,530742520),t=dn(t,n=fn(n,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=dn(a,t,n,i,e[7],10,1126891415),i=dn(i,a,t,n,e[14],15,-1416354905),n=dn(n,i,a,t,e[5],21,-57434055),t=dn(t,n,i,a,e[12],6,1700485571),a=dn(a,t,n,i,e[3],10,-1894986606),i=dn(i,a,t,n,e[10],15,-1051523),n=dn(n,i,a,t,e[1],21,-2054922799),t=dn(t,n,i,a,e[8],6,1873313359),a=dn(a,t,n,i,e[15],10,-30611744),i=dn(i,a,t,n,e[6],15,-1560198380),n=dn(n,i,a,t,e[13],21,1309151649),t=dn(t,n,i,a,e[4],6,-145523070),a=dn(a,t,n,i,e[11],10,-1120210379),i=dn(i,a,t,n,e[2],15,718787259),n=dn(n,i,a,t,e[9],21,-343485551),r[0]=Na(t,r[0]),r[1]=Na(n,r[1]),r[2]=Na(i,r[2]),r[3]=Na(a,r[3])}function Ac(r,e,t,n,i,a){return e=Na(Na(e,r),Na(n,a)),Na(e<<i|e>>>32-i,t)}function ln(r,e,t,n,i,a,s){return Ac(e&t|~e&n,r,e,i,a,s)}function cn(r,e,t,n,i,a,s){return Ac(e&n|t&~n,r,e,i,a,s)}function fn(r,e,t,n,i,a,s){return Ac(e^t^n,r,e,i,a,s)}function dn(r,e,t,n,i,a,s){return Ac(t^(e|~n),r,e,i,a,s)}function tp(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Df(n,S3(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Df(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Df(n,i),n}function S3(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var J0="0123456789abcdef".split("");function _3(r){for(var e="",t=0;t<4;t++)e+=J0[r>>8*t+4&15]+J0[r>>8*t&15];return e}function C3(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function ld(r){return tp(r).map(C3).join("")}var I3=function(r){for(var e=0;e<r.length;e++)r[e]=_3(r[e]);return r.join("")}(tp("hello"))!="5d41402abc4b2a76b9719d911017c592";function Na(r,e){if(I3){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function cd(r,e){var t,n,i,a;if(r!==t){for(var s=(i=r,a=1+(256/r.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var f=o[l];c=(c+f+s.charCodeAt(l))%256,o[l]=o[c],o[c]=f}t=r,n=o}else o=n;var u=e.length,p=0,h=0,m="";for(l=0;l<u;l++)h=(h+(f=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=f,s=o[(o[p]+o[h])%256],m+=String.fromCharCode(e.charCodeAt(l)^s);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var e1={print:4,modify:8,copy:16,"annot-forms":32};function Oo(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(o){if(e1.perm!==void 0)throw new Error("Invalid permission: "+o);i+=e1[o]}),this.padding="(Â¿N^NuÂŠAd\0NVÃ¿Ãº\b..\0Â¶Ãh>Â€/\fÂ©Ã¾dSiz";var a=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=ld(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=cd(this.encryptionKey,this.padding)}function To(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return e}function t1(r){if(Yt(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[n,!!i],a},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var s=e[t][a];try{s[0].apply(r,n)}catch(o){pt.console&&er.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function fc(r){if(!(this instanceof fc))return new fc(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function rp(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function to(r,e,t,n,i){if(!(this instanceof to))return new to(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,rp.call(this,n,i)}function Mo(r,e,t,n,i){if(!(this instanceof Mo))return new Mo(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,rp.call(this,n,i)}function nt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,c="S",f=null;Yt(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,a=r.compress||r.compressPdf||a,(f=r.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(l=r.floatPrecision),c=r.defaultPathOperation||"S"),s=r.filters||(a===!0?["FlateEncode"]:s),n=n||"mm",t=(""+(t||"P")).toLowerCase();var u=r.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=t1;var m="1.3",v=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(w){m=w};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return b};var y=h.__private__.getPageFormat=function(w){return b[w]};i=i||"a4";var E="compat",D="advanced",C=E;function z(){this.saveGraphicsState(),Z(new ft(Ve,0,0,-Ve,0,Ua()*Ve).toString()+" cm"),this.setFontSize(this.getFontSize()/Ve),c="n",C=D}function k(){this.restoreGraphicsState(),c="S",C=E}var W=h.__private__.combineFontStyleAndFontWeight=function(w,H){if(w=="bold"&&H=="normal"||w=="bold"&&H==400||w=="normal"&&H=="italic"||w=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(w=H==400||H==="normal"?w==="italic"?"italic":"normal":H!=700&&H!=="bold"||w!=="normal"?(H==700?"bold":H)+""+w:"bold"),w};h.advancedAPI=function(w){var H=C===E;return H&&z.call(this),typeof w!="function"||(w(this),H&&k.call(this)),this},h.compatAPI=function(w){var H=C===D;return H&&k.call(this),typeof w!="function"||(w(this),H&&z.call(this)),this},h.isAdvancedAPI=function(){return C===D};var j,I=function(w){if(C!==D)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},P=h.roundToPrecision=h.__private__.roundToPrecision=function(w,H){var ie=e||H;if(isNaN(w)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(ie).replace(/0+$/,"")};j=h.hpf=h.__private__.hpf=typeof l=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return P(w,l)}:l==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return P(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return P(w,16)};var N=h.f2=h.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return P(w,2)},S=h.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return P(w,3)},O=h.scale=h.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return C===E?w*Ve:C===D?w:void 0},A=function(w){return O(function(H){return C===E?Ua()-H:C===D?H:void 0}(w))};h.__private__.setPrecision=h.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var B,T="00000000000000000000000000000000",L=h.__private__.getFileId=function(){return T},Y=h.__private__.setFileId=function(w){return T=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():T.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Nr=new Oo(f.userPermissions,f.userPassword,f.ownerPassword,T)),T};h.setFileId=function(w){return Y(w),this},h.getFileId=function(){return L()};var X=h.__private__.convertDateToPDFDate=function(w){var H=w.getTimezoneOffset(),ie=H<0?"+":"-",se=Math.floor(Math.abs(H/60)),ge=Math.abs(H%60),_e=[ie,U(se),"'",U(ge),"'"].join("");return["D:",w.getFullYear(),U(w.getMonth()+1),U(w.getDate()),U(w.getHours()),U(w.getMinutes()),U(w.getSeconds()),_e].join("")},ae=h.__private__.convertPDFDateToDate=function(w){var H=parseInt(w.substr(2,4),10),ie=parseInt(w.substr(6,2),10)-1,se=parseInt(w.substr(8,2),10),ge=parseInt(w.substr(10,2),10),_e=parseInt(w.substr(12,2),10),Ne=parseInt(w.substr(14,2),10);return new Date(H,ie,se,ge,_e,Ne,0)},Q=h.__private__.setCreationDate=function(w){var H;if(w===void 0&&(w=new Date),w instanceof Date)H=X(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=w}return B=H},M=h.__private__.getCreationDate=function(w){var H=B;return w==="jsDate"&&(H=ae(B)),H};h.setCreationDate=function(w){return Q(w),this},h.getCreationDate=function(w){return M(w)};var F,U=h.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},V=h.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},te=0,le=[],he=[],pe=0,de=[],be=[],Ee=!1,Re=he;h.__private__.setCustomOutputDestination=function(w){Ee=!0,Re=w};var Fe=function(w){Ee||(Re=w)};h.__private__.resetCustomOutputDestination=function(){Ee=!1,Re=he};var Z=h.__private__.out=function(w){return w=w.toString(),pe+=w.length+1,Re.push(w),Re},je=h.__private__.write=function(w){return Z(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},He=h.__private__.getArrayBuffer=function(w){for(var H=w.length,ie=new ArrayBuffer(H),se=new Uint8Array(ie);H--;)se[H]=w.charCodeAt(H);return ie},Te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return Te};var fe=r.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(w){return fe=C===D?w/Ve:w,this};var Le,Ie=h.__private__.getFontSize=h.getFontSize=function(){return C===E?fe:fe*Ve},Ue=r.R2L||!1;h.__private__.setR2L=h.setR2L=function(w){return Ue=w,this},h.__private__.getR2L=h.getR2L=function(){return Ue};var Me,Oe=h.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))Le=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');Le=w}else Le=parseInt(w,10)};h.__private__.getZoomMode=function(){return Le};var rt,Qe=h.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Me=w};h.__private__.getPageMode=function(){return Me};var At=h.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');rt=w};h.__private__.getLayoutMode=function(){return rt},h.__private__.setDisplayMode=h.setDisplayMode=function(w,H,ie){return Oe(w),At(H),Qe(ie),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(w){if(Object.keys(it).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[w]},h.__private__.getDocumentProperties=function(){return it},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(w){for(var H in it)it.hasOwnProperty(H)&&w[H]&&(it[H]=w[H]);return this},h.__private__.setDocumentProperty=function(w,H){if(Object.keys(it).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[w]=H};var qe,Ve,ze,kt,yt,ct={},ut={},Kt=[],at={},Ut={},st={},dt={},rr=null,ht=0,Je=[],Et=new t1(h),kn=r.hotfixes||[],Er={},Xr={},Ur=[],ft=function w(H,ie,se,ge,_e,Ne){if(!(this instanceof w))return new w(H,ie,se,ge,_e,Ne);isNaN(H)&&(H=1),isNaN(ie)&&(ie=0),isNaN(se)&&(se=0),isNaN(ge)&&(ge=1),isNaN(_e)&&(_e=0),isNaN(Ne)&&(Ne=0),this._matrix=[H,ie,se,ge,_e,Ne]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(w)},ft.prototype.multiply=function(w){var H=w.sx*this.sx+w.shy*this.shx,ie=w.sx*this.shy+w.shy*this.sy,se=w.shx*this.sx+w.sy*this.shx,ge=w.shx*this.shy+w.sy*this.sy,_e=w.tx*this.sx+w.ty*this.shx+this.tx,Ne=w.tx*this.shy+w.ty*this.sy+this.ty;return new ft(H,ie,se,ge,_e,Ne)},ft.prototype.decompose=function(){var w=this.sx,H=this.shy,ie=this.shx,se=this.sy,ge=this.tx,_e=this.ty,Ne=Math.sqrt(w*w+H*H),Xe=(w/=Ne)*ie+(H/=Ne)*se;ie-=w*Xe,se-=H*Xe;var et=Math.sqrt(ie*ie+se*se);return Xe/=et,w*(se/=et)<H*(ie/=et)&&(w=-w,H=-H,Xe=-Xe,Ne=-Ne),{scale:new ft(Ne,0,0,et,0,0),translate:new ft(1,0,0,1,ge,_e),rotate:new ft(w,H,-H,w,0,0),skew:new ft(1,0,Xe,1,0,0)}},ft.prototype.toString=function(w){return this.join(" ")},ft.prototype.inversed=function(){var w=this.sx,H=this.shy,ie=this.shx,se=this.sy,ge=this.tx,_e=this.ty,Ne=1/(w*se-H*ie),Xe=se*Ne,et=-H*Ne,gt=-ie*Ne,wt=w*Ne;return new ft(Xe,et,gt,wt,-Xe*ge-gt*_e,-et*ge-wt*_e)},ft.prototype.applyToPoint=function(w){var H=w.x*this.sx+w.y*this.shx+this.tx,ie=w.x*this.shy+w.y*this.sy+this.ty;return new Wi(H,ie)},ft.prototype.applyToRectangle=function(w){var H=this.applyToPoint(w),ie=this.applyToPoint(new Wi(w.x+w.w,w.y+w.h));return new rs(H.x,H.y,ie.x-H.x,ie.y-H.y)},ft.prototype.clone=function(){var w=this.sx,H=this.shy,ie=this.shx,se=this.sy,ge=this.tx,_e=this.ty;return new ft(w,H,ie,se,ge,_e)},h.Matrix=ft;var Pi=h.matrixMult=function(w,H){return H.multiply(w)},Mi=new ft(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Mi;var Un=function(w,H){if(!Ut[w]){var ie=(H instanceof to?"Sh":"P")+(Object.keys(at).length+1).toString(10);H.id=ie,Ut[w]=ie,at[ie]=H,Et.publish("addPattern",H)}};h.ShadingPattern=to,h.TilingPattern=Mo,h.addShadingPattern=function(w,H){return I("addShadingPattern()"),Un(w,H),this},h.beginTilingPattern=function(w){I("beginTilingPattern()"),ns(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},h.endTilingPattern=function(w,H){I("endTilingPattern()"),H.stream=be[F].join(`
`),Un(w,H),Et.publish("endTilingPattern",H),Ur.pop().restore()};var Wn,hr=h.__private__.newObject=function(){var w=Wr();return Yr(w,!0),w},Wr=h.__private__.newObjectDeferred=function(){return te++,le[te]=function(){return pe},te},Yr=function(w,H){return H=typeof H=="boolean"&&H,le[w]=pe,H&&Z(w+" 0 obj"),w},Ra=h.__private__.newAdditionalObject=function(){var w={objId:Wr(),content:""};return de.push(w),w},sa=Wr(),ti=Wr(),bi=h.__private__.decodeColorString=function(w){var H=w.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ie=parseFloat(H[0]);H=[ie,ie,ie,"r"]}for(var se="#",ge=0;ge<3;ge++)se+=("0"+Math.floor(255*parseFloat(H[ge])).toString(16)).slice(-2);return se},ri=h.__private__.encodeColorString=function(w){var H;typeof w=="string"&&(w={ch1:w});var ie=w.ch1,se=w.ch2,ge=w.ch3,_e=w.ch4,Ne=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var Xe=new ep(ie);if(Xe.ok)ie=Xe.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var et=parseInt(ie.substr(1),16);ie=et>>16&255,se=et>>8&255,ge=255&et}if(se===void 0||_e===void 0&&ie===se&&se===ge)H=typeof ie=="string"?ie+" "+Ne[0]:w.precision===2?N(ie/255)+" "+Ne[0]:S(ie/255)+" "+Ne[0];else if(_e===void 0||Yt(_e)==="object"){if(_e&&!isNaN(_e.a)&&_e.a===0)return["1.","1.","1.",Ne[1]].join(" ");H=typeof ie=="string"?[ie,se,ge,Ne[1]].join(" "):w.precision===2?[N(ie/255),N(se/255),N(ge/255),Ne[1]].join(" "):[S(ie/255),S(se/255),S(ge/255),Ne[1]].join(" ")}else H=typeof ie=="string"?[ie,se,ge,_e,Ne[2]].join(" "):w.precision===2?[N(ie),N(se),N(ge),N(_e),Ne[2]].join(" "):[S(ie),S(se),S(ge),S(_e),Ne[2]].join(" ");return H},ni=h.__private__.getFilters=function(){return s},Hn=h.__private__.putStream=function(w){var H=(w=w||{}).data||"",ie=w.filters||ni(),se=w.alreadyAppliedFilters||[],ge=w.addLength1||!1,_e=H.length,Ne=w.objectId,Xe=function(Dr){return Dr};if(f!==null&&Ne===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Xe=Nr.encryptor(Ne,0));var et={};ie===!0&&(ie=["FlateEncode"]);var gt=w.additionalKeyValues||[],wt=(et=nt.API.processDataByFilters!==void 0?nt.API.processDataByFilters(H,ie):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(et.data.length!==0&&(gt.push({key:"Length",value:et.data.length}),ge===!0&&gt.push({key:"Length1",value:_e})),wt.length!=0)if(wt.split("/").length-1==1)gt.push({key:"Filter",value:wt});else{gt.push({key:"Filter",value:"["+wt+"]"});for(var Tt=0;Tt<gt.length;Tt+=1)if(gt[Tt].key==="DecodeParms"){for(var ur=[],Cr=0;Cr<et.reverseChain.split("/").length-1;Cr+=1)ur.push("null");ur.push(gt[Tt].value),gt[Tt].value="["+ur.join(" ")+"]"}}Z("<<");for(var nr=0;nr<gt.length;nr++)Z("/"+gt[nr].key+" "+gt[nr].value);Z(">>"),et.data.length!==0&&(Z("stream"),Z(Xe(et.data)),Z("endstream"))},La=h.__private__.putPage=function(w){var H=w.number,ie=w.data,se=w.objId,ge=w.contentsObjId;Yr(se,!0),Z("<</Type /Page"),Z("/Parent "+w.rootDictionaryObjId+" 0 R"),Z("/Resources "+w.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(j(w.mediaBox.bottomLeftX))+" "+parseFloat(j(w.mediaBox.bottomLeftY))+" "+j(w.mediaBox.topRightX)+" "+j(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&Z("/CropBox ["+j(w.cropBox.bottomLeftX)+" "+j(w.cropBox.bottomLeftY)+" "+j(w.cropBox.topRightX)+" "+j(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&Z("/BleedBox ["+j(w.bleedBox.bottomLeftX)+" "+j(w.bleedBox.bottomLeftY)+" "+j(w.bleedBox.topRightX)+" "+j(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&Z("/TrimBox ["+j(w.trimBox.bottomLeftX)+" "+j(w.trimBox.bottomLeftY)+" "+j(w.trimBox.topRightX)+" "+j(w.trimBox.topRightY)+"]"),w.artBox!==null&&Z("/ArtBox ["+j(w.artBox.bottomLeftX)+" "+j(w.artBox.bottomLeftY)+" "+j(w.artBox.topRightX)+" "+j(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&Z("/UserUnit "+w.userUnit),Et.publish("putPage",{objId:se,pageContext:Je[H],pageNumber:H,page:ie}),Z("/Contents "+ge+" 0 R"),Z(">>"),Z("endobj");var _e=ie.join(`
`);return C===D&&(_e+=`
Q`),Yr(ge,!0),Hn({data:_e,filters:ni(),objectId:ge}),Z("endobj"),se},wi=h.__private__.putPages=function(){var w,H,ie=[];for(w=1;w<=ht;w++)Je[w].objId=Wr(),Je[w].contentsObjId=Wr();for(w=1;w<=ht;w++)ie.push(La({number:w,data:be[w],objId:Je[w].objId,contentsObjId:Je[w].contentsObjId,mediaBox:Je[w].mediaBox,cropBox:Je[w].cropBox,bleedBox:Je[w].bleedBox,trimBox:Je[w].trimBox,artBox:Je[w].artBox,userUnit:Je[w].userUnit,rootDictionaryObjId:sa,resourceDictionaryObjId:ti}));Yr(sa,!0),Z("<</Type /Pages");var se="/Kids [";for(H=0;H<ht;H++)se+=ie[H]+" 0 R ";Z(se+"]"),Z("/Count "+ht),Z(">>"),Z("endobj"),Et.publish("postPutPages")},Pa=function(w){Et.publish("putFont",{font:w,out:Z,newObject:hr,putStream:Hn}),w.isAlreadyPutted!==!0&&(w.objectNumber=hr(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+To(w.postScriptName)),Z("/Subtype /Type1"),typeof w.encoding=="string"&&Z("/Encoding /"+w.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},po=function(w){w.objectNumber=hr();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[j(w.x),j(w.y),j(w.x+w.width),j(w.y+w.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var ie=w.pages[1].join(`
`);Hn({data:ie,additionalKeyValues:H,objectId:w.objectNumber}),Z("endobj")},go=function(w,H){H||(H=21);var ie=hr(),se=function(Ne,Xe){var et,gt=[],wt=1/(Xe-1);for(et=0;et<1;et+=wt)gt.push(et);if(gt.push(1),Ne[0].offset!=0){var Tt={offset:0,color:Ne[0].color};Ne.unshift(Tt)}if(Ne[Ne.length-1].offset!=1){var ur={offset:1,color:Ne[Ne.length-1].color};Ne.push(ur)}for(var Cr="",nr=0,Dr=0;Dr<gt.length;Dr++){for(et=gt[Dr];et>Ne[nr+1].offset;)nr++;var Ir=Ne[nr].offset,Kr=(et-Ir)/(Ne[nr+1].offset-Ir),Vi=Ne[nr].color,ai=Ne[nr+1].color;Cr+=V(Math.round((1-Kr)*Vi[0]+Kr*ai[0]).toString(16))+V(Math.round((1-Kr)*Vi[1]+Kr*ai[1]).toString(16))+V(Math.round((1-Kr)*Vi[2]+Kr*ai[2]).toString(16))}return Cr.trim()}(w.colors,H),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+H+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hn({data:se,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),Z("endobj"),w.objectNumber=hr(),Z("<< /ShadingType "+w.type),Z("/ColorSpace /DeviceRGB");var _e="/Coords ["+j(parseFloat(w.coords[0]))+" "+j(parseFloat(w.coords[1]))+" ";w.type===2?_e+=j(parseFloat(w.coords[2]))+" "+j(parseFloat(w.coords[3])):_e+=j(parseFloat(w.coords[2]))+" "+j(parseFloat(w.coords[3]))+" "+j(parseFloat(w.coords[4]))+" "+j(parseFloat(w.coords[5])),Z(_e+="]"),w.matrix&&Z("/Matrix ["+w.matrix.toString()+"]"),Z("/Function "+ie+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},mo=function(w,H){var ie=Wr(),se=hr();H.push({resourcesOid:ie,objectOid:se}),w.objectNumber=se;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+w.boundingBox.map(j).join(" ")+"]"}),ge.push({key:"XStep",value:j(w.xStep)}),ge.push({key:"YStep",value:j(w.yStep)}),ge.push({key:"Resources",value:ie+" 0 R"}),w.matrix&&ge.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Hn({data:w.stream,additionalKeyValues:ge,objectId:w.objectNumber}),Z("endobj")},_c=function(w){for(var H in w.objectNumber=hr(),Z("<<"),w)switch(H){case"opacity":Z("/ca "+N(w[H]));break;case"stroke-opacity":Z("/CA "+N(w[H]))}Z(">>"),Z("endobj")},Xo=function(w){Yr(w.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var H in Z("/Font <<"),ct)ct.hasOwnProperty(H)&&(u===!1||u===!0&&p.hasOwnProperty(H))&&Z("/"+H+" "+ct[H].objectNumber+" 0 R");Z(">>")}(),function(){if(Object.keys(at).length>0){for(var H in Z("/Shading <<"),at)at.hasOwnProperty(H)&&at[H]instanceof to&&at[H].objectNumber>=0&&Z("/"+H+" "+at[H].objectNumber+" 0 R");Et.publish("putShadingPatternDict"),Z(">>")}}(),function(H){if(Object.keys(at).length>0){for(var ie in Z("/Pattern <<"),at)at.hasOwnProperty(ie)&&at[ie]instanceof h.TilingPattern&&at[ie].objectNumber>=0&&at[ie].objectNumber<H&&Z("/"+ie+" "+at[ie].objectNumber+" 0 R");Et.publish("putTilingPatternDict"),Z(">>")}}(w.objectOid),function(){if(Object.keys(st).length>0){var H;for(H in Z("/ExtGState <<"),st)st.hasOwnProperty(H)&&st[H].objectNumber>=0&&Z("/"+H+" "+st[H].objectNumber+" 0 R");Et.publish("putGStateDict"),Z(">>")}}(),function(){for(var H in Z("/XObject <<"),Er)Er.hasOwnProperty(H)&&Er[H].objectNumber>=0&&Z("/"+H+" "+Er[H].objectNumber+" 0 R");Et.publish("putXobjectDict"),Z(">>")}(),Z(">>"),Z("endobj")},Ys=function(w){ut[w.fontName]=ut[w.fontName]||{},ut[w.fontName][w.fontStyle]=w.id},Ks=function(w,H,ie,se,ge){var _e={id:"F"+(Object.keys(ct).length+1).toString(10),postScriptName:w,fontName:H,fontStyle:ie,encoding:se,isStandardFont:ge||!1,metadata:{}};return Et.publish("addFont",{font:_e,instance:this}),ct[_e.id]=_e,Ys(_e),_e.id},qn=h.__private__.pdfEscape=h.pdfEscape=function(w,H){return function(ie,se){var ge,_e,Ne,Xe,et,gt,wt,Tt,ur;if(Ne=(se=se||{}).sourceEncoding||"Unicode",et=se.outputEncoding,(se.autoencode||et)&&ct[qe].metadata&&ct[qe].metadata[Ne]&&ct[qe].metadata[Ne].encoding&&(Xe=ct[qe].metadata[Ne].encoding,!et&&ct[qe].encoding&&(et=ct[qe].encoding),!et&&Xe.codePages&&(et=Xe.codePages[0]),typeof et=="string"&&(et=Xe[et]),et)){for(wt=!1,gt=[],ge=0,_e=ie.length;ge<_e;ge++)(Tt=et[ie.charCodeAt(ge)])?gt.push(String.fromCharCode(Tt)):gt.push(ie[ge]),gt[ge].charCodeAt(0)>>8&&(wt=!0);ie=gt.join("")}for(ge=ie.length;wt===void 0&&ge!==0;)ie.charCodeAt(ge-1)>>8&&(wt=!0),ge--;if(!wt)return ie;for(gt=se.noBOM?[]:[254,255],ge=0,_e=ie.length;ge<_e;ge++){if((ur=(Tt=ie.charCodeAt(ge))>>8)>>8)throw new Error("Character at position "+ge+" of string '"+ie+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gt.push(ur),gt.push(Tt-(ur<<8))}return String.fromCharCode.apply(void 0,gt)}(w,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yo=h.__private__.beginPage=function(w){be[++ht]=[],Je[ht]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},Qs(ht),Fe(be[F])},Zs=function(w,H){var ie,se,ge;switch(t=H||t,typeof w=="string"&&(ie=y(w.toLowerCase()),Array.isArray(ie)&&(se=ie[0],ge=ie[1])),Array.isArray(w)&&(se=w[0]*Ve,ge=w[1]*Ve),isNaN(se)&&(se=i[0],ge=i[1]),(se>14400||ge>14400)&&(er.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),ge=Math.min(14400,ge)),i=[se,ge],t.substr(0,1)){case"l":ge>se&&(i=[ge,se]);break;case"p":se>ge&&(i=[ge,se])}Yo(i),mt(Qo),Z(bo),es!==0&&Z(es+" J"),ts!==0&&Z(ts+" j"),Et.publish("addPage",{pageNumber:ht})},Ko=function(w){w>0&&w<=ht&&(be.splice(w,1),Je.splice(w,1),ht--,F>ht&&(F=ht),this.setPage(F))},Qs=function(w){w>0&&w<=ht&&(F=w)},Js=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return be.length-1},el=function(w,H,ie){var se,ge=void 0;return ie=ie||{},w=w!==void 0?w:ct[qe].fontName,H=H!==void 0?H:ct[qe].fontStyle,se=w.toLowerCase(),ut[se]!==void 0&&ut[se][H]!==void 0?ge=ut[se][H]:ut[w]!==void 0&&ut[w][H]!==void 0?ge=ut[w][H]:ie.disableWarning===!1&&er.warn("Unable to look up font label for font '"+w+"', '"+H+"'. Refer to getFontList() for available fonts."),ge||ie.noFallback||(ge=ut.times[H])==null&&(ge=ut.times.normal),ge},Ai=h.__private__.putInfo=function(){var w=hr(),H=function(se){return se};for(var ie in f!==null&&(H=Nr.encryptor(w,0)),Z("<<"),Z("/Producer ("+qn(H("jsPDF "+nt.version))+")"),it)it.hasOwnProperty(ie)&&it[ie]&&Z("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+qn(H(it[ie]))+")");Z("/CreationDate ("+qn(H(B))+")"),Z(">>"),Z("endobj")},xo=h.__private__.putCatalog=function(w){var H=(w=w||{}).rootDictionaryObjId||sa;switch(hr(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+H+" 0 R"),Le||(Le="fullwidth"),Le){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+Le;ie.substr(ie.length-1)==="%"&&(Le=parseInt(Le)/100),typeof Le=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+N(Le)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}Me&&Z("/PageMode /"+Me),Et.publish("putCatalog"),Z(">>"),Z("endobj")},Cc=h.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(te+1)),Z("/Root "+te+" 0 R"),Z("/Info "+(te-1)+" 0 R"),f!==null&&Z("/Encrypt "+Nr.oid+" 0 R"),Z("/ID [ <"+T+"> <"+T+"> ]"),Z(">>")},_r=h.__private__.putHeader=function(){Z("%PDF-"+m),Z("%ÂºÃŸÂ¬Ã ")},tl=h.__private__.putXRef=function(){var w="0000000000";Z("xref"),Z("0 "+(te+1)),Z("0000000000 65535 f ");for(var H=1;H<=te;H++)typeof le[H]=="function"?Z((w+le[H]()).slice(-10)+" 00000 n "):le[H]!==void 0?Z((w+le[H]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},Si=h.__private__.buildDocument=function(){var w;te=0,pe=0,he=[],le=[],de=[],sa=Wr(),ti=Wr(),Fe(he),Et.publish("buildDocument"),_r(),wi(),function(){Et.publish("putAdditionalObjects");for(var ie=0;ie<de.length;ie++){var se=de[ie];Yr(se.objId,!0),Z(se.content),Z("endobj")}Et.publish("postPutAdditionalObjects")}(),w=[],function(){for(var ie in ct)ct.hasOwnProperty(ie)&&(u===!1||u===!0&&p.hasOwnProperty(ie))&&Pa(ct[ie])}(),function(){var ie;for(ie in st)st.hasOwnProperty(ie)&&_c(st[ie])}(),function(){for(var ie in Er)Er.hasOwnProperty(ie)&&po(Er[ie])}(),function(ie){var se;for(se in at)at.hasOwnProperty(se)&&(at[se]instanceof to?go(at[se]):at[se]instanceof Mo&&mo(at[se],ie))}(w),Et.publish("putResources"),w.forEach(Xo),Xo({resourcesOid:ti,objectOid:Number.MAX_SAFE_INTEGER}),Et.publish("postPutResources"),f!==null&&(Nr.oid=hr(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Nr.v),Z("/R "+Nr.r),Z("/U <"+Nr.toHexString(Nr.U)+">"),Z("/O <"+Nr.toHexString(Nr.O)+">"),Z("/P "+Nr.P),Z(">>"),Z("endobj")),Ai(),xo();var H=pe;return tl(),Cc(),Z("startxref"),Z(""+H),Z("%%EOF"),Fe(be[F]),he.join(`
`)},vo=h.__private__.getBlob=function(w){return new Blob([He(w)],{type:"application/pdf"})},rl=h.output=h.__private__.output=(Wn=function(w,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",w){case void 0:return Si();case"save":h.save(H.filename);break;case"arraybuffer":return He(Si());case"blob":return vo(Si());case"bloburi":case"bloburl":if(pt.URL!==void 0&&typeof pt.URL.createObjectURL=="function")return pt.URL&&pt.URL.createObjectURL(vo(Si()))||void 0;er.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",se=Si();try{ie=Q0(se)}catch{ie=Q0(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+H.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",_e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(ge=H.pdfObjectUrl,_e="");var Ne='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+_e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",Xe=pt.open();return Xe!==null&&Xe.document.write(Ne),Xe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',gt=pt.open();if(gt!==null){gt.document.write(et);var wt=this;gt.document.documentElement.querySelector("#pdfViewer").onload=function(){gt.document.title=H.filename,gt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(wt.output("bloburl"))}}return gt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',ur=pt.open();if(ur!==null&&(ur.document.write(Tt),ur.document.title=H.filename),ur||typeof safari>"u")return ur;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",H);default:return null}},Wn.foo=function(){try{return Wn.apply(this,arguments)}catch(ie){var w=ie.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var H="Error in function "+w.split(`
`)[0].split("<")[0]+": "+ie.message;if(!pt.console)throw new Error(H);pt.console.error(H,ie),pt.alert&&alert(H)}},Wn.foo.bar=Wn,Wn.foo),Vn=function(w){return Array.isArray(kn)===!0&&kn.indexOf(w)>-1};switch(n){case"pt":Ve=1;break;case"mm":Ve=72/25.4;break;case"cm":Ve=72/2.54;break;case"in":Ve=72;break;case"px":Ve=Vn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ve=12;break;case"ex":Ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ve=n}var Nr=null;Q(),Y();var Bi=h.__private__.getPageInfo=h.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Je[w].objId,pageNumber:w,pageContext:Je[w]}},nl=h.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Je)if(Je[H].objId===w)break;return Bi(H)},Ic=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Je[F].objId,pageNumber:F,pageContext:Je[F]}};h.addPage=function(){return Zs.apply(this,arguments),this},h.setPage=function(){return Qs.apply(this,arguments),Fe.call(this,be[F]),this},h.insertPage=function(w){return this.addPage(),this.movePage(F,w),this},h.movePage=function(w,H){var ie,se;if(w>H){ie=be[w],se=Je[w];for(var ge=w;ge>H;ge--)be[ge]=be[ge-1],Je[ge]=Je[ge-1];be[H]=ie,Je[H]=se,this.setPage(H)}else if(w<H){ie=be[w],se=Je[w];for(var _e=w;_e<H;_e++)be[_e]=be[_e+1],Je[_e]=Je[_e+1];be[H]=ie,Je[H]=se,this.setPage(H)}return this},h.deletePage=function(){return Ko.apply(this,arguments),this},h.__private__.text=h.text=function(w,H,ie,se,ge){var _e,Ne,Xe,et,gt,wt,Tt,ur,Cr,nr=(se=se||{}).scope||this;if(typeof w=="number"&&typeof H=="number"&&(typeof ie=="string"||Array.isArray(ie))){var Dr=ie;ie=H,H=w,w=Dr}if(arguments[3]instanceof ft==0?(Xe=arguments[4],et=arguments[5],Yt(Tt=arguments[3])==="object"&&Tt!==null||(typeof Xe=="string"&&(et=Xe,Xe=null),typeof Tt=="string"&&(et=Tt,Tt=null),typeof Tt=="number"&&(Xe=Tt,Tt=null),se={flags:Tt,angle:Xe,align:et})):(I("The transform parameter of text() with a Matrix value"),Cr=ge),isNaN(H)||isNaN(ie)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return nr;var Ir,Kr="",Vi=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:Ba,ai=nr.internal.scaleFactor;function Gi(Wt){return Wt=Wt.split("	").join(Array(se.TabLen||9).join(" ")),qn(Wt,Tt)}function as(Wt){for(var Qt,vr=Wt.concat(),kr=[],Yi=vr.length;Yi--;)typeof(Qt=vr.shift())=="string"?kr.push(Qt):Array.isArray(Wt)&&(Qt.length===1||Qt[1]===void 0&&Qt[2]===void 0)?kr.push(Qt[0]):kr.push([Qt[0],Qt[1],Qt[2]]);return kr}function Ao(Wt,Qt){var vr;if(typeof Wt=="string")vr=Qt(Wt)[0];else if(Array.isArray(Wt)){for(var kr,Yi,gs=Wt.concat(),Co=[],pl=gs.length;pl--;)typeof(kr=gs.shift())=="string"?Co.push(Qt(kr)[0]):Array.isArray(kr)&&typeof kr[0]=="string"&&(Yi=Qt(kr[0],kr[1],kr[2]),Co.push([Yi[0],Yi[1],Yi[2]]));vr=Co}return vr}var la=!1,Wa=!0;if(typeof w=="string")la=!0;else if(Array.isArray(w)){var Ha=w.concat();Ne=[];for(var ca,Zr=Ha.length;Zr--;)(typeof(ca=Ha.shift())!="string"||Array.isArray(ca)&&typeof ca[0]!="string")&&(Wa=!1);la=Wa}if(la===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var qa=fe/nr.internal.scaleFactor,Va=qa*(Vi-1);switch(se.baseline){case"bottom":ie-=Va;break;case"top":ie+=qa-Va;break;case"hanging":ie+=qa-2*Va;break;case"middle":ie+=qa/2-Va}if((wt=se.maxWidth||0)>0&&(typeof w=="string"?w=nr.splitTextToSize(w,wt):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Wt,Qt){return Wt.concat(nr.splitTextToSize(Qt,wt))},[]))),_e={text:w,x:H,y:ie,options:se,mutex:{pdfEscape:qn,activeFontKey:qe,fonts:ct,activeFontSize:fe}},Et.publish("preProcessText",_e),w=_e.text,Xe=(se=_e.options).angle,Cr instanceof ft==0&&Xe&&typeof Xe=="number"){Xe*=Math.PI/180,se.rotationDirection===0&&(Xe=-Xe),C===D&&(Xe=-Xe);var os=Math.cos(Xe),ss=Math.sin(Xe);Cr=new ft(os,ss,-ss,os,0,0)}else Xe&&Xe instanceof ft&&(Cr=Xe);C!==D||Cr||(Cr=Mi),(gt=se.charSpace||Ui)!==void 0&&(Kr+=j(O(gt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ur=se.horizontalScale)!==void 0&&(Kr+=j(100*ur)+` Tz
`),se.lang;var gn=-1,$i=se.renderingMode!==void 0?se.renderingMode:se.stroke,So=nr.internal.getCurrentPageInfo().pageContext;switch($i){case 0:case!1:case"fill":gn=0;break;case 1:case!0:case"stroke":gn=1;break;case 2:case"fillThenStroke":gn=2;break;case 3:case"invisible":gn=3;break;case 4:case"fillAndAddForClipping":gn=4;break;case 5:case"strokeAndAddPathForClipping":gn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gn=6;break;case 7:case"addToPathForClipping":gn=7}var ul=So.usedRenderingMode!==void 0?So.usedRenderingMode:-1;gn!==-1?Kr+=gn+` Tr
`:ul!==-1&&(Kr+=`0 Tr
`),gn!==-1&&(So.usedRenderingMode=gn),et=se.align||"left";var Gn,Ga=fe*Vi,ls=nr.internal.pageSize.getWidth(),cs=ct[qe];gt=se.charSpace||Ui,wt=se.maxWidth||0,Tt=Object.assign({autoencode:!0,noBOM:!0},se.flags);var fa=[],$a=function(Wt){return nr.getStringUnitWidth(Wt,{font:cs,charSpace:gt,fontSize:fe,doKerning:!1})*fe/ai};if(Object.prototype.toString.call(w)==="[object Array]"){var jn;Ne=as(w),et!=="left"&&(Gn=Ne.map($a));var On,da=0;if(et==="right"){H-=Gn[0],w=[],Zr=Ne.length;for(var Xi=0;Xi<Zr;Xi++)Xi===0?(On=Fi(H),jn=zi(ie)):(On=O(da-Gn[Xi]),jn=-Ga),w.push([Ne[Xi],On,jn]),da=Gn[Xi]}else if(et==="center"){H-=Gn[0]/2,w=[],Zr=Ne.length;for(var ua=0;ua<Zr;ua++)ua===0?(On=Fi(H),jn=zi(ie)):(On=O((da-Gn[ua])/2),jn=-Ga),w.push([Ne[ua],On,jn]),da=Gn[ua]}else if(et==="left"){w=[],Zr=Ne.length;for(var fs=0;fs<Zr;fs++)w.push(Ne[fs])}else if(et==="justify"&&cs.encoding==="Identity-H"){w=[],Zr=Ne.length,wt=wt!==0?wt:ls;for(var _o=0,xr=0;xr<Zr;xr++)if(jn=xr===0?zi(ie):-Ga,On=xr===0?Fi(H):_o,xr<Zr-1){var hl=O((wt-Gn[xr])/(Ne[xr].split(" ").length-1)),Ci=Ne[xr].split(" ");w.push([Ci[0]+" ",On,jn]),_o=0;for(var Ii=1;Ii<Ci.length;Ii++){var ds=($a(Ci[Ii-1]+" "+Ci[Ii])-$a(Ci[Ii]))*ai+hl;Ii==Ci.length-1?w.push([Ci[Ii],ds,0]):w.push([Ci[Ii]+" ",ds,0]),_o-=ds}}else w.push([Ne[xr],On,jn]);w.push(["",_o,0])}else{if(et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Zr=Ne.length,wt=wt!==0?wt:ls,xr=0;xr<Zr;xr++){jn=xr===0?zi(ie):-Ga,On=xr===0?Fi(H):0;var us=Ne[xr].split(" ").length-1,hs=us>0?(wt-Gn[xr])/us:0;xr<Zr-1?fa.push(j(O(hs))):fa.push(0),w.push([Ne[xr],On,jn])}}}(typeof se.R2L=="boolean"?se.R2L:Ue)===!0&&(w=Ao(w,function(Wt,Qt,vr){return[Wt.split("").reverse().join(""),Qt,vr]})),_e={text:w,x:H,y:ie,options:se,mutex:{pdfEscape:qn,activeFontKey:qe,fonts:ct,activeFontSize:fe}},Et.publish("postProcessText",_e),w=_e.text,Ir=_e.mutex.isHex||!1;var ps=ct[qe].encoding;ps!=="WinAnsiEncoding"&&ps!=="StandardEncoding"||(w=Ao(w,function(Wt,Qt,vr){return[Gi(Wt),Qt,vr]})),Ne=as(w),w=[];for(var ha,pa,ga,Xa=Array.isArray(Ne[0])?1:0,ma="",Ya=function(Wt,Qt,vr){var kr="";return vr instanceof ft?(vr=typeof se.angle=="number"?Pi(vr,new ft(1,0,0,1,Wt,Qt)):Pi(new ft(1,0,0,1,Wt,Qt),vr),C===D&&(vr=Pi(new ft(1,0,0,-1,0,0),vr)),kr=vr.join(" ")+` Tm
`):kr=j(Wt)+" "+j(Qt)+` Td
`,kr},$n=0;$n<Ne.length;$n++){switch(ma="",Xa){case 1:ga=(Ir?"<":"(")+Ne[$n][0]+(Ir?">":")"),ha=parseFloat(Ne[$n][1]),pa=parseFloat(Ne[$n][2]);break;case 0:ga=(Ir?"<":"(")+Ne[$n]+(Ir?">":")"),ha=Fi(H),pa=zi(ie)}fa!==void 0&&fa[$n]!==void 0&&(ma=fa[$n]+` Tw
`),$n===0?w.push(ma+Ya(ha,pa,Cr)+ga):Xa===0?w.push(ma+ga):Xa===1&&w.push(ma+Ya(ha,pa,Cr)+ga)}w=Xa===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Ei=`BT
/`;return Ei+=qe+" "+fe+` Tf
`,Ei+=j(fe*Vi)+` TL
`,Ei+=Fa+`
`,Ei+=Kr,Ei+=w,Z(Ei+="ET"),p[qe]=!0,nr};var Ec=h.__private__.clip=h.clip=function(w){return Z(w==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Ec("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Z("n"),this};var _i=h.__private__.isValidStyle=function(w){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(H=!0),H};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(w){return _i(w)&&(c=w),this};var il=h.__private__.getStyle=h.getStyle=function(w){var H=c;switch(w){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=w}return H},al=h.close=function(){return Z("h"),this};h.stroke=function(){return Z("S"),this},h.fill=function(w){return yo("f",w),this},h.fillEvenOdd=function(w){return yo("f*",w),this},h.fillStroke=function(w){return yo("B",w),this},h.fillStrokeEvenOdd=function(w){return yo("B*",w),this};var yo=function(w,H){Yt(H)==="object"?Dc(H,w):Z(w)},Ma=function(w){w===null||C===D&&w===void 0||(w=il(w),Z(w))};function Nc(w,H,ie,se,ge){var _e=new Mo(H||this.boundingBox,ie||this.xStep,se||this.yStep,this.gState,ge||this.matrix);_e.stream=this.stream;var Ne=w+"$$"+this.cloneIndex+++"$$";return Un(Ne,_e),_e}var Dc=function(w,H){var ie=Ut[w.key],se=at[ie];if(se instanceof to)Z("q"),Z(kc(H)),se.gState&&h.setGState(se.gState),Z(w.matrix.toString()+" cm"),Z("/"+ie+" sh"),Z("Q");else if(se instanceof Mo){var ge=new ft(1,0,0,-1,0,Ua());w.matrix&&(ge=ge.multiply(w.matrix||Mi),ie=Nc.call(se,w.key,w.boundingBox,w.xStep,w.yStep,ge).id),Z("q"),Z("/Pattern cs"),Z("/"+ie+" scn"),se.gState&&h.setGState(se.gState),Z(H),Z("Q")}},kc=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Zo=h.moveTo=function(w,H){return Z(j(O(w))+" "+j(A(H))+" m"),this},ol=h.lineTo=function(w,H){return Z(j(O(w))+" "+j(A(H))+" l"),this},ii=h.curveTo=function(w,H,ie,se,ge,_e){return Z([j(O(w)),j(A(H)),j(O(ie)),j(A(se)),j(O(ge)),j(A(_e)),"c"].join(" ")),this};h.__private__.line=h.line=function(w,H,ie,se,ge){if(isNaN(w)||isNaN(H)||isNaN(ie)||isNaN(se)||!_i(ge))throw new Error("Invalid arguments passed to jsPDF.line");return C===E?this.lines([[ie-w,se-H]],w,H,[1,1],ge||"S"):this.lines([[ie-w,se-H]],w,H,[1,1]).stroke()},h.__private__.lines=h.lines=function(w,H,ie,se,ge,_e){var Ne,Xe,et,gt,wt,Tt,ur,Cr,nr,Dr,Ir,Kr;if(typeof w=="number"&&(Kr=ie,ie=H,H=w,w=Kr),se=se||[1,1],_e=_e||!1,isNaN(H)||isNaN(ie)||!Array.isArray(w)||!Array.isArray(se)||!_i(ge)||typeof _e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zo(H,ie),Ne=se[0],Xe=se[1],gt=w.length,Dr=H,Ir=ie,et=0;et<gt;et++)(wt=w[et]).length===2?(Dr=wt[0]*Ne+Dr,Ir=wt[1]*Xe+Ir,ol(Dr,Ir)):(Tt=wt[0]*Ne+Dr,ur=wt[1]*Xe+Ir,Cr=wt[2]*Ne+Dr,nr=wt[3]*Xe+Ir,Dr=wt[4]*Ne+Dr,Ir=wt[5]*Xe+Ir,ii(Tt,ur,Cr,nr,Dr,Ir));return _e&&al(),Ma(ge),this},h.path=function(w){for(var H=0;H<w.length;H++){var ie=w[H],se=ie.c;switch(ie.op){case"m":Zo(se[0],se[1]);break;case"l":ol(se[0],se[1]);break;case"c":ii.apply(this,se);break;case"h":al()}}return this},h.__private__.rect=h.rect=function(w,H,ie,se,ge){if(isNaN(w)||isNaN(H)||isNaN(ie)||isNaN(se)||!_i(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return C===E&&(se=-se),Z([j(O(w)),j(A(H)),j(O(ie)),j(O(se)),"re"].join(" ")),Ma(ge),this},h.__private__.triangle=h.triangle=function(w,H,ie,se,ge,_e,Ne){if(isNaN(w)||isNaN(H)||isNaN(ie)||isNaN(se)||isNaN(ge)||isNaN(_e)||!_i(Ne))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-w,se-H],[ge-ie,_e-se],[w-ge,H-_e]],w,H,[1,1],Ne,!0),this},h.__private__.roundedRect=h.roundedRect=function(w,H,ie,se,ge,_e,Ne){if(isNaN(w)||isNaN(H)||isNaN(ie)||isNaN(se)||isNaN(ge)||isNaN(_e)||!_i(Ne))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Xe=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*ie),_e=Math.min(_e,.5*se),this.lines([[ie-2*ge,0],[ge*Xe,0,ge,_e-_e*Xe,ge,_e],[0,se-2*_e],[0,_e*Xe,-ge*Xe,_e,-ge,_e],[2*ge-ie,0],[-ge*Xe,0,-ge,-_e*Xe,-ge,-_e],[0,2*_e-se],[0,-_e*Xe,ge*Xe,-_e,ge,-_e]],w+ge,H,[1,1],Ne,!0),this},h.__private__.ellipse=h.ellipse=function(w,H,ie,se,ge){if(isNaN(w)||isNaN(H)||isNaN(ie)||isNaN(se)||!_i(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var _e=4/3*(Math.SQRT2-1)*ie,Ne=4/3*(Math.SQRT2-1)*se;return Zo(w+ie,H),ii(w+ie,H-Ne,w+_e,H-se,w,H-se),ii(w-_e,H-se,w-ie,H-Ne,w-ie,H),ii(w-ie,H+Ne,w-_e,H+se,w,H+se),ii(w+_e,H+se,w+ie,H+Ne,w+ie,H),Ma(ge),this},h.__private__.circle=h.circle=function(w,H,ie,se){if(isNaN(w)||isNaN(H)||isNaN(ie)||!_i(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,H,ie,ie,se)},h.setFont=function(w,H,ie){return ie&&(H=W(H,ie)),qe=el(w,H,{disableWarning:!1}),this};var jc=h.__private__.getFont=h.getFont=function(){return ct[el.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var w,H,ie={};for(w in ut)if(ut.hasOwnProperty(w))for(H in ie[w]=[],ut[w])ut[w].hasOwnProperty(H)&&ie[w].push(H);return ie},h.addFont=function(w,H,ie,se,ge){var _e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&_e.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&_e.indexOf(arguments[3])==-1&&(ie=W(ie,se)),Ks.call(this,w,H,ie,ge=ge||"Identity-H")};var Ba,Qo=r.lineWidth||.200025,Oc=h.__private__.getLineWidth=h.getLineWidth=function(){return Qo},mt=h.__private__.setLineWidth=h.setLineWidth=function(w){return Qo=w,Z(j(O(w))+" w"),this};h.__private__.setLineDash=nt.API.setLineDash=nt.API.setLineDashPattern=function(w,H){if(w=w||[],H=H||0,isNaN(H)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(ie){return j(O(ie))}).join(" "),H=j(O(H)),Z("["+w+"] "+H+" d"),this};var Tc=h.__private__.getLineHeight=h.getLineHeight=function(){return fe*Ba};h.__private__.getLineHeight=h.getLineHeight=function(){return fe*Ba};var Rc=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Ba=w),this},Lc=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Ba};Rc(r.lineHeight);var Fi=h.__private__.getHorizontalCoordinate=function(w){return O(w)},zi=h.__private__.getVerticalCoordinate=function(w){return C===D?w:Je[F].mediaBox.topRightY-Je[F].mediaBox.bottomLeftY-O(w)},Pc=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(w){return j(Fi(w))},Mc=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(w){return j(zi(w))},bo=r.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return bi(bo)},h.__private__.setStrokeColor=h.setDrawColor=function(w,H,ie,se){return bo=ri({ch1:w,ch2:H,ch3:ie,ch4:se,pdfColorType:"draw",precision:2}),Z(bo),this};var Jo=r.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return bi(Jo)},h.__private__.setFillColor=h.setFillColor=function(w,H,ie,se){return Jo=ri({ch1:w,ch2:H,ch3:ie,ch4:se,pdfColorType:"fill",precision:2}),Z(Jo),this};var Fa=r.textColor||"0 g",Bc=h.__private__.getTextColor=h.getTextColor=function(){return bi(Fa)};h.__private__.setTextColor=h.setTextColor=function(w,H,ie,se){return Fa=ri({ch1:w,ch2:H,ch3:ie,ch4:se,pdfColorType:"text",precision:3}),this};var Ui=r.charSpace,Fc=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Ui||0)};h.__private__.setCharSpace=h.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ui=w,this};var es=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(w){var H=h.CapJoinStyles[w];if(H===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return es=H,Z(H+" J"),this};var ts=0;h.__private__.setLineJoin=h.setLineJoin=function(w){var H=h.CapJoinStyles[w];if(H===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ts=H,Z(H+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(j(O(w))+" M"),this},h.GState=fc,h.setGState=function(w){(w=typeof w=="string"?st[dt[w]]:sl(null,w)).equals(rr)||(Z("/"+w.id+" gs"),rr=w)};var sl=function(w,H){if(!w||!dt[w]){var ie=!1;for(var se in st)if(st.hasOwnProperty(se)&&st[se].equals(H)){ie=!0;break}if(ie)H=st[se];else{var ge="GS"+(Object.keys(st).length+1).toString(10);st[ge]=H,H.id=ge}return w&&(dt[w]=H.id),Et.publish("addGState",H),H}};h.addGState=function(w,H){return sl(w,H),this},h.saveGraphicsState=function(){return Z("q"),Kt.push({key:qe,size:fe,color:Fa}),this},h.restoreGraphicsState=function(){Z("Q");var w=Kt.pop();return qe=w.key,fe=w.size,Fa=w.color,rr=null,this},h.setCurrentTransformationMatrix=function(w){return Z(w.toString()+" cm"),this},h.comment=function(w){return Z("#"+w),this};var Wi=function(w,H){var ie=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(_e){isNaN(_e)||(ie=parseFloat(_e))}});var se=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(_e){isNaN(_e)||(se=parseFloat(_e))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(_e){ge=_e.toString()}}),this},rs=function(w,H,ie,se){Wi.call(this,w,H),this.type="rect";var ge=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Ne){isNaN(Ne)||(ge=parseFloat(Ne))}});var _e=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _e},set:function(Ne){isNaN(Ne)||(_e=parseFloat(Ne))}}),this},wo=function(){this.page=ht,this.currentPage=F,this.pages=be.slice(0),this.pagesContext=Je.slice(0),this.x=ze,this.y=kt,this.matrix=yt,this.width=is(F),this.height=cl(F),this.outputDestination=Re,this.id="",this.objectNumber=-1};wo.prototype.restore=function(){ht=this.page,F=this.currentPage,Je=this.pagesContext,be=this.pages,ze=this.x,kt=this.y,yt=this.matrix,ll(F,this.width),Hi(F,this.height),Re=this.outputDestination};var ns=function(w,H,ie,se,ge){Ur.push(new wo),ht=F=0,be=[],ze=w,kt=H,yt=ge,Yo([ie,se])};for(var za in h.beginFormObject=function(w,H,ie,se,ge){return ns(w,H,ie,se,ge),this},h.endFormObject=function(w){return function(H){if(Xr[H])Ur.pop().restore();else{var ie=new wo,se="Xo"+(Object.keys(Er).length+1).toString(10);ie.id=se,Xr[H]=se,Er[se]=ie,Et.publish("addFormObject",ie),Ur.pop().restore()}}(w),this},h.doFormObject=function(w,H){var ie=Er[Xr[w]];return Z("q"),Z(H.toString()+" cm"),Z("/"+ie.id+" Do"),Z("Q"),this},h.getFormObject=function(w){var H=Er[Xr[w]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},h.save=function(w,H){return w=w||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(eo(vo(Si()),w),typeof eo.unload=="function"&&pt.setTimeout&&setTimeout(eo.unload,911),this):new Promise(function(ie,se){try{var ge=eo(vo(Si()),w);typeof eo.unload=="function"&&pt.setTimeout&&setTimeout(eo.unload,911),ie(ge)}catch(_e){se(_e.message)}})},nt.API)nt.API.hasOwnProperty(za)&&(za==="events"&&nt.API.events.length?function(w,H){var ie,se,ge;for(ge=H.length-1;ge!==-1;ge--)ie=H[ge][0],se=H[ge][1],w.subscribe.apply(w,[ie].concat(typeof se=="function"?[se]:se))}(Et,nt.API.events):h[za]=nt.API[za]);function is(w){return Je[w].mediaBox.topRightX-Je[w].mediaBox.bottomLeftX}function ll(w,H){Je[w].mediaBox.topRightX=H+Je[w].mediaBox.bottomLeftX}function cl(w){return Je[w].mediaBox.topRightY-Je[w].mediaBox.bottomLeftY}function Hi(w,H){Je[w].mediaBox.topRightY=H+Je[w].mediaBox.bottomLeftY}var qi=h.getPageWidth=function(w){return is(w=w||F)/Ve},fl=h.setPageWidth=function(w,H){ll(w,H*Ve)},Ua=h.getPageHeight=function(w){return cl(w=w||F)/Ve},dl=h.setPageHeight=function(w,H){Hi(w,H*Ve)};return h.internal={pdfEscape:qn,getStyle:il,getFont:jc,getFontSize:Ie,getCharSpace:Fc,getTextColor:Bc,getLineHeight:Tc,getLineHeightFactor:Lc,getLineWidth:Oc,write:je,getHorizontalCoordinate:Fi,getVerticalCoordinate:zi,getCoordinateString:Pc,getVerticalCoordinateString:Mc,collections:{},newObject:hr,newAdditionalObject:Ra,newObjectDeferred:Wr,newObjectDeferredBegin:Yr,getFilters:ni,putStream:Hn,events:Et,scaleFactor:Ve,pageSize:{getWidth:function(){return qi(F)},setWidth:function(w){fl(F,w)},getHeight:function(){return Ua(F)},setHeight:function(w){dl(F,w)}},encryptionOptions:f,encryption:Nr,getEncryptor:function(w){return f!==null?Nr.encryptor(w,0):function(H){return H}},output:rl,getNumberOfPages:Js,get pages(){return be},out:Z,f2:N,f3:S,getPageInfo:Bi,getPageInfoByObjId:nl,getCurrentPageInfo:Ic,getPDFVersion:v,Point:Wi,Rectangle:rs,Matrix:ft,hasHotfix:Vn},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return qi(F)},set:function(w){fl(F,w)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Ua(F)},set:function(w){dl(F,w)},enumerable:!0,configurable:!0}),(function(w){for(var H=0,ie=Te.length;H<ie;H++){var se=Ks.call(this,w[H][0],w[H][1],w[H][2],Te[H][3],!0);u===!1&&(p[se]=!0);var ge=w[H][0].split("-");Ys({id:se,fontName:ge[0],fontStyle:ge[1]||""})}Et.publish("addFonts",{fonts:ct,dictionary:ut})}).call(h,Te),qe="F1",Zs(i,t),Et.publish("initialized"),h}Oo.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Oo.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Oo.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Oo.prototype.processOwnerPassword=function(r,e){return cd(ld(e).substr(0,5),r)},Oo.prototype.encryptor=function(r,e){var t=ld(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return cd(t,n)}},fc.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Yt(r)!==Yt(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},nt.API={events:[]},nt.version="3.0.4";var mr=nt.API,Pd=1,ho=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ko=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},xt=function(r){return r.toFixed(2)},Ia=function(r){return r.toFixed(5)};mr.__acroform__={};var Dn=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},r1=function(r){return r*Pd},Di=function(r){var e=new ip,t=$e.internal.getHeight(r)||0,n=$e.internal.getWidth(r)||0;return e.BBox=[0,0,Number(xt(n)),Number(xt(t))],e},E3=mr.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},N3=mr.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},D3=mr.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},wr=mr.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return D3(r,e-1)},Ar=mr.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return E3(r,e-1)},Sr=mr.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return N3(r,e-1)},k3=mr.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],a=r[1],s=r[2],o=r[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=t(i+s)||0,l.upperRight_Y=n(a)||0,[Number(xt(l.lowerLeft_X)),Number(xt(l.lowerLeft_Y)),Number(xt(l.upperRight_X)),Number(xt(l.upperRight_Y))]},j3=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=fd(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+xt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Di(r);return a.scope=r.scope,a.stream=e.join(`
`),a}},fd=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var a=t,s=$e.internal.getHeight(r)||0;s=s<0?-s:s;var o=$e.internal.getWidth(r)||0;o=o<0?-o:o;var l=function(N,S,O){if(N+1<i.length){var A=S+" "+i[N+1][0];return Wl(A,r,O).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var c,f,u=Wl("3",r,a).height,p=r.multiline?s-a:(s-u)/2,h=p+=2,m=0,v=0,b=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Wl(e,r,a=12).width+", FieldWidth:"+o+`
`;break}for(var y="",E=0,D=0;D<i.length;D++)if(i.hasOwnProperty(D)){var C=!1;if(i[D].length!==1&&b!==i[D].length-1){if((u+2)*(E+2)+2>s)continue e;y+=i[D][b],C=!0,v=D,D--}else{y=(y+=i[D][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var z=parseInt(D),k=l(z,y,a),W=D>=i.length-1;if(k&&!W){y+=" ",b=0;continue}if(k||W){if(W)v=z;else if(r.multiline&&(u+2)*(E+2)+2>s)continue e}else{if(!r.multiline||(u+2)*(E+2)+2>s)continue e;v=z}}for(var j="",I=m;I<=v;I++){var P=i[I];if(r.multiline){if(I===v){j+=P[b]+" ",b=(b+1)%P.length;continue}if(I===m){j+=P[P.length-1]+" ";continue}}j+=P[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,f=Wl(j,r,a).width,r.textAlign){case"right":c=o-f-2;break;case"center":c=(o-f)/2;break;default:c=2}e+=xt(c)+" "+xt(h)+` Td
`,e+="("+ho(j)+`) Tj
`,e+=-xt(c)+` 0 Td
`,h=-(a+2),f=0,m=C?v:v+1,E++,y=""}break}return n.text=e,n.fontSize=a,n},Wl=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},O3={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},T3=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},R3=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(vi.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(O3)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Pd=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new ap,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&T3(a,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var a=!n;for(var s in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],l=[],c=o.Rect;if(o.Rect&&(o.Rect=k3(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=$e.createDefaultAppearanceStream(o),Yt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=j3(o);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var u="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(u+="/"+p+" ",u+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var m=h[s];typeof m=="function"&&(m=m.call(i,o)),u+="/"+s+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(i,o)),u+="/"+s+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);u+=">>"}l.push({key:"AP",value:`<<
`+u+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&function(v,b){for(var y in v)if(v.hasOwnProperty(y)){var E=y,D=v[y];b.internal.newObjectDeferredBegin(D.objId,!0),Yt(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete v[E]}}(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},np=mr.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(s){return s};if(Array.isArray(r)){for(var i="[",a=0;a<r.length;a++)switch(a!==0&&(i+=" "),Yt(r[a])){case"boolean":case"number":case"object":i+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+ho(n(r[a].toString()))+")"):i+=r[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},kf=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+ho(n(r))+")"},Oi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Oi.prototype.toString=function(){return this.objId+" 0 R"},Oi.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Oi.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:np(i,this.objId,this.scope)}):i instanceof Oi?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var ip=function(){Oi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Dn(ip,Oi);var ap=function(){Oi.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ho(t(r))+")"}},set:function(t){r=t}})};Dn(ap,Oi);var vi=function r(){Oi.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wr(e,3)},set:function(y){y?this.F=Ar(e,3):this.F=Sr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');t=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof dc)return;a="FieldObject"+r.FieldNum++}var y=function(E){return E};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+ho(y(a))+")"},set:function(y){a=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(y){a=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Pd:c},set:function(y){c=y}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(y){f=y}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof dc||this instanceof oo))return kf(u,this.objId,this.scope)},set:function(y){y=y.toString(),u=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Vr==0?kf(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof Vr==0?y.substr(0,1)==="("?ko(y.substr(1,y.length-2)):ko(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr==1?ko(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Vr==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Vr==0?kf(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Vr==0?y.substr(0,1)==="("?ko(y.substr(1,y.length-2)):ko(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr==1?ko(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Vr==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,1)},set:function(y){y?this.Ff=Ar(this.Ff,1):this.Ff=Sr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,2)},set:function(y){y?this.Ff=Ar(this.Ff,2):this.Ff=Sr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,3)},set:function(y){y?this.Ff=Ar(this.Ff,3):this.Ff=Sr(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};Dn(vi,Oi);var Bo=function(){vi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return np(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,c=[];l=s.exec(a);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,18)},set:function(t){t?this.Ff=Ar(this.Ff,18):this.Ff=Sr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ar(this.Ff,19):this.Ff=Sr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,20)},set:function(t){t?(this.Ff=Ar(this.Ff,20),e.sort()):this.Ff=Sr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,22)},set:function(t){t?this.Ff=Ar(this.Ff,22):this.Ff=Sr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,23)},set:function(t){t?this.Ff=Ar(this.Ff,23):this.Ff=Sr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,27)},set:function(t){t?this.Ff=Ar(this.Ff,27):this.Ff=Sr(this.Ff,27)}}),this.hasAppearanceStream=!1};Dn(Bo,vi);var Fo=function(){Bo.call(this),this.fontName="helvetica",this.combo=!1};Dn(Fo,Bo);var zo=function(){Fo.call(this),this.combo=!0};Dn(zo,Fo);var Zl=function(){zo.call(this),this.edit=!0};Dn(Zl,zo);var Vr=function(){vi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,15)},set:function(t){t?this.Ff=Ar(this.Ff,15):this.Ff=Sr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,16)},set:function(t){t?this.Ff=Ar(this.Ff,16):this.Ff=Sr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,17)},set:function(t){t?this.Ff=Ar(this.Ff,17):this.Ff=Sr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,26)},set:function(t){t?this.Ff=Ar(this.Ff,26):this.Ff=Sr(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+ho(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Yt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Dn(Vr,vi);var Ql=function(){Vr.call(this),this.pushButton=!0};Dn(Ql,Vr);var Uo=function(){Vr.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Dn(Uo,Vr);var dc=function(){var r,e;vi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),n)s.push("/"+a+" ("+ho(i(n[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Yt(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$e.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Dn(dc,vi),Uo.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Uo.prototype.createOption=function(r){var e=new dc;return e.Parent=this,e.optionName=r,this.Kids.push(e),L3.call(this.scope,e),e};var Jl=function(){Vr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$e.CheckBox.createAppearanceStream()};Dn(Jl,Vr);var oo=function(){vi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,13)},set:function(e){e?this.Ff=Ar(this.Ff,13):this.Ff=Sr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,21)},set:function(e){e?this.Ff=Ar(this.Ff,21):this.Ff=Sr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,23)},set:function(e){e?this.Ff=Ar(this.Ff,23):this.Ff=Sr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,24)},set:function(e){e?this.Ff=Ar(this.Ff,24):this.Ff=Sr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,25)},set:function(e){e?this.Ff=Ar(this.Ff,25):this.Ff=Sr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,26)},set:function(e){e?this.Ff=Ar(this.Ff,26):this.Ff=Sr(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Dn(oo,vi);var ec=function(){oo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,14)},set:function(r){r?this.Ff=Ar(this.Ff,14):this.Ff=Sr(this.Ff,14)}}),this.password=!0};Dn(ec,oo);var $e={CheckBox:{createAppearanceStream:function(){return{N:{On:$e.CheckBox.YesNormal},D:{On:$e.CheckBox.YesPushDown,Off:$e.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=fd(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+xt($e.internal.getWidth(r))+" "+xt($e.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+xt(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Di(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],a=$e.internal.getHeight(r),s=$e.internal.getWidth(r),o=fd(r,r.caption);return i.push("1 g"),i.push("0 0 "+xt(s)+" "+xt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+xt(s-1)+" "+xt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+xt(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+xt($e.internal.getWidth(r))+" "+xt($e.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:$e.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=$e.RadioButton.Circle.YesNormal,e.D[r]=$e.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=$e.internal.getWidth(r)<=$e.internal.getHeight(r)?$e.internal.getWidth(r)/4:$e.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=$e.internal.Bezier_C,a=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ia($e.internal.getWidth(r)/2)+" "+Ia($e.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=$e.internal.getWidth(r)<=$e.internal.getHeight(r)?$e.internal.getWidth(r)/4:$e.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*$e.internal.Bezier_C).toFixed(5)),s=Number((n*$e.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ia($e.internal.getWidth(r)/2)+" "+Ia($e.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ia($e.internal.getWidth(r)/2)+" "+Ia($e.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=$e.internal.getWidth(r)<=$e.internal.getHeight(r)?$e.internal.getWidth(r)/4:$e.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*$e.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ia($e.internal.getWidth(r)/2)+" "+Ia($e.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:$e.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=$e.RadioButton.Cross.YesNormal,e.D[r]=$e.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=$e.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+xt($e.internal.getWidth(r)-2)+" "+xt($e.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(xt(n.x1.x)+" "+xt(n.x1.y)+" m"),t.push(xt(n.x2.x)+" "+xt(n.x2.y)+" l"),t.push(xt(n.x4.x)+" "+xt(n.x4.y)+" m"),t.push(xt(n.x3.x)+" "+xt(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=$e.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+xt($e.internal.getWidth(r))+" "+xt($e.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+xt($e.internal.getWidth(r)-2)+" "+xt($e.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(xt(t.x1.x)+" "+xt(t.x1.y)+" m"),n.push(xt(t.x2.x)+" "+xt(t.x2.y)+" l"),n.push(xt(t.x4.x)+" "+xt(t.x4.y)+" m"),n.push(xt(t.x3.x)+" "+xt(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+xt($e.internal.getWidth(r))+" "+xt($e.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};$e.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=$e.internal.getWidth(r),t=$e.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},$e.internal.getWidth=function(r){var e=0;return Yt(r)==="object"&&(e=r1(r.Rect[2])),e},$e.internal.getHeight=function(r){var e=0;return Yt(r)==="object"&&(e=r1(r.Rect[3])),e};var L3=mr.addField=function(r){if(R3(this,r),!(r instanceof vi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};mr.AcroFormChoiceField=Bo,mr.AcroFormListBox=Fo,mr.AcroFormComboBox=zo,mr.AcroFormEditBox=Zl,mr.AcroFormButton=Vr,mr.AcroFormPushButton=Ql,mr.AcroFormRadioButton=Uo,mr.AcroFormCheckBox=Jl,mr.AcroFormTextField=oo,mr.AcroFormPasswordField=ec,mr.AcroFormAppearance=$e,mr.AcroForm={ChoiceField:Bo,ListBox:Fo,ComboBox:zo,EditBox:Zl,Button:Vr,PushButton:Ql,RadioButton:Uo,CheckBox:Jl,TextField:oo,PasswordField:ec,Appearance:$e},nt.AcroForm={ChoiceField:Bo,ListBox:Fo,ComboBox:zo,EditBox:Zl,Button:Vr,PushButton:Ql,RadioButton:Uo,CheckBox:Jl,TextField:oo,PasswordField:ec,Appearance:$e};nt.AcroForm;function op(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(N,S){var O,A,B,T,L,Y=t;if((S=S||t)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(k(N))for(L in n)for(B=n[L],O=0;O<B.length;O+=1){for(T=!0,A=0;A<B[O].length;A+=1)if(B[O][A]!==void 0&&B[O][A]!==N[A]){T=!1;break}if(T===!0){Y=L;break}}else for(L in n)for(B=n[L],O=0;O<B.length;O+=1){for(T=!0,A=0;A<B[O].length;A+=1)if(B[O][A]!==void 0&&B[O][A]!==N.charCodeAt(A)){T=!1;break}if(T===!0){Y=L;break}}return Y===t&&S!==t&&(Y=S),Y},a=function N(S){for(var O=this.internal.write,A=this.internal.putStream,B=(0,this.internal.getFilters)();B.indexOf("FlateEncode")!==-1;)B.splice(B.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var T=[];if(T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Image"}),T.push({key:"Width",value:S.width}),T.push({key:"Height",value:S.height}),S.colorSpace===y.INDEXED?T.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(T.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===y.DEVICE_CMYK&&T.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),T.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&T.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var L="",Y=0,X=S.transparency.length;Y<X;Y++)L+=S.transparency[Y]+" "+S.transparency[Y]+" ";T.push({key:"Mask",value:"["+L+"]"})}S.sMask!==void 0&&T.push({key:"SMask",value:S.objectId+1+" 0 R"});var ae=S.filter!==void 0?["/"+S.filter]:void 0;if(A({data:S.data,additionalKeyValues:T,alreadyAppliedFilters:ae,objectId:S.objectId}),O("endobj"),"sMask"in S&&S.sMask!==void 0){var Q,M=(Q=S.sMaskBitsPerComponent)!==null&&Q!==void 0?Q:S.bitsPerComponent,F={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:S.sMask};"filter"in S&&(F.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(S.width),F.filter=S.filter),N.call(this,F)}if(S.colorSpace===y.INDEXED){var U=this.internal.newObject();A({data:j(new Uint8Array(S.palette)),objectId:U}),O("endobj")}},s=function(){var N=this.internal.collections[e+"images"];for(var S in N)a.call(this,N[S])},o=function(){var N,S=this.internal.collections[e+"images"],O=this.internal.write;for(var A in S)O("/I"+(N=S[A]).index,N.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var N=this.internal.collections[e+"images"];return l.call(this),N},f=function(){return Object.keys(this.internal.collections[e+"images"]).length},u=function(N){return typeof r["process"+N.toUpperCase()]=="function"},p=function(N){return Yt(N)==="object"&&N.nodeType===1},h=function(N,S){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var O=""+N.getAttribute("src");if(O.indexOf("data:image/")===0)return Kl(unescape(O).split("base64,").pop());var A=r.loadFile(O,!0);if(A!==void 0)return A}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var B;switch(S){case"PNG":B="image/png";break;case"WEBP":B="image/webp";break;default:B="image/jpeg"}return Kl(N.toDataURL(B,1).split("base64,").pop())}},m=function(N){var S=this.internal.collections[e+"images"];if(S){for(var O in S)if(N===S[O].alias)return S[O]}},v=function(N,S,O){return N||S||(N=-96,S=-96),N<0&&(N=-1*O.width*72/N/this.internal.scaleFactor),S<0&&(S=-1*O.height*72/S/this.internal.scaleFactor),N===0&&(N=S*O.width/O.height),S===0&&(S=N*O.height/O.width),[N,S]},b=function(N,S,O,A,B,T){var L=v.call(this,O,A,B),Y=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,ae=c.call(this);if(O=L[0],A=L[1],ae[B.index]=B,T){T*=Math.PI/180;var Q=Math.cos(T),M=Math.sin(T),F=function(V){return V.toFixed(4)},U=[F(Q),F(M),F(-1*M),F(Q),0,0,"cm"]}this.internal.write("q"),T?(this.internal.write([1,"0","0",1,Y(N),X(S+A),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([Y(O),"0","0",Y(A),"0","0","cm"].join(" "))):this.internal.write([Y(O),"0","0",Y(A),Y(N),X(S+A),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+B.index+" Do"),this.internal.write("Q")},y=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=r.__addimage__.sHashCode=function(N){var S,O,A=0;if(typeof N=="string")for(O=N.length,S=0;S<O;S++)A=(A<<5)-A+N.charCodeAt(S),A|=0;else if(k(N))for(O=N.byteLength/2,S=0;S<O;S++)A=(A<<5)-A+N[S],A|=0;return A},C=r.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var S=!0;return N.length===0&&(S=!1),N.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(S=!1),S},z=r.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var S=N.indexOf(",");return S<0?null:N.substring(0,S).trim().endsWith("base64")?N.substring(S+1):null};r.__addimage__.isArrayBuffer=function(N){return N instanceof ArrayBuffer};var k=r.__addimage__.isArrayBufferView=function(N){return N instanceof Int8Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array},W=r.__addimage__.binaryStringToUint8Array=function(N){for(var S=N.length,O=new Uint8Array(S),A=0;A<S;A++)O[A]=N.charCodeAt(A);return O},j=r.__addimage__.arrayBufferToBinaryString=function(N){for(var S="",O=k(N)?N:new Uint8Array(N),A=0;A<O.length;A+=8192)S+=String.fromCharCode.apply(null,O.subarray(A,A+8192));return S};r.addImage=function(){var N,S,O,A,B,T,L,Y,X;if(typeof arguments[1]=="number"?(S=t,O=arguments[1],A=arguments[2],B=arguments[3],T=arguments[4],L=arguments[5],Y=arguments[6],X=arguments[7]):(S=arguments[1],O=arguments[2],A=arguments[3],B=arguments[4],T=arguments[5],L=arguments[6],Y=arguments[7],X=arguments[8]),Yt(N=arguments[0])==="object"&&!p(N)&&"imageData"in N){var ae=N;N=ae.imageData,S=ae.format||S||t,O=ae.x||O||0,A=ae.y||A||0,B=ae.w||ae.width||B,T=ae.h||ae.height||T,L=ae.alias||L,Y=ae.compression||Y,X=ae.rotation||ae.angle||X}var Q=this.internal.getFilters();if(Y===void 0&&Q.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(O)||isNaN(A))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=I.call(this,N,S,L,Y);return b.call(this,O,A,B,T,M,X),this};var I=function(N,S,O,A){var B,T,L;if(typeof N=="string"&&i(N)===t){N=unescape(N);var Y=P(N,!1);(Y!==""||(Y=r.loadFile(N,!0))!==void 0)&&(N=Y)}if(p(N)&&(N=h(N,S)),S=i(N,S),!u(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((L=O)==null||L.length===0)&&(O=function(X){return typeof X=="string"||k(X)?D(X):k(X.data)?D(X.data):null}(N)),(B=m.call(this,O))||(N instanceof Uint8Array||S==="RGBA"||(T=N,N=W(N)),B=this["process"+S.toUpperCase()](N,f.call(this),O,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in r.image_compression?X:E.NONE}(A),T)),!B)throw new Error("An unknown error occurred whilst processing the image.");return B},P=r.__addimage__.convertBase64ToBinaryString=function(N,S){S=typeof S!="boolean"||S;var O,A="";if(typeof N=="string"){var B;O=(B=z(N))!==null&&B!==void 0?B:N;try{A=Kl(O)}catch(T){if(S)throw C(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+T.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return A};r.getImageProperties=function(N){var S,O,A="";if(p(N)&&(N=h(N)),typeof N=="string"&&i(N)===t&&((A=P(N,!1))===""&&(A=r.loadFile(N)||""),N=A),O=i(N),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(N instanceof Uint8Array||(N=W(N)),!(S=this["process"+O.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=O,S}})(nt.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};nt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,f=!1,u=0;u<c.length&&!f;u++)switch((n=c[u]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),E=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(y(n.contents))+")",a+=" /Popup "+b.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(y(E))+") >>",v.content=a;var D=v.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+D,n.open&&(a+=" /Open true"),a+=" >>",b.content=a,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(m(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var z=this.annotations._nameMap[n.options.name];n.options.pageNumber=z.page,n.options.top=z.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var k=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+k+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:c(n),w:l(t+i),h:c(n+a)},options:s,type:"link"})},r.textWithLink=function(t,n,i,a){var s,o,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var f=this.splitTextToSize(t,o).length;s=Math.ceil(c*f)}else o=l,s=c;return this.text(t,n,i,a),i+=.2*c,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-c,o,s,a),l},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(nt.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},s=r.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=r.__arabicParser__.isArabicEndLetter=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(v){return s(v)&&i.indexOf(v.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length>=1};var c=r.__arabicParser__.arabicLetterHasFinalForm=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length>=3};var f=r.__arabicParser__.arabicLetterHasMedialForm=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length==4},u=r.__arabicParser__.resolveLigatures=function(v){var b=0,y=t,E="",D=0;for(b=0;b<v.length;b+=1)y[v.charCodeAt(b)]!==void 0?(D++,typeof(y=y[v.charCodeAt(b)])=="number"&&(E+=String.fromCharCode(y),y=t,D=0),b===v.length-1&&(y=t,E+=v.charAt(b-(D-1)),b-=D-1,D=0)):(y=t,E+=v.charAt(b-D),b-=D,D=0);return E};r.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var p=r.__arabicParser__.getCorrectForm=function(v,b,y){return s(v)?a(v)===!1?-1:!c(v)||!s(b)&&!s(y)||!s(y)&&o(b)||o(v)&&!s(b)||o(v)&&l(b)||o(v)&&o(b)?0:f(v)&&s(b)&&!o(b)&&s(y)&&c(y)?3:o(v)||!s(y)?1:2:-1},h=function(v){var b=0,y=0,E=0,D="",C="",z="",k=(v=v||"").split("\\s+"),W=[];for(b=0;b<k.length;b+=1){for(W.push(""),y=0;y<k[b].length;y+=1)D=k[b][y],C=k[b][y-1],z=k[b][y+1],s(D)?(E=p(D,C,z),W[b]+=E!==-1?String.fromCharCode(e[D.charCodeAt(0)][E]):D):W[b]+=D;W[b]=u(W[b])}return W.join(" ")},m=r.__arabicParser__.processArabic=r.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var E=0;for(y=[],E=0;E<b.length;E+=1)Array.isArray(b[E])?y.push([h(b[E][0]),b[E][1],b[E][2]]):y.push([h(b[E])]);v=y}else v=h(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};r.events.push(["preProcessText",m])}(nt.API),nt.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(nt.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(v){m=v}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},r.getTextDimensions=function(l,c){n.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),u=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,h=0,m=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(D,C){return D.concat(b.splitTextToSize(C,y))},[])):l=Array.isArray(l)?l:[l];for(var E=0;E<l.length;E++)h<(v=this.getStringUnitWidth(l[E],{font:u})*f)&&(h=v);return h!==0&&(m=l.length),{w:h/=p,h:Math.max((m*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/p,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=r.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=u.top,h&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};r.table=function(l,c,f,u,p){if(n.call(this),!f)throw new Error("No data for PDF table.");var h,m,v,b,y=[],E=[],D=[],C={},z={},k=[],W=[],j=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,P=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,N=p.margins||Object.assign({width:this.getPageWidth()},e),S=typeof p.padding=="number"?p.padding:3,O=p.headerBackgroundColor||"#c8c8c8",A=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=A,this.setFontSize(P),u==null)E=y=Object.keys(f[0]),D=y.map(function(){return"left"});else if(Array.isArray(u)&&Yt(u[0])==="object")for(y=u.map(function(ae){return ae.name}),E=u.map(function(ae){return ae.prompt||ae.name||""}),D=u.map(function(ae){return ae.align||"left"}),h=0;h<u.length;h+=1)z[u[h].name]=.7499990551181103*u[h].width;else Array.isArray(u)&&typeof u[0]=="string"&&(E=y=u,D=y.map(function(){return"left"}));if(j||Array.isArray(u)&&typeof u[0]=="string")for(h=0;h<y.length;h+=1){for(C[b=y[h]]=f.map(function(ae){return ae[b]}),this.setFont(void 0,"bold"),k.push(this.getTextDimensions(E[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=C[b],this.setFont(void 0,"normal"),v=0;v<m.length;v+=1)k.push(this.getTextDimensions(m[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[b]=Math.max.apply(null,k)+S+S,k=[]}if(I){var B={};for(h=0;h<y.length;h+=1)B[y[h]]={},B[y[h]].text=E[h],B[y[h]].align=D[h];var T=o.call(this,B,z);W=y.map(function(ae){return new a(l,c,z[ae],T,B[ae].text,void 0,B[ae].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var L=u.reduce(function(ae,Q){return ae[Q.name]=Q.align,ae},{});for(h=0;h<f.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:f[h]},this);var Y=o.call(this,f[h],z);for(v=0;v<y.length;v+=1){var X=f[h][y[v]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:v,data:X},this),s.call(this,new a(l,c,z[y[v]],Y,X,h+2,L[y[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var f=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(h){var m=l[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[h]-f-f)},this).map(function(h){return this.getLineHeightFactor()*h.length*u/p+f+f},this).reduce(function(h,m){return Math.max(h,m)},0)};r.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){f=this.internal.__cell__.tableHeaderRow[h].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,p.push(f)),f.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,f),this.setTextColor(m)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),t=!1}}(nt.API);var sp={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},lp=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dd=op(lp),cp=[100,200,300,400,500,600,700,800,900],P3=op(cp);function jf(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return sp[a=a||"normal"]?a:"normal"}(r.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(r.weight),i=function(a){return typeof dd[a=a||"normal"]=="number"?a:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function n1(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var M3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},i1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function a1(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function o1(r){return r.trimLeft()}function B3(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function F3(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Hl,s1,l1,jo,ql,c1,f1,d1,Of=["times"];function u1(r,e,t,n,i){var a=4,s=p1;switch(i){case nt.API.image_compression.FAST:a=1,s=h1;break;case nt.API.image_compression.MEDIUM:a=6,s=g1;break;case nt.API.image_compression.SLOW:a=9,s=m1}r=function(l,c,f,u){for(var p,h=l.length/c,m=new Uint8Array(l.length+h),v=[z3,h1,p1,g1,m1],b=0;b<h;b+=1){var y=b*c,E=l.subarray(y,y+c);if(u)m.set(u(E,f,p),y+b);else{for(var D=v.length,C=[],z=0;z<D;z+=1)C[z]=v[z](E,f,p);var k=W3(C.concat());m.set(C[k],y+b)}p=E}return m}(r,e,Math.ceil(t*n/8),s);var o=id(r,{level:a});return nt.API.__addimage__.arrayBufferToBinaryString(o)}function z3(r){var e=Array.apply([],r);return e.unshift(0),e}function h1(r,e){var t=r.length,n=[];n[0]=1;for(var i=0;i<t;i+=1){var a=r[i-e]||0;n[i+1]=r[i]-a+256&255}return n}function p1(r,e,t){var n=r.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var s=t&&t[a]||0;i[a+1]=r[a]-s+256&255}return i}function g1(r,e,t){var n=r.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var s=r[a-e]||0,o=t&&t[a]||0;i[a+1]=r[a]+256-(s+o>>>1)&255}return i}function m1(r,e,t){var n=r.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var s=U3(r[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);i[a+1]=r[a]-s+256&255}return i}function U3(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),i=Math.abs(r-t),a=Math.abs(r+e-t-t);return n<=i&&n<=a?r:i<=a?e:t}function W3(r){var e=r.map(function(t){return t.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Tf(r,e,t){var n=e*t,i=Math.floor(n/8),a=16-(n-8*i+t),s=(1<<t)-1;return fp(r,i)>>a&s}function x1(r,e,t,n){var i=t*n,a=Math.floor(i/8),s=16-(i-8*a+n),o=(1<<n)-1,l=(e&o)<<s;(function(c,f,u){if(f+1<c.byteLength)c.setUint16(f,u,!1);else{var p=u>>8&255;c.setUint8(f,p)}})(r,a,fp(r,a)&~(o<<s)&65535|l)}function fp(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function H3(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],a=i>>7,s=1<<1+(7&i);r[e++],r[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var c=!0,f=[],u=0,p=null,h=0,m=null;for(this.width=t,this.height=n;c&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,m=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((N=r[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=r[e++];u=r[e++]|r[e++]<<8,p=r[e++],1&v||(p=null),h=v>>2&7,e++;break;case 254:for(;;){if(!((N=r[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var b=r[e++]|r[e++]<<8,y=r[e++]|r[e++]<<8,E=r[e++]|r[e++]<<8,D=r[e++]|r[e++]<<8,C=r[e++],z=C>>6&1,k=1<<1+(7&C),W=o,j=l,I=!1;C>>7&&(I=!0,W=e,j=k,e+=3*k);var P=e;for(e++;;){var N;if(!((N=r[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}f.push({x:b,y,width:E,height:D,has_local_palette:I,palette_offset:W,palette_size:j,data_offset:P,data_length:e-P,transparent_index:p,interlaced:!!z,delay:u,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return m},this.frameInfo=function(S){if(S<0||S>=f.length)throw new Error("Frame index out of range.");return f[S]},this.decodeAndBlitFrameBGRA=function(S,O){var A=this.frameInfo(S),B=A.width*A.height,T=new Uint8Array(B);v1(r,A.data_offset,T,B);var L=A.palette_offset,Y=A.transparent_index;Y===null&&(Y=256);var X=A.width,ae=t-X,Q=X,M=4*(A.y*t+A.x),F=4*((A.y+A.height)*t+A.x),U=M,V=4*ae;A.interlaced===!0&&(V+=4*t*7);for(var te=8,le=0,he=T.length;le<he;++le){var pe=T[le];if(Q===0&&(Q=X,(U+=V)>=F&&(V=4*ae+4*t*(te-1),U=M+(X+ae)*(te<<1),te>>=1)),pe===Y)U+=4;else{var de=r[L+3*pe],be=r[L+3*pe+1],Ee=r[L+3*pe+2];O[U++]=Ee,O[U++]=be,O[U++]=de,O[U++]=255}--Q}},this.decodeAndBlitFrameRGBA=function(S,O){var A=this.frameInfo(S),B=A.width*A.height,T=new Uint8Array(B);v1(r,A.data_offset,T,B);var L=A.palette_offset,Y=A.transparent_index;Y===null&&(Y=256);var X=A.width,ae=t-X,Q=X,M=4*(A.y*t+A.x),F=4*((A.y+A.height)*t+A.x),U=M,V=4*ae;A.interlaced===!0&&(V+=4*t*7);for(var te=8,le=0,he=T.length;le<he;++le){var pe=T[le];if(Q===0&&(Q=X,(U+=V)>=F&&(V=4*ae+4*t*(te-1),U=M+(X+ae)*(te<<1),te>>=1)),pe===Y)U+=4;else{var de=r[L+3*pe],be=r[L+3*pe+1],Ee=r[L+3*pe+2];O[U++]=de,O[U++]=be,O[U++]=Ee,O[U++]=255}--Q}}}function v1(r,e,t,n){for(var i=r[e++],a=1<<i,s=a+1,o=s+1,l=i+1,c=(1<<l)-1,f=0,u=0,p=0,h=r[e++],m=new Int32Array(4096),v=null;;){for(;f<16&&h!==0;)u|=r[e++]<<f,f+=8,h===1?h=r[e++]:--h;if(f<l)break;var b=u&c;if(u>>=l,f-=l,b!==a){if(b===s)break;for(var y=b<o?b:v,E=0,D=y;D>a;)D=m[D]>>8,++E;var C=D;if(p+E+(y!==b?1:0)>n)return void er.log("Warning, gif stream longer than expected.");t[p++]=C;var z=p+=E;for(y!==b&&(t[p++]=C),D=y;E--;)D=m[D],t[--z]=255&D,D>>=8;v!==null&&o<4096&&(m[o++]=v<<8|C,o>=c+1&&l<12&&(++l,c=c<<1|1)),v=b}else o=s+1,c=(1<<(l=i+1))-1,v=null}return p!==n&&er.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Rf(r){var e,t,n,i,a,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),u=new Array(65535),p=new Array(65535),h=new Array(64),m=new Array(64),v=[],b=0,y=7,E=new Array(64),D=new Array(64),C=new Array(64),z=new Array(256),k=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(M,F){for(var U=0,V=0,te=new Array,le=1;le<=16;le++){for(var he=1;he<=M[le];he++)te[F[V]]=[],te[F[V]][0]=U,te[F[V]][1]=le,V++,U++;U*=2}return te}function L(M){for(var F=M[0],U=M[1]-1;U>=0;)F&1<<U&&(b|=1<<y),U--,--y<0&&(b==255?(Y(255),Y(0)):Y(b),y=7,b=0)}function Y(M){v.push(M)}function X(M){Y(M>>8&255),Y(255&M)}function ae(M,F,U,V,te){for(var le,he=te[0],pe=te[240],de=function(fe,Le){var Ie,Ue,Me,Oe,rt,Qe,At,it,qe,Ve,ze=0;for(qe=0;qe<8;++qe){Ie=fe[ze],Ue=fe[ze+1],Me=fe[ze+2],Oe=fe[ze+3],rt=fe[ze+4],Qe=fe[ze+5],At=fe[ze+6];var kt=Ie+(it=fe[ze+7]),yt=Ie-it,ct=Ue+At,ut=Ue-At,Kt=Me+Qe,at=Me-Qe,Ut=Oe+rt,st=Oe-rt,dt=kt+Ut,rr=kt-Ut,ht=ct+Kt,Je=ct-Kt;fe[ze]=dt+ht,fe[ze+4]=dt-ht;var Et=.707106781*(Je+rr);fe[ze+2]=rr+Et,fe[ze+6]=rr-Et;var kn=.382683433*((dt=st+at)-(Je=ut+yt)),Er=.5411961*dt+kn,Xr=1.306562965*Je+kn,Ur=.707106781*(ht=at+ut),ft=yt+Ur,Pi=yt-Ur;fe[ze+5]=Pi+Er,fe[ze+3]=Pi-Er,fe[ze+1]=ft+Xr,fe[ze+7]=ft-Xr,ze+=8}for(ze=0,qe=0;qe<8;++qe){Ie=fe[ze],Ue=fe[ze+8],Me=fe[ze+16],Oe=fe[ze+24],rt=fe[ze+32],Qe=fe[ze+40],At=fe[ze+48];var Mi=Ie+(it=fe[ze+56]),Un=Ie-it,Wn=Ue+At,hr=Ue-At,Wr=Me+Qe,Yr=Me-Qe,Ra=Oe+rt,sa=Oe-rt,ti=Mi+Ra,bi=Mi-Ra,ri=Wn+Wr,ni=Wn-Wr;fe[ze]=ti+ri,fe[ze+32]=ti-ri;var Hn=.707106781*(ni+bi);fe[ze+16]=bi+Hn,fe[ze+48]=bi-Hn;var La=.382683433*((ti=sa+Yr)-(ni=hr+Un)),wi=.5411961*ti+La,Pa=1.306562965*ni+La,po=.707106781*(ri=Yr+hr),go=Un+po,mo=Un-po;fe[ze+40]=mo+wi,fe[ze+24]=mo-wi,fe[ze+8]=go+Pa,fe[ze+56]=go-Pa,ze++}for(qe=0;qe<64;++qe)Ve=fe[qe]*Le[qe],h[qe]=Ve>0?Ve+.5|0:Ve-.5|0;return h}(M,F),be=0;be<64;++be)m[W[be]]=de[be];var Ee=m[0]-U;U=m[0],Ee==0?L(V[0]):(L(V[p[le=32767+Ee]]),L(u[le]));for(var Re=63;Re>0&&m[Re]==0;)Re--;if(Re==0)return L(he),U;for(var Fe,Z=1;Z<=Re;){for(var je=Z;m[Z]==0&&Z<=Re;)++Z;var He=Z-je;if(He>=16){Fe=He>>4;for(var Te=1;Te<=Fe;++Te)L(pe);He&=15}le=32767+m[Z],L(te[(He<<4)+p[le]]),L(u[le]),Z++}return Re!=63&&L(he),U}function Q(M){M=Math.min(Math.max(M,1),100),a!=M&&(function(F){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],V=0;V<64;V++){var te=s((U[V]*F+50)/100);te=Math.min(Math.max(te,1),255),o[W[V]]=te}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var pe=s((le[he]*F+50)/100);pe=Math.min(Math.max(pe,1),255),l[W[he]]=pe}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,Ee=0;Ee<8;Ee++)for(var Re=0;Re<8;Re++)c[be]=1/(o[W[be]]*de[Ee]*de[Re]*8),f[be]=1/(l[W[be]]*de[Ee]*de[Re]*8),be++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),a=M)}this.encode=function(M,F){F&&Q(F),v=new Array,b=0,y=7,X(65496),X(65504),X(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),X(1),X(1),Y(0),Y(0),function(){X(65499),X(132),Y(0);for(var Ue=0;Ue<64;Ue++)Y(o[Ue]);Y(1);for(var Me=0;Me<64;Me++)Y(l[Me])}(),function(Ue,Me){X(65472),X(17),Y(8),X(Me),X(Ue),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(M.width,M.height),function(){X(65476),X(418),Y(0);for(var Ue=0;Ue<16;Ue++)Y(j[Ue+1]);for(var Me=0;Me<=11;Me++)Y(I[Me]);Y(16);for(var Oe=0;Oe<16;Oe++)Y(P[Oe+1]);for(var rt=0;rt<=161;rt++)Y(N[rt]);Y(1);for(var Qe=0;Qe<16;Qe++)Y(S[Qe+1]);for(var At=0;At<=11;At++)Y(O[At]);Y(17);for(var it=0;it<16;it++)Y(A[it+1]);for(var qe=0;qe<=161;qe++)Y(B[qe])}(),X(65498),X(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var U=0,V=0,te=0;b=0,y=7,this.encode.displayName="_encode_";for(var le,he,pe,de,be,Ee,Re,Fe,Z,je=M.data,He=M.width,Te=M.height,fe=4*He,Le=0;Le<Te;){for(le=0;le<fe;){for(be=fe*Le+le,Re=-1,Fe=0,Z=0;Z<64;Z++)Ee=be+(Fe=Z>>3)*fe+(Re=4*(7&Z)),Le+Fe>=Te&&(Ee-=fe*(Le+1+Fe-Te)),le+Re>=fe&&(Ee-=le+Re-fe+4),he=je[Ee++],pe=je[Ee++],de=je[Ee++],E[Z]=(k[he]+k[pe+256|0]+k[de+512|0]>>16)-128,D[Z]=(k[he+768|0]+k[pe+1024|0]+k[de+1280|0]>>16)-128,C[Z]=(k[he+1280|0]+k[pe+1536|0]+k[de+1792|0]>>16)-128;U=ae(E,c,U,e,n),V=ae(D,f,V,t,i),te=ae(C,f,te,t,i),le+=32}Le+=8}if(y>=0){var Ie=[];Ie[1]=y+1,Ie[0]=(1<<y+1)-1,L(Ie)}return X(65497),new Uint8Array(v)},r=r||50,function(){for(var M=String.fromCharCode,F=0;F<256;F++)z[F]=M(F)}(),e=T(j,I),t=T(S,O),n=T(P,N),i=T(A,B),function(){for(var M=1,F=2,U=1;U<=15;U++){for(var V=M;V<F;V++)p[32767+V]=U,u[32767+V]=[],u[32767+V][1]=U,u[32767+V][0]=V;for(var te=-(F-1);te<=-M;te++)p[32767+te]=U,u[32767+te]=[],u[32767+te][1]=U,u[32767+te][0]=F-1+te;M<<=1,F<<=1}}(),function(){for(var M=0;M<256;M++)k[M]=19595*M,k[M+256|0]=38470*M,k[M+512|0]=7471*M+32768,k[M+768|0]=-11059*M,k[M+1024|0]=-21709*M,k[M+1280|0]=32768*M+8421375,k[M+1536|0]=-27439*M,k[M+1792|0]=-5329*M}(),Q(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function fi(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function y1(r){function e(I){if(!I)throw Error("assert :P")}function t(I,P,N){for(var S=0;4>S;S++)if(I[P+S]!=N.charCodeAt(S))return!0;return!1}function n(I,P,N,S,O){for(var A=0;A<O;A++)I[P+A]=N[S+A]}function i(I,P,N,S){for(var O=0;O<S;O++)I[P+O]=N}function a(I){return new Int32Array(I)}function s(I,P){for(var N=[],S=0;S<I;S++)N.push(new P);return N}function o(I,P){var N=[];return function S(O,A,B){for(var T=B[A],L=0;L<T&&(O.push(B.length>A+1?[]:new P),!(B.length<A+1));L++)S(O[L],A+1,B)}(N,0,I),N}var l=function(){var I=this;function P(g,x){for(var _=1<<x-1>>>0;g&_;)_>>>=1;return _?(g&_-1)+_:g}function N(g,x,_,R,q){e(!(R%_));do g[x+(R-=_)]=q;while(0<R)}function S(g,x,_,R,q){if(e(2328>=q),512>=q)var G=a(512);else if((G=a(q))==null)return 0;return function($,K,J,re,ce,ye){var ne,ue,me=K,we=1<<J,ve=a(16),Se=a(16);for(e(ce!=0),e(re!=null),e($!=null),e(0<J),ue=0;ue<ce;++ue){if(15<re[ue])return 0;++ve[re[ue]]}if(ve[0]==ce)return 0;for(Se[1]=0,ne=1;15>ne;++ne){if(ve[ne]>1<<ne)return 0;Se[ne+1]=Se[ne]+ve[ne]}for(ue=0;ue<ce;++ue)ne=re[ue],0<re[ue]&&(ye[Se[ne]++]=ue);if(Se[15]==1)return(re=new O).g=0,re.value=ye[0],N($,me,1,we,re),we;var Ce,ke=-1,De=we-1,tt=0,Ge=1,St=1,Ke=1<<J;for(ue=0,ne=1,ce=2;ne<=J;++ne,ce<<=1){if(Ge+=St<<=1,0>(St-=ve[ne]))return 0;for(;0<ve[ne];--ve[ne])(re=new O).g=ne,re.value=ye[ue++],N($,me+tt,ce,Ke,re),tt=P(tt,ne)}for(ne=J+1,ce=2;15>=ne;++ne,ce<<=1){if(Ge+=St<<=1,0>(St-=ve[ne]))return 0;for(;0<ve[ne];--ve[ne]){if(re=new O,(tt&De)!=ke){for(me+=Ke,Ce=1<<(ke=ne)-J;15>ke&&!(0>=(Ce-=ve[ke]));)++ke,Ce<<=1;we+=Ke=1<<(Ce=ke-J),$[K+(ke=tt&De)].g=Ce+J,$[K+ke].value=me-K-ke}re.g=ne-J,re.value=ye[ue++],N($,me+(tt>>J),ce,Ke,re),tt=P(tt,ne)}}return Ge!=2*Se[15]-1?0:we}(g,x,_,R,q,G)}function O(){this.value=this.g=0}function A(){this.value=this.g=0}function B(){this.G=s(5,O),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s($a,A)}function T(g,x,_,R){e(g!=null),e(x!=null),e(2147483648>R),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=x,g.pa=_,g.Jd=x,g.Yc=_+R,g.Zc=4<=R?_+R-4+1:_,he(g)}function L(g,x){for(var _=0;0<x--;)_|=de(g,128)<<x;return _}function Y(g,x){var _=L(g,x);return pe(g)?-_:_}function X(g,x,_,R){var q,G=0;for(e(g!=null),e(x!=null),e(4294967288>R),g.Sb=R,g.Ra=0,g.u=0,g.h=0,4<R&&(R=4),q=0;q<R;++q)G+=x[_+q]<<8*q;g.Ra=G,g.bb=R,g.oa=x,g.pa=_}function ae(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<da-8>>>0,++g.bb,g.u-=8;V(g)&&(g.h=1,g.u=0)}function Q(g,x){if(e(0<=x),!g.h&&x<=On){var _=U(g)&jn[x];return g.u+=x,ae(g),_}return g.h=1,g.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(g){return g.Ra>>>(g.u&da-1)>>>0}function V(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>da}function te(g,x){g.u=x,g.h=V(g)}function le(g){g.u>=Xi&&(e(g.u>=Xi),ae(g))}function he(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function pe(g){return L(g,1)}function de(g,x){var _=g.Ca;0>g.b&&he(g);var R=g.b,q=_*x>>>8,G=(g.I>>>R>q)+0;for(G?(_-=q,g.I-=q+1<<R>>>0):_=q+1,R=_,q=0;256<=R;)q+=8,R>>=8;return R=7^q+ua[R],g.b-=R,g.Ca=(_<<R)-1,G}function be(g,x,_){g[x+0]=_>>24&255,g[x+1]=_>>16&255,g[x+2]=_>>8&255,g[x+3]=255&_}function Ee(g,x){return g[x+0]|g[x+1]<<8}function Re(g,x){return Ee(g,x)|g[x+2]<<16}function Fe(g,x){return Ee(g,x)|Ee(g,x+2)<<16}function Z(g,x){var _=1<<x;return e(g!=null),e(0<x),g.X=a(_),g.X==null?0:(g.Mb=32-x,g.Xa=x,1)}function je(g,x){e(g!=null),e(x!=null),e(g.Xa==x.Xa),n(x.X,0,g.X,0,1<<x.Xa)}function He(){this.X=[],this.Xa=this.Mb=0}function Te(g,x,_,R){e(_!=null),e(R!=null);var q=_[0],G=R[0];return q==0&&(q=(g*G+x/2)/x),G==0&&(G=(x*q+g/2)/g),0>=q||0>=G?0:(_[0]=q,R[0]=G,1)}function fe(g,x){return g+(1<<x)-1>>>x}function Le(g,x){return((4278255360&g)+(4278255360&x)>>>0&4278255360)+((16711935&g)+(16711935&x)>>>0&16711935)>>>0}function Ie(g,x){I[x]=function(_,R,q,G,$,K,J){var re;for(re=0;re<$;++re){var ce=I[g](K[J+re-1],q,G+re);K[J+re]=Le(_[R+re],ce)}}}function Ue(){this.ud=this.hd=this.jd=0}function Me(g,x){return((4278124286&(g^x))>>>1)+(g&x)>>>0}function Oe(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function rt(g,x){return Oe(g+(g-x+.5>>1))}function Qe(g,x,_){return Math.abs(x-_)-Math.abs(g-_)}function At(g,x,_,R,q,G,$){for(R=G[$-1],_=0;_<q;++_)G[$+_]=R=Le(g[x+_],R)}function it(g,x,_,R,q){var G;for(G=0;G<_;++G){var $=g[x+G],K=$>>8&255,J=16711935&(J=(J=16711935&$)+((K<<16)+K));R[q+G]=(4278255360&$)+J>>>0}}function qe(g,x){x.jd=255&g,x.hd=g>>8&255,x.ud=g>>16&255}function Ve(g,x,_,R,q,G){var $;for($=0;$<R;++$){var K=x[_+$],J=K>>>8,re=K,ce=255&(ce=(ce=K>>>16)+((g.jd<<24>>24)*(J<<24>>24)>>>5));re=255&(re=(re+=(g.hd<<24>>24)*(J<<24>>24)>>>5)+((g.ud<<24>>24)*(ce<<24>>24)>>>5)),q[G+$]=(4278255360&K)+(ce<<16)+re}}function ze(g,x,_,R,q){I[x]=function(G,$,K,J,re,ce,ye,ne,ue){for(J=ye;J<ne;++J)for(ye=0;ye<ue;++ye)re[ce++]=q(K[R(G[$++])])},I[g]=function(G,$,K,J,re,ce,ye){var ne=8>>G.b,ue=G.Ea,me=G.K[0],we=G.w;if(8>ne)for(G=(1<<G.b)-1,we=(1<<ne)-1;$<K;++$){var ve,Se=0;for(ve=0;ve<ue;++ve)ve&G||(Se=R(J[re++])),ce[ye++]=q(me[Se&we]),Se>>=ne}else I["VP8LMapColor"+_](J,re,me,we,ce,ye,$,K,ue)}}function kt(g,x,_,R,q){for(_=x+_;x<_;){var G=g[x++];R[q++]=G>>16&255,R[q++]=G>>8&255,R[q++]=255&G}}function yt(g,x,_,R,q){for(_=x+_;x<_;){var G=g[x++];R[q++]=G>>16&255,R[q++]=G>>8&255,R[q++]=255&G,R[q++]=G>>24&255}}function ct(g,x,_,R,q){for(_=x+_;x<_;){var G=($=g[x++])>>16&240|$>>12&15,$=240&$|$>>28&15;R[q++]=G,R[q++]=$}}function ut(g,x,_,R,q){for(_=x+_;x<_;){var G=($=g[x++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;R[q++]=G,R[q++]=$}}function Kt(g,x,_,R,q){for(_=x+_;x<_;){var G=g[x++];R[q++]=255&G,R[q++]=G>>8&255,R[q++]=G>>16&255}}function at(g,x,_,R,q,G){if(G==0)for(_=x+_;x<_;)be(R,((G=g[x++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),q+=32;else n(R,q,g,x,_)}function Ut(g,x){I[x][0]=I[g+"0"],I[x][1]=I[g+"1"],I[x][2]=I[g+"2"],I[x][3]=I[g+"3"],I[x][4]=I[g+"4"],I[x][5]=I[g+"5"],I[x][6]=I[g+"6"],I[x][7]=I[g+"7"],I[x][8]=I[g+"8"],I[x][9]=I[g+"9"],I[x][10]=I[g+"10"],I[x][11]=I[g+"11"],I[x][12]=I[g+"12"],I[x][13]=I[g+"13"],I[x][14]=I[g+"0"],I[x][15]=I[g+"0"]}function st(g){return g==Wc||g==Hc||g==bl||g==qc}function dt(){this.eb=[],this.size=this.A=this.fb=0}function rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ht(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new dt,this.f.kb=new rr,this.sd=null}function Je(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Et(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kn(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Er(g,x){var _=g.T,R=x.ba.f.RGBA,q=R.eb,G=R.fb+g.ka*R.A,$=Yn[x.ba.S],K=g.y,J=g.O,re=g.f,ce=g.N,ye=g.ea,ne=g.W,ue=x.cc,me=x.dc,we=x.Mc,ve=x.Nc,Se=g.ka,Ce=g.ka+g.T,ke=g.U,De=ke+1>>1;for(Se==0?$(K,J,null,null,re,ce,ye,ne,re,ce,ye,ne,q,G,null,null,ke):($(x.ec,x.fc,K,J,ue,me,we,ve,re,ce,ye,ne,q,G-R.A,q,G,ke),++_);Se+2<Ce;Se+=2)ue=re,me=ce,we=ye,ve=ne,ce+=g.Rc,ne+=g.Rc,G+=2*R.A,$(K,(J+=2*g.fa)-g.fa,K,J,ue,me,we,ve,re,ce,ye,ne,q,G-R.A,q,G,ke);return J+=g.fa,g.j+Ce<g.o?(n(x.ec,x.fc,K,J,ke),n(x.cc,x.dc,re,ce,De),n(x.Mc,x.Nc,ye,ne,De),_--):1&Ce||$(K,J,null,null,re,ce,ye,ne,re,ce,ye,ne,q,G+R.A,null,null,ke),_}function Xr(g,x,_){var R=g.F,q=[g.J];if(R!=null){var G=g.U,$=x.ba.S,K=$==yl||$==bl;x=x.ba.f.RGBA;var J=[0],re=g.ka;J[0]=g.T,g.Kb&&(re==0?--J[0]:(--re,q[0]-=g.width),g.j+g.ka+g.T==g.o&&(J[0]=g.o-g.j-re));var ce=x.eb;re=x.fb+re*x.A,g=qd(R,q[0],g.width,G,J,ce,re+(K?0:3),x.A),e(_==J),g&&st($)&&ms(ce,re,K,G,J,x.A)}return 0}function Ur(g){var x=g.ma,_=x.ba.S,R=11>_,q=_==xl||_==vl||_==yl||_==Uc||_==12||st(_);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!ls(x.Oa,g,q?11:12))return 0;if(q&&st(_)&&as(),g.da)alert("todo:use_scaling");else{if(R){if(x.Ib=kn,g.Kb){if(_=g.U+1>>1,x.memory=a(g.U+2*_),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+g.U,x.Mc=x.cc,x.Nc=x.dc+_,x.Ib=Er,as()}}else alert("todo:EmitYUV");q&&(x.Jb=Xr,R&&ai())}if(R&&!ou){for(g=0;256>g;++g)Hp[g]=89858*(g-128)+Al>>wl,Gp[g]=-22014*(g-128)+Al,Vp[g]=-45773*(g-128),qp[g]=113618*(g-128)+Al>>wl;for(g=vs;g<$c;++g)x=76283*(g-16)+Al>>wl,$p[g-vs]=Ai(x,255),Xp[g-vs]=Ai(x+8>>4,15);ou=1}return 1}function ft(g){var x=g.ma,_=g.U,R=g.T;return e(!(1&g.ka)),0>=_||0>=R?0:(_=x.Ib(g,x),x.Jb!=null&&x.Jb(g,x,_),x.Dc+=_,1)}function Pi(g){g.ma.memory=null}function Mi(g,x,_,R){return Q(g,8)!=47?0:(x[0]=Q(g,14)+1,_[0]=Q(g,14)+1,R[0]=Q(g,1),Q(g,3)!=0?0:!g.h)}function Un(g,x){if(4>g)return g+1;var _=g-2>>1;return(2+(1&g)<<_)+Q(x,_)+1}function Wn(g,x){return 120<x?x-120:1<=(_=((_=Dp[x-1])>>4)*g+(8-(15&_)))?_:1;var _}function hr(g,x,_){var R=U(_),q=g[x+=255&R].g-8;return 0<q&&(te(_,_.u+8),R=U(_),x+=g[x].value,x+=R&(1<<q)-1),te(_,_.u+g[x].g),g[x].value}function Wr(g,x,_){return _.g+=g.g,_.value+=g.value<<x>>>0,e(8>=_.g),g.g}function Yr(g,x,_){var R=g.xc;return e((x=R==0?0:g.vc[g.md*(_>>R)+(x>>R)])<g.Wb),g.Ya[x]}function Ra(g,x,_,R){var q=g.ab,G=g.c*x,$=g.C;x=$+x;var K=_,J=R;for(R=g.Ta,_=g.Ua;0<q--;){var re=g.gc[q],ce=$,ye=x,ne=K,ue=J,me=(J=R,K=_,re.Ea);switch(e(ce<ye),e(ye<=re.nc),re.hc){case 2:xr(ne,ue,(ye-ce)*me,J,K);break;case 0:var we=ce,ve=ye,Se=J,Ce=K,ke=(Ke=re).Ea;we==0&&(fs(ne,ue,null,null,1,Se,Ce),At(ne,ue+1,0,0,ke-1,Se,Ce+1),ue+=ke,Ce+=ke,++we);for(var De=1<<Ke.b,tt=De-1,Ge=fe(ke,Ke.b),St=Ke.K,Ke=Ke.w+(we>>Ke.b)*Ge;we<ve;){var Dt=St,jr=Ke,_t=1;for(_o(ne,ue,Se,Ce-ke,1,Se,Ce);_t<ke;){var Ze=(_t&~tt)+De;Ze>ke&&(Ze=ke),(0,us[Dt[jr++]>>8&15])(ne,ue+ +_t,Se,Ce+_t-ke,Ze-_t,Se,Ce+_t),_t=Ze}ue+=ke,Ce+=ke,++we&tt||(Ke+=Ge)}ye!=re.nc&&n(J,K-me,J,K+(ye-ce-1)*me,me);break;case 1:for(me=ne,ve=ue,ke=(ne=re.Ea)-(Ce=ne&~(Se=(ue=1<<re.b)-1)),we=fe(ne,re.b),De=re.K,re=re.w+(ce>>re.b)*we;ce<ye;){for(tt=De,Ge=re,St=new Ue,Ke=ve+Ce,Dt=ve+ne;ve<Ke;)qe(tt[Ge++],St),hs(St,me,ve,ue,J,K),ve+=ue,K+=ue;ve<Dt&&(qe(tt[Ge++],St),hs(St,me,ve,ke,J,K),ve+=ke,K+=ke),++ce&Se||(re+=we)}break;case 3:if(ne==J&&ue==K&&0<re.b){for(ve=J,ne=me=K+(ye-ce)*me-(Ce=(ye-ce)*fe(re.Ea,re.b)),ue=J,Se=K,we=[],Ce=(ke=Ce)-1;0<=Ce;--Ce)we[Ce]=ue[Se+Ce];for(Ce=ke-1;0<=Ce;--Ce)ve[ne+Ce]=we[Ce];hl(re,ce,ye,J,me,J,K)}else hl(re,ce,ye,ne,ue,J,K)}K=R,J=_}J!=_&&n(R,_,K,J,G)}function sa(g,x){var _=g.V,R=g.Ba+g.c*g.C,q=x-g.C;if(e(x<=g.l.o),e(16>=q),0<q){var G=g.l,$=g.Ta,K=g.Ua,J=G.width;if(Ra(g,q,_,R),q=K=[K],e((_=g.C)<(R=x)),e(G.v<G.va),R>G.o&&(R=G.o),_<G.j){var re=G.j-_;_=G.j,q[0]+=re*J}if(_>=R?_=0:(q[0]+=4*G.v,G.ka=_-G.j,G.U=G.va-G.v,G.T=R-_,_=1),_){if(K=K[0],11>(_=g.ca).S){var ce=_.f.RGBA,ye=(R=_.S,q=G.U,G=G.T,re=ce.eb,ce.A),ne=G;for(ce=ce.fb+g.Ma*ce.A;0<ne--;){var ue=$,me=K,we=q,ve=re,Se=ce;switch(R){case ml:ps(ue,me,we,ve,Se);break;case xl:ha(ue,me,we,ve,Se);break;case Wc:ha(ue,me,we,ve,Se),ms(ve,Se,0,we,1,0);break;case Zd:Xa(ue,me,we,ve,Se);break;case vl:at(ue,me,we,ve,Se,1);break;case Hc:at(ue,me,we,ve,Se,1),ms(ve,Se,0,we,1,0);break;case yl:at(ue,me,we,ve,Se,0);break;case bl:at(ue,me,we,ve,Se,0),ms(ve,Se,1,we,1,0);break;case Uc:pa(ue,me,we,ve,Se);break;case qc:pa(ue,me,we,ve,Se),Hd(ve,Se,we,1,0);break;case Qd:ga(ue,me,we,ve,Se);break;default:e(0)}K+=J,ce+=ye}g.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=_.height)}}g.C=x,e(g.C<=g.i)}function ti(g){var x;if(0<g.ua)return 0;for(x=0;x<g.Wb;++x){var _=g.Ya[x].G,R=g.Ya[x].H;if(0<_[1][R[1]+0].g||0<_[2][R[2]+0].g||0<_[3][R[3]+0].g)return 0}return 1}function bi(g,x,_,R,q,G){if(g.Z!=0){var $=g.qd,K=g.rd;for(e(va[g.Z]!=null);x<_;++x)va[g.Z]($,K,R,q,R,q,G),$=R,K=q,q+=G;g.qd=$,g.rd=K}}function ri(g,x){var _=g.l.ma,R=_.Z==0||_.Z==1?g.l.j:g.C;if(R=g.C<R?R:g.C,e(x<=g.l.o),x>R){var q=g.l.width,G=_.ca,$=_.tb+q*R,K=g.V,J=g.Ba+g.c*R,re=g.gc;e(g.ab==1),e(re[0].hc==3),Ii(re[0],R,x,K,J,G,$),bi(_,R,x,G,$,q)}g.C=g.Ma=x}function ni(g,x,_,R,q,G,$){var K=g.$/R,J=g.$%R,re=g.m,ce=g.s,ye=_+g.$,ne=ye;q=_+R*q;var ue=_+R*G,me=280+ce.ua,we=g.Pb?K:16777216,ve=0<ce.ua?ce.Wa:null,Se=ce.wc,Ce=ye<ue?Yr(ce,J,K):null;e(g.C<G),e(ue<=q);var ke=!1;e:for(;;){for(;ke||ye<ue;){var De=0;if(K>=we){var tt=ye-_;e((we=g).Pb),we.wd=we.m,we.xd=tt,0<we.s.ua&&je(we.s.Wa,we.s.vb),we=K+jp}if(J&Se||(Ce=Yr(ce,J,K)),e(Ce!=null),Ce.Qb&&(x[ye]=Ce.qb,ke=!0),!ke)if(le(re),Ce.jc){De=re,tt=x;var Ge=ye,St=Ce.pd[U(De)&$a-1];e(Ce.jc),256>St.g?(te(De,De.u+St.g),tt[Ge]=St.value,De=0):(te(De,De.u+St.g-256),e(256<=St.value),De=St.value),De==0&&(ke=!0)}else De=hr(Ce.G[0],Ce.H[0],re);if(re.h)break;if(ke||256>De){if(!ke)if(Ce.nd)x[ye]=(Ce.qb|De<<8)>>>0;else{if(le(re),ke=hr(Ce.G[1],Ce.H[1],re),le(re),tt=hr(Ce.G[2],Ce.H[2],re),Ge=hr(Ce.G[3],Ce.H[3],re),re.h)break;x[ye]=(Ge<<24|ke<<16|De<<8|tt)>>>0}if(ke=!1,++ye,++J>=R&&(J=0,++K,$!=null&&K<=G&&!(K%16)&&$(g,K),ve!=null))for(;ne<ye;)De=x[ne++],ve.X[(506832829*De&4294967295)>>>ve.Mb]=De}else if(280>De){if(De=Un(De-256,re),tt=hr(Ce.G[4],Ce.H[4],re),le(re),tt=Wn(R,tt=Un(tt,re)),re.h)break;if(ye-_<tt||q-ye<De)break e;for(Ge=0;Ge<De;++Ge)x[ye+Ge]=x[ye+Ge-tt];for(ye+=De,J+=De;J>=R;)J-=R,++K,$!=null&&K<=G&&!(K%16)&&$(g,K);if(e(ye<=q),J&Se&&(Ce=Yr(ce,J,K)),ve!=null)for(;ne<ye;)De=x[ne++],ve.X[(506832829*De&4294967295)>>>ve.Mb]=De}else{if(!(De<me))break e;for(ke=De-280,e(ve!=null);ne<ye;)De=x[ne++],ve.X[(506832829*De&4294967295)>>>ve.Mb]=De;De=ye,e(!(ke>>>(tt=ve).Xa)),x[De]=tt.X[ke],ke=!0}ke||e(re.h==V(re))}if(g.Pb&&re.h&&ye<q)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&je(g.s.vb,g.s.Wa);else{if(re.h)break e;$!=null&&$(g,K>G?G:K),g.a=0,g.$=ye-_}return 1}return g.a=3,0}function Hn(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var x=g.Wa;x!=null&&(x.X=null),g.vb=null,e(g!=null)}function La(){var g=new gt;return g==null?null:(g.a=0,g.xb=tu,Ut("Predictor","VP8LPredictors"),Ut("Predictor","VP8LPredictors_C"),Ut("PredictorAdd","VP8LPredictorsAdd"),Ut("PredictorAdd","VP8LPredictorsAdd_C"),xr=it,hs=Ve,ps=kt,ha=yt,pa=ct,ga=ut,Xa=Kt,I.VP8LMapColor32b=Ci,I.VP8LMapColor8b=ds,g)}function wi(g,x,_,R,q){var G=1,$=[g],K=[x],J=R.m,re=R.s,ce=null,ye=0;e:for(;;){if(_)for(;G&&Q(J,1);){var ne=$,ue=K,me=R,we=1,ve=me.m,Se=me.gc[me.ab],Ce=Q(ve,2);if(me.Oc&1<<Ce)G=0;else{switch(me.Oc|=1<<Ce,Se.hc=Ce,Se.Ea=ne[0],Se.nc=ue[0],Se.K=[null],++me.ab,e(4>=me.ab),Ce){case 0:case 1:Se.b=Q(ve,3)+2,we=wi(fe(Se.Ea,Se.b),fe(Se.nc,Se.b),0,me,Se.K),Se.K=Se.K[0];break;case 3:var ke,De=Q(ve,8)+1,tt=16<De?0:4<De?1:2<De?2:3;if(ne[0]=fe(Se.Ea,tt),Se.b=tt,ke=we=wi(De,1,0,me,Se.K)){var Ge,St=De,Ke=Se,Dt=1<<(8>>Ke.b),jr=a(Dt);if(jr==null)ke=0;else{var _t=Ke.K[0],Ze=Ke.w;for(jr[0]=Ke.K[0][0],Ge=1;Ge<1*St;++Ge)jr[Ge]=Le(_t[Ze+Ge],jr[Ge-1]);for(;Ge<4*Dt;++Ge)jr[Ge]=0;Ke.K[0]=null,Ke.K[0]=jr,ke=1}}we=ke;break;case 2:break;default:e(0)}G=we}}if($=$[0],K=K[0],G&&Q(J,1)&&!(G=1<=(ye=Q(J,4))&&11>=ye)){R.a=3;break e}var Be;if(Be=G)t:{var yr,bt,jt,or=R,Qr=$,mn=K,pr=ye,on=_,xn=or.m,Or=or.s,Rt=[null],qt=1,gr=0,Vt=kp[pr];r:for(;;){if(on&&Q(xn,1)){var Jr=Q(xn,3)+2,si=fe(Qr,Jr),br=fe(mn,Jr),An=si*br;if(!wi(si,br,0,or,Rt))break r;for(Rt=Rt[0],Or.xc=Jr,yr=0;yr<An;++yr){var Jt=Rt[yr]>>8&65535;Rt[yr]=Jt,Jt>=qt&&(qt=Jt+1)}}if(xn.h)break r;for(bt=0;5>bt;++bt){var Tr=Jd[bt];!bt&&0<pr&&(Tr+=1<<pr),gr<Tr&&(gr=Tr)}var Rn=s(qt*Vt,O),vn=qt,Ln=s(vn,B);if(Ln==null)var Pn=null;else e(65536>=vn),Pn=Ln;var Sn=a(gr);if(Pn==null||Sn==null||Rn==null){or.a=1;break r}var Mn=Rn;for(yr=jt=0;yr<qt;++yr){var ir=Pn[yr],Bn=ir.G,li=ir.H,Ka=0,Zi=1,en=0;for(bt=0;5>bt;++bt){Tr=Jd[bt],Bn[bt]=Mn,li[bt]=jt,!bt&&0<pr&&(Tr+=1<<pr);i:{var _l,Xc=Tr,Cl=or,ys=Sn,Zp=Mn,Qp=jt,Yc=0,ya=Cl.m,Jp=Q(ya,1);if(i(ys,0,0,Xc),Jp){var e2=Q(ya,1)+1,t2=Q(ya,1),cu=Q(ya,t2==0?1:8);ys[cu]=1,e2==2&&(ys[cu=Q(ya,8)]=1);var Il=1}else{var fu=a(19),du=Q(ya,4)+4;if(19<du){Cl.a=3;var El=0;break i}for(_l=0;_l<du;++_l)fu[Np[_l]]=Q(ya,3);var Kc=void 0,bs=void 0,uu=Cl,r2=fu,Nl=Xc,hu=ys,Zc=0,ba=uu.m,pu=8,gu=s(128,O);n:for(;S(gu,0,7,r2,19);){if(Q(ba,1)){var n2=2+2*Q(ba,3);if((Kc=2+Q(ba,n2))>Nl)break n}else Kc=Nl;for(bs=0;bs<Nl&&Kc--;){le(ba);var mu=gu[0+(127&U(ba))];te(ba,ba.u+mu.g);var Io=mu.value;if(16>Io)hu[bs++]=Io,Io!=0&&(pu=Io);else{var i2=Io==16,xu=Io-16,a2=Ip[xu],vu=Q(ba,Cp[xu])+a2;if(bs+vu>Nl)break n;for(var o2=i2?pu:0;0<vu--;)hu[bs++]=o2}}Zc=1;break n}Zc||(uu.a=3),Il=Zc}(Il=Il&&!ya.h)&&(Yc=S(Zp,Qp,8,ys,Xc)),Il&&Yc!=0?El=Yc:(Cl.a=3,El=0)}if(El==0)break r;if(Zi&&Ep[bt]==1&&(Zi=Mn[jt].g==0),Ka+=Mn[jt].g,jt+=El,3>=bt){var ws,Qc=Sn[0];for(ws=1;ws<Tr;++ws)Sn[ws]>Qc&&(Qc=Sn[ws]);en+=Qc}}if(ir.nd=Zi,ir.Qb=0,Zi&&(ir.qb=(Bn[3][li[3]+0].value<<24|Bn[1][li[1]+0].value<<16|Bn[2][li[2]+0].value)>>>0,Ka==0&&256>Bn[0][li[0]+0].value&&(ir.Qb=1,ir.qb+=Bn[0][li[0]+0].value<<8)),ir.jc=!ir.Qb&&6>en,ir.jc){var Dl,Qi=ir;for(Dl=0;Dl<$a;++Dl){var wa=Dl,Aa=Qi.pd[wa],kl=Qi.G[0][Qi.H[0]+wa];256<=kl.value?(Aa.g=kl.g+256,Aa.value=kl.value):(Aa.g=0,Aa.value=0,wa>>=Wr(kl,8,Aa),wa>>=Wr(Qi.G[1][Qi.H[1]+wa],16,Aa),wa>>=Wr(Qi.G[2][Qi.H[2]+wa],0,Aa),Wr(Qi.G[3][Qi.H[3]+wa],24,Aa))}}}Or.vc=Rt,Or.Wb=qt,Or.Ya=Pn,Or.yc=Rn,Be=1;break t}Be=0}if(!(G=Be)){R.a=3;break e}if(0<ye){if(re.ua=1<<ye,!Z(re.Wa,ye)){R.a=1,G=0;break e}}else re.ua=0;var Jc=R,yu=$,s2=K,ef=Jc.s,tf=ef.xc;if(Jc.c=yu,Jc.i=s2,ef.md=fe(yu,tf),ef.wc=tf==0?-1:(1<<tf)-1,_){R.xb=Bp;break e}if((ce=a($*K))==null){R.a=1,G=0;break e}G=(G=ni(R,ce,0,$,K,K,null))&&!J.h;break e}return G?(q!=null?q[0]=ce:(e(ce==null),e(_)),R.$=0,_||Hn(re)):Hn(re),G}function Pa(g,x){var _=g.c*g.i,R=_+x+16*x;return e(g.c<=x),g.V=a(R),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+_+x,1)}function po(g,x){var _=g.C,R=x-_,q=g.V,G=g.Ba+g.c*_;for(e(x<=g.l.o);0<R;){var $=16<R?16:R,K=g.l.ma,J=g.l.width,re=J*$,ce=K.ca,ye=K.tb+J*_,ne=g.Ta,ue=g.Ua;Ra(g,$,q,G),Vd(ne,ue,ce,ye,re),bi(K,_,_+$,ce,ye,J),R-=$,q+=$*g.c,_+=$}e(_==x),g.C=g.Ma=x}function go(){this.ub=this.yd=this.td=this.Rb=0}function mo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _c(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Xo(){this.Yb=function(){var g=[];return function x(_,R,q){for(var G=q[R],$=0;$<G&&(_.push(q.length>R+1?[]:0),!(q.length<R+1));$++)x(_[$],R+1,q)}(g,0,[3,11]),g}()}function Ys(){this.jb=a(3),this.Wc=o([4,8],Xo),this.Xc=o([4,17],Xo)}function Ks(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function qn(){this.ld=this.La=this.dd=this.tc=0}function Yo(){this.Na=this.la=0}function Zs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ko(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qs(){this.uc=this.M=this.Nb=0,this.wa=Array(new qn),this.Y=0,this.ya=Array(new Ko),this.aa=0,this.l=new xo}function Js(){this.y=a(16),this.f=a(8),this.ea=a(8)}function el(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new go,this.Kc=new mo,this.ed=new Ks,this.Qa=new _c,this.Ic=this.$c=this.Aa=0,this.D=new Qs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,M),this.ia=0,this.pb=s(4,Zs),this.Pa=new Ys,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Js),this.Hd=0,this.rb=Array(new Yo),this.sb=0,this.wa=Array(new qn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ko),this.L=this.aa=0,this.gd=o([4,2],qn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ai(g,x){return 0>g?0:g>x?x:g}function xo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Cc(){var g=new el;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,xs||(xs=vo)),g}function _r(g,x,_){return g.a==0&&(g.a=x,g.sc=_,g.cb=0),0}function tl(g,x,_){return 3<=_&&g[x+0]==157&&g[x+1]==1&&g[x+2]==42}function Si(g,x){if(g==null)return 0;if(g.a=0,g.sc="OK",x==null)return _r(g,2,"null VP8Io passed to VP8GetHeaders()");var _=x.data,R=x.w,q=x.ha;if(4>q)return _r(g,7,"Truncated header.");var G=_[R+0]|_[R+1]<<8|_[R+2]<<16,$=g.Od;if($.Rb=!(1&G),$.td=G>>1&7,$.yd=G>>4&1,$.ub=G>>5,3<$.td)return _r(g,3,"Incorrect keyframe parameters.");if(!$.yd)return _r(g,4,"Frame not displayable.");R+=3,q-=3;var K=g.Kc;if($.Rb){if(7>q)return _r(g,7,"cannot parse picture header");if(!tl(_,R,q))return _r(g,3,"Bad code word");K.c=16383&(_[R+4]<<8|_[R+3]),K.Td=_[R+4]>>6,K.i=16383&(_[R+6]<<8|_[R+5]),K.Ud=_[R+6]>>6,R+=7,q-=7,g.za=K.c+15>>4,g.Ub=K.i+15>>4,x.width=K.c,x.height=K.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,i((G=g.Pa).jb,0,255,G.jb.length),e((G=g.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,i(G.Zb,0,0,G.Zb.length),i(G.Lb,0,0,G.Lb)}if($.ub>q)return _r(g,7,"bad partition length");T(G=g.m,_,R,$.ub),R+=$.ub,q-=$.ub,$.Rb&&(K.Ld=pe(G),K.Kd=pe(G)),K=g.Qa;var J,re=g.Pa;if(e(G!=null),e(K!=null),K.Cb=pe(G),K.Cb){if(K.Bb=pe(G),pe(G)){for(K.Fb=pe(G),J=0;4>J;++J)K.Zb[J]=pe(G)?Y(G,7):0;for(J=0;4>J;++J)K.Lb[J]=pe(G)?Y(G,6):0}if(K.Bb)for(J=0;3>J;++J)re.jb[J]=pe(G)?L(G,8):255}else K.Bb=0;if(G.Ka)return _r(g,3,"cannot parse segment header");if((K=g.ed).zd=pe(G),K.Tb=L(G,6),K.wb=L(G,3),K.Pc=pe(G),K.Pc&&pe(G)){for(re=0;4>re;++re)pe(G)&&(K.vd[re]=Y(G,6));for(re=0;4>re;++re)pe(G)&&(K.od[re]=Y(G,6))}if(g.L=K.Tb==0?0:K.zd?1:2,G.Ka)return _r(g,3,"cannot parse filter header");var ce=q;if(q=J=R,R=J+ce,K=ce,g.Xb=(1<<L(g.m,2))-1,ce<3*(re=g.Xb))_=7;else{for(J+=3*re,K-=3*re,ce=0;ce<re;++ce){var ye=_[q+0]|_[q+1]<<8|_[q+2]<<16;ye>K&&(ye=K),T(g.Jc[+ce],_,J,ye),J+=ye,K-=ye,q+=3}T(g.Jc[+re],_,J,K),_=J<R?0:5}if(_!=0)return _r(g,_,"cannot parse partitions");for(_=L(J=g.m,7),q=pe(J)?Y(J,4):0,R=pe(J)?Y(J,4):0,K=pe(J)?Y(J,4):0,re=pe(J)?Y(J,4):0,J=pe(J)?Y(J,4):0,ce=g.Qa,ye=0;4>ye;++ye){if(ce.Cb){var ne=ce.Zb[ye];ce.Fb||(ne+=_)}else{if(0<ye){g.pb[ye]=g.pb[0];continue}ne=_}var ue=g.pb[ye];ue.Sc[0]=Vc[Ai(ne+q,127)],ue.Sc[1]=Gc[Ai(ne+0,127)],ue.Eb[0]=2*Vc[Ai(ne+R,127)],ue.Eb[1]=101581*Gc[Ai(ne+K,127)]>>16,8>ue.Eb[1]&&(ue.Eb[1]=8),ue.Qc[0]=Vc[Ai(ne+re,117)],ue.Qc[1]=Gc[Ai(ne+J,127)],ue.lc=ne+J}if(!$.Rb)return _r(g,4,"Not a key frame.");for(pe(G),$=g.Pa,_=0;4>_;++_){for(q=0;8>q;++q)for(R=0;3>R;++R)for(K=0;11>K;++K)re=de(G,Pp[_][q][R][K])?L(G,8):Rp[_][q][R][K],$.Wc[_][q].Yb[R][K]=re;for(q=0;17>q;++q)$.Xc[_][q]=$.Wc[_][Mp[q]]}return g.kc=pe(G),g.kc&&(g.Bd=L(G,8)),g.cb=1}function vo(g,x,_,R,q,G,$){var K=x[q].Yb[_];for(_=0;16>q;++q){if(!de(g,K[_+0]))return q;for(;!de(g,K[_+1]);)if(K=x[++q].Yb[0],_=0,q==16)return 16;var J=x[q+1].Yb;if(de(g,K[_+2])){var re=g,ce=0;if(de(re,(ne=K)[(ye=_)+3]))if(de(re,ne[ye+6])){for(K=0,ye=2*(ce=de(re,ne[ye+8]))+(ne=de(re,ne[ye+9+ce])),ce=0,ne=Op[ye];ne[K];++K)ce+=ce+de(re,ne[K]);ce+=3+(8<<ye)}else de(re,ne[ye+7])?(ce=7+2*de(re,165),ce+=de(re,145)):ce=5+de(re,159);else ce=de(re,ne[ye+4])?3+de(re,ne[ye+5]):2;K=J[2]}else ce=1,K=J[1];J=$+Tp[q],0>(re=g).b&&he(re);var ye,ne=re.b,ue=(ye=re.Ca>>1)-(re.I>>ne)>>31;--re.b,re.Ca+=ue,re.Ca|=1,re.I-=(ye+1&ue)<<ne,G[J]=((ce^ue)-ue)*R[(0<q)+0]}return 16}function rl(g){var x=g.rb[g.sb-1];x.la=0,x.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function Vn(g,x,_,R,q){q=g[x+_+32*R]+(q>>3),g[x+_+32*R]=-256&q?0>q?0:255:q}function Nr(g,x,_,R,q,G){Vn(g,x,0,_,R+q),Vn(g,x,1,_,R+G),Vn(g,x,2,_,R-G),Vn(g,x,3,_,R-q)}function Bi(g){return(20091*g>>16)+g}function nl(g,x,_,R){var q,G=0,$=a(16);for(q=0;4>q;++q){var K=g[x+0]+g[x+8],J=g[x+0]-g[x+8],re=(35468*g[x+4]>>16)-Bi(g[x+12]),ce=Bi(g[x+4])+(35468*g[x+12]>>16);$[G+0]=K+ce,$[G+1]=J+re,$[G+2]=J-re,$[G+3]=K-ce,G+=4,x++}for(q=G=0;4>q;++q)K=(g=$[G+0]+4)+$[G+8],J=g-$[G+8],re=(35468*$[G+4]>>16)-Bi($[G+12]),Vn(_,R,0,0,K+(ce=Bi($[G+4])+(35468*$[G+12]>>16))),Vn(_,R,1,0,J+re),Vn(_,R,2,0,J-re),Vn(_,R,3,0,K-ce),G++,R+=32}function Ic(g,x,_,R){var q=g[x+0]+4,G=35468*g[x+4]>>16,$=Bi(g[x+4]),K=35468*g[x+1]>>16;Nr(_,R,0,q+$,g=Bi(g[x+1]),K),Nr(_,R,1,q+G,g,K),Nr(_,R,2,q-G,g,K),Nr(_,R,3,q-$,g,K)}function Ec(g,x,_,R,q){nl(g,x,_,R),q&&nl(g,x+16,_,R+4)}function _i(g,x,_,R){Ya(g,x+0,_,R,1),Ya(g,x+32,_,R+128,1)}function il(g,x,_,R){var q;for(g=g[x+0]+4,q=0;4>q;++q)for(x=0;4>x;++x)Vn(_,R,x,q,g)}function al(g,x,_,R){g[x+0]&&Wt(g,x+0,_,R),g[x+16]&&Wt(g,x+16,_,R+4),g[x+32]&&Wt(g,x+32,_,R+128),g[x+48]&&Wt(g,x+48,_,R+128+4)}function yo(g,x,_,R){var q,G=a(16);for(q=0;4>q;++q){var $=g[x+0+q]+g[x+12+q],K=g[x+4+q]+g[x+8+q],J=g[x+4+q]-g[x+8+q],re=g[x+0+q]-g[x+12+q];G[0+q]=$+K,G[8+q]=$-K,G[4+q]=re+J,G[12+q]=re-J}for(q=0;4>q;++q)$=(g=G[0+4*q]+3)+G[3+4*q],K=G[1+4*q]+G[2+4*q],J=G[1+4*q]-G[2+4*q],re=g-G[3+4*q],_[R+0]=$+K>>3,_[R+16]=re+J>>3,_[R+32]=$-K>>3,_[R+48]=re-J>>3,R+=64}function Ma(g,x,_){var R,q=x-32,G=Tn,$=255-g[q-1];for(R=0;R<_;++R){var K,J=G,re=$+g[x-1];for(K=0;K<_;++K)g[x+K]=J[re+g[q+K]];x+=32}}function Nc(g,x){Ma(g,x,4)}function Dc(g,x){Ma(g,x,8)}function kc(g,x){Ma(g,x,16)}function Zo(g,x){var _;for(_=0;16>_;++_)n(g,x+32*_,g,x-32,16)}function ol(g,x){var _;for(_=16;0<_;--_)i(g,x,g[x-1],16),x+=32}function ii(g,x,_){var R;for(R=0;16>R;++R)i(x,_+32*R,g,16)}function jc(g,x){var _,R=16;for(_=0;16>_;++_)R+=g[x-1+32*_]+g[x+_-32];ii(R>>5,g,x)}function Ba(g,x){var _,R=8;for(_=0;16>_;++_)R+=g[x-1+32*_];ii(R>>4,g,x)}function Qo(g,x){var _,R=8;for(_=0;16>_;++_)R+=g[x+_-32];ii(R>>4,g,x)}function Oc(g,x){ii(128,g,x)}function mt(g,x,_){return g+2*x+_+2>>2}function Tc(g,x){var _,R=x-32;for(R=new Uint8Array([mt(g[R-1],g[R+0],g[R+1]),mt(g[R+0],g[R+1],g[R+2]),mt(g[R+1],g[R+2],g[R+3]),mt(g[R+2],g[R+3],g[R+4])]),_=0;4>_;++_)n(g,x+32*_,R,0,R.length)}function Rc(g,x){var _=g[x-1],R=g[x-1+32],q=g[x-1+64],G=g[x-1+96];be(g,x+0,16843009*mt(g[x-1-32],_,R)),be(g,x+32,16843009*mt(_,R,q)),be(g,x+64,16843009*mt(R,q,G)),be(g,x+96,16843009*mt(q,G,G))}function Lc(g,x){var _,R=4;for(_=0;4>_;++_)R+=g[x+_-32]+g[x-1+32*_];for(R>>=3,_=0;4>_;++_)i(g,x+32*_,R,4)}function Fi(g,x){var _=g[x-1+0],R=g[x-1+32],q=g[x-1+64],G=g[x-1-32],$=g[x+0-32],K=g[x+1-32],J=g[x+2-32],re=g[x+3-32];g[x+0+96]=mt(R,q,g[x-1+96]),g[x+1+96]=g[x+0+64]=mt(_,R,q),g[x+2+96]=g[x+1+64]=g[x+0+32]=mt(G,_,R),g[x+3+96]=g[x+2+64]=g[x+1+32]=g[x+0+0]=mt($,G,_),g[x+3+64]=g[x+2+32]=g[x+1+0]=mt(K,$,G),g[x+3+32]=g[x+2+0]=mt(J,K,$),g[x+3+0]=mt(re,J,K)}function zi(g,x){var _=g[x+1-32],R=g[x+2-32],q=g[x+3-32],G=g[x+4-32],$=g[x+5-32],K=g[x+6-32],J=g[x+7-32];g[x+0+0]=mt(g[x+0-32],_,R),g[x+1+0]=g[x+0+32]=mt(_,R,q),g[x+2+0]=g[x+1+32]=g[x+0+64]=mt(R,q,G),g[x+3+0]=g[x+2+32]=g[x+1+64]=g[x+0+96]=mt(q,G,$),g[x+3+32]=g[x+2+64]=g[x+1+96]=mt(G,$,K),g[x+3+64]=g[x+2+96]=mt($,K,J),g[x+3+96]=mt(K,J,J)}function Pc(g,x){var _=g[x-1+0],R=g[x-1+32],q=g[x-1+64],G=g[x-1-32],$=g[x+0-32],K=g[x+1-32],J=g[x+2-32],re=g[x+3-32];g[x+0+0]=g[x+1+64]=G+$+1>>1,g[x+1+0]=g[x+2+64]=$+K+1>>1,g[x+2+0]=g[x+3+64]=K+J+1>>1,g[x+3+0]=J+re+1>>1,g[x+0+96]=mt(q,R,_),g[x+0+64]=mt(R,_,G),g[x+0+32]=g[x+1+96]=mt(_,G,$),g[x+1+32]=g[x+2+96]=mt(G,$,K),g[x+2+32]=g[x+3+96]=mt($,K,J),g[x+3+32]=mt(K,J,re)}function Mc(g,x){var _=g[x+0-32],R=g[x+1-32],q=g[x+2-32],G=g[x+3-32],$=g[x+4-32],K=g[x+5-32],J=g[x+6-32],re=g[x+7-32];g[x+0+0]=_+R+1>>1,g[x+1+0]=g[x+0+64]=R+q+1>>1,g[x+2+0]=g[x+1+64]=q+G+1>>1,g[x+3+0]=g[x+2+64]=G+$+1>>1,g[x+0+32]=mt(_,R,q),g[x+1+32]=g[x+0+96]=mt(R,q,G),g[x+2+32]=g[x+1+96]=mt(q,G,$),g[x+3+32]=g[x+2+96]=mt(G,$,K),g[x+3+64]=mt($,K,J),g[x+3+96]=mt(K,J,re)}function bo(g,x){var _=g[x-1+0],R=g[x-1+32],q=g[x-1+64],G=g[x-1+96];g[x+0+0]=_+R+1>>1,g[x+2+0]=g[x+0+32]=R+q+1>>1,g[x+2+32]=g[x+0+64]=q+G+1>>1,g[x+1+0]=mt(_,R,q),g[x+3+0]=g[x+1+32]=mt(R,q,G),g[x+3+32]=g[x+1+64]=mt(q,G,G),g[x+3+64]=g[x+2+64]=g[x+0+96]=g[x+1+96]=g[x+2+96]=g[x+3+96]=G}function Jo(g,x){var _=g[x-1+0],R=g[x-1+32],q=g[x-1+64],G=g[x-1+96],$=g[x-1-32],K=g[x+0-32],J=g[x+1-32],re=g[x+2-32];g[x+0+0]=g[x+2+32]=_+$+1>>1,g[x+0+32]=g[x+2+64]=R+_+1>>1,g[x+0+64]=g[x+2+96]=q+R+1>>1,g[x+0+96]=G+q+1>>1,g[x+3+0]=mt(K,J,re),g[x+2+0]=mt($,K,J),g[x+1+0]=g[x+3+32]=mt(_,$,K),g[x+1+32]=g[x+3+64]=mt(R,_,$),g[x+1+64]=g[x+3+96]=mt(q,R,_),g[x+1+96]=mt(G,q,R)}function Fa(g,x){var _;for(_=0;8>_;++_)n(g,x+32*_,g,x-32,8)}function Bc(g,x){var _;for(_=0;8>_;++_)i(g,x,g[x-1],8),x+=32}function Ui(g,x,_){var R;for(R=0;8>R;++R)i(x,_+32*R,g,8)}function Fc(g,x){var _,R=8;for(_=0;8>_;++_)R+=g[x+_-32]+g[x-1+32*_];Ui(R>>4,g,x)}function es(g,x){var _,R=4;for(_=0;8>_;++_)R+=g[x+_-32];Ui(R>>3,g,x)}function ts(g,x){var _,R=4;for(_=0;8>_;++_)R+=g[x-1+32*_];Ui(R>>3,g,x)}function sl(g,x){Ui(128,g,x)}function Wi(g,x,_){var R=g[x-_],q=g[x+0],G=3*(q-R)+zc[1020+g[x-2*_]-g[x+_]],$=gl[112+(G+4>>3)];g[x-_]=Tn[255+R+gl[112+(G+3>>3)]],g[x+0]=Tn[255+q-$]}function rs(g,x,_,R){var q=g[x+0],G=g[x+_];return Xn[255+g[x-2*_]-g[x-_]]>R||Xn[255+G-q]>R}function wo(g,x,_,R){return 4*Xn[255+g[x-_]-g[x+0]]+Xn[255+g[x-2*_]-g[x+_]]<=R}function ns(g,x,_,R,q){var G=g[x-3*_],$=g[x-2*_],K=g[x-_],J=g[x+0],re=g[x+_],ce=g[x+2*_],ye=g[x+3*_];return 4*Xn[255+K-J]+Xn[255+$-re]>R?0:Xn[255+g[x-4*_]-G]<=q&&Xn[255+G-$]<=q&&Xn[255+$-K]<=q&&Xn[255+ye-ce]<=q&&Xn[255+ce-re]<=q&&Xn[255+re-J]<=q}function za(g,x,_,R){var q=2*R+1;for(R=0;16>R;++R)wo(g,x+R,_,q)&&Wi(g,x+R,_)}function is(g,x,_,R){var q=2*R+1;for(R=0;16>R;++R)wo(g,x+R*_,1,q)&&Wi(g,x+R*_,1)}function ll(g,x,_,R){var q;for(q=3;0<q;--q)za(g,x+=4*_,_,R)}function cl(g,x,_,R){var q;for(q=3;0<q;--q)is(g,x+=4,_,R)}function Hi(g,x,_,R,q,G,$,K){for(G=2*G+1;0<q--;){if(ns(g,x,_,G,$))if(rs(g,x,_,K))Wi(g,x,_);else{var J=g,re=x,ce=_,ye=J[re-2*ce],ne=J[re-ce],ue=J[re+0],me=J[re+ce],we=J[re+2*ce],ve=27*(Ce=zc[1020+3*(ue-ne)+zc[1020+ye-me]])+63>>7,Se=18*Ce+63>>7,Ce=9*Ce+63>>7;J[re-3*ce]=Tn[255+J[re-3*ce]+Ce],J[re-2*ce]=Tn[255+ye+Se],J[re-ce]=Tn[255+ne+ve],J[re+0]=Tn[255+ue-ve],J[re+ce]=Tn[255+me-Se],J[re+2*ce]=Tn[255+we-Ce]}x+=R}}function qi(g,x,_,R,q,G,$,K){for(G=2*G+1;0<q--;){if(ns(g,x,_,G,$))if(rs(g,x,_,K))Wi(g,x,_);else{var J=g,re=x,ce=_,ye=J[re-ce],ne=J[re+0],ue=J[re+ce],me=gl[112+(4+(we=3*(ne-ye))>>3)],we=gl[112+(we+3>>3)],ve=me+1>>1;J[re-2*ce]=Tn[255+J[re-2*ce]+ve],J[re-ce]=Tn[255+ye+we],J[re+0]=Tn[255+ne-me],J[re+ce]=Tn[255+ue-ve]}x+=R}}function fl(g,x,_,R,q,G){Hi(g,x,_,1,16,R,q,G)}function Ua(g,x,_,R,q,G){Hi(g,x,1,_,16,R,q,G)}function dl(g,x,_,R,q,G){var $;for($=3;0<$;--$)qi(g,x+=4*_,_,1,16,R,q,G)}function w(g,x,_,R,q,G){var $;for($=3;0<$;--$)qi(g,x+=4,1,_,16,R,q,G)}function H(g,x,_,R,q,G,$,K){Hi(g,x,q,1,8,G,$,K),Hi(_,R,q,1,8,G,$,K)}function ie(g,x,_,R,q,G,$,K){Hi(g,x,1,q,8,G,$,K),Hi(_,R,1,q,8,G,$,K)}function se(g,x,_,R,q,G,$,K){qi(g,x+4*q,q,1,8,G,$,K),qi(_,R+4*q,q,1,8,G,$,K)}function ge(g,x,_,R,q,G,$,K){qi(g,x+4,1,q,8,G,$,K),qi(_,R+4,1,q,8,G,$,K)}function _e(){this.ba=new ht,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Et,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ne(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Xe(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function et(){this.ua=0,this.Wa=new He,this.vb=new He,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new O}function gt(){this.xb=this.a=0,this.l=new xo,this.ca=new ht,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new et,this.ab=0,this.gc=s(4,Xe),this.Oc=0}function wt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Tt(g,x,_,R,q,G,$){for(g=g==null?0:g[x+0],x=0;x<$;++x)q[G+x]=g+_[R+x]&255,g=q[G+x]}function ur(g,x,_,R,q,G,$){var K;if(g==null)Tt(null,null,_,R,q,G,$);else for(K=0;K<$;++K)q[G+K]=g[x+K]+_[R+K]&255}function Cr(g,x,_,R,q,G,$){if(g==null)Tt(null,null,_,R,q,G,$);else{var K,J=g[x+0],re=J,ce=J;for(K=0;K<$;++K)re=ce+(J=g[x+K])-re,ce=_[R+K]+(-256&re?0>re?0:255:re)&255,re=J,q[G+K]=ce}}function nr(g,x,_,R){var q=x.width,G=x.o;if(e(g!=null&&x!=null),0>_||0>=R||_+R>G)return null;if(!g.Cc){if(g.ga==null){var $;if(g.ga=new wt,($=g.ga==null)||($=x.width*x.o,e(g.Gb.length==0),g.Gb=a($),g.Uc=0,g.Gb==null?$=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,$=1),$=!$),!$){$=g.ga;var K=g.Fa,J=g.P,re=g.qc,ce=g.mb,ye=g.nb,ne=J+1,ue=re-1,me=$.l;if(e(K!=null&&ce!=null&&x!=null),va[0]=null,va[1]=Tt,va[2]=ur,va[3]=Cr,$.ca=ce,$.tb=ye,$.c=x.width,$.i=x.height,e(0<$.c&&0<$.i),1>=re)x=0;else if($.$a=3&K[J+0],$.Z=K[J+0]>>2&3,$.Lc=K[J+0]>>4&3,J=K[J+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||J)x=0;else if(me.put=ft,me.ac=Ur,me.bc=Pi,me.ma=$,me.width=x.width,me.height=x.height,me.Da=x.Da,me.v=x.v,me.va=x.va,me.j=x.j,me.o=x.o,$.$a)e:{e($.$a==1),x=La();t:for(;;){if(x==null){x=0;break e}if(e($!=null),$.mc=x,x.c=$.c,x.i=$.i,x.l=$.l,x.l.ma=$,x.l.width=$.c,x.l.height=$.i,x.a=0,X(x.m,K,ne,ue),!wi($.c,$.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&ti(x.s)?($.ic=1,K=x.c*x.i,x.Ta=null,x.Ua=0,x.V=a(K),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):($.ic=0,x=Pa(x,$.c)),!x))break t;x=1;break e}$.mc=null,x=0}else x=ue>=$.c*$.i;$=!x}if($)return null;g.ga.Lc!=1?g.Ga=0:R=G-_}e(g.ga!=null),e(_+R<=G);e:{if(x=(K=g.ga).c,G=K.l.o,K.$a==0){if(ne=g.rc,ue=g.Vc,me=g.Fa,J=g.P+1+_*x,re=g.mb,ce=g.nb+_*x,e(J<=g.P+g.qc),K.Z!=0)for(e(va[K.Z]!=null),$=0;$<R;++$)va[K.Z](ne,ue,me,J,re,ce,x),ne=re,ue=ce,ce+=x,J+=x;else for($=0;$<R;++$)n(re,ce,me,J,x),ne=re,ue=ce,ce+=x,J+=x;g.rc=ne,g.Vc=ue}else{if(e(K.mc!=null),x=_+R,e(($=K.mc)!=null),e(x<=$.i),$.C>=x)x=1;else if(K.ic||ai(),K.ic){K=$.V,ne=$.Ba,ue=$.c;var we=$.i,ve=(me=1,J=$.$/ue,re=$.$%ue,ce=$.m,ye=$.s,$.$),Se=ue*we,Ce=ue*x,ke=ye.wc,De=ve<Ce?Yr(ye,re,J):null;e(ve<=Se),e(x<=we),e(ti(ye));t:for(;;){for(;!ce.h&&ve<Ce;){if(re&ke||(De=Yr(ye,re,J)),e(De!=null),le(ce),256>(we=hr(De.G[0],De.H[0],ce)))K[ne+ve]=we,++ve,++re>=ue&&(re=0,++J<=x&&!(J%16)&&ri($,J));else{if(!(280>we)){me=0;break t}we=Un(we-256,ce);var tt,Ge=hr(De.G[4],De.H[4],ce);if(le(ce),!(ve>=(Ge=Wn(ue,Ge=Un(Ge,ce)))&&Se-ve>=we)){me=0;break t}for(tt=0;tt<we;++tt)K[ne+ve+tt]=K[ne+ve+tt-Ge];for(ve+=we,re+=we;re>=ue;)re-=ue,++J<=x&&!(J%16)&&ri($,J);ve<Ce&&re&ke&&(De=Yr(ye,re,J))}e(ce.h==V(ce))}ri($,J>x?x:J);break t}!me||ce.h&&ve<Se?(me=0,$.a=ce.h?5:3):$.$=ve,x=me}else x=ni($,$.V,$.Ba,$.c,$.i,x,po);if(!x){R=0;break e}}_+R>=G&&(g.Cc=1),R=1}if(!R)return null;if(g.Cc&&((R=g.ga)!=null&&(R.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+_*q}function Dr(g,x,_,R,q,G){for(;0<q--;){var $,K=g,J=x+(_?1:0),re=g,ce=x+(_?0:3);for($=0;$<R;++$){var ye=re[ce+4*$];ye!=255&&(ye*=32897,K[J+4*$+0]=K[J+4*$+0]*ye>>23,K[J+4*$+1]=K[J+4*$+1]*ye>>23,K[J+4*$+2]=K[J+4*$+2]*ye>>23)}x+=G}}function Ir(g,x,_,R,q){for(;0<R--;){var G;for(G=0;G<_;++G){var $=g[x+2*G+0],K=15&(re=g[x+2*G+1]),J=4369*K,re=(240&re|re>>4)*J>>16;g[x+2*G+0]=(240&$|$>>4)*J>>16&240|(15&$|$<<4)*J>>16>>4&15,g[x+2*G+1]=240&re|K}x+=q}}function Kr(g,x,_,R,q,G,$,K){var J,re,ce=255;for(re=0;re<q;++re){for(J=0;J<R;++J){var ye=g[x+J];G[$+4*J]=ye,ce&=ye}x+=_,$+=K}return ce!=255}function Vi(g,x,_,R,q){var G;for(G=0;G<q;++G)_[R+G]=g[x+G]>>8}function ai(){ms=Dr,Hd=Ir,qd=Kr,Vd=Vi}function Gi(g,x,_){I[g]=function(R,q,G,$,K,J,re,ce,ye,ne,ue,me,we,ve,Se,Ce,ke){var De,tt=ke-1>>1,Ge=K[J+0]|re[ce+0]<<16,St=ye[ne+0]|ue[me+0]<<16;e(R!=null);var Ke=3*Ge+St+131074>>2;for(x(R[q+0],255&Ke,Ke>>16,we,ve),G!=null&&(Ke=3*St+Ge+131074>>2,x(G[$+0],255&Ke,Ke>>16,Se,Ce)),De=1;De<=tt;++De){var Dt=K[J+De]|re[ce+De]<<16,jr=ye[ne+De]|ue[me+De]<<16,_t=Ge+Dt+St+jr+524296,Ze=_t+2*(Dt+St)>>3;Ke=Ze+Ge>>1,Ge=(_t=_t+2*(Ge+jr)>>3)+Dt>>1,x(R[q+2*De-1],255&Ke,Ke>>16,we,ve+(2*De-1)*_),x(R[q+2*De-0],255&Ge,Ge>>16,we,ve+(2*De-0)*_),G!=null&&(Ke=_t+St>>1,Ge=Ze+jr>>1,x(G[$+2*De-1],255&Ke,Ke>>16,Se,Ce+(2*De-1)*_),x(G[$+2*De+0],255&Ge,Ge>>16,Se,Ce+(2*De+0)*_)),Ge=Dt,St=jr}1&ke||(Ke=3*Ge+St+131074>>2,x(R[q+ke-1],255&Ke,Ke>>16,we,ve+(ke-1)*_),G!=null&&(Ke=3*St+Ge+131074>>2,x(G[$+ke-1],255&Ke,Ke>>16,Se,Ce+(ke-1)*_)))}}function as(){Yn[ml]=Fp,Yn[xl]=ru,Yn[Zd]=zp,Yn[vl]=nu,Yn[yl]=iu,Yn[Uc]=au,Yn[Qd]=Up,Yn[Wc]=ru,Yn[Hc]=nu,Yn[bl]=iu,Yn[qc]=au}function Ao(g){return g&-16384?0>g?0:255:g>>Wp}function la(g,x){return Ao((19077*g>>8)+(26149*x>>8)-14234)}function Wa(g,x,_){return Ao((19077*g>>8)-(6419*x>>8)-(13320*_>>8)+8708)}function Ha(g,x){return Ao((19077*g>>8)+(33050*x>>8)-17685)}function ca(g,x,_,R,q){R[q+0]=la(g,_),R[q+1]=Wa(g,x,_),R[q+2]=Ha(g,x)}function Zr(g,x,_,R,q){R[q+0]=Ha(g,x),R[q+1]=Wa(g,x,_),R[q+2]=la(g,_)}function qa(g,x,_,R,q){var G=Wa(g,x,_);x=G<<3&224|Ha(g,x)>>3,R[q+0]=248&la(g,_)|G>>5,R[q+1]=x}function Va(g,x,_,R,q){var G=240&Ha(g,x)|15;R[q+0]=240&la(g,_)|Wa(g,x,_)>>4,R[q+1]=G}function os(g,x,_,R,q){R[q+0]=255,ca(g,x,_,R,q+1)}function ss(g,x,_,R,q){Zr(g,x,_,R,q),R[q+3]=255}function gn(g,x,_,R,q){ca(g,x,_,R,q),R[q+3]=255}function $i(g,x,_){I[g]=function(R,q,G,$,K,J,re,ce,ye){for(var ne=ce+(-2&ye)*_;ce!=ne;)x(R[q+0],G[$+0],K[J+0],re,ce),x(R[q+1],G[$+0],K[J+0],re,ce+_),q+=2,++$,++J,ce+=2*_;1&ye&&x(R[q+0],G[$+0],K[J+0],re,ce)}}function So(g,x,_){return _==0?g==0?x==0?6:5:x==0?4:0:_}function ul(g,x,_,R,q){switch(g>>>30){case 3:Ya(x,_,R,q,0);break;case 2:$n(x,_,R,q);break;case 1:Wt(x,_,R,q)}}function Gn(g,x){var _,R,q=x.M,G=x.Nb,$=g.oc,K=g.pc+40,J=g.oc,re=g.pc+584,ce=g.oc,ye=g.pc+600;for(_=0;16>_;++_)$[K+32*_-1]=129;for(_=0;8>_;++_)J[re+32*_-1]=129,ce[ye+32*_-1]=129;for(0<q?$[K-1-32]=J[re-1-32]=ce[ye-1-32]=129:(i($,K-32-1,127,21),i(J,re-32-1,127,9),i(ce,ye-32-1,127,9)),R=0;R<g.za;++R){var ne=x.ya[x.aa+R];if(0<R){for(_=-1;16>_;++_)n($,K+32*_-4,$,K+32*_+12,4);for(_=-1;8>_;++_)n(J,re+32*_-4,J,re+32*_+4,4),n(ce,ye+32*_-4,ce,ye+32*_+4,4)}var ue=g.Gd,me=g.Hd+R,we=ne.ad,ve=ne.Hc;if(0<q&&(n($,K-32,ue[me].y,0,16),n(J,re-32,ue[me].f,0,8),n(ce,ye-32,ue[me].ea,0,8)),ne.Za){var Se=$,Ce=K-32+16;for(0<q&&(R>=g.za-1?i(Se,Ce,ue[me].y[15],4):n(Se,Ce,ue[me+1].y,0,4)),_=0;4>_;_++)Se[Ce+128+_]=Se[Ce+256+_]=Se[Ce+384+_]=Se[Ce+0+_];for(_=0;16>_;++_,ve<<=2)Se=$,Ce=K+su[_],oi[ne.Ob[_]](Se,Ce),ul(ve,we,16*+_,Se,Ce)}else if(Se=So(R,q,ne.Ob[0]),xa[Se]($,K),ve!=0)for(_=0;16>_;++_,ve<<=2)ul(ve,we,16*+_,$,K+su[_]);for(_=ne.Gc,Se=So(R,q,ne.Dd),Ki[Se](J,re),Ki[Se](ce,ye),ve=we,Se=J,Ce=re,255&(ne=0|_)&&(170&ne?Ei(ve,256,Se,Ce):Qt(ve,256,Se,Ce)),ne=ce,ve=ye,255&(_>>=8)&&(170&_?Ei(we,320,ne,ve):Qt(we,320,ne,ve)),q<g.Ub-1&&(n(ue[me].y,0,$,K+480,16),n(ue[me].f,0,J,re+224,8),n(ue[me].ea,0,ce,ye+224,8)),_=8*G*g.B,ue=g.sa,me=g.ta+16*R+16*G*g.R,we=g.qa,ne=g.ra+8*R+_,ve=g.Ha,Se=g.Ia+8*R+_,_=0;16>_;++_)n(ue,me+_*g.R,$,K+32*_,16);for(_=0;8>_;++_)n(we,ne+_*g.B,J,re+32*_,8),n(ve,Se+_*g.B,ce,ye+32*_,8)}}function Ga(g,x,_,R,q,G,$,K,J){var re=[0],ce=[0],ye=0,ne=J!=null?J.kd:0,ue=J??new Ne;if(g==null||12>_)return 7;ue.data=g,ue.w=x,ue.ha=_,x=[x],_=[_],ue.gb=[ue.gb];e:{var me=x,we=_,ve=ue.gb;if(e(g!=null),e(we!=null),e(ve!=null),ve[0]=0,12<=we[0]&&!t(g,me[0],"RIFF")){if(t(g,me[0]+8,"WEBP")){ve=3;break e}var Se=Fe(g,me[0]+4);if(12>Se||4294967286<Se){ve=3;break e}if(ne&&Se>we[0]-8){ve=7;break e}ve[0]=Se,me[0]+=12,we[0]-=12}ve=0}if(ve!=0)return ve;for(Se=0<ue.gb[0],_=_[0];;){e:{var Ce=g;we=x,ve=_;var ke=re,De=ce,tt=me=[0];if((Ke=ye=[ye])[0]=0,8>ve[0])ve=7;else{if(!t(Ce,we[0],"VP8X")){if(Fe(Ce,we[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var Ge=Fe(Ce,we[0]+8),St=1+Re(Ce,we[0]+12);if(2147483648<=St*(Ce=1+Re(Ce,we[0]+15))){ve=3;break e}tt!=null&&(tt[0]=Ge),ke!=null&&(ke[0]=St),De!=null&&(De[0]=Ce),we[0]+=18,ve[0]-=18,Ke[0]=1}ve=0}}if(ye=ye[0],me=me[0],ve!=0)return ve;if(we=!!(2&me),!Se&&ye)return 3;if(G!=null&&(G[0]=!!(16&me)),$!=null&&($[0]=we),K!=null&&(K[0]=0),$=re[0],me=ce[0],ye&&we&&J==null){ve=0;break}if(4>_){ve=7;break}if(Se&&ye||!Se&&!ye&&!t(g,x[0],"ALPH")){_=[_],ue.na=[ue.na],ue.P=[ue.P],ue.Sa=[ue.Sa];e:{Ge=g,ve=x,Se=_;var Ke=ue.gb;ke=ue.na,De=ue.P,tt=ue.Sa,St=22,e(Ge!=null),e(Se!=null),Ce=ve[0];var Dt=Se[0];for(e(ke!=null),e(tt!=null),ke[0]=null,De[0]=null,tt[0]=0;;){if(ve[0]=Ce,Se[0]=Dt,8>Dt){ve=7;break e}var jr=Fe(Ge,Ce+4);if(4294967286<jr){ve=3;break e}var _t=8+jr+1&-2;if(St+=_t,0<Ke&&St>Ke){ve=3;break e}if(!t(Ge,Ce,"VP8 ")||!t(Ge,Ce,"VP8L")){ve=0;break e}if(Dt[0]<_t){ve=7;break e}t(Ge,Ce,"ALPH")||(ke[0]=Ge,De[0]=Ce+8,tt[0]=jr),Ce+=_t,Dt-=_t}}if(_=_[0],ue.na=ue.na[0],ue.P=ue.P[0],ue.Sa=ue.Sa[0],ve!=0)break}_=[_],ue.Ja=[ue.Ja],ue.xa=[ue.xa];e:if(Ke=g,ve=x,Se=_,ke=ue.gb[0],De=ue.Ja,tt=ue.xa,Ge=ve[0],Ce=!t(Ke,Ge,"VP8 "),St=!t(Ke,Ge,"VP8L"),e(Ke!=null),e(Se!=null),e(De!=null),e(tt!=null),8>Se[0])ve=7;else{if(Ce||St){if(Ke=Fe(Ke,Ge+4),12<=ke&&Ke>ke-12){ve=3;break e}if(ne&&Ke>Se[0]-8){ve=7;break e}De[0]=Ke,ve[0]+=8,Se[0]-=8,tt[0]=St}else tt[0]=5<=Se[0]&&Ke[Ge+0]==47&&!(Ke[Ge+4]>>5),De[0]=Se[0];ve=0}if(_=_[0],ue.Ja=ue.Ja[0],ue.xa=ue.xa[0],x=x[0],ve!=0)break;if(4294967286<ue.Ja)return 3;if(K==null||we||(K[0]=ue.xa?2:1),$=[$],me=[me],ue.xa){if(5>_){ve=7;break}K=$,ne=me,we=G,g==null||5>_?g=0:5<=_&&g[x+0]==47&&!(g[x+4]>>5)?(Se=[0],Ke=[0],ke=[0],X(De=new F,g,x,_),Mi(De,Se,Ke,ke)?(K!=null&&(K[0]=Se[0]),ne!=null&&(ne[0]=Ke[0]),we!=null&&(we[0]=ke[0]),g=1):g=0):g=0}else{if(10>_){ve=7;break}K=me,g==null||10>_||!tl(g,x+3,_-3)?g=0:(ne=g[x+0]|g[x+1]<<8|g[x+2]<<16,we=16383&(g[x+7]<<8|g[x+6]),g=16383&(g[x+9]<<8|g[x+8]),1&ne||3<(ne>>1&7)||!(ne>>4&1)||ne>>5>=ue.Ja||!we||!g?g=0:($&&($[0]=we),K&&(K[0]=g),g=1))}if(!g||($=$[0],me=me[0],ye&&(re[0]!=$||ce[0]!=me)))return 3;J!=null&&(J[0]=ue,J.offset=x-J.w,e(4294967286>x-J.w),e(J.offset==J.ha-_));break}return ve==0||ve==7&&ye&&J==null?(G!=null&&(G[0]|=ue.na!=null&&0<ue.na.length),R!=null&&(R[0]=$),q!=null&&(q[0]=me),0):ve}function ls(g,x,_){var R=x.width,q=x.height,G=0,$=0,K=R,J=q;if(x.Da=g!=null&&0<g.Da,x.Da&&(K=g.cd,J=g.bd,G=g.v,$=g.j,11>_||(G&=-2,$&=-2),0>G||0>$||0>=K||0>=J||G+K>R||$+J>q))return 0;if(x.v=G,x.j=$,x.va=G+K,x.o=$+J,x.U=K,x.T=J,x.da=g!=null&&0<g.da,x.da){if(!Te(K,J,_=[g.ib],G=[g.hb]))return 0;x.ib=_[0],x.hb=G[0]}return x.ob=g!=null&&g.ob,x.Kb=g==null||!g.Sd,x.da&&(x.ob=x.ib<3*R/4&&x.hb<3*q/4,x.Kb=0),1}function cs(g){if(g==null)return 2;if(11>g.S){var x=g.f.RGBA;x.fb+=(g.height-1)*x.A,x.A=-x.A}else x=g.f.kb,g=g.height,x.O+=(g-1)*x.fa,x.fa=-x.fa,x.N+=(g-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(g-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(g-1)*x.lb,x.lb=-x.lb);return 0}function fa(g,x,_,R){if(R==null||0>=g||0>=x)return 2;if(_!=null){if(_.Da){var q=_.cd,G=_.bd,$=-2&_.v,K=-2&_.j;if(0>$||0>K||0>=q||0>=G||$+q>g||K+G>x)return 2;g=q,x=G}if(_.da){if(!Te(g,x,q=[_.ib],G=[_.hb]))return 2;g=q[0],x=G[0]}}R.width=g,R.height=x;e:{var J=R.width,re=R.height;if(g=R.S,0>=J||0>=re||!(g>=ml&&13>g))g=2;else{if(0>=R.Rd&&R.sd==null){$=G=q=x=0;var ce=(K=J*lu[g])*re;if(11>g||(G=(re+1)/2*(x=(J+1)/2),g==12&&($=(q=J)*re)),(re=a(ce+2*G+$))==null){g=1;break e}R.sd=re,11>g?((J=R.f.RGBA).eb=re,J.fb=0,J.A=K,J.size=ce):((J=R.f.kb).y=re,J.O=0,J.fa=K,J.Fd=ce,J.f=re,J.N=0+ce,J.Ab=x,J.Cd=G,J.ea=re,J.W=0+ce+G,J.Db=x,J.Ed=G,g==12&&(J.F=re,J.J=0+ce+2*G),J.Tc=$,J.lb=q)}if(x=1,q=R.S,G=R.width,$=R.height,q>=ml&&13>q)if(11>q)g=R.f.RGBA,x&=(K=Math.abs(g.A))*($-1)+G<=g.size,x&=K>=G*lu[q],x&=g.eb!=null;else{g=R.f.kb,K=(G+1)/2,ce=($+1)/2,J=Math.abs(g.fa),re=Math.abs(g.Ab);var ye=Math.abs(g.Db),ne=Math.abs(g.lb),ue=ne*($-1)+G;x&=J*($-1)+G<=g.Fd,x&=re*(ce-1)+K<=g.Cd,x=(x&=ye*(ce-1)+K<=g.Ed)&J>=G&re>=K&ye>=K,x&=g.y!=null,x&=g.f!=null,x&=g.ea!=null,q==12&&(x&=ne>=G,x&=ue<=g.Tc,x&=g.F!=null)}else x=0;g=x?0:2}}return g!=0||_!=null&&_.fd&&(g=cs(R)),g}var $a=64,jn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],On=24,da=32,Xi=8,ua=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ie("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(g){return g},I.Predictor2=function(g,x,_){return x[_+0]},I.Predictor3=function(g,x,_){return x[_+1]},I.Predictor4=function(g,x,_){return x[_-1]},I.Predictor5=function(g,x,_){return Me(Me(g,x[_+1]),x[_+0])},I.Predictor6=function(g,x,_){return Me(g,x[_-1])},I.Predictor7=function(g,x,_){return Me(g,x[_+0])},I.Predictor8=function(g,x,_){return Me(x[_-1],x[_+0])},I.Predictor9=function(g,x,_){return Me(x[_+0],x[_+1])},I.Predictor10=function(g,x,_){return Me(Me(g,x[_-1]),Me(x[_+0],x[_+1]))},I.Predictor11=function(g,x,_){var R=x[_+0];return 0>=Qe(R>>24&255,g>>24&255,(x=x[_-1])>>24&255)+Qe(R>>16&255,g>>16&255,x>>16&255)+Qe(R>>8&255,g>>8&255,x>>8&255)+Qe(255&R,255&g,255&x)?R:g},I.Predictor12=function(g,x,_){var R=x[_+0];return(Oe((g>>24&255)+(R>>24&255)-((x=x[_-1])>>24&255))<<24|Oe((g>>16&255)+(R>>16&255)-(x>>16&255))<<16|Oe((g>>8&255)+(R>>8&255)-(x>>8&255))<<8|Oe((255&g)+(255&R)-(255&x)))>>>0},I.Predictor13=function(g,x,_){var R=x[_-1];return(rt((g=Me(g,x[_+0]))>>24&255,R>>24&255)<<24|rt(g>>16&255,R>>16&255)<<16|rt(g>>8&255,R>>8&255)<<8|rt(255&g,255&R))>>>0};var fs=I.PredictorAdd0;I.PredictorAdd1=At,Ie("Predictor2","PredictorAdd2"),Ie("Predictor3","PredictorAdd3"),Ie("Predictor4","PredictorAdd4"),Ie("Predictor5","PredictorAdd5"),Ie("Predictor6","PredictorAdd6"),Ie("Predictor7","PredictorAdd7"),Ie("Predictor8","PredictorAdd8"),Ie("Predictor9","PredictorAdd9"),Ie("Predictor10","PredictorAdd10"),Ie("Predictor11","PredictorAdd11"),Ie("Predictor12","PredictorAdd12"),Ie("Predictor13","PredictorAdd13");var _o=I.PredictorAdd2;ze("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),ze("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var xr,hl=I.ColorIndexInverseTransform,Ci=I.MapARGB,Ii=I.VP8LColorIndexInverseTransformAlpha,ds=I.MapAlpha,us=I.VP8LPredictorsAdd=[];us.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var hs,ps,ha,pa,ga,Xa,ma,Ya,$n,Ei,Wt,Qt,vr,kr,Yi,gs,Co,pl,Md,Bd,Fd,zd,Ud,Wd,ms,Hd,qd,Vd,Gd=a(511),$d=a(2041),Xd=a(225),Yd=a(767),Kd=0,zc=$d,gl=Xd,Tn=Yd,Xn=Gd,ml=0,xl=1,Zd=2,vl=3,yl=4,Uc=5,Qd=6,Wc=7,Hc=8,bl=9,qc=10,Cp=[2,3,7],Ip=[3,3,11],Jd=[280,256,256,256,40],Ep=[0,1,1,1,0],Np=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Dp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],kp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jp=8,Vc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Gc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],xs=null,Op=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Tp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],eu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Rp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Lp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Pp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Mp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xa=[],oi=[],Ki=[],Bp=1,tu=2,va=[],Yn=[];Gi("UpsampleRgbLinePair",ca,3),Gi("UpsampleBgrLinePair",Zr,3),Gi("UpsampleRgbaLinePair",gn,4),Gi("UpsampleBgraLinePair",ss,4),Gi("UpsampleArgbLinePair",os,4),Gi("UpsampleRgba4444LinePair",Va,2),Gi("UpsampleRgb565LinePair",qa,2);var Fp=I.UpsampleRgbLinePair,zp=I.UpsampleBgrLinePair,ru=I.UpsampleRgbaLinePair,nu=I.UpsampleBgraLinePair,iu=I.UpsampleArgbLinePair,au=I.UpsampleRgba4444LinePair,Up=I.UpsampleRgb565LinePair,wl=16,Al=1<<wl-1,vs=-227,$c=482,Wp=6,ou=0,Hp=a(256),qp=a(256),Vp=a(256),Gp=a(256),$p=a($c-vs),Xp=a($c-vs);$i("YuvToRgbRow",ca,3),$i("YuvToBgrRow",Zr,3),$i("YuvToRgbaRow",gn,4),$i("YuvToBgraRow",ss,4),$i("YuvToArgbRow",os,4),$i("YuvToRgba4444Row",Va,2),$i("YuvToRgb565Row",qa,2);var su=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Sl=[0,2,8],Yp=[8,7,6,4,4,2,2,2,1,1,1,1],Kp=1;this.WebPDecodeRGBA=function(g,x,_,R,q){var G=xl,$=new _e,K=new ht;$.ba=K,K.S=G,K.width=[K.width],K.height=[K.height];var J=K.width,re=K.height,ce=new Je;if(ce==null||g==null)var ye=2;else e(ce!=null),ye=Ga(g,x,_,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(ye!=0?J=0:(J!=null&&(J[0]=ce.width[0]),re!=null&&(re[0]=ce.height[0]),J=1),J){K.width=K.width[0],K.height=K.height[0],R!=null&&(R[0]=K.width),q!=null&&(q[0]=K.height);e:{if(R=new xo,(q=new Ne).data=g,q.w=x,q.ha=_,q.kd=1,x=[0],e(q!=null),((g=Ga(q.data,q.w,q.ha,null,null,null,x,null,q))==0||g==7)&&x[0]&&(g=4),(x=g)==0){if(e($!=null),R.data=q.data,R.w=q.w+q.offset,R.ha=q.ha-q.offset,R.put=ft,R.ac=Ur,R.bc=Pi,R.ma=$,q.xa){if((g=La())==null){$=1;break e}if(function(ne,ue){var me=[0],we=[0],ve=[0];t:for(;;){if(ne==null)return 0;if(ue==null)return ne.a=2,0;if(ne.l=ue,ne.a=0,X(ne.m,ue.data,ue.w,ue.ha),!Mi(ne.m,me,we,ve)){ne.a=3;break t}if(ne.xb=tu,ue.width=me[0],ue.height=we[0],!wi(me[0],we[0],1,ne,null))break t;return 1}return e(ne.a!=0),0}(g,R)){if(R=(x=fa(R.width,R.height,$.Oa,$.ba))==0){t:{R=g;r:for(;;){if(R==null){R=0;break t}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((_=R.l)!=null),e((q=_.ma)!=null),R.xb!=0){if(R.ca=q.ba,R.tb=q.tb,e(R.ca!=null),!ls(q.Oa,_,vl)){R.a=2;break r}if(!Pa(R,_.width)||_.da)break r;if((_.da||st(R.ca.S))&&ai(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&ai()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!Z(R.s.vb,R.s.Wa.Xa)){R.a=1;break r}R.xb=0}if(!ni(R,R.V,R.Ba,R.c,R.i,_.o,sa))break r;q.Dc=R.Ma,R=1;break t}e(R.a!=0),R=0}R=!R}R&&(x=g.a)}else x=g.a}else{if((g=new Cc)==null){$=1;break e}if(g.Fa=q.na,g.P=q.P,g.qc=q.Sa,Si(g,R)){if((x=fa(R.width,R.height,$.Oa,$.ba))==0){if(g.Aa=0,_=$.Oa,e((q=g)!=null),_!=null){if(0<(J=0>(J=_.Md)?0:100<J?255:255*J/100)){for(re=ce=0;4>re;++re)12>(ye=q.pb[re]).lc&&(ye.ia=J*Yp[0>ye.lc?0:ye.lc]>>3),ce|=ye.ia;ce&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=_.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}(function(ne,ue){if(ne==null)return 0;if(ue==null)return _r(ne,2,"NULL VP8Io parameter in VP8Decode().");if(!ne.cb&&!Si(ne,ue))return 0;if(e(ne.cb),ue.ac==null||ue.ac(ue)){ue.ob&&(ne.L=0);var me=Sl[ne.L];if(ne.L==2?(ne.yb=0,ne.zb=0):(ne.yb=ue.v-me>>4,ne.zb=ue.j-me>>4,0>ne.yb&&(ne.yb=0),0>ne.zb&&(ne.zb=0)),ne.Va=ue.o+15+me>>4,ne.Hb=ue.va+15+me>>4,ne.Hb>ne.za&&(ne.Hb=ne.za),ne.Va>ne.Ub&&(ne.Va=ne.Ub),0<ne.L){var we=ne.ed;for(me=0;4>me;++me){var ve;if(ne.Qa.Cb){var Se=ne.Qa.Lb[me];ne.Qa.Fb||(Se+=we.Tb)}else Se=we.Tb;for(ve=0;1>=ve;++ve){var Ce=ne.gd[me][ve],ke=Se;if(we.Pc&&(ke+=we.vd[0],ve&&(ke+=we.od[0])),0<(ke=0>ke?0:63<ke?63:ke)){var De=ke;0<we.wb&&(De=4<we.wb?De>>2:De>>1)>9-we.wb&&(De=9-we.wb),1>De&&(De=1),Ce.dd=De,Ce.tc=2*ke+De,Ce.ld=40<=ke?2:15<=ke?1:0}else Ce.tc=0;Ce.La=ve}}}me=0}else _r(ne,6,"Frame setup failed"),me=ne.a;if(me=me==0){if(me){ne.$c=0,0<ne.Aa||(ne.Ic=Kp);t:{me=ne.Ic,we=4*(De=ne.za);var tt=32*De,Ge=De+1,St=0<ne.L?De*(0<ne.Aa?2:1):0,Ke=(ne.Aa==2?2:1)*De;if((Ce=we+832+(ve=3*(16*me+Sl[ne.L])/2*tt)+(Se=ne.Fa!=null&&0<ne.Fa.length?ne.Kc.c*ne.Kc.i:0))!=Ce)me=0;else{if(Ce>ne.Vb){if(ne.Vb=0,ne.Ec=a(Ce),ne.Fc=0,ne.Ec==null){me=_r(ne,1,"no memory during frame initialization.");break t}ne.Vb=Ce}Ce=ne.Ec,ke=ne.Fc,ne.Ac=Ce,ne.Bc=ke,ke+=we,ne.Gd=s(tt,Js),ne.Hd=0,ne.rb=s(Ge+1,Yo),ne.sb=1,ne.wa=St?s(St,qn):null,ne.Y=0,ne.D.Nb=0,ne.D.wa=ne.wa,ne.D.Y=ne.Y,0<ne.Aa&&(ne.D.Y+=De),e(!0),ne.oc=Ce,ne.pc=ke,ke+=832,ne.ya=s(Ke,Ko),ne.aa=0,ne.D.ya=ne.ya,ne.D.aa=ne.aa,ne.Aa==2&&(ne.D.aa+=De),ne.R=16*De,ne.B=8*De,De=(tt=Sl[ne.L])*ne.R,tt=tt/2*ne.B,ne.sa=Ce,ne.ta=ke+De,ne.qa=ne.sa,ne.ra=ne.ta+16*me*ne.R+tt,ne.Ha=ne.qa,ne.Ia=ne.ra+8*me*ne.B+tt,ne.$c=0,ke+=ve,ne.mb=Se?Ce:null,ne.nb=Se?ke:null,e(ke+Se<=ne.Fc+ne.Vb),rl(ne),i(ne.Ac,ne.Bc,0,we),me=1}}if(me){if(ue.ka=0,ue.y=ne.sa,ue.O=ne.ta,ue.f=ne.qa,ue.N=ne.ra,ue.ea=ne.Ha,ue.Vd=ne.Ia,ue.fa=ne.R,ue.Rc=ne.B,ue.F=null,ue.J=0,!Kd){for(me=-255;255>=me;++me)Gd[255+me]=0>me?-me:me;for(me=-1020;1020>=me;++me)$d[1020+me]=-128>me?-128:127<me?127:me;for(me=-112;112>=me;++me)Xd[112+me]=-16>me?-16:15<me?15:me;for(me=-255;510>=me;++me)Yd[255+me]=0>me?0:255<me?255:me;Kd=1}ma=yo,Ya=Ec,Ei=_i,Wt=il,Qt=al,$n=Ic,vr=fl,kr=Ua,Yi=H,gs=ie,Co=dl,pl=w,Md=se,Bd=ge,Fd=za,zd=is,Ud=ll,Wd=cl,oi[0]=Lc,oi[1]=Nc,oi[2]=Tc,oi[3]=Rc,oi[4]=Fi,oi[5]=Pc,oi[6]=zi,oi[7]=Mc,oi[8]=Jo,oi[9]=bo,xa[0]=jc,xa[1]=kc,xa[2]=Zo,xa[3]=ol,xa[4]=Ba,xa[5]=Qo,xa[6]=Oc,Ki[0]=Fc,Ki[1]=Dc,Ki[2]=Fa,Ki[3]=Bc,Ki[4]=ts,Ki[5]=es,Ki[6]=sl,me=1}else me=0}me&&(me=function(Dt,jr){for(Dt.M=0;Dt.M<Dt.Va;++Dt.M){var _t,Ze=Dt.Jc[Dt.M&Dt.Xb],Be=Dt.m,yr=Dt;for(_t=0;_t<yr.za;++_t){var bt=Be,jt=yr,or=jt.Ac,Qr=jt.Bc+4*_t,mn=jt.zc,pr=jt.ya[jt.aa+_t];if(jt.Qa.Bb?pr.$b=de(bt,jt.Pa.jb[0])?2+de(bt,jt.Pa.jb[2]):de(bt,jt.Pa.jb[1]):pr.$b=0,jt.kc&&(pr.Ad=de(bt,jt.Bd)),pr.Za=!de(bt,145)+0,pr.Za){var on=pr.Ob,xn=0;for(jt=0;4>jt;++jt){var Or,Rt=mn[0+jt];for(Or=0;4>Or;++Or){Rt=Lp[or[Qr+Or]][Rt];for(var qt=eu[de(bt,Rt[0])];0<qt;)qt=eu[2*qt+de(bt,Rt[qt])];Rt=-qt,or[Qr+Or]=Rt}n(on,xn,or,Qr,4),xn+=4,mn[0+jt]=Rt}}else Rt=de(bt,156)?de(bt,128)?1:3:de(bt,163)?2:0,pr.Ob[0]=Rt,i(or,Qr,Rt,4),i(mn,0,Rt,4);pr.Dd=de(bt,142)?de(bt,114)?de(bt,183)?1:3:2:0}if(yr.m.Ka)return _r(Dt,7,"Premature end-of-partition0 encountered.");for(;Dt.ja<Dt.za;++Dt.ja){if(yr=Ze,bt=(Be=Dt).rb[Be.sb-1],or=Be.rb[Be.sb+Be.ja],_t=Be.ya[Be.aa+Be.ja],Qr=Be.kc?_t.Ad:0)bt.la=or.la=0,_t.Za||(bt.Na=or.Na=0),_t.Hc=0,_t.Gc=0,_t.ia=0;else{var gr,Vt;if(bt=or,or=yr,Qr=Be.Pa.Xc,mn=Be.ya[Be.aa+Be.ja],pr=Be.pb[mn.$b],jt=mn.ad,on=0,xn=Be.rb[Be.sb-1],Rt=Or=0,i(jt,on,0,384),mn.Za)var Jr=0,si=Qr[3];else{qt=a(16);var br=bt.Na+xn.Na;if(br=xs(or,Qr[1],br,pr.Eb,0,qt,0),bt.Na=xn.Na=(0<br)+0,1<br)ma(qt,0,jt,on);else{var An=qt[0]+3>>3;for(qt=0;256>qt;qt+=16)jt[on+qt]=An}Jr=1,si=Qr[0]}var Jt=15&bt.la,Tr=15&xn.la;for(qt=0;4>qt;++qt){var Rn=1&Tr;for(An=Vt=0;4>An;++An)Jt=Jt>>1|(Rn=(br=xs(or,si,br=Rn+(1&Jt),pr.Sc,Jr,jt,on))>Jr)<<7,Vt=Vt<<2|(3<br?3:1<br?2:jt[on+0]!=0),on+=16;Jt>>=4,Tr=Tr>>1|Rn<<7,Or=(Or<<8|Vt)>>>0}for(si=Jt,Jr=Tr>>4,gr=0;4>gr;gr+=2){for(Vt=0,Jt=bt.la>>4+gr,Tr=xn.la>>4+gr,qt=0;2>qt;++qt){for(Rn=1&Tr,An=0;2>An;++An)br=Rn+(1&Jt),Jt=Jt>>1|(Rn=0<(br=xs(or,Qr[2],br,pr.Qc,0,jt,on)))<<3,Vt=Vt<<2|(3<br?3:1<br?2:jt[on+0]!=0),on+=16;Jt>>=2,Tr=Tr>>1|Rn<<5}Rt|=Vt<<4*gr,si|=Jt<<4<<gr,Jr|=(240&Tr)<<gr}bt.la=si,xn.la=Jr,mn.Hc=Or,mn.Gc=Rt,mn.ia=43690&Rt?0:pr.ia,Qr=!(Or|Rt)}if(0<Be.L&&(Be.wa[Be.Y+Be.ja]=Be.gd[_t.$b][_t.Za],Be.wa[Be.Y+Be.ja].La|=!Qr),yr.Ka)return _r(Dt,7,"Premature end-of-file encountered.")}if(rl(Dt),Be=jr,yr=1,_t=(Ze=Dt).D,bt=0<Ze.L&&Ze.M>=Ze.zb&&Ze.M<=Ze.Va,Ze.Aa==0)t:{if(_t.M=Ze.M,_t.uc=bt,Gn(Ze,_t),yr=1,_t=(Vt=Ze.D).Nb,bt=(Rt=Sl[Ze.L])*Ze.R,or=Rt/2*Ze.B,qt=16*_t*Ze.R,An=8*_t*Ze.B,Qr=Ze.sa,mn=Ze.ta-bt+qt,pr=Ze.qa,jt=Ze.ra-or+An,on=Ze.Ha,xn=Ze.Ia-or+An,Tr=(Jt=Vt.M)==0,Or=Jt>=Ze.Va-1,Ze.Aa==2&&Gn(Ze,Vt),Vt.uc)for(Rn=(br=Ze).D.M,e(br.D.uc),Vt=br.yb;Vt<br.Hb;++Vt){Jr=Vt,si=Rn;var vn=(Ln=(en=br).D).Nb;gr=en.R;var Ln=Ln.wa[Ln.Y+Jr],Pn=en.sa,Sn=en.ta+16*vn*gr+16*Jr,Mn=Ln.dd,ir=Ln.tc;if(ir!=0)if(e(3<=ir),en.L==1)0<Jr&&zd(Pn,Sn,gr,ir+4),Ln.La&&Wd(Pn,Sn,gr,ir),0<si&&Fd(Pn,Sn,gr,ir+4),Ln.La&&Ud(Pn,Sn,gr,ir);else{var Bn=en.B,li=en.qa,Ka=en.ra+8*vn*Bn+8*Jr,Zi=en.Ha,en=en.Ia+8*vn*Bn+8*Jr;vn=Ln.ld,0<Jr&&(kr(Pn,Sn,gr,ir+4,Mn,vn),gs(li,Ka,Zi,en,Bn,ir+4,Mn,vn)),Ln.La&&(pl(Pn,Sn,gr,ir,Mn,vn),Bd(li,Ka,Zi,en,Bn,ir,Mn,vn)),0<si&&(vr(Pn,Sn,gr,ir+4,Mn,vn),Yi(li,Ka,Zi,en,Bn,ir+4,Mn,vn)),Ln.La&&(Co(Pn,Sn,gr,ir,Mn,vn),Md(li,Ka,Zi,en,Bn,ir,Mn,vn))}}if(Ze.ia&&alert("todo:DitherRow"),Be.put!=null){if(Vt=16*Jt,Jt=16*(Jt+1),Tr?(Be.y=Ze.sa,Be.O=Ze.ta+qt,Be.f=Ze.qa,Be.N=Ze.ra+An,Be.ea=Ze.Ha,Be.W=Ze.Ia+An):(Vt-=Rt,Be.y=Qr,Be.O=mn,Be.f=pr,Be.N=jt,Be.ea=on,Be.W=xn),Or||(Jt-=Rt),Jt>Be.o&&(Jt=Be.o),Be.F=null,Be.J=null,Ze.Fa!=null&&0<Ze.Fa.length&&Vt<Jt&&(Be.J=nr(Ze,Be,Vt,Jt-Vt),Be.F=Ze.mb,Be.F==null&&Be.F.length==0)){yr=_r(Ze,3,"Could not decode alpha data.");break t}Vt<Be.j&&(Rt=Be.j-Vt,Vt=Be.j,e(!(1&Rt)),Be.O+=Ze.R*Rt,Be.N+=Ze.B*(Rt>>1),Be.W+=Ze.B*(Rt>>1),Be.F!=null&&(Be.J+=Be.width*Rt)),Vt<Jt&&(Be.O+=Be.v,Be.N+=Be.v>>1,Be.W+=Be.v>>1,Be.F!=null&&(Be.J+=Be.v),Be.ka=Vt-Be.j,Be.U=Be.va-Be.v,Be.T=Jt-Vt,yr=Be.put(Be))}_t+1!=Ze.Ic||Or||(n(Ze.sa,Ze.ta-bt,Qr,mn+16*Ze.R,bt),n(Ze.qa,Ze.ra-or,pr,jt+8*Ze.B,or),n(Ze.Ha,Ze.Ia-or,on,xn+8*Ze.B,or))}if(!yr)return _r(Dt,6,"Output aborted.")}return 1}(ne,ue)),ue.bc!=null&&ue.bc(ue),me&=1}return me?(ne.cb=0,me):0})(g,R)||(x=g.a)}}else x=g.a}x==0&&$.Oa!=null&&$.Oa.fd&&(x=cs($.ba))}$=x}G=$!=0?null:11>G?K.f.RGBA.eb:K.f.kb.y}else G=null;return G};var lu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(I,P){for(var N="",S=0;S<4;S++)N+=String.fromCharCode(I[P++]);return N}function f(I,P){return I[P+0]|I[P+1]<<8}function u(I,P){return(I[P+0]|I[P+1]<<8|I[P+2]<<16)>>>0}function p(I,P){return(I[P+0]|I[P+1]<<8|I[P+2]<<16|I[P+3]<<24)>>>0}new l;var h=[0],m=[0],v=[],b=new l,y=r,E=function(I,P){var N={},S=0,O=!1,A=0,B=0;if(N.frames=[],!function(M,F){for(var U=0;U<4;U++)if(M[F+U]!="RIFF".charCodeAt(U))return!0;return!1}(I,P)){for(p(I,P+=4),P+=8;P<I.length;){var T=c(I,P),L=p(I,P+=4);P+=4;var Y=L+(1&L);switch(T){case"VP8 ":case"VP8L":N.frames[S]===void 0&&(N.frames[S]={}),(Q=N.frames[S]).src_off=O?B:P-8,Q.src_size=A+L+8,S++,O&&(O=!1,A=0,B=0);break;case"VP8X":(Q=N.header={}).feature_flags=I[P];var X=P+4;Q.canvas_width=1+u(I,X),X+=3,Q.canvas_height=1+u(I,X),X+=3;break;case"ALPH":O=!0,A=Y+8,B=P-8;break;case"ANIM":(Q=N.header).bgcolor=p(I,P),X=P+4,Q.loop_count=f(I,X),X+=2;break;case"ANMF":var ae,Q;(Q=N.frames[S]={}).offset_x=2*u(I,P),P+=3,Q.offset_y=2*u(I,P),P+=3,Q.width=1+u(I,P),P+=3,Q.height=1+u(I,P),P+=3,Q.duration=u(I,P),P+=3,ae=I[P++],Q.dispose=1&ae,Q.blend=ae>>1&1}T!="ANMF"&&(P+=Y)}return N}}(y,0);E.response=y,E.rgbaoutput=!0,E.dataurl=!1;var D=E.header?E.header:null,C=E.frames?E.frames:null;if(D){D.loop_counter=D.loop_count,h=[D.canvas_height],m=[D.canvas_width];for(var z=0;z<C.length&&C[z].blend!=0;z++);}var k=C[0],W=b.WebPDecodeRGBA(y,k.src_off,k.src_size,m,h);k.rgba=W,k.imgwidth=m[0],k.imgheight=h[0];for(var j=0;j<m[0]*h[0]*4;j++)v[j]=W[j];return this.width=m,this.height=h,this.data=v,this}(function(r){var e,t,n,i,a,s,o,l,c,f=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new s,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new s,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var u=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=M;Object.defineProperty(this,"pdf",{get:function(){return F}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(Z){U=!!Z}});var V=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return V},set:function(Z){V=!!Z}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(Z){isNaN(Z)||(te=Z)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Z){isNaN(Z)||(le=Z)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Z){var je;typeof Z=="number"?je=[Z,Z,Z,Z]:((je=new Array(4))[0]=Z[0],je[1]=Z.length>=2?Z[1]:je[0],je[2]=Z.length>=3?Z[2]:je[0],je[3]=Z.length>=4?Z[3]:je[1]),c.margin=je}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Z){he=Z}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(Z){pe=Z}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(Z){de=Z}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Z){Z instanceof f&&(c=Z)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Z){c.path=Z}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(Z){be=Z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Z){var je;je=p(Z),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=je.a===0,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Z){var je=p(Z);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=je.a===0,this.ctx.strokeOpacity=je.a,je.a===0?this.pdf.setDrawColor(255,255,255):(je.a,this.pdf.setDrawColor(je.r,je.g,je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Z){["butt","round","square"].indexOf(Z)!==-1&&(this.ctx.lineCap=Z,this.pdf.setLineCap(Z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Z){isNaN(Z)||(this.ctx.lineWidth=Z,this.pdf.setLineWidth(Z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Z){["bevel","round","miter"].indexOf(Z)!==-1&&(this.ctx.lineJoin=Z,this.pdf.setLineJoin(Z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Z){isNaN(Z)||(this.ctx.miterLimit=Z,this.pdf.setMiterLimit(Z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Z){this.ctx.textBaseline=Z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Z){["right","end","center","left","start"].indexOf(Z)!==-1&&(this.ctx.textAlign=Z)}});var Ee=null,Re=null,Fe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Fe},set:function(Z){Ee=null,Re=null,Fe=Z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Z){var je;if(this.ctx.font=Z,(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Z))!==null){var He=je[1];je[2];var Te=je[3],fe=je[4];je[5];var Le=je[6],Ie=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(fe)[2];fe=Math.floor(Ie==="px"?parseFloat(fe)*this.pdf.internal.scaleFactor:Ie==="em"?parseFloat(fe)*this.pdf.getFontSize():parseFloat(fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(fe);var Ue=function(ze){var kt,yt,ct=[],ut=ze.trim();if(ut==="")return Of;if(ut in i1)return[i1[ut]];for(;ut!=="";){switch(yt=null,kt=(ut=o1(ut)).charAt(0)){case'"':case"'":yt=B3(ut.substring(1),kt);break;default:yt=F3(ut)}if(yt===null||(ct.push(yt[0]),(ut=o1(yt[1]))!==""&&ut.charAt(0)!==","))return Of;ut=ut.replace(/^,/,"")}return ct}(Le);if(this.fontFaces){var Me=function(ze,kt){var yt=ze.getFontList(),ct=JSON.stringify(yt);if(Ee===null||Re!==ct){var ut=function(Kt){var at=[];return Object.keys(Kt).forEach(function(Ut){Kt[Ut].forEach(function(st){var dt=null;switch(st){case"bold":dt={family:Ut,weight:"bold"};break;case"italic":dt={family:Ut,style:"italic"};break;case"bolditalic":dt={family:Ut,weight:"bold",style:"italic"};break;case"":case"normal":dt={family:Ut}}dt!==null&&(dt.ref={name:Ut,style:st},at.push(dt))})}),at}(yt);Ee=function(Kt){for(var at={},Ut=0;Ut<Kt.length;++Ut){var st=jf(Kt[Ut]),dt=st.family,rr=st.stretch,ht=st.style,Je=st.weight;at[dt]=at[dt]||{},at[dt][rr]=at[dt][rr]||{},at[dt][rr][ht]=at[dt][rr][ht]||{},at[dt][rr][ht][Je]=st}return at}(ut.concat(kt)),Re=ct}return Ee}(this.pdf,this.fontFaces),Oe=Ue.map(function(ze){return{family:ze,stretch:"normal",weight:Te,style:He}}),rt=function(ze,kt,yt){for(var ct=(yt=yt||{}).defaultFontFamily||"times",ut=Object.assign({},M3,yt.genericFontFamilies||{}),Kt=null,at=null,Ut=0;Ut<kt.length;++Ut)if(ut[(Kt=jf(kt[Ut])).family]&&(Kt.family=ut[Kt.family]),ze.hasOwnProperty(Kt.family)){at=ze[Kt.family];break}if(!(at=at||ze[ct]))throw new Error("Could not find a font-family for the rule '"+a1(Kt)+"' and default family '"+ct+"'.");if(at=function(st,dt){if(dt[st])return dt[st];var rr=dd[st],ht=rr<=dd.normal?-1:1,Je=n1(dt,lp,rr,ht);if(!Je)throw new Error("Could not find a matching font-stretch value for "+st);return Je}(Kt.stretch,at),at=function(st,dt){if(dt[st])return dt[st];for(var rr=sp[st],ht=0;ht<rr.length;++ht)if(dt[rr[ht]])return dt[rr[ht]];throw new Error("Could not find a matching font-style for "+st)}(Kt.style,at),!(at=function(st,dt){if(dt[st])return dt[st];if(st===400&&dt[500])return dt[500];if(st===500&&dt[400])return dt[400];var rr=P3[st],ht=n1(dt,cp,rr,st<400?-1:1);if(!ht)throw new Error("Could not find a matching font-weight for value "+st);return ht}(Kt.weight,at)))throw new Error("Failed to resolve a font for the rule '"+a1(Kt)+"'.");return at}(Me,Oe);this.pdf.setFont(rt.ref.name,rt.ref.style)}else{var Qe="";(Te==="bold"||parseInt(Te,10)>=700||He==="bold")&&(Qe="bold"),He==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var At="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<Ue.length;qe++){if(this.pdf.internal.getFont(Ue[qe],Qe,{noFallback:!0,disableWarning:!0})!==void 0){At=Ue[qe];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(Ue[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=Ue[qe],Qe="bold";else if(this.pdf.internal.getFont(Ue[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=Ue[qe],Qe="normal";break}}if(At===""){for(var Ve=0;Ve<Ue.length;Ve++)if(it[Ue[Ve]]){At=it[Ue[Ve]];break}}At=At===""?"Times":At,this.pdf.setFont(At,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Z){this.ctx.globalCompositeOperation=Z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Z){this.ctx.globalAlpha=Z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Z){this.ctx.lineDashOffset=Z,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Z){this.ctx.lineDash=Z,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Z){this.ctx.ignoreClearRect=!!Z}})};u.prototype.setLineDash=function(M){this.lineDash=M},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){C.call(this,"fill",!1)},u.prototype.stroke=function(){C.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(M,F){if(isNaN(M)||isNaN(F))throw er.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new s(M,F));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new s(M,F)},u.prototype.closePath=function(){var M=new s(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Yt(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){M=new s(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(M.x,M.y)},u.prototype.lineTo=function(M,F){if(isNaN(M)||isNaN(F))throw er.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new s(M,F));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new s(U.x,U.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},u.prototype.quadraticCurveTo=function(M,F,U,V){if(isNaN(U)||isNaN(V)||isNaN(M)||isNaN(F))throw er.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new s(U,V)),le=this.ctx.transform.applyToPoint(new s(M,F));this.path.push({type:"qct",x1:le.x,y1:le.y,x:te.x,y:te.y}),this.ctx.lastPoint=new s(te.x,te.y)},u.prototype.bezierCurveTo=function(M,F,U,V,te,le){if(isNaN(te)||isNaN(le)||isNaN(M)||isNaN(F)||isNaN(U)||isNaN(V))throw er.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new s(te,le)),pe=this.ctx.transform.applyToPoint(new s(M,F)),de=this.ctx.transform.applyToPoint(new s(U,V));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:de.x,y2:de.y,x:he.x,y:he.y}),this.ctx.lastPoint=new s(he.x,he.y)},u.prototype.arc=function(M,F,U,V,te,le){if(isNaN(M)||isNaN(F)||isNaN(U)||isNaN(V)||isNaN(te))throw er.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new s(M,F));M=he.x,F=he.y;var pe=this.ctx.transform.applyToPoint(new s(0,U)),de=this.ctx.transform.applyToPoint(new s(0,0));U=Math.sqrt(Math.pow(pe.x-de.x,2)+Math.pow(pe.y-de.y,2))}Math.abs(te-V)>=2*Math.PI&&(V=0,te=2*Math.PI),this.path.push({type:"arc",x:M,y:F,radius:U,startAngle:V,endAngle:te,counterclockwise:le})},u.prototype.arcTo=function(M,F,U,V,te){throw new Error("arcTo not implemented.")},u.prototype.rect=function(M,F,U,V){if(isNaN(M)||isNaN(F)||isNaN(U)||isNaN(V))throw er.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,F),this.lineTo(M+U,F),this.lineTo(M+U,F+V),this.lineTo(M,F+V),this.lineTo(M,F),this.lineTo(M+U,F),this.lineTo(M,F)},u.prototype.fillRect=function(M,F,U,V){if(isNaN(M)||isNaN(F)||isNaN(U)||isNaN(V))throw er.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,F,U,V),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},u.prototype.strokeRect=function(M,F,U,V){if(isNaN(M)||isNaN(F)||isNaN(U)||isNaN(V))throw er.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(M,F,U,V),this.stroke())},u.prototype.clearRect=function(M,F,U,V){if(isNaN(M)||isNaN(F)||isNaN(U)||isNaN(V))throw er.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,F,U,V))},u.prototype.save=function(M){M=typeof M!="boolean"||M;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var V=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=V}},u.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(F),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(M){var F,U,V,te;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))F=0,U=0,V=0,te=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(le!==null)F=parseInt(le[1]),U=parseInt(le[2]),V=parseInt(le[3]),te=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)F=parseInt(le[1]),U=parseInt(le[2]),V=parseInt(le[3]),te=parseFloat(le[4]);else{if(te=1,typeof M=="string"&&M.charAt(0)!=="#"){var he=new ep(M);M=he.ok?he.toHex():"#000000"}M.length===4?(F=M.substring(1,2),F+=F,U=M.substring(2,3),U+=U,V=M.substring(3,4),V+=V):(F=M.substring(1,3),U=M.substring(3,5),V=M.substring(5,7)),F=parseInt(F,16),U=parseInt(U,16),V=parseInt(V,16)}}return{r:F,g:U,b:V,a:te,style:M}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(M,F,U,V){if(isNaN(F)||isNaN(U)||typeof M!="string")throw er.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(V=isNaN(V)?void 0:V,!h.call(this)){var te=Y(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;S.call(this,{text:M,x:F,y:U,scale:le,angle:te,align:this.textAlign,maxWidth:V})}},u.prototype.strokeText=function(M,F,U,V){if(isNaN(F)||isNaN(U)||typeof M!="string")throw er.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){V=isNaN(V)?void 0:V;var te=Y(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;S.call(this,{text:M,x:F,y:U,scale:le,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:V})}},u.prototype.measureText=function(M){if(typeof M!="string")throw er.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,U=this.pdf.internal.scaleFactor,V=F.internal.getFontSize(),te=F.getStringUnitWidth(M)*V/F.internal.scaleFactor;return new function(le){var he=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:te*=Math.round(96*U/72*1e4)/1e4})},u.prototype.scale=function(M,F){if(isNaN(M)||isNaN(F))throw er.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new l(M,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},u.prototype.rotate=function(M){if(isNaN(M))throw er.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},u.prototype.translate=function(M,F){if(isNaN(M)||isNaN(F))throw er.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new l(1,0,0,1,M,F);this.ctx.transform=this.ctx.transform.multiply(U)},u.prototype.transform=function(M,F,U,V,te,le){if(isNaN(M)||isNaN(F)||isNaN(U)||isNaN(V)||isNaN(te)||isNaN(le))throw er.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new l(M,F,U,V,te,le);this.ctx.transform=this.ctx.transform.multiply(he)},u.prototype.setTransform=function(M,F,U,V,te,le){M=isNaN(M)?1:M,F=isNaN(F)?0:F,U=isNaN(U)?0:U,V=isNaN(V)?1:V,te=isNaN(te)?0:te,le=isNaN(le)?0:le,this.ctx.transform=new l(M,F,U,V,te,le)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(M,F,U,V,te,le,he,pe,de){var be=this.pdf.getImageProperties(M),Ee=1,Re=1,Fe=1,Z=1;V!==void 0&&pe!==void 0&&(Fe=pe/V,Z=de/te,Ee=be.width/V*pe/V,Re=be.height/te*de/te),le===void 0&&(le=F,he=U,F=0,U=0),V!==void 0&&pe===void 0&&(pe=V,de=te),V===void 0&&pe===void 0&&(pe=be.width,de=be.height);var je=this.ctx.transform.decompose(),He=Y(je.rotate.shx),Te=new l,fe=(Te=(Te=(Te=Te.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(le-F*Fe,he-U*Z,V*Ee,te*Re));if(this.autoPaging){for(var Le,Ie=b.call(this,fe),Ue=[],Me=0;Me<Ie.length;Me+=1)Ue.indexOf(Ie[Me])===-1&&Ue.push(Ie[Me]);D(Ue);for(var Oe=Ue[0],rt=Ue[Ue.length-1],Qe=Oe;Qe<rt+1;Qe++){this.pdf.setPage(Qe);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=Qe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=Qe===1?0:qe+(Qe-2)*Ve;if(this.ctx.clip_path.length!==0){var kt=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Le,this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=kt}var yt=JSON.parse(JSON.stringify(fe));yt=E([yt],this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset)[0];var ct=(Qe>Oe||Qe<rt)&&v.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Ve,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",yt.x,yt.y,yt.w,yt.h,null,null,He),ct&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",fe.x,fe.y,fe.w,fe.h,null,null,He)};var b=function(M,F,U){var V=[];F=F||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":V.push(Math.floor((M.y+te)/U)+1);break;case"arc":V.push(Math.floor((M.y+te-M.radius)/U)+1),V.push(Math.floor((M.y+te+M.radius)/U)+1);break;case"qct":var le=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);V.push(Math.floor((le.y+te)/U)+1),V.push(Math.floor((le.y+le.h+te)/U)+1);break;case"bct":var he=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);V.push(Math.floor((he.y+te)/U)+1),V.push(Math.floor((he.y+he.h+te)/U)+1);break;case"rect":V.push(Math.floor((M.y+te)/U)+1),V.push(Math.floor((M.y+M.h+te)/U)+1)}for(var pe=0;pe<V.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<V[pe];)y.call(this);return V},y=function(){var M=this.fillStyle,F=this.strokeStyle,U=this.font,V=this.lineCap,te=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=F,this.font=U,this.lineCap=V,this.lineWidth=te,this.lineJoin=le},E=function(M,F,U){for(var V=0;V<M.length;V++)switch(M[V].type){case"bct":M[V].x2+=F,M[V].y2+=U;case"qct":M[V].x1+=F,M[V].y1+=U;default:M[V].x+=F,M[V].y+=U}return M},D=function(M){return M.sort(function(F,U){return F-U})},C=function(M,F){var U=this.fillStyle,V=this.strokeStyle,te=this.lineCap,le=this.lineWidth,he=Math.abs(le*this.ctx.transform.scaleX),pe=this.lineJoin;if(this.autoPaging){for(var de,be,Ee=JSON.parse(JSON.stringify(this.path)),Re=JSON.parse(JSON.stringify(this.path)),Fe=[],Z=0;Z<Re.length;Z++)if(Re[Z].x!==void 0)for(var je=b.call(this,Re[Z]),He=0;He<je.length;He+=1)Fe.indexOf(je[He])===-1&&Fe.push(je[He]);for(var Te=0;Te<Fe.length;Te++)for(;this.pdf.internal.getNumberOfPages()<Fe[Te];)y.call(this);D(Fe);for(var fe=Fe[0],Le=Fe[Fe.length-1],Ie=fe;Ie<Le+1;Ie++){this.pdf.setPage(Ie),this.fillStyle=U,this.strokeStyle=V,this.lineCap=te,this.lineWidth=he,this.lineJoin=pe;var Ue=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=Ie===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=Ie===1?0:Oe+(Ie-2)*rt;if(this.ctx.clip_path.length!==0){var At=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(de,this.posX+this.margin[3],-Qe+Me+this.ctx.prevPageLastElemOffset),z.call(this,M,!0),this.path=At}if(be=JSON.parse(JSON.stringify(Ee)),this.path=E(be,this.posX+this.margin[3],-Qe+Me+this.ctx.prevPageLastElemOffset),F===!1||Ie===0){var it=(Ie>fe||Ie<Le)&&v.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ue,rt,null).clip().discardPath()),z.call(this,M,F),it&&this.pdf.restoreGraphicsState()}this.lineWidth=le}this.path=Ee}else this.lineWidth=he,z.call(this,M,F),this.lineWidth=le},z=function(M,F){if((M!=="stroke"||F||!m.call(this))&&(M==="stroke"||F||!h.call(this))){for(var U,V,te=[],le=this.path,he=0;he<le.length;he++){var pe=le[he];switch(pe.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:pe,deltas:[],abs:[]});break;case"lt":var de=te.length;if(le[he-1]&&!isNaN(le[he-1].x)&&(U=[pe.x-le[he-1].x,pe.y-le[he-1].y],de>0)){for(;de>=0;de--)if(te[de-1].close!==!0&&te[de-1].begin!==!0){te[de-1].deltas.push(U),te[de-1].abs.push(pe);break}}break;case"bct":U=[pe.x1-le[he-1].x,pe.y1-le[he-1].y,pe.x2-le[he-1].x,pe.y2-le[he-1].y,pe.x-le[he-1].x,pe.y-le[he-1].y],te[te.length-1].deltas.push(U);break;case"qct":var be=le[he-1].x+2/3*(pe.x1-le[he-1].x),Ee=le[he-1].y+2/3*(pe.y1-le[he-1].y),Re=pe.x+2/3*(pe.x1-pe.x),Fe=pe.y+2/3*(pe.y1-pe.y),Z=pe.x,je=pe.y;U=[be-le[he-1].x,Ee-le[he-1].y,Re-le[he-1].x,Fe-le[he-1].y,Z-le[he-1].x,je-le[he-1].y],te[te.length-1].deltas.push(U);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(pe)}}V=F?null:M==="stroke"?"stroke":"fill";for(var He=!1,Te=0;Te<te.length;Te++)if(te[Te].arc)for(var fe=te[Te].abs,Le=0;Le<fe.length;Le++){var Ie=fe[Le];Ie.type==="arc"?j.call(this,Ie.x,Ie.y,Ie.radius,Ie.startAngle,Ie.endAngle,Ie.counterclockwise,void 0,F,!He):O.call(this,Ie.x,Ie.y),He=!0}else if(te[Te].close===!0)this.pdf.internal.out("h"),He=!1;else if(te[Te].begin!==!0){var Ue=te[Te].start.x,Me=te[Te].start.y;A.call(this,te[Te].deltas,Ue,Me),He=!0}V&&I.call(this,V),F&&P.call(this)}},k=function(M){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-U;case"top":return M+F-U;case"hanging":return M+F-2*U;case"middle":return M+F/2-U;default:return M}},W=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(F,U){this.colorStops.push([F,U])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(M,F,U,V,te,le,he,pe,de){for(var be=T.call(this,U,V,te,le),Ee=0;Ee<be.length;Ee++){var Re=be[Ee];Ee===0&&(de?N.call(this,Re.x1+M,Re.y1+F):O.call(this,Re.x1+M,Re.y1+F)),B.call(this,M,F,Re.x2,Re.y2,Re.x3,Re.y3,Re.x4,Re.y4)}pe?P.call(this):I.call(this,he)},I=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(M,F){this.pdf.internal.out(t(M)+" "+n(F)+" m")},S=function(M){var F;switch(M.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var U,V,te,le=this.pdf.getTextDimensions(M.text),he=k.call(this,M.y),pe=W.call(this,he)-le.h,de=this.ctx.transform.applyToPoint(new s(M.x,he));if(this.autoPaging){var be=this.ctx.transform.decompose(),Ee=new l;Ee=(Ee=(Ee=Ee.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var Re=this.ctx.transform.applyToRectangle(new o(M.x,he,le.w,le.h)),Fe=Ee.applyToRectangle(new o(M.x,pe,le.w,le.h)),Z=b.call(this,Fe),je=[],He=0;He<Z.length;He+=1)je.indexOf(Z[He])===-1&&je.push(Z[He]);D(je);for(var Te=je[0],fe=je[je.length-1],Le=Te;Le<fe+1;Le++){this.pdf.setPage(Le);var Ie=Le===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[2],Oe=Me-this.margin[0],rt=this.pdf.internal.pageSize.width-this.margin[1],Qe=rt-this.margin[3],At=Le===1?0:Ue+(Le-2)*Oe;if(this.ctx.clip_path.length!==0){var it=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(U,this.posX+this.margin[3],-1*At+Ie),z.call(this,"fill",!0),this.path=it}var qe=E([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-At+Ie+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(V=this.pdf.internal.getFontSize(),this.pdf.setFontSize(V*M.scale),te=this.lineWidth,this.lineWidth=te*M.scale);var Ve=this.autoPaging!=="text";if(Ve||qe.y+qe.h<=Me){if(Ve||qe.y>=Ie&&qe.x<=rt){var ze=Ve?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||rt-qe.x)[0],kt=E([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-At+Ie+this.ctx.prevPageLastElemOffset)[0],yt=Ve&&(Le>Te||Le<fe)&&v.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,Oe,null).clip().discardPath()),this.pdf.text(ze,kt.x,kt.y,{angle:M.angle,align:F,renderingMode:M.renderingMode}),yt&&this.pdf.restoreGraphicsState()}}else qe.y<Me&&(this.ctx.prevPageLastElemOffset+=Me-qe.y);M.scale>=.01&&(this.pdf.setFontSize(V),this.lineWidth=te)}}else M.scale>=.01&&(V=this.pdf.internal.getFontSize(),this.pdf.setFontSize(V*M.scale),te=this.lineWidth,this.lineWidth=te*M.scale),this.pdf.text(M.text,de.x+this.posX,de.y+this.posY,{angle:M.angle,align:F,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(V),this.lineWidth=te)},O=function(M,F,U,V){U=U||0,V=V||0,this.pdf.internal.out(t(M+U)+" "+n(F+V)+" l")},A=function(M,F,U){return this.pdf.lines(M,F,U,null,null)},B=function(M,F,U,V,te,le,he,pe){this.pdf.internal.out([e(i(U+M)),e(a(V+F)),e(i(te+M)),e(a(le+F)),e(i(he+M)),e(a(pe+F)),"c"].join(" "))},T=function(M,F,U,V){for(var te=2*Math.PI,le=Math.PI/2;F>U;)F-=te;var he=Math.abs(U-F);he<te&&V&&(he=te-he);for(var pe=[],de=V?-1:1,be=F;he>1e-5;){var Ee=be+de*Math.min(he,le);pe.push(L.call(this,M,be,Ee)),he-=Math.abs(Ee-be),be=Ee}return pe},L=function(M,F,U){var V=(U-F)/2,te=M*Math.cos(V),le=M*Math.sin(V),he=te,pe=-le,de=he*he+pe*pe,be=de+he*te+pe*le,Ee=4/3*(Math.sqrt(2*de*be)-be)/(he*le-pe*te),Re=he-Ee*pe,Fe=pe+Ee*he,Z=Re,je=-Fe,He=V+F,Te=Math.cos(He),fe=Math.sin(He);return{x1:M*Math.cos(F),y1:M*Math.sin(F),x2:Re*Te-Fe*fe,y2:Re*fe+Fe*Te,x3:Z*Te-je*fe,y3:Z*fe+je*Te,x4:M*Math.cos(U),y4:M*Math.sin(U)}},Y=function(M){return 180*M/Math.PI},X=function(M,F,U,V,te,le){var he=M+.5*(U-M),pe=F+.5*(V-F),de=te+.5*(U-te),be=le+.5*(V-le),Ee=Math.min(M,te,he,de),Re=Math.max(M,te,he,de),Fe=Math.min(F,le,pe,be),Z=Math.max(F,le,pe,be);return new o(Ee,Fe,Re-Ee,Z-Fe)},ae=function(M,F,U,V,te,le,he,pe){var de,be,Ee,Re,Fe,Z,je,He,Te,fe,Le,Ie,Ue,Me,Oe=U-M,rt=V-F,Qe=te-U,At=le-V,it=he-te,qe=pe-le;for(be=0;be<41;be++)Te=(je=(Ee=M+(de=be/40)*Oe)+de*((Fe=U+de*Qe)-Ee))+de*(Fe+de*(te+de*it-Fe)-je),fe=(He=(Re=F+de*rt)+de*((Z=V+de*At)-Re))+de*(Z+de*(le+de*qe-Z)-He),be==0?(Le=Te,Ie=fe,Ue=Te,Me=fe):(Le=Math.min(Le,Te),Ie=Math.min(Ie,fe),Ue=Math.max(Ue,Te),Me=Math.max(Me,fe));return new o(Math.round(Le),Math.round(Ie),Math.round(Ue-Le),Math.round(Me-Ie))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,F,U=(M=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:F}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(nt.API),function(r){var e=function(s){var o,l,c,f,u,p,h,m,v,b;for(l=[],c=0,f=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(u=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(p=(u=((u=((u=((u=(u-(b=u%85))/85)-(v=u%85))/85)-(m=u%85))/85)-(h=u%85))/85)%85,l.push(p+33,h+33,m+33,v+33,b+33)):l.push(122);return function(y,E){for(var D=E;D>0;D--)y.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},t=function(s){var o,l,c,f,u,p=String,h="length",m=255,v="charCodeAt",b="slice",y="replace";for(s[b](-2),s=s[b](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),c=[],f=0,u=(s+=o="uuuuu"[b](s[h]%5||5))[h];u>f;f+=5)l=52200625*(s[v](f)-33)+614125*(s[v](f+1)-33)+7225*(s[v](f+2)-33)+85*(s[v](f+3)-33)+(s[v](f+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(E,D){for(var C=D;C>0;C--)E.pop()}(c,o[h]),p.fromCharCode.apply(p,c)},n=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=id(o)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};r.processDataByFilters=function(s,o){var l=0,c=s||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(nt.API),function(r){r.loadFile=function(e,t,n){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,c,f){var u=new XMLHttpRequest,p=0,h=function(m){var v=m.length,b=[],y=String.fromCharCode;for(p=0;p<v;p+=1)b.push(y(255&m.charCodeAt(p)));return b.join("")};if(u.open("GET",l,!c),u.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(u.onload=function(){u.status===200?f(h(this.responseText)):f(void 0)}),u.send(null),c&&u.status===200)return h(u.responseText)}(i,a,s)}catch{}return o}(e,t,n)},r.loadImageFile=r.loadFile}(nt.API),function(r){function e(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):hf(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):hf(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Yt(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},a=function o(l,c){for(var f=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),u=l.firstChild;u;u=u.nextSibling)c!==!0&&u.nodeType===1&&u.nodeName==="SCRIPT"||f.appendChild(o(u,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(f.width=l.width,f.height=l.height,f.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(f.value=l.value),f.addEventListener("load",function(){f.scrollTop=l.scrollTop,f.scrollLeft=l.scrollLeft},!0)),f},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),c);return(f=f.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var h=0;h<f.length;++h){var m=f[h],v=m.src.find(function(b){return b.format==="truetype"});v&&c.addFont(v.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(o=o||nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,f){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,f){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(f,u){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,f),p}).then(f,u).then(function(p){return c.updateProgress(1),p})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),l&&(l=l.bind(f));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:s.convert(Object.assign({},f),Promise.prototype),p=c.call(u,o,l);return s.convert(p,f.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,nt.getPageSize=function(o,l,c){if(Yt(o)==="object"){var f=o;o=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,p=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var m,v=0,b=0;if(h.hasOwnProperty(p))v=h[p][1]/u,b=h[p][0]/u;else try{v=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",b>v&&(m=b,b=v,v=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>b&&(m=b,b=v,v=m)}return{width:b,height:v,unit:l,k:u,orientation:o}},r.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(jf):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(nt.API),nt.API.addJS=function(r){return l1=r,this.internal.events.subscribe("postPutResources",function(){Hl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Hl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),s1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+l1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Hl!==void 0&&s1!==void 0&&this.internal.out("/Names <</JavaScript "+Hl+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=n.exec(s);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(a=0;a<c;a++){var u=t.internal.newObject();f.push(u);var p=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<f.length;a++)t.internal.write("(page_"+(a+1)+")"+f[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,a){var s={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var s=n.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(nt.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,a,s,o){var l,c=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,l=function(u){for(var p,h=256*u.charCodeAt(4)+u.charCodeAt(5),m=u.length,v={width:0,height:0,numcomponents:1},b=4;b<m;b+=2){if(b+=h,e.indexOf(u.charCodeAt(b+1))!==-1){p=256*u.charCodeAt(b+5)+u.charCodeAt(b+6),v={width:256*u.charCodeAt(b+7)+u.charCodeAt(b+8),height:p,numcomponents:u.charCodeAt(b+9)};break}h=256*u.charCodeAt(b+2)+u.charCodeAt(b+3)}return v}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:i}}return f}}(nt.API),nt.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,a=A3(r,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,c=a.palette,f=a.depth;i=c&&l===1?function(j){for(var I=j.width,P=j.height,N=j.data,S=j.palette,O=j.depth,A=!1,B=[],T=[],L=void 0,Y=!1,X=0,ae=0;ae<S.length;ae++){var Q=u0(S[ae],4),M=Q[0],F=Q[1],U=Q[2],V=Q[3];B.push(M,F,U),V!=null&&(V===0?(X++,T.length<1&&T.push(ae)):V<255&&(Y=!0))}if(Y||X>1){A=!0,T=void 0;var te=I*P;L=new Uint8Array(te);for(var le=new DataView(N.buffer),he=0;he<te;he++){var pe=Tf(le,he,O),de=u0(S[pe],4)[3];L[he]=de}}else X===0&&(T=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:A?8:void 0,colorBytes:N,alphaBytes:L,needSMask:A,palette:B,mask:T}}(a):l===2||l===4?function(j){for(var I=j.data,P=j.width,N=j.height,S=j.channels,O=j.depth,A=S===2?"DeviceGray":"DeviceRGB",B=S-1,T=P*N,L=B,Y=T*L,X=1*T,ae=Math.ceil(Y*O/8),Q=Math.ceil(X*O/8),M=new Uint8Array(ae),F=new Uint8Array(Q),U=new DataView(I.buffer),V=new DataView(M.buffer),te=new DataView(F.buffer),le=!1,he=0;he<T;he++){for(var pe=he*S,de=0;de<L;de++)x1(V,Tf(U,pe+de,O),he*L+de,O);var be=Tf(U,pe+L,O);be<(1<<O)-1&&(le=!0),x1(te,be,1*he,O)}return{colorSpace:A,colorsPerPixel:B,sMaskBitsPerComponent:le?O:void 0,colorBytes:M,alphaBytes:F,needSMask:le}}(a):function(j){var I=j.data,P=j.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:P,colorsPerPixel:P==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(N){for(var S=N.length,O=new Uint8Array(2*S),A=new DataView(O.buffer,O.byteOffset,O.byteLength),B=0;B<S;B++)A.setUint16(2*B,N[B],!1);return O}(I):I,needSMask:!1}}(a);var u,p,h,m=i,v=m.colorSpace,b=m.colorsPerPixel,y=m.sMaskBitsPerComponent,E=m.colorBytes,D=m.alphaBytes,C=m.needSMask,z=m.palette,k=m.mask,W=null;return n!==nt.API.image_compression.NONE&&typeof id=="function"?(W=function(j){var I;switch(j){case nt.API.image_compression.FAST:I=11;break;case nt.API.image_compression.MEDIUM:I=13;break;case nt.API.image_compression.SLOW:I=14;break;default:I=12}return I}(n),u=this.decode.FLATE_DECODE,p="/Predictor ".concat(W," /Colors ").concat(b," /BitsPerComponent ").concat(f," /Columns ").concat(s),r=u1(E,Math.ceil(s*b*f/8),b,f,n),C&&(h=u1(D,Math.ceil(s*y/8),1,y,n))):(u=void 0,p=void 0,r=E,C&&(h=D)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:t,data:r,index:e,filter:u,decodeParameters:p,transparency:k,palette:z,sMask:h,predictor:W,width:s,height:o,bitsPerComponent:f,sMaskBitsPerComponent:y,colorSpace:v}}},function(r){r.processGIF89A=function(e,t,n,i){var a=new H3(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},f=new Rf(100).encode(c,100);return r.processJPEG.call(this,f,t,n,i)},r.processGIF87A=r.processGIF89A}(nt.API),fi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},fi.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){er.log("bit decode error:"+t)}},fi.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}t!==0&&(this.pos+=4-t)}},fi.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*i*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},fi.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},fi.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,c=a>>15?255:0,f=n*this.width*4+4*i;this.data[f]=l,this.data[f+1]=o,this.data[f+2]=s,this.data[f+3]=c}this.pos+=r}},fi.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,c=(s>>11)/e*255|0,f=i*this.width*4+4*a;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=255}this.pos+=r}},fi.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},fi.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=s}},fi.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,i){var a=new fi(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new Rf(100).encode(l,100);return r.processJPEG.call(this,c,t,n,i)}}(nt.API),y1.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,i){var a=new y1(e),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new Rf(100).encode(l,100);return r.processJPEG.call(this,c,t,n,i)}}(nt.API),nt.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var f=n[c],u=n[c+1],p=n[c+2],h=n[c+3];a[o++]=f,a[o++]=u,a[o++]=p,s[l++]=h}var m=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:m,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},nt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},jo=nt.API,ql=jo.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,u=e.doKerning!==!1,p=0,h=r.length,m=0,v=o[0]||l,b=[];for(t=0;t<h;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+s*(1e3/a)||0)/1e3):(p=u&&Yt(c[n])==="object"&&!isNaN(parseInt(c[n][m],10))?c[n][m]/f:0,b.push((o[n]||v)/l+p)),m=n;return b},c1=jo.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return jo.processArabic&&(r=jo.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:ql.apply(this,arguments).reduce(function(a,s){return a+s},0)},f1=function(r,e,t,n){for(var i=[],a=0,s=r.length,o=0;a!==s&&o+e[a]<t;)o+=e[a],a++;i.push(r.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>n&&(i.push(r.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&i.push(r.slice(l,a)),i},d1=function(r,e,t){t||(t={});var n,i,a,s,o,l,c,f=[],u=[f],p=t.textIndent||0,h=0,m=0,v=r.split(" "),b=ql.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?v[0].length+2:t.lineIndent||0){var y=Array(l).join(" "),E=[];v.map(function(C){(C=C.split(/\s*\n/)).length>1?E=E.concat(C.map(function(z,k){return(k&&z.length?`
`:"")+z})):E.push(C[0])}),v=E,l=c1.apply(this,[y,t])}for(a=0,s=v.length;a<s;a++){var D=0;if(n=v[a],l&&n[0]==`
`&&(n=n.substr(1),D=1),p+h+(m=(i=ql.apply(this,[n,t])).reduce(function(C,z){return C+z},0))>e||D){if(m>e){for(o=f1.apply(this,[n,i,e-(p+h),e]),f.push(o.shift()),f=[o.pop()];o.length;)u.push([o.shift()]);m=i.slice(n.length-(f[0]?f[0].length:0)).reduce(function(C,z){return C+z},0)}else f=[n];u.push(f),p=m+l,h=b}else f.push(n),p+=h+m,h=b}return c=l?function(C,z){return(z?y:"")+C.join(" ")}:function(C){return C.join(" ")},u.map(c)},jo.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var u=this.internal.getFont(f.fontName,f.fontStyle),p="Unicode";return u.metadata[p]?{widths:u.metadata[p].widths||{0:1},kerning:u.metadata[p].kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(d1.apply(this,[n[o],s,a]));return c},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[t[a]]=e[a],i[e[a]]=t[a];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=r.__fontmetrics__.compress=function(p){var h,m,v,b,y=["{"];for(var E in p){if(h=p[E],isNaN(parseInt(E,10))?m="'"+E+"'":(E=parseInt(E,10),m=(m=s(E).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof h=="number")h<0?(v=s(h).slice(3),b="-"):(v=s(h).slice(2),b=""),v=b+v.slice(0,-1)+i[v.slice(-1)];else{if(Yt(h)!=="object")throw new Error("Don't know what to do with value type "+Yt(h)+".");v=o(h)}y.push(m+v)}return y.push("}"),y.join("")},l=r.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,v,b,y={},E=1,D=y,C=[],z="",k="",W=p.length-1,j=1;j<W;j+=1)(b=p[j])=="'"?h?(v=h.join(""),h=void 0):h=[]:h?h.push(b):b=="{"?(C.push([D,v]),D={},v=void 0):b=="}"?((m=C.pop())[0][m[1]]=D,v=void 0,D=m[0]):b=="-"?E=-1:v===void 0?n.hasOwnProperty(b)?(z+=n[b],v=parseInt(z,16)*E,E=1,z=""):z+=b:n.hasOwnProperty(b)?(k+=n[b],D[v]=parseInt(k,16)*E,E=1,v=void 0,k=""):k+=b;return y},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(p){var h=p.font,m=u.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var v=f.Unicode[h.postScriptName];v&&(h.metadata.Unicode.encoding=v,h.encoding=v.codePages[0])}])}(nt.API),function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=t.charCodeAt(a);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Kl(o)),s.metadata=r.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,n)}}])}(nt),nt.API.addSvgAsImage=function(r,e,t,n,i,a,s,o){if(isNaN(e)||isNaN(t))throw er.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw er.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return(pt.canvg?Promise.resolve(pt.canvg):hf(()=>import("./index.es-xoAzfled.js"),__vite__mapDeps([0,1,2,3]))).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(c,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(f)}).then(function(){u.addImage(l.toDataURL("image/jpeg",1),e,t,n,i,s,o)})},nt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},nt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,f=0,u=0;function p(m,v){var b,y=!1;for(b=0;b<m.length;b+=1)m[b]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var h=o.length;for(u=0;u<h;u+=1)t[o[u]].value=t[o[u]].defaultValue,t[o[u]].explicitSet=!1}if(Yt(r)==="object"){for(i in r)if(a=r[i],p(o,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&p(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(c=0;c<a.length;c+=1)if(n=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(f=0;f<a[c].length;f+=1)typeof a[c][f]!="number"&&(n=!1);n===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,v=[];for(m in t)t[m].explicitSet===!0&&(t[m].type==="name"?v.push("/"+m+" /"+t[m].value):v.push("/"+m+" "+t[m].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=a.length+s.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(nt.API),function(r){var e=r.API,t=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],u=0,p=a.length;u<p;++u){if(o=s.metadata.characterToGlyph(a.charCodeAt(u)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(u),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(c[4-o.length],o)}return f.join("")},n=function(a){var s,o,l,c,f,u,p;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],u=0,p=(o=Object.keys(a).sort(function(h,m){return h-m})).length;u<p;u++)s=o[u],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(c=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,c=s.newObject,f=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var u=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",m=0;m<p.length;m++)h+=String.fromCharCode(p[m]);var v=c();f({data:h,addLength1:!0,objectId:v}),l("endobj");var b=c();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+To(o.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var E=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+To(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+r.API.PDFObject.convert(u)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+To(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+E+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,c=s.newObject,f=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var u=o.metadata.rawData,p="",h=0;h<u.length;h++)p+=String.fromCharCode(u[h]);var m=c();f({data:p,addLength1:!0,objectId:m}),l("endobj");var v=c();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+To(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+To(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,c=a.y,f=a.options||{},u=a.mutex||{},p=u.pdfEscape,h=u.activeFontKey,m=u.fonts,v=h,b="",y=0,E="",D=m[v].encoding;if(m[v].encoding!=="Identity-H")return{text:o,x:l,y:c,options:f,mutex:u};for(E=o,v=h,Array.isArray(o)&&(E=o[0]),y=0;y<E.length;y+=1)m[v].metadata.hasOwnProperty("cmap")&&(s=m[v].metadata.cmap.unicode.codeMap[E[y].charCodeAt(0)]),s||E[y].charCodeAt(0)<256&&m[v].metadata.hasOwnProperty("Unicode")?b+=E[y]:b+="";var C="";return parseInt(v.slice(1))<14||D==="WinAnsiEncoding"?C=p(b,v).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(C=t(b,m[v])),u.isHex=!0,{text:C,x:l,y:c,options:f,mutex:u}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?o.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):o.push(i(Object.assign({},l,{text:s[c]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}(nt),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(nt.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,a,s,o,l,c,f,u=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","Â«","Â»","Â«","â€¹","â€º","â€¹","â…","â†","â…","â½","â¾","â½","â‚","â‚Ž","â‚","â‰¤","â‰¥","â‰¤","âŒ©","âŒª","âŒ©","ï¹™","ï¹š","ï¹™","ï¹›","ï¹œ","ï¹›","ï¹","ï¹ž","ï¹","ï¹¤","ï¹¥","ï¹¤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,D=0;this.__bidiEngine__={};var C=function(N){var S=N.charCodeAt(),O=S>>8,A=v[O];return A!==void 0?u[256*A+(255&S)]:O===252||O===253?"AL":y.test(O)?"L":O===8?"R":"N"},z=function(N){for(var S,O=0;O<N.length;O++){if((S=C(N.charAt(O)))==="L")return!1;if(S==="R")return!0}return!1},k=function(N,S,O,A){var B,T,L,Y,X=S[A];switch(X){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(X="AN");break;case"AL":E=!0,X="R";break;case"WS":case"BN":X="N";break;case"CS":A<1||A+1>=S.length||(B=O[A-1])!=="EN"&&B!=="AN"||(T=S[A+1])!=="EN"&&T!=="AN"?X="N":E&&(T="AN"),X=T===B?T:"N";break;case"ES":X=(B=A>0?O[A-1]:"B")==="EN"&&A+1<S.length&&S[A+1]==="EN"?"EN":"N";break;case"ET":if(A>0&&O[A-1]==="EN"){X="EN";break}if(E){X="N";break}for(L=A+1,Y=S.length;L<Y&&S[L]==="ET";)L++;X=L<Y&&S[L]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(Y=S.length,L=A+1;L<Y&&S[L]==="NSM";)L++;if(L<Y){var ae=N[A],Q=ae>=1425&&ae<=2303||ae===64286;if(B=S[L],Q&&(B==="R"||B==="AL")){X="R";break}}}X=A<1||(B=S[A-1])==="B"?"N":O[A-1];break;case"B":E=!1,i=!0,X=D;break;case"S":a=!0,X="N"}return X},W=function(N,S,O){var A=N.split("");return O&&j(A,O,{hiLevel:D}),A.reverse(),S&&S.reverse(),A.join("")},j=function(N,S,O){var A,B,T,L,Y,X=-1,ae=N.length,Q=0,M=[],F=D?h:p,U=[];for(E=!1,i=!1,a=!1,B=0;B<ae;B++)U[B]=C(N[B]);for(T=0;T<ae;T++){if(Y=Q,M[T]=k(N,U,M,T),A=240&(Q=F[Y][m[M[T]]]),Q&=15,S[T]=L=F[Q][5],A>0)if(A===16){for(B=X;B<T;B++)S[B]=1;X=-1}else X=-1;if(F[Q][6])X===-1&&(X=T);else if(X>-1){for(B=X;B<T;B++)S[B]=L;X=-1}U[T]==="B"&&(S[T]=0),O.hiLevel|=L}a&&function(V,te,le){for(var he=0;he<le;he++)if(V[he]==="S"){te[he]=D;for(var pe=he-1;pe>=0&&V[pe]==="WS";pe--)te[pe]=D}}(U,S,ae)},I=function(N,S,O,A,B){if(!(B.hiLevel<N)){if(N===1&&D===1&&!i)return S.reverse(),void(O&&O.reverse());for(var T,L,Y,X,ae=S.length,Q=0;Q<ae;){if(A[Q]>=N){for(Y=Q+1;Y<ae&&A[Y]>=N;)Y++;for(X=Q,L=Y-1;X<L;X++,L--)T=S[X],S[X]=S[L],S[L]=T,O&&(T=O[X],O[X]=O[L],O[L]=T);Q=Y}Q++}}},P=function(N,S,O){var A=N.split(""),B={hiLevel:D};return O||(O=[]),j(A,O,B),function(T,L,Y){if(Y.hiLevel!==0&&f)for(var X,ae=0;ae<T.length;ae++)L[ae]===1&&(X=b.indexOf(T[ae]))>=0&&(T[ae]=b[X+1])}(A,O,B),I(2,A,S,O,B),I(1,A,S,O,B),A.join("")};return this.__bidiEngine__.doBidiReorder=function(N,S,O){if(function(B,T){if(T)for(var L=0;L<B.length;L++)T[L]=L;o===void 0&&(o=z(B)),c===void 0&&(c=z(B))}(N,S),s||!l||c)if(s&&l&&o^c)D=o?1:0,N=W(N,S,O);else if(!s&&l&&c)D=o?1:0,N=P(N,S,O),N=W(N,S);else if(!s||o||l||c){if(s&&!l&&o^c)N=W(N,S),o?(D=0,N=P(N,S,O)):(D=1,N=P(N,S,O),N=W(N,S));else if(s&&o&&!l&&c)D=1,N=P(N,S,O),N=W(N,S);else if(!s&&!l&&o^c){var A=f;o?(D=1,N=P(N,S,O),D=0,f=!1,N=P(N,S,O),f=A):(D=0,N=P(N,S,O),N=W(N,S),D=1,f=!1,N=P(N,S,O),f=A,N=W(N,S))}}else D=0,N=P(N,S,O);else D=o?1:0,N=P(N,S,O);return N},this.__bidiEngine__.setOptions=function(N){N&&(s=N.isInputVisual,l=N.isOutputVisual,o=N.isInputRtl,c=N.isOutputRtl,f=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([t.doBidiReorder(i[o])]);n.text=s}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(nt),nt.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ta(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new iw(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new q3(this.contents),this.head=new G3(this),this.name=new Z3(this),this.cmap=new dp(this),this.toUnicode={},this.hhea=new $3(this),this.maxp=new Q3(this),this.hmtx=new J3(this),this.post=new Y3(this),this.os2=new X3(this),this.loca=new nw(this),this.glyf=new ew(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,c;for(c=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return s*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var yi,Ta=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,a,s,o,l;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*a+65536*s+256*o+l},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)t=e[n],a.push(this.writeByte(t));return a},r}(),q3=function(){var r;function e(t){var n,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,a,s,o,l,c,f,u,p,h,m,v;for(v in h=Object.keys(t).length,l=Math.log(2),u=16*Math.floor(Math.log(h)/l),s=Math.floor(u/l),f=16*h-u,(i=new Ta).writeInt(this.scalarType),i.writeShort(h),i.writeShort(u),i.writeShort(s),i.writeShort(f),a=16*h,c=i.pos+a,o=null,m=[],t)for(p=t[v],i.writeString(v),i.writeInt(r(p)),i.writeInt(c),i.writeInt(p.length),m=m.concat(p),v==="head"&&(o=c),c+=p.length;c%4;)m.push(0),c++;return i.write(m),n=2981146554-r(i.data),i.pos=o+8,i.writeUInt32(n),i.data},r=function(t){var n,i,a,s;for(t=up.call(t);t.length%4;)t.push(0);for(a=new Ta(t),i=0,n=0,s=t.length;n<s;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),V3={}.hasOwnProperty,Li=function(r,e){for(var t in e)V3.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};yi=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var G3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Ta).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r}(),b1=function(){function r(e,t){var n,i,a,s,o,l,c,f,u,p,h,m,v,b,y,E,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),p=h/2,e.pos+=6,a=function(){var C,z;for(z=[],l=C=0;0<=p?C<p:C>p;l=0<=p?++C:--C)z.push(e.readUInt16());return z}(),e.pos+=2,v=function(){var C,z;for(z=[],l=C=0;0<=p?C<p:C>p;l=0<=p?++C:--C)z.push(e.readUInt16());return z}(),c=function(){var C,z;for(z=[],l=C=0;0<=p?C<p:C>p;l=0<=p?++C:--C)z.push(e.readUInt16());return z}(),f=function(){var C,z;for(z=[],l=C=0;0<=p?C<p:C>p;l=0<=p?++C:--C)z.push(e.readUInt16());return z}(),i=(this.length-e.pos+this.offset)/2,o=function(){var C,z;for(z=[],l=C=0;0<=i?C<i:C>i;l=0<=i?++C:--C)z.push(e.readUInt16());return z}(),l=y=0,D=a.length;y<D;l=++y)for(b=a[l],n=E=m=v[l];m<=b?E<=b:E>=b;n=m<=b?++E:--E)f[l]===0?s=n+c[l]:(s=o[f[l]/2+(n-m)-(p-l)]||0)!==0&&(s+=c[l]),this.codeMap[n]=65535&s}e.pos=u}return r.encode=function(e,t){var n,i,a,s,o,l,c,f,u,p,h,m,v,b,y,E,D,C,z,k,W,j,I,P,N,S,O,A,B,T,L,Y,X,ae,Q,M,F,U,V,te,le,he,pe,de,be,Ee;switch(A=new Ta,s=Object.keys(e).sort(function(Re,Fe){return Re-Fe}),t){case"macroman":for(v=0,b=function(){var Re=[];for(m=0;m<256;++m)Re.push(0);return Re}(),E={0:0},a={},B=0,X=s.length;B<X;B++)E[pe=e[i=s[B]]]==null&&(E[pe]=++v),a[i]={old:e[i],new:E[e[i]]},b[i]=E[e[i]];return A.writeUInt16(1),A.writeUInt16(0),A.writeUInt32(12),A.writeUInt16(0),A.writeUInt16(262),A.writeUInt16(0),A.write(b),{charMap:a,subtable:A.data,maxGlyphID:v+1};case"unicode":for(S=[],u=[],D=0,E={},n={},y=c=null,T=0,ae=s.length;T<ae;T++)E[z=e[i=s[T]]]==null&&(E[z]=++D),n[i]={old:z,new:E[z]},o=E[z]-i,y!=null&&o===c||(y&&u.push(y),S.push(i),c=o),y=i;for(y&&u.push(y),u.push(65535),S.push(65535),P=2*(I=S.length),j=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(j/2)/Math.LN2,W=2*I-j,l=[],k=[],h=[],m=L=0,Q=S.length;L<Q;m=++L){if(N=S[m],f=u[m],N===65535){l.push(0),k.push(0);break}if(N-(O=n[N].new)>=32768)for(l.push(0),k.push(2*(h.length+I-m)),i=Y=N;N<=f?Y<=f:Y>=f;i=N<=f?++Y:--Y)h.push(n[i].new);else l.push(O-N),k.push(0)}for(A.writeUInt16(3),A.writeUInt16(1),A.writeUInt32(12),A.writeUInt16(4),A.writeUInt16(16+8*I+2*h.length),A.writeUInt16(0),A.writeUInt16(P),A.writeUInt16(j),A.writeUInt16(p),A.writeUInt16(W),le=0,M=u.length;le<M;le++)i=u[le],A.writeUInt16(i);for(A.writeUInt16(0),he=0,F=S.length;he<F;he++)i=S[he],A.writeUInt16(i);for(de=0,U=l.length;de<U;de++)o=l[de],A.writeUInt16(o);for(be=0,V=k.length;be<V;be++)C=k[be],A.writeUInt16(C);for(Ee=0,te=h.length;Ee<te;Ee++)v=h[Ee],A.writeUInt16(v);return{charMap:n,subtable:A.data,maxGlyphID:D+1}}},r}(),dp=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new b1(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,i;return t==null&&(t="macroman"),n=b1.encode(e,t),(i=new Ta).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r}(),$3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r}(),X3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r}(),Y3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var s,o,l;for(l=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)l.push(e.readUInt32());return l}).call(this)}},r}(),K3=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Z3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,i,a,s,o,l,c,f,u,p;for(e.pos=this.offset,e.readShort(),t=e.readShort(),o=e.readShort(),n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=f=0,u=n.length;f<u;a=++f)i=n[a],e.pos=i.offset,c=e.readString(i.length),s=new K3(c,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},r}(),Q3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r}(),J3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,i,a,s,o,l;for(e.pos=this.offset,this.metrics=[],t=0,o=this.file.hhea.numberOfMetrics;0<=o?t<o:t>o;t=0<=o?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,f;for(f=[],t=c=0;0<=i?c<i:c>i;t=0<=i?++c:--c)f.push(e.readInt16());return f}(),this.widths=(function(){var c,f,u,p;for(p=[],c=0,f=(u=this.metrics).length;c<f;c++)a=u[c],p.push(a.advance);return p}).call(this),n=this.widths[this.widths.length-1],l=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)l.push(this.widths.push(n));return l},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r}(),up=[].slice,ew=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,i,a,s,o,l,c,f,u;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,n=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,s=(o=new Ta(t.read(i))).readShort(),c=o.readShort(),u=o.readShort(),l=o.readShort(),f=o.readShort(),this.cache[e]=s===-1?new rw(o,c,u,l,f):new tw(o,s,c,u,l,f),this.cache[e]))},r.prototype.encode=function(e,t,n){var i,a,s,o,l;for(s=[],a=[],o=0,l=t.length;o<l;o++)i=e[t[o]],a.push(s.length),i&&(s=s.concat(i.encode(n)));return a.push(s.length),{table:s,offsets:a}},r}(),tw=function(){function r(e,t,n,i,a,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),rw=function(){function r(e,t,n,i,a){var s,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Ta(up.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),nw=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Li(r,yi),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(e.readUInt32());return a}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<n.length;++s)if(n[s]=i,a<t.length&&t[a]==s){++a,n[s]=i;var o=this.offsets[s],l=this.offsets[s+1]-o;l>0&&(i+=l)}for(var c=new Array(4*n.length),f=0;f<n.length;++f)c[4*f+3]=255&n[f],c[4*f+2]=(65280&n[f])>>8,c[4*f+1]=(16711680&n[f])>>16,c[4*f]=(4278190080&n[f])>>24;return c},r}(),iw=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,a,s,o,l;for(i={},s=0,o=e.length;s<o;s++)i[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(n=i[a])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in l=this.glyphsFor(t))n=l[a],i[a]=n;return i},r.prototype.encode=function(e,t){var n,i,a,s,o,l,c,f,u,p,h,m,v,b,y;for(i in n=dp.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},y=n.charMap)h[(l=y[i]).old]=l.new;for(m in p=n.maxGlyphID,s)m in h||(h[m]=p++);return f=function(E){var D,C;for(D in C={},E)C[E[D]]=D;return C}(h),u=Object.keys(f).sort(function(E,D){return E-D}),v=function(){var E,D,C;for(C=[],E=0,D=u.length;E<D;E++)o=u[E],C.push(f[o]);return C}(),a=this.font.glyf.encode(s,v,h),c=this.font.loca.encode(a.offsets,v),b={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},r}();nt.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,a,s;if(Array.isArray(t))return"["+function(){var o,l,c;for(c=[],o=0,l=t.length;o<l;o++)n=t[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)s=t[i],a.push("/"+i+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+t},e}();function hp(r,e,t,n,i){n=n||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():a,c=o*l,f=/\r\n|\r|\n/g,u="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(u=typeof r=="string"?r.split(f):r,p=u.length||1),t+=o*(2-a),n.valign==="middle"?t-=p/2*c:n.valign==="bottom"&&(t-=p*c),n.halign==="center"||n.halign==="right"){var h=o;if(n.halign==="center"&&(h*=.5),u&&p>=1){for(var m=0;m<u.length;m++)i.text(u[m],e-i.getStringUnitWidth(u[m])*h,t),t+=c;return i}e-=i.getStringUnitWidth(r)*h}return n.halign==="justify"?i.text(r,e,t,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(r,e,t),i}var w1={},Wo=function(){function r(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:w1=e},r.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},r.prototype.applyStyles=function(e,t){var n,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var f=r.unifyColor(e.fillColor);f&&(n=this.jsPDFDocument).setFillColor.apply(n,f),f=r.unifyColor(e.textColor),f&&(i=this.jsPDFDocument).setTextColor.apply(i,f),f=r.unifyColor(e.lineColor),f&&(a=this.jsPDFDocument).setDrawColor.apply(a,f),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},r.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},r.prototype.rect=function(e,t,n,i,a){return this.jsPDFDocument.rect(e,t,n,i,a)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return w1||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r}(),ud=function(r,e){return ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},ud(r,e)};function pp(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ud(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var gp=function(r){pp(e,r);function e(t){var n=r.call(this)||this;return n._element=t,n}return e}(Array);function aw(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ow(r){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[r]}function uc(r,e,t){t.applyStyles(e,!0);var n=Array.isArray(r)?r:[r],i=n.map(function(a){return t.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function mp(r,e,t,n){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;r.applyStyles({lineWidth:i,lineColor:a});var s=xp(i,!1);s&&r.rect(t.x,t.y,e.getWidth(r.pageSize().width),n.y-t.y,s)}function xp(r,e){var t=r>0,n=e||e===0;return t&&n?"DF":t?"S":n?"F":null}function Sc(r,e){var t,n,i,a;if(r=r||e,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=e}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(t=r.left)!==null&&t!==void 0?t:e,top:(n=r.top)!==null&&n!==void 0?n:e,right:(i=r.right)!==null&&i!==void 0?i:e,bottom:(a=r.bottom)!==null&&a!==void 0?a:e}):(typeof r!="number"&&(r=e),{top:r,right:r,bottom:r,left:r})}function vp(r,e){var t=Sc(e.settings.margin,0);return r.pageSize().width-(t.left+t.right)}function sw(r,e,t,n,i){var a={},s=1.3333333333333333,o=Lf(e,function(D){return i.getComputedStyle(D).backgroundColor});o!=null&&(a.fillColor=o);var l=Lf(e,function(D){return i.getComputedStyle(D).color});l!=null&&(a.textColor=l);var c=cw(n,t);c&&(a.cellPadding=c);var f="borderTopColor",u=s*t,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var h=(parseFloat(p)||0)/u;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/u,right:(parseFloat(n.borderRightWidth)||0)/u,bottom:(parseFloat(n.borderBottomWidth)||0)/u,left:(parseFloat(n.borderLeftWidth)||0)/u},a.lineWidth.top||(a.lineWidth.right?f="borderRightColor":a.lineWidth.bottom?f="borderBottomColor":a.lineWidth.left&&(f="borderLeftColor"));var m=Lf(e,function(D){return i.getComputedStyle(D)[f]});m!=null&&(a.lineColor=m);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(a.fontSize=b/s);var y=lw(n);y&&(a.fontStyle=y);var E=(n.fontFamily||"").toLowerCase();return r.indexOf(E)!==-1&&(a.font=E),a}function lw(r){var e="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(e="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(e+="italic"),e}function Lf(r,e){var t=yp(r,e);if(!t)return null;var n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function yp(r,e){var t=e(r);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?r.parentElement==null?null:yp(r.parentElement,e):t}function cw(r,e){var t=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/e),i=(parseInt(r.lineHeight)-parseInt(r.fontSize))/e/2,a=t.map(function(o){return parseInt(o||"0")/n}),s=Sc(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function bp(r,e,t,n,i){var a,s;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=t.document.querySelector(e):o=e;var l=Object.keys(r.getFontList()),c=r.scaleFactor(),f=[],u=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:f,body:u,foot:p};for(var h=0;h<o.rows.length;h++){var m=o.rows[h],v=(s=(a=m==null?void 0:m.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),b=fw(l,c,t,m,n,i);b&&(v==="thead"?f.push(b):v==="tfoot"?p.push(b):u.push(b))}return{head:f,body:u,foot:p}}function fw(r,e,t,n,i,a){for(var s=new gp(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=t.getComputedStyle(l);if(i||c.display!=="none"){var f=void 0;a&&(f=sw(r,l,e,c,t)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:f,_element:l,content:dw(l)})}}var u=t.getComputedStyle(n);if(s.length>0&&(i||u.display!=="none"))return s}function dw(r){var e=r.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function uw(r,e,t){for(var n=0,i=[r,e,t];n<i.length;n++){var a=i[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function na(r,e,t,n,i){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(r),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function hw(r,e){var t=new Wo(r),n=t.getDocumentOptions(),i=t.getGlobalOptions();uw(i,n,e);var a=na({},i,n,e),s;typeof window<"u"&&(s=window);var o=pw(i,n,e),l=gw(i,n,e),c=mw(t,a),f=vw(t,a,s);return{id:e.tableId,content:f,hooks:l,styles:o,settings:c}}function pw(r,e,t){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=r[l],f=e[l],u=t[l];n.columnStyles=na({},c,f,u)}else{var p=[r,e,t],h=p.map(function(m){return m[l]||{}});n[l]=na({},h[0],h[1],h[2])}},a=0,s=Object.keys(n);a<s.length;a++){var o=s[a];i(o)}return n}function gw(r,e,t){for(var n=[r,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=n;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function mw(r,e){var t,n,i,a,s,o,l,c,f,u,p,h,m=Sc(e.margin,40/r.scaleFactor()),v=(t=xw(r,e.startY))!==null&&t!==void 0?t:m.top,b;e.showFoot===!0?b="everyPage":e.showFoot===!1?b="never":b=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var y;e.showHead===!0?y="everyPage":e.showHead===!1?y="never":y=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var E=(a=e.useCss)!==null&&a!==void 0?a:!1,D=e.theme||(E?"plain":"striped"),C=!!e.horizontalPageBreak,z=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:E,theme:D,startY:v,margin:m,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(f=e.tableWidth)!==null&&f!==void 0?f:"auto",showHead:y,showFoot:b,tableLineWidth:(u=e.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:C,horizontalPageBreakRepeat:z,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function xw(r,e){var t=r.getLastAutoTable(),n=r.scaleFactor(),i=r.pageNumber(),a=!1;if(t&&t.startPageNumber){var s=t.startPageNumber+t.pageNumber-1;a=s===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(t==null?void 0:t.finalY)!=null?t.finalY+20/n:null}function vw(r,e,t){var n=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(t){var o=bp(r,e.html,t,s,e.useCss)||{};n=o.head||n,i=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||yw(n,i,a);return{columns:l,head:n,body:i,foot:a}}function yw(r,e,t){var n=r[0]||e[0]||t[0]||[],i=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var c=void 0;Array.isArray(n)?c=i.length:c=a+(l>0?"_".concat(l):"");var f={dataKey:c};i.push(f)}}),i}var hd=function(){function r(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()}return r}(),bw=function(r){pp(e,r);function e(t,n,i,a,s,o){var l=r.call(this,t,n,o)||this;return l.cell=i,l.row=a,l.column=s,l.section=a.section,l}return e}(hd),ww=function(){function r(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return r.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(e,t,n,i,a,s){for(var o=0,l=t;o<l.length;o++){var c=l[o],f=new bw(e,this,n,i,a,s),u=c(f)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],u)return!1}return!0},r.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var a=i[n];a(new hd(e,this,t))}},r.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var a=i[n];a(new hd(e,this,t))}},r.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var n=this.settings.margin;return e-n.left-n.right}},r}(),wp=function(){function r(e,t,n,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof gp&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=i,this.spansMultiplePages=a}return r.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(n,i){var a;return Math.max(n,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},r.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(n){var i=t.cells[n.index];return i?i.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},r.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(i,a){var s=n.cells[a.index];if(!s)return 0;var o=t.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=l+o;return c>i?c:i},0)},r}(),Ap=function(){function r(e,t,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return r.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},r.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=n*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},r.prototype.padding=function(e){var t=Sc(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},r}(),Aw=function(){function r(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return r.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,i=e.allRows();n<i.length;n++){var a=i[n],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(t=Math.max(t,s.styles.cellWidth))}return t},r}();function Sw(r,e){_w(r,e);var t=[],n=0;e.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(e);s?a.width=s:(a.width=a.wrappedWidth,t.push(a)),n+=a.width});var i=e.getWidth(r.pageSize().width)-n;i&&(i=pd(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=pd(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/r.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Iw(e),Ew(e,r),Cw(e)}function _w(r,e){var t=r.scaleFactor(),n=e.settings.horizontalPageBreak,i=vp(r,e);e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c){var f=e.hooks.didParseCell;e.callCellHooks(r,f,c,a,l,null);var u=c.padding("horizontal");c.contentWidth=uc(c.text,c.styles,r)+u;var p=uc(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,r);if(c.minReadableWidth=p+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var h=10/t;c.minWidth=c.styles.minCellWidth||h,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var f=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},u=f.cellWidth||f.minCellWidth;u&&typeof u=="number"&&(l.minWidth=u,l.wrappedWidth=u)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function pd(r,e,t){for(var n=e,i=r.reduce(function(h,m){return h+m.wrappedWidth},0),a=0;a<r.length;a++){var s=r[a],o=s.wrappedWidth/i,l=n*o,c=s.width+l,f=t(s),u=c<f?f:c;e-=u-s.width,s.width=u}if(e=Math.round(e*1e10)/1e10,e){var p=r.filter(function(h){return e<0?h.width>t(h):!0});p.length&&(e=pd(p,e,t))}return e}function Cw(r){for(var e={},t=1,n=r.allRows(),i=0;i<n.length;i++)for(var a=n[i],s=0,o=r.columns;s<o.length;s++){var l=o[s],c=e[l.index];if(t>1)t--,delete a.cells[l.index];else if(c)c.cell.height+=a.height,t=c.cell.colSpan,delete a.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var f=a.cells[l.index];if(!f)continue;if(f.height=a.height,f.rowSpan>1){var u=n.length-i,p=f.rowSpan>u?u:f.rowSpan;e[l.index]={cell:f,left:p,row:a}}}}}function Iw(r){for(var e=r.allRows(),t=0;t<e.length;t++)for(var n=e[t],i=null,a=0,s=0,o=0;o<r.columns.length;o++){var l=r.columns[o];if(s-=1,s>1&&r.columns[o+1])a+=l.width,delete n.cells[l.index];else if(i){var c=i;delete n.cells[l.index],i=null,c.width=l.width+a}else{var c=n.cells[l.index];if(!c)continue;if(s=c.colSpan,a=0,c.colSpan>1){i=c,a+=l.width;continue}c.width=l.width+a}}}function Ew(r,e){for(var t={count:0,height:0},n=0,i=r.allRows();n<i.length;n++){for(var a=i[n],s=0,o=r.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c){e.applyStyles(c.styles,!0);var f=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,f+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=A1(c.text,f,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=A1(c.text,f,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var u=c.styles.overflow(c.text,f);typeof u=="string"?c.text=[u]:c.text=u}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=c.contentHeight/c.rowSpan;c.rowSpan>1&&t.count*t.height<p*c.rowSpan?t={height:p,count:c.rowSpan}:t&&t.count>0&&t.height>p&&(p=t.height),p>a.height&&(a.height=p)}}t.count--}}function A1(r,e,t,n,i){return r.map(function(a){return Nw(a,e,t,n,i)})}function Nw(r,e,t,n,i){var a=1e4*n.scaleFactor();if(e=Math.ceil(e*a)/a,e>=uc(r,t,n))return r;for(;e<uc(r+i,t,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+i}function Dw(r,e){var t=new Wo(r),n=kw(e,t.scaleFactor()),i=new ww(e,n);return Sw(t,i),t.applyStyles(t.userStyles),i}function kw(r,e){var t=r.content,n=Ow(t.columns);if(t.head.length===0){var i=S1(n,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=S1(n,"foot");i&&t.foot.push(i)}var a=r.settings.theme,s=r.styles;return{columns:n,head:Pf("head",t.head,n,s,a,e),body:Pf("body",t.body,n,s,a,e),foot:Pf("foot",t.foot,n,s,a,e)}}function Pf(r,e,t,n,i,a){var s={},o=e.map(function(l,c){for(var f=0,u={},p=0,h=0,m=0,v=t;m<v.length;m++){var b=v[m];if(s[b.index]==null||s[b.index].left===0)if(h===0){var y=void 0;Array.isArray(l)?y=l[b.index-p-f]:y=l[b.dataKey];var E={};typeof y=="object"&&!Array.isArray(y)&&(E=(y==null?void 0:y.styles)||{});var D=Tw(r,b,c,i,n,a,E),C=new Ap(y,D,r);u[b.dataKey]=C,u[b.index]=C,h=C.colSpan-1,s[b.index]={left:C.rowSpan-1,times:h}}else h--,p++;else s[b.index].left--,h=s[b.index].times,f++}return new wp(l,c,r,u)});return o}function S1(r,e){var t={};return r.forEach(function(n){if(n.raw!=null){var i=jw(e,n.raw);i!=null&&(t[n.dataKey]=i)}}),Object.keys(t).length>0?t:null}function jw(r,e){if(r==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(r==="foot"&&typeof e=="object")return e.footer;return null}function Ow(r){return r.map(function(e,t){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:t:i=t,new Aw(i,e,t)})}function Tw(r,e,t,n,i,a,s){var o=ow(n),l;r==="head"?l=i.headStyles:r==="body"?l=i.bodyStyles:r==="foot"&&(l=i.footStyles);var c=na({},o.table,o[r],i.styles,l),f=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},u=r==="body"?f:{},p=r==="body"&&t%2===0?na({},o.alternateRow,i.alternateRowStyles):{},h=aw(a),m=na({},h,c,p,u);return na(m,s)}function Rw(r,e,t){var n;t===void 0&&(t={});var i=vp(r,e),a=new Map,s=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var h=e.columns.find(function(m){return m.dataKey===p||m.index===p});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(e.columns[h.index]),i-=h.wrappedWidth)});for(var c=!0,f=(n=t==null?void 0:t.start)!==null&&n!==void 0?n:0;f<e.columns.length;){if(a.has(f)){f++;continue}var u=e.columns[f].wrappedWidth;if(c||i>=u)c=!1,s.push(f),o.push(e.columns[f]),i-=u;else break;f++}return{colIndexes:s,columns:o,lastIndex:f-1}}function Lw(r,e){for(var t=[],n=0;n<e.columns.length;n++){var i=Rw(r,e,{start:n});i.columns.length&&(t.push(i),n=i.lastIndex)}return t}function Pw(r,e){var t=e.settings,n=t.startY,i=t.margin,a={x:i.left,y:n},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+s;if(t.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(p,h){return p+h.height},0);o+=c}var f=new Wo(r);(t.pageBreak==="always"||t.startY!=null&&o>f.pageSize().height)&&(_p(f),a.y=i.top),e.callWillDrawPageHooks(f,a);var u=na({},a);e.startPageNumber=f.pageNumber(),t.horizontalPageBreak?Mw(f,e,u,a):(f.applyStyles(f.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(p){return aa(f,e,p,a,e.columns)}),f.applyStyles(f.userStyles),e.body.forEach(function(p,h){var m=h===e.body.length-1;hc(f,e,p,m,u,a,e.columns)}),f.applyStyles(f.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(p){return aa(f,e,p,a,e.columns)})),mp(f,e,u,a),e.callEndPageHooks(f,a),e.finalY=a.y,r.lastAutoTable=e,f.applyStyles(f.userStyles)}function Mw(r,e,t,n){var i=Lw(r,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,f){r.applyStyles(r.userStyles),f>0?Ls(r,e,t,n,c.columns,!0):_1(r,e,n,c.columns),Bw(r,e,t,n,c.columns),Mf(r,e,n,c.columns)});else for(var s=-1,o=i[0],l=function(){var c=s;if(o){r.applyStyles(r.userStyles);var f=o.columns;s>=0?Ls(r,e,t,n,f,!0):_1(r,e,n,f),c=C1(r,e,s+1,n,f),Mf(r,e,n,f)}var u=c-s;i.slice(1).forEach(function(p){r.applyStyles(r.userStyles),Ls(r,e,t,n,p.columns,!0),C1(r,e,s+1,n,p.columns,u),Mf(r,e,n,p.columns)}),s=c};s<e.body.length-1;)l()}function _1(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return aa(r,e,a,t,n)})}function Bw(r,e,t,n,i){r.applyStyles(r.userStyles),e.body.forEach(function(a,s){var o=s===e.body.length-1;hc(r,e,a,o,t,n,i)})}function C1(r,e,t,n,i,a){r.applyStyles(r.userStyles),a=a??e.body.length;var s=Math.min(t+a,e.body.length),o=-1;return e.body.slice(t,s).forEach(function(l,c){var f=t+c===e.body.length-1,u=Sp(r,e,f,n);l.canEntireRowFit(u,i)&&(aa(r,e,l,n,i),o=t+c)}),o}function Mf(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return aa(r,e,a,t,n)})}function Fw(r,e,t){var n=t.getLineHeight(r.styles.fontSize),i=r.padding("vertical"),a=Math.floor((e-i)/n);return Math.max(0,a)}function zw(r,e,t,n){var i={};r.spansMultiplePages=!0,r.height=0;for(var a=0,s=0,o=t.columns;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var f=new Ap(c.raw,c.styles,c.section);f=na(f,c),f.text=[];var u=Fw(c,e,n);c.text.length>u&&(f.text=c.text.splice(u,c.text.length));var p=n.scaleFactor(),h=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(p,h),c.contentHeight>=e&&(c.contentHeight=e,f.styles.minCellHeight-=e),c.contentHeight>r.height&&(r.height=c.contentHeight),f.contentHeight=f.getContentHeight(p,h),f.contentHeight>a&&(a=f.contentHeight),i[l.index]=f}}var m=new wp(r.raw,-1,r.section,i,!0);m.height=a;for(var v=0,b=t.columns;v<b.length;v++){var l=b[v],f=m.cells[l.index];f&&(f.height=m.height);var c=r.cells[l.index];c&&(c.height=r.height)}return m}function Uw(r,e,t,n){var i=r.pageSize().height,a=n.settings.margin,s=a.top+a.bottom,o=i-s;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,r),c=l<t;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var f=e.hasRowSpan(n.columns),u=e.getMaxCellHeight(n.columns)>o;return u?(f&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||n.settings.rowPageBreak==="avoid")}function hc(r,e,t,n,i,a,s){var o=Sp(r,e,n,a);if(t.canEntireRowFit(o,s))aa(r,e,t,a,s);else if(Uw(r,t,o,e)){var l=zw(t,o,e,r);aa(r,e,t,a,s),Ls(r,e,i,a,s),hc(r,e,l,n,i,a,s)}else Ls(r,e,i,a,s),hc(r,e,t,n,i,a,s)}function aa(r,e,t,n,i){n.x=e.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],l=t.cells[o.index];if(!l){n.x+=o.width;continue}r.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(r,e.hooks.willDrawCell,l,t,o,n);if(c===!1){n.x+=o.width;continue}Ww(r,l,n);var f=l.getTextPos();hp(l.text,f.x,f.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},r.getDocument()),e.callCellHooks(r,e.hooks.didDrawCell,l,t,o,n),n.x+=o.width}n.y+=t.height}function Ww(r,e,t){var n=e.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=xp(n.lineWidth,n.fillColor);i&&r.rect(e.x,t.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(e.x,t.y,e.width,e.height,"F"),Hw(r,e,t,n.lineWidth))}function Hw(r,e,t,n){var i,a,s,o;n.top&&(i=t.x,a=t.y,s=t.x+e.width,o=t.y,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,a,s,o)),n.bottom&&(i=t.x,a=t.y+e.height,s=t.x+e.width,o=t.y+e.height,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,a,s,o)),n.left&&(i=t.x,a=t.y,s=t.x,o=t.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,a,s,o)),n.right&&(i=t.x+e.width,a=t.y,s=t.x+e.width,o=t.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,a,s,o));function l(c,f,u,p,h){r.getDocument().setLineWidth(c),r.getDocument().line(f,u,p,h,"S")}}function Sp(r,e,t,n){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),r.pageSize().height-n.y-i}function Ls(r,e,t,n,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),r.applyStyles(r.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return aa(r,e,o,n,i)}),e.callEndPageHooks(r,n);var s=e.settings.margin;mp(r,e,t,n),_p(r),e.pageNumber++,n.x=s.left,n.y=s.top,t.y=s.top,e.callWillDrawPageHooks(r,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return aa(r,e,o,n,i)}),r.applyStyles(r.userStyles))}function _p(r){var e=r.pageNumber();r.setPage(e+1);var t=r.pageNumber();return t===e?(r.addPage(),!0):!1}function qw(r){r.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],i=hw(this,n),a=Dw(this,i);return Pw(this,a),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(e,t,n,i){hp(e,t,n,i,this)},r.API.autoTableSetDefaults=function(e){return Wo.setDefaults(e,this),this},r.autoTableSetDefaults=function(e,t){Wo.setDefaults(e,t)},r.API.autoTableHtmlToJson=function(e,t){var n;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Wo(this),a=bp(i,e,window,t,!1),s=a.head,o=a.body,l=((n=s[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var Bf;try{if(typeof window<"u"&&window){var I1=window,E1=I1.jsPDF||((Bf=I1.jspdf)===null||Bf===void 0?void 0:Bf.jsPDF);E1&&qw(E1)}}catch(r){console.error("Could not apply autoTable plugin",r)}const Vw=({showStatsModal:r,setShowStatsModal:e,loanHistory:t})=>{const n=oe.useMemo(()=>{if(!t||t.length===0)return null;const i=A=>A?A.seconds?new Date(A.seconds*1e3):new Date(A):null,a=t.length,s=a,o=0,l=t.flatMap(A=>A.items||[]),c=l.reduce((A,B)=>A+(B.quantity||1),0),f={};l.forEach(A=>{const B=A.name;f[B]=(f[B]||0)+(A.quantity||1)});const u=Object.entries(f).sort(([,A],[,B])=>B-A).slice(0,5).map(([A,B])=>({name:A,count:B})),p={};t.forEach(A=>{const B=A.clientName||"×œ× ×¦×•×™×Ÿ";p[B]=(p[B]||0)+1});const h=Object.entries(p).sort(([,A],[,B])=>B-A).slice(0,5).map(([A,B])=>({name:A,count:B})),m={};t.forEach(A=>{const B=A.volunteerName||"×œ× ×¦×•×™×Ÿ";m[B]=(m[B]||0)+1});const v=Object.entries(m).sort(([,A],[,B])=>B-A).slice(0,5).map(([A,B])=>({name:A,count:B})),b=new Date().getMonth(),y=new Date().getFullYear(),E=t.filter(A=>{const B=i(A.pickupDate);return B?B.getMonth()===b&&B.getFullYear()===y:!1}).length,D=b===0?11:b-1,C=b===0?y-1:y,z=t.filter(A=>{const B=i(A.pickupDate);return B?B.getMonth()===D&&B.getFullYear()===C:!1}).length,k=t.filter(A=>A.pickupDate&&A.returnDate);let W=0;if(k.length>0){const A=k.reduce((B,T)=>{const L=i(T.pickupDate),Y=i(T.returnDate);if(!L||!Y)return B;const X=Math.ceil((Y-L)/(1e3*60*60*24));return B+Math.max(0,X)},0);W=Math.round(A/k.length)}const j=t.filter(A=>A.returnInspection),I=j.reduce((A,B)=>{var T;return(T=B.returnInspection)!=null&&T.itemInspections?A+B.returnInspection.itemInspections.reduce((L,Y)=>L+(Y.quantityReturned||0),0):A},0),P=j.reduce((A,B)=>{var T;return(T=B.returnInspection)!=null&&T.itemInspections?A+B.returnInspection.itemInspections.filter(L=>L.condition==="damaged").reduce((L,Y)=>L+(Y.quantityReturned||0),0):A},0),N=j.reduce((A,B)=>{var T;return(T=B.returnInspection)!=null&&T.itemInspections?A+B.returnInspection.itemInspections.filter(L=>L.condition==="lost").reduce((L,Y)=>L+Math.max(0,(Y.quantityExpected||0)-(Y.quantityReturned||0)),0):A},0),S={};t.forEach(A=>{const B=A.eventType||"×œ× ×¦×•×™×Ÿ";S[B]=(S[B]||0)+1});const O=Object.entries(S).sort(([,A],[,B])=>B-A).slice(0,5).map(([A,B])=>({name:A,count:B}));return{totalLoans:a,activeLoans:o,completedLoans:s,totalItemsLoaned:c,totalItemsReturned:I,damagedItems:P,lostItems:N,mostPopularItems:u,topBorrowers:h,topVolunteers:v,topEventTypes:O,thisMonthLoans:E,lastMonthLoans:z,averageDuration:W,loansWithInspection:j.length}},[t]);return r?n?d.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:d.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[d.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2196F3"},children:"ðŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×©××œ×•×ª"}),d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ“ˆ × ×ª×•× ×™× ×›×œ×œ×™×™×"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[d.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1976d2"},children:n.totalLoans}),d.jsx("div",{children:'×¡×”"×› ×”×©××œ×•×ª'})]}),d.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#388e3c"},children:n.completedLoans}),d.jsx("div",{children:"×”×©××œ×•×ª ×©×”×•×©×œ×ž×•"})]}),d.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f57c00"},children:n.totalItemsLoaned}),d.jsx("div",{children:"×¤×¨×™×˜×™× ×”×•×©××œ×•"})]}),d.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:n.totalItemsReturned}),d.jsx("div",{children:"×¤×¨×™×˜×™× ×”×•×—×–×¨×•"})]})]})]}),d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ“… ×”×©×•×•××” ×—×•×“×©×™×ª"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[d.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:n.thisMonthLoans}),d.jsx("div",{children:"×”×©××œ×•×ª ×”×—×•×“×©"})]}),d.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#666"},children:n.lastMonthLoans}),d.jsx("div",{children:"×”×©××œ×•×ª ×”×—×•×“×© ×©×¢×‘×¨"})]})]}),n.lastMonthLoans>0&&d.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.9rem"},children:n.thisMonthLoans>n.lastMonthLoans?d.jsxs("span",{style:{color:"#388e3c"},children:["â¬†ï¸ ×¢×œ×™×™×” ×©×œ ",((n.thisMonthLoans-n.lastMonthLoans)/n.lastMonthLoans*100).toFixed(1),"%"]}):n.thisMonthLoans<n.lastMonthLoans?d.jsxs("span",{style:{color:"#d32f2f"},children:["â¬‡ï¸ ×™×¨×™×“×” ×©×œ ",((n.lastMonthLoans-n.thisMonthLoans)/n.lastMonthLoans*100).toFixed(1),"%"]}):d.jsx("span",{style:{color:"#666"},children:"âž¡ï¸ ×œ×œ× ×©×™× ×•×™"})})]}),d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ“¦ ×¡×˜×˜×™×¡×˜×™×§×•×ª ×¤×¨×™×˜×™×"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[d.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:n.totalItemsLoaned}),d.jsx("div",{children:'×¡×”"×› ×¤×¨×™×˜×™× ×”×•×©××œ×•'})]}),d.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:n.totalItemsReturned}),d.jsx("div",{children:"×¤×¨×™×˜×™× ×”×•×—×–×¨×•"})]}),n.damagedItems>0&&d.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:n.damagedItems}),d.jsx("div",{children:"×¤×¨×™×˜×™× ×¤×’×•×ž×™×"})]}),n.lostItems>0&&d.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:n.lostItems}),d.jsx("div",{children:"×¤×¨×™×˜×™× ××‘×•×“×™×"})]})]}),n.mostPopularItems.length>0&&d.jsxs("div",{children:[d.jsx("h4",{style:{marginBottom:"0.5rem"},children:"ðŸ† ×”×¤×¨×™×˜×™× ×”×¤×•×¤×•×œ×¨×™×™× ×‘×™×•×ª×¨:"}),n.mostPopularItems.map((i,a)=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#fff3e0":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[d.jsxs("span",{children:[a+1,". ",i.name]}),d.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," ×¤×¢×ž×™×"]})]},a))]})]}),n.topBorrowers.length>0&&d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ‘¥ ×”×œ×§×•×—×•×ª ×”×¤×¢×™×œ×™× ×‘×™×•×ª×¨"}),n.topBorrowers.map((i,a)=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e8f5e8":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[d.jsxs("span",{children:[a+1,". ",i.name]}),d.jsxs("span",{style:{fontWeight:"bold",color:"#388e3c"},children:[i.count," ×”×©××œ×•×ª"]})]},a))]}),n.topVolunteers.length>0&&d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸŒŸ ×”×ž×ª× ×“×‘×•×ª ×”×¤×¢×™×œ×•×ª ×‘×™×•×ª×¨"}),n.topVolunteers.map((i,a)=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e3f2fd":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[d.jsxs("span",{children:[a+1,". ",i.name]}),d.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," ×”×©××œ×•×ª"]})]},a))]}),n.topEventTypes.length>0&&d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸŽ‰ ×¡×•×’×™ ×”××™×¨×•×¢×™× ×”×¤×•×¤×•×œ×¨×™×™×"}),n.topEventTypes.map((i,a)=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#f0fdf4":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[d.jsxs("span",{children:[a+1,". ",i.name]}),d.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[i.count," ×¤×¢×ž×™×"]})]},a))]}),n.averageDuration>0&&d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"â±ï¸ ×ž×©×š ×”×©××œ×” ×ž×ž×•×¦×¢"}),d.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[n.averageDuration," ×™×ž×™×"]}),d.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["(×ž×‘×•×¡×¡ ×¢×œ ",t.filter(i=>i.pickupDate&&i.returnDate).length," ×”×©××œ×•×ª)"]})]})]}),n.loansWithInspection>0&&d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ” ×¡×™×›×•× ×‘×“×™×§×•×ª ×”×—×–×¨×”"}),d.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:n.loansWithInspection}),d.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["×”×©××œ×•×ª ×¢× ×‘×“×™×§×ª ×”×—×–×¨×” ×ž×ª×•×š ",n.totalLoans,' ×¡×”"×›']}),d.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:["(",(n.loansWithInspection/n.totalLoans*100).toFixed(1),"% ×ž×”×©××œ×•×ª × ×‘×“×§×•)"]})]})]}),d.jsx("div",{className:"modal-actions",children:d.jsx("button",{className:"btn btn-blue",onClick:()=>e(!1),children:"âœ”ï¸ ×¡×’×•×¨"})})]})}):d.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:d.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),children:[d.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"ðŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×©××œ×•×ª"}),d.jsx("p",{style:{textAlign:"center"},children:"××™×Ÿ × ×ª×•× ×™× ×–×ž×™× ×™×"}),d.jsx("div",{className:"modal-actions",children:d.jsx("button",{className:"btn btn-gray",onClick:()=>e(!1),children:"×¡×’×•×¨"})})]})}):null},Gw=()=>{var l,c,f,u,p,h;const[r,e]=oe.useState(!1),[t,n]=oe.useState(null),[i,a]=oe.useState(null);oe.useEffect(()=>{s()},[]);const s=async()=>{e(!0),a(null);try{console.log("ðŸ‘¤ Manual: Starting manual email check from history page...");const m=await ch();a(m)}catch(m){console.error("âŒ Manual: Error in email check:",m),a({reminders:{sent:0,alreadySent:0,errors:[],skippedToday:0},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:m.message}],message:"×©×’×™××” ×‘×‘×“×™×§×ª ××™×ž×™×™×œ×™×"})}finally{e(!1),n(new Date)}},o=()=>{s()};return d.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[d.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[d.jsx("h1",{style:{margin:0,fontSize:"1.8rem"},children:"ðŸ¤– ×ž×¢×¨×›×ª ×ª×–×›×•×¨×•×ª ×—×›×ž×”"}),d.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"×ª×–×›×•×¨×•×ª ××•×˜×•×ž×˜×™×•×ª ×’×œ×•×‘×œ×™×•×ª â€¢ ××™×©×•×¨×™ ××™×¡×•×£ ×™×“× ×™×™× â€¢ ×¤×¢×™×œ×” ×ª×ž×™×“ ×‘×¨×§×¢"})]}),d.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[d.jsx("h2",{style:{margin:0,color:"#1f2937"},children:"×¡×˜×˜×•×¡ ×”×ž×¢×¨×›×ª"}),d.jsx("button",{onClick:o,disabled:r,style:{background:r?"#9ca3af":"linear-gradient(45deg, #20b2aa, #48d1cc)",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:r?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"},children:r?"ðŸ”„ ×‘×•×“×§...":"ðŸ” ×‘×“×•×§ ×ª×–×›×•×¨×•×ª ×¢×›×©×™×•"})]}),d.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdfa, #ecfeff)",border:"1px solid #5eead4",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[d.jsx("span",{style:{fontSize:"1.5rem"},children:"ðŸŒ"}),d.jsx("h3",{style:{margin:0,color:"#0f766e"},children:"×‘×“×™×§×” ××•×˜×•×ž×˜×™×ª ×’×œ×•×‘×œ×™×ª"})]}),d.jsx("p",{style:{margin:0,color:"#0f766e",fontSize:"0.9rem"},children:"âœ… ×”×ž×¢×¨×›×ª ×¤×•×¢×œ×ª ××•×˜×•×ž×˜×™×ª ×‘×¨×§×¢ ×‘×›×œ ×“×¤×™ ×”××ª×¨ (8:00-20:00, ×¤×¢× ×‘×™×•×)"}),d.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0f766e",fontSize:"0.8rem",fontStyle:"italic"},children:"ðŸ’¡ ××™×Ÿ ×¦×•×¨×š ×œ×‘×§×¨ ×‘×¢×ž×•×“ ×–×” ×›×“×™ ×œ×©×œ×•×— ×ª×–×›×•×¨×•×ª - ×”×Ÿ × ×©×œ×—×•×ª ××•×˜×•×ž×˜×™×ª!"})]}),t&&d.jsxs("div",{style:{background:"#f3f4f6",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#6b7280"},children:[d.jsx("strong",{children:"×‘×“×™×§×” ××—×¨×•× ×” (×™×“× ×™×ª):"})," ",t.toLocaleString("he-IL")]}),i&&d.jsxs("div",{style:{background:i.totalErrors>0?"#fef2f2":i.weekend?"#f0f9ff":"linear-gradient(135deg, #f0fdfa, #ecfeff)",border:`1px solid ${i.totalErrors>0?"#fecaca":i.weekend?"#7dd3fc":"#5eead4"}`,borderRadius:"8px",padding:"1.5rem"},children:[d.jsx("h3",{style:{margin:"0 0 1rem 0",color:i.totalErrors>0?"#dc2626":i.weekend?"#0369a1":"#0f766e"},children:i.message}),i.weekend&&d.jsxs("div",{style:{background:"#e0f2fe",border:"1px solid #0284c7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[d.jsx("p",{style:{margin:0,color:"#0369a1",fontWeight:"bold"},children:"ðŸ•Šï¸ ×”×ž×¢×¨×›×ª ×œ× ×©×•×œ×—×ª ××™×ž×™×™×œ×™× ×‘×™×ž×™ ×©×™×©×™ ×•×©×‘×ª ×ž×˜×¢×ž×™× ×“×ª×™×™×"}),d.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0369a1",fontSize:"0.9rem"},children:"×ª×–×›×•×¨×•×ª ×©××ž×•×¨×•×ª ×œ×”×™×©×œ×— ×”×™×•× ×™×™×©×œ×—×• ×‘×™×•× ×¨××©×•×Ÿ"})]}),!i.weekend&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdfa, #ecfeff)",padding:"1.5rem",borderRadius:"8px",border:"1px solid #5eead4",marginBottom:"1rem"},children:[d.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#0f766e"},children:"â° ×ª×–×›×•×¨×•×ª ×”×—×–×¨×” (2 ×™×ž×™× ×œ×¤× ×™)"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"1rem",textAlign:"center"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#3b82f6"},children:i.totalFound||0}),d.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"× ×ž×¦××•"})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:((l=i.reminders)==null?void 0:l.sent)||0}),d.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"× ×©×œ×—×•"})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#6b7280"},children:((c=i.reminders)==null?void 0:c.alreadySent)||0}),d.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"×›×‘×¨ × ×©×œ×—×•"})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:((f=i.reminders)==null?void 0:f.skippedToday)||0}),d.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"×“×•×œ×’×• ×”×™×•×"})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:((p=(u=i.reminders)==null?void 0:u.errors)==null?void 0:p.length)||0}),d.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"×©×’×™××•×ª"})]})]})]}),!i.weekend&&i.totalErrors>0&&d.jsxs("div",{style:{background:"white",border:"1px solid #fecaca",borderRadius:"6px",padding:"1rem"},children:[d.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc2626"},children:"×©×’×™××•×ª:"}),(((h=i.reminders)==null?void 0:h.errors)||[]).map((m,v)=>d.jsxs("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",marginBottom:"0.25rem"},children:[d.jsx("strong",{children:"[×ª×–×›×•×¨×ª]"})," ",m.clientName?`${m.clientName} (${m.email})`:"×©×’×™××” ×›×œ×œ×™×ª",": ",m.error]},v))]})]})]}),d.jsxs("div",{style:{background:"#fdf2f8",border:"1px solid #f8b2dd",borderRadius:"12px",padding:"2rem"},children:[d.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#be185d"},children:"ðŸ”§ ××™×š ×”×ž×¢×¨×›×ª ×”×—×›×ž×” ×¢×•×‘×“×ª"}),d.jsxs("ul",{style:{color:"#be185d",paddingRight:"1.5rem"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"ðŸŒ ×‘×“×™×§×” ××•×˜×•×ž×˜×™×ª ×’×œ×•×‘×œ×™×ª:"})," ×”×ž×¢×¨×›×ª ×¤×•×¢×œ×ª ×‘×¨×§×¢ ×‘×›×œ ×“×¤×™ ×”××ª×¨ (8:00-20:00)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"ðŸ“§ ×ª×–×›×•×¨×•×ª ×”×—×–×¨×”:"})," × ×©×œ×—×™× ××•×˜×•×ž×˜×™×ª 2 ×™×ž×™× ×œ×¤× ×™ ×ª××¨×™×š ×”×”×—×–×¨×”"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"ðŸ“¦ ××™×©×•×¨×™ ××™×¡×•×£:"})," × ×©×œ×—×™× ×¨×§ ×™×“× ×™×ª ×¢×œ ×™×“×™ ×œ×—×™×¦×” ×¢×œ ×”×›×¤×ª×•×¨ ×‘×ž×¢×¨×›×ª ×”×–×ž× ×•×ª"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"ðŸ”’ ×ž× ×™×¢×ª ×›×¤×™×œ×•×™×•×ª:"})," ×”×ž×¢×¨×›×ª ×ž×•× ×¢×ª ×©×œ×™×—×ª ××™×ž×™×™×œ×™× ×›×¤×•×œ×™×"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"ðŸ•Šï¸ ×ž×˜×¢×ž×™× ×“×ª×™×™×:"})," ×œ× × ×©×œ×—×™× ××™×ž×™×™×œ×™× ×‘×™×ž×™ ×©×™×©×™ ×•×©×‘×ª"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"ðŸ‘¤ ×‘×“×™×§×” ×™×“× ×™×ª:"})," × ×™×ª×Ÿ ×œ×”×¤×¢×™×œ ×‘×“×™×§×” ×™×“× ×™×ª ×‘×›×œ ×¢×ª ×‘××ž×¦×¢×•×ª ×”×›×¤×ª×•×¨ ×œ×ž×¢×œ×”"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"ðŸ“Š ×ž×¢×§×‘ ×ž×œ×:"})," ×›×œ ×”××™×ž×™×™×œ×™× × ×¨×©×ž×™× ×‘×ž×¡×“ ×”× ×ª×•× ×™× ×œ×ž×¢×§×‘"]})]}),d.jsxs("div",{style:{background:"linear-gradient(135deg, #fdf2f8, #fce7f3)",border:"1px solid #f8b2dd",borderRadius:"8px",padding:"1rem",marginTop:"1rem"},children:[d.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#be185d"},children:"ðŸŽ¯ ×”×ž×¢×¨×›×ª ×”×—×“×©×” - ×¤×•×¢×œ×ª ×‘×›×œ ×ž×§×•×!"}),d.jsxs("p",{style:{margin:0,color:"#be185d",fontSize:"0.9rem"},children:["âœ… ",d.jsx("strong",{children:"××•×˜×•×ž×˜×™×ª ×‘××ž×ª"})," - ×¢×•×‘×“×ª ×‘×›×œ ×“×£ ×‘××ª×¨",d.jsx("br",{}),"âœ… ",d.jsx("strong",{children:"××™×Ÿ ×¦×•×¨×š ×œ×‘×§×¨ ×›××Ÿ"})," - ×ª×–×›×•×¨×•×ª × ×©×œ×—×•×ª ×‘×›×œ ×ž×§×¨×”",d.jsx("br",{}),"âœ… ",d.jsx("strong",{children:"×¤×¢× ×‘×™×•× ×‘×œ×‘×“"})," - ×ž×•× ×¢×ª ×›×¤×™×œ×•×™×•×ª",d.jsx("br",{}),"âœ… ",d.jsx("strong",{children:"×¤×•×¢×œ×ª ×‘×¨×§×¢"})," - ×‘×©×§×˜ ×•×‘×“×™×¡×§×¨×˜×™×•×ª"]})]})]})]})},$w=({item:r,size:e=60})=>{const t=r.imageUrl||(r.images&&r.images.length>0?r.images[0]:null);return t?d.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",overflow:"hidden",flexShrink:0,background:"#f9fafb"},children:d.jsx("img",{src:t,alt:r.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:n=>{n.target.parentNode.innerHTML=`
            <div style="
              width: 100%; 
              height: 100%; 
              display: flex; 
              align-items: center; 
              justify-content: center;
              background: #f9fafb;
            ">
              <svg width="${e*.4}" height="${e*.4}" viewBox="0 0 24 24" fill="#9ca3af">
                <path d="M20 7h-3V6a4 4 0 0 0-4-4h-2a4 4 0 0 0-4 4v1H4a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM9 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1H9V6zm8 15H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v11a1 1 0 0 1-1 1z"/>
              </svg>
            </div>
          `}})}):d.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",flexShrink:0},children:d.jsx(Qn,{size:e*.4,style:{color:"#9ca3af"}})})},Xw=()=>{var C,z;const[r,e]=oe.useState([]),[t,n]=oe.useState([]),[i,a]=oe.useState(null),[s,o]=oe.useState(""),[l,c]=oe.useState(""),[f,u]=oe.useState(""),[p,h]=oe.useState(!0),[m,v]=oe.useState(!1);oe.useEffect(()=>{(async()=>{try{h(!0),console.log("ðŸ” ×ž×—×¤×© ××ª ×›×œ ×”×”×–×ž× ×•×ª...");const W=mi(vt(We,"orders")),I=(await Mt(W)).docs.map(T=>({id:T.id,...T.data()}));console.log("ðŸ“‹ ×›×œ ×”×”×–×ž× ×•×ª:",I),console.log("ðŸ“Š ×¡×˜×˜×•×¡×™×:",I.map(T=>({id:T.id,client:T.clientName,status:T.status}))),console.log("ðŸ” ×ž×—×¤×© ×”×–×ž× ×•×ª ×¡×’×•×¨×•×ª...");const P=mi(vt(We,"orders"),ia("status","==","closed")),S=(await Mt(P)).docs.map(T=>({id:T.id,...T.data()}));console.log("âœ… ×”×–×ž× ×•×ª ×¡×’×•×¨×•×ª:",S),e(S),console.log("ðŸ” ×ž×—×¤×© ×”×–×ž× ×•×ª ×©×”×•×—×–×¨×•...");const O=mi(vt(We,"orders"),ia("status","==","returned")),B=(await Mt(O)).docs.map(T=>({id:T.id,...T.data()}));console.log("ðŸ”„ ×”×–×ž× ×•×ª ×©×”×•×—×–×¨×•:",B)}catch(W){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×–×ž× ×•×ª:",W)}finally{h(!1)}})()},[]);const b=k=>k?(k.seconds?new Date(k.seconds*1e3):new Date(k)).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"}):"",y=k=>k?(k.seconds?new Date(k.seconds*1e3):new Date(k)).toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",E=k=>{var O;if(!((O=k.returnInspection)!=null&&O.itemInspections))return{totalItemsExpected:0,totalItemsReturned:0,totalItemsNotReturned:0,totalDamagedItems:0,totalLostItems:0};const W=k.returnInspection.itemInspections,j=W.reduce((A,B)=>A+(B.quantityExpected||0),0),I=W.reduce((A,B)=>A+(B.quantityReturned||0),0),P=W.reduce((A,B)=>A+Math.max(0,(B.quantityExpected||0)-(B.quantityReturned||0)),0),N=W.filter(A=>A.condition==="damaged").reduce((A,B)=>A+(B.quantityReturned||0),0),S=W.filter(A=>A.condition==="lost").reduce((A,B)=>A+Math.max(0,(B.quantityExpected||0)-(B.quantityReturned||0)),0);return{totalItemsExpected:j,totalItemsReturned:I,totalItemsNotReturned:P,totalDamagedItems:N,totalLostItems:S}};oe.useEffect(()=>{const k=l?new Date(l):null,W=f?new Date(f):null,j=r.filter(I=>{var B,T,L;const P=((B=I.clientName)==null?void 0:B.toLowerCase().includes(s.toLowerCase()))||"",N=((T=I.phone)==null?void 0:T.includes(s))||"",S=P||N,O=(L=I.pickupDate)!=null&&L.seconds?new Date(I.pickupDate.seconds*1e3):new Date(I.pickupDate),A=(!k||O>=k)&&(!W||O<=W);return S&&A});n(j)},[s,l,f,r]);const D=k=>{var P,N;const W=E(k),j=`
      <!DOCTYPE html>
      <html dir="rtl" lang="he">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>×“×•×— ×”×©××œ×” - ${k.clientName}</title>
          <style>
              body { 
                  font-family: Arial, sans-serif; 
                  direction: rtl; 
                  text-align: right;
                  margin: 20px;
                  line-height: 1.6;
                  padding-bottom: 100px;
              }
              .header { 
                  text-align: center; 
                  margin-bottom: 30px;
                  border-bottom: 2px solid #333;
                  padding-bottom: 15px;
              }
              .header h1 {
                  font-size: 24px;
                  color: #2c5aa0;
                  margin: 0 0 5px 0;
              }
              .header h2 {
                  font-size: 20px;
                  color: #333;
                  margin: 0 0 10px 0;
              }
              .info-grid { 
                  display: grid; 
                  grid-template-columns: 1fr 1fr; 
                  gap: 20px; 
                  margin-bottom: 30px;
              }
              .info-item { 
                  margin-bottom: 10px; 
              }
              .label { 
                  font-weight: bold; 
                  color: #333;
              }
              table { 
                  width: 100%; 
                  border-collapse: collapse; 
                  margin-bottom: 30px;
              }
              th, td { 
                  border: 1px solid #ddd; 
                  padding: 8px; 
                  text-align: center;
              }
              th { 
                  background-color: #f5f5f5; 
                  font-weight: bold;
              }
              .summary { 
                  background-color: #f9f9f9; 
                  padding: 20px; 
                  border-radius: 5px;
                  margin-top: 20px;
              }
              .summary h3 {
                  margin-top: 0;
                  color: #2c5aa0;
              }
              
              .download-btn {
                  position: fixed;
                  bottom: 20px;
                  right: 20px;
                  background: linear-gradient(45deg, #20b2aa, #48d1cc);
                  color: white;
                  border: none;
                  padding: 15px 25px;
                  border-radius: 50px;
                  cursor: pointer;
                  font-size: 16px;
                  font-weight: bold;
                  box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
                  transition: all 0.3s ease;
                  z-index: 1000;
                  display: flex;
                  align-items: center;
                  gap: 8px;
              }
              
              .download-btn:hover {
                  transform: translateY(-2px);
                  box-shadow: 0 6px 20px rgba(32, 178, 170, 0.4);
              }
              
              .download-btn:active {
                  transform: translateY(0);
              }
              
              @media print {
                  body { margin: 0; font-size: 14px; }
                  .header { page-break-after: avoid; }
                  .download-btn { display: none !important; }
              }
          </style>
      </head>
      <body>
          <button class="download-btn" onclick="window.print(); return false;">
              ðŸ“¥ ×”×•×¨×“×ª ×“×•×—
          </button>
          
          <div class="header">
              <h1>×’×ž"×— ×©×ž×—×ª ×–×§× ×ª×™</h1>
              <h2>×“×•×— ×”×©××œ×” - ${k.clientName}</h2>
              <p>× ×•×¦×¨ ×‘×ª××¨×™×š: ${new Date().toLocaleDateString("he-IL")}</p>
          </div>
          
          <div class="info-grid">
              <div>
                  <div class="info-item">
                      <span class="label">×ž×ª× ×“×‘×ª:</span> ${k.volunteerName}
                  </div>
                  <div class="info-item">
                      <span class="label">×˜×œ×¤×•×Ÿ:</span> ${k.phone}
                  </div>
                  <div class="info-item">
                      <span class="label">×›×ª×•×‘×ª:</span> ${k.address}
                  </div>
              </div>
              <div>
                  <div class="info-item">
                      <span class="label">×ª××¨×™×š ××™×¡×•×£:</span> ${b(k.pickupDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">×ª××¨×™×š ×”×—×–×¨×”:</span> ${b(k.returnDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">×¡×•×’ ××™×¨×•×¢:</span> ${k.eventType}
                  </div>
              </div>
          </div>

          <h3>×¤×¨×™×˜×™× ×‘×”×–×ž× ×”</h3>
          <table>
              <thead>
                  <tr>
                      <th>#</th>
                      <th>×©× ×¤×¨×™×˜</th>
                      <th>×›×ž×•×ª ×©×”×•×©××œ×”</th>
                      <th>×ª×§×™×Ÿ</th>
                      <th>××‘×“/×œ× ×”×•×—×–×¨</th>
                  </tr>
              </thead>
              <tbody>
                  ${((P=k.items)==null?void 0:P.map((S,O)=>{var ae,Q;const A=(Q=(ae=k.returnInspection)==null?void 0:ae.itemInspections)==null?void 0:Q.find(M=>M.itemId===S.id||M.name===S.name),B=S.quantity,T=(A==null?void 0:A.quantityReturned)||0,L=Math.max(0,B-T);let Y=0,X=L;return A&&T>0&&(A.condition==="good"?Y=T:A.condition==="damaged"?X+=T:Y=T),`
                      <tr>
                          <td>${O+1}</td>
                          <td>${S.name}</td>
                          <td>${B}</td>
                          <td>${Y}</td>
                          <td>${X}</td>
                      </tr>
                    `}).join(""))||'<tr><td colspan="5">××™×Ÿ ×¤×¨×™×˜×™×</td></tr>'}
              </tbody>
          </table>

          ${k.returnInspection?`
          <div class="summary">
              <h3 style="text-align: center;">×¡×™×›×•× ×‘×“×™×§×ª ×”×—×–×¨×”</h3>
              <div style="text-align: center;">
                  <div class="info-item">
                      <span class="label">×¡×”"×› ×¤×¨×™×˜×™× ×©×”×•×©××œ×•:</span> ${W.totalItemsExpected}
                  </div>
                  <div class="info-item">
                      <span class="label">×¡×”"×› ×¤×¨×™×˜×™× ×©×”×•×—×–×¨×•:</span> ${W.totalItemsReturned}
                  </div>
                  <div class="info-item">
                      <span class="label">×¤×¨×™×˜×™× ×©×œ× ×”×•×—×–×¨×•:</span> ${W.totalItemsNotReturned}
                  </div>
              </div>
              
              ${(N=k.returnInspection.summary)!=null&&N.managerNotes?`
              <div class="info-item" style="margin-top: 20px; text-align: center;">
                  <span class="label">×”×¢×¨×•×ª ×ž× ×”×œ:</span><br>
                  ${k.returnInspection.summary.managerNotes}
              </div>
              `:""}
          </div>
          `:""}
      </body>
      </html>
    `,I=window.open("","_blank","width=800,height=900,scrollbars=yes,resizable=yes");I.document.write(j),I.document.close(),I.focus()};return p?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"×˜×•×¢×Ÿ ×”×™×¡×˜×•×¨×™×™×ª ×”×©××œ×•×ª..."})]})}):d.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[d.jsx("style",{children:`
        @media (max-width: 768px) {
          .date-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            background: white !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            text-align: center !important;
            direction: ltr !important;
            width: 100% !important;
            box-sizing: border-box !important;
            cursor: pointer !important;
            letter-spacing: 1px !important;
          }
          
          .date-input::-webkit-calendar-picker-indicator {
            opacity: 0 !important;
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            height: 100% !important;
            cursor: pointer !important;
            background: transparent !important;
          }
          
          .date-input::-webkit-inner-spin-button,
          .date-input::-webkit-outer-spin-button {
            opacity: 0 !important;
            -webkit-appearance: none !important;
            margin: 0 !important;
          }
        }
      `}),d.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"1.5rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[d.jsxs("div",{style:{textAlign:window.innerWidth<768?"center":"right",flex:"1"},children:[d.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",margin:0,marginBottom:"0.5rem"},children:"ðŸ“š ×”×™×¡×˜×•×¨×™×™×ª ×”×©××œ×•×ª"}),d.jsx("p",{style:{fontSize:"0.95rem",opacity:.9,margin:0},children:"×›×œ ×”×”×–×ž× ×•×ª ×©×”×•×©×œ×ž×• ×¢× ×¤×¨×˜×™ ×‘×“×™×§×ª ×”×—×–×¨×”"})]}),d.jsxs("button",{onClick:()=>v(!0),style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",backdropFilter:"blur(10px)",whiteSpace:"nowrap"},onMouseEnter:k=>{k.currentTarget.style.background="rgba(255, 255, 255, 0.3)",k.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:k=>{k.currentTarget.style.background="rgba(255, 255, 255, 0.2)",k.currentTarget.style.transform="translateY(0)"},children:[d.jsx(k2,{size:20}),"ðŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª"]})]}),!i&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem",alignItems:window.innerWidth<768?"stretch":"end"},children:[d.jsxs("div",{style:{flex:window.innerWidth<768?"none":"2"},children:[d.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[d.jsx(Ff,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"×—×™×¤×•×© ×œ×¤×™ ×©× ×œ×§×•×— ××• ×˜×œ×¤×•×Ÿ"]}),d.jsx("input",{type:"text",value:s,onChange:k=>o(k.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"},placeholder:"×”×§×œ×“ ×©× ××• ×˜×œ×¤×•×Ÿ..."})]}),d.jsxs("div",{style:{flex:"1"},children:[d.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[d.jsx(Ti,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"×ž×ª××¨×™×š"]}),d.jsx("input",{type:"date",value:l,onChange:k=>c(k.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]}),d.jsxs("div",{style:{flex:"1"},children:[d.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[d.jsx(Ti,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"×¢×“ ×ª××¨×™×š"]}),d.jsx("input",{type:"date",value:f,onChange:k=>u(k.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]})]}),d.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem",color:"#374151"},children:["× ×ž×¦××• ",t.length," ×”×©××œ×•×ª ×ž×ª×•×š ",r.length,' ×¡×”"×›']})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":window.innerWidth<1024?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:window.innerWidth<768?"1rem":"1.5rem"},children:t.length===0?d.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[d.jsx(Qn,{size:48,style:{color:"#9ca3af",marginBottom:"1rem"}}),d.jsx("h3",{style:{fontSize:"1.25rem",color:"#6b7280",margin:0},children:"×œ× × ×ž×¦××• ×”×©××œ×•×ª"}),d.jsx("p",{style:{color:"#9ca3af",margin:"0.5rem 0 0 0"},children:"× ×¡×” ×œ×©× ×•×ª ××ª ×¤×¨×ž×˜×¨×™ ×”×—×™×¤×•×©"})]}):t.map(k=>{var W;return d.jsxs("div",{onClick:()=>a(k),style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box"},onMouseEnter:j=>{j.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",j.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:j=>{j.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",j.currentTarget.style.transform="translateY(0)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[d.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[d.jsx("h3",{style:{fontSize:window.innerWidth<768?"1rem":"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937",wordBreak:"break-word"},children:k.clientName}),d.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0",display:"flex",alignItems:"center",gap:"0.25rem"},children:[d.jsx(j1,{size:window.innerWidth<768?12:14}),k.volunteerName]})]}),d.jsx("div",{style:{background:"#10b981",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:window.innerWidth<768?"0.6rem":"0.75rem",fontWeight:"bold",whiteSpace:"nowrap"},children:"×”×•×©×œ×"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem",fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(io,{size:window.innerWidth<768?12:14}),d.jsx("span",{style:{wordBreak:"break-all"},children:k.phone})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(so,{size:window.innerWidth<768?12:14}),d.jsxs("span",{style:{fontSize:window.innerWidth<768?"0.7rem":"0.875rem"},children:[b(k.pickupDate)," â† ",b(k.returnDate)]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Qn,{size:window.innerWidth<768?12:14}),(W=k.items)==null?void 0:W.reduce((j,I)=>j+I.quantity,0)," ×¤×¨×™×˜×™×"]})]})]},k.id)})})]}),i&&d.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e5e7eb",flexWrap:"wrap",gap:"1rem"},children:[d.jsxs("div",{children:[d.jsxs("h2",{style:{fontSize:window.innerWidth<768?"1.25rem":"2rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:["×”×©××œ×” - ",i.clientName]}),d.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:["×”×•×©×œ×ž×” ×‘-",y((C=i.returnInspection)==null?void 0:C.completedAt)]})]}),d.jsxs("button",{onClick:()=>a(null),style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:window.innerWidth<768?"0.875rem":"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(j2,{size:16}),"×—×–×¨×” ×œ×¨×©×™×ž×”"]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×œ×§×•×—"}),d.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.clientName})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×ž×ª× ×“×‘×ª"}),d.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.volunteerName})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×˜×œ×¤×•×Ÿ"}),d.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.phone})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×›×ª×•×‘×ª"}),d.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.address})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×ª××¨×™×›×™×"}),d.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:[b(i.pickupDate)," â† ",b(i.returnDate)]})]}),d.jsxs("div",{children:[d.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×¡×•×’ ××™×¨×•×¢"}),d.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.eventType})]})]}),d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#1f2937"},children:"ðŸ“¦ ×¤×¨×™×˜×™× ×•×¡×˜×˜×•×¡ ×”×—×–×¨×”"}),d.jsx("div",{style:{display:"grid",gap:"1rem"},children:(z=i.items)==null?void 0:z.map((k,W)=>{var I,P;const j=(P=(I=i.returnInspection)==null?void 0:I.itemInspections)==null?void 0:P.find(N=>N.itemId===k.id||N.name===k.name);return d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",flexWrap:window.innerWidth<768?"wrap":"nowrap",gap:"0.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:"1",minWidth:"200px"},children:[d.jsx($w,{item:k,size:window.innerWidth<768?50:60}),d.jsxs("div",{children:[d.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:k.name}),d.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["×”×•×©××œ: ",k.quantity," | ×ª×§×™×Ÿ: ",(()=>{const N=(j==null?void 0:j.quantityReturned)||0;return j&&N>0&&j.condition==="good"||j&&N>0&&j.condition!=="damaged"?N:0})()," | ××‘×“/×¤×’×•×: ",(()=>{const N=k.quantity,S=(j==null?void 0:j.quantityReturned)||0;let A=Math.max(0,N-S);return j&&S>0&&j.condition==="damaged"&&(A+=S),A})()]})]})]}),d.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const N=k.quantity,S=(j==null?void 0:j.quantityReturned)||0;let A=Math.max(0,N-S);return j&&S>0&&j.condition==="damaged"&&(A+=S),A===0?d.jsxs(d.Fragment,{children:[d.jsx(Oa,{size:16,style:{color:"#10b981"}}),d.jsx("span",{style:{color:"#10b981",fontWeight:"bold",fontSize:"0.875rem"},children:"×”×›×œ ×ª×§×™×Ÿ"})]}):d.jsxs(d.Fragment,{children:[d.jsx(qs,{size:16,style:{color:"#ef4444"}}),d.jsxs("span",{style:{color:"#ef4444",fontWeight:"bold",fontSize:"0.875rem"},children:[A," ×—×¡×¨/×¤×’×•×"]})]})})()})]},W)})})]}),d.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:d.jsxs("button",{onClick:()=>D(i),style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"1rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",fontSize:"1.2rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",minWidth:window.innerWidth<768?"100%":"250px",justifyContent:"center"},onMouseEnter:k=>{k.currentTarget.style.transform="translateY(-2px)",k.currentTarget.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.4)"},onMouseLeave:k=>{k.currentTarget.style.transform="translateY(0)",k.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:[d.jsx(O2,{size:20}),"ðŸ–¨ï¸ ×”×“×¤×¡ ×“×•×— ×¢×‘×¨×™×ª"]})})]}),d.jsx(Vw,{showStatsModal:m,setShowStatsModal:v,loanHistory:r}),d.jsx(Gw,{})]})},Yw=()=>{const[r,e]=oe.useState(""),t="054-4773388",n=async(s,o)=>{try{await navigator.clipboard.writeText(s),e(o),setTimeout(()=>e(""),2e3)}catch(l){console.error("Failed to copy text: ",l)}},i=()=>{const s=t.replace(/-/g,"");n(s,"bit-app"),setTimeout(()=>{if(confirm(`×”×ž×¡×¤×¨ ×”×•×¢×ª×§! ðŸ“‹

ðŸ“± ×”× ×—×™×•×ª ×œ×ª×¨×•×ž×” ×‘×‘×™×˜:
1. ×¤×ª×— ××ª ××¤×œ×™×§×¦×™×™×ª ×‘×™×˜
2. ×œ×—×¥ ×¢×œ "×”×¢×‘×¨ ×›×¡×£"
3. ×‘×—×¨ "×œ×ž×¡×¤×¨ ×˜×œ×¤×•×Ÿ"
4. ×”×“×‘×§ ××ª ×”×ž×¡×¤×¨ (××• ×”×§×œ×“: `+t+`)
5. ×”×›× ×¡ ×¡×›×•× ×œ×ª×¨×•×ž×”
6. ××©×¨ ××ª ×”×ª×¨×•×ž×” ðŸ’š

×œ×—×¥ "××™×©×•×¨" ×›×“×™ ×œ×¤×ª×•×— ××ª ×‘×™×˜ ×¢×›×©×™×•`))try{window.location.href="bit://"}catch{window.open("https://bit.co.il/","_blank")}},500)},a=()=>{const s=t.replace(/-/g,"");n(s,"paybox-app"),setTimeout(()=>{try{window.location.href="https://payboxapp.page.link/rcKWijyydRQpxEfb9"}catch{window.open("https://payboxapp.page.link/rcKWijyydRQpxEfb9","_blank")}},500)};return d.jsxs("div",{style:{minHeight:"100vh",background:"transparent",padding:"2rem 1rem",direction:"rtl"},children:[d.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",backgroundColor:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[d.jsxs("div",{style:{background:"linear-gradient(135deg, #20b2aa 0%, #48d1cc 100%)",padding:"3rem 2rem",textAlign:"center",color:"white"},children:[d.jsx("div",{style:{fontSize:"4rem"}}),d.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",margin:"0 0 1rem 0",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:'×ª×¨×•×ž×•×ª ×œ×’×ž"×—'}),d.jsx("p",{style:{fontSize:"1.2rem",opacity:"0.95",margin:0,fontWeight:"700"},children:"×¢×–×¨×• ×œ× ×• ×œ×”×ž×©×™×š ×œ×¢×–×•×¨ ×œ×›×"})]}),d.jsxs("div",{style:{padding:"3rem 2rem"},children:[d.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"2rem",borderRadius:"15px",marginBottom:"3rem",border:"2px solid #e9ecef"},children:[d.jsx("h2",{style:{fontSize:"1.5rem",color:"#2c3e50",marginBottom:"1rem",textAlign:"center"},children:'×”×’×ž"×— × ×©×¢×Ÿ ×¢×œ ×ª×¨×•×ž×•×ª ×‘×œ×‘×“'}),d.jsx("p",{style:{fontSize:"1.1rem",lineHeight:"1.6",color:"#495057",textAlign:"center",margin:0},children:'×¢× ×”×—×–×¨×ª ×”×¦×™×•×“ × ×©×ž×— ×œ×ª×¨×•×ž×ª×›× ×¢×œ ×ž× ×ª ×©× ×•×›×œ ×œ×”×ž×©×™×š ×œ×”×—×–×™×§ ×•×œ×—×“×© ××ª ×”×¦×™×•×“ ×‘×’×ž"×— ×œ×˜×•×‘×ª ×›×•×œ× ×•.'})]}),d.jsx("h3",{style:{fontSize:"2rem",textAlign:"center",marginBottom:"2rem",color:"#2c3e50"},children:"ðŸŽ¯ ××¤×©×¨×•×™×•×ª ×œ×ª×¨×•×ž×”"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[d.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #c2185b",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(194, 24, 91, 0.2)"},onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-5px)",s.currentTarget.style.boxShadow="0 8px 25px rgba(194, 24, 91, 0.3)"},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 4px 15px rgba(194, 24, 91, 0.2)"},children:[d.jsx(T2,{size:48,color:"#c2185b",style:{marginBottom:"1rem"}}),d.jsx("h4",{style:{fontSize:"1.3rem",color:"#c2185b",marginBottom:"1rem",fontWeight:"700"},children:"×‘×™×˜ / ×¤×™×™×‘×•×§×¡"}),d.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",marginBottom:"1rem"},children:[d.jsx("p",{style:{fontSize:"1.2rem",fontWeight:"800",color:"#c2185b",margin:"0 0 0.5rem 0"},children:t}),d.jsxs("button",{onClick:()=>n(t,"bit"),style:{background:"#c2185b",border:"2px solid #c2185b",color:"white",padding:"8px 15px",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",margin:"0 auto 10px auto",fontWeight:"600"},children:[r==="bit"?d.jsx(R1,{size:16}):d.jsx(R2,{size:16}),r==="bit"?"×”×•×¢×ª×§!":"×”×¢×ª×§ ×ž×¡×¤×¨"]})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[d.jsx("button",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:s=>s.target.style.transform="scale(1.05)",onMouseLeave:s=>s.target.style.transform="scale(1)",onClick:i,children:"ðŸ¤ ×‘×™×˜"}),d.jsx("button",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:s=>s.target.style.transform="scale(1.05)",onMouseLeave:s=>s.target.style.transform="scale(1)",onClick:a,children:"ðŸ¤ ×¤×™×™×‘×•×§×¡"})]})]}),d.jsxs("div",{style:{backgroundColor:"#fff",border:"2px solid #c2185b",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(194, 24, 91, 0.1)"},onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-5px)",s.currentTarget.style.boxShadow="0 8px 25px rgba(194, 24, 91, 0.2)"},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 4px 15px rgba(194, 24, 91, 0.1)"},children:[d.jsx(L2,{size:48,color:"#c2185b",style:{marginBottom:"1rem"}}),d.jsx("h4",{style:{fontSize:"1.3rem",color:"#c2185b",marginBottom:"1rem",fontWeight:"600"},children:"×ª×¨×•×ž×” ×‘×ž×–×•×ž×Ÿ"}),d.jsx("p",{style:{color:"#7f8c8d",marginBottom:"1.5rem",fontSize:"1rem",fontWeight:"600",lineHeight:"1.4"},children:'×œ×ž×ª× ×“×‘×•×ª ×”×’×ž"×— ×‘×¢×ª ×”×—×–×¨×ª ×”×¦×™×•×“'}),d.jsx("div",{style:{display:"flex",justifyContent:"center"},children:d.jsx("div",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",padding:"12px 24px",borderRadius:"25px",fontSize:"1rem",fontWeight:"600"},children:"ðŸ’° ×‘×¢×ª ×”×—×–×¨×”"})})]})]}),d.jsxs("div",{style:{background:"linear-gradient(135deg, #20b2aa 0%, #48d1cc 100%)",padding:"2.5rem",borderRadius:"20px",textAlign:"center",color:"white",boxShadow:"0 10px 30px rgba(32, 178, 170, 0.3)"},children:[d.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"1rem",fontWeight:"600"},children:"×ª×•×“×” ×ž×¨××©"}),d.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"1rem",opacity:"0.95"},children:"×”×ª×¨×•×ž×” ×©×œ×›× ×¢×•×–×¨×ª ×œ× ×• ×œ×”×ž×©×™×š ×œ×¡×¤×§ ×©×™×¨×•×ª ××™×›×•×ª×™ ×œ×§×”×™×œ×”"}),d.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"ðŸŽ‰ × ×ª×¨××” ×‘×©×ž×—×•×ª!"})]})]})]}),d.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        
        @media (max-width: 768px) {
          h1 {
            font-size: 2rem !important;
          }
          
          h3 {
            font-size: 1.5rem !important;
          }
          
          .donation-cards {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})},Kw=()=>{const r=window.innerWidth<=768,e={maxWidth:r?"100%":"900px",width:"100%",margin:r?"0":"20px auto",padding:r?"10px":"40px",backgroundColor:"#ffffff",borderRadius:r?"0":"8px",boxShadow:r?"none":"0 2px 8px rgba(0, 0, 0, 0.08)",fontFamily:"system-ui, -apple-system, sans-serif",direction:"rtl",lineHeight:r?"1.6":"1.7",boxSizing:"border-box"},t={textAlign:"center",marginBottom:r?"30px":"50px",padding:r?"20px 15px":"30px 20px",backgroundColor:"#fafbfc",borderRadius:"6px",border:"3px solid #718096",boxShadow:r?"0 2px 8px rgba(0, 0, 0, 0.1)":"0 4px 12px rgba(0, 0, 0, 0.12)"},n={fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"600",color:"#1a202c",marginBottom:"8px",lineHeight:"1.2"},i={fontSize:"clamp(14px, 3.5vw, 18px)",color:"#4a5568",fontWeight:"400",margin:"0"},a={marginBottom:r?"25px":"40px",padding:r?"20px 15px":"32px",backgroundColor:"#ffffff",borderRadius:"8px",border:r?"2px solid #a0aec0":"3px solid #a0aec0",boxShadow:r?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 4px 12px rgba(0, 0, 0, 0.12)"},s={fontSize:"clamp(18px, 4vw, 24px)",fontWeight:"600",color:"#2d3748",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},o={display:"flex",alignItems:"flex-start",marginBottom:r?"20px":"24px",padding:r?"15px":"24px",backgroundColor:"#ffffff",borderRadius:"8px",border:r?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:r?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",gap:r?"12px":"20px"},l={backgroundColor:"#4299e1",color:"white",borderRadius:"50%",width:r?"32px":"36px",height:r?"32px":"36px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:r?"14px":"16px",flexShrink:0,minWidth:r?"32px":"36px"},c={flex:1,fontSize:"clamp(14px, 3.5vw, 16px)",color:"#4a5568",lineHeight:"1.5",minWidth:0},f={backgroundColor:"#f7fafc",border:r?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:r?"15px":"24px",marginBottom:r?"15px":"20px",textAlign:"center",boxShadow:r?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},u={backgroundColor:"#f7fafc",border:r?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:r?"15px":"24px",marginBottom:r?"15px":"20px",boxShadow:r?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},p={padding:r?"15px":"20px",backgroundColor:"#ffffff",borderRadius:"8px",border:r?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:r?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",marginBottom:r?"15px":"0"},h={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"15px",width:"100%"},m={display:"flex",flexDirection:"column",gap:"15px",width:"100%"},v={fontSize:"clamp(16px, 4vw, 20px)",marginLeft:"4px"};return d.jsxs("div",{style:e,children:[d.jsxs("div",{style:t,children:[d.jsxs("h1",{style:n,children:[d.jsx("span",{style:v}),"× ×•×”×œ ×”×©××œ×”"]}),d.jsx("p",{style:i,children:'×©×•××œ×™× ×™×§×¨×™× - ×× × ×§×¨××• ×‘×¢×™×•×Ÿ ××ª × ×•×”×œ ×”×’×ž"×—'})]}),d.jsxs("div",{style:{...a,backgroundColor:"#f8fafc",border:r?"1px solid #e2e8f0":"4px solid #2d3748",boxShadow:r?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 6px 16px rgba(45, 55, 72, 0.15)"},children:[d.jsxs("h2",{style:s,children:[d.jsx("span",{style:v,children:"ðŸ”„"}),"×”×ª×”×œ×™×š ×”×ž×œ× - ××™×š ×–×” ×¢×•×‘×“?"]}),d.jsxs("div",{style:o,children:[d.jsx("div",{style:l,children:"1"}),d.jsxs("div",{style:c,children:[d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"×”×–×ž× ×” ×•×¨×™×©×•× ×‘×œ×•×—:"}),d.jsx("br",{}),'×ž×ª×§×©×¨×™×/×ž×’×™×¢×™× ×œ×’×ž"×— ×‘×–×ž× ×™ ×”×¤×ª×™×—×” ×•×ž×©×¨×™×™× ×™× ×ª××¨×™×š ×œ××¨×•×¢. ×¨×•×©×ž×™× ××ª×›× ×‘×™×•×ž×Ÿ ×”×©×ž×—×•×ª ×œ×¤×™ ×¡×“×¨ ×”×¨×™×©×•×.',d.jsx("br",{}),d.jsx("strong",{children:"×”×–×ž× ×ª ×¨×©×™×ž×ª ×¦×™×•×“:"})," ×ž×©×¨×™×™× ×™× ×¢× ×”×ž×ª× ×“×‘×•×ª ×¨×©×™×ž×” ×©×œ ×”×¦×™×•×“ ×”×ž×‘×•×§×© ×•×ž×¡×›×ž×™× ×ž×•×¢×“ ×œ××™×¡×•×£."]})]}),d.jsxs("div",{style:o,children:[d.jsx("div",{style:l,children:"2"}),d.jsxs("div",{style:c,children:[d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"××™×¡×•×£ ×”×¦×™×•×“:"}),d.jsx("br",{}),"×ž×’×™×¢×™× ×œ×§×—×ª ××ª ×”×¦×™×•×“ ×©×”×•×–×ž×Ÿ ×ž×¨××©.",d.jsx("strong",{style:{color:"#2d3748"},children:" ×—×©×•×‘ ×œ×”×™×¦×ž×“ ×œ×¨×©×™×ž×”"})," - ×–×” ×ž×§×œ ×¢×œ ×”×ž×ª× ×“×‘×•×ª ×œ×ª×ª ×©×™×¨×•×ª ×˜×•×‘ ×™×•×ª×¨ ×œ×›×•×œ×."]})]}),d.jsxs("div",{style:o,children:[d.jsx("div",{style:l,children:"3"}),d.jsxs("div",{style:c,children:[d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"×”×—×–×¨×ª ×”×¦×™×•×“:"}),d.jsx("br",{}),"×œ××—×¨ ×”××¨×•×¢ ×ž×—×–×™×¨×™× ××ª ×”×¦×™×•×“. ×”×ž×ª× ×“×‘×•×ª ×™×‘×“×§×• ××ª ×”×¤×¨×™×˜×™× ×”×ž×•×—×–×¨×™× ×•×™×“×¨×™×›×• ××™×š ×œ×”×—×–×™×¨ ××•×ª× ×œ×ž×§×•×ž×."]})]}),d.jsx("div",{style:f,children:d.jsxs("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",margin:0,fontWeight:"500",color:"#2d3748"},children:["ðŸ† ",d.jsx("strong",{children:"×¢×“×™×¤×•×™×•×ª:"})," ×”×”×©××œ×” ×”×™× ×œ×¤×™ ×¡×“×¨ ×”×¨×™×©×•× - ×ž×™ ×©× ×¨×©× ×¨××©×•×Ÿ, ×ž×©××™×œ ×¨××©×•×Ÿ!"]})})]}),d.jsxs("div",{style:a,children:[d.jsxs("h2",{style:s,children:[d.jsx("span",{style:v,children:"ðŸ“"}),"×›×œ×œ×™× ×—×©×•×‘×™× ×œ×–×›×•×¨"]}),d.jsxs("div",{style:r?m:h,children:[d.jsxs("div",{style:p,children:[d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"â° ×–×ž× ×™ ×¤×ª×™×—×”:"}),d.jsx("br",{}),'×”×’×ž"×— ×¤×ª×•×— ×¨×§ ×‘×©×¢×•×ª ×”×ž×¤×•×¨×¡×ž×•×ª. ×”×˜×œ×¤×•×Ÿ ×–×ž×™×Ÿ ×‘×©×¢×•×ª ×”×¤×ª×™×—×”.',d.jsx("br",{}),d.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"×”×ž×ª× ×“×‘×•×ª ×¢×¡×•×§×•×ª ×‘× ×ª×™× ×ª ×©×™×¨×•×ª - ×”×Ÿ ×¢×•× ×•×ª ×›×©×”×Ÿ ×¤× ×•×™×•×ª, ×× × ×”××–×¨×• ×‘×¡×‘×œ× ×•×ª."})]}),d.jsxs("div",{style:p,children:[d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"ðŸ“… ×”×—×–×¨×” ×‘×–×ž×Ÿ:"}),d.jsx("br",{}),"×”×§×¤×™×“×• ×œ×”×—×–×™×¨ ××ª ×”×¦×™×•×“ ×‘×™×•× ×©× ×§×‘×¢ ×ž×¨××©."]}),d.jsxs("div",{style:p,children:[d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"ðŸ“¸ ×”×ž×œ×¦×”:"}),d.jsx("br",{}),"×¦×œ×ž×• ××ª ×”×¤×¨×™×˜×™× ×©×œ×§×—×ª× ×–×” ×™×§×œ ×¢×œ×™×›× ×‘×©×¢×ª ×”×”×—×–×¨×”.",d.jsx("br",{}),d.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"×”×—×¤×¦×™× ×™×§×¨×™× ×•×ž××•×“ ×¢×“×™× ×™× - ×× × ×©×™×ž×¨×• ×¢×œ×™×”× ×›×©×œ×›×."})]})]})]}),d.jsxs("div",{style:r?m:h,children:[d.jsxs("div",{style:f,children:[d.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[d.jsx("span",{style:v,children:"ðŸ’"}),"×ª×¨×•×ž×•×ª"]}),d.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:'×”×’×ž"×— ×ž××¤×©×¨ ×”×©××œ×” ×œ×œ× ×ª×©×œ×•×. ×‘×›×“×™ ×©× ×•×›×œ ×œ×”×¨×—×™×‘ ×•×œ×”×¢×©×™×¨ ××•×ª×• × ×©×ž×— ×ž××•×“ ×œ×ª×¨×•×ž×ª×›×.'})]}),d.jsxs("div",{style:u,children:[d.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[d.jsx("span",{style:v,children:"ðŸ”§"}),"×‘×ž×§×¨×” ×©×œ × ×–×§"]}),d.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:"×× × ×’×¨× × ×–×§ ×‘×˜×¢×•×ª - ×”×¤× ×• ××ª ×ª×©×•×ž×ª ×œ×‘× ×• ×¢×œ ×ž× ×ª ×œ×”×¢×¨×™×š ××ª ×¢×œ×•×ª×•."})]})]}),d.jsxs("div",{style:a,children:[d.jsxs("h2",{style:s,children:[d.jsx("span",{style:v,children:"ðŸ§½"}),"×”×•×¨××•×ª × ×™×§×•×™ ×•×”×—×–×¨×”"]}),d.jsxs("div",{style:r?m:h,children:[d.jsxs("div",{style:{...p,textAlign:"center",padding:"20px 15px"},children:[d.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"ðŸ§º"}),d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"×ž×¤×•×ª"}),d.jsx("br",{}),d.jsxs("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:["×™×© ×œ×”×—×–×™×¨ × ×§×™×•×ª, ×™×‘×©×•×ª ×•×ž×§×•×¤×œ×•×ª",d.jsx("br",{}),"(×ž×¡×™×¨ ×›×ª×ž×™× ×œ×¤× ×™ ×›×‘×™×¡×”)",d.jsx("br",{}),d.jsx("em",{children:"(×œ×”×§×¤×™×“ ×¢×œ ×”×¡×¨×ª ×›×ª×ž×™×)"})]})]}),d.jsxs("div",{style:{...p,textAlign:"center",padding:"20px 15px"},children:[d.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"ðŸ•¯ï¸"}),d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"×ž×¢×ž×“×™ × ×¨×•×ª"}),d.jsx("br",{}),d.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"× ×§×™×™× ×ž×©×¢×•×•×”"})]}),d.jsxs("div",{style:{...p,textAlign:"center",padding:"20px 15px"},children:[d.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"â˜•"}),d.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"×¢×¨×›×ª ×§×¤×” ×•×ž×’×©×™×"}),d.jsx("br",{}),d.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"×—×•×‘×” ×œ×©×˜×•×£ ×•×œ× ×’×‘"})]})]})]}),d.jsxs("div",{style:{...f,marginTop:r?"30px":"40px"},children:[d.jsx("h3",{style:{color:"#2d3748",fontSize:"clamp(18px, 4vw, 20px)",marginBottom:"8px",fontWeight:"600"},children:"×©×¤×¢ ×‘×¨×›×•×ª ×•×©×ž×—×”"}),d.jsx("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",fontStyle:"italic",margin:0,color:"#4a5568"},children:"×ª×•×“×” ×¢×œ ×©×™×ª×•×£ ×”×¤×¢×•×œ×” ×•×¢×œ ×©×ž×™×¨×ª ×”×›×œ×œ×™×"})]})]})},Zw=()=>{const{user:r}=En(),e=gd(),[t,n]=oe.useState([]),[i,a]=oe.useState(!1),[s,o]=oe.useState(!1),[l,c]=oe.useState(!1),[f,u]=oe.useState(!1);oe.useEffect(()=>{const y=()=>{c(window.innerWidth<=768)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),oe.useEffect(()=>{if(!(r!=null&&r.uid))return;const y=`conflicts_dismissed_${r.uid}`,E=localStorage.getItem(y);E&&((Date.now()-parseInt(E))/6e4<15?u(!0):(localStorage.removeItem(y),u(!1)))},[r==null?void 0:r.uid]);const p=r&&(r.role==="MainAdmin"||r.role==="GmachAdmin");oe.useEffect(()=>{if(!p){n([]),a(!1);return}console.log("ðŸ”” ×ž×ª×—×™×œ ×ž×¢×§×‘ ×‘×–×ž×Ÿ ××ž×ª ××—×¨×™ ×‘×¢×™×•×ª ×–×ž×™× ×•×ª...");const y=Vs(vt(We,"orders"),E=>{const D=[];E.docs.forEach(C=>{const z=C.data();z.status==="open"&&z.availabilityStatus==="CONFLICT"&&z.availabilityConflicts&&z.availabilityConflicts.length>0&&D.push({id:C.id,clientName:z.clientName,phone:z.phone,pickupDate:z.pickupDate,returnDate:z.returnDate,conflicts:z.availabilityConflicts})}),console.log(`ðŸ”” ×¢×“×›×•×Ÿ ×‘×–×ž×Ÿ ××ž×ª: × ×ž×¦××• ${D.length} ×”×–×ž× ×•×ª ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª`),n(D),a(D.length>0),D.length>0&&(o(!1),u(!1))},E=>{console.error("âŒ ×©×’×™××” ×‘×ž×¢×§×‘ ×‘×–×ž×Ÿ ××ž×ª:",E),h()});return()=>{console.log("ðŸ”” ×ž×¤×¡×™×§ ×ž×¢×§×‘ ×‘×–×ž×Ÿ ××ž×ª"),y()}},[p]);const h=async()=>{try{console.log("ðŸ”„ ×‘×“×™×§×” ×™×“× ×™×ª ×œ×‘×¢×™×•×ª ×–×ž×™× ×•×ª...");const y=await Mt(vt(We,"orders")),E=[];y.docs.forEach(D=>{const C=D.data();C.status==="open"&&C.availabilityStatus==="CONFLICT"&&C.availabilityConflicts&&C.availabilityConflicts.length>0&&E.push({id:D.id,clientName:C.clientName,phone:C.phone,pickupDate:C.pickupDate,returnDate:C.returnDate,conflicts:C.availabilityConflicts})}),n(E),a(E.length>0)}catch(y){console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×” ×™×“× ×™×ª:",y)}};if(!p||t.length===0||!i||f)return null;const m=()=>{e("/calendar")},v=()=>{if(r!=null&&r.uid){const y=`conflicts_dismissed_${r.uid}`;localStorage.setItem(y,Date.now().toString()),console.log(`âœ… ×ž×©×ª×ž×© ${r.uid} ×¡×’×¨ ××ª ×”×”×ª×¨××” ×œ-15 ×“×§×•×ª`)}a(!1),u(!0)},b=()=>{o(!s)};return d.jsxs(d.Fragment,{children:[d.jsx("style",{jsx:!0,children:`
        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @keyframes slideIn {
          from { 
            transform: translateX(100%); 
            opacity: 0; 
          }
          to { 
            transform: translateX(0); 
            opacity: 1; 
          }
        }

        @keyframes slideInMobile {
          from { 
            transform: translateY(-100%); 
            opacity: 0; 
          }
          to { 
            transform: translateY(0); 
            opacity: 1; 
          }
        }

        @keyframes pulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        .notification-container {
          position: fixed;
          z-index: 10000;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          direction: rtl;
        }

        /* Desktop positioning */
        .notification-container.desktop {
          bottom: 100px;
          right: 20px;
          animation: slideIn 0.5s ease-out;
        }

        /* Mobile positioning - top center for better visibility */
        .notification-container.mobile {
          top: 70px;
          left: 10px;
          right: 10px;
          animation: slideInMobile 0.5s ease-out;
        }

        .notification-card {
          background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
          border: 2px solid #9333ea;
          border-radius: 16px;
          box-shadow: 0 8px 25px rgba(147, 51, 234, 0.2);
          overflow: hidden;
          transition: all 0.3s ease;
        }

        .notification-card.desktop {
          min-width: 280px;
          max-width: 350px;
          animation: pulse 3s ease-in-out infinite;
        }

        .notification-card.mobile {
          width: 100%;
          max-height: ${s?"60px":"80vh"};
          animation: ${s?"none":"pulse 3s ease-in-out infinite"};
        }

        .notification-header {
          background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
          color: white;
          padding: 12px 16px;
          display: flex;
          align-items: center;
          justify-content: space-between;
          cursor: ${l?"pointer":"default"};
          min-height: 60px;
        }

        .header-content {
          display: flex;
          align-items: center;
          gap: 8px;
          flex: 1;
        }

        .header-controls {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .control-button {
          background: rgba(255, 255, 255, 0.2);
          border: none;
          border-radius: 6px;
          color: white;
          cursor: pointer;
          padding: 8px;
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          min-width: 32px;
          min-height: 32px;
        }

        .control-button:hover {
          background: rgba(255, 255, 255, 0.3);
          transform: scale(1.1);
        }

        .control-button:active {
          transform: scale(0.95);
        }

        .bell-icon {
          animation: bellRing 2s ease-in-out infinite;
        }

        .notification-body {
          background: rgba(248, 250, 252, 0.8);
          transition: all 0.3s ease-out;
          overflow-y: auto;
        }

        .notification-body.desktop {
          padding: 16px;
          max-height: 300px;
        }

        .notification-body.mobile {
          padding: ${s?"0":"16px"};
          max-height: ${s?"0":"60vh"};
          opacity: ${s?"0":"1"};
        }

        .notification-body.minimized {
          padding: 0;
          max-height: 0;
          overflow: hidden;
          opacity: 0;
        }

        .conflict-item {
          background: white;
          border: 1px solid #d1d5db;
          border-radius: 12px;
          padding: 12px;
          margin-bottom: 12px;
          transition: all 0.2s ease;
          border-right: 4px solid #9333ea;
        }

        .conflict-item:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(147, 51, 234, 0.1);
        }

        .conflict-item:last-child {
          margin-bottom: 0;
        }

        .client-name {
          font-weight: 600;
          color: #1f2937;
          margin-bottom: 4px;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .date-info {
          font-size: 0.85rem;
          color: #6b7280;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .conflicts-summary {
          font-size: 0.8rem;
          color: #7c3aed;
          font-weight: 500;
        }

        .action-button {
          background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
          color: white;
          border: none;
          border-radius: 8px;
          padding: 14px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-top: 12px;
          box-shadow: 0 4px 12px rgba(147, 51, 234, 0.3);
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          min-height: 48px;
        }

        .action-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(147, 51, 234, 0.4);
        }

        .action-button:active {
          transform: translateY(0);
        }

        .instructions {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
          border: 1px solid #f59e0b;
          border-radius: 8px;
          padding: 12px;
          margin-top: 12px;
          font-size: 0.8rem;
          color: #92400e;
          line-height: 1.4;
        }

        /* Mobile backdrop */
        .mobile-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.1);
          z-index: 9999;
          opacity: ${s?"0":"1"};
          visibility: ${s?"hidden":"visible"};
          transition: all 0.3s ease;
        }

        /* Override for small screens */
        @media (max-width: 480px) {
          .notification-container.mobile {
            top: 60px;
            left: 5px;
            right: 5px;
          }
          
          .notification-header {
            padding: 10px 12px;
          }
          
          .control-button {
            padding: 6px;
            min-width: 28px;
            min-height: 28px;
          }
        }
      `}),l&&!s&&d.jsx("div",{className:"mobile-backdrop",onClick:b}),d.jsx("div",{className:`notification-container ${l?"mobile":"desktop"}`,children:d.jsxs("div",{className:`notification-card ${l?"mobile":"desktop"}`,children:[d.jsxs("div",{className:"notification-header",onClick:l?b:void 0,children:[d.jsxs("div",{className:"header-content",children:[d.jsx(Da,{size:20,className:"bell-icon"}),d.jsxs("div",{children:[d.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:["ðŸ”” ×™×© ×œ×š ",t.length," ×”×–×ž× ",t.length===1?"×”":"×•×ª"]}),d.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9},children:[t.length===1?"×©×“×•×¨×©×ª":"×©×“×•×¨×©×•×ª"," ×¢×“×›×•×Ÿ ×–×ž×™× ×•×ª"]})]})]}),d.jsxs("div",{className:"header-controls",children:[l&&d.jsx("button",{className:"control-button",onClick:y=>{y.stopPropagation(),b()},title:s?"×”×¨×—×‘":"×ž×–×¢×¨",children:d.jsx(P2,{size:16})}),d.jsx("button",{className:"control-button",onClick:y=>{y.stopPropagation(),v()},title:"×¡×’×•×¨ ×”×ª×¨××” ×œ-15 ×“×§×•×ª",children:d.jsx(oa,{size:16})})]})]}),d.jsxs("div",{className:`notification-body ${l?"mobile":"desktop"} ${s?"minimized":""}`,children:[t.map((y,E)=>d.jsxs("div",{className:"conflict-item",title:"×¤×¨×˜×™ ×”×”×–×ž× ×” ×”×‘×¢×™×™×ª×™×ª",children:[d.jsxs("div",{className:"client-name",children:[d.jsx(M2,{size:14,style:{color:"#9333ea"}}),y.clientName]}),d.jsxs("div",{className:"date-info",children:[d.jsx(Ti,{size:12}),new Date(y.pickupDate).toLocaleDateString("he-IL")," - ",new Date(y.returnDate).toLocaleDateString("he-IL")]}),d.jsxs("div",{className:"conflicts-summary",children:[y.conflicts.length," ×¤×¨×™×˜",y.conflicts.length===1?"":"×™×"," ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª"]})]},y.id)),d.jsxs("div",{className:"instructions",children:["ðŸ’¡ ",d.jsx("strong",{children:"××™×š ×œ×¤×ª×•×¨:"}),' ×¢×‘×•×¨ ×œ×”×©××œ×•×ª ×¤×ª×•×—×•×ª â†’ ×ž×¦× ×™×ž×™× ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª (×ž×¡×•×ž× ×™× ×‘×¡×’×•×œ) â†’ ×œ×—×¥ ×¢×œ ×™×•× â†’ ×œ×—×¥ "×¢×¨×•×š ×”×–×ž× ×”" â†’ ×”×ª×× ×›×ž×•×™×•×ª']}),d.jsxs("button",{className:"action-button",onClick:m,children:[d.jsx(Ti,{size:16}),"×¢×‘×•×¨ ×œ×”×©××œ×•×ª ×¤×ª×•×—×•×ª"]})]})]})})]})},Qw=()=>{const{user:r}=En(),[e,t]=oe.useState([]),[n,i]=oe.useState(!1),[a,s]=oe.useState(null),[o,l]=oe.useState({title:"",message:"",type:"info",isActive:!0,hasExpiration:!1,expirationDate:"",expirationTime:"23:59"}),[c,f]=oe.useState(!1),u=r&&(r.role==="MainAdmin"||r.role==="GmachAdmin");if(oe.useEffect(()=>{if(!u)return;const D=mi(vt(We,"alerts"),L1("createdAt","desc")),C=Vs(D,z=>{const k=z.docs.map(W=>({id:W.id,...W.data()}));t(k)});return()=>C()},[u]),!u)return d.jsx("div",{style:{padding:"2rem",textAlign:"center",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',direction:"rtl"},children:d.jsx("h2",{children:"××™×Ÿ ×”×¨×©××” ×œ×¦×¤×™×™×” ×‘×“×£ ×–×”"})});const p=()=>{l({title:"",message:"",type:"info",isActive:!0,hasExpiration:!1,expirationDate:"",expirationTime:"23:59"}),s(null),i(!1)},h=()=>new Date().toISOString().split("T")[0],m=async D=>{if(D.preventDefault(),!!o.message.trim()){f(!0);try{let C={...o};if(o.hasExpiration&&o.expirationDate){const z=new Date(`${o.expirationDate}T${o.expirationTime}`);C.expirationDate=z}else C.expirationDate=null;delete C.hasExpiration,a?await zr(zt(We,"alerts",a.id),{...C,updatedAt:tr(),updatedBy:r.uid}):await lo(vt(We,"alerts"),{...C,createdAt:tr(),createdBy:r.uid,createdByName:r.displayName||r.email||r.username}),p()}catch(C){console.error("Error saving alert:",C),alert("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×”×ª×¨××”")}finally{f(!1)}}},v=D=>{const C=!!D.expirationDate;let z="",k="23:59";if(C&&D.expirationDate){const W=D.expirationDate.toDate?D.expirationDate.toDate():new Date(D.expirationDate);z=W.toISOString().split("T")[0],k=W.toTimeString().slice(0,5)}l({title:D.title||"",message:D.message||"",type:D.type||"info",isActive:D.isActive,hasExpiration:C,expirationDate:z,expirationTime:k}),s(D),i(!0)},b=async D=>{try{await zr(zt(We,"alerts",D.id),{isActive:!D.isActive,updatedAt:tr(),updatedBy:r.uid})}catch(C){console.error("Error toggling alert:",C),D("×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×”×ª×¨××”")}},y=async D=>{if(window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×”×ª×¨××”?"))try{await Vo(zt(We,"alerts",D))}catch(C){console.error("Error deleting alert:",C),alert("×©×’×™××” ×‘×ž×—×™×§×ª ×”×”×ª×¨××”")}},E=D=>{if(!D.expirationDate)return{status:"none",text:"×œ×œ× ×ª×¤×•×’×”"};const C=new Date,z=D.expirationDate.toDate?D.expirationDate.toDate():new Date(D.expirationDate);if(C>z)return{status:"expired",text:"×¤×’ ×ª×•×§×£"};const k=z-C,W=Math.ceil(k/(1e3*60*60*24));return W<=1?{status:"soon",text:`${Math.ceil(k/36e5)} ×©×¢×•×ª × ×•×ª×¨×•`}:{status:"active",text:`${W} ×™×ž×™× × ×•×ª×¨×™×`}};return d.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif'},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[d.jsx("h1",{style:{margin:0,color:"#1f2937"},children:"× ×™×”×•×œ ×”×ª×¨××•×ª"}),d.jsxs("button",{onClick:()=>i(!0),style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"16px",fontWeight:"500"},children:[d.jsx(T1,{size:20}),"×”×ª×¨××” ×—×“×©×”"]})]}),n&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:d.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",direction:"rtl"},children:[d.jsx("h3",{style:{marginTop:0},children:a?"×¢×¨×™×›×ª ×”×ª×¨××”":"×”×ª×¨××” ×—×“×©×”"}),d.jsxs("form",{onSubmit:m,children:[d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"×›×•×ª×¨×ª (××•×¤×¦×™×•× ×œ×™)"}),d.jsx("input",{type:"text",value:o.title,onChange:D=>l({...o,title:D.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"×›×•×ª×¨×ª ×”×”×ª×¨××”"})]}),d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"×”×•×“×¢×” *"}),d.jsx("textarea",{value:o.message,onChange:D=>l({...o,message:D.target.value}),required:!0,rows:4,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",resize:"vertical",boxSizing:"border-box"},placeholder:"×ª×•×›×Ÿ ×”×”×ª×¨××”"})]}),d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"×¡×•×’ ×”×ª×¨××”"}),d.jsxs("select",{value:o.type,onChange:D=>l({...o,type:D.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},children:[d.jsx("option",{value:"info",children:"×ž×™×“×¢"}),d.jsx("option",{value:"warning",children:"××–×”×¨×”"}),d.jsx("option",{value:"success",children:"×”×¦×œ×—×”"})]})]}),d.jsxs("div",{style:{marginBottom:"1rem"},children:[d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"1rem"},children:[d.jsx("input",{type:"checkbox",checked:o.hasExpiration,onChange:D=>l({...o,hasExpiration:D.target.checked,expirationDate:D.target.checked?o.expirationDate:"",expirationTime:D.target.checked?o.expirationTime:"23:59"})}),d.jsx(Ti,{size:16}),"×”×’×“×¨ ×ª××¨×™×š ×ª×¤×•×’×”"]}),o.hasExpiration&&d.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[d.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"end"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"14px"},children:"×ª××¨×™×š ×ª×¤×•×’×”"}),d.jsx("input",{type:"date",value:o.expirationDate,min:h(),onChange:D=>l({...o,expirationDate:D.target.value}),required:o.hasExpiration,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),d.jsxs("div",{style:{flex:"0 0 100px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"14px"},children:"×©×¢×”"}),d.jsx("input",{type:"time",value:o.expirationTime,onChange:D=>l({...o,expirationTime:D.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]})]}),d.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"12px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx(so,{size:12}),"×”×”×ª×¨××” ×ª×•×¡×¨ ××•×˜×•×ž×˜×™×ª ×‘×ª××¨×™×š ×•×©×¢×” ×–×•"]})]})]}),d.jsx("div",{style:{marginBottom:"2rem"},children:d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("input",{type:"checkbox",checked:o.isActive,onChange:D=>l({...o,isActive:D.target.checked})}),"×”×ª×¨××” ×¤×¢×™×œ×”"]})}),d.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[d.jsxs("button",{type:"button",onClick:p,disabled:c,style:{backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx(oa,{size:16}),"×‘×™×˜×•×œ"]}),d.jsxs("button",{type:"submit",disabled:c||!o.message.trim(),style:{backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:c||!o.message.trim()?.6:1},children:[d.jsx(gc,{size:16}),c?"×©×•×ž×¨...":"×©×ž×•×¨"]})]})]})]})}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?d.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280",backgroundColor:"#f9fafb",borderRadius:"8px"},children:"××™×Ÿ ×”×ª×¨××•×ª ×‘×ž×¢×¨×›×ª"}):e.map(D=>{const C=E(D);return d.jsx("div",{style:{backgroundColor:"white",border:`1px solid ${C.status==="expired"?"#ef4444":"#e5e7eb"}`,borderRadius:"8px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",opacity:C.status==="expired"?.6:1},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px",flexWrap:"wrap"},children:[D.title&&d.jsx("h3",{style:{margin:0,fontSize:"18px"},children:D.title}),d.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:D.type==="warning"?"#fef3c7":D.type==="success"?"#d1fae5":"#dbeafe",color:D.type==="warning"?"#92400e":D.type==="success"?"#065f46":"#1e40af"},children:D.type==="warning"?"××–×”×¨×”":D.type==="success"?"×”×¦×œ×—×”":"×ž×™×“×¢"}),d.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:D.isActive?"#d1fae5":"#f3f4f6",color:D.isActive?"#065f46":"#6b7280"},children:D.isActive?"×¤×¢×™×œ×”":"×œ× ×¤×¢×™×œ×”"}),d.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:C.status==="expired"?"#fee2e2":C.status==="soon"?"#fef3c7":C.status==="active"?"#dbeafe":"#f3f4f6",color:C.status==="expired"?"#dc2626":C.status==="soon"?"#d97706":C.status==="active"?"#2563eb":"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[C.status!=="none"&&d.jsx(so,{size:12}),C.text]})]}),d.jsx("p",{style:{margin:"0 0 12px 0",lineHeight:"1.5"},children:D.message}),d.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["× ×•×¦×¨ ×¢×œ ×™×“×™: ",D.createdByName," â€¢",D.createdAt&&` ${D.createdAt.toDate().toLocaleDateString("he-IL")}`,D.expirationDate&&d.jsxs("span",{children:[" â€¢ ","×™×¤×•×’ ×‘: ",D.expirationDate.toDate().toLocaleDateString("he-IL")," ","×‘×©×¢×” ",D.expirationDate.toDate().toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})]})]})]}),d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("button",{onClick:()=>b(D),style:{backgroundColor:D.isActive?"#f59e0b":"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},title:D.isActive?"×”×©×‘×ª":"×”×¤×¢×œ",children:D.isActive?d.jsx(B2,{size:16}):d.jsx(pc,{size:16})}),d.jsx("button",{onClick:()=>v(D),style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:d.jsx(vd,{size:16})}),d.jsx("button",{onClick:()=>y(D.id),style:{backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:d.jsx(xd,{size:16})})]})]})},D.id)})})]})};function Jw(){oe.useEffect(()=>{const r="dev",e=localStorage.getItem("APP_VERSION");e&&e!==r&&(console.log("ðŸ”„ ×’×¨×¡×” ×—×“×©×” ×–×•×”×ª×” â€” ×ž×¨×¢× ×Ÿ ××ª ×”××ª×¨..."),window.location.reload(!0)),localStorage.setItem("APP_VERSION",r)},[])}const e4=()=>{Jw();const r=oe.useRef(!1),e=oe.useRef(null),t=oe.useRef(null),n=N1();oe.useEffect(()=>{switch(document.body.classList.remove("home-page","about-page","catalog-page","login-page","register-page","donations-page","guidelines-page","new-loan-page","calendar-page","orders-page","history-page","manage-page"),n.pathname){case"/":document.body.classList.add("home-page");break;case"/about":document.body.classList.add("about-page");break;case"/catalog":document.body.classList.add("catalog-page");break;case"/login":document.body.classList.add("login-page");break;case"/register":document.body.classList.add("register-page");break;case"/donations":document.body.classList.add("donations-page");break;case"/borrowing-guidelines":document.body.classList.add("guidelines-page");break;case"/new-loan":document.body.classList.add("new-loan-page");break;case"/calendar":document.body.classList.add("calendar-page");break;case"/my-orders":case"/requests":document.body.classList.add("orders-page");break;case"/history":document.body.classList.add("history-page");break;case"/manage-product":case"/manage-users":document.body.classList.add("manage-page");break;default:document.body.classList.add("other-page");break}return console.log("ðŸŽ¨ ×“×£ × ×•×›×—×™:",n.pathname,"- ×ž×—×œ×§×ª CSS:",document.body.className),()=>{document.body.classList.remove("home-page","about-page","catalog-page","login-page","register-page","donations-page","guidelines-page","new-loan-page","calendar-page","orders-page","history-page","manage-page","other-page")}},[n.pathname]),oe.useEffect(()=>(console.log("ðŸš€ App: Setting up automatic email service..."),i(),()=>{e.current&&(clearInterval(e.current),console.log("ðŸ›‘ App: Stopped automatic email service"))}),[]);const i=()=>{const a=()=>{const l=new Date,c=l.toDateString();if(t.current!==c&&(r.current=!1,t.current=c,console.log("ðŸ”„ App: Reset daily auto-check tracking for",c)),r.current)return console.log("â­ï¸ App: Auto-check already completed today"),!1;const f=l.getHours();return f<8||f>20?(console.log(`â° App: Outside business hours (${f}:00), skipping auto-check`),!1):!0},s=async()=>{if(a())try{console.log("ðŸ¤– App: Performing automatic reminder check...");const l=await ch();l.totalSent>0?(console.log(`âœ… App: ${l.totalSent} reminder emails sent automatically`),typeof window<"u"&&window.Notification&&(Notification.permission==="default"?Notification.requestPermission():Notification.permission==="granted"&&new Notification("×ž×¢×¨×›×ª ×”×ª×–×›×•×¨×•×ª",{body:`${l.totalSent} ×ª×–×›×•×¨×•×ª × ×©×œ×—×• ××•×˜×•×ž×˜×™×ª`,icon:"/favicon.ico",tag:"email-reminder"}))):console.log("ðŸ“­ App: No reminder emails to send today"),r.current=!0}catch(l){console.error("âŒ App: Error in automatic email check:",l)}},o=setTimeout(()=>{console.log("ðŸŽ¯ App: Starting initial automatic email check..."),s()},6e4);return e.current=setInterval(()=>{console.log("ðŸ”„ App: Periodic automatic email check..."),s()},3*60*60*1e3),()=>{o&&clearTimeout(o)}};return d.jsxs(B1,{children:[d.jsx(eg,{}),d.jsxs(F2,{children:[d.jsx(sn,{path:"/alerts",element:d.jsx(Qw,{})}),d.jsx(sn,{path:"/",element:d.jsx(xg,{})}),d.jsx(sn,{path:"/about",element:d.jsx(vg,{})}),d.jsx(sn,{path:"/login",element:d.jsx(yg,{})}),d.jsx(sn,{path:"/register",element:d.jsx(bg,{})}),d.jsx(sn,{path:"/catalog",element:d.jsx(py,{})}),d.jsx(sn,{path:"/donations",element:d.jsx(Yw,{})}),d.jsx(sn,{path:"/borrowing-guidelines",element:d.jsx(Kw,{})}),d.jsx(sn,{path:"/request",element:d.jsx(gv,{})}),d.jsx(sn,{path:"/my-orders",element:d.jsx(vv,{})}),d.jsx(sn,{path:"/requests",element:d.jsx(mv,{})}),d.jsx(sn,{path:"/new-loan",element:d.jsx(pv,{})}),d.jsx(sn,{path:"/calendar",element:d.jsx(Xv,{})}),d.jsx(sn,{path:"/manage-product",element:d.jsx(fy,{})}),d.jsx(sn,{path:"/manage-users",element:d.jsx(dy,{})}),d.jsx(sn,{path:"/history",element:d.jsx(Xw,{})})]}),d.jsx(Zw,{})]})};z2.createRoot(document.getElementById("root")).render(d.jsx(k1.StrictMode,{children:d.jsx(B1,{children:d.jsx(U2,{children:d.jsx(e4,{})})})}));export{Yt as _};
