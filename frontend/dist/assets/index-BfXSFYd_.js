const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-DAn9WBqe.js","assets/react-1WWAVfGy.js","assets/react-B4RIKRNM.css","assets/firebase-D__xqFPR.js"])))=>i.map(i=>d[i]);
var c2=Object.defineProperty;var d2=(r,e,t)=>e in r?c2(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Gt=(r,e,t)=>d2(r,typeof e!="symbol"?e+"":e,t);import{r as se,j as f,u as mf,a as D1,L as It,P as ao,M as f2,X as xi,C as lo,b as u2,c as h2,N as p2,B as ka,d as g2,e as m2,I as x2,f as Oa,T as xf,g as Go,E as vf,h as $o,R as j1,i as Qn,U as O1,k as T1,l as Ri,m as mc,n as Vs,o as Gs,p as v2,S as xc,q as rc,s as wu,t as y2,v as yf,w as b2,x as R1,y as L1,z as hi,F as w2,A as Au,D as A2,G as S2,H as _2,J as C2,K as Su,O as I2,Q as E2,V as N2,W as k2,Y as D2,Z as j2,_ as O2,$ as T2,a0 as R2,a1 as L2,a2 as P2,a3 as M2,a4 as B2,a5 as F2,a6 as z2,a7 as U2,a8 as W2,a9 as H2,aa as tn,ab as q2,ac as V2}from"./react-1WWAVfGy.js";import{i as G2,g as $2,a as X2,b as Y2,c as K2,o as Z2,d as qo,e as Tt,f as Xo,s as Q2,q as mi,h as P1,j as mt,w as aa,k as Bt,l as J2,m as eg,n as tg,p as bf,r as rg,t as Ta,u as uo,v as tr,x as _r,T as M1}from"./firebase-D__xqFPR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const ng={apiKey:"AIzaSyD2okbjcvN3V4Qpd4deo59qZZNNRBIWX58",authDomain:"gmach-inventory-system.firebaseapp.com",projectId:"gmach-inventory-system",storageBucket:"gmach-inventory-system.appspot.com",messagingSenderId:"687472851540",appId:"1:687472851540:web:f846506cccaaefc1e74bc1",measurementId:"G-ZM8S3K7E2V"},vc=G2(ng);$2(vc);const Fs=X2(vc),Ue=Y2(vc);K2(vc);const B1=se.createContext(),F1=({children:r})=>{const[e,t]=se.useState(null),[n,i]=se.useState(!0);return se.useEffect(()=>{const a=Z2(Fs,async o=>{if(o&&o.emailVerified){const l=await qo(Tt(Ue,"users",o.uid));if(l.exists()){const c=l.data();t({uid:o.uid,email:o.email,username:c.username,role:c.role})}}else t(null)});return(async()=>{const o=await qo(Tt(Ue,"settings","onlineOrdering"));if(o.exists()){const l=o.data();i(l.enabled===!0)}})(),()=>a()},[]),f.jsx(B1.Provider,{value:{user:e,setUser:t,onlineOrderingEnabled:n,setOnlineOrderingEnabled:i},children:r})},An=()=>se.useContext(B1),ig=()=>{const{user:r,setUser:e}=An(),t=mf(),n=D1(),[i,a]=se.useState(!1),[s,o]=se.useState(null),[l,c]=se.useState(null),[d,u]=se.useState(!1);se.useEffect(()=>{const O=Tt(Ue,"settings","onlineOrdering"),L=Xo(O,X=>{X.exists()&&o(X.data().enabled)},X=>{console.error("×©×’×™××” ×‘×§×‘×œ×ª ×¢×“×›×•× ×™× ×‘×–×ž×Ÿ ××ž×ª:",X)});return()=>L()},[]),se.useEffect(()=>{const O=()=>{c(window.innerWidth<=768)};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]);const p=()=>{u(!0)},h=async()=>{try{await Q2(Fs),e(null),u(!1),t("/login")}catch(O){alert("×©×’×™××” ×‘×”×ª× ×ª×§×•×ª: "+O.message)}},m=()=>{u(!1)},v=()=>{a(!1)},b=O=>{switch(O){case"MainAdmin":return"×ž× ×”×œ ×¨××©×™";case"GmachAdmin":return"×ž× ×”×œ ×’×ž×—";default:return"×ž×©×ª×ž×©"}},y=O=>n.pathname===O,I=O=>({...R,backgroundColor:y(O)?"#0056b3":"transparent",color:y(O)?"white":"#0056b3",borderRadius:y(O)?"6px":"0",fontWeight:y(O)?"600":"500",transition:"all 0.3s ease"}),N=()=>!r||r.role==="User",_=()=>!r||r.role==="User";if(l===null)return null;const F={backgroundColor:"white",padding:"10px 0",direction:"rtl",borderBottom:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",zIndex:1e3,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},R={padding:"12px 16px",textDecoration:"none",color:"#0056b3",fontWeight:"500",fontSize:"16px",display:"block"},U={position:"absolute",top:"10px",left:l?"20px":"auto",right:l?"auto":"20px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold",color:"#333"},j={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},E={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},B={position:"fixed",top:0,right:i?0:"-70%",height:"100%",width:"70%",backgroundColor:"#ffffff",background:"#ffffff",backgroundImage:"none",boxShadow:"0 0 12px rgba(0,0,0,0.25)",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",transition:"right 0.3s ease",zIndex:1e3},k={display:"flex",justifyContent:"center",gap:"10px",padding:"10px 0"},S={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},D={backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",textAlign:"center",maxWidth:"300px",width:"90%"},w={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"},M={backgroundColor:"#6c757d",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"};return f.jsxs(f.Fragment,{children:[f.jsx("style",{children:`
          .mobile-sidebar-force-white {
            background: white !important;
            background-color: white !important;
            background-image: none !important;
            backdrop-filter: none !important;
          }
        `}),f.jsxs("div",{style:F,children:[l&&f.jsx("button",{onClick:()=>a(!0),style:{fontSize:"24px",background:"none",border:"none",cursor:"pointer",padding:"0 1rem"},children:"â˜°"}),!l&&f.jsxs("div",{style:k,children:[f.jsx(It,{to:"/",style:I("/"),children:"×“×£ ×”×‘×™×ª"}),_()&&f.jsx(It,{to:"/about",style:I("/about"),children:"××•×“×•×ª"}),f.jsx(It,{to:"/catalog",style:I("/catalog"),children:"×§×˜×œ×•×’ ×ž×•×¦×¨×™×"}),!r&&f.jsx(It,{to:"/borrowing-guidelines",style:I("/borrowing-guidelines"),children:"× ×•×”×œ ×”×©××œ×”"}),(r==null?void 0:r.role)==="User"&&f.jsxs(f.Fragment,{children:[f.jsx(It,{to:"/my-orders",style:I("/my-orders"),children:"×”×”×–×ž× ×•×ª ×©×œ×™"}),s&&f.jsx(It,{to:"/request",style:I("/request"),children:"×‘×§×©×ª ×”×©××œ×”"}),f.jsx(It,{to:"/borrowing-guidelines",style:I("/borrowing-guidelines"),children:"× ×•×”×œ ×”×©××œ×”"})]}),((r==null?void 0:r.role)==="GmachAdmin"||(r==null?void 0:r.role)==="MainAdmin")&&f.jsxs(f.Fragment,{children:[f.jsx(It,{to:"/new-loan",style:I("/new-loan"),children:"×”×–×ž× ×” ×—×“×©×”"}),s&&f.jsx(It,{to:"/requests",style:I("/requests"),children:"×‘×§×©×•×ª ×œ×”×–×ž× ×”"}),f.jsx(It,{to:"/Calendar",style:I("/Calendar"),children:"×”×©××œ×•×ª ×¤×ª×•×—×•×ª"}),f.jsx(It,{to:"/history",style:I("/history"),children:"×”×™×¡×˜×•×¨×™×™×ª ×”×©××œ×•×ª"})]}),(r==null?void 0:r.role)==="MainAdmin"&&f.jsxs(f.Fragment,{children:[f.jsx(It,{to:"/manage-product",style:I("/manage-product"),children:"× ×™×”×•×œ ×ž×•×¦×¨×™×"}),f.jsx(It,{to:"/manage-users",style:I("/manage-users"),children:"× ×™×”×•×œ ×ž×©×ª×ž×©×™×"}),f.jsx(It,{to:"/alerts",style:I("/alerts"),children:"× ×™×”×•×œ ×”×ª×¨××•×ª"})]}),((r==null?void 0:r.role)==="GmachAdmin"||(r==null?void 0:r.role)==="MainAdmin")&&f.jsx(It,{to:"/borrowing-guidelines",style:I("/borrowing-guidelines"),children:"× ×•×”×œ ×”×©××œ×”"}),N()&&f.jsx(It,{to:"/donations",style:I("/donations"),children:"×œ×ª×¨×•×ž×•×ª"}),!r&&f.jsxs(f.Fragment,{children:[f.jsx(It,{to:"/login",style:{...I("/login"),marginRight:"20px",backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600"},children:"×”×ª×—×‘×¨×•×ª"}),f.jsx(It,{to:"/register",style:{...I("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600"},children:"×”×¨×©×ž×”"})]}),f.jsx(It,{to:"/gallery",style:{...I("/gallery"),order:999},children:"×’×œ×¨×™×”"})]}),i&&l&&f.jsxs(f.Fragment,{children:[f.jsx("div",{style:E,onClick:v}),f.jsxs("div",{style:B,className:"mobile-sidebar-force-white",children:[f.jsx(It,{to:"/",style:I("/"),onClick:v,children:"×“×£ ×”×‘×™×ª"}),_()&&f.jsx(It,{to:"/about",style:I("/about"),onClick:v,children:"××•×“×•×ª"}),f.jsx(It,{to:"/catalog",style:I("/catalog"),onClick:v,children:"×§×˜×œ×•×’ ×ž×•×¦×¨×™×"}),!r&&f.jsx(It,{to:"/borrowing-guidelines",style:I("/borrowing-guidelines"),onClick:v,children:"× ×•×”×œ ×”×©××œ×”"}),(r==null?void 0:r.role)==="User"&&f.jsxs(f.Fragment,{children:[f.jsx(It,{to:"/my-orders",style:I("/my-orders"),onClick:v,children:"×”×”×–×ž× ×•×ª ×©×œ×™"}),s&&f.jsx(It,{to:"/request",style:I("/request"),onClick:v,children:"×‘×§×©×ª ×”×©××œ×”"}),f.jsx(It,{to:"/borrowing-guidelines",style:I("/borrowing-guidelines"),onClick:v,children:"× ×•×”×œ ×”×©××œ×”"})]}),((r==null?void 0:r.role)==="GmachAdmin"||(r==null?void 0:r.role)==="MainAdmin")&&f.jsxs(f.Fragment,{children:[f.jsx(It,{to:"/new-loan",style:I("/new-loan"),onClick:v,children:"×”×–×ž× ×” ×—×“×©×”"}),s&&f.jsx(It,{to:"/requests",style:I("/requests"),onClick:v,children:"×‘×§×©×•×ª ×œ×”×–×ž× ×”"}),f.jsx(It,{to:"/Calendar",style:I("/Calendar"),onClick:v,children:"×”×©××œ×•×ª ×¤×ª×•×—×•×ª"}),f.jsx(It,{to:"/history",style:I("/history"),onClick:v,children:"×”×™×¡×˜×•×¨×™×™×ª ×”×©××œ×•×ª"})]}),(r==null?void 0:r.role)==="MainAdmin"&&f.jsxs(f.Fragment,{children:[f.jsx(It,{to:"/manage-product",style:I("/manage-product"),onClick:v,children:"× ×™×”×•×œ ×ž×•×¦×¨×™×"}),f.jsx(It,{to:"/manage-users",style:I("/manage-users"),onClick:v,children:"× ×™×”×•×œ ×ž×©×ª×ž×©×™×"}),f.jsx(It,{to:"/alerts",style:I("/alerts"),onClick:v,children:"× ×™×”×•×œ ×”×ª×¨××•×ª"})]}),((r==null?void 0:r.role)==="GmachAdmin"||(r==null?void 0:r.role)==="MainAdmin")&&f.jsx(It,{to:"/borrowing-guidelines",style:I("/borrowing-guidelines"),onClick:v,children:"× ×•×”×œ ×”×©××œ×”"}),N()&&f.jsx(It,{to:"/donations",style:I("/donations"),onClick:v,children:"×œ×ª×¨×•×ž×•×ª"}),!r&&f.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:[f.jsx(It,{to:"/login",style:{...I("/login"),backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600",textAlign:"center",marginBottom:"10px"},onClick:v,children:"×”×ª×—×‘×¨×•×ª"}),f.jsx(It,{to:"/register",style:{...I("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600",textAlign:"center"},onClick:v,children:"×”×¨×©×ž×”"})]}),f.jsx(It,{to:"/gallery",style:{...I("/gallery"),order:999},onClick:v,children:"×’×œ×¨×™×”"})]})]}),r&&f.jsxs("div",{style:U,children:["×©×œ×•× ",r.username," (",b(r.role),")",f.jsx("button",{style:j,onClick:p,children:"×”×ª× ×ª×§"})]})]}),d&&f.jsx("div",{style:S,children:f.jsxs("div",{style:D,children:[f.jsx("h3",{style:{marginBottom:"15px",color:"#333"},children:"××™×©×•×¨ ×”×ª× ×ª×§×•×ª"}),f.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×ª× ×ª×§?"}),f.jsxs("div",{children:[f.jsx("button",{style:w,onClick:h,children:"×›×Ÿ, ×”×ª× ×ª×§"}),f.jsx("button",{style:M,onClick:m,children:"×‘×™×˜×•×œ"})]})]})})]})},ag="/assets/GmachPic-D1t0vS9u.jpeg",og=()=>{const{user:r}=An(),[e,t]=se.useState(!1),[n,i]=se.useState(!1),[a,s]=se.useState("phone"),[o,l]=se.useState("fade-in"),c=se.useRef(null),d="054-257-5886",u="0542575886",p="054-4473-388",h="0544473388",m="972542575886";if(se.useEffect(()=>{const R=U=>{c.current&&!c.current.contains(U.target)&&e&&I()};return e&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[e]),se.useEffect(()=>{const R=()=>{e&&I()};return window.addEventListener("hoursBubbleOpened",R),window.addEventListener("navigationBubbleOpened",R),()=>{window.removeEventListener("hoursBubbleOpened",R),window.removeEventListener("navigationBubbleOpened",R)}},[e]),r&&r.role!=="User")return null;const v=()=>{window.open(`tel:${u}`,"_self")},b=()=>{window.open(`tel:${h}`,"_self")},y=()=>{const R=encodeURIComponent("×©×œ×•×, ×× ×™ ×ž×¢×•× ×™×™×Ÿ ×œ×§×‘×œ ×ž×™×“×¢ × ×•×¡×£ ×¢×œ ×”×©×™×¨×•×ª"),U=`https://wa.me/${m}?text=${R}`;window.open(U,"_blank")},I=()=>{i(!0),l("fade-out"),setTimeout(()=>{s("phone"),l("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},N=()=>{e?I():(window.dispatchEvent(new CustomEvent("contactBubbleOpened")),t(!0),l("fade-out"),setTimeout(()=>{s("close"),l("fade-in")},150))},_={contactBubble:{position:"fixed",bottom:"160px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},contactBubbleMobile:{position:"fixed",bottom:"160px",right:"20px",left:"auto",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(37, 99, 235, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",fontWeight:"500",fontSize:"14px",overflow:"hidden",position:"relative",minWidth:"56px",minHeight:"56px"},bubbleMainCollapsed:{width:"56px",height:"56px",padding:"0",justifyContent:"center",borderRadius:"50%"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"70px",background:"white",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15)",padding:"16px",minWidth:"260px",border:"1px solid #e5e7eb",animation:"slideUp 0.3s ease"},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s",border:"none",width:"100%",textAlign:"right",background:"none",color:"#374151",fontSize:"14px",marginBottom:"4px"},menuItemPhone:{color:"#2563eb"},menuItemPhone2:{color:"#7c3aed"},menuItemWhatsapp:{color:"#10b981"},menuHeader:{textAlign:"center",marginBottom:"12px",color:"#1f2937",fontWeight:"600",fontSize:"16px"}},F=window.innerWidth<=768;return f.jsxs(f.Fragment,{children:[f.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            }
          }

          .contact-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .contact-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(37, 99, 235, 0.4);
            background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
          }

          .menu-item-hover:hover {
            background-color: #f3f4f6;
          }
        `}),f.jsxs("div",{ref:c,style:F?_.contactBubbleMobile:_.contactBubble,children:[(e||n)&&f.jsxs("div",{style:{..._.expandedMenu,...n?_.expandedMenuClosing:{}},dir:"rtl",children:[f.jsx("div",{style:_.menuHeader,children:"×¦×•×¨ ×§×©×¨"}),f.jsxs("button",{onClick:v,style:{..._.menuItem,..._.menuItemPhone},className:"menu-item-hover",children:[f.jsx(ao,{size:20}),f.jsxs("div",{children:[f.jsx("div",{style:{fontWeight:"500"},children:"×œ×ª×™××•× ×•×”×’×¢×”"}),f.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:d})]})]}),f.jsxs("button",{onClick:b,style:{..._.menuItem,..._.menuItemPhone2},className:"menu-item-hover",children:[f.jsx(ao,{size:20}),f.jsxs("div",{children:[f.jsx("div",{style:{fontWeight:"500"},children:'×œ×ž× ×”×œ×ª ×”×’×ž"×—'}),f.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:p})]})]}),f.jsxs("button",{onClick:y,style:{..._.menuItem,..._.menuItemWhatsapp},className:"menu-item-hover",children:[f.jsx(f2,{size:20}),f.jsxs("div",{children:[f.jsx("div",{style:{fontWeight:"500"},children:"WhatsApp"}),f.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"×©×œ×— ×”×•×“×¢×” ×ž×”×™×¨×”"})]})]})]}),f.jsx("button",{onClick:N,style:{..._.bubbleMain,...e?{}:_.bubbleMainCollapsed},className:`contact-bubble-hover ${e?"":"contact-bubble-pulse"}`,"aria-label":"×¦×•×¨ ×§×©×¨",children:f.jsx("div",{style:{..._.bubbleContent,...o==="fade-out"?_.bubbleContentFadeOut:{}},children:a==="close"?f.jsxs(f.Fragment,{children:[f.jsx(xi,{size:20}),f.jsx("span",{children:"×¡×’×•×¨"})," "]}):f.jsx(ao,{size:24})})})]})]})},sg=()=>{const{user:r}=An(),[e,t]=se.useState(!1),[n,i]=se.useState(!1),[a,s]=se.useState("clock"),[o,l]=se.useState("fade-in"),c=se.useRef(null);se.useEffect(()=>{const m=v=>{c.current&&!c.current.contains(v.target)&&e&&d()};return e&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[e]),se.useEffect(()=>{const m=()=>{e&&d()};return window.addEventListener("contactBubbleOpened",m),window.addEventListener("navigationBubbleOpened",m),()=>{window.removeEventListener("contactBubbleOpened",m),window.removeEventListener("navigationBubbleOpened",m)}},[e]);const d=()=>{i(!0),l("fade-out"),setTimeout(()=>{s("clock"),l("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},u=()=>{e?d():(window.dispatchEvent(new CustomEvent("hoursBubbleOpened")),t(!0),l("fade-out"),setTimeout(()=>{s("close"),l("fade-in")},150))};if(r&&r.role!=="User")return null;const p={hoursBubble:{position:"fixed",bottom:"20px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(16, 185, 129, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"16px 24px",fontWeight:"600",fontSize:"16px",overflow:"hidden",position:"relative",whiteSpace:"nowrap",minWidth:"160px"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"130px",background:"white",borderRadius:"16px",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.2)",padding:"24px",minWidth:"320px",border:"3px solid #e5e7eb",color:"#1f2937",textAlign:"center",zIndex:901},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuHeader:{textAlign:"center",marginBottom:"16px",color:"#1f2937",fontWeight:"800",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},hoursContent:{lineHeight:"1.7",textAlign:"center"},hoursSection:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},hoursSectionLast:{marginBottom:"0",paddingBottom:"0",borderBottom:"none"},hoursTitle:{fontWeight:"700",color:"#374151",marginBottom:"6px",fontSize:"16px"},hoursDays:{color:"#6b7280",fontSize:"15px",marginBottom:"4px"},hoursTime:{fontWeight:"700",color:"#059669",fontSize:"16px"},hoursTimeDetail:{fontSize:"15px",marginBottom:"4px"}},h=window.innerWidth<=768;return f.jsxs(f.Fragment,{children:[f.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            }
          }

          .hours-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .hours-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
          }

          .expanded-menu-animation {
            animation: slideUp 0.3s ease;
          }

          @media (max-width: 768px) {
            .hours-bubble-mobile {
              bottom: 20px !important;
              right: 20px !important;
            }
            
            .expanded-menu-hours-mobile {
              width: 300px !important;
              right: 120px !important; /* ×’× ×‘×ž×•×‘×™×™×œ ×™×•×ª×¨ ×©×ž××œ×” */
              bottom: 65px !important;
              padding: 20px !important;
              border-radius: 12px !important;
              min-width: 280px !important;
            }
            
            .bubble-main-hours-mobile {
              padding: 12px 18px !important;
              font-size: 14px !important;
              min-height: 48px !important;
            }
          }
        `}),f.jsxs("div",{ref:c,style:p.hoursBubble,className:h?"hours-bubble-mobile":"",children:[(e||n)&&f.jsxs("div",{style:{...p.expandedMenu,...n?p.expandedMenuClosing:{}},className:`expanded-menu-animation ${h?"expanded-menu-hours-mobile":""}`,dir:"rtl",children:[f.jsx("div",{style:p.menuHeader,children:"ðŸ• ×©×¢×•×ª ×¤×ª×™×—×”"}),f.jsxs("div",{style:p.hoursContent,children:[f.jsxs("div",{style:{...p.hoursSection},children:[f.jsx("div",{style:p.hoursTitle,children:"×™×ž×™× ×¨×’×™×œ×™×"}),f.jsx("div",{style:p.hoursDays,children:"×¨××©×•×Ÿ, ×¨×‘×™×¢×™, ×—×ž×™×©×™"}),f.jsx("div",{style:p.hoursTime,children:"21:00 - 20:30"})]}),f.jsxs("div",{style:{...p.hoursSection,...p.hoursSectionLast},children:[f.jsx("div",{style:p.hoursTitle,children:"×ž×•×¦××™ ×©×‘×ª"}),f.jsxs("div",{style:p.hoursTimeDetail,children:[f.jsx("span",{style:{fontWeight:"700"},children:"×§×™×¥:"}),f.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"21:30 - 21:00"})]}),f.jsxs("div",{style:p.hoursTimeDetail,children:[f.jsx("span",{style:{fontWeight:"700"},children:"×—×•×¨×£:"}),f.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"20:30 - 20:00"})]})]})]})]}),f.jsx("button",{onClick:u,style:p.bubbleMain,className:`hours-bubble-hover ${h?"bubble-main-hours-mobile":""} ${e?"":"hours-bubble-pulse"}`,"aria-label":"×©×¢×•×ª ×¤×ª×™×—×”",children:f.jsx("div",{style:{...p.bubbleContent,...o==="fade-out"?p.bubbleContentFadeOut:{}},children:a==="close"?f.jsxs(f.Fragment,{children:[f.jsx(xi,{size:20}),e&&f.jsx("span",{children:"×¡×’×•×¨"})]}):f.jsxs(f.Fragment,{children:[f.jsx(lo,{size:20}),f.jsx("span",{children:"×©×¢×•×ª ×¤×ª×™×—×”"})]})})})]})]})},lg=()=>{const{user:r}=An(),[e,t]=se.useState(!1),[n,i]=se.useState(!1),[a,s]=se.useState("navigation"),[o,l]=se.useState("fade-in"),c=se.useRef(null);se.useEffect(()=>{const b=y=>{c.current&&!c.current.contains(y.target)&&e&&p()};return e&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[e]),se.useEffect(()=>{const b=()=>{e&&p()};return window.addEventListener("contactBubbleOpened",b),window.addEventListener("hoursBubbleOpened",b),()=>{window.removeEventListener("contactBubbleOpened",b),window.removeEventListener("navigationBubbleOpened",b)}},[e]);const d=()=>{window.open("https://www.google.com/maps/place/31%C2%B047'20.2%22N+34%C2%B047'59.5%22E/@31.7876206,34.8006596,16.5z/data=!4m4!3m3!8m2!3d31.7889462!4d34.79986?hl=en-US&entry=ttu&g_ep=EgoyMDI1MDYzMC4wIKXMDSoASAFQAw%3D%3D","_blank")},u=()=>{window.open("https://waze.com/ul?ll=31.7889462,34.79986","_blank")},p=()=>{i(!0),l("fade-out"),setTimeout(()=>{s("navigation"),l("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},h=()=>{e?p():(window.dispatchEvent(new CustomEvent("navigationBubbleOpened")),t(!0),l("fade-out"),setTimeout(()=>{s("close"),l("fade-in")},150))};if(r&&r.role!=="User")return null;const m={navigationBubble:{position:"fixed",bottom:"90px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(124, 58, 237, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"16px 24px",fontWeight:"600",fontSize:"16px",overflow:"hidden",position:"relative",whiteSpace:"nowrap",minWidth:"120px"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"70px",background:"white",borderRadius:"16px",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.2)",padding:"16px",minWidth:"260px",border:"3px solid #e5e7eb",color:"#1f2937",zIndex:901},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",border:"none",width:"100%",textAlign:"right",background:"none",color:"white",fontSize:"14px",marginBottom:"8px",fontWeight:"600",textDecoration:"none"},menuItemGoogleMaps:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",boxShadow:"0 6px 20px rgba(59, 130, 246, 0.3)"},menuItemWaze:{background:"linear-gradient(135deg, #f59e0b, #d97706)",boxShadow:"0 6px 20px rgba(245, 158, 11, 0.3)"},locationInfo:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",color:"#374151",padding:"12px 16px",borderRadius:"15px",fontSize:"12px",fontWeight:"600",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.6)",textAlign:"center",marginTop:"8px"}},v=window.innerWidth<=768;return f.jsxs(f.Fragment,{children:[f.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            }
          }

          .navigation-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .navigation-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(124, 58, 237, 0.4);
            background: linear-gradient(135deg, #6d28d9 0%, #7c3aed 100%);
          }

          .menu-item-google-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
          }

          .menu-item-waze-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
          }

          .expanded-menu-navigation {
            animation: slideUp 0.3s ease;
          }

          @media (max-width: 768px) {
            .navigation-bubble-mobile {
              bottom: 90px !important;
              right: 20px !important;
            }
            
            .expanded-menu-mobile {
              width: 240px !important;
              right: 70px !important;
              bottom: 65px !important;
              padding: 14px !important;
              border-radius: 12px !important;
              min-width: 240px !important;
            }
            
            .bubble-main-mobile {
              padding: 12px 18px !important;
              font-size: 14px !important;
              min-height: 48px !important;
            }
          }
        `}),f.jsxs("div",{ref:c,style:m.navigationBubble,className:v?"navigation-bubble-mobile":"",children:[(e||n)&&f.jsxs("div",{style:{...m.expandedMenu,...n?m.expandedMenuClosing:{}},className:`expanded-menu-navigation ${v?"expanded-menu-mobile":""}`,dir:"rtl",children:[f.jsxs("button",{onClick:d,style:{...m.menuItem,...m.menuItemGoogleMaps},className:"menu-item-google-hover",children:[f.jsx(u2,{size:20}),f.jsx("span",{children:"ðŸ—ºï¸ Google Maps"})]}),f.jsxs("button",{onClick:u,style:{...m.menuItem,...m.menuItemWaze},className:"menu-item-waze-hover",children:[f.jsx(h2,{size:20}),f.jsx("span",{children:"ðŸš— Waze"})]}),f.jsx("div",{style:m.locationInfo,children:f.jsx("strong",{children:"×§×™×‘×•×¥ ×—×¤×¥ ×—×™×™×"})})]}),f.jsx("button",{onClick:h,style:m.bubbleMain,className:`navigation-bubble-hover ${v?"bubble-main-mobile":""} ${e?"":"navigation-bubble-pulse"}`,"aria-label":"× ×™×•×•×˜",children:f.jsx("div",{style:{...m.bubbleContent,...o==="fade-out"?m.bubbleContentFadeOut:{}},children:a==="close"?f.jsxs(f.Fragment,{children:[f.jsx(xi,{size:20}),e&&f.jsx("span",{children:"×¡×’×•×¨"})]}):f.jsxs(f.Fragment,{children:[f.jsx(p2,{size:20}),f.jsx("span",{children:"× ×™×•×•×˜"})]})})})]})]})},cg=()=>{const[r,e]=se.useState([]),[t,n]=se.useState(new Set),[i,a]=se.useState(!0),[s,o]=se.useState(!1),[l,c]=se.useState(3);se.useEffect(()=>{const _=sessionStorage.getItem("dismissedAlerts");_&&n(new Set(JSON.parse(_)));const F=mi(mt(Ue,"alerts"),P1("createdAt","desc")),R=Xo(F,U=>{const j=[];U.docs.forEach(E=>{const B={id:E.id,...E.data()};if(B.isActive)if(B.expirationDate){const k=new Date,S=B.expirationDate.toDate?B.expirationDate.toDate():new Date(B.expirationDate);k<=S&&j.push(B)}else j.push(B)}),e(j),a(!1)});return()=>R()},[]),se.useEffect(()=>{const _=()=>{const F=window.innerWidth<=768;c(F?2:3)};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const d=_=>{const F=new Set([...t,_]);n(F),sessionStorage.setItem("dismissedAlerts",JSON.stringify([...F]))},u=()=>{n(new Set),sessionStorage.removeItem("dismissedAlerts")},p=_=>{const F={filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.1))",flexShrink:0};switch(_){case"warning":return f.jsx(xf,{size:20,style:{...F,color:"#d97706"}});case"success":return f.jsx(Oa,{size:20,style:{...F,color:"#059669"}});case"info":return f.jsx(x2,{size:20,style:{...F,color:"#2563eb"}});default:return f.jsx(ka,{size:20,style:{...F,color:"#6b7280"}})}},h=(_,F=!1)=>{const R={position:"relative",padding:F?"12px 16px":"16px 20px",marginBottom:"8px",borderRadius:"12px",display:"flex",alignItems:"flex-start",justifyContent:"space-between",direction:"rtl",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:F?"14px":"15px",fontWeight:"500",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid rgba(255,255,255,0.2)",overflow:"hidden",transition:"all 0.2s ease",cursor:"default"},U={warning:{background:"rgba(255, 255, 255, 0.98)",color:"#b45309",borderLeft:"3px solid #f59e0b"},success:{background:"rgba(255, 255, 255, 0.98)",color:"#047857",borderLeft:"3px solid #10b981"},info:{background:"rgba(255, 255, 255, 0.98)",color:"#1d4ed8",borderLeft:"3px solid #3b82f6"},default:{background:"rgba(255, 255, 255, 0.98)",color:"#374151",borderLeft:"3px solid #6b7280"}};return{...R,...U[_]||U.default}},m=_=>{switch(_){case"warning":return"×—×©×•×‘";case"success":return"×¢×“×›×•×Ÿ";case"info":return"×ž×™×“×¢";default:return"×”×•×“×¢×”"}},v=r.filter(_=>!t.has(_.id)),b=r.length-v.length;if(i)return f.jsx("div",{style:{position:"sticky",top:0,zIndex:500,height:"0px",overflow:"hidden"}});if(v.length===0&&b>0)return f.jsx("div",{style:{position:"sticky",top:0,zIndex:500,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"8px 16px",borderBottom:"1px solid rgba(0,0,0,0.08)",textAlign:"center"},children:f.jsxs("button",{onClick:u,style:{background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",border:"1px solid #d1d5db",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontSize:"13px",fontWeight:"500",color:"#374151",display:"flex",alignItems:"center",gap:"6px",margin:"0 auto",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:_=>{_.target.style.background="linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)",_.target.style.transform="translateY(-1px)"},onMouseOut:_=>{_.target.style.background="linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",_.target.style.transform="translateY(0)"},children:[f.jsx(ka,{size:14}),"×”×¦×’ ",b," ×”×•×“×¢",b===1?"×”":"×•×ª"," ×©×”×•×¡×ª×¨",b===1?"×”":"×•"]})});if(v.length===0)return null;const y=s?v.slice(0,l):v,I=v.length>l,N=I||b>0;return f.jsxs(f.Fragment,{children:[f.jsx("style",{jsx:!0,children:`
                .alert-container {
                    opacity: 1;
                    transform: translateY(0);
                }
                
                .alert-banner:hover {
                    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
                }
                
                .dismiss-button:hover {
                    background-color: rgba(0,0,0,0.15) !important;
                }
                
                .collapse-button:hover {
                    background-color: rgba(59, 130, 246, 0.1) !important;
                }
                
                /* Mobile optimizations */
                @media (max-width: 768px) {
                    .alert-banner:hover {
                        box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
                    }
                }
            `}),f.jsxs("div",{style:{position:"sticky",top:0,zIndex:500,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"12px 16px 8px 16px",borderBottom:"1px solid rgba(0,0,0,0.08)",maxHeight:"50vh",overflowY:I&&!s?"auto":"visible"},className:"alert-container",children:[N&&f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",padding:"8px 12px",background:"rgba(59, 130, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[f.jsxs("div",{style:{fontSize:"13px",color:"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[f.jsx(ka,{size:14}),v.length," ×”×•×“×¢×•×ª ×—×“×©×•×ª",b>0&&f.jsxs("span",{style:{fontSize:"11px",color:"#6b7280",fontWeight:"400"},children:["â€¢ ",b," ×ž×•×¡×ª×¨",b===1?"×ª":"×•×ª"]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[b>0&&f.jsxs("button",{onClick:u,style:{background:"none",border:"1px solid rgba(59, 130, 246, 0.2)",color:"#2563eb",cursor:"pointer",padding:"3px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseOver:_=>{_.target.style.backgroundColor="rgba(59, 130, 246, 0.1)"},onMouseOut:_=>{_.target.style.backgroundColor="transparent"},title:`×”×¦×’ ${b} ×”×•×“×¢×•×ª ×©×”×•×¡×ª×¨×•`,children:["×”×¦×’ ×ž×•×¡×ª×¨ (",b,")"]}),I&&f.jsx("button",{onClick:()=>o(!s),style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",fontWeight:"500",transition:"background-color 0.2s ease",whiteSpace:"nowrap"},className:"collapse-button",children:s?f.jsxs(f.Fragment,{children:["×”×¦×’ ×”×›×œ",f.jsx(g2,{size:14})]}):f.jsxs(f.Fragment,{children:["×¦×ž×¦×",f.jsx(m2,{size:14})]})})]})]}),y.map((_,F)=>{const R=I&&F>=l-1;return f.jsxs("div",{style:h(_.type,R),className:"alert-banner",children:[f.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",flex:1,minWidth:0},children:[f.jsx("div",{style:{padding:"4px 6px",backgroundColor:"rgba(0,0,0,0.04)",borderRadius:"6px",marginTop:"1px"},children:p(_.type)}),f.jsxs("div",{style:{flex:1,minWidth:0},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:_.title?"6px":"2px",flexWrap:"wrap"},children:[f.jsx("span",{style:{padding:"2px 8px",backgroundColor:"rgba(0,0,0,0.06)",borderRadius:"10px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px"},children:m(_.type)}),_.title&&f.jsx("h3",{style:{margin:0,fontSize:R?"15px":"16px",fontWeight:"600",lineHeight:"1.2"},children:_.title})]}),f.jsx("div",{style:{fontSize:R?"13px":"14px",lineHeight:"1.4",fontWeight:"500",wordBreak:"break-word",color:"inherit"},children:_.message}),!R&&_.createdAt&&f.jsxs("div",{style:{marginTop:"6px",fontSize:"11px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:[f.jsx(lo,{size:11}),_.createdAt.toDate().toLocaleDateString("he-IL",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),f.jsx("button",{onClick:()=>d(_.id),style:{backgroundColor:"rgba(0,0,0,0.08)",border:"none",borderRadius:"6px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease",marginTop:"1px",flexShrink:0},className:"dismiss-button",title:"×¡×’×•×¨ ×”×•×“×¢×”",children:f.jsx(xi,{size:16,style:{color:"currentColor"}})})]},_.id)}),s&&I&&f.jsxs("div",{style:{textAlign:"center",padding:"8px",fontSize:"12px",color:"#6b7280",backgroundColor:"rgba(0,0,0,0.02)",borderRadius:"6px",marginTop:"4px"},children:["×•×¢×•×“ ",v.length-l," ×”×•×“×¢×•×ª..."]})]})]})},dg="/assets/1-C0fYk9e0.jpg",fg="/assets/2-D1YHjbfq.jpg",ug="/assets/3-9zdlhfJf.jpg",hg="/assets/4-BAjrNR16.jpg",pg="/assets/5-CswG83Xw.jpg",gg="/assets/6-ChleApYI.jpg",mg="/assets/7-C0oDsTci.jpg",xg="/assets/9-BFtDqp3_.jpg",vg="/assets/10-Dw-XIxLk.jpg",yg="/assets/11-CA5zm9C5.jpg",bg="/assets/12-CI7MWke0.jpg",wg=()=>{const{user:r}=An(),e=[dg,fg,ug,hg,pg,gg,mg,xg,vg,yg,bg];return f.jsxs(f.Fragment,{children:[f.jsx(cg,{}),f.jsx("div",{style:{minHeight:"100vh",background:"transparent",width:"100%",overflowX:"hidden"},children:f.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[f.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"0 0.5rem"},className:"fade-in",children:[f.jsx("div",{style:{marginBottom:"1.5rem"},children:f.jsx("img",{src:ag,alt:"×œ×•×’×• ×©×ž×—×ª ×–×§× ×ª×™",style:{margin:"0 auto",height:"clamp(250px, 35vw, 450px)",width:"auto",objectFit:"contain",filter:"drop-shadow(0 15px 35px rgba(0,0,0,0.15))",borderRadius:"20px"}})}),f.jsx("h1",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(28px, 6vw, 52px)",fontWeight:"700",color:"#059669",marginBottom:"1.5rem",textShadow:"0 3px 6px rgba(0,0,0,0.12)",letterSpacing:"0.5px",lineHeight:"1.2",padding:"0 0.5rem"},children:'×’×ž"×— ×œ×¢×™×¦×•×‘ ××¨×•×¢×™×'}),f.jsx("p",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(18px, 3.5vw, 28px)",color:"#374151",maxWidth:"900px",margin:"0 auto",lineHeight:"1.7",fontWeight:"500",padding:"0 1rem"},children:"×ž×¤×•×ª, ××‘×™×–×¨×™× ×œ×§×™×©×•×˜ ×©×•×œ×—× ×•×ª, ×ž×–× ×•× ×™×, ×¤×™× ×•×ª ×¦×™×œ×•× ×•××•×•×™×¨×”"})]}),f.jsx("div",{style:{marginBottom:"4rem",width:"100%",overflowX:"hidden"},className:"slide-in-left",children:f.jsx("div",{style:{position:"relative",width:"100%",margin:"0 auto",padding:"0 0.5rem"},children:f.jsx("div",{style:{position:"relative",overflow:"hidden",borderRadius:"15px",boxShadow:"0 15px 40px rgba(0,0,0,0.12)",background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.8)",height:"clamp(250px, 35vw, 400px)",width:"100%",maskImage:"linear-gradient(to right, transparent 0%, black 8%, black 92%, transparent 100%)"},children:f.jsx("div",{style:{display:"flex",height:"100%",animation:"panoramaSlide 45s linear infinite",gap:"clamp(8px, 2vw, 16px)",willChange:"transform"},children:e.concat(e).map((t,n)=>f.jsx("div",{style:{flexShrink:0,width:"clamp(180px, 18vw, 300px)",height:"100%",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",transition:"transform 0.3s ease"},children:f.jsx("img",{src:t,alt:`×ª×ž×•× ×” ${n%e.length+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},`img-${n}`))})})})}),f.jsx("div",{className:"fade-in",style:{padding:"0 0.5rem",width:"100%",boxSizing:"border-box"},children:f.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85))",backdropFilter:"blur(10px)",borderRadius:"15px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"clamp(1rem, 3vw, 1.5rem)",border:"1px solid rgba(255,255,255,0.6)",width:"100%",maxWidth:"900px",margin:"0 auto",boxSizing:"border-box"},children:f.jsx("iframe",{src:"https://www.google.com/maps?q=31.7889462,34.79986&output=embed",width:"100%",height:"350",style:{borderRadius:"15px",border:"none",width:"100%",display:"block"},allowFullScreen:"",loading:"lazy",title:'×ž×™×§×•× ×’×ž"×—'})})})]})}),f.jsx("style",{children:`
        * {
          box-sizing: border-box;
        }
        
        body {
          overflow-x: hidden;
        }
        
        @keyframes panoramaSlide {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(calc(-${e.length} * (clamp(180px, 18vw, 300px) + clamp(8px, 2vw, 16px))));
          }
        }
        
        /* ×× ×™×ž×¦×™×•×ª ×›× ×™×¡×” ×ž×•×ª××ž×•×ª ×œ×ž×•×‘×™×™×œ */
        .fade-in {
          animation: fadeIn 1s ease-out;
        }
        
        .slide-in-left {
          animation: slideInLeft 1.2s ease-out;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        
        /* ×ž×™×˜×•×‘ ×œ×ž×›×©×™×¨×™× ×§×˜× ×™× */
        @media (max-width: 480px) {
          .panorama-container {
            height: 180px !important;
          }
          
          iframe {
            height: 220px !important;
          }
        }
        
        /* ×ž×™×˜×•×‘ ×œ×ž×›×©×™×¨×™× ×‘×™× ×•× ×™×™× */
        @media (min-width: 481px) and (max-width: 768px) {
          .panorama-container {
            height: 250px !important;
          }
          
          iframe {
            height: 280px !important;
          }
        }
        
        /* ×ž×™×˜×•×‘ ×œ×˜××‘×œ×˜×™× */
        @media (min-width: 769px) and (max-width: 1024px) {
          .panorama-container {
            height: 300px !important;
          }
          
          iframe {
            height: 320px !important;
          }
        }
        
        /* ×”×¡×ª×¨×ª ×’×œ×™×œ×” ××•×¤×§×™×ª */
        html, body {
          overflow-x: hidden;
          max-width: 100vw;
        }
      `}),f.jsx(sg,{}),f.jsx(lg,{}),f.jsx(og,{})]})},Ag=()=>f.jsxs(f.Fragment,{children:[f.jsx(f.Fragment,{}),f.jsx("div",{style:{minHeight:"100vh",background:"transparent",padding:"2rem 0"},children:f.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"0 1rem"},children:[f.jsx("div",{style:{textAlign:"center",marginBottom:"3rem"},className:"fade-in",children:f.jsx("h1",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(28px, 5vw, 42px)",fontWeight:"800",color:"#059669",marginBottom:"1rem",textShadow:"0 2px 4px rgba(0,0,0,0.1)",letterSpacing:"0.5px"},children:'××•×“×•×ª ×’×ž"×— ×©×ž×—×ª ×–×§× ×ª×™'})}),f.jsx("div",{className:"fade-in",style:{marginBottom:"3rem"},children:f.jsx("div",{style:{background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",borderRadius:"20px",boxShadow:"0 15px 40px rgba(0,0,0,0.1)",padding:"clamp(1.5rem, 4vw, 3rem)",border:"1px solid rgba(255,255,255,0.5)",margin:"0 auto"},children:f.jsxs("div",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(16px, 2.2vw, 20px)",lineHeight:"1.8",color:"#374151",textAlign:"justify",direction:"rtl"},children:[f.jsxs("p",{style:{marginBottom:"1.5rem"},children:[f.jsx("strong",{style:{color:"#059669",fontSize:"1.1em"},children:'×’×ž"×— ×©×ž×—×ª ×–×§× ×ª×™ ×”×•× ×’×ž"×— ××¨×•×¢×™× ×”×¤×•×¢×œ ×ž×©× ×ª 2013.'}),'×”×’×ž"×— ×ž×¦×™×¢ ×”×©××œ×ª ×¦×™×•×“ ×œ××™×¨×•×¢×™×, ×›×•×œ×œ ×ž×¤×•×ª ×§×˜×™×¤×” ×‘×ž×’×•×•×Ÿ ×¦×‘×¢×™×, ×¢×™×¦×•×‘×™ ×©×•×œ×—×Ÿ, ×¢×™×¦×•×‘×™× ×œ×ž×–× ×•× ×™× ×•×¢×•×“.']}),f.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×”×•×§× ',f.jsx("strong",{style:{color:"#c2185b"},children:'×œ×¢×™×œ×•×™ × ×©×ž×ª ×¡×‘×” ×•×¡×‘×ª×” ×©×œ ×¢× ×‘×¨, ×™×•×–×ž×ª ×•×ž× ×”×œ×ª ×”×’×ž"×—, ××‘×¨×”× ×•××¡×ª×¨ ×œ×™×‘×Ÿ ×–"×œ'}),", ×ž×ž×§×™×ž×™ ×§×™×‘×•×¥ ×—×¤×¥ ×—×™×™×."]}),f.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×ž×©×¨×ª ××ª ×ª×•×©×‘×™ ×”×ž×•×¢×¦×” ×”××–×•×¨×™×ª × ×—×œ ×©×•×¨×§ ×›×ž×• ×’× ×™×™×©×•×‘×™× ×ž×¨×•×—×§×™× ×™×•×ª×¨ ×›×ž×• ',f.jsx("strong",{children:"××œ×•×ž×”, ××©×“×•×“, × ×™×¦×Ÿ, ×ž×–×›×¨×ª ×‘×ª×™×”, ×™×‘× ×” ×•×¢×•×“"}),"."]}),f.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×–×•×›×” ×œ×ª×ž×™×›×” ×§×‘×•×¢×” ×©×œ ×”× ×”×œ×ª ×§×™×‘×•×¥ ×—×¤×¥ ×—×™×™× ×•×”×ž×•×¢×¦×” ×”××–×•×¨×™×ª × ×—×œ ×©×•×¨×§ ×©×¨×•××™× ×‘×’×ž"×— ',f.jsx("strong",{style:{color:"#059669"},children:"×™×•×–×ž×” ×‘×¨×•×›×” ×©×œ ×—×¡×“ ×•×¢×–×¨×” ×œ×–×•×œ×ª ×•×‘×¢×œ×ª ×—×©×™×‘×•×ª ×§×”×™×œ×ª×™×ª ×ž×¨×•×‘×”"}),"."]}),f.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×ž×•×¤×¢×œ ×¢"×™ ',f.jsx("strong",{children:"×¦×•×•×ª ×ž×ª× ×“×‘×•×ª ×ž×¡×•×¨"}),", ×“×•×¨×© ×ª×—×–×•×§×” ×©×•×˜×¤×ª- × ×™×§×•×™, ×¡×™×“×•×¨, ×¨×›×™×©×ª ×¦×™×•×“ ×•×—×™×“×•×© ×”×ž×œ××™ ×‘××•×¤×Ÿ ×§×‘×•×¢."]}),f.jsxs("p",{style:{marginBottom:"1.5rem"},children:['×”×’×ž"×— ×ž×©×¨×ª ',f.jsx("strong",{style:{color:"#c2185b"},children:"×¢×©×¨×•×ª ××¨×•×¢×™× ×ž×™×“×™ ×—×•×“×©"}),", ×•× ×©×¢×Ÿ ×¢×œ ×ª×¨×•×ž×•×ª ×”×ž×©×ª×ž×©×™× ×‘×œ×‘×“. × ×©×ž×— ×× ×ª×”×™×• ×©×•×ª×¤×™×."]}),f.jsx("p",{style:{marginBottom:"1.5rem"},children:"×¤×¨×˜×™× ×‘×“×£ ×”×ª×¨×•×ž×•×ª."}),f.jsx("div",{style:{textAlign:"center",marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(139, 92, 246, 0.1))",borderRadius:"12px",border:"1px solid rgba(5, 150, 105, 0.2)"},children:f.jsx("p",{style:{fontSize:"clamp(18px, 3vw, 24px)",fontWeight:"700",color:"#059669",textShadow:"0 1px 2px rgba(0,0,0,0.1)",margin:0},children:"ðŸŽ‰ × ×ª×¨××” ×‘×©×ž×—×•×ª! ðŸŽ‰"})})]})})})]})})]}),Sg=()=>{const[r,e]=se.useState(""),[t,n]=se.useState(""),[i,a]=se.useState(""),{setUser:s}=An(),o=mf(),l=async()=>{if(!r||!r.includes("@")){a("×™×© ×œ×”×–×™×Ÿ ××™×ž×™×™×œ ×ª×§×™×Ÿ ×œ×©×—×–×•×¨ ×¡×™×¡×ž×”");return}try{await eg(Fs,r),a("×§×™×©×•×¨ ×œ××™×¤×•×¡ ×¡×™×¡×ž×” × ×©×œ×— ×œ××™×ž×™×™×œ")}catch(u){a("×©×’×™××” ×‘×©×œ×™×—×ª ×§×™×©×•×¨ ×œ××™×¤×•×¡ ×¡×™×¡×ž×”: "+u.message)}},c=async u=>{u.preventDefault(),a("");let p=r;if(!r.includes("@"))try{const h=mi(mt(Ue,"users"),aa("username","==",r)),m=await Bt(h);if(!m.empty)p=m.docs[0].data().email;else{a("×©× ×ž×©×ª×ž×© ×œ× × ×ž×¦×");return}}catch{a("×©×’×™××” ×‘××—×–×•×¨ ××™×ž×™×™×œ ×œ×¤×™ ×©× ×ž×©×ª×ž×©");return}try{const m=(await J2(Fs,p,t)).user;if(!m.emailVerified){a("× × ×œ××ž×ª ××ª ×›×ª×•×‘×ª ×”××™×ž×™×™×œ ×œ×¤× ×™ ×”×”×ª×—×‘×¨×•×ª");return}const v=Tt(Ue,"users",m.uid),b=await qo(v);if(b.exists()){const y=b.data();s({uid:m.uid,email:m.email,username:y.username,role:y.role}),o("/")}else a("×œ× × ×ž×¦××• × ×ª×•× ×™ ×ž×©×ª×ž×© ×‘×ž×¡×“ ×”× ×ª×•× ×™×")}catch(h){switch(h.code){case"auth/invalid-credential":case"auth/wrong-password":a("×¡×™×¡×ž×” ×©×’×•×™×”");break;case"auth/user-not-found":a("×”×ž×©×ª×ž×© ×œ× × ×ž×¦×");break;default:a("×©×’×™××”: "+h.message)}}},d={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",background:"transparent"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return f.jsx("div",{style:d.container,children:f.jsxs("form",{onSubmit:c,style:d.form,children:[f.jsx("h2",{style:d.title,children:"×”×ª×—×‘×¨×•×ª"}),f.jsx("input",{type:"text",placeholder:"×©× ×ž×©×ª×ž×© ××• ××™×ž×™×™×œ",value:r,onChange:u=>e(u.target.value),style:d.input,required:!0}),f.jsx("input",{type:"password",placeholder:"×¡×™×¡×ž×”",value:t,onChange:u=>n(u.target.value),style:d.input,required:!0}),i&&f.jsx("div",{style:d.error,children:i}),f.jsx("button",{type:"submit",style:d.button,children:"×”×ª×—×‘×¨"}),f.jsx("button",{type:"button",onClick:l,style:{marginTop:"0.5rem",backgroundColor:"transparent",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"×©×›×—×ª ×¡×™×¡×ž×”?"})]})})},_g=()=>{const[r,e]=se.useState(""),[t,n]=se.useState(""),[i,a]=se.useState(""),[s,o]=se.useState(""),l=u=>u.length>=8&&/[a-zA-Z]/.test(u),c=async u=>{if(u.preventDefault(),!l(i)){o("×”×¡×™×¡×ž×” ×—×™×™×‘×ª ×œ×”×›×™×œ ×œ×¤×—×•×ª 8 ×ª×•×•×™× ×•×œ×¤×—×•×ª ××•×ª ××—×ª ×‘×× ×’×œ×™×ª A-Z / a-z");return}try{const h=(await tg(Fs,r,i)).user;await bf(Tt(Ue,"users",h.uid),{email:r,username:t,role:"User"}),await rg(h),alert("× ×¨×©×ž×ª ×‘×”×¦×œ×—×”! × ×©×œ×— ××œ×™×š ×ž×™×™×œ ×œ××™×ž×•×ª.")}catch(p){o(p.message)}},d={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",background:"transparent"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return f.jsx("div",{style:d.container,children:f.jsxs("form",{onSubmit:c,style:d.form,children:[f.jsx("h2",{style:d.title,children:"×”×¨×©×ž×”"}),f.jsx("input",{type:"text",placeholder:"×©× ×ž×©×ª×ž×©",value:t,onChange:u=>n(u.target.value),style:d.input,required:!0}),f.jsx("input",{type:"email",placeholder:"××™×ž×™×™×œ",value:r,onChange:u=>e(u.target.value),style:d.input,required:!0}),f.jsx("input",{type:"password",placeholder:"×¡×™×¡×ž×”",value:i,onChange:u=>a(u.target.value),style:d.input,required:!0}),s&&f.jsx("div",{style:d.error,children:s}),f.jsx("button",{type:"submit",style:d.button,children:"×”×¨×©×"})]})})},Cg=({form:r,errors:e,handleChange:t,handleConfirm:n,handleClear:i,setShowCatalogPopup:a,saving:s,isLoadingClientData:o=!1})=>{const l=[{label:"×ž×¡×¤×¨ ×¤×œ××¤×•×Ÿ",name:"phone",required:!0},{label:"×©× ×ž×ª× ×“×‘×ª",name:"volunteerName",required:!0},{label:"×©× ×œ×§×•×—",name:"clientName",required:!0},{label:"×ž×§×•× ×ž×’×•×¨×™×",name:"address",required:!0},{label:"××™×ž×™×™×œ",name:"email",required:!1},{label:"×¡×•×’ ×”××™×¨×•×¢",name:"eventType",required:!0},{label:"×ª××¨×™×š ×œ×§×™×—×ª ×ž×•×¦×¨×™×",name:"pickupDate",type:"date",required:!0},{label:"×ª××¨×™×š ×”××™×¨×•×¢",name:"eventDate",type:"date",required:!0},{label:"×ª××¨×™×š ×”×—×–×¨×ª ×ž×•×¦×¨×™×",name:"returnDate",type:"date",required:!0}];return f.jsxs("div",{className:"loan-form-box",children:[f.jsx("h2",{style:{textAlign:"center"},children:"×”×–×ž× ×” ×—×“×©×”"}),l.map(({label:c,name:d,type:u="text",required:p})=>f.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[f.jsxs("label",{htmlFor:d,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[c,p&&" *",o&&(d==="clientName"||d==="address"||d==="email")&&f.jsx("span",{style:{marginRight:"0.5rem",color:"#2196f3"},children:"â³"})]}),f.jsxs("div",{style:{position:"relative"},children:[f.jsx("input",{id:d,type:u,name:d,value:r[d],onChange:t,disabled:o&&(d==="clientName"||d==="address"||d==="email"),inputMode:d==="phone"?"numeric":void 0,pattern:d==="phone"?"[0-9]*":void 0,min:u==="date"?d==="pickupDate"?new Date().toISOString().split("T")[0]:d==="eventDate"||d==="returnDate"?r.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:e[d]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:o&&(d==="clientName"||d==="address"||d==="email")?"#f5f5f5":"white",opacity:o&&(d==="clientName"||d==="address"||d==="email")?.7:1},placeholder:o&&(d==="clientName"||d==="address"||d==="email")?"×˜×•×¢×Ÿ...":""}),o&&d==="phone"&&f.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#2196f3"},children:f.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e3f2fd",borderTop:"2px solid #2196f3",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),e[d]&&f.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:e[d]})]},d)),f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:f.jsx("button",{className:"btn btn-blue",onClick:()=>a(!0),children:"×‘×—×™×¨×ª ×ž×•×¦×¨×™×"})}),f.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[f.jsx("button",{className:"btn btn-green",onClick:n,disabled:s||o,children:s?"×©×•×ž×¨...":"××™×©×•×¨ ×”×–×ž× ×”"}),f.jsx("button",{className:"btn btn-red",onClick:i,disabled:s||o,children:"×‘×™×˜×•×œ ×”×–×ž× ×”"})]}),f.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: translateY(-50%) rotate(0deg); }
          100% { transform: translateY(-50%) rotate(360deg); }
        }
      `})]})};function Ig(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function Eg(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var Ng=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kg=function(r){Ng(e,r);function e(t,n){var i=this.constructor,a=r.call(this,t,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Ig(a,i.prototype),Eg(a),a}return e}(Error),Dg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nn=function(r){Dg(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(kg),jg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fi=function(r){jg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Nn),Og=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lt=function(r){Og(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Nn),Tg=function(){function r(e){if(this.binarizer=e,e===null)throw new lt("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,i){var a=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new r(this.binarizer.createBinarizer(a))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r}(),Rg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gr=function(r){Rg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Nn),Lg=function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r}(),ar=function(){function r(){}return r.arraycopy=function(e,t,n,i,a){for(;a--;)n[i++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r}(),Pg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wf=function(r){Pg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Nn),Mg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_u=function(r){Mg(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var i=r.call(this,n)||this;return i.index=t,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(wf),Bg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fr=function(){function r(){}return r.fill=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]=t},r.fillWithin=function(e,t,n,i){r.rangeCheck(e.length,t,n);for(var a=t;a<n;a++)e[a]=i},r.rangeCheck=function(e,t,n){if(t>n)throw new lt("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new _u(t);if(n>e)throw new _u(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var i=1;try{for(var a=Bg(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var i=n-t,a=new Int32Array(i);return ar.arraycopy(e,t,a,0,i),a},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=n(t,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},r.numberComparator=function(e,t){return e-t},r}(),Et=function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),$r=function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);ar.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var s=n.length;a===0;){if(++i===s)return t;a=n[i]}var o=i*32+Et.numberOfTrailingZeros(a);return o>t?t:o},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var s=n.length;a===0;){if(++i===s)return t;a=~n[i]}var o=i*32+Et.numberOfTrailingZeros(a);return o>t?t:o},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new lt;if(t!==e){t--;for(var n=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=n;s<=i;s++){var o=s>n?0:e&31,l=s<i?31:t&31,c=(2<<l)-(1<<o);a[s]|=c}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new lt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,o=i;o<=a;o++){var l=o>i?0:e&31,c=o<a?31:t&31,d=(2<<c)-(1<<l)&4294967295;if((s[o]&d)!==(n?d:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new lt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new lt("Sizes don't match");for(var t=this.bits,n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[n+a]=s}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits,a=0;a<n;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==n*32){for(var o=n*32-this.size,l=e[0]>>>o,a=1;a<n;a++){var c=e[a];l|=c<<32-o,e[a-1]=l,l=c>>>o}e[n-1]=l}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&Fr.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+Fr.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r}(),zd;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(zd||(zd={}));const fr=zd;var Fg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fe=function(r){Fg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Nn),zg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$t;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})($t||($t={}));var Br=function(){function r(e,t,n){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var l=this.values,c=0,d=l.length;c!==d;c++){var u=l[c];r.VALUES_TO_ECI.set(u,this)}try{for(var p=zg(s),h=p.next();!h.done;h=p.next()){var m=h.value;r.NAME_TO_ECI.set(m,this)}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Fe("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new Fe("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new Fe("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r($t.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r($t.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r($t.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r($t.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r($t.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r($t.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r($t.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r($t.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r($t.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r($t.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r($t.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r($t.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r($t.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r($t.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r($t.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r($t.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r($t.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r($t.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r($t.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r($t.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r($t.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r($t.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r($t.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r($t.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r($t.Big5,28,"Big5"),r.GB18030=new r($t.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r($t.EUC_KR,30,"EUC_KR","EUC-KR"),r}(),Ug=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gl=function(r){Ug(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Nn),Jn=function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof Br?e:Br.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(n.equals(Br.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Gl("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(Br.UTF8)||e.equals(Br.ISO8859_1)||e.equals(Br.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},r}(),Ot=function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return Jn.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(fr.CHARACTER_SET)!==void 0)return t.get(fr.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,s=!0,o=0,l=0,c=0,d=0,u=0,p=0,h=0,m=0,v=0,b=0,y=0,I=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,N=0;N<n&&(i||a||s);N++){var _=e[N]&255;s&&(o>0?(_&128)===0?s=!1:o--:(_&128)!==0&&((_&64)===0?s=!1:(o++,(_&32)===0?l++:(o++,(_&16)===0?c++:(o++,(_&8)===0?d++:s=!1))))),i&&(_>127&&_<160?i=!1:_>159&&(_<192||_===215||_===247)&&y++),a&&(u>0?_<64||_===127||_>252?a=!1:u--:_===128||_===160||_>239?a=!1:_>160&&_<224?(p++,m=0,h++,h>v&&(v=h)):_>127?(u++,h=0,m++,m>b&&(b=m)):(h=0,m=0))}return s&&o>0&&(s=!1),a&&u>0&&(a=!1),s&&(I||l+c+d>0)?r.UTF8:a&&(r.ASSUME_SHIFT_JIS||v>=3||b>=3)?r.SHIFT_JIS:i&&a?v===2&&p===2||y*10>=n?r.SHIFT_JIS:r.ISO88591:i?r.ISO88591:a?r.SHIFT_JIS:s?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=-1;function a(o,l,c,d,u,p){if(o==="%%")return"%";if(t[++i]!==void 0){o=d?parseInt(d.substr(1)):void 0;var h=u?parseInt(u.substr(1)):void 0,m;switch(p){case"s":m=t[i];break;case"c":m=t[i][0];break;case"f":m=parseFloat(t[i]).toFixed(o);break;case"p":m=parseFloat(t[i]).toPrecision(o);break;case"e":m=parseFloat(t[i]).toExponential(o);break;case"x":m=parseInt(t[i]).toString(h||16);break;case"d":m=parseFloat(parseInt(t[i],h||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(h);for(var v=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";m.length<v;)m=l!==void 0?m+b:b+m;return m}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},r.getBytes=function(e,t){return Jn.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=Br.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=Br.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=Br.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r}(),Ct=function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ot.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var i=t;t<t+n;i++)this.append(e[i]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r}(),Li=function(){function r(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new lt("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,i=new r(n,t),a=0;a<t;a++)for(var s=e[a],o=0;o<n;o++)s[o]&&i.set(o,a);return i},r.parseFromString=function(e,t,n){if(e===null)throw new lt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,l=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new lt("row lengths do not match");s=a,l++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,i[a]=!0,a++;else if(e.substring(c,c+n.length)===n)c+=n.length,i[a]=!1,a++;else throw new lt("illegal character encountered: "+e.substring(c));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new lt("row lengths do not match");l++}for(var d=new r(o,l),u=0;u<a;u++)i[u]&&d.set(Math.floor(u%o),Math.floor(u/o));return d},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new lt("input matrix dimensions do not match");for(var t=new $r(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*n,l=e.getRow(a,t).getBitArray(),c=0;c<n;c++)i[o+c]^=l[c]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,i){if(t<0||e<0)throw new lt("Left and top must be nonnegative");if(i<1||n<1)throw new lt("Height and width must be at least 1");var a=e+n,s=t+i;if(s>this.height||a>this.width)throw new lt("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,c=t;c<s;c++)for(var d=c*o,u=e;u<a;u++)l[d+Math.floor(u/32)]|=1<<(u&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new $r(this.width):t.clear();for(var n=this.rowSize,i=this.bits,a=e*n,s=0;s<n;s++)t.setBulk(s*32,i[a+s]);return t},r.prototype.setRow=function(e,t){ar.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new $r(e),i=new $r(e),a=0,s=Math.floor((t+1)/2);a<s;a++)n=this.getRow(a,n),i=this.getRow(t-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,i=this.bits,a=e,s=t,o=-1,l=-1,c=0;c<t;c++)for(var d=0;d<n;d++){var u=i[c*n+d];if(u!==0){if(c<s&&(s=c),c>l&&(l=c),d*32<a){for(var p=0;(u<<31-p&4294967295)===0;)p++;d*32+p<a&&(a=d*32+p)}if(d*32+31>o){for(var p=31;!(u>>>p);)p--;d*32+p>o&&(o=d*32+p)}}}return o<a||l<s?null:Int32Array.from([a,s,o-a+1,l-s+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var i=n/e,a=n%e*32,s=t[n],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,s=t[n],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Fr.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Fr.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var i=new Ct,a=0,s=this.height;a<s;a++){for(var o=0,l=this.width;o<l;o++)i.append(this.get(o,a)?e:t);i.append(n)}return i.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r}(),Wg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ae=function(r){Wg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Nn),Hg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qg=function(r){Hg(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new $r(a):n.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),o=this.buckets,l=0;l<a;l++)o[(s[l]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(o);if(a<3)for(var l=0;l<a;l++)(s[l]&255)<c&&n.set(l);else for(var d=s[0]&255,u=s[1]&255,l=1;l<a-1;l++){var p=s[l+1]&255;(u*4-d-p)/2<c&&n.set(l),d=u,u=p}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight(),a=new Li(n,i);this.initArrays(n);for(var s=this.buckets,o=1;o<5;o++)for(var l=Math.floor(i*o/5),c=t.getRow(l,this.luminances),d=Math.floor(n*4/5),u=Math.floor(n/5);u<d;u++){var p=c[u]&255;s[p>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(s),m=t.getMatrix(),o=0;o<i;o++)for(var v=o*n,u=0;u<n;u++){var p=m[v+u]&255;p<h&&a.set(u,o)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(t){for(var n=t.length,i=0,a=0,s=0,o=0;o<n;o++)t[o]>s&&(a=o,s=t[o]),t[o]>i&&(i=t[o]);for(var l=0,c=0,o=0;o<n;o++){var d=o-a,u=t[o]*d*d;u>c&&(l=o,c=u)}if(a>l){var p=a;a=l,l=p}if(l-a<=n/16)throw new Ae;for(var h=l-1,m=-1,o=l-1;o>a;o--){var v=o-a,u=v*v*(l-o)*(i-t[o]);u>m&&(h=o,m=u)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Lg),Vg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gg=function(r){Vg(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var l=e.calculateBlackPoints(a,s,o,n,i),c=new Li(n,i);e.calculateThresholdForBlock(a,s,o,n,i,l,c),this.matrix=c}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,i,a,s,o,l){for(var c=s-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,u=0;u<i;u++){var p=u<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var h=e.cap(u,2,i-3),m=0;m<n;m++){var v=m<<e.BLOCK_SIZE_POWER;v>d&&(v=d);for(var b=e.cap(m,2,n-3),y=0,I=-2;I<=2;I++){var N=o[h+I];y+=N[b-2]+N[b-1]+N[b]+N[b+1]+N[b+2]}var _=y/25;e.thresholdBlock(t,v,p,_,a,l)}}},e.cap=function(t,n,i){return t<n?n:t>i?i:t},e.thresholdBlock=function(t,n,i,a,s,o){for(var l=0,c=i*s+n;l<e.BLOCK_SIZE;l++,c+=s)for(var d=0;d<e.BLOCK_SIZE;d++)(t[c+d]&255)<=a&&o.set(n+d,i+l)},e.calculateBlackPoints=function(t,n,i,a,s){for(var o=s-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,c=new Array(i),d=0;d<i;d++){c[d]=new Int32Array(n);var u=d<<e.BLOCK_SIZE_POWER;u>o&&(u=o);for(var p=0;p<n;p++){var h=p<<e.BLOCK_SIZE_POWER;h>l&&(h=l);for(var m=0,v=255,b=0,y=0,I=u*a+h;y<e.BLOCK_SIZE;y++,I+=a){for(var N=0;N<e.BLOCK_SIZE;N++){var _=t[I+N]&255;m+=_,_<v&&(v=_),_>b&&(b=_)}if(b-v>e.MIN_DYNAMIC_RANGE)for(y++,I+=a;y<e.BLOCK_SIZE;y++,I+=a)for(var N=0;N<e.BLOCK_SIZE;N++)m+=t[I+N]&255}var F=m>>e.BLOCK_SIZE_POWER*2;if(b-v<=e.MIN_DYNAMIC_RANGE&&(F=v/2,d>0&&p>0)){var R=(c[d-1][p]+2*c[d][p-1]+c[d-1][p-1])/4;v<R&&(F=R)}c[d][p]=F}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(qg),yc=function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,i){throw new Gl("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new Gl("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new Gl("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ct,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",t.append(o)}t.append(`
`)}return t.toString()},r}(),$g=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Af=function(r){$g(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var i=this.delegate.getRow(t,n),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,i,a){return new e(this.delegate.crop(t,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(yc),Xg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yg=function(r){Xg(e,r);function e(t,n){n===void 0&&(n=!1);var i=r.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,n),i}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,l=0,c=t.length;o<c;o+=4,l++){var d=void 0,u=t[o+3];if(u===0)d=255;else{var p=t[o],h=t[o+1],m=t[o+2];d=306*p+601*h+117*m+512>>10}s[l]=d}else for(var o=0,l=0,v=t.length;o<v;o+=4,l++){var d=void 0,u=t[o+3];if(u===0)d=255;else{var p=t[o],h=t[o+1],m=t[o+2];d=306*p+601*h+117*m+512>>10}s[l]=255-d}return s},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new lt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return r.prototype.crop.call(this,t,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return n.width=l,n.height=c,i.translate(l/2,c/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Af(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(yc),Kg=function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r}(),yn=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(u){s(u)}}function l(d){try{c(n.throw(d))}catch(u){s(u)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(r,e||[])).next())})},bn=function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Zg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yo=function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return yn(this,void 0,void 0,function(){var e,t,n,i,a,s,o,l,c,d,u,p;return bn(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=Zg(e),i=n.next();!i.done;i=n.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,l=a.label||"Video device "+(t.length+1),c=a.groupId,d={deviceId:o,label:l,kind:s,groupId:c},t.push(d))}catch(m){u={error:m}}finally{try{i&&!i.done&&(p=n.return)&&p.call(n)}finally{if(u)throw u.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return yn(this,void 0,void 0,function(){var e;return bn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new Kg(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return yn(this,void 0,void 0,function(){var t;return bn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return yn(this,void 0,void 0,function(){return bn(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return yn(this,void 0,void 0,function(){var n,i;return bn(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return yn(this,void 0,void 0,function(){var n;return bn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return yn(this,void 0,void 0,function(){var n,i;return bn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return yn(this,void 0,void 0,function(){return bn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,i.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return yn(this,void 0,void 0,function(){var i,a;return bn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,n)];case 1:return[2,s.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return yn(this,void 0,void 0,function(){var i;return bn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,n)];case 2:return[2,a.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return yn(this,void 0,void 0,function(){var i;return bn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return yn(this,void 0,void 0,function(){var n;return bn(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,i){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return yn(this,void 0,void 0,function(){return bn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new fi("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new fi("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new fi("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new fi("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new fi("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new fi("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new fi("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new fi("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new fi("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new fi("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return yn(this,void 0,void 0,function(){return bn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return yn(this,void 0,void 0,function(){return bn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var i=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new Ae("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);s(l)}catch(p){var c=t&&p instanceof Ae,d=p instanceof Gr||p instanceof Fe,u=d&&n;if(c||u)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(p)}};return new Promise(function(s,o){return a(s,o)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);t(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(l){t(null,l);var s=l instanceof Gr||l instanceof Fe,o=l instanceof Ae;(s||o)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new Yg(n,t),a=new Gg(i);return new Tg(a)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r}(),pn=function(){function r(e,t,n,i,a,s){n===void 0&&(n=t==null?0:8*t.length),s===void 0&&(s=ar.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=ar.currentTimeMillis():this.timestamp=s}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);ar.arraycopy(t,0,n,0,t.length),ar.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r}(),Ud;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ud||(Ud={}));const ot=Ud;var Wd;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Wd||(Wd={}));const on=Wd;var bc=function(){function r(e,t,n,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r}(),Os=function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new lt;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r}(),Da=function(){function r(e,t){if(t.length===0)throw new lt;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),ar.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];n=Os.addOrSubtract(n,s)}return n}n=t[0];for(var o=t.length,l=this.field,i=1;i<o;i++)n=Os.addOrSubtract(l.multiply(e,n),t[i]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new lt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var a=new Int32Array(n.length),s=n.length-t.length;ar.arraycopy(n,0,a,0,s);for(var o=s;o<n.length;o++)a[o]=Os.addOrSubtract(t[o-s],n[o]);return new r(this.field,a)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new lt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,i=e.coefficients,a=i.length,s=new Int32Array(n+a-1),o=this.field,l=0;l<n;l++)for(var c=t[l],d=0;d<a;d++)s[l+d]=Os.addOrSubtract(s[l+d],o.multiply(c,i[d]));return new r(o,s)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=n.multiply(a[s],e);return new r(n,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new lt;if(t===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(n[o],t);return new r(s,a)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new lt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new lt("Divide by 0");for(var t=this.field,n=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),l=t.multiply(i.getCoefficient(i.getDegree()),s),c=e.multiplyByMonomial(o,l),d=t.buildMonomial(o,l);n=n.addOrSubtract(d),i=i.addOrSubtract(c)}return[n,i]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r}(),Qg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),z1=function(r){Qg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Nn),Jg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),En=function(r){Jg(e,r);function e(t,n,i){var a=r.call(this)||this;a.primitive=t,a.size=n,a.generatorBase=i;for(var s=new Int32Array(n),o=1,l=0;l<n;l++)s[l]=o,o*=2,o>=n&&(o^=t,o&=n-1);a.expTable=s;for(var c=new Int32Array(n),l=0;l<n-1;l++)c[s[l]]=l;return a.logTable=c,a.zero=new Da(a,Int32Array.from([0])),a.one=new Da(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new lt;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new Da(this,i)},e.prototype.inverse=function(t){if(t===0)throw new z1;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Et.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Os),em=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ol=function(r){em(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Nn),tm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$s=function(r){tm(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Nn),wc=function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,i=new Da(n,e),a=new Int32Array(t),s=!0,o=0;o<t;o++){var l=i.evaluateAt(n.exp(o+n.getGeneratorBase()));a[a.length-1-o]=l,l!==0&&(s=!1)}if(!s)for(var c=new Da(n,a),d=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),u=d[0],p=d[1],h=this.findErrorLocations(u),m=this.findErrorMagnitudes(p,h),o=0;o<h.length;o++){var v=e.length-1-n.log(h[o]);if(v<0)throw new Ol("Bad error location");e[v]=En.addOrSubtract(e[v],m[o])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,o=t,l=a.getZero(),c=a.getOne();o.getDegree()>=(n/2|0);){var d=s,u=l;if(s=o,l=c,s.isZero())throw new Ol("r_{i-1} was zero");o=d;for(var p=a.getZero(),h=s.getCoefficient(s.getDegree()),m=a.inverse(h);o.getDegree()>=s.getDegree()&&!o.isZero();){var v=o.getDegree()-s.getDegree(),b=a.multiply(o.getCoefficient(o.getDegree()),m);p=p.addOrSubtract(a.buildMonomial(v,b)),o=o.addOrSubtract(s.multiplyByMonomial(v,b))}if(c=p.multiply(l).addOrSubtract(u),o.getDegree()>=s.getDegree())throw new $s("Division algorithm failed to reduce polynomial?")}var y=c.getCoefficient(0);if(y===0)throw new Ol("sigmaTilde(0) was zero");var I=a.inverse(y),N=c.multiplyScalar(I),_=o.multiplyScalar(I);return[N,_]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(n[i]=a.inverse(s),i++);if(i!==t)throw new Ol("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,i=new Int32Array(n),a=this.field,s=0;s<n;s++){for(var o=a.inverse(t[s]),l=1,c=0;c<n;c++)if(s!==c){var d=a.multiply(t[c],o),u=(d&1)===0?d|1:d&-2;l=a.multiply(l,u)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(l)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},r}(),rn;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(rn||(rn={}));var Cu=function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),a=r.convertBoolArrayToByteArray(i),s=r.getEncodedData(i),o=new bc(a,s,null,null);return o.setNumBits(i.length),o},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=rn.UPPER,i=rn.UPPER,a="",s=0;s<t;)if(i===rn.BINARY){if(t-s<5)break;var o=r.readCode(e,s,5);if(s+=5,o===0){if(t-s<11)break;o=r.readCode(e,s,11)+31,s+=11}for(var l=0;l<o;l++){if(t-s<8){s=t;break}var c=r.readCode(e,s,8);a+=Ot.castAsNonUtf8Char(c),s+=8}i=n}else{var d=i===rn.DIGIT?4:5;if(t-s<d)break;var c=r.readCode(e,s,d);s+=d;var u=r.getCharacter(i,c);u.startsWith("CTRL_")?(n=i,i=r.getTable(u.charAt(5)),u.charAt(6)==="L"&&(n=i)):(a+=u,i=n)}return a},r.getTable=function(e){switch(e){case"L":return rn.LOWER;case"P":return rn.PUNCT;case"M":return rn.MIXED;case"D":return rn.DIGIT;case"B":return rn.BINARY;case"U":default:return rn.UPPER}},r.getCharacter=function(e,t){switch(e){case rn.UPPER:return r.UPPER_TABLE[t];case rn.LOWER:return r.LOWER_TABLE[t];case rn.MIXED:return r.MIXED_TABLE[t];case rn.PUNCT:return r.PUNCT_TABLE[t];case rn.DIGIT:return r.DIGIT_TABLE[t];default:throw new $s("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=En.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=En.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=En.AZTEC_DATA_10):(n=12,t=En.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new Fe;for(var s=e.length%n,o=new Int32Array(a),l=0;l<a;l++,s+=n)o[l]=r.readCode(e,s,n);try{var c=new wc(t);c.decode(o,a-i)}catch(b){throw new Fe(b)}for(var d=(1<<n)-1,u=0,l=0;l<i;l++){var p=o[l];if(p===0||p===d)throw new Fe;(p===1||p===d-1)&&u++}for(var h=new Array(i*n-u),m=0,l=0;l<i;l++){var p=o[l];if(p===1||p===d-1)h.fill(p>1,m,m+n-1),m+=n-1;else for(var v=n-1;v>=0;--v)h[m++]=(p&1<<v)!==0}return h},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(n,t));if(t)for(var o=0;o<a.length;o++)a[o]=o;else for(var l=i+1+2*Et.truncDivision(Et.truncDivision(i,2)-1,15),c=i/2,d=Et.truncDivision(l,2),o=0;o<c;o++){var u=o+Et.truncDivision(o,15);a[c-o-1]=d-u-1,a[c+o]=d+u+1}for(var o=0,p=0;o<n;o++){for(var h=(n-o)*4+(t?9:12),m=o*2,v=i-1-m,b=0;b<h;b++)for(var y=b*2,I=0;I<2;I++)s[p+y+I]=e.get(a[m+I],a[m+b]),s[p+2*h+y+I]=e.get(a[m+b],a[v-I]),s[p+4*h+y+I]=e.get(a[v-I],a[v-b]),s[p+6*h+y+I]=e.get(a[v-b],a[m+I]);p+=h*8}return s},r.readCode=function(e,t,n){for(var i=0,a=t;a<t+n;a++)i<<=1,e[a]&&(i|=1);return i},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r}(),Mt=function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,i){var a=e-n,s=t-i;return Math.sqrt(a*a+s*s)},r.sum=function(e){for(var t=0,n=0,i=e.length;n!==i;n++){var a=e[n];t+=a}return t},r}(),Hd=function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),Ye=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*Hd.floatToIntBits(this.x)+Hd.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(n>=t&&n>=i?(s=e[0],a=e[1],o=e[2]):i>=n&&i>=t?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var l=a;a=o,o=l}e[0]=a,e[1]=s,e[2]=o},r.distance=function(e,t){return Mt.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var i=t.x,a=t.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},r}(),Sf=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),rm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nm=function(r){rm(e,r);function e(t,n,i,a,s){var o=r.call(this,t,n)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Sf),qd=function(){function r(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Ae}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,l=!1,c=!1,d=!1,u=!1,p=this.width,h=this.height;s;){s=!1;for(var m=!0;(m||!l)&&t<p;)m=this.containsBlackPoint(n,i,t,!1),m?(t++,s=!0,l=!0):l||t++;if(t>=p){a=!0;break}for(var v=!0;(v||!c)&&i<h;)v=this.containsBlackPoint(e,t,i,!0),v?(i++,s=!0,c=!0):c||i++;if(i>=h){a=!0;break}for(var b=!0;(b||!d)&&e>=0;)b=this.containsBlackPoint(n,i,e,!1),b?(e--,s=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var y=!0;(y||!u)&&n>=0;)y=this.containsBlackPoint(e,t,n,!0),y?(n--,s=!0,u=!0):u||n--;if(n<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var I=t-e,N=null,_=1;N===null&&_<I;_++)N=this.getBlackPointOnSegment(e,i-_,e+_,i);if(N==null)throw new Ae;for(var F=null,_=1;F===null&&_<I;_++)F=this.getBlackPointOnSegment(e,n+_,e+_,n);if(F==null)throw new Ae;for(var R=null,_=1;R===null&&_<I;_++)R=this.getBlackPointOnSegment(t,n+_,t-_,n);if(R==null)throw new Ae;for(var U=null,_=1;U===null&&_<I;_++)U=this.getBlackPointOnSegment(t,i-_,t-_,i);if(U==null)throw new Ae;return this.centerEdges(U,N,R,F)}else throw new Ae},r.prototype.getBlackPointOnSegment=function(e,t,n,i){for(var a=Mt.round(Mt.distance(e,t,n,i)),s=(n-e)/a,o=(i-t)/a,l=this.image,c=0;c<a;c++){var d=Mt.round(e+c*s),u=Mt.round(t+c*o);if(l.get(d,u))return new Ye(d,u)}return null},r.prototype.centerEdges=function(e,t,n,i){var a=e.getX(),s=e.getY(),o=t.getX(),l=t.getY(),c=n.getX(),d=n.getY(),u=i.getX(),p=i.getY(),h=r.CORR;return a<this.width/2?[new Ye(u-h,p+h),new Ye(o+h,l+h),new Ye(c-h,d-h),new Ye(a+h,s-h)]:[new Ye(u+h,p+h),new Ye(o+h,l-h),new Ye(c-h,d+h),new Ye(a-h,s-h)]},r.prototype.containsBlackPoint=function(e,t,n,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,n))return!0}else for(var o=e;o<=t;o++)if(a.get(n,o))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r}(),Iu=function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var o=Math.floor(t[s]),l=Math.floor(t[s+1]);if(o<-1||o>n||l<-1||l>i)throw new Ae;a=!1,o===-1?(t[s]=0,a=!0):o===n&&(t[s]=n-1,a=!0),l===-1?(t[s+1]=0,a=!0):l===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var o=Math.floor(t[s]),l=Math.floor(t[s+1]);if(o<-1||o>n||l<-1||l>i)throw new Ae;a=!1,o===-1?(t[s]=0,a=!0):o===n&&(t[s]=n-1,a=!0),l===-1?(t[s+1]=0,a=!0):l===i&&(t[s+1]=i-1,a=!0)}},r}(),U1=function(){function r(e,t,n,i,a,s,o,l,c){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=l,this.a33=c}return r.quadrilateralToQuadrilateral=function(e,t,n,i,a,s,o,l,c,d,u,p,h,m,v,b){var y=r.quadrilateralToSquare(e,t,n,i,a,s,o,l),I=r.squareToQuadrilateral(c,d,u,p,h,m,v,b);return I.times(y)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,l=this.a23,c=this.a31,d=this.a32,u=this.a33,p=0;p<t;p+=2){var h=e[p],m=e[p+1],v=a*h+l*m+u;e[p]=(n*h+s*m+c)/v,e[p+1]=(i*h+o*m+d)/v}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,l=this.a23,c=this.a31,d=this.a32,u=this.a33,p=e.length,h=0;h<p;h++){var m=e[h],v=t[h],b=a*m+l*v+u;e[h]=(n*m+s*v+c)/b,t[h]=(i*m+o*v+d)/b}},r.squareToQuadrilateral=function(e,t,n,i,a,s,o,l){var c=e-n+a-o,d=t-i+s-l;if(c===0&&d===0)return new r(n-e,a-n,e,i-t,s-i,t,0,0,1);var u=n-a,p=o-a,h=i-s,m=l-s,v=u*m-p*h,b=(c*m-p*d)/v,y=(u*d-c*h)/v;return new r(n-e+b*n,o-e+y*o,e,i-t+b*i,l-t+y*l,t,b,y,1)},r.quadrilateralToSquare=function(e,t,n,i,a,s,o,l){return r.squareToQuadrilateral(e,t,n,i,a,s,o,l).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r}(),im=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),am=function(r){im(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,i,a,s,o,l,c,d,u,p,h,m,v,b,y,I,N,_){var F=U1.quadrilateralToQuadrilateral(a,s,o,l,c,d,u,p,h,m,v,b,y,I,N,_);return this.sampleGridWithTransform(t,n,i,F)},e.prototype.sampleGridWithTransform=function(t,n,i,a){if(n<=0||i<=0)throw new Ae;for(var s=new Li(n,i),o=new Float32Array(2*n),l=0;l<i;l++){for(var c=o.length,d=l+.5,u=0;u<c;u+=2)o[u]=u/2+.5,o[u+1]=d;a.transformPoints(o),Iu.checkAndNudgePoints(t,o);try{for(var u=0;u<c;u+=2)t.get(Math.floor(o[u]),Math.floor(o[u+1]))&&s.set(u/2,l)}catch{throw new Ae}}return s},e}(Iu),_f=function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new am,r}(),Cn=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new Ye(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r}(),om=function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new nm(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Ae;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var i=0,a=0;a<4;a++){var s=n[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(a,s,o){var l=(a>>t-2<<1)+(a&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(Et.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new Ae},r.prototype.getCorrectedParameterData=function(e,t){var n,i;t?(n=7,i=2):(n=10,i=4);for(var a=n-i,s=new Int32Array(n),o=n-1;o>=0;--o)s[o]=e&15,e>>=4;try{var l=new wc(En.AZTEC_PARAM);l.decode(s,a)}catch{throw new Ae}for(var c=0,o=0;o<i;o++)c=(c<<4)+s[o];return c},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(t,s,1,-1),l=this.getFirstDifferent(n,s,1,1),c=this.getFirstDifferent(i,s,-1,1),d=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var u=this.distancePoint(d,o)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(u<.75||u>1.25||!this.isWhiteOrBlackRectangle(o,l,c,d))break}t=o,n=l,i=c,a=d,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Ae;this.compact=this.nbCenterLayers===5;var p=new Ye(t.getX()+.5,t.getY()-.5),h=new Ye(n.getX()+.5,n.getY()+.5),m=new Ye(i.getX()-.5,i.getY()+.5),v=new Ye(a.getX()-.5,a.getY()-.5);return this.expandSquare([p,h,m,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,i;try{var a=new qd(this.image).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new Cn(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Cn(s+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Cn(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Cn(s-7,o-7),!1,-1,-1).toResultPoint()}var l=Mt.round((e.getX()+i.getX()+t.getX()+n.getX())/4),c=Mt.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{var a=new qd(this.image,15,l,c).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Cn(l+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Cn(l+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Cn(l-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Cn(l-7,c-7),!1,-1,-1).toResultPoint()}return l=Mt.round((e.getX()+i.getX()+t.getX()+n.getX())/4),c=Mt.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new Cn(l,c)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,i,a){var s=_f.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,c=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,l,l,c,l,c,c,l,c,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},r.prototype.sampleLine=function(e,t,n){for(var i=0,a=this.distanceResultPoint(e,t),s=a/n,o=e.getX(),l=e.getY(),c=s*(t.getX()-e.getX())/a,d=s*(t.getY()-e.getY())/a,u=0;u<n;u++)this.image.get(Mt.round(o+u*c),Mt.round(l+u*d))&&(i|=1<<n-u-1);return i},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,i){var a=3;e=new Cn(e.getX()-a,e.getY()+a),t=new Cn(t.getX()-a,t.getY()-a),n=new Cn(n.getX()+a,n.getY()-a),i=new Cn(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,t);return o!==s||(o=this.getColor(t,n),o!==s)?!1:(o=this.getColor(n,i),o===s)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,a=(t.getY()-e.getY())/n,s=0,o=e.getX(),l=e.getY(),c=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),u=0;u<d;u++)o+=i,l+=a,this.image.get(Mt.round(o),Mt.round(l))!==c&&s++;var p=s/n;return p>.1&&p<.9?0:p<=.1===c?1:-1},r.prototype.getFirstDifferent=function(e,t,n,i){for(var a=e.getX()+n,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=n,s+=i;for(a-=n,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=n;for(a-=n;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new Cn(a,s)},r.prototype.expandSquare=function(e,t,n){var i=n/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,c=new Ye(o+i*a,l+i*s),d=new Ye(o-i*a,l-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var u=new Ye(o+i*a,l+i*s),p=new Ye(o-i*a,l-i*s),h=[c,u,d,p];return h},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=Mt.round(e.getX()),n=Mt.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return Mt.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return Mt.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Et.truncDivision(this.nbLayers-4,8)+1)+15},r}(),Vd=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,i=new om(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new Cu().decode(o)}catch(u){n=u}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new Cu().decode(o)}catch(u){throw n??u}var l=new pn(s.getText(),s.getRawBytes(),s.getNumBits(),a,ot.AZTEC,ar.currentTimeMillis()),c=s.getByteSegments();c!=null&&l.putMetadata(on.BYTE_SEGMENTS,c);var d=s.getECLevel();return d!=null&&l.putMetadata(on.ERROR_CORRECTION_LEVEL,d),l},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(fr.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(i,a,s){n.foundPossibleResultPoint(i)})}},r.prototype.reset=function(){},r}(),sm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){sm(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Vd,t)||this}return e})(Yo);var zr=function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(fr.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),o=270;s!==null&&s.get(on.ORIENTATION)===!0&&(o=o+s.get(on.ORIENTATION)%360),a.putMetadata(on.ORIENTATION,o);var l=a.getResultPoints();if(l!==null)for(var c=i.getHeight(),d=0;d<l.length;d++)l[d]=new Ye(c-l[d].getY()-1,l[d].getX());return a}else throw new Ae}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),i=e.getHeight(),a=new $r(n),s=t&&t.get(fr.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),l;s?l=i:l=15;for(var c=Math.trunc(i/2),d=0;d<l;d++){var u=Math.trunc((d+1)/2),p=(d&1)===0,h=c+o*(p?u:-u);if(h<0||h>=i)break;try{a=e.getBlackRow(h,a)}catch{continue}for(var m=function(I){if(I===1&&(a.reverse(),t&&t.get(fr.NEED_RESULT_POINT_CALLBACK)===!0)){var N=new Map;t.forEach(function(R,U){return N.set(U,R)}),N.delete(fr.NEED_RESULT_POINT_CALLBACK),t=N}try{var _=v.decodeRow(h,a,t);if(I===1){_.putMetadata(on.ORIENTATION,180);var F=_.getResultPoints();F!==null&&(F[0]=new Ye(n-F[0].getX()-1,F[0].getY()),F[1]=new Ye(n-F[1].getX()-1,F[1].getY()))}return{value:_}}catch{}},v=this,b=0;b<2;b++){var y=m(b);if(typeof y=="object")return y.value}}throw new Ae},r.recordPattern=function(e,t,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var s=e.getSize();if(t>=s)throw new Ae;for(var o=!e.get(t),l=0,c=t;c<s;){if(e.get(c)!==o)n[l]++;else{if(++l===i)break;n[l]=1,o=!o}c++}if(!(l===i||l===i-1&&c===s))throw new Ae},r.recordPatternInReverse=function(e,t,n){for(var i=n.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new Ae;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return Number.POSITIVE_INFINITY;var l=a/s;n*=l;for(var c=0,d=0;d<i;d++){var u=e[d],p=t[d]*l,h=u>p?u-p:p-u;if(h>n)return Number.POSITIVE_INFINITY;c+=h}return c/a},r}(),lm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eu=function(r){lm(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,l=!1,c=6,d=i;d<n;d++)if(t.get(d)!==l)s[a]++;else{if(a===c-1){for(var u=e.MAX_AVG_VARIANCE,p=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var m=zr.patternMatchVariance(s,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);m<u&&(u=m,p=h)}if(p>=0&&t.isRange(Math.max(0,o-(d-o)/2),o,!1))return Int32Array.from([o,d,p]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,l=!l}throw new Ae},e.decodeCode=function(t,n,i){zr.recordPattern(t,i,n);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var l=e.CODE_PATTERNS[o],c=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);c<a&&(a=c,s=o)}if(s>=0)return s;throw new Ae},e.prototype.decodeRow=function(t,n,i){var a=i&&i.get(fr.ASSUME_GS1)===!0,s=e.findStartPattern(n),o=s[2],l=0,c=new Uint8Array(20);c[l++]=o;var d;switch(o){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Fe}for(var u=!1,p=!1,h="",m=s[0],v=s[1],b=Int32Array.from([0,0,0,0,0,0]),y=0,I=0,N=o,_=0,F=!0,R=!1,U=!1;!u;){var j=p;switch(p=!1,y=I,I=e.decodeCode(n,b,v),c[l++]=I,I!==e.CODE_STOP&&(F=!0),I!==e.CODE_STOP&&(_++,N+=_*I),m=v,v+=b.reduce(function(L,X){return L+X},0),I){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Fe}switch(d){case e.CODE_CODE_A:if(I<64)U===R?h+=String.fromCharCode(32+I):h+=String.fromCharCode(32+I+128),U=!1;else if(I<96)U===R?h+=String.fromCharCode(I-64):h+=String.fromCharCode(I+64),U=!1;else switch(I!==e.CODE_STOP&&(F=!1),I){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!R&&U?(R=!0,U=!1):R&&U?(R=!1,U=!1):U=!0;break;case e.CODE_SHIFT:p=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:u=!0;break}break;case e.CODE_CODE_B:if(I<96)U===R?h+=String.fromCharCode(32+I):h+=String.fromCharCode(32+I+128),U=!1;else switch(I!==e.CODE_STOP&&(F=!1),I){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!R&&U?(R=!0,U=!1):R&&U?(R=!1,U=!1):U=!0;break;case e.CODE_SHIFT:p=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:u=!0;break}break;case e.CODE_CODE_C:if(I<100)I<10&&(h+="0"),h+=I;else switch(I!==e.CODE_STOP&&(F=!1),I){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:u=!0;break}break}j&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var E=v-m;if(v=n.getNextUnset(v),!n.isRange(v,Math.min(n.getSize(),v+(v-m)/2),!1))throw new Ae;if(N-=_*y,N%103!==y)throw new Gr;var B=h.length;if(B===0)throw new Ae;B>0&&F&&(d===e.CODE_CODE_C?h=h.substring(0,B-2):h=h.substring(0,B-1));for(var k=(s[1]+s[0])/2,S=m+E/2,D=c.length,w=new Uint8Array(D),M=0;M<D;M++)w[M]=c[M];var O=[new Ye(k,t),new Ye(S,t)];return new pn(h,w,0,O,ot.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(zr),cm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),id=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nu=function(r){cm(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=r.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,n,i){var a,s,o,l,c=this.counters;c.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,c),u=n.getNextSet(d[1]),p=n.getSize(),h,m;do{e.recordPattern(n,u,c);var v=e.toNarrowWidePattern(c);if(v<0)throw new Ae;h=e.patternToChar(v),this.decodeRowResult+=h,m=u;try{for(var b=(a=void 0,id(c)),y=b.next();!y.done;y=b.next()){var I=y.value;u+=I}}catch(D){a={error:D}}finally{try{y&&!y.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}u=n.getNextSet(u)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var N=0;try{for(var _=id(c),F=_.next();!F.done;F=_.next()){var I=F.value;N+=I}}catch(D){o={error:D}}finally{try{F&&!F.done&&(l=_.return)&&l.call(_)}finally{if(o)throw o.error}}var R=u-m-N;if(u!==p&&R*2<N)throw new Ae;if(this.usingCheckDigit){for(var U=this.decodeRowResult.length-1,j=0,E=0;E<U;E++)j+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(U)!==e.ALPHABET_STRING.charAt(j%43))throw new Gr;this.decodeRowResult=this.decodeRowResult.substring(0,U)}if(this.decodeRowResult.length===0)throw new Ae;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var k=(d[1]+d[0])/2,S=m+N/2;return new pn(B,null,0,[new Ye(k,t),new Ye(S,t)],ot.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var i=t.getSize(),a=t.getNextSet(0),s=0,o=a,l=!1,c=n.length,d=a;d<i;d++)if(t.get(d)!==l)n[s]++;else{if(s===c-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((d-o)/2)),o,!1))return[o,d];o+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,l=!l}throw new Ae},e.toNarrowWidePattern=function(t){var n,i,a=t.length,s=0,o;do{var l=2147483647;try{for(var c=(n=void 0,id(t)),d=c.next();!d.done;d=c.next()){var u=d.value;u<l&&u>s&&(l=u)}}catch(v){n={error:v}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}s=l,o=0;for(var p=0,h=0,m=0;m<a;m++){var u=t[m];u>s&&(h|=1<<a-1-m,o++,p+=u)}if(o===3){for(var m=0;m<a&&o>0;m++){var u=t[m];if(u>s&&(o--,u*2>=p))return-1}return h}}while(o>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new Ae},e.decodeExtended=function(t){for(var n=t.length,i="",a=0;a<n;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=t.charAt(a+1),l="\0";switch(s){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Fe;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Fe;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new Fe;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Fe;break}i+=l,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(zr),dm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ad=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ku=function(r){dm(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,i){var a,s,o,l,c=this.findAsteriskPattern(n),d=n.getNextSet(c[1]),u=n.getSize(),p=this.counters;p.fill(0),this.decodeRowResult="";var h,m;do{e.recordPattern(n,d,p);var v=this.toPattern(p);if(v<0)throw new Ae;h=this.patternToChar(v),this.decodeRowResult+=h,m=d;try{for(var b=(a=void 0,ad(p)),y=b.next();!y.done;y=b.next()){var I=y.value;d+=I}}catch(E){a={error:E}}finally{try{y&&!y.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}d=n.getNextSet(d)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var N=0;try{for(var _=ad(p),F=_.next();!F.done;F=_.next()){var I=F.value;N+=I}}catch(E){o={error:E}}finally{try{F&&!F.done&&(l=_.return)&&l.call(_)}finally{if(o)throw o.error}}if(d===u||!n.get(d))throw new Ae;if(this.decodeRowResult.length<2)throw new Ae;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var R=this.decodeExtended(this.decodeRowResult),U=(c[1]+c[0])/2,j=m+N/2;return new pn(R,null,0,[new Ye(U,t),new Ye(j,t)],ot.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,l=a.length,c=0,d=i;d<n;d++)if(t.get(d)!==o)a[c]++;else{if(c===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,d]);s+=a[0]+a[1],a.copyWithin(0,2,2+c-1),a[c-1]=0,a[c]=0,c--}else c++;a[c]=1,o=!o}throw new Ae},e.prototype.toPattern=function(t){var n,i,a=0;try{for(var s=ad(t),o=s.next();!o.done;o=s.next()){var l=o.value;a+=l}}catch(m){n={error:m}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}for(var c=0,d=t.length,u=0;u<d;u++){var p=Math.round(t[u]*9/a);if(p<1||p>4)return-1;if((u&1)===0)for(var h=0;h<p;h++)c=c<<1|1;else c<<=p}return c},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new Ae},e.prototype.decodeExtended=function(t){for(var n=t.length,i="",a=0;a<n;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=n-1)throw new Fe;var o=t.charAt(a+1),l="\0";switch(s){case"d":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Fe;break;case"a":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Fe;break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o>="X"&&o<="Z")l="";else throw new Fe;break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Fe;break}i+=l,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,i){for(var a=1,s=0,o=n-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(o)),++a>i&&(a=1);if(t.charAt(n)!==e.ALPHABET_STRING[s%47])throw new Gr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(zr),fm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),um=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Du=function(r){fm(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,i){var a,s,o=this.decodeStart(n),l=this.decodeEnd(n),c=new Ct;e.decodeMiddle(n,o[1],l[0],c);var d=c.toString(),u=null;i!=null&&(u=i.get(fr.ALLOWED_LENGTHS)),u==null&&(u=e.DEFAULT_ALLOWED_LENGTHS);var p=d.length,h=!1,m=0;try{for(var v=um(u),b=v.next();!b.done;b=v.next()){var y=b.value;if(p===y){h=!0;break}y>m&&(m=y)}}catch(_){a={error:_}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(!h&&p>m&&(h=!0),!h)throw new Fe;var I=[new Ye(o[1],t),new Ye(l[0],t)],N=new pn(d,null,0,I,ot.ITF,new Date().getTime());return N},e.decodeMiddle=function(t,n,i,a){var s=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(s.fill(0),o.fill(0),l.fill(0);n<i;){zr.recordPattern(t,n,s);for(var c=0;c<5;c++){var d=2*c;o[c]=s[d],l[c]=s[d+1]}var u=e.decodeDigit(o);a.append(u.toString()),u=this.decodeDigit(l),a.append(u.toString()),s.forEach(function(p){n+=p})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),i=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new Ae},e.skipWhiteSpace=function(t){var n=t.getSize(),i=t.getNextSet(0);if(i===n)throw new Ae;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof Ae&&(i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,n,i){var a=i.length,s=new Int32Array(a),o=t.getSize(),l=!1,c=0,d=n;s.fill(0);for(var u=n;u<o;u++)if(t.get(u)!==l)s[c]++;else{if(c===a-1){if(zr.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,u];d+=s[0]+s[1],ar.arraycopy(s,2,s,0,c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,l=!l}throw new Ae},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],l=zr.patternMatchVariance(t,o,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,i=s):l===n&&(i=-1)}if(i>=0)return i%10;throw new Ae},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(zr),hm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vo=function(r){hm(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,i,a=0,s=Int32Array.from([0,0,0]);!n;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var l=o-(a-o);l>=0&&(n=t.isRange(l,o,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,a=n-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Fe;i+=s}i*=3;for(var a=n-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Fe;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,i,a){return this.findGuardPattern(t,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,n,i,a,s){var o=t.getSize();n=i?t.getNextUnset(n):t.getNextSet(n);for(var l=0,c=n,d=a.length,u=i,p=n;p<o;p++)if(t.get(p)!==u)s[l]++;else{if(l===d-1){if(zr.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,p]);c+=s[0]+s[1];for(var h=s.slice(2,s.length),m=0;m<l-1;m++)s[m]=h[m];s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,u=!u}throw new Ae},e.decodeDigit=function(t,n,i,a){this.recordPattern(t,i,n);for(var s=this.MAX_AVG_VARIANCE,o=-1,l=a.length,c=0;c<l;c++){var d=a[c],u=zr.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,o=c)}if(o>=0)return o;throw new Ae},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(zr),pm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gm=function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,i),s=i.toString(),o=r.parseExtensionString(s),l=[new Ye((n[0]+n[1])/2,e),new Ye(a,e)],c=new pn(s,null,0,l,ot.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&c.putAllMetadata(o),c},r.prototype.decodeMiddle=function(e,t,n){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),l=t[1],c=0,d=0;d<5&&l<o;d++){var u=Vo.decodeDigit(e,s,l,Vo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+u%10);try{for(var p=(i=void 0,pm(s)),h=p.next();!h.done;h=p.next()){var m=h.value;l+=m}}catch(b){i={error:b}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u>=10&&(c|=1<<4-d),d!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new Ae;var v=this.determineCheckDigit(c);if(r.extensionChecksum(n.toString())!==v)throw new Ae;return l},r.extensionChecksum=function(e){for(var t=e.length,n=0,i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new Ae},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[on.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="Â£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},r}(),mm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xm=function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,i),s=i.toString(),o=r.parseExtensionString(s),l=[new Ye((n[0]+n[1])/2,e),new Ye(a,e)],c=new pn(s,null,0,l,ot.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&c.putAllMetadata(o),c},r.prototype.decodeMiddle=function(e,t,n){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),l=t[1],c=0,d=0;d<2&&l<o;d++){var u=Vo.decodeDigit(e,s,l,Vo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+u%10);try{for(var p=(i=void 0,mm(s)),h=p.next();!h.done;h=p.next()){var m=h.value;l+=m}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u>=10&&(c|=1<<1-d),d!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new Ae;if(parseInt(n.toString())%4!==c)throw new Ae;return l},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[on.ISSUE_NUMBER,parseInt(e)]])},r}(),vm=function(){function r(){}return r.decodeRow=function(e,t,n){var i=Vo.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new gm;return a.decodeRow(e,t,i)}catch{var s=new xm;return s.decodeRow(e,t,i)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r}(),ym=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mr=function(r){ym(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[n]=a}return t}return e.prototype.decodeRow=function(t,n,i){var a=e.findStartGuardPattern(n),s=i==null?null:i.get(fr.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new Ye((a[0]+a[1])/2,t);s.foundPossibleResultPoint(o)}var l=this.decodeMiddle(n,a,this.decodeRowStringBuffer),c=l.rowOffset,d=l.resultString;if(s!=null){var u=new Ye(c,t);s.foundPossibleResultPoint(u)}var p=e.decodeEnd(n,c);if(s!=null){var h=new Ye((p[0]+p[1])/2,t);s.foundPossibleResultPoint(h)}var m=p[1],v=m+(m-p[0]);if(v>=n.getSize()||!n.isRange(m,v,!1))throw new Ae;var b=d.toString();if(b.length<8)throw new Fe;if(!e.checkChecksum(b))throw new Gr;var y=(a[1]+a[0])/2,I=(p[1]+p[0])/2,N=this.getBarcodeFormat(),_=[new Ye(y,t),new Ye(I,t)],F=new pn(b,null,0,_,N,new Date().getTime()),R=0;try{var U=vm.decodeRow(t,n,p[1]);F.putMetadata(on.UPC_EAN_EXTENSION,U.getText()),F.putAllMetadata(U.getResultMetadata()),F.addResultPoints(U.getResultPoints()),R=U.getText().length}catch{}var j=i==null?null:i.get(fr.ALLOWED_EAN_EXTENSIONS);if(j!=null){var E=!1;for(var B in j)if(R.toString()===B){E=!0;break}if(!E)throw new Ae}return N===ot.EAN_13||ot.UPC_A,F},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,a=n-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Fe;i+=s}i*=3;for(var a=n-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Fe;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Vo),bm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ju=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gd=function(r){bm(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,o,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=t.getSize(),u=n[1],p=0,h=0;h<6&&u<d;h++){var m=Mr.decodeDigit(t,c,u,Mr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var v=(a=void 0,ju(c)),b=v.next();!b.done;b=v.next()){var y=b.value;u+=y}}catch(F){a={error:F}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}m>=10&&(p|=1<<5-h)}i=e.determineFirstDigit(i,p);var I=Mr.findGuardPattern(t,u,!0,Mr.MIDDLE_PATTERN,new Int32Array(Mr.MIDDLE_PATTERN.length).fill(0));u=I[1];for(var h=0;h<6&&u<d;h++){var m=Mr.decodeDigit(t,c,u,Mr.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var N=(o=void 0,ju(c)),_=N.next();!_.done;_=N.next()){var y=_.value;u+=y}}catch(U){o={error:U}}finally{try{_&&!_.done&&(l=N.return)&&l.call(N)}finally{if(o)throw o.error}}}return{rowOffset:u,resultString:i}},e.prototype.getBarcodeFormat=function(){return ot.EAN_13},e.determineFirstDigit=function(t,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new Ae},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Mr),wm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ou=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tu=function(r){wm(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,o,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=t.getSize(),u=n[1],p=0;p<4&&u<d;p++){var h=Mr.decodeDigit(t,c,u,Mr.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var m=(a=void 0,Ou(c)),v=m.next();!v.done;v=m.next()){var b=v.value;u+=b}}catch(_){a={error:_}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}var y=Mr.findGuardPattern(t,u,!0,Mr.MIDDLE_PATTERN,new Int32Array(Mr.MIDDLE_PATTERN.length).fill(0));u=y[1];for(var p=0;p<4&&u<d;p++){var h=Mr.decodeDigit(t,c,u,Mr.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var I=(o=void 0,Ou(c)),N=I.next();!N.done;N=I.next()){var b=N.value;u+=b}}catch(R){o={error:R}}finally{try{N&&!N.done&&(l=I.return)&&l.call(I)}finally{if(o)throw o.error}}}return{rowOffset:u,resultString:i}},e.prototype.getBarcodeFormat=function(){return ot.EAN_8},e}(Mr),Am=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ru=function(r){Am(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new Gd,t}return e.prototype.getBarcodeFormat=function(){return ot.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,i))},e.prototype.decodeMiddle=function(t,n,i){return this.ean13Reader.decodeMiddle(t,n,i)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var i=new pn(n.substring(1),null,null,t.getResultPoints(),ot.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new Ae},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Mr),Sm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_m=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lu=function(r){Sm(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,o=this.decodeMiddleCounters.map(function(b){return b});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=t.getSize(),c=n[1],d=0,u=0;u<6&&c<l;u++){var p=e.decodeDigit(t,o,c,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var h=(a=void 0,_m(o)),m=h.next();!m.done;m=h.next()){var v=m.value;c+=v}}catch(b){a={error:b}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}p>=10&&(d|=1<<5-u)}return e.determineNumSysAndCheckDigit(new Ct(i),d),c},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Mr.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw Ae.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ot.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Ct;i.append(t.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Mr),Cm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},od=function(r){Cm(e,r);function e(t){var n=r.call(this)||this,i=t==null?null:t.get(fr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(ot.EAN_13)>-1&&a.push(new Gd),i.indexOf(ot.UPC_A)>-1&&a.push(new Ru),i.indexOf(ot.EAN_8)>-1&&a.push(new Tu),i.indexOf(ot.UPC_E)>-1&&a.push(new Lu)),a.length===0&&(a.push(new Gd),a.push(new Ru),a.push(new Tu),a.push(new Lu)),n.readers=a,n}return e.prototype.decodeRow=function(t,n,i){var a,s;try{for(var o=Pu(this.readers),l=o.next();!l.done;l=o.next()){var c=l.value;try{var d=c.decodeRow(t,n,i),u=d.getBarcodeFormat()===ot.EAN_13&&d.getText().charAt(0)==="0",p=i==null?null:i.get(fr.POSSIBLE_FORMATS),h=p==null||p.includes(ot.UPC_A);if(u&&h){var m=d.getRawBytes(),v=new pn(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),ot.UPC_A);return v.putAllMetadata(d.getResultMetadata()),v}return d}catch{}}}catch(b){a={error:b}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new Ae},e.prototype.reset=function(){var t,n;try{for(var i=Pu(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}(zr),Im=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Em=function(r){Im(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,i){var a=this.getValidRowData(n);if(!a)throw new Ae;var s=this.codaBarDecodeRow(a.row);if(!s)throw new Ae;return new pn(s,null,0,[new Ye(a.left,t),new Ye(a.right,t)],ot.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var s=[],o=n[0],l=1,c=1;c<n.length;c++)n[c]===o?l++:(o=n[c],s.push(l),l=1);return s.push(l),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],i=Math.ceil(t.reduce(function(l,c){return(l+c)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[s])}var o=n.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e}(zr),Nm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),km=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eo=function(r){Nm(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var i=0;i<n.length;i++)if(zr.patternMatchVariance(t,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new Ae},e.count=function(t){return Mt.sum(new Int32Array(t))},e.increment=function(t,n){for(var i=0,a=n[0],s=1;s<t.length;s++)n[s]>a&&(a=n[s],i=s);t[i]++},e.decrement=function(t,n){for(var i=0,a=n[0],s=1;s<t.length;s++)n[s]<a&&(a=n[s],i=s);t[i]--},e.isFinderPattern=function(t){var n,i,a=t[0]+t[1],s=a+t[2]+t[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var d=km(t),u=d.next();!u.done;u=d.next()){var p=u.value;p>c&&(c=p),p<l&&(l=p)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return c<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(zr),nc=function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r}(),W1=function(){function r(e,t,n,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ye(n,a)),this.resultPoints.push(new Ye(i,a))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r}(),Dm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lo=function(){function r(){}return r.getRSSvalue=function(e,t,n){var i,a,s=0;try{for(var o=Dm(e),l=o.next();!l.done;l=o.next()){var c=l.value;s+=c}}catch(I){i={error:I}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var d=0,u=0,p=e.length,h=0;h<p-1;h++){var m=void 0;for(m=1,u|=1<<h;m<e[h];m++,u&=~(1<<h)){var v=r.combins(s-m-1,p-h-2);if(n&&u===0&&s-m-(p-h-1)>=p-h-1&&(v-=r.combins(s-m-(p-h),p-h-2)),p-h-1>1){for(var b=0,y=s-m-(p-h-2);y>t;y--)b+=r.combins(s-m-y-1,p-h-3);v-=b*(p-1-h)}else s-m>t&&v--;d+=v}s-=m}return d},r.combins=function(e,t){var n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);for(var a=1,s=1,o=e;o>n;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},r}(),jm=function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,i=new $r(n),a=0,s=e[0],o=s.getRightChar().getValue(),l=11;l>=0;--l)(o&1<<l)!==0&&i.set(a),a++;for(var l=1;l<e.length;++l){for(var c=e[l],d=c.getLeftChar().getValue(),u=11;u>=0;--u)(d&1<<u)!==0&&i.set(a),a++;if(c.getRightChar()!==null)for(var p=c.getRightChar().getValue(),u=11;u>=0;--u)(p&1<<u)!==0&&i.set(a),a++}return i},r}(),Qa=function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r}(),Cf=function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r}(),Om=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ci=function(r){Om(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Cf),Tm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ja=function(r){Tm(e,r);function e(t,n,i){var a=r.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Cf),Rm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),No=function(r){Rm(e,r);function e(t,n,i){var a=r.call(this,t)||this;if(n<0||n>10||i<0||i>10)throw new Fe;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Cf),Tl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lm=function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,i,a,s,o,l,c;if(!e)return null;if(e.length<2)throw new Ae;var d=e.substring(0,2);try{for(var u=Tl(r.TWO_DIGIT_DATA_LENGTH),p=u.next();!p.done;p=u.next()){var h=p.value;if(h[0]===d)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,h[2],e):r.processFixedAI(2,h[1],e)}}catch(R){t={error:R}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}if(e.length<3)throw new Ae;var m=e.substring(0,3);try{for(var v=Tl(r.THREE_DIGIT_DATA_LENGTH),b=v.next();!b.done;b=v.next()){var h=b.value;if(h[0]===m)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,h[2],e):r.processFixedAI(3,h[1],e)}}catch(R){i={error:R}}finally{try{b&&!b.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}try{for(var y=Tl(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),I=y.next();!I.done;I=y.next()){var h=I.value;if(h[0]===m)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(R){s={error:R}}finally{try{I&&!I.done&&(o=y.return)&&o.call(y)}finally{if(s)throw s.error}}if(e.length<4)throw new Ae;var N=e.substring(0,4);try{for(var _=Tl(r.FOUR_DIGIT_DATA_LENGTH),F=_.next();!F.done;F=_.next()){var h=F.value;if(h[0]===N)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(R){l={error:R}}finally{try{F&&!F.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}throw new Ae},r.processFixedAI=function(e,t,n){if(n.length<e)throw new Ae;var i=n.substring(0,e);if(n.length<e+t)throw new Ae;var a=n.substring(e,e+t),s=n.substring(e+t),o="("+i+")"+a,l=r.parseFieldsInGeneralPurpose(s);return l==null?o:o+l},r.processVariableAI=function(e,t,n){var i=n.substring(0,e),a;n.length<e+t?a=n.length:a=e+t;var s=n.substring(e,a),o=n.substring(a),l="("+i+")"+s,c=r.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r}(),$l=function(){function r(e){this.buffer=new Ct,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,i=null;do{var a=this.decodeGeneralPurposeField(n,i),s=Lm.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new No(this.information.getSize(),No.FNC1,No.FNC1):new No(this.information.getSize(),t-1,No.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new No(e+7,i,a)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var i=0,a=0;a<n;++a)e.get(t+a)&&(i|=1<<n-a-1);return i},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Ja(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ja(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Ja(this.current.getPosition(),this.buffer.toString()):t=new Ja(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Qa(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Ja(this.current.getPosition(),this.buffer.toString());return new Qa(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Qa(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ja(this.current.getPosition(),this.buffer.toString());return new Qa(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Qa(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ja(this.current.getPosition(),this.buffer.toString());return new Qa(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Qa(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ci(e+5,ci.FNC1);if(t>=5&&t<15)return new ci(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ci(e+7,""+(n+1));if(n>=90&&n<116)return new ci(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new Fe}return new ci(e+8,a)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ci(e+5,ci.FNC1);if(t>=5&&t<15)return new ci(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ci(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new $s("Decoding invalid alphanumeric value: "+n)}return new ci(e+6,i)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r}(),H1=function(){function r(e){this.information=e,this.generalDecoder=new $l(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r}(),Pm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pi=function(r){Pm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,n){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+n).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(H1),Mm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bm=function(r){Mm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ct;t.append("(01)");var n=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(pi),Fm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zm=function(r){Fm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ct;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(H1),Um=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xl=function(r){Um(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),o=1e5,l=0;l<5;++l)s/o===0&&t.append("0"),o/=10;t.append(s)},e}(pi),Wm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),q1=function(r){Wm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Xl.GTIN_SIZE+e.WEIGHT_SIZE)throw new Ae;var t=new Ct;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Xl.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Xl),Hm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qm=function(r){Hm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(q1),Vm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gm=function(r){Vm(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(q1),$m=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xm=function(r){$m(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+pi.GTIN_SIZE)throw new Ae;var t=new Ct;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+pi.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(pi),Ym=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Km=function(r){Ym(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+pi.GTIN_SIZE)throw new Ae;var t=new Ct;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pi.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+pi.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(pi),Zm=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sa=function(r){Zm(e,r);function e(t,n,i){var a=r.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Ae;var t=new Ct;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&t.append("0"),t.append(o),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Xl);function Qm(r){try{if(r.get(1))return new Bm(r);if(!r.get(2))return new zm(r);var e=$l.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new qm(r);case 5:return new Gm(r)}var t=$l.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new Xm(r);case 13:return new Km(r)}var n=$l.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new Sa(r,"310","11");case 57:return new Sa(r,"320","11");case 58:return new Sa(r,"310","13");case 59:return new Sa(r,"320","13");case 60:return new Sa(r,"310","15");case 61:return new Sa(r,"320","15");case 62:return new Sa(r,"310","17");case 63:return new Sa(r,"320","17")}}catch(i){throw console.log(i),new $s("unknown decoder: "+r)}}var Mu=function(){function r(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r}(),Jm=function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}},r}(),ex=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_a=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tx=function(r){ex(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(o){if(o instanceof Ae){if(!this.pairs.length)throw new Ae;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new Ae},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var i,a,s=n;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var l=(i=void 0,_a(t)),c=l.next();!c.done;c=l.next()){var d=c.value;this.pairs.push(d.getPairs())}}catch(p){i={error:p}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var u=new Array(t);u.push(o);try{return this.checkRows(u,s+1)}catch(p){console.log(p)}}}throw new Ae},e.isValidSequence=function(t){var n,i;try{for(var a=_a(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(t.length>o.length)){for(var l=!0,c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!==o[c]){l=!1;break}if(l)return!0}}}catch(d){n={error:d}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>t){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Jm(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var i,a,s,o,l,c;try{for(var d=_a(n),u=d.next();!u.done;u=d.next()){var p=u.value;if(p.getPairs().length!==t.length){var h=!0;try{for(var m=(s=void 0,_a(p.getPairs())),v=m.next();!v.done;v=m.next()){var b=v.value,y=!1;try{for(var I=(l=void 0,_a(t)),N=I.next();!N.done;N=I.next()){var _=N.value;if(Mu.equals(b,_)){y=!0;break}}}catch(F){l={error:F}}finally{try{N&&!N.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}y||(h=!1)}}catch(F){s={error:F}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}}}catch(F){i={error:F}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,n){var i,a,s,o,l,c;try{for(var d=_a(n),u=d.next();!u.done;u=d.next()){var p=u.value,h=!0;try{for(var m=(s=void 0,_a(t)),v=m.next();!v.done;v=m.next()){var b=v.value,y=!1;try{for(var I=(l=void 0,_a(p.getPairs())),N=I.next();!N.done;N=I.next()){var _=N.value;if(b.equals(_)){y=!0;break}}}catch(F){l={error:F}}finally{try{N&&!N.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}if(!y){h=!1;break}}}catch(F){s={error:F}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}if(h)return!0}}catch(F){i={error:F}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=jm.buildBitArray(t),i=Qm(n),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),l=[s[0],s[1],o[0],o[1]];return new pn(a,null,null,l,ot.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);a+=l.getLeftChar().getChecksumPortion(),s++;var c=l.getRightChar();c!=null&&(a+=c.getChecksumPortion(),s++)}a%=211;var d=211*(s-4)+a;return d===n.getValue()},e.getNextSecondBar=function(t,n){var i;return t.get(n)?(i=t.getNextUnset(n),i=t.getNextSet(i)):(i=t.getNextSet(n),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,l=-1;do this.findNextPair(t,n,l),s=this.parseFoundFinderPattern(t,i,a),s===null?l=e.getNextSecondBar(t,this.startEnd[0]):o=!1;while(o);var c=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Ae;var d;try{d=this.decodeDataCharacter(t,s,a,!1)}catch(u){d=null,console.log(u)}return new Mu(c,d,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(n))o=0;else{var l=n[n.length-1];o=l.getFinderPattern().getStartEnd()[1]}var c=n.length%2!==0;this.startFromEven&&(c=!c);for(var d=!1;o<s&&(d=!t.get(o),!!d);)o++;for(var u=0,p=o,h=o;h<s;h++)if(t.get(h)!==d)a[u]++;else{if(u===3){if(c&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=p,this.startEnd[1]=h;return}c&&e.reverseCounters(a),p+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,u--}else u++;a[u]=1,d=!d}throw new Ae},e.reverseCounters=function(t){for(var n=t.length,i=0;i<n/2;++i){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,n,i){var a,s,o;if(i){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,a=this.startEnd[0]-l,s=l,o=this.startEnd[1]}else s=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var c=this.getDecodeFinderCounters();ar.arraycopy(c,0,c,1,c.length-1),c[0]=a;var d;try{d=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new W1(d,[s,o],s,o,n)},e.prototype.decodeDataCharacter=function(t,n,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(t,n.getStartEnd()[0],s);else{e.recordPattern(t,n.getStartEnd()[1],s);for(var l=0,c=s.length-1;l<c;l++,c--){var d=s[l];s[l]=s[c],s[c]=d}}var u=17,p=Mt.sum(new Int32Array(s))/u,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(p-h)/h>.3)throw new Ae;for(var m=this.getOddCounts(),v=this.getEvenCounts(),b=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var I=1*s[l]/p,N=I+.5;if(N<1){if(I<.3)throw new Ae;N=1}else if(N>8){if(I>8.7)throw new Ae;N=8}var _=l/2;(l&1)===0?(m[_]=N,b[_]=I-N):(v[_]=N,y[_]=I-N)}this.adjustOddEvenCounts(u);for(var F=4*n.getValue()+(i?0:2)+(a?0:1)-1,R=0,U=0,l=m.length-1;l>=0;l--){if(e.isNotA1left(n,i,a)){var j=e.WEIGHTS[F][2*l];U+=m[l]*j}R+=m[l]}for(var E=0,l=v.length-1;l>=0;l--)if(e.isNotA1left(n,i,a)){var j=e.WEIGHTS[F][2*l+1];E+=v[l]*j}var B=U+E;if((R&1)!==0||R>13||R<4)throw new Ae;var k=(13-R)/2,S=e.SYMBOL_WIDEST[k],D=9-S,w=Lo.getRSSvalue(m,S,!0),M=Lo.getRSSvalue(v,D,!1),O=e.EVEN_TOTAL_SUBSET[k],L=e.GSUM[k],X=w*O+M+L;return new nc(X,B)},e.isNotA1left=function(t,n,i){return!(t.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(t){var n=Mt.sum(new Int32Array(this.getOddCounts())),i=Mt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;n>13?s=!0:n<4&&(a=!0);var o=!1,l=!1;i>13?l=!0:i<4&&(o=!0);var c=n+i-t,d=(n&1)===1,u=(i&1)===0;if(c===1)if(d){if(u)throw new Ae;s=!0}else{if(!u)throw new Ae;l=!0}else if(c===-1)if(d){if(u)throw new Ae;a=!0}else{if(!u)throw new Ae;o=!0}else if(c===0){if(d){if(!u)throw new Ae;n<i?(a=!0,l=!0):(s=!0,o=!0)}else if(u)throw new Ae}else throw new Ae;if(a){if(s)throw new Ae;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new Ae;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(eo),rx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nx=function(r){rx(e,r);function e(t,n,i){var a=r.call(this,t,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(nc),ix=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bu=function(r){ix(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,i){var a,s,o,l,c=this.decodePair(n,!1,t,i);e.addOrTally(this.possibleLeftPairs,c),n.reverse();var d=this.decodePair(n,!0,t,i);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var u=sd(this.possibleLeftPairs),p=u.next();!p.done;p=u.next()){var h=p.value;if(h.getCount()>1)try{for(var m=(o=void 0,sd(this.possibleRightPairs)),v=m.next();!v.done;v=m.next()){var b=v.value;if(b.getCount()>1&&e.checkChecksum(h,b))return e.constructResult(h,b)}}catch(y){o={error:y}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}}}catch(y){a={error:y}}finally{try{p&&!p.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}throw new Ae},e.addOrTally=function(t,n){var i,a;if(n!=null){var s=!1;try{for(var o=sd(t),l=o.next();!l.done;l=o.next()){var c=l.value;if(c.getValue()===n.getValue()){c.incrementCount(),s=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var i=4537077*t.getValue()+n.getValue(),a=new String(i).toString(),s=new Ct,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var l=0,o=0;o<13;o++){var c=s.charAt(o).charCodeAt(0)-48;l+=(o&1)===0?3*c:c}l=10-l%10,l===10&&(l=0),s.append(l.toString());var d=t.getFinderPattern().getResultPoints(),u=n.getFinderPattern().getResultPoints();return new pn(s.toString(),null,0,[d[0],d[1],u[0],u[1]],ot.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var i=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,n,i,a){try{var s=this.findFinderPattern(t,n),o=this.parseFoundFinderPattern(t,i,n,s),l=a==null?null:a.get(fr.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=(s[0]+s[1])/2;n&&(c=t.getSize()-1-c),l.foundPossibleResultPoint(new Ye(c,i))}var d=this.decodeDataCharacter(t,o,!0),u=this.decodeDataCharacter(t,o,!1);return new nx(1597*d.getValue()+u.getValue(),d.getChecksumPortion()+4*u.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)zr.recordPatternInReverse(t,n.getStartEnd()[0],a);else{zr.recordPattern(t,n.getStartEnd()[1]+1,a);for(var o=0,l=a.length-1;o<l;o++,l--){var c=a[o];a[o]=a[l],a[l]=c}}for(var d=i?16:15,u=Mt.sum(new Int32Array(a))/d,p=this.getOddCounts(),h=this.getEvenCounts(),m=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var b=a[o]/u,y=Math.floor(b+.5);y<1?y=1:y>8&&(y=8);var I=Math.floor(o/2);(o&1)===0?(p[I]=y,m[I]=b-y):(h[I]=y,v[I]=b-y)}this.adjustOddEvenCounts(i,d);for(var N=0,_=0,o=p.length-1;o>=0;o--)_*=9,_+=p[o],N+=p[o];for(var F=0,R=0,o=h.length-1;o>=0;o--)F*=9,F+=h[o],R+=h[o];var U=_+3*F;if(i){if((N&1)!==0||N>12||N<4)throw new Ae;var j=(12-N)/2,E=e.OUTSIDE_ODD_WIDEST[j],B=9-E,k=Lo.getRSSvalue(p,E,!1),S=Lo.getRSSvalue(h,B,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[j],w=e.OUTSIDE_GSUM[j];return new nc(k*D+S+w,U)}else{if((R&1)!==0||R>10||R<4)throw new Ae;var j=(10-R)/2,E=e.INSIDE_ODD_WIDEST[j],B=9-E,k=Lo.getRSSvalue(p,E,!0),S=Lo.getRSSvalue(h,B,!1),M=e.INSIDE_ODD_TOTAL_SUBSET[j],w=e.INSIDE_GSUM[j];return new nc(S*M+k+w,U)}},e.prototype.findFinderPattern=function(t,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,o=0;o<a&&(s=!t.get(o),n!==s);)o++;for(var l=0,c=o,d=o;d<a;d++)if(t.get(d)!==s)i[l]++;else{if(l===3){if(eo.isFinderPattern(i))return[c,d];c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,s=!s}throw new Ae},e.prototype.parseFoundFinderPattern=function(t,n,i,a){for(var s=t.get(a[0]),o=a[0]-1;o>=0&&s!==t.get(o);)o--;o++;var l=a[0]-o,c=this.getDecodeFinderCounters(),d=new Int32Array(c.length);ar.arraycopy(c,0,d,1,c.length-1),d[0]=l;var u=this.parseFinderValue(d,e.FINDER_PATTERNS),p=o,h=a[1];return i&&(p=t.getSize()-1-p,h=t.getSize()-1-h),new W1(u,[o,a[1]],p,h,n)},e.prototype.adjustOddEvenCounts=function(t,n){var i=Mt.sum(new Int32Array(this.getOddCounts())),a=Mt.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,l=!1,c=!1;t?(i>12?o=!0:i<4&&(s=!0),a>12?c=!0:a<4&&(l=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?c=!0:a<4&&(l=!0));var d=i+a-n,u=(i&1)===(t?1:0),p=(a&1)===1;if(d===1)if(u){if(p)throw new Ae;o=!0}else{if(!p)throw new Ae;c=!0}else if(d===-1)if(u){if(p)throw new Ae;s=!0}else{if(!p)throw new Ae;l=!0}else if(d===0){if(u){if(!p)throw new Ae;i<a?(s=!0,c=!0):(o=!0,l=!0)}else if(p)throw new Ae}else throw new Ae;if(s){if(o)throw new Ae;eo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&eo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Ae;eo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&eo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(eo),ax=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ts=function(r){ax(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var i=t?t.get(fr.POSSIBLE_FORMATS):null,a=t&&t.get(fr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(fr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(ot.EAN_13)||i.includes(ot.UPC_A)||i.includes(ot.EAN_8)||i.includes(ot.UPC_E))&&n.readers.push(new od(t)),i.includes(ot.CODE_39)&&n.readers.push(new Nu(a,s)),i.includes(ot.CODE_93)&&n.readers.push(new ku),i.includes(ot.CODE_128)&&n.readers.push(new Eu),i.includes(ot.ITF)&&n.readers.push(new Du),i.includes(ot.CODABAR)&&n.readers.push(new Em),i.includes(ot.RSS_14)&&n.readers.push(new Bu),i.includes(ot.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new tx))),n.readers.length===0&&(n.readers.push(new od(t)),n.readers.push(new Nu),n.readers.push(new ku),n.readers.push(new od(t)),n.readers.push(new Eu),n.readers.push(new Du),n.readers.push(new Bu)),n}return e.prototype.decodeRow=function(t,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,n,i)}catch{}throw new Ae},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(zr),ox=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){ox(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new Ts(n),t,n)||this}return e})(Yo);var Fu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ht=function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),Ft=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),sx=function(){function r(e,t,n,i,a,s){var o,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var c=0,d=s.getECCodewords(),u=s.getECBlocks();try{for(var p=Fu(u),h=p.next();!h.done;h=p.next()){var m=h.value;c+=m.getCount()*(m.getDataCodewords()+d)}}catch(v){o={error:v}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(o)throw o.error}}this.totalCodewords=c}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,i;if((e&1)!==0||(t&1)!==0)throw new Fe;try{for(var a=Fu(r.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===t)return o}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new Fe},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new Ht(5,new Ft(1,3))),new r(2,12,12,10,10,new Ht(7,new Ft(1,5))),new r(3,14,14,12,12,new Ht(10,new Ft(1,8))),new r(4,16,16,14,14,new Ht(12,new Ft(1,12))),new r(5,18,18,16,16,new Ht(14,new Ft(1,18))),new r(6,20,20,18,18,new Ht(18,new Ft(1,22))),new r(7,22,22,20,20,new Ht(20,new Ft(1,30))),new r(8,24,24,22,22,new Ht(24,new Ft(1,36))),new r(9,26,26,24,24,new Ht(28,new Ft(1,44))),new r(10,32,32,14,14,new Ht(36,new Ft(1,62))),new r(11,36,36,16,16,new Ht(42,new Ft(1,86))),new r(12,40,40,18,18,new Ht(48,new Ft(1,114))),new r(13,44,44,20,20,new Ht(56,new Ft(1,144))),new r(14,48,48,22,22,new Ht(68,new Ft(1,174))),new r(15,52,52,24,24,new Ht(42,new Ft(2,102))),new r(16,64,64,14,14,new Ht(56,new Ft(2,140))),new r(17,72,72,16,16,new Ht(36,new Ft(4,92))),new r(18,80,80,18,18,new Ht(48,new Ft(4,114))),new r(19,88,88,20,20,new Ht(56,new Ft(4,144))),new r(20,96,96,22,22,new Ht(68,new Ft(4,174))),new r(21,104,104,24,24,new Ht(56,new Ft(6,136))),new r(22,120,120,18,18,new Ht(68,new Ft(6,175))),new r(23,132,132,20,20,new Ht(62,new Ft(8,163))),new r(24,144,144,22,22,new Ht(62,new Ft(8,156),new Ft(2,155))),new r(25,8,18,6,16,new Ht(7,new Ft(1,5))),new r(26,8,32,6,14,new Ht(11,new Ft(1,10))),new r(27,12,26,10,24,new Ht(14,new Ft(1,16))),new r(28,12,36,10,16,new Ht(18,new Ft(1,22))),new r(29,16,36,14,16,new Ht(24,new Ft(1,32))),new r(30,16,48,14,22,new Ht(28,new Ft(1,49)))]},r.VERSIONS=r.buildVersions(),r}(),lx=function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new Fe;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Li(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return sx.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,l=!1,c=!1,d=!1;do if(n===a&&i===0&&!o)e[t++]=this.readCorner1(a,s)&255,n-=2,i+=2,o=!0;else if(n===a-2&&i===0&&(s&3)!==0&&!l)e[t++]=this.readCorner2(a,s)&255,n-=2,i+=2,l=!0;else if(n===a+4&&i===2&&(s&7)===0&&!c)e[t++]=this.readCorner3(a,s)&255,n-=2,i+=2,c=!0;else if(n===a-2&&i===0&&(s&7)===4&&!d)e[t++]=this.readCorner4(a,s)&255,n-=2,i+=2,d=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,a,s)&255),n-=2,i+=2;while(n>=0&&i<s);n+=1,i+=3;do n>=0&&i<s&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,a,s)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<s);if(t!==this.version.getTotalCodewords())throw new Fe;return e},r.prototype.readModule=function(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,i){var a=0;return this.readModule(e-2,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t,n,i)&&(a|=1),a<<=1,this.readModule(e,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e,t,n,i)&&(a|=1),a},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new lt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,o=n/a|0,l=s*i,c=o*a,d=new Li(c,l),u=0;u<s;++u)for(var p=u*i,h=0;h<o;++h)for(var m=h*a,v=0;v<i;++v)for(var b=u*(i+2)+1+v,y=p+v,I=0;I<a;++I){var N=h*(a+2)+1+I;if(e.get(N,b)){var _=m+I;d.set(_,y)}}return d},r}(),zu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cx=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,i,a,s,o=t.getECBlocks(),l=0,c=o.getECBlocks();try{for(var d=zu(c),u=d.next();!u.done;u=d.next()){var p=u.value;l+=p.getCount()}}catch(w){n={error:w}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var h=new Array(l),m=0;try{for(var v=zu(c),b=v.next();!b.done;b=v.next())for(var p=b.value,y=0;y<p.getCount();y++){var I=p.getDataCodewords(),N=o.getECCodewords()+I;h[m++]=new r(I,new Uint8Array(N))}}catch(w){a={error:w}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}for(var _=h[0].codewords.length,F=_-o.getECCodewords(),R=F-1,U=0,y=0;y<R;y++)for(var j=0;j<m;j++)h[j].codewords[y]=e[U++];for(var E=t.getVersionNumber()===24,B=E?8:m,j=0;j<B;j++)h[j].codewords[F-1]=e[U++];for(var k=h[0].codewords.length,y=F;y<k;y++)for(var j=0;j<m;j++){var S=E?(j+8)%m:j,D=E&&S>7?y-1:y;h[S].codewords[D]=e[U++]}if(U!==e.length)throw new lt;return h},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),V1=function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new lt(""+e);var t=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var s=8-n,o=e<s?e:s,l=s-o,c=255>>8-o<<l;t=(a[i]&c)>>l,e-=o,n+=o,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;t=t<<e|(a[i]&c)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}(),Lr;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(Lr||(Lr={}));var dx=function(){function r(){}return r.decode=function(e){var t=new V1(e),n=new Ct,i=new Ct,a=new Array,s=Lr.ASCII_ENCODE;do if(s===Lr.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,i);else{switch(s){case Lr.C40_ENCODE:this.decodeC40Segment(t,n);break;case Lr.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Lr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Lr.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Lr.BASE256_ENCODE:this.decodeBase256Segment(t,n,a);break;default:throw new Fe}s=Lr.ASCII_ENCODE}while(s!==Lr.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new bc(e,n.toString(),a.length===0?null:a,null)},r.decodeAsciiSegment=function(e,t,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new Fe;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Lr.ASCII_ENCODE;if(a===129)return Lr.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return Lr.C40_ENCODE;case 231:return Lr.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return Lr.ANSIX12_ENCODE;case 239:return Lr.TEXT_ENCODE;case 240:return Lr.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new Fe;break}}while(e.available()>0);return Lr.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new Fe;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new Fe}a=0;break;case 3:n?(t.append(String.fromCharCode(l+224)),n=!1):t.append(String.fromCharCode(l+96)),a=0;break;default:throw new Fe}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new Fe;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new Fe}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),a=0}else throw new Fe;break;default:throw new Fe}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new Fe;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var i=(e<<8)+t-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new Fe;for(var o=new Uint8Array(s),l=0;l<s;l++){if(e.available()<8)throw new Fe;o[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(o);try{t.append(Jn.decode(o,Ot.ISO88591))}catch(c){throw new $s("Platform does not support required encoding: "+c.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,i=e-n;return i>=0?i:i+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r}(),fx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ux=function(){function r(){this.rsDecoder=new wc(En.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,i=new lx(e),a=i.getVersion(),s=i.readCodewords(),o=cx.getDataBlocks(s,a),l=0;try{for(var c=fx(o),d=c.next();!d.done;d=c.next()){var u=d.value;l+=u.getNumDataCodewords()}}catch(N){t={error:N}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}for(var p=new Uint8Array(l),h=o.length,m=0;m<h;m++){var v=o[m],b=v.getCodewords(),y=v.getNumDataCodewords();this.correctErrors(b,y);for(var I=0;I<y;I++)p[I*h+m]=b[I]}return dx.decode(p)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Gr}for(var i=0;i<t;i++)e[i]=n[i]},r}(),hx=function(){function r(e){this.image=e,this.rectangleDetector=new qd(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new Ae;t=this.shiftToModuleCenter(t);var n=t[0],i=t[1],a=t[2],s=t[3],o=this.transitionsBetween(n,s)+1,l=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(l&1)===1&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var c=r.sampleGrid(this.image,n,i,a,s,o,l);return new Sf(c,[n,i,a,s])},r.shiftPoint=function(e,t,n){var i=(t.getX()-e.getX())/(n+1),a=(t.getY()-e.getY())/(n+1);return new Ye(e.getX()+i,e.getY()+a)},r.moveAway=function(e,t,n){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<n?a-=1:a+=1,new Ye(i,a)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,n),o=this.transitionsBetween(n,i),l=this.transitionsBetween(i,a),c=this.transitionsBetween(a,t),d=s,u=[a,t,n,i];return d>o&&(d=o,u[0]=t,u[1]=n,u[2]=i,u[3]=a),d>l&&(d=l,u[0]=n,u[1]=i,u[2]=a,u[3]=t),d>c&&(u[0]=i,u[1]=a,u[2]=t,u[3]=n),u},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=r.shiftPoint(n,i,(s+1)*4),l=r.shiftPoint(i,n,(s+1)*4),c=this.transitionsBetween(o,t),d=this.transitionsBetween(l,a);return c<d?(e[0]=t,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=this.transitionsBetween(n,a),l=r.shiftPoint(t,n,(o+1)*4),c=r.shiftPoint(i,n,(s+1)*4);s=this.transitionsBetween(l,a),o=this.transitionsBetween(c,a);var d=new Ye(a.getX()+(i.getX()-n.getX())/(s+1),a.getY()+(i.getY()-n.getY())/(s+1)),u=new Ye(a.getX()+(t.getX()-n.getX())/(o+1),a.getY()+(t.getY()-n.getY())/(o+1));if(!this.isValid(d))return this.isValid(u)?u:null;if(!this.isValid(u))return d;var p=this.transitionsBetween(l,d)+this.transitionsBetween(c,d),h=this.transitionsBetween(l,u)+this.transitionsBetween(c,u);return p>h?d:u},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,o=this.transitionsBetween(i,a)+1,l=r.shiftPoint(t,n,o*4),c=r.shiftPoint(i,n,s*4);s=this.transitionsBetween(l,a)+1,o=this.transitionsBetween(c,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var d=(t.getX()+n.getX()+i.getX()+a.getX())/4,u=(t.getY()+n.getY()+i.getY()+a.getY())/4;t=r.moveAway(t,d,u),n=r.moveAway(n,d,u),i=r.moveAway(i,d,u),a=r.moveAway(a,d,u);var p,h;return l=r.shiftPoint(t,n,o*4),l=r.shiftPoint(l,a,s*4),p=r.shiftPoint(n,t,o*4),p=r.shiftPoint(p,i,s*4),c=r.shiftPoint(i,a,o*4),c=r.shiftPoint(c,n,s*4),h=r.shiftPoint(a,i,o*4),h=r.shiftPoint(h,t,s*4),[l,p,c,h]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,i,a,s,o){var l=_f.getInstance();return l.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-i)>Math.abs(a-n);if(o){var l=n;n=i,i=l,l=a,a=s,s=l}for(var c=Math.abs(a-n),d=Math.abs(s-i),u=-c/2,p=i<s?1:-1,h=n<a?1:-1,m=0,v=this.image.get(o?i:n,o?n:i),b=n,y=i;b!==a;b+=h){var I=this.image.get(o?y:b,o?b:y);if(I!==v&&(m++,v=I),u+=d,u>0){if(y===s)break;y+=p,u-=c}}return m},r}(),$d=function(){function r(){this.decoder=new ux}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,i;if(t!=null&&t.has(fr.PURE_BARCODE)){var a=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=r.NO_POINTS}else{var s=new hx(e.getBlackMatrix()).detect();n=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=n.getRawBytes(),l=new pn(n.getText(),o,8*o.length,i,ot.DATA_MATRIX,ar.currentTimeMillis()),c=n.getByteSegments();c!=null&&l.putMetadata(on.BYTE_SEGMENTS,c);var d=n.getECLevel();return d!=null&&l.putMetadata(on.ERROR_CORRECTION_LEVEL,d),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new Ae;var i=this.moduleSize(t,e),a=t[1],s=n[1],o=t[0],l=n[0],c=(l-o+1)/i,d=(s-a+1)/i;if(c<=0||d<=0)throw new Ae;var u=i/2;a+=u,o+=u;for(var p=new Li(c,d),h=0;h<d;h++)for(var m=a+h*i,v=0;v<c;v++)e.get(o+v*i,m)&&p.set(v,h);return p},r.moduleSize=function(e,t){for(var n=t.getWidth(),i=e[0],a=e[1];i<n&&t.get(i,a);)i++;if(i===n)throw new Ae;var s=i-e[0];if(s===0)throw new Ae;return s},r.NO_POINTS=[],r}(),px=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){px(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new $d,t)||this}return e})(Yo);var Po;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(Po||(Po={}));var gx=function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new fi(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new lt;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(Po.L,"L",1),r.M=new r(Po.M,"M",0),r.Q=new r(Po.Q,"Q",3),r.H=new r(Po.H,"H",2),r}(),mx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G1=function(){function r(e){this.errorCorrectionLevel=gx.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return Et.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=mx(r.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var c=l.value,d=c[0];if(d===e||d===t)return new r(c[1]);var u=r.numBitsDiffering(e,d);u<a&&(s=c[1],a=u),e!==t&&(u=r.numBitsDiffering(t,d),u<a&&(s=c[1],a=u))}}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a<=3?new r(s):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r}(),xx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xe=function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,i=this.ecBlocks;try{for(var a=xx(i),s=a.next();!s.done;s=a.next()){var o=s.value;n+=o.getCount()}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),te=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),vx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oo=function(){function r(e,t){for(var n,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var o=0,l=a[0].getECCodewordsPerBlock(),c=a[0].getECBlocks();try{for(var d=vx(c),u=d.next();!u.done;u=d.next()){var p=u.value;o+=p.getCount()*(p.getDataCodewords()+l)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}this.totalCodewords=o}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Fe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Fe}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new lt;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=0;i<r.VERSION_DECODE_INFO.length;i++){var a=r.VERSION_DECODE_INFO[i];if(a===e)return r.getVersionForNumber(i+7);var s=G1.numBitsDiffering(e,a);s<t&&(n=i+7,t=s)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Li(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<n;s++)i===0&&(s===0||s===n-1)||i===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new xe(7,new te(1,19)),new xe(10,new te(1,16)),new xe(13,new te(1,13)),new xe(17,new te(1,9))),new r(2,Int32Array.from([6,18]),new xe(10,new te(1,34)),new xe(16,new te(1,28)),new xe(22,new te(1,22)),new xe(28,new te(1,16))),new r(3,Int32Array.from([6,22]),new xe(15,new te(1,55)),new xe(26,new te(1,44)),new xe(18,new te(2,17)),new xe(22,new te(2,13))),new r(4,Int32Array.from([6,26]),new xe(20,new te(1,80)),new xe(18,new te(2,32)),new xe(26,new te(2,24)),new xe(16,new te(4,9))),new r(5,Int32Array.from([6,30]),new xe(26,new te(1,108)),new xe(24,new te(2,43)),new xe(18,new te(2,15),new te(2,16)),new xe(22,new te(2,11),new te(2,12))),new r(6,Int32Array.from([6,34]),new xe(18,new te(2,68)),new xe(16,new te(4,27)),new xe(24,new te(4,19)),new xe(28,new te(4,15))),new r(7,Int32Array.from([6,22,38]),new xe(20,new te(2,78)),new xe(18,new te(4,31)),new xe(18,new te(2,14),new te(4,15)),new xe(26,new te(4,13),new te(1,14))),new r(8,Int32Array.from([6,24,42]),new xe(24,new te(2,97)),new xe(22,new te(2,38),new te(2,39)),new xe(22,new te(4,18),new te(2,19)),new xe(26,new te(4,14),new te(2,15))),new r(9,Int32Array.from([6,26,46]),new xe(30,new te(2,116)),new xe(22,new te(3,36),new te(2,37)),new xe(20,new te(4,16),new te(4,17)),new xe(24,new te(4,12),new te(4,13))),new r(10,Int32Array.from([6,28,50]),new xe(18,new te(2,68),new te(2,69)),new xe(26,new te(4,43),new te(1,44)),new xe(24,new te(6,19),new te(2,20)),new xe(28,new te(6,15),new te(2,16))),new r(11,Int32Array.from([6,30,54]),new xe(20,new te(4,81)),new xe(30,new te(1,50),new te(4,51)),new xe(28,new te(4,22),new te(4,23)),new xe(24,new te(3,12),new te(8,13))),new r(12,Int32Array.from([6,32,58]),new xe(24,new te(2,92),new te(2,93)),new xe(22,new te(6,36),new te(2,37)),new xe(26,new te(4,20),new te(6,21)),new xe(28,new te(7,14),new te(4,15))),new r(13,Int32Array.from([6,34,62]),new xe(26,new te(4,107)),new xe(22,new te(8,37),new te(1,38)),new xe(24,new te(8,20),new te(4,21)),new xe(22,new te(12,11),new te(4,12))),new r(14,Int32Array.from([6,26,46,66]),new xe(30,new te(3,115),new te(1,116)),new xe(24,new te(4,40),new te(5,41)),new xe(20,new te(11,16),new te(5,17)),new xe(24,new te(11,12),new te(5,13))),new r(15,Int32Array.from([6,26,48,70]),new xe(22,new te(5,87),new te(1,88)),new xe(24,new te(5,41),new te(5,42)),new xe(30,new te(5,24),new te(7,25)),new xe(24,new te(11,12),new te(7,13))),new r(16,Int32Array.from([6,26,50,74]),new xe(24,new te(5,98),new te(1,99)),new xe(28,new te(7,45),new te(3,46)),new xe(24,new te(15,19),new te(2,20)),new xe(30,new te(3,15),new te(13,16))),new r(17,Int32Array.from([6,30,54,78]),new xe(28,new te(1,107),new te(5,108)),new xe(28,new te(10,46),new te(1,47)),new xe(28,new te(1,22),new te(15,23)),new xe(28,new te(2,14),new te(17,15))),new r(18,Int32Array.from([6,30,56,82]),new xe(30,new te(5,120),new te(1,121)),new xe(26,new te(9,43),new te(4,44)),new xe(28,new te(17,22),new te(1,23)),new xe(28,new te(2,14),new te(19,15))),new r(19,Int32Array.from([6,30,58,86]),new xe(28,new te(3,113),new te(4,114)),new xe(26,new te(3,44),new te(11,45)),new xe(26,new te(17,21),new te(4,22)),new xe(26,new te(9,13),new te(16,14))),new r(20,Int32Array.from([6,34,62,90]),new xe(28,new te(3,107),new te(5,108)),new xe(26,new te(3,41),new te(13,42)),new xe(30,new te(15,24),new te(5,25)),new xe(28,new te(15,15),new te(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new xe(28,new te(4,116),new te(4,117)),new xe(26,new te(17,42)),new xe(28,new te(17,22),new te(6,23)),new xe(30,new te(19,16),new te(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new xe(28,new te(2,111),new te(7,112)),new xe(28,new te(17,46)),new xe(30,new te(7,24),new te(16,25)),new xe(24,new te(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new xe(30,new te(4,121),new te(5,122)),new xe(28,new te(4,47),new te(14,48)),new xe(30,new te(11,24),new te(14,25)),new xe(30,new te(16,15),new te(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new xe(30,new te(6,117),new te(4,118)),new xe(28,new te(6,45),new te(14,46)),new xe(30,new te(11,24),new te(16,25)),new xe(30,new te(30,16),new te(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new xe(26,new te(8,106),new te(4,107)),new xe(28,new te(8,47),new te(13,48)),new xe(30,new te(7,24),new te(22,25)),new xe(30,new te(22,15),new te(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new xe(28,new te(10,114),new te(2,115)),new xe(28,new te(19,46),new te(4,47)),new xe(28,new te(28,22),new te(6,23)),new xe(30,new te(33,16),new te(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new xe(30,new te(8,122),new te(4,123)),new xe(28,new te(22,45),new te(3,46)),new xe(30,new te(8,23),new te(26,24)),new xe(30,new te(12,15),new te(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new xe(30,new te(3,117),new te(10,118)),new xe(28,new te(3,45),new te(23,46)),new xe(30,new te(4,24),new te(31,25)),new xe(30,new te(11,15),new te(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new xe(30,new te(7,116),new te(7,117)),new xe(28,new te(21,45),new te(7,46)),new xe(30,new te(1,23),new te(37,24)),new xe(30,new te(19,15),new te(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new xe(30,new te(5,115),new te(10,116)),new xe(28,new te(19,47),new te(10,48)),new xe(30,new te(15,24),new te(25,25)),new xe(30,new te(23,15),new te(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new xe(30,new te(13,115),new te(3,116)),new xe(28,new te(2,46),new te(29,47)),new xe(30,new te(42,24),new te(1,25)),new xe(30,new te(23,15),new te(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new xe(30,new te(17,115)),new xe(28,new te(10,46),new te(23,47)),new xe(30,new te(10,24),new te(35,25)),new xe(30,new te(19,15),new te(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new xe(30,new te(17,115),new te(1,116)),new xe(28,new te(14,46),new te(21,47)),new xe(30,new te(29,24),new te(19,25)),new xe(30,new te(11,15),new te(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new xe(30,new te(13,115),new te(6,116)),new xe(28,new te(14,46),new te(23,47)),new xe(30,new te(44,24),new te(7,25)),new xe(30,new te(59,16),new te(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new xe(30,new te(12,121),new te(7,122)),new xe(28,new te(12,47),new te(26,48)),new xe(30,new te(39,24),new te(14,25)),new xe(30,new te(22,15),new te(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new xe(30,new te(6,121),new te(14,122)),new xe(28,new te(6,47),new te(34,48)),new xe(30,new te(46,24),new te(10,25)),new xe(30,new te(2,15),new te(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new xe(30,new te(17,122),new te(4,123)),new xe(28,new te(29,46),new te(14,47)),new xe(30,new te(49,24),new te(10,25)),new xe(30,new te(24,15),new te(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new xe(30,new te(4,122),new te(18,123)),new xe(28,new te(13,46),new te(32,47)),new xe(30,new te(48,24),new te(14,25)),new xe(30,new te(42,15),new te(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new xe(30,new te(20,117),new te(4,118)),new xe(28,new te(40,47),new te(7,48)),new xe(30,new te(43,24),new te(22,25)),new xe(30,new te(10,15),new te(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new xe(30,new te(19,118),new te(6,119)),new xe(28,new te(18,47),new te(31,48)),new xe(30,new te(34,24),new te(34,25)),new xe(30,new te(20,15),new te(61,16)))],r}(),Hr;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(Hr||(Hr={}));var Uu=function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)},r.values=new Map([[Hr.DATA_MASK_000,new r(Hr.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Hr.DATA_MASK_001,new r(Hr.DATA_MASK_001,function(e,t){return(e&1)===0})],[Hr.DATA_MASK_010,new r(Hr.DATA_MASK_010,function(e,t){return t%3===0})],[Hr.DATA_MASK_011,new r(Hr.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Hr.DATA_MASK_100,new r(Hr.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Hr.DATA_MASK_101,new r(Hr.DATA_MASK_101,function(e,t){return e*t%6===0})],[Hr.DATA_MASK_110,new r(Hr.DATA_MASK_110,function(e,t){return e*t%6<3})],[Hr.DATA_MASK_111,new r(Hr.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r}(),yx=function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new Fe;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,n=i-1;n>=s;n--)a=this.copyBit(8,n,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=G1.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Fe},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return oo.getVersionForNumber(t);for(var n=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)n=this.copyBit(s,a,n);var o=oo.decodeVersionInformation(n);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;n=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)n=this.copyBit(s,a,n);if(o=oo.decodeVersionInformation(n),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new Fe},r.prototype.copyBit=function(e,t,n){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=Uu.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,o=new Uint8Array(t.getTotalCodewords()),l=0,c=0,d=0,u=i-1;u>0;u-=2){u===6&&u--;for(var p=0;p<i;p++)for(var h=s?i-1-p:p,m=0;m<2;m++)a.get(u-m,h)||(d++,c<<=1,this.bitMatrix.get(u-m,h)&&(c|=1),d===8&&(o[l++]=c,d=0,c=0));s=!s}if(l!==t.getTotalCodewords())throw new Fe;return o},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Uu.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},r}(),Wu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bx=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var i,a,s,o;if(e.length!==t.getTotalCodewords())throw new lt;var l=t.getECBlocksForLevel(n),c=0,d=l.getECBlocks();try{for(var u=Wu(d),p=u.next();!p.done;p=u.next()){var h=p.value;c+=h.getCount()}}catch(D){i={error:D}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var m=new Array(c),v=0;try{for(var b=Wu(d),y=b.next();!y.done;y=b.next())for(var h=y.value,I=0;I<h.getCount();I++){var N=h.getDataCodewords(),_=l.getECCodewordsPerBlock()+N;m[v++]=new r(N,new Uint8Array(_))}}catch(D){s={error:D}}finally{try{y&&!y.done&&(o=b.return)&&o.call(b)}finally{if(s)throw s.error}}for(var F=m[0].codewords.length,R=m.length-1;R>=0;){var U=m[R].codewords.length;if(U===F)break;R--}R++;for(var j=F-l.getECCodewordsPerBlock(),E=0,I=0;I<j;I++)for(var B=0;B<v;B++)m[B].codewords[I]=e[E++];for(var B=R;B<v;B++)m[B].codewords[j]=e[E++];for(var k=m[0].codewords.length,I=j;I<k;I++)for(var B=0;B<v;B++){var S=B<R?I:I+1;m[B].codewords[S]=e[E++]}return m},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),Kn;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(Kn||(Kn={}));var lr=function(){function r(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new lt;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(Kn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(Kn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(Kn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(Kn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(Kn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(Kn.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(Kn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(Kn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(Kn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(Kn.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r}(),wx=function(){function r(){}return r.decode=function(e,t,n,i){var a=new V1(e),s=new Ct,o=new Array,l=-1,c=-1;try{var d=null,u=!1,p=void 0;do{if(a.available()<4)p=lr.TERMINATOR;else{var h=a.readBits(4);p=lr.forBits(h)}switch(p){case lr.TERMINATOR:break;case lr.FNC1_FIRST_POSITION:case lr.FNC1_SECOND_POSITION:u=!0;break;case lr.STRUCTURED_APPEND:if(a.available()<16)throw new Fe;l=a.readBits(8),c=a.readBits(8);break;case lr.ECI:var m=r.parseECIValue(a);if(d=Br.getCharacterSetECIByValue(m),d===null)throw new Fe;break;case lr.HANZI:var v=a.readBits(4),b=a.readBits(p.getCharacterCountBits(t));v===r.GB2312_SUBSET&&r.decodeHanziSegment(a,s,b);break;default:var y=a.readBits(p.getCharacterCountBits(t));switch(p){case lr.NUMERIC:r.decodeNumericSegment(a,s,y);break;case lr.ALPHANUMERIC:r.decodeAlphanumericSegment(a,s,y,u);break;case lr.BYTE:r.decodeByteSegment(a,s,y,d,o,i);break;case lr.KANJI:r.decodeKanjiSegment(a,s,y);break;default:throw new Fe}break}}while(p!==lr.TERMINATOR)}catch{throw new Fe}return new bc(e,s.toString(),o.length===0?null:o,n===null?null:n.toString(),l,c)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new Fe;for(var i=new Uint8Array(2*n),a=0;n>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,n--}try{t.append(Jn.decode(i,Ot.GB2312))}catch(l){throw new Fe(l)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new Fe;for(var i=new Uint8Array(2*n),a=0;n>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,n--}try{t.append(Jn.decode(i,Ot.SHIFT_JIS))}catch(l){throw new Fe(l)}},r.decodeByteSegment=function(e,t,n,i,a,s){if(8*n>e.available())throw new Fe;for(var o=new Uint8Array(n),l=0;l<n;l++)o[l]=e.readBits(8);var c;i===null?c=Ot.guessEncoding(o,s):c=i.getName();try{t.append(Jn.decode(o,c))}catch(d){throw new Fe(d)}a.push(o)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new Fe;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,i){for(var a=t.length();n>1;){if(e.available()<11)throw new Fe;var s=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(s/45))),t.append(r.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new Fe;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new Fe;var i=e.readBits(10);if(i>=1e3)throw new Fe;t.append(r.toAlphaNumericChar(Math.floor(i/100))),t.append(r.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(r.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new Fe;var a=e.readBits(7);if(a>=100)throw new Fe;t.append(r.toAlphaNumericChar(Math.floor(a/10))),t.append(r.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new Fe;var s=e.readBits(4);if(s>=10)throw new Fe;t.append(r.toAlphaNumericChar(s))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new Fe},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r}(),$1=function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r}(),Hu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ax=function(){function r(){this.rsDecoder=new wc(En.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Li.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new yx(e),i=null;try{return this.decodeBitMatrixParser(n,t)}catch(s){i=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,t);return a.setOther(new $1(!0)),a}catch(s){throw i!==null?i:s}},r.prototype.decodeBitMatrixParser=function(e,t){var n,i,a,s,o=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=bx.getDataBlocks(c,o,l),u=0;try{for(var p=Hu(d),h=p.next();!h.done;h=p.next()){var m=h.value;u+=m.getNumDataCodewords()}}catch(R){n={error:R}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}var v=new Uint8Array(u),b=0;try{for(var y=Hu(d),I=y.next();!I.done;I=y.next()){var m=I.value,N=m.getCodewords(),_=m.getNumDataCodewords();this.correctErrors(N,_);for(var F=0;F<_;F++)v[b++]=N[F]}}catch(R){a={error:R}}finally{try{I&&!I.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}return wx.decode(v,o,l,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Gr}for(var i=0;i<t;i++)e[i]=n[i]},r}(),Sx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_x=function(r){Sx(e,r);function e(t,n,i){var a=r.call(this,t,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var a=(this.getX()+n)/2,s=(this.getY()+t)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(Ye),Cx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ix=function(){function r(e,t,n,i,a,s,o){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,i=e+n,a=this.startY+t/2,s=new Int32Array(3),o=this.image,l=0;l<t;l++){var c=a+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var d=e;d<i&&!o.get(d,c);)d++;for(var u=0;d<i;){if(o.get(d,c))if(u===1)s[1]++;else if(u===2){if(this.foundPatternCross(s)){var p=this.handlePossibleCenter(s,c,d);if(p!==null)return p}s[0]=s[2],s[1]=1,s[2]=0,u=1}else s[++u]++;else u===1&&u++,s[u]++;d++}if(this.foundPatternCross(s)){var p=this.handlePossibleCenter(s,c,i);if(p!==null)return p}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Ae},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=e;l>=0&&a.get(t,l)&&o[1]<=n;)o[1]++,l--;if(l<0||o[1]>n)return NaN;for(;l>=0&&!a.get(t,l)&&o[0]<=n;)o[0]++,l--;if(o[0]>n)return NaN;for(l=e+1;l<s&&a.get(t,l)&&o[1]<=n;)o[1]++,l++;if(l===s||o[1]>n)return NaN;for(;l<s&&!a.get(t,l)&&o[2]<=n;)o[2]++,l++;if(o[2]>n)return NaN;var c=o[0]+o[1]+o[2];return 5*Math.abs(c-i)>=2*i?NaN:this.foundPatternCross(o)?r.centerFromEnd(o,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var i,a,s=e[0]+e[1]+e[2],o=r.centerFromEnd(e,n),l=this.crossCheckVertical(t,o,2*e[1],s);if(!isNaN(l)){var c=(e[0]+e[1]+e[2])/3;try{for(var d=Cx(this.possibleCenters),u=d.next();!u.done;u=d.next()){var p=u.value;if(p.aboutEquals(c,l,o))return p.combineEstimate(l,o,c)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var h=new _x(o,l,c);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},r}(),Ex=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nx=function(r){Ex(e,r);function e(t,n,i,a){var s=r.call(this,t,n)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var a=this.count+1,s=(this.count*this.getX()+n)/a,o=(this.count*this.getY()+t)/a,l=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,l,a)},e}(Ye),kx=function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r}(),Cs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dx=function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(fr.TRY_HARDER)!==void 0,n=e!=null&&e.get(fr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*r.MAX_MODULES));(o<r.MIN_SKIP||t)&&(o=r.MIN_SKIP);for(var l=!1,c=new Int32Array(5),d=o-1;d<a&&!l;d+=o){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var u=0,p=0;p<s;p++)if(i.get(p,d))(u&1)===1&&u++,c[u]++;else if((u&1)===0)if(u===4)if(r.foundPatternCross(c)){var h=this.handlePossibleCenter(c,d,p,n);if(h===!0)if(o=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>c[2]&&(d+=m-c[2]-o,p=s-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,u=3;continue}u=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,u=3;else c[++u]++;else c[u]++;if(r.foundPatternCross(c)){var h=this.handlePossibleCenter(c,d,s,n);h===!0&&(o=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var v=this.selectBestPatterns();return Ye.orderBestPatterns(v),new kx(v)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&t>=s&&o.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&a[1]<=n;)a[1]++,s++;if(e<s||t<s||a[1]>n)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&a[0]<=n;)a[0]++,s++;if(a[0]>n)return!1;var l=o.getHeight(),c=o.getWidth();for(s=1;e+s<l&&t+s<c&&o.get(t+s,e+s);)a[2]++,s++;if(e+s>=l||t+s>=c)return!1;for(;e+s<l&&t+s<c&&!o.get(t+s,e+s)&&a[3]<n;)a[3]++,s++;if(e+s>=l||t+s>=c||a[3]>=n)return!1;for(;e+s<l&&t+s<c&&o.get(t+s,e+s)&&a[4]<n;)a[4]++,s++;if(a[4]>=n)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&r.foundPatternCross(a)},r.prototype.crossCheckVertical=function(e,t,n,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(t,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(t,l)&&o[1]<=n;)o[1]++,l--;if(l<0||o[1]>n)return NaN;for(;l>=0&&a.get(t,l)&&o[0]<=n;)o[0]++,l--;if(o[0]>n)return NaN;for(l=e+1;l<s&&a.get(t,l);)o[2]++,l++;if(l===s)return NaN;for(;l<s&&!a.get(t,l)&&o[3]<n;)o[3]++,l++;if(l===s||o[3]>=n)return NaN;for(;l<s&&a.get(t,l)&&o[4]<n;)o[4]++,l++;if(o[4]>=n)return NaN;var c=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(c-i)>=2*i?NaN:r.foundPatternCross(o)?r.centerFromEnd(o,l):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,t);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,t)&&o[1]<=n;)o[1]++,l--;if(l<0||o[1]>n)return NaN;for(;l>=0&&a.get(l,t)&&o[0]<=n;)o[0]++,l--;if(o[0]>n)return NaN;for(l=e+1;l<s&&a.get(l,t);)o[2]++,l++;if(l===s)return NaN;for(;l<s&&!a.get(l,t)&&o[3]<n;)o[3]++,l++;if(l===s||o[3]>=n)return NaN;for(;l<s&&a.get(l,t)&&o[4]<n;)o[4]++,l++;if(o[4]>=n)return NaN;var c=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(c-i)>=i?NaN:r.foundPatternCross(o)?r.centerFromEnd(o,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=r.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var l=a/7,c=!1,d=this.possibleCenters,u=0,p=d.length;u<p;u++){var h=d[u];if(h.aboutEquals(l,o,s)){d[u]=h.combineEstimate(o,s,l),c=!0;break}}if(!c){var m=new Nx(s,o,l);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=Cs(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=r.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,i,a=0,s=0,o=this.possibleCenters.length;try{for(var l=Cs(this.possibleCenters),c=l.next();!c.done;c=l.next()){var d=c.value;d.getCount()>=r.CENTER_QUORUM&&(a++,s+=d.getEstimatedModuleSize())}}catch(v){e={error:v}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var u=s/o,p=0;try{for(var h=Cs(this.possibleCenters),m=h.next();!m.done;m=h.next()){var d=m.value;p+=Math.abs(d.getEstimatedModuleSize()-u)}}catch(v){n={error:v}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return p<=.05*s},r.prototype.selectBestPatterns=function(){var e,t,n,i,a=this.possibleCenters.length;if(a<3)throw new Ae;var s=this.possibleCenters,o;if(a>3){var l=0,c=0;try{for(var d=Cs(this.possibleCenters),u=d.next();!u.done;u=d.next()){var p=u.value,h=p.getEstimatedModuleSize();l+=h,c+=h*h}}catch(F){e={error:F}}finally{try{u&&!u.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}o=l/a;var m=Math.sqrt(c/a-o*o);s.sort(function(F,R){var U=Math.abs(R.getEstimatedModuleSize()-o),j=Math.abs(F.getEstimatedModuleSize()-o);return U<j?-1:U>j?1:0});for(var v=Math.max(.2*o,m),b=0;b<s.length&&s.length>3;b++){var y=s[b];Math.abs(y.getEstimatedModuleSize()-o)>v&&(s.splice(b,1),b--)}}if(s.length>3){var l=0;try{for(var I=Cs(s),N=I.next();!N.done;N=I.next()){var _=N.value;l+=_.getEstimatedModuleSize()}}catch(R){n={error:R}}finally{try{N&&!N.done&&(i=I.return)&&i.call(I)}finally{if(n)throw n.error}}o=l/s.length,s.sort(function(R,U){if(U.getCount()===R.getCount()){var j=Math.abs(U.getEstimatedModuleSize()-o),E=Math.abs(R.getEstimatedModuleSize()-o);return j<E?1:j>E?-1:0}else return U.getCount()-R.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r}(),jx=function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(fr.NEED_RESULT_POINT_CALLBACK);var t=new Dx(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,n,i);if(a<1)throw new Ae("No pattern found in proccess finder.");var s=r.computeDimension(t,n,i,a),o=oo.getProvisionalVersionForDimension(s),l=o.getDimensionForVersion()-7,c=null;if(o.getAlignmentPatternCenters().length>0)for(var d=n.getX()-t.getX()+i.getX(),u=n.getY()-t.getY()+i.getY(),p=1-3/l,h=Math.floor(t.getX()+p*(d-t.getX())),m=Math.floor(t.getY()+p*(u-t.getY())),v=4;v<=16;v<<=1)try{c=this.findAlignmentInRegion(a,h,m,v);break}catch(N){if(!(N instanceof Ae))throw N}var b=r.createTransform(t,n,i,c,s),y=r.sampleGrid(this.image,b,s),I;return c===null?I=[i,t,n]:I=[i,t,n,c],new Sf(y,I)},r.createTransform=function(e,t,n,i,a){var s=a-3.5,o,l,c,d;return i!==null?(o=i.getX(),l=i.getY(),c=s-3,d=c):(o=t.getX()-e.getX()+n.getX(),l=t.getY()-e.getY()+n.getY(),c=s,d=s),U1.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,c,d,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,l,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var i=_f.getInstance();return i.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,i){var a=Mt.round(Ye.distance(e,t)/i),s=Mt.round(Ye.distance(e,n)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new Ae("Dimensions could be not found.")}return o},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,n,i),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var l=Math.floor(t-(i-t)*s);return s=1,l<0?(s=t/(t-l),l=0):l>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,o,l),a-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,i){var a=Math.abs(i-t)>Math.abs(n-e);if(a){var s=e;e=t,t=s,s=n,n=i,i=s}for(var o=Math.abs(n-e),l=Math.abs(i-t),c=-o/2,d=e<n?1:-1,u=t<i?1:-1,p=0,h=n+d,m=e,v=t;m!==h;m+=d){var b=a?v:m,y=a?m:v;if(p===1===this.image.get(b,y)){if(p===2)return Mt.distance(m,v,e,t);p++}if(c+=l,c>0){if(v===i)break;v+=u,c-=o}}return p===2?Mt.distance(n+d,i,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,i){var a=Math.floor(i*e),s=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-s<e*3)throw new Ae("Alignment top exceeds estimated module size.");var l=Math.max(0,n-a),c=Math.min(this.image.getHeight()-1,n+a);if(c-l<e*3)throw new Ae("Alignment bottom exceeds estimated module size.");var d=new Ix(this.image,s,l,o-s,c-l,e,this.resultPointCallback);return d.find()},r}(),Xd=function(){function r(){this.decoder=new Ax}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,i;if(t!=null&&t.get(fr.PURE_BARCODE)!==void 0){var a=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),i=r.NO_POINTS}else{var s=new jx(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}n.getOther()instanceof $1&&n.getOther().applyMirroredCorrection(i);var o=new pn(n.getText(),n.getRawBytes(),void 0,i,ot.QR_CODE,void 0),l=n.getByteSegments();l!==null&&o.putMetadata(on.BYTE_SEGMENTS,l);var c=n.getECLevel();return c!==null&&o.putMetadata(on.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(o.putMetadata(on.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),o.putMetadata(on.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),o},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new Ae;var i=this.moduleSize(t,e),a=t[1],s=n[1],o=t[0],l=n[0];if(o>=l||a>=s)throw new Ae;if(s-a!==l-o&&(l=o+(s-a),l>=e.getWidth()))throw new Ae;var c=Math.round((l-o+1)/i),d=Math.round((s-a+1)/i);if(c<=0||d<=0)throw new Ae;if(d!==c)throw new Ae;var u=Math.floor(i/2);a+=u,o+=u;var p=o+Math.floor((c-1)*i)-l;if(p>0){if(p>u)throw new Ae;o-=p}var h=a+Math.floor((d-1)*i)-s;if(h>0){if(h>u)throw new Ae;a-=h}for(var m=new Li(c,d),v=0;v<d;v++)for(var b=a+Math.floor(v*i),y=0;y<c;y++)e.get(o+Math.floor(y*i),b)&&m.set(y,v);return m},r.moduleSize=function(e,t){for(var n=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],o=!0,l=0;a<i&&s<n;){if(o!==t.get(a,s)){if(++l===5)break;o=!o}a++,s++}if(a===i||s===n)throw new Ae;return(a-e[0])/7},r.NO_POINTS=new Array,r}(),Ox=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pt=function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return Mt.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=Ox(e),o=s.next();!o.done;o=s.next()){var l=o.value;i[a++]=l}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},r.getCodeword=function(e){var t=Fr.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r}(),Tx=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),Rx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lx=function(){function r(){}return r.detectMultiple=function(e,t,n){var i=e.getBlackMatrix(),a=r.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=r.detect(n,i)),new Tx(i,a)},r.detect=function(e,t){for(var n,i,a=new Array,s=0,o=0,l=!1;s<t.getHeight();){var c=r.findVertices(t,s,o);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,o=0;try{for(var d=(n=void 0,Rx(a)),u=d.next();!u.done;u=d.next()){var p=u.value;p[1]!=null&&(s=Math.trunc(Math.max(s,p[1].getY()))),p[3]!=null&&(s=Math.max(s,Math.trunc(p[3].getY())))}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}s+=r.ROW_STEP;continue}if(l=!0,a.push(c),!e)break;c[2]!=null?(o=Math.trunc(c[2].getX()),s=Math.trunc(c[2].getY())):(o=Math.trunc(c[4].getX()),s=Math.trunc(c[4].getY()))}return a},r.findVertices=function(e,t,n){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return r.copyToResult(s,r.findRowsWithPattern(e,i,a,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),r.copyToResult(s,r.findRowsWithPattern(e,i,a,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),s},r.copyToResult=function(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i]},r.findRowsWithPattern=function(e,t,n,i,a,s){for(var o=new Array(4),l=!1,c=new Int32Array(s.length);i<t;i+=r.ROW_STEP){var d=r.findGuardPattern(e,a,i,n,!1,s,c);if(d!=null){for(;i>0;){var u=r.findGuardPattern(e,a,--i,n,!1,s,c);if(u!=null)d=u;else{i++;break}}o[0]=new Ye(d[0],i),o[1]=new Ye(d[1],i),l=!0;break}}var p=i+1;if(l){for(var h=0,u=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);p<t;p++){var d=r.findGuardPattern(e,u[0],p,n,!1,s,c);if(d!=null&&Math.abs(u[0]-d[0])<r.MAX_PATTERN_DRIFT&&Math.abs(u[1]-d[1])<r.MAX_PATTERN_DRIFT)u=d,h=0;else{if(h>r.SKIPPED_ROW_COUNT_MAX)break;h++}}p-=h+1,o[2]=new Ye(u[0],p),o[3]=new Ye(u[1],p)}return p-i<r.BARCODE_MIN_HEIGHT&&Fr.fill(o,null),o},r.findGuardPattern=function(e,t,n,i,a,s,o){Fr.fillWithin(o,0,o.length,0);for(var l=t,c=0;e.get(l,n)&&l>0&&c++<r.MAX_PIXEL_DRIFT;)l--;for(var d=l,u=0,p=s.length,h=a;d<i;d++){var m=e.get(d,n);if(m!==h)o[u]++;else{if(u===p-1){if(r.patternMatchVariance(o,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=o[0]+o[1],ar.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,h=!h}}return u===p-1&&r.patternMatchVariance(o,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},r.patternMatchVariance=function(e,t,n){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return 1/0;var l=a/s;n*=l;for(var c=0,d=0;d<i;d++){var u=e[d],p=t[d]*l,h=u>p?u-p:p-u;if(h>n)return 1/0;c+=h}return c/a},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r}(),Px=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},no=function(){function r(e,t){if(t.length===0)throw new lt;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),ar.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=Px(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}for(var l=this.coefficients[0],c=this.coefficients.length,d=1;d<c;d++)l=this.field.add(this.field.multiply(e,l),this.coefficients[d]);return l},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new lt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var a=new Int32Array(n.length),s=n.length-t.length;ar.arraycopy(n,0,a,0,s);for(var o=s;o<n.length;o++)a[o]=this.field.add(t[o-s],n[o]);return new r(this.field,a)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new lt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new lt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,i=e.coefficients,a=i.length,s=new Int32Array(n+a-1),o=0;o<n;o++)for(var l=t[o],c=0;c<a;c++)s[o+c]=this.field.add(s[o+c],this.field.multiply(l,i[c]));return new r(this.field,s)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new lt;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new r(this.field,i)},r.prototype.toString=function(){for(var e=new Ct,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r}(),Mx=function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new lt;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new z1;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r}(),Bx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fx=function(r){Bx(e,r);function e(t,n){var i=r.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*n%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new no(i,new Int32Array([0])),i.one=new no(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new lt;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new no(this,i)},e.PDF417_GF=new e(Pt.NUMBER_OF_CODEWORDS,3),e}(Mx),zx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ux=function(){function r(){this.field=Fx.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var i,a,s=new no(this.field,e),o=new Int32Array(t),l=!1,c=t;c>0;c--){var d=s.evaluateAt(this.field.exp(c));o[t-c]=d,d!==0&&(l=!0)}if(!l)return 0;var u=this.field.getOne();if(n!=null)try{for(var p=zx(n),h=p.next();!h.done;h=p.next()){var m=h.value,v=this.field.exp(e.length-1-m),b=new no(this.field,new Int32Array([this.field.subtract(0,v),1]));u=u.multiply(b)}}catch(j){i={error:j}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}for(var y=new no(this.field,o),I=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),y,t),N=I[0],_=I[1],F=this.findErrorLocations(N),R=this.findErrorMagnitudes(_,N,F),c=0;c<F.length;c++){var U=e.length-1-this.field.log(F[c]);if(U<0)throw Gr.getChecksumInstance();e[U]=this.field.subtract(e[U],R[c])}return F.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,o=this.field.getZero(),l=this.field.getOne();s.getDegree()>=Math.round(n/2);){var c=a,d=o;if(a=s,o=l,a.isZero())throw Gr.getChecksumInstance();s=c;for(var u=this.field.getZero(),p=a.getCoefficient(a.getDegree()),h=this.field.inverse(p);s.getDegree()>=a.getDegree()&&!s.isZero();){var m=s.getDegree()-a.getDegree(),v=this.field.multiply(s.getCoefficient(s.getDegree()),h);u=u.add(this.field.buildMonomial(m,v)),s=s.subtract(a.multiplyByMonomial(m,v))}l=u.multiply(o).subtract(d).negative()}var b=l.getCoefficient(0);if(b===0)throw Gr.getChecksumInstance();var y=this.field.inverse(b),I=l.multiply(y),N=s.multiply(y);return[I,N]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==t)throw Gr.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var o=new no(this.field,a),l=n.length,c=new Int32Array(l),s=0;s<l;s++){var d=this.field.inverse(n[s]),u=this.field.subtract(0,e.evaluateAt(d)),p=this.field.inverse(o.evaluateAt(d));c[s]=this.field.multiply(u,p)}return c},r}(),Yd=function(){function r(e,t,n,i,a){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,i,a)}return r.prototype.constructor_1=function(e,t,n,i,a){var s=t==null||n==null,o=i==null||a==null;if(s&&o)throw new Ae;s?(t=new Ye(0,i.getY()),n=new Ye(0,a.getY())):o&&(i=new Ye(e.getWidth()-1,t.getY()),a=new Ye(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,c=Math.trunc(l.getY()-e);c<0&&(c=0);var d=new Ye(l.getX(),c);n?i=d:s=d}if(t>0){var u=n?this.bottomLeft:this.bottomRight,p=Math.trunc(u.getY()+t);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);var h=new Ye(u.getX(),p);n?a=h:o=h}return new r(this.image,i,a,s,o)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r}(),Wx=function(){function r(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r}(),If=function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function i(s,o,l,c,d,u){if(s==="%%")return"%";if(t[++n]!==void 0){s=c?parseInt(c.substr(1)):void 0;var p=d?parseInt(d.substr(1)):void 0,h;switch(u){case"s":h=t[n];break;case"c":h=t[n][0];break;case"f":h=parseFloat(t[n]).toFixed(s);break;case"p":h=parseFloat(t[n]).toPrecision(s);break;case"e":h=parseFloat(t[n]).toExponential(s);break;case"x":h=parseInt(t[n]).toString(p||16);break;case"d":h=parseFloat(parseInt(t[n],p||10).toPrecision(s)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(p);for(var m=parseInt(l),v=l&&l[0]+""=="0"?"0":" ";h.length<m;)h=o!==void 0?h+v:v+h;return h}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r}(),Hx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X1=function(){function r(e){this.boundingBox=new Yd(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new If,i=0;try{for(var a=Hx(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r}(),qx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return a},Rs=function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,i=new Array,a=function(u,p){var h={getKey:function(){return u},getValue:function(){return p}};h.getValue()>n?(n=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===n&&i.push(h.getKey())};try{for(var s=qx(this.values.entries()),o=s.next();!o.done;o=s.next()){var l=Vx(o.value,2),c=l[0],d=l[1];a(c,d)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Pt.toIntArray(i)},r.prototype.getConfidence=function(e){return this.values.get(e)},r}(),Gx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ld=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qu=function(r){Gx(e,r);function e(t,n){var i=r.call(this,t)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var t,n;try{for(var i=ld(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=-1,d=1,u=0,p=o;p<l;p++)if(n[p]!=null){var h=n[p],m=h.getRowNumber()-c;if(m===0)u++;else if(m===1)d=Math.max(d,u),u=1,c=h.getRowNumber();else if(m<0||h.getRowNumber()>=t.getRowCount()||m>p)n[p]=null;else{var v=void 0;d>2?v=(d-2)*m:v=m;for(var b=v>=p,y=1;y<=v&&!b;y++)b=n[p-y]!=null;b?n[p]=null:(c=h.getRowNumber(),u=1)}}},e.prototype.getRowHeights=function(){var t,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=ld(this.getCodewords()),o=s.next();!o.done;o=s.next()){var l=o.value;if(l!=null){var c=l.getRowNumber();if(c>=a.length)continue;a[c]++}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),c=-1,d=s;d<o;d++)if(l[d]!=null){var u=l[d];u.setRowNumberAsRowIndicatorColumn();var p=u.getRowNumber()-c;p===0||(p===1?c=u.getRowNumber():u.getRowNumber()>=t.getRowCount()?l[d]=null:c=u.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,i=this.getCodewords(),a=new Rs,s=new Rs,o=new Rs,l=new Rs;try{for(var c=ld(i),d=c.next();!d.done;d=c.next()){var u=d.value;if(u!=null){u.setRowNumberAsRowIndicatorColumn();var p=u.getValue()%30,h=u.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:s.setValue(p*3+1);break;case 1:l.setValue(p/3),o.setValue(p%3);break;case 2:a.setValue(p+1);break}}}}catch(v){t={error:v}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<Pt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>Pt.MAX_ROWS_IN_BARCODE)return null;var m=new Wx(a.getValue()[0],s.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(t,n){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>n.getRowCount()){t[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==n.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==n.getErrorCorrectionLevel()||s%3!==n.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==n.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e}(X1),$x=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xx=function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Pt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[n];o!=null&&(a=r.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[n];o!=null&&(a=r.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=n[t],o=this.detectionResultColumns[e-1].getCodewords(),l=o;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=o[t],c[3]=l[t],t>0&&(c[0]=n[t-1],c[4]=o[t-1],c[5]=l[t-1]),t>1&&(c[8]=n[t-2],c[10]=o[t-2],c[11]=l[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=o[t+1],c[7]=l[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=o[t+2],c[13]=l[t+2]);try{for(var d=$x(c),u=d.next();!u.done;u=d.next()){var p=u.value;if(r.adjustRowNumber(s,p))return}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new If,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},r}(),Yx=function(){function r(e,t,n,i){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r}(),Kx=function(){function r(){}return r.initialize=function(){for(var e=0;e<Pt.SYMBOL_TABLE.length;e++)for(var t=Pt.SYMBOL_TABLE[e],n=t&1,i=0;i<Pt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===n;)a+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(Pt.BARS_IN_MODULE)),r.RATIOS_TABLE[e][Pt.BARS_IN_MODULE-i-1]=Math.fround(a/Pt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=Mt.sum(e),n=new Int32Array(Pt.BARS_IN_MODULE),i=0,a=0,s=0;s<Pt.MODULES_IN_CODEWORD;s++){var o=t/(2*Pt.MODULES_IN_CODEWORD)+s*t/Pt.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),n[i]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return Pt.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=Mt.sum(e),n=new Array(Pt.BARS_IN_MODULE);if(t>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);var a=Hd.MAX_VALUE,s=-1;this.bSymbolTableReady||r.initialize();for(var o=0;o<r.RATIOS_TABLE.length;o++){for(var l=0,c=r.RATIOS_TABLE[o],d=0;d<Pt.BARS_IN_MODULE;d++){var u=Math.fround(c[d]-n[d]);if(l+=Math.fround(u*u),l>=a)break}l<a&&(a=l,s=Pt.SYMBOL_TABLE[o])}return s},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(Pt.SYMBOL_TABLE.length).map(function(e){return new Array(Pt.BARS_IN_MODULE)}),r}(),Zx=function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r}(),Vu=function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r}(),Qx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jx=function(r){Qx(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Nn),e5=function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new Jx;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new wf;if(n===0)return;for(var i=0;i<n;i++)this.write(e[t+i])},r.prototype.flush=function(){},r.prototype.close=function(){},r}(),t5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),r5=function(r){t5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Nn),n5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),i5=function(r){n5(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new lt("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,i=n<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new r5;i=Et.MAX_VALUE}this.buf=Fr.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,i){if(n<0||n>t.length||i<0||n+i-t.length>0)throw new wf;this.ensureCapacity(this.count+i),ar.arraycopy(t,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Fr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(e5),Zt;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Zt||(Zt={}));function Y1(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Rl;function Ea(r){if(typeof Rl>"u"&&(Rl=Y1()),Rl===null)throw new Error("BigInt is not supported!");return Rl(r)}function a5(){var r=[];r[0]=Ea(1);var e=Ea(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var o5=function(){function r(){}return r.decode=function(e,t){var n=new Ct(""),i=Br.ISO8859_1;n.enableDecoding(i);for(var a=1,s=e[a++],o=new Zx;a<e[0];){switch(s){case r.TEXT_COMPACTION_MODE_LATCH:a=r.textCompaction(e,a,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:a=r.byteCompaction(s,e,i,a,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:a=r.numericCompaction(e,a,n);break;case r.ECI_CHARSET:Br.getCharacterSetECIByValue(e[a++]);break;case r.ECI_GENERAL_PURPOSE:a+=2;break;case r.ECI_USER_DEFINED:a++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=r.decodeMacroBlock(e,a,o);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new Fe;default:a--,a=r.textCompaction(e,a,n);break}if(a<e.length)s=e[a++];else throw Fe.getFormatInstance()}if(n.length()===0)throw Fe.getFormatInstance();var l=new bc(null,n.toString(),null,t);return l.setOther(o),l},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Fe.getFormatInstance();for(var i=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<r.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];n.setSegmentIndex(Et.parseInt(r.decodeBase900toBase10(i,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Ct;t=r.textCompaction(e,t,s),n.setFileId(s.toString());var o=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new Ct;t=r.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new Ct;t=r.textCompaction(e,t+1,c),n.setSender(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Ct;t=r.textCompaction(e,t+1,d),n.setAddressee(d.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var u=new Ct;t=r.numericCompaction(e,t+1,u),n.setSegmentCount(Et.parseInt(u.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var p=new Ct;t=r.numericCompaction(e,t+1,p),n.setTimestamp(Vu.parseLong(p.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Ct;t=r.numericCompaction(e,t+1,h),n.setChecksum(Et.parseInt(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new Ct;t=r.numericCompaction(e,t+1,m),n.setFileSize(Vu.parseLong(m.toString()));break;default:throw Fe.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw Fe.getFormatInstance()}if(o!==-1){var v=t-o;n.isLastSegment()&&v--,n.setOptionalData(Fr.copyOfRange(e,o,o+v))}return t},r.textCompaction=function(e,t,n){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,o=!1;t<e[0]&&!o;){var l=e[t++];if(l<r.TEXT_COMPACTION_MODE_LATCH)i[s]=l/30,i[s+1]=l%30,s+=2;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:i[s++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],a[s]=l,s++;break}}return r.decodeTextCompaction(i,a,s,n),t},r.decodeTextCompaction=function(e,t,n,i){for(var a=Zt.ALPHA,s=Zt.ALPHA,o=0;o<n;){var l=e[o],c="";switch(a){case Zt.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case r.LL:a=Zt.LOWER;break;case r.ML:a=Zt.MIXED;break;case r.PS:s=a,a=Zt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case r.AS:s=a,a=Zt.ALPHA_SHIFT;break;case r.ML:a=Zt.MIXED;break;case r.PS:s=a,a=Zt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.MIXED:if(l<r.PL)c=r.MIXED_CHARS[l];else switch(l){case r.PL:a=Zt.PUNCT;break;case 26:c=" ";break;case r.LL:a=Zt.LOWER;break;case r.AL:a=Zt.ALPHA;break;case r.PS:s=a,a=Zt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.PUNCT:if(l<r.PAL)c=r.PUNCT_CHARS[l];else switch(l){case r.PAL:a=Zt.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.ALPHA_SHIFT:if(a=s,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break;case Zt.PUNCT_SHIFT:if(a=s,l<r.PAL)c=r.PUNCT_CHARS[l];else switch(l){case r.PAL:a=Zt.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=Zt.ALPHA;break}break}c!==""&&i.append(c),o++}},r.byteCompaction=function(e,t,n,i,a){var s=new i5,o=0,l=0,c=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),u=t[i++];i<t[0]&&!c;)switch(d[o++]=u,l=900*l+u,u=t[i++],u){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,c=!0;break;default:if(o%5===0&&o>0){for(var p=0;p<6;++p)s.write(Number(Ea(l)>>Ea(8*(5-p))));l=0,o=0}break}i===t[0]&&u<r.TEXT_COMPACTION_MODE_LATCH&&(d[o++]=u);for(var h=0;h<o;h++)s.write(d[h]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!c;){var m=t[i++];if(m<r.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+m;else switch(m){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,c=!0;break}if(o%5===0&&o>0){for(var p=0;p<6;++p)s.write(Number(Ea(l)>>Ea(8*(5-p))));l=0,o=0}}break}return a.append(Jn.decode(s.toByteArray(),n)),i},r.numericCompaction=function(e,t,n){for(var i=0,a=!1,s=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var o=e[t++];if(t===e[0]&&(a=!0),o<r.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%r.MAX_NUMERIC_CODEWORDS===0||o===r.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(r.decodeBase900toBase10(s,i)),i=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=Ea(0),i=0;i<t;i++)n+=r.EXP900[t-i-1]*Ea(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new Fe;return a.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=Y1()?a5():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r}(),Is=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s5=function(){function r(){}return r.decode=function(e,t,n,i,a,s,o){for(var l=new Yd(e,t,n,i,a),c=null,d=null,u,p=!0;;p=!1){if(t!=null&&(c=r.getRowIndicatorColumn(e,l,t,!0,s,o)),i!=null&&(d=r.getRowIndicatorColumn(e,l,i,!1,s,o)),u=r.merge(c,d),u==null)throw Ae.getNotFoundInstance();var h=u.getBoundingBox();if(p&&h!=null&&(h.getMinY()<l.getMinY()||h.getMaxY()>l.getMaxY()))l=h;else break}u.setBoundingBox(l);var m=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,c),u.setDetectionResultColumn(m,d);for(var v=c!=null,b=1;b<=m;b++){var y=v?b:m-b;if(u.getDetectionResultColumn(y)===void 0){var I=void 0;y===0||y===m?I=new qu(l,y===0):I=new X1(l),u.setDetectionResultColumn(y,I);for(var N=-1,_=N,F=l.getMinY();F<=l.getMaxY();F++){if(N=r.getStartColumn(u,y,F,v),N<0||N>l.getMaxX()){if(_===-1)continue;N=_}var R=r.detectCodeword(e,l.getMinX(),l.getMaxX(),v,N,F,s,o);R!=null&&(I.setCodeword(F,R),_=N,s=Math.min(s,R.getWidth()),o=Math.max(o,R.getWidth()))}}}return r.createDecoderResult(u)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var i=Yd.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new Xx(n,i)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=r.getMax(i),s=0;try{for(var o=Is(i),l=o.next();!l.done;l=o.next()){var c=l.value;if(s+=a-c,c>0)break}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var d=e.getCodewords(),u=0;s>0&&d[u]==null;u++)s--;for(var p=0,u=i.length-1;u>=0&&(p+=a-i[u],!(i[u]>0));u--);for(var u=d.length-1;p>0&&d[u]==null;u--)p--;return e.getBoundingBox().addMissingRows(s,p,e.isLeft())},r.getMax=function(e){var t,n,i=-1;try{for(var a=Is(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,i,a,s){for(var o=new qu(t,i),l=0;l<2;l++)for(var c=l===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),u=Math.trunc(Math.trunc(n.getY()));u<=t.getMaxY()&&u>=t.getMinY();u+=c){var p=r.detectCodeword(e,0,e.getWidth(),i,d,u,a,s);p!=null&&(o.setCodeword(u,p),i?d=p.getStartX():d=p.getEndX())}return o},r.adjustCodewordCount=function(e,t){var n=t[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Pt.MAX_CODEWORDS_IN_BARCODE)throw Ae.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var l=0;l<e.getBarcodeColumnCount();l++){var c=t[o][l+1].getValue(),d=o*e.getBarcodeColumnCount()+l;c.length===0?n.push(d):c.length===1?i[d]=c[0]:(s.push(d),a.push(c))}for(var u=new Array(a.length),p=0;p<u.length;p++)u[p]=a[p];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Pt.toIntArray(n),Pt.toIntArray(s),u)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var l=0;l<s.length;l++)t[i[l]]=a[l][s[l]];try{return r.decodeCodewords(t,e,n)}catch(d){var c=d instanceof Gr;if(!c)throw d}if(s.length===0)throw Gr.getChecksumInstance();for(var l=0;l<s.length;l++)if(s[l]<a[l].length-1){s[l]++;break}else if(s[l]=0,l===s.length-1)throw Gr.getChecksumInstance()}throw Gr.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var l=0;l<s[o].length;l++)s[o][l]=new Rs;var c=0;try{for(var d=Is(e.getDetectionResultColumns()),u=d.next();!u.done;u=d.next()){var p=u.value;if(p!=null)try{for(var h=(i=void 0,Is(p.getCodewords())),m=h.next();!m.done;m=h.next()){var v=m.value;if(v!=null){var b=v.getRowNumber();if(b>=0){if(b>=s.length)continue;s[b][c].setValue(v.getValue())}}}}catch(y){i={error:y}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}c++}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return s},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,i){var a,s,o=i?1:-1,l=null;if(r.isValidBarcodeColumn(e,t-o)&&(l=e.getDetectionResultColumn(t-o).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(r.isValidBarcodeColumn(e,t-o)&&(l=e.getDetectionResultColumn(t-o).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();for(var c=0;r.isValidBarcodeColumn(e,t-o);){t-=o;try{for(var d=(a=void 0,Is(e.getDetectionResultColumn(t).getCodewords())),u=d.next();!u.done;u=d.next()){var p=u.value;if(p!=null)return(i?p.getEndX():p.getStartX())+o*c*(p.getEndX()-p.getStartX())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,i,a,s,o,l){a=r.adjustCodewordStartColumn(e,t,n,i,a,s);var c=r.getModuleBitCount(e,t,n,i,a,s);if(c==null)return null;var d,u=Mt.sum(c);if(i)d=a+u;else{for(var p=0;p<c.length/2;p++){var h=c[p];c[p]=c[c.length-1-p],c[c.length-1-p]=h}d=a,a=d-u}if(!r.checkCodewordSkew(u,o,l))return null;var m=Kx.getDecodedValue(c),v=Pt.getCodeword(m);return v===-1?null:new Yx(a,d,r.getCodewordBucketNumber(m),v)},r.getModuleBitCount=function(e,t,n,i,a,s){for(var o=a,l=new Int32Array(8),c=0,d=i?1:-1,u=i;(i?o<n:o>=t)&&c<l.length;)e.get(o,s)===u?(l[c]++,o+=d):(c++,u=!u);return c===l.length||o===(i?n:t)&&c===l.length-1?l:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,i,a,s){for(var o=a,l=i?-1:1,c=0;c<2;c++){for(;(i?o>=t:o<n)&&i===e.get(o,s);){if(Math.abs(a-o)>r.CODEWORD_SKEW_SIZE)return a;o+=l}l=-l,i=!i}return o},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw Fe.getFormatInstance();var i=1<<t+1,a=r.correctErrors(e,n,i);r.verifyCodewordCount(e,i);var s=o5.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(n.length),s},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw Gr.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw Fe.getFormatInstance();var n=e[0];if(n>e.length)throw Fe.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw Fe.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,i=t.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new If,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new Ux,r}(),l5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kd=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw Ae.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof Fe||n instanceof Gr?Ae.getNotFoundInstance():n}},r.decode=function(e,t,n){var i,a,s=new Array,o=Lx.detectMultiple(e,t,n);try{for(var l=l5(o.getPoints()),c=l.next();!c.done;c=l.next()){var d=c.value,u=s5.decode(o.getBits(),d[4],d[5],d[6],d[7],r.getMinCodewordWidth(d),r.getMaxCodewordWidth(d)),p=new pn(u.getText(),u.getRawBytes(),void 0,d,ot.PDF_417);p.putMetadata(on.ERROR_CORRECTION_LEVEL,u.getECLevel());var h=u.getOther();h!=null&&p.putMetadata(on.PDF417_EXTRA_METADATA,h),s.push(p)}}catch(m){i={error:m}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return s.map(function(m){return m})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?Et.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r}(),c5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gu=function(r){c5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e}(Nn),$u=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d5=function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(fr.TRY_HARDER)!==void 0,n=e==null?null:e.get(fr.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(s){return s===ot.UPC_A||s===ot.UPC_E||s===ot.EAN_13||s===ot.EAN_8||s===ot.CODABAR||s===ot.CODE_39||s===ot.CODE_93||s===ot.CODE_128||s===ot.ITF||s===ot.RSS_14||s===ot.RSS_EXPANDED});a&&!t&&i.push(new Ts(e)),n.includes(ot.QR_CODE)&&i.push(new Xd),n.includes(ot.DATA_MATRIX)&&i.push(new $d),n.includes(ot.AZTEC)&&i.push(new Vd),n.includes(ot.PDF_417)&&i.push(new Kd),a&&t&&i.push(new Ts(e))}i.length===0&&(t||i.push(new Ts(e)),i.push(new Xd),i.push(new $d),i.push(new Vd),i.push(new Kd),t&&i.push(new Ts(e))),this.readers=i},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=$u(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new Gu("No readers where selected, nothing can be read.");try{for(var i=$u(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof Gu)continue}}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new Ae("No MultiFormat Readers were able to detect the code.")},r}(),f5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),u5=function(r){f5(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var i=this,a=new d5;return a.setHints(t),i=r.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Yo),h5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){h5(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Kd,t)||this}return e})(Yo);var p5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){p5(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Xd,t)||this}return e})(Yo);var Zd;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(Zd||(Zd={}));const Ll=Zd;var K1=function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Da(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=n.multiply(new Da(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),n=s}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new lt("No error correction bytes");var n=e.length-t;if(n<=0)throw new lt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(n);ar.arraycopy(e,0,a,0,n);var s=new Da(this.field,a);s=s.multiplyByMonomial(t,1);for(var o=s.divide(i)[1],l=o.getCoefficients(),c=t-l.length,d=0;d<c;d++)e[n+d]=0;ar.arraycopy(l,0,e,n+c,l.length)},r}(),Ls=function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=n[s],l=0;l<i-1;l++){var c=o[l];c===o[l+1]&&c===n[s+1][l]&&c===n[s+1][l+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var l=n[s];o+6<i&&l[o]===1&&l[o+1]===0&&l[o+2]===1&&l[o+3]===1&&l[o+4]===1&&l[o+5]===0&&l[o+6]===1&&(r.isWhiteHorizontal(l,o-4,o)||r.isWhiteHorizontal(l,o+7,o+11))&&t++,s+6<a&&n[s][o]===1&&n[s+1][o]===0&&n[s+2][o]===1&&n[s+3][o]===1&&n[s+4][o]===1&&n[s+5][o]===0&&n[s+6][o]===1&&(r.isWhiteVertical(n,o,s-4,s)||r.isWhiteVertical(n,o,s+7,s+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var i=t;i<n;i++)if(e[i]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=n[s],l=0;l<i;l++)o[l]===1&&t++;var c=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(t*2-c)*10/c);return d*r.N4},r.getDataMaskBit=function(e,t,n){var i,a;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:a=n*t,i=(a&1)+a%3;break;case 6:a=n*t,i=(a&1)+a%3&1;break;case 7:a=n*t,i=a%3+(n+t&1)&1;break;default:throw new lt("Invalid mask pattern: "+e)}return i===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var l=0,c=-1,d=0;d<a;d++){var u=t?s[o][d]:s[d][o];u===c?l++:(l>=5&&(n+=r.N1+(l-5)),l=1,c=u)}l>=5&&(n+=r.N1+(l-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r}(),g5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m5=function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var i=g5(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Fr.fill(s,e)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],s=t.bytes[n],o=0,l=this.width;o<l;++o)if(a[o]!==s[o])return!1;return!0},r.prototype.toString=function(){for(var e=new Ct,t=0,n=this.height;t<n;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r}(),Qd=function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new Ct;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r}(),x5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sr=function(r){x5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e}(Nn),Xu=function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,i,a){r.clearMatrix(a),r.embedBasicPatterns(n,a),r.embedTypeInfo(t,i,a),r.maybeEmbedVersionInfo(n,a),r.embedDataBits(e,i,a)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var i=new $r;r.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),l=r.TYPE_INFO_COORDINATES[a],c=l[0],d=l[1];if(n.setBoolean(c,d,o),a<8){var u=n.getWidth()-a-1,p=8;n.setBoolean(u,p,o)}else{var u=8,p=n.getHeight()-7+(a-8);n.setBoolean(u,p,o)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new $r;r.makeVersionInfoBits(e,n);for(var i=6*3-1,a=0;a<6;++a)for(var s=0;s<3;++s){var o=n.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,a,o)}}},r.embedDataBits=function(e,t,n){for(var i=0,a=-1,s=n.getWidth()-1,o=n.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<n.getHeight();){for(var l=0;l<2;++l){var c=s-l;if(r.isEmpty(n.get(c,o))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,t!==255&&Ls.getDataMaskBit(t,c,o)&&(d=!d),n.setBoolean(c,o,d)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new sr("Not all bits consumed: "+i+"/"+e.getSize())},r.findMSBSet=function(e){return 32-Et.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new lt("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!Qd.isValidMaskPattern(t))throw new sr("Invalid mask pattern");var i=e.getBits()<<3|t;n.appendBits(i,5);var a=r.calculateBCHCode(i,r.TYPE_INFO_POLY);n.appendBits(a,10);var s=new $r;if(s.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new sr("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new sr("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new sr;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var i=0;i<8;++i){if(!r.isEmpty(n.get(e+i,t)))throw new sr;n.setNumber(e+i,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var i=0;i<7;++i){if(!r.isEmpty(n.get(e,t+i)))throw new sr;n.setNumber(e,t+i,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var i=0;i<5;++i)for(var a=r.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)n.setNumber(e+s,t+i,a[s])},r.embedPositionDetectionPattern=function(e,t,n){for(var i=0;i<7;++i)for(var a=r.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)n.setNumber(e+s,t+i,a[s])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;r.embedVerticalSeparationPattern(i,0,e),r.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),r.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var l=0;l!==s;l++){var c=i[l];c>=0&&r.isEmpty(t.get(c,o))&&r.embedPositionAdjustmentPattern(c-2,o-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r}(),v5=function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r}(),Yu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Ls.applyMaskPenaltyRule1(e)+Ls.applyMaskPenaltyRule2(e)+Ls.applyMaskPenaltyRule3(e)+Ls.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var i=r.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(Ll.CHARACTER_SET)!==void 0;a&&(i=n.get(Ll.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new $r;if(s===lr.BYTE&&(a||r.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Br.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,o)}this.appendModeInfo(s,o);var c=new $r;this.appendBytes(e,s,c,i);var d;if(n!==null&&n.get(Ll.QR_VERSION)!==void 0){var u=Number.parseInt(n.get(Ll.QR_VERSION).toString(),10);d=oo.getVersionForNumber(u);var p=this.calculateBitsNeeded(s,o,c,d);if(!this.willFit(p,d,t))throw new sr("Data too big for requested version")}else d=this.recommendVersion(t,s,o,c);var h=new $r;h.appendBitArray(o);var m=s===lr.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(m,d,s,h),h.appendBitArray(c);var v=d.getECBlocksForLevel(t),b=d.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(b,h);var y=this.interleaveWithECBytes(h,d.getTotalCodewords(),b,v.getNumBlocks()),I=new Qd;I.setECLevel(t),I.setMode(s),I.setVersion(d);var N=d.getDimensionForVersion(),_=new m5(N,N),F=this.chooseMaskPattern(y,t,d,_);return I.setMaskPattern(F),Xu.buildMatrix(y,t,d,F,_),I.setMatrix(_),I},r.recommendVersion=function(e,t,n,i){var a=this.calculateBitsNeeded(t,n,i,oo.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,n,i,s);return this.chooseVersion(o,e)},r.calculateBitsNeeded=function(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),Br.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return lr.KANJI;for(var n=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(r.isDigit(o))n=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return lr.BYTE}return i?lr.ALPHANUMERIC:n?lr.NUMERIC:lr.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=Jn.encode(e,Br.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<Qd.NUM_MASK_PATTERNS;o++){Xu.buildMatrix(e,t,n,o,i);var l=this.calculateMaskPenalty(i);l<a&&(a=l,s=o)}return s},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var i=oo.getVersionForNumber(n);if(r.willFit(e,i,t))return i}throw new sr("Data too big")},r.willFit=function(e,t,n){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(n),s=a.getTotalECCodewords(),o=i-s,l=(e+7)/8;return o>=l},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new sr("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==n)throw new sr("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,i,a,s){if(i>=n)throw new sr("Block ID too large");var o=e%n,l=n-o,c=Math.floor(e/n),d=c+1,u=Math.floor(t/n),p=u+1,h=c-u,m=d-p;if(h!==m)throw new sr("EC bytes mismatch");if(n!==l+o)throw new sr("RS blocks mismatch");if(e!==(u+h)*l+(p+m)*o)throw new sr("Total bytes mismatch");i<l?(a[0]=u,s[0]=h):(a[0]=p,s[0]=m)},r.interleaveWithECBytes=function(e,t,n,i){var a,s,o,l;if(e.getSizeInBytes()!==n)throw new sr("Number of bits and data bytes does not match");for(var c=0,d=0,u=0,p=new Array,h=0;h<i;++h){var m=new Int32Array(1),v=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,i,h,m,v);var b=m[0],y=new Uint8Array(b);e.toBytes(8*c,y,0,b);var I=r.generateECBytes(y,v[0]);p.push(new v5(y,I)),d=Math.max(d,b),u=Math.max(u,I.length),c+=m[0]}if(n!==c)throw new sr("Data bytes does not match offset");for(var N=new $r,h=0;h<d;++h)try{for(var _=(a=void 0,Yu(p)),F=_.next();!F.done;F=_.next()){var R=F.value,y=R.getDataBytes();h<y.length&&N.appendBits(y[h],8)}}catch(B){a={error:B}}finally{try{F&&!F.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}for(var h=0;h<u;++h)try{for(var U=(o=void 0,Yu(p)),j=U.next();!j.done;j=U.next()){var R=j.value,I=R.getErrorCorrectionBytes();h<I.length&&N.appendBits(I[h],8)}}catch(B){o={error:B}}finally{try{j&&!j.done&&(l=U.return)&&l.call(U)}finally{if(o)throw o.error}}if(t!==N.getSizeInBytes())throw new sr("Interleaving error: "+t+" and "+N.getSizeInBytes()+" differ.");return N},r.generateECBytes=function(e,t){for(var n=e.length,i=new Int32Array(n+t),a=0;a<n;a++)i[a]=e[a]&255;new K1(En.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[n+a];return s},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,i){var a=n.getCharacterCountBits(t);if(e>=1<<a)throw new sr(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},r.appendBytes=function(e,t,n,i){switch(t){case lr.NUMERIC:r.appendNumericBytes(e,n);break;case lr.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case lr.BYTE:r.append8BitBytes(e,n,i);break;case lr.KANJI:r.appendKanjiBytes(e,n);break;default:throw new sr("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var a=r.getDigit(e.charAt(i));if(i+2<n){var s=r.getDigit(e.charAt(i+1)),o=r.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<n){var s=r.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var a=r.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new sr;if(i+1<n){var s=r.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new sr;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},r.append8BitBytes=function(e,t,n){var i;try{i=Jn.encode(e,n)}catch(l){throw new sr(l)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];t.appendBits(o,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=Jn.encode(e,Br.SJIS)}catch(u){throw new sr(u)}for(var i=n.length,a=0;a<i;a+=2){var s=n[a]&255,o=n[a+1]&255,l=s<<8&4294967295|o,c=-1;if(l>=33088&&l<=40956?c=l-33088:l>=57408&&l<=60351&&(c=l-49472),c===-1)throw new sr("Invalid byte sequence");var d=(c>>8)*192+(c&255);t.appendBits(d,13)}},r.appendECI=function(e,t){t.appendBits(lr.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=Br.UTF8.getName(),r})();var y5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){y5(e,r);function e(t,n,i,a,s,o,l,c){var d=r.call(this,o,l)||this;if(d.yuvData=t,d.dataWidth=n,d.dataHeight=i,d.left=a,d.top=s,a+o>n||s+l>i)throw new lt("Crop rectangle does not fit within image data.");return c&&d.reverseHorizontal(o,l),d}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new lt("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return ar.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=t*n,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ar.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<n;o++){var l=o*t;ar.arraycopy(this.yuvData,s,a,l,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*n),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<n;o++){for(var l=o*t,c=0;c<t;c++){var d=a[s+c*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+c]=4278190080|d*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<n;a++,s+=this.dataWidth)for(var o=s+t/2,l=s,c=s+t-1;l<o;l++,c--){var d=i[l];i[l]=i[c],i[c]=d}},e.prototype.invert=function(){return new Af(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(yc);var b5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){b5(e,r);function e(t,n,i,a,s,o,l){var c=r.call(this,n,i)||this;if(c.dataWidth=a,c.dataHeight=s,c.left=o,c.top=l,t.BYTES_PER_ELEMENT===4){for(var d=n*i,u=new Uint8ClampedArray(d),p=0;p<d;p++){var h=t[p],m=h>>16&255,v=h>>7&510,b=h&255;u[p]=(m+v+b)/4&255}c.luminances=u}else c.luminances=t;if(a===void 0&&(c.dataWidth=n),s===void 0&&(c.dataHeight=i),o===void 0&&(c.left=0),l===void 0&&(c.top=0),c.left+n>c.dataWidth||c.top+i>c.dataHeight)throw new lt("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new lt("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return ar.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=t*n,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ar.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<n;o++){var l=o*t;ar.arraycopy(this.luminances,s,a,l,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new Af(this)},e})(yc);var w5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),A5=function(r){w5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Br),S5=function(){function r(){}return r.ISO_8859_1=Br.ISO8859_1,r}(),Jd,_5=301,C5=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=_5);return{LOG:r,ALOG:e}};Jd=C5([],[]),Jd.LOG;Jd.ALOG;var Ku;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Ku||(Ku={}));var Zu=129,Z1=230,I5=231,E5=235,N5=236,k5=237,D5=238,j5=239,O5=240,cd=254,T5=254,Qu="[)>05",Ju="[)>06",e0="",Xt=0,nn=1,wn=2,Pr=3,qr=4,hn=5,R5=function(){function r(){}return r.prototype.getEncodingMode=function(){return Xt},r.prototype.encode=function(e){var t=gi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=gi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case hn:e.writeCodeword(I5),e.signalEncoderChange(hn);return;case nn:e.writeCodeword(Z1),e.signalEncoderChange(nn);return;case Pr:e.writeCodeword(D5),e.signalEncoderChange(Pr);break;case wn:e.writeCodeword(j5),e.signalEncoderChange(wn);break;case qr:e.writeCodeword(O5),e.signalEncoderChange(qr);break;default:throw new Error("Illegal mode: "+i)}else gi.isExtendedASCII(n)?(e.writeCodeword(E5),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(gi.isDigit(e)&&gi.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r}(),L5=function(){function r(){}return r.prototype.getEncodingMode=function(){return hn},r.prototype.encode=function(e){var t=new Ct;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var i=gi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Xt);break}}var a=t.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||l)if(a<=249)t.setCharAt(0,Ot.getCharAt(a));else if(a<=1555)t.setCharAt(0,Ot.getCharAt(Math.floor(a/250)+249)),t.insert(1,Ot.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var c=0,n=t.length();c<n;c++)e.writeCodeword(this.randomize255State(t.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,i=e+n;return i<=255?i:i-256},r}(),Ef=function(){function r(){}return r.prototype.getEncodingMode=function(){return nn},r.prototype.encodeMaximal=function(e){for(var t=new Ct,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,n=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var o=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l,d=Math.floor(t.length()%3);(d===2&&c!==2||d===1&&(n>3||c!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Z1),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new Ct;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var l=new Ct;for(t.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,t,l,i));t.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,t,l,i);break}var c=t.length();if(c%3===0){var d=gi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Xt);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,n),e.resetSymbolInfo(),i},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(cd)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(cd),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(cd)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Xt)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,i=t%256,a=new Ct;return a.append(n),a.append(i),a.toString()},r}(),P5=function(){function r(){}return r.prototype.getEncodingMode=function(){return qr},r.prototype.encode=function(e){for(var t=new Ct;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=gi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Xt);break}}}t.append(Ot.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var s=n-1,o=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),c=l&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}c?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(Xt)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Ot.getCharAt(e-64)):gi.illegalCharacter(Ot.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,o=(n<<18)+(i<<12)+(a<<6)+s,l=o>>16&255,c=o>>8&255,d=o&255,u=new Ct;return u.append(l),t>=2&&u.append(c),t>=3&&u.append(d),u.toString()},r}(),M5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),B5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zt=function(){function r(e,t,n,i,a,s,o,l){o===void 0&&(o=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=l}return r.lookup=function(e,t,n,i,a){var s,o;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var l=B5(z5),c=l.next();!c.done;c=l.next()){var d=c.value;if(!(t===1&&d.rectangular)&&!(t===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(u){s={error:u}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r}(),F5=function(r){M5(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(zt),z5=[new zt(!1,3,5,8,8,1),new zt(!1,5,7,10,10,1),new zt(!0,5,7,16,6,1),new zt(!1,8,10,12,12,1),new zt(!0,10,11,14,6,2),new zt(!1,12,12,14,14,1),new zt(!0,16,14,24,10,1),new zt(!1,18,14,16,16,1),new zt(!1,22,18,18,18,1),new zt(!0,22,18,16,10,2),new zt(!1,30,20,20,20,1),new zt(!0,32,24,16,14,2),new zt(!1,36,24,22,22,1),new zt(!1,44,28,24,24,1),new zt(!0,49,28,22,14,2),new zt(!1,62,36,14,14,4),new zt(!1,86,42,16,16,4),new zt(!1,114,48,18,18,4),new zt(!1,144,56,20,20,4),new zt(!1,174,68,22,22,4),new zt(!1,204,84,24,24,4,102,42),new zt(!1,280,112,14,14,16,140,56),new zt(!1,368,144,16,16,16,92,36),new zt(!1,456,192,18,18,16,114,48),new zt(!1,576,224,20,20,16,144,56),new zt(!1,696,272,22,22,16,174,68),new zt(!1,816,336,24,24,16,136,56),new zt(!1,1050,408,18,18,36,175,68),new zt(!1,1304,496,20,20,36,163,62),new F5],U5=function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(o){return o.charCodeAt(0)}),n=new Ct,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(s)}this.msg=n.toString(),this.shape=0,this.codewords=new Ct,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=zt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r}(),W5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),H5=function(r){W5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Pr},e.prototype.encode=function(t){for(var n=new Ct;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(t,n);var s=gi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Xt);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):gi.illegalCharacter(Ot.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=n.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(T5),t.getNewEncoding()<0&&t.signalEncoderChange(Xt)},e}(Ef),q5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),V5=function(r){q5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return wn},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(t-128,n),i},e}(Ef),gi=function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=Zu+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,i,a){t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new Ef,o=[new R5,s,new V5,new H5,new P5,new L5],l=new U5(e);l.setSymbolShape(t),l.setSizeConstraints(n,i),e.startsWith(Qu)&&e.endsWith(e0)?(l.writeCodeword(N5),l.setSkipAtEnd(2),l.pos+=Qu.length):e.startsWith(Ju)&&e.endsWith(e0)&&(l.writeCodeword(k5),l.setSkipAtEnd(2),l.pos+=Ju.length);var c=Xt;for(a&&(s.encodeMaximal(l),c=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[c].encode(l),l.getNewEncoding()>=0&&(c=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var u=l.getSymbolInfo().getDataCapacity();d<u&&c!==Xt&&c!==hn&&c!==qr&&l.writeCodeword("Ã¾");var p=l.getCodewords();for(p.length()<u&&p.append(Zu);p.length()<u;)p.append(this.randomize253State(p.length()+1));return l.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var i=this.lookAheadTestIntern(e,t,n);if(n===Pr&&i===Pr){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Xt}else if(n===qr&&i===qr){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Xt}return i},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var i;n===Xt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(t+a===e.length){Fr.fill(s,0),Fr.fill(o,0);var l=this.findMinimums(i,o,Et.MAX_VALUE,s),c=this.getMinimumCount(s);if(o[Xt]===l)return Xt;if(c===1){if(s[hn]>0)return hn;if(s[qr]>0)return qr;if(s[wn]>0)return wn;if(s[Pr]>0)return Pr}return nn}var d=e.charCodeAt(t+a);if(a++,this.isDigit(d)?i[Xt]+=.5:this.isExtendedASCII(d)?(i[Xt]=Math.ceil(i[Xt]),i[Xt]+=2):(i[Xt]=Math.ceil(i[Xt]),i[Xt]++),this.isNativeC40(d)?i[nn]+=2/3:this.isExtendedASCII(d)?i[nn]+=8/3:i[nn]+=4/3,this.isNativeText(d)?i[wn]+=2/3:this.isExtendedASCII(d)?i[wn]+=8/3:i[wn]+=4/3,this.isNativeX12(d)?i[Pr]+=2/3:this.isExtendedASCII(d)?i[Pr]+=13/3:i[Pr]+=10/3,this.isNativeEDIFACT(d)?i[qr]+=3/4:this.isExtendedASCII(d)?i[qr]+=17/4:i[qr]+=13/4,this.isSpecialB256(d)?i[hn]+=4:i[hn]++,a>=4){if(Fr.fill(s,0),Fr.fill(o,0),this.findMinimums(i,o,Et.MAX_VALUE,s),o[Xt]<this.min(o[hn],o[nn],o[wn],o[Pr],o[qr]))return Xt;if(o[hn]<o[Xt]||o[hn]+1<this.min(o[nn],o[wn],o[Pr],o[qr]))return hn;if(o[qr]+1<this.min(o[hn],o[nn],o[wn],o[Pr],o[Xt]))return qr;if(o[wn]+1<this.min(o[hn],o[nn],o[qr],o[Pr],o[Xt]))return wn;if(o[Pr]+1<this.min(o[hn],o[nn],o[qr],o[wn],o[Xt]))return Pr;if(o[nn]+1<this.min(o[Xt],o[hn],o[qr],o[wn])){if(o[nn]<o[Pr])return nn;if(o[nn]===o[Pr]){for(var u=t+a+1;u<e.length;){var p=e.charCodeAt(u);if(this.isX12TermSep(p))return Pr;if(!this.isNativeX12(p))break;u++}return nn}}}}},r.min=function(e,t,n,i,a){var s=Math.min(e,Math.min(t,Math.min(n,i)));return a===void 0?s:Math.min(s,a)},r.findMinimums=function(e,t,n,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);n>s&&(n=s,Fr.fill(i,0)),n===s&&(i[a]=i[a]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,i=t;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-t},r.illegalCharacter=function(e){var t=Et.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r}(),dd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t0=function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return Jn.encode(e,this.charset)!=null}catch{return!1}},r}(),G5=function(){function r(e,t,n){var i,a,s,o,l,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(E){return new t0(A5.forName(E))}),this.encoders=[];var d=[];d.push(new t0(S5.ISO_8859_1));for(var u=t!=null&&t.name.startsWith("UTF"),p=0;p<e.length;p++){var h=!1;try{for(var m=(i=void 0,dd(d)),v=m.next();!v.done;v=m.next()){var b=v.value,y=e.charAt(p),I=y.charCodeAt(0);if(I===n||b.canEncode(y)){h=!0;break}}}catch(E){i={error:E}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(!h)try{for(var N=(s=void 0,dd(this.ENCODERS)),_=N.next();!_.done;_=N.next()){var b=_.value;if(b.canEncode(e.charAt(p))){d.push(b),h=!0;break}}}catch(E){s={error:E}}finally{try{_&&!_.done&&(o=N.return)&&o.call(N)}finally{if(s)throw s.error}}h||(u=!0)}if(d.length===1&&!u)this.encoders=[d[0]];else{this.encoders=[];var F=0;try{for(var R=dd(d),U=R.next();!U.done;U=R.next()){var b=U.value;this.encoders[F++]=b}}catch(E){l={error:E}}finally{try{U&&!U.done&&(c=R.return)&&c.call(R)}finally{if(l)throw l.error}}}var j=-1;if(t!=null){for(var p=0;p<this.encoders.length;p++)if(this.encoders[p]!=null&&t.name===this.encoders[p].name){j=p;break}}this.priorityEncoderIndex=j}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Jn.encode(Ot.getCharAt(e),this.encoders[t].name)},r}(),$5=3,X5=function(){function r(e,t,n){this.fnc1=n;var i=new G5(e,t,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===n?1e3:s}else this.bytes=this.encodeMinimally(e,i,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new Ct,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,i,a,s){var o=e.charAt(i).charCodeAt(0),l=0,c=t.length();t.getPriorityEncoderIndex()>=0&&(o===s||t.canEncode(o,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),c=l+1);for(var d=l;d<c;d++)(o===s||t.canEncode(o,d))&&this.addEdge(n,i+1,new r0(o,t,d,a,s))},r.prototype.encodeMinimally=function(e,t,n){var i=e.length,a=new r0[i+1][t.length()];this.addEdges(e,t,a,0,null,n);for(var s=1;s<=i;s++){for(var o=0;o<t.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][o],n);for(var o=0;o<t.length();o++)a[s-1][o]=null}for(var l=-1,c=Et.MAX_VALUE,o=0;o<t.length();o++)if(a[i][o]!=null){var d=a[i][o];d.cachedTotalSize<c&&(c=d.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var u=[],p=a[i][l];p!=null;){if(p.isFNC1())u.unshift(1e3);else for(var h=t.encode(p.c,p.encoderIndex),s=h.length-1;s>=0;s--)u.unshift(h[s]&255);var m=p.previous===null?0:p.previous.encoderIndex;m!==p.encoderIndex&&u.unshift(256+t.getECIValue(p.encoderIndex)),p=p.previous}for(var v=[],s=0;s<v.length;s++)v[s]=u[s];return v},r}(),r0=function(){function r(e,t,n,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,n).length,o=i===null?0:i.encoderIndex;o!==n&&(s+=$5),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return r.prototype.isFNC1=function(){return this.c===1e3},r}(),Y5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var n0;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(n0||(n0={}));(function(r){Y5(e,r);function e(t,n,i,a,s){var o=r.call(this,t,n,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(X5);var K5=function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r}(),i0=function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r}(),Z5=function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r}(),Q5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nf=function(r){Q5(e,r);function e(t,n,i){var a=r.call(this,t)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Et.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(Z5),J5=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ev=function(r){J5(e,r);function e(t,n,i){var a=r.call(this,t,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Nf);function tv(r,e,t){return new ev(r,e,t)}function Es(r,e,t){return new Nf(r,e,t)}var rv=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ja=0,ic=1,Zn=2,Q1=3,Oi=4,nv=new Nf(null,0,0),fd=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],iv=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function av(r){var e,t;try{for(var n=iv(r),i=n.next();!i.done;i=n.next()){var a=i.value;Fr.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[ja][Oi]=0,r[ic][Oi]=0,r[ic][ja]=28,r[Q1][Oi]=0,r[Zn][Oi]=0,r[Zn][ja]=15,r}var J1=av(Fr.createInt32Array(6,6)),ov=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sv=function(){function r(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=fd[this.mode][e];i=Es(i,a&65535,a>>16),n+=a>>16}var s=e===Zn?4:5;return i=Es(i,t,s),new r(i,e,0,n+s)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,i=this.mode===Zn?4:5;return n=Es(n,J1[this.mode][e],i),n=Es(n,t,5),new r(n,this.mode,0,this.bitCount+i+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,i=this.bitCount;if(this.mode===Oi||this.mode===Zn){var a=fd[n][ja];t=Es(t,a&65535,a>>16),i+=a>>16,n=ja}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new r(t,n,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=tv(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(fd[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new $r;try{for(var o=ov(i),l=o.next();!l.done;l=o.next()){var c=l.value;c.appendTo(s,e)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return s},r.prototype.toString=function(){return Ot.format("%s bits=%d bytes=%d",rv[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(nv,ja,0,0),r}();function lv(r){var e=Ot.getCharCode(" "),t=Ot.getCharCode("."),n=Ot.getCharCode(",");r[ja][e]=1;for(var i=Ot.getCharCode("Z"),a=Ot.getCharCode("A"),s=a;s<=i;s++)r[ja][s]=s-a+2;r[ic][e]=1;for(var o=Ot.getCharCode("z"),l=Ot.getCharCode("a"),s=l;s<=o;s++)r[ic][s]=s-l+2;r[Zn][e]=1;for(var c=Ot.getCharCode("9"),d=Ot.getCharCode("0"),s=d;s<=c;s++)r[Zn][s]=s-d+2;r[Zn][n]=12,r[Zn][t]=13;for(var u=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],p=0;p<u.length;p++)r[Q1][Ot.getCharCode(u[p])]=p;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],p=0;p<h.length;p++)Ot.getCharCode(h[p])>0&&(r[Oi][Ot.getCharCode(h[p])]=p);return r}var ud=lv(Fr.createInt32Array(5,256)),Pl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cv=function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=Ot.getCharCode(" "),t=Ot.getCharCode(`
`),n=i0.singletonList(sv.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Ot.getCharCode("\r"):a=s===t?2:0;break;case Ot.getCharCode("."):a=s===e?3:0;break;case Ot.getCharCode(","):a=s===e?4:0;break;case Ot.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(n=r.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var o=i0.min(n,function(l,c){return l.getBitCount()-c.getBitCount()});return o.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,i,a=[];try{for(var s=Pl(e),o=s.next();!o.done;o=s.next()){var l=o.value;this.updateStateForChar(l,t,a)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r.simplifyStates(a)},r.prototype.updateStateForChar=function(e,t,n){for(var i=this.text[t]&255,a=ud[e.getMode()][i]>0,s=null,o=0;o<=Oi;o++){var l=ud[o][i];if(l>0){if(s==null&&(s=e.endBinaryShift(t)),!a||o===e.getMode()||o===Zn){var c=s.latchAndAppend(o,l);n.push(c)}if(!a&&J1[e.getMode()][o]>=0){var d=s.shiftAndAppend(o,l);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||ud[e.getMode()][i]===0){var u=e.addBinaryShiftChar(t);n.push(u)}},r.updateStateListForPair=function(e,t,n){var i,a,s=[];try{for(var o=Pl(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForPair(c,t,n,s)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},r.updateStateForPair=function(e,t,n,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Oi,n)),e.getMode()!==Oi&&i.push(a.shiftAndAppend(Oi,n)),n===3||n===4){var s=a.latchAndAppend(Zn,16-n).latchAndAppend(Zn,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(o)}},r.simplifyStates=function(e){var t,n,i,a,s=[];try{for(var o=Pl(e),l=o.next();!l.done;l=o.next()){var c=l.value,d=!0,u=function(b){if(b.isBetterThanOrEqualTo(c))return d=!1,"break";c.isBetterThanOrEqualTo(b)&&(s=s.filter(function(y){return y!==b}))};try{for(var p=(i=void 0,Pl(s)),h=p.next();!h.done;h=p.next()){var m=h.value,v=u(m);if(v==="break")break}}catch(b){i={error:b}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}d&&s.push(c)}}catch(b){t={error:b}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return s},r}(),dv=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var i=new cv(e).encode(),a=Et.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,o,l,c,d,u;if(n!==r.DEFAULT_AZTEC_LAYERS){if(o=n<0,l=Math.abs(n),l>(o?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new lt(Ot.format("Illegal value %s for layers",n));c=r.totalBitsInLayer(l,o),d=r.WORD_SIZE[l];var p=c-c%d;if(u=r.stuffBits(i,d),u.getSize()+a>p)throw new lt("Data to large for user specified layer");if(o&&u.getSize()>d*64)throw new lt("Data to large for user specified layer")}else{d=0,u=null;for(var h=0;;h++){if(h>r.MAX_NB_BITS)throw new lt("Data too large for an Aztec code");if(o=h<=3,l=o?h+1:h,c=r.totalBitsInLayer(l,o),!(s>c)){(u==null||d!==r.WORD_SIZE[l])&&(d=r.WORD_SIZE[l],u=r.stuffBits(i,d));var p=c-c%d;if(!(o&&u.getSize()>d*64)&&u.getSize()+a<=p)break}}}var m=r.generateCheckWords(u,c,d),v=u.getSize()/d,b=r.generateModeMessage(o,l,v),y=(o?11:14)+l*4,I=new Int32Array(y),N;if(o){N=y;for(var h=0;h<I.length;h++)I[h]=h}else{N=y+1+2*Et.truncDivision(Et.truncDivision(y,2)-1,15);for(var _=Et.truncDivision(y,2),F=Et.truncDivision(N,2),h=0;h<_;h++){var R=h+Et.truncDivision(h,15);I[_-h-1]=F-R-1,I[_+h]=F+R+1}}for(var U=new Li(N),h=0,j=0;h<l;h++){for(var E=(l-h)*4+(o?9:12),B=0;B<E;B++)for(var k=B*2,S=0;S<2;S++)m.get(j+k+S)&&U.set(I[h*2+S],I[h*2+B]),m.get(j+E*2+k+S)&&U.set(I[h*2+B],I[y-1-h*2-S]),m.get(j+E*4+k+S)&&U.set(I[y-1-h*2-S],I[y-1-h*2-B]),m.get(j+E*6+k+S)&&U.set(I[y-1-h*2-B],I[h*2+S]);j+=E*8}if(r.drawModeMessage(U,o,N,b),o)r.drawBullsEye(U,Et.truncDivision(N,2),5);else{r.drawBullsEye(U,Et.truncDivision(N,2),7);for(var h=0,B=0;h<Et.truncDivision(y,2)-1;h+=15,B+=16)for(var S=Et.truncDivision(N,2)&1;S<N;S+=2)U.set(Et.truncDivision(N,2)-B,S),U.set(Et.truncDivision(N,2)+B,S),U.set(S,Et.truncDivision(N,2)-B),U.set(S,Et.truncDivision(N,2)+B)}var D=new K5;return D.setCompact(o),D.setSize(N),D.setLayers(l),D.setCodeWords(v),D.setMatrix(U),D},r.drawBullsEye=function(e,t,n){for(var i=0;i<n;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var i=new $r;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=r.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=r.generateCheckWords(i,40,4)),i},r.drawModeMessage=function(e,t,n,i){var a=Et.truncDivision(n,2);if(t)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+Et.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},r.generateCheckWords=function(e,t,n){var i,a,s=e.getSize()/n,o=new K1(r.getGF(n)),l=Et.truncDivision(t,n),c=r.bitsToWords(e,n,l);o.encode(c,l-s);var d=t%n,u=new $r;u.appendBits(0,d);try{for(var p=dv(Array.from(c)),h=p.next();!h.done;h=p.next()){var m=h.value;u.appendBits(m,n)}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return u},r.bitsToWords=function(e,t,n){var i=new Int32Array(n),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var o=0,l=0;l<t;l++)o|=e.get(a*t+l)?1<<t-l-1:0;i[a]=o}return i},r.getGF=function(e){switch(e){case 4:return En.AZTEC_PARAM;case 6:return En.AZTEC_DATA_6;case 8:return En.AZTEC_DATA_8;case 10:return En.AZTEC_DATA_10;case 12:return En.AZTEC_DATA_12;default:throw new lt("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new $r,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var o=0,l=0;l<t;l++)(s+l>=i||e.get(s+l))&&(o|=1<<t-1-l);(o&a)===a?(n.appendBits(o&a,t),s--):(o&a)===0?(n.appendBits(o|1,t),s--):n.appendBits(o,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();const fv=({onScanSuccess:r,onClose:e})=>{const t=se.useRef(null),n=se.useRef(null);return se.useEffect(()=>{const i=new u5;return n.current=i,i.decodeFromVideoDevice(null,t.current,a=>{a&&(i.reset(),r(a.getText()))}),()=>{try{i.reset()}catch{}}},[r]),f.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000e6",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[f.jsx("video",{ref:t,style:{width:"90%",maxWidth:"500px",borderRadius:"12px",border:"3px solid white"},muted:!0,autoPlay:!0,playsInline:!0}),f.jsx("button",{onClick:()=>{var i;(i=n.current)==null||i.reset(),e()},style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"×¡×’×•×¨ ×¡×•×¨×§"})]})};function uv(r){const e=[...new Set(r)].sort((t,n)=>t-n);for(let t=1;t<=e.length+1;t++)if(!e.includes(t))return t}async function hv(r,e=""){const t=Tt(Ue,"items",r),n=await qo(t);if(!n.exists())throw new Error("Item not found");const{ItemId:i,...a}=n.data();await Ta(mt(Ue,"deletedItems"),{...a,deletedAt:tr(),deletedBy:e}),await uo(t)}async function pv(r,e=""){const t=Tt(Ue,"deletedItems",r),n=await qo(t);if(!n.exists())throw new Error("Deleted item not found");const i=n.data(),s=(await Bt(mt(Ue,"items"))).docs.map(l=>l.data().ItemId).filter(l=>typeof l=="number"),o=uv(s);await bf(Tt(mt(Ue,"items")),{...i,ItemId:o,createdAt:tr(),updatedAt:tr(),createdBy:e,updatedBy:e,isActive:!0}),await uo(t)}async function gv(r){const e=mi(mt(Ue,"items"),aa("ItemId","==",Number(r))),t=await Bt(e);if(!t.empty){const n=t.docs[0];return{id:n.id,...n.data()}}throw new Error("×œ× × ×ž×¦× ×ž×•×¦×¨ ×¢× ×‘×¨×§×•×“ ×–×”")}const mv=({item:r,onConfirm:e,onCancel:t})=>{const[n,i]=se.useState(1),a=n>=1&&n<=r.quantity;return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-box",dir:"rtl",children:[f.jsx("h3",{style:{textAlign:"center"},children:r.name}),f.jsx("img",{src:r.imageUrl,alt:r.name,style:{width:"100%",maxHeight:"200px",objectFit:"cover"}}),f.jsxs("p",{children:["×ž×–×”×” ×ž×•×¦×¨: ",r.ItemId]}),f.jsxs("p",{children:["×›×ž×•×ª ×–×ž×™× ×”: ",r.quantity]}),f.jsxs("div",{style:{marginTop:"1rem"},children:[f.jsx("label",{children:"×‘×—×¨ ×›×ž×•×ª:"}),f.jsx("input",{type:"number",value:n,min:1,max:r.quantity,onChange:s=>i(+s.target.value),style:{width:"100%",padding:"10px",marginTop:"0.5rem",border:a?"1px solid #ccc":"2px solid red"}}),!a&&f.jsxs("p",{style:{color:"red",marginTop:"0.5rem"},children:["×›×ž×•×ª ×œ× ×ª×§×™× ×”. ×™×© ×œ×‘×—×•×¨ ×‘×™×Ÿ 1 ×œÖ¾",r.quantity]})]}),f.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between"},children:[f.jsx("button",{className:"btn btn-red",onClick:t,children:"×‘×™×˜×•×œ"}),f.jsx("button",{className:"btn btn-green",onClick:()=>e(n),disabled:!a,children:"××™×©×•×¨"})]})]})})},xv=({currentPage:r,totalItems:e,itemsPerPage:t,onPageChange:n,className:i=""})=>{const a=Math.ceil(e/t),s=window.innerWidth<=768;if(a<=1)return null;const l=(()=>{const u=s?5:7,p=Math.floor(u/2);let h=Math.max(1,r-p),m=Math.min(a,h+u-1);m-h+1<u&&(h=Math.max(1,m-u+1));const v=[];h>1&&(v.push(1),h>2&&v.push("..."));for(let b=h;b<=m;b++)v.push(b);return m<a&&(m<a-1&&v.push("..."),v.push(a)),v})(),c=(r-1)*t+1,d=Math.min(r*t,e);return f.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"1.5rem 0",direction:"rtl"},children:[f.jsxs("div",{style:{fontSize:s?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["×ž×¦×™×’ ",c,"-",d," ×ž×ª×•×š ",e," ×ž×•×¦×¨×™×"]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[f.jsx("button",{onClick:()=>n(r-1),disabled:r===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===1?"#f9fafb":"white",color:r===1?"#9ca3af":"#374151",cursor:r===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:f.jsx(Go,{size:s?16:20})}),l.map((u,p)=>{if(u==="...")return f.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",color:"#9ca3af"},children:f.jsx(vf,{size:s?16:20})},`dots-${p}`);const h=u===r;return f.jsx("button",{onClick:()=>n(u),style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:h?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:h?"#3b82f6":"white",color:h?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:h?"bold":"normal",fontSize:s?"14px":"16px"},children:u},u)}),f.jsx("button",{onClick:()=>n(r+1),disabled:r===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===a?"#f9fafb":"white",color:r===a?"#9ca3af":"#374151",cursor:r===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:f.jsx($o,{size:s?16:20})})]})]})},eh=({showCatalogPopup:r,setShowCatalogPopup:e,searchTerm:t,setSearchTerm:n,searchIdTerm:i,setSearchIdTerm:a,availableItems:s,toggleSelectItem:o,changeQty:l,form:c,loadingItems:d,setAvailableItems:u,hideBarcodeScanner:p=!1})=>{const[h,m]=se.useState(!1),[v,b]=se.useState(null),[y,I]=se.useState([]),[N,_]=se.useState(1),[F,R]=se.useState(window.innerWidth<=768),U=F?6:8;if(se.useEffect(()=>{const K=()=>{const T=window.innerWidth<=768;T!==F&&(R(T),_(1))};return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[F]),se.useEffect(()=>{_(1)},[t,i]),se.useEffect(()=>{r&&(console.log("ðŸ” Modal × ×¤×ª×—, ×ž××ª×—×œ local state ×¢× ×¤×¨×™×˜×™×:",s.length),I([...s]))},[r,s]),!r)return null;const j=async K=>{console.log("ðŸ“± ×‘×¨×§×•×“ × ×¡×¨×§:",K);try{const T=await gv(K);console.log("ðŸ” ×¤×¨×™×˜ × ×ž×¦× ×‘×ž××’×¨:",T);const z=s.find(G=>G.ItemId===T.ItemId||G.id===T.id);if(console.log("ðŸ” ×ž×—×¤×© ×¤×¨×™×˜ ×‘×¨×©×™×ž×” ×–×ž×™× ×”:",z),!z){console.log("âŒ ×”×¤×¨×™×˜ ×œ× × ×ž×¦× ×‘×¨×©×™×ž×ª ×”×¤×¨×™×˜×™× ×”×–×ž×™× ×™× ×œ×ª×§×•×¤×” ×–×•"),alert("×”×¤×¨×™×˜ ×œ× ×–×ž×™×Ÿ ×œ×ª×§×•×¤×ª ×”×”×–×ž× ×” ×©×œ×š"),m(!1);return}if(y.some(G=>(G.ItemId===T.ItemId||G.id===T.id)&&G.selected)){console.log("âš ï¸ ×”×ž×•×¦×¨ ×›×‘×¨ × ×‘×—×¨ ×‘×¨×©×™×ž×”"),alert("×”×ž×•×¦×¨ ×›×‘×¨ × ×‘×—×¨ ×‘×¨×©×™×ž×”"),m(!1);return}z.quantity>0?(console.log("âœ… ×”×ž×•×¦×¨ ×–×ž×™×Ÿ, ×¤×•×ª×— ×ž×•×“×œ ××™×©×•×¨"),b(z),m(!1)):(console.log("âŒ ×”×ž×•×¦×¨ ×œ× ×–×ž×™×Ÿ ×‘×ž×œ××™ ×œ×ª×§×•×¤×” ×–×•"),alert("×”×ž×•×¦×¨ ×œ× ×–×ž×™×Ÿ ×‘×ž×œ××™ ×œ×ª×§×•×¤×” ×–×•"),m(!1))}catch(T){console.error("âŒ ×©×’×™××” ×‘××™×ª×•×¨ ×”×¤×¨×™×˜:",T),alert(T.message),m(!1)}},E=K=>{console.log("ðŸ”„ ×ž×©× ×” ×‘×—×™×¨×” ×¢×‘×•×¨ ×¤×¨×™×˜:",K),I(T=>T.map(z=>z.id===K?{...z,selected:!z.selected,selectedQty:z.selected?0:1}:z))},B=(K,T)=>{let z=parseInt(T)||0;z>K.quantity&&(z=K.quantity),z<0&&(z=0),console.log("ðŸ”¢ ×ž×©× ×” ×›×ž×•×ª ×¢×‘×•×¨",K.name,"×œ×›×ž×•×ª:",z),I(W=>W.map(G=>G.id===K.id?{...G,selectedQty:z,selected:z>0}:G))},k=()=>{console.log("ðŸ’¾ ×ž×—×™×œ ×©×™× ×•×™×™× ×¢×œ state ×”×¨××©×™..."),y.forEach(K=>{const T=s.find(z=>z.id===K.id);T&&(K.selected!==T.selected&&o(K.id),K.selectedQty!==T.selectedQty&&l(K.id,K.selectedQty))})},S=()=>{console.log("âœ… ×ž××©×¨ ×‘×—×™×¨×•×ª ×•×ž×—×™×œ ×©×™× ×•×™×™×..."),k(),e(!1)},D=(K="unknown")=>{console.log("âŒ ×ž×‘×˜×œ ×‘×—×™×¨×•×ª ×•×¡×•×’×¨ ×ž×•×“×œ - ×ž×§×•×¨:",K),e(!1)},w=K=>{K.target===K.currentTarget?(console.log("ðŸ–±ï¸ ×§×œ×™×§ ×¢×œ overlay - ×¡×•×’×¨ ×ž×•×“×œ"),D("overlay-click")):console.log("ðŸ–±ï¸ ×§×œ×™×§ ×‘×ª×•×š ×”×ž×•×“×œ - ×œ× ×¡×•×’×¨")},M=t.toLowerCase(),O=i.trim().toLowerCase(),L=y.filter(K=>K.name.toLowerCase().includes(M)&&(O===""||String(K.ItemId||K.itemId||"").toLowerCase()===O)),X=(N-1)*U,H=X+U,ee=L.slice(X,H);return console.log("ðŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª ×¤×¨×™×˜×™×:",{totalItems:y.length,filteredItems:L.length,currentPageItems:ee.length,currentPage:N,itemsPerPage:U}),f.jsxs("div",{className:"modal-overlay",onClick:w,children:[f.jsxs("div",{className:"modal-box",dir:"rtl",onClick:K=>K.stopPropagation(),children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[!p&&f.jsx("button",{style:{width:"180px"},className:"btn btn-gray",onClick:()=>{console.log("ðŸ“± ×¤×•×ª×— ×¡×•×¨×§ ×‘×¨×§×•×“..."),m(!0)},children:"×¡×¨×™×§×ª ×‘×¨×§×•×“"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",width:p?"100%":"60%"},children:[f.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×ž×•×¦×¨ ×œ×¤×™ ×©×...",value:t,onChange:K=>n(K.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px"}}),f.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×ž×•×¦×¨ ×œ×¤×™ ×ž×¡×¤×¨ ×ž×–×”×”...",value:i,onChange:K=>a(K.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px"}})]})]}),f.jsxs("h3",{style:{textAlign:"center",marginBottom:"1rem"},children:["×ž×•×¦×¨×™× ×–×ž×™× ×™× (",c.pickupDate," â†’ ",c.returnDate,")"]}),d?f.jsx("p",{style:{textAlign:"center"},children:"×˜×•×¢×Ÿ ×ž×•×¦×¨×™×â€¦"}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"modal-grid",children:ee.length===0?f.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:t?`×œ× × ×ž×¦××• ×ž×•×¦×¨×™× ×œ×—×™×¤×•×© "${t}"`:"×œ× × ×ž×¦××• ×ž×•×¦×¨×™× ×–×ž×™× ×™×"}):ee.map(K=>f.jsxs("div",{className:`item-card ${K.selected?"selected":""}`,children:[f.jsx("img",{src:K.imageUrl||"/no-image-available.png",alt:K.name,className:"item-image"}),f.jsx("h4",{children:K.name}),f.jsxs("p",{children:["×–×ž×™×Ÿ: ",K.quantity]}),f.jsxs("p",{children:["×ž×–×”×” ×ž×•×¦×¨: ",K.ItemId]}),f.jsxs("div",{style:{margin:"0.5rem 0"},children:[f.jsx("label",{style:{marginBottom:"0.3rem",display:"block"},children:"×›×ž×•×ª:"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[f.jsx("button",{onClick:()=>B(K,Math.max(0,K.selectedQty-1)),disabled:K.selectedQty<=0,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:K.selectedQty<=0?"#f5f5f5":"#fff",cursor:K.selectedQty<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:K.selectedQty<=0?"#ccc":"#333"},children:"-"}),f.jsx("input",{type:"number",min:0,max:K.quantity,value:K.selectedQty,onChange:T=>B(K,T.target.value),onBlur:T=>{(parseInt(T.target.value)||0)>K.quantity&&B(K,K.quantity)},style:{width:"50px",height:"30px",padding:"5px",textAlign:"center",borderRadius:"6px",border:K.selectedQty>K.quantity?"2px solid red":"1px solid #ccc",backgroundColor:K.selectedQty>0?"#e3f2fd":"#fff",fontSize:"14px",fontWeight:"bold",appearance:"textfield",MozAppearance:"textfield"}}),f.jsx("button",{onClick:()=>B(K,Math.min(K.quantity,K.selectedQty+1)),disabled:K.selectedQty>=K.quantity,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:K.selectedQty>=K.quantity?"#f5f5f5":"#fff",cursor:K.selectedQty>=K.quantity?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:K.selectedQty>=K.quantity?"#ccc":"#333"},children:"+"})]}),K.selectedQty>K.quantity&&f.jsxs("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"0.2rem"},children:["×ž×§×¡×™×ž×•×: ",K.quantity]})]}),f.jsx("button",{onClick:()=>E(K.id),className:`btn ${K.selected?"btn-red":"btn-blue"}`,style:{width:"100%",marginTop:"0.5rem"},children:K.selected?"âŒ ×”×¡×¨ ×ž×•×¦×¨":"ðŸ›’ ×‘×—×¨ ×ž×•×¦×¨"})]},K.id))}),f.jsx(xv,{currentPage:N,totalItems:L.length,itemsPerPage:U,onPageChange:_})]}),f.jsxs("div",{className:"modal-actions",children:[f.jsx("button",{className:"btn btn-blue",onClick:()=>{console.log("âœ… ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ ××™×©×•×¨"),S()},children:"âœ”ï¸ ××™×©×•×¨"}),f.jsx("button",{className:"btn btn-gray",onClick:()=>{console.log("âŒ ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ ×‘×™×˜×•×œ"),D("cancel-button")},children:"âŒ ×‘×™×˜×•×œ"})]})]}),!p&&h&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:K=>{console.log("ðŸ“± ×§×œ×™×§ ×¢×œ ×¨×§×¢ ×”×¡×•×¨×§"),K.stopPropagation()},children:f.jsx(fv,{onScanSuccess:j,onClose:()=>{console.log("ðŸ“± ×¡×•×¨×§ ×‘×¨×§×•×“ × ×¡×’×¨"),m(!1)}})}),!p&&v&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10001,backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:K=>{console.log("ðŸ“¦ ×§×œ×™×§ ×¢×œ ×¨×§×¢ ×ž×•×“×œ ×ª×•×¦××ª ×¡×¨×™×§×”"),K.stopPropagation()},children:f.jsx(mv,{item:v,onCancel:()=>{console.log("âŒ ×ž×‘×˜×œ ×ª×•×¦××ª ×¡×¨×™×§×”"),b(null),m(!1)},onConfirm:K=>{console.log("âœ… ×ž××©×¨ ×”×•×¡×¤×ª ×¤×¨×™×˜ ×ž×¡×¨×™×§×”:",v.name,"×›×ž×•×ª:",K),I(z=>{const W=z.map(G=>G.id===v.id||G.ItemId===v.ItemId?(console.log("ðŸ“ ×ž×¢×“×›×Ÿ ×¤×¨×™×˜ ×‘-localItems:",G.name,"×›×ž×•×ª ×—×“×©×”:",K),{...G,selected:!0,selectedQty:K}):G);return console.log("ðŸ“Š localItems ××—×¨×™ ×¢×“×›×•×Ÿ:",W.filter(G=>G.selected)),W}),b(null),console.log("ðŸŽ¯ ×¤×¨×™×˜ × ×•×¡×£ ×‘×”×¦×œ×—×” ×ž×¡×¨×™×§×”, ×”×ž×•×“×œ × ×©××¨ ×¤×ª×•×— ×œ×”×ž×©×š ×‘×—×™×¨×”");const T=y.findIndex(z=>z.id===v.id||z.ItemId===v.ItemId);if(T>=0){const z=Math.ceil((T+1)/U);console.log("ðŸ“„ ×ž×¢×‘×¨ ×œ×¢×ž×•×“",z,"×›×“×™ ×œ×”×¦×™×’ ××ª ×”×¤×¨×™×˜ ×©× ×•×¡×£"),_(z)}}})})]})},th={async findClientByPhone(r){try{if(console.log("ðŸ” ×ž×—×¤×© ×¤×¨×˜×™ ×œ×§×•×— ×œ×ž×¡×¤×¨ ×˜×œ×¤×•×Ÿ:",r),!r||r.length<10)return{found:!1};const e=r.replace(/[\s\-]/g,""),t=mi(mt(Ue,"orders"),aa("phone","==",e)),n=await Bt(t);if(n.empty)return console.log("âŒ ×œ× × ×ž×¦××• ×”×–×ž× ×•×ª ×¢×‘×•×¨ ×ž×¡×¤×¨ ×–×”"),{found:!1};const i=n.docs.map(s=>({id:s.id,...s.data()}));i.sort((s,o)=>{var d,u;const l=((d=s.createdAt)==null?void 0:d.seconds)||0;return(((u=o.createdAt)==null?void 0:u.seconds)||0)-l});const a=i[0];return console.log("âœ… × ×ž×¦××” ×”×–×ž× ×”:",{clientName:a.clientName,address:a.address,email:a.email}),{found:!0,clientData:{clientName:a.clientName||"",address:a.address||"",email:a.email||""}}}catch(e){return console.error("âŒ ×©×’×™××” ×‘×—×™×¤×•×© ×¤×¨×˜×™ ×œ×§×•×—:",e),{found:!1}}}},na={async getClosedDates(){try{const e=(await Bt(mt(Ue,"closedDates"))).docs.map(t=>({id:t.id,...t.data()}));return console.log("ðŸ“… × ×˜×¢× ×• ×™×ž×™× ×¡×’×•×¨×™×:",e.map(t=>({id:t.id,date:t.date}))),e}catch(r){return console.error("âŒ ×©×’×™××” ×‘×©×œ×™×¤×ª ×™×ž×™× ×¡×’×•×¨×™×:",r),[]}},async addClosedDate(r,e,t="×™×•× ×¡×’×•×¨"){try{const n=this.formatDateToString(r);if(!n)return console.error("âŒ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ:",r),!1;console.log(`ðŸ”’ ×ž×•×¡×™×£ ×™×•× ×¡×’×•×¨: ${n} (×ž×§×•×¨×™: ${r})`);const i=Tt(Ue,"closedDates",n);return await bf(i,{date:n,reason:t,createdBy:e,createdAt:tr()}),console.log("âœ… ×™×•× ×¡×’×•×¨ × ×•×¡×£ ×‘×”×¦×œ×—×”:",n),!0}catch(n){return console.error("âŒ ×©×’×™××” ×‘×”×•×¡×¤×ª ×™×•× ×¡×’×•×¨:",n),!1}},async removeClosedDate(r){try{const e=this.formatDateToString(r);if(!e)return console.error("âŒ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ:",r),!1;console.log(`ðŸ—‘ï¸ ×ž×¡×™×¨ ×™×•× ×¡×’×•×¨: ${e} (×ž×§×•×¨×™: ${r})`);const t=Tt(Ue,"closedDates",e);return await uo(t),console.log("âœ… ×™×•× ×¡×’×•×¨ ×”×•×¡×¨ ×‘×”×¦×œ×—×”:",e),!0}catch(e){return console.error("âŒ ×©×’×™××” ×‘×”×¡×¨×ª ×™×•× ×¡×’×•×¨:",e),!1}},isDateClosed(r,e=null){try{const t=this.formatDateToString(r);if(!t)return console.warn("âš ï¸ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ ×‘×‘×“×™×§×ª ×¡×’×™×¨×”:",r),!1;if(e&&Array.isArray(e)){const n=e.some(i=>{const a=i.date||i.id,s=a===t;return s&&console.log(`ðŸ”’ × ×ž×¦× ×™×•× ×¡×’×•×¨: ${a} === ${t}`),s});return console.log(`ðŸ” ×‘×•×“×§ ×ª××¨×™×š ${t} - ×¡×’×•×¨: ${n}`),n}return console.log(`ðŸ” ×‘×•×“×§ ×ª××¨×™×š ${t} - ××™×Ÿ ×¨×©×™×ž×” ×¡×’×•×¨×™×`),!1}catch(t){return console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×ª ×ª××¨×™×š ×¡×’×•×¨:",t),!1}},formatDateToString(r){try{let e;if(typeof r=="string"){if(r.match(/^\d{4}-\d{2}-\d{2}$/))return console.log(`ðŸ“… ×ª××¨×™×š ×›×‘×¨ ×‘×¤×•×¨×ž×˜ × ×›×•×Ÿ: ${r}`),r;e=new Date(r+"T00:00:00")}else if(r instanceof Date)e=new Date(r);else return console.warn("âš ï¸ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ:",r),"";if(isNaN(e.getTime()))return console.warn("âš ï¸ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ ××—×¨×™ ×”×ž×¨×”:",r),"";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=`${t}-${n}-${i}`;return console.log(`ðŸ“… ×”×ž×¨×ª ×ª××¨×™×š: ${r} â†’ ${a}`),a}catch(e){return console.error("âŒ ×©×’×™××” ×‘×”×ž×¨×ª ×ª××¨×™×š:",e,r),""}},canCloseDateValidation(r,e=[]){const t=new Date().toISOString().split("T")[0];return this.formatDateToString(r)<t?{valid:!1,reason:"×œ× × ×™×ª×Ÿ ×œ×¡×’×•×¨ ×ª××¨×™×›×™× ×‘×¢×‘×¨"}:e&&e.length>0&&e.filter(a=>a.type!=="×”×©××œ×” ×¤×¢×™×œ×”").length>0?{valid:!1,reason:"×§×™×™×ž×™× ××™×¨×•×¢×™× ×‘×ª××¨×™×š ×–×”"}:{valid:!0,reason:"× ×™×ª×Ÿ ×œ×¡×’×™×¨×”"}},async addMultipleClosedDates(r,e,t="×™×ž×™× ×¡×’×•×¨×™×"){const n={success:[],failed:[]};console.log("ðŸ“… ×ž×ª×—×™×œ ×œ×”×•×¡×™×£ ×™×ž×™× ×¡×’×•×¨×™×:",r);for(const i of r)try{await this.addClosedDate(i,e,t)?n.success.push(i):n.failed.push(i)}catch(a){console.error(`âŒ ×©×’×™××” ×‘×¡×’×™×¨×ª ${i}:`,a),n.failed.push(i)}return console.log("ðŸ“Š ×ª×•×¦××•×ª ×¡×’×™×¨×ª ×™×ž×™×:",n),n},validateOrderDates(r,e,t){const n={};return r&&this.isDateClosed(r,t)&&(n.pickupDate="ðŸ”’ ×ª××¨×™×š ×œ×§×™×—×ª ×”×ž×•×¦×¨×™× ×—×œ ×‘×™×•× ×¡×’×•×¨"),e&&this.isDateClosed(e,t)&&(n.returnDate="ðŸ”’ ×ª××¨×™×š ×”×—×–×¨×ª ×”×ž×•×¦×¨×™× ×—×œ ×‘×™×•× ×¡×’×•×¨"),{isValid:Object.keys(n).length===0,errors:n}}},vv=({onOrderCreated:r})=>{const e="newLoanDraft",[n,i]=se.useState({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[a,s]=se.useState({}),[o,l]=se.useState(!1),[c,d]=se.useState([]),[u,p]=se.useState(!1),[h,m]=se.useState(""),[v,b]=se.useState(""),[y,I]=se.useState([]),[N,_]=se.useState(!1),[F,R]=se.useState(!1),[U,j]=se.useState([]),[E,B]=se.useState(!1),k=H=>{if(E)try{const K=(H&&H.length>0?H:c.length>0?c:y).map(W=>{const G=W.selectedQty??0,oe=W.selected||G>0;return{id:W.id,ItemId:W.ItemId,selectedQty:oe?Math.max(G,1):0,_selected:oe}}).filter(W=>W._selected).map(({id:W,ItemId:G,selectedQty:oe})=>({id:W,ItemId:G,selectedQty:oe})),T={form:n,selectedItems:K,timestamp:Date.now()};localStorage.setItem(e,JSON.stringify(T));const z=W=>W.map(G=>`${G.id}|${G.ItemId}|${G.selectedQty}`).sort().join(",");z(K)!==z(y)&&I(K)}catch(ee){console.warn("Failed to save draft",ee)}};se.useEffect(()=>{try{const H=localStorage.getItem(e);if(!H)return;const ee=JSON.parse(H);if(!ee.timestamp||Date.now()-ee.timestamp>36e5){localStorage.removeItem(e);return}ee.form&&i(K=>({...K,...ee.form})),Array.isArray(ee.selectedItems)&&I(ee.selectedItems)}catch(H){console.warn("Failed to load draft",H),localStorage.removeItem(e)}finally{B(!0)}},[]),se.useEffect(()=>{S()},[]),se.useEffect(()=>{E&&k()},[n,c,E]);const S=async()=>{try{const H=await na.getClosedDates();j(H),console.log("ðŸ“… × ×˜×¢× ×• ×™×ž×™× ×¡×’×•×¨×™× ×œ×ž×¢×¨×›×ª ×”×–×ž× ×•×ª:",H.length)}catch(H){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×™×ž×™× ×¡×’×•×¨×™×:",H)}},D=async H=>{const{name:ee,value:K}=H.target;if(i(T=>({...T,[ee]:K})),ee==="phone"&&K.length===10&&/^\d{10}$/.test(K)){R(!0);try{const T=await th.findClientByPhone(K);T.found&&(i(z=>({...z,phone:K,clientName:T.clientData.clientName,address:T.clientData.address,email:T.clientData.email})),alert(`× ×ž×¦× ×œ×§×•×— ×§×™×™×! ×”×¤×¨×˜×™× ×ž×•×œ××• ××•×˜×•×ž×˜×™×ª:
×©×: ${T.clientData.clientName}
×›×ª×•×‘×ª: ${T.clientData.address}`))}catch(T){console.error("×©×’×™××” ×‘×—×™×¤×•×© ×¤×¨×˜×™ ×œ×§×•×—:",T)}finally{R(!1)}}},w=()=>{const H={},ee=new Date().toISOString().split("T")[0],{pickupDate:K,eventDate:T,returnDate:z}=n;n.volunteerName!==void 0&&!n.volunteerName.trim()&&(H.volunteerName="×©×“×” ×—×•×‘×”"),n.clientName.trim()||(H.clientName="×©×“×” ×—×•×‘×”"),n.address.trim()||(H.address="×©×“×” ×—×•×‘×”"),n.phone.trim()?/^\d{10}$/.test(n.phone)||(H.phone="×ž×¡×¤×¨ ×˜×œ×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ"):H.phone="×©×“×” ×—×•×‘×”",n.eventType.trim()||(H.eventType="×©×“×” ×—×•×‘×”"),K||(H.pickupDate="×©×“×” ×—×•×‘×”"),T||(H.eventDate="×©×“×” ×—×•×‘×”"),z||(H.returnDate="×©×“×” ×—×•×‘×”"),K&&K<ee&&(H.pickupDate="×ª××¨×™×š ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×‘×¢×‘×¨"),T&&K&&T<K&&(H.eventDate="×ª××¨×™×š ×”××™×¨×•×¢ ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×œ×¤× ×™ ×œ×§×™×—×”"),z&&K&&z<=K&&(H.returnDate="×”×—×–×¨×” ××—×¨×™ ×œ×§×™×—×”");const W=na.validateOrderDates(K,z,U);return W.isValid||Object.assign(H,W.errors),console.log("ðŸ” ×‘×“×™×§×ª ×ª××¨×™×›×™×:",{pickupDate:K,returnDate:z,closedDatesCount:U.length,validation:W,errors:H}),s(H),Object.keys(H).length===0},M=()=>{window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”×”×–×ž× ×”?")&&(i({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),s({}),d([]),m(""),b(""),l(!1),I([]),localStorage.removeItem(e))},O=async()=>{if(!w())return;const ee=(await Bt(mt(Ue,"orders"))).docs.map(z=>z.data().simpleId).filter(z=>typeof z=="number"),K=ee.length>0?Math.max(...ee)+1:1,T=c.filter(z=>z.selected).map(z=>({id:z.id,ItemId:z.ItemId,name:z.name,quantity:z.selectedQty,imageUrl:z.imageUrl}));_(!0);try{const z=await Ta(mt(Ue,"orders"),{...n,items:T,status:"open",simpleId:K,createdAt:tr()});await _r(z,{orderId:z.id}),i({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),d([]),m(""),b(""),l(!1),I([]),localStorage.removeItem(e),alert(`×”×”×–×ž× ×” × ×©×ž×¨×”! ×ž×¡' ×”×–×ž× ×”: ${K}`),r&&await r()}catch(z){console.error("×©×’×™××” ×‘×©×ž×™×¨×”:",z),alert("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×”×–×ž× ×”")}_(!1)};se.useEffect(()=>{if(!o)return;(async()=>{p(!0);const ee=K=>K?K.toDate?K.toDate():typeof K=="string"?new Date(K):K:null;try{const T=(await Bt(mt(Ue,"items"))).docs.map(fe=>({id:fe.id,...fe.data()})).filter(fe=>fe.isDeleted!==!0),z=await Bt(mt(Ue,"orders")),W=ee(n.pickupDate),G=ee(n.returnDate),oe=z.docs.map(fe=>fe.data()).filter(fe=>{const be=ee(fe.pickupDate),_e=ee(fe.returnDate);return fe.status==="open"&&be&&_e&&W&&G&&_e>=W&&be<=G}),re={};oe.forEach(fe=>{var be;(be=fe.items)==null||be.forEach(_e=>{re[_e.id]=(re[_e.id]||0)+_e.quantity})});const le={};c.forEach(fe=>{fe.selected&&fe.selectedQty>0&&(le[fe.id]={selected:fe.selected,selectedQty:fe.selectedQty})}),y.forEach(fe=>{fe.selectedQty>0&&(le[fe.id]={selected:!0,selectedQty:fe.selectedQty})});const de=T.map(fe=>{const be=(fe.quantity||0)-(re[fe.id]||0),_e=le[fe.id];return{...fe,quantity:be,selected:_e?_e.selected:!1,selectedQty:_e?_e.selectedQty:0}}).filter(fe=>fe.quantity>0);d(de)}catch(K){console.error("×©×’×™××” ×‘×—×™×©×•×‘ ×–×ž×™× ×•×ª:",K),d([])}p(!1)})()},[o,n.pickupDate,n.returnDate,y]);const L=H=>{d(ee=>{const K=ee.map(T=>T.id===H?{...T,selected:!T.selected,selectedQty:T.selected?0:1}:T);return k(K),K})},X=(H,ee)=>{d(K=>{const T=K.map(z=>z.id===H?{...z,selected:ee>0,selectedQty:ee}:z);return k(T),T})};return f.jsxs("div",{className:"new-loan-container",children:[f.jsx(Cg,{form:n,errors:a,handleChange:D,handleConfirm:O,handleClear:M,setShowCatalogPopup:l,saving:N,isLoadingClientData:F}),f.jsx(eh,{showCatalogPopup:o,setShowCatalogPopup:l,searchTerm:h,setSearchTerm:m,searchIdTerm:v,setSearchIdTerm:b,setAvailableItems:d,availableItems:c,toggleSelectItem:L,changeQty:X,form:n,loadingItems:u})]})},yv=({onRequestSubmitted:r})=>{const{user:e}=An(),[t,n]=se.useState({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[i,a]=se.useState({}),[s,o]=se.useState(!1),[l,c]=se.useState([]),[d,u]=se.useState(!1),[p,h]=se.useState(""),[m,v]=se.useState(!1),[b,y]=se.useState(!1),[I,N]=se.useState([]);se.useEffect(()=>{_()},[]);const _=async()=>{try{const D=await na.getClosedDates();N(D),console.log("ðŸ“… × ×˜×¢× ×• ×™×ž×™× ×¡×’×•×¨×™× ×œ×ž×¢×¨×›×ª ×‘×§×©×•×ª:",D.length)}catch(D){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×™×ž×™× ×¡×’×•×¨×™×:",D)}},F=se.useCallback(async D=>{const{name:w,value:M}=D.target;if(n(O=>({...O,[w]:M})),w==="phone"&&M.length===10&&/^\d{10}$/.test(M)){y(!0);try{const O=await th.findClientByPhone(M);O.found&&(n(L=>({...L,phone:M,clientName:O.clientData.clientName,address:O.clientData.address,email:O.clientData.email})),alert(`× ×ž×¦× ×œ×§×•×— ×§×™×™×! ×”×¤×¨×˜×™× ×ž×•×œ××• ××•×˜×•×ž×˜×™×ª:
×©×: ${O.clientData.clientName}
×›×ª×•×‘×ª: ${O.clientData.address}`))}catch(O){console.error("×©×’×™××” ×‘×—×™×¤×•×© ×¤×¨×˜×™ ×œ×§×•×—:",O)}finally{y(!1)}}},[]),R=()=>{const D={},w=new Date().toISOString().split("T")[0],{pickupDate:M,eventDate:O,returnDate:L}=t;t.volunteerName!==void 0&&!t.volunteerName.trim()&&(D.volunteerName="×©×“×” ×—×•×‘×”"),t.clientName.trim()||(D.clientName="×©×“×” ×—×•×‘×”"),t.address.trim()||(D.address="×©×“×” ×—×•×‘×”"),t.phone.trim()?/^\d{10}$/.test(t.phone)||(D.phone="×ž×¡×¤×¨ ×˜×œ×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ"):D.phone="×©×“×” ×—×•×‘×”",t.eventType.trim()||(D.eventType="×©×“×” ×—×•×‘×”"),M||(D.pickupDate="×©×“×” ×—×•×‘×”"),O||(D.eventDate="×©×“×” ×—×•×‘×”"),L||(D.returnDate="×©×“×” ×—×•×‘×”"),M&&M<w&&(D.pickupDate="×ª××¨×™×š ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×‘×¢×‘×¨"),O&&M&&O<M&&(D.eventDate="×ª××¨×™×š ×”××™×¨×•×¢ ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×œ×¤× ×™ ×œ×§×™×—×”"),L&&M&&L<=M&&(D.returnDate="×”×—×–×¨×” ××—×¨×™ ×œ×§×™×—×”");const X=na.validateOrderDates(M,L,I);return X.isValid||Object.assign(D,X.errors),console.log("ðŸ” ×‘×“×™×§×ª ×ª××¨×™×›×™×:",{pickupDate:M,returnDate:L,closedDatesCount:I.length,validation:X,errors:D}),a(D),Object.keys(D).length===0},U=()=>{window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”×‘×§×©×”?")&&(n({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),a({}),c([]),h(""),o(!1))},j=async()=>{if(!R())return;const D=l.filter(w=>w.selected).map(w=>({id:w.id,ItemId:w.ItemId,name:w.name,quantity:w.selectedQty,imageUrl:w.imageUrl}));if(D.length===0){alert("×™×© ×œ×‘×—×•×¨ ×œ×¤×—×•×ª ×¤×¨×™×˜ ××—×“");return}v(!0);try{await Ta(mt(Ue,"orderRequests"),{...t,items:D,status:"pending",requestedBy:e.uid,requestedByUsername:e.username,requestedByEmail:e.email,requestedAt:tr(),approvedBy:null,approvedAt:null}),n({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),c([]),h(""),o(!1),alert("ðŸŽ‰ ×”×‘×§×©×” × ×©×œ×—×” ×‘×”×¦×œ×—×”! ×ª×§×‘×œ ×¢×“×›×•×Ÿ ×›××©×¨ ×”×‘×§×©×” ×ª××•×©×¨."),r&&await r()}catch(w){console.error("×©×’×™××” ×‘×©×œ×™×—×ª ×”×‘×§×©×”:",w),alert("×©×’×™××” ×‘×©×œ×™×—×ª ×”×‘×§×©×”. ×× × × ×¡×” ×©×•×‘.")}v(!1)},E=j1.useRef([]);se.useEffect(()=>{if(!s)return;(async()=>{u(!0);const w=M=>M?M.toDate?M.toDate():typeof M=="string"?new Date(M):M:null;try{const O=(await Bt(mt(Ue,"items"))).docs.map(W=>({id:W.id,...W.data()})).filter(W=>W.isDeleted!==!0),L=await Bt(mt(Ue,"orders")),X=w(t.pickupDate),H=w(t.returnDate),ee=L.docs.map(W=>W.data()).filter(W=>{const G=w(W.pickupDate),oe=w(W.returnDate);return W.status==="open"&&G&&oe&&X&&H&&oe>=X&&G<=H}),K={};ee.forEach(W=>{var G;(G=W.items)==null||G.forEach(oe=>{K[oe.id]=(K[oe.id]||0)+oe.quantity})});const T={};E.current.forEach(W=>{W.selected&&W.selectedQty>0&&(T[W.id]={selected:W.selected,selectedQty:W.selectedQty})});const z=O.map(W=>{const G=(W.quantity||0)-(K[W.id]||0),oe=T[W.id];return{...W,quantity:G,selected:oe?oe.selected:!1,selectedQty:oe?oe.selectedQty:0}}).filter(W=>W.quantity>0);E.current=z,c(z)}catch(M){console.error("×©×’×™××” ×‘×—×™×©×•×‘ ×–×ž×™× ×•×ª:",M),c([])}u(!1)})()},[s,t.pickupDate,t.returnDate]);const B=D=>{c(w=>{const M=w.map(O=>O.id===D?{...O,selected:!O.selected,selectedQty:O.selected?0:1}:O);return E.current=M,M})},k=(D,w)=>{c(M=>{const O=M.map(L=>L.id===D?{...L,selected:w>0,selectedQty:w}:L);return E.current=O,O})},S=[{label:"×ž×¡×¤×¨ ×¤×œ××¤×•×Ÿ",name:"phone",required:!0},{label:"×©× ×œ×§×•×—",name:"clientName",required:!0},{label:"×ž×§×•× ×ž×’×•×¨×™×",name:"address",required:!0},{label:"××™×ž×™×™×œ",name:"email",required:!1},{label:"×¡×•×’ ×”××™×¨×•×¢",name:"eventType",required:!0},{label:"×ª××¨×™×š ×œ×§×™×—×ª ×ž×•×¦×¨×™×",name:"pickupDate",type:"date",required:!0},{label:"×ª××¨×™×š ×”××™×¨×•×¢",name:"eventDate",type:"date",required:!0},{label:"×ª××¨×™×š ×”×—×–×¨×ª ×ž×•×¦×¨×™×",name:"returnDate",type:"date",required:!0}];return f.jsxs("div",{className:"new-loan-container",children:[f.jsxs("div",{className:"loan-form-box",children:[f.jsx("h2",{style:{textAlign:"center"},children:"ðŸ™ ×‘×§×©×ª ×”×©××œ×”"}),f.jsx("p",{style:{textAlign:"center",color:"#666",marginBottom:"2rem"},children:"×ž×œ× ××ª ×”×¤×¨×˜×™× ×•×”×‘×§×©×” ×ª×™×©×œ×— ×œ××™×©×•×¨ ×”×ž× ×”×œ×™×"}),S.map(({label:D,name:w,type:M="text",required:O})=>f.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[f.jsxs("label",{htmlFor:w,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[D,O&&" *",b&&(w==="clientName"||w==="address"||w==="email")&&f.jsx("span",{style:{marginRight:"0.5rem",color:"#4caf50"},children:"â³"})]}),f.jsxs("div",{style:{position:"relative"},children:[f.jsx("input",{id:w,type:M,name:w,value:t[w]||"",onChange:F,autoComplete:"off",disabled:b&&(w==="clientName"||w==="address"||w==="email"),min:M==="date"?w==="pickupDate"?new Date().toISOString().split("T")[0]:w==="eventDate"||w==="returnDate"?t.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:i[w]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:b&&(w==="clientName"||w==="address"||w==="email")?"#f5f5f5":"white",opacity:b&&(w==="clientName"||w==="address"||w==="email")?.7:1},placeholder:b&&(w==="clientName"||w==="address"||w==="email")?"×˜×•×¢×Ÿ...":""}),b&&w==="phone"&&f.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#4caf50"},children:f.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e8f5e8",borderTop:"2px solid #4caf50",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),i[w]&&f.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:i[w]})]},w)),f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:f.jsx("button",{className:"btn btn-blue",onClick:()=>o(!0),disabled:b,children:"×‘×—×™×¨×ª ×ž×•×¦×¨×™×"})}),f.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[f.jsx("button",{className:"btn btn-green",onClick:j,disabled:m||b,children:m?"×©×•×œ×— ×‘×§×©×”...":"ðŸ“¨ ×©×œ×— ×‘×§×©×” ×œ××™×©×•×¨"}),f.jsx("button",{className:"btn btn-red",onClick:U,disabled:m||b,children:"×‘×™×˜×•×œ"})]}),f.jsx("style",{jsx:!0,children:`
          @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
          }
        `})]}),f.jsx(eh,{showCatalogPopup:s,setShowCatalogPopup:o,searchTerm:p,setSearchTerm:h,setAvailableItems:c,availableItems:l,toggleSelectItem:B,changeQty:k,form:t,loadingItems:d,hideBarcodeScanner:!0})]})},bv=()=>{const{user:r}=An(),[e,t]=se.useState([]),[n,i]=se.useState(!0),[a,s]=se.useState(null),[o,l]=se.useState(null),c=async()=>{try{i(!0);const v=(await Bt(mt(Ue,"orderRequests"))).docs.map(b=>({id:b.id,...b.data()})).filter(b=>b.status==="pending").sort((b,y)=>{var _,F;const I=((_=b.requestedAt)==null?void 0:_.seconds)||0;return(((F=y.requestedAt)==null?void 0:F.seconds)||0)-I});t(v)}catch(m){console.error("×©×’×™××” ×‘×˜×¢×™× ×ª ×‘×§×©×•×ª:",m)}finally{i(!1)}};se.useEffect(()=>{c()},[]);const d=async m=>{if(window.confirm(`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××©×¨ ××ª ×”×‘×§×©×” ×©×œ ${m.clientName}?`)){l(m.id),console.log("ðŸš€ ×ž×ª×—×™×œ ××™×©×•×¨ ×‘×§×©×”:",m);try{console.log("ðŸ“¦ ×˜×•×¢×Ÿ × ×ª×•× ×™ ×ž×œ××™ ×•×”×–×ž× ×•×ª...");const v=await Bt(mt(Ue,"items")),b=await Bt(mt(Ue,"orders")),y=w=>w?w.toDate?w.toDate():typeof w=="string"?new Date(w):w:null,I=y(m.pickupDate),N=y(m.returnDate),_=b.docs.map(w=>w.data()).filter(w=>{const M=y(w.pickupDate),O=y(w.returnDate);return w.status==="open"&&M&&O&&I&&N&&O>=I&&M<=N}),F={};_.forEach(w=>{var M;(M=w.items)==null||M.forEach(O=>{F[O.id]=(F[O.id]||0)+O.quantity})});const R=v.docs.map(w=>({id:w.id,...w.data()}));console.log("ðŸ” ×‘×•×“×§ ×–×ž×™× ×•×ª ×¤×¨×™×˜×™×...",m.items);let U=!0,j=[];for(const w of m.items){console.log(`ðŸ”Ž ×‘×•×“×§ ×¤×¨×™×˜: ${w.name}`,w);const M=R.find(L=>L.id===w.id);if(!M){console.log(`âŒ ×¤×¨×™×˜ ×œ× × ×ž×¦× ×‘×ž×œ××™: ${w.name}`),U=!1,j.push(`${w.name} (×œ× × ×ž×¦× ×‘×ž×œ××™)`);continue}const O=(M.quantity||0)-(F[w.id]||0);console.log(`ðŸ“Š ${w.name}: ×ž×œ××™=${M.quantity}, ×©×ž×•×¨=${F[w.id]||0}, ×–×ž×™×Ÿ=${O}, × ×“×¨×©=${w.quantity}`),w.quantity>O&&(U=!1,j.push(`${w.name} (×–×ž×™×Ÿ: ${O}, × ×“×¨×©: ${w.quantity})`))}if(!U){console.log("âŒ ×œ× ×›×œ ×”×¤×¨×™×˜×™× ×–×ž×™× ×™×:",j),alert(`×œ× × ×™×ª×Ÿ ×œ××©×¨ ××ª ×”×‘×§×©×” - ×¤×¨×™×˜×™× ×œ× ×–×ž×™× ×™×:
${j.join(`
`)}`),l(null);return}console.log("âœ… ×›×œ ×”×¤×¨×™×˜×™× ×–×ž×™× ×™×, ×ž×ž×©×™×š ×œ×™×¦×™×¨×ª ×”×–×ž× ×”..."),console.log("ðŸ”¢ ×™×•×¦×¨ ×ž×–×”×” ×”×–×ž× ×” ×—×“×©...");const B=(await Bt(mt(Ue,"orders"))).docs.map(w=>w.data().simpleId).filter(w=>typeof w=="number"),k=B.length>0?Math.max(...B)+1:1;console.log("ðŸŽ¯ ×ž×–×”×” ×”×–×ž× ×” ×—×“×©:",k),console.log("ðŸ“ ×™×•×¦×¨ ×”×–×ž× ×” ×—×“×©×”..."),console.log("ðŸ‘¤ ×¤×¨×˜×™ ×ž×©×ª×ž×©:",r);const S={clientName:m.clientName,address:m.address,phone:m.phone,email:m.email,eventType:m.eventType,pickupDate:m.pickupDate,eventDate:m.eventDate,returnDate:m.returnDate,items:m.items,simpleId:k,status:"open",volunteerName:`×ž××•×©×¨ ×¢"×™ ${(r==null?void 0:r.username)||(r==null?void 0:r.email)||"×ž× ×”×œ"}`,createdAt:tr(),approvedBy:(r==null?void 0:r.uid)||"unknown",approvedByUsername:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"×ž× ×”×œ",approvedAt:tr(),orderId:null};console.log("ðŸ’¾ ×©×•×ž×¨ ×”×–×ž× ×” ×—×“×©×”:",S);const D=await Ta(mt(Ue,"orders"),S);console.log("âœ… ×”×–×ž× ×” × ×©×ž×¨×” ×¢× ID:",D.id),await _r(D,{orderId:D.id}),console.log("ðŸ”„ ×¢×“×›×•×Ÿ orderId ×”×•×©×œ×"),console.log("ðŸ“‹ ×ž×¢×“×›×Ÿ ×¡×˜×˜×•×¡ ×‘×§×©×” ×œ××•×©×¨×”..."),await _r(Tt(Ue,"orderRequests",m.id),{status:"approved",approvedBy:(r==null?void 0:r.uid)||"unknown",approvedByUsername:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"×ž× ×”×œ",approvedAt:tr(),orderId:D.id}),console.log("ðŸŽ‰ ×ª×”×œ×™×š ×”××™×©×•×¨ ×”×•×©×œ× ×‘×”×¦×œ×—×”!"),alert(`âœ… ×”×‘×§×©×” ××•×©×¨×” ×‘×”×¦×œ×—×”! ×ž×¡×¤×¨ ×”×–×ž× ×”: ${k}`),await c()}catch(v){console.error("âŒ ×©×’×™××” ×‘××™×©×•×¨ ×”×‘×§×©×”:",v),console.error("Stack trace:",v.stack),alert(`×©×’×™××” ×‘××™×©×•×¨ ×”×‘×§×©×”: ${v.message}`)}finally{l(null)}}},u=async m=>{const v=prompt(`×ž×“×•×¢ ××ª×” ×“×•×—×” ××ª ×”×‘×§×©×” ×©×œ ${m.clientName}?
(×”×”×•×“×¢×” ×”×–×• ×ª×™×©×œ×— ×œ×œ×§×•×—)`);if(v!==null){l(m.id),console.log("ðŸš« ×ž×ª×—×™×œ ×“×—×™×™×ª ×‘×§×©×”:",m.id,"×¡×™×‘×”:",v);try{console.log("ðŸ“ ×ž×¢×“×›×Ÿ ×¡×˜×˜×•×¡ ×‘×§×©×” ×œ× ×“×—×ª×”..."),console.log("ðŸ‘¤ ×¤×¨×˜×™ ×ž×©×ª×ž×©:",r),await _r(Tt(Ue,"orderRequests",m.id),{status:"rejected",rejectedBy:(r==null?void 0:r.uid)||"unknown",rejectedByUsername:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"×ž× ×”×œ",rejectedAt:tr(),rejectionReason:v}),console.log("âœ… ×‘×§×©×” × ×“×—×ª×” ×‘×”×¦×œ×—×”"),alert("âŒ ×”×‘×§×©×” × ×“×—×ª×”. ×”×œ×§×•×— ×™×§×‘×œ ×”×•×“×¢×”."),await c()}catch(b){console.error("âŒ ×©×’×™××” ×‘×“×—×™×™×ª ×”×‘×§×©×”:",b),console.error("Stack trace:",b.stack),alert(`×©×’×™××” ×‘×“×—×™×™×ª ×”×‘×§×©×”: ${b.message}`)}finally{l(null)}}},p=m=>new Date(m).toLocaleDateString("he-IL"),h=m=>m?(m.seconds?new Date(m.seconds*1e3):new Date(m)).toLocaleString("he-IL"):"";return n?f.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:f.jsxs("div",{style:{textAlign:"center"},children:[f.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),f.jsx("p",{children:"×˜×•×¢×Ÿ ×‘×§×©×•×ª..."})]})}):f.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[f.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[f.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"ðŸ“‹ ×‘×§×©×•×ª ×œ×”×–×ž× ×”"}),f.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"×‘×§×©×•×ª ×ž×ž×ª×™× ×•×ª ×œ××™×©×•×¨ ×ž× ×”×œ×™×"})]}),e.length===0?f.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[f.jsx(Qn,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),f.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"××™×Ÿ ×‘×§×©×•×ª ×ž×ž×ª×™× ×•×ª"}),f.jsx("p",{style:{color:"#9ca3af"},children:"×›×œ ×”×‘×§×©×•×ª ×¢×•×‘×“×• ××• ×©××™×Ÿ ×‘×§×©×•×ª ×—×“×©×•×ª"})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(m=>{var v;return f.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[f.jsxs("div",{children:[f.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:m.clientName}),f.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["× ×©×œ×—: ",h(m.requestedAt)]})]}),f.jsx("div",{style:{background:"#fef3c7",color:"#92400e",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:"×ž×ž×ª×™×Ÿ"})]}),f.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(O1,{size:16,style:{color:"#6b7280"}}),f.jsxs("span",{style:{fontSize:"0.875rem"},children:["×ž×‘×§×©: ",m.requestedByUsername]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(ao,{size:16,style:{color:"#6b7280"}}),f.jsx("span",{style:{fontSize:"0.875rem"},children:m.phone})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(T1,{size:16,style:{color:"#6b7280"}}),f.jsx("span",{style:{fontSize:"0.875rem"},children:m.address})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(Ri,{size:16,style:{color:"#6b7280"}}),f.jsxs("span",{style:{fontSize:"0.875rem"},children:[p(m.pickupDate)," â†’ ",p(m.returnDate)]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(Qn,{size:16,style:{color:"#6b7280"}}),f.jsxs("span",{style:{fontSize:"0.875rem"},children:[(v=m.items)==null?void 0:v.reduce((b,y)=>b+y.quantity,0)," ×¤×¨×™×˜×™×"]})]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[f.jsxs("button",{onClick:()=>s(m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[f.jsx(mc,{size:16}),"×”×¦×’ ×¤×¨×˜×™×"]}),f.jsxs("button",{onClick:()=>d(m),disabled:o===m.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:o===m.id?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:o===m.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[f.jsx(Oa,{size:16}),o===m.id?"×ž×¢×‘×“...":"××©×¨"]}),f.jsxs("button",{onClick:()=>u(m),disabled:o===m.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:o===m.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:o===m.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[f.jsx(Vs,{size:16}),"×“×—×”"]})]})]},m.id)})}),a&&f.jsx(wv,{request:a,onClose:()=>s(null),onApprove:()=>{s(null),d(a)},onReject:()=>{s(null),u(a)},processing:o===a.id}),f.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},wv=({request:r,onClose:e,onApprove:t,onReject:n,processing:i})=>{var o,l;const a=c=>new Date(c).toLocaleDateString("he-IL"),s=c=>{c.target===c.currentTarget&&e()};return f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:s,children:f.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:c=>c.stopPropagation(),children:[f.jsxs("div",{style:{background:"#1f2937",color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["×¤×¨×˜×™ ×‘×§×©×” - ",r.clientName]}),f.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"Ã—"})]}),f.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"×¤×¨×˜×™ ×”×œ×§×•×—"}),f.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×©× ×œ×§×•×—"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.clientName})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×˜×œ×¤×•×Ÿ"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.phone})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×›×ª×•×‘×ª"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.address})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"××™×ž×™×™×œ"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.email||"×œ× ×¦×•×™×Ÿ"})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×¡×•×’ ××™×¨×•×¢"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.eventType})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×ª××¨×™×›×™×"}),f.jsxs("span",{style:{fontWeight:"bold"},children:[a(r.pickupDate)," â†’ ",a(r.returnDate)]})]})]})]}),f.jsxs("div",{children:[f.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["×¤×¨×™×˜×™× ×ž×‘×•×§×©×™× (",((o=r.items)==null?void 0:o.length)||0,")"]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(l=r.items)==null?void 0:l.map((c,d)=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[f.jsx("img",{src:c.imageUrl||"/no-image-available.png",alt:c.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),f.jsxs("div",{style:{flex:1},children:[f.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:c.name}),f.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["×ž×–×”×”: ",c.ItemId]})]}),f.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["Ã—",c.quantity]})]},d))})]})]}),f.jsxs("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center",gap:"1rem"},children:[f.jsxs("button",{onClick:t,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[f.jsx(Oa,{size:20}),i?"×ž×¢×‘×“...":"××©×¨ ×‘×§×©×”"]}),f.jsxs("button",{onClick:n,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[f.jsx(Vs,{size:20}),"×“×—×” ×‘×§×©×”"]}),f.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"×¡×’×•×¨"})]})]})})},Av=()=>{const{user:r}=An(),[e,t]=se.useState([]),[n,i]=se.useState(!0),[a,s]=se.useState(null),[o,l]=se.useState(null),c=async()=>{if(!(r!=null&&r.uid)){console.log("âŒ ××™×Ÿ ×ž×©×ª×ž×© ×ž×—×•×‘×¨:",r),i(!1);return}try{i(!0),console.log("ðŸ” ×ž×—×¤×© ×”×–×ž× ×•×ª ×¢×‘×•×¨ ×ž×©×ª×ž×©:",r.uid);const m=mi(mt(Ue,"orderRequests"),aa("requestedBy","==",r.uid));console.log("ðŸ“‹ ×ž×‘×¦×¢ ×©××™×œ×ª×” ×œ-orderRequests...");const v=await Bt(m);console.log("ðŸ“Š × ×ž×¦××•",v.size,"×‘×§×©×•×ª");const b=v.docs.map(I=>{const N={id:I.id,type:"request",...I.data()};return console.log("ðŸ“ ×‘×§×©×” × ×ž×¦××”:",N),N});console.log('âœ… ×¡×”"×› ×‘×§×©×•×ª ×©× ×ž×¦××•:',b.length);const y=[...b].sort((I,N)=>{var R,U,j,E;const _=((R=I.requestedAt)==null?void 0:R.seconds)||((U=I.createdAt)==null?void 0:U.seconds)||0;return(((j=N.requestedAt)==null?void 0:j.seconds)||((E=N.createdAt)==null?void 0:E.seconds)||0)-_});console.log("ðŸŽ¯ ×”×–×ž× ×•×ª ×¡×•×¤×™×•×ª:",y),t(y)}catch(m){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×–×ž× ×•×ª:",m),console.error("Stack trace:",m.stack)}finally{i(!1)}},d=async m=>{const v=u(m).text;if(window.confirm(`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×”×–×ž× ×”?

×¤×¨×˜×™×:
â€¢ ×œ×§×•×—: ${m.clientName}
â€¢ ×¡×˜×˜×•×¡: ${v}
â€¢ ×ª××¨×™×š: ${p(m.pickupDate)}

×¤×¢×•×œ×” ×–×• ××™× ×” × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.`)){l(m.id),console.log("ðŸ—‘ï¸ ×ž×•×—×§ ×”×–×ž× ×”:",m.id);try{await uo(Tt(Ue,"orderRequests",m.id)),console.log("âœ… ×”×–×ž× ×” × ×ž×—×§×” ×‘×”×¦×œ×—×”"),t(b=>b.filter(y=>y.id!==m.id)),alert("ðŸ—‘ï¸ ×”×”×–×ž× ×” × ×ž×—×§×” ×‘×”×¦×œ×—×” ×ž×”×¨×©×™×ž×” ×©×œ×š")}catch(b){console.error("âŒ ×©×’×™××” ×‘×ž×—×™×§×ª ×”×–×ž× ×”:",b),alert(`×©×’×™××” ×‘×ž×—×™×§×ª ×”×”×–×ž× ×”: ${b.message}`)}finally{l(null)}}};se.useEffect(()=>{console.log("ðŸ‘¤ ×ž×©×ª×ž×© ×”×©×ª× ×”:",r),r!=null&&r.uid?(console.log("ðŸš€ ×§×•×¨× ×œ×˜×¢×™× ×ª ×”×–×ž× ×•×ª..."),c()):(console.log("â³ ×ž×—×›×” ×œ×ž×©×ª×ž×© ×œ×”×™×˜×¢×Ÿ..."),i(!1))},[r]);const u=m=>{switch(m.status){case"pending":return{text:"×ž×—×›×” ×œ××™×©×•×¨",color:"#f59e0b",bgColor:"#fef3c7",icon:f.jsx(lo,{size:16})};case"approved":return{text:"×ž××•×©×¨",color:"#10b981",bgColor:"#d1fae5",icon:f.jsx(Oa,{size:16})};case"rejected":return{text:"× ×“×—×”",color:"#ef4444",bgColor:"#fee2e2",icon:f.jsx(Vs,{size:16})};default:return{text:"×œ× ×™×“×•×¢",color:"#6b7280",bgColor:"#f3f4f6",icon:f.jsx(Qn,{size:16})}}},p=m=>new Date(m).toLocaleDateString("he-IL"),h=m=>m?(m.seconds?new Date(m.seconds*1e3):new Date(m)).toLocaleString("he-IL"):"";return n?f.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:f.jsxs("div",{style:{textAlign:"center"},children:[f.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),f.jsx("p",{children:"×˜×•×¢×Ÿ ×”×–×ž× ×•×ª..."})]})}):f.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[f.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[f.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"ðŸ“‹ ×”×”×–×ž× ×•×ª ×©×œ×™"}),f.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"×›×œ ×”×‘×§×©×•×ª ×•×”×”×–×ž× ×•×ª ×©×œ×š ×‘×ž×§×•× ××—×“"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[f.jsxs("div",{style:{background:"#fef3c7",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fde68a"},children:[f.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#92400e"},children:e.filter(m=>m.status==="pending").length}),f.jsx("div",{style:{color:"#92400e",fontSize:"0.875rem"},children:"×ž×—×›×•×ª ×œ××™×©×•×¨"})]}),f.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #a7f3d0"},children:[f.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#065f46"},children:e.filter(m=>m.status==="approved").length}),f.jsx("div",{style:{color:"#065f46",fontSize:"0.875rem"},children:"×ž××•×©×¨×•×ª"})]}),f.jsxs("div",{style:{background:"#fee2e2",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fecaca"},children:[f.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#991b1b"},children:e.filter(m=>m.status==="rejected").length}),f.jsx("div",{style:{color:"#991b1b",fontSize:"0.875rem"},children:"× ×“×—×•"})]}),f.jsxs("div",{style:{background:"#eff6ff",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #dbeafe"},children:[f.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1e40af"},children:e.length}),f.jsx("div",{style:{color:"#1e40af",fontSize:"0.875rem"},children:'×¡×”"×› ×”×–×ž× ×•×ª'})]})]}),e.length===0?f.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[f.jsx(Qn,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),f.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"××™×Ÿ ×”×–×ž× ×•×ª ×¢×“×™×™×Ÿ"}),f.jsx("p",{style:{color:"#9ca3af",marginBottom:"1.5rem"},children:"×¢×“×™×™×Ÿ ×œ× ×©×œ×—×ª ×‘×§×©×•×ª ×”×©××œ×”"}),f.jsx("a",{href:"/request",style:{display:"inline-block",background:"#3b82f6",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",textDecoration:"none",fontWeight:"500"},children:"ðŸ“ ×¦×•×¨ ×‘×§×©×ª ×”×©××œ×” ×¨××©×•× ×”"})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(m=>{var b;const v=u(m);return f.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:y=>{y.currentTarget.style.transform="translateY(-2px)",y.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:y=>{y.currentTarget.style.transform="translateY(0)",y.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[f.jsxs("div",{children:[f.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:m.clientName}),f.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["× ×©×œ×—: ",h(m.requestedAt)]})]}),f.jsxs("div",{style:{background:v.bgColor,color:v.color,padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.icon,v.text]})]}),f.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(ao,{size:16,style:{color:"#6b7280"}}),f.jsx("span",{style:{fontSize:"0.875rem"},children:m.phone})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(T1,{size:16,style:{color:"#6b7280"}}),f.jsx("span",{style:{fontSize:"0.875rem"},children:m.address})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(Ri,{size:16,style:{color:"#6b7280"}}),f.jsxs("span",{style:{fontSize:"0.875rem"},children:[p(m.pickupDate)," â†’ ",p(m.returnDate)]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(Qn,{size:16,style:{color:"#6b7280"}}),f.jsxs("span",{style:{fontSize:"0.875rem"},children:[(b=m.items)==null?void 0:b.reduce((y,I)=>y+I.quantity,0)," ×¤×¨×™×˜×™×"]})]}),m.status==="rejected"&&m.rejectionReason&&f.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",padding:"0.75rem",marginTop:"0.5rem"},children:[f.jsx("div",{style:{fontSize:"0.75rem",color:"#991b1b",fontWeight:"bold",marginBottom:"0.25rem"},children:"×¡×™×‘×ª ×“×—×™×™×”:"}),f.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d"},children:m.rejectionReason})]})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[f.jsxs("button",{onClick:()=>s(m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[f.jsx(mc,{size:16}),"×”×¦×’ ×¤×¨×˜×™×"]}),f.jsxs("button",{onClick:()=>d(m),disabled:o===m.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:o===m.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:o===m.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",opacity:o===m.id?.6:1},children:[f.jsx(Gs,{size:16}),o===m.id?"×ž×•×—×§...":"×ž×—×§"]})]})]},m.id)})}),a&&f.jsx(Sv,{order:a,onClose:()=>s(null)}),f.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},Sv=({order:r,onClose:e})=>{var s,o;const t=l=>{switch(l.status){case"pending":return{text:"×ž×—×›×” ×œ××™×©×•×¨",color:"#f59e0b",bgColor:"#fef3c7",icon:f.jsx(lo,{size:20})};case"approved":return{text:"×ž××•×©×¨",color:"#10b981",bgColor:"#d1fae5",icon:f.jsx(Oa,{size:20})};case"rejected":return{text:"× ×“×—×”",color:"#ef4444",bgColor:"#fee2e2",icon:f.jsx(Vs,{size:20})};default:return{text:"×œ× ×™×“×•×¢",color:"#6b7280",bgColor:"#f3f4f6",icon:f.jsx(Qn,{size:20})}}},n=l=>new Date(l).toLocaleDateString("he-IL"),i=t(r),a=l=>{l.target===l.currentTarget&&e()};return f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:a,children:f.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:l=>l.stopPropagation(),children:[f.jsxs("div",{style:{background:i.color,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.icon,f.jsxs("div",{children:[f.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["×”×–×ž× ×” - ",r.clientName]}),f.jsx("p",{style:{fontSize:"0.875rem",margin:"0.25rem 0 0 0",opacity:.9},children:i.text})]})]}),f.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"Ã—"})]}),f.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"×¤×¨×˜×™ ×”×”×–×ž× ×”"}),f.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×©× ×œ×§×•×—"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.clientName})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×˜×œ×¤×•×Ÿ"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.phone})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×›×ª×•×‘×ª"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.address})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"××™×ž×™×™×œ"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.email||"×œ× ×¦×•×™×Ÿ"})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×¡×•×’ ××™×¨×•×¢"}),f.jsx("span",{style:{fontWeight:"bold"},children:r.eventType})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×ª××¨×™×›×™×"}),f.jsxs("span",{style:{fontWeight:"bold"},children:[n(r.pickupDate)," â†’ ",n(r.returnDate)]})]})]})]}),f.jsxs("div",{children:[f.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["×¤×¨×™×˜×™× (",((s=r.items)==null?void 0:s.length)||0,")"]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(o=r.items)==null?void 0:o.map((l,c)=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[f.jsx("img",{src:l.imageUrl||"/no-image-available.png",alt:l.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),f.jsxs("div",{style:{flex:1},children:[f.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:l.name}),f.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["×ž×–×”×”: ",l.ItemId]})]}),f.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["Ã—",l.quantity]})]},c))})]}),r.status==="rejected"&&r.rejectionReason&&f.jsxs("div",{style:{marginTop:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"1rem"},children:[f.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",color:"#991b1b",margin:"0 0 0.5rem 0"},children:"×¡×™×‘×ª ×“×—×™×™×”:"}),f.jsx("p",{style:{fontSize:"0.875rem",color:"#7f1d1d",margin:0},children:r.rejectionReason})]})]}),f.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center"},children:f.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"×¡×’×•×¨"})})]})})},_v=["×™× ×•××¨","×¤×‘×¨×•××¨","×ž×¨×¥","××¤×¨×™×œ","×ž××™","×™×•× ×™","×™×•×œ×™","××•×’×•×¡×˜","×¡×¤×˜×ž×‘×¨","××•×§×˜×•×‘×¨","× ×•×‘×ž×‘×¨","×“×¦×ž×‘×¨"],Cv=["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—×ž×™×©×™","×©×™×©×™","×©×‘×ª"],Iv=r=>new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),Ev=r=>new Date(r.getFullYear(),r.getMonth(),1).getDay(),Nv=({currentDate:r,events:e=[],setCurrentDate:t,setSelectedEvents:n,setSelectedDate:i,setShowReport:a,fetchItemsAndOrders:s})=>{const{user:o}=An(),[l,c]=se.useState([]),[d,u]=se.useState(!1),[p,h]=se.useState(new Set),[m,v]=se.useState(!1),[b,y]=se.useState(new Set),[I,N]=se.useState("");se.useEffect(()=>{_()},[]);const _=async()=>{try{const re=await na.getClosedDates();console.log("×™×ž×™× ×¡×’×•×¨×™× × ×˜×¢× ×•:",re.map(le=>({id:le.id,date:le.date}))),c(re)}catch(re){console.error("×©×’×™××” ×‘×˜×¢×™× ×ª ×™×ž×™× ×¡×’×•×¨×™×:",re)}},F=()=>{if(!o)return console.log("××™×Ÿ ×ž×©×ª×ž×© ×ž×—×•×‘×¨"),!1;const re=o.role==="MainAdmin";return console.log("×™×© ×”×¨×©××•×ª ×ž× ×”×œ:",re,"×ª×¤×§×™×“:",o.role),re},R=(re,le,de)=>{const fe=new Date(re,le,de),be=fe.getFullYear(),_e=String(fe.getMonth()+1).padStart(2,"0"),Te=String(fe.getDate()).padStart(2,"0");return`${be}-${_e}-${Te}`},U=(re,le)=>{const de=new Date(re),fe=new Date(le);return de.setHours(0,0,0,0),fe.setHours(0,0,0,0),de.getTime()===fe.getTime()},j=re=>{if(!Array.isArray(e))return[];const le=R(r.getFullYear(),r.getMonth(),re);return e.filter(de=>de.date?na.formatDateToString(de.date)===le:!1)},E=re=>{re.preventDefault();const le=I.trim().toLowerCase();if(!le||!Array.isArray(e)||e.length===0)return;const de=e.filter(Re=>(Re.clientName||"").toLowerCase().includes(le)).sort((Re,Q)=>new Date(Re.date)-new Date(Q.date));if(de.length===0){alert("Return event not found for that name.");return}const fe='x"x-x-x"x"',be=de.find(Re=>Re.type===fe||Re.icon==='dY",')||de[de.length-1],_e=new Date(be.date);t(new Date(_e.getFullYear(),_e.getMonth(),1));const Te=e.filter(Re=>U(Re.date,_e));n(Te),i(_e),a(!0)},B=re=>j(re).some(de=>e.some(be=>be.orderId===de.orderId&&be.availabilityStatus==="CONFLICT")),k=re=>j(re).some(de=>de.isOverdue),S=re=>{const le=R(r.getFullYear(),r.getMonth(),re);return na.isDateClosed(le,l)},D=re=>{const le=new Date(r.getFullYear(),r.getMonth(),re),de=new Date;return de.setHours(0,0,0,0),le.setHours(0,0,0,0),le<de?!1:!j(re).some(_e=>_e.type!=="×”×©××œ×” ×¤×¢×™×œ×”")},w=re=>{const le=new Date(r.getFullYear(),r.getMonth(),re),de=new Date;return de.setHours(0,0,0,0),le.setHours(0,0,0,0),le<de},M=re=>{const le=new Date(r.getFullYear(),r.getMonth(),re),de=new Date;return le.getDate()===de.getDate()&&le.getMonth()===de.getMonth()&&le.getFullYear()===de.getFullYear()},O=()=>{if(p.size>0)return!0;const re=new Set(l.map(le=>le.date||le.id));if(re.size!==b.size)return!0;for(const le of re)if(!b.has(le))return!0;return!1},L=re=>{if(d){X(re);return}const le=j(re);le.length>0&&le.every(fe=>fe.type==="×”×©××œ×” ×¤×¢×™×œ×”")||le.length>0&&(n(le),i(new Date(r.getFullYear(),r.getMonth(),re)),a(!0))},X=async re=>{console.log(`×œ×—×™×¦×” ×¢×œ ×™×•× ${re} ×‘×ž×¦×‘ ×¢×¨×™×›×”`);const le=S(re);if(console.log(`×”×™×•× ×¡×’×•×¨: ${le}, ×ž×¦×‘ ×¢×¨×™×›×”: ${d}`),le){const be=R(r.getFullYear(),r.getMonth(),re);console.log(`×ž×‘×˜×œ ×¡×’×™×¨×” ×©×œ ${be} - ×¢×“×›×•×Ÿ ×ž×™×™×“×™ + × ×©××¨ ×‘×ž×¦×‘ ×¢×¨×™×›×”`),c(_e=>{const Te=_e.filter(Re=>Re.date!==be&&Re.id!==be);return console.log(`×¢×“×›×•×Ÿ ×ž×™×™×“×™: ×”×•×¡×¨×• ${_e.length-Te.length} ×™×ž×™×`),Te}),await H(be),console.log(`×¡×™×•× ×˜×™×¤×•×œ ×‘×™×•× ${re} - ×ž×¦×‘ ×¢×¨×™×›×”: ${d}`);return}if(!D(re)){w(re)?alert("×œ× × ×™×ª×Ÿ ×œ×¡×’×•×¨ ×ª××¨×™×›×™× ×©×›×‘×¨ ×¢×‘×¨×•"):alert("× ×™×ª×Ÿ ×œ×¡×’×•×¨ ×¨×§ ×™×ž×™× ×œ×œ× ××™×¨×•×¢×™× ×§×™×™×ž×™×");return}const de=R(r.getFullYear(),r.getMonth(),re);console.log(`×ž×¡×ž×Ÿ ×™×•× ×œ×‘×Ÿ ${de} ×œ×¡×’×™×¨×”`);const fe=new Set(p);fe.has(de)?(fe.delete(de),console.log(`×”×•×¡×¨ ×ž×”×‘×—×™×¨×”: ${de}`)):(fe.add(de),console.log(`× ×•×¡×£ ×œ×‘×—×™×¨×”: ${de}`)),h(fe),console.log(`×¡×”"×› × ×‘×—×¨×• ×œ×¡×’×™×¨×”: ${fe.size} ×™×ž×™×`)},H=async re=>{try{console.log(`×ž×‘×˜×œ ×¡×’×™×¨×” ×‘×ž×¦×‘ ×¢×¨×™×›×”: ${re}`),await na.removeClosedDate(re)?(console.log(`×”×¡×’×™×¨×” ×©×œ ${re} ×‘×•×˜×œ×” - × ×©××¨ ×‘×ž×¦×‘ ×¢×¨×™×›×”`),await _(),console.log("×™×•× ×‘×•×˜×œ ×ž×”×¡×’×™×¨×” - × ×©××¨ ×‘×ž×¦×‘ ×¢×¨×™×›×”")):(await _(),alert("×©×’×™××” ×‘×‘×™×˜×•×œ ×”×¡×’×™×¨×”"))}catch(le){console.error("×©×’×™××” ×‘×‘×™×˜×•×œ ×¡×’×™×¨×ª ×™×•×:",le),await _(),alert("×©×’×™××” ×‘×‘×™×˜×•×œ ×”×¡×’×™×¨×”")}},ee=()=>{console.log("×ž×¤×¢×™×œ ×ž×¦×‘ ×¢×¨×™×›×”"),u(!0),h(new Set);const re=new Set(l.map(le=>le.date||le.id));y(re),console.log("×ž×¦×‘ ×¢×¨×™×›×” ×¤×¢×™×œ, × ×©×ž×¨ ×ž×¦×‘ ×ž×§×•×¨×™:",re)},K=()=>{console.log("×ž×‘×˜×œ ×ž×¦×‘ ×¢×¨×™×›×”"),u(!1),h(new Set),y(new Set),console.log("×™×¦×× ×• ×ž×ž×¦×‘ ×¢×¨×™×›×”")},T=async()=>{v(!0);try{if(p.size>0){const re=Array.from(p);console.log("×©×•×ž×¨ ×™×ž×™× ×¡×’×•×¨×™×:",re);const le=await na.addMultipleClosedDates(re,o.uid,"×™×•× ×¡×’×•×¨ - × ×§×‘×¢ ×¢×œ ×™×“×™ ×”×ž× ×”×œ");le.success.length>0&&(alert(`${le.success.length} ×™×ž×™× × ×¡×’×¨×• ×‘×”×¦×œ×—×”`),await _(),s&&await s()),le.failed.length>0&&alert(`${le.failed.length} ×™×ž×™× ×œ× ×”×¦×œ×™×—×• ×œ×”×™×¡×’×¨`)}else console.log("×©×™× ×•×™×™× ×›×‘×¨ ×‘×•×¦×¢×• (×‘×™×˜×•×œ ×™×ž×™× ×¡×’×•×¨×™×), ×ž×¡×™×™× ×ž×¦×‘ ×¢×¨×™×›×”"),alert("×”×©×™× ×•×™×™× × ×©×ž×¨×• ×‘×”×¦×œ×—×”!"),s&&await s();u(!1),h(new Set),y(new Set)}catch(re){console.error("×©×’×™××” ×‘×©×ž×™×¨×ª ×©×™× ×•×™×™×:",re),alert("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×©×™× ×•×™×™×")}finally{v(!1)}},z=re=>{const le=j(re),de=new Map;return le.forEach(fe=>{de.has(fe.orderId)||de.set(fe.orderId,{...fe,allEventsForOrder:le.filter(be=>be.orderId===fe.orderId)})}),Array.from(de.values())},W=Iv(r),G=Ev(r),oe=[];console.log("CalendarGrid - ×‘×•× ×” ×œ×•×— ×œ×—×•×“×©:",r.getMonth()+1,"×©× ×”:",r.getFullYear()),console.log("×™×ž×™× ×‘×—×•×“×©:",W,"×™×•× ×¨××©×•×Ÿ:",G);for(let re=0;re<G;re++)oe.push(f.jsx("div",{className:"day-cell empty"},`empty-${re}`));for(let re=1;re<=W;re++){const le=j(re),de=z(re),fe=le.filter(Me=>Me.type==="×”×©××œ×”"),be=le.filter(Me=>Me.type==="×”×—×–×¨×”"),_e=le.length>0,Te=de.length,Re=S(re),Q=D(re),je=w(re),He=M(re),Pe=B(re),he=k(re),Le=R(r.getFullYear(),r.getMonth(),re),Ee=p.has(Le);let Be="day-cell";_e&&(Be+=" has-events"),fe.length>0&&(Be+=" pickup-day"),be.length>0&&(Be+=" return-day"),Re&&(Be+=" closed-day"),je&&(Be+=" past-day"),He&&(Be+=" today"),d&&(Q||Re)&&(Be+=" can-manage"),Ee&&(Be+=" selected-for-closure"),Pe&&(Be+=" availability-conflict"),he&&(Be+=" overdue-orders"),re===4&&r.getMonth()===6&&console.log("×™×•× 4 ×‘×™×•×œ×™ - × ×•×¦×¨ ×¢×:",{day:re,month:r.getMonth()+1,year:r.getFullYear(),dateStr:Le,hasEvents:_e,hasConflicts:Pe,hasOverdue:he,dayClasses:Be}),oe.push(f.jsxs("div",{className:Be,onClick:()=>L(re),"data-day":re,"data-month":r.getMonth()+1,style:{cursor:d?Q||Re?"pointer":"not-allowed":le.some(Me=>Me.type!=="×”×©××œ×” ×¤×¢×™×œ×”")?"pointer":"default"},children:[f.jsx("span",{className:"day-number",children:re}),He&&f.jsx("div",{className:"today-indicator",title:"×”×™×•×",children:"ðŸ“…"}),Re&&f.jsx("div",{className:"closed-indicator",title:"×™×•× ×¡×’×•×¨ - ×‘×ž×¦×‘ ×¢×¨×™×›×”: ×œ×—×¥ ×œ×‘×™×˜×•×œ ×ž×™×™×“×™",children:"ðŸ”’"}),he&&!Re&&f.jsx("div",{className:"overdue-indicator",title:"×”×–×ž× ×•×ª ×©×œ× ×”×•×—×–×¨×• ×‘×–×ž×Ÿ",children:"ðŸš¨"}),Pe&&!Re&&!he&&f.jsx("div",{className:"conflict-indicator",title:"×‘×¢×™×•×ª ×–×ž×™× ×•×ª - ×œ×—×¥ ×œ×¤×¨×˜×™×",children:f.jsx(ka,{size:16,style:{color:"#9333ea"}})}),d&&(Q||Re)&&f.jsx("div",{className:"closure-selector",title:Re?"×œ×—×¥ ×œ×‘×™×˜×•×œ ×ž×™×™×“×™":"×œ×—×¥ ×œ×‘×—×™×¨×” ×œ×¡×’×™×¨×”",children:Re?"ðŸ”“":Ee?"âœ…":"â­•"}),!Re&&f.jsxs("div",{className:"event-icons",children:[fe.length>0&&f.jsxs("div",{className:`event-tag pickup-tag ${he?"overdue":Pe?"conflict":""}`,title:"××™×¡×•×£ ×ž×•×¦×¨×™×",children:["ðŸ“¦ ",fe.length>1&&fe.length]}),be.length>0&&f.jsxs("div",{className:`event-tag return-tag ${he?"overdue":Pe?"conflict":""}`,title:"×”×—×–×¨×ª ×ž×•×¦×¨×™×",children:["ðŸ”„ ",be.length>1&&be.length]})]}),!Re&&Te>0&&f.jsx("div",{className:`event-count ${he?"overdue":Pe?"conflict":""}`,title:`${Te} ×”×–×ž× ×•×ª`,children:Te})]},re))}return f.jsxs("div",{className:"calendar-container",children:[f.jsxs("div",{className:"calendar-header",children:[f.jsx("button",{onClick:()=>t(new Date(r.getFullYear(),r.getMonth()-1,1)),children:f.jsx(Go,{size:20})}),f.jsxs("h2",{className:"calendar-title",children:[f.jsx(Ri,{size:24})," ",_v[r.getMonth()]," ",r.getFullYear()]}),f.jsx("button",{onClick:()=>t(new Date(r.getFullYear(),r.getMonth()+1,1)),children:f.jsx($o,{size:20})})]}),F()&&f.jsx("div",{className:"calendar-controls",children:d?f.jsxs("div",{className:"edit-controls",children:[f.jsxs("span",{className:"edit-mode-indicator",children:["ðŸ“ ×ž×¦×‘ ×¢×¨×™×›×”: ×‘×—×¨ ×™×ž×™× ×œ×‘× ×™× ×œ×¡×’×™×¨×” ××• ×™×ž×™× ×¡×’×•×¨×™× ×œ×‘×™×˜×•×œ (",p.size," × ×‘×—×¨×•)"]}),f.jsxs("div",{className:"edit-buttons",children:[f.jsxs("button",{className:"btn-save",onClick:T,disabled:m||!O(),children:[f.jsx(xc,{size:16}),m?"×©×•×ž×¨...":"×©×ž×•×¨"]}),f.jsxs("button",{className:"btn-cancel",onClick:K,disabled:m,children:[f.jsx(xi,{size:16}),"×‘×™×˜×•×œ"]})]})]}):f.jsx("div",{className:"control-buttons",children:f.jsxs("button",{className:"btn-edit-dates",onClick:ee,title:"×‘×˜×œ ×ª××¨×™×›×™×",children:[f.jsx(v2,{size:18}),"×‘×˜×œ ×ª××¨×™×›×™×"]})})}),f.jsx("div",{className:"day-names",children:Cv.map(re=>f.jsx("div",{className:"day-name",children:re},re))}),f.jsx("div",{className:"calendar-grid",children:oe}),f.jsxs("div",{className:"calendar-footer",children:[f.jsx("div",{className:"calendar-search",style:{marginBottom:"0.75rem",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"0.75rem 1rem"},children:f.jsx("form",{onSubmit:E,style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:f.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[f.jsxs("div",{style:{position:"relative",flex:1},children:[f.jsx(rc,{size:16,style:{position:"absolute",right:"0.65rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),f.jsx("input",{type:"text",placeholder:"×—×¤×© ×œ×¤×™ ×©× ×œ×§×•×—",value:I,onChange:re=>N(re.target.value),style:{width:"100%",padding:"0.65rem 2.2rem 0.65rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.95rem",boxSizing:"border-box"}})]}),f.jsx("button",{type:"submit",style:{background:"#2563eb",color:"white",border:"none",borderRadius:"8px",padding:"0.65rem 1rem",cursor:"pointer",fontWeight:600},children:"×—×™×¤×•×©"})]})})}),f.jsxs("div",{className:"calendar-legend",children:[f.jsx("span",{className:"legend-item",children:"ðŸ“¦ ××™×¡×•×£ ×ž×•×¦×¨×™×"}),f.jsx("span",{className:"legend-item",children:"ðŸ”„ ×”×—×–×¨×ª ×ž×•×¦×¨×™×"}),l.length>0&&f.jsxs("span",{className:"legend-item",children:["ðŸ”’ ×™×ž×™× ×¡×’×•×¨×™× (",l.length,")"]}),f.jsx("span",{className:"legend-item",children:"ðŸš¨ ×”×–×ž× ×•×ª ×©×œ× ×”×•×—×–×¨×•"}),f.jsx("span",{className:"legend-item",children:"ðŸ”” ×‘×¢×™×•×ª ×–×ž×™× ×•×ª"}),d&&f.jsx("span",{className:"legend-item",children:"â­• ×–×ž×™×Ÿ ×œ×¡×’×™×¨×” â€¢ ðŸ”“ ×–×ž×™×Ÿ ×œ×‘×™×˜×•×œ"}),f.jsx("span",{className:"legend-item",children:"ðŸ“… ×”×™×•×"})]}),f.jsxs("div",{className:"calendar-stats",children:['×œ×—×¥ ×¢×œ ×™×•× ×¢× ××™×¨×•×¢×™× ×›×“×™ ×œ×¨××•×ª ×¤×¨×˜×™× â€¢ ×¡×”"×› ××™×¨×•×¢×™×: ',Array.isArray(e)?e.length:0,l.length>0&&` â€¢ ×™×ž×™× ×¡×’×•×¨×™×: ${l.length}`]}),(!Array.isArray(e)||e.length===0)&&f.jsx("div",{className:"warning",children:"××™×Ÿ ××™×¨×•×¢×™× × ×˜×¢× ×™× - ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ×ž×¡×“ ×”× ×ª×•× ×™×"})]})]})};class Xs{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const kv=()=>{if(!(typeof localStorage>"u"))return{get:r=>Promise.resolve(localStorage.getItem(r)),set:(r,e)=>Promise.resolve(localStorage.setItem(r,e)),remove:r=>Promise.resolve(localStorage.removeItem(r))}},an={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:kv()},kf=r=>r?typeof r=="string"?{publicKey:r}:r.toString()==="[object Object]"?r:{}:{},Dv=(r,e="https://api.emailjs.com")=>{if(!r)return;const t=kf(r);an.publicKey=t.publicKey,an.blockHeadless=t.blockHeadless,an.storageProvider=t.storageProvider,an.blockList=t.blockList,an.limitRate=t.limitRate,an.origin=t.origin||e},rh=async(r,e,t={})=>{const n=await fetch(an.origin+r,{method:"POST",headers:t,body:e}),i=await n.text(),a=new Xs(n.status,i);if(n.ok)return a;throw a},nh=(r,e,t)=>{if(!r||typeof r!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},jv=r=>{if(r&&r.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},ih=r=>r.webdriver||!r.languages||r.languages.length===0,ah=()=>new Xs(451,"Unavailable For Headless Browser"),Ov=(r,e)=>{if(!Array.isArray(r))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Tv=r=>{var e;return!((e=r.list)!=null&&e.length)||!r.watchVariable},Rv=(r,e)=>r instanceof FormData?r.get(e):r[e],oh=(r,e)=>{if(Tv(r))return!1;Ov(r.list,r.watchVariable);const t=Rv(e,r.watchVariable);return typeof t!="string"?!1:r.list.includes(t)},sh=()=>new Xs(403,"Forbidden"),Lv=(r,e)=>{if(typeof r!="number"||r<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},Pv=async(r,e,t)=>{const n=Number(await t.get(r)||0);return e-Date.now()+n},lh=async(r,e,t)=>{if(!e.throttle||!t)return!1;Lv(e.throttle,e.id);const n=e.id||r;return await Pv(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},ch=()=>new Xs(429,"Too Many Requests"),Mv=async(r,e,t,n)=>{const i=kf(n),a=i.publicKey||an.publicKey,s=i.blockHeadless||an.blockHeadless,o=i.storageProvider||an.storageProvider,l={...an.blockList,...i.blockList},c={...an.limitRate,...i.limitRate};return s&&ih(navigator)?Promise.reject(ah()):(nh(a,r,e),jv(t),t&&oh(l,t)?Promise.reject(sh()):await lh(location.pathname,c,o)?Promise.reject(ch()):rh("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"}))},Bv=r=>{if(!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Fv=r=>typeof r=="string"?document.querySelector(r):r,zv=async(r,e,t,n)=>{const i=kf(n),a=i.publicKey||an.publicKey,s=i.blockHeadless||an.blockHeadless,o=an.storageProvider||i.storageProvider,l={...an.blockList,...i.blockList},c={...an.limitRate,...i.limitRate};if(s&&ih(navigator))return Promise.reject(ah());const d=Fv(t);nh(a,r,e),Bv(d);const u=new FormData(d);return oh(l,u)?Promise.reject(sh()):await lh(location.pathname,c,o)?Promise.reject(ch()):(u.append("lib_version","4.4.1"),u.append("service_id",r),u.append("template_id",e),u.append("user_id",a),rh("/api/v1.0/email/send-form",u))},Df={init:Dv,send:Mv,sendForm:zv,EmailJSResponseStatus:Xs},zs={serviceId:"service_zbzqfa3",reminderTemplateId:"template_02cqfdn",confirmationTemplateId:"template_lv2sc1p",publicKey:"gJHtAe_l22dY8tKju"};Df.init(zs.publicKey);const ac=r=>r?new Date(r).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):"",Uv=async(r,e)=>{var t,n;try{console.log(`ðŸ“§ Sending manual pickup email for order ${e}`);const i={to_email:r.email,to_name:r.clientName,client_name:r.clientName,pickup_date:ac(r.pickupDate),return_date:ac(r.returnDate),volunteer_name:"×¦×•×•×ª ×”××¨×’×•×Ÿ",volunteer_phone:"054-2575886",organization_name:"×’×ž×— ×©×ž×—×ª ×–×§× ×ª×™",items_list:((t=r.items)==null?void 0:t.map(s=>`â€¢ ${s.name} - ×›×ž×•×ª: ${s.quantity}`).join(`
`))||"×œ× ×¦×•×™× ×• ×¤×¨×™×˜×™×",total_items:((n=r.items)==null?void 0:n.reduce((s,o)=>s+o.quantity,0))||0,event_type:r.eventType||"×›×œ×œ×™",order_id:e,pickup_location:r.pickupLocation||"×ž×™×§×•× ×œ×¤×™ ×ª×™××•×",special_instructions:r.specialInstructions||"××™×Ÿ ×”×•×¨××•×ª ×ž×™×•×—×“×•×ª"},a=await Df.send(zs.serviceId,zs.confirmationTemplateId,i);return console.log("âœ… Manual pickup email sent successfully:",a),await _r(Tt(Ue,"orders",e),{manualEmailSent:!0,manualEmailSentAt:M1.now(),manualEmailResult:{status:a.status,text:a.text,sentAt:new Date().toISOString(),sentBy:"admin"}}),{success:!0,result:a}}catch(i){return console.error(`âŒ Failed to send manual pickup email for order ${e}:`,i),{success:!1,error:i.message}}},Wv=async(r,e)=>{var t,n;try{console.log(`ðŸ“§ Sending reminder email for order ${e}`);const i={to_email:r.email,to_name:r.clientName,client_name:r.clientName,return_date:ac(r.returnDate),volunteer_name:r.volunteerName||"×¦×•×•×ª ×”××¨×’×•×Ÿ",volunteer_phone:"054-2575886",organization_name:"×’×ž×— ×©×ž×—×ª ×–×§× ×ª×™",items_list:((t=r.items)==null?void 0:t.map(s=>`â€¢ ${s.name} - ×›×ž×•×ª: ${s.quantity}`).join(`
`))||"×œ× ×¦×•×™× ×• ×¤×¨×™×˜×™×",total_items:((n=r.items)==null?void 0:n.reduce((s,o)=>s+o.quantity,0))||0,event_type:r.eventType||"×›×œ×œ×™",pickup_date:ac(r.pickupDate),order_id:e},a=await Df.send(zs.serviceId,zs.reminderTemplateId,i);return console.log("âœ… Reminder email sent successfully:",a),await _r(Tt(Ue,"orders",e),{reminderSent:!0,reminderSentAt:M1.now(),emailSentResult:{status:a.status,text:a.text,sentAt:new Date().toISOString()}}),{success:!0,result:a}}catch(i){return console.error(`âŒ Failed to send reminder for order ${e}:`,i),{success:!1,error:i.message}}},dh=async()=>{const r=new Date,e=new Date(r);e.setDate(r.getDate()+2);const t=e.toISOString().split("T")[0];console.log(`ðŸ“… Checking emails for reminder date: ${t}`);const n={reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0};try{console.log("ðŸ” Checking for reminders...");const i=mi(mt(Ue,"orders"),aa("status","in",["active","confirmed","picked_up","open"]),aa("returnDate","==",t)),a=await Bt(i);n.totalFound=a.size;for(const l of a.docs){const c=l.data(),d=l.id;if(c.reminderSent)n.reminders.alreadySent++;else{const u=await Wv(c,d);u.success?n.reminders.sent++:n.reminders.errors.push({orderId:d,email:c.email,clientName:c.clientName,error:u.error})}}const s=n.reminders.sent,o=n.reminders.errors.length;return console.log("ðŸ“Š Email check results:",{reminders:n.reminders,totalSent:s,totalErrors:o}),{...n,totalSent:s,totalErrors:o,message:s>0?`×‘×“×™×§×” ×”×•×©×œ×ž×”: ${s} ×ª×–×›×•×¨×•×ª × ×©×œ×—×•`:"×œ× × ×ž×¦××• ×ª×–×›×•×¨×•×ª ×œ×©×œ×™×—×” ×”×™×•×"}}catch(i){return console.error("âŒ Error in email check:",i),{reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:i.message}],message:"×©×’×™××” ×‘×‘×“×™×§×ª ××™×ž×™×™×œ×™×"}}},Hv=({show:r,selectedDate:e,selectedEvents:t,allItems:n,setShowReport:i,setShowItemsModal:a,setEditItemModal:s,fetchItemsAndOrders:o,onStartReturnInspection:l})=>{const[c,d]=se.useState(null),[u,p]=se.useState(new Set);if(se.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r)return null;const h=async S=>{try{return await uo(Tt(Ue,"orders",S)),!0}catch(D){throw console.error("Error deleting order:",D),D}},m=S=>{const D=new Date;D.setHours(0,0,0,0);const w=new Date(S.returnDate);w.setHours(0,0,0,0);const M=D>w,O=M?Math.ceil((D-w)/(1e3*60*60*24)):0;return{isOverdue:M,overdueDays:O}},v=S=>{const D=new Date(S.pickupDate),w=new Date;return D.setHours(0,0,0,0),w.setHours(0,0,0,0),D.getTime()===w.getTime()},b=S=>S.events.some(D=>D.type==="×”×©××œ×”"),y=S=>{const D=S.manualEmailSent===!0,w=u.has(S.orderId);return D||w},I=S=>S.email&&v(S)&&b(S)&&!y(S),N=async S=>{if(I(S)){d(S.orderId);try{console.log("ðŸš€ Sending manual pickup email for order:",S.orderId);const D=await Uv({email:S.email,clientName:S.clientName,phone:S.phone,items:S.items||[],pickupDate:S.pickupDate,returnDate:S.returnDate,eventType:S.eventType||"×›×œ×œ×™",pickupLocation:S.pickupLocation||"×ž×™×§×•× ×œ×¤×™ ×ª×™××•×",specialInstructions:S.specialInstructions||"××™×Ÿ ×”×•×¨××•×ª ×ž×™×•×—×“×•×ª"},S.orderId);if(console.log("ðŸ“§ Email send result:",D),D.success)p(w=>new Set([...w,S.orderId])),console.log("âœ… Email sent successfully, refreshing data..."),o&&await o(),alert("âœ… ××™×ž×™×™×œ × ×©×œ×— ×‘×”×¦×œ×—×”!");else throw new Error(D.error||"Unknown error")}catch(D){console.error("âŒ ×©×’×™××” ×‘×©×œ×™×—×ª ××™×ž×™×™×œ:",D),alert(`âŒ ×©×’×™××” ×‘×©×œ×™×—×ª ×”××™×ž×™×™×œ: ${D.message}`)}finally{d(null)}}},_=S=>c===S.orderId?"×©×•×œ×—...":y(S)?"× ×©×œ×— âœ“":v(S)?"×©×œ×— ××™×ž×™×™×œ ××™×¡×•×£":"×–×ž×™×Ÿ ×‘×™×•× ×”××™×¡×•×£",F=S=>S.email?b(S)?y(S)?"××™×ž×™×™×œ ×›×‘×¨ × ×©×œ×— ×¢×‘×•×¨ ×”×–×ž× ×” ×–×•":v(S)?"×©×œ×— ××™×ž×™×™×œ ××™×©×•×¨ ××™×¡×•×£ ×œ×œ×§×•×—":`×”×›×¤×ª×•×¨ ×™×”×™×” ×–×ž×™×Ÿ ×‘×™×•× ×”××™×¡×•×£: ${new Date(S.pickupDate).toLocaleDateString("he-IL")}`:"×›×¤×ª×•×¨ ×”××™×ž×™×™×œ ×–×ž×™×Ÿ ×¨×§ ×‘×™×ž×™ ××™×¡×•×£ (×œ× ×”×—×–×¨×”)":"××™×Ÿ ×›×ª×•×‘×ª ××™×ž×™×™×œ ×¢×‘×•×¨ ×”×–×ž× ×” ×–×•",U=(S=>{const D=new Map;return S.forEach(w=>{D.has(w.orderId)||D.set(w.orderId,{orderId:w.orderId,clientName:w.clientName,phone:w.phone,email:w.email,items:w.items,pickupDate:w.pickupDate,returnDate:w.returnDate,manualEmailSent:w.manualEmailSent||!1,availabilityStatus:w.availabilityStatus,availabilityConflicts:w.availabilityConflicts||[],needsAttention:w.needsAttention,events:[]}),D.get(w.orderId).events.push(w)}),Array.from(D.values())})(t),j=U.some(S=>S.availabilityStatus==="CONFLICT"&&S.availabilityConflicts.length>0),E=U.some(S=>{const{isOverdue:D}=m(S);return D}),B=async S=>{if(S&&window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×”×–×ž× ×”?"))try{await h(S),await o(),i(!1),alert("×”×”×–×ž× ×” × ×ž×—×§×” ×‘×”×¦×œ×—×”.")}catch(D){console.error(D),alert("×ž×—×™×§×” × ×›×©×œ×”. × ×¡×” ×©×•×‘.")}},k=S=>{S.target===S.currentTarget&&i(!1)};return f.jsxs(f.Fragment,{children:[f.jsx("style",{jsx:!0,global:!0,children:`
        .modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 32rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
        
        .availability-warning {
          background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          border: 2px solid #9333ea !important;
          border-radius: 8px !important;
          padding: 1rem !important;
          margin-bottom: 1rem !important;
          animation: warningPulse 2s ease-in-out infinite !important;
        }
        
        @keyframes warningPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        @media (min-width: 768px) {
          .modal-content {
            max-width: 42rem !important;
          }
        }
      `}),f.jsx("div",{className:"modal-overlay",onClick:k,children:f.jsxs("div",{className:"modal-content",dir:"rtl",onClick:S=>S.stopPropagation(),style:{display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[f.jsxs("div",{style:{background:E?"linear-gradient(to right, #dc2626, #b91c1c)":j?"linear-gradient(to right, #9333ea, #7c3aed)":"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1.5rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[E?f.jsx("span",{style:{fontSize:"24px"},children:"ðŸš¨"}):f.jsx(Ri,{size:24}),f.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:["××™×¨×•×¢×™× ×œ×™×•× ",e==null?void 0:e.toLocaleDateString("he-IL")]})]}),f.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"Ã—"})]}),f.jsxs("div",{style:{marginTop:"0.5rem",color:E?"#fecaca":j?"#e9d5ff":"#bfdbfe"},children:[U.length," ×”×–×ž× ",U.length!==1?"×•×ª":"×”",E&&" â€¢ ðŸš¨ ×“×•×¨×© ×˜×™×¤×•×œ ×“×—×•×£",j&&!E&&" â€¢ × ×“×¨×© ×¢×“×›×•×Ÿ ×“×—×•×£"]})]}),f.jsx("div",{style:{padding:"1.5rem",paddingBottom:"2.5rem",overflowY:"auto",flex:1,minHeight:0},children:f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:U.map((S,D)=>{const w=S.availabilityStatus==="CONFLICT"&&S.availabilityConflicts.length>0,{isOverdue:M,overdueDays:O}=m(S);return f.jsxs("div",{style:{border:M?"2px solid #dc2626":w?"2px solid #9333ea":"1px solid #e5e7eb",borderRadius:"8px",background:M?"#fef2f2":w?"#faf5ff":"white",boxShadow:M?"0 4px 12px rgba(220, 38, 38, 0.15)":w?"0 4px 12px rgba(147, 51, 234, 0.15)":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[M&&f.jsxs("div",{style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",padding:"0.75rem",borderBottom:"1px solid #f87171",borderTopLeftRadius:"6px",borderTopRightRadius:"6px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[f.jsx("span",{style:{fontSize:"18px"},children:"ðŸš¨"}),f.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#dc2626"},children:"×”×–×ž× ×” ×©×œ× ×”×•×—×–×¨×” ×‘×–×ž×Ÿ!"})]}),f.jsxs("div",{style:{fontSize:"0.8rem",color:"#b91c1c"},children:["××™×—×•×¨ ×©×œ ",O," ×™×•×",O>1?"×™×":""," â€¢ ×ª××¨×™×š ×”×—×–×¨×”: ",new Date(S.returnDate).toLocaleDateString("he-IL")]})]}),w&&!M&&f.jsxs("div",{style:{background:"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",padding:"0.75rem",borderBottom:"1px solid #c084fc",borderTopLeftRadius:"6px",borderTopRightRadius:"6px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[f.jsx(ka,{size:16,style:{color:"#9333ea"}}),f.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#581c87"},children:"×‘×¢×™×•×ª ×–×ž×™× ×•×ª ×‘×”×–×ž× ×” ×–×•:"})]}),f.jsx("div",{style:{fontSize:"0.8rem",color:"#4c1d95"},children:S.availabilityConflicts.map((L,X)=>f.jsxs("div",{style:{marginBottom:"0.25rem"},children:["â€¢ ",f.jsxs("strong",{children:[L.itemName,":"]})," ",L.message]},X))})]}),f.jsxs("div",{style:{padding:"1rem",borderBottom:w||M?"none":"1px solid #f3f4f6"},children:[f.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[f.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",color:M?"#dc2626":w?"#581c87":"#1f2937",margin:0},children:S.clientName}),f.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",background:M?"#dc2626":w?"#9333ea":"#3b82f6",color:"white"},children:M?`ðŸš¨ ××™×—×•×¨ ${O} ×™×•×`:w?"ðŸ”” ×‘×¢×™×•×ª ×–×ž×™× ×•×ª":`×”×–×ž× ×” #${D+1}`})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:M?"#b91c1c":w?"#4c1d95":"#4b5563",marginBottom:"0.5rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[f.jsx(ao,{size:16}),f.jsx("span",{children:S.phone})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[f.jsx(Ri,{size:16}),f.jsxs("span",{children:[new Date(S.pickupDate).toLocaleDateString("he-IL")," - ",new Date(S.returnDate).toLocaleDateString("he-IL")]})]})]}),f.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:S.events.map((L,X)=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:M?"#dc2626":w?"#9333ea":L.type==="×”×©××œ×”"?"#10b981":L.type==="×”×—×–×¨×”"?"#f59e0b":"#3b82f6",color:"white",border:M||w?"1px solid rgba(255,255,255,0.3)":"none"},children:[f.jsx("span",{children:L.icon}),f.jsx("span",{children:L.description}),L.isMultiDay&&f.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:["(×™×•× ",L.dayNumber,"/",L.totalDays,")"]})]},X))})]})}),S.items&&S.items.length>0&&f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[f.jsx(Qn,{size:16,style:{color:M?"#dc2626":w?"#9333ea":"#6b7280"}}),f.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:M?"#dc2626":w?"#581c87":"#374151"},children:["×¤×¨×™×˜×™× (",S.items.reduce((L,X)=>L+(X.quantity||1),0),")"]})]}),f.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[S.items.slice(0,3).map((L,X)=>{const H=w&&S.availabilityConflicts.some(ee=>ee.itemName===L.name);return f.jsxs("div",{style:{background:M?"#fee2e2":H?"#f3e8ff":"#f9fafb",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:M?"#dc2626":H?"#581c87":"#4b5563",border:M?"1px solid #f87171":H?"1px solid #c084fc":"1px solid #e5e7eb",fontWeight:M||H?"bold":"normal"},children:[M?"ðŸš¨ ":H?"ðŸ”” ":"",L.name," ",L.quantity>1?`(Ã—${L.quantity})`:""]},X)}),S.items.length>3&&f.jsxs("div",{style:{background:M?"#fee2e2":w?"#f3e8ff":"#eff6ff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:M?"#dc2626":w?"#581c87":"#2563eb",border:M?"1px solid #f87171":w?"1px solid #c084fc":"1px solid #dbeafe"},children:["+",S.items.length-3," × ×•×¡×¤×™×"]})]})]})]}),f.jsx("div",{style:{padding:"1rem",background:M?"#fef2f2":w?"#faf5ff":"#f9fafb"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",flexWrap:"wrap"},children:[M&&l&&f.jsxs("button",{onClick:()=>l(S.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold",boxShadow:"0 4px 12px rgba(220, 38, 38, 0.25)",animation:"pulse 2s infinite"},children:[f.jsx(wu,{size:16}),"×¡×’×•×¨ ×”×–×ž× ×” - ×“×—×•×£!"]}),S.email&&v(S)&&b(S)&&f.jsx("button",{onClick:()=>N(S),disabled:c===S.orderId||y(S),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:c===S.orderId?"#f59e0b":y(S)?"#22c55e":"#7c3aed",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:c===S.orderId||y(S)?"not-allowed":"pointer",fontSize:"0.875rem",opacity:y(S)?.8:1,fontWeight:y(S)?"bold":"normal"},title:F(S),children:c===S.orderId?f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"×©×•×œ×—..."]}):f.jsxs(f.Fragment,{children:[f.jsx(y2,{size:16}),_(S)]})}),S.events.some(L=>L.icon==="ðŸ“¦"||L.icon==="ðŸ”„")&&f.jsxs("button",{onClick:()=>s({open:!0,eventId:`${S.orderId}-edit`,items:S.items.map(L=>({...L}))}),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:M?"#dc2626":w?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:M||w?"bold":"normal",boxShadow:M||w?"0 4px 12px rgba(147, 51, 234, 0.25)":"none",animation:M||w?"pulse 2s infinite":"none"},children:[f.jsx(yf,{size:16}),M||w?"×¢×¨×•×š ×”×–×ž× ×” - ×“×—×•×£!":"×¢×¨×•×š ×”×–×ž× ×”"]}),f.jsxs("button",{onClick:()=>{const L=t.filter(X=>X.orderId===S.orderId);a(L)},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[f.jsx(mc,{size:16}),"×”×¦×’ ×¤×¨×˜×™×"]}),S.events.some(L=>L.icon==="ðŸ“¦")&&f.jsxs("button",{onClick:()=>B(S.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[f.jsx(Gs,{size:16}),"×ž×—×§"]}),l&&S.events.some(L=>L.type==="×”×—×–×¨×”")&&!M&&f.jsxs("button",{onClick:()=>l(S.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f59e0b",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[f.jsx(wu,{size:16}),"×‘×“×™×§×ª ×”×—×–×¨×”"]})]})})]},S.orderId)})})}),f.jsx("div",{style:{background:E?"#fef2f2":j?"#faf5ff":"#f9fafb",padding:"1rem 1.5rem",borderTop:E?"1px solid #f87171":j?"1px solid #d8b4fe":"1px solid #e5e7eb"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{fontSize:"0.875rem",color:E?"#dc2626":j?"#581c87":"#4b5563"},children:['×¡×”"×› ',U.reduce((S,D)=>{var w;return S+(((w=D.items)==null?void 0:w.reduce((M,O)=>M+(O.quantity||1),0))||0)},0)," ×¤×¨×™×˜×™×",E&&" â€¢ ðŸš¨ ×™×© ×”×–×ž× ×•×ª ×©×œ× ×”×•×—×–×¨×•",j&&!E&&" â€¢ ðŸ”” ×™×© ×‘×¢×™×•×ª ×–×ž×™× ×•×ª"]}),f.jsx("button",{onClick:()=>i(!1),style:{background:E?"#dc2626":j?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer"},children:"×¡×’×•×¨"})]})})]})})]})},qv=({show:r,setShow:e,selectedEvents:t,allItems:n})=>{var s;if(se.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r)return null;const i=((s=t==null?void 0:t[0])==null?void 0:s.items)||[],a=o=>{o.target===o.currentTarget&&e(!1)};return f.jsxs(f.Fragment,{children:[f.jsx("style",{jsx:!0,global:!0,children:`
        .items-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .items-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 28rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
      `}),f.jsx("div",{className:"items-modal-overlay",onClick:a,children:f.jsxs("div",{className:"items-modal-content",dir:"rtl",onClick:o=>o.stopPropagation(),children:[f.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #047857)",color:"white",padding:"1.5rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx(Qn,{size:24}),f.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"×¨×©×™×ž×ª ×ž×•×¦×¨×™×"})]}),f.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:f.jsx(xi,{size:20})})]}),f.jsxs("div",{style:{marginTop:"0.5rem",color:"#a7f3d0"},children:[i.length," ×¤×¨×™×˜",i.length!==1?"×™×":""," ×‘×”×–×ž× ×”"]})]}),f.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:i.length>0?f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map((o,l)=>(n.find(c=>c.name===o.name),f.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.imageUrl&&f.jsx("img",{src:o.imageUrl,alt:o.name,style:{width:"4rem",height:"4rem",objectFit:"cover",borderRadius:"8px",border:"2px solid #e5e7eb"}}),f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:o.name}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[f.jsxs("span",{children:[f.jsx("strong",{children:"×›×ž×•×ª:"})," ",o.quantity]}),f.jsxs("span",{children:[f.jsx("strong",{children:"×ž×–×”×” ×ž×•×¦×¨:"}),f.jsx("code",{style:{background:"#f3f4f6",padding:"0.125rem 0.375rem",borderRadius:"4px",marginRight:"0.25rem"},children:o.itemId||"×œ× × ×ž×¦×"})]})]})]}),f.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["Ã—",o.quantity]})]})},l)))}):f.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[f.jsx(Qn,{size:48,style:{color:"#d1d5db",marginBottom:"1rem"}}),f.jsx("p",{children:"××™×Ÿ ×¤×¨×™×˜×™× ×‘×”×–×ž× ×” ×–×•"})]})}),f.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['×¡×”"×› ×›×ž×•×ª: ',i.reduce((o,l)=>o+(l.quantity||1),0)]}),f.jsx("button",{onClick:()=>e(!1),style:{background:"#059669",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"500"},children:"×¡×’×•×¨"})]})})]})})]})},Vv=({show:r,data:e,setData:t,allItems:n,setShowReport:i,fetchItemsAndOrders:a,allEvents:s})=>{const[o,l]=se.useState({items:[]}),[c,d]=se.useState(!1),[u,p]=se.useState(""),[h,m]=se.useState(""),[v,b]=se.useState({pickupDate:null,returnDate:null}),[y,I]=se.useState(new Set);if(se.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),se.useEffect(()=>{if(r&&e.eventId&&s.length>0){console.log("ðŸš€ Initializing edit modal");const D=e.eventId.split("-")[0],w=s.filter(M=>M.orderId===D);if(w.length>0){const M=w[0];b({pickupDate:new Date(M.pickupDate),returnDate:new Date(M.returnDate)});const O=new Set;M.availabilityConflicts&&M.availabilityConflicts.length>0&&M.availabilityConflicts.forEach(L=>{O.add(L.itemName)}),I(O),console.log("ðŸ“… Order dates:",{pickup:M.pickupDate,return:M.returnDate}),console.log("âš ï¸ Problematic items:",Array.from(O))}l({items:[...e.items||[]]})}},[r,e,s]),!r)return null;const N=D=>{var K,T;const w=n.find(z=>z.name===D);if(!w)return console.warn(`âŒ Stock not found for ${D}`),0;const M=w.quantity||0,O=(K=e.eventId)==null?void 0:K.split("-")[0];if(!v.pickupDate||!v.returnDate)return console.warn("âš ï¸ Missing pickup/return dates for current order."),M;console.log(`ðŸ”Ž Checking "${D}" availability from ${v.pickupDate.toDateString()} to ${v.returnDate.toDateString()}`),console.log(`ðŸ“¦ Total stock from database: ${M}`);let L=0;const X=new Set;s.forEach(z=>{if(z.orderId===O||X.has(`${z.orderId}-${D}`))return;const W=new Date(z.pickupDate),G=new Date(z.returnDate);if(W<=v.returnDate&&G>=v.pickupDate&&z.items){const re=z.items.find(le=>le.name===D);re&&(console.log(`âž¡ï¸ Overlapping Order ID: ${z.orderId}`),console.log(`    Dates: ${W.toDateString()} - ${G.toDateString()}`),console.log(`    Reserved: ${re.quantity}`),L+=re.quantity||0,X.add(`${z.orderId}-${D}`))}});const H=((T=o.items.find(z=>z.name===D))==null?void 0:T.quantity)||0,ee=M-L-H;return console.log(`âœ… Available: ${ee} = ${M} - ${L} - ${H} (already in order)`),Math.max(0,ee)},_=D=>{console.log("âž• Trying to add item:",D.name);const w=N(D.name);if(w<=0){alert(`âŒ ×œ× × ×™×ª×Ÿ ×œ×”×•×¡×™×£ ×ž-${D.name}. ×–×ž×™×Ÿ: ${w}`);return}const M=o.items.findIndex(O=>O.name===D.name);if(M>=0){const O=[...o.items];O[M]={...O[M],quantity:O[M].quantity+1},l({...o,items:O})}else{const O={name:D.name,quantity:1,ItemId:D.ItemId||D.itemId||D.id,itemId:D.ItemId||D.itemId||D.id,id:D.id,imageUrl:D.imageUrl||""};l({...o,items:[...o.items,O]})}},F=(D,w)=>{var X;if(console.log(`ðŸ”„ Updating ${D} to quantity: ${w}`),w<=0){l({...o,items:o.items.filter(H=>H.name!==D)});return}const M=((X=o.items.find(H=>H.name===D))==null?void 0:X.quantity)||0,O=N(D)+M;if(w>O){alert(`âŒ ×œ× × ×™×ª×Ÿ ×œ×”×–×ž×™×Ÿ ${w} ×ž-${D}. ×–×ž×™×Ÿ: ${O}`);return}const L=o.items.map(H=>H.name===D?{...H,quantity:w}:H);l({...o,items:L})},R=D=>{console.log("ðŸ—‘ï¸ Removing item:",D),l({...o,items:o.items.filter(w=>w.name!==D)})},U=async()=>{var D;try{d(!0);const w=(D=e.eventId)==null?void 0:D.split("-")[0];if(!w)throw new Error("×©×’×™××”: ×œ× × ×ž×¦× ×ž×–×”×” ×”×–×ž× ×”");console.log("ðŸ’¾ Saving items:",o.items);const M=o.items.map(O=>({...O,ItemId:O.ItemId||O.itemId||O.id,itemId:O.ItemId||O.itemId||O.id}));await _r(Tt(Ue,"orders",w),{items:M,availabilityStatus:"OK",availabilityConflicts:[],needsAttention:!1,lastAvailabilityCheck:tr()}),await a(),t({open:!1,eventId:null,items:[]}),i(!1),alert("ðŸŽ‰ ×”×©×™× ×•×™×™× × ×©×ž×¨×• ×‘×”×¦×œ×—×”!")}catch(w){console.error("âŒ ×©×’×™××” ×‘×©×ž×™×¨×”:",w),alert(w.message||"×©×ž×™×¨×” × ×›×©×œ×”. × ×¡×” ×©×•×‘.")}finally{d(!1)}},j=()=>{t({open:!1,eventId:null,items:[]})},E=u.toLowerCase(),B=h.trim().toLowerCase(),k=n.filter(D=>D.name.toLowerCase().includes(E)&&(B===""||String(D.ItemId||D.itemId||"").toLowerCase()===B)),S=D=>{D.target===D.currentTarget&&j()};return f.jsxs(f.Fragment,{children:[f.jsx("style",{jsx:!0,global:!0,children:`
        .edit-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .edit-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .problematic-item {
          border: 2px solid #9333ea !important;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%) !important;
          animation: problemPulse 3s ease-in-out infinite !important;
        }

        @keyframes problemPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 4px rgba(147, 51, 234, 0.1); }
        }

        .problematic-item-indicator {
          background: #9333ea !important;
          color: white !important;
          padding: 0.25rem 0.5rem !important;
          border-radius: 4px !important;
          font-size: 0.75rem !important;
          font-weight: bold !important;
          margin-left: 0.5rem !important;
        }

        @keyframes warningPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @media (max-width: 768px) {
          .edit-modal-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .edit-modal-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .modal-footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
          }
          
          .modal-footer-mobile button {
            width: 100% !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),f.jsx("div",{className:"edit-modal-overlay",onClick:S,children:f.jsxs("div",{className:"edit-modal-content",dir:"rtl",onClick:D=>D.stopPropagation(),children:[f.jsxs("div",{style:{background:y.size>0?"linear-gradient(to right, #9333ea, #7c3aed)":"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1rem",flexShrink:0},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.size>0?f.jsx(ka,{size:24,style:{animation:"bellRing 2s infinite"}}):f.jsx(yf,{size:24}),f.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:y.size>0?"ðŸ”” ×¢×¨×™×›×ª ×”×–×ž× ×” - ×™×© ×‘×¢×™×•×ª ×–×ž×™× ×•×ª":"×¢×¨×™×›×ª ×”×–×ž× ×”"})]}),f.jsx("button",{onClick:j,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"Ã—"})]}),v.pickupDate&&v.returnDate&&f.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:y.size>0?"#e9d5ff":"#bfdbfe"},children:["ðŸ“… ×ª××¨×™×›×™ ×”×”×–×ž× ×”: ",v.pickupDate.toLocaleDateString("he-IL")," - ",v.returnDate.toLocaleDateString("he-IL"),y.size>0&&f.jsxs("div",{style:{marginTop:"0.25rem",fontWeight:"bold"},children:["ðŸ”” ",y.size," ×¤×¨×™×˜×™× ×“×•×¨×©×™× ×¢×“×›×•×Ÿ"]})]})]}),f.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[y.size>0&&f.jsxs("div",{style:{background:"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",border:"2px solid #9333ea",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem",animation:"warningPulse 2s ease-in-out infinite"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[f.jsx(ka,{size:20,style:{color:"#9333ea"}}),f.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#581c87"},children:["× ×ž×¦××• ",y.size," ×¤×¨×™×˜×™× ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª!"]})]}),f.jsx("p",{style:{fontSize:"0.875rem",color:"#4c1d95",margin:"0 0 0.5rem 0"},children:"×”×¤×¨×™×˜×™× ×”×ž×¡×•×ž× ×™× ×‘×¡×’×•×œ ×œ×ž×˜×” ××™× × ×–×ž×™× ×™× ×‘×›×ž×•×ª ×”×ž×‘×•×§×©×ª. ×”×ª×× ××ª ×”×›×ž×•×™×•×ª ××• ×”×¡×¨ ×¤×¨×™×˜×™× ×›×“×™ ×œ×¤×ª×•×¨ ××ª ×”×‘×¢×™×”."}),f.jsxs("div",{style:{background:"rgba(243, 232, 255, 0.7)",padding:"0.5rem",borderRadius:"6px",fontSize:"0.8rem",color:"#4c1d95"},children:["ðŸ’¡ ×¤×¨×™×˜×™× ×‘×¢×™×™×ª×™×™×: ",Array.from(y).join(", ")]})]}),f.jsxs("div",{style:{marginBottom:"1.5rem"},children:[f.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["×¤×¨×™×˜×™× × ×•×›×—×™×™× ×‘×”×–×ž× ×” (",o.items.length,")"]}),o.items.length>0?f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:o.items.map((D,w)=>{const M=n.find(H=>H.name===D.name),L=N(D.name)+D.quantity,X=y.has(D.name);return f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:X?"#faf5ff":"#f9fafb",padding:"0.75rem",borderRadius:"8px",border:X?"2px solid #9333ea":"1px solid #e5e7eb"},className:X?"problematic-item":"",children:[X&&f.jsx("div",{className:"problematic-item-indicator",children:"ðŸ”” ×‘×¢×™×”"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[(M==null?void 0:M.imageUrl)&&f.jsx("img",{src:M.imageUrl,alt:D.name,style:{width:"4.5rem",height:"4.5rem",objectFit:"cover",borderRadius:"6px",flexShrink:0,border:X?"2px solid #9333ea":"none"}}),f.jsxs("div",{style:{minWidth:0,flex:1},children:[f.jsxs("div",{style:{fontWeight:"500",color:X?"#581c87":"#1f2937",fontSize:"0.9rem"},children:[X&&"ðŸ”” ",D.name]}),f.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["×ž×–×”×”: ",(M==null?void 0:M.ItemId)||(M==null?void 0:M.itemId)||"×œ× × ×ž×¦×"]}),f.jsxs("div",{style:{fontSize:"0.7rem",color:X?"#9333ea":"#059669",fontWeight:X?"bold":"500"},children:["×ž×§×¡×™×ž×•×: ",L,X&&" (×œ× ×ž×¡×¤×™×§!)"]})]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},children:[f.jsx("button",{onClick:()=>F(D.name,D.quantity-1),style:{background:"#ef4444",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:c,children:f.jsx(b2,{size:12})}),f.jsx("span",{style:{width:"1.5rem",textAlign:"center",fontWeight:"500",fontSize:"0.9rem",color:X?"#9333ea":"#1f2937"},children:D.quantity}),f.jsx("button",{onClick:()=>F(D.name,D.quantity+1),style:{background:D.quantity>=L?"#9ca3af":"#10b981",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:D.quantity>=L?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:c||D.quantity>=L,children:f.jsx(R1,{size:12})}),f.jsx("button",{onClick:()=>R(D.name),style:{background:X?"#9333ea":"#ef4444",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",border:"none",cursor:"pointer",marginRight:"0.3rem",fontSize:"0.75rem",fontWeight:X?"bold":"normal"},disabled:c,children:X?"×”×¡×¨ ×‘×¢×™×”":"×”×¡×¨"})]})]},w)})}):f.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"#6b7280"},children:"××™×Ÿ ×¤×¨×™×˜×™× ×‘×”×–×ž× ×”"})]}),f.jsxs("div",{children:[f.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"×”×•×¡×£ ×¤×¨×™×˜×™× ×ž×”×ž×œ××™"}),f.jsx("div",{style:{marginBottom:"1rem"},children:f.jsxs("div",{style:{position:"relative"},children:[f.jsx(rc,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),f.jsx("input",{type:"text",placeholder:"×—×¤×© ×¤×¨×™×˜ ×œ×¤×™ ×©×...",value:u,onChange:D=>p(D.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:c})]})}),f.jsx("div",{style:{marginBottom:"1rem"},children:f.jsxs("div",{style:{position:"relative"},children:[f.jsx(rc,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),f.jsx("input",{type:"text",placeholder:"×—×¤×© ×¤×¨×™×˜ ×œ×¤×™ ×ž×¡×¤×¨ ×ž×–×”×”...",value:h,onChange:D=>m(D.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:c})]})}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",maxHeight:"12rem",overflowY:"auto",overflowX:"hidden"},children:k.map((D,w)=>{var ee;const M=o.items.some(K=>K.name===D.name),O=M?(ee=o.items.find(K=>K.name===D.name))==null?void 0:ee.quantity:0,L=N(D.name),X=O<L+O,H=y.has(D.name);return f.jsx("div",{onClick:()=>!c&&X&&_(D),style:{padding:"0.6rem",borderRadius:"8px",border:M?H?"2px solid #9333ea":"2px solid #3b82f6":"1px solid #e5e7eb",background:M?H?"#faf5ff":"#eff6ff":"white",cursor:c||!X?"not-allowed":"pointer",transition:"all 0.2s",opacity:c||!X?.6:1},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[D.imageUrl&&f.jsx("img",{src:D.imageUrl,alt:D.name,style:{width:"6rem",height:"6rem",objectFit:"cover",borderRadius:"6px",flexShrink:0,border:H?"1px solid #9333ea":"none"}}),f.jsxs("div",{style:{flex:1,minWidth:0},children:[f.jsxs("div",{style:{fontWeight:"500",fontSize:"0.8rem",color:H?"#581c87":"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[H&&"ðŸ”” ",D.name]}),f.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["×ž×–×”×”: ",D.itemId||D.ItemId]}),f.jsxs("div",{style:{fontSize:"0.65rem",color:L>0?"#059669":"#dc2626",fontWeight:"500"},children:["×–×ž×™×Ÿ: ",L]}),M&&f.jsxs("div",{style:{fontSize:"0.65rem",color:H?"#9333ea":"#2563eb",fontWeight:"500"},children:["×‘×”×–×ž× ×”: ",O,H&&" (×‘×¢×™×”!)"]})]})]})},w)})})]})]}),f.jsx("div",{style:{background:y.size>0?"#faf5ff":"#f9fafb",padding:"1rem",borderTop:y.size>0?"1px solid #d8b4fe":"1px solid #e5e7eb",flexShrink:0},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"modal-footer-mobile",children:[f.jsxs("div",{style:{fontSize:"0.875rem",color:y.size>0?"#581c87":"#4b5563"},children:['×¡×”"×› ×¤×¨×™×˜×™×: ',o.items.reduce((D,w)=>D+w.quantity,0),y.size>0&&` â€¢ ðŸ”” ${y.size} ×‘×¢×™×•×ª`]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"modal-footer-mobile",children:[f.jsx("button",{onClick:j,disabled:c,style:{background:"#6b7280",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:c?"not-allowed":"pointer",fontSize:"0.875rem",opacity:c?.6:1},children:"×‘×™×˜×•×œ"}),f.jsx("button",{onClick:U,disabled:c||o.items.length===0,style:{background:o.items.length===0?"#9ca3af":y.size>0?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:o.items.length===0||c?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:y.size>0?"bold":"normal"},children:c?f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"×©×•×ž×¨..."]}):f.jsxs(f.Fragment,{children:[f.jsx(xc,{size:16}),y.size>0?"×©×ž×•×¨ ×•×ª×§×Ÿ ×‘×¢×™×•×ª":"×©×ž×•×¨ ×©×™× ×•×™×™×"]})})]})]})})]})})]})};class Gv{static async checkAllActiveOrders(){try{console.log("ðŸ” ×ž×ª×—×™×œ ×‘×“×™×§×ª ×–×ž×™× ×•×ª ×œ×›×œ ×”×”×–×ž× ×•×ª ×”×¤×¢×™×œ×•×ª...");const[e,t]=await Promise.all([this.getAllActiveOrders(),this.getAllItems()]);console.log(`ðŸ“Š × ×ž×¦××• ${e.length} ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª ×•-${t.length} ×¤×¨×™×˜×™× ×‘×ž×œ××™`);const n=[];for(const i of e){const a=await this.checkOrderAvailability(i,e,t);a.length>0&&n.push({order:i,conflicts:a})}return console.log(`âš ï¸ × ×ž×¦××• ${n.length} ×”×–×ž× ×•×ª ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª`),await this.updateOrdersWithConflicts(n),{success:!0,totalOrders:e.length,problematicOrders:n.length,conflicts:n}}catch(e){return console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×ª ×–×ž×™× ×•×ª:",e),{success:!1,error:e.message}}}static async getAllActiveOrders(){return(await Bt(mt(Ue,"orders"))).docs.map(t=>({id:t.id,...t.data()})).filter(t=>t.status==="open").sort((t,n)=>new Date(t.pickupDate)-new Date(n.pickupDate))}static async getAllItems(){return(await Bt(mt(Ue,"items"))).docs.map(t=>({id:t.id,...t.data()})).filter(t=>t.isDeleted!==!0)}static async checkOrderAvailability(e,t,n){const i=[];if(!e.items||!e.pickupDate||!e.returnDate)return i;const a=new Date(e.pickupDate),s=new Date(e.returnDate);for(const o of e.items){const l=n.find(d=>d.id===o.id||d.name===o.name);if(!l){i.push({itemName:o.name,itemId:o.ItemId||o.itemId,requested:o.quantity,available:0,issue:"ITEM_NOT_FOUND",message:"×”×¤×¨×™×˜ ×œ× × ×ž×¦× ×‘×ž×œ××™"});continue}const c=this.calculateAvailableQuantity(l,e,t,a,s);o.quantity>c&&i.push({itemName:o.name,itemId:l.ItemId,requested:o.quantity,available:c,totalStock:l.quantity,issue:"INSUFFICIENT_STOCK",message:`×ž×‘×•×§×©: ${o.quantity}, ×–×ž×™×Ÿ: ${c}`})}return i}static calculateAvailableQuantity(e,t,n,i,a){const s=e.quantity||0;let o=0;for(const l of n){if(l.id===t.id||!l.pickupDate||!l.returnDate||!l.items)continue;const c=new Date(l.pickupDate);if(new Date(l.returnDate)>=i&&c<=a){const p=l.items.find(h=>h.id===e.id||h.name===e.name);p&&(o+=p.quantity||0)}}return Math.max(0,s-o)}static async updateOrdersWithConflicts(e){const t=[];for(const{order:n,conflicts:i}of e)try{const a={availabilityStatus:"CONFLICT",availabilityConflicts:i,conflictDetectedAt:new Date().toISOString(),needsAttention:!0,lastAvailabilityCheck:tr()};t.push(_r(Tt(Ue,"orders",n.id),a)),console.log(`âš ï¸ ×¢×•×“×›× ×” ×”×–×ž× ×” ${n.simpleId||n.id} ×¢× ${i.length} ×‘×¢×™×•×ª ×–×ž×™× ×•×ª`)}catch(a){console.error(`âŒ ×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×–×ž× ×” ${n.id}:`,a)}t.length>0&&(await Promise.all(t),console.log(`âœ… ×¢×•×“×›× ×• ${t.length} ×”×–×ž× ×•×ª ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª`))}static async clearAvailabilityConflict(e){try{await _r(Tt(Ue,"orders",e),{availabilityStatus:"OK",availabilityConflicts:[],needsAttention:!1,lastAvailabilityCheck:tr()}),console.log(`âœ… × ×•×§×” ×¡×˜×˜×•×¡ ×–×ž×™× ×•×ª ×ž×”×–×ž× ×” ${e}`)}catch(t){console.error("âŒ ×©×’×™××” ×‘× ×™×§×•×™ ×¡×˜×˜×•×¡ ×–×ž×™× ×•×ª:",t)}}static async runAfterOrderClosure(e){console.log(`ðŸ”„ ×ž×¨×™×¥ ×‘×“×™×§×ª ×–×ž×™× ×•×ª ××—×¨×™ ×¡×’×™×¨×ª ×”×–×ž× ×” ${e}`);const t=await this.checkAllActiveOrders();return t.success&&t.problematicOrders>0?(console.log(`ðŸš¨ × ×ž×¦××• ${t.problematicOrders} ×”×–×ž× ×•×ª ×©×“×•×¨×©×•×ª ×¢×“×›×•×Ÿ ××—×¨×™ ×¡×’×™×¨×ª ×”×”×–×ž× ×”`),{shouldShowAlert:!0,message:`× ×ž×¦××• ${t.problematicOrders} ×”×–×ž× ×•×ª ×¢×ª×™×“×™×•×ª ×©×“×•×¨×©×•×ª ×¢×“×›×•×Ÿ ×‘×’×œ×œ ×©×™× ×•×™×™ ×ž×œ××™`,conflicts:t.conflicts}):{shouldShowAlert:!1}}static async quickCheckOrder(e){try{const[t,n]=await Promise.all([this.getAllActiveOrders(),this.getAllItems()]),i=t.find(s=>s.id===e);if(!i)return{hasConflicts:!1};const a=await this.checkOrderAvailability(i,t,n);return{hasConflicts:a.length>0,conflicts:a}}catch(t){return console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×” ×ž×”×™×¨×”:",t),{hasConflicts:!1,error:t.message}}}}const $v=({show:r,order:e,onClose:t,onCompleteInspection:n,allItems:i=[],updateItemQuantities:a})=>{const[s,o]=se.useState([]),[l,c]=se.useState(new Set),[d,u]=se.useState(""),[p,h]=se.useState(!1),[m,v]=se.useState(null);if(se.useEffect(()=>{if(r&&(e!=null&&e.items)){const R=e.items.map(U=>({itemId:U.id||U.itemId,name:U.name,quantityExpected:U.quantity||1,quantityReturned:U.quantity||1,isFullyReturned:!0,condition:"good",damageDescription:"",repairCost:0,notes:""}));o(R),c(new Set),u(""),v(null)}},[r,e]),se.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r||!e)return null;const b=(R,U,j)=>{o(E=>E.map((B,k)=>{if(k===R){const S={...B,[U]:j};return S.isFullyReturned=j>=B.quantityExpected,j<B.quantityExpected?S.condition="lost":S.condition==="lost"&&(S.condition="good"),S}return B})),c(E=>{const B=new Set(E);return B.delete(R),B})},y=R=>{c(U=>new Set([...U,R]))},I=()=>s.length>0&&l.size===s.length,N=async()=>{if(!I()){alert("×™×© ×œ××©×¨ ××ª ×›×œ ×”×¤×¨×™×˜×™× ×œ×¤× ×™ ×”×©×œ×ž×ª ×”×‘×“×™×§×”");return}const R=s.reduce((B,k)=>B+k.quantityExpected,0),U=s.reduce((B,k)=>B+k.quantityReturned,0),j=Math.round(U/R*100),E=`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×¡×™×™× ××ª ×‘×“×™×§×ª ×”×”×—×–×¨×”?

×¡×™×›×•×:
â€¢ ×¤×¨×™×˜×™× ×©×”×•×©××œ×•: ${R}/${R}
â€¢ ×¤×¨×™×˜×™× ×©×—×–×¨×•: ${U}/${R}
â€¢ ××—×•×– ×”×—×–×¨×”: ${j}%

×”×”×–×ž× ×” ×ª×¢×‘×•×¨ ×œ××™×¡×•×£ ×”×”×–×ž× ×•×ª ×”×¡×’×•×¨×•×ª.`;if(window.confirm(E))try{h(!0);const B=s.reduce((O,L)=>O+L.quantityExpected,0),k=s.reduce((O,L)=>O+L.quantityReturned,0),S=s.filter(O=>O.condition==="damaged").length,D=s.reduce((O,L)=>O+(L.repairCost||0),0),w={totalItemsExpected:B,totalItemsReturned:k,totalDamages:S,totalRepairCost:D,managerNotes:d,customerNotified:!1,customerAgreedToCharges:!1};for(const O of s){const L=i.find(X=>X.id===O.itemId||X.name===O.name);if(L){let X=0;const H=O.quantityExpected-O.quantityReturned,ee=O.condition==="damaged"?O.quantityReturned:0;X=H+ee;const K=L.quantity-X,T=Math.max(0,K);X>0&&await _r(Tt(Ue,"items",L.id),{quantity:T,lastUpdated:tr()})}}await n(e.id,s,w),a&&await a(),console.log("ðŸ” ×‘×•×“×§ ×–×ž×™× ×•×ª ×œ×”×–×ž× ×•×ª ×¢×ª×™×“×™×•×ª ××—×¨×™ ×¡×’×™×¨×ª ×”×”×–×ž× ×”...");const M=await Gv.runAfterOrderClosure(e.id);if(M.shouldShowAlert){console.log("ðŸš¨ × ×ž×¦××• ×‘×¢×™×•×ª ×–×ž×™× ×•×ª:",M),v(M),h(!1);return}t()}catch(B){console.error("Error completing return inspection:",B),alert("×©×’×™××” ×‘×”×©×œ×ž×ª ×‘×“×™×§×ª ×”×—×–×¨×”. × ×¡×” ×©×•×‘.")}finally{h(!1)}},_=()=>{v(null),t()},F=R=>{R.target===R.currentTarget&&window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×¡×’×•×¨ ××ª ×—×œ×•×Ÿ ×‘×“×™×§×ª ×”×—×–×¨×”?")&&t()};return f.jsxs(f.Fragment,{children:[f.jsx("style",{jsx:!0,global:!0,children:`
        .return-inspection-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.7) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .return-inspection-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .availability-alert {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important;
          border: 2px solid #f59e0b !important;
          border-radius: 12px !important;
          padding: 1.5rem !important;
          margin: 1rem !important;
          box-shadow: 0 8px 25px rgba(245, 158, 11, 0.2) !important;
        }

        @media (max-width: 768px) {
          .return-inspection-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .return-inspection-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
            align-items: stretch !important;
          }
          
          .footer-mobile button {
            width: 100% !important;
          }
          
          .footer-mobile .summary-text {
            text-align: center !important;
            margin-bottom: 0.5rem !important;
          }

          .availability-alert {
            margin: 0.5rem !important;
            padding: 1rem !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes slideDown {
          0% { transform: translateY(-10px); opacity: 0; }
          100% { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }
      `}),f.jsx("div",{className:"return-inspection-overlay",onClick:F,children:f.jsxs("div",{className:"return-inspection-content",dir:"rtl",onClick:R=>R.stopPropagation(),children:[m&&f.jsxs("div",{className:"availability-alert",style:{animation:"slideDown 0.3s ease-out"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[f.jsx(xf,{size:24,style:{color:"#f59e0b",animation:"pulse 2s infinite"}}),f.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"bold",margin:0,color:"#92400e"},children:"âš ï¸ × ×ž×¦××• ×”×–×ž× ×•×ª ×¢×ª×™×“×™×•×ª ×©×“×•×¨×©×•×ª ×¢×“×›×•×Ÿ!"})]}),f.jsx("p",{style:{color:"#92400e",marginBottom:"1rem",fontSize:"0.95rem",lineHeight:"1.5"},children:m.message}),m.conflicts&&m.conflicts.length>0&&f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#92400e",marginBottom:"0.5rem"},children:"×”×–×ž× ×•×ª ×©×“×•×¨×©×•×ª ×¢×“×›×•×Ÿ:"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.conflicts.slice(0,3).map((R,U)=>f.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.5)",padding:"0.75rem",borderRadius:"8px",border:"1px solid #fbbf24"},children:[f.jsxs("div",{style:{fontWeight:"600",fontSize:"0.9rem",color:"#92400e"},children:["×”×–×ž× ×” #",R.order.simpleId||R.order.id]}),f.jsxs("div",{style:{fontSize:"0.85rem",color:"#78350f",marginTop:"0.25rem"},children:[R.conflicts.length," ×¤×¨×™×˜×™× ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª"]})]},U)),m.conflicts.length>3&&f.jsxs("div",{style:{textAlign:"center",fontSize:"0.85rem",color:"#92400e",fontStyle:"italic"},children:["×•×¢×•×“ ",m.conflicts.length-3," ×”×–×ž× ×•×ª × ×•×¡×¤×•×ª..."]})]})]}),f.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.7)",padding:"0.75rem",borderRadius:"8px",fontSize:"0.9rem",color:"#78350f",marginBottom:"1rem"},children:["ðŸ’¡ ",f.jsx("strong",{children:"×ž×” ×œ×¢×©×•×ª:"}),' ×¢×‘×•×¨ ×œ×œ×•×— ×”×©× ×”, ×ž×¦× ××ª ×”××™×¨×•×¢×™× ×”×‘×¢×™×™×ª×™×™× (×™×•×¤×™×¢×• ×‘×¦×‘×¢ ×©×•× ×”), ×•×œ×—×¥ ×¢×œ "×¢×¨×•×š ×”×–×ž× ×”" ×›×“×™ ×œ×”×ª××™× ××ª ×”×›×ž×•×™×•×ª ×œ×ž×œ××™ ×”×–×ž×™×Ÿ.']}),f.jsx("button",{onClick:_,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",width:"100%",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",transition:"all 0.2s ease"},onMouseOver:R=>R.target.style.transform="translateY(-1px)",onMouseOut:R=>R.target.style.transform="translateY(0)",children:"×”×‘× ×ª×™ - ×¡×’×•×¨ ×‘×“×™×§×ª ×”×—×–×¨×” ×•×¢×‘×•×¨ ×œ×œ×•×— ×”×©× ×”"})]}),f.jsxs("div",{style:{background:"linear-gradient(to right, #fb923c, #f97316)",color:"white",padding:"1rem",flexShrink:0},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx(Oa,{size:24}),f.jsxs("div",{children:[f.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"×‘×“×™×§×ª ×”×—×–×¨×ª ×ž×•×¦×¨×™×"}),f.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:["×œ×§×•×—: ",e.clientName," â€¢ ",e.phone]})]})]}),f.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"Ã—"})]}),f.jsxs("div",{style:{marginTop:"1rem",background:"rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"0.75rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.875rem"},children:[f.jsx("span",{children:"×”×ª×§×“×ž×•×ª ×”×‘×“×™×§×”"}),f.jsxs("span",{style:{fontWeight:"bold"},children:[l.size,"/",s.length," ×¤×¨×™×˜×™× ××•×©×¨×•"]})]}),f.jsx("div",{style:{marginTop:"0.5rem",background:"rgba(255, 255, 255, 0.3)",borderRadius:"4px",height:"6px",overflow:"hidden"},children:f.jsx("div",{style:{background:"#10b981",height:"100%",width:`${s.length>0?l.size/s.length*100:0}%`,transition:"width 0.3s ease"}})})]})]}),f.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:s.map((R,U)=>{var E,B;return l.has(U)?null:f.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1rem",background:"#ffffff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("img",{src:((E=e.items.find(k=>k.id===R.itemId))==null?void 0:E.imageUrl)||"/no-image-available.png",alt:R.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb",flexShrink:0}}),f.jsxs("div",{style:{minWidth:0,flex:1},children:[f.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:R.name}),f.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["×ž×–×”×”: ",R.ItemId||((B=e.items.find(k=>k.id===R.itemId))==null?void 0:B.ItemId)||R.itemId]}),f.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["×›×ž×•×ª ×ž×•×–×ž× ×ª: ",R.quantityExpected]})]})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[f.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"×›×ž×•×ª ×©×—×–×¨×”:"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("button",{onClick:()=>{const k=Math.max(0,R.quantityReturned-1);b(U,"quantityReturned",k)},disabled:R.quantityReturned<=0,style:{background:R.quantityReturned<=0?"#d1d5db":"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:R.quantityReturned<=0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:R.quantityReturned<=0?.6:1},children:"-"}),f.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"40px",textAlign:"center",color:"#1f2937"},children:R.quantityReturned}),f.jsx("button",{onClick:()=>{const k=Math.min(R.quantityExpected,R.quantityReturned+1);b(U,"quantityReturned",k)},disabled:R.quantityReturned>=R.quantityExpected,style:{background:R.quantityReturned>=R.quantityExpected?"#d1d5db":"#10b981",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:R.quantityReturned>=R.quantityExpected?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:R.quantityReturned>=R.quantityExpected?.6:1},children:"+"}),f.jsxs("button",{onClick:()=>y(U),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",marginRight:"1rem"},children:[f.jsx(L1,{size:16}),"×‘×•×¦×¢"]})]})]}),R.quantityReturned<R.quantityExpected&&f.jsx("div",{style:{padding:"0.5rem",background:"#fef3c7",borderRadius:"6px",textAlign:"center"},children:f.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"500"},children:["âš ï¸ ×—×¡×¨×™× ",R.quantityExpected-R.quantityReturned," ×¤×¨×™×˜×™×"]})})]})},U)})}),l.size>0&&f.jsxs("div",{style:{marginTop:"2rem",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"12px",padding:"1rem"},children:[f.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"bold",color:"#0369a1",margin:"0 0 1rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(Oa,{size:20}),"×¤×¨×™×˜×™× ×©××•×©×¨×• (",l.size,"/",s.length,")"]}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Array.from(l).map(R=>{const U=s[R];return f.jsxs("div",{style:{background:"white",border:"1px solid #bae6fd",borderRadius:"8px",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#1f2937"},children:U.name}),f.jsxs("span",{style:{fontSize:"0.875rem",color:"#059669",fontWeight:"500"},children:["×›×ž×•×ª ×©×—×–×¨×”: ",U.quantityReturned]})]},R)})})]})]}),f.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"footer-mobile",children:[f.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"summary-text",children:I()?"×›×œ ×”×¤×¨×™×˜×™× ××•×©×¨×• - × ×™×ª×Ÿ ×œ×”×©×œ×™× ××ª ×”×‘×“×™×§×”":`×™×© ×œ××©×¨ ××ª ×›×œ ×”×¤×¨×™×˜×™× (${l.size}/${s.length})`}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"footer-mobile",children:[f.jsx("button",{onClick:t,disabled:p,style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:p?"not-allowed":"pointer",fontSize:"0.875rem",opacity:p?.6:1},children:"×‘×™×˜×•×œ"}),f.jsx("button",{onClick:N,disabled:p||!I(),style:{background:I()?"#f59e0b":"#9ca3af",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:p||!I()?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:p||!I()?.6:1,justifyContent:"center"},children:p?f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"×ž×¢×‘×“..."]}):f.jsxs(f.Fragment,{children:[f.jsx(xc,{size:16}),"×”×©×œ× ×‘×“×™×§×ª ×”×—×–×¨×”"]})})]})]})})]})})]})},Xv=({allItems:r,itemsMap:e,events:t,setAllItems:n,setItemsMap:i,setEvents:a,fetchItemsAndOrders:s})=>{const[o,l]=se.useState(new Date),[c,d]=se.useState([]),[u,p]=se.useState(!1),[h,m]=se.useState(null),[v,b]=se.useState(!1),[y,I]=se.useState({open:!1,eventId:null,items:[]}),[N,_]=se.useState({show:!1,order:null}),F=async j=>{try{const E=t.filter(B=>B.orderId===j);if(E.length>0){const B={id:j,clientName:E[0].clientName,phone:E[0].phone,items:E[0].items,pickupDate:E[0].pickupDate,returnDate:E[0].returnDate};_({show:!0,order:B}),p(!1)}}catch(E){console.error("Error initializing return inspection:",E),alert("×©×’×™××” ×‘×”×ª×—×œ×ª ×‘×“×™×§×ª ×”×—×–×¨×”. × ×¡×” ×©×•×‘.")}},R=async j=>{try{const E={status:"closed","returnInspection.inspectionStatus":"completed","returnInspection.inspectedBy":"×¡×’×™×¨×” ×™×“× ×™×ª","returnInspection.inspectionDate":tr(),"returnInspection.managerNotes":"×”×–×ž× ×” × ×¡×’×¨×” ×™×“× ×™×ª ×¢×œ ×™×“×™ ×”×ž× ×”×œ","returnInspection.totalItemsReturned":0,"returnInspection.totalDamages":0,"returnInspection.totalRepairCost":0,closedAt:tr(),manuallyClosedAt:tr()};await _r(Tt(Ue,"orders",j),E),await s(),p(!1),alert("×”×”×–×ž× ×” × ×¡×’×¨×” ×™×“× ×™×ª ×•×”×•×¢×‘×¨×” ×œ×”×™×¡×˜×•×¨×™×”!")}catch(E){console.error("Error manually closing order:",E),alert("×©×’×™××” ×‘×¡×’×™×¨×ª ×”×”×–×ž× ×”. × ×¡×” ×©×•×‘.")}},U=async(j,E,B)=>{try{const k={status:"closed",returnInspection:{inspectionStatus:"completed",inspectedBy:"×ž× ×”×œ ×”×ž×¢×¨×›×ª",inspectionDate:tr(),itemInspections:E.map(S=>({itemId:S.itemId,name:S.name,quantityExpected:S.quantityExpected,quantityReturned:S.quantityReturned,condition:S.condition,damageDescription:S.damageDescription||"",repairCost:S.repairCost||0,notes:S.notes||"",inspectedAt:new Date().toISOString()})),totalItemsReturned:B.totalItemsReturned,totalItemsExpected:B.totalItemsExpected,totalDamages:B.totalDamages,totalRepairCost:B.totalRepairCost,managerNotes:B.managerNotes,customerNotified:B.customerNotified,customerAgreedToCharges:B.customerAgreedToCharges},closedAt:tr()};await _r(Tt(Ue,"orders",j),k),await s(),_({show:!1,order:null}),alert("×‘×“×™×§×ª ×”×—×–×¨×” ×”×•×©×œ×ž×” ×‘×”×¦×œ×—×”! ×”×”×–×ž× ×” ×”×•×¢×‘×¨×” ×œ×”×™×¡×˜×•×¨×™×”.")}catch(k){console.error("Error completing return inspection:",k),alert("×©×’×™××” ×‘×”×©×œ×ž×ª ×‘×“×™×§×ª ×”×—×–×¨×”. × ×¡×” ×©×•×‘.")}};return f.jsxs("div",{className:"mt-6",children:[f.jsx(Nv,{currentDate:o,events:t,setCurrentDate:l,setSelectedEvents:d,setSelectedDate:m,setShowReport:p,fetchItemsAndOrders:s}),f.jsx(Hv,{show:u,selectedDate:h,selectedEvents:c,allItems:r,setShowReport:p,setShowItemsModal:b,setEditItemModal:I,fetchItemsAndOrders:s,onStartReturnInspection:F,onCloseOrderManually:R}),f.jsx(qv,{show:!!v,setShow:()=>b(!1),selectedEvents:v,allItems:r}),f.jsx(Vv,{show:y.open,data:y,setData:I,allItems:r,setShowReport:p,fetchItemsAndOrders:s,allEvents:t}),f.jsx($v,{show:N.show,order:N.order,onClose:()=>_({show:!1,order:null}),onCompleteInspection:U,allItems:r,updateItemQuantities:s})]})},ef=r=>{const e=new Date(r);return e.setHours(0,0,0,0),e},Yv=async(r,e)=>{const t=ef(new Date);for(const n of r.docs){const i=n.data();!i.pickupDate||i.stockUpdated||ef(new Date(i.pickupDate))>t||await _r(Tt(e,"orders",n.id),{stockUpdated:!0})}},Kv=(r,e)=>{const t=ef(new Date);return r.docs.flatMap(n=>{const i=n.data();if(i.status==="closed")return[];const a=(o=[])=>o.map(l=>{const c=e.find(d=>d.id===l.id);return{...l,imageUrl:(c==null?void 0:c.imageUrl)||null,itemId:(c==null?void 0:c.itemId)||"×œ× × ×ž×¦×"}}),s=[];if(i.pickupDate&&i.returnDate){const o=new Date(i.pickupDate),l=new Date(i.returnDate);o.setHours(0,0,0,0),l.setHours(0,0,0,0);const c=t>l,d=c?Math.ceil((t-l)/(1e3*60*60*24)):0,u=Math.ceil((l-o)/(1e3*60*60*24));for(let p=0;p<=u;p++){if(p!==0&&p!==u)continue;const h=new Date(o);h.setDate(o.getDate()+p);let m,v,b;p===0?(m="×”×©××œ×”",v="ðŸ“¦",b="××™×¡×•×£ ×ž×•×¦×¨×™×"):p===u&&(m="×”×—×–×¨×”",v="ðŸ”„",b="×”×—×–×¨×ª ×ž×•×¦×¨×™×"),s.push({id:`${n.id}-${h.toISOString().slice(0,10)}`,orderId:n.id,date:new Date(h),clientName:i.clientName,phone:i.phone,email:i.email,manualEmailSent:i.manualEmailSent||!1,manualEmailSentAt:i.manualEmailSentAt||null,type:m,icon:v,description:b,items:a(i.items),pickupDate:i.pickupDate,returnDate:i.returnDate,dayNumber:p+1,totalDays:u+1,isMultiDay:u>0,isOverdue:c,overdueDays:d,availabilityStatus:i.availabilityStatus||"OK",availabilityConflicts:i.availabilityConflicts||[],needsAttention:i.needsAttention||!1,eventType:i.eventType||"×›×œ×œ×™",pickupLocation:i.pickupLocation||"×ž×™×§×•× ×œ×¤×™ ×ª×™××•×",specialInstructions:i.specialInstructions||"××™×Ÿ ×”×•×¨××•×ª ×ž×™×•×—×“×•×ª"})}}return s})},Zv=async(r,e,t,n)=>{try{console.log("ðŸ”„ Fetching items and orders...");const a=(await Bt(mt(r,"items"))).docs.map(c=>{const d=c.data();return{id:c.id,itemId:d.ItemId,name:d.name,imageUrl:d.imageUrl,quantity:d.quantity||0,isDeleted:d.isDeleted||!1}}).filter(c=>!c.isDeleted);console.log("ðŸ“Š Items loaded with quantities:",a.map(c=>({name:c.name,quantity:c.quantity}))),e(a);const s={};a.forEach(c=>{s[c.name]=c.imageUrl||null}),t(s);const o=await Bt(mt(r,"orders"));console.log("ðŸ“‹ Orders loaded:",o.docs.length),await Yv(o,r);const l=Kv(o,a);console.log("ðŸ“… Events built:",l.length),n(l),console.log("âœ… Data refresh completed")}catch(i){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×–×ž× ×•×ª ×•×”×¤×¨×™×˜×™×:",i)}},Qv=()=>{const[r,e]=se.useState([]),[t,n]=se.useState({}),[i,a]=se.useState([]),[s,o]=se.useState(!0),[l,c]=se.useState(null),[d,u]=se.useState(new Date),p=async()=>{try{o(!0),c(null),await Zv(Ue,e,n,a)}catch(h){console.error("Error fetching calendar data:",h),c("×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™ ×”×™×•×ž×Ÿ. ×× × × ×¡×” ×©×•×‘.")}finally{o(!1)}};return se.useEffect(()=>{p()},[]),s?f.jsxs(f.Fragment,{children:[f.jsx("style",{jsx:!0,children:`
          @keyframes highlightFlash {
            0%, 100% { 
              transform: scale(1);
              box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.8);
            }
            25% { 
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.4);
            }
            50% { 
              transform: scale(1.08);
              box-shadow: 0 0 0 20px rgba(147, 51, 234, 0.2);
            }
            75% { 
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.4);
            }
          }
        `}),f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full border-blue-600 border-t-transparent"}),f.jsx("p",{className:"mt-4 text-gray-600",children:"×˜×•×¢×Ÿ × ×ª×•× ×™ ×™×•×ž×Ÿ..."})]})})]}):l?f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-red-600 mb-4",children:l}),f.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"× ×¡×” ×©×•×‘"})]})}):f.jsxs(f.Fragment,{children:[f.jsx("style",{jsx:!0,global:!0,children:`
        @keyframes highlightFlash {
          0% { 
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(147, 51, 234, 1);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          }
          15% { 
            transform: scale(1.1);
            box-shadow: 0 0 0 15px rgba(147, 51, 234, 0.6);
            border-color: #7c3aed !important;
            background: linear-gradient(135deg, #e9d5ff 0%, #c4b5fd 100%) !important;
          }
          30% { 
            transform: scale(1.15);
            box-shadow: 0 0 0 25px rgba(147, 51, 234, 0.4);
            border-color: #6d28d9 !important;
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%) !important;
          }
          50% { 
            transform: scale(1.12);
            box-shadow: 0 0 0 30px rgba(147, 51, 234, 0.2);
            border-color: #5b21b6 !important;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%) !important;
          }
          70% { 
            transform: scale(1.08);
            box-shadow: 0 0 0 20px rgba(147, 51, 234, 0.3);
            border-color: #7c3aed !important;
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%) !important;
          }
          85% { 
            transform: scale(1.05);
            box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.5);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #e9d5ff 0%, #c4b5fd 100%) !important;
          }
          100% { 
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.8);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          }
        }
        
        /* ×¡×˜×™×™×œ×™× ×’ × ×•×¡×£ ×œ×ž×—×•×•×Ÿ ×™×•× ×ž×•×“×’×© */
        .day-cell[style*="highlightFlash"] {
          position: relative !important;
          z-index: 1000 !important;
        }
        
        .day-cell[style*="highlightFlash"] .day-number {
          color: #581c87 !important;
          font-weight: bold !important;
          font-size: 1.2rem !important;
        }
      `}),f.jsx("div",{className:"container mx-auto px-4",children:f.jsx(Xv,{allItems:r,itemsMap:t,events:i,setAllItems:e,setItemsMap:n,setEvents:a,fetchItemsAndOrders:p,currentDate:d,setCurrentDate:u})})]})};function Jv(r,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in r)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(r)}function fh(r,e){return new Promise(function(t,n){let i;return ey(r).then(function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return n(s)}},n)})}const ey=r=>new Promise((e,t)=>{const n=new FileReader;n.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let s=0;if(a.getUint16(s)!==65496)return t("not a valid JPEG");for(s+=2;;){const o=a.getUint16(s);if(o===65498)break;const l=a.getUint16(s+2);if(o===65505&&a.getUint32(s+4)===1165519206){const c=s+10;let d;switch(a.getUint16(c)){case 18761:d=!0;break;case 19789:d=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(c+2,d)!==42)return t("TIFF header contains invalid version");const u=a.getUint32(c+4,d),p=c+u+2+12*a.getUint16(c+u,d);for(let h=c+u+2;h<p;h+=12)if(a.getUint16(h,d)==274){if(a.getUint16(h+2,d)!==3)return t("Orientation data type is invalid");if(a.getUint32(h+4,d)!==1)return t("Orientation data count is invalid");a.setUint16(h+8,1,d);break}return e(i.slice(s,s+2+l))}s+=2+l}return e(new Blob)}),n.readAsArrayBuffer(r)});var oc={},ty={get exports(){return oc},set exports(r){oc=r}};(function(r){var e,t,n={};ty.exports=n,n.parse=function(i,a){for(var s=n.bin.readUshort,o=n.bin.readUint,l=0,c={},d=new Uint8Array(i),u=d.length-4;o(d,u)!=101010256;)u--;l=u,l+=4;var p=s(d,l+=4);s(d,l+=2);var h=o(d,l+=2),m=o(d,l+=4);l+=4,l=m;for(var v=0;v<p;v++){o(d,l),l+=4,l+=4,l+=4,o(d,l+=4),h=o(d,l+=4);var b=o(d,l+=4),y=s(d,l+=4),I=s(d,l+2),N=s(d,l+4);l+=6;var _=o(d,l+=8);l+=4,l+=y+I+N,n._readLocal(d,_,c,h,b,a)}return c},n._readLocal=function(i,a,s,o,l,c){var d=n.bin.readUshort,u=n.bin.readUint;u(i,a),d(i,a+=4),d(i,a+=2);var p=d(i,a+=2);u(i,a+=2),u(i,a+=4),a+=4;var h=d(i,a+=8),m=d(i,a+=2);a+=2;var v=n.bin.readUTF8(i,a,h);if(a+=h,a+=m,c)s[v]={size:l,csize:o};else{var b=new Uint8Array(i.buffer,a);if(p==0)s[v]=new Uint8Array(b.buffer.slice(a,a+o));else{if(p!=8)throw"unknown compression method: "+p;var y=new Uint8Array(l);n.inflateRaw(b,y),s[v]=y}}},n.inflateRaw=function(i,a){return n.F.inflate(i,a)},n.inflate=function(i,a){return i[0],i[1],n.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},n.deflate=function(i,a){a==null&&(a={level:6});var s=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[s]=120,o[s+1]=156,s+=2,s=n.F.deflateRaw(i,o,s,a.level);var l=n.adler(i,0,i.length);return o[s+0]=l>>>24&255,o[s+1]=l>>>16&255,o[s+2]=l>>>8&255,o[s+3]=l>>>0&255,new Uint8Array(o.buffer,0,s+4)},n.deflateRaw=function(i,a){a==null&&(a={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),o=n.F.deflateRaw(i,s,o,a.level);return new Uint8Array(s.buffer,0,o)},n.encode=function(i,a){a==null&&(a=!1);var s=0,o=n.bin.writeUint,l=n.bin.writeUshort,c={};for(var d in i){var u=!n._noNeed(d)&&!a,p=i[d],h=n.crc.crc(p,0,p.length);c[d]={cpr:u,usize:p.length,crc:h,file:u?n.deflateRaw(p):p}}for(var d in c)s+=c[d].file.length+30+46+2*n.bin.sizeUTF8(d);s+=22;var m=new Uint8Array(s),v=0,b=[];for(var d in c){var y=c[d];b.push(v),v=n._writeHeader(m,v,d,y,0)}var I=0,N=v;for(var d in c)y=c[d],b.push(v),v=n._writeHeader(m,v,d,y,1,b[I++]);var _=v-N;return o(m,v,101010256),v+=4,l(m,v+=4,I),l(m,v+=2,I),o(m,v+=2,_),o(m,v+=4,N),v+=4,v+=2,m.buffer},n._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},n._writeHeader=function(i,a,s,o,l,c){var d=n.bin.writeUint,u=n.bin.writeUshort,p=o.file;return d(i,a,l==0?67324752:33639248),a+=4,l==1&&(a+=2),u(i,a,20),u(i,a+=2,0),u(i,a+=2,o.cpr?8:0),d(i,a+=2,0),d(i,a+=4,o.crc),d(i,a+=4,p.length),d(i,a+=4,o.usize),u(i,a+=4,n.bin.sizeUTF8(s)),u(i,a+=2,0),a+=2,l==1&&(a+=2,a+=2,d(i,a+=6,c),a+=4),a+=n.bin.writeUTF8(i,a,s),l==0&&(i.set(p,a),a+=p.length),a},n.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var s=a,o=0;o<8;o++)1&s?s=3988292384^s>>>1:s>>>=1;i[a]=s}return i}(),update:function(i,a,s,o){for(var l=0;l<o;l++)i=n.crc.table[255&(i^a[s+l])]^i>>>8;return i},crc:function(i,a,s){return 4294967295^n.crc.update(4294967295,i,a,s)}},n.adler=function(i,a,s){for(var o=1,l=0,c=a,d=a+s;c<d;){for(var u=Math.min(c+5552,d);c<u;)l+=o+=i[c++];o%=65521,l%=65521}return l<<16|o},n.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255,i[a+2]=s>>16&255,i[a+3]=s>>24&255},readASCII:function(i,a,s){for(var o="",l=0;l<s;l++)o+=String.fromCharCode(i[a+l]);return o},writeASCII:function(i,a,s){for(var o=0;o<s.length;o++)i[a+o]=s.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,s){for(var o,l="",c=0;c<s;c++)l+="%"+n.bin.pad(i[a+c].toString(16));try{o=decodeURIComponent(l)}catch{return n.bin.readASCII(i,a,s)}return o},writeUTF8:function(i,a,s){for(var o=s.length,l=0,c=0;c<o;c++){var d=s.charCodeAt(c);if((4294967168&d)==0)i[a+l]=d,l++;else if((4294965248&d)==0)i[a+l]=192|d>>6,i[a+l+1]=128|d>>0&63,l+=2;else if((4294901760&d)==0)i[a+l]=224|d>>12,i[a+l+1]=128|d>>6&63,i[a+l+2]=128|d>>0&63,l+=3;else{if((4292870144&d)!=0)throw"e";i[a+l]=240|d>>18,i[a+l+1]=128|d>>12&63,i[a+l+2]=128|d>>6&63,i[a+l+3]=128|d>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var a=i.length,s=0,o=0;o<a;o++){var l=i.charCodeAt(o);if((4294967168&l)==0)s++;else if((4294965248&l)==0)s+=2;else if((4294901760&l)==0)s+=3;else{if((4292870144&l)!=0)throw"e";s+=4}}return s}},n.F={},n.F.deflateRaw=function(i,a,s,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],c=n.F.U,d=n.F._goodIndex;n.F._hash;var u=n.F._putsE,p=0,h=s<<3,m=0,v=i.length;if(o==0){for(;p<v;)u(a,h,p+(k=Math.min(65535,v-p))==v?1:0),h=n.F._copyExact(i,p,k,a,h+8),p+=k;return h>>>3}var b=c.lits,y=c.strt,I=c.prev,N=0,_=0,F=0,R=0,U=0,j=0;for(v>2&&(y[j=n.F._hash(i,0)]=0),p=0;p<v;p++){if(U=j,p+1<v-2){j=n.F._hash(i,p+1);var E=p+1&32767;I[E]=y[j],y[j]=E}if(m<=p){(N>14e3||_>26697)&&v-p>100&&(m<p&&(b[N]=p-m,N+=2,m=p),h=n.F._writeBlock(p==v-1||m==v?1:0,b,N,R,i,F,p-F,a,h),N=_=R=0,F=p);var B=0;p<v-2&&(B=n.F._bestMatch(i,p,I,U,Math.min(l[2],v-p),l[3]));var k=B>>>16,S=65535&B;if(B!=0){S=65535&B;var D=d(k=B>>>16,c.of0);c.lhst[257+D]++;var w=d(S,c.df0);c.dhst[w]++,R+=c.exb[D]+c.dxb[w],b[N]=k<<23|p-m,b[N+1]=S<<16|D<<8|w,N+=2,m=p+k}else c.lhst[i[p]]++;_++}}for(F==p&&i.length!=0||(m<p&&(b[N]=p-m,N+=2,m=p),h=n.F._writeBlock(1,b,N,R,i,F,p-F,a,h),N=0,_=0,N=_=R=0,F=p);(7&h)!=0;)h++;return h>>>3},n.F._bestMatch=function(i,a,s,o,l,c){var d=32767&a,u=s[d],p=d-u+32768&32767;if(u==d||o!=n.F._hash(i,a-p))return 0;for(var h=0,m=0,v=Math.min(32767,a);p<=v&&--c!=0&&u!=d;){if(h==0||i[a+h]==i[a+h-p]){var b=n.F._howLong(i,a,p);if(b>h){if(m=p,(h=b)>=l)break;p+2<b&&(b=p+2);for(var y=0,I=0;I<b-2;I++){var N=a-p+I+32768&32767,_=N-s[N]+32768&32767;_>y&&(y=_,u=N)}}}p+=(d=u)-(u=s[d])+32768&32767}return h<<16|m},n.F._howLong=function(i,a,s){if(i[a]!=i[a-s]||i[a+1]!=i[a+1-s]||i[a+2]!=i[a+2-s])return 0;var o=a,l=Math.min(i.length,a+258);for(a+=3;a<l&&i[a]==i[a-s];)a++;return a-o},n.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(i,a,s,o,l,c,d,u,p){var h,m,v,b,y,I,N,_,F,R=n.F.U,U=n.F._putsF,j=n.F._putsE;R.lhst[256]++,m=(h=n.F.getTrees())[0],v=h[1],b=h[2],y=h[3],I=h[4],N=h[5],_=h[6],F=h[7];var E=32+((p+3&7)==0?0:8-(p+3&7))+(d<<3),B=o+n.F.contSize(R.fltree,R.lhst)+n.F.contSize(R.fdtree,R.dhst),k=o+n.F.contSize(R.ltree,R.lhst)+n.F.contSize(R.dtree,R.dhst);k+=14+3*N+n.F.contSize(R.itree,R.ihst)+(2*R.ihst[16]+3*R.ihst[17]+7*R.ihst[18]);for(var S=0;S<286;S++)R.lhst[S]=0;for(S=0;S<30;S++)R.dhst[S]=0;for(S=0;S<19;S++)R.ihst[S]=0;var D=E<B&&E<k?0:B<k?1:2;if(U(u,p,i),U(u,p+1,D),p+=3,D==0){for(;(7&p)!=0;)p++;p=n.F._copyExact(l,c,d,u,p)}else{var w,M;if(D==1&&(w=R.fltree,M=R.fdtree),D==2){n.F.makeCodes(R.ltree,m),n.F.revCodes(R.ltree,m),n.F.makeCodes(R.dtree,v),n.F.revCodes(R.dtree,v),n.F.makeCodes(R.itree,b),n.F.revCodes(R.itree,b),w=R.ltree,M=R.dtree,j(u,p,y-257),j(u,p+=5,I-1),j(u,p+=5,N-4),p+=4;for(var O=0;O<N;O++)j(u,p+3*O,R.itree[1+(R.ordr[O]<<1)]);p+=3*N,p=n.F._codeTiny(_,R.itree,u,p),p=n.F._codeTiny(F,R.itree,u,p)}for(var L=c,X=0;X<s;X+=2){for(var H=a[X],ee=H>>>23,K=L+(8388607&H);L<K;)p=n.F._writeLit(l[L++],w,u,p);if(ee!=0){var T=a[X+1],z=T>>16,W=T>>8&255,G=255&T;j(u,p=n.F._writeLit(257+W,w,u,p),ee-R.of0[W]),p+=R.exb[W],U(u,p=n.F._writeLit(G,M,u,p),z-R.df0[G]),p+=R.dxb[G],L+=ee}}p=n.F._writeLit(256,w,u,p)}return p},n.F._copyExact=function(i,a,s,o,l){var c=l>>>3;return o[c]=s,o[c+1]=s>>>8,o[c+2]=255-o[c],o[c+3]=255-o[c+1],c+=4,o.set(new Uint8Array(i.buffer,a,s),c),l+(s+4<<3)},n.F.getTrees=function(){for(var i=n.F.U,a=n.F._hufTree(i.lhst,i.ltree,15),s=n.F._hufTree(i.dhst,i.dtree,15),o=[],l=n.F._lenCodes(i.ltree,o),c=[],d=n.F._lenCodes(i.dtree,c),u=0;u<o.length;u+=2)i.ihst[o[u]]++;for(u=0;u<c.length;u+=2)i.ihst[c[u]]++;for(var p=n.F._hufTree(i.ihst,i.itree,7),h=19;h>4&&i.itree[1+(i.ordr[h-1]<<1)]==0;)h--;return[a,s,p,l,d,h,o,c]},n.F.getSecond=function(i){for(var a=[],s=0;s<i.length;s+=2)a.push(i[s+1]);return a},n.F.nonZero=function(i){for(var a="",s=0;s<i.length;s+=2)i[s+1]!=0&&(a+=(s>>1)+",");return a},n.F.contSize=function(i,a){for(var s=0,o=0;o<a.length;o++)s+=a[o]*i[1+(o<<1)];return s},n.F._codeTiny=function(i,a,s,o){for(var l=0;l<i.length;l+=2){var c=i[l],d=i[l+1];o=n.F._writeLit(c,a,s,o);var u=c==16?2:c==17?3:7;c>15&&(n.F._putsE(s,o,d,u),o+=u)}return o},n.F._lenCodes=function(i,a){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var o=0;o<s;o+=2){var l=i[o+1],c=o+3<s?i[o+3]:-1,d=o+5<s?i[o+5]:-1,u=o==0?-1:i[o-1];if(l==0&&c==l&&d==l){for(var p=o+5;p+2<s&&i[p+2]==l;)p+=2;(h=Math.min(p+1-o>>>1,138))<11?a.push(17,h-3):a.push(18,h-11),o+=2*h-2}else if(l==u&&c==l&&d==l){for(p=o+5;p+2<s&&i[p+2]==l;)p+=2;var h=Math.min(p+1-o>>>1,6);a.push(16,h-3),o+=2*h-2}else a.push(l,0)}return s>>>1},n.F._hufTree=function(i,a,s){var o=[],l=i.length,c=a.length,d=0;for(d=0;d<c;d+=2)a[d]=0,a[d+1]=0;for(d=0;d<l;d++)i[d]!=0&&o.push({lit:d,f:i[d]});var u=o.length,p=o.slice(0);if(u==0)return 0;if(u==1){var h=o[0].lit;return p=h==0?1:0,a[1+(h<<1)]=1,a[1+(p<<1)]=1,1}o.sort(function(_,F){return _.f-F.f});var m=o[0],v=o[1],b=0,y=1,I=2;for(o[0]={lit:-1,f:m.f+v.f,l:m,r:v,d:0};y!=u-1;)m=b!=y&&(I==u||o[b].f<o[I].f)?o[b++]:o[I++],v=b!=y&&(I==u||o[b].f<o[I].f)?o[b++]:o[I++],o[y++]={lit:-1,f:m.f+v.f,l:m,r:v};var N=n.F.setDepth(o[y-1],0);for(N>s&&(n.F.restrictDepth(p,s,N),N=s),d=0;d<u;d++)a[1+(p[d].lit<<1)]=p[d].d;return N},n.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(n.F.setDepth(i.l,a+1),n.F.setDepth(i.r,a+1))},n.F.restrictDepth=function(i,a,s){var o=0,l=1<<s-a,c=0;for(i.sort(function(u,p){return p.d==u.d?u.f-p.f:p.d-u.d}),o=0;o<i.length&&i[o].d>a;o++){var d=i[o].d;i[o].d=a,c+=l-(1<<s-d)}for(c>>>=s-a;c>0;)(d=i[o].d)<a?(i[o].d++,c-=1<<a-d-1):o++;for(;o>=0;o--)i[o].d==a&&c<0&&(i[o].d--,c++);c!=0&&console.log("debt left")},n.F._goodIndex=function(i,a){var s=0;return a[16|s]<=i&&(s|=16),a[8|s]<=i&&(s|=8),a[4|s]<=i&&(s|=4),a[2|s]<=i&&(s|=2),a[1|s]<=i&&(s|=1),s},n.F._writeLit=function(i,a,s,o){return n.F._putsF(s,o,a[i<<1]),o+a[1+(i<<1)]},n.F.inflate=function(i,a){var s=Uint8Array;if(i[0]==3&&i[1]==0)return a||new s(0);var o=n.F,l=o._bitsF,c=o._bitsE,d=o._decodeTiny,u=o.makeCodes,p=o.codes2map,h=o._get17,m=o.U,v=a==null;v&&(a=new s(i.length>>>2<<3));for(var b,y,I=0,N=0,_=0,F=0,R=0,U=0,j=0,E=0,B=0;I==0;)if(I=l(i,B,1),N=l(i,B+1,2),B+=3,N!=0){if(v&&(a=n.F._check(a,E+(1<<17))),N==1&&(b=m.flmap,y=m.fdmap,U=511,j=31),N==2){_=c(i,B,5)+257,F=c(i,B+5,5)+1,R=c(i,B+10,4)+4,B+=14;for(var k=0;k<38;k+=2)m.itree[k]=0,m.itree[k+1]=0;var S=1;for(k=0;k<R;k++){var D=c(i,B+3*k,3);m.itree[1+(m.ordr[k]<<1)]=D,D>S&&(S=D)}B+=3*R,u(m.itree,S),p(m.itree,S,m.imap),b=m.lmap,y=m.dmap,B=d(m.imap,(1<<S)-1,_+F,i,B,m.ttree);var w=o._copyOut(m.ttree,0,_,m.ltree);U=(1<<w)-1;var M=o._copyOut(m.ttree,_,F,m.dtree);j=(1<<M)-1,u(m.ltree,w),p(m.ltree,w,b),u(m.dtree,M),p(m.dtree,M,y)}for(;;){var O=b[h(i,B)&U];B+=15&O;var L=O>>>4;if(!(L>>>8))a[E++]=L;else{if(L==256)break;var X=E+L-254;if(L>264){var H=m.ldef[L-257];X=E+(H>>>3)+c(i,B,7&H),B+=7&H}var ee=y[h(i,B)&j];B+=15&ee;var K=ee>>>4,T=m.ddef[K],z=(T>>>4)+l(i,B,15&T);for(B+=15&T,v&&(a=n.F._check(a,E+(1<<17)));E<X;)a[E]=a[E++-z],a[E]=a[E++-z],a[E]=a[E++-z],a[E]=a[E++-z];E=X}}}else{(7&B)!=0&&(B+=8-(7&B));var W=4+(B>>>3),G=i[W-4]|i[W-3]<<8;v&&(a=n.F._check(a,E+G)),a.set(new s(i.buffer,i.byteOffset+W,G),E),B=W+G<<3,E+=G}return a.length==E?a:a.slice(0,E)},n.F._check=function(i,a){var s=i.length;if(a<=s)return i;var o=new Uint8Array(Math.max(s<<1,a));return o.set(i,0),o},n.F._decodeTiny=function(i,a,s,o,l,c){for(var d=n.F._bitsE,u=n.F._get17,p=0;p<s;){var h=i[u(o,l)&a];l+=15&h;var m=h>>>4;if(m<=15)c[p]=m,p++;else{var v=0,b=0;m==16?(b=3+d(o,l,2),l+=2,v=c[p-1]):m==17?(b=3+d(o,l,3),l+=3):m==18&&(b=11+d(o,l,7),l+=7);for(var y=p+b;p<y;)c[p]=v,p++}}return l},n.F._copyOut=function(i,a,s,o){for(var l=0,c=0,d=o.length>>>1;c<s;){var u=i[c+a];o[c<<1]=0,o[1+(c<<1)]=u,u>l&&(l=u),c++}for(;c<d;)o[c<<1]=0,o[1+(c<<1)]=0,c++;return l},n.F.makeCodes=function(i,a){for(var s,o,l,c,d=n.F.U,u=i.length,p=d.bl_count,h=0;h<=a;h++)p[h]=0;for(h=1;h<u;h+=2)p[i[h]]++;var m=d.next_code;for(s=0,p[0]=0,o=1;o<=a;o++)s=s+p[o-1]<<1,m[o]=s;for(l=0;l<u;l+=2)(c=i[l+1])!=0&&(i[l]=m[c],m[c]++)},n.F.codes2map=function(i,a,s){for(var o=i.length,l=n.F.U.rev15,c=0;c<o;c+=2)if(i[c+1]!=0)for(var d=c>>1,u=i[c+1],p=d<<4|u,h=a-u,m=i[c]<<h,v=m+(1<<h);m!=v;)s[l[m]>>>15-a]=p,m++},n.F.revCodes=function(i,a){for(var s=n.F.U.rev15,o=15-a,l=0;l<i.length;l+=2){var c=i[l]<<a-i[l+1];i[l]=s[c]>>>o}},n.F._putsE=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8},n.F._putsF=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8,i[o+2]|=s>>>16},n.F._bitsE=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<s)-1},n.F._bitsF=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<s)-1},n.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},n.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=n.F.U,a=0;a<32768;a++){var s=a;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[a]=(s>>>16|s<<16)>>>17}function o(l,c,d){for(;c--!=0;)l.push(0,d)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),n.F.makeCodes(i.fltree,9),n.F.codes2map(i.fltree,9,i.flmap),n.F.revCodes(i.fltree,9),o(i.fdtree,32,5),n.F.makeCodes(i.fdtree,5),n.F.codes2map(i.fdtree,5,i.fdmap),n.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var ry=Jv({__proto__:null,default:oc},[oc]);const ui=function(){var r={nextZero(d,u){for(;d[u]!=0;)u++;return u},readUshort:(d,u)=>d[u]<<8|d[u+1],writeUshort(d,u,p){d[u]=p>>8&255,d[u+1]=255&p},readUint:(d,u)=>16777216*d[u]+(d[u+1]<<16|d[u+2]<<8|d[u+3]),writeUint(d,u,p){d[u]=p>>24&255,d[u+1]=p>>16&255,d[u+2]=p>>8&255,d[u+3]=255&p},readASCII(d,u,p){let h="";for(let m=0;m<p;m++)h+=String.fromCharCode(d[u+m]);return h},writeASCII(d,u,p){for(let h=0;h<p.length;h++)d[u+h]=p.charCodeAt(h)},readBytes(d,u,p){const h=[];for(let m=0;m<p;m++)h.push(d[u+m]);return h},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,u,p){let h,m="";for(let v=0;v<p;v++)m+=`%${r.pad(d[u+v].toString(16))}`;try{h=decodeURIComponent(m)}catch{return r.readASCII(d,u,p)}return h}};function e(d,u,p,h){const m=u*p,v=a(h),b=Math.ceil(u*v/8),y=new Uint8Array(4*m),I=new Uint32Array(y.buffer),{ctype:N}=h,{depth:_}=h,F=r.readUshort;if(N==6){const H=m<<2;if(_==8)for(var R=0;R<H;R+=4)y[R]=d[R],y[R+1]=d[R+1],y[R+2]=d[R+2],y[R+3]=d[R+3];if(_==16)for(R=0;R<H;R++)y[R]=d[R<<1]}else if(N==2){const H=h.tabs.tRNS;if(H==null){if(_==8)for(R=0;R<m;R++){var U=3*R;I[R]=255<<24|d[U+2]<<16|d[U+1]<<8|d[U]}if(_==16)for(R=0;R<m;R++)U=6*R,I[R]=255<<24|d[U+4]<<16|d[U+2]<<8|d[U]}else{var j=H[0];const ee=H[1],K=H[2];if(_==8)for(R=0;R<m;R++){var E=R<<2;U=3*R,I[R]=255<<24|d[U+2]<<16|d[U+1]<<8|d[U],d[U]==j&&d[U+1]==ee&&d[U+2]==K&&(y[E+3]=0)}if(_==16)for(R=0;R<m;R++)E=R<<2,U=6*R,I[R]=255<<24|d[U+4]<<16|d[U+2]<<8|d[U],F(d,U)==j&&F(d,U+2)==ee&&F(d,U+4)==K&&(y[E+3]=0)}}else if(N==3){const H=h.tabs.PLTE,ee=h.tabs.tRNS,K=ee?ee.length:0;if(_==1)for(var B=0;B<p;B++){var k=B*b,S=B*u;for(R=0;R<u;R++){E=S+R<<2;var D=3*(w=d[k+(R>>3)]>>7-((7&R)<<0)&1);y[E]=H[D],y[E+1]=H[D+1],y[E+2]=H[D+2],y[E+3]=w<K?ee[w]:255}}if(_==2)for(B=0;B<p;B++)for(k=B*b,S=B*u,R=0;R<u;R++)E=S+R<<2,D=3*(w=d[k+(R>>2)]>>6-((3&R)<<1)&3),y[E]=H[D],y[E+1]=H[D+1],y[E+2]=H[D+2],y[E+3]=w<K?ee[w]:255;if(_==4)for(B=0;B<p;B++)for(k=B*b,S=B*u,R=0;R<u;R++)E=S+R<<2,D=3*(w=d[k+(R>>1)]>>4-((1&R)<<2)&15),y[E]=H[D],y[E+1]=H[D+1],y[E+2]=H[D+2],y[E+3]=w<K?ee[w]:255;if(_==8)for(R=0;R<m;R++){var w;E=R<<2,D=3*(w=d[R]),y[E]=H[D],y[E+1]=H[D+1],y[E+2]=H[D+2],y[E+3]=w<K?ee[w]:255}}else if(N==4){if(_==8)for(R=0;R<m;R++){E=R<<2;var M=d[O=R<<1];y[E]=M,y[E+1]=M,y[E+2]=M,y[E+3]=d[O+1]}if(_==16)for(R=0;R<m;R++){var O;E=R<<2,M=d[O=R<<2],y[E]=M,y[E+1]=M,y[E+2]=M,y[E+3]=d[O+2]}}else if(N==0)for(j=h.tabs.tRNS?h.tabs.tRNS:-1,B=0;B<p;B++){const H=B*b,ee=B*u;if(_==1)for(var L=0;L<u;L++){var X=(M=255*(d[H+(L>>>3)]>>>7-(7&L)&1))==255*j?0:255;I[ee+L]=X<<24|M<<16|M<<8|M}else if(_==2)for(L=0;L<u;L++)X=(M=85*(d[H+(L>>>2)]>>>6-((3&L)<<1)&3))==85*j?0:255,I[ee+L]=X<<24|M<<16|M<<8|M;else if(_==4)for(L=0;L<u;L++)X=(M=17*(d[H+(L>>>1)]>>>4-((1&L)<<2)&15))==17*j?0:255,I[ee+L]=X<<24|M<<16|M<<8|M;else if(_==8)for(L=0;L<u;L++)X=(M=d[H+L])==j?0:255,I[ee+L]=X<<24|M<<16|M<<8|M;else if(_==16)for(L=0;L<u;L++)M=d[H+(L<<1)],X=F(d,H+(L<<1))==j?0:255,I[ee+L]=X<<24|M<<16|M<<8|M}return y}function t(d,u,p,h){const m=a(d),v=Math.ceil(p*m/8),b=new Uint8Array((v+1+d.interlace)*h);return u=d.tabs.CgBI?i(u,b):n(u,b),d.interlace==0?u=s(u,d,0,p,h):d.interlace==1&&(u=function(I,N){const _=N.width,F=N.height,R=a(N),U=R>>3,j=Math.ceil(_*R/8),E=new Uint8Array(F*j);let B=0;const k=[0,0,4,0,2,0,1],S=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],w=[8,8,4,4,2,2,1];let M=0;for(;M<7;){const L=D[M],X=w[M];let H=0,ee=0,K=k[M];for(;K<F;)K+=L,ee++;let T=S[M];for(;T<_;)T+=X,H++;const z=Math.ceil(H*R/8);s(I,N,B,H,ee);let W=0,G=k[M];for(;G<F;){let oe=S[M],re=B+W*z<<3;for(;oe<_;){var O;if(R==1&&(O=(O=I[re>>3])>>7-(7&re)&1,E[G*j+(oe>>3)]|=O<<7-((7&oe)<<0)),R==2&&(O=(O=I[re>>3])>>6-(7&re)&3,E[G*j+(oe>>2)]|=O<<6-((3&oe)<<1)),R==4&&(O=(O=I[re>>3])>>4-(7&re)&15,E[G*j+(oe>>1)]|=O<<4-((1&oe)<<2)),R>=8){const le=G*j+oe*U;for(let de=0;de<U;de++)E[le+de]=I[(re>>3)+de]}re+=R,oe+=X}W++,G+=L}H*ee!=0&&(B+=ee*(1+z)),M+=1}return E}(u,d)),u}function n(d,u){return i(new Uint8Array(d.buffer,2,d.length-6),u)}var i=function(){const d={H:{}};return d.H.N=function(u,p){const h=Uint8Array;let m,v,b=0,y=0,I=0,N=0,_=0,F=0,R=0,U=0,j=0;if(u[0]==3&&u[1]==0)return p||new h(0);const E=d.H,B=E.b,k=E.e,S=E.R,D=E.n,w=E.A,M=E.Z,O=E.m,L=p==null;for(L&&(p=new h(u.length>>>2<<5));b==0;)if(b=B(u,j,1),y=B(u,j+1,2),j+=3,y!=0){if(L&&(p=d.H.W(p,U+(1<<17))),y==1&&(m=O.J,v=O.h,F=511,R=31),y==2){I=k(u,j,5)+257,N=k(u,j+5,5)+1,_=k(u,j+10,4)+4,j+=14;let H=1;for(var X=0;X<38;X+=2)O.Q[X]=0,O.Q[X+1]=0;for(X=0;X<_;X++){const T=k(u,j+3*X,3);O.Q[1+(O.X[X]<<1)]=T,T>H&&(H=T)}j+=3*_,D(O.Q,H),w(O.Q,H,O.u),m=O.w,v=O.d,j=S(O.u,(1<<H)-1,I+N,u,j,O.v);const ee=E.V(O.v,0,I,O.C);F=(1<<ee)-1;const K=E.V(O.v,I,N,O.D);R=(1<<K)-1,D(O.C,ee),w(O.C,ee,m),D(O.D,K),w(O.D,K,v)}for(;;){const H=m[M(u,j)&F];j+=15&H;const ee=H>>>4;if(!(ee>>>8))p[U++]=ee;else{if(ee==256)break;{let K=U+ee-254;if(ee>264){const oe=O.q[ee-257];K=U+(oe>>>3)+k(u,j,7&oe),j+=7&oe}const T=v[M(u,j)&R];j+=15&T;const z=T>>>4,W=O.c[z],G=(W>>>4)+B(u,j,15&W);for(j+=15&W;U<K;)p[U]=p[U++-G],p[U]=p[U++-G],p[U]=p[U++-G],p[U]=p[U++-G];U=K}}}}else{(7&j)!=0&&(j+=8-(7&j));const H=4+(j>>>3),ee=u[H-4]|u[H-3]<<8;L&&(p=d.H.W(p,U+ee)),p.set(new h(u.buffer,u.byteOffset+H,ee),U),j=H+ee<<3,U+=ee}return p.length==U?p:p.slice(0,U)},d.H.W=function(u,p){const h=u.length;if(p<=h)return u;const m=new Uint8Array(h<<1);return m.set(u,0),m},d.H.R=function(u,p,h,m,v,b){const y=d.H.e,I=d.H.Z;let N=0;for(;N<h;){const _=u[I(m,v)&p];v+=15&_;const F=_>>>4;if(F<=15)b[N]=F,N++;else{let R=0,U=0;F==16?(U=3+y(m,v,2),v+=2,R=b[N-1]):F==17?(U=3+y(m,v,3),v+=3):F==18&&(U=11+y(m,v,7),v+=7);const j=N+U;for(;N<j;)b[N]=R,N++}}return v},d.H.V=function(u,p,h,m){let v=0,b=0;const y=m.length>>>1;for(;b<h;){const I=u[b+p];m[b<<1]=0,m[1+(b<<1)]=I,I>v&&(v=I),b++}for(;b<y;)m[b<<1]=0,m[1+(b<<1)]=0,b++;return v},d.H.n=function(u,p){const h=d.H.m,m=u.length;let v,b,y,I;const N=h.j;for(var _=0;_<=p;_++)N[_]=0;for(_=1;_<m;_+=2)N[u[_]]++;const F=h.K;for(v=0,N[0]=0,b=1;b<=p;b++)v=v+N[b-1]<<1,F[b]=v;for(y=0;y<m;y+=2)I=u[y+1],I!=0&&(u[y]=F[I],F[I]++)},d.H.A=function(u,p,h){const m=u.length,v=d.H.m.r;for(let b=0;b<m;b+=2)if(u[b+1]!=0){const y=b>>1,I=u[b+1],N=y<<4|I,_=p-I;let F=u[b]<<_;const R=F+(1<<_);for(;F!=R;)h[v[F]>>>15-p]=N,F++}},d.H.l=function(u,p){const h=d.H.m.r,m=15-p;for(let v=0;v<u.length;v+=2){const b=u[v]<<p-u[v+1];u[v]=h[b]>>>m}},d.H.M=function(u,p,h){h<<=7&p;const m=p>>>3;u[m]|=h,u[m+1]|=h>>>8},d.H.I=function(u,p,h){h<<=7&p;const m=p>>>3;u[m]|=h,u[m+1]|=h>>>8,u[m+2]|=h>>>16},d.H.e=function(u,p,h){return(u[p>>>3]|u[1+(p>>>3)]<<8)>>>(7&p)&(1<<h)-1},d.H.b=function(u,p,h){return(u[p>>>3]|u[1+(p>>>3)]<<8|u[2+(p>>>3)]<<16)>>>(7&p)&(1<<h)-1},d.H.Z=function(u,p){return(u[p>>>3]|u[1+(p>>>3)]<<8|u[2+(p>>>3)]<<16)>>>(7&p)},d.H.i=function(u,p){return(u[p>>>3]|u[1+(p>>>3)]<<8|u[2+(p>>>3)]<<16|u[3+(p>>>3)]<<24)>>>(7&p)},d.H.m=function(){const u=Uint16Array,p=Uint32Array;return{K:new u(16),j:new u(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new u(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new u(512),_:[],h:new u(32),$:[],w:new u(32768),C:[],v:[],d:new u(32768),D:[],u:new u(512),Q:[],r:new u(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new u(65536),g:new u(32768)}}(),function(){const u=d.H.m;for(var p=0;p<32768;p++){let m=p;m=(2863311530&m)>>>1|(1431655765&m)<<1,m=(3435973836&m)>>>2|(858993459&m)<<2,m=(4042322160&m)>>>4|(252645135&m)<<4,m=(4278255360&m)>>>8|(16711935&m)<<8,u.r[p]=(m>>>16|m<<16)>>>17}function h(m,v,b){for(;v--!=0;)m.push(0,b)}for(p=0;p<32;p++)u.q[p]=u.S[p]<<3|u.T[p],u.c[p]=u.p[p]<<4|u.z[p];h(u._,144,8),h(u._,112,9),h(u._,24,7),h(u._,8,8),d.H.n(u._,9),d.H.A(u._,9,u.J),d.H.l(u._,9),h(u.$,32,5),d.H.n(u.$,5),d.H.A(u.$,5,u.h),d.H.l(u.$,5),h(u.Q,19,0),h(u.C,286,0),h(u.D,30,0),h(u.v,320,0)}(),d.H.N}();function a(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function s(d,u,p,h,m){let v=a(u);const b=Math.ceil(h*v/8);let y,I;v=Math.ceil(v/8);let N=d[p],_=0;if(N>1&&(d[p]=[0,0,1][N-2]),N==3)for(_=v;_<b;_++)d[_+1]=d[_+1]+(d[_+1-v]>>>1)&255;for(let F=0;F<m;F++)if(y=p+F*b,I=y+F+1,N=d[I-1],_=0,N==0)for(;_<b;_++)d[y+_]=d[I+_];else if(N==1){for(;_<v;_++)d[y+_]=d[I+_];for(;_<b;_++)d[y+_]=d[I+_]+d[y+_-v]}else if(N==2)for(;_<b;_++)d[y+_]=d[I+_]+d[y+_-b];else if(N==3){for(;_<v;_++)d[y+_]=d[I+_]+(d[y+_-b]>>>1);for(;_<b;_++)d[y+_]=d[I+_]+(d[y+_-b]+d[y+_-v]>>>1)}else{for(;_<v;_++)d[y+_]=d[I+_]+o(0,d[y+_-b],0);for(;_<b;_++)d[y+_]=d[I+_]+o(d[y+_-v],d[y+_-b],d[y+_-v-b])}return d}function o(d,u,p){const h=d+u-p,m=h-d,v=h-u,b=h-p;return m*m<=v*v&&m*m<=b*b?d:v*v<=b*b?u:p}function l(d,u,p){p.width=r.readUint(d,u),u+=4,p.height=r.readUint(d,u),u+=4,p.depth=d[u],u++,p.ctype=d[u],u++,p.compress=d[u],u++,p.filter=d[u],u++,p.interlace=d[u],u++}function c(d,u,p,h,m,v,b,y,I){const N=Math.min(u,m),_=Math.min(p,v);let F=0,R=0;for(let M=0;M<_;M++)for(let O=0;O<N;O++)if(b>=0&&y>=0?(F=M*u+O<<2,R=(y+M)*m+b+O<<2):(F=(-y+M)*u-b+O<<2,R=M*m+O<<2),I==0)h[R]=d[F],h[R+1]=d[F+1],h[R+2]=d[F+2],h[R+3]=d[F+3];else if(I==1){var U=d[F+3]*.00392156862745098,j=d[F]*U,E=d[F+1]*U,B=d[F+2]*U,k=h[R+3]*(1/255),S=h[R]*k,D=h[R+1]*k,w=h[R+2]*k;const L=1-U,X=U+k*L,H=X==0?0:1/X;h[R+3]=255*X,h[R+0]=(j+S*L)*H,h[R+1]=(E+D*L)*H,h[R+2]=(B+w*L)*H}else if(I==2)U=d[F+3],j=d[F],E=d[F+1],B=d[F+2],k=h[R+3],S=h[R],D=h[R+1],w=h[R+2],U==k&&j==S&&E==D&&B==w?(h[R]=0,h[R+1]=0,h[R+2]=0,h[R+3]=0):(h[R]=j,h[R+1]=E,h[R+2]=B,h[R+3]=U);else if(I==3){if(U=d[F+3],j=d[F],E=d[F+1],B=d[F+2],k=h[R+3],S=h[R],D=h[R+1],w=h[R+2],U==k&&j==S&&E==D&&B==w)continue;if(U<220&&k>20)return!1}return!0}return{decode:function(u){const p=new Uint8Array(u);let h=8;const m=r,v=m.readUshort,b=m.readUint,y={tabs:{},frames:[]},I=new Uint8Array(p.length);let N,_=0,F=0;const R=[137,80,78,71,13,10,26,10];for(var U=0;U<8;U++)if(p[U]!=R[U])throw"The input is not a PNG file!";for(;h<p.length;){const M=m.readUint(p,h);h+=4;const O=m.readASCII(p,h,4);if(h+=4,O=="IHDR")l(p,h,y);else if(O=="iCCP"){for(var j=h;p[j]!=0;)j++;m.readASCII(p,h,j-h),p[j+1];const L=p.slice(j+2,h+M);let X=null;try{X=n(L)}catch{X=i(L)}y.tabs[O]=X}else if(O=="CgBI")y.tabs[O]=p.slice(h,h+4);else if(O=="IDAT"){for(U=0;U<M;U++)I[_+U]=p[h+U];_+=M}else if(O=="acTL")y.tabs[O]={num_frames:b(p,h),num_plays:b(p,h+4)},N=new Uint8Array(p.length);else if(O=="fcTL"){F!=0&&((w=y.frames[y.frames.length-1]).data=t(y,N.slice(0,F),w.rect.width,w.rect.height),F=0);const L={x:b(p,h+12),y:b(p,h+16),width:b(p,h+4),height:b(p,h+8)};let X=v(p,h+22);X=v(p,h+20)/(X==0?100:X);const H={rect:L,delay:Math.round(1e3*X),dispose:p[h+24],blend:p[h+25]};y.frames.push(H)}else if(O=="fdAT"){for(U=0;U<M-4;U++)N[F+U]=p[h+U+4];F+=M-4}else if(O=="pHYs")y.tabs[O]=[m.readUint(p,h),m.readUint(p,h+4),p[h+8]];else if(O=="cHRM")for(y.tabs[O]=[],U=0;U<8;U++)y.tabs[O].push(m.readUint(p,h+4*U));else if(O=="tEXt"||O=="zTXt"){y.tabs[O]==null&&(y.tabs[O]={});var E=m.nextZero(p,h),B=m.readASCII(p,h,E-h),k=h+M-E-1;if(O=="tEXt")D=m.readASCII(p,E+1,k);else{var S=n(p.slice(E+2,E+2+k));D=m.readUTF8(S,0,S.length)}y.tabs[O][B]=D}else if(O=="iTXt"){y.tabs[O]==null&&(y.tabs[O]={}),E=0,j=h,E=m.nextZero(p,j),B=m.readASCII(p,j,E-j);const L=p[j=E+1];var D;p[j+1],j+=2,E=m.nextZero(p,j),m.readASCII(p,j,E-j),j=E+1,E=m.nextZero(p,j),m.readUTF8(p,j,E-j),k=M-((j=E+1)-h),L==0?D=m.readUTF8(p,j,k):(S=n(p.slice(j,j+k)),D=m.readUTF8(S,0,S.length)),y.tabs[O][B]=D}else if(O=="PLTE")y.tabs[O]=m.readBytes(p,h,M);else if(O=="hIST"){const L=y.tabs.PLTE.length/3;for(y.tabs[O]=[],U=0;U<L;U++)y.tabs[O].push(v(p,h+2*U))}else if(O=="tRNS")y.ctype==3?y.tabs[O]=m.readBytes(p,h,M):y.ctype==0?y.tabs[O]=v(p,h):y.ctype==2&&(y.tabs[O]=[v(p,h),v(p,h+2),v(p,h+4)]);else if(O=="gAMA")y.tabs[O]=m.readUint(p,h)/1e5;else if(O=="sRGB")y.tabs[O]=p[h];else if(O=="bKGD")y.ctype==0||y.ctype==4?y.tabs[O]=[v(p,h)]:y.ctype==2||y.ctype==6?y.tabs[O]=[v(p,h),v(p,h+2),v(p,h+4)]:y.ctype==3&&(y.tabs[O]=p[h]);else if(O=="IEND")break;h+=M,m.readUint(p,h),h+=4}var w;return F!=0&&((w=y.frames[y.frames.length-1]).data=t(y,N.slice(0,F),w.rect.width,w.rect.height)),y.data=t(y,I,y.width,y.height),delete y.compress,delete y.interlace,delete y.filter,y},toRGBA8:function(u){const p=u.width,h=u.height;if(u.tabs.acTL==null)return[e(u.data,p,h,u).buffer];const m=[];u.frames[0].data==null&&(u.frames[0].data=u.data);const v=p*h*4,b=new Uint8Array(v),y=new Uint8Array(v),I=new Uint8Array(v);for(let _=0;_<u.frames.length;_++){const F=u.frames[_],R=F.rect.x,U=F.rect.y,j=F.rect.width,E=F.rect.height,B=e(F.data,j,E,u);if(_!=0)for(var N=0;N<v;N++)I[N]=b[N];if(F.blend==0?c(B,j,E,b,p,h,R,U,0):F.blend==1&&c(B,j,E,b,p,h,R,U,1),m.push(b.buffer.slice(0)),F.dispose!=0){if(F.dispose==1)c(y,j,E,b,p,h,R,U,0);else if(F.dispose==2)for(N=0;N<v;N++)b[N]=I[N]}}return m},_paeth:o,_copyTile:c,_bin:r}}();(function(){const{_copyTile:r}=ui,{_bin:e}=ui,t=ui._paeth;var n={table:function(){const j=new Uint32Array(256);for(let E=0;E<256;E++){let B=E;for(let k=0;k<8;k++)1&B?B=3988292384^B>>>1:B>>>=1;j[E]=B}return j}(),update(j,E,B,k){for(let S=0;S<k;S++)j=n.table[255&(j^E[B+S])]^j>>>8;return j},crc:(j,E,B)=>4294967295^n.update(4294967295,j,E,B)};function i(j,E,B,k){E[B]+=j[0]*k>>4,E[B+1]+=j[1]*k>>4,E[B+2]+=j[2]*k>>4,E[B+3]+=j[3]*k>>4}function a(j){return Math.max(0,Math.min(255,j))}function s(j,E){const B=j[0]-E[0],k=j[1]-E[1],S=j[2]-E[2],D=j[3]-E[3];return B*B+k*k+S*S+D*D}function o(j,E,B,k,S,D,w){w==null&&(w=1);const M=k.length,O=[];for(var L=0;L<M;L++){const G=k[L];O.push([G>>>0&255,G>>>8&255,G>>>16&255,G>>>24&255])}for(L=0;L<M;L++){let G=4294967295;for(var X=0,H=0;H<M;H++){var ee=s(O[L],O[H]);H!=L&&ee<G&&(G=ee,X=H)}}const K=new Uint32Array(S.buffer),T=new Int16Array(E*B*4),z=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(L=0;L<z.length;L++)z[L]=255*((z[L]+.5)/16-.5);for(let G=0;G<B;G++)for(let oe=0;oe<E;oe++){var W;L=4*(G*E+oe),w!=2?W=[a(j[L]+T[L]),a(j[L+1]+T[L+1]),a(j[L+2]+T[L+2]),a(j[L+3]+T[L+3])]:(ee=z[4*(3&G)+(3&oe)],W=[a(j[L]+ee),a(j[L+1]+ee),a(j[L+2]+ee),a(j[L+3]+ee)]),X=0;let re=16777215;for(H=0;H<M;H++){const fe=s(W,O[H]);fe<re&&(re=fe,X=H)}const le=O[X],de=[W[0]-le[0],W[1]-le[1],W[2]-le[2],W[3]-le[3]];w==1&&(oe!=E-1&&i(de,T,L+4,7),G!=B-1&&(oe!=0&&i(de,T,L+4*E-4,3),i(de,T,L+4*E,5),oe!=E-1&&i(de,T,L+4*E+4,1))),D[L>>2]=X,K[L>>2]=k[X]}}function l(j,E,B,k,S){S==null&&(S={});const{crc:D}=n,w=e.writeUint,M=e.writeUshort,O=e.writeASCII;let L=8;const X=j.frames.length>1;let H,ee=!1,K=33+(X?20:0);if(S.sRGB!=null&&(K+=13),S.pHYs!=null&&(K+=21),S.iCCP!=null&&(H=pako.deflate(S.iCCP),K+=21+H.length+4),j.ctype==3){for(var T=j.plte.length,z=0;z<T;z++)j.plte[z]>>>24!=255&&(ee=!0);K+=8+3*T+4+(ee?8+1*T+4:0)}for(var W=0;W<j.frames.length;W++)X&&(K+=38),K+=(le=j.frames[W]).cimg.length+12,W!=0&&(K+=4);K+=12;const G=new Uint8Array(K),oe=[137,80,78,71,13,10,26,10];for(z=0;z<8;z++)G[z]=oe[z];if(w(G,L,13),L+=4,O(G,L,"IHDR"),L+=4,w(G,L,E),L+=4,w(G,L,B),L+=4,G[L]=j.depth,L++,G[L]=j.ctype,L++,G[L]=0,L++,G[L]=0,L++,G[L]=0,L++,w(G,L,D(G,L-17,17)),L+=4,S.sRGB!=null&&(w(G,L,1),L+=4,O(G,L,"sRGB"),L+=4,G[L]=S.sRGB,L++,w(G,L,D(G,L-5,5)),L+=4),S.iCCP!=null){const de=13+H.length;w(G,L,de),L+=4,O(G,L,"iCCP"),L+=4,O(G,L,"ICC profile"),L+=11,L+=2,G.set(H,L),L+=H.length,w(G,L,D(G,L-(de+4),de+4)),L+=4}if(S.pHYs!=null&&(w(G,L,9),L+=4,O(G,L,"pHYs"),L+=4,w(G,L,S.pHYs[0]),L+=4,w(G,L,S.pHYs[1]),L+=4,G[L]=S.pHYs[2],L++,w(G,L,D(G,L-13,13)),L+=4),X&&(w(G,L,8),L+=4,O(G,L,"acTL"),L+=4,w(G,L,j.frames.length),L+=4,w(G,L,S.loop!=null?S.loop:0),L+=4,w(G,L,D(G,L-12,12)),L+=4),j.ctype==3){for(w(G,L,3*(T=j.plte.length)),L+=4,O(G,L,"PLTE"),L+=4,z=0;z<T;z++){const de=3*z,fe=j.plte[z],be=255&fe,_e=fe>>>8&255,Te=fe>>>16&255;G[L+de+0]=be,G[L+de+1]=_e,G[L+de+2]=Te}if(L+=3*T,w(G,L,D(G,L-3*T-4,3*T+4)),L+=4,ee){for(w(G,L,T),L+=4,O(G,L,"tRNS"),L+=4,z=0;z<T;z++)G[L+z]=j.plte[z]>>>24&255;L+=T,w(G,L,D(G,L-T-4,T+4)),L+=4}}let re=0;for(W=0;W<j.frames.length;W++){var le=j.frames[W];X&&(w(G,L,26),L+=4,O(G,L,"fcTL"),L+=4,w(G,L,re++),L+=4,w(G,L,le.rect.width),L+=4,w(G,L,le.rect.height),L+=4,w(G,L,le.rect.x),L+=4,w(G,L,le.rect.y),L+=4,M(G,L,k[W]),L+=2,M(G,L,1e3),L+=2,G[L]=le.dispose,L++,G[L]=le.blend,L++,w(G,L,D(G,L-30,30)),L+=4);const de=le.cimg;w(G,L,(T=de.length)+(W==0?0:4)),L+=4;const fe=L;O(G,L,W==0?"IDAT":"fdAT"),L+=4,W!=0&&(w(G,L,re++),L+=4),G.set(de,L),L+=T,w(G,L,D(G,fe,L-fe)),L+=4}return w(G,L,0),L+=4,O(G,L,"IEND"),L+=4,w(G,L,D(G,L-4,4)),L+=4,G.buffer}function c(j,E,B){for(let k=0;k<j.frames.length;k++){const S=j.frames[k];S.rect.width;const D=S.rect.height,w=new Uint8Array(D*S.bpl+D);S.cimg=h(S.img,D,S.bpp,S.bpl,w,E,B)}}function d(j,E,B,k,S){const D=S[0],w=S[1],M=S[2],O=S[3],L=S[4],X=S[5];let H=6,ee=8,K=255;for(var T=0;T<j.length;T++){const je=new Uint8Array(j[T]);for(var z=je.length,W=0;W<z;W+=4)K&=je[W+3]}const G=K!=255,oe=function(He,Pe,he,Le,Ee,Be){const Me=[];for(var Oe=0;Oe<He.length;Oe++){const Ve=new Uint8Array(He[Oe]),We=new Uint32Array(Ve.buffer);var rt;let Dt=0,yt=0,ct=Pe,ut=he,Kt=Le?1:0;if(Oe!=0){const at=Be||Le||Oe==1||Me[Oe-2].dispose!=0?1:2;let Ut=0,st=1e9;for(let ft=0;ft<at;ft++){var Qe=new Uint8Array(He[Oe-1-ft]);const rr=new Uint32Array(He[Oe-1-ft]);let ht=Pe,Je=he,Nt=-1,Dn=-1;for(let Xr=0;Xr<he;Xr++)for(let Ur=0;Ur<Pe;Ur++)We[it=Xr*Pe+Ur]!=rr[it]&&(Ur<ht&&(ht=Ur),Ur>Nt&&(Nt=Ur),Xr<Je&&(Je=Xr),Xr>Dn&&(Dn=Xr));Nt==-1&&(ht=Je=Nt=Dn=0),Ee&&((1&ht)==1&&ht--,(1&Je)==1&&Je--);const Nr=(Nt-ht+1)*(Dn-Je+1);Nr<st&&(st=Nr,Ut=ft,Dt=ht,yt=Je,ct=Nt-ht+1,ut=Dn-Je+1)}Qe=new Uint8Array(He[Oe-1-Ut]),Ut==1&&(Me[Oe-1].dispose=2),rt=new Uint8Array(ct*ut*4),r(Qe,Pe,he,rt,ct,ut,-Dt,-yt,0),Kt=r(Ve,Pe,he,rt,ct,ut,-Dt,-yt,3)?1:0,Kt==1?p(Ve,Pe,he,rt,{x:Dt,y:yt,width:ct,height:ut}):r(Ve,Pe,he,rt,ct,ut,-Dt,-yt,0)}else rt=Ve.slice(0);Me.push({rect:{x:Dt,y:yt,width:ct,height:ut},img:rt,blend:Kt,dispose:0})}if(Le)for(Oe=0;Oe<Me.length;Oe++){if((qe=Me[Oe]).blend==1)continue;const Ve=qe.rect,We=Me[Oe-1].rect,Dt=Math.min(Ve.x,We.x),yt=Math.min(Ve.y,We.y),ct={x:Dt,y:yt,width:Math.max(Ve.x+Ve.width,We.x+We.width)-Dt,height:Math.max(Ve.y+Ve.height,We.y+We.height)-yt};Me[Oe-1].dispose=1,Oe-1!=0&&u(He,Pe,he,Me,Oe-1,ct,Ee),u(He,Pe,he,Me,Oe,ct,Ee)}let At=0;if(He.length!=1)for(var it=0;it<Me.length;it++){var qe;At+=(qe=Me[it]).rect.width*qe.rect.height}return Me}(j,E,B,D,w,M),re={},le=[],de=[];if(k!=0){const je=[];for(W=0;W<oe.length;W++)je.push(oe[W].img.buffer);const He=function(Ee){let Be=0;for(var Me=0;Me<Ee.length;Me++)Be+=Ee[Me].byteLength;const Oe=new Uint8Array(Be);let rt=0;for(Me=0;Me<Ee.length;Me++){const Qe=new Uint8Array(Ee[Me]),At=Qe.length;for(let it=0;it<At;it+=4){let qe=Qe[it],Ve=Qe[it+1],We=Qe[it+2];const Dt=Qe[it+3];Dt==0&&(qe=Ve=We=0),Oe[rt+it]=qe,Oe[rt+it+1]=Ve,Oe[rt+it+2]=We,Oe[rt+it+3]=Dt}rt+=At}return Oe.buffer}(je),Pe=v(He,k);for(W=0;W<Pe.plte.length;W++)le.push(Pe.plte[W].est.rgba);let he=0;for(W=0;W<oe.length;W++){const Le=(be=oe[W]).img.length;var fe=new Uint8Array(Pe.inds.buffer,he>>2,Le>>2);de.push(fe);const Ee=new Uint8Array(Pe.abuf,he,Le);X&&o(be.img,be.rect.width,be.rect.height,le,Ee,fe),be.img.set(Ee),he+=Le}}else for(T=0;T<oe.length;T++){var be=oe[T];const je=new Uint32Array(be.img.buffer);var _e=be.rect.width;for(z=je.length,fe=new Uint8Array(z),de.push(fe),W=0;W<z;W++){const He=je[W];if(W!=0&&He==je[W-1])fe[W]=fe[W-1];else if(W>_e&&He==je[W-_e])fe[W]=fe[W-_e];else{let Pe=re[He];if(Pe==null&&(re[He]=Pe=le.length,le.push(He),le.length>=300))break;fe[W]=Pe}}}const Te=le.length;for(Te<=256&&L==0&&(ee=Te<=2?1:Te<=4?2:Te<=16?4:8,ee=Math.max(ee,O)),T=0;T<oe.length;T++){(be=oe[T]).rect.x,be.rect.y,_e=be.rect.width;const je=be.rect.height;let He=be.img;new Uint32Array(He.buffer);let Pe=4*_e,he=4;if(Te<=256&&L==0){Pe=Math.ceil(ee*_e/8);var Re=new Uint8Array(Pe*je);const Le=de[T];for(let Ee=0;Ee<je;Ee++){W=Ee*Pe;const Be=Ee*_e;if(ee==8)for(var Q=0;Q<_e;Q++)Re[W+Q]=Le[Be+Q];else if(ee==4)for(Q=0;Q<_e;Q++)Re[W+(Q>>1)]|=Le[Be+Q]<<4-4*(1&Q);else if(ee==2)for(Q=0;Q<_e;Q++)Re[W+(Q>>2)]|=Le[Be+Q]<<6-2*(3&Q);else if(ee==1)for(Q=0;Q<_e;Q++)Re[W+(Q>>3)]|=Le[Be+Q]<<7-1*(7&Q)}He=Re,H=3,he=1}else if(G==0&&oe.length==1){Re=new Uint8Array(_e*je*3);const Le=_e*je;for(W=0;W<Le;W++){const Ee=3*W,Be=4*W;Re[Ee]=He[Be],Re[Ee+1]=He[Be+1],Re[Ee+2]=He[Be+2]}He=Re,H=2,he=3,Pe=3*_e}be.img=He,be.bpl=Pe,be.bpp=he}return{ctype:H,depth:ee,plte:le,frames:oe}}function u(j,E,B,k,S,D,w){const M=Uint8Array,O=Uint32Array,L=new M(j[S-1]),X=new O(j[S-1]),H=S+1<j.length?new M(j[S+1]):null,ee=new M(j[S]),K=new O(ee.buffer);let T=E,z=B,W=-1,G=-1;for(let re=0;re<D.height;re++)for(let le=0;le<D.width;le++){const de=D.x+le,fe=D.y+re,be=fe*E+de,_e=K[be];_e==0||k[S-1].dispose==0&&X[be]==_e&&(H==null||H[4*be+3]!=0)||(de<T&&(T=de),de>W&&(W=de),fe<z&&(z=fe),fe>G&&(G=fe))}W==-1&&(T=z=W=G=0),w&&((1&T)==1&&T--,(1&z)==1&&z--),D={x:T,y:z,width:W-T+1,height:G-z+1};const oe=k[S];oe.rect=D,oe.blend=1,oe.img=new Uint8Array(D.width*D.height*4),k[S-1].dispose==0?(r(L,E,B,oe.img,D.width,D.height,-D.x,-D.y,0),p(ee,E,B,oe.img,D)):r(ee,E,B,oe.img,D.width,D.height,-D.x,-D.y,0)}function p(j,E,B,k,S){r(j,E,B,k,S.width,S.height,-S.x,-S.y,2)}function h(j,E,B,k,S,D,w){const M=[];let O,L=[0,1,2,3,4];D!=-1?L=[D]:(E*k>5e5||B==1)&&(L=[0]),w&&(O={level:0});const X=ry;for(var H=0;H<L.length;H++){for(let T=0;T<E;T++)m(S,j,T,k,B,L[H]);M.push(X.deflate(S,O))}let ee,K=1e9;for(H=0;H<M.length;H++)M[H].length<K&&(ee=H,K=M[H].length);return M[ee]}function m(j,E,B,k,S,D){const w=B*k;let M=w+B;if(j[M]=D,M++,D==0)if(k<500)for(var O=0;O<k;O++)j[M+O]=E[w+O];else j.set(new Uint8Array(E.buffer,w,k),M);else if(D==1){for(O=0;O<S;O++)j[M+O]=E[w+O];for(O=S;O<k;O++)j[M+O]=E[w+O]-E[w+O-S]+256&255}else if(B==0){for(O=0;O<S;O++)j[M+O]=E[w+O];if(D==2)for(O=S;O<k;O++)j[M+O]=E[w+O];if(D==3)for(O=S;O<k;O++)j[M+O]=E[w+O]-(E[w+O-S]>>1)+256&255;if(D==4)for(O=S;O<k;O++)j[M+O]=E[w+O]-t(E[w+O-S],0,0)+256&255}else{if(D==2)for(O=0;O<k;O++)j[M+O]=E[w+O]+256-E[w+O-k]&255;if(D==3){for(O=0;O<S;O++)j[M+O]=E[w+O]+256-(E[w+O-k]>>1)&255;for(O=S;O<k;O++)j[M+O]=E[w+O]+256-(E[w+O-k]+E[w+O-S]>>1)&255}if(D==4){for(O=0;O<S;O++)j[M+O]=E[w+O]+256-t(0,E[w+O-k],0)&255;for(O=S;O<k;O++)j[M+O]=E[w+O]+256-t(E[w+O-S],E[w+O-k],E[w+O-S-k])&255}}}function v(j,E){const B=new Uint8Array(j),k=B.slice(0),S=new Uint32Array(k.buffer),D=b(k,E),w=D[0],M=D[1],O=B.length,L=new Uint8Array(O>>2);let X;if(B.length<2e7)for(var H=0;H<O;H+=4)X=y(w,ee=B[H]*(1/255),K=B[H+1]*(1/255),T=B[H+2]*(1/255),z=B[H+3]*(1/255)),L[H>>2]=X.ind,S[H>>2]=X.est.rgba;else for(H=0;H<O;H+=4){var ee=B[H]*.00392156862745098,K=B[H+1]*(1/255),T=B[H+2]*(1/255),z=B[H+3]*(1/255);for(X=w;X.left;)X=I(X.est,ee,K,T,z)<=0?X.left:X.right;L[H>>2]=X.ind,S[H>>2]=X.est.rgba}return{abuf:k.buffer,inds:L,plte:M}}function b(j,E,B){B==null&&(B=1e-4);const k=new Uint32Array(j.buffer),S={i0:0,i1:j.length,bst:null,est:null,tdst:0,left:null,right:null};S.bst=F(j,S.i0,S.i1),S.est=R(S.bst);const D=[S];for(;D.length<E;){let M=0,O=0;for(var w=0;w<D.length;w++)D[w].est.L>M&&(M=D[w].est.L,O=w);if(M<B)break;const L=D[O],X=N(j,k,L.i0,L.i1,L.est.e,L.est.eMq255);if(L.i0>=X||L.i1<=X){L.est.L=0;continue}const H={i0:L.i0,i1:X,bst:null,est:null,tdst:0,left:null,right:null};H.bst=F(j,H.i0,H.i1),H.est=R(H.bst);const ee={i0:X,i1:L.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:L.bst.N-H.bst.N},w=0;w<16;w++)ee.bst.R[w]=L.bst.R[w]-H.bst.R[w];for(w=0;w<4;w++)ee.bst.m[w]=L.bst.m[w]-H.bst.m[w];ee.est=R(ee.bst),L.left=H,L.right=ee,D[O]=H,D.push(ee)}for(D.sort((M,O)=>O.bst.N-M.bst.N),w=0;w<D.length;w++)D[w].ind=w;return[S,D]}function y(j,E,B,k,S){if(j.left==null)return j.tdst=function(H,ee,K,T,z){const W=ee-H[0],G=K-H[1],oe=T-H[2],re=z-H[3];return W*W+G*G+oe*oe+re*re}(j.est.q,E,B,k,S),j;const D=I(j.est,E,B,k,S);let w=j.left,M=j.right;D>0&&(w=j.right,M=j.left);const O=y(w,E,B,k,S);if(O.tdst<=D*D)return O;const L=y(M,E,B,k,S);return L.tdst<O.tdst?L:O}function I(j,E,B,k,S){const{e:D}=j;return D[0]*E+D[1]*B+D[2]*k+D[3]*S-j.eMq}function N(j,E,B,k,S,D){for(k-=4;B<k;){for(;_(j,B,S)<=D;)B+=4;for(;_(j,k,S)>D;)k-=4;if(B>=k)break;const w=E[B>>2];E[B>>2]=E[k>>2],E[k>>2]=w,B+=4,k-=4}for(;_(j,B,S)>D;)B-=4;return B+4}function _(j,E,B){return j[E]*B[0]+j[E+1]*B[1]+j[E+2]*B[2]+j[E+3]*B[3]}function F(j,E,B){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=[0,0,0,0],D=B-E>>2;for(let w=E;w<B;w+=4){const M=j[w]*.00392156862745098,O=j[w+1]*(1/255),L=j[w+2]*(1/255),X=j[w+3]*(1/255);S[0]+=M,S[1]+=O,S[2]+=L,S[3]+=X,k[0]+=M*M,k[1]+=M*O,k[2]+=M*L,k[3]+=M*X,k[5]+=O*O,k[6]+=O*L,k[7]+=O*X,k[10]+=L*L,k[11]+=L*X,k[15]+=X*X}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:S,N:D}}function R(j){const{R:E}=j,{m:B}=j,{N:k}=j,S=B[0],D=B[1],w=B[2],M=B[3],O=k==0?0:1/k,L=[E[0]-S*S*O,E[1]-S*D*O,E[2]-S*w*O,E[3]-S*M*O,E[4]-D*S*O,E[5]-D*D*O,E[6]-D*w*O,E[7]-D*M*O,E[8]-w*S*O,E[9]-w*D*O,E[10]-w*w*O,E[11]-w*M*O,E[12]-M*S*O,E[13]-M*D*O,E[14]-M*w*O,E[15]-M*M*O],X=L,H=U;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],K=0,T=0;if(k!=0)for(let W=0;W<16&&(ee=H.multVec(X,ee),T=Math.sqrt(H.dot(ee,ee)),ee=H.sml(1/T,ee),!(W!=0&&Math.abs(T-K)<1e-9));W++)K=T;const z=[S*O,D*O,w*O,M*O];return{Cov:L,q:z,e:ee,L:K,eMq255:H.dot(H.sml(255,z),ee),eMq:H.dot(ee,z),rgba:(Math.round(255*z[3])<<24|Math.round(255*z[2])<<16|Math.round(255*z[1])<<8|Math.round(255*z[0])<<0)>>>0}}var U={multVec:(j,E)=>[j[0]*E[0]+j[1]*E[1]+j[2]*E[2]+j[3]*E[3],j[4]*E[0]+j[5]*E[1]+j[6]*E[2]+j[7]*E[3],j[8]*E[0]+j[9]*E[1]+j[10]*E[2]+j[11]*E[3],j[12]*E[0]+j[13]*E[1]+j[14]*E[2]+j[15]*E[3]],dot:(j,E)=>j[0]*E[0]+j[1]*E[1]+j[2]*E[2]+j[3]*E[3],sml:(j,E)=>[j*E[0],j*E[1],j*E[2],j*E[3]]};ui.encode=function(E,B,k,S,D,w,M){S==null&&(S=0),M==null&&(M=!1);const O=d(E,B,k,S,[!1,!1,!1,0,M,!1]);return c(O,-1),l(O,B,k,D,w)},ui.encodeLL=function(E,B,k,S,D,w,M,O){const L={ctype:0+(S==1?0:2)+(D==0?0:4),depth:w,frames:[]},X=(S+D)*w,H=X*B;for(let ee=0;ee<E.length;ee++)L.frames.push({rect:{x:0,y:0,width:B,height:k},img:new Uint8Array(E[ee]),blend:0,dispose:1,bpp:Math.ceil(X/8),bpl:Math.ceil(H/8)});return c(L,0,!0),l(L,B,k,M,O)},ui.encode.compress=d,ui.encode.dither=o,ui.quantize=v,ui.quantize.getKDtree=b,ui.quantize.getNearest=y})();const uh={toArrayBuffer(r,e){const t=r.width,n=r.height,i=t<<2,a=r.getContext("2d").getImageData(0,0,t,n),s=new Uint32Array(a.data.buffer),o=(32*t+31)/32<<2,l=o*n,c=122+l,d=new ArrayBuffer(c),u=new DataView(d),p=1<<20;let h,m,v,b,y=p,I=0,N=0,_=0;function F(j){u.setUint16(N,j,!0),N+=2}function R(j){u.setUint32(N,j,!0),N+=4}function U(j){N+=j}F(19778),R(c),U(4),R(122),R(108),R(t),R(-n>>>0),F(1),F(32),R(3),R(l),R(2835),R(2835),U(8),R(16711680),R(65280),R(255),R(4278190080),R(1466527264),function j(){for(;I<n&&y>0;){for(b=122+I*o,h=0;h<i;)y--,m=s[_++],v=m>>>24,u.setUint32(b+h,m<<8|v),h+=4;I++}_<s.length?(y=p,setTimeout(j,uh._dly)):e(d)}()},toBlob(r,e){this.toArrayBuffer(r,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var In={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ny={[In.CHROME]:16384,[In.FIREFOX]:11180,[In.DESKTOP_SAFARI]:16384,[In.IE]:8192,[In.IOS]:4096,[In.ETC]:8192};const jf=typeof window<"u",hh=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,sc=jf&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),iy=(jf||hh)&&(sc&&sc.getOriginalSymbol(window,"File")||typeof File<"u"&&File),ph=(jf||hh)&&(sc&&sc.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Of(r,e,t=Date.now()){return new Promise(n=>{const i=r.split(","),a=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let o=s.length;const l=new Uint8Array(o);for(;o--;)l[o]=s.charCodeAt(o);const c=new Blob([l],{type:a});c.name=e,c.lastModified=t,n(c)})}function gh(r){return new Promise((e,t)=>{const n=new ph;n.onload=()=>e(n.result),n.onerror=i=>t(i),n.readAsDataURL(r)})}function mh(r){return new Promise((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=i=>t(i),n.src=r})}function io(){if(io.cachedResult!==void 0)return io.cachedResult;let r=In.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=In.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=In.IOS:/Safari/i.test(e)?r=In.DESKTOP_SAFARI:/Firefox/i.test(e)?r=In.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=In.IE),io.cachedResult=r,io.cachedResult}function xh(r,e){const t=io(),n=ny[t];let i=r,a=e,s=i*a;const o=i>a?a/i:i/a;for(;s>n*n;){const l=(n+i)/2,c=(n+a)/2;l<c?(a=c,i=c*o):(a=l*o,i=l),s=i*a}return{width:i,height:a}}function Ac(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function vh(r,e){const{width:t,height:n}=xh(r.width,r.height),[i,a]=Ac(t,n);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(r,0,0,i.width,i.height),i}function Yl(){return Yl.cachedResult!==void 0||(Yl.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Yl.cachedResult}function lc(r,e={}){return new Promise(function(t,n){let i,a;var s=function(){try{return a=vh(i,e.fileType||r.type),t([i,a])}catch(l){return n(l)}},o=function(l){try{var c=function(d){try{throw d}catch(u){return n(u)}};try{let d;return gh(r).then(function(u){try{return d=u,mh(d).then(function(p){try{return i=p,function(){try{return s()}catch(h){return n(h)}}()}catch(h){return c(h)}},c)}catch(p){return c(p)}},c)}catch(d){c(d)}}catch(d){return n(d)}};try{if(Yl()||[In.DESKTOP_SAFARI,In.MOBILE_SAFARI].includes(io()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then(function(l){try{return i=l,s()}catch{return o()}},o)}catch{o()}})}function cc(r,e,t,n,i=1){return new Promise(function(a,s){let o;if(e==="image/png"){let c,d,u;return c=r.getContext("2d"),{data:d}=c.getImageData(0,0,r.width,r.height),u=ui.encode([d.buffer],r.width,r.height,4096*i),o=new Blob([u],{type:e}),o.name=t,o.lastModified=n,l.call(this)}{let c=function(){return l.call(this)};if(e==="image/bmp")return new Promise(d=>uh.toBlob(r,d)).then((function(d){try{return o=d,o.name=t,o.lastModified=n,c.call(this)}catch(u){return s(u)}}).bind(this),s);{let d=function(){return c.call(this)};if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:i}).then((function(u){try{return o=u,o.name=t,o.lastModified=n,d.call(this)}catch(p){return s(p)}}).bind(this),s);{let u;return u=r.toDataURL(e,i),Of(u,t,n).then((function(p){try{return o=p,d.call(this)}catch(h){return s(h)}}).bind(this),s)}}}function l(){return a(o)}})}function ji(r){r.width=0,r.height=0}function Mo(){return new Promise(function(r,e){let t,n,i,a;return Mo.cachedResult!==void 0?r(Mo.cachedResult):Of("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return t=s,lc(t).then(function(o){try{return n=o[1],cc(n,t.type,t.name,t.lastModified).then(function(l){try{return i=l,ji(n),lc(i).then(function(c){try{return a=c[0],Mo.cachedResult=a.width===1&&a.height===2,r(Mo.cachedResult)}catch(d){return e(d)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function yh(r){return new Promise((e,t)=>{const n=new ph;n.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const s=a.byteLength;let o=2;for(;o<s;){if(a.getUint16(o+2,!1)<=8)return e(-1);const l=a.getUint16(o,!1);if(o+=2,l==65505){if(a.getUint32(o+=2,!1)!=1165519206)return e(-1);const c=a.getUint16(o+=6,!1)==18761;o+=a.getUint32(o+4,c);const d=a.getUint16(o,c);o+=2;for(let u=0;u<d;u++)if(a.getUint16(o+12*u,c)==274)return e(a.getUint16(o+12*u+8,c))}else{if((65280&l)!=65280)break;o+=a.getUint16(o,!1)}}return e(-1)},n.onerror=i=>t(i),n.readAsArrayBuffer(r)})}function bh(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:i}=e;let a,s=r;return isFinite(i)&&(t>i||n>i)&&([s,a]=Ac(t,n),t>n?(s.width=i,s.height=n/t*i):(s.width=t/n*i,s.height=i),a.drawImage(r,0,0,s.width,s.height),ji(r)),s}function wh(r,e){const{width:t}=r,{height:n}=r,[i,a]=Ac(t,n);switch(e>4&&e<9?(i.width=n,i.height=t):(i.width=t,i.height=n),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,n);break;case 4:a.transform(1,0,0,-1,0,n);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,n,0);break;case 7:a.transform(0,-1,-1,0,n,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(r,0,0,t,n),ji(r),i}function a0(r,e,t=0){return new Promise(function(n,i){let a,s,o,l,c,d,u,p,h,m,v,b,y,I,N,_,F,R,U,j;function E(k=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=k,e.onProgress(Math.min(a,100))}function B(k){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(k,a),100),e.onProgress(a)}return a=t,s=e.maxIteration||10,o=1024*e.maxSizeMB*1024,E(),lc(r,e).then((function(k){try{return[,l]=k,E(),c=bh(l,e),E(),new Promise(function(S,D){var w;if(!(w=e.exifOrientation))return yh(r).then((function(O){try{return w=O,M.call(this)}catch(L){return D(L)}}).bind(this),D);function M(){return S(w)}return M.call(this)}).then((function(S){try{return d=S,E(),Mo().then((function(D){try{return u=D?c:wh(c,d),E(),p=e.initialQuality||1,h=e.fileType||r.type,cc(u,h,r.name,r.lastModified,p).then((function(w){try{{let O=function(){if(s--&&(N>o||N>y)){let X,H;return X=j?.95*U.width:U.width,H=j?.95*U.height:U.height,[F,R]=Ac(X,H),R.drawImage(U,0,0,X,H),p*=h==="image/png"?.85:.95,cc(F,h,r.name,r.lastModified,p).then(function(ee){try{return _=ee,ji(U),U=F,N=_.size,B(Math.min(99,Math.floor((I-N)/(I-o)*100))),O}catch(K){return i(K)}},i)}return[1]},L=function(){return ji(U),ji(F),ji(c),ji(u),ji(l),B(100),n(_)};if(m=w,E(),v=m.size>o,b=m.size>r.size,!v&&!b)return B(100),n(m);var M;return y=r.size,I=m.size,N=I,U=u,j=!e.alwaysKeepResolution&&v,(M=(function(X){for(;X;){if(X.then)return void X.then(M,i);try{if(X.pop){if(X.length)return X.pop()?L.call(this):X;X=O}else X=X.call(this)}catch(H){return i(H)}}}).bind(this))(O)}}catch(O){return i(O)}}).bind(this),i)}catch(w){return i(w)}}).bind(this),i)}catch(D){return i(D)}}).bind(this),i)}catch(S){return i(S)}}).bind(this),i)})}const ay=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let hd;function oy(r,e){return new Promise((t,n)=>{hd||(hd=function(s){const o=[];return o.push(s),URL.createObjectURL(new Blob(o))}(ay));const i=new Worker(hd);i.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return n(new Error(s.data.error)),void i.terminate();t(s.data.file),i.terminate()}else e.onProgress(s.data.progress)}),i.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",()=>{n(e.signal.reason),i.terminate()}),i.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function un(r,e){return new Promise(function(t,n){let i,a,s,o,l,c;if(i={...e},s=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=h=>{s=h,typeof o=="function"&&o(s)},!(r instanceof Blob||r instanceof iy))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return a0(r,i).then((function(h){try{return a=h,p.call(this)}catch(m){return n(m)}}).bind(this),n);var d=(function(){try{return p.call(this)}catch(h){return n(h)}}).bind(this),u=function(h){try{return a0(r,i).then(function(m){try{return a=m,d()}catch(v){return n(v)}},n)}catch(m){return n(m)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",oy(r,i).then(function(h){try{return a=h,d()}catch{return u()}},u)}catch{u()}function p(){try{a.name=r.name,a.lastModified=r.lastModified}catch{}try{i.preserveExif&&r.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===r.type)&&(a=fh(r,a))}catch{}return t(a)}})}un.getDataUrlFromFile=gh,un.getFilefromDataUrl=Of,un.loadImage=mh,un.drawImageInCanvas=vh,un.drawFileInCanvas=lc,un.canvasToFile=cc,un.getExifOrientation=yh,un.handleMaxWidthOrHeight=bh,un.followExifOrientation=wh,un.cleanupCanvasMemory=ji,un.isAutoOrientationInBrowser=Mo,un.approximateBelowMaximumCanvasSizeOfBrowser=xh,un.copyExifWithoutOrientation=fh,un.getBrowserName=io,un.version="2.0.2";const Us=r=>r.images&&Array.isArray(r.images)?{...r,images:r.images.filter(e=>e&&e.trim()),primaryImage:r.images[0]||null}:r.imageUrl&&r.imageUrl.trim()?{...r,images:[r.imageUrl],primaryImage:r.imageUrl}:{...r,images:[],primaryImage:null},sy=r=>Us(r).primaryImage,Ah=r=>Us(r).images,ly=async(r,e,t,n,i)=>{try{console.log("ðŸ”„ ×ž×ª×—×™×œ migration ×©×œ ×ž×•×¦×¨×™× ×§×™×™×ž×™×...");const a=await n(i(r,"items")),s=[];a.docs.forEach(o=>{const l=o.data();l.images&&Array.isArray(l.images)||l.imageUrl&&l.imageUrl.trim()&&s.push({id:o.id,images:[l.imageUrl]})}),console.log(`ðŸ“Š × ×ž×¦××• ${s.length} ×ž×•×¦×¨×™× ×œ×¢×“×›×•×Ÿ`);for(const o of s)await e(t(r,"items",o.id),{images:o.images}),console.log(`âœ… ×¢×•×“×›×Ÿ ×ž×•×¦×¨: ${o.id}`);return console.log("ðŸŽ‰ Migration ×”×•×©×œ× ×‘×”×¦×œ×—×”!"),{success:!0,updatedCount:s.length}}catch(a){return console.error("âŒ ×©×’×™××” ×‘-migration:",a),{success:!1,error:a.message}}},Ws=({item:r,width:e="100%",height:t="200px",showNavigation:n=!0,className:i="",style:a={},borderRadius:s="8px"})=>{const o=Ah(r),[l,c]=se.useState(0),[d,u]=se.useState(!1),[p,h]=se.useState(!1);if(se.useEffect(()=>{const y=()=>{const I=window.innerWidth<=768,N=window.location.pathname.includes("/management")||document.querySelector(".product-card-mobile")!==null||i.includes("management")||a.managementMode===!0;u(I),h(N)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[i,a]),o.length===0)return f.jsx("div",{style:{width:e,height:t,borderRadius:s,border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",...a},className:i,children:f.jsx("img",{src:"/no-image-available.png",alt:"××™×Ÿ ×ª×ž×•× ×” ×–×ž×™× ×”",style:{maxWidth:"80%",maxHeight:"80%",objectFit:"contain",opacity:.5}})});if(o.length===1)return f.jsx("div",{style:{width:e,height:t,borderRadius:s,overflow:"hidden",position:"relative",...a},className:i,children:f.jsx("img",{src:o[0],alt:r.name||"×ª×ž×•× ×ª ×ž×•×¦×¨",style:{width:"100%",height:"100%",objectFit:"contain",background:"white"}})});const m=()=>{c(y=>(y+1)%o.length)},v=()=>{c(y=>(y-1+o.length)%o.length)},b=y=>{c(y)};return f.jsxs("div",{style:{width:e,height:t,borderRadius:s,overflow:"hidden",position:"relative",background:"#f3f4f6",...a},className:i,children:[f.jsx("img",{src:o[l],alt:`${r.name||"×ž×•×¦×¨"} - ×ª×ž×•× ×” ${l+1}`,style:{width:"100%",height:"100%",objectFit:"contain",transition:"opacity 0.3s ease",background:"white"}}),o.length>1&&f.jsx(f.Fragment,{children:d&&p?f.jsx("button",{onClick:m,style:{position:"absolute",right:"8px",bottom:"8px",background:"rgba(255, 255, 255, 0.9)",color:"#333",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},"aria-label":"×ª×ž×•× ×” ×”×‘××”",children:"â€º"}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:v,style:{position:"absolute",left:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:y=>{y.currentTarget.style.background="rgba(0, 0, 0, 0.9)",y.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:y=>{y.currentTarget.style.background="rgba(0, 0, 0, 0.7)",y.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"×ª×ž×•× ×” ×§×•×“×ž×ª",children:f.jsx($o,{size:20})}),f.jsx("button",{onClick:m,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:y=>{y.currentTarget.style.background="rgba(0, 0, 0, 0.9)",y.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:y=>{y.currentTarget.style.background="rgba(0, 0, 0, 0.7)",y.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"×ª×ž×•× ×” ×”×‘××”",children:f.jsx(Go,{size:20})})]})}),!(d&&p)&&o.length>1&&o.length<=5&&f.jsx("div",{style:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"6px",zIndex:10},children:o.map((y,I)=>f.jsx("button",{onClick:()=>b(I),style:{width:"8px",height:"8px",borderRadius:"50%",border:"none",background:I===l?"white":"rgba(255, 255, 255, 0.5)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":`×ª×ž×•× ×” ${I+1}`},I))}),!(d&&p)&&o.length>5&&f.jsxs("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"bold",zIndex:10},children:[l+1," / ",o.length]}),d&&p&&o.length>1&&f.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5},onTouchStart:y=>{const I=y.touches[0];y.currentTarget.startX=I.clientX},onTouchEnd:y=>{const I=y.changedTouches[0];if(!y.currentTarget.startX)return;const N=y.currentTarget.startX-I.clientX;Math.abs(N)>50&&(N>0?m():v())}}),d&&p&&o.length>1&&f.jsxs("div",{style:{position:"absolute",bottom:"2px",right:"2px",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"1px 4px",borderRadius:"4px",fontSize:"8px",zIndex:10},children:[l+1,"/",o.length]}),f.jsx("div",{tabIndex:0,onKeyDown:y=>{y.key==="ArrowRight"&&m(),y.key==="ArrowLeft"&&v()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",outline:"none"},"aria-label":"×’×œ×¨×™×™×ª ×ª×ž×•× ×•×ª - ×”×©×ª×ž×© ×‘×—×¦×™× ×œ× ×™×•×•×˜"})]})},cy=async r=>{const e="https://api.cloudinary.com/v1_1/dcydl9rz8/image/upload",t=new FormData;return t.append("file",r),t.append("upload_preset","GmachMedia"),(await(await fetch(e,{method:"POST",body:t})).json()).secure_url},dy=({editingItem:r,name:e,quantity:t,imageUrl:n,imageFile:i,onNameChange:a,onQuantityChange:s,onImageUrlChange:o,onImageFileChange:l,onCancel:c,onSubmit:d,publicComment:u,internalComment:p,onPublicCommentChange:h,onInternalCommentChange:m})=>{const v=se.useRef(null),[b,y]=se.useState([]),[I,N]=se.useState(!1);se.useEffect(()=>{if(r){const B=Ah(r);y(B.map((k,S)=>({id:Date.now()+S,url:k,isUploaded:!0})))}else y([])},[r]),se.useEffect(()=>{const B=S=>{v.current&&!v.current.contains(S.target)&&c()},k=S=>{S.key==="Escape"&&c()};return document.addEventListener("mousedown",B),document.addEventListener("keydown",k),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("keydown",k)}},[c]);const _=()=>{if(n&&n.trim()){const B={id:Date.now(),url:n.trim(),isUploaded:!0};y(k=>[...k,B]),o({target:{value:""}})}},F=async B=>{if(B){N(!0);try{const k=await un(B,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0}),S=await cy(k),D={id:Date.now(),url:S,isUploaded:!0};y(w=>[...w,D]),hi.success("×”×ª×ž×•× ×” ×”×•×¢×œ×ª×” ×‘×”×¦×œ×—×”!")}catch(k){hi.error("×©×’×™××” ×‘×”×¢×œ××ª ×”×ª×ž×•× ×”: "+k.message)}finally{N(!1)}}},R=B=>{y(k=>k.filter(S=>S.id!==B))},U=B=>{B!==0&&y(k=>{const S=[...k];return[S[B-1],S[B]]=[S[B],S[B-1]],S})},j=B=>{B!==b.length-1&&y(k=>{const S=[...k];return[S[B],S[B+1]]=[S[B+1],S[B]],S})},E=async B=>{B.preventDefault();const k=b.map(D=>D.url);k[0];const S={name:e,quantity:t,publicComment:u,internalComment:p,images:k,imageUrl:k[0]||null};await d(B,S)};return f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,direction:"ltr",padding:"1rem"},children:f.jsxs("div",{ref:v,style:{position:"relative",background:"white",padding:"2rem",borderRadius:"12px",width:"95%",maxWidth:"600px",direction:"rtl",textAlign:"initial",maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[f.jsx("button",{onClick:c,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",lineHeight:1,color:"#666",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"×¡×’×•×¨",children:"Ã—"}),f.jsx("h3",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",color:"#333"},children:r?"×¢×¨×™×›×ª ×ž×•×¦×¨":"×”×•×¡×¤×ª ×ž×•×¦×¨ ×—×“×©"}),f.jsxs("form",{onSubmit:E,children:[f.jsxs("div",{style:Ns,children:[f.jsx("label",{style:ks,children:"×©× ×”×ž×•×¦×¨:"}),f.jsx("input",{dir:"rtl",type:"text",value:e,onChange:a,required:!0,style:ko})]}),f.jsxs("div",{style:Ns,children:[f.jsx("label",{style:ks,children:"×›×ž×•×ª:"}),f.jsx("input",{dir:"rtl",type:"number",value:t,onChange:s,required:!0,style:ko})]}),f.jsxs("div",{style:Ns,children:[f.jsx("label",{style:ks,children:"×”×¢×¨×” ×œ×¤×¨×¡×•× (×—×™×¦×•× ×™×ª):"}),f.jsx("input",{dir:"rtl",type:"text",value:u,onChange:h,style:ko})]}),f.jsxs("div",{style:Ns,children:[f.jsx("label",{style:ks,children:"×”×¢×¨×” ×¤× ×™×ž×™×ª:"}),f.jsx("input",{dir:"rtl",type:"text",value:p,onChange:m,style:ko})]}),f.jsxs("div",{style:Ns,children:[f.jsx("label",{style:ks,children:"×ª×ž×•× ×•×ª ×”×ž×•×¦×¨:"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[f.jsx("input",{dir:"rtl",type:"text",value:n,onChange:o,placeholder:"×”×“×‘×§ ×›×ª×•×‘×ª ×ª×ž×•× ×” (URL)",style:{...ko,flex:1,margin:0}}),f.jsx("button",{type:"button",onClick:_,disabled:!n.trim(),style:{padding:"8px 12px",backgroundColor:n.trim()?"#1976d2":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:n.trim()?"pointer":"not-allowed",whiteSpace:"nowrap"},children:"×”×•×¡×£"})]}),f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsx("input",{type:"file",accept:"image/*",onChange:B=>{const k=B.target.files[0];k&&(F(k),B.target.value="")},style:{...ko,padding:"8px"},disabled:I}),I&&f.jsx("div",{style:{fontSize:"0.875rem",color:"#1976d2",marginTop:"0.5rem"},children:"×ž×¢×œ×” ×ª×ž×•× ×”..."})]}),b.length>0&&f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsxs("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:["×ª×ž×•× ×•×ª (",b.length,")"]}),f.jsx("div",{style:{marginBottom:"1rem"},children:f.jsx(Ws,{item:{images:b.map(B=>B.url)},width:"100%",height:"200px",showNavigation:!0})}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:b.map((B,k)=>f.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"0.5rem",background:"#f9fafb",position:"relative"},children:[f.jsx("img",{src:B.url,alt:`×ª×ž×•× ×” ${k+1}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"4px",marginBottom:"0.5rem"}}),f.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:k+1}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.25rem"},children:[f.jsx("button",{type:"button",onClick:()=>U(k),disabled:k===0,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:k===0?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:k===0?"not-allowed":"pointer",flex:1},children:"â†‘"}),f.jsx("button",{type:"button",onClick:()=>j(k),disabled:k===b.length-1,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:k===b.length-1?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:k===b.length-1?"not-allowed":"pointer",flex:1},children:"â†“"}),f.jsx("button",{type:"button",onClick:()=>R(B.id),style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",flex:1},children:"âœ•"})]})]},B.id))})]})]}),f.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem",flexWrap:"wrap"},children:[f.jsx("button",{type:"submit",disabled:I,style:{...fy,minWidth:"120px",opacity:I?.6:1,cursor:I?"not-allowed":"pointer"},children:I?"×ž×¢×œ×”...":r?"×©×ž×•×¨ ×©×™× ×•×™×™×":"×”×•×¡×£ ×ž×•×¦×¨"}),f.jsx("button",{type:"button",onClick:c,disabled:I,style:{...uy,minWidth:"120px",opacity:I?.6:1,cursor:I?"not-allowed":"pointer"},children:"×‘×™×˜×•×œ"})]})]})]})})},Ns={marginBottom:"1.5rem",width:"100%"},ks={display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"1rem"},ko={width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"16px",boxSizing:"border-box",transition:"border-color 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none"},fy={padding:"12px 20px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},uy={padding:"12px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},hy=({item:r,onClose:e})=>{const[t,n]=se.useState([]),[i,a]=se.useState(!0);se.useEffect(()=>{if(!r)return;(async()=>{a(!0);try{console.log("ðŸ” ×ž×—×¤×© ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª ×¢×‘×•×¨ ×ž×•×¦×¨:",r.name,"ID:",r.id);const c=(await Bt(mt(Ue,"orders"))).docs.map(p=>({id:p.id,...p.data()})).filter(p=>p.status==="open");console.log("ðŸ“‹ ×›×œ ×”×”×–×ž× ×•×ª ×”×¤×¢×™×œ×•×ª:",c.length);const d=c.filter(p=>{var m;return(m=p.items)==null?void 0:m.some(v=>v.id===r.id||v.ItemId===r.ItemId)});console.log("ðŸŽ¯ ×”×–×ž× ×•×ª ×©×ž×›×™×œ×•×ª ××ª ×”×ž×•×¦×¨:",d.length);const u=d.map(p=>{const h=p.items.find(m=>m.id===r.id||m.ItemId===r.ItemId);return{...p,itemQuantity:(h==null?void 0:h.quantity)||0}});u.sort((p,h)=>{var b,y;const m=((b=p.createdAt)==null?void 0:b.seconds)||0;return(((y=h.createdAt)==null?void 0:y.seconds)||0)-m}),n(u)}catch(l){console.error("âŒ ×©×’×™××” ×‘×©×œ×™×¤×ª ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª:",l)}finally{a(!1)}})()},[r]);const s=o=>{if(!o)return"×œ× ×¦×•×™×Ÿ";let l;return o.seconds?l=new Date(o.seconds*1e3):typeof o=="string"?l=new Date(o):l=o,isNaN(l.getTime())?"×ª××¨×™×š ×œ× ×ª×§×™×Ÿ":l.toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"})};return r?f.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1500,padding:"1rem"},onClick:o=>{o.target===o.currentTarget&&e()},children:[f.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"12px",width:"95%",maxWidth:"800px",maxHeight:"85vh",overflowY:"auto",padding:"0",direction:"rtl",boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},onClick:o=>o.stopPropagation(),children:[f.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1.5rem",borderRadius:"12px 12px 0 0",position:"relative"},children:[f.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",left:"1rem",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",color:"white",fontSize:"1.2rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:o=>{o.target.style.background="rgba(255,255,255,0.3)"},onMouseLeave:o=>{o.target.style.background="rgba(255,255,255,0.2)"},children:f.jsx(w2,{})}),f.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",textAlign:"center",paddingRight:"3rem"},children:['ðŸ“‹ ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª ×¢×‘×•×¨ "',r.name,'"']}),f.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,textAlign:"center",fontSize:"0.95rem"},children:["×ž×–×”×” ×ž×•×¦×¨: ",r.ItemId]})]}),f.jsx("div",{style:{padding:"1.5rem"},children:i?f.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[f.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #f3f3f3",borderTop:"3px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"×˜×•×¢×Ÿ ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª..."]}):t.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[f.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",color:"#ddd"},children:"ðŸ“„"}),f.jsx("h3",{style:{color:"#666",marginBottom:"0.5rem"},children:"×œ× × ×ž×¦××• ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª"}),f.jsx("p",{style:{color:"#999",margin:0},children:"×”×ž×•×¦×¨ ×”×–×” ×›×¨×’×¢ ×œ× × ×ž×¦× ×‘××£ ×”×–×ž× ×” ×¤×¢×™×œ×”"})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center",border:"1px solid #e9ecef"},children:f.jsxs("p",{style:{margin:0,color:"#495057",fontSize:"1rem",fontWeight:"500"},children:["ðŸ“Š × ×ž×¦× ×‘-",t.length," ×”×–×ž× ",t.length===1?"×”":"×•×ª"," ×¤×¢×™×œ",t.length===1?"×”":"×•×ª",f.jsx("br",{}),f.jsxs("span",{style:{fontSize:"0.9rem",color:"#6c757d"},children:['×¡×”"×› ×›×ž×•×ª ×ž×•×©××œ×ª: ',t.reduce((o,l)=>o+l.itemQuantity,0)]})]})}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:window.innerWidth<=768?"0 0.5rem":"0"},children:t.map((o,l)=>f.jsxs("div",{style:{border:"1px solid #e9ecef",borderRadius:"10px",padding:"1.25rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:c=>{c.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",c.currentTarget.style.transform="translateY(0)"},children:[f.jsxs("div",{style:{position:"absolute",top:"0.75rem",left:"0.75rem",background:"#667eea",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold"},children:["#",o.simpleId||o.id.slice(0,6)]}),f.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem",marginBottom:"1rem"},children:f.jsx("div",{style:{background:"#28a745",color:"white",padding:window.innerWidth<=768?"0.3rem 0.6rem":"0.4rem 0.8rem",borderRadius:"15px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold",textAlign:"center",lineHeight:"1.2",wordBreak:"break-word",maxWidth:window.innerWidth<=768?"180px":"220px",margin:"0 auto",display:"inline-block"},children:window.innerWidth<=768?f.jsxs(f.Fragment,{children:["×›×ž×•×ª: ",o.itemQuantity]}):f.jsxs(f.Fragment,{children:["×ž×•×¦×¨: ",r.name,f.jsx("br",{}),"×›×ž×•×ª: ",o.itemQuantity]})})}),f.jsxs("div",{style:{marginBottom:"1rem",textAlign:"center"},children:[f.jsxs("h4",{style:{margin:"0 0 0.75rem 0",color:"#333",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[f.jsx(Au,{color:"#667eea"}),o.clientName]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"#555"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(A2,{color:"#28a745",size:14}),f.jsx("span",{children:o.phone})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(S2,{color:"#dc3545",size:14}),f.jsx("span",{children:o.address})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(Au,{color:"#6c757d",size:14}),f.jsxs("span",{children:["×ž×ª× ×“×‘×ª: ",o.volunteerName]})]})]})]}),f.jsxs("div",{style:{background:"#f8f9fa",padding:"0.75rem",borderRadius:"6px",border:"1px solid #e9ecef",textAlign:"center"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500",color:"#495057"},children:[f.jsx(_2,{color:"#667eea",size:14}),"×ª××¨×™×›×™ ×”×©××œ×”"]}),f.jsxs("div",{style:{fontSize:"0.85rem",color:"#6c757d",lineHeight:"1.4"},children:[f.jsxs("div",{children:["ðŸ“¤ ×œ×§×™×—×”: ",s(o.pickupDate)]}),f.jsxs("div",{children:["ðŸŽ‰ ××™×¨×•×¢: ",s(o.eventDate)]}),f.jsxs("div",{children:["ðŸ“¥ ×”×—×–×¨×”: ",s(o.returnDate)]}),o.eventType&&f.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:"500",color:"#495057"},children:["ðŸŽŠ ×¡×•×’ ××™×¨×•×¢: ",o.eventType]})]})]})]},o.id))})]})}),f.jsx("div",{style:{background:"#f8f9fa",padding:"1rem 1.5rem",borderRadius:"0 0 12px 12px",borderTop:"1px solid #e9ecef",textAlign:"center"},children:f.jsx("button",{onClick:e,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"25px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:o=>{o.target.style.transform="translateY(-1px)",o.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)"},onMouseLeave:o=>{o.target.style.transform="translateY(0)",o.target.style.boxShadow="none"},children:"×¡×’×•×¨"})})]}),f.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):null},o0=({currentPage:r,totalItems:e,itemsPerPage:t,onPageChange:n,className:i=""})=>{const a=Math.ceil(e/t),s=window.innerWidth<=768;if(a<=1)return null;const l=(()=>{const u=s?5:7,p=Math.floor(u/2);let h=Math.max(1,r-p),m=Math.min(a,h+u-1);m-h+1<u&&(h=Math.max(1,m-u+1));const v=[];h>1&&(v.push(1),h>2&&v.push("..."));for(let b=h;b<=m;b++)v.push(b);return m<a&&(m<a-1&&v.push("..."),v.push(a)),v})(),c=(r-1)*t+1,d=Math.min(r*t,e);return f.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[f.jsxs("div",{style:{fontSize:s?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["×ž×¦×™×’ ",c,"-",d," ×ž×ª×•×š ",e," ×ž×•×¦×¨×™×"]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[f.jsx("button",{onClick:()=>n(r-1),disabled:r===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===1?"#f9fafb":"white",color:r===1?"#9ca3af":"#374151",cursor:r===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:f.jsx(Go,{size:s?16:20})}),l.map((u,p)=>{if(u==="...")return f.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",color:"#9ca3af"},children:f.jsx(vf,{size:s?16:20})},`dots-${p}`);const h=u===r;return f.jsx("button",{onClick:()=>n(u),style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:h?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:h?"#3b82f6":"white",color:h?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:h?"bold":"normal",fontSize:s?"14px":"16px"},children:u},u)}),f.jsx("button",{onClick:()=>n(r+1),disabled:r===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===a?"#f9fafb":"white",color:r===a?"#9ca3af":"#374151",cursor:r===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:f.jsx($o,{size:s?16:20})})]})]})},py=()=>{const[r,e]=se.useState(""),[t,n]=se.useState(""),[i,a]=se.useState([]),[s,o]=se.useState([]),[l,c]=se.useState(""),[d,u]=se.useState(""),[p,h]=se.useState(null),[m,v]=se.useState(""),[b,y]=se.useState(!1),[I,N]=se.useState(!1),[_,F]=se.useState(null),[R,U]=se.useState(""),[j,E]=se.useState(""),[B,k]=se.useState(1),[S,D]=se.useState(1),[w,M]=se.useState(window.innerWidth<=768),[O,L]=se.useState(!1),[X,H]=se.useState(null),{user:ee}=An(),K=(ee==null?void 0:ee.username)||"×ž×©×ª×ž×© ×œ× ×™×“×•×¢",T=se.useRef(null),z=w?12:20,W=w?12:20;se.useEffect(()=>{const he=()=>{const Le=window.innerWidth<=768;Le!==w&&(M(Le),k(1),D(1))};return window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[w]),se.useEffect(()=>{k(1)},[l]),se.useEffect(()=>{D(1)},[d]),se.useEffect(()=>{const he=document.createElement("style");return he.innerHTML=`
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] { -moz-appearance: textfield; }
      
      /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª ×ž×©×•×¤×¨×ª */
      .products-grid-mobile {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.2rem;
        padding: 0;
      }
      
      .product-card-mobile {
        min-height: 380px;
        padding: 1rem;
      }
      
      .product-card-mobile img {
        height: 140px;
      }
      
      .product-card-mobile h3 {
        font-size: 1rem;
        margin: 0.5rem 0;
      }
      
      .product-card-mobile p {
        font-size: 0.875rem;
        margin: 0.25rem 0;
      }
      
      .product-card-mobile .button-group {
        flex-direction: row;
        gap: 0.5rem;
        width: 100%;
      }
      
      .product-card-mobile button {
        font-size: 0.8rem;
        padding: 6px 10px;
        flex: 1;
      }
      
      /* ×ž×•×‘×™×™×œ ×‘×œ×‘×“ */
      @media (max-width: 768px) {
        .products-grid-mobile {
          grid-template-columns: 1fr 1fr !important;
          gap: 0.75rem !important;
          padding: 0 0.5rem;
        }
        
        .product-card-mobile {
          min-height: 320px !important;
          padding: 0.75rem !important;
        }
        
        .product-card-mobile img {
          height: 100px !important;
        }
        
        .product-card-mobile h3 {
          font-size: 0.9rem !important;
          margin: 0.5rem 0 !important;
        }
        
        .product-card-mobile p {
          font-size: 0.8rem !important;
          margin: 0.25rem 0 !important;
        }
        
        .product-card-mobile .button-group {
          flex-direction: column !important;
          gap: 0.3rem !important;
        }
        
        .product-card-mobile button {
          font-size: 0.75rem !important;
          padding: 4px 8px !important;
          width: 100% !important;
        }
      }
    `,document.head.appendChild(he),()=>document.head.removeChild(he)},[]);const G=async()=>{const Le=(await Bt(mt(Ue,"orders"))).docs.map(Oe=>Oe.data()).filter(Oe=>Oe.status==="open"),Ee=new Set;Le.forEach(Oe=>{var rt;(rt=Oe.items)==null||rt.forEach(Qe=>{Ee.add(Qe.id)})});const Me=(await Bt(mt(Ue,"items"))).docs.filter(Oe=>Oe.data().isDeleted!==!0).map(Oe=>{const rt=Oe.data(),Qe=Us(rt);return{id:Oe.id,...Qe,inUse:Ee.has(Oe.id)}});a(Me)},oe=async()=>{const Le=(await Bt(mt(Ue,"deletedItems"))).docs.map(Ee=>{const Be=Ee.data();return{id:Ee.id,...Us(Be)}});o(Le)};se.useEffect(()=>{const he=async()=>{try{console.log("ðŸ”„ ×‘×“×™×§×ª migration ×œ×ž×‘× ×” ×ª×ž×•× ×•×ª ×—×“×©...");const Ee=await ly(Ue,_r,Tt,Bt,mt);console.log("ðŸ“Š ×ª×•×¦××•×ª migration:",Ee)}catch{console.log("âš ï¸ Migration ×›×‘×¨ ×¨×¥ ××• ×©××™×Ÿ ×¦×•×¨×š ×‘×•")}};localStorage.getItem("imagesMigrationComplete")?(G(),oe()):he().then(()=>{localStorage.setItem("imagesMigrationComplete","true"),G(),oe()})},[]),se.useEffect(()=>{const he=Ee=>{I&&T.current&&!T.current.contains(Ee.target)&&N(!1)},Le=Ee=>{Ee.key==="Escape"&&N(!1)};return document.addEventListener("mousedown",he),document.addEventListener("keydown",Le),()=>{document.removeEventListener("mousedown",he),document.removeEventListener("keydown",Le)}},[I]);const re=i.filter(he=>he.name.toLowerCase().includes(l.toLowerCase())),le=s.filter(he=>he.name.toLowerCase().includes(d.toLowerCase())),de=(B-1)*z,fe=de+z,be=re.slice(de,fe),_e=(S-1)*W,Te=_e+W,Re=le.slice(_e,Te),Q=he=>{console.log("ðŸ” ×¤×•×ª×— ×ž×•×“×œ ×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª ×¢×‘×•×¨:",he.name),H(he),L(!0)},je=async he=>{if(window.confirm("×”×× ××ª/×” ×‘×˜×•×—/×” ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×ž×•×¦×¨?"))try{await hv(he,K),hi.success("×”×ž×•×¦×¨ ×”×•×¡×¨ ×ž×”×¨×©×™×ž×”."),G(),oe();const Le=re.length-1,Ee=Math.ceil(Le/z);B>Ee&&Ee>0&&k(Ee)}catch{hi.error("×©×’×™××” ×‘×ž×—×™×§×ª ×”×ž×•×¦×¨")}},He=async he=>{if(window.confirm("×”×× ×‘×¨×¦×•× ×š ×œ×”×©×™×‘ ××ª ×”×ž×•×¦×¨ ×œ×ž×œ××™?"))try{await pv(he,K),hi.success("×”×ž×•×¦×¨ ×”×•×©×‘ ×œ×ž×œ××™ ×‘×”×¦×œ×—×”."),G(),oe();const Le=le.length-1,Ee=Math.ceil(Le/W);S>Ee&&Ee>0&&D(Ee)}catch{hi.error("×©×’×™××” ×‘×”×—×–×¨×ª ×”×ž×•×¦×¨")}},Pe=async(he,Le=null)=>{var Ee,Be,Me;he.preventDefault();try{const Oe=Le||{name:r,quantity:parseInt(t),images:m?[m]:[],imageUrl:m,publicComment:R,internalComment:j},rt=mi(mt(Ue,"items"),aa("name","==",Oe.name.trim())),Qe=await Bt(rt),it=(await Bt(mt(Ue,"items"))).docs.map(Ve=>Ve.data().ItemId).filter(Ve=>typeof Ve=="number").sort((Ve,We)=>We-Ve),qe=it.length>0?it[0]+1:1;if(_)await _r(Tt(Ue,"items",_.id),{name:Oe.name,quantity:parseInt(Oe.quantity),images:Oe.images||[],imageUrl:((Ee=Oe.images)==null?void 0:Ee[0])||null,publicComment:Oe.publicComment||"",internalComment:Oe.internalComment||"",updatedBy:K,updatedAt:tr()}),hi.success("×”×ž×•×¦×¨ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”");else if(Qe.empty)await Ta(mt(Ue,"items"),{name:Oe.name,quantity:parseInt(Oe.quantity),images:Oe.images||[],imageUrl:((Be=Oe.images)==null?void 0:Be[0])||null,publicComment:Oe.publicComment||"",internalComment:Oe.internalComment||"",createdBy:K,updatedBy:K,createdAt:tr(),updatedAt:tr(),ItemId:qe}),hi.success(`×”×ž×•×¦×¨ "${Oe.name}" × ×•×¡×£ ×‘×”×¦×œ×—×” ×¢× ${((Me=Oe.images)==null?void 0:Me.length)||0} ×ª×ž×•× ×•×ª`);else{const Ve=Qe.docs[0].data();D2.confirmAlert({title:"×”×ž×•×¦×¨ ×›×‘×¨ ×§×™×™×",message:`×”×ž×•×¦×¨ "${Oe.name}" ×›×‘×¨ ×§×™×™× ×‘×›×ž×•×ª ${Ve.quantity}.
×”×× ×œ×”×•×¡×™×£ ${Oe.quantity}?`,buttons:[{label:"×›×Ÿ",onClick:async()=>{var We;await Ta(mt(Ue,"items"),{name:Oe.name,quantity:parseInt(Oe.quantity),images:Oe.images||[],imageUrl:((We=Oe.images)==null?void 0:We[0])||null,publicComment:Oe.publicComment||"",internalComment:Oe.internalComment||"",createdBy:K,updatedBy:K,createdAt:tr(),updatedAt:tr(),ItemId:qe}),hi.success("×”×›×ž×•×ª ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”"),G(),oe()}},{label:"×œ×",onClick:()=>hi.info("×‘×•×˜×œ")}]});return}e(""),n(""),h(null),v(""),U(""),E(""),y(!1),F(null),G(),oe()}catch(Oe){console.error("×©×’×™××” ×‘×”×•×¡×¤×ª ×”×ž×•×¦×¨:",Oe),hi.error("×”×•×¡×¤×ª ×”×ž×•×¦×¨ × ×›×©×œ×”")}};return f.jsxs("div",{className:"page-container",style:{padding:"1rem",direction:"rtl"},children:[f.jsxs("div",{style:{width:"100%"},children:[f.jsx("h2",{children:"× ×™×”×•×œ ×ž×•×¦×¨×™×"}),f.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[f.jsxs("button",{onClick:()=>{F(null),e(""),n(""),v(""),h(null),y(!0),U(""),E("")},className:"btn-primary",style:{backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[f.jsx(C2,{size:14})," ×”×•×¡×¤×ª ×ž×•×¦×¨"]}),f.jsxs("button",{onClick:()=>N(!0),className:"btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[f.jsx(Su,{size:14})," ×ž×•×¦×¨×™× ×©× ×ž×—×§×•"]})]}),f.jsx("input",{type:"text",dir:"rtl",placeholder:"×—×™×¤×•×© ×ž×•×¦×¨...",value:l,onChange:he=>c(he.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",marginBottom:"1rem",boxSizing:"border-box"}}),l&&f.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9"},children:f.jsxs("p",{style:{margin:0,color:"#0369a1"},children:["ðŸ” × ×ž×¦××• ",re.length,' ×ž×•×¦×¨×™× ×¢×‘×•×¨ "',l,'"']})}),f.jsx("div",{className:"products-grid-mobile",children:be.length===0?f.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:l?`×œ× × ×ž×¦××• ×ž×•×¦×¨×™× ×œ×—×™×¤×•×© "${l}"`:"×œ× × ×ž×¦× ×ž×•×¦×¨×™× ×‘×ž×œ××™."}):be.map(he=>f.jsxs("div",{className:"product-card product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",transition:"transform 0.2s",boxSizing:"border-box"},children:[f.jsx(Ws,{item:he,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),f.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1rem"},children:he.name}),f.jsxs("p",{style:{margin:"0.25rem 0"},children:["×›×ž×•×ª: ",he.quantity]}),he.internalComment&&f.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"0.25rem",margin:"0.25rem 0"},children:["ðŸ“Œ ",he.internalComment]}),f.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",margin:"0.25rem 0"},children:["×ž×–×”×” ×ž×•×¦×¨: ",he.ItemId]}),he.inUse&&f.jsx("p",{style:{color:"#d97706",fontWeight:"bold",fontSize:"0.85rem",margin:"0.25rem 0"},children:"ðŸ• ×ž×•×¦×¨ ×–×” × ×ž×¦× ×‘×”×–×ž× ×•×ª ×¤×¢×™×œ×•×ª"}),f.jsxs("div",{className:"button-group",style:{display:"flex",gap:"0.4rem",marginTop:"auto",width:"100%",flexDirection:"column"},children:[he.inUse&&f.jsxs("button",{onClick:()=>Q(he),style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:w?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:w?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",width:"100%",minHeight:w?"28px":"32px"},children:[f.jsx(I2,{size:w?12:14})," ×¨××” ×”×–×ž× ×•×ª"]}),f.jsxs("div",{style:{display:"flex",gap:"0.4rem",width:"100%"},children:[f.jsxs("button",{onClick:()=>{F(he),e(he.name),n(he.quantity.toString()),v(sy(he)||""),h(null),y(!0),U(he.publicComment||""),E(he.internalComment||"")},style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:w?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:w?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:w?"28px":"32px"},children:[f.jsx(E2,{size:w?12:14})," ×¢×¨×™×›×”"]}),f.jsxs("button",{onClick:()=>je(he.id),style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:w?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:w?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:w?"28px":"32px"},children:[f.jsx(Su,{size:w?12:14})," ×ž×—×™×§×”"]})]})]})]},he.id))}),f.jsx(o0,{currentPage:B,totalItems:re.length,itemsPerPage:z,onPageChange:k})]}),I&&f.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},children:f.jsxs("div",{className:"modal-content",ref:T,style:{position:"relative",backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80%",overflowY:"auto",padding:"2rem",direction:"rtl"},children:[f.jsx("h2",{children:"×ž×•×¦×¨×™× ×©× ×ž×—×§×•"}),f.jsx("button",{onClick:()=>N(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"Ã—"}),f.jsx("input",{type:"text",dir:"rtl",placeholder:"×—×™×¤×•×© ×ž×•×¦×¨×™× ×©× ×ž×—×§×•...",value:d,onChange:he=>u(he.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",margin:"1rem 0",boxSizing:"border-box"}}),d&&f.jsx("div",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fca5a5"},children:f.jsxs("p",{style:{margin:0,color:"#dc2626"},children:["ðŸ” × ×ž×¦××• ",le.length,' ×ž×•×¦×¨×™× ×©× ×ž×—×§×• ×¢×‘×•×¨ "',d,'"']})}),f.jsx("div",{className:"products-grid-mobile",children:Re.length===0?f.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:d?`×œ× × ×ž×¦××• ×ž×•×¦×¨×™× ×©× ×ž×—×§×• ×œ×—×™×¤×•×© "${d}"`:"××™×Ÿ ×¤×¨×™×˜×™× ×©× ×ž×—×§×•."}):Re.map(he=>f.jsxs("div",{className:"product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",boxSizing:"border-box"},children:[f.jsx(Ws,{item:he,width:"100%",height:"120px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),f.jsx("h3",{style:{margin:"0.5rem 0"},children:he.name}),f.jsxs("p",{style:{margin:"0.25rem 0"},children:["×›×ž×•×ª: ",he.quantity]}),f.jsxs("button",{onClick:()=>He(he.id),style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",marginTop:"auto"},children:[f.jsx(N2,{size:14})," ×”×©×‘×”"]})]},he.id))}),f.jsx(o0,{currentPage:S,totalItems:le.length,itemsPerPage:W,onPageChange:D})]})}),b&&f.jsx(dy,{editingItem:_,name:r,quantity:t,imageUrl:m,imageFile:p,publicComment:R,internalComment:j,onNameChange:he=>e(he.target.value.trimStart()),onQuantityChange:he=>n(he.target.value.trimStart()),onImageUrlChange:he=>v(he.target.value),onImageFileChange:he=>h(he.target.files[0]),onPublicCommentChange:he=>U(he.target.value),onInternalCommentChange:he=>E(he.target.value),onCancel:()=>y(!1),onSubmit:Pe}),O&&f.jsx(hy,{item:X,onClose:()=>{L(!1),H(null)}}),f.jsx(k2,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},gy=()=>{const{user:r}=An(),[e,t]=se.useState([]),[n,i]=se.useState(""),[a,s]=se.useState(null);se.useEffect(()=>{(async()=>{const h=mt(Ue,"users"),v=(await Bt(h)).docs.map(b=>({id:b.id,...b.data()}));t(v)})()},[]),se.useEffect(()=>{(async()=>{try{const h=Tt(Ue,"settings","onlineOrdering"),m=await qo(h);m.exists()&&s(m.data().enabled)}catch(h){console.error("×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×’×“×¨×”:",h)}})()},[]);const o=async(p,h)=>{const m=Tt(Ue,"users",p);await _r(m,{role:h}),t(e.map(v=>v.id===p?{...v,role:h}:v))},l=async()=>{try{const p=!a;await _r(Tt(Ue,"settings","onlineOrdering"),{enabled:p}),s(p)}catch(p){alert("×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×”×’×“×¨×”: "+p.message)}},c={container:{padding:"1rem",direction:"rtl",maxWidth:"100%",overflow:"hidden"},header:{fontSize:"1.8rem",marginBottom:"2rem",textAlign:"center",color:"#333",fontWeight:"600"},toggleBox:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"2rem",backgroundColor:"#f8f9fa",padding:"16px 24px",borderRadius:"15px",border:"2px solid #e9ecef",maxWidth:"400px",margin:"0 auto 2rem auto",boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},toggleSwitch:{width:"50px",height:"28px",borderRadius:"50px",backgroundColor:a?"#4caf50":"#e74c3c",position:"relative",cursor:"pointer",transition:"0.3s",flexShrink:0},toggleCircle:{position:"absolute",top:"3px",left:a?"25px":"3px",width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"white",transition:"0.3s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},searchBox:{padding:"12px 16px",width:"100%",maxWidth:"500px",borderRadius:"10px",border:"2px solid #ddd",fontSize:"16px",marginBottom:"2rem",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s ease",display:"block",margin:"0 auto 2rem auto"},tableContainer:{overflowX:"auto",marginTop:"1rem",borderRadius:"12px",border:"1px solid #ddd",maxWidth:"1200px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},table:{width:"100%",borderCollapse:"collapse",minWidth:"600px",backgroundColor:"white"},th:{border:"1px solid #ddd",padding:"12px 8px",backgroundColor:"#f8f9fa",fontWeight:"600",fontSize:"0.9rem",textAlign:"center",whiteSpace:"nowrap"},td:{border:"1px solid #ddd",padding:"12px 8px",textAlign:"center",fontSize:"0.85rem",verticalAlign:"middle"},button:{padding:"8px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"100px",transition:"opacity 0.2s ease"},promoteBtn:{backgroundColor:"#28a745",color:"white"},demoteBtn:{backgroundColor:"#dc3545",color:"white"}};if(!r||r.role!=="MainAdmin")return f.jsx("div",{style:{padding:"2rem",textAlign:"center",direction:"rtl"},children:f.jsx("p",{children:"××™×Ÿ ×œ×š ×’×™×©×” ×œ×¢×ž×•×“ ×–×”"})});const d=e.filter(p=>p.username&&p.username.toLowerCase().includes(n.toLowerCase())),u=({user:p})=>f.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[f.jsx("h4",{style:{margin:0,color:"#333",fontSize:"1.1rem"},children:p.username}),f.jsx("span",{style:{backgroundColor:p.role==="MainAdmin"?"#6f42c1":p.role==="GmachAdmin"?"#17a2b8":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"500"},children:p.role==="User"?"×ž×©×ª×ž×© ×¨×’×™×œ":p.role==="GmachAdmin"?'×ž× ×”×œ ×’×ž"×—':p.role==="MainAdmin"?"×ž× ×”×œ ×¨××©×™":p.role})]}),f.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"0.9rem",wordBreak:"break-all"},children:["ðŸ“§ ",p.email]}),p.role!=="MainAdmin"&&f.jsx("div",{style:{marginTop:"1rem"},children:p.role==="User"?f.jsx("button",{style:{...c.button,...c.promoteBtn,width:"100%"},onClick:()=>o(p.id,"GmachAdmin"),children:'×©×“×¨×’ ×œ×ž× ×”×œ ×’×ž"×—'}):f.jsx("button",{style:{...c.button,...c.demoteBtn,width:"100%"},onClick:()=>o(p.id,"User"),children:"×”×—×–×¨ ×œ×ž×©×ª×ž×© ×¨×’×™×œ"})})]});return f.jsxs(f.Fragment,{children:[f.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-table {
              display: none !important;
            }
            .mobile-cards {
              display: block !important;
            }
            .container-mobile {
              padding: 1rem !important;
            }
            .header-mobile {
              font-size: 1.5rem !important;
              margin-bottom: 1.5rem !important;
            }
            .toggle-mobile {
              max-width: 100% !important;
              margin: 0 0 1.5rem 0 !important;
              padding: 12px 16px !important;
            }
            .search-mobile {
              margin: 0 0 1.5rem 0 !important;
              max-width: 100% !important;
            }
          }
          
          @media (min-width: 769px) {
            .desktop-table {
              display: table !important;
            }
            .mobile-cards {
              display: none !important;
            }
            .container-desktop {
              padding: 2rem !important;
              max-width: 1400px !important;
              margin: 0 auto !important;
            }
          }
          
          input:focus {
            border-color: #1976d2 !important;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
          }
          
          button:hover {
            opacity: 0.9;
          }
          
          button:active {
            transform: translateY(1px);
          }
        `}),f.jsxs("div",{style:c.container,className:"container-mobile container-desktop",children:[f.jsx("h2",{style:c.header,className:"header-mobile",children:"× ×™×”×•×œ ×ž×©×ª×ž×©×™×"}),a!==null&&f.jsxs("div",{style:c.toggleBox,className:"toggle-mobile",children:[f.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"×”×–×ž× ×•×ª ×“×¨×š ×”××ª×¨:"}),f.jsx("div",{style:c.toggleSwitch,onClick:l,children:f.jsx("div",{style:c.toggleCircle})})]}),f.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×ž×©×ª×ž×©...",value:n,onChange:p=>i(p.target.value),style:c.searchBox,className:"search-mobile",dir:"rtl"}),f.jsx("div",{style:c.tableContainer,className:"desktop-table",children:f.jsxs("table",{style:c.table,children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{style:c.th,children:"×©× ×ž×©×ª×ž×©"}),f.jsx("th",{style:c.th,children:"××™×ž×™×™×œ"}),f.jsx("th",{style:c.th,children:"×”×¨×©××”"}),f.jsx("th",{style:c.th,children:"×¤×¢×•×œ×”"})]})}),f.jsx("tbody",{children:d.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"×œ× × ×ž×¦××• ×ž×©×ª×ž×©×™× ×ª×•××ž×™×"})}):d.map(p=>f.jsxs("tr",{children:[f.jsx("td",{style:c.td,children:p.username}),f.jsx("td",{style:c.td,children:p.email}),f.jsx("td",{style:c.td,children:p.role==="User"?"×ž×©×ª×ž×© ×¨×’×™×œ":p.role==="GmachAdmin"?'×ž× ×”×œ ×’×ž"×—':p.role==="MainAdmin"?"×ž× ×”×œ ×¨××©×™":p.role}),f.jsxs("td",{style:c.td,children:[p.role!=="MainAdmin"&&(p.role==="User"?f.jsx("button",{style:{...c.button,...c.promoteBtn},onClick:()=>o(p.id,"GmachAdmin"),children:'×©×“×¨×’ ×œ×ž× ×”×œ ×’×ž"×—'}):f.jsx("button",{style:{...c.button,...c.demoteBtn},onClick:()=>o(p.id,"User"),children:"×”×—×–×¨ ×œ×ž×©×ª×ž×© ×¨×’×™×œ"})),p.role==="MainAdmin"&&f.jsx("span",{style:{color:"#999",fontSize:"0.8rem"},children:"---"})]})]},p.id))})]})}),f.jsx("div",{className:"mobile-cards",style:{display:"none"},children:d.length===0?f.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",backgroundColor:"white",borderRadius:"12px",border:"1px solid #ddd"},children:"×œ× × ×ž×¦××• ×ž×©×ª×ž×©×™× ×ª×•××ž×™×"}):d.map(p=>f.jsx(u,{user:p},p.id))})]})]})},my=({item:r,isOpen:e,onClose:t})=>!e||!r?null:f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",direction:"rtl"},onClick:t,children:f.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative",padding:"1.5rem",boxShadow:"0 20px 40px rgba(0,0,0,0.3)"},onClick:n=>n.stopPropagation(),children:[f.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",left:"1rem",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1001,transition:"background 0.2s ease"},onMouseEnter:n=>n.target.style.background="#e5e7eb",onMouseLeave:n=>n.target.style.background="#f3f4f6",children:f.jsx(xi,{size:20})}),f.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"2rem",alignItems:"flex-start"},children:[f.jsx("div",{style:{flex:window.innerWidth<=768?"none":"1",width:window.innerWidth<=768?"100%":"400px"},children:f.jsx(Ws,{item:r,width:"100%",height:window.innerWidth<=768?"300px":"400px",showNavigation:!0,style:{borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})}),f.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[f.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",textAlign:"center"},children:r.name}),f.jsx("div",{style:{backgroundColor:"#f8fafc",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:f.jsxs("p",{style:{fontSize:"1.1rem",color:"#4b5563",margin:0,textAlign:"center"},children:[f.jsx("strong",{children:"×ž×–×”×” ×ž×•×¦×¨:"})," ",r.ItemId]})}),r.publicComment&&f.jsxs("div",{style:{backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[f.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#1e40af",fontSize:"1rem"},children:"ðŸ“ ×”×¢×¨×•×ª"}),f.jsx("p",{style:{margin:0,color:"#1e3a8a",fontSize:"1rem"},children:r.publicComment})]})]})]})]})}),xy=({currentPage:r,totalItems:e,itemsPerPage:t,onPageChange:n,className:i=""})=>{const a=Math.ceil(e/t),s=window.innerWidth<=768;if(a<=1)return null;const l=(()=>{const u=s?5:7,p=Math.floor(u/2);let h=Math.max(1,r-p),m=Math.min(a,h+u-1);m-h+1<u&&(h=Math.max(1,m-u+1));const v=[];h>1&&(v.push(1),h>2&&v.push("..."));for(let b=h;b<=m;b++)v.push(b);return m<a&&(m<a-1&&v.push("..."),v.push(a)),v})(),c=(r-1)*t+1,d=Math.min(r*t,e);return f.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[f.jsxs("div",{style:{fontSize:s?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["×ž×¦×™×’ ",c,"-",d," ×ž×ª×•×š ",e," ×ž×•×¦×¨×™×"]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[f.jsx("button",{onClick:()=>n(r-1),disabled:r===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===1?"#f9fafb":"white",color:r===1?"#9ca3af":"#374151",cursor:r===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:f.jsx(Go,{size:s?16:20})}),l.map((u,p)=>{if(u==="...")return f.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",color:"#9ca3af"},children:f.jsx(vf,{size:s?16:20})},`dots-${p}`);const h=u===r;return f.jsx("button",{onClick:()=>n(u),style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:h?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:h?"#3b82f6":"white",color:h?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:h?"bold":"normal",fontSize:s?"14px":"16px"},children:u},u)}),f.jsx("button",{onClick:()=>n(r+1),disabled:r===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:s?"36px":"40px",height:s?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:r===a?"#f9fafb":"white",color:r===a?"#9ca3af":"#374151",cursor:r===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:f.jsx($o,{size:s?16:20})})]})]})},vy=()=>{const[r,e]=se.useState([]),[t,n]=se.useState(""),[i,a]=se.useState(!0),[s,o]=se.useState(null),[l,c]=se.useState(!1),[d,u]=se.useState(1),[p,h]=se.useState(window.innerWidth<=768),m=p?12:20;se.useEffect(()=>{const F=()=>{const R=window.innerWidth<=768;R!==p&&(h(R),u(1))};return window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[p]),se.useEffect(()=>{u(1)},[t]),se.useEffect(()=>{const F=mt(Ue,"items"),R=Xo(F,U=>{const j=U.docs.map(E=>{const B=E.data(),k=Us(B);return{id:E.id,...k}}).filter(E=>E.isDeleted!==!0);e(j),a(!1)});return()=>R()},[]);const v=(F,R)=>{R.target.closest("button")||R.target.closest("[data-navigation]")||(o(F),c(!0))},b=()=>{c(!1),o(null)};if(i)return f.jsxs("div",{style:{padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[f.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),f.jsx("h2",{children:"×˜×•×¢×Ÿ ×§×˜×œ×•×’"}),f.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]});const y=r.filter(F=>F.name.toLowerCase().includes(t.toLowerCase())),I=(d-1)*m,N=I+m,_=y.slice(I,N);return f.jsxs("div",{style:{padding:"2rem",direction:"rtl",textAlign:"right",paddingLeft:"1rem",paddingRight:"1rem"},children:[f.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"2rem",color:"#1f2937"},children:"×§×˜×œ×•×’ ×ž×•×¦×¨×™×"}),f.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×¤×¨×™×˜",value:t,onChange:F=>n(F.target.value),dir:"rtl",style:{padding:"12px 16px",width:"100%",marginBottom:"1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:F=>F.target.style.borderColor="#3b82f6",onBlur:F=>F.target.style.borderColor="#e5e7eb"}),t&&f.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #0ea5e9",textAlign:"center"},children:f.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"1rem"},children:["ðŸ” × ×ž×¦××• ",y.length,' ×ž×•×¦×¨×™× ×¢×‘×•×¨ "',t,'"']})}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:_.length===0?f.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",marginTop:"3rem",padding:"2rem"},children:t?f.jsxs(f.Fragment,{children:[f.jsxs("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:['×œ× × ×ž×¦××• ×¤×¨×™×˜×™× ×¢×‘×•×¨ "',t,'"']}),f.jsx("p",{style:{color:"#9ca3af"},children:"× ×¡×” ×œ×—×¤×© ×‘×ž×™×œ×•×ª ×ž×¤×ª×— ××—×¨×•×ª"})]}):f.jsxs(f.Fragment,{children:[f.jsx("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:"×œ× × ×ž×¦××• ×¤×¨×™×˜×™×"}),f.jsx("p",{style:{color:"#9ca3af"},children:"×× × × ×¡×” ×œ×—×¤×© ×©×•×‘ ××• ×¦×•×¨ ×§×©×¨ ×¢× ×”×ž× ×”×œ×™×"})]})}):_.map(F=>f.jsxs("div",{style:{border:"1px solid #e5e7eb",padding:"0.8rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"all 0.3s ease-in-out",minHeight:"250px",maxWidth:"100%",cursor:"pointer"},onMouseEnter:R=>{R.currentTarget.style.transform="scale(1.05) translateY(-8px)",R.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.2)",R.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:R=>{R.currentTarget.style.transform="scale(1) translateY(0)",R.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",R.currentTarget.style.borderColor="#e5e7eb"},onClick:R=>v(F,R),children:[f.jsx(Ws,{item:F,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem",borderRadius:"4px"}}),f.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[f.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"1.1rem",lineHeight:"1.3",textAlign:"center",color:"#1f2937",fontWeight:"700"},children:F.name}),F.publicComment&&f.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",margin:"0.3rem 0",fontStyle:"italic",background:"#f9fafb",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:["ðŸ“ ",F.publicComment]}),f.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",textAlign:"center",marginTop:"auto",paddingTop:"0.5rem"},children:["×ž×–×”×”: ",F.ItemId]})]})]},F.ItemId))}),f.jsx(xy,{currentPage:d,totalItems:y.length,itemsPerPage:m,onPageChange:u}),f.jsx(my,{item:s,isOpen:l,onClose:b}),f.jsx("style",{jsx:!0,children:`
        @media (max-width: 768px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.8rem !important;
          }
        }
        
        @media (max-width: 480px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
          }
        }
      `})]})},yy="modulepreload",by=function(r){return"/"+r},s0={},pd=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let s=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=s(t.map(c=>{if(c=by(c),c in s0)return;s0[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":yy,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((h,m)=>{p.addEventListener("load",h),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Yt(r){"@babel/helpers - typeof";return Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(r)}var vi=Uint8Array,zn=Uint16Array,Tf=Int32Array,Rf=new vi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lf=new vi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l0=new vi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sh=function(r,e){for(var t=new zn(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new Tf(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)i[a]=a-t[n]<<5|n;return{b:t,r:i}},_h=Sh(Rf,2),wy=_h.b,tf=_h.r;wy[28]=258,tf[258]=28;var Ay=Sh(Lf,0),c0=Ay.r,rf=new zn(32768);for(var cr=0;cr<32768;++cr){var Ca=(cr&43690)>>1|(cr&21845)<<1;Ca=(Ca&52428)>>2|(Ca&13107)<<2,Ca=(Ca&61680)>>4|(Ca&3855)<<4,rf[cr]=((Ca&65280)>>8|(Ca&255)<<8)>>1}var Ps=function(r,e,t){for(var n=r.length,i=0,a=new zn(e);i<n;++i)r[i]&&++a[r[i]-1];var s=new zn(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(t){o=new zn(1<<e);var l=15-e;for(i=0;i<n;++i)if(r[i])for(var c=i<<4|r[i],d=e-r[i],u=s[r[i]-1]++<<d,p=u|(1<<d)-1;u<=p;++u)o[rf[u]>>l]=c}else for(o=new zn(n),i=0;i<n;++i)r[i]&&(o[i]=rf[s[r[i]-1]++]>>15-r[i]);return o},co=new vi(288);for(var cr=0;cr<144;++cr)co[cr]=8;for(var cr=144;cr<256;++cr)co[cr]=9;for(var cr=256;cr<280;++cr)co[cr]=7;for(var cr=280;cr<288;++cr)co[cr]=8;var dc=new vi(32);for(var cr=0;cr<32;++cr)dc[cr]=5;var Sy=Ps(co,9,0),_y=Ps(dc,5,0),Ch=function(r){return(r+7)/8|0},Cy=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new vi(r.subarray(e,t))},ea=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Ds=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},gd=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,a=t.slice();if(!i)return{t:Eh,l:0};if(i==1){var s=new vi(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(F,R){return F.f-R.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,d=1,u=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=t[t[c].f<t[u].f?c++:u++],l=t[c!=d&&t[c].f<t[u].f?c++:u++],t[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,n=1;n<i;++n)a[n].s>p&&(p=a[n].s);var h=new zn(p+1),m=nf(t[d-1],h,0);if(m>e){var n=0,v=0,b=m-e,y=1<<b;for(a.sort(function(R,U){return h[U.s]-h[R.s]||R.f-U.f});n<i;++n){var I=a[n].s;if(h[I]>e)v+=y-(1<<m-h[I]),h[I]=e;else break}for(v>>=b;v>0;){var N=a[n].s;h[N]<e?v-=1<<e-h[N]++-1:++n}for(;n>=0&&v;--n){var _=a[n].s;h[_]==e&&(--h[_],++v)}m=e}return{t:new vi(h),l:m}},nf=function(r,e,t){return r.s==-1?Math.max(nf(r.l,e,t+1),nf(r.r,e,t+1)):e[r.s]=t},d0=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new zn(++e),n=0,i=r[0],a=1,s=function(l){t[n++]=l},o=1;o<=e;++o)if(r[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=r[o]}return{c:t.subarray(0,n),n:e}},js=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Ih=function(r,e,t){var n=t.length,i=Ch(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var a=0;a<n;++a)r[i+a+4]=t[a];return(i+4+n)*8},f0=function(r,e,t,n,i,a,s,o,l,c,d){ea(e,d++,t),++i[256];for(var u=gd(i,15),p=u.t,h=u.l,m=gd(a,15),v=m.t,b=m.l,y=d0(p),I=y.c,N=y.n,_=d0(v),F=_.c,R=_.n,U=new zn(19),j=0;j<I.length;++j)++U[I[j]&31];for(var j=0;j<F.length;++j)++U[F[j]&31];for(var E=gd(U,7),B=E.t,k=E.l,S=19;S>4&&!B[l0[S-1]];--S);var D=c+5<<3,w=js(i,co)+js(a,dc)+s,M=js(i,p)+js(a,v)+s+14+3*S+js(U,B)+2*U[16]+3*U[17]+7*U[18];if(l>=0&&D<=w&&D<=M)return Ih(e,d,r.subarray(l,l+c));var O,L,X,H;if(ea(e,d,1+(M<w)),d+=2,M<w){O=Ps(p,h,0),L=p,X=Ps(v,b,0),H=v;var ee=Ps(B,k,0);ea(e,d,N-257),ea(e,d+5,R-1),ea(e,d+10,S-4),d+=14;for(var j=0;j<S;++j)ea(e,d+3*j,B[l0[j]]);d+=3*S;for(var K=[I,F],T=0;T<2;++T)for(var z=K[T],j=0;j<z.length;++j){var W=z[j]&31;ea(e,d,ee[W]),d+=B[W],W>15&&(ea(e,d,z[j]>>5&127),d+=z[j]>>12)}}else O=Sy,L=co,X=_y,H=dc;for(var j=0;j<o;++j){var G=n[j];if(G>255){var W=G>>18&31;Ds(e,d,O[W+257]),d+=L[W+257],W>7&&(ea(e,d,G>>23&31),d+=Rf[W]);var oe=G&31;Ds(e,d,X[oe]),d+=H[oe],oe>3&&(Ds(e,d,G>>5&8191),d+=Lf[oe])}else Ds(e,d,O[G]),d+=L[G]}return Ds(e,d,O[256]),d+L[256]},Iy=new Tf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Eh=new vi(0),Ey=function(r,e,t,n,i,a){var s=a.z||r.length,o=new vi(n+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(n,o.length-i),c=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var u=Iy[e-1],p=u>>13,h=u&8191,m=(1<<t)-1,v=a.p||new zn(32768),b=a.h||new zn(m+1),y=Math.ceil(t/3),I=2*y,N=function(Re){return(r[Re]^r[Re+1]<<y^r[Re+2]<<I)&m},_=new Tf(25e3),F=new zn(288),R=new zn(32),U=0,j=0,E=a.i||0,B=0,k=a.w||0,S=0;E+2<s;++E){var D=N(E),w=E&32767,M=b[D];if(v[w]=M,b[D]=w,k<=E){var O=s-E;if((U>7e3||B>24576)&&(O>423||!c)){d=f0(r,l,0,_,F,R,j,B,S,E-S,d),B=U=j=0,S=E;for(var L=0;L<286;++L)F[L]=0;for(var L=0;L<30;++L)R[L]=0}var X=2,H=0,ee=h,K=w-M&32767;if(O>2&&D==N(E-K))for(var T=Math.min(p,O)-1,z=Math.min(32767,E),W=Math.min(258,O);K<=z&&--ee&&w!=M;){if(r[E+X]==r[E+X-K]){for(var G=0;G<W&&r[E+G]==r[E+G-K];++G);if(G>X){if(X=G,H=K,G>T)break;for(var oe=Math.min(K,G-2),re=0,L=0;L<oe;++L){var le=E-K+L&32767,de=v[le],fe=le-de&32767;fe>re&&(re=fe,M=le)}}}w=M,M=v[w],K+=w-M&32767}if(H){_[B++]=268435456|tf[X]<<18|c0[H];var be=tf[X]&31,_e=c0[H]&31;j+=Rf[be]+Lf[_e],++F[257+be],++R[_e],k=E+X,++U}else _[B++]=r[E],++F[r[E]]}}for(E=Math.max(E,k);E<s;++E)_[B++]=r[E],++F[r[E]];d=f0(r,l,c,_,F,R,j,B,S,E-S,d),c||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=b,a.p=v,a.i=E,a.w=k)}else{for(var E=a.w||0;E<s+c;E+=65535){var Te=E+65535;Te>=s&&(l[d/8|0]=c,Te=s),d=Ih(l,d+1,r.subarray(E,Te))}a.i=s}return Cy(o,0,n+Ch(d)+i)},Nh=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,a=t.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=n+=t[s];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},Ny=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new vi(a.length+r.length);s.set(a),s.set(r,a.length),r=s,i.w=a.length}return Ey(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},kh=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},ky=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=Nh();i.p(e.dictionary),kh(r,2,i.d())}};function af(r,e){e||(e={});var t=Nh();t.p(r);var n=Ny(r,e,e.dictionary?6:2,4);return ky(n,e),kh(n,n.length-4,t.d()),n}var Dy=typeof TextDecoder<"u"&&new TextDecoder,jy=0;try{Dy.decode(Eh,{stream:!0}),jy=1}catch{}function Oy(r){if(Array.isArray(r))return r}function Ty(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(l=(n=a.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function u0(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Ry(r,e){if(r){if(typeof r=="string")return u0(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u0(r,e):void 0}}function Ly(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h0(r,e){return Oy(r)||Ty(r,e)||Ry(r,e)||Ly()}function p0(r,e="utf8"){return new TextDecoder(e).decode(r)}const Py=new TextEncoder;function My(r){return Py.encode(r)}const By=1024*8,Fy=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),md={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Pf{constructor(e=By,t={}){Gt(this,"buffer");Gt(this,"byteLength");Gt(this,"byteOffset");Gt(this,"length");Gt(this,"offset");Gt(this,"lastWrittenByte");Gt(this,"littleEndian");Gt(this,"_data");Gt(this,"_mark");Gt(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,a=e.byteLength-i;let s=i;(ArrayBuffer.isView(e)||e instanceof Pf)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=md[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===Fy&&t!=="uint8"&&t!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new md[t](o.buffer);return this.offset+=n,l.reverse(),l}const s=new md[t](a);return this.offset+=n,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return p0(this.readBytes(e))}decodeText(e=1,t="utf8"){return p0(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(My(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ko(r){let e=r.length;for(;--e>=0;)r[e]=0}const zy=3,Uy=258,Dh=29,Wy=256,Hy=Wy+1+Dh,jh=30,qy=512,Vy=new Array((Hy+2)*2);Ko(Vy);const Gy=new Array(jh*2);Ko(Gy);const $y=new Array(qy);Ko($y);const Xy=new Array(Uy-zy+1);Ko(Xy);const Yy=new Array(Dh);Ko(Yy);const Ky=new Array(jh);Ko(Ky);const Zy=(r,e,t,n)=>{let i=r&65535|0,a=r>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var of=Zy;const Qy=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},Jy=new Uint32Array(Qy()),eb=(r,e,t,n)=>{const i=Jy,a=n+t;r^=-1;for(let s=n;s<a;s++)r=r>>>8^i[(r^e[s])&255];return r^-1};var ki=eb,sf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Oh={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const tb=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var rb=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)tb(t,n)&&(r[n]=t[n])}}return r},nb=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,a=r.length;n<a;n++){let s=r[n];t.set(s,i),i+=s.length}return t},Th={assign:rb,flattenChunks:nb};let Rh=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Rh=!1}const Hs=new Uint8Array(256);for(let r=0;r<256;r++)Hs[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Hs[254]=Hs[254]=1;var ib=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,a,s=r.length,o=0;for(i=0;i<s;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<s&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<s&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const ab=(r,e)=>{if(e<65534&&r.subarray&&Rh)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var ob=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const a=new Array(t*2);for(i=0,n=0;n<t;){let s=r[n++];if(s<128){a[i++]=s;continue}let o=Hs[s];if(o>4){a[i++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<t;)s=s<<6|r[n++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return ab(a,i)},sb=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+Hs[r[t]]>e?t:e},lf={string2buf:ib,buf2string:ob,utf8border:sb};function lb(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var cb=lb;const Ml=16209,db=16191;var fb=function(e,t){let n,i,a,s,o,l,c,d,u,p,h,m,v,b,y,I,N,_,F,R,U,j,E,B;const k=e.state;n=e.next_in,E=e.input,i=n+(e.avail_in-5),a=e.next_out,B=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),l=k.dmax,c=k.wsize,d=k.whave,u=k.wnext,p=k.window,h=k.hold,m=k.bits,v=k.lencode,b=k.distcode,y=(1<<k.lenbits)-1,I=(1<<k.distbits)-1;e:do{m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),N=v[h&y];t:for(;;){if(_=N>>>24,h>>>=_,m-=_,_=N>>>16&255,_===0)B[a++]=N&65535;else if(_&16){F=N&65535,_&=15,_&&(m<_&&(h+=E[n++]<<m,m+=8),F+=h&(1<<_)-1,h>>>=_,m-=_),m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),N=b[h&I];r:for(;;){if(_=N>>>24,h>>>=_,m-=_,_=N>>>16&255,_&16){if(R=N&65535,_&=15,m<_&&(h+=E[n++]<<m,m+=8,m<_&&(h+=E[n++]<<m,m+=8)),R+=h&(1<<_)-1,R>l){e.msg="invalid distance too far back",k.mode=Ml;break e}if(h>>>=_,m-=_,_=a-s,R>_){if(_=R-_,_>d&&k.sane){e.msg="invalid distance too far back",k.mode=Ml;break e}if(U=0,j=p,u===0){if(U+=c-_,_<F){F-=_;do B[a++]=p[U++];while(--_);U=a-R,j=B}}else if(u<_){if(U+=c+u-_,_-=u,_<F){F-=_;do B[a++]=p[U++];while(--_);if(U=0,u<F){_=u,F-=_;do B[a++]=p[U++];while(--_);U=a-R,j=B}}}else if(U+=u-_,_<F){F-=_;do B[a++]=p[U++];while(--_);U=a-R,j=B}for(;F>2;)B[a++]=j[U++],B[a++]=j[U++],B[a++]=j[U++],F-=3;F&&(B[a++]=j[U++],F>1&&(B[a++]=j[U++]))}else{U=a-R;do B[a++]=B[U++],B[a++]=B[U++],B[a++]=B[U++],F-=3;while(F>2);F&&(B[a++]=B[U++],F>1&&(B[a++]=B[U++]))}}else if((_&64)===0){N=b[(N&65535)+(h&(1<<_)-1)];continue r}else{e.msg="invalid distance code",k.mode=Ml;break e}break}}else if((_&64)===0){N=v[(N&65535)+(h&(1<<_)-1)];continue t}else if(_&32){k.mode=db;break e}else{e.msg="invalid literal/length code",k.mode=Ml;break e}break}}while(n<i&&a<o);F=m>>3,n-=F,m-=F<<3,h&=(1<<m)-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=a<o?257+(o-a):257-(a-o),k.hold=h,k.bits=m};const Do=15,g0=852,m0=592,x0=0,xd=1,v0=2,ub=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),hb=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pb=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gb=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),mb=(r,e,t,n,i,a,s,o)=>{const l=o.bits;let c=0,d=0,u=0,p=0,h=0,m=0,v=0,b=0,y=0,I=0,N,_,F,R,U,j=null,E;const B=new Uint16Array(Do+1),k=new Uint16Array(Do+1);let S=null,D,w,M;for(c=0;c<=Do;c++)B[c]=0;for(d=0;d<n;d++)B[e[t+d]]++;for(h=l,p=Do;p>=1&&B[p]===0;p--);if(h>p&&(h=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(u=1;u<p&&B[u]===0;u++);for(h<u&&(h=u),b=1,c=1;c<=Do;c++)if(b<<=1,b-=B[c],b<0)return-1;if(b>0&&(r===x0||p!==1))return-1;for(k[1]=0,c=1;c<Do;c++)k[c+1]=k[c]+B[c];for(d=0;d<n;d++)e[t+d]!==0&&(s[k[e[t+d]]++]=d);if(r===x0?(j=S=s,E=20):r===xd?(j=ub,S=hb,E=257):(j=pb,S=gb,E=0),I=0,d=0,c=u,U=a,m=h,v=0,F=-1,y=1<<h,R=y-1,r===xd&&y>g0||r===v0&&y>m0)return 1;for(;;){D=c-v,s[d]+1<E?(w=0,M=s[d]):s[d]>=E?(w=S[s[d]-E],M=j[s[d]-E]):(w=96,M=0),N=1<<c-v,_=1<<m,u=_;do _-=N,i[U+(I>>v)+_]=D<<24|w<<16|M|0;while(_!==0);for(N=1<<c-1;I&N;)N>>=1;if(N!==0?(I&=N-1,I+=N):I=0,d++,--B[c]===0){if(c===p)break;c=e[t+s[d]]}if(c>h&&(I&R)!==F){for(v===0&&(v=h),U+=u,m=c-v,b=1<<m;m+v<p&&(b-=B[m+v],!(b<=0));)m++,b<<=1;if(y+=1<<m,r===xd&&y>g0||r===v0&&y>m0)return 1;F=I&R,i[F]=h<<24|m<<16|U-a|0}}return I!==0&&(i[U+I]=c-v<<24|64<<16|0),o.bits=h,0};var Ms=mb;const xb=0,Lh=1,Ph=2,{Z_FINISH:y0,Z_BLOCK:vb,Z_TREES:Bl,Z_OK:fo,Z_STREAM_END:yb,Z_NEED_DICT:bb,Z_STREAM_ERROR:ei,Z_DATA_ERROR:Mh,Z_MEM_ERROR:Bh,Z_BUF_ERROR:wb,Z_DEFLATED:b0}=Oh,Sc=16180,w0=16181,A0=16182,S0=16183,_0=16184,C0=16185,I0=16186,E0=16187,N0=16188,k0=16189,fc=16190,ta=16191,vd=16192,D0=16193,yd=16194,j0=16195,O0=16196,T0=16197,R0=16198,Fl=16199,zl=16200,L0=16201,P0=16202,M0=16203,B0=16204,F0=16205,bd=16206,z0=16207,U0=16208,dr=16209,Fh=16210,zh=16211,Ab=852,Sb=592,_b=15,Cb=_b,W0=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function Ib(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ho=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Sc||e.mode>zh?1:0},Uh=r=>{if(ho(r))return ei;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Sc,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Ab),e.distcode=e.distdyn=new Int32Array(Sb),e.sane=1,e.back=-1,fo},Wh=r=>{if(ho(r))return ei;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Uh(r)},Hh=(r,e)=>{let t;if(ho(r))return ei;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ei:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,Wh(r))},qh=(r,e)=>{if(!r)return ei;const t=new Ib;r.state=t,t.strm=r,t.window=null,t.mode=Sc;const n=Hh(r,e);return n!==fo&&(r.state=null),n},Eb=r=>qh(r,Cb);let H0=!0,wd,Ad;const Nb=r=>{if(H0){wd=new Int32Array(512),Ad=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Ms(Lh,r.lens,0,288,wd,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Ms(Ph,r.lens,0,32,Ad,0,r.work,{bits:5}),H0=!1}r.lencode=wd,r.lenbits=9,r.distcode=Ad,r.distbits=5},Vh=(r,e,t,n)=>{let i;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(e.subarray(t-n,t-n+i),a.wnext),n-=i,n?(a.window.set(e.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},kb=(r,e)=>{let t,n,i,a,s,o,l,c,d,u,p,h,m,v,b=0,y,I,N,_,F,R,U,j;const E=new Uint8Array(4);let B,k;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ho(r)||!r.output||!r.input&&r.avail_in!==0)return ei;t=r.state,t.mode===ta&&(t.mode=vd),s=r.next_out,i=r.output,l=r.avail_out,a=r.next_in,n=r.input,o=r.avail_in,c=t.hold,d=t.bits,u=o,p=l,j=fo;e:for(;;)switch(t.mode){case Sc:if(t.wrap===0){t.mode=vd;break}for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,E[0]=c&255,E[1]=c>>>8&255,t.check=ki(t.check,E,2,0),c=0,d=0,t.mode=w0;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){r.msg="incorrect header check",t.mode=dr;break}if((c&15)!==b0){r.msg="unknown compression method",t.mode=dr;break}if(c>>>=4,d-=4,U=(c&15)+8,t.wbits===0&&(t.wbits=U),U>15||U>t.wbits){r.msg="invalid window size",t.mode=dr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=c&512?k0:ta,c=0,d=0;break;case w0:for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(t.flags=c,(t.flags&255)!==b0){r.msg="unknown compression method",t.mode=dr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=dr;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,t.check=ki(t.check,E,2,0)),c=0,d=0,t.mode=A0;case A0:for(;d<32;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,t.check=ki(t.check,E,4,0)),c=0,d=0,t.mode=S0;case S0:for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,t.check=ki(t.check,E,2,0)),c=0,d=0,t.mode=_0;case _0:if(t.flags&1024){for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,t.check=ki(t.check,E,2,0)),c=0,d=0}else t.head&&(t.head.extra=null);t.mode=C0;case C0:if(t.flags&1024&&(h=t.length,h>o&&(h=o),h&&(t.head&&(U=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+h),U)),t.flags&512&&t.wrap&4&&(t.check=ki(t.check,n,h,a)),o-=h,a+=h,t.length-=h),t.length))break e;t.length=0,t.mode=I0;case I0:if(t.flags&2048){if(o===0)break e;h=0;do U=n[a+h++],t.head&&U&&t.length<65536&&(t.head.name+=String.fromCharCode(U));while(U&&h<o);if(t.flags&512&&t.wrap&4&&(t.check=ki(t.check,n,h,a)),o-=h,a+=h,U)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=E0;case E0:if(t.flags&4096){if(o===0)break e;h=0;do U=n[a+h++],t.head&&U&&t.length<65536&&(t.head.comment+=String.fromCharCode(U));while(U&&h<o);if(t.flags&512&&t.wrap&4&&(t.check=ki(t.check,n,h,a)),o-=h,a+=h,U)break e}else t.head&&(t.head.comment=null);t.mode=N0;case N0:if(t.flags&512){for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(t.wrap&4&&c!==(t.check&65535)){r.msg="header crc mismatch",t.mode=dr;break}c=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=ta;break;case k0:for(;d<32;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}r.adler=t.check=W0(c),c=0,d=0,t.mode=fc;case fc:if(t.havedict===0)return r.next_out=s,r.avail_out=l,r.next_in=a,r.avail_in=o,t.hold=c,t.bits=d,bb;r.adler=t.check=1,t.mode=ta;case ta:if(e===vb||e===Bl)break e;case vd:if(t.last){c>>>=d&7,d-=d&7,t.mode=bd;break}for(;d<3;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}switch(t.last=c&1,c>>>=1,d-=1,c&3){case 0:t.mode=D0;break;case 1:if(Nb(t),t.mode=Fl,e===Bl){c>>>=2,d-=2;break e}break;case 2:t.mode=O0;break;case 3:r.msg="invalid block type",t.mode=dr}c>>>=2,d-=2;break;case D0:for(c>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){r.msg="invalid stored block lengths",t.mode=dr;break}if(t.length=c&65535,c=0,d=0,t.mode=yd,e===Bl)break e;case yd:t.mode=j0;case j0:if(h=t.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;i.set(n.subarray(a,a+h),s),o-=h,a+=h,l-=h,s+=h,t.length-=h;break}t.mode=ta;break;case O0:for(;d<14;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(t.nlen=(c&31)+257,c>>>=5,d-=5,t.ndist=(c&31)+1,c>>>=5,d-=5,t.ncode=(c&15)+4,c>>>=4,d-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=dr;break}t.have=0,t.mode=T0;case T0:for(;t.have<t.ncode;){for(;d<3;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}t.lens[S[t.have++]]=c&7,c>>>=3,d-=3}for(;t.have<19;)t.lens[S[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,B={bits:t.lenbits},j=Ms(xb,t.lens,0,19,t.lencode,0,t.work,B),t.lenbits=B.bits,j){r.msg="invalid code lengths set",t.mode=dr;break}t.have=0,t.mode=R0;case R0:for(;t.have<t.nlen+t.ndist;){for(;b=t.lencode[c&(1<<t.lenbits)-1],y=b>>>24,I=b>>>16&255,N=b&65535,!(y<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(N<16)c>>>=y,d-=y,t.lens[t.have++]=N;else{if(N===16){for(k=y+2;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(c>>>=y,d-=y,t.have===0){r.msg="invalid bit length repeat",t.mode=dr;break}U=t.lens[t.have-1],h=3+(c&3),c>>>=2,d-=2}else if(N===17){for(k=y+3;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}c>>>=y,d-=y,U=0,h=3+(c&7),c>>>=3,d-=3}else{for(k=y+7;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}c>>>=y,d-=y,U=0,h=11+(c&127),c>>>=7,d-=7}if(t.have+h>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=dr;break}for(;h--;)t.lens[t.have++]=U}}if(t.mode===dr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=dr;break}if(t.lenbits=9,B={bits:t.lenbits},j=Ms(Lh,t.lens,0,t.nlen,t.lencode,0,t.work,B),t.lenbits=B.bits,j){r.msg="invalid literal/lengths set",t.mode=dr;break}if(t.distbits=6,t.distcode=t.distdyn,B={bits:t.distbits},j=Ms(Ph,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,B),t.distbits=B.bits,j){r.msg="invalid distances set",t.mode=dr;break}if(t.mode=Fl,e===Bl)break e;case Fl:t.mode=zl;case zl:if(o>=6&&l>=258){r.next_out=s,r.avail_out=l,r.next_in=a,r.avail_in=o,t.hold=c,t.bits=d,fb(r,p),s=r.next_out,i=r.output,l=r.avail_out,a=r.next_in,n=r.input,o=r.avail_in,c=t.hold,d=t.bits,t.mode===ta&&(t.back=-1);break}for(t.back=0;b=t.lencode[c&(1<<t.lenbits)-1],y=b>>>24,I=b>>>16&255,N=b&65535,!(y<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(I&&(I&240)===0){for(_=y,F=I,R=N;b=t.lencode[R+((c&(1<<_+F)-1)>>_)],y=b>>>24,I=b>>>16&255,N=b&65535,!(_+y<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}c>>>=_,d-=_,t.back+=_}if(c>>>=y,d-=y,t.back+=y,t.length=N,I===0){t.mode=F0;break}if(I&32){t.back=-1,t.mode=ta;break}if(I&64){r.msg="invalid literal/length code",t.mode=dr;break}t.extra=I&15,t.mode=L0;case L0:if(t.extra){for(k=t.extra;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=P0;case P0:for(;b=t.distcode[c&(1<<t.distbits)-1],y=b>>>24,I=b>>>16&255,N=b&65535,!(y<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if((I&240)===0){for(_=y,F=I,R=N;b=t.distcode[R+((c&(1<<_+F)-1)>>_)],y=b>>>24,I=b>>>16&255,N=b&65535,!(_+y<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}c>>>=_,d-=_,t.back+=_}if(c>>>=y,d-=y,t.back+=y,I&64){r.msg="invalid distance code",t.mode=dr;break}t.offset=N,t.extra=I&15,t.mode=M0;case M0:if(t.extra){for(k=t.extra;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=dr;break}t.mode=B0;case B0:if(l===0)break e;if(h=p-l,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=dr;break}h>t.wnext?(h-=t.wnext,m=t.wsize-h):m=t.wnext-h,h>t.length&&(h=t.length),v=t.window}else v=i,m=s-t.offset,h=t.length;h>l&&(h=l),l-=h,t.length-=h;do i[s++]=v[m++];while(--h);t.length===0&&(t.mode=zl);break;case F0:if(l===0)break e;i[s++]=t.length,l--,t.mode=zl;break;case bd:if(t.wrap){for(;d<32;){if(o===0)break e;o--,c|=n[a++]<<d,d+=8}if(p-=l,r.total_out+=p,t.total+=p,t.wrap&4&&p&&(r.adler=t.check=t.flags?ki(t.check,i,p,s-p):of(t.check,i,p,s-p)),p=l,t.wrap&4&&(t.flags?c:W0(c))!==t.check){r.msg="incorrect data check",t.mode=dr;break}c=0,d=0}t.mode=z0;case z0:if(t.wrap&&t.flags){for(;d<32;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(t.wrap&4&&c!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=dr;break}c=0,d=0}t.mode=U0;case U0:j=yb;break e;case dr:j=Mh;break e;case Fh:return Bh;case zh:default:return ei}return r.next_out=s,r.avail_out=l,r.next_in=a,r.avail_in=o,t.hold=c,t.bits=d,(t.wsize||p!==r.avail_out&&t.mode<dr&&(t.mode<bd||e!==y0))&&Vh(r,r.output,r.next_out,p-r.avail_out),u-=r.avail_in,p-=r.avail_out,r.total_in+=u,r.total_out+=p,t.total+=p,t.wrap&4&&p&&(r.adler=t.check=t.flags?ki(t.check,i,p,r.next_out-p):of(t.check,i,p,r.next_out-p)),r.data_type=t.bits+(t.last?64:0)+(t.mode===ta?128:0)+(t.mode===Fl||t.mode===yd?256:0),(u===0&&p===0||e===y0)&&j===fo&&(j=wb),j},Db=r=>{if(ho(r))return ei;let e=r.state;return e.window&&(e.window=null),r.state=null,fo},jb=(r,e)=>{if(ho(r))return ei;const t=r.state;return(t.wrap&2)===0?ei:(t.head=e,e.done=!1,fo)},Ob=(r,e)=>{const t=e.length;let n,i,a;return ho(r)||(n=r.state,n.wrap!==0&&n.mode!==fc)?ei:n.mode===fc&&(i=1,i=of(i,e,t,0),i!==n.check)?Mh:(a=Vh(r,e,t,t),a?(n.mode=Fh,Bh):(n.havedict=1,fo))};var Tb=Wh,Rb=Hh,Lb=Uh,Pb=Eb,Mb=qh,Bb=kb,Fb=Db,zb=jb,Ub=Ob,Wb="pako inflate (from Nodeca project)",ra={inflateReset:Tb,inflateReset2:Rb,inflateResetKeep:Lb,inflateInit:Pb,inflateInit2:Mb,inflate:Bb,inflateEnd:Fb,inflateGetHeader:zb,inflateSetDictionary:Ub,inflateInfo:Wb};function Hb(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var qb=Hb;const Gh=Object.prototype.toString,{Z_NO_FLUSH:Vb,Z_FINISH:Gb,Z_OK:qs,Z_STREAM_END:Sd,Z_NEED_DICT:_d,Z_STREAM_ERROR:$b,Z_DATA_ERROR:q0,Z_MEM_ERROR:Xb}=Oh;function Ys(r){this.options=Th.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cb,this.strm.avail_out=0;let t=ra.inflateInit2(this.strm,e.windowBits);if(t!==qs)throw new Error(sf[t]);if(this.header=new qb,ra.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=lf.string2buf(e.dictionary):Gh.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ra.inflateSetDictionary(this.strm,e.dictionary),t!==qs)))throw new Error(sf[t])}Ys.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Gb:Vb,Gh.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=ra.inflate(t,s),a===_d&&i&&(a=ra.inflateSetDictionary(t,i),a===qs?a=ra.inflate(t,s):a===q0&&(a=_d));t.avail_in>0&&a===Sd&&t.state.wrap>0&&r[t.next_in]!==0;)ra.inflateReset(t),a=ra.inflate(t,s);switch(a){case $b:case q0:case _d:case Xb:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===Sd))if(this.options.to==="string"){let l=lf.utf8border(t.output,t.next_out),c=t.next_out-l,d=lf.buf2string(t.output,l);t.next_out=c,t.avail_out=n-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===qs&&o===0)){if(a===Sd)return a=ra.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Ys.prototype.onData=function(r){this.chunks.push(r)};Ys.prototype.onEnd=function(r){r===qs&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Th.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Yb(r,e){const t=new Ys(e);if(t.push(r),t.err)throw t.msg||sf[t.err];return t.result}var Kb=Ys,Zb=Yb,Qb={Inflate:Kb,inflate:Zb};const{Inflate:Jb,inflate:e3}=Qb;var V0=Jb,t3=e3;const $h=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;$h[r]=e}const G0=4294967295;function r3(r,e,t){let n=r;for(let i=0;i<t;i++)n=$h[(n^e[i])&255]^n>>>8;return n}function n3(r,e){return(r3(G0,r,e)^G0)>>>0}function $0(r,e,t){const n=r.readUint32(),i=n3(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${i}`)}function Xh(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function Yh(r,e,t,n){let i=0;for(;i<n;i++)e[i]=r[i];for(;i<t;i++)e[i]=r[i]+e[i-n]&255}function Kh(r,e,t,n){let i=0;if(t.length===0)for(;i<n;i++)e[i]=r[i];else for(;i<n;i++)e[i]=r[i]+t[i]&255}function Zh(r,e,t,n,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=r[a]+(t[a]>>1)&255;for(;a<n;a++)e[a]=r[a]+(e[a-i]+t[a]>>1)&255}}function Qh(r,e,t,n,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=r[a]+t[a]&255;for(;a<n;a++)e[a]=r[a]+i3(e[a-i],t[a],t[a-i])&255}}function i3(r,e,t){const n=r+e-t,i=Math.abs(n-r),a=Math.abs(n-e),s=Math.abs(n-t);return i<=a&&i<=s?r:a<=s?e:t}function a3(r,e,t,n,i,a){switch(r){case 0:Xh(e,t,i);break;case 1:Yh(e,t,i,a);break;case 2:Kh(e,t,n,i);break;case 3:Zh(e,t,n,i,a);break;case 4:Qh(e,t,n,i,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const o3=new Uint16Array([255]),s3=new Uint8Array(o3.buffer),l3=s3[0]===255;function c3(r){const{data:e,width:t,height:n,channels:i,depth:a}=r,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(n*t*o);let c=0;for(let d=0;d<7;d++){const u=s[d],p=Math.ceil((t-u.x)/u.xStep),h=Math.ceil((n-u.y)/u.yStep);if(p<=0||h<=0)continue;const m=p*o,v=new Uint8Array(m);for(let b=0;b<h;b++){const y=e[c++],I=e.subarray(c,c+m);c+=m;const N=new Uint8Array(m);a3(y,I,N,v,m,o),v.set(N);for(let _=0;_<p;_++){const F=u.x+_*u.xStep,R=u.y+b*u.yStep;if(!(F>=t||R>=n))for(let U=0;U<o;U++)l[(R*t+F)*o+U]=N[_*o+U]}}}if(a===16){const d=new Uint16Array(l.buffer);if(l3)for(let u=0;u<d.length;u++)d[u]=d3(d[u]);return d}else return l}function d3(r){return(r&255)<<8|r>>8&255}const f3=new Uint16Array([255]),u3=new Uint8Array(f3.buffer),h3=u3[0]===255,p3=new Uint8Array(0);function X0(r){const{data:e,width:t,height:n,channels:i,depth:a}=r,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*t),l=new Uint8Array(n*o);let c=p3,d=0,u,p;for(let h=0;h<n;h++){switch(u=e.subarray(d+1,d+1+o),p=l.subarray(h*o,(h+1)*o),e[d]){case 0:Xh(u,p,o);break;case 1:Yh(u,p,o,s);break;case 2:Kh(u,p,c,o);break;case 3:Zh(u,p,c,o,s);break;case 4:Qh(u,p,c,o,s);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}c=p,d+=o+1}if(a===16){const h=new Uint16Array(l.buffer);if(h3)for(let m=0;m<h.length;m++)h[m]=g3(h[m]);return h}else return l}function g3(r){return(r&255)<<8|r>>8&255}const Kl=Uint8Array.of(137,80,78,71,13,10,26,10);function Y0(r){if(!m3(r.readBytes(Kl.length)))throw new Error("wrong PNG signature")}function m3(r){if(r.length<Kl.length)return!1;for(let e=0;e<Kl.length;e++)if(r[e]!==Kl[e])return!1;return!0}const x3="tEXt",v3=0,Jh=new TextDecoder("latin1");function y3(r){if(w3(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const b3=/^[\u0000-\u00FF]*$/;function w3(r){if(!b3.test(r))throw new Error("invalid latin1 text")}function A3(r,e,t){const n=ep(e);r[n]=S3(e,t-n.length-1)}function ep(r){for(r.mark();r.readByte()!==v3;);const e=r.offset;r.reset();const t=Jh.decode(r.readBytes(e-r.offset-1));return r.skip(1),y3(t),t}function S3(r,e){return Jh.decode(r.readBytes(e))}const Fn={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Cd={UNKNOWN:-1,DEFLATE:0},K0={UNKNOWN:-1,ADAPTIVE:0},Id={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ul={NONE:0,BACKGROUND:1,PREVIOUS:2},Ed={SOURCE:0,OVER:1};class _3 extends Pf{constructor(t,n={}){super(t);Gt(this,"_checkCrc");Gt(this,"_inflator");Gt(this,"_png");Gt(this,"_apng");Gt(this,"_end");Gt(this,"_hasPalette");Gt(this,"_palette");Gt(this,"_hasTransparency");Gt(this,"_transparency");Gt(this,"_compressionMethod");Gt(this,"_filterMethod");Gt(this,"_interlaceMethod");Gt(this,"_colorType");Gt(this,"_isAnimated");Gt(this,"_numberOfFrames");Gt(this,"_numberOfPlays");Gt(this,"_frames");Gt(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new V0,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Cd.UNKNOWN,this._filterMethod=K0.UNKNOWN,this._interlaceMethod=Id.UNKNOWN,this._colorType=Fn.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Y0(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(Y0(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case x3:A3(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?$0(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?$0(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=C3(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Fn.GREYSCALE:i=1;break;case Fn.TRUECOLOUR:i=3;break;case Fn.INDEXED_COLOUR:i=1;break;case Fn.GREYSCALE_ALPHA:i=2;break;case Fn.TRUECOLOUR_ALPHA:i=4;break;case Fn.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Cd.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Fn.GREYSCALE:case Fn.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case Fn.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Fn.UNKNOWN:case Fn.GREYSCALE_ALPHA:case Fn.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=ep(this),i=this.readUint8();if(i!==Cd.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:t3(a)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=X0({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case Ul.NONE:break;case Ul.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*t.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case Ul.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(s*n.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case Ed.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=a(s,o);for(let d=0;d<this._png.channels;d++)t.data[l+d]=n.data[c+d]}break;case Ed.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=a(s,o);for(let d=0;d<this._png.channels;d++){const u=n.data[c+this._png.channels-1]/i,p=d%(this._png.channels-1)===0?1:n.data[c+d],h=Math.floor(u*p+(1-u)*t.data[l+d]);t.data[l+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==K0.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Id.NO_INTERLACE)this._png.data=X0({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Id.ADAM7)this._png.data=c3({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ul.NONE,blendOp:Ed.SOURCE,data:t}),this._inflator=new V0,this._writingDataChunks=!1}}function C3(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Z0;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Z0||(Z0={}));function I3(r,e){return new _3(r,e).decode()}var pt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Nd(){pt.console&&typeof pt.console.log=="function"&&pt.console.log.apply(pt.console,arguments)}var er={log:Nd,warn:function(r){pt.console&&(typeof pt.console.warn=="function"?pt.console.warn.apply(pt.console,arguments):Nd.call(null,arguments))},error:function(r){pt.console&&(typeof pt.console.error=="function"?pt.console.error.apply(pt.console,arguments):Nd(r))}};function kd(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){to(n.response,e,t)},n.onerror=function(){er.error("could not download file")},n.send()}function Q0(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Wl(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var to=pt.saveAs||((typeof window>"u"?"undefined":Yt(window))!=="object"||window!==pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=pt.URL||pt.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?Q0(i.href)?kd(r,e,t):Wl(i,i.target="_blank"):Wl(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Wl(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Q0(r))kd(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Wl(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Yt(a)!=="object"&&(er.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return kd(r,e,t);var i=r.type==="application/octet-stream",a=/constructor/i.test(pt.HTMLElement)||pt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":Yt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(r)}else{var l=pt.URL||pt.webkitURL,c=l.createObjectURL(r);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function tp(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,a=t[n].process,s=i.exec(r);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var Zl=pt.atob.bind(pt),J0=pt.btoa.bind(pt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Dd(r,e){var t=r[0],n=r[1],i=r[2],a=r[3];t=ln(t,n,i,a,e[0],7,-680876936),a=ln(a,t,n,i,e[1],12,-389564586),i=ln(i,a,t,n,e[2],17,606105819),n=ln(n,i,a,t,e[3],22,-1044525330),t=ln(t,n,i,a,e[4],7,-176418897),a=ln(a,t,n,i,e[5],12,1200080426),i=ln(i,a,t,n,e[6],17,-1473231341),n=ln(n,i,a,t,e[7],22,-45705983),t=ln(t,n,i,a,e[8],7,1770035416),a=ln(a,t,n,i,e[9],12,-1958414417),i=ln(i,a,t,n,e[10],17,-42063),n=ln(n,i,a,t,e[11],22,-1990404162),t=ln(t,n,i,a,e[12],7,1804603682),a=ln(a,t,n,i,e[13],12,-40341101),i=ln(i,a,t,n,e[14],17,-1502002290),t=cn(t,n=ln(n,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=cn(a,t,n,i,e[6],9,-1069501632),i=cn(i,a,t,n,e[11],14,643717713),n=cn(n,i,a,t,e[0],20,-373897302),t=cn(t,n,i,a,e[5],5,-701558691),a=cn(a,t,n,i,e[10],9,38016083),i=cn(i,a,t,n,e[15],14,-660478335),n=cn(n,i,a,t,e[4],20,-405537848),t=cn(t,n,i,a,e[9],5,568446438),a=cn(a,t,n,i,e[14],9,-1019803690),i=cn(i,a,t,n,e[3],14,-187363961),n=cn(n,i,a,t,e[8],20,1163531501),t=cn(t,n,i,a,e[13],5,-1444681467),a=cn(a,t,n,i,e[2],9,-51403784),i=cn(i,a,t,n,e[7],14,1735328473),t=dn(t,n=cn(n,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=dn(a,t,n,i,e[8],11,-2022574463),i=dn(i,a,t,n,e[11],16,1839030562),n=dn(n,i,a,t,e[14],23,-35309556),t=dn(t,n,i,a,e[1],4,-1530992060),a=dn(a,t,n,i,e[4],11,1272893353),i=dn(i,a,t,n,e[7],16,-155497632),n=dn(n,i,a,t,e[10],23,-1094730640),t=dn(t,n,i,a,e[13],4,681279174),a=dn(a,t,n,i,e[0],11,-358537222),i=dn(i,a,t,n,e[3],16,-722521979),n=dn(n,i,a,t,e[6],23,76029189),t=dn(t,n,i,a,e[9],4,-640364487),a=dn(a,t,n,i,e[12],11,-421815835),i=dn(i,a,t,n,e[15],16,530742520),t=fn(t,n=dn(n,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=fn(a,t,n,i,e[7],10,1126891415),i=fn(i,a,t,n,e[14],15,-1416354905),n=fn(n,i,a,t,e[5],21,-57434055),t=fn(t,n,i,a,e[12],6,1700485571),a=fn(a,t,n,i,e[3],10,-1894986606),i=fn(i,a,t,n,e[10],15,-1051523),n=fn(n,i,a,t,e[1],21,-2054922799),t=fn(t,n,i,a,e[8],6,1873313359),a=fn(a,t,n,i,e[15],10,-30611744),i=fn(i,a,t,n,e[6],15,-1560198380),n=fn(n,i,a,t,e[13],21,1309151649),t=fn(t,n,i,a,e[4],6,-145523070),a=fn(a,t,n,i,e[11],10,-1120210379),i=fn(i,a,t,n,e[2],15,718787259),n=fn(n,i,a,t,e[9],21,-343485551),r[0]=Na(t,r[0]),r[1]=Na(n,r[1]),r[2]=Na(i,r[2]),r[3]=Na(a,r[3])}function _c(r,e,t,n,i,a){return e=Na(Na(e,r),Na(n,a)),Na(e<<i|e>>>32-i,t)}function ln(r,e,t,n,i,a,s){return _c(e&t|~e&n,r,e,i,a,s)}function cn(r,e,t,n,i,a,s){return _c(e&n|t&~n,r,e,i,a,s)}function dn(r,e,t,n,i,a,s){return _c(e^t^n,r,e,i,a,s)}function fn(r,e,t,n,i,a,s){return _c(t^(e|~n),r,e,i,a,s)}function rp(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Dd(n,E3(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Dd(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Dd(n,i),n}function E3(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var e1="0123456789abcdef".split("");function N3(r){for(var e="",t=0;t<4;t++)e+=e1[r>>8*t+4&15]+e1[r>>8*t&15];return e}function k3(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function cf(r){return rp(r).map(k3).join("")}var D3=function(r){for(var e=0;e<r.length;e++)r[e]=N3(r[e]);return r.join("")}(rp("hello"))!="5d41402abc4b2a76b9719d911017c592";function Na(r,e){if(D3){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function df(r,e){var t,n,i,a;if(r!==t){for(var s=(i=r,a=1+(256/r.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+s.charCodeAt(l))%256,o[l]=o[c],o[c]=d}t=r,n=o}else o=n;var u=e.length,p=0,h=0,m="";for(l=0;l<u;l++)h=(h+(d=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=d,s=o[(o[p]+o[h])%256],m+=String.fromCharCode(e.charCodeAt(l)^s);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var t1={print:4,modify:8,copy:16,"annot-forms":32};function To(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(o){if(t1.perm!==void 0)throw new Error("Invalid permission: "+o);i+=t1[o]}),this.padding="(Â¿N^NuÂŠAd\0NVÃ¿Ãº\b..\0Â¶Ãh>Â€/\fÂ©Ã¾dSiz";var a=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=cf(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=df(this.encryptionKey,this.padding)}function Ro(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return e}function r1(r){if(Yt(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[n,!!i],a},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var s=e[t][a];try{s[0].apply(r,n)}catch(o){pt.console&&er.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function uc(r){if(!(this instanceof uc))return new uc(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function np(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function ro(r,e,t,n,i){if(!(this instanceof ro))return new ro(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,np.call(this,n,i)}function Bo(r,e,t,n,i){if(!(this instanceof Bo))return new Bo(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,np.call(this,n,i)}function nt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,c="S",d=null;Yt(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,a=r.compress||r.compressPdf||a,(d=r.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(l=r.floatPrecision),c=r.defaultPathOperation||"S"),s=r.filters||(a===!0?["FlateEncode"]:s),n=n||"mm",t=(""+(t||"P")).toLowerCase();var u=r.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=r1;var m="1.3",v=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(A){m=A};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return b};var y=h.__private__.getPageFormat=function(A){return b[A]};i=i||"a4";var I="compat",N="advanced",_=I;function F(){this.saveGraphicsState(),Q(new dt(Ve,0,0,-Ve,0,Wa()*Ve).toString()+" cm"),this.setFontSize(this.getFontSize()/Ve),c="n",_=N}function R(){this.restoreGraphicsState(),c="S",_=I}var U=h.__private__.combineFontStyleAndFontWeight=function(A,q){if(A=="bold"&&q=="normal"||A=="bold"&&q==400||A=="normal"&&q=="italic"||A=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(A=q==400||q==="normal"?A==="italic"?"italic":"normal":q!=700&&q!=="bold"||A!=="normal"?(q==700?"bold":q)+""+A:"bold"),A};h.advancedAPI=function(A){var q=_===I;return q&&F.call(this),typeof A!="function"||(A(this),q&&R.call(this)),this},h.compatAPI=function(A){var q=_===N;return q&&R.call(this),typeof A!="function"||(A(this),q&&F.call(this)),this},h.isAdvancedAPI=function(){return _===N};var j,E=function(A){if(_!==N)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=h.roundToPrecision=h.__private__.roundToPrecision=function(A,q){var ae=e||q;if(isNaN(A)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(ae).replace(/0+$/,"")};j=h.hpf=h.__private__.hpf=typeof l=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return B(A,l)}:l==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return B(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return B(A,16)};var k=h.f2=h.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return B(A,2)},S=h.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return B(A,3)},D=h.scale=h.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return _===I?A*Ve:_===N?A:void 0},w=function(A){return D(function(q){return _===I?Wa()-q:_===N?q:void 0}(A))};h.__private__.setPrecision=h.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var M,O="00000000000000000000000000000000",L=h.__private__.getFileId=function(){return O},X=h.__private__.setFileId=function(A){return O=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():O.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(kr=new To(d.userPermissions,d.userPassword,d.ownerPassword,O)),O};h.setFileId=function(A){return X(A),this},h.getFileId=function(){return L()};var H=h.__private__.convertDateToPDFDate=function(A){var q=A.getTimezoneOffset(),ae=q<0?"+":"-",ce=Math.floor(Math.abs(q/60)),ge=Math.abs(q%60),Ce=[ae,W(ce),"'",W(ge),"'"].join("");return["D:",A.getFullYear(),W(A.getMonth()+1),W(A.getDate()),W(A.getHours()),W(A.getMinutes()),W(A.getSeconds()),Ce].join("")},ee=h.__private__.convertPDFDateToDate=function(A){var q=parseInt(A.substr(2,4),10),ae=parseInt(A.substr(6,2),10)-1,ce=parseInt(A.substr(8,2),10),ge=parseInt(A.substr(10,2),10),Ce=parseInt(A.substr(12,2),10),Ne=parseInt(A.substr(14,2),10);return new Date(q,ae,ce,ge,Ce,Ne,0)},K=h.__private__.setCreationDate=function(A){var q;if(A===void 0&&(A=new Date),A instanceof Date)q=H(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=A}return M=q},T=h.__private__.getCreationDate=function(A){var q=M;return A==="jsDate"&&(q=ee(M)),q};h.setCreationDate=function(A){return K(A),this},h.getCreationDate=function(A){return T(A)};var z,W=h.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},G=h.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},oe=0,re=[],le=[],de=0,fe=[],be=[],_e=!1,Te=le;h.__private__.setCustomOutputDestination=function(A){_e=!0,Te=A};var Re=function(A){_e||(Te=A)};h.__private__.resetCustomOutputDestination=function(){_e=!1,Te=le};var Q=h.__private__.out=function(A){return A=A.toString(),de+=A.length+1,Te.push(A),Te},je=h.__private__.write=function(A){return Q(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},He=h.__private__.getArrayBuffer=function(A){for(var q=A.length,ae=new ArrayBuffer(q),ce=new Uint8Array(ae);q--;)ce[q]=A.charCodeAt(q);return ae},Pe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return Pe};var he=r.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(A){return he=_===N?A/Ve:A,this};var Le,Ee=h.__private__.getFontSize=h.getFontSize=function(){return _===I?he:he*Ve},Be=r.R2L||!1;h.__private__.setR2L=h.setR2L=function(A){return Be=A,this},h.__private__.getR2L=h.getR2L=function(){return Be};var Me,Oe=h.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))Le=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');Le=A}else Le=parseInt(A,10)};h.__private__.getZoomMode=function(){return Le};var rt,Qe=h.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Me=A};h.__private__.getPageMode=function(){return Me};var At=h.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');rt=A};h.__private__.getLayoutMode=function(){return rt},h.__private__.setDisplayMode=h.setDisplayMode=function(A,q,ae){return Oe(A),At(q),Qe(ae),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(A){if(Object.keys(it).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[A]},h.__private__.getDocumentProperties=function(){return it},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(A){for(var q in it)it.hasOwnProperty(q)&&A[q]&&(it[q]=A[q]);return this},h.__private__.setDocumentProperty=function(A,q){if(Object.keys(it).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[A]=q};var qe,Ve,We,Dt,yt,ct={},ut={},Kt=[],at={},Ut={},st={},ft={},rr=null,ht=0,Je=[],Nt=new r1(h),Dn=r.hotfixes||[],Nr={},Xr={},Ur=[],dt=function A(q,ae,ce,ge,Ce,Ne){if(!(this instanceof A))return new A(q,ae,ce,ge,Ce,Ne);isNaN(q)&&(q=1),isNaN(ae)&&(ae=0),isNaN(ce)&&(ce=0),isNaN(ge)&&(ge=1),isNaN(Ce)&&(Ce=0),isNaN(Ne)&&(Ne=0),this._matrix=[q,ae,ce,ge,Ce,Ne]};Object.defineProperty(dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),dt.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(A)},dt.prototype.multiply=function(A){var q=A.sx*this.sx+A.shy*this.shx,ae=A.sx*this.shy+A.shy*this.sy,ce=A.shx*this.sx+A.sy*this.shx,ge=A.shx*this.shy+A.sy*this.sy,Ce=A.tx*this.sx+A.ty*this.shx+this.tx,Ne=A.tx*this.shy+A.ty*this.sy+this.ty;return new dt(q,ae,ce,ge,Ce,Ne)},dt.prototype.decompose=function(){var A=this.sx,q=this.shy,ae=this.shx,ce=this.sy,ge=this.tx,Ce=this.ty,Ne=Math.sqrt(A*A+q*q),Xe=(A/=Ne)*ae+(q/=Ne)*ce;ae-=A*Xe,ce-=q*Xe;var et=Math.sqrt(ae*ae+ce*ce);return Xe/=et,A*(ce/=et)<q*(ae/=et)&&(A=-A,q=-q,Xe=-Xe,Ne=-Ne),{scale:new dt(Ne,0,0,et,0,0),translate:new dt(1,0,0,1,ge,Ce),rotate:new dt(A,q,-q,A,0,0),skew:new dt(1,0,Xe,1,0,0)}},dt.prototype.toString=function(A){return this.join(" ")},dt.prototype.inversed=function(){var A=this.sx,q=this.shy,ae=this.shx,ce=this.sy,ge=this.tx,Ce=this.ty,Ne=1/(A*ce-q*ae),Xe=ce*Ne,et=-q*Ne,gt=-ae*Ne,wt=A*Ne;return new dt(Xe,et,gt,wt,-Xe*ge-gt*Ce,-et*ge-wt*Ce)},dt.prototype.applyToPoint=function(A){var q=A.x*this.sx+A.y*this.shx+this.tx,ae=A.x*this.shy+A.y*this.sy+this.ty;return new Hi(q,ae)},dt.prototype.applyToRectangle=function(A){var q=this.applyToPoint(A),ae=this.applyToPoint(new Hi(A.x+A.w,A.y+A.h));return new as(q.x,q.y,ae.x-q.x,ae.y-q.y)},dt.prototype.clone=function(){var A=this.sx,q=this.shy,ae=this.shx,ce=this.sy,ge=this.tx,Ce=this.ty;return new dt(A,q,ae,ce,ge,Ce)},h.Matrix=dt;var Mi=h.matrixMult=function(A,q){return q.multiply(A)},Bi=new dt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Bi;var Un=function(A,q){if(!Ut[A]){var ae=(q instanceof ro?"Sh":"P")+(Object.keys(at).length+1).toString(10);q.id=ae,Ut[A]=ae,at[ae]=q,Nt.publish("addPattern",q)}};h.ShadingPattern=ro,h.TilingPattern=Bo,h.addShadingPattern=function(A,q){return E("addShadingPattern()"),Un(A,q),this},h.beginTilingPattern=function(A){E("beginTilingPattern()"),os(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},h.endTilingPattern=function(A,q){E("endTilingPattern()"),q.stream=be[z].join(`
`),Un(A,q),Nt.publish("endTilingPattern",q),Ur.pop().restore()};var Wn,hr=h.__private__.newObject=function(){var A=Wr();return Yr(A,!0),A},Wr=h.__private__.newObjectDeferred=function(){return oe++,re[oe]=function(){return de},oe},Yr=function(A,q){return q=typeof q=="boolean"&&q,re[A]=de,q&&Q(A+" 0 obj"),A},La=h.__private__.newAdditionalObject=function(){var A={objId:Wr(),content:""};return fe.push(A),A},sa=Wr(),ti=Wr(),wi=h.__private__.decodeColorString=function(A){var q=A.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var ae=parseFloat(q[0]);q=[ae,ae,ae,"r"]}for(var ce="#",ge=0;ge<3;ge++)ce+=("0"+Math.floor(255*parseFloat(q[ge])).toString(16)).slice(-2);return ce},ri=h.__private__.encodeColorString=function(A){var q;typeof A=="string"&&(A={ch1:A});var ae=A.ch1,ce=A.ch2,ge=A.ch3,Ce=A.ch4,Ne=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var Xe=new tp(ae);if(Xe.ok)ae=Xe.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var et=parseInt(ae.substr(1),16);ae=et>>16&255,ce=et>>8&255,ge=255&et}if(ce===void 0||Ce===void 0&&ae===ce&&ce===ge)q=typeof ae=="string"?ae+" "+Ne[0]:A.precision===2?k(ae/255)+" "+Ne[0]:S(ae/255)+" "+Ne[0];else if(Ce===void 0||Yt(Ce)==="object"){if(Ce&&!isNaN(Ce.a)&&Ce.a===0)return["1.","1.","1.",Ne[1]].join(" ");q=typeof ae=="string"?[ae,ce,ge,Ne[1]].join(" "):A.precision===2?[k(ae/255),k(ce/255),k(ge/255),Ne[1]].join(" "):[S(ae/255),S(ce/255),S(ge/255),Ne[1]].join(" ")}else q=typeof ae=="string"?[ae,ce,ge,Ce,Ne[2]].join(" "):A.precision===2?[k(ae),k(ce),k(ge),k(Ce),Ne[2]].join(" "):[S(ae),S(ce),S(ge),S(Ce),Ne[2]].join(" ");return q},ni=h.__private__.getFilters=function(){return s},Hn=h.__private__.putStream=function(A){var q=(A=A||{}).data||"",ae=A.filters||ni(),ce=A.alreadyAppliedFilters||[],ge=A.addLength1||!1,Ce=q.length,Ne=A.objectId,Xe=function(Dr){return Dr};if(d!==null&&Ne===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Xe=kr.encryptor(Ne,0));var et={};ae===!0&&(ae=["FlateEncode"]);var gt=A.additionalKeyValues||[],wt=(et=nt.API.processDataByFilters!==void 0?nt.API.processDataByFilters(q,ae):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(et.data.length!==0&&(gt.push({key:"Length",value:et.data.length}),ge===!0&&gt.push({key:"Length1",value:Ce})),wt.length!=0)if(wt.split("/").length-1==1)gt.push({key:"Filter",value:wt});else{gt.push({key:"Filter",value:"["+wt+"]"});for(var Rt=0;Rt<gt.length;Rt+=1)if(gt[Rt].key==="DecodeParms"){for(var ur=[],Ir=0;Ir<et.reverseChain.split("/").length-1;Ir+=1)ur.push("null");ur.push(gt[Rt].value),gt[Rt].value="["+ur.join(" ")+"]"}}Q("<<");for(var nr=0;nr<gt.length;nr++)Q("/"+gt[nr].key+" "+gt[nr].value);Q(">>"),et.data.length!==0&&(Q("stream"),Q(Xe(et.data)),Q("endstream"))},Pa=h.__private__.putPage=function(A){var q=A.number,ae=A.data,ce=A.objId,ge=A.contentsObjId;Yr(ce,!0),Q("<</Type /Page"),Q("/Parent "+A.rootDictionaryObjId+" 0 R"),Q("/Resources "+A.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(j(A.mediaBox.bottomLeftX))+" "+parseFloat(j(A.mediaBox.bottomLeftY))+" "+j(A.mediaBox.topRightX)+" "+j(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&Q("/CropBox ["+j(A.cropBox.bottomLeftX)+" "+j(A.cropBox.bottomLeftY)+" "+j(A.cropBox.topRightX)+" "+j(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&Q("/BleedBox ["+j(A.bleedBox.bottomLeftX)+" "+j(A.bleedBox.bottomLeftY)+" "+j(A.bleedBox.topRightX)+" "+j(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&Q("/TrimBox ["+j(A.trimBox.bottomLeftX)+" "+j(A.trimBox.bottomLeftY)+" "+j(A.trimBox.topRightX)+" "+j(A.trimBox.topRightY)+"]"),A.artBox!==null&&Q("/ArtBox ["+j(A.artBox.bottomLeftX)+" "+j(A.artBox.bottomLeftY)+" "+j(A.artBox.topRightX)+" "+j(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&Q("/UserUnit "+A.userUnit),Nt.publish("putPage",{objId:ce,pageContext:Je[q],pageNumber:q,page:ae}),Q("/Contents "+ge+" 0 R"),Q(">>"),Q("endobj");var Ce=ae.join(`
`);return _===N&&(Ce+=`
Q`),Yr(ge,!0),Hn({data:Ce,filters:ni(),objectId:ge}),Q("endobj"),ce},Ai=h.__private__.putPages=function(){var A,q,ae=[];for(A=1;A<=ht;A++)Je[A].objId=Wr(),Je[A].contentsObjId=Wr();for(A=1;A<=ht;A++)ae.push(Pa({number:A,data:be[A],objId:Je[A].objId,contentsObjId:Je[A].contentsObjId,mediaBox:Je[A].mediaBox,cropBox:Je[A].cropBox,bleedBox:Je[A].bleedBox,trimBox:Je[A].trimBox,artBox:Je[A].artBox,userUnit:Je[A].userUnit,rootDictionaryObjId:sa,resourceDictionaryObjId:ti}));Yr(sa,!0),Q("<</Type /Pages");var ce="/Kids [";for(q=0;q<ht;q++)ce+=ae[q]+" 0 R ";Q(ce+"]"),Q("/Count "+ht),Q(">>"),Q("endobj"),Nt.publish("postPutPages")},Ma=function(A){Nt.publish("putFont",{font:A,out:Q,newObject:hr,putStream:Hn}),A.isAlreadyPutted!==!0&&(A.objectNumber=hr(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Ro(A.postScriptName)),Q("/Subtype /Type1"),typeof A.encoding=="string"&&Q("/Encoding /"+A.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},go=function(A){A.objectNumber=hr();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[j(A.x),j(A.y),j(A.x+A.width),j(A.y+A.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var ae=A.pages[1].join(`
`);Hn({data:ae,additionalKeyValues:q,objectId:A.objectNumber}),Q("endobj")},mo=function(A,q){q||(q=21);var ae=hr(),ce=function(Ne,Xe){var et,gt=[],wt=1/(Xe-1);for(et=0;et<1;et+=wt)gt.push(et);if(gt.push(1),Ne[0].offset!=0){var Rt={offset:0,color:Ne[0].color};Ne.unshift(Rt)}if(Ne[Ne.length-1].offset!=1){var ur={offset:1,color:Ne[Ne.length-1].color};Ne.push(ur)}for(var Ir="",nr=0,Dr=0;Dr<gt.length;Dr++){for(et=gt[Dr];et>Ne[nr+1].offset;)nr++;var Er=Ne[nr].offset,Kr=(et-Er)/(Ne[nr+1].offset-Er),Gi=Ne[nr].color,ai=Ne[nr+1].color;Ir+=G(Math.round((1-Kr)*Gi[0]+Kr*ai[0]).toString(16))+G(Math.round((1-Kr)*Gi[1]+Kr*ai[1]).toString(16))+G(Math.round((1-Kr)*Gi[2]+Kr*ai[2]).toString(16))}return Ir.trim()}(A.colors,q),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+q+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hn({data:ce,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),Q("endobj"),A.objectNumber=hr(),Q("<< /ShadingType "+A.type),Q("/ColorSpace /DeviceRGB");var Ce="/Coords ["+j(parseFloat(A.coords[0]))+" "+j(parseFloat(A.coords[1]))+" ";A.type===2?Ce+=j(parseFloat(A.coords[2]))+" "+j(parseFloat(A.coords[3])):Ce+=j(parseFloat(A.coords[2]))+" "+j(parseFloat(A.coords[3]))+" "+j(parseFloat(A.coords[4]))+" "+j(parseFloat(A.coords[5])),Q(Ce+="]"),A.matrix&&Q("/Matrix ["+A.matrix.toString()+"]"),Q("/Function "+ae+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},xo=function(A,q){var ae=Wr(),ce=hr();q.push({resourcesOid:ae,objectOid:ce}),A.objectNumber=ce;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+A.boundingBox.map(j).join(" ")+"]"}),ge.push({key:"XStep",value:j(A.xStep)}),ge.push({key:"YStep",value:j(A.yStep)}),ge.push({key:"Resources",value:ae+" 0 R"}),A.matrix&&ge.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Hn({data:A.stream,additionalKeyValues:ge,objectId:A.objectNumber}),Q("endobj")},Ic=function(A){for(var q in A.objectNumber=hr(),Q("<<"),A)switch(q){case"opacity":Q("/ca "+k(A[q]));break;case"stroke-opacity":Q("/CA "+k(A[q]))}Q(">>"),Q("endobj")},Zo=function(A){Yr(A.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var q in Q("/Font <<"),ct)ct.hasOwnProperty(q)&&(u===!1||u===!0&&p.hasOwnProperty(q))&&Q("/"+q+" "+ct[q].objectNumber+" 0 R");Q(">>")}(),function(){if(Object.keys(at).length>0){for(var q in Q("/Shading <<"),at)at.hasOwnProperty(q)&&at[q]instanceof ro&&at[q].objectNumber>=0&&Q("/"+q+" "+at[q].objectNumber+" 0 R");Nt.publish("putShadingPatternDict"),Q(">>")}}(),function(q){if(Object.keys(at).length>0){for(var ae in Q("/Pattern <<"),at)at.hasOwnProperty(ae)&&at[ae]instanceof h.TilingPattern&&at[ae].objectNumber>=0&&at[ae].objectNumber<q&&Q("/"+ae+" "+at[ae].objectNumber+" 0 R");Nt.publish("putTilingPatternDict"),Q(">>")}}(A.objectOid),function(){if(Object.keys(st).length>0){var q;for(q in Q("/ExtGState <<"),st)st.hasOwnProperty(q)&&st[q].objectNumber>=0&&Q("/"+q+" "+st[q].objectNumber+" 0 R");Nt.publish("putGStateDict"),Q(">>")}}(),function(){for(var q in Q("/XObject <<"),Nr)Nr.hasOwnProperty(q)&&Nr[q].objectNumber>=0&&Q("/"+q+" "+Nr[q].objectNumber+" 0 R");Nt.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj")},Ks=function(A){ut[A.fontName]=ut[A.fontName]||{},ut[A.fontName][A.fontStyle]=A.id},Zs=function(A,q,ae,ce,ge){var Ce={id:"F"+(Object.keys(ct).length+1).toString(10),postScriptName:A,fontName:q,fontStyle:ae,encoding:ce,isStandardFont:ge||!1,metadata:{}};return Nt.publish("addFont",{font:Ce,instance:this}),ct[Ce.id]=Ce,Ks(Ce),Ce.id},qn=h.__private__.pdfEscape=h.pdfEscape=function(A,q){return function(ae,ce){var ge,Ce,Ne,Xe,et,gt,wt,Rt,ur;if(Ne=(ce=ce||{}).sourceEncoding||"Unicode",et=ce.outputEncoding,(ce.autoencode||et)&&ct[qe].metadata&&ct[qe].metadata[Ne]&&ct[qe].metadata[Ne].encoding&&(Xe=ct[qe].metadata[Ne].encoding,!et&&ct[qe].encoding&&(et=ct[qe].encoding),!et&&Xe.codePages&&(et=Xe.codePages[0]),typeof et=="string"&&(et=Xe[et]),et)){for(wt=!1,gt=[],ge=0,Ce=ae.length;ge<Ce;ge++)(Rt=et[ae.charCodeAt(ge)])?gt.push(String.fromCharCode(Rt)):gt.push(ae[ge]),gt[ge].charCodeAt(0)>>8&&(wt=!0);ae=gt.join("")}for(ge=ae.length;wt===void 0&&ge!==0;)ae.charCodeAt(ge-1)>>8&&(wt=!0),ge--;if(!wt)return ae;for(gt=ce.noBOM?[]:[254,255],ge=0,Ce=ae.length;ge<Ce;ge++){if((ur=(Rt=ae.charCodeAt(ge))>>8)>>8)throw new Error("Character at position "+ge+" of string '"+ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gt.push(ur),gt.push(Rt-(ur<<8))}return String.fromCharCode.apply(void 0,gt)}(A,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qo=h.__private__.beginPage=function(A){be[++ht]=[],Je[ht]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Js(ht),Re(be[z])},Qs=function(A,q){var ae,ce,ge;switch(t=q||t,typeof A=="string"&&(ae=y(A.toLowerCase()),Array.isArray(ae)&&(ce=ae[0],ge=ae[1])),Array.isArray(A)&&(ce=A[0]*Ve,ge=A[1]*Ve),isNaN(ce)&&(ce=i[0],ge=i[1]),(ce>14400||ge>14400)&&(er.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),ge=Math.min(14400,ge)),i=[ce,ge],t.substr(0,1)){case"l":ge>ce&&(i=[ge,ce]);break;case"p":ce>ge&&(i=[ge,ce])}Qo(i),xt(ts),Q(wo),ns!==0&&Q(ns+" J"),is!==0&&Q(is+" j"),Nt.publish("addPage",{pageNumber:ht})},Jo=function(A){A>0&&A<=ht&&(be.splice(A,1),Je.splice(A,1),ht--,z>ht&&(z=ht),this.setPage(z))},Js=function(A){A>0&&A<=ht&&(z=A)},el=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return be.length-1},tl=function(A,q,ae){var ce,ge=void 0;return ae=ae||{},A=A!==void 0?A:ct[qe].fontName,q=q!==void 0?q:ct[qe].fontStyle,ce=A.toLowerCase(),ut[ce]!==void 0&&ut[ce][q]!==void 0?ge=ut[ce][q]:ut[A]!==void 0&&ut[A][q]!==void 0?ge=ut[A][q]:ae.disableWarning===!1&&er.warn("Unable to look up font label for font '"+A+"', '"+q+"'. Refer to getFontList() for available fonts."),ge||ae.noFallback||(ge=ut.times[q])==null&&(ge=ut.times.normal),ge},Si=h.__private__.putInfo=function(){var A=hr(),q=function(ce){return ce};for(var ae in d!==null&&(q=kr.encryptor(A,0)),Q("<<"),Q("/Producer ("+qn(q("jsPDF "+nt.version))+")"),it)it.hasOwnProperty(ae)&&it[ae]&&Q("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+qn(q(it[ae]))+")");Q("/CreationDate ("+qn(q(M))+")"),Q(">>"),Q("endobj")},vo=h.__private__.putCatalog=function(A){var q=(A=A||{}).rootDictionaryObjId||sa;switch(hr(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+q+" 0 R"),Le||(Le="fullwidth"),Le){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+Le;ae.substr(ae.length-1)==="%"&&(Le=parseInt(Le)/100),typeof Le=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+k(Le)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}Me&&Q("/PageMode /"+Me),Nt.publish("putCatalog"),Q(">>"),Q("endobj")},Ec=h.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(oe+1)),Q("/Root "+oe+" 0 R"),Q("/Info "+(oe-1)+" 0 R"),d!==null&&Q("/Encrypt "+kr.oid+" 0 R"),Q("/ID [ <"+O+"> <"+O+"> ]"),Q(">>")},Cr=h.__private__.putHeader=function(){Q("%PDF-"+m),Q("%ÂºÃŸÂ¬Ã ")},rl=h.__private__.putXRef=function(){var A="0000000000";Q("xref"),Q("0 "+(oe+1)),Q("0000000000 65535 f ");for(var q=1;q<=oe;q++)typeof re[q]=="function"?Q((A+re[q]()).slice(-10)+" 00000 n "):re[q]!==void 0?Q((A+re[q]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},_i=h.__private__.buildDocument=function(){var A;oe=0,de=0,le=[],re=[],fe=[],sa=Wr(),ti=Wr(),Re(le),Nt.publish("buildDocument"),Cr(),Ai(),function(){Nt.publish("putAdditionalObjects");for(var ae=0;ae<fe.length;ae++){var ce=fe[ae];Yr(ce.objId,!0),Q(ce.content),Q("endobj")}Nt.publish("postPutAdditionalObjects")}(),A=[],function(){for(var ae in ct)ct.hasOwnProperty(ae)&&(u===!1||u===!0&&p.hasOwnProperty(ae))&&Ma(ct[ae])}(),function(){var ae;for(ae in st)st.hasOwnProperty(ae)&&Ic(st[ae])}(),function(){for(var ae in Nr)Nr.hasOwnProperty(ae)&&go(Nr[ae])}(),function(ae){var ce;for(ce in at)at.hasOwnProperty(ce)&&(at[ce]instanceof ro?mo(at[ce]):at[ce]instanceof Bo&&xo(at[ce],ae))}(A),Nt.publish("putResources"),A.forEach(Zo),Zo({resourcesOid:ti,objectOid:Number.MAX_SAFE_INTEGER}),Nt.publish("postPutResources"),d!==null&&(kr.oid=hr(),Q("<<"),Q("/Filter /Standard"),Q("/V "+kr.v),Q("/R "+kr.r),Q("/U <"+kr.toHexString(kr.U)+">"),Q("/O <"+kr.toHexString(kr.O)+">"),Q("/P "+kr.P),Q(">>"),Q("endobj")),Si(),vo();var q=de;return rl(),Ec(),Q("startxref"),Q(""+q),Q("%%EOF"),Re(be[z]),le.join(`
`)},yo=h.__private__.getBlob=function(A){return new Blob([He(A)],{type:"application/pdf"})},nl=h.output=h.__private__.output=(Wn=function(A,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",A){case void 0:return _i();case"save":h.save(q.filename);break;case"arraybuffer":return He(_i());case"blob":return yo(_i());case"bloburi":case"bloburl":if(pt.URL!==void 0&&typeof pt.URL.createObjectURL=="function")return pt.URL&&pt.URL.createObjectURL(yo(_i()))||void 0;er.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",ce=_i();try{ae=J0(ce)}catch{ae=J0(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+q.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ce=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(ge=q.pdfObjectUrl,Ce="");var Ne='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Ce+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Xe=pt.open();return Xe!==null&&Xe.document.write(Ne),Xe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',gt=pt.open();if(gt!==null){gt.document.write(et);var wt=this;gt.document.documentElement.querySelector("#pdfViewer").onload=function(){gt.document.title=q.filename,gt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(wt.output("bloburl"))}}return gt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',ur=pt.open();if(ur!==null&&(ur.document.write(Rt),ur.document.title=q.filename),ur||typeof safari>"u")return ur;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",q);default:return null}},Wn.foo=function(){try{return Wn.apply(this,arguments)}catch(ae){var A=ae.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var q="Error in function "+A.split(`
`)[0].split("<")[0]+": "+ae.message;if(!pt.console)throw new Error(q);pt.console.error(q,ae),pt.alert&&alert(q)}},Wn.foo.bar=Wn,Wn.foo),Vn=function(A){return Array.isArray(Dn)===!0&&Dn.indexOf(A)>-1};switch(n){case"pt":Ve=1;break;case"mm":Ve=72/25.4;break;case"cm":Ve=72/2.54;break;case"in":Ve=72;break;case"px":Ve=Vn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ve=12;break;case"ex":Ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ve=n}var kr=null;K(),X();var Fi=h.__private__.getPageInfo=h.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Je[A].objId,pageNumber:A,pageContext:Je[A]}},il=h.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in Je)if(Je[q].objId===A)break;return Fi(q)},Nc=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Je[z].objId,pageNumber:z,pageContext:Je[z]}};h.addPage=function(){return Qs.apply(this,arguments),this},h.setPage=function(){return Js.apply(this,arguments),Re.call(this,be[z]),this},h.insertPage=function(A){return this.addPage(),this.movePage(z,A),this},h.movePage=function(A,q){var ae,ce;if(A>q){ae=be[A],ce=Je[A];for(var ge=A;ge>q;ge--)be[ge]=be[ge-1],Je[ge]=Je[ge-1];be[q]=ae,Je[q]=ce,this.setPage(q)}else if(A<q){ae=be[A],ce=Je[A];for(var Ce=A;Ce<q;Ce++)be[Ce]=be[Ce+1],Je[Ce]=Je[Ce+1];be[q]=ae,Je[q]=ce,this.setPage(q)}return this},h.deletePage=function(){return Jo.apply(this,arguments),this},h.__private__.text=h.text=function(A,q,ae,ce,ge){var Ce,Ne,Xe,et,gt,wt,Rt,ur,Ir,nr=(ce=ce||{}).scope||this;if(typeof A=="number"&&typeof q=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Dr=ae;ae=q,q=A,A=Dr}if(arguments[3]instanceof dt==0?(Xe=arguments[4],et=arguments[5],Yt(Rt=arguments[3])==="object"&&Rt!==null||(typeof Xe=="string"&&(et=Xe,Xe=null),typeof Rt=="string"&&(et=Rt,Rt=null),typeof Rt=="number"&&(Xe=Rt,Rt=null),ce={flags:Rt,angle:Xe,align:et})):(E("The transform parameter of text() with a Matrix value"),Ir=ge),isNaN(q)||isNaN(ae)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return nr;var Er,Kr="",Gi=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:Fa,ai=nr.internal.scaleFactor;function $i(Wt){return Wt=Wt.split("	").join(Array(ce.TabLen||9).join(" ")),qn(Wt,Rt)}function ls(Wt){for(var Qt,vr=Wt.concat(),jr=[],Ki=vr.length;Ki--;)typeof(Qt=vr.shift())=="string"?jr.push(Qt):Array.isArray(Wt)&&(Qt.length===1||Qt[1]===void 0&&Qt[2]===void 0)?jr.push(Qt[0]):jr.push([Qt[0],Qt[1],Qt[2]]);return jr}function So(Wt,Qt){var vr;if(typeof Wt=="string")vr=Qt(Wt)[0];else if(Array.isArray(Wt)){for(var jr,Ki,vs=Wt.concat(),Io=[],gl=vs.length;gl--;)typeof(jr=vs.shift())=="string"?Io.push(Qt(jr)[0]):Array.isArray(jr)&&typeof jr[0]=="string"&&(Ki=Qt(jr[0],jr[1],jr[2]),Io.push([Ki[0],Ki[1],Ki[2]]));vr=Io}return vr}var la=!1,Ha=!0;if(typeof A=="string")la=!0;else if(Array.isArray(A)){var qa=A.concat();Ne=[];for(var ca,Zr=qa.length;Zr--;)(typeof(ca=qa.shift())!="string"||Array.isArray(ca)&&typeof ca[0]!="string")&&(Ha=!1);la=Ha}if(la===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var Va=he/nr.internal.scaleFactor,Ga=Va*(Gi-1);switch(ce.baseline){case"bottom":ae-=Ga;break;case"top":ae+=Va-Ga;break;case"hanging":ae+=Va-2*Ga;break;case"middle":ae+=Va/2-Ga}if((wt=ce.maxWidth||0)>0&&(typeof A=="string"?A=nr.splitTextToSize(A,wt):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(Wt,Qt){return Wt.concat(nr.splitTextToSize(Qt,wt))},[]))),Ce={text:A,x:q,y:ae,options:ce,mutex:{pdfEscape:qn,activeFontKey:qe,fonts:ct,activeFontSize:he}},Nt.publish("preProcessText",Ce),A=Ce.text,Xe=(ce=Ce.options).angle,Ir instanceof dt==0&&Xe&&typeof Xe=="number"){Xe*=Math.PI/180,ce.rotationDirection===0&&(Xe=-Xe),_===N&&(Xe=-Xe);var cs=Math.cos(Xe),ds=Math.sin(Xe);Ir=new dt(cs,ds,-ds,cs,0,0)}else Xe&&Xe instanceof dt&&(Ir=Xe);_!==N||Ir||(Ir=Bi),(gt=ce.charSpace||Wi)!==void 0&&(Kr+=j(D(gt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ur=ce.horizontalScale)!==void 0&&(Kr+=j(100*ur)+` Tz
`),ce.lang;var gn=-1,Xi=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,_o=nr.internal.getCurrentPageInfo().pageContext;switch(Xi){case 0:case!1:case"fill":gn=0;break;case 1:case!0:case"stroke":gn=1;break;case 2:case"fillThenStroke":gn=2;break;case 3:case"invisible":gn=3;break;case 4:case"fillAndAddForClipping":gn=4;break;case 5:case"strokeAndAddPathForClipping":gn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gn=6;break;case 7:case"addToPathForClipping":gn=7}var hl=_o.usedRenderingMode!==void 0?_o.usedRenderingMode:-1;gn!==-1?Kr+=gn+` Tr
`:hl!==-1&&(Kr+=`0 Tr
`),gn!==-1&&(_o.usedRenderingMode=gn),et=ce.align||"left";var Gn,$a=he*Gi,fs=nr.internal.pageSize.getWidth(),us=ct[qe];gt=ce.charSpace||Wi,wt=ce.maxWidth||0,Rt=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var da=[],Xa=function(Wt){return nr.getStringUnitWidth(Wt,{font:us,charSpace:gt,fontSize:he,doKerning:!1})*he/ai};if(Object.prototype.toString.call(A)==="[object Array]"){var jn;Ne=ls(A),et!=="left"&&(Gn=Ne.map(Xa));var On,fa=0;if(et==="right"){q-=Gn[0],A=[],Zr=Ne.length;for(var Yi=0;Yi<Zr;Yi++)Yi===0?(On=zi(q),jn=Ui(ae)):(On=D(fa-Gn[Yi]),jn=-$a),A.push([Ne[Yi],On,jn]),fa=Gn[Yi]}else if(et==="center"){q-=Gn[0]/2,A=[],Zr=Ne.length;for(var ua=0;ua<Zr;ua++)ua===0?(On=zi(q),jn=Ui(ae)):(On=D((fa-Gn[ua])/2),jn=-$a),A.push([Ne[ua],On,jn]),fa=Gn[ua]}else if(et==="left"){A=[],Zr=Ne.length;for(var hs=0;hs<Zr;hs++)A.push(Ne[hs])}else if(et==="justify"&&us.encoding==="Identity-H"){A=[],Zr=Ne.length,wt=wt!==0?wt:fs;for(var Co=0,xr=0;xr<Zr;xr++)if(jn=xr===0?Ui(ae):-$a,On=xr===0?zi(q):Co,xr<Zr-1){var pl=D((wt-Gn[xr])/(Ne[xr].split(" ").length-1)),Ii=Ne[xr].split(" ");A.push([Ii[0]+" ",On,jn]),Co=0;for(var Ei=1;Ei<Ii.length;Ei++){var ps=(Xa(Ii[Ei-1]+" "+Ii[Ei])-Xa(Ii[Ei]))*ai+pl;Ei==Ii.length-1?A.push([Ii[Ei],ps,0]):A.push([Ii[Ei]+" ",ps,0]),Co-=ps}}else A.push([Ne[xr],On,jn]);A.push(["",Co,0])}else{if(et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Zr=Ne.length,wt=wt!==0?wt:fs,xr=0;xr<Zr;xr++){jn=xr===0?Ui(ae):-$a,On=xr===0?zi(q):0;var gs=Ne[xr].split(" ").length-1,ms=gs>0?(wt-Gn[xr])/gs:0;xr<Zr-1?da.push(j(D(ms))):da.push(0),A.push([Ne[xr],On,jn])}}}(typeof ce.R2L=="boolean"?ce.R2L:Be)===!0&&(A=So(A,function(Wt,Qt,vr){return[Wt.split("").reverse().join(""),Qt,vr]})),Ce={text:A,x:q,y:ae,options:ce,mutex:{pdfEscape:qn,activeFontKey:qe,fonts:ct,activeFontSize:he}},Nt.publish("postProcessText",Ce),A=Ce.text,Er=Ce.mutex.isHex||!1;var xs=ct[qe].encoding;xs!=="WinAnsiEncoding"&&xs!=="StandardEncoding"||(A=So(A,function(Wt,Qt,vr){return[$i(Wt),Qt,vr]})),Ne=ls(A),A=[];for(var ha,pa,ga,Ya=Array.isArray(Ne[0])?1:0,ma="",Ka=function(Wt,Qt,vr){var jr="";return vr instanceof dt?(vr=typeof ce.angle=="number"?Mi(vr,new dt(1,0,0,1,Wt,Qt)):Mi(new dt(1,0,0,1,Wt,Qt),vr),_===N&&(vr=Mi(new dt(1,0,0,-1,0,0),vr)),jr=vr.join(" ")+` Tm
`):jr=j(Wt)+" "+j(Qt)+` Td
`,jr},$n=0;$n<Ne.length;$n++){switch(ma="",Ya){case 1:ga=(Er?"<":"(")+Ne[$n][0]+(Er?">":")"),ha=parseFloat(Ne[$n][1]),pa=parseFloat(Ne[$n][2]);break;case 0:ga=(Er?"<":"(")+Ne[$n]+(Er?">":")"),ha=zi(q),pa=Ui(ae)}da!==void 0&&da[$n]!==void 0&&(ma=da[$n]+` Tw
`),$n===0?A.push(ma+Ka(ha,pa,Ir)+ga):Ya===0?A.push(ma+ga):Ya===1&&A.push(ma+Ka(ha,pa,Ir)+ga)}A=Ya===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Ni=`BT
/`;return Ni+=qe+" "+he+` Tf
`,Ni+=j(he*Gi)+` TL
`,Ni+=za+`
`,Ni+=Kr,Ni+=A,Q(Ni+="ET"),p[qe]=!0,nr};var kc=h.__private__.clip=h.clip=function(A){return Q(A==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return kc("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Q("n"),this};var Ci=h.__private__.isValidStyle=function(A){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(q=!0),q};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(A){return Ci(A)&&(c=A),this};var al=h.__private__.getStyle=h.getStyle=function(A){var q=c;switch(A){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=A}return q},ol=h.close=function(){return Q("h"),this};h.stroke=function(){return Q("S"),this},h.fill=function(A){return bo("f",A),this},h.fillEvenOdd=function(A){return bo("f*",A),this},h.fillStroke=function(A){return bo("B",A),this},h.fillStrokeEvenOdd=function(A){return bo("B*",A),this};var bo=function(A,q){Yt(q)==="object"?jc(q,A):Q(A)},Ba=function(A){A===null||_===N&&A===void 0||(A=al(A),Q(A))};function Dc(A,q,ae,ce,ge){var Ce=new Bo(q||this.boundingBox,ae||this.xStep,ce||this.yStep,this.gState,ge||this.matrix);Ce.stream=this.stream;var Ne=A+"$$"+this.cloneIndex+++"$$";return Un(Ne,Ce),Ce}var jc=function(A,q){var ae=Ut[A.key],ce=at[ae];if(ce instanceof ro)Q("q"),Q(Oc(q)),ce.gState&&h.setGState(ce.gState),Q(A.matrix.toString()+" cm"),Q("/"+ae+" sh"),Q("Q");else if(ce instanceof Bo){var ge=new dt(1,0,0,-1,0,Wa());A.matrix&&(ge=ge.multiply(A.matrix||Bi),ae=Dc.call(ce,A.key,A.boundingBox,A.xStep,A.yStep,ge).id),Q("q"),Q("/Pattern cs"),Q("/"+ae+" scn"),ce.gState&&h.setGState(ce.gState),Q(q),Q("Q")}},Oc=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},es=h.moveTo=function(A,q){return Q(j(D(A))+" "+j(w(q))+" m"),this},sl=h.lineTo=function(A,q){return Q(j(D(A))+" "+j(w(q))+" l"),this},ii=h.curveTo=function(A,q,ae,ce,ge,Ce){return Q([j(D(A)),j(w(q)),j(D(ae)),j(w(ce)),j(D(ge)),j(w(Ce)),"c"].join(" ")),this};h.__private__.line=h.line=function(A,q,ae,ce,ge){if(isNaN(A)||isNaN(q)||isNaN(ae)||isNaN(ce)||!Ci(ge))throw new Error("Invalid arguments passed to jsPDF.line");return _===I?this.lines([[ae-A,ce-q]],A,q,[1,1],ge||"S"):this.lines([[ae-A,ce-q]],A,q,[1,1]).stroke()},h.__private__.lines=h.lines=function(A,q,ae,ce,ge,Ce){var Ne,Xe,et,gt,wt,Rt,ur,Ir,nr,Dr,Er,Kr;if(typeof A=="number"&&(Kr=ae,ae=q,q=A,A=Kr),ce=ce||[1,1],Ce=Ce||!1,isNaN(q)||isNaN(ae)||!Array.isArray(A)||!Array.isArray(ce)||!Ci(ge)||typeof Ce!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(es(q,ae),Ne=ce[0],Xe=ce[1],gt=A.length,Dr=q,Er=ae,et=0;et<gt;et++)(wt=A[et]).length===2?(Dr=wt[0]*Ne+Dr,Er=wt[1]*Xe+Er,sl(Dr,Er)):(Rt=wt[0]*Ne+Dr,ur=wt[1]*Xe+Er,Ir=wt[2]*Ne+Dr,nr=wt[3]*Xe+Er,Dr=wt[4]*Ne+Dr,Er=wt[5]*Xe+Er,ii(Rt,ur,Ir,nr,Dr,Er));return Ce&&ol(),Ba(ge),this},h.path=function(A){for(var q=0;q<A.length;q++){var ae=A[q],ce=ae.c;switch(ae.op){case"m":es(ce[0],ce[1]);break;case"l":sl(ce[0],ce[1]);break;case"c":ii.apply(this,ce);break;case"h":ol()}}return this},h.__private__.rect=h.rect=function(A,q,ae,ce,ge){if(isNaN(A)||isNaN(q)||isNaN(ae)||isNaN(ce)||!Ci(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return _===I&&(ce=-ce),Q([j(D(A)),j(w(q)),j(D(ae)),j(D(ce)),"re"].join(" ")),Ba(ge),this},h.__private__.triangle=h.triangle=function(A,q,ae,ce,ge,Ce,Ne){if(isNaN(A)||isNaN(q)||isNaN(ae)||isNaN(ce)||isNaN(ge)||isNaN(Ce)||!Ci(Ne))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-A,ce-q],[ge-ae,Ce-ce],[A-ge,q-Ce]],A,q,[1,1],Ne,!0),this},h.__private__.roundedRect=h.roundedRect=function(A,q,ae,ce,ge,Ce,Ne){if(isNaN(A)||isNaN(q)||isNaN(ae)||isNaN(ce)||isNaN(ge)||isNaN(Ce)||!Ci(Ne))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Xe=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*ae),Ce=Math.min(Ce,.5*ce),this.lines([[ae-2*ge,0],[ge*Xe,0,ge,Ce-Ce*Xe,ge,Ce],[0,ce-2*Ce],[0,Ce*Xe,-ge*Xe,Ce,-ge,Ce],[2*ge-ae,0],[-ge*Xe,0,-ge,-Ce*Xe,-ge,-Ce],[0,2*Ce-ce],[0,-Ce*Xe,ge*Xe,-Ce,ge,-Ce]],A+ge,q,[1,1],Ne,!0),this},h.__private__.ellipse=h.ellipse=function(A,q,ae,ce,ge){if(isNaN(A)||isNaN(q)||isNaN(ae)||isNaN(ce)||!Ci(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ce=4/3*(Math.SQRT2-1)*ae,Ne=4/3*(Math.SQRT2-1)*ce;return es(A+ae,q),ii(A+ae,q-Ne,A+Ce,q-ce,A,q-ce),ii(A-Ce,q-ce,A-ae,q-Ne,A-ae,q),ii(A-ae,q+Ne,A-Ce,q+ce,A,q+ce),ii(A+Ce,q+ce,A+ae,q+Ne,A+ae,q),Ba(ge),this},h.__private__.circle=h.circle=function(A,q,ae,ce){if(isNaN(A)||isNaN(q)||isNaN(ae)||!Ci(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,q,ae,ae,ce)},h.setFont=function(A,q,ae){return ae&&(q=U(q,ae)),qe=tl(A,q,{disableWarning:!1}),this};var Tc=h.__private__.getFont=h.getFont=function(){return ct[tl.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var A,q,ae={};for(A in ut)if(ut.hasOwnProperty(A))for(q in ae[A]=[],ut[A])ut[A].hasOwnProperty(q)&&ae[A].push(q);return ae},h.addFont=function(A,q,ae,ce,ge){var Ce=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ce.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Ce.indexOf(arguments[3])==-1&&(ae=U(ae,ce)),Zs.call(this,A,q,ae,ge=ge||"Identity-H")};var Fa,ts=r.lineWidth||.200025,Rc=h.__private__.getLineWidth=h.getLineWidth=function(){return ts},xt=h.__private__.setLineWidth=h.setLineWidth=function(A){return ts=A,Q(j(D(A))+" w"),this};h.__private__.setLineDash=nt.API.setLineDash=nt.API.setLineDashPattern=function(A,q){if(A=A||[],q=q||0,isNaN(q)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(ae){return j(D(ae))}).join(" "),q=j(D(q)),Q("["+A+"] "+q+" d"),this};var Lc=h.__private__.getLineHeight=h.getLineHeight=function(){return he*Fa};h.__private__.getLineHeight=h.getLineHeight=function(){return he*Fa};var Pc=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Fa=A),this},Mc=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Fa};Pc(r.lineHeight);var zi=h.__private__.getHorizontalCoordinate=function(A){return D(A)},Ui=h.__private__.getVerticalCoordinate=function(A){return _===N?A:Je[z].mediaBox.topRightY-Je[z].mediaBox.bottomLeftY-D(A)},Bc=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(A){return j(zi(A))},Fc=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(A){return j(Ui(A))},wo=r.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return wi(wo)},h.__private__.setStrokeColor=h.setDrawColor=function(A,q,ae,ce){return wo=ri({ch1:A,ch2:q,ch3:ae,ch4:ce,pdfColorType:"draw",precision:2}),Q(wo),this};var rs=r.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return wi(rs)},h.__private__.setFillColor=h.setFillColor=function(A,q,ae,ce){return rs=ri({ch1:A,ch2:q,ch3:ae,ch4:ce,pdfColorType:"fill",precision:2}),Q(rs),this};var za=r.textColor||"0 g",zc=h.__private__.getTextColor=h.getTextColor=function(){return wi(za)};h.__private__.setTextColor=h.setTextColor=function(A,q,ae,ce){return za=ri({ch1:A,ch2:q,ch3:ae,ch4:ce,pdfColorType:"text",precision:3}),this};var Wi=r.charSpace,Uc=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Wi||0)};h.__private__.setCharSpace=h.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Wi=A,this};var ns=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(A){var q=h.CapJoinStyles[A];if(q===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ns=q,Q(q+" J"),this};var is=0;h.__private__.setLineJoin=h.setLineJoin=function(A){var q=h.CapJoinStyles[A];if(q===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return is=q,Q(q+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(j(D(A))+" M"),this},h.GState=uc,h.setGState=function(A){(A=typeof A=="string"?st[ft[A]]:ll(null,A)).equals(rr)||(Q("/"+A.id+" gs"),rr=A)};var ll=function(A,q){if(!A||!ft[A]){var ae=!1;for(var ce in st)if(st.hasOwnProperty(ce)&&st[ce].equals(q)){ae=!0;break}if(ae)q=st[ce];else{var ge="GS"+(Object.keys(st).length+1).toString(10);st[ge]=q,q.id=ge}return A&&(ft[A]=q.id),Nt.publish("addGState",q),q}};h.addGState=function(A,q){return ll(A,q),this},h.saveGraphicsState=function(){return Q("q"),Kt.push({key:qe,size:he,color:za}),this},h.restoreGraphicsState=function(){Q("Q");var A=Kt.pop();return qe=A.key,he=A.size,za=A.color,rr=null,this},h.setCurrentTransformationMatrix=function(A){return Q(A.toString()+" cm"),this},h.comment=function(A){return Q("#"+A),this};var Hi=function(A,q){var ae=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Ce){isNaN(Ce)||(ae=parseFloat(Ce))}});var ce=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(Ce){isNaN(Ce)||(ce=parseFloat(Ce))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Ce){ge=Ce.toString()}}),this},as=function(A,q,ae,ce){Hi.call(this,A,q),this.type="rect";var ge=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Ne){isNaN(Ne)||(ge=parseFloat(Ne))}});var Ce=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ce},set:function(Ne){isNaN(Ne)||(Ce=parseFloat(Ne))}}),this},Ao=function(){this.page=ht,this.currentPage=z,this.pages=be.slice(0),this.pagesContext=Je.slice(0),this.x=We,this.y=Dt,this.matrix=yt,this.width=ss(z),this.height=dl(z),this.outputDestination=Te,this.id="",this.objectNumber=-1};Ao.prototype.restore=function(){ht=this.page,z=this.currentPage,Je=this.pagesContext,be=this.pages,We=this.x,Dt=this.y,yt=this.matrix,cl(z,this.width),qi(z,this.height),Te=this.outputDestination};var os=function(A,q,ae,ce,ge){Ur.push(new Ao),ht=z=0,be=[],We=A,Dt=q,yt=ge,Qo([ae,ce])};for(var Ua in h.beginFormObject=function(A,q,ae,ce,ge){return os(A,q,ae,ce,ge),this},h.endFormObject=function(A){return function(q){if(Xr[q])Ur.pop().restore();else{var ae=new Ao,ce="Xo"+(Object.keys(Nr).length+1).toString(10);ae.id=ce,Xr[q]=ce,Nr[ce]=ae,Nt.publish("addFormObject",ae),Ur.pop().restore()}}(A),this},h.doFormObject=function(A,q){var ae=Nr[Xr[A]];return Q("q"),Q(q.toString()+" cm"),Q("/"+ae.id+" Do"),Q("Q"),this},h.getFormObject=function(A){var q=Nr[Xr[A]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},h.save=function(A,q){return A=A||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(to(yo(_i()),A),typeof to.unload=="function"&&pt.setTimeout&&setTimeout(to.unload,911),this):new Promise(function(ae,ce){try{var ge=to(yo(_i()),A);typeof to.unload=="function"&&pt.setTimeout&&setTimeout(to.unload,911),ae(ge)}catch(Ce){ce(Ce.message)}})},nt.API)nt.API.hasOwnProperty(Ua)&&(Ua==="events"&&nt.API.events.length?function(A,q){var ae,ce,ge;for(ge=q.length-1;ge!==-1;ge--)ae=q[ge][0],ce=q[ge][1],A.subscribe.apply(A,[ae].concat(typeof ce=="function"?[ce]:ce))}(Nt,nt.API.events):h[Ua]=nt.API[Ua]);function ss(A){return Je[A].mediaBox.topRightX-Je[A].mediaBox.bottomLeftX}function cl(A,q){Je[A].mediaBox.topRightX=q+Je[A].mediaBox.bottomLeftX}function dl(A){return Je[A].mediaBox.topRightY-Je[A].mediaBox.bottomLeftY}function qi(A,q){Je[A].mediaBox.topRightY=q+Je[A].mediaBox.bottomLeftY}var Vi=h.getPageWidth=function(A){return ss(A=A||z)/Ve},fl=h.setPageWidth=function(A,q){cl(A,q*Ve)},Wa=h.getPageHeight=function(A){return dl(A=A||z)/Ve},ul=h.setPageHeight=function(A,q){qi(A,q*Ve)};return h.internal={pdfEscape:qn,getStyle:al,getFont:Tc,getFontSize:Ee,getCharSpace:Uc,getTextColor:zc,getLineHeight:Lc,getLineHeightFactor:Mc,getLineWidth:Rc,write:je,getHorizontalCoordinate:zi,getVerticalCoordinate:Ui,getCoordinateString:Bc,getVerticalCoordinateString:Fc,collections:{},newObject:hr,newAdditionalObject:La,newObjectDeferred:Wr,newObjectDeferredBegin:Yr,getFilters:ni,putStream:Hn,events:Nt,scaleFactor:Ve,pageSize:{getWidth:function(){return Vi(z)},setWidth:function(A){fl(z,A)},getHeight:function(){return Wa(z)},setHeight:function(A){ul(z,A)}},encryptionOptions:d,encryption:kr,getEncryptor:function(A){return d!==null?kr.encryptor(A,0):function(q){return q}},output:nl,getNumberOfPages:el,get pages(){return be},out:Q,f2:k,f3:S,getPageInfo:Fi,getPageInfoByObjId:il,getCurrentPageInfo:Nc,getPDFVersion:v,Point:Hi,Rectangle:as,Matrix:dt,hasHotfix:Vn},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Vi(z)},set:function(A){fl(z,A)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Wa(z)},set:function(A){ul(z,A)},enumerable:!0,configurable:!0}),(function(A){for(var q=0,ae=Pe.length;q<ae;q++){var ce=Zs.call(this,A[q][0],A[q][1],A[q][2],Pe[q][3],!0);u===!1&&(p[ce]=!0);var ge=A[q][0].split("-");Ks({id:ce,fontName:ge[0],fontStyle:ge[1]||""})}Nt.publish("addFonts",{fonts:ct,dictionary:ut})}).call(h,Pe),qe="F1",Qs(i,t),Nt.publish("initialized"),h}To.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},To.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},To.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},To.prototype.processOwnerPassword=function(r,e){return df(cf(e).substr(0,5),r)},To.prototype.encryptor=function(r,e){var t=cf(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return df(t,n)}},uc.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Yt(r)!==Yt(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},nt.API={events:[]},nt.version="3.0.4";var mr=nt.API,Mf=1,po=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jo=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vt=function(r){return r.toFixed(2)},Ia=function(r){return r.toFixed(5)};mr.__acroform__={};var kn=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},n1=function(r){return r*Mf},Di=function(r){var e=new ap,t=$e.internal.getHeight(r)||0,n=$e.internal.getWidth(r)||0;return e.BBox=[0,0,Number(vt(n)),Number(vt(t))],e},j3=mr.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},O3=mr.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},T3=mr.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},wr=mr.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return T3(r,e-1)},Ar=mr.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return j3(r,e-1)},Sr=mr.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return O3(r,e-1)},R3=mr.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],a=r[1],s=r[2],o=r[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=t(i+s)||0,l.upperRight_Y=n(a)||0,[Number(vt(l.lowerLeft_X)),Number(vt(l.lowerLeft_Y)),Number(vt(l.upperRight_X)),Number(vt(l.upperRight_Y))]},L3=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=ff(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+vt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Di(r);return a.scope=r.scope,a.stream=e.join(`
`),a}},ff=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var a=t,s=$e.internal.getHeight(r)||0;s=s<0?-s:s;var o=$e.internal.getWidth(r)||0;o=o<0?-o:o;var l=function(k,S,D){if(k+1<i.length){var w=S+" "+i[k+1][0];return Hl(w,r,D).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var c,d,u=Hl("3",r,a).height,p=r.multiline?s-a:(s-u)/2,h=p+=2,m=0,v=0,b=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Hl(e,r,a=12).width+", FieldWidth:"+o+`
`;break}for(var y="",I=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var _=!1;if(i[N].length!==1&&b!==i[N].length-1){if((u+2)*(I+2)+2>s)continue e;y+=i[N][b],_=!0,v=N,N--}else{y=(y+=i[N][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var F=parseInt(N),R=l(F,y,a),U=N>=i.length-1;if(R&&!U){y+=" ",b=0;continue}if(R||U){if(U)v=F;else if(r.multiline&&(u+2)*(I+2)+2>s)continue e}else{if(!r.multiline||(u+2)*(I+2)+2>s)continue e;v=F}}for(var j="",E=m;E<=v;E++){var B=i[E];if(r.multiline){if(E===v){j+=B[b]+" ",b=(b+1)%B.length;continue}if(E===m){j+=B[B.length-1]+" ";continue}}j+=B[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,d=Hl(j,r,a).width,r.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}e+=vt(c)+" "+vt(h)+` Td
`,e+="("+po(j)+`) Tj
`,e+=-vt(c)+` 0 Td
`,h=-(a+2),d=0,m=_?v:v+1,I++,y=""}break}return n.text=e,n.fontSize=a,n},Hl=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},P3={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},M3=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},B3=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(yi.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(P3)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Mf=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new op,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&M3(a,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var a=!n;for(var s in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],l=[],c=o.Rect;if(o.Rect&&(o.Rect=R3(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=$e.createDefaultAppearanceStream(o),Yt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=L3(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var u="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(u+="/"+p+" ",u+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var m=h[s];typeof m=="function"&&(m=m.call(i,o)),u+="/"+s+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(i,o)),u+="/"+s+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);u+=">>"}l.push({key:"AP",value:`<<
`+u+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&function(v,b){for(var y in v)if(v.hasOwnProperty(y)){var I=y,N=v[y];b.internal.newObjectDeferredBegin(N.objId,!0),Yt(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete v[I]}}(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},ip=mr.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(s){return s};if(Array.isArray(r)){for(var i="[",a=0;a<r.length;a++)switch(a!==0&&(i+=" "),Yt(r[a])){case"boolean":case"number":case"object":i+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+po(n(r[a].toString()))+")"):i+=r[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},jd=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+po(n(r))+")"},Ti=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ti.prototype.toString=function(){return this.objId+" 0 R"},Ti.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Ti.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:ip(i,this.objId,this.scope)}):i instanceof Ti?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var ap=function(){Ti.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};kn(ap,Ti);var op=function(){Ti.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+po(t(r))+")"}},set:function(t){r=t}})};kn(op,Ti);var yi=function r(){Ti.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wr(e,3)},set:function(y){y?this.F=Ar(e,3):this.F=Sr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');t=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof hc)return;a="FieldObject"+r.FieldNum++}var y=function(I){return I};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+po(y(a))+")"},set:function(y){a=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(y){a=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Mf:c},set:function(y){c=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof hc||this instanceof so))return jd(u,this.objId,this.scope)},set:function(y){y=y.toString(),u=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Vr==0?jd(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof Vr==0?y.substr(0,1)==="("?jo(y.substr(1,y.length-2)):jo(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr==1?jo(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Vr==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Vr==0?jd(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Vr==0?y.substr(0,1)==="("?jo(y.substr(1,y.length-2)):jo(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr==1?jo(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Vr==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,1)},set:function(y){y?this.Ff=Ar(this.Ff,1):this.Ff=Sr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,2)},set:function(y){y?this.Ff=Ar(this.Ff,2):this.Ff=Sr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,3)},set:function(y){y?this.Ff=Ar(this.Ff,3):this.Ff=Sr(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};kn(yi,Ti);var Fo=function(){yi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ip(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,c=[];l=s.exec(a);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,18)},set:function(t){t?this.Ff=Ar(this.Ff,18):this.Ff=Sr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ar(this.Ff,19):this.Ff=Sr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,20)},set:function(t){t?(this.Ff=Ar(this.Ff,20),e.sort()):this.Ff=Sr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,22)},set:function(t){t?this.Ff=Ar(this.Ff,22):this.Ff=Sr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,23)},set:function(t){t?this.Ff=Ar(this.Ff,23):this.Ff=Sr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,27)},set:function(t){t?this.Ff=Ar(this.Ff,27):this.Ff=Sr(this.Ff,27)}}),this.hasAppearanceStream=!1};kn(Fo,yi);var zo=function(){Fo.call(this),this.fontName="helvetica",this.combo=!1};kn(zo,Fo);var Uo=function(){zo.call(this),this.combo=!0};kn(Uo,zo);var Ql=function(){Uo.call(this),this.edit=!0};kn(Ql,Uo);var Vr=function(){yi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,15)},set:function(t){t?this.Ff=Ar(this.Ff,15):this.Ff=Sr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,16)},set:function(t){t?this.Ff=Ar(this.Ff,16):this.Ff=Sr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,17)},set:function(t){t?this.Ff=Ar(this.Ff,17):this.Ff=Sr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,26)},set:function(t){t?this.Ff=Ar(this.Ff,26):this.Ff=Sr(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+po(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Yt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};kn(Vr,yi);var Jl=function(){Vr.call(this),this.pushButton=!0};kn(Jl,Vr);var Wo=function(){Vr.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};kn(Wo,Vr);var hc=function(){var r,e;yi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),n)s.push("/"+a+" ("+po(i(n[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Yt(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$e.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};kn(hc,yi),Wo.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Wo.prototype.createOption=function(r){var e=new hc;return e.Parent=this,e.optionName=r,this.Kids.push(e),F3.call(this.scope,e),e};var ec=function(){Vr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$e.CheckBox.createAppearanceStream()};kn(ec,Vr);var so=function(){yi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,13)},set:function(e){e?this.Ff=Ar(this.Ff,13):this.Ff=Sr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,21)},set:function(e){e?this.Ff=Ar(this.Ff,21):this.Ff=Sr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,23)},set:function(e){e?this.Ff=Ar(this.Ff,23):this.Ff=Sr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,24)},set:function(e){e?this.Ff=Ar(this.Ff,24):this.Ff=Sr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,25)},set:function(e){e?this.Ff=Ar(this.Ff,25):this.Ff=Sr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,26)},set:function(e){e?this.Ff=Ar(this.Ff,26):this.Ff=Sr(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};kn(so,yi);var tc=function(){so.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wr(this.Ff,14)},set:function(r){r?this.Ff=Ar(this.Ff,14):this.Ff=Sr(this.Ff,14)}}),this.password=!0};kn(tc,so);var $e={CheckBox:{createAppearanceStream:function(){return{N:{On:$e.CheckBox.YesNormal},D:{On:$e.CheckBox.YesPushDown,Off:$e.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=ff(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+vt($e.internal.getWidth(r))+" "+vt($e.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+vt(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Di(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],a=$e.internal.getHeight(r),s=$e.internal.getWidth(r),o=ff(r,r.caption);return i.push("1 g"),i.push("0 0 "+vt(s)+" "+vt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+vt(s-1)+" "+vt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+vt(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vt($e.internal.getWidth(r))+" "+vt($e.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:$e.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=$e.RadioButton.Circle.YesNormal,e.D[r]=$e.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=$e.internal.getWidth(r)<=$e.internal.getHeight(r)?$e.internal.getWidth(r)/4:$e.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=$e.internal.Bezier_C,a=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ia($e.internal.getWidth(r)/2)+" "+Ia($e.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=$e.internal.getWidth(r)<=$e.internal.getHeight(r)?$e.internal.getWidth(r)/4:$e.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*$e.internal.Bezier_C).toFixed(5)),s=Number((n*$e.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ia($e.internal.getWidth(r)/2)+" "+Ia($e.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ia($e.internal.getWidth(r)/2)+" "+Ia($e.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=$e.internal.getWidth(r)<=$e.internal.getHeight(r)?$e.internal.getWidth(r)/4:$e.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*$e.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ia($e.internal.getWidth(r)/2)+" "+Ia($e.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:$e.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=$e.RadioButton.Cross.YesNormal,e.D[r]=$e.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Di(r);e.scope=r.scope;var t=[],n=$e.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+vt($e.internal.getWidth(r)-2)+" "+vt($e.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(vt(n.x1.x)+" "+vt(n.x1.y)+" m"),t.push(vt(n.x2.x)+" "+vt(n.x2.y)+" l"),t.push(vt(n.x4.x)+" "+vt(n.x4.y)+" m"),t.push(vt(n.x3.x)+" "+vt(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=$e.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+vt($e.internal.getWidth(r))+" "+vt($e.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vt($e.internal.getWidth(r)-2)+" "+vt($e.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(vt(t.x1.x)+" "+vt(t.x1.y)+" m"),n.push(vt(t.x2.x)+" "+vt(t.x2.y)+" l"),n.push(vt(t.x4.x)+" "+vt(t.x4.y)+" m"),n.push(vt(t.x3.x)+" "+vt(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Di(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vt($e.internal.getWidth(r))+" "+vt($e.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};$e.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=$e.internal.getWidth(r),t=$e.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},$e.internal.getWidth=function(r){var e=0;return Yt(r)==="object"&&(e=n1(r.Rect[2])),e},$e.internal.getHeight=function(r){var e=0;return Yt(r)==="object"&&(e=n1(r.Rect[3])),e};var F3=mr.addField=function(r){if(B3(this,r),!(r instanceof yi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};mr.AcroFormChoiceField=Fo,mr.AcroFormListBox=zo,mr.AcroFormComboBox=Uo,mr.AcroFormEditBox=Ql,mr.AcroFormButton=Vr,mr.AcroFormPushButton=Jl,mr.AcroFormRadioButton=Wo,mr.AcroFormCheckBox=ec,mr.AcroFormTextField=so,mr.AcroFormPasswordField=tc,mr.AcroFormAppearance=$e,mr.AcroForm={ChoiceField:Fo,ListBox:zo,ComboBox:Uo,EditBox:Ql,Button:Vr,PushButton:Jl,RadioButton:Wo,CheckBox:ec,TextField:so,PasswordField:tc,Appearance:$e},nt.AcroForm={ChoiceField:Fo,ListBox:zo,ComboBox:Uo,EditBox:Ql,Button:Vr,PushButton:Jl,RadioButton:Wo,CheckBox:ec,TextField:so,PasswordField:tc,Appearance:$e};nt.AcroForm;function sp(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(k,S){var D,w,M,O,L,X=t;if((S=S||t)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(R(k))for(L in n)for(M=n[L],D=0;D<M.length;D+=1){for(O=!0,w=0;w<M[D].length;w+=1)if(M[D][w]!==void 0&&M[D][w]!==k[w]){O=!1;break}if(O===!0){X=L;break}}else for(L in n)for(M=n[L],D=0;D<M.length;D+=1){for(O=!0,w=0;w<M[D].length;w+=1)if(M[D][w]!==void 0&&M[D][w]!==k.charCodeAt(w)){O=!1;break}if(O===!0){X=L;break}}return X===t&&S!==t&&(X=S),X},a=function k(S){for(var D=this.internal.write,w=this.internal.putStream,M=(0,this.internal.getFilters)();M.indexOf("FlateEncode")!==-1;)M.splice(M.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var O=[];if(O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Image"}),O.push({key:"Width",value:S.width}),O.push({key:"Height",value:S.height}),S.colorSpace===y.INDEXED?O.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(O.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===y.DEVICE_CMYK&&O.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),O.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&O.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var L="",X=0,H=S.transparency.length;X<H;X++)L+=S.transparency[X]+" "+S.transparency[X]+" ";O.push({key:"Mask",value:"["+L+"]"})}S.sMask!==void 0&&O.push({key:"SMask",value:S.objectId+1+" 0 R"});var ee=S.filter!==void 0?["/"+S.filter]:void 0;if(w({data:S.data,additionalKeyValues:O,alreadyAppliedFilters:ee,objectId:S.objectId}),D("endobj"),"sMask"in S&&S.sMask!==void 0){var K,T=(K=S.sMaskBitsPerComponent)!==null&&K!==void 0?K:S.bitsPerComponent,z={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:T,data:S.sMask};"filter"in S&&(z.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(T," /Columns ").concat(S.width),z.filter=S.filter),k.call(this,z)}if(S.colorSpace===y.INDEXED){var W=this.internal.newObject();w({data:j(new Uint8Array(S.palette)),objectId:W}),D("endobj")}},s=function(){var k=this.internal.collections[e+"images"];for(var S in k)a.call(this,k[S])},o=function(){var k,S=this.internal.collections[e+"images"],D=this.internal.write;for(var w in S)D("/I"+(k=S[w]).index,k.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var k=this.internal.collections[e+"images"];return l.call(this),k},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},u=function(k){return typeof r["process"+k.toUpperCase()]=="function"},p=function(k){return Yt(k)==="object"&&k.nodeType===1},h=function(k,S){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var D=""+k.getAttribute("src");if(D.indexOf("data:image/")===0)return Zl(unescape(D).split("base64,").pop());var w=r.loadFile(D,!0);if(w!==void 0)return w}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var M;switch(S){case"PNG":M="image/png";break;case"WEBP":M="image/webp";break;default:M="image/jpeg"}return Zl(k.toDataURL(M,1).split("base64,").pop())}},m=function(k){var S=this.internal.collections[e+"images"];if(S){for(var D in S)if(k===S[D].alias)return S[D]}},v=function(k,S,D){return k||S||(k=-96,S=-96),k<0&&(k=-1*D.width*72/k/this.internal.scaleFactor),S<0&&(S=-1*D.height*72/S/this.internal.scaleFactor),k===0&&(k=S*D.width/D.height),S===0&&(S=k*D.height/D.width),[k,S]},b=function(k,S,D,w,M,O){var L=v.call(this,D,w,M),X=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,ee=c.call(this);if(D=L[0],w=L[1],ee[M.index]=M,O){O*=Math.PI/180;var K=Math.cos(O),T=Math.sin(O),z=function(G){return G.toFixed(4)},W=[z(K),z(T),z(-1*T),z(K),0,0,"cm"]}this.internal.write("q"),O?(this.internal.write([1,"0","0",1,X(k),H(S+w),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([X(D),"0","0",X(w),"0","0","cm"].join(" "))):this.internal.write([X(D),"0","0",X(w),X(k),H(S+w),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+M.index+" Do"),this.internal.write("Q")},y=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=r.__addimage__.sHashCode=function(k){var S,D,w=0;if(typeof k=="string")for(D=k.length,S=0;S<D;S++)w=(w<<5)-w+k.charCodeAt(S),w|=0;else if(R(k))for(D=k.byteLength/2,S=0;S<D;S++)w=(w<<5)-w+k[S],w|=0;return w},_=r.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var S=!0;return k.length===0&&(S=!1),k.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(S=!1),S},F=r.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var S=k.indexOf(",");return S<0?null:k.substring(0,S).trim().endsWith("base64")?k.substring(S+1):null};r.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var R=r.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},U=r.__addimage__.binaryStringToUint8Array=function(k){for(var S=k.length,D=new Uint8Array(S),w=0;w<S;w++)D[w]=k.charCodeAt(w);return D},j=r.__addimage__.arrayBufferToBinaryString=function(k){for(var S="",D=R(k)?k:new Uint8Array(k),w=0;w<D.length;w+=8192)S+=String.fromCharCode.apply(null,D.subarray(w,w+8192));return S};r.addImage=function(){var k,S,D,w,M,O,L,X,H;if(typeof arguments[1]=="number"?(S=t,D=arguments[1],w=arguments[2],M=arguments[3],O=arguments[4],L=arguments[5],X=arguments[6],H=arguments[7]):(S=arguments[1],D=arguments[2],w=arguments[3],M=arguments[4],O=arguments[5],L=arguments[6],X=arguments[7],H=arguments[8]),Yt(k=arguments[0])==="object"&&!p(k)&&"imageData"in k){var ee=k;k=ee.imageData,S=ee.format||S||t,D=ee.x||D||0,w=ee.y||w||0,M=ee.w||ee.width||M,O=ee.h||ee.height||O,L=ee.alias||L,X=ee.compression||X,H=ee.rotation||ee.angle||H}var K=this.internal.getFilters();if(X===void 0&&K.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(D)||isNaN(w))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var T=E.call(this,k,S,L,X);return b.call(this,D,w,M,O,T,H),this};var E=function(k,S,D,w){var M,O,L;if(typeof k=="string"&&i(k)===t){k=unescape(k);var X=B(k,!1);(X!==""||(X=r.loadFile(k,!0))!==void 0)&&(k=X)}if(p(k)&&(k=h(k,S)),S=i(k,S),!u(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((L=D)==null||L.length===0)&&(D=function(H){return typeof H=="string"||R(H)?N(H):R(H.data)?N(H.data):null}(k)),(M=m.call(this,D))||(k instanceof Uint8Array||S==="RGBA"||(O=k,k=U(k)),M=this["process"+S.toUpperCase()](k,d.call(this),D,function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in r.image_compression?H:I.NONE}(w),O)),!M)throw new Error("An unknown error occurred whilst processing the image.");return M},B=r.__addimage__.convertBase64ToBinaryString=function(k,S){S=typeof S!="boolean"||S;var D,w="";if(typeof k=="string"){var M;D=(M=F(k))!==null&&M!==void 0?M:k;try{w=Zl(D)}catch(O){if(S)throw _(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+O.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return w};r.getImageProperties=function(k){var S,D,w="";if(p(k)&&(k=h(k)),typeof k=="string"&&i(k)===t&&((w=B(k,!1))===""&&(w=r.loadFile(k)||""),k=w),D=i(k),!u(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(k instanceof Uint8Array||(k=U(k)),!(S=this["process"+D.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=D,S}})(nt.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};nt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,d=!1,u=0;u<c.length&&!d;u++)switch((n=c[u]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),I=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(y(n.contents))+")",a+=" /Popup "+b.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(y(I))+") >>",v.content=a;var N=v.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(a+=" /Open true"),a+=" >>",b.content=a,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(m(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var F=this.annotations._nameMap[n.options.name];n.options.pageNumber=F.page,n.options.top=F.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var R=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+R+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:c(n),w:l(t+i),h:c(n+a)},options:s,type:"link"})},r.textWithLink=function(t,n,i,a){var s,o,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(t,o).length;s=Math.ceil(c*d)}else o=l,s=c;return this.text(t,n,i,a),i+=.2*c,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-c,o,s,a),l},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(nt.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},s=r.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=r.__arabicParser__.isArabicEndLetter=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(v){return s(v)&&i.indexOf(v.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length>=1};var c=r.__arabicParser__.arabicLetterHasFinalForm=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length>=3};var d=r.__arabicParser__.arabicLetterHasMedialForm=function(v){return s(v)&&a(v)&&e[v.charCodeAt(0)].length==4},u=r.__arabicParser__.resolveLigatures=function(v){var b=0,y=t,I="",N=0;for(b=0;b<v.length;b+=1)y[v.charCodeAt(b)]!==void 0?(N++,typeof(y=y[v.charCodeAt(b)])=="number"&&(I+=String.fromCharCode(y),y=t,N=0),b===v.length-1&&(y=t,I+=v.charAt(b-(N-1)),b-=N-1,N=0)):(y=t,I+=v.charAt(b-N),b-=N,N=0);return I};r.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var p=r.__arabicParser__.getCorrectForm=function(v,b,y){return s(v)?a(v)===!1?-1:!c(v)||!s(b)&&!s(y)||!s(y)&&o(b)||o(v)&&!s(b)||o(v)&&l(b)||o(v)&&o(b)?0:d(v)&&s(b)&&!o(b)&&s(y)&&c(y)?3:o(v)||!s(y)?1:2:-1},h=function(v){var b=0,y=0,I=0,N="",_="",F="",R=(v=v||"").split("\\s+"),U=[];for(b=0;b<R.length;b+=1){for(U.push(""),y=0;y<R[b].length;y+=1)N=R[b][y],_=R[b][y-1],F=R[b][y+1],s(N)?(I=p(N,_,F),U[b]+=I!==-1?String.fromCharCode(e[N.charCodeAt(0)][I]):N):U[b]+=N;U[b]=u(U[b])}return U.join(" ")},m=r.__arabicParser__.processArabic=r.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var I=0;for(y=[],I=0;I<b.length;I+=1)Array.isArray(b[I])?y.push([h(b[I][0]),b[I][1],b[I][2]]):y.push([h(b[I])]);v=y}else v=h(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};r.events.push(["preProcessText",m])}(nt.API),nt.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(nt.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(v){m=v}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},r.getTextDimensions=function(l,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),u=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,h=0,m=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,_){return N.concat(b.splitTextToSize(_,y))},[])):l=Array.isArray(l)?l:[l];for(var I=0;I<l.length;I++)h<(v=this.getStringUnitWidth(l[I],{font:u})*d)&&(h=v);return h!==0&&(m=l.length),{w:h/=p,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=r.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=u.top,h&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};r.table=function(l,c,d,u,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,m,v,b,y=[],I=[],N=[],_={},F={},R=[],U=[],j=(p=p||{}).autoSize||!1,E=p.printHeaders!==!1,B=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,k=p.margins||Object.assign({width:this.getPageWidth()},e),S=typeof p.padding=="number"?p.padding:3,D=p.headerBackgroundColor||"#c8c8c8",w=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=w,this.setFontSize(B),u==null)I=y=Object.keys(d[0]),N=y.map(function(){return"left"});else if(Array.isArray(u)&&Yt(u[0])==="object")for(y=u.map(function(ee){return ee.name}),I=u.map(function(ee){return ee.prompt||ee.name||""}),N=u.map(function(ee){return ee.align||"left"}),h=0;h<u.length;h+=1)F[u[h].name]=.7499990551181103*u[h].width;else Array.isArray(u)&&typeof u[0]=="string"&&(I=y=u,N=y.map(function(){return"left"}));if(j||Array.isArray(u)&&typeof u[0]=="string")for(h=0;h<y.length;h+=1){for(_[b=y[h]]=d.map(function(ee){return ee[b]}),this.setFont(void 0,"bold"),R.push(this.getTextDimensions(I[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=_[b],this.setFont(void 0,"normal"),v=0;v<m.length;v+=1)R.push(this.getTextDimensions(m[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[b]=Math.max.apply(null,R)+S+S,R=[]}if(E){var M={};for(h=0;h<y.length;h+=1)M[y[h]]={},M[y[h]].text=I[h],M[y[h]].align=N[h];var O=o.call(this,M,F);U=y.map(function(ee){return new a(l,c,F[ee],O,M[ee].text,void 0,M[ee].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var L=u.reduce(function(ee,K){return ee[K.name]=K.align,ee},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var X=o.call(this,d[h],F);for(v=0;v<y.length;v+=1){var H=d[h][y[v]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:v,data:H},this),s.call(this,new a(l,c,F[y[v]],X,H,h+2,L[y[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(h){var m=l[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*u/p+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};r.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(m)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),t=!1}}(nt.API);var lp={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},cp=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],uf=sp(cp),dp=[100,200,300,400,500,600,700,800,900],z3=sp(dp);function Od(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return lp[a=a||"normal"]?a:"normal"}(r.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(r.weight),i=function(a){return typeof uf[a=a||"normal"]=="number"?a:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function i1(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var U3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},a1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function o1(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function s1(r){return r.trimLeft()}function W3(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function H3(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var ql,l1,c1,Oo,Vl,d1,f1,u1,Td=["times"];function h1(r,e,t,n,i){var a=4,s=g1;switch(i){case nt.API.image_compression.FAST:a=1,s=p1;break;case nt.API.image_compression.MEDIUM:a=6,s=m1;break;case nt.API.image_compression.SLOW:a=9,s=x1}r=function(l,c,d,u){for(var p,h=l.length/c,m=new Uint8Array(l.length+h),v=[q3,p1,g1,m1,x1],b=0;b<h;b+=1){var y=b*c,I=l.subarray(y,y+c);if(u)m.set(u(I,d,p),y+b);else{for(var N=v.length,_=[],F=0;F<N;F+=1)_[F]=v[F](I,d,p);var R=G3(_.concat());m.set(_[R],y+b)}p=I}return m}(r,e,Math.ceil(t*n/8),s);var o=af(r,{level:a});return nt.API.__addimage__.arrayBufferToBinaryString(o)}function q3(r){var e=Array.apply([],r);return e.unshift(0),e}function p1(r,e){var t=r.length,n=[];n[0]=1;for(var i=0;i<t;i+=1){var a=r[i-e]||0;n[i+1]=r[i]-a+256&255}return n}function g1(r,e,t){var n=r.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var s=t&&t[a]||0;i[a+1]=r[a]-s+256&255}return i}function m1(r,e,t){var n=r.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var s=r[a-e]||0,o=t&&t[a]||0;i[a+1]=r[a]+256-(s+o>>>1)&255}return i}function x1(r,e,t){var n=r.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var s=V3(r[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);i[a+1]=r[a]-s+256&255}return i}function V3(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),i=Math.abs(r-t),a=Math.abs(r+e-t-t);return n<=i&&n<=a?r:i<=a?e:t}function G3(r){var e=r.map(function(t){return t.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Rd(r,e,t){var n=e*t,i=Math.floor(n/8),a=16-(n-8*i+t),s=(1<<t)-1;return fp(r,i)>>a&s}function v1(r,e,t,n){var i=t*n,a=Math.floor(i/8),s=16-(i-8*a+n),o=(1<<n)-1,l=(e&o)<<s;(function(c,d,u){if(d+1<c.byteLength)c.setUint16(d,u,!1);else{var p=u>>8&255;c.setUint8(d,p)}})(r,a,fp(r,a)&~(o<<s)&65535|l)}function fp(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function $3(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],a=i>>7,s=1<<1+(7&i);r[e++],r[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var c=!0,d=[],u=0,p=null,h=0,m=null;for(this.width=t,this.height=n;c&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,m=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=r[e++];u=r[e++]|r[e++]<<8,p=r[e++],1&v||(p=null),h=v>>2&7,e++;break;case 254:for(;;){if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var b=r[e++]|r[e++]<<8,y=r[e++]|r[e++]<<8,I=r[e++]|r[e++]<<8,N=r[e++]|r[e++]<<8,_=r[e++],F=_>>6&1,R=1<<1+(7&_),U=o,j=l,E=!1;_>>7&&(E=!0,U=e,j=R,e+=3*R);var B=e;for(e++;;){var k;if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}d.push({x:b,y,width:I,height:N,has_local_palette:E,palette_offset:U,palette_size:j,data_offset:B,data_length:e-B,transparent_index:p,interlaced:!!F,delay:u,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(S){if(S<0||S>=d.length)throw new Error("Frame index out of range.");return d[S]},this.decodeAndBlitFrameBGRA=function(S,D){var w=this.frameInfo(S),M=w.width*w.height,O=new Uint8Array(M);y1(r,w.data_offset,O,M);var L=w.palette_offset,X=w.transparent_index;X===null&&(X=256);var H=w.width,ee=t-H,K=H,T=4*(w.y*t+w.x),z=4*((w.y+w.height)*t+w.x),W=T,G=4*ee;w.interlaced===!0&&(G+=4*t*7);for(var oe=8,re=0,le=O.length;re<le;++re){var de=O[re];if(K===0&&(K=H,(W+=G)>=z&&(G=4*ee+4*t*(oe-1),W=T+(H+ee)*(oe<<1),oe>>=1)),de===X)W+=4;else{var fe=r[L+3*de],be=r[L+3*de+1],_e=r[L+3*de+2];D[W++]=_e,D[W++]=be,D[W++]=fe,D[W++]=255}--K}},this.decodeAndBlitFrameRGBA=function(S,D){var w=this.frameInfo(S),M=w.width*w.height,O=new Uint8Array(M);y1(r,w.data_offset,O,M);var L=w.palette_offset,X=w.transparent_index;X===null&&(X=256);var H=w.width,ee=t-H,K=H,T=4*(w.y*t+w.x),z=4*((w.y+w.height)*t+w.x),W=T,G=4*ee;w.interlaced===!0&&(G+=4*t*7);for(var oe=8,re=0,le=O.length;re<le;++re){var de=O[re];if(K===0&&(K=H,(W+=G)>=z&&(G=4*ee+4*t*(oe-1),W=T+(H+ee)*(oe<<1),oe>>=1)),de===X)W+=4;else{var fe=r[L+3*de],be=r[L+3*de+1],_e=r[L+3*de+2];D[W++]=fe,D[W++]=be,D[W++]=_e,D[W++]=255}--K}}}function y1(r,e,t,n){for(var i=r[e++],a=1<<i,s=a+1,o=s+1,l=i+1,c=(1<<l)-1,d=0,u=0,p=0,h=r[e++],m=new Int32Array(4096),v=null;;){for(;d<16&&h!==0;)u|=r[e++]<<d,d+=8,h===1?h=r[e++]:--h;if(d<l)break;var b=u&c;if(u>>=l,d-=l,b!==a){if(b===s)break;for(var y=b<o?b:v,I=0,N=y;N>a;)N=m[N]>>8,++I;var _=N;if(p+I+(y!==b?1:0)>n)return void er.log("Warning, gif stream longer than expected.");t[p++]=_;var F=p+=I;for(y!==b&&(t[p++]=_),N=y;I--;)N=m[N],t[--F]=255&N,N>>=8;v!==null&&o<4096&&(m[o++]=v<<8|_,o>=c+1&&l<12&&(++l,c=c<<1|1)),v=b}else o=s+1,c=(1<<(l=i+1))-1,v=null}return p!==n&&er.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ld(r){var e,t,n,i,a,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),p=new Array(65535),h=new Array(64),m=new Array(64),v=[],b=0,y=7,I=new Array(64),N=new Array(64),_=new Array(64),F=new Array(256),R=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],w=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(T,z){for(var W=0,G=0,oe=new Array,re=1;re<=16;re++){for(var le=1;le<=T[re];le++)oe[z[G]]=[],oe[z[G]][0]=W,oe[z[G]][1]=re,G++,W++;W*=2}return oe}function L(T){for(var z=T[0],W=T[1]-1;W>=0;)z&1<<W&&(b|=1<<y),W--,--y<0&&(b==255?(X(255),X(0)):X(b),y=7,b=0)}function X(T){v.push(T)}function H(T){X(T>>8&255),X(255&T)}function ee(T,z,W,G,oe){for(var re,le=oe[0],de=oe[240],fe=function(he,Le){var Ee,Be,Me,Oe,rt,Qe,At,it,qe,Ve,We=0;for(qe=0;qe<8;++qe){Ee=he[We],Be=he[We+1],Me=he[We+2],Oe=he[We+3],rt=he[We+4],Qe=he[We+5],At=he[We+6];var Dt=Ee+(it=he[We+7]),yt=Ee-it,ct=Be+At,ut=Be-At,Kt=Me+Qe,at=Me-Qe,Ut=Oe+rt,st=Oe-rt,ft=Dt+Ut,rr=Dt-Ut,ht=ct+Kt,Je=ct-Kt;he[We]=ft+ht,he[We+4]=ft-ht;var Nt=.707106781*(Je+rr);he[We+2]=rr+Nt,he[We+6]=rr-Nt;var Dn=.382683433*((ft=st+at)-(Je=ut+yt)),Nr=.5411961*ft+Dn,Xr=1.306562965*Je+Dn,Ur=.707106781*(ht=at+ut),dt=yt+Ur,Mi=yt-Ur;he[We+5]=Mi+Nr,he[We+3]=Mi-Nr,he[We+1]=dt+Xr,he[We+7]=dt-Xr,We+=8}for(We=0,qe=0;qe<8;++qe){Ee=he[We],Be=he[We+8],Me=he[We+16],Oe=he[We+24],rt=he[We+32],Qe=he[We+40],At=he[We+48];var Bi=Ee+(it=he[We+56]),Un=Ee-it,Wn=Be+At,hr=Be-At,Wr=Me+Qe,Yr=Me-Qe,La=Oe+rt,sa=Oe-rt,ti=Bi+La,wi=Bi-La,ri=Wn+Wr,ni=Wn-Wr;he[We]=ti+ri,he[We+32]=ti-ri;var Hn=.707106781*(ni+wi);he[We+16]=wi+Hn,he[We+48]=wi-Hn;var Pa=.382683433*((ti=sa+Yr)-(ni=hr+Un)),Ai=.5411961*ti+Pa,Ma=1.306562965*ni+Pa,go=.707106781*(ri=Yr+hr),mo=Un+go,xo=Un-go;he[We+40]=xo+Ai,he[We+24]=xo-Ai,he[We+8]=mo+Ma,he[We+56]=mo-Ma,We++}for(qe=0;qe<64;++qe)Ve=he[qe]*Le[qe],h[qe]=Ve>0?Ve+.5|0:Ve-.5|0;return h}(T,z),be=0;be<64;++be)m[U[be]]=fe[be];var _e=m[0]-W;W=m[0],_e==0?L(G[0]):(L(G[p[re=32767+_e]]),L(u[re]));for(var Te=63;Te>0&&m[Te]==0;)Te--;if(Te==0)return L(le),W;for(var Re,Q=1;Q<=Te;){for(var je=Q;m[Q]==0&&Q<=Te;)++Q;var He=Q-je;if(He>=16){Re=He>>4;for(var Pe=1;Pe<=Re;++Pe)L(de);He&=15}re=32767+m[Q],L(oe[(He<<4)+p[re]]),L(u[re]),Q++}return Te!=63&&L(le),W}function K(T){T=Math.min(Math.max(T,1),100),a!=T&&(function(z){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var oe=s((W[G]*z+50)/100);oe=Math.min(Math.max(oe,1),255),o[U[G]]=oe}for(var re=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var de=s((re[le]*z+50)/100);de=Math.min(Math.max(de,1),255),l[U[le]]=de}for(var fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,_e=0;_e<8;_e++)for(var Te=0;Te<8;Te++)c[be]=1/(o[U[be]]*fe[_e]*fe[Te]*8),d[be]=1/(l[U[be]]*fe[_e]*fe[Te]*8),be++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),a=T)}this.encode=function(T,z){z&&K(z),v=new Array,b=0,y=7,H(65496),H(65504),H(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),H(1),H(1),X(0),X(0),function(){H(65499),H(132),X(0);for(var Be=0;Be<64;Be++)X(o[Be]);X(1);for(var Me=0;Me<64;Me++)X(l[Me])}(),function(Be,Me){H(65472),H(17),X(8),H(Me),H(Be),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(T.width,T.height),function(){H(65476),H(418),X(0);for(var Be=0;Be<16;Be++)X(j[Be+1]);for(var Me=0;Me<=11;Me++)X(E[Me]);X(16);for(var Oe=0;Oe<16;Oe++)X(B[Oe+1]);for(var rt=0;rt<=161;rt++)X(k[rt]);X(1);for(var Qe=0;Qe<16;Qe++)X(S[Qe+1]);for(var At=0;At<=11;At++)X(D[At]);X(17);for(var it=0;it<16;it++)X(w[it+1]);for(var qe=0;qe<=161;qe++)X(M[qe])}(),H(65498),H(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var W=0,G=0,oe=0;b=0,y=7,this.encode.displayName="_encode_";for(var re,le,de,fe,be,_e,Te,Re,Q,je=T.data,He=T.width,Pe=T.height,he=4*He,Le=0;Le<Pe;){for(re=0;re<he;){for(be=he*Le+re,Te=-1,Re=0,Q=0;Q<64;Q++)_e=be+(Re=Q>>3)*he+(Te=4*(7&Q)),Le+Re>=Pe&&(_e-=he*(Le+1+Re-Pe)),re+Te>=he&&(_e-=re+Te-he+4),le=je[_e++],de=je[_e++],fe=je[_e++],I[Q]=(R[le]+R[de+256|0]+R[fe+512|0]>>16)-128,N[Q]=(R[le+768|0]+R[de+1024|0]+R[fe+1280|0]>>16)-128,_[Q]=(R[le+1280|0]+R[de+1536|0]+R[fe+1792|0]>>16)-128;W=ee(I,c,W,e,n),G=ee(N,d,G,t,i),oe=ee(_,d,oe,t,i),re+=32}Le+=8}if(y>=0){var Ee=[];Ee[1]=y+1,Ee[0]=(1<<y+1)-1,L(Ee)}return H(65497),new Uint8Array(v)},r=r||50,function(){for(var T=String.fromCharCode,z=0;z<256;z++)F[z]=T(z)}(),e=O(j,E),t=O(S,D),n=O(B,k),i=O(w,M),function(){for(var T=1,z=2,W=1;W<=15;W++){for(var G=T;G<z;G++)p[32767+G]=W,u[32767+G]=[],u[32767+G][1]=W,u[32767+G][0]=G;for(var oe=-(z-1);oe<=-T;oe++)p[32767+oe]=W,u[32767+oe]=[],u[32767+oe][1]=W,u[32767+oe][0]=z-1+oe;T<<=1,z<<=1}}(),function(){for(var T=0;T<256;T++)R[T]=19595*T,R[T+256|0]=38470*T,R[T+512|0]=7471*T+32768,R[T+768|0]=-11059*T,R[T+1024|0]=-21709*T,R[T+1280|0]=32768*T+8421375,R[T+1536|0]=-27439*T,R[T+1792|0]=-5329*T}(),K(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function di(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function b1(r){function e(E){if(!E)throw Error("assert :P")}function t(E,B,k){for(var S=0;4>S;S++)if(E[B+S]!=k.charCodeAt(S))return!0;return!1}function n(E,B,k,S,D){for(var w=0;w<D;w++)E[B+w]=k[S+w]}function i(E,B,k,S){for(var D=0;D<S;D++)E[B+D]=k}function a(E){return new Int32Array(E)}function s(E,B){for(var k=[],S=0;S<E;S++)k.push(new B);return k}function o(E,B){var k=[];return function S(D,w,M){for(var O=M[w],L=0;L<O&&(D.push(M.length>w+1?[]:new B),!(M.length<w+1));L++)S(D[L],w+1,M)}(k,0,E),k}var l=function(){var E=this;function B(g,x){for(var C=1<<x-1>>>0;g&C;)C>>>=1;return C?(g&C-1)+C:g}function k(g,x,C,P,V){e(!(P%C));do g[x+(P-=C)]=V;while(0<P)}function S(g,x,C,P,V){if(e(2328>=V),512>=V)var $=a(512);else if(($=a(V))==null)return 0;return function(Y,Z,J,ne,ue,ye){var ie,pe,me=Z,we=1<<J,ve=a(16),Se=a(16);for(e(ue!=0),e(ne!=null),e(Y!=null),e(0<J),pe=0;pe<ue;++pe){if(15<ne[pe])return 0;++ve[ne[pe]]}if(ve[0]==ue)return 0;for(Se[1]=0,ie=1;15>ie;++ie){if(ve[ie]>1<<ie)return 0;Se[ie+1]=Se[ie]+ve[ie]}for(pe=0;pe<ue;++pe)ie=ne[pe],0<ne[pe]&&(ye[Se[ie]++]=pe);if(Se[15]==1)return(ne=new D).g=0,ne.value=ye[0],k(Y,me,1,we,ne),we;var Ie,De=-1,ke=we-1,tt=0,Ge=1,St=1,Ke=1<<J;for(pe=0,ie=1,ue=2;ie<=J;++ie,ue<<=1){if(Ge+=St<<=1,0>(St-=ve[ie]))return 0;for(;0<ve[ie];--ve[ie])(ne=new D).g=ie,ne.value=ye[pe++],k(Y,me+tt,ue,Ke,ne),tt=B(tt,ie)}for(ie=J+1,ue=2;15>=ie;++ie,ue<<=1){if(Ge+=St<<=1,0>(St-=ve[ie]))return 0;for(;0<ve[ie];--ve[ie]){if(ne=new D,(tt&ke)!=De){for(me+=Ke,Ie=1<<(De=ie)-J;15>De&&!(0>=(Ie-=ve[De]));)++De,Ie<<=1;we+=Ke=1<<(Ie=De-J),Y[Z+(De=tt&ke)].g=Ie+J,Y[Z+De].value=me-Z-De}ne.g=ie-J,ne.value=ye[pe++],k(Y,me+(tt>>J),ue,Ke,ne),tt=B(tt,ie)}}return Ge!=2*Se[15]-1?0:we}(g,x,C,P,V,$)}function D(){this.value=this.g=0}function w(){this.value=this.g=0}function M(){this.G=s(5,D),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Xa,w)}function O(g,x,C,P){e(g!=null),e(x!=null),e(2147483648>P),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=x,g.pa=C,g.Jd=x,g.Yc=C+P,g.Zc=4<=P?C+P-4+1:C,le(g)}function L(g,x){for(var C=0;0<x--;)C|=fe(g,128)<<x;return C}function X(g,x){var C=L(g,x);return de(g)?-C:C}function H(g,x,C,P){var V,$=0;for(e(g!=null),e(x!=null),e(4294967288>P),g.Sb=P,g.Ra=0,g.u=0,g.h=0,4<P&&(P=4),V=0;V<P;++V)$+=x[C+V]<<8*V;g.Ra=$,g.bb=P,g.oa=x,g.pa=C}function ee(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<fa-8>>>0,++g.bb,g.u-=8;G(g)&&(g.h=1,g.u=0)}function K(g,x){if(e(0<=x),!g.h&&x<=On){var C=W(g)&jn[x];return g.u+=x,ee(g),C}return g.h=1,g.u=0}function T(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(g){return g.Ra>>>(g.u&fa-1)>>>0}function G(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>fa}function oe(g,x){g.u=x,g.h=G(g)}function re(g){g.u>=Yi&&(e(g.u>=Yi),ee(g))}function le(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function de(g){return L(g,1)}function fe(g,x){var C=g.Ca;0>g.b&&le(g);var P=g.b,V=C*x>>>8,$=(g.I>>>P>V)+0;for($?(C-=V,g.I-=V+1<<P>>>0):C=V+1,P=C,V=0;256<=P;)V+=8,P>>=8;return P=7^V+ua[P],g.b-=P,g.Ca=(C<<P)-1,$}function be(g,x,C){g[x+0]=C>>24&255,g[x+1]=C>>16&255,g[x+2]=C>>8&255,g[x+3]=255&C}function _e(g,x){return g[x+0]|g[x+1]<<8}function Te(g,x){return _e(g,x)|g[x+2]<<16}function Re(g,x){return _e(g,x)|_e(g,x+2)<<16}function Q(g,x){var C=1<<x;return e(g!=null),e(0<x),g.X=a(C),g.X==null?0:(g.Mb=32-x,g.Xa=x,1)}function je(g,x){e(g!=null),e(x!=null),e(g.Xa==x.Xa),n(x.X,0,g.X,0,1<<x.Xa)}function He(){this.X=[],this.Xa=this.Mb=0}function Pe(g,x,C,P){e(C!=null),e(P!=null);var V=C[0],$=P[0];return V==0&&(V=(g*$+x/2)/x),$==0&&($=(x*V+g/2)/g),0>=V||0>=$?0:(C[0]=V,P[0]=$,1)}function he(g,x){return g+(1<<x)-1>>>x}function Le(g,x){return((4278255360&g)+(4278255360&x)>>>0&4278255360)+((16711935&g)+(16711935&x)>>>0&16711935)>>>0}function Ee(g,x){E[x]=function(C,P,V,$,Y,Z,J){var ne;for(ne=0;ne<Y;++ne){var ue=E[g](Z[J+ne-1],V,$+ne);Z[J+ne]=Le(C[P+ne],ue)}}}function Be(){this.ud=this.hd=this.jd=0}function Me(g,x){return((4278124286&(g^x))>>>1)+(g&x)>>>0}function Oe(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function rt(g,x){return Oe(g+(g-x+.5>>1))}function Qe(g,x,C){return Math.abs(x-C)-Math.abs(g-C)}function At(g,x,C,P,V,$,Y){for(P=$[Y-1],C=0;C<V;++C)$[Y+C]=P=Le(g[x+C],P)}function it(g,x,C,P,V){var $;for($=0;$<C;++$){var Y=g[x+$],Z=Y>>8&255,J=16711935&(J=(J=16711935&Y)+((Z<<16)+Z));P[V+$]=(4278255360&Y)+J>>>0}}function qe(g,x){x.jd=255&g,x.hd=g>>8&255,x.ud=g>>16&255}function Ve(g,x,C,P,V,$){var Y;for(Y=0;Y<P;++Y){var Z=x[C+Y],J=Z>>>8,ne=Z,ue=255&(ue=(ue=Z>>>16)+((g.jd<<24>>24)*(J<<24>>24)>>>5));ne=255&(ne=(ne+=(g.hd<<24>>24)*(J<<24>>24)>>>5)+((g.ud<<24>>24)*(ue<<24>>24)>>>5)),V[$+Y]=(4278255360&Z)+(ue<<16)+ne}}function We(g,x,C,P,V){E[x]=function($,Y,Z,J,ne,ue,ye,ie,pe){for(J=ye;J<ie;++J)for(ye=0;ye<pe;++ye)ne[ue++]=V(Z[P($[Y++])])},E[g]=function($,Y,Z,J,ne,ue,ye){var ie=8>>$.b,pe=$.Ea,me=$.K[0],we=$.w;if(8>ie)for($=(1<<$.b)-1,we=(1<<ie)-1;Y<Z;++Y){var ve,Se=0;for(ve=0;ve<pe;++ve)ve&$||(Se=P(J[ne++])),ue[ye++]=V(me[Se&we]),Se>>=ie}else E["VP8LMapColor"+C](J,ne,me,we,ue,ye,Y,Z,pe)}}function Dt(g,x,C,P,V){for(C=x+C;x<C;){var $=g[x++];P[V++]=$>>16&255,P[V++]=$>>8&255,P[V++]=255&$}}function yt(g,x,C,P,V){for(C=x+C;x<C;){var $=g[x++];P[V++]=$>>16&255,P[V++]=$>>8&255,P[V++]=255&$,P[V++]=$>>24&255}}function ct(g,x,C,P,V){for(C=x+C;x<C;){var $=(Y=g[x++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;P[V++]=$,P[V++]=Y}}function ut(g,x,C,P,V){for(C=x+C;x<C;){var $=(Y=g[x++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;P[V++]=$,P[V++]=Y}}function Kt(g,x,C,P,V){for(C=x+C;x<C;){var $=g[x++];P[V++]=255&$,P[V++]=$>>8&255,P[V++]=$>>16&255}}function at(g,x,C,P,V,$){if($==0)for(C=x+C;x<C;)be(P,(($=g[x++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),V+=32;else n(P,V,g,x,C)}function Ut(g,x){E[x][0]=E[g+"0"],E[x][1]=E[g+"1"],E[x][2]=E[g+"2"],E[x][3]=E[g+"3"],E[x][4]=E[g+"4"],E[x][5]=E[g+"5"],E[x][6]=E[g+"6"],E[x][7]=E[g+"7"],E[x][8]=E[g+"8"],E[x][9]=E[g+"9"],E[x][10]=E[g+"10"],E[x][11]=E[g+"11"],E[x][12]=E[g+"12"],E[x][13]=E[g+"13"],E[x][14]=E[g+"0"],E[x][15]=E[g+"0"]}function st(g){return g==qc||g==Vc||g==wl||g==Gc}function ft(){this.eb=[],this.size=this.A=this.fb=0}function rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ht(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ft,this.f.kb=new rr,this.sd=null}function Je(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Nt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dn(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Nr(g,x){var C=g.T,P=x.ba.f.RGBA,V=P.eb,$=P.fb+g.ka*P.A,Y=Yn[x.ba.S],Z=g.y,J=g.O,ne=g.f,ue=g.N,ye=g.ea,ie=g.W,pe=x.cc,me=x.dc,we=x.Mc,ve=x.Nc,Se=g.ka,Ie=g.ka+g.T,De=g.U,ke=De+1>>1;for(Se==0?Y(Z,J,null,null,ne,ue,ye,ie,ne,ue,ye,ie,V,$,null,null,De):(Y(x.ec,x.fc,Z,J,pe,me,we,ve,ne,ue,ye,ie,V,$-P.A,V,$,De),++C);Se+2<Ie;Se+=2)pe=ne,me=ue,we=ye,ve=ie,ue+=g.Rc,ie+=g.Rc,$+=2*P.A,Y(Z,(J+=2*g.fa)-g.fa,Z,J,pe,me,we,ve,ne,ue,ye,ie,V,$-P.A,V,$,De);return J+=g.fa,g.j+Ie<g.o?(n(x.ec,x.fc,Z,J,De),n(x.cc,x.dc,ne,ue,ke),n(x.Mc,x.Nc,ye,ie,ke),C--):1&Ie||Y(Z,J,null,null,ne,ue,ye,ie,ne,ue,ye,ie,V,$+P.A,null,null,De),C}function Xr(g,x,C){var P=g.F,V=[g.J];if(P!=null){var $=g.U,Y=x.ba.S,Z=Y==bl||Y==wl;x=x.ba.f.RGBA;var J=[0],ne=g.ka;J[0]=g.T,g.Kb&&(ne==0?--J[0]:(--ne,V[0]-=g.width),g.j+g.ka+g.T==g.o&&(J[0]=g.o-g.j-ne));var ue=x.eb;ne=x.fb+ne*x.A,g=Vf(P,V[0],g.width,$,J,ue,ne+(Z?0:3),x.A),e(C==J),g&&st(Y)&&ys(ue,ne,Z,$,J,x.A)}return 0}function Ur(g){var x=g.ma,C=x.ba.S,P=11>C,V=C==vl||C==yl||C==bl||C==Hc||C==12||st(C);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!fs(x.Oa,g,V?11:12))return 0;if(V&&st(C)&&ls(),g.da)alert("todo:use_scaling");else{if(P){if(x.Ib=Dn,g.Kb){if(C=g.U+1>>1,x.memory=a(g.U+2*C),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+g.U,x.Mc=x.cc,x.Nc=x.dc+C,x.Ib=Nr,ls()}}else alert("todo:EmitYUV");V&&(x.Jb=Xr,P&&ai())}if(P&&!su){for(g=0;256>g;++g)qp[g]=89858*(g-128)+Sl>>Al,$p[g]=-22014*(g-128)+Sl,Gp[g]=-45773*(g-128),Vp[g]=113618*(g-128)+Sl>>Al;for(g=ws;g<Yc;++g)x=76283*(g-16)+Sl>>Al,Xp[g-ws]=Si(x,255),Yp[g-ws]=Si(x+8>>4,15);su=1}return 1}function dt(g){var x=g.ma,C=g.U,P=g.T;return e(!(1&g.ka)),0>=C||0>=P?0:(C=x.Ib(g,x),x.Jb!=null&&x.Jb(g,x,C),x.Dc+=C,1)}function Mi(g){g.ma.memory=null}function Bi(g,x,C,P){return K(g,8)!=47?0:(x[0]=K(g,14)+1,C[0]=K(g,14)+1,P[0]=K(g,1),K(g,3)!=0?0:!g.h)}function Un(g,x){if(4>g)return g+1;var C=g-2>>1;return(2+(1&g)<<C)+K(x,C)+1}function Wn(g,x){return 120<x?x-120:1<=(C=((C=Dp[x-1])>>4)*g+(8-(15&C)))?C:1;var C}function hr(g,x,C){var P=W(C),V=g[x+=255&P].g-8;return 0<V&&(oe(C,C.u+8),P=W(C),x+=g[x].value,x+=P&(1<<V)-1),oe(C,C.u+g[x].g),g[x].value}function Wr(g,x,C){return C.g+=g.g,C.value+=g.value<<x>>>0,e(8>=C.g),g.g}function Yr(g,x,C){var P=g.xc;return e((x=P==0?0:g.vc[g.md*(C>>P)+(x>>P)])<g.Wb),g.Ya[x]}function La(g,x,C,P){var V=g.ab,$=g.c*x,Y=g.C;x=Y+x;var Z=C,J=P;for(P=g.Ta,C=g.Ua;0<V--;){var ne=g.gc[V],ue=Y,ye=x,ie=Z,pe=J,me=(J=P,Z=C,ne.Ea);switch(e(ue<ye),e(ye<=ne.nc),ne.hc){case 2:xr(ie,pe,(ye-ue)*me,J,Z);break;case 0:var we=ue,ve=ye,Se=J,Ie=Z,De=(Ke=ne).Ea;we==0&&(hs(ie,pe,null,null,1,Se,Ie),At(ie,pe+1,0,0,De-1,Se,Ie+1),pe+=De,Ie+=De,++we);for(var ke=1<<Ke.b,tt=ke-1,Ge=he(De,Ke.b),St=Ke.K,Ke=Ke.w+(we>>Ke.b)*Ge;we<ve;){var kt=St,Or=Ke,_t=1;for(Co(ie,pe,Se,Ie-De,1,Se,Ie);_t<De;){var Ze=(_t&~tt)+ke;Ze>De&&(Ze=De),(0,gs[kt[Or++]>>8&15])(ie,pe+ +_t,Se,Ie+_t-De,Ze-_t,Se,Ie+_t),_t=Ze}pe+=De,Ie+=De,++we&tt||(Ke+=Ge)}ye!=ne.nc&&n(J,Z-me,J,Z+(ye-ue-1)*me,me);break;case 1:for(me=ie,ve=pe,De=(ie=ne.Ea)-(Ie=ie&~(Se=(pe=1<<ne.b)-1)),we=he(ie,ne.b),ke=ne.K,ne=ne.w+(ue>>ne.b)*we;ue<ye;){for(tt=ke,Ge=ne,St=new Be,Ke=ve+Ie,kt=ve+ie;ve<Ke;)qe(tt[Ge++],St),ms(St,me,ve,pe,J,Z),ve+=pe,Z+=pe;ve<kt&&(qe(tt[Ge++],St),ms(St,me,ve,De,J,Z),ve+=De,Z+=De),++ue&Se||(ne+=we)}break;case 3:if(ie==J&&pe==Z&&0<ne.b){for(ve=J,ie=me=Z+(ye-ue)*me-(Ie=(ye-ue)*he(ne.Ea,ne.b)),pe=J,Se=Z,we=[],Ie=(De=Ie)-1;0<=Ie;--Ie)we[Ie]=pe[Se+Ie];for(Ie=De-1;0<=Ie;--Ie)ve[ie+Ie]=we[Ie];pl(ne,ue,ye,J,me,J,Z)}else pl(ne,ue,ye,ie,pe,J,Z)}Z=P,J=C}J!=C&&n(P,C,Z,J,$)}function sa(g,x){var C=g.V,P=g.Ba+g.c*g.C,V=x-g.C;if(e(x<=g.l.o),e(16>=V),0<V){var $=g.l,Y=g.Ta,Z=g.Ua,J=$.width;if(La(g,V,C,P),V=Z=[Z],e((C=g.C)<(P=x)),e($.v<$.va),P>$.o&&(P=$.o),C<$.j){var ne=$.j-C;C=$.j,V[0]+=ne*J}if(C>=P?C=0:(V[0]+=4*$.v,$.ka=C-$.j,$.U=$.va-$.v,$.T=P-C,C=1),C){if(Z=Z[0],11>(C=g.ca).S){var ue=C.f.RGBA,ye=(P=C.S,V=$.U,$=$.T,ne=ue.eb,ue.A),ie=$;for(ue=ue.fb+g.Ma*ue.A;0<ie--;){var pe=Y,me=Z,we=V,ve=ne,Se=ue;switch(P){case xl:xs(pe,me,we,ve,Se);break;case vl:ha(pe,me,we,ve,Se);break;case qc:ha(pe,me,we,ve,Se),ys(ve,Se,0,we,1,0);break;case Qf:Ya(pe,me,we,ve,Se);break;case yl:at(pe,me,we,ve,Se,1);break;case Vc:at(pe,me,we,ve,Se,1),ys(ve,Se,0,we,1,0);break;case bl:at(pe,me,we,ve,Se,0);break;case wl:at(pe,me,we,ve,Se,0),ys(ve,Se,1,we,1,0);break;case Hc:pa(pe,me,we,ve,Se);break;case Gc:pa(pe,me,we,ve,Se),qf(ve,Se,we,1,0);break;case Jf:ga(pe,me,we,ve,Se);break;default:e(0)}Z+=J,ue+=ye}g.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=C.height)}}g.C=x,e(g.C<=g.i)}function ti(g){var x;if(0<g.ua)return 0;for(x=0;x<g.Wb;++x){var C=g.Ya[x].G,P=g.Ya[x].H;if(0<C[1][P[1]+0].g||0<C[2][P[2]+0].g||0<C[3][P[3]+0].g)return 0}return 1}function wi(g,x,C,P,V,$){if(g.Z!=0){var Y=g.qd,Z=g.rd;for(e(va[g.Z]!=null);x<C;++x)va[g.Z](Y,Z,P,V,P,V,$),Y=P,Z=V,V+=$;g.qd=Y,g.rd=Z}}function ri(g,x){var C=g.l.ma,P=C.Z==0||C.Z==1?g.l.j:g.C;if(P=g.C<P?P:g.C,e(x<=g.l.o),x>P){var V=g.l.width,$=C.ca,Y=C.tb+V*P,Z=g.V,J=g.Ba+g.c*P,ne=g.gc;e(g.ab==1),e(ne[0].hc==3),Ei(ne[0],P,x,Z,J,$,Y),wi(C,P,x,$,Y,V)}g.C=g.Ma=x}function ni(g,x,C,P,V,$,Y){var Z=g.$/P,J=g.$%P,ne=g.m,ue=g.s,ye=C+g.$,ie=ye;V=C+P*V;var pe=C+P*$,me=280+ue.ua,we=g.Pb?Z:16777216,ve=0<ue.ua?ue.Wa:null,Se=ue.wc,Ie=ye<pe?Yr(ue,J,Z):null;e(g.C<$),e(pe<=V);var De=!1;e:for(;;){for(;De||ye<pe;){var ke=0;if(Z>=we){var tt=ye-C;e((we=g).Pb),we.wd=we.m,we.xd=tt,0<we.s.ua&&je(we.s.Wa,we.s.vb),we=Z+Op}if(J&Se||(Ie=Yr(ue,J,Z)),e(Ie!=null),Ie.Qb&&(x[ye]=Ie.qb,De=!0),!De)if(re(ne),Ie.jc){ke=ne,tt=x;var Ge=ye,St=Ie.pd[W(ke)&Xa-1];e(Ie.jc),256>St.g?(oe(ke,ke.u+St.g),tt[Ge]=St.value,ke=0):(oe(ke,ke.u+St.g-256),e(256<=St.value),ke=St.value),ke==0&&(De=!0)}else ke=hr(Ie.G[0],Ie.H[0],ne);if(ne.h)break;if(De||256>ke){if(!De)if(Ie.nd)x[ye]=(Ie.qb|ke<<8)>>>0;else{if(re(ne),De=hr(Ie.G[1],Ie.H[1],ne),re(ne),tt=hr(Ie.G[2],Ie.H[2],ne),Ge=hr(Ie.G[3],Ie.H[3],ne),ne.h)break;x[ye]=(Ge<<24|De<<16|ke<<8|tt)>>>0}if(De=!1,++ye,++J>=P&&(J=0,++Z,Y!=null&&Z<=$&&!(Z%16)&&Y(g,Z),ve!=null))for(;ie<ye;)ke=x[ie++],ve.X[(506832829*ke&4294967295)>>>ve.Mb]=ke}else if(280>ke){if(ke=Un(ke-256,ne),tt=hr(Ie.G[4],Ie.H[4],ne),re(ne),tt=Wn(P,tt=Un(tt,ne)),ne.h)break;if(ye-C<tt||V-ye<ke)break e;for(Ge=0;Ge<ke;++Ge)x[ye+Ge]=x[ye+Ge-tt];for(ye+=ke,J+=ke;J>=P;)J-=P,++Z,Y!=null&&Z<=$&&!(Z%16)&&Y(g,Z);if(e(ye<=V),J&Se&&(Ie=Yr(ue,J,Z)),ve!=null)for(;ie<ye;)ke=x[ie++],ve.X[(506832829*ke&4294967295)>>>ve.Mb]=ke}else{if(!(ke<me))break e;for(De=ke-280,e(ve!=null);ie<ye;)ke=x[ie++],ve.X[(506832829*ke&4294967295)>>>ve.Mb]=ke;ke=ye,e(!(De>>>(tt=ve).Xa)),x[ke]=tt.X[De],De=!0}De||e(ne.h==G(ne))}if(g.Pb&&ne.h&&ye<V)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&je(g.s.vb,g.s.Wa);else{if(ne.h)break e;Y!=null&&Y(g,Z>$?$:Z),g.a=0,g.$=ye-C}return 1}return g.a=3,0}function Hn(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var x=g.Wa;x!=null&&(x.X=null),g.vb=null,e(g!=null)}function Pa(){var g=new gt;return g==null?null:(g.a=0,g.xb=ru,Ut("Predictor","VP8LPredictors"),Ut("Predictor","VP8LPredictors_C"),Ut("PredictorAdd","VP8LPredictorsAdd"),Ut("PredictorAdd","VP8LPredictorsAdd_C"),xr=it,ms=Ve,xs=Dt,ha=yt,pa=ct,ga=ut,Ya=Kt,E.VP8LMapColor32b=Ii,E.VP8LMapColor8b=ps,g)}function Ai(g,x,C,P,V){var $=1,Y=[g],Z=[x],J=P.m,ne=P.s,ue=null,ye=0;e:for(;;){if(C)for(;$&&K(J,1);){var ie=Y,pe=Z,me=P,we=1,ve=me.m,Se=me.gc[me.ab],Ie=K(ve,2);if(me.Oc&1<<Ie)$=0;else{switch(me.Oc|=1<<Ie,Se.hc=Ie,Se.Ea=ie[0],Se.nc=pe[0],Se.K=[null],++me.ab,e(4>=me.ab),Ie){case 0:case 1:Se.b=K(ve,3)+2,we=Ai(he(Se.Ea,Se.b),he(Se.nc,Se.b),0,me,Se.K),Se.K=Se.K[0];break;case 3:var De,ke=K(ve,8)+1,tt=16<ke?0:4<ke?1:2<ke?2:3;if(ie[0]=he(Se.Ea,tt),Se.b=tt,De=we=Ai(ke,1,0,me,Se.K)){var Ge,St=ke,Ke=Se,kt=1<<(8>>Ke.b),Or=a(kt);if(Or==null)De=0;else{var _t=Ke.K[0],Ze=Ke.w;for(Or[0]=Ke.K[0][0],Ge=1;Ge<1*St;++Ge)Or[Ge]=Le(_t[Ze+Ge],Or[Ge-1]);for(;Ge<4*kt;++Ge)Or[Ge]=0;Ke.K[0]=null,Ke.K[0]=Or,De=1}}we=De;break;case 2:break;default:e(0)}$=we}}if(Y=Y[0],Z=Z[0],$&&K(J,1)&&!($=1<=(ye=K(J,4))&&11>=ye)){P.a=3;break e}var ze;if(ze=$)t:{var yr,bt,jt,or=P,Qr=Y,mn=Z,pr=ye,sn=C,xn=or.m,Tr=or.s,Lt=[null],qt=1,gr=0,Vt=jp[pr];r:for(;;){if(sn&&K(xn,1)){var Jr=K(xn,3)+2,si=he(Qr,Jr),br=he(mn,Jr),Sn=si*br;if(!Ai(si,br,0,or,Lt))break r;for(Lt=Lt[0],Tr.xc=Jr,yr=0;yr<Sn;++yr){var Jt=Lt[yr]>>8&65535;Lt[yr]=Jt,Jt>=qt&&(qt=Jt+1)}}if(xn.h)break r;for(bt=0;5>bt;++bt){var Rr=eu[bt];!bt&&0<pr&&(Rr+=1<<pr),gr<Rr&&(gr=Rr)}var Rn=s(qt*Vt,D),vn=qt,Ln=s(vn,M);if(Ln==null)var Pn=null;else e(65536>=vn),Pn=Ln;var _n=a(gr);if(Pn==null||_n==null||Rn==null){or.a=1;break r}var Mn=Rn;for(yr=jt=0;yr<qt;++yr){var ir=Pn[yr],Bn=ir.G,li=ir.H,Za=0,Qi=1,en=0;for(bt=0;5>bt;++bt){Rr=eu[bt],Bn[bt]=Mn,li[bt]=jt,!bt&&0<pr&&(Rr+=1<<pr);i:{var Cl,Kc=Rr,Il=or,As=_n,Qp=Mn,Jp=jt,Zc=0,ya=Il.m,e2=K(ya,1);if(i(As,0,0,Kc),e2){var t2=K(ya,1)+1,r2=K(ya,1),du=K(ya,r2==0?1:8);As[du]=1,t2==2&&(As[du=K(ya,8)]=1);var El=1}else{var fu=a(19),uu=K(ya,4)+4;if(19<uu){Il.a=3;var Nl=0;break i}for(Cl=0;Cl<uu;++Cl)fu[kp[Cl]]=K(ya,3);var Qc=void 0,Ss=void 0,hu=Il,n2=fu,kl=Kc,pu=As,Jc=0,ba=hu.m,gu=8,mu=s(128,D);n:for(;S(mu,0,7,n2,19);){if(K(ba,1)){var i2=2+2*K(ba,3);if((Qc=2+K(ba,i2))>kl)break n}else Qc=kl;for(Ss=0;Ss<kl&&Qc--;){re(ba);var xu=mu[0+(127&W(ba))];oe(ba,ba.u+xu.g);var Eo=xu.value;if(16>Eo)pu[Ss++]=Eo,Eo!=0&&(gu=Eo);else{var a2=Eo==16,vu=Eo-16,o2=Ep[vu],yu=K(ba,Ip[vu])+o2;if(Ss+yu>kl)break n;for(var s2=a2?gu:0;0<yu--;)pu[Ss++]=s2}}Jc=1;break n}Jc||(hu.a=3),El=Jc}(El=El&&!ya.h)&&(Zc=S(Qp,Jp,8,As,Kc)),El&&Zc!=0?Nl=Zc:(Il.a=3,Nl=0)}if(Nl==0)break r;if(Qi&&Np[bt]==1&&(Qi=Mn[jt].g==0),Za+=Mn[jt].g,jt+=Nl,3>=bt){var _s,ed=_n[0];for(_s=1;_s<Rr;++_s)_n[_s]>ed&&(ed=_n[_s]);en+=ed}}if(ir.nd=Qi,ir.Qb=0,Qi&&(ir.qb=(Bn[3][li[3]+0].value<<24|Bn[1][li[1]+0].value<<16|Bn[2][li[2]+0].value)>>>0,Za==0&&256>Bn[0][li[0]+0].value&&(ir.Qb=1,ir.qb+=Bn[0][li[0]+0].value<<8)),ir.jc=!ir.Qb&&6>en,ir.jc){var Dl,Ji=ir;for(Dl=0;Dl<Xa;++Dl){var wa=Dl,Aa=Ji.pd[wa],jl=Ji.G[0][Ji.H[0]+wa];256<=jl.value?(Aa.g=jl.g+256,Aa.value=jl.value):(Aa.g=0,Aa.value=0,wa>>=Wr(jl,8,Aa),wa>>=Wr(Ji.G[1][Ji.H[1]+wa],16,Aa),wa>>=Wr(Ji.G[2][Ji.H[2]+wa],0,Aa),Wr(Ji.G[3][Ji.H[3]+wa],24,Aa))}}}Tr.vc=Lt,Tr.Wb=qt,Tr.Ya=Pn,Tr.yc=Rn,ze=1;break t}ze=0}if(!($=ze)){P.a=3;break e}if(0<ye){if(ne.ua=1<<ye,!Q(ne.Wa,ye)){P.a=1,$=0;break e}}else ne.ua=0;var td=P,bu=Y,l2=Z,rd=td.s,nd=rd.xc;if(td.c=bu,td.i=l2,rd.md=he(bu,nd),rd.wc=nd==0?-1:(1<<nd)-1,C){P.xb=Fp;break e}if((ue=a(Y*Z))==null){P.a=1,$=0;break e}$=($=ni(P,ue,0,Y,Z,Z,null))&&!J.h;break e}return $?(V!=null?V[0]=ue:(e(ue==null),e(C)),P.$=0,C||Hn(ne)):Hn(ne),$}function Ma(g,x){var C=g.c*g.i,P=C+x+16*x;return e(g.c<=x),g.V=a(P),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+C+x,1)}function go(g,x){var C=g.C,P=x-C,V=g.V,$=g.Ba+g.c*C;for(e(x<=g.l.o);0<P;){var Y=16<P?16:P,Z=g.l.ma,J=g.l.width,ne=J*Y,ue=Z.ca,ye=Z.tb+J*C,ie=g.Ta,pe=g.Ua;La(g,Y,V,$),Gf(ie,pe,ue,ye,ne),wi(Z,C,C+Y,ue,ye,J),P-=Y,V+=Y*g.c,C+=Y}e(C==x),g.C=g.Ma=x}function mo(){this.ub=this.yd=this.td=this.Rb=0}function xo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ic(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Zo(){this.Yb=function(){var g=[];return function x(C,P,V){for(var $=V[P],Y=0;Y<$&&(C.push(V.length>P+1?[]:0),!(V.length<P+1));Y++)x(C[Y],P+1,V)}(g,0,[3,11]),g}()}function Ks(){this.jb=a(3),this.Wc=o([4,8],Zo),this.Xc=o([4,17],Zo)}function Zs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function qn(){this.ld=this.La=this.dd=this.tc=0}function Qo(){this.Na=this.la=0}function Qs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Jo(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Js(){this.uc=this.M=this.Nb=0,this.wa=Array(new qn),this.Y=0,this.ya=Array(new Jo),this.aa=0,this.l=new vo}function el(){this.y=a(16),this.f=a(8),this.ea=a(8)}function tl(){this.cb=this.a=0,this.sc="",this.m=new T,this.Od=new mo,this.Kc=new xo,this.ed=new Zs,this.Qa=new Ic,this.Ic=this.$c=this.Aa=0,this.D=new Js,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,T),this.ia=0,this.pb=s(4,Qs),this.Pa=new Ks,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new el),this.Hd=0,this.rb=Array(new Qo),this.sb=0,this.wa=Array(new qn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Jo),this.L=this.aa=0,this.gd=o([4,2],qn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Si(g,x){return 0>g?0:g>x?x:g}function vo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ec(){var g=new tl;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,bs||(bs=yo)),g}function Cr(g,x,C){return g.a==0&&(g.a=x,g.sc=C,g.cb=0),0}function rl(g,x,C){return 3<=C&&g[x+0]==157&&g[x+1]==1&&g[x+2]==42}function _i(g,x){if(g==null)return 0;if(g.a=0,g.sc="OK",x==null)return Cr(g,2,"null VP8Io passed to VP8GetHeaders()");var C=x.data,P=x.w,V=x.ha;if(4>V)return Cr(g,7,"Truncated header.");var $=C[P+0]|C[P+1]<<8|C[P+2]<<16,Y=g.Od;if(Y.Rb=!(1&$),Y.td=$>>1&7,Y.yd=$>>4&1,Y.ub=$>>5,3<Y.td)return Cr(g,3,"Incorrect keyframe parameters.");if(!Y.yd)return Cr(g,4,"Frame not displayable.");P+=3,V-=3;var Z=g.Kc;if(Y.Rb){if(7>V)return Cr(g,7,"cannot parse picture header");if(!rl(C,P,V))return Cr(g,3,"Bad code word");Z.c=16383&(C[P+4]<<8|C[P+3]),Z.Td=C[P+4]>>6,Z.i=16383&(C[P+6]<<8|C[P+5]),Z.Ud=C[P+6]>>6,P+=7,V-=7,g.za=Z.c+15>>4,g.Ub=Z.i+15>>4,x.width=Z.c,x.height=Z.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,i(($=g.Pa).jb,0,255,$.jb.length),e(($=g.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(Y.ub>V)return Cr(g,7,"bad partition length");O($=g.m,C,P,Y.ub),P+=Y.ub,V-=Y.ub,Y.Rb&&(Z.Ld=de($),Z.Kd=de($)),Z=g.Qa;var J,ne=g.Pa;if(e($!=null),e(Z!=null),Z.Cb=de($),Z.Cb){if(Z.Bb=de($),de($)){for(Z.Fb=de($),J=0;4>J;++J)Z.Zb[J]=de($)?X($,7):0;for(J=0;4>J;++J)Z.Lb[J]=de($)?X($,6):0}if(Z.Bb)for(J=0;3>J;++J)ne.jb[J]=de($)?L($,8):255}else Z.Bb=0;if($.Ka)return Cr(g,3,"cannot parse segment header");if((Z=g.ed).zd=de($),Z.Tb=L($,6),Z.wb=L($,3),Z.Pc=de($),Z.Pc&&de($)){for(ne=0;4>ne;++ne)de($)&&(Z.vd[ne]=X($,6));for(ne=0;4>ne;++ne)de($)&&(Z.od[ne]=X($,6))}if(g.L=Z.Tb==0?0:Z.zd?1:2,$.Ka)return Cr(g,3,"cannot parse filter header");var ue=V;if(V=J=P,P=J+ue,Z=ue,g.Xb=(1<<L(g.m,2))-1,ue<3*(ne=g.Xb))C=7;else{for(J+=3*ne,Z-=3*ne,ue=0;ue<ne;++ue){var ye=C[V+0]|C[V+1]<<8|C[V+2]<<16;ye>Z&&(ye=Z),O(g.Jc[+ue],C,J,ye),J+=ye,Z-=ye,V+=3}O(g.Jc[+ne],C,J,Z),C=J<P?0:5}if(C!=0)return Cr(g,C,"cannot parse partitions");for(C=L(J=g.m,7),V=de(J)?X(J,4):0,P=de(J)?X(J,4):0,Z=de(J)?X(J,4):0,ne=de(J)?X(J,4):0,J=de(J)?X(J,4):0,ue=g.Qa,ye=0;4>ye;++ye){if(ue.Cb){var ie=ue.Zb[ye];ue.Fb||(ie+=C)}else{if(0<ye){g.pb[ye]=g.pb[0];continue}ie=C}var pe=g.pb[ye];pe.Sc[0]=$c[Si(ie+V,127)],pe.Sc[1]=Xc[Si(ie+0,127)],pe.Eb[0]=2*$c[Si(ie+P,127)],pe.Eb[1]=101581*Xc[Si(ie+Z,127)]>>16,8>pe.Eb[1]&&(pe.Eb[1]=8),pe.Qc[0]=$c[Si(ie+ne,117)],pe.Qc[1]=Xc[Si(ie+J,127)],pe.lc=ie+J}if(!Y.Rb)return Cr(g,4,"Not a key frame.");for(de($),Y=g.Pa,C=0;4>C;++C){for(V=0;8>V;++V)for(P=0;3>P;++P)for(Z=0;11>Z;++Z)ne=fe($,Mp[C][V][P][Z])?L($,8):Lp[C][V][P][Z],Y.Wc[C][V].Yb[P][Z]=ne;for(V=0;17>V;++V)Y.Xc[C][V]=Y.Wc[C][Bp[V]]}return g.kc=de($),g.kc&&(g.Bd=L($,8)),g.cb=1}function yo(g,x,C,P,V,$,Y){var Z=x[V].Yb[C];for(C=0;16>V;++V){if(!fe(g,Z[C+0]))return V;for(;!fe(g,Z[C+1]);)if(Z=x[++V].Yb[0],C=0,V==16)return 16;var J=x[V+1].Yb;if(fe(g,Z[C+2])){var ne=g,ue=0;if(fe(ne,(ie=Z)[(ye=C)+3]))if(fe(ne,ie[ye+6])){for(Z=0,ye=2*(ue=fe(ne,ie[ye+8]))+(ie=fe(ne,ie[ye+9+ue])),ue=0,ie=Tp[ye];ie[Z];++Z)ue+=ue+fe(ne,ie[Z]);ue+=3+(8<<ye)}else fe(ne,ie[ye+7])?(ue=7+2*fe(ne,165),ue+=fe(ne,145)):ue=5+fe(ne,159);else ue=fe(ne,ie[ye+4])?3+fe(ne,ie[ye+5]):2;Z=J[2]}else ue=1,Z=J[1];J=Y+Rp[V],0>(ne=g).b&&le(ne);var ye,ie=ne.b,pe=(ye=ne.Ca>>1)-(ne.I>>ie)>>31;--ne.b,ne.Ca+=pe,ne.Ca|=1,ne.I-=(ye+1&pe)<<ie,$[J]=((ue^pe)-pe)*P[(0<V)+0]}return 16}function nl(g){var x=g.rb[g.sb-1];x.la=0,x.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function Vn(g,x,C,P,V){V=g[x+C+32*P]+(V>>3),g[x+C+32*P]=-256&V?0>V?0:255:V}function kr(g,x,C,P,V,$){Vn(g,x,0,C,P+V),Vn(g,x,1,C,P+$),Vn(g,x,2,C,P-$),Vn(g,x,3,C,P-V)}function Fi(g){return(20091*g>>16)+g}function il(g,x,C,P){var V,$=0,Y=a(16);for(V=0;4>V;++V){var Z=g[x+0]+g[x+8],J=g[x+0]-g[x+8],ne=(35468*g[x+4]>>16)-Fi(g[x+12]),ue=Fi(g[x+4])+(35468*g[x+12]>>16);Y[$+0]=Z+ue,Y[$+1]=J+ne,Y[$+2]=J-ne,Y[$+3]=Z-ue,$+=4,x++}for(V=$=0;4>V;++V)Z=(g=Y[$+0]+4)+Y[$+8],J=g-Y[$+8],ne=(35468*Y[$+4]>>16)-Fi(Y[$+12]),Vn(C,P,0,0,Z+(ue=Fi(Y[$+4])+(35468*Y[$+12]>>16))),Vn(C,P,1,0,J+ne),Vn(C,P,2,0,J-ne),Vn(C,P,3,0,Z-ue),$++,P+=32}function Nc(g,x,C,P){var V=g[x+0]+4,$=35468*g[x+4]>>16,Y=Fi(g[x+4]),Z=35468*g[x+1]>>16;kr(C,P,0,V+Y,g=Fi(g[x+1]),Z),kr(C,P,1,V+$,g,Z),kr(C,P,2,V-$,g,Z),kr(C,P,3,V-Y,g,Z)}function kc(g,x,C,P,V){il(g,x,C,P),V&&il(g,x+16,C,P+4)}function Ci(g,x,C,P){Ka(g,x+0,C,P,1),Ka(g,x+32,C,P+128,1)}function al(g,x,C,P){var V;for(g=g[x+0]+4,V=0;4>V;++V)for(x=0;4>x;++x)Vn(C,P,x,V,g)}function ol(g,x,C,P){g[x+0]&&Wt(g,x+0,C,P),g[x+16]&&Wt(g,x+16,C,P+4),g[x+32]&&Wt(g,x+32,C,P+128),g[x+48]&&Wt(g,x+48,C,P+128+4)}function bo(g,x,C,P){var V,$=a(16);for(V=0;4>V;++V){var Y=g[x+0+V]+g[x+12+V],Z=g[x+4+V]+g[x+8+V],J=g[x+4+V]-g[x+8+V],ne=g[x+0+V]-g[x+12+V];$[0+V]=Y+Z,$[8+V]=Y-Z,$[4+V]=ne+J,$[12+V]=ne-J}for(V=0;4>V;++V)Y=(g=$[0+4*V]+3)+$[3+4*V],Z=$[1+4*V]+$[2+4*V],J=$[1+4*V]-$[2+4*V],ne=g-$[3+4*V],C[P+0]=Y+Z>>3,C[P+16]=ne+J>>3,C[P+32]=Y-Z>>3,C[P+48]=ne-J>>3,P+=64}function Ba(g,x,C){var P,V=x-32,$=Tn,Y=255-g[V-1];for(P=0;P<C;++P){var Z,J=$,ne=Y+g[x-1];for(Z=0;Z<C;++Z)g[x+Z]=J[ne+g[V+Z]];x+=32}}function Dc(g,x){Ba(g,x,4)}function jc(g,x){Ba(g,x,8)}function Oc(g,x){Ba(g,x,16)}function es(g,x){var C;for(C=0;16>C;++C)n(g,x+32*C,g,x-32,16)}function sl(g,x){var C;for(C=16;0<C;--C)i(g,x,g[x-1],16),x+=32}function ii(g,x,C){var P;for(P=0;16>P;++P)i(x,C+32*P,g,16)}function Tc(g,x){var C,P=16;for(C=0;16>C;++C)P+=g[x-1+32*C]+g[x+C-32];ii(P>>5,g,x)}function Fa(g,x){var C,P=8;for(C=0;16>C;++C)P+=g[x-1+32*C];ii(P>>4,g,x)}function ts(g,x){var C,P=8;for(C=0;16>C;++C)P+=g[x+C-32];ii(P>>4,g,x)}function Rc(g,x){ii(128,g,x)}function xt(g,x,C){return g+2*x+C+2>>2}function Lc(g,x){var C,P=x-32;for(P=new Uint8Array([xt(g[P-1],g[P+0],g[P+1]),xt(g[P+0],g[P+1],g[P+2]),xt(g[P+1],g[P+2],g[P+3]),xt(g[P+2],g[P+3],g[P+4])]),C=0;4>C;++C)n(g,x+32*C,P,0,P.length)}function Pc(g,x){var C=g[x-1],P=g[x-1+32],V=g[x-1+64],$=g[x-1+96];be(g,x+0,16843009*xt(g[x-1-32],C,P)),be(g,x+32,16843009*xt(C,P,V)),be(g,x+64,16843009*xt(P,V,$)),be(g,x+96,16843009*xt(V,$,$))}function Mc(g,x){var C,P=4;for(C=0;4>C;++C)P+=g[x+C-32]+g[x-1+32*C];for(P>>=3,C=0;4>C;++C)i(g,x+32*C,P,4)}function zi(g,x){var C=g[x-1+0],P=g[x-1+32],V=g[x-1+64],$=g[x-1-32],Y=g[x+0-32],Z=g[x+1-32],J=g[x+2-32],ne=g[x+3-32];g[x+0+96]=xt(P,V,g[x-1+96]),g[x+1+96]=g[x+0+64]=xt(C,P,V),g[x+2+96]=g[x+1+64]=g[x+0+32]=xt($,C,P),g[x+3+96]=g[x+2+64]=g[x+1+32]=g[x+0+0]=xt(Y,$,C),g[x+3+64]=g[x+2+32]=g[x+1+0]=xt(Z,Y,$),g[x+3+32]=g[x+2+0]=xt(J,Z,Y),g[x+3+0]=xt(ne,J,Z)}function Ui(g,x){var C=g[x+1-32],P=g[x+2-32],V=g[x+3-32],$=g[x+4-32],Y=g[x+5-32],Z=g[x+6-32],J=g[x+7-32];g[x+0+0]=xt(g[x+0-32],C,P),g[x+1+0]=g[x+0+32]=xt(C,P,V),g[x+2+0]=g[x+1+32]=g[x+0+64]=xt(P,V,$),g[x+3+0]=g[x+2+32]=g[x+1+64]=g[x+0+96]=xt(V,$,Y),g[x+3+32]=g[x+2+64]=g[x+1+96]=xt($,Y,Z),g[x+3+64]=g[x+2+96]=xt(Y,Z,J),g[x+3+96]=xt(Z,J,J)}function Bc(g,x){var C=g[x-1+0],P=g[x-1+32],V=g[x-1+64],$=g[x-1-32],Y=g[x+0-32],Z=g[x+1-32],J=g[x+2-32],ne=g[x+3-32];g[x+0+0]=g[x+1+64]=$+Y+1>>1,g[x+1+0]=g[x+2+64]=Y+Z+1>>1,g[x+2+0]=g[x+3+64]=Z+J+1>>1,g[x+3+0]=J+ne+1>>1,g[x+0+96]=xt(V,P,C),g[x+0+64]=xt(P,C,$),g[x+0+32]=g[x+1+96]=xt(C,$,Y),g[x+1+32]=g[x+2+96]=xt($,Y,Z),g[x+2+32]=g[x+3+96]=xt(Y,Z,J),g[x+3+32]=xt(Z,J,ne)}function Fc(g,x){var C=g[x+0-32],P=g[x+1-32],V=g[x+2-32],$=g[x+3-32],Y=g[x+4-32],Z=g[x+5-32],J=g[x+6-32],ne=g[x+7-32];g[x+0+0]=C+P+1>>1,g[x+1+0]=g[x+0+64]=P+V+1>>1,g[x+2+0]=g[x+1+64]=V+$+1>>1,g[x+3+0]=g[x+2+64]=$+Y+1>>1,g[x+0+32]=xt(C,P,V),g[x+1+32]=g[x+0+96]=xt(P,V,$),g[x+2+32]=g[x+1+96]=xt(V,$,Y),g[x+3+32]=g[x+2+96]=xt($,Y,Z),g[x+3+64]=xt(Y,Z,J),g[x+3+96]=xt(Z,J,ne)}function wo(g,x){var C=g[x-1+0],P=g[x-1+32],V=g[x-1+64],$=g[x-1+96];g[x+0+0]=C+P+1>>1,g[x+2+0]=g[x+0+32]=P+V+1>>1,g[x+2+32]=g[x+0+64]=V+$+1>>1,g[x+1+0]=xt(C,P,V),g[x+3+0]=g[x+1+32]=xt(P,V,$),g[x+3+32]=g[x+1+64]=xt(V,$,$),g[x+3+64]=g[x+2+64]=g[x+0+96]=g[x+1+96]=g[x+2+96]=g[x+3+96]=$}function rs(g,x){var C=g[x-1+0],P=g[x-1+32],V=g[x-1+64],$=g[x-1+96],Y=g[x-1-32],Z=g[x+0-32],J=g[x+1-32],ne=g[x+2-32];g[x+0+0]=g[x+2+32]=C+Y+1>>1,g[x+0+32]=g[x+2+64]=P+C+1>>1,g[x+0+64]=g[x+2+96]=V+P+1>>1,g[x+0+96]=$+V+1>>1,g[x+3+0]=xt(Z,J,ne),g[x+2+0]=xt(Y,Z,J),g[x+1+0]=g[x+3+32]=xt(C,Y,Z),g[x+1+32]=g[x+3+64]=xt(P,C,Y),g[x+1+64]=g[x+3+96]=xt(V,P,C),g[x+1+96]=xt($,V,P)}function za(g,x){var C;for(C=0;8>C;++C)n(g,x+32*C,g,x-32,8)}function zc(g,x){var C;for(C=0;8>C;++C)i(g,x,g[x-1],8),x+=32}function Wi(g,x,C){var P;for(P=0;8>P;++P)i(x,C+32*P,g,8)}function Uc(g,x){var C,P=8;for(C=0;8>C;++C)P+=g[x+C-32]+g[x-1+32*C];Wi(P>>4,g,x)}function ns(g,x){var C,P=4;for(C=0;8>C;++C)P+=g[x+C-32];Wi(P>>3,g,x)}function is(g,x){var C,P=4;for(C=0;8>C;++C)P+=g[x-1+32*C];Wi(P>>3,g,x)}function ll(g,x){Wi(128,g,x)}function Hi(g,x,C){var P=g[x-C],V=g[x+0],$=3*(V-P)+Wc[1020+g[x-2*C]-g[x+C]],Y=ml[112+($+4>>3)];g[x-C]=Tn[255+P+ml[112+($+3>>3)]],g[x+0]=Tn[255+V-Y]}function as(g,x,C,P){var V=g[x+0],$=g[x+C];return Xn[255+g[x-2*C]-g[x-C]]>P||Xn[255+$-V]>P}function Ao(g,x,C,P){return 4*Xn[255+g[x-C]-g[x+0]]+Xn[255+g[x-2*C]-g[x+C]]<=P}function os(g,x,C,P,V){var $=g[x-3*C],Y=g[x-2*C],Z=g[x-C],J=g[x+0],ne=g[x+C],ue=g[x+2*C],ye=g[x+3*C];return 4*Xn[255+Z-J]+Xn[255+Y-ne]>P?0:Xn[255+g[x-4*C]-$]<=V&&Xn[255+$-Y]<=V&&Xn[255+Y-Z]<=V&&Xn[255+ye-ue]<=V&&Xn[255+ue-ne]<=V&&Xn[255+ne-J]<=V}function Ua(g,x,C,P){var V=2*P+1;for(P=0;16>P;++P)Ao(g,x+P,C,V)&&Hi(g,x+P,C)}function ss(g,x,C,P){var V=2*P+1;for(P=0;16>P;++P)Ao(g,x+P*C,1,V)&&Hi(g,x+P*C,1)}function cl(g,x,C,P){var V;for(V=3;0<V;--V)Ua(g,x+=4*C,C,P)}function dl(g,x,C,P){var V;for(V=3;0<V;--V)ss(g,x+=4,C,P)}function qi(g,x,C,P,V,$,Y,Z){for($=2*$+1;0<V--;){if(os(g,x,C,$,Y))if(as(g,x,C,Z))Hi(g,x,C);else{var J=g,ne=x,ue=C,ye=J[ne-2*ue],ie=J[ne-ue],pe=J[ne+0],me=J[ne+ue],we=J[ne+2*ue],ve=27*(Ie=Wc[1020+3*(pe-ie)+Wc[1020+ye-me]])+63>>7,Se=18*Ie+63>>7,Ie=9*Ie+63>>7;J[ne-3*ue]=Tn[255+J[ne-3*ue]+Ie],J[ne-2*ue]=Tn[255+ye+Se],J[ne-ue]=Tn[255+ie+ve],J[ne+0]=Tn[255+pe-ve],J[ne+ue]=Tn[255+me-Se],J[ne+2*ue]=Tn[255+we-Ie]}x+=P}}function Vi(g,x,C,P,V,$,Y,Z){for($=2*$+1;0<V--;){if(os(g,x,C,$,Y))if(as(g,x,C,Z))Hi(g,x,C);else{var J=g,ne=x,ue=C,ye=J[ne-ue],ie=J[ne+0],pe=J[ne+ue],me=ml[112+(4+(we=3*(ie-ye))>>3)],we=ml[112+(we+3>>3)],ve=me+1>>1;J[ne-2*ue]=Tn[255+J[ne-2*ue]+ve],J[ne-ue]=Tn[255+ye+we],J[ne+0]=Tn[255+ie-me],J[ne+ue]=Tn[255+pe-ve]}x+=P}}function fl(g,x,C,P,V,$){qi(g,x,C,1,16,P,V,$)}function Wa(g,x,C,P,V,$){qi(g,x,1,C,16,P,V,$)}function ul(g,x,C,P,V,$){var Y;for(Y=3;0<Y;--Y)Vi(g,x+=4*C,C,1,16,P,V,$)}function A(g,x,C,P,V,$){var Y;for(Y=3;0<Y;--Y)Vi(g,x+=4,1,C,16,P,V,$)}function q(g,x,C,P,V,$,Y,Z){qi(g,x,V,1,8,$,Y,Z),qi(C,P,V,1,8,$,Y,Z)}function ae(g,x,C,P,V,$,Y,Z){qi(g,x,1,V,8,$,Y,Z),qi(C,P,1,V,8,$,Y,Z)}function ce(g,x,C,P,V,$,Y,Z){Vi(g,x+4*V,V,1,8,$,Y,Z),Vi(C,P+4*V,V,1,8,$,Y,Z)}function ge(g,x,C,P,V,$,Y,Z){Vi(g,x+4,1,V,8,$,Y,Z),Vi(C,P+4,1,V,8,$,Y,Z)}function Ce(){this.ba=new ht,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Nt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ne(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Xe(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function et(){this.ua=0,this.Wa=new He,this.vb=new He,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new D}function gt(){this.xb=this.a=0,this.l=new vo,this.ca=new ht,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new et,this.ab=0,this.gc=s(4,Xe),this.Oc=0}function wt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new vo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Rt(g,x,C,P,V,$,Y){for(g=g==null?0:g[x+0],x=0;x<Y;++x)V[$+x]=g+C[P+x]&255,g=V[$+x]}function ur(g,x,C,P,V,$,Y){var Z;if(g==null)Rt(null,null,C,P,V,$,Y);else for(Z=0;Z<Y;++Z)V[$+Z]=g[x+Z]+C[P+Z]&255}function Ir(g,x,C,P,V,$,Y){if(g==null)Rt(null,null,C,P,V,$,Y);else{var Z,J=g[x+0],ne=J,ue=J;for(Z=0;Z<Y;++Z)ne=ue+(J=g[x+Z])-ne,ue=C[P+Z]+(-256&ne?0>ne?0:255:ne)&255,ne=J,V[$+Z]=ue}}function nr(g,x,C,P){var V=x.width,$=x.o;if(e(g!=null&&x!=null),0>C||0>=P||C+P>$)return null;if(!g.Cc){if(g.ga==null){var Y;if(g.ga=new wt,(Y=g.ga==null)||(Y=x.width*x.o,e(g.Gb.length==0),g.Gb=a(Y),g.Uc=0,g.Gb==null?Y=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,Y=1),Y=!Y),!Y){Y=g.ga;var Z=g.Fa,J=g.P,ne=g.qc,ue=g.mb,ye=g.nb,ie=J+1,pe=ne-1,me=Y.l;if(e(Z!=null&&ue!=null&&x!=null),va[0]=null,va[1]=Rt,va[2]=ur,va[3]=Ir,Y.ca=ue,Y.tb=ye,Y.c=x.width,Y.i=x.height,e(0<Y.c&&0<Y.i),1>=ne)x=0;else if(Y.$a=3&Z[J+0],Y.Z=Z[J+0]>>2&3,Y.Lc=Z[J+0]>>4&3,J=Z[J+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||J)x=0;else if(me.put=dt,me.ac=Ur,me.bc=Mi,me.ma=Y,me.width=x.width,me.height=x.height,me.Da=x.Da,me.v=x.v,me.va=x.va,me.j=x.j,me.o=x.o,Y.$a)e:{e(Y.$a==1),x=Pa();t:for(;;){if(x==null){x=0;break e}if(e(Y!=null),Y.mc=x,x.c=Y.c,x.i=Y.i,x.l=Y.l,x.l.ma=Y,x.l.width=Y.c,x.l.height=Y.i,x.a=0,H(x.m,Z,ie,pe),!Ai(Y.c,Y.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&ti(x.s)?(Y.ic=1,Z=x.c*x.i,x.Ta=null,x.Ua=0,x.V=a(Z),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Y.ic=0,x=Ma(x,Y.c)),!x))break t;x=1;break e}Y.mc=null,x=0}else x=pe>=Y.c*Y.i;Y=!x}if(Y)return null;g.ga.Lc!=1?g.Ga=0:P=$-C}e(g.ga!=null),e(C+P<=$);e:{if(x=(Z=g.ga).c,$=Z.l.o,Z.$a==0){if(ie=g.rc,pe=g.Vc,me=g.Fa,J=g.P+1+C*x,ne=g.mb,ue=g.nb+C*x,e(J<=g.P+g.qc),Z.Z!=0)for(e(va[Z.Z]!=null),Y=0;Y<P;++Y)va[Z.Z](ie,pe,me,J,ne,ue,x),ie=ne,pe=ue,ue+=x,J+=x;else for(Y=0;Y<P;++Y)n(ne,ue,me,J,x),ie=ne,pe=ue,ue+=x,J+=x;g.rc=ie,g.Vc=pe}else{if(e(Z.mc!=null),x=C+P,e((Y=Z.mc)!=null),e(x<=Y.i),Y.C>=x)x=1;else if(Z.ic||ai(),Z.ic){Z=Y.V,ie=Y.Ba,pe=Y.c;var we=Y.i,ve=(me=1,J=Y.$/pe,ne=Y.$%pe,ue=Y.m,ye=Y.s,Y.$),Se=pe*we,Ie=pe*x,De=ye.wc,ke=ve<Ie?Yr(ye,ne,J):null;e(ve<=Se),e(x<=we),e(ti(ye));t:for(;;){for(;!ue.h&&ve<Ie;){if(ne&De||(ke=Yr(ye,ne,J)),e(ke!=null),re(ue),256>(we=hr(ke.G[0],ke.H[0],ue)))Z[ie+ve]=we,++ve,++ne>=pe&&(ne=0,++J<=x&&!(J%16)&&ri(Y,J));else{if(!(280>we)){me=0;break t}we=Un(we-256,ue);var tt,Ge=hr(ke.G[4],ke.H[4],ue);if(re(ue),!(ve>=(Ge=Wn(pe,Ge=Un(Ge,ue)))&&Se-ve>=we)){me=0;break t}for(tt=0;tt<we;++tt)Z[ie+ve+tt]=Z[ie+ve+tt-Ge];for(ve+=we,ne+=we;ne>=pe;)ne-=pe,++J<=x&&!(J%16)&&ri(Y,J);ve<Ie&&ne&De&&(ke=Yr(ye,ne,J))}e(ue.h==G(ue))}ri(Y,J>x?x:J);break t}!me||ue.h&&ve<Se?(me=0,Y.a=ue.h?5:3):Y.$=ve,x=me}else x=ni(Y,Y.V,Y.Ba,Y.c,Y.i,x,go);if(!x){P=0;break e}}C+P>=$&&(g.Cc=1),P=1}if(!P)return null;if(g.Cc&&((P=g.ga)!=null&&(P.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+C*V}function Dr(g,x,C,P,V,$){for(;0<V--;){var Y,Z=g,J=x+(C?1:0),ne=g,ue=x+(C?0:3);for(Y=0;Y<P;++Y){var ye=ne[ue+4*Y];ye!=255&&(ye*=32897,Z[J+4*Y+0]=Z[J+4*Y+0]*ye>>23,Z[J+4*Y+1]=Z[J+4*Y+1]*ye>>23,Z[J+4*Y+2]=Z[J+4*Y+2]*ye>>23)}x+=$}}function Er(g,x,C,P,V){for(;0<P--;){var $;for($=0;$<C;++$){var Y=g[x+2*$+0],Z=15&(ne=g[x+2*$+1]),J=4369*Z,ne=(240&ne|ne>>4)*J>>16;g[x+2*$+0]=(240&Y|Y>>4)*J>>16&240|(15&Y|Y<<4)*J>>16>>4&15,g[x+2*$+1]=240&ne|Z}x+=V}}function Kr(g,x,C,P,V,$,Y,Z){var J,ne,ue=255;for(ne=0;ne<V;++ne){for(J=0;J<P;++J){var ye=g[x+J];$[Y+4*J]=ye,ue&=ye}x+=C,Y+=Z}return ue!=255}function Gi(g,x,C,P,V){var $;for($=0;$<V;++$)C[P+$]=g[x+$]>>8}function ai(){ys=Dr,qf=Er,Vf=Kr,Gf=Gi}function $i(g,x,C){E[g]=function(P,V,$,Y,Z,J,ne,ue,ye,ie,pe,me,we,ve,Se,Ie,De){var ke,tt=De-1>>1,Ge=Z[J+0]|ne[ue+0]<<16,St=ye[ie+0]|pe[me+0]<<16;e(P!=null);var Ke=3*Ge+St+131074>>2;for(x(P[V+0],255&Ke,Ke>>16,we,ve),$!=null&&(Ke=3*St+Ge+131074>>2,x($[Y+0],255&Ke,Ke>>16,Se,Ie)),ke=1;ke<=tt;++ke){var kt=Z[J+ke]|ne[ue+ke]<<16,Or=ye[ie+ke]|pe[me+ke]<<16,_t=Ge+kt+St+Or+524296,Ze=_t+2*(kt+St)>>3;Ke=Ze+Ge>>1,Ge=(_t=_t+2*(Ge+Or)>>3)+kt>>1,x(P[V+2*ke-1],255&Ke,Ke>>16,we,ve+(2*ke-1)*C),x(P[V+2*ke-0],255&Ge,Ge>>16,we,ve+(2*ke-0)*C),$!=null&&(Ke=_t+St>>1,Ge=Ze+Or>>1,x($[Y+2*ke-1],255&Ke,Ke>>16,Se,Ie+(2*ke-1)*C),x($[Y+2*ke+0],255&Ge,Ge>>16,Se,Ie+(2*ke+0)*C)),Ge=kt,St=Or}1&De||(Ke=3*Ge+St+131074>>2,x(P[V+De-1],255&Ke,Ke>>16,we,ve+(De-1)*C),$!=null&&(Ke=3*St+Ge+131074>>2,x($[Y+De-1],255&Ke,Ke>>16,Se,Ie+(De-1)*C)))}}function ls(){Yn[xl]=zp,Yn[vl]=nu,Yn[Qf]=Up,Yn[yl]=iu,Yn[bl]=au,Yn[Hc]=ou,Yn[Jf]=Wp,Yn[qc]=nu,Yn[Vc]=iu,Yn[wl]=au,Yn[Gc]=ou}function So(g){return g&-16384?0>g?0:255:g>>Hp}function la(g,x){return So((19077*g>>8)+(26149*x>>8)-14234)}function Ha(g,x,C){return So((19077*g>>8)-(6419*x>>8)-(13320*C>>8)+8708)}function qa(g,x){return So((19077*g>>8)+(33050*x>>8)-17685)}function ca(g,x,C,P,V){P[V+0]=la(g,C),P[V+1]=Ha(g,x,C),P[V+2]=qa(g,x)}function Zr(g,x,C,P,V){P[V+0]=qa(g,x),P[V+1]=Ha(g,x,C),P[V+2]=la(g,C)}function Va(g,x,C,P,V){var $=Ha(g,x,C);x=$<<3&224|qa(g,x)>>3,P[V+0]=248&la(g,C)|$>>5,P[V+1]=x}function Ga(g,x,C,P,V){var $=240&qa(g,x)|15;P[V+0]=240&la(g,C)|Ha(g,x,C)>>4,P[V+1]=$}function cs(g,x,C,P,V){P[V+0]=255,ca(g,x,C,P,V+1)}function ds(g,x,C,P,V){Zr(g,x,C,P,V),P[V+3]=255}function gn(g,x,C,P,V){ca(g,x,C,P,V),P[V+3]=255}function Xi(g,x,C){E[g]=function(P,V,$,Y,Z,J,ne,ue,ye){for(var ie=ue+(-2&ye)*C;ue!=ie;)x(P[V+0],$[Y+0],Z[J+0],ne,ue),x(P[V+1],$[Y+0],Z[J+0],ne,ue+C),V+=2,++Y,++J,ue+=2*C;1&ye&&x(P[V+0],$[Y+0],Z[J+0],ne,ue)}}function _o(g,x,C){return C==0?g==0?x==0?6:5:x==0?4:0:C}function hl(g,x,C,P,V){switch(g>>>30){case 3:Ka(x,C,P,V,0);break;case 2:$n(x,C,P,V);break;case 1:Wt(x,C,P,V)}}function Gn(g,x){var C,P,V=x.M,$=x.Nb,Y=g.oc,Z=g.pc+40,J=g.oc,ne=g.pc+584,ue=g.oc,ye=g.pc+600;for(C=0;16>C;++C)Y[Z+32*C-1]=129;for(C=0;8>C;++C)J[ne+32*C-1]=129,ue[ye+32*C-1]=129;for(0<V?Y[Z-1-32]=J[ne-1-32]=ue[ye-1-32]=129:(i(Y,Z-32-1,127,21),i(J,ne-32-1,127,9),i(ue,ye-32-1,127,9)),P=0;P<g.za;++P){var ie=x.ya[x.aa+P];if(0<P){for(C=-1;16>C;++C)n(Y,Z+32*C-4,Y,Z+32*C+12,4);for(C=-1;8>C;++C)n(J,ne+32*C-4,J,ne+32*C+4,4),n(ue,ye+32*C-4,ue,ye+32*C+4,4)}var pe=g.Gd,me=g.Hd+P,we=ie.ad,ve=ie.Hc;if(0<V&&(n(Y,Z-32,pe[me].y,0,16),n(J,ne-32,pe[me].f,0,8),n(ue,ye-32,pe[me].ea,0,8)),ie.Za){var Se=Y,Ie=Z-32+16;for(0<V&&(P>=g.za-1?i(Se,Ie,pe[me].y[15],4):n(Se,Ie,pe[me+1].y,0,4)),C=0;4>C;C++)Se[Ie+128+C]=Se[Ie+256+C]=Se[Ie+384+C]=Se[Ie+0+C];for(C=0;16>C;++C,ve<<=2)Se=Y,Ie=Z+lu[C],oi[ie.Ob[C]](Se,Ie),hl(ve,we,16*+C,Se,Ie)}else if(Se=_o(P,V,ie.Ob[0]),xa[Se](Y,Z),ve!=0)for(C=0;16>C;++C,ve<<=2)hl(ve,we,16*+C,Y,Z+lu[C]);for(C=ie.Gc,Se=_o(P,V,ie.Dd),Zi[Se](J,ne),Zi[Se](ue,ye),ve=we,Se=J,Ie=ne,255&(ie=0|C)&&(170&ie?Ni(ve,256,Se,Ie):Qt(ve,256,Se,Ie)),ie=ue,ve=ye,255&(C>>=8)&&(170&C?Ni(we,320,ie,ve):Qt(we,320,ie,ve)),V<g.Ub-1&&(n(pe[me].y,0,Y,Z+480,16),n(pe[me].f,0,J,ne+224,8),n(pe[me].ea,0,ue,ye+224,8)),C=8*$*g.B,pe=g.sa,me=g.ta+16*P+16*$*g.R,we=g.qa,ie=g.ra+8*P+C,ve=g.Ha,Se=g.Ia+8*P+C,C=0;16>C;++C)n(pe,me+C*g.R,Y,Z+32*C,16);for(C=0;8>C;++C)n(we,ie+C*g.B,J,ne+32*C,8),n(ve,Se+C*g.B,ue,ye+32*C,8)}}function $a(g,x,C,P,V,$,Y,Z,J){var ne=[0],ue=[0],ye=0,ie=J!=null?J.kd:0,pe=J??new Ne;if(g==null||12>C)return 7;pe.data=g,pe.w=x,pe.ha=C,x=[x],C=[C],pe.gb=[pe.gb];e:{var me=x,we=C,ve=pe.gb;if(e(g!=null),e(we!=null),e(ve!=null),ve[0]=0,12<=we[0]&&!t(g,me[0],"RIFF")){if(t(g,me[0]+8,"WEBP")){ve=3;break e}var Se=Re(g,me[0]+4);if(12>Se||4294967286<Se){ve=3;break e}if(ie&&Se>we[0]-8){ve=7;break e}ve[0]=Se,me[0]+=12,we[0]-=12}ve=0}if(ve!=0)return ve;for(Se=0<pe.gb[0],C=C[0];;){e:{var Ie=g;we=x,ve=C;var De=ne,ke=ue,tt=me=[0];if((Ke=ye=[ye])[0]=0,8>ve[0])ve=7;else{if(!t(Ie,we[0],"VP8X")){if(Re(Ie,we[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var Ge=Re(Ie,we[0]+8),St=1+Te(Ie,we[0]+12);if(2147483648<=St*(Ie=1+Te(Ie,we[0]+15))){ve=3;break e}tt!=null&&(tt[0]=Ge),De!=null&&(De[0]=St),ke!=null&&(ke[0]=Ie),we[0]+=18,ve[0]-=18,Ke[0]=1}ve=0}}if(ye=ye[0],me=me[0],ve!=0)return ve;if(we=!!(2&me),!Se&&ye)return 3;if($!=null&&($[0]=!!(16&me)),Y!=null&&(Y[0]=we),Z!=null&&(Z[0]=0),Y=ne[0],me=ue[0],ye&&we&&J==null){ve=0;break}if(4>C){ve=7;break}if(Se&&ye||!Se&&!ye&&!t(g,x[0],"ALPH")){C=[C],pe.na=[pe.na],pe.P=[pe.P],pe.Sa=[pe.Sa];e:{Ge=g,ve=x,Se=C;var Ke=pe.gb;De=pe.na,ke=pe.P,tt=pe.Sa,St=22,e(Ge!=null),e(Se!=null),Ie=ve[0];var kt=Se[0];for(e(De!=null),e(tt!=null),De[0]=null,ke[0]=null,tt[0]=0;;){if(ve[0]=Ie,Se[0]=kt,8>kt){ve=7;break e}var Or=Re(Ge,Ie+4);if(4294967286<Or){ve=3;break e}var _t=8+Or+1&-2;if(St+=_t,0<Ke&&St>Ke){ve=3;break e}if(!t(Ge,Ie,"VP8 ")||!t(Ge,Ie,"VP8L")){ve=0;break e}if(kt[0]<_t){ve=7;break e}t(Ge,Ie,"ALPH")||(De[0]=Ge,ke[0]=Ie+8,tt[0]=Or),Ie+=_t,kt-=_t}}if(C=C[0],pe.na=pe.na[0],pe.P=pe.P[0],pe.Sa=pe.Sa[0],ve!=0)break}C=[C],pe.Ja=[pe.Ja],pe.xa=[pe.xa];e:if(Ke=g,ve=x,Se=C,De=pe.gb[0],ke=pe.Ja,tt=pe.xa,Ge=ve[0],Ie=!t(Ke,Ge,"VP8 "),St=!t(Ke,Ge,"VP8L"),e(Ke!=null),e(Se!=null),e(ke!=null),e(tt!=null),8>Se[0])ve=7;else{if(Ie||St){if(Ke=Re(Ke,Ge+4),12<=De&&Ke>De-12){ve=3;break e}if(ie&&Ke>Se[0]-8){ve=7;break e}ke[0]=Ke,ve[0]+=8,Se[0]-=8,tt[0]=St}else tt[0]=5<=Se[0]&&Ke[Ge+0]==47&&!(Ke[Ge+4]>>5),ke[0]=Se[0];ve=0}if(C=C[0],pe.Ja=pe.Ja[0],pe.xa=pe.xa[0],x=x[0],ve!=0)break;if(4294967286<pe.Ja)return 3;if(Z==null||we||(Z[0]=pe.xa?2:1),Y=[Y],me=[me],pe.xa){if(5>C){ve=7;break}Z=Y,ie=me,we=$,g==null||5>C?g=0:5<=C&&g[x+0]==47&&!(g[x+4]>>5)?(Se=[0],Ke=[0],De=[0],H(ke=new z,g,x,C),Bi(ke,Se,Ke,De)?(Z!=null&&(Z[0]=Se[0]),ie!=null&&(ie[0]=Ke[0]),we!=null&&(we[0]=De[0]),g=1):g=0):g=0}else{if(10>C){ve=7;break}Z=me,g==null||10>C||!rl(g,x+3,C-3)?g=0:(ie=g[x+0]|g[x+1]<<8|g[x+2]<<16,we=16383&(g[x+7]<<8|g[x+6]),g=16383&(g[x+9]<<8|g[x+8]),1&ie||3<(ie>>1&7)||!(ie>>4&1)||ie>>5>=pe.Ja||!we||!g?g=0:(Y&&(Y[0]=we),Z&&(Z[0]=g),g=1))}if(!g||(Y=Y[0],me=me[0],ye&&(ne[0]!=Y||ue[0]!=me)))return 3;J!=null&&(J[0]=pe,J.offset=x-J.w,e(4294967286>x-J.w),e(J.offset==J.ha-C));break}return ve==0||ve==7&&ye&&J==null?($!=null&&($[0]|=pe.na!=null&&0<pe.na.length),P!=null&&(P[0]=Y),V!=null&&(V[0]=me),0):ve}function fs(g,x,C){var P=x.width,V=x.height,$=0,Y=0,Z=P,J=V;if(x.Da=g!=null&&0<g.Da,x.Da&&(Z=g.cd,J=g.bd,$=g.v,Y=g.j,11>C||($&=-2,Y&=-2),0>$||0>Y||0>=Z||0>=J||$+Z>P||Y+J>V))return 0;if(x.v=$,x.j=Y,x.va=$+Z,x.o=Y+J,x.U=Z,x.T=J,x.da=g!=null&&0<g.da,x.da){if(!Pe(Z,J,C=[g.ib],$=[g.hb]))return 0;x.ib=C[0],x.hb=$[0]}return x.ob=g!=null&&g.ob,x.Kb=g==null||!g.Sd,x.da&&(x.ob=x.ib<3*P/4&&x.hb<3*V/4,x.Kb=0),1}function us(g){if(g==null)return 2;if(11>g.S){var x=g.f.RGBA;x.fb+=(g.height-1)*x.A,x.A=-x.A}else x=g.f.kb,g=g.height,x.O+=(g-1)*x.fa,x.fa=-x.fa,x.N+=(g-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(g-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(g-1)*x.lb,x.lb=-x.lb);return 0}function da(g,x,C,P){if(P==null||0>=g||0>=x)return 2;if(C!=null){if(C.Da){var V=C.cd,$=C.bd,Y=-2&C.v,Z=-2&C.j;if(0>Y||0>Z||0>=V||0>=$||Y+V>g||Z+$>x)return 2;g=V,x=$}if(C.da){if(!Pe(g,x,V=[C.ib],$=[C.hb]))return 2;g=V[0],x=$[0]}}P.width=g,P.height=x;e:{var J=P.width,ne=P.height;if(g=P.S,0>=J||0>=ne||!(g>=xl&&13>g))g=2;else{if(0>=P.Rd&&P.sd==null){Y=$=V=x=0;var ue=(Z=J*cu[g])*ne;if(11>g||($=(ne+1)/2*(x=(J+1)/2),g==12&&(Y=(V=J)*ne)),(ne=a(ue+2*$+Y))==null){g=1;break e}P.sd=ne,11>g?((J=P.f.RGBA).eb=ne,J.fb=0,J.A=Z,J.size=ue):((J=P.f.kb).y=ne,J.O=0,J.fa=Z,J.Fd=ue,J.f=ne,J.N=0+ue,J.Ab=x,J.Cd=$,J.ea=ne,J.W=0+ue+$,J.Db=x,J.Ed=$,g==12&&(J.F=ne,J.J=0+ue+2*$),J.Tc=Y,J.lb=V)}if(x=1,V=P.S,$=P.width,Y=P.height,V>=xl&&13>V)if(11>V)g=P.f.RGBA,x&=(Z=Math.abs(g.A))*(Y-1)+$<=g.size,x&=Z>=$*cu[V],x&=g.eb!=null;else{g=P.f.kb,Z=($+1)/2,ue=(Y+1)/2,J=Math.abs(g.fa),ne=Math.abs(g.Ab);var ye=Math.abs(g.Db),ie=Math.abs(g.lb),pe=ie*(Y-1)+$;x&=J*(Y-1)+$<=g.Fd,x&=ne*(ue-1)+Z<=g.Cd,x=(x&=ye*(ue-1)+Z<=g.Ed)&J>=$&ne>=Z&ye>=Z,x&=g.y!=null,x&=g.f!=null,x&=g.ea!=null,V==12&&(x&=ie>=$,x&=pe<=g.Tc,x&=g.F!=null)}else x=0;g=x?0:2}}return g!=0||C!=null&&C.fd&&(g=us(P)),g}var Xa=64,jn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],On=24,fa=32,Yi=8,ua=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(g){return g},E.Predictor2=function(g,x,C){return x[C+0]},E.Predictor3=function(g,x,C){return x[C+1]},E.Predictor4=function(g,x,C){return x[C-1]},E.Predictor5=function(g,x,C){return Me(Me(g,x[C+1]),x[C+0])},E.Predictor6=function(g,x,C){return Me(g,x[C-1])},E.Predictor7=function(g,x,C){return Me(g,x[C+0])},E.Predictor8=function(g,x,C){return Me(x[C-1],x[C+0])},E.Predictor9=function(g,x,C){return Me(x[C+0],x[C+1])},E.Predictor10=function(g,x,C){return Me(Me(g,x[C-1]),Me(x[C+0],x[C+1]))},E.Predictor11=function(g,x,C){var P=x[C+0];return 0>=Qe(P>>24&255,g>>24&255,(x=x[C-1])>>24&255)+Qe(P>>16&255,g>>16&255,x>>16&255)+Qe(P>>8&255,g>>8&255,x>>8&255)+Qe(255&P,255&g,255&x)?P:g},E.Predictor12=function(g,x,C){var P=x[C+0];return(Oe((g>>24&255)+(P>>24&255)-((x=x[C-1])>>24&255))<<24|Oe((g>>16&255)+(P>>16&255)-(x>>16&255))<<16|Oe((g>>8&255)+(P>>8&255)-(x>>8&255))<<8|Oe((255&g)+(255&P)-(255&x)))>>>0},E.Predictor13=function(g,x,C){var P=x[C-1];return(rt((g=Me(g,x[C+0]))>>24&255,P>>24&255)<<24|rt(g>>16&255,P>>16&255)<<16|rt(g>>8&255,P>>8&255)<<8|rt(255&g,255&P))>>>0};var hs=E.PredictorAdd0;E.PredictorAdd1=At,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var Co=E.PredictorAdd2;We("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),We("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var xr,pl=E.ColorIndexInverseTransform,Ii=E.MapARGB,Ei=E.VP8LColorIndexInverseTransformAlpha,ps=E.MapAlpha,gs=E.VP8LPredictorsAdd=[];gs.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var ms,xs,ha,pa,ga,Ya,ma,Ka,$n,Ni,Wt,Qt,vr,jr,Ki,vs,Io,gl,Bf,Ff,zf,Uf,Wf,Hf,ys,qf,Vf,Gf,$f=a(511),Xf=a(2041),Yf=a(225),Kf=a(767),Zf=0,Wc=Xf,ml=Yf,Tn=Kf,Xn=$f,xl=0,vl=1,Qf=2,yl=3,bl=4,Hc=5,Jf=6,qc=7,Vc=8,wl=9,Gc=10,Ip=[2,3,7],Ep=[3,3,11],eu=[280,256,256,256,40],Np=[0,1,1,1,0],kp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Dp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],jp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Op=8,$c=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Xc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],bs=null,Tp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Rp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],tu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Lp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Pp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Mp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Bp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xa=[],oi=[],Zi=[],Fp=1,ru=2,va=[],Yn=[];$i("UpsampleRgbLinePair",ca,3),$i("UpsampleBgrLinePair",Zr,3),$i("UpsampleRgbaLinePair",gn,4),$i("UpsampleBgraLinePair",ds,4),$i("UpsampleArgbLinePair",cs,4),$i("UpsampleRgba4444LinePair",Ga,2),$i("UpsampleRgb565LinePair",Va,2);var zp=E.UpsampleRgbLinePair,Up=E.UpsampleBgrLinePair,nu=E.UpsampleRgbaLinePair,iu=E.UpsampleBgraLinePair,au=E.UpsampleArgbLinePair,ou=E.UpsampleRgba4444LinePair,Wp=E.UpsampleRgb565LinePair,Al=16,Sl=1<<Al-1,ws=-227,Yc=482,Hp=6,su=0,qp=a(256),Vp=a(256),Gp=a(256),$p=a(256),Xp=a(Yc-ws),Yp=a(Yc-ws);Xi("YuvToRgbRow",ca,3),Xi("YuvToBgrRow",Zr,3),Xi("YuvToRgbaRow",gn,4),Xi("YuvToBgraRow",ds,4),Xi("YuvToArgbRow",cs,4),Xi("YuvToRgba4444Row",Ga,2),Xi("YuvToRgb565Row",Va,2);var lu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_l=[0,2,8],Kp=[8,7,6,4,4,2,2,2,1,1,1,1],Zp=1;this.WebPDecodeRGBA=function(g,x,C,P,V){var $=vl,Y=new Ce,Z=new ht;Y.ba=Z,Z.S=$,Z.width=[Z.width],Z.height=[Z.height];var J=Z.width,ne=Z.height,ue=new Je;if(ue==null||g==null)var ye=2;else e(ue!=null),ye=$a(g,x,C,ue.width,ue.height,ue.Pd,ue.Qd,ue.format,null);if(ye!=0?J=0:(J!=null&&(J[0]=ue.width[0]),ne!=null&&(ne[0]=ue.height[0]),J=1),J){Z.width=Z.width[0],Z.height=Z.height[0],P!=null&&(P[0]=Z.width),V!=null&&(V[0]=Z.height);e:{if(P=new vo,(V=new Ne).data=g,V.w=x,V.ha=C,V.kd=1,x=[0],e(V!=null),((g=$a(V.data,V.w,V.ha,null,null,null,x,null,V))==0||g==7)&&x[0]&&(g=4),(x=g)==0){if(e(Y!=null),P.data=V.data,P.w=V.w+V.offset,P.ha=V.ha-V.offset,P.put=dt,P.ac=Ur,P.bc=Mi,P.ma=Y,V.xa){if((g=Pa())==null){Y=1;break e}if(function(ie,pe){var me=[0],we=[0],ve=[0];t:for(;;){if(ie==null)return 0;if(pe==null)return ie.a=2,0;if(ie.l=pe,ie.a=0,H(ie.m,pe.data,pe.w,pe.ha),!Bi(ie.m,me,we,ve)){ie.a=3;break t}if(ie.xb=ru,pe.width=me[0],pe.height=we[0],!Ai(me[0],we[0],1,ie,null))break t;return 1}return e(ie.a!=0),0}(g,P)){if(P=(x=da(P.width,P.height,Y.Oa,Y.ba))==0){t:{P=g;r:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((C=P.l)!=null),e((V=C.ma)!=null),P.xb!=0){if(P.ca=V.ba,P.tb=V.tb,e(P.ca!=null),!fs(V.Oa,C,yl)){P.a=2;break r}if(!Ma(P,C.width)||C.da)break r;if((C.da||st(P.ca.S))&&ai(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&ai()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!Q(P.s.vb,P.s.Wa.Xa)){P.a=1;break r}P.xb=0}if(!ni(P,P.V,P.Ba,P.c,P.i,C.o,sa))break r;V.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(x=g.a)}else x=g.a}else{if((g=new Ec)==null){Y=1;break e}if(g.Fa=V.na,g.P=V.P,g.qc=V.Sa,_i(g,P)){if((x=da(P.width,P.height,Y.Oa,Y.ba))==0){if(g.Aa=0,C=Y.Oa,e((V=g)!=null),C!=null){if(0<(J=0>(J=C.Md)?0:100<J?255:255*J/100)){for(ne=ue=0;4>ne;++ne)12>(ye=V.pb[ne]).lc&&(ye.ia=J*Kp[0>ye.lc?0:ye.lc]>>3),ue|=ye.ia;ue&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=C.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}(function(ie,pe){if(ie==null)return 0;if(pe==null)return Cr(ie,2,"NULL VP8Io parameter in VP8Decode().");if(!ie.cb&&!_i(ie,pe))return 0;if(e(ie.cb),pe.ac==null||pe.ac(pe)){pe.ob&&(ie.L=0);var me=_l[ie.L];if(ie.L==2?(ie.yb=0,ie.zb=0):(ie.yb=pe.v-me>>4,ie.zb=pe.j-me>>4,0>ie.yb&&(ie.yb=0),0>ie.zb&&(ie.zb=0)),ie.Va=pe.o+15+me>>4,ie.Hb=pe.va+15+me>>4,ie.Hb>ie.za&&(ie.Hb=ie.za),ie.Va>ie.Ub&&(ie.Va=ie.Ub),0<ie.L){var we=ie.ed;for(me=0;4>me;++me){var ve;if(ie.Qa.Cb){var Se=ie.Qa.Lb[me];ie.Qa.Fb||(Se+=we.Tb)}else Se=we.Tb;for(ve=0;1>=ve;++ve){var Ie=ie.gd[me][ve],De=Se;if(we.Pc&&(De+=we.vd[0],ve&&(De+=we.od[0])),0<(De=0>De?0:63<De?63:De)){var ke=De;0<we.wb&&(ke=4<we.wb?ke>>2:ke>>1)>9-we.wb&&(ke=9-we.wb),1>ke&&(ke=1),Ie.dd=ke,Ie.tc=2*De+ke,Ie.ld=40<=De?2:15<=De?1:0}else Ie.tc=0;Ie.La=ve}}}me=0}else Cr(ie,6,"Frame setup failed"),me=ie.a;if(me=me==0){if(me){ie.$c=0,0<ie.Aa||(ie.Ic=Zp);t:{me=ie.Ic,we=4*(ke=ie.za);var tt=32*ke,Ge=ke+1,St=0<ie.L?ke*(0<ie.Aa?2:1):0,Ke=(ie.Aa==2?2:1)*ke;if((Ie=we+832+(ve=3*(16*me+_l[ie.L])/2*tt)+(Se=ie.Fa!=null&&0<ie.Fa.length?ie.Kc.c*ie.Kc.i:0))!=Ie)me=0;else{if(Ie>ie.Vb){if(ie.Vb=0,ie.Ec=a(Ie),ie.Fc=0,ie.Ec==null){me=Cr(ie,1,"no memory during frame initialization.");break t}ie.Vb=Ie}Ie=ie.Ec,De=ie.Fc,ie.Ac=Ie,ie.Bc=De,De+=we,ie.Gd=s(tt,el),ie.Hd=0,ie.rb=s(Ge+1,Qo),ie.sb=1,ie.wa=St?s(St,qn):null,ie.Y=0,ie.D.Nb=0,ie.D.wa=ie.wa,ie.D.Y=ie.Y,0<ie.Aa&&(ie.D.Y+=ke),e(!0),ie.oc=Ie,ie.pc=De,De+=832,ie.ya=s(Ke,Jo),ie.aa=0,ie.D.ya=ie.ya,ie.D.aa=ie.aa,ie.Aa==2&&(ie.D.aa+=ke),ie.R=16*ke,ie.B=8*ke,ke=(tt=_l[ie.L])*ie.R,tt=tt/2*ie.B,ie.sa=Ie,ie.ta=De+ke,ie.qa=ie.sa,ie.ra=ie.ta+16*me*ie.R+tt,ie.Ha=ie.qa,ie.Ia=ie.ra+8*me*ie.B+tt,ie.$c=0,De+=ve,ie.mb=Se?Ie:null,ie.nb=Se?De:null,e(De+Se<=ie.Fc+ie.Vb),nl(ie),i(ie.Ac,ie.Bc,0,we),me=1}}if(me){if(pe.ka=0,pe.y=ie.sa,pe.O=ie.ta,pe.f=ie.qa,pe.N=ie.ra,pe.ea=ie.Ha,pe.Vd=ie.Ia,pe.fa=ie.R,pe.Rc=ie.B,pe.F=null,pe.J=0,!Zf){for(me=-255;255>=me;++me)$f[255+me]=0>me?-me:me;for(me=-1020;1020>=me;++me)Xf[1020+me]=-128>me?-128:127<me?127:me;for(me=-112;112>=me;++me)Yf[112+me]=-16>me?-16:15<me?15:me;for(me=-255;510>=me;++me)Kf[255+me]=0>me?0:255<me?255:me;Zf=1}ma=bo,Ka=kc,Ni=Ci,Wt=al,Qt=ol,$n=Nc,vr=fl,jr=Wa,Ki=q,vs=ae,Io=ul,gl=A,Bf=ce,Ff=ge,zf=Ua,Uf=ss,Wf=cl,Hf=dl,oi[0]=Mc,oi[1]=Dc,oi[2]=Lc,oi[3]=Pc,oi[4]=zi,oi[5]=Bc,oi[6]=Ui,oi[7]=Fc,oi[8]=rs,oi[9]=wo,xa[0]=Tc,xa[1]=Oc,xa[2]=es,xa[3]=sl,xa[4]=Fa,xa[5]=ts,xa[6]=Rc,Zi[0]=Uc,Zi[1]=jc,Zi[2]=za,Zi[3]=zc,Zi[4]=is,Zi[5]=ns,Zi[6]=ll,me=1}else me=0}me&&(me=function(kt,Or){for(kt.M=0;kt.M<kt.Va;++kt.M){var _t,Ze=kt.Jc[kt.M&kt.Xb],ze=kt.m,yr=kt;for(_t=0;_t<yr.za;++_t){var bt=ze,jt=yr,or=jt.Ac,Qr=jt.Bc+4*_t,mn=jt.zc,pr=jt.ya[jt.aa+_t];if(jt.Qa.Bb?pr.$b=fe(bt,jt.Pa.jb[0])?2+fe(bt,jt.Pa.jb[2]):fe(bt,jt.Pa.jb[1]):pr.$b=0,jt.kc&&(pr.Ad=fe(bt,jt.Bd)),pr.Za=!fe(bt,145)+0,pr.Za){var sn=pr.Ob,xn=0;for(jt=0;4>jt;++jt){var Tr,Lt=mn[0+jt];for(Tr=0;4>Tr;++Tr){Lt=Pp[or[Qr+Tr]][Lt];for(var qt=tu[fe(bt,Lt[0])];0<qt;)qt=tu[2*qt+fe(bt,Lt[qt])];Lt=-qt,or[Qr+Tr]=Lt}n(sn,xn,or,Qr,4),xn+=4,mn[0+jt]=Lt}}else Lt=fe(bt,156)?fe(bt,128)?1:3:fe(bt,163)?2:0,pr.Ob[0]=Lt,i(or,Qr,Lt,4),i(mn,0,Lt,4);pr.Dd=fe(bt,142)?fe(bt,114)?fe(bt,183)?1:3:2:0}if(yr.m.Ka)return Cr(kt,7,"Premature end-of-partition0 encountered.");for(;kt.ja<kt.za;++kt.ja){if(yr=Ze,bt=(ze=kt).rb[ze.sb-1],or=ze.rb[ze.sb+ze.ja],_t=ze.ya[ze.aa+ze.ja],Qr=ze.kc?_t.Ad:0)bt.la=or.la=0,_t.Za||(bt.Na=or.Na=0),_t.Hc=0,_t.Gc=0,_t.ia=0;else{var gr,Vt;if(bt=or,or=yr,Qr=ze.Pa.Xc,mn=ze.ya[ze.aa+ze.ja],pr=ze.pb[mn.$b],jt=mn.ad,sn=0,xn=ze.rb[ze.sb-1],Lt=Tr=0,i(jt,sn,0,384),mn.Za)var Jr=0,si=Qr[3];else{qt=a(16);var br=bt.Na+xn.Na;if(br=bs(or,Qr[1],br,pr.Eb,0,qt,0),bt.Na=xn.Na=(0<br)+0,1<br)ma(qt,0,jt,sn);else{var Sn=qt[0]+3>>3;for(qt=0;256>qt;qt+=16)jt[sn+qt]=Sn}Jr=1,si=Qr[0]}var Jt=15&bt.la,Rr=15&xn.la;for(qt=0;4>qt;++qt){var Rn=1&Rr;for(Sn=Vt=0;4>Sn;++Sn)Jt=Jt>>1|(Rn=(br=bs(or,si,br=Rn+(1&Jt),pr.Sc,Jr,jt,sn))>Jr)<<7,Vt=Vt<<2|(3<br?3:1<br?2:jt[sn+0]!=0),sn+=16;Jt>>=4,Rr=Rr>>1|Rn<<7,Tr=(Tr<<8|Vt)>>>0}for(si=Jt,Jr=Rr>>4,gr=0;4>gr;gr+=2){for(Vt=0,Jt=bt.la>>4+gr,Rr=xn.la>>4+gr,qt=0;2>qt;++qt){for(Rn=1&Rr,Sn=0;2>Sn;++Sn)br=Rn+(1&Jt),Jt=Jt>>1|(Rn=0<(br=bs(or,Qr[2],br,pr.Qc,0,jt,sn)))<<3,Vt=Vt<<2|(3<br?3:1<br?2:jt[sn+0]!=0),sn+=16;Jt>>=2,Rr=Rr>>1|Rn<<5}Lt|=Vt<<4*gr,si|=Jt<<4<<gr,Jr|=(240&Rr)<<gr}bt.la=si,xn.la=Jr,mn.Hc=Tr,mn.Gc=Lt,mn.ia=43690&Lt?0:pr.ia,Qr=!(Tr|Lt)}if(0<ze.L&&(ze.wa[ze.Y+ze.ja]=ze.gd[_t.$b][_t.Za],ze.wa[ze.Y+ze.ja].La|=!Qr),yr.Ka)return Cr(kt,7,"Premature end-of-file encountered.")}if(nl(kt),ze=Or,yr=1,_t=(Ze=kt).D,bt=0<Ze.L&&Ze.M>=Ze.zb&&Ze.M<=Ze.Va,Ze.Aa==0)t:{if(_t.M=Ze.M,_t.uc=bt,Gn(Ze,_t),yr=1,_t=(Vt=Ze.D).Nb,bt=(Lt=_l[Ze.L])*Ze.R,or=Lt/2*Ze.B,qt=16*_t*Ze.R,Sn=8*_t*Ze.B,Qr=Ze.sa,mn=Ze.ta-bt+qt,pr=Ze.qa,jt=Ze.ra-or+Sn,sn=Ze.Ha,xn=Ze.Ia-or+Sn,Rr=(Jt=Vt.M)==0,Tr=Jt>=Ze.Va-1,Ze.Aa==2&&Gn(Ze,Vt),Vt.uc)for(Rn=(br=Ze).D.M,e(br.D.uc),Vt=br.yb;Vt<br.Hb;++Vt){Jr=Vt,si=Rn;var vn=(Ln=(en=br).D).Nb;gr=en.R;var Ln=Ln.wa[Ln.Y+Jr],Pn=en.sa,_n=en.ta+16*vn*gr+16*Jr,Mn=Ln.dd,ir=Ln.tc;if(ir!=0)if(e(3<=ir),en.L==1)0<Jr&&Uf(Pn,_n,gr,ir+4),Ln.La&&Hf(Pn,_n,gr,ir),0<si&&zf(Pn,_n,gr,ir+4),Ln.La&&Wf(Pn,_n,gr,ir);else{var Bn=en.B,li=en.qa,Za=en.ra+8*vn*Bn+8*Jr,Qi=en.Ha,en=en.Ia+8*vn*Bn+8*Jr;vn=Ln.ld,0<Jr&&(jr(Pn,_n,gr,ir+4,Mn,vn),vs(li,Za,Qi,en,Bn,ir+4,Mn,vn)),Ln.La&&(gl(Pn,_n,gr,ir,Mn,vn),Ff(li,Za,Qi,en,Bn,ir,Mn,vn)),0<si&&(vr(Pn,_n,gr,ir+4,Mn,vn),Ki(li,Za,Qi,en,Bn,ir+4,Mn,vn)),Ln.La&&(Io(Pn,_n,gr,ir,Mn,vn),Bf(li,Za,Qi,en,Bn,ir,Mn,vn))}}if(Ze.ia&&alert("todo:DitherRow"),ze.put!=null){if(Vt=16*Jt,Jt=16*(Jt+1),Rr?(ze.y=Ze.sa,ze.O=Ze.ta+qt,ze.f=Ze.qa,ze.N=Ze.ra+Sn,ze.ea=Ze.Ha,ze.W=Ze.Ia+Sn):(Vt-=Lt,ze.y=Qr,ze.O=mn,ze.f=pr,ze.N=jt,ze.ea=sn,ze.W=xn),Tr||(Jt-=Lt),Jt>ze.o&&(Jt=ze.o),ze.F=null,ze.J=null,Ze.Fa!=null&&0<Ze.Fa.length&&Vt<Jt&&(ze.J=nr(Ze,ze,Vt,Jt-Vt),ze.F=Ze.mb,ze.F==null&&ze.F.length==0)){yr=Cr(Ze,3,"Could not decode alpha data.");break t}Vt<ze.j&&(Lt=ze.j-Vt,Vt=ze.j,e(!(1&Lt)),ze.O+=Ze.R*Lt,ze.N+=Ze.B*(Lt>>1),ze.W+=Ze.B*(Lt>>1),ze.F!=null&&(ze.J+=ze.width*Lt)),Vt<Jt&&(ze.O+=ze.v,ze.N+=ze.v>>1,ze.W+=ze.v>>1,ze.F!=null&&(ze.J+=ze.v),ze.ka=Vt-ze.j,ze.U=ze.va-ze.v,ze.T=Jt-Vt,yr=ze.put(ze))}_t+1!=Ze.Ic||Tr||(n(Ze.sa,Ze.ta-bt,Qr,mn+16*Ze.R,bt),n(Ze.qa,Ze.ra-or,pr,jt+8*Ze.B,or),n(Ze.Ha,Ze.Ia-or,sn,xn+8*Ze.B,or))}if(!yr)return Cr(kt,6,"Output aborted.")}return 1}(ie,pe)),pe.bc!=null&&pe.bc(pe),me&=1}return me?(ie.cb=0,me):0})(g,P)||(x=g.a)}}else x=g.a}x==0&&Y.Oa!=null&&Y.Oa.fd&&(x=us(Y.ba))}Y=x}$=Y!=0?null:11>$?Z.f.RGBA.eb:Z.f.kb.y}else $=null;return $};var cu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(E,B){for(var k="",S=0;S<4;S++)k+=String.fromCharCode(E[B++]);return k}function d(E,B){return E[B+0]|E[B+1]<<8}function u(E,B){return(E[B+0]|E[B+1]<<8|E[B+2]<<16)>>>0}function p(E,B){return(E[B+0]|E[B+1]<<8|E[B+2]<<16|E[B+3]<<24)>>>0}new l;var h=[0],m=[0],v=[],b=new l,y=r,I=function(E,B){var k={},S=0,D=!1,w=0,M=0;if(k.frames=[],!function(T,z){for(var W=0;W<4;W++)if(T[z+W]!="RIFF".charCodeAt(W))return!0;return!1}(E,B)){for(p(E,B+=4),B+=8;B<E.length;){var O=c(E,B),L=p(E,B+=4);B+=4;var X=L+(1&L);switch(O){case"VP8 ":case"VP8L":k.frames[S]===void 0&&(k.frames[S]={}),(K=k.frames[S]).src_off=D?M:B-8,K.src_size=w+L+8,S++,D&&(D=!1,w=0,M=0);break;case"VP8X":(K=k.header={}).feature_flags=E[B];var H=B+4;K.canvas_width=1+u(E,H),H+=3,K.canvas_height=1+u(E,H),H+=3;break;case"ALPH":D=!0,w=X+8,M=B-8;break;case"ANIM":(K=k.header).bgcolor=p(E,B),H=B+4,K.loop_count=d(E,H),H+=2;break;case"ANMF":var ee,K;(K=k.frames[S]={}).offset_x=2*u(E,B),B+=3,K.offset_y=2*u(E,B),B+=3,K.width=1+u(E,B),B+=3,K.height=1+u(E,B),B+=3,K.duration=u(E,B),B+=3,ee=E[B++],K.dispose=1&ee,K.blend=ee>>1&1}O!="ANMF"&&(B+=X)}return k}}(y,0);I.response=y,I.rgbaoutput=!0,I.dataurl=!1;var N=I.header?I.header:null,_=I.frames?I.frames:null;if(N){N.loop_counter=N.loop_count,h=[N.canvas_height],m=[N.canvas_width];for(var F=0;F<_.length&&_[F].blend!=0;F++);}var R=_[0],U=b.WebPDecodeRGBA(y,R.src_off,R.src_size,m,h);R.rgba=U,R.imgwidth=m[0],R.imgheight=h[0];for(var j=0;j<m[0]*h[0]*4;j++)v[j]=U[j];return this.width=m,this.height=h,this.data=v,this}(function(r){var e,t,n,i,a,s,o,l,c,d=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new l,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new s,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new s,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=T;Object.defineProperty(this,"pdf",{get:function(){return z}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Q){W=!!Q}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(Q){G=!!Q}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(Q){isNaN(Q)||(oe=Q)}});var re=0;Object.defineProperty(this,"posY",{get:function(){return re},set:function(Q){isNaN(Q)||(re=Q)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Q){var je;typeof Q=="number"?je=[Q,Q,Q,Q]:((je=new Array(4))[0]=Q[0],je[1]=Q.length>=2?Q[1]:je[0],je[2]=Q.length>=3?Q[2]:je[0],je[3]=Q.length>=4?Q[3]:je[1]),c.margin=je}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(Q){le=Q}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(Q){de=Q}});var fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return fe},set:function(Q){fe=Q}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Q){Q instanceof d&&(c=Q)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Q){c.path=Q}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(Q){be=Q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Q){var je;je=p(Q),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=je.a===0,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Q){var je=p(Q);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=je.a===0,this.ctx.strokeOpacity=je.a,je.a===0?this.pdf.setDrawColor(255,255,255):(je.a,this.pdf.setDrawColor(je.r,je.g,je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Q){["butt","round","square"].indexOf(Q)!==-1&&(this.ctx.lineCap=Q,this.pdf.setLineCap(Q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Q){isNaN(Q)||(this.ctx.lineWidth=Q,this.pdf.setLineWidth(Q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Q){["bevel","round","miter"].indexOf(Q)!==-1&&(this.ctx.lineJoin=Q,this.pdf.setLineJoin(Q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Q){isNaN(Q)||(this.ctx.miterLimit=Q,this.pdf.setMiterLimit(Q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Q){this.ctx.textBaseline=Q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Q){["right","end","center","left","start"].indexOf(Q)!==-1&&(this.ctx.textAlign=Q)}});var _e=null,Te=null,Re=null;Object.defineProperty(this,"fontFaces",{get:function(){return Re},set:function(Q){_e=null,Te=null,Re=Q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Q){var je;if(this.ctx.font=Q,(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Q))!==null){var He=je[1];je[2];var Pe=je[3],he=je[4];je[5];var Le=je[6],Ee=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(he)[2];he=Math.floor(Ee==="px"?parseFloat(he)*this.pdf.internal.scaleFactor:Ee==="em"?parseFloat(he)*this.pdf.getFontSize():parseFloat(he)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(he);var Be=function(We){var Dt,yt,ct=[],ut=We.trim();if(ut==="")return Td;if(ut in a1)return[a1[ut]];for(;ut!=="";){switch(yt=null,Dt=(ut=s1(ut)).charAt(0)){case'"':case"'":yt=W3(ut.substring(1),Dt);break;default:yt=H3(ut)}if(yt===null||(ct.push(yt[0]),(ut=s1(yt[1]))!==""&&ut.charAt(0)!==","))return Td;ut=ut.replace(/^,/,"")}return ct}(Le);if(this.fontFaces){var Me=function(We,Dt){var yt=We.getFontList(),ct=JSON.stringify(yt);if(_e===null||Te!==ct){var ut=function(Kt){var at=[];return Object.keys(Kt).forEach(function(Ut){Kt[Ut].forEach(function(st){var ft=null;switch(st){case"bold":ft={family:Ut,weight:"bold"};break;case"italic":ft={family:Ut,style:"italic"};break;case"bolditalic":ft={family:Ut,weight:"bold",style:"italic"};break;case"":case"normal":ft={family:Ut}}ft!==null&&(ft.ref={name:Ut,style:st},at.push(ft))})}),at}(yt);_e=function(Kt){for(var at={},Ut=0;Ut<Kt.length;++Ut){var st=Od(Kt[Ut]),ft=st.family,rr=st.stretch,ht=st.style,Je=st.weight;at[ft]=at[ft]||{},at[ft][rr]=at[ft][rr]||{},at[ft][rr][ht]=at[ft][rr][ht]||{},at[ft][rr][ht][Je]=st}return at}(ut.concat(Dt)),Te=ct}return _e}(this.pdf,this.fontFaces),Oe=Be.map(function(We){return{family:We,stretch:"normal",weight:Pe,style:He}}),rt=function(We,Dt,yt){for(var ct=(yt=yt||{}).defaultFontFamily||"times",ut=Object.assign({},U3,yt.genericFontFamilies||{}),Kt=null,at=null,Ut=0;Ut<Dt.length;++Ut)if(ut[(Kt=Od(Dt[Ut])).family]&&(Kt.family=ut[Kt.family]),We.hasOwnProperty(Kt.family)){at=We[Kt.family];break}if(!(at=at||We[ct]))throw new Error("Could not find a font-family for the rule '"+o1(Kt)+"' and default family '"+ct+"'.");if(at=function(st,ft){if(ft[st])return ft[st];var rr=uf[st],ht=rr<=uf.normal?-1:1,Je=i1(ft,cp,rr,ht);if(!Je)throw new Error("Could not find a matching font-stretch value for "+st);return Je}(Kt.stretch,at),at=function(st,ft){if(ft[st])return ft[st];for(var rr=lp[st],ht=0;ht<rr.length;++ht)if(ft[rr[ht]])return ft[rr[ht]];throw new Error("Could not find a matching font-style for "+st)}(Kt.style,at),!(at=function(st,ft){if(ft[st])return ft[st];if(st===400&&ft[500])return ft[500];if(st===500&&ft[400])return ft[400];var rr=z3[st],ht=i1(ft,dp,rr,st<400?-1:1);if(!ht)throw new Error("Could not find a matching font-weight for value "+st);return ht}(Kt.weight,at)))throw new Error("Failed to resolve a font for the rule '"+o1(Kt)+"'.");return at}(Me,Oe);this.pdf.setFont(rt.ref.name,rt.ref.style)}else{var Qe="";(Pe==="bold"||parseInt(Pe,10)>=700||He==="bold")&&(Qe="bold"),He==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var At="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<Be.length;qe++){if(this.pdf.internal.getFont(Be[qe],Qe,{noFallback:!0,disableWarning:!0})!==void 0){At=Be[qe];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(Be[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=Be[qe],Qe="bold";else if(this.pdf.internal.getFont(Be[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=Be[qe],Qe="normal";break}}if(At===""){for(var Ve=0;Ve<Be.length;Ve++)if(it[Be[Ve]]){At=it[Be[Ve]];break}}At=At===""?"Times":At,this.pdf.setFont(At,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Q){this.ctx.globalCompositeOperation=Q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Q){this.ctx.globalAlpha=Q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Q){this.ctx.lineDashOffset=Q,K.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Q){this.ctx.lineDash=Q,K.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Q){this.ctx.ignoreClearRect=!!Q}})};u.prototype.setLineDash=function(T){this.lineDash=T},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){_.call(this,"fill",!1)},u.prototype.stroke=function(){_.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(T,z){if(isNaN(T)||isNaN(z))throw er.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new s(T,z));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new s(T,z)},u.prototype.closePath=function(){var T=new s(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Yt(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){T=new s(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(T.x,T.y)},u.prototype.lineTo=function(T,z){if(isNaN(T)||isNaN(z))throw er.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new s(T,z));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new s(W.x,W.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},u.prototype.quadraticCurveTo=function(T,z,W,G){if(isNaN(W)||isNaN(G)||isNaN(T)||isNaN(z))throw er.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new s(W,G)),re=this.ctx.transform.applyToPoint(new s(T,z));this.path.push({type:"qct",x1:re.x,y1:re.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new s(oe.x,oe.y)},u.prototype.bezierCurveTo=function(T,z,W,G,oe,re){if(isNaN(oe)||isNaN(re)||isNaN(T)||isNaN(z)||isNaN(W)||isNaN(G))throw er.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new s(oe,re)),de=this.ctx.transform.applyToPoint(new s(T,z)),fe=this.ctx.transform.applyToPoint(new s(W,G));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:fe.x,y2:fe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new s(le.x,le.y)},u.prototype.arc=function(T,z,W,G,oe,re){if(isNaN(T)||isNaN(z)||isNaN(W)||isNaN(G)||isNaN(oe))throw er.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(re=!!re,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new s(T,z));T=le.x,z=le.y;var de=this.ctx.transform.applyToPoint(new s(0,W)),fe=this.ctx.transform.applyToPoint(new s(0,0));W=Math.sqrt(Math.pow(de.x-fe.x,2)+Math.pow(de.y-fe.y,2))}Math.abs(oe-G)>=2*Math.PI&&(G=0,oe=2*Math.PI),this.path.push({type:"arc",x:T,y:z,radius:W,startAngle:G,endAngle:oe,counterclockwise:re})},u.prototype.arcTo=function(T,z,W,G,oe){throw new Error("arcTo not implemented.")},u.prototype.rect=function(T,z,W,G){if(isNaN(T)||isNaN(z)||isNaN(W)||isNaN(G))throw er.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,z),this.lineTo(T+W,z),this.lineTo(T+W,z+G),this.lineTo(T,z+G),this.lineTo(T,z),this.lineTo(T+W,z),this.lineTo(T,z)},u.prototype.fillRect=function(T,z,W,G){if(isNaN(T)||isNaN(z)||isNaN(W)||isNaN(G))throw er.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,z,W,G),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},u.prototype.strokeRect=function(T,z,W,G){if(isNaN(T)||isNaN(z)||isNaN(W)||isNaN(G))throw er.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(T,z,W,G),this.stroke())},u.prototype.clearRect=function(T,z,W,G){if(isNaN(T)||isNaN(z)||isNaN(W)||isNaN(G))throw er.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,z,W,G))},u.prototype.save=function(T){T=typeof T!="boolean"||T;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},u.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(z),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(T){var z,W,G,oe;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))z=0,W=0,G=0,oe=0;else{var re=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(re!==null)z=parseInt(re[1]),W=parseInt(re[2]),G=parseInt(re[3]),oe=1;else if((re=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)z=parseInt(re[1]),W=parseInt(re[2]),G=parseInt(re[3]),oe=parseFloat(re[4]);else{if(oe=1,typeof T=="string"&&T.charAt(0)!=="#"){var le=new tp(T);T=le.ok?le.toHex():"#000000"}T.length===4?(z=T.substring(1,2),z+=z,W=T.substring(2,3),W+=W,G=T.substring(3,4),G+=G):(z=T.substring(1,3),W=T.substring(3,5),G=T.substring(5,7)),z=parseInt(z,16),W=parseInt(W,16),G=parseInt(G,16)}}return{r:z,g:W,b:G,a:oe,style:T}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(T,z,W,G){if(isNaN(z)||isNaN(W)||typeof T!="string")throw er.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!h.call(this)){var oe=X(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;S.call(this,{text:T,x:z,y:W,scale:re,angle:oe,align:this.textAlign,maxWidth:G})}},u.prototype.strokeText=function(T,z,W,G){if(isNaN(z)||isNaN(W)||typeof T!="string")throw er.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){G=isNaN(G)?void 0:G;var oe=X(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;S.call(this,{text:T,x:z,y:W,scale:re,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:G})}},u.prototype.measureText=function(T){if(typeof T!="string")throw er.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,W=this.pdf.internal.scaleFactor,G=z.internal.getFontSize(),oe=z.getStringUnitWidth(T)*G/z.internal.scaleFactor;return new function(re){var le=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this}({width:oe*=Math.round(96*W/72*1e4)/1e4})},u.prototype.scale=function(T,z){if(isNaN(T)||isNaN(z))throw er.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new l(T,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},u.prototype.rotate=function(T){if(isNaN(T))throw er.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},u.prototype.translate=function(T,z){if(isNaN(T)||isNaN(z))throw er.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new l(1,0,0,1,T,z);this.ctx.transform=this.ctx.transform.multiply(W)},u.prototype.transform=function(T,z,W,G,oe,re){if(isNaN(T)||isNaN(z)||isNaN(W)||isNaN(G)||isNaN(oe)||isNaN(re))throw er.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new l(T,z,W,G,oe,re);this.ctx.transform=this.ctx.transform.multiply(le)},u.prototype.setTransform=function(T,z,W,G,oe,re){T=isNaN(T)?1:T,z=isNaN(z)?0:z,W=isNaN(W)?0:W,G=isNaN(G)?1:G,oe=isNaN(oe)?0:oe,re=isNaN(re)?0:re,this.ctx.transform=new l(T,z,W,G,oe,re)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(T,z,W,G,oe,re,le,de,fe){var be=this.pdf.getImageProperties(T),_e=1,Te=1,Re=1,Q=1;G!==void 0&&de!==void 0&&(Re=de/G,Q=fe/oe,_e=be.width/G*de/G,Te=be.height/oe*fe/oe),re===void 0&&(re=z,le=W,z=0,W=0),G!==void 0&&de===void 0&&(de=G,fe=oe),G===void 0&&de===void 0&&(de=be.width,fe=be.height);var je=this.ctx.transform.decompose(),He=X(je.rotate.shx),Pe=new l,he=(Pe=(Pe=(Pe=Pe.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(re-z*Re,le-W*Q,G*_e,oe*Te));if(this.autoPaging){for(var Le,Ee=b.call(this,he),Be=[],Me=0;Me<Ee.length;Me+=1)Be.indexOf(Ee[Me])===-1&&Be.push(Ee[Me]);N(Be);for(var Oe=Be[0],rt=Be[Be.length-1],Qe=Oe;Qe<rt+1;Qe++){this.pdf.setPage(Qe);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=Qe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=Qe===1?0:qe+(Qe-2)*Ve;if(this.ctx.clip_path.length!==0){var Dt=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Le,this.posX+this.margin[3],-We+it+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=Dt}var yt=JSON.parse(JSON.stringify(he));yt=I([yt],this.posX+this.margin[3],-We+it+this.ctx.prevPageLastElemOffset)[0];var ct=(Qe>Oe||Qe<rt)&&v.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Ve,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",yt.x,yt.y,yt.w,yt.h,null,null,He),ct&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(T,"JPEG",he.x,he.y,he.w,he.h,null,null,He)};var b=function(T,z,W){var G=[];z=z||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":G.push(Math.floor((T.y+oe)/W)+1);break;case"arc":G.push(Math.floor((T.y+oe-T.radius)/W)+1),G.push(Math.floor((T.y+oe+T.radius)/W)+1);break;case"qct":var re=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);G.push(Math.floor((re.y+oe)/W)+1),G.push(Math.floor((re.y+re.h+oe)/W)+1);break;case"bct":var le=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);G.push(Math.floor((le.y+oe)/W)+1),G.push(Math.floor((le.y+le.h+oe)/W)+1);break;case"rect":G.push(Math.floor((T.y+oe)/W)+1),G.push(Math.floor((T.y+T.h+oe)/W)+1)}for(var de=0;de<G.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<G[de];)y.call(this);return G},y=function(){var T=this.fillStyle,z=this.strokeStyle,W=this.font,G=this.lineCap,oe=this.lineWidth,re=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=z,this.font=W,this.lineCap=G,this.lineWidth=oe,this.lineJoin=re},I=function(T,z,W){for(var G=0;G<T.length;G++)switch(T[G].type){case"bct":T[G].x2+=z,T[G].y2+=W;case"qct":T[G].x1+=z,T[G].y1+=W;default:T[G].x+=z,T[G].y+=W}return T},N=function(T){return T.sort(function(z,W){return z-W})},_=function(T,z){var W=this.fillStyle,G=this.strokeStyle,oe=this.lineCap,re=this.lineWidth,le=Math.abs(re*this.ctx.transform.scaleX),de=this.lineJoin;if(this.autoPaging){for(var fe,be,_e=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),Re=[],Q=0;Q<Te.length;Q++)if(Te[Q].x!==void 0)for(var je=b.call(this,Te[Q]),He=0;He<je.length;He+=1)Re.indexOf(je[He])===-1&&Re.push(je[He]);for(var Pe=0;Pe<Re.length;Pe++)for(;this.pdf.internal.getNumberOfPages()<Re[Pe];)y.call(this);N(Re);for(var he=Re[0],Le=Re[Re.length-1],Ee=he;Ee<Le+1;Ee++){this.pdf.setPage(Ee),this.fillStyle=W,this.strokeStyle=G,this.lineCap=oe,this.lineWidth=le,this.lineJoin=de;var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=Ee===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=Ee===1?0:Oe+(Ee-2)*rt;if(this.ctx.clip_path.length!==0){var At=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(fe,this.posX+this.margin[3],-Qe+Me+this.ctx.prevPageLastElemOffset),F.call(this,T,!0),this.path=At}if(be=JSON.parse(JSON.stringify(_e)),this.path=I(be,this.posX+this.margin[3],-Qe+Me+this.ctx.prevPageLastElemOffset),z===!1||Ee===0){var it=(Ee>he||Ee<Le)&&v.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,rt,null).clip().discardPath()),F.call(this,T,z),it&&this.pdf.restoreGraphicsState()}this.lineWidth=re}this.path=_e}else this.lineWidth=le,F.call(this,T,z),this.lineWidth=re},F=function(T,z){if((T!=="stroke"||z||!m.call(this))&&(T==="stroke"||z||!h.call(this))){for(var W,G,oe=[],re=this.path,le=0;le<re.length;le++){var de=re[le];switch(de.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:de,deltas:[],abs:[]});break;case"lt":var fe=oe.length;if(re[le-1]&&!isNaN(re[le-1].x)&&(W=[de.x-re[le-1].x,de.y-re[le-1].y],fe>0)){for(;fe>=0;fe--)if(oe[fe-1].close!==!0&&oe[fe-1].begin!==!0){oe[fe-1].deltas.push(W),oe[fe-1].abs.push(de);break}}break;case"bct":W=[de.x1-re[le-1].x,de.y1-re[le-1].y,de.x2-re[le-1].x,de.y2-re[le-1].y,de.x-re[le-1].x,de.y-re[le-1].y],oe[oe.length-1].deltas.push(W);break;case"qct":var be=re[le-1].x+2/3*(de.x1-re[le-1].x),_e=re[le-1].y+2/3*(de.y1-re[le-1].y),Te=de.x+2/3*(de.x1-de.x),Re=de.y+2/3*(de.y1-de.y),Q=de.x,je=de.y;W=[be-re[le-1].x,_e-re[le-1].y,Te-re[le-1].x,Re-re[le-1].y,Q-re[le-1].x,je-re[le-1].y],oe[oe.length-1].deltas.push(W);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(de)}}G=z?null:T==="stroke"?"stroke":"fill";for(var He=!1,Pe=0;Pe<oe.length;Pe++)if(oe[Pe].arc)for(var he=oe[Pe].abs,Le=0;Le<he.length;Le++){var Ee=he[Le];Ee.type==="arc"?j.call(this,Ee.x,Ee.y,Ee.radius,Ee.startAngle,Ee.endAngle,Ee.counterclockwise,void 0,z,!He):D.call(this,Ee.x,Ee.y),He=!0}else if(oe[Pe].close===!0)this.pdf.internal.out("h"),He=!1;else if(oe[Pe].begin!==!0){var Be=oe[Pe].start.x,Me=oe[Pe].start.y;w.call(this,oe[Pe].deltas,Be,Me),He=!0}G&&E.call(this,G),z&&B.call(this)}},R=function(T){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-W;case"top":return T+z-W;case"hanging":return T+z-2*W;case"middle":return T+z/2-W;default:return T}},U=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(z,W){this.colorStops.push([z,W])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(T,z,W,G,oe,re,le,de,fe){for(var be=O.call(this,W,G,oe,re),_e=0;_e<be.length;_e++){var Te=be[_e];_e===0&&(fe?k.call(this,Te.x1+T,Te.y1+z):D.call(this,Te.x1+T,Te.y1+z)),M.call(this,T,z,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}de?B.call(this):E.call(this,le)},E=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(T,z){this.pdf.internal.out(t(T)+" "+n(z)+" m")},S=function(T){var z;switch(T.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var W,G,oe,re=this.pdf.getTextDimensions(T.text),le=R.call(this,T.y),de=U.call(this,le)-re.h,fe=this.ctx.transform.applyToPoint(new s(T.x,le));if(this.autoPaging){var be=this.ctx.transform.decompose(),_e=new l;_e=(_e=(_e=_e.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var Te=this.ctx.transform.applyToRectangle(new o(T.x,le,re.w,re.h)),Re=_e.applyToRectangle(new o(T.x,de,re.w,re.h)),Q=b.call(this,Re),je=[],He=0;He<Q.length;He+=1)je.indexOf(Q[He])===-1&&je.push(Q[He]);N(je);for(var Pe=je[0],he=je[je.length-1],Le=Pe;Le<he+1;Le++){this.pdf.setPage(Le);var Ee=Le===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[2],Oe=Me-this.margin[0],rt=this.pdf.internal.pageSize.width-this.margin[1],Qe=rt-this.margin[3],At=Le===1?0:Be+(Le-2)*Oe;if(this.ctx.clip_path.length!==0){var it=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(W,this.posX+this.margin[3],-1*At+Ee),F.call(this,"fill",!0),this.path=it}var qe=I([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-At+Ee+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(G=this.pdf.internal.getFontSize(),this.pdf.setFontSize(G*T.scale),oe=this.lineWidth,this.lineWidth=oe*T.scale);var Ve=this.autoPaging!=="text";if(Ve||qe.y+qe.h<=Me){if(Ve||qe.y>=Ee&&qe.x<=rt){var We=Ve?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||rt-qe.x)[0],Dt=I([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-At+Ee+this.ctx.prevPageLastElemOffset)[0],yt=Ve&&(Le>Pe||Le<he)&&v.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,Oe,null).clip().discardPath()),this.pdf.text(We,Dt.x,Dt.y,{angle:T.angle,align:z,renderingMode:T.renderingMode}),yt&&this.pdf.restoreGraphicsState()}}else qe.y<Me&&(this.ctx.prevPageLastElemOffset+=Me-qe.y);T.scale>=.01&&(this.pdf.setFontSize(G),this.lineWidth=oe)}}else T.scale>=.01&&(G=this.pdf.internal.getFontSize(),this.pdf.setFontSize(G*T.scale),oe=this.lineWidth,this.lineWidth=oe*T.scale),this.pdf.text(T.text,fe.x+this.posX,fe.y+this.posY,{angle:T.angle,align:z,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(G),this.lineWidth=oe)},D=function(T,z,W,G){W=W||0,G=G||0,this.pdf.internal.out(t(T+W)+" "+n(z+G)+" l")},w=function(T,z,W){return this.pdf.lines(T,z,W,null,null)},M=function(T,z,W,G,oe,re,le,de){this.pdf.internal.out([e(i(W+T)),e(a(G+z)),e(i(oe+T)),e(a(re+z)),e(i(le+T)),e(a(de+z)),"c"].join(" "))},O=function(T,z,W,G){for(var oe=2*Math.PI,re=Math.PI/2;z>W;)z-=oe;var le=Math.abs(W-z);le<oe&&G&&(le=oe-le);for(var de=[],fe=G?-1:1,be=z;le>1e-5;){var _e=be+fe*Math.min(le,re);de.push(L.call(this,T,be,_e)),le-=Math.abs(_e-be),be=_e}return de},L=function(T,z,W){var G=(W-z)/2,oe=T*Math.cos(G),re=T*Math.sin(G),le=oe,de=-re,fe=le*le+de*de,be=fe+le*oe+de*re,_e=4/3*(Math.sqrt(2*fe*be)-be)/(le*re-de*oe),Te=le-_e*de,Re=de+_e*le,Q=Te,je=-Re,He=G+z,Pe=Math.cos(He),he=Math.sin(He);return{x1:T*Math.cos(z),y1:T*Math.sin(z),x2:Te*Pe-Re*he,y2:Te*he+Re*Pe,x3:Q*Pe-je*he,y3:Q*he+je*Pe,x4:T*Math.cos(W),y4:T*Math.sin(W)}},X=function(T){return 180*T/Math.PI},H=function(T,z,W,G,oe,re){var le=T+.5*(W-T),de=z+.5*(G-z),fe=oe+.5*(W-oe),be=re+.5*(G-re),_e=Math.min(T,oe,le,fe),Te=Math.max(T,oe,le,fe),Re=Math.min(z,re,de,be),Q=Math.max(z,re,de,be);return new o(_e,Re,Te-_e,Q-Re)},ee=function(T,z,W,G,oe,re,le,de){var fe,be,_e,Te,Re,Q,je,He,Pe,he,Le,Ee,Be,Me,Oe=W-T,rt=G-z,Qe=oe-W,At=re-G,it=le-oe,qe=de-re;for(be=0;be<41;be++)Pe=(je=(_e=T+(fe=be/40)*Oe)+fe*((Re=W+fe*Qe)-_e))+fe*(Re+fe*(oe+fe*it-Re)-je),he=(He=(Te=z+fe*rt)+fe*((Q=G+fe*At)-Te))+fe*(Q+fe*(re+fe*qe-Q)-He),be==0?(Le=Pe,Ee=he,Be=Pe,Me=he):(Le=Math.min(Le,Pe),Ee=Math.min(Ee,he),Be=Math.max(Be,Pe),Me=Math.max(Me,he));return new o(Math.round(Le),Math.round(Ee),Math.round(Be-Le),Math.round(Me-Ee))},K=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,z,W=(T=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:z}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(nt.API),function(r){var e=function(s){var o,l,c,d,u,p,h,m,v,b;for(l=[],c=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>c;c+=4)(u=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(p=(u=((u=((u=((u=(u-(b=u%85))/85)-(v=u%85))/85)-(m=u%85))/85)-(h=u%85))/85)%85,l.push(p+33,h+33,m+33,v+33,b+33)):l.push(122);return function(y,I){for(var N=I;N>0;N--)y.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},t=function(s){var o,l,c,d,u,p=String,h="length",m=255,v="charCodeAt",b="slice",y="replace";for(s[b](-2),s=s[b](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),c=[],d=0,u=(s+=o="uuuuu"[b](s[h]%5||5))[h];u>d;d+=5)l=52200625*(s[v](d)-33)+614125*(s[v](d+1)-33)+7225*(s[v](d+2)-33)+85*(s[v](d+3)-33)+(s[v](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(I,N){for(var _=N;_>0;_--)I.pop()}(c,o[h]),p.fromCharCode.apply(p,c)},n=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=af(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};r.processDataByFilters=function(s,o){var l=0,c=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(nt.API),function(r){r.loadFile=function(e,t,n){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,c,d){var u=new XMLHttpRequest,p=0,h=function(m){var v=m.length,b=[],y=String.fromCharCode;for(p=0;p<v;p+=1)b.push(y(255&m.charCodeAt(p)));return b.join("")};if(u.open("GET",l,!c),u.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(u.onload=function(){u.status===200?d(h(this.responseText)):d(void 0)}),u.send(null),c&&u.status===200)return h(u.responseText)}(i,a,s)}catch{}return o}(e,t,n)},r.loadImageFile=r.loadFile}(nt.API),function(r){function e(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):pd(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):pd(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Yt(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},a=function o(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),u=l.firstChild;u;u=u.nextSibling)c!==!0&&u.nodeType===1&&u.nodeName==="SCRIPT"||d.appendChild(o(u,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return(d=d.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],v=m.src.find(function(b){return b.format==="truetype"});v&&c.addFont(v.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,d),p}).then(d,u).then(function(p){return c.updateProgress(1),p})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=c.call(u,o,l);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,nt.getPageSize=function(o,l,c){if(Yt(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,p=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var m,v=0,b=0;if(h.hasOwnProperty(p))v=h[p][1]/u,b=h[p][0]/u;else try{v=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",b>v&&(m=b,b=v,v=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>b&&(m=b,b=v,v=m)}return{width:b,height:v,unit:l,k:u,orientation:o}},r.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Od):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(nt.API),nt.API.addJS=function(r){return c1=r,this.internal.events.subscribe("postPutResources",function(){ql=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ql+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),l1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+c1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ql!==void 0&&l1!==void 0&&this.internal.out("/Names <</JavaScript "+ql+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=n.exec(s);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(a=0;a<c;a++){var u=t.internal.newObject();d.push(u);var p=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<d.length;a++)t.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,a){var s={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var s=n.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(nt.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,a,s,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,l=function(u){for(var p,h=256*u.charCodeAt(4)+u.charCodeAt(5),m=u.length,v={width:0,height:0,numcomponents:1},b=4;b<m;b+=2){if(b+=h,e.indexOf(u.charCodeAt(b+1))!==-1){p=256*u.charCodeAt(b+5)+u.charCodeAt(b+6),v={width:256*u.charCodeAt(b+7)+u.charCodeAt(b+8),height:p,numcomponents:u.charCodeAt(b+9)};break}h=256*u.charCodeAt(b+2)+u.charCodeAt(b+3)}return v}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:i}}return d}}(nt.API),nt.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,a=I3(r,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,c=a.palette,d=a.depth;i=c&&l===1?function(j){for(var E=j.width,B=j.height,k=j.data,S=j.palette,D=j.depth,w=!1,M=[],O=[],L=void 0,X=!1,H=0,ee=0;ee<S.length;ee++){var K=h0(S[ee],4),T=K[0],z=K[1],W=K[2],G=K[3];M.push(T,z,W),G!=null&&(G===0?(H++,O.length<1&&O.push(ee)):G<255&&(X=!0))}if(X||H>1){w=!0,O=void 0;var oe=E*B;L=new Uint8Array(oe);for(var re=new DataView(k.buffer),le=0;le<oe;le++){var de=Rd(re,le,D),fe=h0(S[de],4)[3];L[le]=fe}}else H===0&&(O=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:w?8:void 0,colorBytes:k,alphaBytes:L,needSMask:w,palette:M,mask:O}}(a):l===2||l===4?function(j){for(var E=j.data,B=j.width,k=j.height,S=j.channels,D=j.depth,w=S===2?"DeviceGray":"DeviceRGB",M=S-1,O=B*k,L=M,X=O*L,H=1*O,ee=Math.ceil(X*D/8),K=Math.ceil(H*D/8),T=new Uint8Array(ee),z=new Uint8Array(K),W=new DataView(E.buffer),G=new DataView(T.buffer),oe=new DataView(z.buffer),re=!1,le=0;le<O;le++){for(var de=le*S,fe=0;fe<L;fe++)v1(G,Rd(W,de+fe,D),le*L+fe,D);var be=Rd(W,de+L,D);be<(1<<D)-1&&(re=!0),v1(oe,be,1*le,D)}return{colorSpace:w,colorsPerPixel:M,sMaskBitsPerComponent:re?D:void 0,colorBytes:T,alphaBytes:z,needSMask:re}}(a):function(j){var E=j.data,B=j.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:B,colorsPerPixel:B==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(k){for(var S=k.length,D=new Uint8Array(2*S),w=new DataView(D.buffer,D.byteOffset,D.byteLength),M=0;M<S;M++)w.setUint16(2*M,k[M],!1);return D}(E):E,needSMask:!1}}(a);var u,p,h,m=i,v=m.colorSpace,b=m.colorsPerPixel,y=m.sMaskBitsPerComponent,I=m.colorBytes,N=m.alphaBytes,_=m.needSMask,F=m.palette,R=m.mask,U=null;return n!==nt.API.image_compression.NONE&&typeof af=="function"?(U=function(j){var E;switch(j){case nt.API.image_compression.FAST:E=11;break;case nt.API.image_compression.MEDIUM:E=13;break;case nt.API.image_compression.SLOW:E=14;break;default:E=12}return E}(n),u=this.decode.FLATE_DECODE,p="/Predictor ".concat(U," /Colors ").concat(b," /BitsPerComponent ").concat(d," /Columns ").concat(s),r=h1(I,Math.ceil(s*b*d/8),b,d,n),_&&(h=h1(N,Math.ceil(s*y/8),1,y,n))):(u=void 0,p=void 0,r=I,_&&(h=N)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:t,data:r,index:e,filter:u,decodeParameters:p,transparency:R,palette:F,sMask:h,predictor:U,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:v}}},function(r){r.processGIF89A=function(e,t,n,i){var a=new $3(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},d=new Ld(100).encode(c,100);return r.processJPEG.call(this,d,t,n,i)},r.processGIF87A=r.processGIF89A}(nt.API),di.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},di.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){er.log("bit decode error:"+t)}},di.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}t!==0&&(this.pos+=4-t)}},di.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*i*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},di.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},di.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,c=a>>15?255:0,d=n*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=c}this.pos+=r}},di.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,c=(s>>11)/e*255|0,d=i*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=r}},di.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},di.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=s}},di.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,i){var a=new di(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new Ld(100).encode(l,100);return r.processJPEG.call(this,c,t,n,i)}}(nt.API),b1.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,i){var a=new b1(e),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new Ld(100).encode(l,100);return r.processJPEG.call(this,c,t,n,i)}}(nt.API),nt.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var d=n[c],u=n[c+1],p=n[c+2],h=n[c+3];a[o++]=d,a[o++]=u,a[o++]=p,s[l++]=h}var m=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:m,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},nt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Oo=nt.API,Vl=Oo.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=e.doKerning!==!1,p=0,h=r.length,m=0,v=o[0]||l,b=[];for(t=0;t<h;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+s*(1e3/a)||0)/1e3):(p=u&&Yt(c[n])==="object"&&!isNaN(parseInt(c[n][m],10))?c[n][m]/d:0,b.push((o[n]||v)/l+p)),m=n;return b},d1=Oo.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Oo.processArabic&&(r=Oo.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:Vl.apply(this,arguments).reduce(function(a,s){return a+s},0)},f1=function(r,e,t,n){for(var i=[],a=0,s=r.length,o=0;a!==s&&o+e[a]<t;)o+=e[a],a++;i.push(r.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>n&&(i.push(r.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&i.push(r.slice(l,a)),i},u1=function(r,e,t){t||(t={});var n,i,a,s,o,l,c,d=[],u=[d],p=t.textIndent||0,h=0,m=0,v=r.split(" "),b=Vl.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?v[0].length+2:t.lineIndent||0){var y=Array(l).join(" "),I=[];v.map(function(_){(_=_.split(/\s*\n/)).length>1?I=I.concat(_.map(function(F,R){return(R&&F.length?`
`:"")+F})):I.push(_[0])}),v=I,l=d1.apply(this,[y,t])}for(a=0,s=v.length;a<s;a++){var N=0;if(n=v[a],l&&n[0]==`
`&&(n=n.substr(1),N=1),p+h+(m=(i=Vl.apply(this,[n,t])).reduce(function(_,F){return _+F},0))>e||N){if(m>e){for(o=f1.apply(this,[n,i,e-(p+h),e]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);m=i.slice(n.length-(d[0]?d[0].length:0)).reduce(function(_,F){return _+F},0)}else d=[n];u.push(d),p=m+l,h=b}else d.push(n),p+=h+m,h=b}return c=l?function(_,F){return(F?y:"")+_.join(" ")}:function(_){return _.join(" ")},u.map(c)},Oo.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var u=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return u.metadata[p]?{widths:u.metadata[p].widths||{0:1},kerning:u.metadata[p].kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(u1.apply(this,[n[o],s,a]));return c},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[t[a]]=e[a],i[e[a]]=t[a];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=r.__fontmetrics__.compress=function(p){var h,m,v,b,y=["{"];for(var I in p){if(h=p[I],isNaN(parseInt(I,10))?m="'"+I+"'":(I=parseInt(I,10),m=(m=s(I).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof h=="number")h<0?(v=s(h).slice(3),b="-"):(v=s(h).slice(2),b=""),v=b+v.slice(0,-1)+i[v.slice(-1)];else{if(Yt(h)!=="object")throw new Error("Don't know what to do with value type "+Yt(h)+".");v=o(h)}y.push(m+v)}return y.push("}"),y.join("")},l=r.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,v,b,y={},I=1,N=y,_=[],F="",R="",U=p.length-1,j=1;j<U;j+=1)(b=p[j])=="'"?h?(v=h.join(""),h=void 0):h=[]:h?h.push(b):b=="{"?(_.push([N,v]),N={},v=void 0):b=="}"?((m=_.pop())[0][m[1]]=N,v=void 0,N=m[0]):b=="-"?I=-1:v===void 0?n.hasOwnProperty(b)?(F+=n[b],v=parseInt(F,16)*I,I=1,F=""):F+=b:n.hasOwnProperty(b)?(R+=n[b],N[v]=parseInt(R,16)*I,I=1,v=void 0,R=""):R+=b;return y},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(p){var h=p.font,m=u.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var v=d.Unicode[h.postScriptName];v&&(h.metadata.Unicode.encoding=v,h.encoding=v.codePages[0])}])}(nt.API),function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=t.charCodeAt(a);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Zl(o)),s.metadata=r.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,n)}}])}(nt),nt.API.addSvgAsImage=function(r,e,t,n,i,a,s,o){if(isNaN(e)||isNaN(t))throw er.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw er.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return(pt.canvg?Promise.resolve(pt.canvg):pd(()=>import("./index.es-DAn9WBqe.js"),__vite__mapDeps([0,1,2,3]))).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(c,r,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){u.addImage(l.toDataURL("image/jpeg",1),e,t,n,i,s,o)})},nt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},nt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,d=0,u=0;function p(m,v){var b,y=!1;for(b=0;b<m.length;b+=1)m[b]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var h=o.length;for(u=0;u<h;u+=1)t[o[u]].value=t[o[u]].defaultValue,t[o[u]].explicitSet=!1}if(Yt(r)==="object"){for(i in r)if(a=r[i],p(o,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&p(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(c=0;c<a.length;c+=1)if(n=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(d=0;d<a[c].length;d+=1)typeof a[c][d]!="number"&&(n=!1);n===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,v=[];for(m in t)t[m].explicitSet===!0&&(t[m].type==="name"?v.push("/"+m+" /"+t[m].value):v.push("/"+m+" "+t[m].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=a.length+s.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(nt.API),function(r){var e=r.API,t=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],u=0,p=a.length;u<p;++u){if(o=s.metadata.characterToGlyph(a.charCodeAt(u)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(u),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},n=function(a){var s,o,l,c,d,u,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],u=0,p=(o=Object.keys(a).sort(function(h,m){return h-m})).length;u<p;u++)s=o[u],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(c=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,c=s.newObject,d=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var u=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",m=0;m<p.length;m++)h+=String.fromCharCode(p[m]);var v=c();d({data:h,addLength1:!0,objectId:v}),l("endobj");var b=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ro(o.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var I=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ro(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+r.API.PDFObject.convert(u)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Ro(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+I+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,c=s.newObject,d=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var u=o.metadata.rawData,p="",h=0;h<u.length;h++)p+=String.fromCharCode(u[h]);var m=c();d({data:p,addLength1:!0,objectId:m}),l("endobj");var v=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Ro(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Ro(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,c=a.y,d=a.options||{},u=a.mutex||{},p=u.pdfEscape,h=u.activeFontKey,m=u.fonts,v=h,b="",y=0,I="",N=m[v].encoding;if(m[v].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:u};for(I=o,v=h,Array.isArray(o)&&(I=o[0]),y=0;y<I.length;y+=1)m[v].metadata.hasOwnProperty("cmap")&&(s=m[v].metadata.cmap.unicode.codeMap[I[y].charCodeAt(0)]),s||I[y].charCodeAt(0)<256&&m[v].metadata.hasOwnProperty("Unicode")?b+=I[y]:b+="";var _="";return parseInt(v.slice(1))<14||N==="WinAnsiEncoding"?_=p(b,v).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(_=t(b,m[v])),u.isHex=!0,{text:_,x:l,y:c,options:d,mutex:u}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?o.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):o.push(i(Object.assign({},l,{text:s[c]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}(nt),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(nt.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,a,s,o,l,c,d,u=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","Â«","Â»","Â«","â€¹","â€º","â€¹","â…","â†","â…","â½","â¾","â½","â‚","â‚Ž","â‚","â‰¤","â‰¥","â‰¤","âŒ©","âŒª","âŒ©","ï¹™","ï¹š","ï¹™","ï¹›","ï¹œ","ï¹›","ï¹","ï¹ž","ï¹","ï¹¤","ï¹¥","ï¹¤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,N=0;this.__bidiEngine__={};var _=function(k){var S=k.charCodeAt(),D=S>>8,w=v[D];return w!==void 0?u[256*w+(255&S)]:D===252||D===253?"AL":y.test(D)?"L":D===8?"R":"N"},F=function(k){for(var S,D=0;D<k.length;D++){if((S=_(k.charAt(D)))==="L")return!1;if(S==="R")return!0}return!1},R=function(k,S,D,w){var M,O,L,X,H=S[w];switch(H){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"N":case"AN":break;case"EN":I&&(H="AN");break;case"AL":I=!0,H="R";break;case"WS":case"BN":H="N";break;case"CS":w<1||w+1>=S.length||(M=D[w-1])!=="EN"&&M!=="AN"||(O=S[w+1])!=="EN"&&O!=="AN"?H="N":I&&(O="AN"),H=O===M?O:"N";break;case"ES":H=(M=w>0?D[w-1]:"B")==="EN"&&w+1<S.length&&S[w+1]==="EN"?"EN":"N";break;case"ET":if(w>0&&D[w-1]==="EN"){H="EN";break}if(I){H="N";break}for(L=w+1,X=S.length;L<X&&S[L]==="ET";)L++;H=L<X&&S[L]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(X=S.length,L=w+1;L<X&&S[L]==="NSM";)L++;if(L<X){var ee=k[w],K=ee>=1425&&ee<=2303||ee===64286;if(M=S[L],K&&(M==="R"||M==="AL")){H="R";break}}}H=w<1||(M=S[w-1])==="B"?"N":D[w-1];break;case"B":I=!1,i=!0,H=N;break;case"S":a=!0,H="N"}return H},U=function(k,S,D){var w=k.split("");return D&&j(w,D,{hiLevel:N}),w.reverse(),S&&S.reverse(),w.join("")},j=function(k,S,D){var w,M,O,L,X,H=-1,ee=k.length,K=0,T=[],z=N?h:p,W=[];for(I=!1,i=!1,a=!1,M=0;M<ee;M++)W[M]=_(k[M]);for(O=0;O<ee;O++){if(X=K,T[O]=R(k,W,T,O),w=240&(K=z[X][m[T[O]]]),K&=15,S[O]=L=z[K][5],w>0)if(w===16){for(M=H;M<O;M++)S[M]=1;H=-1}else H=-1;if(z[K][6])H===-1&&(H=O);else if(H>-1){for(M=H;M<O;M++)S[M]=L;H=-1}W[O]==="B"&&(S[O]=0),D.hiLevel|=L}a&&function(G,oe,re){for(var le=0;le<re;le++)if(G[le]==="S"){oe[le]=N;for(var de=le-1;de>=0&&G[de]==="WS";de--)oe[de]=N}}(W,S,ee)},E=function(k,S,D,w,M){if(!(M.hiLevel<k)){if(k===1&&N===1&&!i)return S.reverse(),void(D&&D.reverse());for(var O,L,X,H,ee=S.length,K=0;K<ee;){if(w[K]>=k){for(X=K+1;X<ee&&w[X]>=k;)X++;for(H=K,L=X-1;H<L;H++,L--)O=S[H],S[H]=S[L],S[L]=O,D&&(O=D[H],D[H]=D[L],D[L]=O);K=X}K++}}},B=function(k,S,D){var w=k.split(""),M={hiLevel:N};return D||(D=[]),j(w,D,M),function(O,L,X){if(X.hiLevel!==0&&d)for(var H,ee=0;ee<O.length;ee++)L[ee]===1&&(H=b.indexOf(O[ee]))>=0&&(O[ee]=b[H+1])}(w,D,M),E(2,w,S,D,M),E(1,w,S,D,M),w.join("")};return this.__bidiEngine__.doBidiReorder=function(k,S,D){if(function(M,O){if(O)for(var L=0;L<M.length;L++)O[L]=L;o===void 0&&(o=F(M)),c===void 0&&(c=F(M))}(k,S),s||!l||c)if(s&&l&&o^c)N=o?1:0,k=U(k,S,D);else if(!s&&l&&c)N=o?1:0,k=B(k,S,D),k=U(k,S);else if(!s||o||l||c){if(s&&!l&&o^c)k=U(k,S),o?(N=0,k=B(k,S,D)):(N=1,k=B(k,S,D),k=U(k,S));else if(s&&o&&!l&&c)N=1,k=B(k,S,D),k=U(k,S);else if(!s&&!l&&o^c){var w=d;o?(N=1,k=B(k,S,D),N=0,d=!1,k=B(k,S,D),d=w):(N=0,k=B(k,S,D),k=U(k,S),N=1,d=!1,k=B(k,S,D),d=w,k=U(k,S))}}else N=0,k=B(k,S,D);else N=o?1:0,k=B(k,S,D);return k},this.__bidiEngine__.setOptions=function(k){k&&(s=k.isInputVisual,l=k.isOutputVisual,o=k.isInputRtl,c=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([t.doBidiReorder(i[o])]);n.text=s}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(nt),nt.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ra(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new lw(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new X3(this.contents),this.head=new K3(this),this.name=new tw(this),this.cmap=new up(this),this.toUnicode={},this.hhea=new Z3(this),this.maxp=new rw(this),this.hmtx=new nw(this),this.post=new J3(this),this.os2=new Q3(this),this.loca=new sw(this),this.glyf=new iw(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,c;for(c=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return s*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var bi,Ra=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,a,s,o,l;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*a+65536*s+256*o+l},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)t=e[n],a.push(this.writeByte(t));return a},r}(),X3=function(){var r;function e(t){var n,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,a,s,o,l,c,d,u,p,h,m,v;for(v in h=Object.keys(t).length,l=Math.log(2),u=16*Math.floor(Math.log(h)/l),s=Math.floor(u/l),d=16*h-u,(i=new Ra).writeInt(this.scalarType),i.writeShort(h),i.writeShort(u),i.writeShort(s),i.writeShort(d),a=16*h,c=i.pos+a,o=null,m=[],t)for(p=t[v],i.writeString(v),i.writeInt(r(p)),i.writeInt(c),i.writeInt(p.length),m=m.concat(p),v==="head"&&(o=c),c+=p.length;c%4;)m.push(0),c++;return i.write(m),n=2981146554-r(i.data),i.pos=o+8,i.writeUInt32(n),i.data},r=function(t){var n,i,a,s;for(t=hp.call(t);t.length%4;)t.push(0);for(a=new Ra(t),i=0,n=0,s=t.length;n<s;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),Y3={}.hasOwnProperty,Pi=function(r,e){for(var t in e)Y3.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};bi=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var K3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Ra).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r}(),w1=function(){function r(e,t){var n,i,a,s,o,l,c,d,u,p,h,m,v,b,y,I,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),p=h/2,e.pos+=6,a=function(){var _,F;for(F=[],l=_=0;0<=p?_<p:_>p;l=0<=p?++_:--_)F.push(e.readUInt16());return F}(),e.pos+=2,v=function(){var _,F;for(F=[],l=_=0;0<=p?_<p:_>p;l=0<=p?++_:--_)F.push(e.readUInt16());return F}(),c=function(){var _,F;for(F=[],l=_=0;0<=p?_<p:_>p;l=0<=p?++_:--_)F.push(e.readUInt16());return F}(),d=function(){var _,F;for(F=[],l=_=0;0<=p?_<p:_>p;l=0<=p?++_:--_)F.push(e.readUInt16());return F}(),i=(this.length-e.pos+this.offset)/2,o=function(){var _,F;for(F=[],l=_=0;0<=i?_<i:_>i;l=0<=i?++_:--_)F.push(e.readUInt16());return F}(),l=y=0,N=a.length;y<N;l=++y)for(b=a[l],n=I=m=v[l];m<=b?I<=b:I>=b;n=m<=b?++I:--I)d[l]===0?s=n+c[l]:(s=o[d[l]/2+(n-m)-(p-l)]||0)!==0&&(s+=c[l]),this.codeMap[n]=65535&s}e.pos=u}return r.encode=function(e,t){var n,i,a,s,o,l,c,d,u,p,h,m,v,b,y,I,N,_,F,R,U,j,E,B,k,S,D,w,M,O,L,X,H,ee,K,T,z,W,G,oe,re,le,de,fe,be,_e;switch(w=new Ra,s=Object.keys(e).sort(function(Te,Re){return Te-Re}),t){case"macroman":for(v=0,b=function(){var Te=[];for(m=0;m<256;++m)Te.push(0);return Te}(),I={0:0},a={},M=0,H=s.length;M<H;M++)I[de=e[i=s[M]]]==null&&(I[de]=++v),a[i]={old:e[i],new:I[e[i]]},b[i]=I[e[i]];return w.writeUInt16(1),w.writeUInt16(0),w.writeUInt32(12),w.writeUInt16(0),w.writeUInt16(262),w.writeUInt16(0),w.write(b),{charMap:a,subtable:w.data,maxGlyphID:v+1};case"unicode":for(S=[],u=[],N=0,I={},n={},y=c=null,O=0,ee=s.length;O<ee;O++)I[F=e[i=s[O]]]==null&&(I[F]=++N),n[i]={old:F,new:I[F]},o=I[F]-i,y!=null&&o===c||(y&&u.push(y),S.push(i),c=o),y=i;for(y&&u.push(y),u.push(65535),S.push(65535),B=2*(E=S.length),j=2*Math.pow(Math.log(E)/Math.LN2,2),p=Math.log(j/2)/Math.LN2,U=2*E-j,l=[],R=[],h=[],m=L=0,K=S.length;L<K;m=++L){if(k=S[m],d=u[m],k===65535){l.push(0),R.push(0);break}if(k-(D=n[k].new)>=32768)for(l.push(0),R.push(2*(h.length+E-m)),i=X=k;k<=d?X<=d:X>=d;i=k<=d?++X:--X)h.push(n[i].new);else l.push(D-k),R.push(0)}for(w.writeUInt16(3),w.writeUInt16(1),w.writeUInt32(12),w.writeUInt16(4),w.writeUInt16(16+8*E+2*h.length),w.writeUInt16(0),w.writeUInt16(B),w.writeUInt16(j),w.writeUInt16(p),w.writeUInt16(U),re=0,T=u.length;re<T;re++)i=u[re],w.writeUInt16(i);for(w.writeUInt16(0),le=0,z=S.length;le<z;le++)i=S[le],w.writeUInt16(i);for(fe=0,W=l.length;fe<W;fe++)o=l[fe],w.writeUInt16(o);for(be=0,G=R.length;be<G;be++)_=R[be],w.writeUInt16(_);for(_e=0,oe=h.length;_e<oe;_e++)v=h[_e],w.writeUInt16(v);return{charMap:n,subtable:w.data,maxGlyphID:N+1}}},r}(),up=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new w1(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,i;return t==null&&(t="macroman"),n=w1.encode(e,t),(i=new Ra).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r}(),Z3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r}(),Q3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r}(),J3=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var s,o,l;for(l=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)l.push(e.readUInt32());return l}).call(this)}},r}(),ew=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},tw=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,i,a,s,o,l,c,d,u,p;for(e.pos=this.offset,e.readShort(),t=e.readShort(),o=e.readShort(),n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=d=0,u=n.length;d<u;a=++d)i=n[a],e.pos=i.offset,c=e.readString(i.length),s=new ew(c,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},r}(),rw=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r}(),nw=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,i,a,s,o,l;for(e.pos=this.offset,this.metrics=[],t=0,o=this.file.hhea.numberOfMetrics;0<=o?t<o:t>o;t=0<=o?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],t=c=0;0<=i?c<i:c>i;t=0<=i?++c:--c)d.push(e.readInt16());return d}(),this.widths=(function(){var c,d,u,p;for(p=[],c=0,d=(u=this.metrics).length;c<d;c++)a=u[c],p.push(a.advance);return p}).call(this),n=this.widths[this.widths.length-1],l=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)l.push(this.widths.push(n));return l},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r}(),hp=[].slice,iw=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,i,a,s,o,l,c,d,u;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,n=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,s=(o=new Ra(t.read(i))).readShort(),c=o.readShort(),u=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=s===-1?new ow(o,c,u,l,d):new aw(o,s,c,u,l,d),this.cache[e]))},r.prototype.encode=function(e,t,n){var i,a,s,o,l;for(s=[],a=[],o=0,l=t.length;o<l;o++)i=e[t[o]],a.push(s.length),i&&(s=s.concat(i.encode(n)));return a.push(s.length),{table:s,offsets:a}},r}(),aw=function(){function r(e,t,n,i,a,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),ow=function(){function r(e,t,n,i,a){var s,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Ra(hp.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),sw=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pi(r,bi),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(e.readUInt32());return a}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<n.length;++s)if(n[s]=i,a<t.length&&t[a]==s){++a,n[s]=i;var o=this.offsets[s],l=this.offsets[s+1]-o;l>0&&(i+=l)}for(var c=new Array(4*n.length),d=0;d<n.length;++d)c[4*d+3]=255&n[d],c[4*d+2]=(65280&n[d])>>8,c[4*d+1]=(16711680&n[d])>>16,c[4*d]=(4278190080&n[d])>>24;return c},r}(),lw=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,a,s,o,l;for(i={},s=0,o=e.length;s<o;s++)i[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(n=i[a])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in l=this.glyphsFor(t))n=l[a],i[a]=n;return i},r.prototype.encode=function(e,t){var n,i,a,s,o,l,c,d,u,p,h,m,v,b,y;for(i in n=up.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},y=n.charMap)h[(l=y[i]).old]=l.new;for(m in p=n.maxGlyphID,s)m in h||(h[m]=p++);return d=function(I){var N,_;for(N in _={},I)_[I[N]]=N;return _}(h),u=Object.keys(d).sort(function(I,N){return I-N}),v=function(){var I,N,_;for(_=[],I=0,N=u.length;I<N;I++)o=u[I],_.push(d[o]);return _}(),a=this.font.glyf.encode(s,v,h),c=this.font.loca.encode(a.offsets,v),b={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},r}();nt.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,a,s;if(Array.isArray(t))return"["+function(){var o,l,c;for(c=[],o=0,l=t.length;o<l;o++)n=t[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)s=t[i],a.push("/"+i+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+t},e}();function pp(r,e,t,n,i){n=n||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():a,c=o*l,d=/\r\n|\r|\n/g,u="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(u=typeof r=="string"?r.split(d):r,p=u.length||1),t+=o*(2-a),n.valign==="middle"?t-=p/2*c:n.valign==="bottom"&&(t-=p*c),n.halign==="center"||n.halign==="right"){var h=o;if(n.halign==="center"&&(h*=.5),u&&p>=1){for(var m=0;m<u.length;m++)i.text(u[m],e-i.getStringUnitWidth(u[m])*h,t),t+=c;return i}e-=i.getStringUnitWidth(r)*h}return n.halign==="justify"?i.text(r,e,t,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(r,e,t),i}var A1={},Ho=function(){function r(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:A1=e},r.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},r.prototype.applyStyles=function(e,t){var n,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=r.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=r.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=r.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},r.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},r.prototype.rect=function(e,t,n,i,a){return this.jsPDFDocument.rect(e,t,n,i,a)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return A1||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r}(),hf=function(r,e){return hf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},hf(r,e)};function gp(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hf(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mp=function(r){gp(e,r);function e(t){var n=r.call(this)||this;return n._element=t,n}return e}(Array);function cw(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function dw(r){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[r]}function pc(r,e,t){t.applyStyles(e,!0);var n=Array.isArray(r)?r:[r],i=n.map(function(a){return t.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function xp(r,e,t,n){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;r.applyStyles({lineWidth:i,lineColor:a});var s=vp(i,!1);s&&r.rect(t.x,t.y,e.getWidth(r.pageSize().width),n.y-t.y,s)}function vp(r,e){var t=r>0,n=e||e===0;return t&&n?"DF":t?"S":n?"F":null}function Cc(r,e){var t,n,i,a;if(r=r||e,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=e}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(t=r.left)!==null&&t!==void 0?t:e,top:(n=r.top)!==null&&n!==void 0?n:e,right:(i=r.right)!==null&&i!==void 0?i:e,bottom:(a=r.bottom)!==null&&a!==void 0?a:e}):(typeof r!="number"&&(r=e),{top:r,right:r,bottom:r,left:r})}function yp(r,e){var t=Cc(e.settings.margin,0);return r.pageSize().width-(t.left+t.right)}function fw(r,e,t,n,i){var a={},s=1.3333333333333333,o=Pd(e,function(N){return i.getComputedStyle(N).backgroundColor});o!=null&&(a.fillColor=o);var l=Pd(e,function(N){return i.getComputedStyle(N).color});l!=null&&(a.textColor=l);var c=hw(n,t);c&&(a.cellPadding=c);var d="borderTopColor",u=s*t,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var h=(parseFloat(p)||0)/u;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/u,right:(parseFloat(n.borderRightWidth)||0)/u,bottom:(parseFloat(n.borderBottomWidth)||0)/u,left:(parseFloat(n.borderLeftWidth)||0)/u},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var m=Pd(e,function(N){return i.getComputedStyle(N)[d]});m!=null&&(a.lineColor=m);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(a.fontSize=b/s);var y=uw(n);y&&(a.fontStyle=y);var I=(n.fontFamily||"").toLowerCase();return r.indexOf(I)!==-1&&(a.font=I),a}function uw(r){var e="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(e="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(e+="italic"),e}function Pd(r,e){var t=bp(r,e);if(!t)return null;var n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function bp(r,e){var t=e(r);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?r.parentElement==null?null:bp(r.parentElement,e):t}function hw(r,e){var t=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/e),i=(parseInt(r.lineHeight)-parseInt(r.fontSize))/e/2,a=t.map(function(o){return parseInt(o||"0")/n}),s=Cc(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function wp(r,e,t,n,i){var a,s;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=t.document.querySelector(e):o=e;var l=Object.keys(r.getFontList()),c=r.scaleFactor(),d=[],u=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:u,foot:p};for(var h=0;h<o.rows.length;h++){var m=o.rows[h],v=(s=(a=m==null?void 0:m.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),b=pw(l,c,t,m,n,i);b&&(v==="thead"?d.push(b):v==="tfoot"?p.push(b):u.push(b))}return{head:d,body:u,foot:p}}function pw(r,e,t,n,i,a){for(var s=new mp(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=t.getComputedStyle(l);if(i||c.display!=="none"){var d=void 0;a&&(d=fw(r,l,e,c,t)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:gw(l)})}}var u=t.getComputedStyle(n);if(s.length>0&&(i||u.display!=="none"))return s}function gw(r){var e=r.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function mw(r,e,t){for(var n=0,i=[r,e,t];n<i.length;n++){var a=i[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function ia(r,e,t,n,i){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(r),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function xw(r,e){var t=new Ho(r),n=t.getDocumentOptions(),i=t.getGlobalOptions();mw(i,n,e);var a=ia({},i,n,e),s;typeof window<"u"&&(s=window);var o=vw(i,n,e),l=yw(i,n,e),c=bw(t,a),d=Aw(t,a,s);return{id:e.tableId,content:d,hooks:l,styles:o,settings:c}}function vw(r,e,t){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=r[l],d=e[l],u=t[l];n.columnStyles=ia({},c,d,u)}else{var p=[r,e,t],h=p.map(function(m){return m[l]||{}});n[l]=ia({},h[0],h[1],h[2])}},a=0,s=Object.keys(n);a<s.length;a++){var o=s[a];i(o)}return n}function yw(r,e,t){for(var n=[r,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=n;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function bw(r,e){var t,n,i,a,s,o,l,c,d,u,p,h,m=Cc(e.margin,40/r.scaleFactor()),v=(t=ww(r,e.startY))!==null&&t!==void 0?t:m.top,b;e.showFoot===!0?b="everyPage":e.showFoot===!1?b="never":b=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var y;e.showHead===!0?y="everyPage":e.showHead===!1?y="never":y=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var I=(a=e.useCss)!==null&&a!==void 0?a:!1,N=e.theme||(I?"plain":"striped"),_=!!e.horizontalPageBreak,F=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:I,theme:N,startY:v,margin:m,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(u=e.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:_,horizontalPageBreakRepeat:F,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function ww(r,e){var t=r.getLastAutoTable(),n=r.scaleFactor(),i=r.pageNumber(),a=!1;if(t&&t.startPageNumber){var s=t.startPageNumber+t.pageNumber-1;a=s===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(t==null?void 0:t.finalY)!=null?t.finalY+20/n:null}function Aw(r,e,t){var n=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(t){var o=wp(r,e.html,t,s,e.useCss)||{};n=o.head||n,i=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Sw(n,i,a);return{columns:l,head:n,body:i,foot:a}}function Sw(r,e,t){var n=r[0]||e[0]||t[0]||[],i=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var c=void 0;Array.isArray(n)?c=i.length:c=a+(l>0?"_".concat(l):"");var d={dataKey:c};i.push(d)}}),i}var pf=function(){function r(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()}return r}(),_w=function(r){gp(e,r);function e(t,n,i,a,s,o){var l=r.call(this,t,n,o)||this;return l.cell=i,l.row=a,l.column=s,l.section=a.section,l}return e}(pf),Cw=function(){function r(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return r.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(e,t,n,i,a,s){for(var o=0,l=t;o<l.length;o++){var c=l[o],d=new _w(e,this,n,i,a,s),u=c(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],u)return!1}return!0},r.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var a=i[n];a(new pf(e,this,t))}},r.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var a=i[n];a(new pf(e,this,t))}},r.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var n=this.settings.margin;return e-n.left-n.right}},r}(),Ap=function(){function r(e,t,n,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof mp&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=i,this.spansMultiplePages=a}return r.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(n,i){var a;return Math.max(n,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},r.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(n){var i=t.cells[n.index];return i?i.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},r.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(i,a){var s=n.cells[a.index];if(!s)return 0;var o=t.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=l+o;return c>i?c:i},0)},r}(),Sp=function(){function r(e,t,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return r.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},r.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=n*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},r.prototype.padding=function(e){var t=Cc(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},r}(),Iw=function(){function r(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return r.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,i=e.allRows();n<i.length;n++){var a=i[n],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(t=Math.max(t,s.styles.cellWidth))}return t},r}();function Ew(r,e){Nw(r,e);var t=[],n=0;e.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(e);s?a.width=s:(a.width=a.wrappedWidth,t.push(a)),n+=a.width});var i=e.getWidth(r.pageSize().width)-n;i&&(i=gf(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=gf(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/r.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Dw(e),jw(e,r),kw(e)}function Nw(r,e){var t=r.scaleFactor(),n=e.settings.horizontalPageBreak,i=yp(r,e);e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c){var d=e.hooks.didParseCell;e.callCellHooks(r,d,c,a,l,null);var u=c.padding("horizontal");c.contentWidth=pc(c.text,c.styles,r)+u;var p=pc(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,r);if(c.minReadableWidth=p+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var h=10/t;c.minWidth=c.styles.minCellWidth||h,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},u=d.cellWidth||d.minCellWidth;u&&typeof u=="number"&&(l.minWidth=u,l.wrappedWidth=u)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function gf(r,e,t){for(var n=e,i=r.reduce(function(h,m){return h+m.wrappedWidth},0),a=0;a<r.length;a++){var s=r[a],o=s.wrappedWidth/i,l=n*o,c=s.width+l,d=t(s),u=c<d?d:c;e-=u-s.width,s.width=u}if(e=Math.round(e*1e10)/1e10,e){var p=r.filter(function(h){return e<0?h.width>t(h):!0});p.length&&(e=gf(p,e,t))}return e}function kw(r){for(var e={},t=1,n=r.allRows(),i=0;i<n.length;i++)for(var a=n[i],s=0,o=r.columns;s<o.length;s++){var l=o[s],c=e[l.index];if(t>1)t--,delete a.cells[l.index];else if(c)c.cell.height+=a.height,t=c.cell.colSpan,delete a.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var u=n.length-i,p=d.rowSpan>u?u:d.rowSpan;e[l.index]={cell:d,left:p,row:a}}}}}function Dw(r){for(var e=r.allRows(),t=0;t<e.length;t++)for(var n=e[t],i=null,a=0,s=0,o=0;o<r.columns.length;o++){var l=r.columns[o];if(s-=1,s>1&&r.columns[o+1])a+=l.width,delete n.cells[l.index];else if(i){var c=i;delete n.cells[l.index],i=null,c.width=l.width+a}else{var c=n.cells[l.index];if(!c)continue;if(s=c.colSpan,a=0,c.colSpan>1){i=c,a+=l.width;continue}c.width=l.width+a}}}function jw(r,e){for(var t={count:0,height:0},n=0,i=r.allRows();n<i.length;n++){for(var a=i[n],s=0,o=r.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c){e.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,d+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=S1(c.text,d,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=S1(c.text,d,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var u=c.styles.overflow(c.text,d);typeof u=="string"?c.text=[u]:c.text=u}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=c.contentHeight/c.rowSpan;c.rowSpan>1&&t.count*t.height<p*c.rowSpan?t={height:p,count:c.rowSpan}:t&&t.count>0&&t.height>p&&(p=t.height),p>a.height&&(a.height=p)}}t.count--}}function S1(r,e,t,n,i){return r.map(function(a){return Ow(a,e,t,n,i)})}function Ow(r,e,t,n,i){var a=1e4*n.scaleFactor();if(e=Math.ceil(e*a)/a,e>=pc(r,t,n))return r;for(;e<pc(r+i,t,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+i}function Tw(r,e){var t=new Ho(r),n=Rw(e,t.scaleFactor()),i=new Cw(e,n);return Ew(t,i),t.applyStyles(t.userStyles),i}function Rw(r,e){var t=r.content,n=Pw(t.columns);if(t.head.length===0){var i=_1(n,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=_1(n,"foot");i&&t.foot.push(i)}var a=r.settings.theme,s=r.styles;return{columns:n,head:Md("head",t.head,n,s,a,e),body:Md("body",t.body,n,s,a,e),foot:Md("foot",t.foot,n,s,a,e)}}function Md(r,e,t,n,i,a){var s={},o=e.map(function(l,c){for(var d=0,u={},p=0,h=0,m=0,v=t;m<v.length;m++){var b=v[m];if(s[b.index]==null||s[b.index].left===0)if(h===0){var y=void 0;Array.isArray(l)?y=l[b.index-p-d]:y=l[b.dataKey];var I={};typeof y=="object"&&!Array.isArray(y)&&(I=(y==null?void 0:y.styles)||{});var N=Mw(r,b,c,i,n,a,I),_=new Sp(y,N,r);u[b.dataKey]=_,u[b.index]=_,h=_.colSpan-1,s[b.index]={left:_.rowSpan-1,times:h}}else h--,p++;else s[b.index].left--,h=s[b.index].times,d++}return new Ap(l,c,r,u)});return o}function _1(r,e){var t={};return r.forEach(function(n){if(n.raw!=null){var i=Lw(e,n.raw);i!=null&&(t[n.dataKey]=i)}}),Object.keys(t).length>0?t:null}function Lw(r,e){if(r==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(r==="foot"&&typeof e=="object")return e.footer;return null}function Pw(r){return r.map(function(e,t){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:t:i=t,new Iw(i,e,t)})}function Mw(r,e,t,n,i,a,s){var o=dw(n),l;r==="head"?l=i.headStyles:r==="body"?l=i.bodyStyles:r==="foot"&&(l=i.footStyles);var c=ia({},o.table,o[r],i.styles,l),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},u=r==="body"?d:{},p=r==="body"&&t%2===0?ia({},o.alternateRow,i.alternateRowStyles):{},h=cw(a),m=ia({},h,c,p,u);return ia(m,s)}function Bw(r,e,t){var n;t===void 0&&(t={});var i=yp(r,e),a=new Map,s=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var h=e.columns.find(function(m){return m.dataKey===p||m.index===p});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(e.columns[h.index]),i-=h.wrappedWidth)});for(var c=!0,d=(n=t==null?void 0:t.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(a.has(d)){d++;continue}var u=e.columns[d].wrappedWidth;if(c||i>=u)c=!1,s.push(d),o.push(e.columns[d]),i-=u;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function Fw(r,e){for(var t=[],n=0;n<e.columns.length;n++){var i=Bw(r,e,{start:n});i.columns.length&&(t.push(i),n=i.lastIndex)}return t}function zw(r,e){var t=e.settings,n=t.startY,i=t.margin,a={x:i.left,y:n},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+s;if(t.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(p,h){return p+h.height},0);o+=c}var d=new Ho(r);(t.pageBreak==="always"||t.startY!=null&&o>d.pageSize().height)&&(Cp(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var u=ia({},a);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?Uw(d,e,u,a):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(p){return oa(d,e,p,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,h){var m=h===e.body.length-1;gc(d,e,p,m,u,a,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(p){return oa(d,e,p,a,e.columns)})),xp(d,e,u,a),e.callEndPageHooks(d,a),e.finalY=a.y,r.lastAutoTable=e,d.applyStyles(d.userStyles)}function Uw(r,e,t,n){var i=Fw(r,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,d){r.applyStyles(r.userStyles),d>0?Bs(r,e,t,n,c.columns,!0):C1(r,e,n,c.columns),Ww(r,e,t,n,c.columns),Bd(r,e,n,c.columns)});else for(var s=-1,o=i[0],l=function(){var c=s;if(o){r.applyStyles(r.userStyles);var d=o.columns;s>=0?Bs(r,e,t,n,d,!0):C1(r,e,n,d),c=I1(r,e,s+1,n,d),Bd(r,e,n,d)}var u=c-s;i.slice(1).forEach(function(p){r.applyStyles(r.userStyles),Bs(r,e,t,n,p.columns,!0),I1(r,e,s+1,n,p.columns,u),Bd(r,e,n,p.columns)}),s=c};s<e.body.length-1;)l()}function C1(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return oa(r,e,a,t,n)})}function Ww(r,e,t,n,i){r.applyStyles(r.userStyles),e.body.forEach(function(a,s){var o=s===e.body.length-1;gc(r,e,a,o,t,n,i)})}function I1(r,e,t,n,i,a){r.applyStyles(r.userStyles),a=a??e.body.length;var s=Math.min(t+a,e.body.length),o=-1;return e.body.slice(t,s).forEach(function(l,c){var d=t+c===e.body.length-1,u=_p(r,e,d,n);l.canEntireRowFit(u,i)&&(oa(r,e,l,n,i),o=t+c)}),o}function Bd(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return oa(r,e,a,t,n)})}function Hw(r,e,t){var n=t.getLineHeight(r.styles.fontSize),i=r.padding("vertical"),a=Math.floor((e-i)/n);return Math.max(0,a)}function qw(r,e,t,n){var i={};r.spansMultiplePages=!0,r.height=0;for(var a=0,s=0,o=t.columns;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var d=new Sp(c.raw,c.styles,c.section);d=ia(d,c),d.text=[];var u=Hw(c,e,n);c.text.length>u&&(d.text=c.text.splice(u,c.text.length));var p=n.scaleFactor(),h=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(p,h),c.contentHeight>=e&&(c.contentHeight=e,d.styles.minCellHeight-=e),c.contentHeight>r.height&&(r.height=c.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>a&&(a=d.contentHeight),i[l.index]=d}}var m=new Ap(r.raw,-1,r.section,i,!0);m.height=a;for(var v=0,b=t.columns;v<b.length;v++){var l=b[v],d=m.cells[l.index];d&&(d.height=m.height);var c=r.cells[l.index];c&&(c.height=r.height)}return m}function Vw(r,e,t,n){var i=r.pageSize().height,a=n.settings.margin,s=a.top+a.bottom,o=i-s;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,r),c=l<t;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var d=e.hasRowSpan(n.columns),u=e.getMaxCellHeight(n.columns)>o;return u?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function gc(r,e,t,n,i,a,s){var o=_p(r,e,n,a);if(t.canEntireRowFit(o,s))oa(r,e,t,a,s);else if(Vw(r,t,o,e)){var l=qw(t,o,e,r);oa(r,e,t,a,s),Bs(r,e,i,a,s),gc(r,e,l,n,i,a,s)}else Bs(r,e,i,a,s),gc(r,e,t,n,i,a,s)}function oa(r,e,t,n,i){n.x=e.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],l=t.cells[o.index];if(!l){n.x+=o.width;continue}r.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(r,e.hooks.willDrawCell,l,t,o,n);if(c===!1){n.x+=o.width;continue}Gw(r,l,n);var d=l.getTextPos();pp(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},r.getDocument()),e.callCellHooks(r,e.hooks.didDrawCell,l,t,o,n),n.x+=o.width}n.y+=t.height}function Gw(r,e,t){var n=e.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=vp(n.lineWidth,n.fillColor);i&&r.rect(e.x,t.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(e.x,t.y,e.width,e.height,"F"),$w(r,e,t,n.lineWidth))}function $w(r,e,t,n){var i,a,s,o;n.top&&(i=t.x,a=t.y,s=t.x+e.width,o=t.y,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,a,s,o)),n.bottom&&(i=t.x,a=t.y+e.height,s=t.x+e.width,o=t.y+e.height,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,a,s,o)),n.left&&(i=t.x,a=t.y,s=t.x,o=t.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,a,s,o)),n.right&&(i=t.x+e.width,a=t.y,s=t.x+e.width,o=t.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,a,s,o));function l(c,d,u,p,h){r.getDocument().setLineWidth(c),r.getDocument().line(d,u,p,h,"S")}}function _p(r,e,t,n){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),r.pageSize().height-n.y-i}function Bs(r,e,t,n,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),r.applyStyles(r.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return oa(r,e,o,n,i)}),e.callEndPageHooks(r,n);var s=e.settings.margin;xp(r,e,t,n),Cp(r),e.pageNumber++,n.x=s.left,n.y=s.top,t.y=s.top,e.callWillDrawPageHooks(r,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return oa(r,e,o,n,i)}),r.applyStyles(r.userStyles))}function Cp(r){var e=r.pageNumber();r.setPage(e+1);var t=r.pageNumber();return t===e?(r.addPage(),!0):!1}function Xw(r){r.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],i=xw(this,n),a=Tw(this,i);return zw(this,a),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(e,t,n,i){pp(e,t,n,i,this)},r.API.autoTableSetDefaults=function(e){return Ho.setDefaults(e,this),this},r.autoTableSetDefaults=function(e,t){Ho.setDefaults(e,t)},r.API.autoTableHtmlToJson=function(e,t){var n;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Ho(this),a=wp(i,e,window,t,!1),s=a.head,o=a.body,l=((n=s[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var Fd;try{if(typeof window<"u"&&window){var E1=window,N1=E1.jsPDF||((Fd=E1.jspdf)===null||Fd===void 0?void 0:Fd.jsPDF);N1&&Xw(N1)}}catch(r){console.error("Could not apply autoTable plugin",r)}const Yw=({showStatsModal:r,setShowStatsModal:e,loanHistory:t})=>{const n=se.useMemo(()=>{if(!t||t.length===0)return null;const i=w=>w?w.seconds?new Date(w.seconds*1e3):new Date(w):null,a=t.length,s=a,o=0,l=t.flatMap(w=>w.items||[]),c=l.reduce((w,M)=>w+(M.quantity||1),0),d={};l.forEach(w=>{const M=w.name;d[M]=(d[M]||0)+(w.quantity||1)});const u=Object.entries(d).sort(([,w],[,M])=>M-w).slice(0,5).map(([w,M])=>({name:w,count:M})),p={};t.forEach(w=>{const M=w.clientName||"×œ× ×¦×•×™×Ÿ";p[M]=(p[M]||0)+1});const h=Object.entries(p).sort(([,w],[,M])=>M-w).slice(0,5).map(([w,M])=>({name:w,count:M})),m={};t.forEach(w=>{const M=w.volunteerName||"×œ× ×¦×•×™×Ÿ";m[M]=(m[M]||0)+1});const v=Object.entries(m).sort(([,w],[,M])=>M-w).slice(0,5).map(([w,M])=>({name:w,count:M})),b=new Date().getMonth(),y=new Date().getFullYear(),I=t.filter(w=>{const M=i(w.pickupDate);return M?M.getMonth()===b&&M.getFullYear()===y:!1}).length,N=b===0?11:b-1,_=b===0?y-1:y,F=t.filter(w=>{const M=i(w.pickupDate);return M?M.getMonth()===N&&M.getFullYear()===_:!1}).length,R=t.filter(w=>w.pickupDate&&w.returnDate);let U=0;if(R.length>0){const w=R.reduce((M,O)=>{const L=i(O.pickupDate),X=i(O.returnDate);if(!L||!X)return M;const H=Math.ceil((X-L)/(1e3*60*60*24));return M+Math.max(0,H)},0);U=Math.round(w/R.length)}const j=t.filter(w=>w.returnInspection),E=j.reduce((w,M)=>{var O;return(O=M.returnInspection)!=null&&O.itemInspections?w+M.returnInspection.itemInspections.reduce((L,X)=>L+(X.quantityReturned||0),0):w},0),B=j.reduce((w,M)=>{var O;return(O=M.returnInspection)!=null&&O.itemInspections?w+M.returnInspection.itemInspections.filter(L=>L.condition==="damaged").reduce((L,X)=>L+(X.quantityReturned||0),0):w},0),k=j.reduce((w,M)=>{var O;return(O=M.returnInspection)!=null&&O.itemInspections?w+M.returnInspection.itemInspections.filter(L=>L.condition==="lost").reduce((L,X)=>L+Math.max(0,(X.quantityExpected||0)-(X.quantityReturned||0)),0):w},0),S={};t.forEach(w=>{const M=w.eventType||"×œ× ×¦×•×™×Ÿ";S[M]=(S[M]||0)+1});const D=Object.entries(S).sort(([,w],[,M])=>M-w).slice(0,5).map(([w,M])=>({name:w,count:M}));return{totalLoans:a,activeLoans:o,completedLoans:s,totalItemsLoaned:c,totalItemsReturned:E,damagedItems:B,lostItems:k,mostPopularItems:u,topBorrowers:h,topVolunteers:v,topEventTypes:D,thisMonthLoans:I,lastMonthLoans:F,averageDuration:U,loansWithInspection:j.length}},[t]);return r?n?f.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:f.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[f.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2196F3"},children:"ðŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×©××œ×•×ª"}),f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ“ˆ × ×ª×•× ×™× ×›×œ×œ×™×™×"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[f.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1976d2"},children:n.totalLoans}),f.jsx("div",{children:'×¡×”"×› ×”×©××œ×•×ª'})]}),f.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#388e3c"},children:n.completedLoans}),f.jsx("div",{children:"×”×©××œ×•×ª ×©×”×•×©×œ×ž×•"})]}),f.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f57c00"},children:n.totalItemsLoaned}),f.jsx("div",{children:"×¤×¨×™×˜×™× ×”×•×©××œ×•"})]}),f.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:n.totalItemsReturned}),f.jsx("div",{children:"×¤×¨×™×˜×™× ×”×•×—×–×¨×•"})]})]})]}),f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ“… ×”×©×•×•××” ×—×•×“×©×™×ª"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[f.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:n.thisMonthLoans}),f.jsx("div",{children:"×”×©××œ×•×ª ×”×—×•×“×©"})]}),f.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#666"},children:n.lastMonthLoans}),f.jsx("div",{children:"×”×©××œ×•×ª ×”×—×•×“×© ×©×¢×‘×¨"})]})]}),n.lastMonthLoans>0&&f.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.9rem"},children:n.thisMonthLoans>n.lastMonthLoans?f.jsxs("span",{style:{color:"#388e3c"},children:["â¬†ï¸ ×¢×œ×™×™×” ×©×œ ",((n.thisMonthLoans-n.lastMonthLoans)/n.lastMonthLoans*100).toFixed(1),"%"]}):n.thisMonthLoans<n.lastMonthLoans?f.jsxs("span",{style:{color:"#d32f2f"},children:["â¬‡ï¸ ×™×¨×™×“×” ×©×œ ",((n.lastMonthLoans-n.thisMonthLoans)/n.lastMonthLoans*100).toFixed(1),"%"]}):f.jsx("span",{style:{color:"#666"},children:"âž¡ï¸ ×œ×œ× ×©×™× ×•×™"})})]}),f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ“¦ ×¡×˜×˜×™×¡×˜×™×§×•×ª ×¤×¨×™×˜×™×"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[f.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:n.totalItemsLoaned}),f.jsx("div",{children:'×¡×”"×› ×¤×¨×™×˜×™× ×”×•×©××œ×•'})]}),f.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:n.totalItemsReturned}),f.jsx("div",{children:"×¤×¨×™×˜×™× ×”×•×—×–×¨×•"})]}),n.damagedItems>0&&f.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:n.damagedItems}),f.jsx("div",{children:"×¤×¨×™×˜×™× ×¤×’×•×ž×™×"})]}),n.lostItems>0&&f.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:n.lostItems}),f.jsx("div",{children:"×¤×¨×™×˜×™× ××‘×•×“×™×"})]})]}),n.mostPopularItems.length>0&&f.jsxs("div",{children:[f.jsx("h4",{style:{marginBottom:"0.5rem"},children:"ðŸ† ×”×¤×¨×™×˜×™× ×”×¤×•×¤×•×œ×¨×™×™× ×‘×™×•×ª×¨:"}),n.mostPopularItems.map((i,a)=>f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#fff3e0":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[f.jsxs("span",{children:[a+1,". ",i.name]}),f.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," ×¤×¢×ž×™×"]})]},a))]})]}),n.topBorrowers.length>0&&f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ‘¥ ×”×œ×§×•×—×•×ª ×”×¤×¢×™×œ×™× ×‘×™×•×ª×¨"}),n.topBorrowers.map((i,a)=>f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e8f5e8":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[f.jsxs("span",{children:[a+1,". ",i.name]}),f.jsxs("span",{style:{fontWeight:"bold",color:"#388e3c"},children:[i.count," ×”×©××œ×•×ª"]})]},a))]}),n.topVolunteers.length>0&&f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸŒŸ ×”×ž×ª× ×“×‘×•×ª ×”×¤×¢×™×œ×•×ª ×‘×™×•×ª×¨"}),n.topVolunteers.map((i,a)=>f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e3f2fd":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[f.jsxs("span",{children:[a+1,". ",i.name]}),f.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," ×”×©××œ×•×ª"]})]},a))]}),n.topEventTypes.length>0&&f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸŽ‰ ×¡×•×’×™ ×”××™×¨×•×¢×™× ×”×¤×•×¤×•×œ×¨×™×™×"}),n.topEventTypes.map((i,a)=>f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#f0fdf4":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[f.jsxs("span",{children:[a+1,". ",i.name]}),f.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[i.count," ×¤×¢×ž×™×"]})]},a))]}),n.averageDuration>0&&f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"â±ï¸ ×ž×©×š ×”×©××œ×” ×ž×ž×•×¦×¢"}),f.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[n.averageDuration," ×™×ž×™×"]}),f.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["(×ž×‘×•×¡×¡ ×¢×œ ",t.filter(i=>i.pickupDate&&i.returnDate).length," ×”×©××œ×•×ª)"]})]})]}),n.loansWithInspection>0&&f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"ðŸ” ×¡×™×›×•× ×‘×“×™×§×•×ª ×”×—×–×¨×”"}),f.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:n.loansWithInspection}),f.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["×”×©××œ×•×ª ×¢× ×‘×“×™×§×ª ×”×—×–×¨×” ×ž×ª×•×š ",n.totalLoans,' ×¡×”"×›']}),f.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:["(",(n.loansWithInspection/n.totalLoans*100).toFixed(1),"% ×ž×”×©××œ×•×ª × ×‘×“×§×•)"]})]})]}),f.jsx("div",{className:"modal-actions",children:f.jsx("button",{className:"btn btn-blue",onClick:()=>e(!1),children:"âœ”ï¸ ×¡×’×•×¨"})})]})}):f.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:f.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),children:[f.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"ðŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×©××œ×•×ª"}),f.jsx("p",{style:{textAlign:"center"},children:"××™×Ÿ × ×ª×•× ×™× ×–×ž×™× ×™×"}),f.jsx("div",{className:"modal-actions",children:f.jsx("button",{className:"btn btn-gray",onClick:()=>e(!1),children:"×¡×’×•×¨"})})]})}):null},Kw=()=>{var l,c,d,u,p,h;const[r,e]=se.useState(!1),[t,n]=se.useState(null),[i,a]=se.useState(null);se.useEffect(()=>{s()},[]);const s=async()=>{e(!0),a(null);try{console.log("ðŸ‘¤ Manual: Starting manual email check from history page...");const m=await dh();a(m)}catch(m){console.error("âŒ Manual: Error in email check:",m),a({reminders:{sent:0,alreadySent:0,errors:[],skippedToday:0},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:m.message}],message:"×©×’×™××” ×‘×‘×“×™×§×ª ××™×ž×™×™×œ×™×"})}finally{e(!1),n(new Date)}},o=()=>{s()};return f.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[f.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[f.jsx("h1",{style:{margin:0,fontSize:"1.8rem"},children:"ðŸ¤– ×ž×¢×¨×›×ª ×ª×–×›×•×¨×•×ª ×—×›×ž×”"}),f.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"×ª×–×›×•×¨×•×ª ××•×˜×•×ž×˜×™×•×ª ×’×œ×•×‘×œ×™×•×ª â€¢ ××™×©×•×¨×™ ××™×¡×•×£ ×™×“× ×™×™× â€¢ ×¤×¢×™×œ×” ×ª×ž×™×“ ×‘×¨×§×¢"})]}),f.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[f.jsx("h2",{style:{margin:0,color:"#1f2937"},children:"×¡×˜×˜×•×¡ ×”×ž×¢×¨×›×ª"}),f.jsx("button",{onClick:o,disabled:r,style:{background:r?"#9ca3af":"linear-gradient(45deg, #20b2aa, #48d1cc)",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:r?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"},children:r?"ðŸ”„ ×‘×•×“×§...":"ðŸ” ×‘×“×•×§ ×ª×–×›×•×¨×•×ª ×¢×›×©×™×•"})]}),f.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdfa, #ecfeff)",border:"1px solid #5eead4",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[f.jsx("span",{style:{fontSize:"1.5rem"},children:"ðŸŒ"}),f.jsx("h3",{style:{margin:0,color:"#0f766e"},children:"×‘×“×™×§×” ××•×˜×•×ž×˜×™×ª ×’×œ×•×‘×œ×™×ª"})]}),f.jsx("p",{style:{margin:0,color:"#0f766e",fontSize:"0.9rem"},children:"âœ… ×”×ž×¢×¨×›×ª ×¤×•×¢×œ×ª ××•×˜×•×ž×˜×™×ª ×‘×¨×§×¢ ×‘×›×œ ×“×¤×™ ×”××ª×¨ (8:00-20:00, ×¤×¢× ×‘×™×•×)"}),f.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0f766e",fontSize:"0.8rem",fontStyle:"italic"},children:"ðŸ’¡ ××™×Ÿ ×¦×•×¨×š ×œ×‘×§×¨ ×‘×¢×ž×•×“ ×–×” ×›×“×™ ×œ×©×œ×•×— ×ª×–×›×•×¨×•×ª - ×”×Ÿ × ×©×œ×—×•×ª ××•×˜×•×ž×˜×™×ª!"})]}),t&&f.jsxs("div",{style:{background:"#f3f4f6",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#6b7280"},children:[f.jsx("strong",{children:"×‘×“×™×§×” ××—×¨×•× ×” (×™×“× ×™×ª):"})," ",t.toLocaleString("he-IL")]}),i&&f.jsxs("div",{style:{background:i.totalErrors>0?"#fef2f2":i.weekend?"#f0f9ff":"linear-gradient(135deg, #f0fdfa, #ecfeff)",border:`1px solid ${i.totalErrors>0?"#fecaca":i.weekend?"#7dd3fc":"#5eead4"}`,borderRadius:"8px",padding:"1.5rem"},children:[f.jsx("h3",{style:{margin:"0 0 1rem 0",color:i.totalErrors>0?"#dc2626":i.weekend?"#0369a1":"#0f766e"},children:i.message}),i.weekend&&f.jsxs("div",{style:{background:"#e0f2fe",border:"1px solid #0284c7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[f.jsx("p",{style:{margin:0,color:"#0369a1",fontWeight:"bold"},children:"ðŸ•Šï¸ ×”×ž×¢×¨×›×ª ×œ× ×©×•×œ×—×ª ××™×ž×™×™×œ×™× ×‘×™×ž×™ ×©×™×©×™ ×•×©×‘×ª ×ž×˜×¢×ž×™× ×“×ª×™×™×"}),f.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0369a1",fontSize:"0.9rem"},children:"×ª×–×›×•×¨×•×ª ×©××ž×•×¨×•×ª ×œ×”×™×©×œ×— ×”×™×•× ×™×™×©×œ×—×• ×‘×™×•× ×¨××©×•×Ÿ"})]}),!i.weekend&&f.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdfa, #ecfeff)",padding:"1.5rem",borderRadius:"8px",border:"1px solid #5eead4",marginBottom:"1rem"},children:[f.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#0f766e"},children:"â° ×ª×–×›×•×¨×•×ª ×”×—×–×¨×” (2 ×™×ž×™× ×œ×¤× ×™)"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"1rem",textAlign:"center"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#3b82f6"},children:i.totalFound||0}),f.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"× ×ž×¦××•"})]}),f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:((l=i.reminders)==null?void 0:l.sent)||0}),f.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"× ×©×œ×—×•"})]}),f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#6b7280"},children:((c=i.reminders)==null?void 0:c.alreadySent)||0}),f.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"×›×‘×¨ × ×©×œ×—×•"})]}),f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:((d=i.reminders)==null?void 0:d.skippedToday)||0}),f.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"×“×•×œ×’×• ×”×™×•×"})]}),f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:((p=(u=i.reminders)==null?void 0:u.errors)==null?void 0:p.length)||0}),f.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"×©×’×™××•×ª"})]})]})]}),!i.weekend&&i.totalErrors>0&&f.jsxs("div",{style:{background:"white",border:"1px solid #fecaca",borderRadius:"6px",padding:"1rem"},children:[f.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc2626"},children:"×©×’×™××•×ª:"}),(((h=i.reminders)==null?void 0:h.errors)||[]).map((m,v)=>f.jsxs("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",marginBottom:"0.25rem"},children:[f.jsx("strong",{children:"[×ª×–×›×•×¨×ª]"})," ",m.clientName?`${m.clientName} (${m.email})`:"×©×’×™××” ×›×œ×œ×™×ª",": ",m.error]},v))]})]})]}),f.jsxs("div",{style:{background:"#fdf2f8",border:"1px solid #f8b2dd",borderRadius:"12px",padding:"2rem"},children:[f.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#be185d"},children:"ðŸ”§ ××™×š ×”×ž×¢×¨×›×ª ×”×—×›×ž×” ×¢×•×‘×“×ª"}),f.jsxs("ul",{style:{color:"#be185d",paddingRight:"1.5rem"},children:[f.jsxs("li",{children:[f.jsx("strong",{children:"ðŸŒ ×‘×“×™×§×” ××•×˜×•×ž×˜×™×ª ×’×œ×•×‘×œ×™×ª:"})," ×”×ž×¢×¨×›×ª ×¤×•×¢×œ×ª ×‘×¨×§×¢ ×‘×›×œ ×“×¤×™ ×”××ª×¨ (8:00-20:00)"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"ðŸ“§ ×ª×–×›×•×¨×•×ª ×”×—×–×¨×”:"})," × ×©×œ×—×™× ××•×˜×•×ž×˜×™×ª 2 ×™×ž×™× ×œ×¤× ×™ ×ª××¨×™×š ×”×”×—×–×¨×”"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"ðŸ“¦ ××™×©×•×¨×™ ××™×¡×•×£:"})," × ×©×œ×—×™× ×¨×§ ×™×“× ×™×ª ×¢×œ ×™×“×™ ×œ×—×™×¦×” ×¢×œ ×”×›×¤×ª×•×¨ ×‘×ž×¢×¨×›×ª ×”×–×ž× ×•×ª"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"ðŸ”’ ×ž× ×™×¢×ª ×›×¤×™×œ×•×™×•×ª:"})," ×”×ž×¢×¨×›×ª ×ž×•× ×¢×ª ×©×œ×™×—×ª ××™×ž×™×™×œ×™× ×›×¤×•×œ×™×"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"ðŸ•Šï¸ ×ž×˜×¢×ž×™× ×“×ª×™×™×:"})," ×œ× × ×©×œ×—×™× ××™×ž×™×™×œ×™× ×‘×™×ž×™ ×©×™×©×™ ×•×©×‘×ª"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"ðŸ‘¤ ×‘×“×™×§×” ×™×“× ×™×ª:"})," × ×™×ª×Ÿ ×œ×”×¤×¢×™×œ ×‘×“×™×§×” ×™×“× ×™×ª ×‘×›×œ ×¢×ª ×‘××ž×¦×¢×•×ª ×”×›×¤×ª×•×¨ ×œ×ž×¢×œ×”"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"ðŸ“Š ×ž×¢×§×‘ ×ž×œ×:"})," ×›×œ ×”××™×ž×™×™×œ×™× × ×¨×©×ž×™× ×‘×ž×¡×“ ×”× ×ª×•× ×™× ×œ×ž×¢×§×‘"]})]}),f.jsxs("div",{style:{background:"linear-gradient(135deg, #fdf2f8, #fce7f3)",border:"1px solid #f8b2dd",borderRadius:"8px",padding:"1rem",marginTop:"1rem"},children:[f.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#be185d"},children:"ðŸŽ¯ ×”×ž×¢×¨×›×ª ×”×—×“×©×” - ×¤×•×¢×œ×ª ×‘×›×œ ×ž×§×•×!"}),f.jsxs("p",{style:{margin:0,color:"#be185d",fontSize:"0.9rem"},children:["âœ… ",f.jsx("strong",{children:"××•×˜×•×ž×˜×™×ª ×‘××ž×ª"})," - ×¢×•×‘×“×ª ×‘×›×œ ×“×£ ×‘××ª×¨",f.jsx("br",{}),"âœ… ",f.jsx("strong",{children:"××™×Ÿ ×¦×•×¨×š ×œ×‘×§×¨ ×›××Ÿ"})," - ×ª×–×›×•×¨×•×ª × ×©×œ×—×•×ª ×‘×›×œ ×ž×§×¨×”",f.jsx("br",{}),"âœ… ",f.jsx("strong",{children:"×¤×¢× ×‘×™×•× ×‘×œ×‘×“"})," - ×ž×•× ×¢×ª ×›×¤×™×œ×•×™×•×ª",f.jsx("br",{}),"âœ… ",f.jsx("strong",{children:"×¤×•×¢×œ×ª ×‘×¨×§×¢"})," - ×‘×©×§×˜ ×•×‘×“×™×¡×§×¨×˜×™×•×ª"]})]})]})]})},Zw=({item:r,size:e=60})=>{const t=r.imageUrl||(r.images&&r.images.length>0?r.images[0]:null);return t?f.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",overflow:"hidden",flexShrink:0,background:"#f9fafb"},children:f.jsx("img",{src:t,alt:r.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:n=>{n.target.parentNode.innerHTML=`
            <div style="
              width: 100%; 
              height: 100%; 
              display: flex; 
              align-items: center; 
              justify-content: center;
              background: #f9fafb;
            ">
              <svg width="${e*.4}" height="${e*.4}" viewBox="0 0 24 24" fill="#9ca3af">
                <path d="M20 7h-3V6a4 4 0 0 0-4-4h-2a4 4 0 0 0-4 4v1H4a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM9 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1H9V6zm8 15H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v11a1 1 0 0 1-1 1z"/>
              </svg>
            </div>
          `}})}):f.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",flexShrink:0},children:f.jsx(Qn,{size:e*.4,style:{color:"#9ca3af"}})})},Qw=()=>{var S,D;const[r,e]=se.useState([]),[t,n]=se.useState([]),[i,a]=se.useState(null),[s,o]=se.useState(""),[l,c]=se.useState(""),[d,u]=se.useState(""),[p,h]=se.useState(!0),[m,v]=se.useState(!1),[b,y]=se.useState(1),I=12;se.useEffect(()=>{(async()=>{try{h(!0),console.log("ðŸ” ×ž×—×¤×© ××ª ×›×œ ×”×”×–×ž× ×•×ª...");const M=mi(mt(Ue,"orders")),L=(await Bt(M)).docs.map(W=>({id:W.id,...W.data()}));console.log("ðŸ“‹ ×›×œ ×”×”×–×ž× ×•×ª:",L),console.log("ðŸ“Š ×¡×˜×˜×•×¡×™×:",L.map(W=>({id:W.id,client:W.clientName,status:W.status}))),console.log("ðŸ” ×ž×—×¤×© ×”×–×ž× ×•×ª ×¡×’×•×¨×•×ª...");const X=mi(mt(Ue,"orders"),aa("status","==","closed")),ee=(await Bt(X)).docs.map(W=>({id:W.id,...W.data()}));console.log("âœ… ×”×–×ž× ×•×ª ×¡×’×•×¨×•×ª:",ee),e(ee),console.log("ðŸ” ×ž×—×¤×© ×”×–×ž× ×•×ª ×©×”×•×—×–×¨×•...");const K=mi(mt(Ue,"orders"),aa("status","==","returned")),z=(await Bt(K)).docs.map(W=>({id:W.id,...W.data()}));console.log("ðŸ”„ ×”×–×ž× ×•×ª ×©×”×•×—×–×¨×•:",z)}catch(M){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×–×ž× ×•×ª:",M)}finally{h(!1)}})()},[]);const N=w=>w?(w.seconds?new Date(w.seconds*1e3):new Date(w)).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"}):"",_=w=>w?(w.seconds?new Date(w.seconds*1e3):new Date(w)).toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",F=w=>{var K;if(!((K=w.returnInspection)!=null&&K.itemInspections))return{totalItemsExpected:0,totalItemsReturned:0,totalItemsNotReturned:0,totalDamagedItems:0,totalLostItems:0};const M=w.returnInspection.itemInspections,O=M.reduce((T,z)=>T+(z.quantityExpected||0),0),L=M.reduce((T,z)=>T+(z.quantityReturned||0),0),X=M.reduce((T,z)=>T+Math.max(0,(z.quantityExpected||0)-(z.quantityReturned||0)),0),H=M.filter(T=>T.condition==="damaged").reduce((T,z)=>T+(z.quantityReturned||0),0),ee=M.filter(T=>T.condition==="lost").reduce((T,z)=>T+Math.max(0,(z.quantityExpected||0)-(z.quantityReturned||0)),0);return{totalItemsExpected:O,totalItemsReturned:L,totalItemsNotReturned:X,totalDamagedItems:H,totalLostItems:ee}};se.useEffect(()=>{const w=l?new Date(l):null,M=d?new Date(d):null,O=r.filter(L=>{var z,W,G;const X=((z=L.clientName)==null?void 0:z.toLowerCase().includes(s.toLowerCase()))||"",H=((W=L.phone)==null?void 0:W.includes(s))||"",ee=X||H,K=(G=L.pickupDate)!=null&&G.seconds?new Date(L.pickupDate.seconds*1e3):new Date(L.pickupDate),T=(!w||K>=w)&&(!M||K<=M);return ee&&T});n(O),y(1)},[s,l,d,r]);const R=Math.max(1,Math.ceil(t.length/I)),U=Math.min(b,R),j=(U-1)*I,E=j+I,B=t.slice(j,E),k=w=>{var X,H;const M=F(w),O=`
      <!DOCTYPE html>
      <html dir="rtl" lang="he">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>×“×•×— ×”×©××œ×” - ${w.clientName}</title>
          <style>
              body { 
                  font-family: Arial, sans-serif; 
                  direction: rtl; 
                  text-align: right;
                  margin: 20px;
                  line-height: 1.6;
                  padding-bottom: 100px;
              }
              .header { 
                  text-align: center; 
                  margin-bottom: 30px;
                  border-bottom: 2px solid #333;
                  padding-bottom: 15px;
              }
              .header h1 {
                  font-size: 24px;
                  color: #2c5aa0;
                  margin: 0 0 5px 0;
              }
              .header h2 {
                  font-size: 20px;
                  color: #333;
                  margin: 0 0 10px 0;
              }
              .info-grid { 
                  display: grid; 
                  grid-template-columns: 1fr 1fr; 
                  gap: 20px; 
                  margin-bottom: 30px;
              }
              .info-item { 
                  margin-bottom: 10px; 
              }
              .label { 
                  font-weight: bold; 
                  color: #333;
              }
              table { 
                  width: 100%; 
                  border-collapse: collapse; 
                  margin-bottom: 30px;
              }
              th, td { 
                  border: 1px solid #ddd; 
                  padding: 8px; 
                  text-align: center;
              }
              th { 
                  background-color: #f5f5f5; 
                  font-weight: bold;
              }
              .summary { 
                  background-color: #f9f9f9; 
                  padding: 20px; 
                  border-radius: 5px;
                  margin-top: 20px;
              }
              .summary h3 {
                  margin-top: 0;
                  color: #2c5aa0;
              }
              
              .download-btn {
                  position: fixed;
                  bottom: 20px;
                  right: 20px;
                  background: linear-gradient(45deg, #20b2aa, #48d1cc);
                  color: white;
                  border: none;
                  padding: 15px 25px;
                  border-radius: 50px;
                  cursor: pointer;
                  font-size: 16px;
                  font-weight: bold;
                  box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
                  transition: all 0.3s ease;
                  z-index: 1000;
                  display: flex;
                  align-items: center;
                  gap: 8px;
              }
              
              .download-btn:hover {
                  transform: translateY(-2px);
                  box-shadow: 0 6px 20px rgba(32, 178, 170, 0.4);
              }
              
              .download-btn:active {
                  transform: translateY(0);
              }
              
              @media print {
                  body { margin: 0; font-size: 14px; }
                  .header { page-break-after: avoid; }
                  .download-btn { display: none !important; }
              }
          </style>
      </head>
      <body>
          <button class="download-btn" onclick="window.print(); return false;">
              ðŸ“¥ ×”×•×¨×“×ª ×“×•×—
          </button>
          
          <div class="header">
              <h1>×’×ž"×— ×©×ž×—×ª ×–×§× ×ª×™</h1>
              <h2>×“×•×— ×”×©××œ×” - ${w.clientName}</h2>
              <p>× ×•×¦×¨ ×‘×ª××¨×™×š: ${new Date().toLocaleDateString("he-IL")}</p>
          </div>
          
          <div class="info-grid">
              <div>
                  <div class="info-item">
                      <span class="label">×ž×ª× ×“×‘×ª:</span> ${w.volunteerName}
                  </div>
                  <div class="info-item">
                      <span class="label">×˜×œ×¤×•×Ÿ:</span> ${w.phone}
                  </div>
                  <div class="info-item">
                      <span class="label">×›×ª×•×‘×ª:</span> ${w.address}
                  </div>
              </div>
              <div>
                  <div class="info-item">
                      <span class="label">×ª××¨×™×š ××™×¡×•×£:</span> ${N(w.pickupDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">×ª××¨×™×š ×”×—×–×¨×”:</span> ${N(w.returnDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">×¡×•×’ ××™×¨×•×¢:</span> ${w.eventType}
                  </div>
              </div>
          </div>

          <h3>×¤×¨×™×˜×™× ×‘×”×–×ž× ×”</h3>
          <table>
              <thead>
                  <tr>
                      <th>#</th>
                      <th>×©× ×¤×¨×™×˜</th>
                      <th>×›×ž×•×ª ×©×”×•×©××œ×”</th>
                      <th>×ª×§×™×Ÿ</th>
                      <th>××‘×“/×œ× ×”×•×—×–×¨</th>
                  </tr>
              </thead>
              <tbody>
                  ${((X=w.items)==null?void 0:X.map((ee,K)=>{var le,de;const T=(de=(le=w.returnInspection)==null?void 0:le.itemInspections)==null?void 0:de.find(fe=>fe.itemId===ee.id||fe.name===ee.name),z=ee.quantity,W=(T==null?void 0:T.quantityReturned)||0,G=Math.max(0,z-W);let oe=0,re=G;return T&&W>0&&(T.condition==="good"?oe=W:T.condition==="damaged"?re+=W:oe=W),`
                      <tr>
                          <td>${K+1}</td>
                          <td>${ee.name}</td>
                          <td>${z}</td>
                          <td>${oe}</td>
                          <td>${re}</td>
                      </tr>
                    `}).join(""))||'<tr><td colspan="5">××™×Ÿ ×¤×¨×™×˜×™×</td></tr>'}
              </tbody>
          </table>

          ${w.returnInspection?`
          <div class="summary">
              <h3 style="text-align: center;">×¡×™×›×•× ×‘×“×™×§×ª ×”×—×–×¨×”</h3>
              <div style="text-align: center;">
                  <div class="info-item">
                      <span class="label">×¡×”"×› ×¤×¨×™×˜×™× ×©×”×•×©××œ×•:</span> ${M.totalItemsExpected}
                  </div>
                  <div class="info-item">
                      <span class="label">×¡×”"×› ×¤×¨×™×˜×™× ×©×”×•×—×–×¨×•:</span> ${M.totalItemsReturned}
                  </div>
                  <div class="info-item">
                      <span class="label">×¤×¨×™×˜×™× ×©×œ× ×”×•×—×–×¨×•:</span> ${M.totalItemsNotReturned}
                  </div>
              </div>
              
              ${(H=w.returnInspection.summary)!=null&&H.managerNotes?`
              <div class="info-item" style="margin-top: 20px; text-align: center;">
                  <span class="label">×”×¢×¨×•×ª ×ž× ×”×œ:</span><br>
                  ${w.returnInspection.summary.managerNotes}
              </div>
              `:""}
          </div>
          `:""}
      </body>
      </html>
    `,L=window.open("","_blank","width=800,height=900,scrollbars=yes,resizable=yes");L.document.write(O),L.document.close(),L.focus()};return p?f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"×˜×•×¢×Ÿ ×”×™×¡×˜×•×¨×™×™×ª ×”×©××œ×•×ª..."})]})}):f.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[f.jsx("style",{children:`
        @media (max-width: 768px) {
          .date-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            background: white !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            text-align: center !important;
            direction: ltr !important;
            width: 100% !important;
            box-sizing: border-box !important;
            cursor: pointer !important;
            letter-spacing: 1px !important;
          }
          
          .date-input::-webkit-calendar-picker-indicator {
            opacity: 0 !important;
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            height: 100% !important;
            cursor: pointer !important;
            background: transparent !important;
          }
          
          .date-input::-webkit-inner-spin-button,
          .date-input::-webkit-outer-spin-button {
            opacity: 0 !important;
            -webkit-appearance: none !important;
            margin: 0 !important;
          }
        }
      `}),f.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"1.5rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[f.jsxs("div",{style:{textAlign:window.innerWidth<768?"center":"right",flex:"1"},children:[f.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",margin:0,marginBottom:"0.5rem"},children:"ðŸ“š ×”×™×¡×˜×•×¨×™×™×ª ×”×©××œ×•×ª"}),f.jsx("p",{style:{fontSize:"0.95rem",opacity:.9,margin:0},children:"×›×œ ×”×”×–×ž× ×•×ª ×©×”×•×©×œ×ž×• ×¢× ×¤×¨×˜×™ ×‘×“×™×§×ª ×”×—×–×¨×”"})]}),f.jsxs("button",{onClick:()=>v(!0),style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",backdropFilter:"blur(10px)",whiteSpace:"nowrap"},onMouseEnter:w=>{w.currentTarget.style.background="rgba(255, 255, 255, 0.3)",w.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:w=>{w.currentTarget.style.background="rgba(255, 255, 255, 0.2)",w.currentTarget.style.transform="translateY(0)"},children:[f.jsx(j2,{size:20}),"ðŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª"]})]}),!i&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[f.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem",alignItems:window.innerWidth<768?"stretch":"end"},children:[f.jsxs("div",{style:{flex:window.innerWidth<768?"none":"2"},children:[f.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[f.jsx(rc,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"×—×™×¤×•×© ×œ×¤×™ ×©× ×œ×§×•×— ××• ×˜×œ×¤×•×Ÿ"]}),f.jsx("input",{type:"text",value:s,onChange:w=>o(w.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"},placeholder:"×”×§×œ×“ ×©× ××• ×˜×œ×¤×•×Ÿ..."})]}),f.jsxs("div",{style:{flex:"1"},children:[f.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[f.jsx(Ri,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"×ž×ª××¨×™×š"]}),f.jsx("input",{type:"date",value:l,onChange:w=>c(w.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]}),f.jsxs("div",{style:{flex:"1"},children:[f.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[f.jsx(Ri,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"×¢×“ ×ª××¨×™×š"]}),f.jsx("input",{type:"date",value:d,onChange:w=>u(w.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]})]}),f.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem",color:"#374151"},children:["× ×ž×¦××• ",t.length," ×”×©××œ×•×ª ×ž×ª×•×š ",r.length,' ×¡×”"×›']})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":window.innerWidth<1024?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:window.innerWidth<768?"1rem":"1.5rem"},children:t.length===0?f.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[f.jsx(Qn,{size:48,style:{color:"#9ca3af",marginBottom:"1rem"}}),f.jsx("h3",{style:{fontSize:"1.25rem",color:"#6b7280",margin:0},children:"×œ× × ×ž×¦××• ×”×©××œ×•×ª"}),f.jsx("p",{style:{color:"#9ca3af",margin:"0.5rem 0 0 0"},children:"× ×¡×” ×œ×©× ×•×ª ××ª ×¤×¨×ž×˜×¨×™ ×”×—×™×¤×•×©"})]}):B.map(w=>{var M;return f.jsxs("div",{onClick:()=>a(w),style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box"},onMouseEnter:O=>{O.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",O.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:O=>{O.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",O.currentTarget.style.transform="translateY(0)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[f.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[f.jsx("h3",{style:{fontSize:window.innerWidth<768?"1rem":"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937",wordBreak:"break-word"},children:w.clientName}),f.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0",display:"flex",alignItems:"center",gap:"0.25rem"},children:[f.jsx(O1,{size:window.innerWidth<768?12:14}),w.volunteerName]})]}),f.jsx("div",{style:{background:"#10b981",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:window.innerWidth<768?"0.6rem":"0.75rem",fontWeight:"bold",whiteSpace:"nowrap"},children:"×”×•×©×œ×"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem",fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(ao,{size:window.innerWidth<768?12:14}),f.jsx("span",{style:{wordBreak:"break-all"},children:w.phone})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(lo,{size:window.innerWidth<768?12:14}),f.jsxs("span",{style:{fontSize:window.innerWidth<768?"0.7rem":"0.875rem"},children:[N(w.pickupDate)," â† ",N(w.returnDate)]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(Qn,{size:window.innerWidth<768?12:14}),(M=w.items)==null?void 0:M.reduce((O,L)=>O+L.quantity,0)," ×¤×¨×™×˜×™×"]})]})]},w.id)})}),t.length>0&&f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap",marginTop:"1.25rem",background:"#f3f4f6",borderRadius:"8px",padding:"0.75rem 1rem",border:"1px solid #e5e7eb"},children:[f.jsxs("div",{style:{color:"#374151",fontSize:"0.95rem"},children:["×ž×¦×™×’ ",j+1,"-",Math.min(E,t.length)," ×ž×ª×•×š ",t.length," ×”×©××œ×•×ª ×¡×’×•×¨×•×ª"]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[f.jsx("button",{onClick:()=>y(Math.max(1,U-1)),disabled:U===1,style:{padding:"0.5rem 0.9rem",borderRadius:"8px",border:"1px solid #d1d5db",background:U===1?"#e5e7eb":"#fff",color:"#111827",cursor:U===1?"not-allowed":"pointer",minWidth:"80px"},children:"×”×§×•×“×"}),f.jsx("div",{style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:Array.from({length:R}).map((w,M)=>{const O=M+1,L=O===U;return f.jsx("button",{onClick:()=>y(O),style:{padding:"0.45rem 0.75rem",borderRadius:"8px",border:L?"1px solid #2563eb":"1px solid #d1d5db",background:L?"#2563eb":"#fff",color:L?"white":"#111827",cursor:"pointer",minWidth:"42px",fontWeight:L?"700":"500"},children:O},O)})}),f.jsx("button",{onClick:()=>y(Math.min(R,U+1)),disabled:U===R,style:{padding:"0.5rem 0.9rem",borderRadius:"8px",border:"1px solid #d1d5db",background:U===R?"#e5e7eb":"#fff",color:"#111827",cursor:U===R?"not-allowed":"pointer",minWidth:"80px"},children:"×”×‘×"})]})]})]}),i&&f.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e5e7eb",flexWrap:"wrap",gap:"1rem"},children:[f.jsxs("div",{children:[f.jsxs("h2",{style:{fontSize:window.innerWidth<768?"1.25rem":"2rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:["×”×©××œ×” - ",i.clientName]}),f.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:["×”×•×©×œ×ž×” ×‘-",_((S=i.returnInspection)==null?void 0:S.completedAt)]})]}),f.jsxs("button",{onClick:()=>a(null),style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:window.innerWidth<768?"0.875rem":"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx(O2,{size:16}),"×—×–×¨×” ×œ×¨×©×™×ž×”"]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×œ×§×•×—"}),f.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.clientName})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×ž×ª× ×“×‘×ª"}),f.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.volunteerName})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×˜×œ×¤×•×Ÿ"}),f.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.phone})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×›×ª×•×‘×ª"}),f.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.address})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×ª××¨×™×›×™×"}),f.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:[N(i.pickupDate)," â† ",N(i.returnDate)]})]}),f.jsxs("div",{children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"×¡×•×’ ××™×¨×•×¢"}),f.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.eventType})]})]}),f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#1f2937"},children:"ðŸ“¦ ×¤×¨×™×˜×™× ×•×¡×˜×˜×•×¡ ×”×—×–×¨×”"}),f.jsx("div",{style:{display:"grid",gap:"1rem"},children:(D=i.items)==null?void 0:D.map((w,M)=>{var L,X;const O=(X=(L=i.returnInspection)==null?void 0:L.itemInspections)==null?void 0:X.find(H=>H.itemId===w.id||H.name===w.name);return f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",flexWrap:window.innerWidth<768?"wrap":"nowrap",gap:"0.5rem"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:"1",minWidth:"200px"},children:[f.jsx(Zw,{item:w,size:window.innerWidth<768?50:60}),f.jsxs("div",{children:[f.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:w.name}),f.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["×”×•×©××œ: ",w.quantity," | ×ª×§×™×Ÿ: ",(()=>{const H=(O==null?void 0:O.quantityReturned)||0;return O&&H>0&&O.condition==="good"||O&&H>0&&O.condition!=="damaged"?H:0})()," | ××‘×“/×¤×’×•×: ",(()=>{const H=w.quantity,ee=(O==null?void 0:O.quantityReturned)||0;let T=Math.max(0,H-ee);return O&&ee>0&&O.condition==="damaged"&&(T+=ee),T})()]})]})]}),f.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const H=w.quantity,ee=(O==null?void 0:O.quantityReturned)||0;let T=Math.max(0,H-ee);return O&&ee>0&&O.condition==="damaged"&&(T+=ee),T===0?f.jsxs(f.Fragment,{children:[f.jsx(Oa,{size:16,style:{color:"#10b981"}}),f.jsx("span",{style:{color:"#10b981",fontWeight:"bold",fontSize:"0.875rem"},children:"×”×›×œ ×ª×§×™×Ÿ"})]}):f.jsxs(f.Fragment,{children:[f.jsx(Vs,{size:16,style:{color:"#ef4444"}}),f.jsxs("span",{style:{color:"#ef4444",fontWeight:"bold",fontSize:"0.875rem"},children:[T," ×—×¡×¨/×¤×’×•×"]})]})})()})]},M)})})]}),f.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:f.jsxs("button",{onClick:()=>k(i),style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"1rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",fontSize:"1.2rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",minWidth:window.innerWidth<768?"100%":"250px",justifyContent:"center"},onMouseEnter:w=>{w.currentTarget.style.transform="translateY(-2px)",w.currentTarget.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.4)"},onMouseLeave:w=>{w.currentTarget.style.transform="translateY(0)",w.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:[f.jsx(T2,{size:20}),"ðŸ–¨ï¸ ×”×“×¤×¡ ×“×•×— ×¢×‘×¨×™×ª"]})})]}),f.jsx(Yw,{showStatsModal:m,setShowStatsModal:v,loanHistory:r}),f.jsx(Kw,{})]})},Jw=()=>{const[r,e]=se.useState(""),t="054-4773388",n=async(s,o)=>{try{await navigator.clipboard.writeText(s),e(o),setTimeout(()=>e(""),2e3)}catch(l){console.error("Failed to copy text: ",l)}},i=()=>{const s=t.replace(/-/g,"");n(s,"bit-app"),setTimeout(()=>{if(confirm(`×”×ž×¡×¤×¨ ×”×•×¢×ª×§! ðŸ“‹

ðŸ“± ×”× ×—×™×•×ª ×œ×ª×¨×•×ž×” ×‘×‘×™×˜:
1. ×¤×ª×— ××ª ××¤×œ×™×§×¦×™×™×ª ×‘×™×˜
2. ×œ×—×¥ ×¢×œ "×”×¢×‘×¨ ×›×¡×£"
3. ×‘×—×¨ "×œ×ž×¡×¤×¨ ×˜×œ×¤×•×Ÿ"
4. ×”×“×‘×§ ××ª ×”×ž×¡×¤×¨ (××• ×”×§×œ×“: `+t+`)
5. ×”×›× ×¡ ×¡×›×•× ×œ×ª×¨×•×ž×”
6. ××©×¨ ××ª ×”×ª×¨×•×ž×” ðŸ’š

×œ×—×¥ "××™×©×•×¨" ×›×“×™ ×œ×¤×ª×•×— ××ª ×‘×™×˜ ×¢×›×©×™×•`))try{window.location.href="bit://"}catch{window.open("https://bit.co.il/","_blank")}},500)},a=()=>{const s=t.replace(/-/g,"");n(s,"paybox-app"),setTimeout(()=>{try{window.location.href="https://payboxapp.page.link/rcKWijyydRQpxEfb9"}catch{window.open("https://payboxapp.page.link/rcKWijyydRQpxEfb9","_blank")}},500)};return f.jsxs("div",{style:{minHeight:"100vh",background:"transparent",padding:"2rem 1rem",direction:"rtl"},children:[f.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",backgroundColor:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[f.jsxs("div",{style:{background:"linear-gradient(135deg, #20b2aa 0%, #48d1cc 100%)",padding:"3rem 2rem",textAlign:"center",color:"white"},children:[f.jsx("div",{style:{fontSize:"4rem"}}),f.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",margin:"0 0 1rem 0",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:'×ª×¨×•×ž×•×ª ×œ×’×ž"×—'}),f.jsx("p",{style:{fontSize:"1.2rem",opacity:"0.95",margin:0,fontWeight:"700"},children:"×¢×–×¨×• ×œ× ×• ×œ×”×ž×©×™×š ×œ×¢×–×•×¨ ×œ×›×"})]}),f.jsxs("div",{style:{padding:"3rem 2rem"},children:[f.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"2rem",borderRadius:"15px",marginBottom:"3rem",border:"2px solid #e9ecef"},children:[f.jsx("h2",{style:{fontSize:"1.5rem",color:"#2c3e50",marginBottom:"1rem",textAlign:"center"},children:'×”×’×ž"×— × ×©×¢×Ÿ ×¢×œ ×ª×¨×•×ž×•×ª ×‘×œ×‘×“'}),f.jsx("p",{style:{fontSize:"1.1rem",lineHeight:"1.6",color:"#495057",textAlign:"center",margin:0},children:'×¢× ×”×—×–×¨×ª ×”×¦×™×•×“ × ×©×ž×— ×œ×ª×¨×•×ž×ª×›× ×¢×œ ×ž× ×ª ×©× ×•×›×œ ×œ×”×ž×©×™×š ×œ×”×—×–×™×§ ×•×œ×—×“×© ××ª ×”×¦×™×•×“ ×‘×’×ž"×— ×œ×˜×•×‘×ª ×›×•×œ× ×•.'})]}),f.jsx("h3",{style:{fontSize:"2rem",textAlign:"center",marginBottom:"2rem",color:"#2c3e50"},children:"ðŸŽ¯ ××¤×©×¨×•×™×•×ª ×œ×ª×¨×•×ž×”"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[f.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #c2185b",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(194, 24, 91, 0.2)"},onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-5px)",s.currentTarget.style.boxShadow="0 8px 25px rgba(194, 24, 91, 0.3)"},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 4px 15px rgba(194, 24, 91, 0.2)"},children:[f.jsx(R2,{size:48,color:"#c2185b",style:{marginBottom:"1rem"}}),f.jsx("h4",{style:{fontSize:"1.3rem",color:"#c2185b",marginBottom:"1rem",fontWeight:"700"},children:"×‘×™×˜ / ×¤×™×™×‘×•×§×¡"}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",marginBottom:"1rem"},children:[f.jsx("p",{style:{fontSize:"1.2rem",fontWeight:"800",color:"#c2185b",margin:"0 0 0.5rem 0"},children:t}),f.jsxs("button",{onClick:()=>n(t,"bit"),style:{background:"#c2185b",border:"2px solid #c2185b",color:"white",padding:"8px 15px",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",margin:"0 auto 10px auto",fontWeight:"600"},children:[r==="bit"?f.jsx(L1,{size:16}):f.jsx(L2,{size:16}),r==="bit"?"×”×•×¢×ª×§!":"×”×¢×ª×§ ×ž×¡×¤×¨"]})]}),f.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[f.jsx("button",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:s=>s.target.style.transform="scale(1.05)",onMouseLeave:s=>s.target.style.transform="scale(1)",onClick:i,children:"ðŸ¤ ×‘×™×˜"}),f.jsx("button",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:s=>s.target.style.transform="scale(1.05)",onMouseLeave:s=>s.target.style.transform="scale(1)",onClick:a,children:"ðŸ¤ ×¤×™×™×‘×•×§×¡"})]})]}),f.jsxs("div",{style:{backgroundColor:"#fff",border:"2px solid #c2185b",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(194, 24, 91, 0.1)"},onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-5px)",s.currentTarget.style.boxShadow="0 8px 25px rgba(194, 24, 91, 0.2)"},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 4px 15px rgba(194, 24, 91, 0.1)"},children:[f.jsx(P2,{size:48,color:"#c2185b",style:{marginBottom:"1rem"}}),f.jsx("h4",{style:{fontSize:"1.3rem",color:"#c2185b",marginBottom:"1rem",fontWeight:"600"},children:"×ª×¨×•×ž×” ×‘×ž×–×•×ž×Ÿ"}),f.jsx("p",{style:{color:"#7f8c8d",marginBottom:"1.5rem",fontSize:"1rem",fontWeight:"600",lineHeight:"1.4"},children:'×œ×ž×ª× ×“×‘×•×ª ×”×’×ž"×— ×‘×¢×ª ×”×—×–×¨×ª ×”×¦×™×•×“'}),f.jsx("div",{style:{display:"flex",justifyContent:"center"},children:f.jsx("div",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",padding:"12px 24px",borderRadius:"25px",fontSize:"1rem",fontWeight:"600"},children:"ðŸ’° ×‘×¢×ª ×”×—×–×¨×”"})})]})]}),f.jsxs("div",{style:{background:"linear-gradient(135deg, #20b2aa 0%, #48d1cc 100%)",padding:"2.5rem",borderRadius:"20px",textAlign:"center",color:"white",boxShadow:"0 10px 30px rgba(32, 178, 170, 0.3)"},children:[f.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"1rem",fontWeight:"600"},children:"×ª×•×“×” ×ž×¨××©"}),f.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"1rem",opacity:"0.95"},children:"×”×ª×¨×•×ž×” ×©×œ×›× ×¢×•×–×¨×ª ×œ× ×• ×œ×”×ž×©×™×š ×œ×¡×¤×§ ×©×™×¨×•×ª ××™×›×•×ª×™ ×œ×§×”×™×œ×”"}),f.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"ðŸŽ‰ × ×ª×¨××” ×‘×©×ž×—×•×ª!"})]})]})]}),f.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        
        @media (max-width: 768px) {
          h1 {
            font-size: 2rem !important;
          }
          
          h3 {
            font-size: 1.5rem !important;
          }
          
          .donation-cards {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})},e4=()=>{const r=window.innerWidth<=768,e={maxWidth:r?"100%":"900px",width:"100%",margin:r?"0":"20px auto",padding:r?"10px":"40px",backgroundColor:"#ffffff",borderRadius:r?"0":"8px",boxShadow:r?"none":"0 2px 8px rgba(0, 0, 0, 0.08)",fontFamily:"system-ui, -apple-system, sans-serif",direction:"rtl",lineHeight:r?"1.6":"1.7",boxSizing:"border-box"},t={textAlign:"center",marginBottom:r?"30px":"50px",padding:r?"20px 15px":"30px 20px",backgroundColor:"#fafbfc",borderRadius:"6px",border:"3px solid #718096",boxShadow:r?"0 2px 8px rgba(0, 0, 0, 0.1)":"0 4px 12px rgba(0, 0, 0, 0.12)"},n={fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"600",color:"#1a202c",marginBottom:"8px",lineHeight:"1.2"},i={fontSize:"clamp(14px, 3.5vw, 18px)",color:"#4a5568",fontWeight:"400",margin:"0"},a={marginBottom:r?"25px":"40px",padding:r?"20px 15px":"32px",backgroundColor:"#ffffff",borderRadius:"8px",border:r?"2px solid #a0aec0":"3px solid #a0aec0",boxShadow:r?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 4px 12px rgba(0, 0, 0, 0.12)"},s={fontSize:"clamp(18px, 4vw, 24px)",fontWeight:"600",color:"#2d3748",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},o={display:"flex",alignItems:"flex-start",marginBottom:r?"20px":"24px",padding:r?"15px":"24px",backgroundColor:"#ffffff",borderRadius:"8px",border:r?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:r?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",gap:r?"12px":"20px"},l={backgroundColor:"#4299e1",color:"white",borderRadius:"50%",width:r?"32px":"36px",height:r?"32px":"36px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:r?"14px":"16px",flexShrink:0,minWidth:r?"32px":"36px"},c={flex:1,fontSize:"clamp(14px, 3.5vw, 16px)",color:"#4a5568",lineHeight:"1.5",minWidth:0},d={backgroundColor:"#f7fafc",border:r?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:r?"15px":"24px",marginBottom:r?"15px":"20px",textAlign:"center",boxShadow:r?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},u={backgroundColor:"#f7fafc",border:r?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:r?"15px":"24px",marginBottom:r?"15px":"20px",boxShadow:r?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},p={padding:r?"15px":"20px",backgroundColor:"#ffffff",borderRadius:"8px",border:r?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:r?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",marginBottom:r?"15px":"0"},h={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"15px",width:"100%"},m={display:"flex",flexDirection:"column",gap:"15px",width:"100%"},v={fontSize:"clamp(16px, 4vw, 20px)",marginLeft:"4px"};return f.jsxs("div",{style:e,children:[f.jsxs("div",{style:t,children:[f.jsxs("h1",{style:n,children:[f.jsx("span",{style:v}),"× ×•×”×œ ×”×©××œ×”"]}),f.jsx("p",{style:i,children:'×©×•××œ×™× ×™×§×¨×™× - ×× × ×§×¨××• ×‘×¢×™×•×Ÿ ××ª × ×•×”×œ ×”×’×ž"×—'})]}),f.jsxs("div",{style:{...a,backgroundColor:"#f8fafc",border:r?"1px solid #e2e8f0":"4px solid #2d3748",boxShadow:r?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 6px 16px rgba(45, 55, 72, 0.15)"},children:[f.jsxs("h2",{style:s,children:[f.jsx("span",{style:v,children:"ðŸ”„"}),"×”×ª×”×œ×™×š ×”×ž×œ× - ××™×š ×–×” ×¢×•×‘×“?"]}),f.jsxs("div",{style:o,children:[f.jsx("div",{style:l,children:"1"}),f.jsxs("div",{style:c,children:[f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"×”×–×ž× ×” ×•×¨×™×©×•× ×‘×œ×•×—:"}),f.jsx("br",{}),'×ž×ª×§×©×¨×™×/×ž×’×™×¢×™× ×œ×’×ž"×— ×‘×–×ž× ×™ ×”×¤×ª×™×—×” ×•×ž×©×¨×™×™× ×™× ×ª××¨×™×š ×œ××¨×•×¢. ×¨×•×©×ž×™× ××ª×›× ×‘×™×•×ž×Ÿ ×”×©×ž×—×•×ª ×œ×¤×™ ×¡×“×¨ ×”×¨×™×©×•×.',f.jsx("br",{}),f.jsx("strong",{children:"×”×–×ž× ×ª ×¨×©×™×ž×ª ×¦×™×•×“:"})," ×ž×©×¨×™×™× ×™× ×¢× ×”×ž×ª× ×“×‘×•×ª ×¨×©×™×ž×” ×©×œ ×”×¦×™×•×“ ×”×ž×‘×•×§×© ×•×ž×¡×›×ž×™× ×ž×•×¢×“ ×œ××™×¡×•×£."]})]}),f.jsxs("div",{style:o,children:[f.jsx("div",{style:l,children:"2"}),f.jsxs("div",{style:c,children:[f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"××™×¡×•×£ ×”×¦×™×•×“:"}),f.jsx("br",{}),"×ž×’×™×¢×™× ×œ×§×—×ª ××ª ×”×¦×™×•×“ ×©×”×•×–×ž×Ÿ ×ž×¨××©.",f.jsx("strong",{style:{color:"#2d3748"},children:" ×—×©×•×‘ ×œ×”×™×¦×ž×“ ×œ×¨×©×™×ž×”"})," - ×–×” ×ž×§×œ ×¢×œ ×”×ž×ª× ×“×‘×•×ª ×œ×ª×ª ×©×™×¨×•×ª ×˜×•×‘ ×™×•×ª×¨ ×œ×›×•×œ×."]})]}),f.jsxs("div",{style:o,children:[f.jsx("div",{style:l,children:"3"}),f.jsxs("div",{style:c,children:[f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"×”×—×–×¨×ª ×”×¦×™×•×“:"}),f.jsx("br",{}),"×œ××—×¨ ×”××¨×•×¢ ×ž×—×–×™×¨×™× ××ª ×”×¦×™×•×“. ×”×ž×ª× ×“×‘×•×ª ×™×‘×“×§×• ××ª ×”×¤×¨×™×˜×™× ×”×ž×•×—×–×¨×™× ×•×™×“×¨×™×›×• ××™×š ×œ×”×—×–×™×¨ ××•×ª× ×œ×ž×§×•×ž×."]})]}),f.jsx("div",{style:d,children:f.jsxs("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",margin:0,fontWeight:"500",color:"#2d3748"},children:["ðŸ† ",f.jsx("strong",{children:"×¢×“×™×¤×•×™×•×ª:"})," ×”×”×©××œ×” ×”×™× ×œ×¤×™ ×¡×“×¨ ×”×¨×™×©×•× - ×ž×™ ×©× ×¨×©× ×¨××©×•×Ÿ, ×ž×©××™×œ ×¨××©×•×Ÿ!"]})})]}),f.jsxs("div",{style:a,children:[f.jsxs("h2",{style:s,children:[f.jsx("span",{style:v,children:"ðŸ“"}),"×›×œ×œ×™× ×—×©×•×‘×™× ×œ×–×›×•×¨"]}),f.jsxs("div",{style:r?m:h,children:[f.jsxs("div",{style:p,children:[f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"â° ×–×ž× ×™ ×¤×ª×™×—×”:"}),f.jsx("br",{}),'×”×’×ž"×— ×¤×ª×•×— ×¨×§ ×‘×©×¢×•×ª ×”×ž×¤×•×¨×¡×ž×•×ª. ×”×˜×œ×¤×•×Ÿ ×–×ž×™×Ÿ ×‘×©×¢×•×ª ×”×¤×ª×™×—×”.',f.jsx("br",{}),f.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"×”×ž×ª× ×“×‘×•×ª ×¢×¡×•×§×•×ª ×‘× ×ª×™× ×ª ×©×™×¨×•×ª - ×”×Ÿ ×¢×•× ×•×ª ×›×©×”×Ÿ ×¤× ×•×™×•×ª, ×× × ×”××–×¨×• ×‘×¡×‘×œ× ×•×ª."})]}),f.jsxs("div",{style:p,children:[f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"ðŸ“… ×”×—×–×¨×” ×‘×–×ž×Ÿ:"}),f.jsx("br",{}),"×”×§×¤×™×“×• ×œ×”×—×–×™×¨ ××ª ×”×¦×™×•×“ ×‘×™×•× ×©× ×§×‘×¢ ×ž×¨××©."]}),f.jsxs("div",{style:p,children:[f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"ðŸ“¸ ×”×ž×œ×¦×”:"}),f.jsx("br",{}),"×¦×œ×ž×• ××ª ×”×¤×¨×™×˜×™× ×©×œ×§×—×ª× ×–×” ×™×§×œ ×¢×œ×™×›× ×‘×©×¢×ª ×”×”×—×–×¨×”.",f.jsx("br",{}),f.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"×”×—×¤×¦×™× ×™×§×¨×™× ×•×ž××•×“ ×¢×“×™× ×™× - ×× × ×©×™×ž×¨×• ×¢×œ×™×”× ×›×©×œ×›×."})]})]})]}),f.jsxs("div",{style:r?m:h,children:[f.jsxs("div",{style:d,children:[f.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[f.jsx("span",{style:v,children:"ðŸ’"}),"×ª×¨×•×ž×•×ª"]}),f.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:'×”×’×ž"×— ×ž××¤×©×¨ ×”×©××œ×” ×œ×œ× ×ª×©×œ×•×. ×‘×›×“×™ ×©× ×•×›×œ ×œ×”×¨×—×™×‘ ×•×œ×”×¢×©×™×¨ ××•×ª×• × ×©×ž×— ×ž××•×“ ×œ×ª×¨×•×ž×ª×›×.'})]}),f.jsxs("div",{style:u,children:[f.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[f.jsx("span",{style:v,children:"ðŸ”§"}),"×‘×ž×§×¨×” ×©×œ × ×–×§"]}),f.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:"×× × ×’×¨× × ×–×§ ×‘×˜×¢×•×ª - ×”×¤× ×• ××ª ×ª×©×•×ž×ª ×œ×‘× ×• ×¢×œ ×ž× ×ª ×œ×”×¢×¨×™×š ××ª ×¢×œ×•×ª×•."})]})]}),f.jsxs("div",{style:a,children:[f.jsxs("h2",{style:s,children:[f.jsx("span",{style:v,children:"ðŸ§½"}),"×”×•×¨××•×ª × ×™×§×•×™ ×•×”×—×–×¨×”"]}),f.jsxs("div",{style:r?m:h,children:[f.jsxs("div",{style:{...p,textAlign:"center",padding:"20px 15px"},children:[f.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"ðŸ§º"}),f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"×ž×¤×•×ª"}),f.jsx("br",{}),f.jsxs("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:["×™×© ×œ×”×—×–×™×¨ × ×§×™×•×ª, ×™×‘×©×•×ª ×•×ž×§×•×¤×œ×•×ª",f.jsx("br",{}),"(×ž×¡×™×¨ ×›×ª×ž×™× ×œ×¤× ×™ ×›×‘×™×¡×”)",f.jsx("br",{}),f.jsx("em",{children:"(×œ×”×§×¤×™×“ ×¢×œ ×”×¡×¨×ª ×›×ª×ž×™×)"})]})]}),f.jsxs("div",{style:{...p,textAlign:"center",padding:"20px 15px"},children:[f.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"ðŸ•¯ï¸"}),f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"×ž×¢×ž×“×™ × ×¨×•×ª"}),f.jsx("br",{}),f.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"× ×§×™×™× ×ž×©×¢×•×•×”"})]}),f.jsxs("div",{style:{...p,textAlign:"center",padding:"20px 15px"},children:[f.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"â˜•"}),f.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"×¢×¨×›×ª ×§×¤×” ×•×ž×’×©×™×"}),f.jsx("br",{}),f.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"×—×•×‘×” ×œ×©×˜×•×£ ×•×œ× ×’×‘"})]})]})]}),f.jsxs("div",{style:{...d,marginTop:r?"30px":"40px"},children:[f.jsx("h3",{style:{color:"#2d3748",fontSize:"clamp(18px, 4vw, 20px)",marginBottom:"8px",fontWeight:"600"},children:"×©×¤×¢ ×‘×¨×›×•×ª ×•×©×ž×—×”"}),f.jsx("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",fontStyle:"italic",margin:0,color:"#4a5568"},children:"×ª×•×“×” ×¢×œ ×©×™×ª×•×£ ×”×¤×¢×•×œ×” ×•×¢×œ ×©×ž×™×¨×ª ×”×›×œ×œ×™×"})]})]})},t4=()=>{const{user:r}=An(),e=mf(),[t,n]=se.useState([]),[i,a]=se.useState(!1),[s,o]=se.useState(!1),[l,c]=se.useState(!1),[d,u]=se.useState(!1);se.useEffect(()=>{const y=()=>{c(window.innerWidth<=768)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),se.useEffect(()=>{if(!(r!=null&&r.uid))return;const y=`conflicts_dismissed_${r.uid}`,I=localStorage.getItem(y);I&&((Date.now()-parseInt(I))/6e4<15?u(!0):(localStorage.removeItem(y),u(!1)))},[r==null?void 0:r.uid]);const p=r&&(r.role==="MainAdmin"||r.role==="GmachAdmin");se.useEffect(()=>{if(!p){n([]),a(!1);return}console.log("ðŸ”” ×ž×ª×—×™×œ ×ž×¢×§×‘ ×‘×–×ž×Ÿ ××ž×ª ××—×¨×™ ×‘×¢×™×•×ª ×–×ž×™× ×•×ª...");const y=Xo(mt(Ue,"orders"),I=>{const N=[];I.docs.forEach(_=>{const F=_.data();F.status==="open"&&F.availabilityStatus==="CONFLICT"&&F.availabilityConflicts&&F.availabilityConflicts.length>0&&N.push({id:_.id,clientName:F.clientName,phone:F.phone,pickupDate:F.pickupDate,returnDate:F.returnDate,conflicts:F.availabilityConflicts})}),console.log(`ðŸ”” ×¢×“×›×•×Ÿ ×‘×–×ž×Ÿ ××ž×ª: × ×ž×¦××• ${N.length} ×”×–×ž× ×•×ª ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª`),n(N),a(N.length>0),N.length>0&&(o(!1),u(!1))},I=>{console.error("âŒ ×©×’×™××” ×‘×ž×¢×§×‘ ×‘×–×ž×Ÿ ××ž×ª:",I),h()});return()=>{console.log("ðŸ”” ×ž×¤×¡×™×§ ×ž×¢×§×‘ ×‘×–×ž×Ÿ ××ž×ª"),y()}},[p]);const h=async()=>{try{console.log("ðŸ”„ ×‘×“×™×§×” ×™×“× ×™×ª ×œ×‘×¢×™×•×ª ×–×ž×™× ×•×ª...");const y=await Bt(mt(Ue,"orders")),I=[];y.docs.forEach(N=>{const _=N.data();_.status==="open"&&_.availabilityStatus==="CONFLICT"&&_.availabilityConflicts&&_.availabilityConflicts.length>0&&I.push({id:N.id,clientName:_.clientName,phone:_.phone,pickupDate:_.pickupDate,returnDate:_.returnDate,conflicts:_.availabilityConflicts})}),n(I),a(I.length>0)}catch(y){console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×” ×™×“× ×™×ª:",y)}};if(!p||t.length===0||!i||d)return null;const m=()=>{e("/calendar")},v=()=>{if(r!=null&&r.uid){const y=`conflicts_dismissed_${r.uid}`;localStorage.setItem(y,Date.now().toString()),console.log(`âœ… ×ž×©×ª×ž×© ${r.uid} ×¡×’×¨ ××ª ×”×”×ª×¨××” ×œ-15 ×“×§×•×ª`)}a(!1),u(!0)},b=()=>{o(!s)};return f.jsxs(f.Fragment,{children:[f.jsx("style",{jsx:!0,children:`
        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @keyframes slideIn {
          from { 
            transform: translateX(100%); 
            opacity: 0; 
          }
          to { 
            transform: translateX(0); 
            opacity: 1; 
          }
        }

        @keyframes slideInMobile {
          from { 
            transform: translateY(-100%); 
            opacity: 0; 
          }
          to { 
            transform: translateY(0); 
            opacity: 1; 
          }
        }

        @keyframes pulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        .notification-container {
          position: fixed;
          z-index: 10000;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          direction: rtl;
        }

        /* Desktop positioning */
        .notification-container.desktop {
          bottom: 100px;
          right: 20px;
          animation: slideIn 0.5s ease-out;
        }

        /* Mobile positioning - top center for better visibility */
        .notification-container.mobile {
          top: 70px;
          left: 10px;
          right: 10px;
          animation: slideInMobile 0.5s ease-out;
        }

        .notification-card {
          background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
          border: 2px solid #9333ea;
          border-radius: 16px;
          box-shadow: 0 8px 25px rgba(147, 51, 234, 0.2);
          overflow: hidden;
          transition: all 0.3s ease;
        }

        .notification-card.desktop {
          min-width: 280px;
          max-width: 350px;
          animation: pulse 3s ease-in-out infinite;
        }

        .notification-card.mobile {
          width: 100%;
          max-height: ${s?"60px":"80vh"};
          animation: ${s?"none":"pulse 3s ease-in-out infinite"};
        }

        .notification-header {
          background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
          color: white;
          padding: 12px 16px;
          display: flex;
          align-items: center;
          justify-content: space-between;
          cursor: ${l?"pointer":"default"};
          min-height: 60px;
        }

        .header-content {
          display: flex;
          align-items: center;
          gap: 8px;
          flex: 1;
        }

        .header-controls {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .control-button {
          background: rgba(255, 255, 255, 0.2);
          border: none;
          border-radius: 6px;
          color: white;
          cursor: pointer;
          padding: 8px;
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          min-width: 32px;
          min-height: 32px;
        }

        .control-button:hover {
          background: rgba(255, 255, 255, 0.3);
          transform: scale(1.1);
        }

        .control-button:active {
          transform: scale(0.95);
        }

        .bell-icon {
          animation: bellRing 2s ease-in-out infinite;
        }

        .notification-body {
          background: rgba(248, 250, 252, 0.8);
          transition: all 0.3s ease-out;
          overflow-y: auto;
        }

        .notification-body.desktop {
          padding: 16px;
          max-height: 300px;
        }

        .notification-body.mobile {
          padding: ${s?"0":"16px"};
          max-height: ${s?"0":"60vh"};
          opacity: ${s?"0":"1"};
        }

        .notification-body.minimized {
          padding: 0;
          max-height: 0;
          overflow: hidden;
          opacity: 0;
        }

        .conflict-item {
          background: white;
          border: 1px solid #d1d5db;
          border-radius: 12px;
          padding: 12px;
          margin-bottom: 12px;
          transition: all 0.2s ease;
          border-right: 4px solid #9333ea;
        }

        .conflict-item:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(147, 51, 234, 0.1);
        }

        .conflict-item:last-child {
          margin-bottom: 0;
        }

        .client-name {
          font-weight: 600;
          color: #1f2937;
          margin-bottom: 4px;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .date-info {
          font-size: 0.85rem;
          color: #6b7280;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .conflicts-summary {
          font-size: 0.8rem;
          color: #7c3aed;
          font-weight: 500;
        }

        .action-button {
          background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
          color: white;
          border: none;
          border-radius: 8px;
          padding: 14px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-top: 12px;
          box-shadow: 0 4px 12px rgba(147, 51, 234, 0.3);
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          min-height: 48px;
        }

        .action-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(147, 51, 234, 0.4);
        }

        .action-button:active {
          transform: translateY(0);
        }

        .instructions {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
          border: 1px solid #f59e0b;
          border-radius: 8px;
          padding: 12px;
          margin-top: 12px;
          font-size: 0.8rem;
          color: #92400e;
          line-height: 1.4;
        }

        /* Mobile backdrop */
        .mobile-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.1);
          z-index: 9999;
          opacity: ${s?"0":"1"};
          visibility: ${s?"hidden":"visible"};
          transition: all 0.3s ease;
        }

        /* Override for small screens */
        @media (max-width: 480px) {
          .notification-container.mobile {
            top: 60px;
            left: 5px;
            right: 5px;
          }
          
          .notification-header {
            padding: 10px 12px;
          }
          
          .control-button {
            padding: 6px;
            min-width: 28px;
            min-height: 28px;
          }
        }
      `}),l&&!s&&f.jsx("div",{className:"mobile-backdrop",onClick:b}),f.jsx("div",{className:`notification-container ${l?"mobile":"desktop"}`,children:f.jsxs("div",{className:`notification-card ${l?"mobile":"desktop"}`,children:[f.jsxs("div",{className:"notification-header",onClick:l?b:void 0,children:[f.jsxs("div",{className:"header-content",children:[f.jsx(ka,{size:20,className:"bell-icon"}),f.jsxs("div",{children:[f.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:["ðŸ”” ×™×© ×œ×š ",t.length," ×”×–×ž× ",t.length===1?"×”":"×•×ª"]}),f.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9},children:[t.length===1?"×©×“×•×¨×©×ª":"×©×“×•×¨×©×•×ª"," ×¢×“×›×•×Ÿ ×–×ž×™× ×•×ª"]})]})]}),f.jsxs("div",{className:"header-controls",children:[l&&f.jsx("button",{className:"control-button",onClick:y=>{y.stopPropagation(),b()},title:s?"×”×¨×—×‘":"×ž×–×¢×¨",children:f.jsx(M2,{size:16})}),f.jsx("button",{className:"control-button",onClick:y=>{y.stopPropagation(),v()},title:"×¡×’×•×¨ ×”×ª×¨××” ×œ-15 ×“×§×•×ª",children:f.jsx(xi,{size:16})})]})]}),f.jsxs("div",{className:`notification-body ${l?"mobile":"desktop"} ${s?"minimized":""}`,children:[t.map((y,I)=>f.jsxs("div",{className:"conflict-item",title:"×¤×¨×˜×™ ×”×”×–×ž× ×” ×”×‘×¢×™×™×ª×™×ª",children:[f.jsxs("div",{className:"client-name",children:[f.jsx(B2,{size:14,style:{color:"#9333ea"}}),y.clientName]}),f.jsxs("div",{className:"date-info",children:[f.jsx(Ri,{size:12}),new Date(y.pickupDate).toLocaleDateString("he-IL")," - ",new Date(y.returnDate).toLocaleDateString("he-IL")]}),f.jsxs("div",{className:"conflicts-summary",children:[y.conflicts.length," ×¤×¨×™×˜",y.conflicts.length===1?"":"×™×"," ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª"]})]},y.id)),f.jsxs("div",{className:"instructions",children:["ðŸ’¡ ",f.jsx("strong",{children:"××™×š ×œ×¤×ª×•×¨:"}),' ×¢×‘×•×¨ ×œ×”×©××œ×•×ª ×¤×ª×•×—×•×ª â†’ ×ž×¦× ×™×ž×™× ×¢× ×‘×¢×™×•×ª ×–×ž×™× ×•×ª (×ž×¡×•×ž× ×™× ×‘×¡×’×•×œ) â†’ ×œ×—×¥ ×¢×œ ×™×•× â†’ ×œ×—×¥ "×¢×¨×•×š ×”×–×ž× ×”" â†’ ×”×ª×× ×›×ž×•×™×•×ª']}),f.jsxs("button",{className:"action-button",onClick:m,children:[f.jsx(Ri,{size:16}),"×¢×‘×•×¨ ×œ×”×©××œ×•×ª ×¤×ª×•×—×•×ª"]})]})]})})]})},r4=()=>{const{user:r}=An(),[e,t]=se.useState([]),[n,i]=se.useState(!1),[a,s]=se.useState(null),[o,l]=se.useState({title:"",message:"",type:"info",isActive:!0,hasExpiration:!1,expirationDate:"",expirationTime:"23:59"}),[c,d]=se.useState(!1),u=r&&(r.role==="MainAdmin"||r.role==="GmachAdmin");if(se.useEffect(()=>{if(!u)return;const N=mi(mt(Ue,"alerts"),P1("createdAt","desc")),_=Xo(N,F=>{const R=F.docs.map(U=>({id:U.id,...U.data()}));t(R)});return()=>_()},[u]),!u)return f.jsx("div",{style:{padding:"2rem",textAlign:"center",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',direction:"rtl"},children:f.jsx("h2",{children:"××™×Ÿ ×”×¨×©××” ×œ×¦×¤×™×™×” ×‘×“×£ ×–×”"})});const p=()=>{l({title:"",message:"",type:"info",isActive:!0,hasExpiration:!1,expirationDate:"",expirationTime:"23:59"}),s(null),i(!1)},h=()=>new Date().toISOString().split("T")[0],m=async N=>{if(N.preventDefault(),!!o.message.trim()){d(!0);try{let _={...o};if(o.hasExpiration&&o.expirationDate){const F=new Date(`${o.expirationDate}T${o.expirationTime}`);_.expirationDate=F}else _.expirationDate=null;delete _.hasExpiration,a?await _r(Tt(Ue,"alerts",a.id),{..._,updatedAt:tr(),updatedBy:r.uid}):await Ta(mt(Ue,"alerts"),{..._,createdAt:tr(),createdBy:r.uid,createdByName:r.displayName||r.email||r.username}),p()}catch(_){console.error("Error saving alert:",_),alert("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×”×ª×¨××”")}finally{d(!1)}}},v=N=>{const _=!!N.expirationDate;let F="",R="23:59";if(_&&N.expirationDate){const U=N.expirationDate.toDate?N.expirationDate.toDate():new Date(N.expirationDate);F=U.toISOString().split("T")[0],R=U.toTimeString().slice(0,5)}l({title:N.title||"",message:N.message||"",type:N.type||"info",isActive:N.isActive,hasExpiration:_,expirationDate:F,expirationTime:R}),s(N),i(!0)},b=async N=>{try{await _r(Tt(Ue,"alerts",N.id),{isActive:!N.isActive,updatedAt:tr(),updatedBy:r.uid})}catch(_){console.error("Error toggling alert:",_),N("×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×”×ª×¨××”")}},y=async N=>{if(window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×ž×—×•×§ ××ª ×”×”×ª×¨××”?"))try{await uo(Tt(Ue,"alerts",N))}catch(_){console.error("Error deleting alert:",_),alert("×©×’×™××” ×‘×ž×—×™×§×ª ×”×”×ª×¨××”")}},I=N=>{if(!N.expirationDate)return{status:"none",text:"×œ×œ× ×ª×¤×•×’×”"};const _=new Date,F=N.expirationDate.toDate?N.expirationDate.toDate():new Date(N.expirationDate);if(_>F)return{status:"expired",text:"×¤×’ ×ª×•×§×£"};const R=F-_,U=Math.ceil(R/(1e3*60*60*24));return U<=1?{status:"soon",text:`${Math.ceil(R/36e5)} ×©×¢×•×ª × ×•×ª×¨×•`}:{status:"active",text:`${U} ×™×ž×™× × ×•×ª×¨×™×`}};return f.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif'},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[f.jsx("h1",{style:{margin:0,color:"#1f2937"},children:"× ×™×”×•×œ ×”×ª×¨××•×ª"}),f.jsxs("button",{onClick:()=>i(!0),style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"16px",fontWeight:"500"},children:[f.jsx(R1,{size:20}),"×”×ª×¨××” ×—×“×©×”"]})]}),n&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:f.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",direction:"rtl"},children:[f.jsx("h3",{style:{marginTop:0},children:a?"×¢×¨×™×›×ª ×”×ª×¨××”":"×”×ª×¨××” ×—×“×©×”"}),f.jsxs("form",{onSubmit:m,children:[f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"×›×•×ª×¨×ª (××•×¤×¦×™×•× ×œ×™)"}),f.jsx("input",{type:"text",value:o.title,onChange:N=>l({...o,title:N.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"×›×•×ª×¨×ª ×”×”×ª×¨××”"})]}),f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"×”×•×“×¢×” *"}),f.jsx("textarea",{value:o.message,onChange:N=>l({...o,message:N.target.value}),required:!0,rows:4,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",resize:"vertical",boxSizing:"border-box"},placeholder:"×ª×•×›×Ÿ ×”×”×ª×¨××”"})]}),f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"×¡×•×’ ×”×ª×¨××”"}),f.jsxs("select",{value:o.type,onChange:N=>l({...o,type:N.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},children:[f.jsx("option",{value:"info",children:"×ž×™×“×¢"}),f.jsx("option",{value:"warning",children:"××–×”×¨×”"}),f.jsx("option",{value:"success",children:"×”×¦×œ×—×”"})]})]}),f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"1rem"},children:[f.jsx("input",{type:"checkbox",checked:o.hasExpiration,onChange:N=>l({...o,hasExpiration:N.target.checked,expirationDate:N.target.checked?o.expirationDate:"",expirationTime:N.target.checked?o.expirationTime:"23:59"})}),f.jsx(Ri,{size:16}),"×”×’×“×¨ ×ª××¨×™×š ×ª×¤×•×’×”"]}),o.hasExpiration&&f.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[f.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"end"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"14px"},children:"×ª××¨×™×š ×ª×¤×•×’×”"}),f.jsx("input",{type:"date",value:o.expirationDate,min:h(),onChange:N=>l({...o,expirationDate:N.target.value}),required:o.hasExpiration,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),f.jsxs("div",{style:{flex:"0 0 100px"},children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"14px"},children:"×©×¢×”"}),f.jsx("input",{type:"time",value:o.expirationTime,onChange:N=>l({...o,expirationTime:N.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]})]}),f.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"12px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[f.jsx(lo,{size:12}),"×”×”×ª×¨××” ×ª×•×¡×¨ ××•×˜×•×ž×˜×™×ª ×‘×ª××¨×™×š ×•×©×¢×” ×–×•"]})]})]}),f.jsx("div",{style:{marginBottom:"2rem"},children:f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("input",{type:"checkbox",checked:o.isActive,onChange:N=>l({...o,isActive:N.target.checked})}),"×”×ª×¨××” ×¤×¢×™×œ×”"]})}),f.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[f.jsxs("button",{type:"button",onClick:p,disabled:c,style:{backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx(xi,{size:16}),"×‘×™×˜×•×œ"]}),f.jsxs("button",{type:"submit",disabled:c||!o.message.trim(),style:{backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:c||!o.message.trim()?.6:1},children:[f.jsx(xc,{size:16}),c?"×©×•×ž×¨...":"×©×ž×•×¨"]})]})]})]})}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?f.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280",backgroundColor:"#f9fafb",borderRadius:"8px"},children:"××™×Ÿ ×”×ª×¨××•×ª ×‘×ž×¢×¨×›×ª"}):e.map(N=>{const _=I(N);return f.jsx("div",{style:{backgroundColor:"white",border:`1px solid ${_.status==="expired"?"#ef4444":"#e5e7eb"}`,borderRadius:"8px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",opacity:_.status==="expired"?.6:1},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px",flexWrap:"wrap"},children:[N.title&&f.jsx("h3",{style:{margin:0,fontSize:"18px"},children:N.title}),f.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:N.type==="warning"?"#fef3c7":N.type==="success"?"#d1fae5":"#dbeafe",color:N.type==="warning"?"#92400e":N.type==="success"?"#065f46":"#1e40af"},children:N.type==="warning"?"××–×”×¨×”":N.type==="success"?"×”×¦×œ×—×”":"×ž×™×“×¢"}),f.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:N.isActive?"#d1fae5":"#f3f4f6",color:N.isActive?"#065f46":"#6b7280"},children:N.isActive?"×¤×¢×™×œ×”":"×œ× ×¤×¢×™×œ×”"}),f.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:_.status==="expired"?"#fee2e2":_.status==="soon"?"#fef3c7":_.status==="active"?"#dbeafe":"#f3f4f6",color:_.status==="expired"?"#dc2626":_.status==="soon"?"#d97706":_.status==="active"?"#2563eb":"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[_.status!=="none"&&f.jsx(lo,{size:12}),_.text]})]}),f.jsx("p",{style:{margin:"0 0 12px 0",lineHeight:"1.5"},children:N.message}),f.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["× ×•×¦×¨ ×¢×œ ×™×“×™: ",N.createdByName," â€¢",N.createdAt&&` ${N.createdAt.toDate().toLocaleDateString("he-IL")}`,N.expirationDate&&f.jsxs("span",{children:[" â€¢ ","×™×¤×•×’ ×‘: ",N.expirationDate.toDate().toLocaleDateString("he-IL")," ","×‘×©×¢×” ",N.expirationDate.toDate().toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})]})]})]}),f.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.jsx("button",{onClick:()=>b(N),style:{backgroundColor:N.isActive?"#f59e0b":"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},title:N.isActive?"×”×©×‘×ª":"×”×¤×¢×œ",children:N.isActive?f.jsx(F2,{size:16}):f.jsx(mc,{size:16})}),f.jsx("button",{onClick:()=>v(N),style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:f.jsx(yf,{size:16})}),f.jsx("button",{onClick:()=>y(N.id),style:{backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:f.jsx(Gs,{size:16})})]})]})},N.id)})})]})},k1=async r=>{const e="https://api.cloudinary.com/v1_1/dcydl9rz8/image/upload",t=new FormData;t.append("file",r),t.append("upload_preset","GmachMedia");const n=await fetch(e,{method:"POST",body:t});if(!n.ok)throw new Error("Upload failed");return(await n.json()).secure_url},n4=({album:r,onClick:e,onDelete:t,isMainAdmin:n})=>{const[i,a]=se.useState(0),s=se.useMemo(()=>r.images||[],[r.images]);return se.useEffect(()=>{if(!s.length||s.length===1)return;const o=setInterval(()=>{a(l=>(l+1)%s.length)},4e3);return()=>clearInterval(o)},[s.length]),f.jsxs("div",{className:"album-card",onClick:e,children:[f.jsx("div",{className:"filmstrip-container",children:s.length>0?f.jsx(f.Fragment,{children:s.map((o,l)=>{let c="";return l===i?c="active":l<i?c="prev":c="next",f.jsx("div",{className:`filmstrip-image ${c}`,children:f.jsx("img",{src:o.url,alt:""})},`${o.id}-${l}`)})}):f.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#888"},children:f.jsx(W2,{size:60})})}),f.jsxs("div",{className:"album-card-info",children:[f.jsx("h3",{children:r.name}),f.jsxs("span",{className:"album-card-image-count",children:[s.length," ×ª×ž×•× ×•×ª"]})]}),n&&f.jsx("button",{onClick:t,className:"btn-delete-album",children:f.jsx(Gs,{size:18})})]})},i4=()=>{var X;const{user:r}=An(),e=(r==null?void 0:r.role)==="MainAdmin",[t,n]=se.useState([]),[i,a]=se.useState(!0),[s,o]=se.useState(!1),[l,c]=se.useState(""),[d,u]=se.useState([]),[p,h]=se.useState(null),[m,v]=se.useState(!1),[b,y]=se.useState(""),[I,N]=se.useState(!1),[_,F]=se.useState(!1),[R,U]=se.useState(0);se.useEffect(()=>{const H=Xo(mt(Ue,"galleryAlbums"),ee=>{const K=ee.docs.map(T=>({id:T.id,...T.data()})).sort((T,z)=>{var W,G;return(((W=z.createdAt)==null?void 0:W.seconds)||0)-(((G=T.createdAt)==null?void 0:G.seconds)||0)});n(K),a(!1)},ee=>{console.error("Error loading gallery albums:",ee),y("××™×¨×¢×” ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×’×œ×¨×™×”"),a(!1)});return()=>H()},[]);const j=async()=>{var H;if(l.trim()){o(!0),y("");try{const ee=[];for(const T of d){const z=await k1(T);ee.push({id:`${Date.now()}-${Math.random().toString(36).slice(2)}`,url:z,uploadedAt:Date.now(),uploadedBy:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"Admin"})}const K=((H=ee[0])==null?void 0:H.url)||null;await Ta(mt(Ue,"galleryAlbums"),{name:l.trim(),createdAt:new Date,createdBy:(r==null?void 0:r.uid)||"anonymous",createdByName:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"Admin",coverImage:K,images:ee}),c(""),u([])}catch(ee){console.error("Error creating album:",ee),y("×™×¦×™×¨×ª ××œ×‘×•× × ×›×©×œ×”, × ×¡×” ×©×•×‘")}finally{o(!1)}}},E=async(H,ee)=>{var K;if(!(!(ee!=null&&ee.length)||!p)){v(!0),y("");try{const T=[];for(const W of ee){const G=await k1(W);T.push({id:`${Date.now()}-${Math.random().toString(36).slice(2)}`,url:G,uploadedAt:Date.now(),uploadedBy:(r==null?void 0:r.username)||(r==null?void 0:r.email)||"Admin"})}const z=[...p.images||[],...T];await _r(Tt(Ue,"galleryAlbums",H),{images:z,coverImage:p.coverImage||((K=T[0])==null?void 0:K.url)||null}),h(W=>({...W,images:z}))}catch(T){console.error("Error uploading images:",T),y("×”×¢×œ××ª ×ª×ž×•× ×•×ª × ×›×©×œ×”, × ×¡×” ×©×•×‘")}finally{v(!1)}}},B=async(H,ee,K)=>{var G;if(H.stopPropagation(),!p)return;const T=(p.images||[]).filter(oe=>oe.id!==K),z=p.images.find(oe=>oe.id===K),W=z&&p.coverImage===z.url?((G=T[0])==null?void 0:G.url)||null:p.coverImage;try{await _r(Tt(Ue,"galleryAlbums",ee),{images:T,coverImage:W}),h(oe=>({...oe,images:T}))}catch(oe){console.error("Error deleting image:",oe),y("×ž×—×™×§×ª ×ª×ž×•× ×” × ×›×©×œ×”")}},k=async(H,ee)=>{if(H.stopPropagation(),!!window.confirm("×œ×ž×—×•×§ ××œ×‘×•× ×–×” ×•×›×œ ×”×ª×ž×•× ×•×ª ×‘×•?"))try{await uo(Tt(Ue,"galleryAlbums",ee)),(p==null?void 0:p.id)===ee&&(N(!1),h(null))}catch(K){console.error("Error deleting album:",K),y("×ž×—×™×§×ª ××œ×‘×•× × ×›×©×œ×”")}},S=H=>{h(H),N(!0)},D=()=>{N(!1),h(null)},w=H=>{U(H),F(!0)},M=()=>F(!1),O=se.useCallback(()=>{_&&p&&U(H=>(H+1)%p.images.length)},[_,p]),L=se.useCallback(()=>{_&&p&&U(H=>(H-1+p.images.length)%p.images.length)},[_,p]);return se.useEffect(()=>{const H=ee=>{ee.key==="ArrowRight"&&O(),ee.key==="ArrowLeft"&&L(),ee.key==="Escape"&&(M(),D())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[O,L]),f.jsx("div",{className:"gallery-page",dir:"rtl",children:f.jsxs("div",{className:"gallery-inner",children:[f.jsx("div",{className:"gallery-header",children:f.jsx("h1",{children:"×’×œ×¨×™×”"})}),b&&f.jsxs("div",{className:"error-text",children:[f.jsx(xf,{size:18})," ",b]}),e&&f.jsxs("div",{className:"admin-form",children:[f.jsxs("div",{children:[f.jsx("label",{children:"×©× ××œ×‘×•× ×—×“×©"}),f.jsx("input",{type:"text",value:l,onChange:H=>c(H.target.value),placeholder:"×œ×“×•×’×ž×”: ××™×¨×•×¢×™ ×§×™×¥ 2024"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"×ª×ž×•× ×•×ª ×œ××œ×‘×•×"}),f.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:H=>u(Array.from(H.target.files||[]))})]}),f.jsx("button",{onClick:j,disabled:s||!l.trim(),className:"btn-create-album",children:s?"×™×•×¦×¨...":f.jsxs(f.Fragment,{children:[f.jsx(z2,{size:18})," ×¦×•×¨ ××œ×‘×•×"]})})]}),i?f.jsx("div",{className:"loading-text",children:"×˜×•×¢×Ÿ ×’×œ×¨×™×”..."}):f.jsx("div",{className:"albums-grid",children:t.map(H=>f.jsx(n4,{album:H,onClick:()=>S(H),onDelete:ee=>k(ee,H.id),isMainAdmin:e},H.id))}),I&&p&&f.jsx("div",{className:"modal-backdrop",onClick:D,children:f.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:p.name}),e&&f.jsxs("label",{className:"btn-upload",children:[f.jsx(U2,{size:18}),m?"×ž×¢×œ×”...":"×”×•×¡×£ ×ª×ž×•× ×•×ª",f.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:H=>E(p.id,Array.from(H.target.files||[])),style:{display:"none"},disabled:m})]}),f.jsx("button",{onClick:D,className:"btn-close-modal",children:f.jsx(xi,{size:24})})]}),f.jsx("div",{className:"modal-body",children:(p.images||[]).length>0?f.jsxs("div",{className:"modal-gallery-layout",children:[f.jsx("div",{className:"modal-main-image-container",onClick:()=>w(R),children:f.jsx("img",{src:(X=p.images[R])==null?void 0:X.url,alt:`Selected ${R+1}`,className:"modal-main-image"})}),f.jsx("div",{className:"thumbnail-strip",children:p.images.map((H,ee)=>f.jsxs("div",{className:`thumbnail-item ${ee===R?"active":""}`,onClick:()=>U(ee),children:[f.jsx("img",{src:H.url,alt:`Thumbnail ${ee+1}`}),e&&f.jsx("button",{className:"btn-delete-thumbnail",onClick:K=>B(K,p.id,H.id),children:f.jsx(Gs,{size:14})})]},H.id))})]}):f.jsx("div",{className:"loading-text",children:"××™×Ÿ ×ª×ž×•× ×•×ª ×‘××œ×‘×•× ×–×” ×¢×“×™×™×Ÿ."})})]})}),_&&p&&f.jsxs("div",{className:"lightbox",onClick:M,children:[f.jsx("button",{className:"btn-lightbox-close",onClick:M,children:f.jsx(xi,{size:24})}),f.jsx("button",{className:"btn-lightbox-prev",onClick:H=>{H.stopPropagation(),L()},children:f.jsx($o,{size:32})}),f.jsx("div",{className:"lightbox-content",onClick:H=>H.stopPropagation(),children:f.jsx("img",{src:p.images[R].url,alt:`×ª×ž×•× ×” ${R+1}`,className:"lightbox-image"})}),f.jsx("button",{className:"btn-lightbox-next",onClick:H=>{H.stopPropagation(),O()},children:f.jsx(Go,{size:32})})]})]})})};function a4(){se.useEffect(()=>{const r="dev-2025-03-05",e=localStorage.getItem("APP_VERSION");e&&e!==r&&(console.log("ðŸ”„ ×’×¨×¡×” ×—×“×©×” ×–×•×”×ª×” â€” ×ž×¨×¢× ×Ÿ ××ª ×”××ª×¨..."),window.location.reload(!0)),localStorage.setItem("APP_VERSION",r)},[])}const o4=()=>{a4();const r=se.useRef(!1),e=se.useRef(null),t=se.useRef(null),n=D1();se.useEffect(()=>{switch(document.body.classList.remove("home-page","about-page","catalog-page","login-page","register-page","donations-page","guidelines-page","new-loan-page","calendar-page","orders-page","history-page","manage-page","gallery-page"),n.pathname){case"/":document.body.classList.add("home-page");break;case"/about":document.body.classList.add("about-page");break;case"/catalog":document.body.classList.add("catalog-page");break;case"/login":document.body.classList.add("login-page");break;case"/register":document.body.classList.add("register-page");break;case"/donations":document.body.classList.add("donations-page");break;case"/borrowing-guidelines":document.body.classList.add("guidelines-page");break;case"/new-loan":document.body.classList.add("new-loan-page");break;case"/calendar":document.body.classList.add("calendar-page");break;case"/my-orders":case"/requests":document.body.classList.add("orders-page");break;case"/history":document.body.classList.add("history-page");break;case"/gallery":document.body.classList.add("gallery-page");break;case"/manage-product":case"/manage-users":document.body.classList.add("manage-page");break;default:document.body.classList.add("other-page");break}return console.log("ðŸŽ¨ ×“×£ × ×•×›×—×™:",n.pathname,"- ×ž×—×œ×§×ª CSS:",document.body.className),()=>{document.body.classList.remove("home-page","about-page","catalog-page","login-page","register-page","donations-page","guidelines-page","new-loan-page","calendar-page","orders-page","history-page","manage-page","gallery-page","other-page")}},[n.pathname]),se.useEffect(()=>(console.log("ðŸš€ App: Setting up automatic email service..."),i(),()=>{e.current&&(clearInterval(e.current),console.log("ðŸ›‘ App: Stopped automatic email service"))}),[]);const i=()=>{const a=()=>{const l=new Date,c=l.toDateString();if(t.current!==c&&(r.current=!1,t.current=c,console.log("ðŸ”„ App: Reset daily auto-check tracking for",c)),r.current)return console.log("â­ï¸ App: Auto-check already completed today"),!1;const d=l.getHours();return d<8||d>20?(console.log(`â° App: Outside business hours (${d}:00), skipping auto-check`),!1):!0},s=async()=>{if(a())try{console.log("ðŸ¤– App: Performing automatic reminder check...");const l=await dh();l.totalSent>0?(console.log(`âœ… App: ${l.totalSent} reminder emails sent automatically`),typeof window<"u"&&window.Notification&&(Notification.permission==="default"?Notification.requestPermission():Notification.permission==="granted"&&new Notification("×ž×¢×¨×›×ª ×”×ª×–×›×•×¨×•×ª",{body:`${l.totalSent} ×ª×–×›×•×¨×•×ª × ×©×œ×—×• ××•×˜×•×ž×˜×™×ª`,icon:"/favicon.ico",tag:"email-reminder"}))):console.log("ðŸ“­ App: No reminder emails to send today"),r.current=!0}catch(l){console.error("âŒ App: Error in automatic email check:",l)}},o=setTimeout(()=>{console.log("ðŸŽ¯ App: Starting initial automatic email check..."),s()},6e4);return e.current=setInterval(()=>{console.log("ðŸ”„ App: Periodic automatic email check..."),s()},3*60*60*1e3),()=>{o&&clearTimeout(o)}};return f.jsxs(F1,{children:[f.jsx(ig,{}),f.jsxs(H2,{children:[f.jsx(tn,{path:"/alerts",element:f.jsx(r4,{})}),f.jsx(tn,{path:"/",element:f.jsx(wg,{})}),f.jsx(tn,{path:"/about",element:f.jsx(Ag,{})}),f.jsx(tn,{path:"/login",element:f.jsx(Sg,{})}),f.jsx(tn,{path:"/register",element:f.jsx(_g,{})}),f.jsx(tn,{path:"/catalog",element:f.jsx(vy,{})}),f.jsx(tn,{path:"/donations",element:f.jsx(Jw,{})}),f.jsx(tn,{path:"/borrowing-guidelines",element:f.jsx(e4,{})}),f.jsx(tn,{path:"/request",element:f.jsx(yv,{})}),f.jsx(tn,{path:"/my-orders",element:f.jsx(Av,{})}),f.jsx(tn,{path:"/requests",element:f.jsx(bv,{})}),f.jsx(tn,{path:"/new-loan",element:f.jsx(vv,{})}),f.jsx(tn,{path:"/calendar",element:f.jsx(Qv,{})}),f.jsx(tn,{path:"/manage-product",element:f.jsx(py,{})}),f.jsx(tn,{path:"/manage-users",element:f.jsx(gy,{})}),f.jsx(tn,{path:"/history",element:f.jsx(Qw,{})}),f.jsx(tn,{path:"/gallery",element:f.jsx(i4,{})})]}),f.jsx(t4,{})]})};q2.createRoot(document.getElementById("root")).render(f.jsx(j1.StrictMode,{children:f.jsx(F1,{children:f.jsx(V2,{children:f.jsx(o4,{})})})}));export{Yt as _};
