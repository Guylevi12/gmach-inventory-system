(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var fW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ov={exports:{}},I0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function cI(){if(Dw)return I0;Dw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return I0.Fragment=e,I0.jsx=t,I0.jsxs=t,I0}var Ow;function uI(){return Ow||(Ow=1,ov.exports=cI()),ov.exports}var v=uI(),sv={exports:{}},on={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function fI(){if(kw)return on;kw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function g(Q){return Q===null||typeof Q!="object"?null:(Q=p&&Q[p]||Q["@@iterator"],typeof Q=="function"?Q:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function T(Q,he,G){this.props=Q,this.context=he,this.refs=_,this.updater=G||m}T.prototype.isReactComponent={},T.prototype.setState=function(Q,he){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,he,"setState")},T.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function A(){}A.prototype=T.prototype;function D(Q,he,G){this.props=Q,this.context=he,this.refs=_,this.updater=G||m}var U=D.prototype=new A;U.constructor=D,x(U,T.prototype),U.isPureReactComponent=!0;var H=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function j(Q,he,G,$,Z,re){return G=re.ref,{$$typeof:n,type:Q,key:he,ref:G!==void 0?G:null,props:re}}function C(Q,he){return j(Q.type,he,void 0,void 0,void 0,Q.props)}function N(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===n}function L(Q){var he={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(G){return he[G]})}var R=/\/+/g;function I(Q,he){return typeof Q=="object"&&Q!==null&&Q.key!=null?L(""+Q.key):he.toString(36)}function P(){}function M(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(P,P):(Q.status="pending",Q.then(function(he){Q.status==="pending"&&(Q.status="fulfilled",Q.value=he)},function(he){Q.status==="pending"&&(Q.status="rejected",Q.reason=he)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function K(Q,he,G,$,Z){var re=typeof Q;(re==="undefined"||re==="boolean")&&(Q=null);var de=!1;if(Q===null)de=!0;else switch(re){case"bigint":case"string":case"number":de=!0;break;case"object":switch(Q.$$typeof){case n:case e:de=!0;break;case d:return de=Q._init,K(de(Q._payload),he,G,$,Z)}}if(de)return Z=Z(Q),de=$===""?"."+I(Q,0):$,H(Z)?(G="",de!=null&&(G=de.replace(R,"$&/")+"/"),K(Z,he,G,"",function(Ee){return Ee})):Z!=null&&(N(Z)&&(Z=C(Z,G+(Z.key==null||Q&&Q.key===Z.key?"":(""+Z.key).replace(R,"$&/")+"/")+de)),he.push(Z)),1;de=0;var xe=$===""?".":$+":";if(H(Q))for(var we=0;we<Q.length;we++)$=Q[we],re=xe+I($,we),de+=K($,he,G,re,Z);else if(we=g(Q),typeof we=="function")for(Q=we.call(Q),we=0;!($=Q.next()).done;)$=$.value,re=xe+I($,we++),de+=K($,he,G,re,Z);else if(re==="object"){if(typeof Q.then=="function")return K(M(Q),he,G,$,Z);throw he=String(Q),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.")}return de}function F(Q,he,G){if(Q==null)return Q;var $=[],Z=0;return K(Q,$,"","",function(re){return he.call(G,re,Z++)}),$}function z(Q){if(Q._status===-1){var he=Q._result;he=he(),he.then(function(G){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=G)},function(G){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=G)}),Q._status===-1&&(Q._status=0,Q._result=he)}if(Q._status===1)return Q._result.default;throw Q._result}var ee=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function ae(){}return on.Children={map:F,forEach:function(Q,he,G){F(Q,function(){he.apply(this,arguments)},G)},count:function(Q){var he=0;return F(Q,function(){he++}),he},toArray:function(Q){return F(Q,function(he){return he})||[]},only:function(Q){if(!N(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},on.Component=T,on.Fragment=t,on.Profiler=i,on.PureComponent=D,on.StrictMode=r,on.Suspense=c,on.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,on.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return X.H.useMemoCache(Q)}},on.cache=function(Q){return function(){return Q.apply(null,arguments)}},on.cloneElement=function(Q,he,G){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var $=x({},Q.props),Z=Q.key,re=void 0;if(he!=null)for(de in he.ref!==void 0&&(re=void 0),he.key!==void 0&&(Z=""+he.key),he)!q.call(he,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&he.ref===void 0||($[de]=he[de]);var de=arguments.length-2;if(de===1)$.children=G;else if(1<de){for(var xe=Array(de),we=0;we<de;we++)xe[we]=arguments[we+2];$.children=xe}return j(Q.type,Z,void 0,void 0,re,$)},on.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:a,_context:Q},Q},on.createElement=function(Q,he,G){var $,Z={},re=null;if(he!=null)for($ in he.key!==void 0&&(re=""+he.key),he)q.call(he,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(Z[$]=he[$]);var de=arguments.length-2;if(de===1)Z.children=G;else if(1<de){for(var xe=Array(de),we=0;we<de;we++)xe[we]=arguments[we+2];Z.children=xe}if(Q&&Q.defaultProps)for($ in de=Q.defaultProps,de)Z[$]===void 0&&(Z[$]=de[$]);return j(Q,re,void 0,void 0,null,Z)},on.createRef=function(){return{current:null}},on.forwardRef=function(Q){return{$$typeof:s,render:Q}},on.isValidElement=N,on.lazy=function(Q){return{$$typeof:d,_payload:{_status:-1,_result:Q},_init:z}},on.memo=function(Q,he){return{$$typeof:f,type:Q,compare:he===void 0?null:he}},on.startTransition=function(Q){var he=X.T,G={};X.T=G;try{var $=Q(),Z=X.S;Z!==null&&Z(G,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(ae,ee)}catch(re){ee(re)}finally{X.T=he}},on.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},on.use=function(Q){return X.H.use(Q)},on.useActionState=function(Q,he,G){return X.H.useActionState(Q,he,G)},on.useCallback=function(Q,he){return X.H.useCallback(Q,he)},on.useContext=function(Q){return X.H.useContext(Q)},on.useDebugValue=function(){},on.useDeferredValue=function(Q,he){return X.H.useDeferredValue(Q,he)},on.useEffect=function(Q,he,G){var $=X.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(Q,he)},on.useId=function(){return X.H.useId()},on.useImperativeHandle=function(Q,he,G){return X.H.useImperativeHandle(Q,he,G)},on.useInsertionEffect=function(Q,he){return X.H.useInsertionEffect(Q,he)},on.useLayoutEffect=function(Q,he){return X.H.useLayoutEffect(Q,he)},on.useMemo=function(Q,he){return X.H.useMemo(Q,he)},on.useOptimistic=function(Q,he){return X.H.useOptimistic(Q,he)},on.useReducer=function(Q,he,G){return X.H.useReducer(Q,he,G)},on.useRef=function(Q){return X.H.useRef(Q)},on.useState=function(Q){return X.H.useState(Q)},on.useSyncExternalStore=function(Q,he,G){return X.H.useSyncExternalStore(Q,he,G)},on.useTransition=function(){return X.H.useTransition()},on.version="19.1.0",on}var Pw;function om(){return Pw||(Pw=1,sv.exports=fI()),sv.exports}var ue=om();const Ln=oA(ue);var lv={exports:{}},T0={},cv={exports:{}},uv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function dI(){return Lw||(Lw=1,function(n){function e(F,z){var ee=F.length;F.push(z);e:for(;0<ee;){var ae=ee-1>>>1,Q=F[ae];if(0<i(Q,z))F[ae]=z,F[ee]=Q,ee=ae;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],ee=F.pop();if(ee!==z){F[0]=ee;e:for(var ae=0,Q=F.length,he=Q>>>1;ae<he;){var G=2*(ae+1)-1,$=F[G],Z=G+1,re=F[Z];if(0>i($,ee))Z<Q&&0>i(re,$)?(F[ae]=re,F[Z]=ee,ae=Z):(F[ae]=$,F[G]=ee,ae=G);else if(Z<Q&&0>i(re,ee))F[ae]=re,F[Z]=ee,ae=Z;else break e}}return z}function i(F,z){var ee=F.sortIndex-z.sortIndex;return ee!==0?ee:F.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var c=[],f=[],d=1,p=null,g=3,m=!1,x=!1,_=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function H(F){for(var z=t(f);z!==null;){if(z.callback===null)r(f);else if(z.startTime<=F)r(f),z.sortIndex=z.expirationTime,e(c,z);else break;z=t(f)}}function X(F){if(_=!1,H(F),!x)if(t(c)!==null)x=!0,q||(q=!0,I());else{var z=t(f);z!==null&&K(X,z.startTime-F)}}var q=!1,j=-1,C=5,N=-1;function L(){return T?!0:!(n.unstable_now()-N<C)}function R(){if(T=!1,q){var F=n.unstable_now();N=F;var z=!0;try{e:{x=!1,_&&(_=!1,D(j),j=-1),m=!0;var ee=g;try{t:{for(H(F),p=t(c);p!==null&&!(p.expirationTime>F&&L());){var ae=p.callback;if(typeof ae=="function"){p.callback=null,g=p.priorityLevel;var Q=ae(p.expirationTime<=F);if(F=n.unstable_now(),typeof Q=="function"){p.callback=Q,H(F),z=!0;break t}p===t(c)&&r(c),H(F)}else r(c);p=t(c)}if(p!==null)z=!0;else{var he=t(f);he!==null&&K(X,he.startTime-F),z=!1}}break e}finally{p=null,g=ee,m=!1}z=void 0}}finally{z?I():q=!1}}}var I;if(typeof U=="function")I=function(){U(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=R,I=function(){M.postMessage(null)}}else I=function(){A(R,0)};function K(F,z){j=A(function(){F(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(F){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var ee=g;g=z;try{return F()}finally{g=ee}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=g;g=F;try{return z()}finally{g=ee}},n.unstable_scheduleCallback=function(F,z,ee){var ae=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ae+ee:ae):ee=ae,F){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ee+Q,F={id:d++,callback:z,priorityLevel:F,startTime:ee,expirationTime:Q,sortIndex:-1},ee>ae?(F.sortIndex=ee,e(f,F),t(c)===null&&F===t(f)&&(_?(D(j),j=-1):_=!0,K(X,ee-ae))):(F.sortIndex=Q,e(c,F),x||m||(x=!0,q||(q=!0,I()))),F},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(F){var z=g;return function(){var ee=g;g=z;try{return F.apply(this,arguments)}finally{g=ee}}}}(uv)),uv}var Mw;function hI(){return Mw||(Mw=1,cv.exports=dI()),cv.exports}var fv={exports:{}},Ta={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function pI(){if(jw)return Ta;jw=1;var n=om();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ta.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ta.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},Ta.flushSync=function(c){var f=o.T,d=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=d,r.d.f()}},Ta.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Ta.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ta.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ta.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=s(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Ta.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ta.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=s(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Ta.requestFormReset=function(c){r.d.r(c)},Ta.unstable_batchedUpdates=function(c,f){return c(f)},Ta.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},Ta.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ta.version="19.1.0",Ta}var Bw;function gI(){if(Bw)return fv.exports;Bw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fv.exports=pI(),fv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function mI(){if(Fw)return T0;Fw=1;var n=hI(),e=om(),t=gI();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function s(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,y=u;;){var S=h.return;if(S===null)break;var O=S.alternate;if(O===null){if(y=S.return,y!==null){h=y;continue}break}if(S.child===O.child){for(O=S.child;O;){if(O===h)return s(S),l;if(O===y)return s(S),u;O=O.sibling}throw Error(r(188))}if(h.return!==y.return)h=S,y=O;else{for(var J=!1,ce=S.child;ce;){if(ce===h){J=!0,h=S,y=O;break}if(ce===y){J=!0,y=S,h=O;break}ce=ce.sibling}if(!J){for(ce=O.child;ce;){if(ce===h){J=!0,h=O,y=S;break}if(ce===y){J=!0,y=O,h=S;break}ce=ce.sibling}if(!J)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function f(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=f(l),u!==null)return u;l=l.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function I(l){return l===null||typeof l!="object"?null:(l=R&&l[R]||l["@@iterator"],typeof l=="function"?l:null)}var P=Symbol.for("react.client.reference");function M(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===P?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case X:return"Suspense";case q:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case m:return"Portal";case U:return(l.displayName||"Context")+".Provider";case D:return(l._context.displayName||"Context")+".Consumer";case H:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case j:return u=l.displayName||null,u!==null?u:M(l.type)||"Memo";case C:u=l._payload,l=l._init;try{return M(l(u))}catch{}}return null}var K=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ae=[],Q=-1;function he(l){return{current:l}}function G(l){0>Q||(l.current=ae[Q],ae[Q]=null,Q--)}function $(l,u){Q++,ae[Q]=l.current,l.current=u}var Z=he(null),re=he(null),de=he(null),xe=he(null);function we(l,u){switch($(de,u),$(re,l),$(Z,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?aw(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=aw(u),l=ow(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}G(Z),$(Z,l)}function Ee(){G(Z),G(re),G(de)}function Ve(l){l.memoizedState!==null&&$(xe,l);var u=Z.current,h=ow(u,l.type);u!==h&&($(re,l),$(Z,h))}function He(l){re.current===l&&(G(Z),G(re)),xe.current===l&&(G(xe),_0._currentValue=ee)}var it=Object.prototype.hasOwnProperty,ct=n.unstable_scheduleCallback,vt=n.unstable_cancelCallback,ke=n.unstable_shouldYield,ve=n.unstable_requestPaint,dt=n.unstable_now,ot=n.unstable_getCurrentPriorityLevel,Te=n.unstable_ImmediatePriority,Ke=n.unstable_UserBlockingPriority,Ge=n.unstable_NormalPriority,lt=n.unstable_LowPriority,ft=n.unstable_IdlePriority,et=n.log,Ct=n.unstable_setDisableYieldValue,yt=null,At=null;function Nt(l){if(typeof et=="function"&&Ct(l),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(yt,l)}catch{}}var xt=Math.clz32?Math.clz32:bn,It=Math.log,ut=Math.LN2;function bn(l){return l>>>=0,l===0?32:31-(It(l)/ut|0)|0}var Vt=256,Jn=4194304;function Kt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Cn(l,u,h){var y=l.pendingLanes;if(y===0)return 0;var S=0,O=l.suspendedLanes,J=l.pingedLanes;l=l.warmLanes;var ce=y&134217727;return ce!==0?(y=ce&~O,y!==0?S=Kt(y):(J&=ce,J!==0?S=Kt(J):h||(h=ce&~l,h!==0&&(S=Kt(h))))):(ce=y&~O,ce!==0?S=Kt(ce):J!==0?S=Kt(J):h||(h=y&~l,h!==0&&(S=Kt(h)))),S===0?0:u!==0&&u!==S&&(u&O)===0&&(O=S&-S,h=u&-u,O>=h||O===32&&(h&4194048)!==0)?u:S}function mi(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function sn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ma(){var l=Vt;return Vt<<=1,(Vt&4194048)===0&&(Vt=256),l}function Rn(){var l=Jn;return Jn<<=1,(Jn&62914560)===0&&(Jn=4194304),l}function Br(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function fr(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function wn(l,u,h,y,S,O){var J=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var ce=l.entanglements,ye=l.expirationTimes,je=l.hiddenUpdates;for(h=J&~h;0<h;){var Ye=31-xt(h),tt=1<<Ye;ce[Ye]=0,ye[Ye]=-1;var Fe=je[Ye];if(Fe!==null)for(je[Ye]=null,Ye=0;Ye<Fe.length;Ye++){var ze=Fe[Ye];ze!==null&&(ze.lane&=-536870913)}h&=~tt}y!==0&&Dt(l,y,0),O!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=O&~(J&~u))}function Dt(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-xt(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|h&4194090}function rn(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var y=31-xt(h),S=1<<y;S&u|l[y]&u&&(l[y]|=u),h&=~S}}function Ei(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Bn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function yr(){var l=z.p;return l!==0?l:(l=window.event,l===void 0?32:Ew(l.type))}function Va(l,u){var h=z.p;try{return z.p=l,u()}finally{z.p=h}}var bt=Math.random().toString(36).slice(2),Xn="__reactFiber$"+bt,Kn="__reactProps$"+bt,xr="__reactContainer$"+bt,Cr="__reactEvents$"+bt,Or="__reactListeners$"+bt,$r="__reactHandles$"+bt,Ts="__reactResources$"+bt,ea="__reactMarker$"+bt;function vi(l){delete l[Xn],delete l[Kn],delete l[Cr],delete l[Or],delete l[$r]}function ni(l){var u=l[Xn];if(u)return u;for(var h=l.parentNode;h;){if(u=h[xr]||h[Xn]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=uw(l);l!==null;){if(h=l[Xn])return h;l=uw(l)}return u}l=h,h=l.parentNode}return null}function Yr(l){if(l=l[Xn]||l[xr]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function ri(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function dr(l){var u=l[Ts];return u||(u=l[Ts]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Fn(l){l[ea]=!0}var Io=new Set,To={};function Fi(l,u){va(l,u),va(l+"Capture",u)}function va(l,u){for(To[l]=u,l=0;l<u.length;l++)Io.add(u[l])}var Rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fc={},Ns={};function fu(l){return it.call(Ns,l)?!0:it.call(fc,l)?!1:Rs.test(l)?Ns[l]=!0:(fc[l]=!0,!1)}function qa(l,u,h){if(fu(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function Ha(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function ii(l,u,h,y){if(y===null)l.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+y)}}var Ro,du;function Ja(l){if(Ro===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Ro=u&&u[1]||"",du=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ro+l+du}var ml=!1;function No(l,u){if(!l||ml)return"";ml=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(ze){var Fe=ze}Reflect.construct(l,[],tt)}else{try{tt.call()}catch(ze){Fe=ze}l.call(tt.prototype)}}else{try{throw Error()}catch(ze){Fe=ze}(tt=l())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(ze){if(ze&&Fe&&typeof ze.stack=="string")return[ze.stack,Fe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=y.DetermineComponentFrameRoot(),J=O[0],ce=O[1];if(J&&ce){var ye=J.split(`
`),je=ce.split(`
`);for(S=y=0;y<ye.length&&!ye[y].includes("DetermineComponentFrameRoot");)y++;for(;S<je.length&&!je[S].includes("DetermineComponentFrameRoot");)S++;if(y===ye.length||S===je.length)for(y=ye.length-1,S=je.length-1;1<=y&&0<=S&&ye[y]!==je[S];)S--;for(;1<=y&&0<=S;y--,S--)if(ye[y]!==je[S]){if(y!==1||S!==1)do if(y--,S--,0>S||ye[y]!==je[S]){var Ye=`
`+ye[y].replace(" at new "," at ");return l.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",l.displayName)),Ye}while(1<=y&&0<=S);break}}}finally{ml=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?Ja(h):""}function dc(l){switch(l.tag){case 26:case 27:case 5:return Ja(l.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 15:return No(l.type,!1);case 11:return No(l.type.render,!1);case 1:return No(l.type,!0);case 31:return Ja("Activity");default:return""}}function hr(l){try{var u="";do u+=dc(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function yi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function vl(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function hu(l){var u=vl(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),y=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var S=h.get,O=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return S.call(this)},set:function(J){y=""+J,O.call(this,J)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(J){y=""+J},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Zo(l){l._valueTracker||(l._valueTracker=hu(l))}function hc(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),y="";return l&&(y=vl(l)?l.checked?"true":"false":l.value),l=y,l!==h?(u.setValue(l),!0):!1}function Ci(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var yl=/[\n"\\]/g;function In(l){return l.replace(yl,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ii(l,u,h,y,S,O,J,ce){l.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?l.type=J:l.removeAttribute("type"),u!=null?J==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+yi(u)):l.value!==""+yi(u)&&(l.value=""+yi(u)):J!=="submit"&&J!=="reset"||l.removeAttribute("value"),u!=null?es(l,J,yi(u)):h!=null?es(l,J,yi(h)):y!=null&&l.removeAttribute("value"),S==null&&O!=null&&(l.defaultChecked=!!O),S!=null&&(l.checked=S&&typeof S!="function"&&typeof S!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?l.name=""+yi(ce):l.removeAttribute("name")}function Jo(l,u,h,y,S,O,J,ce){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),u!=null||h!=null){if(!(O!=="submit"&&O!=="reset"||u!=null))return;h=h!=null?""+yi(h):"",u=u!=null?""+yi(u):h,ce||u===l.value||(l.value=u),l.defaultValue=u}y=y??S,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=ce?l.checked:!!y,l.defaultChecked=!!y,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(l.name=J)}function es(l,u,h){u==="number"&&Ci(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function eo(l,u,h,y){if(l=l.options,u){u={};for(var S=0;S<h.length;S++)u["$"+h[S]]=!0;for(h=0;h<l.length;h++)S=u.hasOwnProperty("$"+l[h].value),l[h].selected!==S&&(l[h].selected=S),S&&y&&(l[h].defaultSelected=!0)}else{for(h=""+yi(h),u=null,S=0;S<l.length;S++){if(l[S].value===h){l[S].selected=!0,y&&(l[S].defaultSelected=!0);return}u!==null||l[S].disabled||(u=l[S])}u!==null&&(u.selected=!0)}}function zn(l,u,h){if(u!=null&&(u=""+yi(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+yi(h):""}function ts(l,u,h,y){if(u==null){if(y!=null){if(h!=null)throw Error(r(92));if(K(y)){if(1<y.length)throw Error(r(93));y=y[0]}h=y}h==null&&(h=""),u=h}h=yi(u),l.defaultValue=h,y=l.textContent,y===h&&y!==""&&y!==null&&(l.value=y)}function ya(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var Do=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pu(l,u,h){var y=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":y?l.setProperty(u,h):typeof h!="number"||h===0||Do.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function pc(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var S in u)y=u[S],u.hasOwnProperty(S)&&h[S]!==y&&pu(l,S,y)}else for(var O in u)u.hasOwnProperty(O)&&pu(l,O,u[O])}function gc(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(l){return xl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var to=null;function ir(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Po=null,no=null;function Ft(l){var u=Yr(l);if(u&&(l=u.stateNode)){var h=l[Kn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Ii(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+In(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var y=h[u];if(y!==l&&y.form===l.form){var S=y[Kn]||null;if(!S)throw Error(r(90));Ii(y,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(u=0;u<h.length;u++)y=h[u],y.form===l.form&&hc(y)}break e;case"textarea":zn(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&eo(l,!!h.multiple,u,!1)}}}var ro=!1;function gu(l,u,h){if(ro)return l(u,h);ro=!0;try{var y=l(u);return y}finally{if(ro=!1,(Po!==null||no!==null)&&(yp(),Po&&(u=Po,l=no,no=Po=null,Ft(u),l)))for(u=0;u<l.length;u++)Ft(l[u])}}function zi(l,u){var h=l.stateNode;if(h===null)return null;var y=h[Kn]||null;if(y===null)return null;h=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=!1;if(xa)try{var io={};Object.defineProperty(io,"passive",{get:function(){ta=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{ta=!1}var ba=null,ns=null,Lo=null;function mc(){if(Lo)return Lo;var l,u=ns,h=u.length,y,S="value"in ba?ba.value:ba.textContent,O=S.length;for(l=0;l<h&&u[l]===S[l];l++);var J=h-l;for(y=1;y<=J&&u[h-y]===S[O-y];y++);return Lo=S.slice(l,1<y?1-y:void 0)}function wa(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Ui(){return!0}function ao(){return!1}function Xr(l){function u(h,y,S,O,J){this._reactName=h,this._targetInst=S,this.type=y,this.nativeEvent=O,this.target=J,this.currentTarget=null;for(var ce in l)l.hasOwnProperty(ce)&&(h=l[ce],this[ce]=h?h(O):O[ce]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Ui:ao,this.isPropagationStopped=ao,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),u}var pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=Xr(pn),oo=d({},pn,{view:0,detail:0}),vc=Xr(oo),Ds,Os,Wa,Vi=d({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Wa&&(Wa&&l.type==="mousemove"?(Ds=l.screenX-Wa.screenX,Os=l.screenY-Wa.screenY):Os=Ds=0,Wa=l),Ds)},movementY:function(l){return"movementY"in l?l.movementY:Os}}),Kr=Xr(Vi),mu=d({},Vi,{dataTransfer:0}),is=Xr(mu),Ti=d({},oo,{relatedTarget:0}),as=Xr(Ti),Mo=d({},pn,{animationName:0,elapsedTime:0,pseudoElement:0}),bl=Xr(Mo),ks=d({},pn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),wl=Xr(ks),yc=d({},pn,{data:0}),Ps=Xr(yc),os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ls={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_l={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ms(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=_l[l])?!!u[l]:!1}function ss(){return Ms}var vu=d({},oo,{key:function(l){if(l.key){var u=os[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=wa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ls[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(l){return l.type==="keypress"?wa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?wa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),jo=Xr(vu),ls=d({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),js=Xr(ls),qi=d({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),Al=Xr(qi),k=d({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ne=Xr(k),me=d({},Vi,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Xr(me),Re=d({},pn,{newState:0,oldState:0}),qe=Xr(Re),at=[9,13,27,32],pt=xa&&"CompositionEvent"in window,w=null;xa&&"documentMode"in document&&(w=document.documentMode);var V=xa&&"TextEvent"in window&&!w,Y=xa&&(!pt||w&&8<w&&11>=w),le=" ",Ie=!1;function Me(l,u){switch(l){case"keyup":return at.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function st(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var zt=!1;function gn(l,u){switch(l){case"compositionend":return st(u);case"keypress":return u.which!==32?null:(Ie=!0,le);case"textInput":return l=u.data,l===le&&Ie?null:l;default:return null}}function Qt(l,u){if(zt)return l==="compositionend"||!pt&&Me(l,u)?(l=mc(),Lo=ns=ba=null,zt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Y&&u.locale!=="ko"?null:u.data;default:return null}}var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function er(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Un[l.type]:u==="textarea"}function so(l,u,h,y){Po?no?no.push(y):no=[y]:Po=y,u=Sp(u,"onChange"),0<u.length&&(h=new rs("onChange","change",null,h,y),l.push({event:h,listeners:u}))}var Fr=null,_a=null;function cs(l){ew(l,0)}function Sl(l){var u=ri(l);if(hc(u))return l}function yu(l,u){if(l==="change")return u}var xc=!1;if(xa){var ai;if(xa){var El="oninput"in document;if(!El){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),El=typeof bc.oninput=="function"}ai=El}else ai=!1;xc=ai&&(!document.documentMode||9<document.documentMode)}function wc(){Fr&&(Fr.detachEvent("onpropertychange",xu),_a=Fr=null)}function xu(l){if(l.propertyName==="value"&&Sl(_a)){var u=[];so(u,_a,l,ir(l)),gu(cs,u)}}function Aa(l,u,h){l==="focusin"?(wc(),Fr=u,_a=h,Fr.attachEvent("onpropertychange",xu)):l==="focusout"&&wc()}function qh(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Sl(_a)}function Tf(l,u){if(l==="click")return Sl(u)}function Ad(l,u){if(l==="input"||l==="change")return Sl(u)}function lo(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var xi=typeof Object.is=="function"?Object.is:lo;function Cl(l,u){if(xi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),y=Object.keys(u);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var S=h[y];if(!it.call(u,S)||!xi(l[S],u[S]))return!1}return!0}function Rf(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Bs(l,u){var h=Rf(l);l=0;for(var y;h;){if(h.nodeType===3){if(y=l+h.textContent.length,l<=u&&y>=u)return{node:h,offset:u-l};l=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Rf(h)}}function Il(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Il(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function na(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Ci(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=Ci(l.document)}return u}function Ri(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var Tl=xa&&"documentMode"in document&&11>=document.documentMode,Sa=null,Bo=null,us=null,Fo=!1;function kr(l,u,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Fo||Sa==null||Sa!==Ci(y)||(y=Sa,"selectionStart"in y&&Ri(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),us&&Cl(us,y)||(us=y,y=Sp(Bo,"onSelect"),0<y.length&&(u=new rs("onSelect","select",null,u,h),l.push({event:u,listeners:y}),u.target=Sa)))}function zo(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var Qr={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionrun:zo("Transition","TransitionRun"),transitionstart:zo("Transition","TransitionStart"),transitioncancel:zo("Transition","TransitionCancel"),transitionend:zo("Transition","TransitionEnd")},Ea={},_c={};xa&&(_c=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function fs(l){if(Ea[l])return Ea[l];if(!Qr[l])return l;var u=Qr[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in _c)return Ea[l]=u[h];return l}var bu=fs("animationend"),Rl=fs("animationiteration"),Nl=fs("animationstart"),Dl=fs("transitionrun"),Ac=fs("transitionstart"),wu=fs("transitioncancel"),Ol=fs("transitionend"),Fs=new Map,Sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sc.push("scrollEnd");function Pr(l,u){Fs.set(l,u),Fi(u,[l])}var Ga=new WeakMap;function cn(l,u){if(typeof l=="object"&&l!==null){var h=Ga.get(l);return h!==void 0?h:(u={value:l,source:u,stack:hr(u)},Ga.set(l,u),u)}return{value:l,source:u,stack:hr(u)}}var un=[],pr=0,zr=0;function co(){for(var l=pr,u=zr=pr=0;u<l;){var h=un[u];un[u++]=null;var y=un[u];un[u++]=null;var S=un[u];un[u++]=null;var O=un[u];if(un[u++]=null,y!==null&&S!==null){var J=y.pending;J===null?S.next=S:(S.next=J.next,J.next=S),y.pending=S}O!==0&&Sd(h,S,O)}}function kl(l,u,h,y){un[pr++]=l,un[pr++]=u,un[pr++]=h,un[pr++]=y,zr|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function Pl(l,u,h,y){return kl(l,u,h,y),Ec(l)}function zs(l,u){return kl(l,null,null,u),Ec(l)}function Sd(l,u,h){l.lanes|=h;var y=l.alternate;y!==null&&(y.lanes|=h);for(var S=!1,O=l.return;O!==null;)O.childLanes|=h,y=O.alternate,y!==null&&(y.childLanes|=h),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(S=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,S&&u!==null&&(S=31-xt(h),l=O.hiddenUpdates,y=l[S],y===null?l[S]=[u]:y.push(u),u.lane=h|536870912),O):null}function Ec(l){if(50<p0)throw p0=0,N2=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var bi={};function uo(l,u,h,y){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(l,u,h,y){return new uo(l,u,h,y)}function _u(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ds(l,u){var h=l.alternate;return h===null?(h=Hi(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function Nf(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Cc(l,u,h,y,S,O){var J=0;if(y=l,typeof l=="function")_u(l)&&(J=1);else if(typeof l=="string")J=KC(l,h,Z.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=Hi(31,h,u,S),l.elementType=N,l.lanes=O,l;case x:return Us(h.children,S,O,u);case _:J=8,S|=24;break;case T:return l=Hi(12,h,u,S|2),l.elementType=T,l.lanes=O,l;case X:return l=Hi(13,h,u,S),l.elementType=X,l.lanes=O,l;case q:return l=Hi(19,h,u,S),l.elementType=q,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case A:case U:J=10;break e;case D:J=9;break e;case H:J=11;break e;case j:J=14;break e;case C:J=16,y=null;break e}J=29,h=Error(r(130,l===null?"null":typeof l,"")),y=null}return u=Hi(J,h,u,S),u.elementType=l,u.type=y,u.lanes=O,u}function Us(l,u,h,y){return l=Hi(7,l,y,u),l.lanes=h,l}function Ed(l,u,h){return l=Hi(6,l,null,u),l.lanes=h,l}function Df(l,u,h){return u=Hi(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Ll=[],Vs=0,Au=null,Cd=0,fo=[],$a=0,Ic=null,qs=1,Hs="";function Tc(l,u){Ll[Vs++]=Cd,Ll[Vs++]=Au,Au=l,Cd=u}function V1(l,u,h){fo[$a++]=qs,fo[$a++]=Hs,fo[$a++]=Ic,Ic=l;var y=qs;l=Hs;var S=32-xt(y)-1;y&=~(1<<S),h+=1;var O=32-xt(u)+S;if(30<O){var J=S-S%5;O=(y&(1<<J)-1).toString(32),y>>=J,S-=J,qs=1<<32-xt(u)+S|h<<S|y,Hs=O+l}else qs=1<<O|h<<S|y,Hs=l}function Of(l){l.return!==null&&(Tc(l,1),V1(l,1,0))}function kf(l){for(;l===Au;)Au=Ll[--Vs],Ll[Vs]=null,Cd=Ll[--Vs],Ll[Vs]=null;for(;l===Ic;)Ic=fo[--$a],fo[$a]=null,Hs=fo[--$a],fo[$a]=null,qs=fo[--$a],fo[$a]=null}var oi=null,Lr=null,Mn=!1,Ml=null,hs=!1,Hh=Error(r(519));function Rc(l){var u=Error(r(418,""));throw Su(cn(u,l)),Hh}function q1(l){var u=l.stateNode,h=l.type,y=l.memoizedProps;switch(u[Xn]=l,u[Kn]=y,h){case"dialog":An("cancel",u),An("close",u);break;case"iframe":case"object":case"embed":An("load",u);break;case"video":case"audio":for(h=0;h<m0.length;h++)An(m0[h],u);break;case"source":An("error",u);break;case"img":case"image":case"link":An("error",u),An("load",u);break;case"details":An("toggle",u);break;case"input":An("invalid",u),Jo(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Zo(u);break;case"select":An("invalid",u);break;case"textarea":An("invalid",u),ts(u,y.value,y.defaultValue,y.children),Zo(u)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||y.suppressHydrationWarning===!0||iw(u.textContent,h)?(y.popover!=null&&(An("beforetoggle",u),An("toggle",u)),y.onScroll!=null&&An("scroll",u),y.onScrollEnd!=null&&An("scrollend",u),y.onClick!=null&&(u.onclick=Ep),u=!0):u=!1,u||Rc(l)}function Ws(l){for(oi=l.return;oi;)switch(oi.tag){case 5:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:oi=oi.return}}function ra(l){if(l!==oi)return!1;if(!Mn)return Ws(l),Mn=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||G2(l.type,l.memoizedProps)),h=!h),h&&Lr&&Rc(l),Ws(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){Lr=Js(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}Lr=null}}else u===27?(u=Lr,Uu(l.type)?(l=K2,K2=null,Lr=l):Lr=u):Lr=oi?Js(l.stateNode.nextSibling):null;return!0}function Ya(){Lr=oi=null,Mn=!1}function H1(){var l=Ml;return l!==null&&(go===null?go=l:go.push.apply(go,l),Ml=null),l}function Su(l){Ml===null?Ml=[l]:Ml.push(l)}var ps=he(null),wi=null,Gs=null;function jl(l,u,h){$(ps,u._currentValue),u._currentValue=h}function gs(l){l._currentValue=ps.current,G(ps)}function Id(l,u,h){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===h)break;l=l.return}}function Td(l,u,h,y){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var O=S.dependencies;if(O!==null){var J=S.child;O=O.firstContext;e:for(;O!==null;){var ce=O;O=S;for(var ye=0;ye<u.length;ye++)if(ce.context===u[ye]){O.lanes|=h,ce=O.alternate,ce!==null&&(ce.lanes|=h),Id(O.return,h,l),y||(J=null);break e}O=ce.next}}else if(S.tag===18){if(J=S.return,J===null)throw Error(r(341));J.lanes|=h,O=J.alternate,O!==null&&(O.lanes|=h),Id(J,h,l),J=null}else J=S.child;if(J!==null)J.return=S;else for(J=S;J!==null;){if(J===l){J=null;break}if(S=J.sibling,S!==null){S.return=J.return,J=S;break}J=J.return}S=J}}function Eu(l,u,h,y){l=null;for(var S=u,O=!1;S!==null;){if(!O){if((S.flags&524288)!==0)O=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var J=S.alternate;if(J===null)throw Error(r(387));if(J=J.memoizedProps,J!==null){var ce=S.type;xi(S.pendingProps.value,J.value)||(l!==null?l.push(ce):l=[ce])}}else if(S===xe.current){if(J=S.alternate,J===null)throw Error(r(387));J.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(_0):l=[_0])}S=S.return}l!==null&&Td(u,l,h,y),u.flags|=262144}function Rd(l){for(l=l.firstContext;l!==null;){if(!xi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ms(l){wi=l,Gs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function si(l){return Nd(wi,l)}function Bl(l,u){return wi===null&&ms(l),Nd(l,u)}function Nd(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Gs===null){if(l===null)throw Error(r(308));Gs=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Gs=Gs.next=u;return h}var t2=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},W1=n.unstable_scheduleCallback,n2=n.unstable_NormalPriority,li={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wh(){return{controller:new t2,data:new Map,refCount:0}}function Pf(l){l.refCount--,l.refCount===0&&W1(n2,function(){l.controller.abort()})}var Lf=null,Gh=0,Nc=0,$s=null;function r2(l,u){if(Lf===null){var h=Lf=[];Gh=0,Nc=j2(),$s={status:"pending",value:void 0,then:function(y){h.push(y)}}}return Gh++,u.then(G1,G1),u}function G1(){if(--Gh===0&&Lf!==null){$s!==null&&($s.status="fulfilled");var l=Lf;Lf=null,Nc=0,$s=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function $1(l,u){var h=[],y={status:"pending",value:null,reason:null,then:function(S){h.push(S)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var S=0;S<h.length;S++)(0,h[S])(u)},function(S){for(y.status="rejected",y.reason=S,S=0;S<h.length;S++)(0,h[S])(void 0)}),y}var b=F.S;F.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&r2(l,u),b!==null&&b(l,u)};var E=he(null);function B(){var l=E.current;return l!==null?l:Sr.pooledCache}function W(l,u){u===null?$(E,E.current):$(E,u.pool)}function te(){var l=B();return l===null?null:{parent:li._currentValue,pool:l}}var ie=Error(r(460)),oe=Error(r(474)),se=Error(r(542)),fe={then:function(){}};function ge(l){return l=l.status,l==="fulfilled"||l==="rejected"}function _e(){}function Le(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(_e,_e),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Ze(l),l;default:if(typeof u.status=="string")u.then(_e,_e);else{if(l=Sr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=y}},function(y){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Ze(l),l}throw Oe=u,ie}}var Oe=null;function Ne(){if(Oe===null)throw Error(r(459));var l=Oe;return Oe=null,l}function Ze(l){if(l===ie||l===se)throw Error(r(483))}var Ue=!1;function Ae(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ce(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function $e(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Je(l,u,h){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(or&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,u=Ec(l),Sd(l,null,h),u}return kl(l,y,u,h),Ec(l)}function Xe(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,h|=y,u.lanes=h,rn(l,h)}}function wt(l,u){var h=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var S=null,O=null;if(h=h.firstBaseUpdate,h!==null){do{var J={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};O===null?S=O=J:O=O.next=J,h=h.next}while(h!==null);O===null?S=O=u:O=O.next=u}else S=O=u;h={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:O,shared:y.shared,callbacks:y.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var ht=!1;function kt(){if(ht){var l=$s;if(l!==null)throw l}}function gt(l,u,h,y){ht=!1;var S=l.updateQueue;Ue=!1;var O=S.firstBaseUpdate,J=S.lastBaseUpdate,ce=S.shared.pending;if(ce!==null){S.shared.pending=null;var ye=ce,je=ye.next;ye.next=null,J===null?O=je:J.next=je,J=ye;var Ye=l.alternate;Ye!==null&&(Ye=Ye.updateQueue,ce=Ye.lastBaseUpdate,ce!==J&&(ce===null?Ye.firstBaseUpdate=je:ce.next=je,Ye.lastBaseUpdate=ye))}if(O!==null){var tt=S.baseState;J=0,Ye=je=ye=null,ce=O;do{var Fe=ce.lane&-536870913,ze=Fe!==ce.lane;if(ze?(On&Fe)===Fe:(y&Fe)===Fe){Fe!==0&&Fe===Nc&&(ht=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var Xt=l,Ut=ce;Fe=u;var mr=h;switch(Ut.tag){case 1:if(Xt=Ut.payload,typeof Xt=="function"){tt=Xt.call(mr,tt,Fe);break e}tt=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=Ut.payload,Fe=typeof Xt=="function"?Xt.call(mr,tt,Fe):Xt,Fe==null)break e;tt=d({},tt,Fe);break e;case 2:Ue=!0}}Fe=ce.callback,Fe!==null&&(l.flags|=64,ze&&(l.flags|=8192),ze=S.callbacks,ze===null?S.callbacks=[Fe]:ze.push(Fe))}else ze={lane:Fe,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ye===null?(je=Ye=ze,ye=tt):Ye=Ye.next=ze,J|=Fe;if(ce=ce.next,ce===null){if(ce=S.shared.pending,ce===null)break;ze=ce,ce=ze.next,ze.next=null,S.lastBaseUpdate=ze,S.shared.pending=null}}while(!0);Ye===null&&(ye=tt),S.baseState=ye,S.firstBaseUpdate=je,S.lastBaseUpdate=Ye,O===null&&(S.shared.lanes=0),ju|=J,l.lanes=J,l.memoizedState=tt}}function Nn(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function Vn(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)Nn(h[l],u)}var ln=he(null),an=he(0);function tr(l,u){l=zc,$(an,l),$(ln,u),zc=l|u.baseLanes}function qn(){$(an,zc),$(ln,ln.current)}function Zt(){zc=an.current,G(ln),G(an)}var ar=0,Lt=null,Ht=null,Tn=null,Dn=!1,_i=!1,ci=!1,Ur=0,Vr=0,Zr=null,ho=0;function Hn(){throw Error(r(321))}function Jr(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!xi(l[h],u[h]))return!1;return!0}function Uo(l,u,h,y,S,O){return ar=O,Lt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,F.H=l===null||l.memoizedState===null?B5:F5,ci=!1,O=h(y,S),ci=!1,_i&&(O=Dc(u,h,y,S)),Fl(l),O}function Fl(l){F.H=ap;var u=Ht!==null&&Ht.next!==null;if(ar=0,Tn=Ht=Lt=null,Dn=!1,Vr=0,Zr=null,u)throw Error(r(300));l===null||Wi||(l=l.dependencies,l!==null&&Rd(l)&&(Wi=!0))}function Dc(l,u,h,y){Lt=l;var S=0;do{if(_i&&(Zr=null),Vr=0,_i=!1,25<=S)throw Error(r(301));if(S+=1,Tn=Ht=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}F.H=sC,O=u(h,y)}while(_i);return O}function zl(){var l=F.H,u=l.useState()[0];return u=typeof u.then=="function"?Ul(u):u,l=l.useState()[0],(Ht!==null?Ht.memoizedState:null)!==l&&(Lt.flags|=1024),u}function Ar(){var l=Ur!==0;return Ur=0,l}function Mf(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function Dd(l){if(Dn){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Dn=!1}ar=0,Tn=Ht=Lt=null,_i=!1,Vr=Ur=0,Zr=null}function ia(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Lt.memoizedState=Tn=l:Tn=Tn.next=l,Tn}function Ir(){if(Ht===null){var l=Lt.alternate;l=l!==null?l.memoizedState:null}else l=Ht.next;var u=Tn===null?Lt.memoizedState:Tn.next;if(u!==null)Tn=u,Ht=l;else{if(l===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));Ht=l,l={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Tn===null?Lt.memoizedState=Tn=l:Tn=Tn.next=l}return Tn}function Oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(l){var u=Vr;return Vr+=1,Zr===null&&(Zr=[]),l=Le(Zr,l,u),u=Lt,(Tn===null?u.memoizedState:Tn.next)===null&&(u=u.alternate,F.H=u===null||u.memoizedState===null?B5:F5),l}function Ca(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ul(l);if(l.$$typeof===U)return si(l)}throw Error(r(438,String(l)))}function Vl(l){var u=null,h=Lt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var y=Lt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=Oc(),Lt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),y=0;y<l;y++)h[y]=L;return u.index++,h}function Ia(l,u){return typeof u=="function"?u(l):u}function jf(l){var u=Ir();return Cu(u,Ht,l)}function Cu(l,u,h){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=h;var S=l.baseQueue,O=y.pending;if(O!==null){if(S!==null){var J=S.next;S.next=O.next,O.next=J}u.baseQueue=S=O,y.pending=null}if(O=l.baseState,S===null)l.memoizedState=O;else{u=S.next;var ce=J=null,ye=null,je=u,Ye=!1;do{var tt=je.lane&-536870913;if(tt!==je.lane?(On&tt)===tt:(ar&tt)===tt){var Fe=je.revertLane;if(Fe===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),tt===Nc&&(Ye=!0);else if((ar&Fe)===Fe){je=je.next,Fe===Nc&&(Ye=!0);continue}else tt={lane:0,revertLane:je.revertLane,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},ye===null?(ce=ye=tt,J=O):ye=ye.next=tt,Lt.lanes|=Fe,ju|=Fe;tt=je.action,ci&&h(O,tt),O=je.hasEagerState?je.eagerState:h(O,tt)}else Fe={lane:tt,revertLane:je.revertLane,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},ye===null?(ce=ye=Fe,J=O):ye=ye.next=Fe,Lt.lanes|=tt,ju|=tt;je=je.next}while(je!==null&&je!==u);if(ye===null?J=O:ye.next=ce,!xi(O,l.memoizedState)&&(Wi=!0,Ye&&(h=$s,h!==null)))throw h;l.memoizedState=O,l.baseState=J,l.baseQueue=ye,y.lastRenderedState=O}return S===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Od(l){var u=Ir(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var y=h.dispatch,S=h.pending,O=u.memoizedState;if(S!==null){h.pending=null;var J=S=S.next;do O=l(O,J.action),J=J.next;while(J!==S);xi(O,u.memoizedState)||(Wi=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),h.lastRenderedState=O}return[O,y]}function Bf(l,u,h){var y=Lt,S=Ir(),O=Mn;if(O){if(h===void 0)throw Error(r(407));h=h()}else h=u();var J=!xi((Ht||S).memoizedState,h);J&&(S.memoizedState=h,Wi=!0),S=S.queue;var ce=Iu.bind(null,y,S,l);if(Nu(2048,8,ce,[l]),S.getSnapshot!==u||J||Tn!==null&&Tn.memoizedState.tag&1){if(y.flags|=2048,Xs(9,Vf(),Ff.bind(null,y,S,h,u),null),Sr===null)throw Error(r(349));O||(ar&124)!==0||kd(y,u,h)}return h}function kd(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=Lt.updateQueue,u===null?(u=Oc(),Lt.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function Ff(l,u,h,y){u.value=h,u.getSnapshot=y,Y1(u)&&X1(l)}function Iu(l,u,h){return h(function(){Y1(u)&&X1(l)})}function Y1(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!xi(l,h)}catch{return!0}}function X1(l){var u=zs(l,2);u!==null&&$o(u,l,2)}function zf(l){var u=ia();if(typeof l=="function"){var h=l;if(l=h(),ci){Nt(!0);try{h()}finally{Nt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:l},u}function Ys(l,u,h,y){return l.baseState=h,Cu(l,Ht,typeof y=="function"?y:Ia)}function i2(l,u,h,y,S){if(ip(l))throw Error(r(485));if(l=u.action,l!==null){var O={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){O.listeners.push(J)}};F.T!==null?h(!0):O.isTransition=!1,y(O),h=u.pending,h===null?(O.next=u.pending=O,K1(u,O)):(O.next=h.next,u.pending=h.next=O)}}function K1(l,u){var h=u.action,y=u.payload,S=l.state;if(u.isTransition){var O=F.T,J={};F.T=J;try{var ce=h(S,y),ye=F.S;ye!==null&&ye(J,ce),Q1(l,u,ce)}catch(je){Tu(l,u,je)}finally{F.T=O}}else try{O=h(S,y),Q1(l,u,O)}catch(je){Tu(l,u,je)}}function Q1(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){$h(l,u,y)},function(y){return Tu(l,u,y)}):$h(l,u,h)}function $h(l,u,h){u.status="fulfilled",u.value=h,Yh(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,K1(l,h)))}function Tu(l,u,h){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=h,Yh(u),u=u.next;while(u!==y)}l.action=null}function Yh(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Xh(l,u){return u}function Uf(l,u){if(Mn){var h=Sr.formState;if(h!==null){e:{var y=Lt;if(Mn){if(Lr){t:{for(var S=Lr,O=hs;S.nodeType!==8;){if(!O){S=null;break t}if(S=Js(S.nextSibling),S===null){S=null;break t}}O=S.data,S=O==="F!"||O==="F"?S:null}if(S){Lr=Js(S.nextSibling),y=S.data==="F!";break e}}Rc(y)}y=!1}y&&(u=h[0])}}return h=ia(),h.memoizedState=h.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xh,lastRenderedState:u},h.queue=y,h=L5.bind(null,Lt,y),y.dispatch=h,y=zf(!1),O=a2.bind(null,Lt,!1,y.queue),y=ia(),S={state:u,dispatch:null,action:l,pending:null},y.queue=S,h=i2.bind(null,Lt,S,O,h),S.dispatch=h,y.memoizedState=l,[u,h,!1]}function Pd(l){var u=Ir();return Ru(u,Ht,l)}function Ru(l,u,h){if(u=Cu(l,u,Xh)[0],l=jf(Ia)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Ul(u)}catch(J){throw J===ie?se:J}else y=u;u=Ir();var S=u.queue,O=S.dispatch;return h!==u.memoizedState&&(Lt.flags|=2048,Xs(9,Vf(),Z1.bind(null,S,h),null)),[y,O,l]}function Z1(l,u){l.action=u}function J1(l){var u=Ir(),h=Ht;if(h!==null)return Ru(u,h,l);Ir(),u=u.memoizedState,h=Ir();var y=h.queue.dispatch;return h.memoizedState=l,[u,y,!1]}function Xs(l,u,h,y){return l={tag:l,create:h,deps:y,inst:u,next:null},u=Lt.updateQueue,u===null&&(u=Oc(),Lt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(y=h.next,h.next=l,l.next=y,u.lastEffect=l),l}function Vf(){return{destroy:void 0,resource:void 0}}function Ld(){return Ir().memoizedState}function Vo(l,u,h,y){var S=ia();y=y===void 0?null:y,Lt.flags|=l,S.memoizedState=Xs(1|u,Vf(),h,y)}function Nu(l,u,h,y){var S=Ir();y=y===void 0?null:y;var O=S.memoizedState.inst;Ht!==null&&y!==null&&Jr(y,Ht.memoizedState.deps)?S.memoizedState=Xs(u,O,h,y):(Lt.flags|=l,S.memoizedState=Xs(1|u,O,h,y))}function Kh(l,u){Vo(8390656,8,l,u)}function ep(l,u){Nu(2048,8,l,u)}function Qh(l,u){return Nu(4,2,l,u)}function kc(l,u){return Nu(4,4,l,u)}function tp(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Zh(l,u,h){h=h!=null?h.concat([l]):null,Nu(4,4,tp.bind(null,u,l),h)}function Jh(){}function e0(l,u){var h=Ir();u=u===void 0?null:u;var y=h.memoizedState;return u!==null&&Jr(u,y[1])?y[0]:(h.memoizedState=[l,u],l)}function np(l,u){var h=Ir();u=u===void 0?null:u;var y=h.memoizedState;if(u!==null&&Jr(u,y[1]))return y[0];if(y=l(),ci){Nt(!0);try{l()}finally{Nt(!1)}}return h.memoizedState=[y,u],y}function Pc(l,u,h){return h===void 0||(ar&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=Db(),Lt.lanes|=l,ju|=l,h)}function Md(l,u,h,y){return xi(h,u)?h:ln.current!==null?(l=Pc(l,h,y),xi(l,u)||(Wi=!0),l):(ar&42)===0?(Wi=!0,l.memoizedState=h):(l=Db(),Lt.lanes|=l,ju|=l,u)}function qf(l,u,h,y,S){var O=z.p;z.p=O!==0&&8>O?O:8;var J=F.T,ce={};F.T=ce,a2(l,!1,u,h);try{var ye=S(),je=F.S;if(je!==null&&je(ce,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ye=$1(ye,y);i0(l,u,Ye,Go(l))}else i0(l,u,y,Go(l))}catch(tt){i0(l,u,{then:function(){},status:"rejected",reason:tt},Go())}finally{z.p=O,F.T=J}}function Ks(){}function vs(l,u,h,y){if(l.tag!==5)throw Error(r(476));var S=Qs(l).queue;qf(l,S,u,ee,h===null?Ks:function(){return Hf(l),h(y)})}function Qs(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:ee},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Hf(l){var u=Qs(l).next.queue;i0(l,u,{},Go())}function Wf(){return si(_0)}function t0(){return Ir().memoizedState}function rp(){return Ir().memoizedState}function n0(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Go();l=$e(h);var y=Je(u,l,h);y!==null&&($o(y,u,h),Xe(y,u,h)),u={cache:Wh()},l.payload=u;return}u=u.return}}function r0(l,u,h){var y=Go();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},ip(l)?M5(u,h):(h=Pl(l,u,h,y),h!==null&&($o(h,l,y),j5(h,u,y)))}function L5(l,u,h){var y=Go();i0(l,u,h,y)}function i0(l,u,h,y){var S={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(ip(l))M5(u,S);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer,O!==null))try{var J=u.lastRenderedState,ce=O(J,h);if(S.hasEagerState=!0,S.eagerState=ce,xi(ce,J))return kl(l,u,S,0),Sr===null&&co(),!1}catch{}finally{}if(h=Pl(l,u,S,y),h!==null)return $o(h,l,y),j5(h,u,y),!0}return!1}function a2(l,u,h,y){if(y={lane:2,revertLane:j2(),action:y,hasEagerState:!1,eagerState:null,next:null},ip(l)){if(u)throw Error(r(479))}else u=Pl(l,h,y,2),u!==null&&$o(u,l,2)}function ip(l){var u=l.alternate;return l===Lt||u!==null&&u===Lt}function M5(l,u){_i=Dn=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function j5(l,u,h){if((h&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,h|=y,u.lanes=h,rn(l,h)}}var ap={readContext:si,use:Ca,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useLayoutEffect:Hn,useInsertionEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useSyncExternalStore:Hn,useId:Hn,useHostTransitionStatus:Hn,useFormState:Hn,useActionState:Hn,useOptimistic:Hn,useMemoCache:Hn,useCacheRefresh:Hn},B5={readContext:si,use:Ca,useCallback:function(l,u){return ia().memoizedState=[l,u===void 0?null:u],l},useContext:si,useEffect:Kh,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,Vo(4194308,4,tp.bind(null,u,l),h)},useLayoutEffect:function(l,u){return Vo(4194308,4,l,u)},useInsertionEffect:function(l,u){Vo(4,2,l,u)},useMemo:function(l,u){var h=ia();u=u===void 0?null:u;var y=l();if(ci){Nt(!0);try{l()}finally{Nt(!1)}}return h.memoizedState=[y,u],y},useReducer:function(l,u,h){var y=ia();if(h!==void 0){var S=h(u);if(ci){Nt(!0);try{h(u)}finally{Nt(!1)}}}else S=u;return y.memoizedState=y.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},y.queue=l,l=l.dispatch=r0.bind(null,Lt,l),[y.memoizedState,l]},useRef:function(l){var u=ia();return l={current:l},u.memoizedState=l},useState:function(l){l=zf(l);var u=l.queue,h=L5.bind(null,Lt,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:Jh,useDeferredValue:function(l,u){var h=ia();return Pc(h,l,u)},useTransition:function(){var l=zf(!1);return l=qf.bind(null,Lt,l.queue,!0,!1),ia().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var y=Lt,S=ia();if(Mn){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),Sr===null)throw Error(r(349));(On&124)!==0||kd(y,u,h)}S.memoizedState=h;var O={value:h,getSnapshot:u};return S.queue=O,Kh(Iu.bind(null,y,O,l),[l]),y.flags|=2048,Xs(9,Vf(),Ff.bind(null,y,O,h,u),null),h},useId:function(){var l=ia(),u=Sr.identifierPrefix;if(Mn){var h=Hs,y=qs;h=(y&~(1<<32-xt(y)-1)).toString(32)+h,u="«"+u+"R"+h,h=Ur++,0<h&&(u+="H"+h.toString(32)),u+="»"}else h=ho++,u="«"+u+"r"+h.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:Wf,useFormState:Uf,useActionState:Uf,useOptimistic:function(l){var u=ia();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=a2.bind(null,Lt,!0,h),h.dispatch=u,[l,u]},useMemoCache:Vl,useCacheRefresh:function(){return ia().memoizedState=n0.bind(null,Lt)}},F5={readContext:si,use:Ca,useCallback:e0,useContext:si,useEffect:ep,useImperativeHandle:Zh,useInsertionEffect:Qh,useLayoutEffect:kc,useMemo:np,useReducer:jf,useRef:Ld,useState:function(){return jf(Ia)},useDebugValue:Jh,useDeferredValue:function(l,u){var h=Ir();return Md(h,Ht.memoizedState,l,u)},useTransition:function(){var l=jf(Ia)[0],u=Ir().memoizedState;return[typeof l=="boolean"?l:Ul(l),u]},useSyncExternalStore:Bf,useId:t0,useHostTransitionStatus:Wf,useFormState:Pd,useActionState:Pd,useOptimistic:function(l,u){var h=Ir();return Ys(h,Ht,l,u)},useMemoCache:Vl,useCacheRefresh:rp},sC={readContext:si,use:Ca,useCallback:e0,useContext:si,useEffect:ep,useImperativeHandle:Zh,useInsertionEffect:Qh,useLayoutEffect:kc,useMemo:np,useReducer:Od,useRef:Ld,useState:function(){return Od(Ia)},useDebugValue:Jh,useDeferredValue:function(l,u){var h=Ir();return Ht===null?Pc(h,l,u):Md(h,Ht.memoizedState,l,u)},useTransition:function(){var l=Od(Ia)[0],u=Ir().memoizedState;return[typeof l=="boolean"?l:Ul(l),u]},useSyncExternalStore:Bf,useId:t0,useHostTransitionStatus:Wf,useFormState:J1,useActionState:J1,useOptimistic:function(l,u){var h=Ir();return Ht!==null?Ys(h,Ht,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:Vl,useCacheRefresh:rp},jd=null,a0=0;function op(l){var u=a0;return a0+=1,jd===null&&(jd=[]),Le(jd,l,u)}function o0(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function sp(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function z5(l){var u=l._init;return u(l._payload)}function U5(l){function u(De,Se){if(l){var Pe=De.deletions;Pe===null?(De.deletions=[Se],De.flags|=16):Pe.push(Se)}}function h(De,Se){if(!l)return null;for(;Se!==null;)u(De,Se),Se=Se.sibling;return null}function y(De){for(var Se=new Map;De!==null;)De.key!==null?Se.set(De.key,De):Se.set(De.index,De),De=De.sibling;return Se}function S(De,Se){return De=ds(De,Se),De.index=0,De.sibling=null,De}function O(De,Se,Pe){return De.index=Pe,l?(Pe=De.alternate,Pe!==null?(Pe=Pe.index,Pe<Se?(De.flags|=67108866,Se):Pe):(De.flags|=67108866,Se)):(De.flags|=1048576,Se)}function J(De){return l&&De.alternate===null&&(De.flags|=67108866),De}function ce(De,Se,Pe,Qe){return Se===null||Se.tag!==6?(Se=Ed(Pe,De.mode,Qe),Se.return=De,Se):(Se=S(Se,Pe),Se.return=De,Se)}function ye(De,Se,Pe,Qe){var Tt=Pe.type;return Tt===x?Ye(De,Se,Pe.props.children,Qe,Pe.key):Se!==null&&(Se.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===C&&z5(Tt)===Se.type)?(Se=S(Se,Pe.props),o0(Se,Pe),Se.return=De,Se):(Se=Cc(Pe.type,Pe.key,Pe.props,null,De.mode,Qe),o0(Se,Pe),Se.return=De,Se)}function je(De,Se,Pe,Qe){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Pe.containerInfo||Se.stateNode.implementation!==Pe.implementation?(Se=Df(Pe,De.mode,Qe),Se.return=De,Se):(Se=S(Se,Pe.children||[]),Se.return=De,Se)}function Ye(De,Se,Pe,Qe,Tt){return Se===null||Se.tag!==7?(Se=Us(Pe,De.mode,Qe,Tt),Se.return=De,Se):(Se=S(Se,Pe),Se.return=De,Se)}function tt(De,Se,Pe){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=Ed(""+Se,De.mode,Pe),Se.return=De,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case g:return Pe=Cc(Se.type,Se.key,Se.props,null,De.mode,Pe),o0(Pe,Se),Pe.return=De,Pe;case m:return Se=Df(Se,De.mode,Pe),Se.return=De,Se;case C:var Qe=Se._init;return Se=Qe(Se._payload),tt(De,Se,Pe)}if(K(Se)||I(Se))return Se=Us(Se,De.mode,Pe,null),Se.return=De,Se;if(typeof Se.then=="function")return tt(De,op(Se),Pe);if(Se.$$typeof===U)return tt(De,Bl(De,Se),Pe);sp(De,Se)}return null}function Fe(De,Se,Pe,Qe){var Tt=Se!==null?Se.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Tt!==null?null:ce(De,Se,""+Pe,Qe);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case g:return Pe.key===Tt?ye(De,Se,Pe,Qe):null;case m:return Pe.key===Tt?je(De,Se,Pe,Qe):null;case C:return Tt=Pe._init,Pe=Tt(Pe._payload),Fe(De,Se,Pe,Qe)}if(K(Pe)||I(Pe))return Tt!==null?null:Ye(De,Se,Pe,Qe,null);if(typeof Pe.then=="function")return Fe(De,Se,op(Pe),Qe);if(Pe.$$typeof===U)return Fe(De,Se,Bl(De,Pe),Qe);sp(De,Pe)}return null}function ze(De,Se,Pe,Qe,Tt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return De=De.get(Pe)||null,ce(Se,De,""+Qe,Tt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:return De=De.get(Qe.key===null?Pe:Qe.key)||null,ye(Se,De,Qe,Tt);case m:return De=De.get(Qe.key===null?Pe:Qe.key)||null,je(Se,De,Qe,Tt);case C:var mn=Qe._init;return Qe=mn(Qe._payload),ze(De,Se,Pe,Qe,Tt)}if(K(Qe)||I(Qe))return De=De.get(Pe)||null,Ye(Se,De,Qe,Tt,null);if(typeof Qe.then=="function")return ze(De,Se,Pe,op(Qe),Tt);if(Qe.$$typeof===U)return ze(De,Se,Pe,Bl(Se,Qe),Tt);sp(Se,Qe)}return null}function Xt(De,Se,Pe,Qe){for(var Tt=null,mn=null,Pt=Se,qt=Se=0,$i=null;Pt!==null&&qt<Pe.length;qt++){Pt.index>qt?($i=Pt,Pt=null):$i=Pt.sibling;var Wn=Fe(De,Pt,Pe[qt],Qe);if(Wn===null){Pt===null&&(Pt=$i);break}l&&Pt&&Wn.alternate===null&&u(De,Pt),Se=O(Wn,Se,qt),mn===null?Tt=Wn:mn.sibling=Wn,mn=Wn,Pt=$i}if(qt===Pe.length)return h(De,Pt),Mn&&Tc(De,qt),Tt;if(Pt===null){for(;qt<Pe.length;qt++)Pt=tt(De,Pe[qt],Qe),Pt!==null&&(Se=O(Pt,Se,qt),mn===null?Tt=Pt:mn.sibling=Pt,mn=Pt);return Mn&&Tc(De,qt),Tt}for(Pt=y(Pt);qt<Pe.length;qt++)$i=ze(Pt,De,qt,Pe[qt],Qe),$i!==null&&(l&&$i.alternate!==null&&Pt.delete($i.key===null?qt:$i.key),Se=O($i,Se,qt),mn===null?Tt=$i:mn.sibling=$i,mn=$i);return l&&Pt.forEach(function(Gu){return u(De,Gu)}),Mn&&Tc(De,qt),Tt}function Ut(De,Se,Pe,Qe){if(Pe==null)throw Error(r(151));for(var Tt=null,mn=null,Pt=Se,qt=Se=0,$i=null,Wn=Pe.next();Pt!==null&&!Wn.done;qt++,Wn=Pe.next()){Pt.index>qt?($i=Pt,Pt=null):$i=Pt.sibling;var Gu=Fe(De,Pt,Wn.value,Qe);if(Gu===null){Pt===null&&(Pt=$i);break}l&&Pt&&Gu.alternate===null&&u(De,Pt),Se=O(Gu,Se,qt),mn===null?Tt=Gu:mn.sibling=Gu,mn=Gu,Pt=$i}if(Wn.done)return h(De,Pt),Mn&&Tc(De,qt),Tt;if(Pt===null){for(;!Wn.done;qt++,Wn=Pe.next())Wn=tt(De,Wn.value,Qe),Wn!==null&&(Se=O(Wn,Se,qt),mn===null?Tt=Wn:mn.sibling=Wn,mn=Wn);return Mn&&Tc(De,qt),Tt}for(Pt=y(Pt);!Wn.done;qt++,Wn=Pe.next())Wn=ze(Pt,De,qt,Wn.value,Qe),Wn!==null&&(l&&Wn.alternate!==null&&Pt.delete(Wn.key===null?qt:Wn.key),Se=O(Wn,Se,qt),mn===null?Tt=Wn:mn.sibling=Wn,mn=Wn);return l&&Pt.forEach(function(lI){return u(De,lI)}),Mn&&Tc(De,qt),Tt}function mr(De,Se,Pe,Qe){if(typeof Pe=="object"&&Pe!==null&&Pe.type===x&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case g:e:{for(var Tt=Pe.key;Se!==null;){if(Se.key===Tt){if(Tt=Pe.type,Tt===x){if(Se.tag===7){h(De,Se.sibling),Qe=S(Se,Pe.props.children),Qe.return=De,De=Qe;break e}}else if(Se.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===C&&z5(Tt)===Se.type){h(De,Se.sibling),Qe=S(Se,Pe.props),o0(Qe,Pe),Qe.return=De,De=Qe;break e}h(De,Se);break}else u(De,Se);Se=Se.sibling}Pe.type===x?(Qe=Us(Pe.props.children,De.mode,Qe,Pe.key),Qe.return=De,De=Qe):(Qe=Cc(Pe.type,Pe.key,Pe.props,null,De.mode,Qe),o0(Qe,Pe),Qe.return=De,De=Qe)}return J(De);case m:e:{for(Tt=Pe.key;Se!==null;){if(Se.key===Tt)if(Se.tag===4&&Se.stateNode.containerInfo===Pe.containerInfo&&Se.stateNode.implementation===Pe.implementation){h(De,Se.sibling),Qe=S(Se,Pe.children||[]),Qe.return=De,De=Qe;break e}else{h(De,Se);break}else u(De,Se);Se=Se.sibling}Qe=Df(Pe,De.mode,Qe),Qe.return=De,De=Qe}return J(De);case C:return Tt=Pe._init,Pe=Tt(Pe._payload),mr(De,Se,Pe,Qe)}if(K(Pe))return Xt(De,Se,Pe,Qe);if(I(Pe)){if(Tt=I(Pe),typeof Tt!="function")throw Error(r(150));return Pe=Tt.call(Pe),Ut(De,Se,Pe,Qe)}if(typeof Pe.then=="function")return mr(De,Se,op(Pe),Qe);if(Pe.$$typeof===U)return mr(De,Se,Bl(De,Pe),Qe);sp(De,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,Se!==null&&Se.tag===6?(h(De,Se.sibling),Qe=S(Se,Pe),Qe.return=De,De=Qe):(h(De,Se),Qe=Ed(Pe,De.mode,Qe),Qe.return=De,De=Qe),J(De)):h(De,Se)}return function(De,Se,Pe,Qe){try{a0=0;var Tt=mr(De,Se,Pe,Qe);return jd=null,Tt}catch(Pt){if(Pt===ie||Pt===se)throw Pt;var mn=Hi(29,Pt,null,De.mode);return mn.lanes=Qe,mn.return=De,mn}finally{}}}var Bd=U5(!0),V5=U5(!1),ys=he(null),ql=null;function Du(l){var u=l.alternate;$(Ni,Ni.current&1),$(ys,l),ql===null&&(u===null||ln.current!==null||u.memoizedState!==null)&&(ql=l)}function q5(l){if(l.tag===22){if($(Ni,Ni.current),$(ys,l),ql===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(ql=l)}}else Ou()}function Ou(){$(Ni,Ni.current),$(ys,ys.current)}function Lc(l){G(ys),ql===l&&(ql=null),G(Ni)}var Ni=he(0);function lp(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||X2(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function o2(l,u,h,y){u=l.memoizedState,h=h(y,u),h=h==null?u:d({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var s2={enqueueSetState:function(l,u,h){l=l._reactInternals;var y=Go(),S=$e(y);S.payload=u,h!=null&&(S.callback=h),u=Je(l,S,y),u!==null&&($o(u,l,y),Xe(u,l,y))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var y=Go(),S=$e(y);S.tag=1,S.payload=u,h!=null&&(S.callback=h),u=Je(l,S,y),u!==null&&($o(u,l,y),Xe(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Go(),y=$e(h);y.tag=2,u!=null&&(y.callback=u),u=Je(l,y,h),u!==null&&($o(u,l,h),Xe(u,l,h))}};function H5(l,u,h,y,S,O,J){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,O,J):u.prototype&&u.prototype.isPureReactComponent?!Cl(h,y)||!Cl(S,O):!0}function W5(l,u,h,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,y),u.state!==l&&s2.enqueueReplaceState(u,u.state,null)}function Gf(l,u){var h=u;if("ref"in u){h={};for(var y in u)y!=="ref"&&(h[y]=u[y])}if(l=l.defaultProps){h===u&&(h=d({},h));for(var S in l)h[S]===void 0&&(h[S]=l[S])}return h}var cp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function G5(l){cp(l)}function $5(l){console.error(l)}function Y5(l){cp(l)}function up(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function X5(l,u,h){try{var y=l.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function l2(l,u,h){return h=$e(h),h.tag=3,h.payload={element:null},h.callback=function(){up(l,u)},h}function K5(l){return l=$e(l),l.tag=3,l}function Q5(l,u,h,y){var S=h.type.getDerivedStateFromError;if(typeof S=="function"){var O=y.value;l.payload=function(){return S(O)},l.callback=function(){X5(u,h,y)}}var J=h.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(l.callback=function(){X5(u,h,y),typeof S!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this));var ce=y.stack;this.componentDidCatch(y.value,{componentStack:ce!==null?ce:""})})}function lC(l,u,h,y,S){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=h.alternate,u!==null&&Eu(u,h,S,!0),h=ys.current,h!==null){switch(h.tag){case 13:return ql===null?O2():h.alternate===null&&ei===0&&(ei=3),h.flags&=-257,h.flags|=65536,h.lanes=S,y===fe?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([y]):u.add(y),P2(l,y,S)),!1;case 22:return h.flags|=65536,y===fe?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([y]):h.add(y)),P2(l,y,S)),!1}throw Error(r(435,h.tag))}return P2(l,y,S),O2(),!1}if(Mn)return u=ys.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,y!==Hh&&(l=Error(r(422),{cause:y}),Su(cn(l,h)))):(y!==Hh&&(u=Error(r(423),{cause:y}),Su(cn(u,h))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,y=cn(y,h),S=l2(l.stateNode,y,S),wt(l,S),ei!==4&&(ei=2)),!1;var O=Error(r(520),{cause:y});if(O=cn(O,h),h0===null?h0=[O]:h0.push(O),ei!==4&&(ei=2),u===null)return!0;y=cn(y,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=S&-S,h.lanes|=l,l=l2(h.stateNode,y,l),wt(h,l),!1;case 1:if(u=h.type,O=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Bu===null||!Bu.has(O))))return h.flags|=65536,S&=-S,h.lanes|=S,S=K5(S),Q5(S,l,h,y),wt(h,S),!1}h=h.return}while(h!==null);return!1}var Z5=Error(r(461)),Wi=!1;function aa(l,u,h,y){u.child=l===null?V5(u,null,h,y):Bd(u,l.child,h,y)}function J5(l,u,h,y,S){h=h.render;var O=u.ref;if("ref"in y){var J={};for(var ce in y)ce!=="ref"&&(J[ce]=y[ce])}else J=y;return ms(u),y=Uo(l,u,h,J,O,S),ce=Ar(),l!==null&&!Wi?(Mf(l,u,S),Mc(l,u,S)):(Mn&&ce&&Of(u),u.flags|=1,aa(l,u,y,S),u.child)}function eb(l,u,h,y,S){if(l===null){var O=h.type;return typeof O=="function"&&!_u(O)&&O.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=O,tb(l,u,O,y,S)):(l=Cc(h.type,null,y,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(O=l.child,!m2(l,S)){var J=O.memoizedProps;if(h=h.compare,h=h!==null?h:Cl,h(J,y)&&l.ref===u.ref)return Mc(l,u,S)}return u.flags|=1,l=ds(O,y),l.ref=u.ref,l.return=u,u.child=l}function tb(l,u,h,y,S){if(l!==null){var O=l.memoizedProps;if(Cl(O,y)&&l.ref===u.ref)if(Wi=!1,u.pendingProps=y=O,m2(l,S))(l.flags&131072)!==0&&(Wi=!0);else return u.lanes=l.lanes,Mc(l,u,S)}return c2(l,u,h,y,S)}function nb(l,u,h){var y=u.pendingProps,S=y.children,O=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=O!==null?O.baseLanes|h:h,l!==null){for(S=u.child=l.child,O=0;S!==null;)O=O|S.lanes|S.childLanes,S=S.sibling;u.childLanes=O&~y}else u.childLanes=0,u.child=null;return rb(l,u,y,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&W(u,O!==null?O.cachePool:null),O!==null?tr(u,O):qn(),q5(u);else return u.lanes=u.childLanes=536870912,rb(l,u,O!==null?O.baseLanes|h:h,h)}else O!==null?(W(u,O.cachePool),tr(u,O),Ou(),u.memoizedState=null):(l!==null&&W(u,null),qn(),Ou());return aa(l,u,S,h),u.child}function rb(l,u,h,y){var S=B();return S=S===null?null:{parent:li._currentValue,pool:S},u.memoizedState={baseLanes:h,cachePool:S},l!==null&&W(u,null),qn(),q5(u),l!==null&&Eu(l,u,y,!0),null}function fp(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function c2(l,u,h,y,S){return ms(u),h=Uo(l,u,h,y,void 0,S),y=Ar(),l!==null&&!Wi?(Mf(l,u,S),Mc(l,u,S)):(Mn&&y&&Of(u),u.flags|=1,aa(l,u,h,S),u.child)}function ib(l,u,h,y,S,O){return ms(u),u.updateQueue=null,h=Dc(u,y,h,S),Fl(l),y=Ar(),l!==null&&!Wi?(Mf(l,u,O),Mc(l,u,O)):(Mn&&y&&Of(u),u.flags|=1,aa(l,u,h,O),u.child)}function ab(l,u,h,y,S){if(ms(u),u.stateNode===null){var O=bi,J=h.contextType;typeof J=="object"&&J!==null&&(O=si(J)),O=new h(y,O),u.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=s2,u.stateNode=O,O._reactInternals=u,O=u.stateNode,O.props=y,O.state=u.memoizedState,O.refs={},Ae(u),J=h.contextType,O.context=typeof J=="object"&&J!==null?si(J):bi,O.state=u.memoizedState,J=h.getDerivedStateFromProps,typeof J=="function"&&(o2(u,h,J,y),O.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(J=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),J!==O.state&&s2.enqueueReplaceState(O,O.state,null),gt(u,y,O,S),kt(),O.state=u.memoizedState),typeof O.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){O=u.stateNode;var ce=u.memoizedProps,ye=Gf(h,ce);O.props=ye;var je=O.context,Ye=h.contextType;J=bi,typeof Ye=="object"&&Ye!==null&&(J=si(Ye));var tt=h.getDerivedStateFromProps;Ye=typeof tt=="function"||typeof O.getSnapshotBeforeUpdate=="function",ce=u.pendingProps!==ce,Ye||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ce||je!==J)&&W5(u,O,y,J),Ue=!1;var Fe=u.memoizedState;O.state=Fe,gt(u,y,O,S),kt(),je=u.memoizedState,ce||Fe!==je||Ue?(typeof tt=="function"&&(o2(u,h,tt,y),je=u.memoizedState),(ye=Ue||H5(u,h,ye,y,Fe,je,J))?(Ye||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=je),O.props=y,O.state=je,O.context=J,y=ye):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{O=u.stateNode,Ce(l,u),J=u.memoizedProps,Ye=Gf(h,J),O.props=Ye,tt=u.pendingProps,Fe=O.context,je=h.contextType,ye=bi,typeof je=="object"&&je!==null&&(ye=si(je)),ce=h.getDerivedStateFromProps,(je=typeof ce=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(J!==tt||Fe!==ye)&&W5(u,O,y,ye),Ue=!1,Fe=u.memoizedState,O.state=Fe,gt(u,y,O,S),kt();var ze=u.memoizedState;J!==tt||Fe!==ze||Ue||l!==null&&l.dependencies!==null&&Rd(l.dependencies)?(typeof ce=="function"&&(o2(u,h,ce,y),ze=u.memoizedState),(Ye=Ue||H5(u,h,Ye,y,Fe,ze,ye)||l!==null&&l.dependencies!==null&&Rd(l.dependencies))?(je||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,ze,ye),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,ze,ye)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||J===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ze),O.props=y,O.state=ze,O.context=ye,y=Ye):(typeof O.componentDidUpdate!="function"||J===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=1024),y=!1)}return O=y,fp(l,u),y=(u.flags&128)!==0,O||y?(O=u.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:O.render(),u.flags|=1,l!==null&&y?(u.child=Bd(u,l.child,null,S),u.child=Bd(u,null,h,S)):aa(l,u,h,S),u.memoizedState=O.state,l=u.child):l=Mc(l,u,S),l}function ob(l,u,h,y){return Ya(),u.flags|=256,aa(l,u,h,y),u.child}var u2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function f2(l){return{baseLanes:l,cachePool:te()}}function d2(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=xs),l}function sb(l,u,h){var y=u.pendingProps,S=!1,O=(u.flags&128)!==0,J;if((J=O)||(J=l!==null&&l.memoizedState===null?!1:(Ni.current&2)!==0),J&&(S=!0,u.flags&=-129),J=(u.flags&32)!==0,u.flags&=-33,l===null){if(Mn){if(S?Du(u):Ou(),Mn){var ce=Lr,ye;if(ye=ce){e:{for(ye=ce,ce=hs;ye.nodeType!==8;){if(!ce){ce=null;break e}if(ye=Js(ye.nextSibling),ye===null){ce=null;break e}}ce=ye}ce!==null?(u.memoizedState={dehydrated:ce,treeContext:Ic!==null?{id:qs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},ye=Hi(18,null,null,0),ye.stateNode=ce,ye.return=u,u.child=ye,oi=u,Lr=null,ye=!0):ye=!1}ye||Rc(u)}if(ce=u.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return X2(ce)?u.lanes=32:u.lanes=536870912,null;Lc(u)}return ce=y.children,y=y.fallback,S?(Ou(),S=u.mode,ce=dp({mode:"hidden",children:ce},S),y=Us(y,S,h,null),ce.return=u,y.return=u,ce.sibling=y,u.child=ce,S=u.child,S.memoizedState=f2(h),S.childLanes=d2(l,J,h),u.memoizedState=u2,y):(Du(u),h2(u,ce))}if(ye=l.memoizedState,ye!==null&&(ce=ye.dehydrated,ce!==null)){if(O)u.flags&256?(Du(u),u.flags&=-257,u=p2(l,u,h)):u.memoizedState!==null?(Ou(),u.child=l.child,u.flags|=128,u=null):(Ou(),S=y.fallback,ce=u.mode,y=dp({mode:"visible",children:y.children},ce),S=Us(S,ce,h,null),S.flags|=2,y.return=u,S.return=u,y.sibling=S,u.child=y,Bd(u,l.child,null,h),y=u.child,y.memoizedState=f2(h),y.childLanes=d2(l,J,h),u.memoizedState=u2,u=S);else if(Du(u),X2(ce)){if(J=ce.nextSibling&&ce.nextSibling.dataset,J)var je=J.dgst;J=je,y=Error(r(419)),y.stack="",y.digest=J,Su({value:y,source:null,stack:null}),u=p2(l,u,h)}else if(Wi||Eu(l,u,h,!1),J=(h&l.childLanes)!==0,Wi||J){if(J=Sr,J!==null&&(y=h&-h,y=(y&42)!==0?1:Ei(y),y=(y&(J.suspendedLanes|h))!==0?0:y,y!==0&&y!==ye.retryLane))throw ye.retryLane=y,zs(l,y),$o(J,l,y),Z5;ce.data==="$?"||O2(),u=p2(l,u,h)}else ce.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=ye.treeContext,Lr=Js(ce.nextSibling),oi=u,Mn=!0,Ml=null,hs=!1,l!==null&&(fo[$a++]=qs,fo[$a++]=Hs,fo[$a++]=Ic,qs=l.id,Hs=l.overflow,Ic=u),u=h2(u,y.children),u.flags|=4096);return u}return S?(Ou(),S=y.fallback,ce=u.mode,ye=l.child,je=ye.sibling,y=ds(ye,{mode:"hidden",children:y.children}),y.subtreeFlags=ye.subtreeFlags&65011712,je!==null?S=ds(je,S):(S=Us(S,ce,h,null),S.flags|=2),S.return=u,y.return=u,y.sibling=S,u.child=y,y=S,S=u.child,ce=l.child.memoizedState,ce===null?ce=f2(h):(ye=ce.cachePool,ye!==null?(je=li._currentValue,ye=ye.parent!==je?{parent:je,pool:je}:ye):ye=te(),ce={baseLanes:ce.baseLanes|h,cachePool:ye}),S.memoizedState=ce,S.childLanes=d2(l,J,h),u.memoizedState=u2,y):(Du(u),h=l.child,l=h.sibling,h=ds(h,{mode:"visible",children:y.children}),h.return=u,h.sibling=null,l!==null&&(J=u.deletions,J===null?(u.deletions=[l],u.flags|=16):J.push(l)),u.child=h,u.memoizedState=null,h)}function h2(l,u){return u=dp({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function dp(l,u){return l=Hi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function p2(l,u,h){return Bd(u,l.child,null,h),l=h2(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function lb(l,u,h){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),Id(l.return,u,h)}function g2(l,u,h,y,S){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:S}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=y,O.tail=h,O.tailMode=S)}function cb(l,u,h){var y=u.pendingProps,S=y.revealOrder,O=y.tail;if(aa(l,u,y.children,h),y=Ni.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&lb(l,h,u);else if(l.tag===19)lb(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch($(Ni,y),S){case"forwards":for(h=u.child,S=null;h!==null;)l=h.alternate,l!==null&&lp(l)===null&&(S=h),h=h.sibling;h=S,h===null?(S=u.child,u.child=null):(S=h.sibling,h.sibling=null),g2(u,!1,S,h,O);break;case"backwards":for(h=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&lp(l)===null){u.child=S;break}l=S.sibling,S.sibling=h,h=S,S=l}g2(u,!0,h,null,O);break;case"together":g2(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Mc(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),ju|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(Eu(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=ds(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=ds(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function m2(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Rd(l)))}function cC(l,u,h){switch(u.tag){case 3:we(u,u.stateNode.containerInfo),jl(u,li,l.memoizedState.cache),Ya();break;case 27:case 5:Ve(u);break;case 4:we(u,u.stateNode.containerInfo);break;case 10:jl(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Du(u),u.flags|=128,null):(h&u.child.childLanes)!==0?sb(l,u,h):(Du(u),l=Mc(l,u,h),l!==null?l.sibling:null);Du(u);break;case 19:var S=(l.flags&128)!==0;if(y=(h&u.childLanes)!==0,y||(Eu(l,u,h,!1),y=(h&u.childLanes)!==0),S){if(y)return cb(l,u,h);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),$(Ni,Ni.current),y)break;return null;case 22:case 23:return u.lanes=0,nb(l,u,h);case 24:jl(u,li,l.memoizedState.cache)}return Mc(l,u,h)}function ub(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Wi=!0;else{if(!m2(l,h)&&(u.flags&128)===0)return Wi=!1,cC(l,u,h);Wi=(l.flags&131072)!==0}else Wi=!1,Mn&&(u.flags&1048576)!==0&&V1(u,Cd,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var y=u.elementType,S=y._init;if(y=S(y._payload),u.type=y,typeof y=="function")_u(y)?(l=Gf(y,l),u.tag=1,u=ab(null,u,y,l,h)):(u.tag=0,u=c2(null,u,y,l,h));else{if(y!=null){if(S=y.$$typeof,S===H){u.tag=11,u=J5(null,u,y,l,h);break e}else if(S===j){u.tag=14,u=eb(null,u,y,l,h);break e}}throw u=M(y)||y,Error(r(306,u,""))}}return u;case 0:return c2(l,u,u.type,u.pendingProps,h);case 1:return y=u.type,S=Gf(y,u.pendingProps),ab(l,u,y,S,h);case 3:e:{if(we(u,u.stateNode.containerInfo),l===null)throw Error(r(387));y=u.pendingProps;var O=u.memoizedState;S=O.element,Ce(l,u),gt(u,y,null,h);var J=u.memoizedState;if(y=J.cache,jl(u,li,y),y!==O.cache&&Td(u,[li],h,!0),kt(),y=J.element,O.isDehydrated)if(O={element:y,isDehydrated:!1,cache:J.cache},u.updateQueue.baseState=O,u.memoizedState=O,u.flags&256){u=ob(l,u,y,h);break e}else if(y!==S){S=cn(Error(r(424)),u),Su(S),u=ob(l,u,y,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Lr=Js(l.firstChild),oi=u,Mn=!0,Ml=null,hs=!0,h=V5(u,null,y,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Ya(),y===S){u=Mc(l,u,h);break e}aa(l,u,y,h)}u=u.child}return u;case 26:return fp(l,u),l===null?(h=pw(u.type,null,u.pendingProps,null))?u.memoizedState=h:Mn||(h=u.type,l=u.pendingProps,y=Cp(de.current).createElement(h),y[Xn]=u,y[Kn]=l,sa(y,h,l),Fn(y),u.stateNode=y):u.memoizedState=pw(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Ve(u),l===null&&Mn&&(y=u.stateNode=fw(u.type,u.pendingProps,de.current),oi=u,hs=!0,S=Lr,Uu(u.type)?(K2=S,Lr=Js(y.firstChild)):Lr=S),aa(l,u,u.pendingProps.children,h),fp(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Mn&&((S=y=Lr)&&(y=jC(y,u.type,u.pendingProps,hs),y!==null?(u.stateNode=y,oi=u,Lr=Js(y.firstChild),hs=!1,S=!0):S=!1),S||Rc(u)),Ve(u),S=u.type,O=u.pendingProps,J=l!==null?l.memoizedProps:null,y=O.children,G2(S,O)?y=null:J!==null&&G2(S,J)&&(u.flags|=32),u.memoizedState!==null&&(S=Uo(l,u,zl,null,null,h),_0._currentValue=S),fp(l,u),aa(l,u,y,h),u.child;case 6:return l===null&&Mn&&((l=h=Lr)&&(h=BC(h,u.pendingProps,hs),h!==null?(u.stateNode=h,oi=u,Lr=null,l=!0):l=!1),l||Rc(u)),null;case 13:return sb(l,u,h);case 4:return we(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Bd(u,null,y,h):aa(l,u,y,h),u.child;case 11:return J5(l,u,u.type,u.pendingProps,h);case 7:return aa(l,u,u.pendingProps,h),u.child;case 8:return aa(l,u,u.pendingProps.children,h),u.child;case 12:return aa(l,u,u.pendingProps.children,h),u.child;case 10:return y=u.pendingProps,jl(u,u.type,y.value),aa(l,u,y.children,h),u.child;case 9:return S=u.type._context,y=u.pendingProps.children,ms(u),S=si(S),y=y(S),u.flags|=1,aa(l,u,y,h),u.child;case 14:return eb(l,u,u.type,u.pendingProps,h);case 15:return tb(l,u,u.type,u.pendingProps,h);case 19:return cb(l,u,h);case 31:return y=u.pendingProps,h=u.mode,y={mode:y.mode,children:y.children},l===null?(h=dp(y,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=ds(l.child,y),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return nb(l,u,h);case 24:return ms(u),y=si(li),l===null?(S=B(),S===null&&(S=Sr,O=Wh(),S.pooledCache=O,O.refCount++,O!==null&&(S.pooledCacheLanes|=h),S=O),u.memoizedState={parent:y,cache:S},Ae(u),jl(u,li,S)):((l.lanes&h)!==0&&(Ce(l,u),gt(u,null,null,h),kt()),S=l.memoizedState,O=u.memoizedState,S.parent!==y?(S={parent:y,cache:y},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),jl(u,li,y)):(y=O.cache,jl(u,li,y),y!==S.cache&&Td(u,[li],h,!0))),aa(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function jc(l){l.flags|=4}function fb(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!xw(u)){if(u=ys.current,u!==null&&((On&4194048)===On?ql!==null:(On&62914560)!==On&&(On&536870912)===0||u!==ql))throw Oe=fe,oe;l.flags|=8192}}function hp(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Rn():536870912,l.lanes|=u,Vd|=u)}function s0(l,u){if(!Mn)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function qr(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,y=0;if(u)for(var S=l.child;S!==null;)h|=S.lanes|S.childLanes,y|=S.subtreeFlags&65011712,y|=S.flags&65011712,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)h|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=y,l.childLanes=h,u}function uC(l,u,h){var y=u.pendingProps;switch(kf(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(u),null;case 1:return qr(u),null;case 3:return h=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),gs(li),Ee(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(ra(u)?jc(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,H1())),qr(u),null;case 26:return h=u.memoizedState,l===null?(jc(u),h!==null?(qr(u),fb(u,h)):(qr(u),u.flags&=-16777217)):h?h!==l.memoizedState?(jc(u),qr(u),fb(u,h)):(qr(u),u.flags&=-16777217):(l.memoizedProps!==y&&jc(u),qr(u),u.flags&=-16777217),null;case 27:He(u),h=de.current;var S=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==y&&jc(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return qr(u),null}l=Z.current,ra(u)?q1(u):(l=fw(S,y,h),u.stateNode=l,jc(u))}return qr(u),null;case 5:if(He(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==y&&jc(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return qr(u),null}if(l=Z.current,ra(u))q1(u);else{switch(S=Cp(de.current),l){case 1:l=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=S.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?S.createElement("select",{is:y.is}):S.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?S.createElement(h,{is:y.is}):S.createElement(h)}}l[Xn]=u,l[Kn]=y;e:for(S=u.child;S!==null;){if(S.tag===5||S.tag===6)l.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===u)break e;for(;S.sibling===null;){if(S.return===null||S.return===u)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}u.stateNode=l;e:switch(sa(l,h,y),h){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&jc(u)}}return qr(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==y&&jc(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(l=de.current,ra(u)){if(l=u.stateNode,h=u.memoizedProps,y=null,S=oi,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}l[Xn]=u,l=!!(l.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||iw(l.nodeValue,h)),l||Rc(u)}else l=Cp(l).createTextNode(y),l[Xn]=u,u.stateNode=l}return qr(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=ra(u),y!==null&&y.dehydrated!==null){if(l===null){if(!S)throw Error(r(318));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[Xn]=u}else Ya(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;qr(u),S=!1}else S=H1(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(Lc(u),u):(Lc(u),null)}if(Lc(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=y!==null,l=l!==null&&l.memoizedState!==null,h){y=u.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var O=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(O=y.memoizedState.cachePool.pool),O!==S&&(y.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),hp(u,u.updateQueue),qr(u),null;case 4:return Ee(),l===null&&U2(u.stateNode.containerInfo),qr(u),null;case 10:return gs(u.type),qr(u),null;case 19:if(G(Ni),S=u.memoizedState,S===null)return qr(u),null;if(y=(u.flags&128)!==0,O=S.rendering,O===null)if(y)s0(S,!1);else{if(ei!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(O=lp(l),O!==null){for(u.flags|=128,s0(S,!1),l=O.updateQueue,u.updateQueue=l,hp(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)Nf(h,l),h=h.sibling;return $(Ni,Ni.current&1|2),u.child}l=l.sibling}S.tail!==null&&dt()>mp&&(u.flags|=128,y=!0,s0(S,!1),u.lanes=4194304)}else{if(!y)if(l=lp(O),l!==null){if(u.flags|=128,y=!0,l=l.updateQueue,u.updateQueue=l,hp(u,l),s0(S,!0),S.tail===null&&S.tailMode==="hidden"&&!O.alternate&&!Mn)return qr(u),null}else 2*dt()-S.renderingStartTime>mp&&h!==536870912&&(u.flags|=128,y=!0,s0(S,!1),u.lanes=4194304);S.isBackwards?(O.sibling=u.child,u.child=O):(l=S.last,l!==null?l.sibling=O:u.child=O,S.last=O)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=dt(),u.sibling=null,l=Ni.current,$(Ni,y?l&1|2:l&1),u):(qr(u),null);case 22:case 23:return Lc(u),Zt(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(h&536870912)!==0&&(u.flags&128)===0&&(qr(u),u.subtreeFlags&6&&(u.flags|=8192)):qr(u),h=u.updateQueue,h!==null&&hp(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==h&&(u.flags|=2048),l!==null&&G(E),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),gs(li),qr(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function fC(l,u){switch(kf(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return gs(li),Ee(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return He(u),null;case 13:if(Lc(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ya()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return G(Ni),null;case 4:return Ee(),null;case 10:return gs(u.type),null;case 22:case 23:return Lc(u),Zt(),l!==null&&G(E),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return gs(li),null;case 25:return null;default:return null}}function db(l,u){switch(kf(u),u.tag){case 3:gs(li),Ee();break;case 26:case 27:case 5:He(u);break;case 4:Ee();break;case 13:Lc(u);break;case 19:G(Ni);break;case 10:gs(u.type);break;case 22:case 23:Lc(u),Zt(),l!==null&&G(E);break;case 24:gs(li)}}function l0(l,u){try{var h=u.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var S=y.next;h=S;do{if((h.tag&l)===l){y=void 0;var O=h.create,J=h.inst;y=O(),J.destroy=y}h=h.next}while(h!==S)}}catch(ce){br(u,u.return,ce)}}function ku(l,u,h){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var O=S.next;y=O;do{if((y.tag&l)===l){var J=y.inst,ce=J.destroy;if(ce!==void 0){J.destroy=void 0,S=u;var ye=h,je=ce;try{je()}catch(Ye){br(S,ye,Ye)}}}y=y.next}while(y!==O)}}catch(Ye){br(u,u.return,Ye)}}function hb(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{Vn(u,h)}catch(y){br(l,l.return,y)}}}function pb(l,u,h){h.props=Gf(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(y){br(l,u,y)}}function c0(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof h=="function"?l.refCleanup=h(y):h.current=y}}catch(S){br(l,u,S)}}function Hl(l,u){var h=l.ref,y=l.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(S){br(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(S){br(l,u,S)}else h.current=null}function gb(l){var u=l.type,h=l.memoizedProps,y=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(S){br(l,l.return,S)}}function v2(l,u,h){try{var y=l.stateNode;OC(y,l.type,h,u),y[Kn]=u}catch(S){br(l,l.return,S)}}function mb(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Uu(l.type)||l.tag===4}function y2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||mb(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Uu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function x2(l,u,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=Ep));else if(y!==4&&(y===27&&Uu(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(x2(l,u,h),l=l.sibling;l!==null;)x2(l,u,h),l=l.sibling}function pp(l,u,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(y!==4&&(y===27&&Uu(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(pp(l,u,h),l=l.sibling;l!==null;)pp(l,u,h),l=l.sibling}function vb(l){var u=l.stateNode,h=l.memoizedProps;try{for(var y=l.type,S=u.attributes;S.length;)u.removeAttributeNode(S[0]);sa(u,y,h),u[Xn]=l,u[Kn]=h}catch(O){br(l,l.return,O)}}var Bc=!1,ui=!1,b2=!1,yb=typeof WeakSet=="function"?WeakSet:Set,Gi=null;function dC(l,u){if(l=l.containerInfo,H2=Op,l=na(l),Ri(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var S=y.anchorOffset,O=y.focusNode;y=y.focusOffset;try{h.nodeType,O.nodeType}catch{h=null;break e}var J=0,ce=-1,ye=-1,je=0,Ye=0,tt=l,Fe=null;t:for(;;){for(var ze;tt!==h||S!==0&&tt.nodeType!==3||(ce=J+S),tt!==O||y!==0&&tt.nodeType!==3||(ye=J+y),tt.nodeType===3&&(J+=tt.nodeValue.length),(ze=tt.firstChild)!==null;)Fe=tt,tt=ze;for(;;){if(tt===l)break t;if(Fe===h&&++je===S&&(ce=J),Fe===O&&++Ye===y&&(ye=J),(ze=tt.nextSibling)!==null)break;tt=Fe,Fe=tt.parentNode}tt=ze}h=ce===-1||ye===-1?null:{start:ce,end:ye}}else h=null}h=h||{start:0,end:0}}else h=null;for(W2={focusedElem:l,selectionRange:h},Op=!1,Gi=u;Gi!==null;)if(u=Gi,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Gi=l;else for(;Gi!==null;){switch(u=Gi,O=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,h=u,S=O.memoizedProps,O=O.memoizedState,y=h.stateNode;try{var Xt=Gf(h.type,S,h.elementType===h.type);l=y.getSnapshotBeforeUpdate(Xt,O),y.__reactInternalSnapshotBeforeUpdate=l}catch(Ut){br(h,h.return,Ut)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)Y2(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Y2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Gi=l;break}Gi=u.return}}function xb(l,u,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:Pu(l,h),y&4&&l0(5,h);break;case 1:if(Pu(l,h),y&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(J){br(h,h.return,J)}else{var S=Gf(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(J){br(h,h.return,J)}}y&64&&hb(h),y&512&&c0(h,h.return);break;case 3:if(Pu(l,h),y&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{Vn(l,u)}catch(J){br(h,h.return,J)}}break;case 27:u===null&&y&4&&vb(h);case 26:case 5:Pu(l,h),u===null&&y&4&&gb(h),y&512&&c0(h,h.return);break;case 12:Pu(l,h);break;case 13:Pu(l,h),y&4&&_b(l,h),y&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=wC.bind(null,h),FC(l,h))));break;case 22:if(y=h.memoizedState!==null||Bc,!y){u=u!==null&&u.memoizedState!==null||ui,S=Bc;var O=ui;Bc=y,(ui=u)&&!O?Lu(l,h,(h.subtreeFlags&8772)!==0):Pu(l,h),Bc=S,ui=O}break;case 30:break;default:Pu(l,h)}}function bb(l){var u=l.alternate;u!==null&&(l.alternate=null,bb(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&vi(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Mr=null,po=!1;function Fc(l,u,h){for(h=h.child;h!==null;)wb(l,u,h),h=h.sibling}function wb(l,u,h){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(yt,h)}catch{}switch(h.tag){case 26:ui||Hl(h,u),Fc(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:ui||Hl(h,u);var y=Mr,S=po;Uu(h.type)&&(Mr=h.stateNode,po=!1),Fc(l,u,h),y0(h.stateNode),Mr=y,po=S;break;case 5:ui||Hl(h,u);case 6:if(y=Mr,S=po,Mr=null,Fc(l,u,h),Mr=y,po=S,Mr!==null)if(po)try{(Mr.nodeType===9?Mr.body:Mr.nodeName==="HTML"?Mr.ownerDocument.body:Mr).removeChild(h.stateNode)}catch(O){br(h,u,O)}else try{Mr.removeChild(h.stateNode)}catch(O){br(h,u,O)}break;case 18:Mr!==null&&(po?(l=Mr,cw(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),C0(l)):cw(Mr,h.stateNode));break;case 4:y=Mr,S=po,Mr=h.stateNode.containerInfo,po=!0,Fc(l,u,h),Mr=y,po=S;break;case 0:case 11:case 14:case 15:ui||ku(2,h,u),ui||ku(4,h,u),Fc(l,u,h);break;case 1:ui||(Hl(h,u),y=h.stateNode,typeof y.componentWillUnmount=="function"&&pb(h,u,y)),Fc(l,u,h);break;case 21:Fc(l,u,h);break;case 22:ui=(y=ui)||h.memoizedState!==null,Fc(l,u,h),ui=y;break;default:Fc(l,u,h)}}function _b(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{C0(l)}catch(h){br(u,u.return,h)}}function hC(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new yb),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new yb),u;default:throw Error(r(435,l.tag))}}function w2(l,u){var h=hC(l);u.forEach(function(y){var S=_C.bind(null,l,y);h.has(y)||(h.add(y),y.then(S,S))})}function qo(l,u){var h=u.deletions;if(h!==null)for(var y=0;y<h.length;y++){var S=h[y],O=l,J=u,ce=J;e:for(;ce!==null;){switch(ce.tag){case 27:if(Uu(ce.type)){Mr=ce.stateNode,po=!1;break e}break;case 5:Mr=ce.stateNode,po=!1;break e;case 3:case 4:Mr=ce.stateNode.containerInfo,po=!0;break e}ce=ce.return}if(Mr===null)throw Error(r(160));wb(O,J,S),Mr=null,po=!1,O=S.alternate,O!==null&&(O.return=null),S.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Ab(u,l),u=u.sibling}var Zs=null;function Ab(l,u){var h=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:qo(u,l),Ho(l),y&4&&(ku(3,l,l.return),l0(3,l),ku(5,l,l.return));break;case 1:qo(u,l),Ho(l),y&512&&(ui||h===null||Hl(h,h.return)),y&64&&Bc&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var S=Zs;if(qo(u,l),Ho(l),y&512&&(ui||h===null||Hl(h,h.return)),y&4){var O=h!==null?h.memoizedState:null;if(y=l.memoizedState,h===null)if(y===null)if(l.stateNode===null){e:{y=l.type,h=l.memoizedProps,S=S.ownerDocument||S;t:switch(y){case"title":O=S.getElementsByTagName("title")[0],(!O||O[ea]||O[Xn]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=S.createElement(y),S.head.insertBefore(O,S.querySelector("head > title"))),sa(O,y,h),O[Xn]=l,Fn(O),y=O;break e;case"link":var J=vw("link","href",S).get(y+(h.href||""));if(J){for(var ce=0;ce<J.length;ce++)if(O=J[ce],O.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&O.getAttribute("rel")===(h.rel==null?null:h.rel)&&O.getAttribute("title")===(h.title==null?null:h.title)&&O.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){J.splice(ce,1);break t}}O=S.createElement(y),sa(O,y,h),S.head.appendChild(O);break;case"meta":if(J=vw("meta","content",S).get(y+(h.content||""))){for(ce=0;ce<J.length;ce++)if(O=J[ce],O.getAttribute("content")===(h.content==null?null:""+h.content)&&O.getAttribute("name")===(h.name==null?null:h.name)&&O.getAttribute("property")===(h.property==null?null:h.property)&&O.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&O.getAttribute("charset")===(h.charSet==null?null:h.charSet)){J.splice(ce,1);break t}}O=S.createElement(y),sa(O,y,h),S.head.appendChild(O);break;default:throw Error(r(468,y))}O[Xn]=l,Fn(O),y=O}l.stateNode=y}else yw(S,l.type,l.stateNode);else l.stateNode=mw(S,y,l.memoizedProps);else O!==y?(O===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):O.count--,y===null?yw(S,l.type,l.stateNode):mw(S,y,l.memoizedProps)):y===null&&l.stateNode!==null&&v2(l,l.memoizedProps,h.memoizedProps)}break;case 27:qo(u,l),Ho(l),y&512&&(ui||h===null||Hl(h,h.return)),h!==null&&y&4&&v2(l,l.memoizedProps,h.memoizedProps);break;case 5:if(qo(u,l),Ho(l),y&512&&(ui||h===null||Hl(h,h.return)),l.flags&32){S=l.stateNode;try{ya(S,"")}catch(ze){br(l,l.return,ze)}}y&4&&l.stateNode!=null&&(S=l.memoizedProps,v2(l,S,h!==null?h.memoizedProps:S)),y&1024&&(b2=!0);break;case 6:if(qo(u,l),Ho(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,h=l.stateNode;try{h.nodeValue=y}catch(ze){br(l,l.return,ze)}}break;case 3:if(Rp=null,S=Zs,Zs=Ip(u.containerInfo),qo(u,l),Zs=S,Ho(l),y&4&&h!==null&&h.memoizedState.isDehydrated)try{C0(u.containerInfo)}catch(ze){br(l,l.return,ze)}b2&&(b2=!1,Sb(l));break;case 4:y=Zs,Zs=Ip(l.stateNode.containerInfo),qo(u,l),Ho(l),Zs=y;break;case 12:qo(u,l),Ho(l);break;case 13:qo(u,l),Ho(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(I2=dt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,w2(l,y)));break;case 22:S=l.memoizedState!==null;var ye=h!==null&&h.memoizedState!==null,je=Bc,Ye=ui;if(Bc=je||S,ui=Ye||ye,qo(u,l),ui=Ye,Bc=je,Ho(l),y&8192)e:for(u=l.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(h===null||ye||Bc||ui||$f(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){ye=h=u;try{if(O=ye.stateNode,S)J=O.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{ce=ye.stateNode;var tt=ye.memoizedProps.style,Fe=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;ce.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(ze){br(ye,ye.return,ze)}}}else if(u.tag===6){if(h===null){ye=u;try{ye.stateNode.nodeValue=S?"":ye.memoizedProps}catch(ze){br(ye,ye.return,ze)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=l.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,w2(l,h))));break;case 19:qo(u,l),Ho(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,w2(l,y)));break;case 30:break;case 21:break;default:qo(u,l),Ho(l)}}function Ho(l){var u=l.flags;if(u&2){try{for(var h,y=l.return;y!==null;){if(mb(y)){h=y;break}y=y.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var S=h.stateNode,O=y2(l);pp(l,O,S);break;case 5:var J=h.stateNode;h.flags&32&&(ya(J,""),h.flags&=-33);var ce=y2(l);pp(l,ce,J);break;case 3:case 4:var ye=h.stateNode.containerInfo,je=y2(l);x2(l,je,ye);break;default:throw Error(r(161))}}catch(Ye){br(l,l.return,Ye)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Sb(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Sb(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Pu(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)xb(l,u.alternate,u),u=u.sibling}function $f(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:ku(4,u,u.return),$f(u);break;case 1:Hl(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&pb(u,u.return,h),$f(u);break;case 27:y0(u.stateNode);case 26:case 5:Hl(u,u.return),$f(u);break;case 22:u.memoizedState===null&&$f(u);break;case 30:$f(u);break;default:$f(u)}l=l.sibling}}function Lu(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,S=l,O=u,J=O.flags;switch(O.tag){case 0:case 11:case 15:Lu(S,O,h),l0(4,O);break;case 1:if(Lu(S,O,h),y=O,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(je){br(y,y.return,je)}if(y=O,S=y.updateQueue,S!==null){var ce=y.stateNode;try{var ye=S.shared.hiddenCallbacks;if(ye!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ye.length;S++)Nn(ye[S],ce)}catch(je){br(y,y.return,je)}}h&&J&64&&hb(O),c0(O,O.return);break;case 27:vb(O);case 26:case 5:Lu(S,O,h),h&&y===null&&J&4&&gb(O),c0(O,O.return);break;case 12:Lu(S,O,h);break;case 13:Lu(S,O,h),h&&J&4&&_b(S,O);break;case 22:O.memoizedState===null&&Lu(S,O,h),c0(O,O.return);break;case 30:break;default:Lu(S,O,h)}u=u.sibling}}function _2(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Pf(h))}function A2(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Pf(l))}function Wl(l,u,h,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Eb(l,u,h,y),u=u.sibling}function Eb(l,u,h,y){var S=u.flags;switch(u.tag){case 0:case 11:case 15:Wl(l,u,h,y),S&2048&&l0(9,u);break;case 1:Wl(l,u,h,y);break;case 3:Wl(l,u,h,y),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Pf(l)));break;case 12:if(S&2048){Wl(l,u,h,y),l=u.stateNode;try{var O=u.memoizedProps,J=O.id,ce=O.onPostCommit;typeof ce=="function"&&ce(J,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ye){br(u,u.return,ye)}}else Wl(l,u,h,y);break;case 13:Wl(l,u,h,y);break;case 23:break;case 22:O=u.stateNode,J=u.alternate,u.memoizedState!==null?O._visibility&2?Wl(l,u,h,y):u0(l,u):O._visibility&2?Wl(l,u,h,y):(O._visibility|=2,Fd(l,u,h,y,(u.subtreeFlags&10256)!==0)),S&2048&&_2(J,u);break;case 24:Wl(l,u,h,y),S&2048&&A2(u.alternate,u);break;default:Wl(l,u,h,y)}}function Fd(l,u,h,y,S){for(S=S&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var O=l,J=u,ce=h,ye=y,je=J.flags;switch(J.tag){case 0:case 11:case 15:Fd(O,J,ce,ye,S),l0(8,J);break;case 23:break;case 22:var Ye=J.stateNode;J.memoizedState!==null?Ye._visibility&2?Fd(O,J,ce,ye,S):u0(O,J):(Ye._visibility|=2,Fd(O,J,ce,ye,S)),S&&je&2048&&_2(J.alternate,J);break;case 24:Fd(O,J,ce,ye,S),S&&je&2048&&A2(J.alternate,J);break;default:Fd(O,J,ce,ye,S)}u=u.sibling}}function u0(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,y=u,S=y.flags;switch(y.tag){case 22:u0(h,y),S&2048&&_2(y.alternate,y);break;case 24:u0(h,y),S&2048&&A2(y.alternate,y);break;default:u0(h,y)}u=u.sibling}}var f0=8192;function zd(l){if(l.subtreeFlags&f0)for(l=l.child;l!==null;)Cb(l),l=l.sibling}function Cb(l){switch(l.tag){case 26:zd(l),l.flags&f0&&l.memoizedState!==null&&ZC(Zs,l.memoizedState,l.memoizedProps);break;case 5:zd(l);break;case 3:case 4:var u=Zs;Zs=Ip(l.stateNode.containerInfo),zd(l),Zs=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=f0,f0=16777216,zd(l),f0=u):zd(l));break;default:zd(l)}}function Ib(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function d0(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var y=u[h];Gi=y,Rb(y,l)}Ib(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Tb(l),l=l.sibling}function Tb(l){switch(l.tag){case 0:case 11:case 15:d0(l),l.flags&2048&&ku(9,l,l.return);break;case 3:d0(l);break;case 12:d0(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,gp(l)):d0(l);break;default:d0(l)}}function gp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var y=u[h];Gi=y,Rb(y,l)}Ib(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:ku(8,u,u.return),gp(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,gp(u));break;default:gp(u)}l=l.sibling}}function Rb(l,u){for(;Gi!==null;){var h=Gi;switch(h.tag){case 0:case 11:case 15:ku(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Pf(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Gi=y;else e:for(h=l;Gi!==null;){y=Gi;var S=y.sibling,O=y.return;if(bb(y),y===h){Gi=null;break e}if(S!==null){S.return=O,Gi=S;break e}Gi=O}}}var pC={getCacheForType:function(l){var u=si(li),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},gC=typeof WeakMap=="function"?WeakMap:Map,or=0,Sr=null,_n=null,On=0,sr=0,Wo=null,Mu=!1,Ud=!1,S2=!1,zc=0,ei=0,ju=0,Yf=0,E2=0,xs=0,Vd=0,h0=null,go=null,C2=!1,I2=0,mp=1/0,vp=null,Bu=null,oa=0,Fu=null,qd=null,Hd=0,T2=0,R2=null,Nb=null,p0=0,N2=null;function Go(){if((or&2)!==0&&On!==0)return On&-On;if(F.T!==null){var l=Nc;return l!==0?l:j2()}return yr()}function Db(){xs===0&&(xs=(On&536870912)===0||Mn?ma():536870912);var l=ys.current;return l!==null&&(l.flags|=32),xs}function $o(l,u,h){(l===Sr&&(sr===2||sr===9)||l.cancelPendingCommit!==null)&&(Wd(l,0),zu(l,On,xs,!1)),fr(l,h),((or&2)===0||l!==Sr)&&(l===Sr&&((or&2)===0&&(Yf|=h),ei===4&&zu(l,On,xs,!1)),Gl(l))}function Ob(l,u,h){if((or&6)!==0)throw Error(r(327));var y=!h&&(u&124)===0&&(u&l.expiredLanes)===0||mi(l,u),S=y?yC(l,u):k2(l,u,!0),O=y;do{if(S===0){Ud&&!y&&zu(l,u,0,!1);break}else{if(h=l.current.alternate,O&&!mC(h)){S=k2(l,u,!1),O=!1;continue}if(S===2){if(O=u,l.errorRecoveryDisabledLanes&O)var J=0;else J=l.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){u=J;e:{var ce=l;S=h0;var ye=ce.current.memoizedState.isDehydrated;if(ye&&(Wd(ce,J).flags|=256),J=k2(ce,J,!1),J!==2){if(S2&&!ye){ce.errorRecoveryDisabledLanes|=O,Yf|=O,S=4;break e}O=go,go=S,O!==null&&(go===null?go=O:go.push.apply(go,O))}S=J}if(O=!1,S!==2)continue}}if(S===1){Wd(l,0),zu(l,u,0,!0);break}e:{switch(y=l,O=S,O){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:zu(y,u,xs,!Mu);break e;case 2:go=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(S=I2+300-dt(),10<S)){if(zu(y,u,xs,!Mu),Cn(y,0,!0)!==0)break e;y.timeoutHandle=sw(kb.bind(null,y,h,go,vp,C2,u,xs,Yf,Vd,Mu,O,2,-0,0),S);break e}kb(y,h,go,vp,C2,u,xs,Yf,Vd,Mu,O,0,-0,0)}}break}while(!0);Gl(l)}function kb(l,u,h,y,S,O,J,ce,ye,je,Ye,tt,Fe,ze){if(l.timeoutHandle=-1,tt=u.subtreeFlags,(tt&8192||(tt&16785408)===16785408)&&(w0={stylesheets:null,count:0,unsuspend:QC},Cb(u),tt=JC(),tt!==null)){l.cancelPendingCommit=tt(zb.bind(null,l,u,O,h,y,S,J,ce,ye,Ye,1,Fe,ze)),zu(l,O,J,!je);return}zb(l,u,O,h,y,S,J,ce,ye)}function mC(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var S=h[y],O=S.getSnapshot;S=S.value;try{if(!xi(O(),S))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function zu(l,u,h,y){u&=~E2,u&=~Yf,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var S=u;0<S;){var O=31-xt(S),J=1<<O;y[O]=-1,S&=~J}h!==0&&Dt(l,h,u)}function yp(){return(or&6)===0?(g0(0),!1):!0}function D2(){if(_n!==null){if(sr===0)var l=_n.return;else l=_n,Gs=wi=null,Dd(l),jd=null,a0=0,l=_n;for(;l!==null;)db(l.alternate,l),l=l.return;_n=null}}function Wd(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,PC(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),D2(),Sr=l,_n=h=ds(l.current,null),On=u,sr=0,Wo=null,Mu=!1,Ud=mi(l,u),S2=!1,Vd=xs=E2=Yf=ju=ei=0,go=h0=null,C2=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var S=31-xt(y),O=1<<S;u|=l[S],y&=~O}return zc=u,co(),h}function Pb(l,u){Lt=null,F.H=ap,u===ie||u===se?(u=Ne(),sr=3):u===oe?(u=Ne(),sr=4):sr=u===Z5?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Wo=u,_n===null&&(ei=1,up(l,cn(u,l.current)))}function Lb(){var l=F.H;return F.H=ap,l===null?ap:l}function Mb(){var l=F.A;return F.A=pC,l}function O2(){ei=4,Mu||(On&4194048)!==On&&ys.current!==null||(Ud=!0),(ju&134217727)===0&&(Yf&134217727)===0||Sr===null||zu(Sr,On,xs,!1)}function k2(l,u,h){var y=or;or|=2;var S=Lb(),O=Mb();(Sr!==l||On!==u)&&(vp=null,Wd(l,u)),u=!1;var J=ei;e:do try{if(sr!==0&&_n!==null){var ce=_n,ye=Wo;switch(sr){case 8:D2(),J=6;break e;case 3:case 2:case 9:case 6:ys.current===null&&(u=!0);var je=sr;if(sr=0,Wo=null,Gd(l,ce,ye,je),h&&Ud){J=0;break e}break;default:je=sr,sr=0,Wo=null,Gd(l,ce,ye,je)}}vC(),J=ei;break}catch(Ye){Pb(l,Ye)}while(!0);return u&&l.shellSuspendCounter++,Gs=wi=null,or=y,F.H=S,F.A=O,_n===null&&(Sr=null,On=0,co()),J}function vC(){for(;_n!==null;)jb(_n)}function yC(l,u){var h=or;or|=2;var y=Lb(),S=Mb();Sr!==l||On!==u?(vp=null,mp=dt()+500,Wd(l,u)):Ud=mi(l,u);e:do try{if(sr!==0&&_n!==null){u=_n;var O=Wo;t:switch(sr){case 1:sr=0,Wo=null,Gd(l,u,O,1);break;case 2:case 9:if(ge(O)){sr=0,Wo=null,Bb(u);break}u=function(){sr!==2&&sr!==9||Sr!==l||(sr=7),Gl(l)},O.then(u,u);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:ge(O)?(sr=0,Wo=null,Bb(u)):(sr=0,Wo=null,Gd(l,u,O,7));break;case 5:var J=null;switch(_n.tag){case 26:J=_n.memoizedState;case 5:case 27:var ce=_n;if(!J||xw(J)){sr=0,Wo=null;var ye=ce.sibling;if(ye!==null)_n=ye;else{var je=ce.return;je!==null?(_n=je,xp(je)):_n=null}break t}}sr=0,Wo=null,Gd(l,u,O,5);break;case 6:sr=0,Wo=null,Gd(l,u,O,6);break;case 8:D2(),ei=6;break e;default:throw Error(r(462))}}xC();break}catch(Ye){Pb(l,Ye)}while(!0);return Gs=wi=null,F.H=y,F.A=S,or=h,_n!==null?0:(Sr=null,On=0,co(),ei)}function xC(){for(;_n!==null&&!ke();)jb(_n)}function jb(l){var u=ub(l.alternate,l,zc);l.memoizedProps=l.pendingProps,u===null?xp(l):_n=u}function Bb(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=ib(h,u,u.pendingProps,u.type,void 0,On);break;case 11:u=ib(h,u,u.pendingProps,u.type.render,u.ref,On);break;case 5:Dd(u);default:db(h,u),u=_n=Nf(u,zc),u=ub(h,u,zc)}l.memoizedProps=l.pendingProps,u===null?xp(l):_n=u}function Gd(l,u,h,y){Gs=wi=null,Dd(u),jd=null,a0=0;var S=u.return;try{if(lC(l,S,u,h,On)){ei=1,up(l,cn(h,l.current)),_n=null;return}}catch(O){if(S!==null)throw _n=S,O;ei=1,up(l,cn(h,l.current)),_n=null;return}u.flags&32768?(Mn||y===1?l=!0:Ud||(On&536870912)!==0?l=!1:(Mu=l=!0,(y===2||y===9||y===3||y===6)&&(y=ys.current,y!==null&&y.tag===13&&(y.flags|=16384))),Fb(u,l)):xp(u)}function xp(l){var u=l;do{if((u.flags&32768)!==0){Fb(u,Mu);return}l=u.return;var h=uC(u.alternate,u,zc);if(h!==null){_n=h;return}if(u=u.sibling,u!==null){_n=u;return}_n=u=l}while(u!==null);ei===0&&(ei=5)}function Fb(l,u){do{var h=fC(l.alternate,l);if(h!==null){h.flags&=32767,_n=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){_n=l;return}_n=l=h}while(l!==null);ei=6,_n=null}function zb(l,u,h,y,S,O,J,ce,ye){l.cancelPendingCommit=null;do bp();while(oa!==0);if((or&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(O=u.lanes|u.childLanes,O|=zr,wn(l,h,O,J,ce,ye),l===Sr&&(_n=Sr=null,On=0),qd=u,Fu=l,Hd=h,T2=O,R2=S,Nb=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,AC(Ge,function(){return Wb(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=F.T,F.T=null,S=z.p,z.p=2,J=or,or|=4;try{dC(l,u,h)}finally{or=J,z.p=S,F.T=y}}oa=1,Ub(),Vb(),qb()}}function Ub(){if(oa===1){oa=0;var l=Fu,u=qd,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=F.T,F.T=null;var y=z.p;z.p=2;var S=or;or|=4;try{Ab(u,l);var O=W2,J=na(l.containerInfo),ce=O.focusedElem,ye=O.selectionRange;if(J!==ce&&ce&&ce.ownerDocument&&Il(ce.ownerDocument.documentElement,ce)){if(ye!==null&&Ri(ce)){var je=ye.start,Ye=ye.end;if(Ye===void 0&&(Ye=je),"selectionStart"in ce)ce.selectionStart=je,ce.selectionEnd=Math.min(Ye,ce.value.length);else{var tt=ce.ownerDocument||document,Fe=tt&&tt.defaultView||window;if(Fe.getSelection){var ze=Fe.getSelection(),Xt=ce.textContent.length,Ut=Math.min(ye.start,Xt),mr=ye.end===void 0?Ut:Math.min(ye.end,Xt);!ze.extend&&Ut>mr&&(J=mr,mr=Ut,Ut=J);var De=Bs(ce,Ut),Se=Bs(ce,mr);if(De&&Se&&(ze.rangeCount!==1||ze.anchorNode!==De.node||ze.anchorOffset!==De.offset||ze.focusNode!==Se.node||ze.focusOffset!==Se.offset)){var Pe=tt.createRange();Pe.setStart(De.node,De.offset),ze.removeAllRanges(),Ut>mr?(ze.addRange(Pe),ze.extend(Se.node,Se.offset)):(Pe.setEnd(Se.node,Se.offset),ze.addRange(Pe))}}}}for(tt=[],ze=ce;ze=ze.parentNode;)ze.nodeType===1&&tt.push({element:ze,left:ze.scrollLeft,top:ze.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<tt.length;ce++){var Qe=tt[ce];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}Op=!!H2,W2=H2=null}finally{or=S,z.p=y,F.T=h}}l.current=u,oa=2}}function Vb(){if(oa===2){oa=0;var l=Fu,u=qd,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=F.T,F.T=null;var y=z.p;z.p=2;var S=or;or|=4;try{xb(l,u.alternate,u)}finally{or=S,z.p=y,F.T=h}}oa=3}}function qb(){if(oa===4||oa===3){oa=0,ve();var l=Fu,u=qd,h=Hd,y=Nb;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?oa=5:(oa=0,qd=Fu=null,Hb(l,l.pendingLanes));var S=l.pendingLanes;if(S===0&&(Bu=null),Bn(h),u=u.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(yt,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=F.T,S=z.p,z.p=2,F.T=null;try{for(var O=l.onRecoverableError,J=0;J<y.length;J++){var ce=y[J];O(ce.value,{componentStack:ce.stack})}}finally{F.T=u,z.p=S}}(Hd&3)!==0&&bp(),Gl(l),S=l.pendingLanes,(h&4194090)!==0&&(S&42)!==0?l===N2?p0++:(p0=0,N2=l):p0=0,g0(0)}}function Hb(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Pf(u)))}function bp(l){return Ub(),Vb(),qb(),Wb()}function Wb(){if(oa!==5)return!1;var l=Fu,u=T2;T2=0;var h=Bn(Hd),y=F.T,S=z.p;try{z.p=32>h?32:h,F.T=null,h=R2,R2=null;var O=Fu,J=Hd;if(oa=0,qd=Fu=null,Hd=0,(or&6)!==0)throw Error(r(331));var ce=or;if(or|=4,Tb(O.current),Eb(O,O.current,J,h),or=ce,g0(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(yt,O)}catch{}return!0}finally{z.p=S,F.T=y,Hb(l,u)}}function Gb(l,u,h){u=cn(h,u),u=l2(l.stateNode,u,2),l=Je(l,u,2),l!==null&&(fr(l,2),Gl(l))}function br(l,u,h){if(l.tag===3)Gb(l,l,h);else for(;u!==null;){if(u.tag===3){Gb(u,l,h);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Bu===null||!Bu.has(y))){l=cn(h,l),h=K5(2),y=Je(u,h,2),y!==null&&(Q5(h,y,u,l),fr(y,2),Gl(y));break}}u=u.return}}function P2(l,u,h){var y=l.pingCache;if(y===null){y=l.pingCache=new gC;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(h)||(S2=!0,S.add(h),l=bC.bind(null,l,u,h),u.then(l,l))}function bC(l,u,h){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,Sr===l&&(On&h)===h&&(ei===4||ei===3&&(On&62914560)===On&&300>dt()-I2?(or&2)===0&&Wd(l,0):E2|=h,Vd===On&&(Vd=0)),Gl(l)}function $b(l,u){u===0&&(u=Rn()),l=zs(l,u),l!==null&&(fr(l,u),Gl(l))}function wC(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),$b(l,h)}function _C(l,u){var h=0;switch(l.tag){case 13:var y=l.stateNode,S=l.memoizedState;S!==null&&(h=S.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),$b(l,h)}function AC(l,u){return ct(l,u)}var wp=null,$d=null,L2=!1,_p=!1,M2=!1,Xf=0;function Gl(l){l!==$d&&l.next===null&&($d===null?wp=$d=l:$d=$d.next=l),_p=!0,L2||(L2=!0,EC())}function g0(l,u){if(!M2&&_p){M2=!0;do for(var h=!1,y=wp;y!==null;){if(l!==0){var S=y.pendingLanes;if(S===0)var O=0;else{var J=y.suspendedLanes,ce=y.pingedLanes;O=(1<<31-xt(42|l)+1)-1,O&=S&~(J&~ce),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(h=!0,Qb(y,O))}else O=On,O=Cn(y,y===Sr?O:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(O&3)===0||mi(y,O)||(h=!0,Qb(y,O));y=y.next}while(h);M2=!1}}function SC(){Yb()}function Yb(){_p=L2=!1;var l=0;Xf!==0&&(kC()&&(l=Xf),Xf=0);for(var u=dt(),h=null,y=wp;y!==null;){var S=y.next,O=Xb(y,u);O===0?(y.next=null,h===null?wp=S:h.next=S,S===null&&($d=h)):(h=y,(l!==0||(O&3)!==0)&&(_p=!0)),y=S}g0(l)}function Xb(l,u){for(var h=l.suspendedLanes,y=l.pingedLanes,S=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var J=31-xt(O),ce=1<<J,ye=S[J];ye===-1?((ce&h)===0||(ce&y)!==0)&&(S[J]=sn(ce,u)):ye<=u&&(l.expiredLanes|=ce),O&=~ce}if(u=Sr,h=On,h=Cn(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,h===0||l===u&&(sr===2||sr===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&vt(y),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||mi(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(y!==null&&vt(y),Bn(h)){case 2:case 8:h=Ke;break;case 32:h=Ge;break;case 268435456:h=ft;break;default:h=Ge}return y=Kb.bind(null,l),h=ct(h,y),l.callbackPriority=u,l.callbackNode=h,u}return y!==null&&y!==null&&vt(y),l.callbackPriority=2,l.callbackNode=null,2}function Kb(l,u){if(oa!==0&&oa!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(bp()&&l.callbackNode!==h)return null;var y=On;return y=Cn(l,l===Sr?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(Ob(l,y,u),Xb(l,dt()),l.callbackNode!=null&&l.callbackNode===h?Kb.bind(null,l):null)}function Qb(l,u){if(bp())return null;Ob(l,u,!0)}function EC(){LC(function(){(or&6)!==0?ct(Te,SC):Yb()})}function j2(){return Xf===0&&(Xf=ma()),Xf}function Zb(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ko(""+l)}function Jb(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function CC(l,u,h,y,S){if(u==="submit"&&h&&h.stateNode===S){var O=Zb((S[Kn]||null).action),J=y.submitter;J&&(u=(u=J[Kn]||null)?Zb(u.formAction):J.getAttribute("formAction"),u!==null&&(O=u,J=null));var ce=new rs("action","action",null,y,S);l.push({event:ce,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Xf!==0){var ye=J?Jb(S,J):new FormData(S);vs(h,{pending:!0,data:ye,method:S.method,action:O},null,ye)}}else typeof O=="function"&&(ce.preventDefault(),ye=J?Jb(S,J):new FormData(S),vs(h,{pending:!0,data:ye,method:S.method,action:O},O,ye))},currentTarget:S}]})}}for(var B2=0;B2<Sc.length;B2++){var F2=Sc[B2],IC=F2.toLowerCase(),TC=F2[0].toUpperCase()+F2.slice(1);Pr(IC,"on"+TC)}Pr(bu,"onAnimationEnd"),Pr(Rl,"onAnimationIteration"),Pr(Nl,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Dl,"onTransitionRun"),Pr(Ac,"onTransitionStart"),Pr(wu,"onTransitionCancel"),Pr(Ol,"onTransitionEnd"),va("onMouseEnter",["mouseout","mouseover"]),va("onMouseLeave",["mouseout","mouseover"]),va("onPointerEnter",["pointerout","pointerover"]),va("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var m0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(m0));function ew(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var y=l[h],S=y.event;y=y.listeners;e:{var O=void 0;if(u)for(var J=y.length-1;0<=J;J--){var ce=y[J],ye=ce.instance,je=ce.currentTarget;if(ce=ce.listener,ye!==O&&S.isPropagationStopped())break e;O=ce,S.currentTarget=je;try{O(S)}catch(Ye){cp(Ye)}S.currentTarget=null,O=ye}else for(J=0;J<y.length;J++){if(ce=y[J],ye=ce.instance,je=ce.currentTarget,ce=ce.listener,ye!==O&&S.isPropagationStopped())break e;O=ce,S.currentTarget=je;try{O(S)}catch(Ye){cp(Ye)}S.currentTarget=null,O=ye}}}}function An(l,u){var h=u[Cr];h===void 0&&(h=u[Cr]=new Set);var y=l+"__bubble";h.has(y)||(tw(u,l,2,!1),h.add(y))}function z2(l,u,h){var y=0;u&&(y|=4),tw(h,l,y,u)}var Ap="_reactListening"+Math.random().toString(36).slice(2);function U2(l){if(!l[Ap]){l[Ap]=!0,Io.forEach(function(h){h!=="selectionchange"&&(RC.has(h)||z2(h,!1,l),z2(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Ap]||(u[Ap]=!0,z2("selectionchange",!1,u))}}function tw(l,u,h,y){switch(Ew(u)){case 2:var S=nI;break;case 8:S=rI;break;default:S=tv}h=S.bind(null,u,h,l),S=void 0,!ta||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),y?S!==void 0?l.addEventListener(u,h,{capture:!0,passive:S}):l.addEventListener(u,h,!0):S!==void 0?l.addEventListener(u,h,{passive:S}):l.addEventListener(u,h,!1)}function V2(l,u,h,y,S){var O=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var J=y.tag;if(J===3||J===4){var ce=y.stateNode.containerInfo;if(ce===S)break;if(J===4)for(J=y.return;J!==null;){var ye=J.tag;if((ye===3||ye===4)&&J.stateNode.containerInfo===S)return;J=J.return}for(;ce!==null;){if(J=ni(ce),J===null)return;if(ye=J.tag,ye===5||ye===6||ye===26||ye===27){y=O=J;continue e}ce=ce.parentNode}}y=y.return}gu(function(){var je=O,Ye=ir(h),tt=[];e:{var Fe=Fs.get(l);if(Fe!==void 0){var ze=rs,Xt=l;switch(l){case"keypress":if(wa(h)===0)break e;case"keydown":case"keyup":ze=jo;break;case"focusin":Xt="focus",ze=as;break;case"focusout":Xt="blur",ze=as;break;case"beforeblur":case"afterblur":ze=as;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Kr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=is;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=Al;break;case bu:case Rl:case Nl:ze=bl;break;case Ol:ze=ne;break;case"scroll":case"scrollend":ze=vc;break;case"wheel":ze=be;break;case"copy":case"cut":case"paste":ze=wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=js;break;case"toggle":case"beforetoggle":ze=qe}var Ut=(u&4)!==0,mr=!Ut&&(l==="scroll"||l==="scrollend"),De=Ut?Fe!==null?Fe+"Capture":null:Fe;Ut=[];for(var Se=je,Pe;Se!==null;){var Qe=Se;if(Pe=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||Pe===null||De===null||(Qe=zi(Se,De),Qe!=null&&Ut.push(v0(Se,Qe,Pe))),mr)break;Se=Se.return}0<Ut.length&&(Fe=new ze(Fe,Xt,null,h,Ye),tt.push({event:Fe,listeners:Ut}))}}if((u&7)===0){e:{if(Fe=l==="mouseover"||l==="pointerover",ze=l==="mouseout"||l==="pointerout",Fe&&h!==to&&(Xt=h.relatedTarget||h.fromElement)&&(ni(Xt)||Xt[xr]))break e;if((ze||Fe)&&(Fe=Ye.window===Ye?Ye:(Fe=Ye.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,ze?(Xt=h.relatedTarget||h.toElement,ze=je,Xt=Xt?ni(Xt):null,Xt!==null&&(mr=a(Xt),Ut=Xt.tag,Xt!==mr||Ut!==5&&Ut!==27&&Ut!==6)&&(Xt=null)):(ze=null,Xt=je),ze!==Xt)){if(Ut=Kr,Qe="onMouseLeave",De="onMouseEnter",Se="mouse",(l==="pointerout"||l==="pointerover")&&(Ut=js,Qe="onPointerLeave",De="onPointerEnter",Se="pointer"),mr=ze==null?Fe:ri(ze),Pe=Xt==null?Fe:ri(Xt),Fe=new Ut(Qe,Se+"leave",ze,h,Ye),Fe.target=mr,Fe.relatedTarget=Pe,Qe=null,ni(Ye)===je&&(Ut=new Ut(De,Se+"enter",Xt,h,Ye),Ut.target=Pe,Ut.relatedTarget=mr,Qe=Ut),mr=Qe,ze&&Xt)t:{for(Ut=ze,De=Xt,Se=0,Pe=Ut;Pe;Pe=Yd(Pe))Se++;for(Pe=0,Qe=De;Qe;Qe=Yd(Qe))Pe++;for(;0<Se-Pe;)Ut=Yd(Ut),Se--;for(;0<Pe-Se;)De=Yd(De),Pe--;for(;Se--;){if(Ut===De||De!==null&&Ut===De.alternate)break t;Ut=Yd(Ut),De=Yd(De)}Ut=null}else Ut=null;ze!==null&&nw(tt,Fe,ze,Ut,!1),Xt!==null&&mr!==null&&nw(tt,mr,Xt,Ut,!0)}}e:{if(Fe=je?ri(je):window,ze=Fe.nodeName&&Fe.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Fe.type==="file")var Tt=yu;else if(er(Fe))if(xc)Tt=Ad;else{Tt=qh;var mn=Aa}else ze=Fe.nodeName,!ze||ze.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?je&&gc(je.elementType)&&(Tt=yu):Tt=Tf;if(Tt&&(Tt=Tt(l,je))){so(tt,Tt,h,Ye);break e}mn&&mn(l,Fe,je),l==="focusout"&&je&&Fe.type==="number"&&je.memoizedProps.value!=null&&es(Fe,"number",Fe.value)}switch(mn=je?ri(je):window,l){case"focusin":(er(mn)||mn.contentEditable==="true")&&(Sa=mn,Bo=je,us=null);break;case"focusout":us=Bo=Sa=null;break;case"mousedown":Fo=!0;break;case"contextmenu":case"mouseup":case"dragend":Fo=!1,kr(tt,h,Ye);break;case"selectionchange":if(Tl)break;case"keydown":case"keyup":kr(tt,h,Ye)}var Pt;if(pt)e:{switch(l){case"compositionstart":var qt="onCompositionStart";break e;case"compositionend":qt="onCompositionEnd";break e;case"compositionupdate":qt="onCompositionUpdate";break e}qt=void 0}else zt?Me(l,h)&&(qt="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(qt="onCompositionStart");qt&&(Y&&h.locale!=="ko"&&(zt||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&zt&&(Pt=mc()):(ba=Ye,ns="value"in ba?ba.value:ba.textContent,zt=!0)),mn=Sp(je,qt),0<mn.length&&(qt=new Ps(qt,l,null,h,Ye),tt.push({event:qt,listeners:mn}),Pt?qt.data=Pt:(Pt=st(h),Pt!==null&&(qt.data=Pt)))),(Pt=V?gn(l,h):Qt(l,h))&&(qt=Sp(je,"onBeforeInput"),0<qt.length&&(mn=new Ps("onBeforeInput","beforeinput",null,h,Ye),tt.push({event:mn,listeners:qt}),mn.data=Pt)),CC(tt,l,je,h,Ye)}ew(tt,u)})}function v0(l,u,h){return{instance:l,listener:u,currentTarget:h}}function Sp(l,u){for(var h=u+"Capture",y=[];l!==null;){var S=l,O=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||O===null||(S=zi(l,h),S!=null&&y.unshift(v0(l,S,O)),S=zi(l,u),S!=null&&y.push(v0(l,S,O))),l.tag===3)return y;l=l.return}return[]}function Yd(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function nw(l,u,h,y,S){for(var O=u._reactName,J=[];h!==null&&h!==y;){var ce=h,ye=ce.alternate,je=ce.stateNode;if(ce=ce.tag,ye!==null&&ye===y)break;ce!==5&&ce!==26&&ce!==27||je===null||(ye=je,S?(je=zi(h,O),je!=null&&J.unshift(v0(h,je,ye))):S||(je=zi(h,O),je!=null&&J.push(v0(h,je,ye)))),h=h.return}J.length!==0&&l.push({event:u,listeners:J})}var NC=/\r\n?/g,DC=/\u0000|\uFFFD/g;function rw(l){return(typeof l=="string"?l:""+l).replace(NC,`
`).replace(DC,"")}function iw(l,u){return u=rw(u),rw(l)===u}function Ep(){}function gr(l,u,h,y,S,O){switch(h){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||ya(l,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&ya(l,""+y);break;case"className":Ha(l,"class",y);break;case"tabIndex":Ha(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Ha(l,h,y);break;case"style":pc(l,y,O);break;case"data":if(u!=="object"){Ha(l,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=ko(""+y),l.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(h==="formAction"?(u!=="input"&&gr(l,u,"name",S.name,S,null),gr(l,u,"formEncType",S.formEncType,S,null),gr(l,u,"formMethod",S.formMethod,S,null),gr(l,u,"formTarget",S.formTarget,S,null)):(gr(l,u,"encType",S.encType,S,null),gr(l,u,"method",S.method,S,null),gr(l,u,"target",S.target,S,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=ko(""+y),l.setAttribute(h,y);break;case"onClick":y!=null&&(l.onclick=Ep);break;case"onScroll":y!=null&&An("scroll",l);break;case"onScrollEnd":y!=null&&An("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(S.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}h=ko(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""+y):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":y===!0?l.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,y):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(h,y):l.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(h):l.setAttribute(h,y);break;case"popover":An("beforetoggle",l),An("toggle",l),qa(l,"popover",y);break;case"xlinkActuate":ii(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ii(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ii(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ii(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ii(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ii(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ii(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ii(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ii(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":qa(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Oo.get(h)||h,qa(l,h,y))}}function q2(l,u,h,y,S,O){switch(h){case"style":pc(l,y,O);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(S.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof y=="string"?ya(l,y):(typeof y=="number"||typeof y=="bigint")&&ya(l,""+y);break;case"onScroll":y!=null&&An("scroll",l);break;case"onScrollEnd":y!=null&&An("scrollend",l);break;case"onClick":y!=null&&(l.onclick=Ep);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!To.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(S=h.endsWith("Capture"),u=h.slice(2,S?h.length-7:void 0),O=l[Kn]||null,O=O!=null?O[h]:null,typeof O=="function"&&l.removeEventListener(u,O,S),typeof y=="function")){typeof O!="function"&&O!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,y,S);break e}h in l?l[h]=y:y===!0?l.setAttribute(h,""):qa(l,h,y)}}}function sa(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":An("error",l),An("load",l);var y=!1,S=!1,O;for(O in h)if(h.hasOwnProperty(O)){var J=h[O];if(J!=null)switch(O){case"src":y=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:gr(l,u,O,J,h,null)}}S&&gr(l,u,"srcSet",h.srcSet,h,null),y&&gr(l,u,"src",h.src,h,null);return;case"input":An("invalid",l);var ce=O=J=S=null,ye=null,je=null;for(y in h)if(h.hasOwnProperty(y)){var Ye=h[y];if(Ye!=null)switch(y){case"name":S=Ye;break;case"type":J=Ye;break;case"checked":ye=Ye;break;case"defaultChecked":je=Ye;break;case"value":O=Ye;break;case"defaultValue":ce=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,u));break;default:gr(l,u,y,Ye,h,null)}}Jo(l,O,ce,ye,je,J,S,!1),Zo(l);return;case"select":An("invalid",l),y=J=O=null;for(S in h)if(h.hasOwnProperty(S)&&(ce=h[S],ce!=null))switch(S){case"value":O=ce;break;case"defaultValue":J=ce;break;case"multiple":y=ce;default:gr(l,u,S,ce,h,null)}u=O,h=J,l.multiple=!!y,u!=null?eo(l,!!y,u,!1):h!=null&&eo(l,!!y,h,!0);return;case"textarea":An("invalid",l),O=S=y=null;for(J in h)if(h.hasOwnProperty(J)&&(ce=h[J],ce!=null))switch(J){case"value":y=ce;break;case"defaultValue":S=ce;break;case"children":O=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(91));break;default:gr(l,u,J,ce,h,null)}ts(l,y,S,O),Zo(l);return;case"option":for(ye in h)if(h.hasOwnProperty(ye)&&(y=h[ye],y!=null))switch(ye){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:gr(l,u,ye,y,h,null)}return;case"dialog":An("beforetoggle",l),An("toggle",l),An("cancel",l),An("close",l);break;case"iframe":case"object":An("load",l);break;case"video":case"audio":for(y=0;y<m0.length;y++)An(m0[y],l);break;case"image":An("error",l),An("load",l);break;case"details":An("toggle",l);break;case"embed":case"source":case"link":An("error",l),An("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(je in h)if(h.hasOwnProperty(je)&&(y=h[je],y!=null))switch(je){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:gr(l,u,je,y,h,null)}return;default:if(gc(u)){for(Ye in h)h.hasOwnProperty(Ye)&&(y=h[Ye],y!==void 0&&q2(l,u,Ye,y,h,void 0));return}}for(ce in h)h.hasOwnProperty(ce)&&(y=h[ce],y!=null&&gr(l,u,ce,y,h,null))}function OC(l,u,h,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,O=null,J=null,ce=null,ye=null,je=null,Ye=null;for(ze in h){var tt=h[ze];if(h.hasOwnProperty(ze)&&tt!=null)switch(ze){case"checked":break;case"value":break;case"defaultValue":ye=tt;default:y.hasOwnProperty(ze)||gr(l,u,ze,null,y,tt)}}for(var Fe in y){var ze=y[Fe];if(tt=h[Fe],y.hasOwnProperty(Fe)&&(ze!=null||tt!=null))switch(Fe){case"type":O=ze;break;case"name":S=ze;break;case"checked":je=ze;break;case"defaultChecked":Ye=ze;break;case"value":J=ze;break;case"defaultValue":ce=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,u));break;default:ze!==tt&&gr(l,u,Fe,ze,y,tt)}}Ii(l,J,ce,ye,je,Ye,O,S);return;case"select":ze=J=ce=Fe=null;for(O in h)if(ye=h[O],h.hasOwnProperty(O)&&ye!=null)switch(O){case"value":break;case"multiple":ze=ye;default:y.hasOwnProperty(O)||gr(l,u,O,null,y,ye)}for(S in y)if(O=y[S],ye=h[S],y.hasOwnProperty(S)&&(O!=null||ye!=null))switch(S){case"value":Fe=O;break;case"defaultValue":ce=O;break;case"multiple":J=O;default:O!==ye&&gr(l,u,S,O,y,ye)}u=ce,h=J,y=ze,Fe!=null?eo(l,!!h,Fe,!1):!!y!=!!h&&(u!=null?eo(l,!!h,u,!0):eo(l,!!h,h?[]:"",!1));return;case"textarea":ze=Fe=null;for(ce in h)if(S=h[ce],h.hasOwnProperty(ce)&&S!=null&&!y.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:gr(l,u,ce,null,y,S)}for(J in y)if(S=y[J],O=h[J],y.hasOwnProperty(J)&&(S!=null||O!=null))switch(J){case"value":Fe=S;break;case"defaultValue":ze=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:S!==O&&gr(l,u,J,S,y,O)}zn(l,Fe,ze);return;case"option":for(var Xt in h)if(Fe=h[Xt],h.hasOwnProperty(Xt)&&Fe!=null&&!y.hasOwnProperty(Xt))switch(Xt){case"selected":l.selected=!1;break;default:gr(l,u,Xt,null,y,Fe)}for(ye in y)if(Fe=y[ye],ze=h[ye],y.hasOwnProperty(ye)&&Fe!==ze&&(Fe!=null||ze!=null))switch(ye){case"selected":l.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:gr(l,u,ye,Fe,y,ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ut in h)Fe=h[Ut],h.hasOwnProperty(Ut)&&Fe!=null&&!y.hasOwnProperty(Ut)&&gr(l,u,Ut,null,y,Fe);for(je in y)if(Fe=y[je],ze=h[je],y.hasOwnProperty(je)&&Fe!==ze&&(Fe!=null||ze!=null))switch(je){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,u));break;default:gr(l,u,je,Fe,y,ze)}return;default:if(gc(u)){for(var mr in h)Fe=h[mr],h.hasOwnProperty(mr)&&Fe!==void 0&&!y.hasOwnProperty(mr)&&q2(l,u,mr,void 0,y,Fe);for(Ye in y)Fe=y[Ye],ze=h[Ye],!y.hasOwnProperty(Ye)||Fe===ze||Fe===void 0&&ze===void 0||q2(l,u,Ye,Fe,y,ze);return}}for(var De in h)Fe=h[De],h.hasOwnProperty(De)&&Fe!=null&&!y.hasOwnProperty(De)&&gr(l,u,De,null,y,Fe);for(tt in y)Fe=y[tt],ze=h[tt],!y.hasOwnProperty(tt)||Fe===ze||Fe==null&&ze==null||gr(l,u,tt,Fe,y,ze)}var H2=null,W2=null;function Cp(l){return l.nodeType===9?l:l.ownerDocument}function aw(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ow(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function G2(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var $2=null;function kC(){var l=window.event;return l&&l.type==="popstate"?l===$2?!1:($2=l,!0):($2=null,!1)}var sw=typeof setTimeout=="function"?setTimeout:void 0,PC=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,LC=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(l){return lw.resolve(null).then(l).catch(MC)}:sw;function MC(l){setTimeout(function(){throw l})}function Uu(l){return l==="head"}function cw(l,u){var h=u,y=0,S=0;do{var O=h.nextSibling;if(l.removeChild(h),O&&O.nodeType===8)if(h=O.data,h==="/$"){if(0<y&&8>y){h=y;var J=l.ownerDocument;if(h&1&&y0(J.documentElement),h&2&&y0(J.body),h&4)for(h=J.head,y0(h),J=h.firstChild;J;){var ce=J.nextSibling,ye=J.nodeName;J[ea]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&J.rel.toLowerCase()==="stylesheet"||h.removeChild(J),J=ce}}if(S===0){l.removeChild(O),C0(u);return}S--}else h==="$"||h==="$?"||h==="$!"?S++:y=h.charCodeAt(0)-48;else y=0;h=O}while(h);C0(u)}function Y2(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Y2(h),vi(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function jC(l,u,h,y){for(;l.nodeType===1;){var S=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[ea])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==S.rel||l.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||l.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||l.getAttribute("title")!==(S.title==null?null:S.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(S.src==null?null:S.src)||l.getAttribute("type")!==(S.type==null?null:S.type)||l.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var O=S.name==null?null:""+S.name;if(S.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=Js(l.nextSibling),l===null)break}return null}function BC(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Js(l.nextSibling),l===null))return null;return l}function X2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function FC(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var y=function(){u(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Js(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var K2=null;function uw(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function fw(l,u,h){switch(u=Cp(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function y0(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);vi(l)}var bs=new Map,dw=new Set;function Ip(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Uc=z.d;z.d={f:zC,r:UC,D:VC,C:qC,L:HC,m:WC,X:$C,S:GC,M:YC};function zC(){var l=Uc.f(),u=yp();return l||u}function UC(l){var u=Yr(l);u!==null&&u.tag===5&&u.type==="form"?Hf(u):Uc.r(l)}var Xd=typeof document>"u"?null:document;function hw(l,u,h){var y=Xd;if(y&&typeof u=="string"&&u){var S=In(u);S='link[rel="'+l+'"][href="'+S+'"]',typeof h=="string"&&(S+='[crossorigin="'+h+'"]'),dw.has(S)||(dw.add(S),l={rel:l,crossOrigin:h,href:u},y.querySelector(S)===null&&(u=y.createElement("link"),sa(u,"link",l),Fn(u),y.head.appendChild(u)))}}function VC(l){Uc.D(l),hw("dns-prefetch",l,null)}function qC(l,u){Uc.C(l,u),hw("preconnect",l,u)}function HC(l,u,h){Uc.L(l,u,h);var y=Xd;if(y&&l&&u){var S='link[rel="preload"][as="'+In(u)+'"]';u==="image"&&h&&h.imageSrcSet?(S+='[imagesrcset="'+In(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(S+='[imagesizes="'+In(h.imageSizes)+'"]')):S+='[href="'+In(l)+'"]';var O=S;switch(u){case"style":O=Kd(l);break;case"script":O=Qd(l)}bs.has(O)||(l=d({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),bs.set(O,l),y.querySelector(S)!==null||u==="style"&&y.querySelector(x0(O))||u==="script"&&y.querySelector(b0(O))||(u=y.createElement("link"),sa(u,"link",l),Fn(u),y.head.appendChild(u)))}}function WC(l,u){Uc.m(l,u);var h=Xd;if(h&&l){var y=u&&typeof u.as=="string"?u.as:"script",S='link[rel="modulepreload"][as="'+In(y)+'"][href="'+In(l)+'"]',O=S;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Qd(l)}if(!bs.has(O)&&(l=d({rel:"modulepreload",href:l},u),bs.set(O,l),h.querySelector(S)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(b0(O)))return}y=h.createElement("link"),sa(y,"link",l),Fn(y),h.head.appendChild(y)}}}function GC(l,u,h){Uc.S(l,u,h);var y=Xd;if(y&&l){var S=dr(y).hoistableStyles,O=Kd(l);u=u||"default";var J=S.get(O);if(!J){var ce={loading:0,preload:null};if(J=y.querySelector(x0(O)))ce.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":u},h),(h=bs.get(O))&&Q2(l,h);var ye=J=y.createElement("link");Fn(ye),sa(ye,"link",l),ye._p=new Promise(function(je,Ye){ye.onload=je,ye.onerror=Ye}),ye.addEventListener("load",function(){ce.loading|=1}),ye.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,Tp(J,u,y)}J={type:"stylesheet",instance:J,count:1,state:ce},S.set(O,J)}}}function $C(l,u){Uc.X(l,u);var h=Xd;if(h&&l){var y=dr(h).hoistableScripts,S=Qd(l),O=y.get(S);O||(O=h.querySelector(b0(S)),O||(l=d({src:l,async:!0},u),(u=bs.get(S))&&Z2(l,u),O=h.createElement("script"),Fn(O),sa(O,"link",l),h.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},y.set(S,O))}}function YC(l,u){Uc.M(l,u);var h=Xd;if(h&&l){var y=dr(h).hoistableScripts,S=Qd(l),O=y.get(S);O||(O=h.querySelector(b0(S)),O||(l=d({src:l,async:!0,type:"module"},u),(u=bs.get(S))&&Z2(l,u),O=h.createElement("script"),Fn(O),sa(O,"link",l),h.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},y.set(S,O))}}function pw(l,u,h,y){var S=(S=de.current)?Ip(S):null;if(!S)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Kd(h.href),h=dr(S).hoistableStyles,y=h.get(u),y||(y={type:"style",instance:null,count:0,state:null},h.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=Kd(h.href);var O=dr(S).hoistableStyles,J=O.get(l);if(J||(S=S.ownerDocument||S,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,J),(O=S.querySelector(x0(l)))&&!O._p&&(J.instance=O,J.state.loading=5),bs.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},bs.set(l,h),O||XC(S,l,h,J.state))),u&&y===null)throw Error(r(528,""));return J}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Qd(h),h=dr(S).hoistableScripts,y=h.get(u),y||(y={type:"script",instance:null,count:0,state:null},h.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Kd(l){return'href="'+In(l)+'"'}function x0(l){return'link[rel="stylesheet"]['+l+"]"}function gw(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function XC(l,u,h,y){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=l.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),sa(u,"link",h),Fn(u),l.head.appendChild(u))}function Qd(l){return'[src="'+In(l)+'"]'}function b0(l){return"script[async]"+l}function mw(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var y=l.querySelector('style[data-href~="'+In(h.href)+'"]');if(y)return u.instance=y,Fn(y),y;var S=d({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Fn(y),sa(y,"style",S),Tp(y,h.precedence,l),u.instance=y;case"stylesheet":S=Kd(h.href);var O=l.querySelector(x0(S));if(O)return u.state.loading|=4,u.instance=O,Fn(O),O;y=gw(h),(S=bs.get(S))&&Q2(y,S),O=(l.ownerDocument||l).createElement("link"),Fn(O);var J=O;return J._p=new Promise(function(ce,ye){J.onload=ce,J.onerror=ye}),sa(O,"link",y),u.state.loading|=4,Tp(O,h.precedence,l),u.instance=O;case"script":return O=Qd(h.src),(S=l.querySelector(b0(O)))?(u.instance=S,Fn(S),S):(y=h,(S=bs.get(O))&&(y=d({},h),Z2(y,S)),l=l.ownerDocument||l,S=l.createElement("script"),Fn(S),sa(S,"link",y),l.head.appendChild(S),u.instance=S);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Tp(y,h.precedence,l));return u.instance}function Tp(l,u,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=y.length?y[y.length-1]:null,O=S,J=0;J<y.length;J++){var ce=y[J];if(ce.dataset.precedence===u)O=ce;else if(O!==S)break}O?O.parentNode.insertBefore(l,O.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function Q2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function Z2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Rp=null;function vw(l,u,h){if(Rp===null){var y=new Map,S=Rp=new Map;S.set(h,y)}else S=Rp,y=S.get(h),y||(y=new Map,S.set(h,y));if(y.has(l))return y;for(y.set(l,null),h=h.getElementsByTagName(l),S=0;S<h.length;S++){var O=h[S];if(!(O[ea]||O[Xn]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var J=O.getAttribute(u)||"";J=l+J;var ce=y.get(J);ce?ce.push(O):y.set(J,[O])}}return y}function yw(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function KC(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function xw(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var w0=null;function QC(){}function ZC(l,u,h){if(w0===null)throw Error(r(475));var y=w0;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var S=Kd(h.href),O=l.querySelector(x0(S));if(O){l=O._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=Np.bind(y),l.then(y,y)),u.state.loading|=4,u.instance=O,Fn(O);return}O=l.ownerDocument||l,h=gw(h),(S=bs.get(S))&&Q2(h,S),O=O.createElement("link"),Fn(O);var J=O;J._p=new Promise(function(ce,ye){J.onload=ce,J.onerror=ye}),sa(O,"link",h),u.instance=O}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=Np.bind(y),l.addEventListener("load",u),l.addEventListener("error",u))}}function JC(){if(w0===null)throw Error(r(475));var l=w0;return l.stylesheets&&l.count===0&&J2(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&J2(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function Np(){if(this.count--,this.count===0){if(this.stylesheets)J2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Dp=null;function J2(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Dp=new Map,u.forEach(eI,l),Dp=null,Np.call(l))}function eI(l,u){if(!(u.state.loading&4)){var h=Dp.get(l);if(h)var y=h.get(null);else{h=new Map,Dp.set(l,h);for(var S=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<S.length;O++){var J=S[O];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(h.set(J.dataset.precedence,J),y=J)}y&&h.set(null,y)}S=u.instance,J=S.getAttribute("data-precedence"),O=h.get(J)||y,O===y&&h.set(null,S),h.set(J,S),this.count++,y=Np.bind(this),S.addEventListener("load",y),S.addEventListener("error",y),O?O.parentNode.insertBefore(S,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(S,l.firstChild)),u.state.loading|=4}}var _0={$$typeof:U,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function tI(l,u,h,y,S,O,J,ce){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Br(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.hiddenUpdates=Br(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=O,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function bw(l,u,h,y,S,O,J,ce,ye,je,Ye,tt){return l=new tI(l,u,h,J,ce,ye,je,tt),u=1,O===!0&&(u|=24),O=Hi(3,null,null,u),l.current=O,O.stateNode=l,u=Wh(),u.refCount++,l.pooledCache=u,u.refCount++,O.memoizedState={element:y,isDehydrated:h,cache:u},Ae(O),l}function ww(l){return l?(l=bi,l):bi}function _w(l,u,h,y,S,O){S=ww(S),y.context===null?y.context=S:y.pendingContext=S,y=$e(u),y.payload={element:h},O=O===void 0?null:O,O!==null&&(y.callback=O),h=Je(l,y,u),h!==null&&($o(h,l,u),Xe(h,l,u))}function Aw(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function ev(l,u){Aw(l,u),(l=l.alternate)&&Aw(l,u)}function Sw(l){if(l.tag===13){var u=zs(l,67108864);u!==null&&$o(u,l,67108864),ev(l,67108864)}}var Op=!0;function nI(l,u,h,y){var S=F.T;F.T=null;var O=z.p;try{z.p=2,tv(l,u,h,y)}finally{z.p=O,F.T=S}}function rI(l,u,h,y){var S=F.T;F.T=null;var O=z.p;try{z.p=8,tv(l,u,h,y)}finally{z.p=O,F.T=S}}function tv(l,u,h,y){if(Op){var S=nv(y);if(S===null)V2(l,u,y,kp,h),Cw(l,y);else if(aI(S,l,u,h,y))y.stopPropagation();else if(Cw(l,y),u&4&&-1<iI.indexOf(l)){for(;S!==null;){var O=Yr(S);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var J=Kt(O.pendingLanes);if(J!==0){var ce=O;for(ce.pendingLanes|=2,ce.entangledLanes|=2;J;){var ye=1<<31-xt(J);ce.entanglements[1]|=ye,J&=~ye}Gl(O),(or&6)===0&&(mp=dt()+500,g0(0))}}break;case 13:ce=zs(O,2),ce!==null&&$o(ce,O,2),yp(),ev(O,2)}if(O=nv(y),O===null&&V2(l,u,y,kp,h),O===S)break;S=O}S!==null&&y.stopPropagation()}else V2(l,u,y,null,h)}}function nv(l){return l=ir(l),rv(l)}var kp=null;function rv(l){if(kp=null,l=ni(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=o(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return kp=l,null}function Ew(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ot()){case Te:return 2;case Ke:return 8;case Ge:case lt:return 32;case ft:return 268435456;default:return 32}default:return 32}}var iv=!1,Vu=null,qu=null,Hu=null,A0=new Map,S0=new Map,Wu=[],iI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cw(l,u){switch(l){case"focusin":case"focusout":Vu=null;break;case"dragenter":case"dragleave":qu=null;break;case"mouseover":case"mouseout":Hu=null;break;case"pointerover":case"pointerout":A0.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":S0.delete(u.pointerId)}}function E0(l,u,h,y,S,O){return l===null||l.nativeEvent!==O?(l={blockedOn:u,domEventName:h,eventSystemFlags:y,nativeEvent:O,targetContainers:[S]},u!==null&&(u=Yr(u),u!==null&&Sw(u)),l):(l.eventSystemFlags|=y,u=l.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),l)}function aI(l,u,h,y,S){switch(u){case"focusin":return Vu=E0(Vu,l,u,h,y,S),!0;case"dragenter":return qu=E0(qu,l,u,h,y,S),!0;case"mouseover":return Hu=E0(Hu,l,u,h,y,S),!0;case"pointerover":var O=S.pointerId;return A0.set(O,E0(A0.get(O)||null,l,u,h,y,S)),!0;case"gotpointercapture":return O=S.pointerId,S0.set(O,E0(S0.get(O)||null,l,u,h,y,S)),!0}return!1}function Iw(l){var u=ni(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=o(h),u!==null){l.blockedOn=u,Va(l.priority,function(){if(h.tag===13){var y=Go();y=Ei(y);var S=zs(h,y);S!==null&&$o(S,h,y),ev(h,y)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Pp(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=nv(l.nativeEvent);if(h===null){h=l.nativeEvent;var y=new h.constructor(h.type,h);to=y,h.target.dispatchEvent(y),to=null}else return u=Yr(h),u!==null&&Sw(u),l.blockedOn=h,!1;u.shift()}return!0}function Tw(l,u,h){Pp(l)&&h.delete(u)}function oI(){iv=!1,Vu!==null&&Pp(Vu)&&(Vu=null),qu!==null&&Pp(qu)&&(qu=null),Hu!==null&&Pp(Hu)&&(Hu=null),A0.forEach(Tw),S0.forEach(Tw)}function Lp(l,u){l.blockedOn===u&&(l.blockedOn=null,iv||(iv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oI)))}var Mp=null;function Rw(l){Mp!==l&&(Mp=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Mp===l&&(Mp=null);for(var u=0;u<l.length;u+=3){var h=l[u],y=l[u+1],S=l[u+2];if(typeof y!="function"){if(rv(y||h)===null)continue;break}var O=Yr(h);O!==null&&(l.splice(u,3),u-=3,vs(O,{pending:!0,data:S,method:h.method,action:y},y,S))}}))}function C0(l){function u(ye){return Lp(ye,l)}Vu!==null&&Lp(Vu,l),qu!==null&&Lp(qu,l),Hu!==null&&Lp(Hu,l),A0.forEach(u),S0.forEach(u);for(var h=0;h<Wu.length;h++){var y=Wu[h];y.blockedOn===l&&(y.blockedOn=null)}for(;0<Wu.length&&(h=Wu[0],h.blockedOn===null);)Iw(h),h.blockedOn===null&&Wu.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var S=h[y],O=h[y+1],J=S[Kn]||null;if(typeof O=="function")J||Rw(h);else if(J){var ce=null;if(O&&O.hasAttribute("formAction")){if(S=O,J=O[Kn]||null)ce=J.formAction;else if(rv(S)!==null)continue}else ce=J.action;typeof ce=="function"?h[y+1]=ce:(h.splice(y,3),y-=3),Rw(h)}}}function av(l){this._internalRoot=l}jp.prototype.render=av.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,y=Go();_w(h,y,l,u,null,null)},jp.prototype.unmount=av.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;_w(l.current,2,null,l,null,null),yp(),u[xr]=null}};function jp(l){this._internalRoot=l}jp.prototype.unstable_scheduleHydration=function(l){if(l){var u=yr();l={blockedOn:null,target:l,priority:u};for(var h=0;h<Wu.length&&u!==0&&u<Wu[h].priority;h++);Wu.splice(h,0,l),h===0&&Iw(l)}};var Nw=e.version;if(Nw!=="19.1.0")throw Error(r(527,Nw,"19.1.0"));z.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var sI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{yt=Bp.inject(sI),At=Bp}catch{}}return T0.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,y="",S=G5,O=$5,J=Y5,ce=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(J=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ce=u.unstable_transitionCallbacks)),u=bw(l,1,!1,null,null,h,y,S,O,J,ce,null),l[xr]=u.current,U2(l),new av(u)},T0.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var y=!1,S="",O=G5,J=$5,ce=Y5,ye=null,je=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(O=h.onUncaughtError),h.onCaughtError!==void 0&&(J=h.onCaughtError),h.onRecoverableError!==void 0&&(ce=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(ye=h.unstable_transitionCallbacks),h.formState!==void 0&&(je=h.formState)),u=bw(l,1,!0,u,h??null,y,S,O,J,ce,ye,je),u.context=ww(null),h=u.current,y=Go(),y=Ei(y),S=$e(y),S.callback=null,Je(h,S,y),h=y,u.current.lanes=h,fr(u,h),Gl(u),l[xr]=u.current,U2(l),new jp(u)},T0.version="19.1.0",T0}var zw;function sA(){if(zw)return lv.exports;zw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lv.exports=mI(),lv.exports}var vI=sA();const yI=oA(vI);var R0={},Uw;function xI(){if(Uw)return R0;Uw=1,Object.defineProperty(R0,"__esModule",{value:!0}),R0.parse=o,R0.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,m){const x=new a,_=g.length;if(_<2)return x;const T=(m==null?void 0:m.decode)||d;let A=0;do{const D=g.indexOf("=",A);if(D===-1)break;const U=g.indexOf(";",A),H=U===-1?_:U;if(D>H){A=g.lastIndexOf(";",D-1)+1;continue}const X=s(g,A,D),q=c(g,D,X),j=g.slice(X,q);if(x[j]===void 0){let C=s(g,D+1,H),N=c(g,H,C);const L=T(g.slice(C,N));x[j]=L}A=H+1}while(A<_);return x}function s(g,m,x){do{const _=g.charCodeAt(m);if(_!==32&&_!==9)return m}while(++m<x);return x}function c(g,m,x){for(;m>x;){const _=g.charCodeAt(--m);if(_!==32&&_!==9)return m+1}return x}function f(g,m,x){const _=(x==null?void 0:x.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const T=_(m);if(!e.test(T))throw new TypeError(`argument val is invalid: ${m}`);let A=g+"="+T;if(!x)return A;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);A+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);A+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);A+="; Path="+x.path}if(x.expires){if(!p(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);A+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(A+="; HttpOnly"),x.secure&&(A+="; Secure"),x.partitioned&&(A+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return A}function d(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return R0}xI();var Vw="popstate";function bI(n={}){function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return ty("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:r1(i)}return _I(e,t,null,n)}function Hr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function rc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wI(){return Math.random().toString(36).substring(2,10)}function qw(n,e){return{usr:n.state,key:n.key,idx:e}}function ty(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Oh(e):e,state:t,key:e&&e.key||r||wI()}}function r1({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Oh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function _I(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",c=null,f=d();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function d(){return(o.state||{idx:null}).idx}function p(){s="POP";let T=d(),A=T==null?null:T-f;f=T,c&&c({action:s,location:_.location,delta:A})}function g(T,A){s="PUSH";let D=ty(_.location,T,A);f=d()+1;let U=qw(D,f),H=_.createHref(D);try{o.pushState(U,"",H)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(H)}a&&c&&c({action:s,location:_.location,delta:1})}function m(T,A){s="REPLACE";let D=ty(_.location,T,A);f=d();let U=qw(D,f),H=_.createHref(D);o.replaceState(U,"",H),a&&c&&c({action:s,location:_.location,delta:0})}function x(T){return AI(T)}let _={get action(){return s},get location(){return n(i,o)},listen(T){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Vw,p),c=T,()=>{i.removeEventListener(Vw,p),c=null}},createHref(T){return e(i,T)},createURL:x,encodeLocation(T){let A=x(T);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:g,replace:m,go(T){return o.go(T)}};return _}function AI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Hr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:r1(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function lA(n,e,t="/"){return SI(n,e,t,!1)}function SI(n,e,t,r){let i=typeof e=="string"?Oh(e):e,a=Kc(i.pathname||"/",t);if(a==null)return null;let o=cA(n);EI(o);let s=null;for(let c=0;s==null&&c<o.length;++c){let f=MI(a);s=PI(o[c],f,r)}return s}function cA(n,e=[],t=[],r=""){let i=(a,o,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Hr(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=$c([r,c.relativePath]),d=t.concat(c);a.children&&a.children.length>0&&(Hr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),cA(a.children,e,d,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:OI(f,a.index),routesMeta:d})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let c of uA(a.path))i(a,o,c)}),e}function uA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=uA(r.join("/")),s=[];return s.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&s.push(...o),s.map(c=>n.startsWith("/")&&c===""?"/":c)}function EI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var CI=/^:[\w-]+$/,II=3,TI=2,RI=1,NI=10,DI=-2,Hw=n=>n==="*";function OI(n,e){let t=n.split("/"),r=t.length;return t.some(Hw)&&(r+=DI),e&&(r+=TI),t.filter(i=>!Hw(i)).reduce((i,a)=>i+(CI.test(a)?II:a===""?RI:NI),r)}function kI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function PI(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let c=r[s],f=s===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",p=_g({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},d),g=c.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=_g({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:$c([a,p.pathname]),pathnameBase:zI($c([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=$c([a,p.pathnameBase]))}return o}function _g(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=LI(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((f,{paramName:d,isOptional:p},g)=>{if(d==="*"){let x=s[g]||"";o=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const m=s[g];return p&&!m?f[d]=void 0:f[d]=(m||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:n}}function LI(n,e=!1,t=!0){rc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function MI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rc(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Kc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function jI(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Oh(n):n;return{pathname:t?t.startsWith("/")?t:BI(t,e):e,search:UI(r),hash:VI(i)}}function BI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function dv(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fA(n){let e=FI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function dA(n,e,t,r=!1){let i;typeof n=="string"?i=Oh(n):(i={...n},Hr(!i.pathname||!i.pathname.includes("?"),dv("?","pathname","search",i)),Hr(!i.pathname||!i.pathname.includes("#"),dv("#","pathname","hash",i)),Hr(!i.search||!i.search.includes("#"),dv("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}s=p>=0?e[p]:"/"}let c=jI(i,s),f=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}var $c=n=>n.join("/").replace(/\/\/+/g,"/"),zI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function qI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var hA=["POST","PUT","PATCH","DELETE"];new Set(hA);var HI=["GET",...hA];new Set(HI);var kh=ue.createContext(null);kh.displayName="DataRouter";var sm=ue.createContext(null);sm.displayName="DataRouterState";var pA=ue.createContext({isTransitioning:!1});pA.displayName="ViewTransition";var WI=ue.createContext(new Map);WI.displayName="Fetchers";var GI=ue.createContext(null);GI.displayName="Await";var sc=ue.createContext(null);sc.displayName="Navigation";var w1=ue.createContext(null);w1.displayName="Location";var ou=ue.createContext({outlet:null,matches:[],isDataRoute:!1});ou.displayName="Route";var ux=ue.createContext(null);ux.displayName="RouteError";function $I(n,{relative:e}={}){Hr(_1(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ue.useContext(sc),{hash:i,pathname:a,search:o}=A1(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:$c([t,a])),r.createHref({pathname:s,search:o,hash:i})}function _1(){return ue.useContext(w1)!=null}function su(){return Hr(_1(),"useLocation() may be used only in the context of a <Router> component."),ue.useContext(w1).location}var gA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mA(n){ue.useContext(sc).static||ue.useLayoutEffect(n)}function lm(){let{isDataRoute:n}=ue.useContext(ou);return n?oT():YI()}function YI(){Hr(_1(),"useNavigate() may be used only in the context of a <Router> component.");let n=ue.useContext(kh),{basename:e,navigator:t}=ue.useContext(sc),{matches:r}=ue.useContext(ou),{pathname:i}=su(),a=JSON.stringify(fA(r)),o=ue.useRef(!1);return mA(()=>{o.current=!0}),ue.useCallback((c,f={})=>{if(rc(o.current,gA),!o.current)return;if(typeof c=="number"){t.go(c);return}let d=dA(c,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:$c([e,d.pathname])),(f.replace?t.replace:t.push)(d,f.state,f)},[e,t,a,i,n])}ue.createContext(null);function A1(n,{relative:e}={}){let{matches:t}=ue.useContext(ou),{pathname:r}=su(),i=JSON.stringify(fA(t));return ue.useMemo(()=>dA(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function XI(n,e){return vA(n,e)}function vA(n,e,t,r){var A;Hr(_1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=ue.useContext(sc),{matches:a}=ue.useContext(ou),o=a[a.length-1],s=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",d=o&&o.route;{let D=d&&d.path||"";yA(c,!d||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let p=su(),g;if(e){let D=typeof e=="string"?Oh(e):e;Hr(f==="/"||((A=D.pathname)==null?void 0:A.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${D.pathname}" was given in the \`location\` prop.`),g=D}else g=p;let m=g.pathname||"/",x=m;if(f!=="/"){let D=f.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(D.length).join("/")}let _=lA(n,{pathname:x});rc(d||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),rc(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=eT(_&&_.map(D=>Object.assign({},D,{params:Object.assign({},s,D.params),pathname:$c([f,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?f:$c([f,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),a,t,r);return e&&T?ue.createElement(w1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},T):T}function KI(){let n=aT(),e=qI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=ue.createElement(ue.Fragment,null,ue.createElement("p",null,"💿 Hey developer 👋"),ue.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ue.createElement("code",{style:a},"ErrorBoundary")," or"," ",ue.createElement("code",{style:a},"errorElement")," prop on your route.")),ue.createElement(ue.Fragment,null,ue.createElement("h2",null,"Unexpected Application Error!"),ue.createElement("h3",{style:{fontStyle:"italic"}},e),t?ue.createElement("pre",{style:i},t):null,o)}var QI=ue.createElement(KI,null),ZI=class extends ue.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?ue.createElement(ou.Provider,{value:this.props.routeContext},ue.createElement(ux.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JI({routeContext:n,match:e,children:t}){let r=ue.useContext(kh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ue.createElement(ou.Provider,{value:n},t)}function eT(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let c=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Hr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,s=-1;if(t)for(let c=0;c<i.length;c++){let f=i[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(s=c),f.route.id){let{loaderData:d,errors:p}=t,g=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((c,f,d)=>{let p,g=!1,m=null,x=null;t&&(p=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||QI,o&&(s<0&&d===0?(yA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,x=null):s===d&&(g=!0,x=f.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,d+1)),T=()=>{let A;return p?A=m:g?A=x:f.route.Component?A=ue.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=c,ue.createElement(JI,{match:f,routeContext:{outlet:c,matches:_,isDataRoute:t!=null},children:A})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?ue.createElement(ZI,{location:t.location,revalidation:t.revalidation,component:m,error:p,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):T()},null)}function fx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tT(n){let e=ue.useContext(kh);return Hr(e,fx(n)),e}function nT(n){let e=ue.useContext(sm);return Hr(e,fx(n)),e}function rT(n){let e=ue.useContext(ou);return Hr(e,fx(n)),e}function dx(n){let e=rT(n),t=e.matches[e.matches.length-1];return Hr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function iT(){return dx("useRouteId")}function aT(){var r;let n=ue.useContext(ux),e=nT("useRouteError"),t=dx("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function oT(){let{router:n}=tT("useNavigate"),e=dx("useNavigate"),t=ue.useRef(!1);return mA(()=>{t.current=!0}),ue.useCallback(async(i,a={})=>{rc(t.current,gA),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Ww={};function yA(n,e,t){!e&&!Ww[n]&&(Ww[n]=!0,rc(!1,t))}ue.memo(sT);function sT({routes:n,future:e,state:t}){return vA(n,void 0,t,e)}function la(n){Hr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Hr(!_1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=ue.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Oh(t));let{pathname:c="/",search:f="",hash:d="",state:p=null,key:g="default"}=t,m=ue.useMemo(()=>{let x=Kc(c,o);return x==null?null:{location:{pathname:x,search:f,hash:d,state:p,key:g},navigationType:r}},[o,c,f,d,p,g,r]);return rc(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:ue.createElement(sc.Provider,{value:s},ue.createElement(w1.Provider,{children:e,value:m}))}function cT({children:n,location:e}){return XI(ny(n),e)}function ny(n,e=[]){let t=[];return ue.Children.forEach(n,(r,i)=>{if(!ue.isValidElement(r))return;let a=[...e,i];if(r.type===ue.Fragment){t.push.apply(t,ny(r.props.children,a));return}Hr(r.type===la,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Hr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ny(r.props.children,a)),t.push(o)}),t}var ng="get",rg="application/x-www-form-urlencoded";function cm(n){return n!=null&&typeof n.tagName=="string"}function uT(n){return cm(n)&&n.tagName.toLowerCase()==="button"}function fT(n){return cm(n)&&n.tagName.toLowerCase()==="form"}function dT(n){return cm(n)&&n.tagName.toLowerCase()==="input"}function hT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function pT(n,e){return n.button===0&&(!e||e==="_self")&&!hT(n)}var Fp=null;function gT(){if(Fp===null)try{new FormData(document.createElement("form"),0),Fp=!1}catch{Fp=!0}return Fp}var mT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hv(n){return n!=null&&!mT.has(n)?(rc(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rg}"`),null):n}function vT(n,e){let t,r,i,a,o;if(fT(n)){let s=n.getAttribute("action");r=s?Kc(s,e):null,t=n.getAttribute("method")||ng,i=hv(n.getAttribute("enctype"))||rg,a=new FormData(n)}else if(uT(n)||dT(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||s.getAttribute("action");if(r=c?Kc(c,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||ng,i=hv(n.getAttribute("formenctype"))||hv(s.getAttribute("enctype"))||rg,a=new FormData(s,n),!gT()){let{name:f,type:d,value:p}=n;if(d==="image"){let g=f?`${f}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else f&&a.append(f,p)}}else{if(cm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ng,r=null,i=rg,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function hx(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function yT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function bT(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await yT(a,t);return o.links?o.links():[]}return[]}));return ST(r.flat(1).filter(xT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Gw(n,e,t,r,i,a){let o=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,s=(c,f)=>{var d;return t[f].pathname!==c.pathname||((d=t[f].route.path)==null?void 0:d.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,f)=>o(c,f)||s(c,f)):a==="data"?e.filter((c,f)=>{var p;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,f)||s(c,f))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function wT(n,e,{includeHydrateFallback:t}={}){return _T(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function _T(n){return[...new Set(n)]}function AT(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function ST(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(AT(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ET=new Set([100,101,204,205]);function CT(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Kc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function xA(){let n=ue.useContext(kh);return hx(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function IT(){let n=ue.useContext(sm);return hx(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var px=ue.createContext(void 0);px.displayName="FrameworkContext";function bA(){let n=ue.useContext(px);return hx(n,"You must render this element inside a <HydratedRouter> element"),n}function TT(n,e){let t=ue.useContext(px),[r,i]=ue.useState(!1),[a,o]=ue.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:f,onMouseLeave:d,onTouchStart:p}=e,g=ue.useRef(null);ue.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let _=A=>{A.forEach(D=>{o(D.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return g.current&&T.observe(g.current),()=>{T.disconnect()}}},[n]),ue.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let m=()=>{i(!0)},x=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,g,{}]:[a,g,{onFocus:N0(s,m),onBlur:N0(c,x),onMouseEnter:N0(f,m),onMouseLeave:N0(d,x),onTouchStart:N0(p,m)}]:[!1,g,{}]}function N0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function RT({page:n,...e}){let{router:t}=xA(),r=ue.useMemo(()=>lA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?ue.createElement(DT,{page:n,matches:r,...e}):null}function NT(n){let{manifest:e,routeModules:t}=bA(),[r,i]=ue.useState([]);return ue.useEffect(()=>{let a=!1;return bT(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function DT({page:n,matches:e,...t}){let r=su(),{manifest:i,routeModules:a}=bA(),{basename:o}=xA(),{loaderData:s,matches:c}=IT(),f=ue.useMemo(()=>Gw(n,e,c,i,r,"data"),[n,e,c,i,r]),d=ue.useMemo(()=>Gw(n,e,c,i,r,"assets"),[n,e,c,i,r]),p=ue.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,_=!1;if(e.forEach(A=>{var U;let D=i.routes[A.route.id];!D||!D.hasLoader||(!f.some(H=>H.route.id===A.route.id)&&A.route.id in s&&((U=a[A.route.id])!=null&&U.shouldRevalidate)||D.hasClientLoader?_=!0:x.add(A.route.id))}),x.size===0)return[];let T=CT(n,o);return _&&x.size>0&&T.searchParams.set("_routes",e.filter(A=>x.has(A.route.id)).map(A=>A.route.id).join(",")),[T.pathname+T.search]},[o,s,r,i,f,e,n,a]),g=ue.useMemo(()=>wT(d,i),[d,i]),m=NT(d);return ue.createElement(ue.Fragment,null,p.map(x=>ue.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),g.map(x=>ue.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),m.map(({key:x,link:_})=>ue.createElement("link",{key:x,..._})))}function OT(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wA&&(window.__reactRouterVersion="7.6.2")}catch{}function kT({basename:n,children:e,window:t}){let r=ue.useRef();r.current==null&&(r.current=bI({window:t,v5Compat:!0}));let i=r.current,[a,o]=ue.useState({action:i.action,location:i.location}),s=ue.useCallback(c=>{ue.startTransition(()=>o(c))},[o]);return ue.useLayoutEffect(()=>i.listen(s),[i,s]),ue.createElement(lT,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var _A=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vn=ue.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:c,to:f,preventScrollReset:d,viewTransition:p,...g},m){let{basename:x}=ue.useContext(sc),_=typeof f=="string"&&_A.test(f),T,A=!1;if(typeof f=="string"&&_&&(T=f,wA))try{let N=new URL(window.location.href),L=f.startsWith("//")?new URL(N.protocol+f):new URL(f),R=Kc(L.pathname,x);L.origin===N.origin&&R!=null?f=R+L.search+L.hash:A=!0}catch{rc(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=$I(f,{relative:i}),[U,H,X]=TT(r,g),q=jT(f,{replace:o,state:s,target:c,preventScrollReset:d,relative:i,viewTransition:p});function j(N){e&&e(N),N.defaultPrevented||q(N)}let C=ue.createElement("a",{...g,...X,href:T||D,onClick:A||a?e:j,ref:OT(m,H),target:c,"data-discover":!_&&t==="render"?"true":void 0});return U&&!_?ue.createElement(ue.Fragment,null,C,ue.createElement(RT,{page:D})):C});vn.displayName="Link";var PT=ue.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:c,...f},d){let p=A1(o,{relative:f.relative}),g=su(),m=ue.useContext(sm),{navigator:x,basename:_}=ue.useContext(sc),T=m!=null&&VT(p)&&s===!0,A=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,D=g.pathname,U=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(D=D.toLowerCase(),U=U?U.toLowerCase():null,A=A.toLowerCase()),U&&_&&(U=Kc(U,_)||U);const H=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let X=D===A||!i&&D.startsWith(A)&&D.charAt(H)==="/",q=U!=null&&(U===A||!i&&U.startsWith(A)&&U.charAt(A.length)==="/"),j={isActive:X,isPending:q,isTransitioning:T},C=X?e:void 0,N;typeof r=="function"?N=r(j):N=[r,X?"active":null,q?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(j):a;return ue.createElement(vn,{...f,"aria-current":C,className:N,ref:d,style:L,to:o,viewTransition:s},typeof c=="function"?c(j):c)});PT.displayName="NavLink";var LT=ue.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=ng,action:s,onSubmit:c,relative:f,preventScrollReset:d,viewTransition:p,...g},m)=>{let x=zT(),_=UT(s,{relative:f}),T=o.toLowerCase()==="get"?"get":"post",A=typeof s=="string"&&_A.test(s),D=U=>{if(c&&c(U),U.defaultPrevented)return;U.preventDefault();let H=U.nativeEvent.submitter,X=(H==null?void 0:H.getAttribute("formmethod"))||o;x(H||U.currentTarget,{fetcherKey:e,method:X,navigate:t,replace:i,state:a,relative:f,preventScrollReset:d,viewTransition:p})};return ue.createElement("form",{ref:m,method:T,action:_,onSubmit:r?c:D,...g,"data-discover":!A&&n==="render"?"true":void 0})});LT.displayName="Form";function MT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AA(n){let e=ue.useContext(kh);return Hr(e,MT(n)),e}function jT(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=lm(),c=su(),f=A1(n,{relative:a});return ue.useCallback(d=>{if(pT(d,e)){d.preventDefault();let p=t!==void 0?t:r1(c)===r1(f);s(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[c,s,f,t,r,e,n,i,a,o])}var BT=0,FT=()=>`__${String(++BT)}__`;function zT(){let{router:n}=AA("useSubmit"),{basename:e}=ue.useContext(sc),t=iT();return ue.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:c,body:f}=vT(r,e);if(i.navigate===!1){let d=i.fetcherKey||FT();await n.fetch(d,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function UT(n,{relative:e}={}){let{basename:t}=ue.useContext(sc),r=ue.useContext(ou);Hr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...A1(n||".",{relative:e})},o=su();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(d=>d==="")){s.delete("index"),c.filter(p=>p).forEach(p=>s.append("index",p));let d=s.toString();a.search=d?`?${d}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:$c([t,a.pathname])),r1(a)}function VT(n,e={}){let t=ue.useContext(pA);Hr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=AA("useViewTransitionState"),i=A1(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Kc(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Kc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return _g(i.pathname,o)!=null||_g(i.pathname,a)!=null}[...ET];const qT=()=>{};var $w={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},HT=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},EA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,d=a>>2,p=(a&3)<<4|s>>4;let g=(s&15)<<2|f>>6,m=f&63;c||(m=64,o||(g=64)),r.push(t[d],t[p],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||f==null||p==null)throw new WT;const g=a<<2|s>>4;if(r.push(g),f!==64){const m=s<<4&240|f>>2;if(r.push(m),p!==64){const x=f<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class WT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GT=function(n){const e=SA(n);return EA.encodeByteArray(e,!0)},Ag=function(n){return GT(n).replace(/\./g,"")},CA=function(n){try{return EA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=()=>$T().__FIREBASE_DEFAULTS__,XT=()=>{if(typeof process>"u"||typeof $w>"u")return;const n=$w.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&CA(n[1]);return e&&JSON.parse(e)},um=()=>{try{return qT()||YT()||XT()||KT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IA=n=>{var e,t;return(t=(e=um())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},TA=n=>{const e=IA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},RA=()=>{var n;return(n=um())===null||n===void 0?void 0:n.config},NA=n=>{var e;return(e=um())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(n){return n.endsWith(".cloudworkstations.dev")}async function gx(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ag(JSON.stringify(t)),Ag(JSON.stringify(o)),""].join(".")}const Y0={};function ZT(){const n={prod:[],emulator:[]};for(const e of Object.keys(Y0))Y0[e]?n.emulator.push(e):n.prod.push(e);return n}function JT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Yw=!1;function mx(n,e){if(typeof window>"u"||typeof document>"u"||!Ph(window.location.host)||Y0[n]===e||Y0[n]||Yw)return;Y0[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=ZT().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function s(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Yw=!0,o()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=JT(r),m=t("text"),x=document.getElementById(m)||document.createElement("span"),_=t("learnmore"),T=document.getElementById(_)||document.createElement("a"),A=t("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const U=g.element;s(U),d(T,_);const H=f();c(D,A),U.append(D,x,T,H),document.body.appendChild(U)}a?(x.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(za())}function t7(){var n;const e=(n=um())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function r7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i7(){const n=za();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function a7(){return!t7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kA(){try{return typeof indexedDB=="object"}catch{return!1}}function PA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function o7(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7="FirebaseError";class Is extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=s7,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yd.prototype.create)}}class yd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?l7(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new Is(i,s,r)}}function l7(n,e){return n.replace(c7,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const c7=/\{\$([^}]+)}/g;function u7(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function hf(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(Xw(a)&&Xw(o)){if(!hf(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Xw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function B0(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function F0(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function f7(n,e){const t=new d7(n,e);return t.subscribe.bind(t)}class d7{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");h7(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=pv),i.error===void 0&&(i.error=pv),i.complete===void 0&&(i.complete=pv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h7(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7=1e3,g7=2,m7=4*60*60*1e3,v7=.5;function Kw(n,e=p7,t=g7){const r=e*Math.pow(t,n),i=Math.round(v7*r*(Math.random()-.5)*2);return Math.min(m7,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(n){return n&&n._delegate?n._delegate:n}class Cs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new QT;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b7(e))try{this.getOrInitializeService({instanceIdentifier:Zf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Zf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zf){return this.instances.has(e)}getOptions(e=Zf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:x7(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zf){return this.component?this.component.multipleInstances?e:Zf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x7(n){return n===Zf?void 0:n}function b7(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new y7(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Sn||(Sn={}));const _7={debug:Sn.DEBUG,verbose:Sn.VERBOSE,info:Sn.INFO,warn:Sn.WARN,error:Sn.ERROR,silent:Sn.SILENT},A7=Sn.INFO,S7={[Sn.DEBUG]:"log",[Sn.VERBOSE]:"log",[Sn.INFO]:"info",[Sn.WARN]:"warn",[Sn.ERROR]:"error"},E7=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=S7[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=A7,this._logHandler=E7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Sn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Sn.DEBUG,...e),this._logHandler(this,Sn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Sn.VERBOSE,...e),this._logHandler(this,Sn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Sn.INFO,...e),this._logHandler(this,Sn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Sn.WARN,...e),this._logHandler(this,Sn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Sn.ERROR,...e),this._logHandler(this,Sn.ERROR,...e)}}const C7=(n,e)=>e.some(t=>n instanceof t);let Qw,Zw;function I7(){return Qw||(Qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T7(){return Zw||(Zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LA=new WeakMap,ry=new WeakMap,MA=new WeakMap,gv=new WeakMap,vx=new WeakMap;function R7(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(of(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&LA.set(t,n)}).catch(()=>{}),vx.set(e,n),e}function N7(n){if(ry.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});ry.set(n,e)}let iy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ry.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return of(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function D7(n){iy=n(iy)}function O7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(mv(this),e,...t);return MA.set(r,e.sort?e.sort():[e]),of(r)}:T7().includes(n)?function(...e){return n.apply(mv(this),e),of(LA.get(this))}:function(...e){return of(n.apply(mv(this),e))}}function k7(n){return typeof n=="function"?O7(n):(n instanceof IDBTransaction&&N7(n),C7(n,I7())?new Proxy(n,iy):n)}function of(n){if(n instanceof IDBRequest)return R7(n);if(gv.has(n))return gv.get(n);const e=k7(n);return e!==n&&(gv.set(n,e),vx.set(e,n)),e}const mv=n=>vx.get(n);function jA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=of(o);return r&&o.addEventListener("upgradeneeded",c=>{r(of(o.result),c.oldVersion,c.newVersion,of(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),s.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),s}const P7=["get","getKey","getAll","getAllKeys","count"],L7=["put","add","delete","clear"],vv=new Map;function Jw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vv.get(e))return vv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=L7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||P7.includes(t)))return;const a=async function(o,...s){const c=this.transaction(o,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(s.shift())),(await Promise.all([f[t](...s),i&&c.done]))[0]};return vv.set(e,a),a}D7(n=>({...n,get:(e,t,r)=>Jw(e,t)||n.get(e,t,r),has:(e,t)=>!!Jw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(j7(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function j7(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ay="@firebase/app",e3="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new fm("@firebase/app"),B7="@firebase/app-compat",F7="@firebase/analytics-compat",z7="@firebase/analytics",U7="@firebase/app-check-compat",V7="@firebase/app-check",q7="@firebase/auth",H7="@firebase/auth-compat",W7="@firebase/database",G7="@firebase/data-connect",$7="@firebase/database-compat",Y7="@firebase/functions",X7="@firebase/functions-compat",K7="@firebase/installations",Q7="@firebase/installations-compat",Z7="@firebase/messaging",J7="@firebase/messaging-compat",eR="@firebase/performance",tR="@firebase/performance-compat",nR="@firebase/remote-config",rR="@firebase/remote-config-compat",iR="@firebase/storage",aR="@firebase/storage-compat",oR="@firebase/firestore",sR="@firebase/ai",lR="@firebase/firestore-compat",cR="firebase",uR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="[DEFAULT]",fR={[ay]:"fire-core",[B7]:"fire-core-compat",[z7]:"fire-analytics",[F7]:"fire-analytics-compat",[V7]:"fire-app-check",[U7]:"fire-app-check-compat",[q7]:"fire-auth",[H7]:"fire-auth-compat",[W7]:"fire-rtdb",[G7]:"fire-data-connect",[$7]:"fire-rtdb-compat",[Y7]:"fire-fn",[X7]:"fire-fn-compat",[K7]:"fire-iid",[Q7]:"fire-iid-compat",[Z7]:"fire-fcm",[J7]:"fire-fcm-compat",[eR]:"fire-perf",[tR]:"fire-perf-compat",[nR]:"fire-rc",[rR]:"fire-rc-compat",[iR]:"fire-gcs",[aR]:"fire-gcs-compat",[oR]:"fire-fst",[lR]:"fire-fst-compat",[sR]:"fire-vertex","fire-js":"fire-js",[cR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=new Map,dR=new Map,sy=new Map;function t3(n,e){try{n.container.addComponent(e)}catch(t){Qc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function fl(n){const e=n.name;if(sy.has(e))return Qc.debug(`There were multiple attempts to register component ${e}.`),!1;sy.set(e,n);for(const t of Sg.values())t3(t,n);for(const t of dR.values())t3(t,n);return!0}function Af(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yo(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sf=new yd("app","Firebase",hR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=uR;function BA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:oy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw sf.create("bad-app-name",{appName:String(i)});if(t||(t=RA()),!t)throw sf.create("no-options");const a=Sg.get(i);if(a){if(hf(t,a.options)&&hf(r,a.config))return a;throw sf.create("duplicate-app",{appName:i})}const o=new w7(i);for(const c of sy.values())o.addComponent(c);const s=new pR(t,r,o);return Sg.set(i,s),s}function dm(n=oy){const e=Sg.get(n);if(!e&&n===oy&&RA())return BA();if(!e)throw sf.create("no-app",{appName:n});return e}function wo(n,e,t){var r;let i=(r=fR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qc.warn(s.join(" "));return}fl(new Cs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="firebase-heartbeat-database",mR=1,i1="firebase-heartbeat-store";let yv=null;function FA(){return yv||(yv=jA(gR,mR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(i1)}catch(t){console.warn(t)}}}}).catch(n=>{throw sf.create("idb-open",{originalErrorMessage:n.message})})),yv}async function vR(n){try{const t=(await FA()).transaction(i1),r=await t.objectStore(i1).get(zA(n));return await t.done,r}catch(e){if(e instanceof Is)Qc.warn(e.message);else{const t=sf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qc.warn(t.message)}}}async function n3(n,e){try{const r=(await FA()).transaction(i1,"readwrite");await r.objectStore(i1).put(e,zA(n)),await r.done}catch(t){if(t instanceof Is)Qc.warn(t.message);else{const r=sf.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Qc.warn(r.message)}}}function zA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1024,xR=30;class bR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _R(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=r3();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>xR){const o=AR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=r3(),{heartbeatsToSend:r,unsentEntries:i}=wR(this._heartbeatsCache.heartbeats),a=Ag(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Qc.warn(t),""}}}function r3(){return new Date().toISOString().substring(0,10)}function wR(n,e=yR){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),i3(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),i3(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kA()?PA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return n3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return n3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function i3(n){return Ag(JSON.stringify({version:2,heartbeats:n})).length}function AR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(n){fl(new Cs("platform-logger",e=>new M7(e),"PRIVATE")),fl(new Cs("heartbeat",e=>new bR(e),"PRIVATE")),wo(ay,e3,n),wo(ay,e3,"esm2017"),wo("fire-js","")}SR("");function yx(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function UA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ER=UA,VA=new yd("auth","Firebase",UA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=new fm("@firebase/auth");function CR(n,...e){Eg.logLevel<=Sn.WARN&&Eg.warn(`Auth (${xd}): ${n}`,...e)}function ig(n,...e){Eg.logLevel<=Sn.ERROR&&Eg.error(`Auth (${xd}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(n,...e){throw xx(n,...e)}function Zl(n,...e){return xx(n,...e)}function qA(n,e,t){const r=Object.assign(Object.assign({},ER()),{[e]:t});return new yd("auth","Firebase",r).create(e,{appName:n.name})}function Yc(n){return qA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xx(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VA.create(n,...e)}function $t(n,e,...t){if(!n)throw xx(e,...t)}function Hc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ig(e),new Error(e)}function Zc(n,e){n||Hc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function IR(){return a3()==="http:"||a3()==="https:"}function a3(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IR()||OA()||"connection"in navigator)?navigator.onLine:!0}function RR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zc(t>e,"Short delay should be less than long delay!"),this.isMobile=e7()||r7()}get(){return TR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n,e){Zc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OR=new E1(3e4,6e4);function lu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function cu(n,e,t,r,i={}){return WA(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=S1(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:c},a);return n7()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ph(n.emulatorConfig.host)&&(f.credentials="include"),HA.fetch()(await GA(n,n.config.apiHost,t,s),f)})}async function WA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},NR),e);try{const i=new PR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw zp(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[c,f]=s.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw zp(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw zp(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw zp(n,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw qA(n,d,f);dl(n,d)}}catch(i){if(i instanceof Is)throw i;dl(n,"network-request-failed",{message:String(i)})}}async function C1(n,e,t,r,i={}){const a=await cu(n,e,t,r,i);return"mfaPendingCredential"in a&&dl(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function GA(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?bx(n.config,i):`${n.config.apiScheme}://${i}`;return DR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function kR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zl(this.auth,"network-request-failed")),OR.get())})}}function zp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Zl(n,e,r);return i.customData._tokenResponse=t,i}function o3(n){return n!==void 0&&n.enterprise!==void 0}class LR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MR(n,e){return cu(n,"GET","/v2/recaptchaConfig",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(n,e){return cu(n,"POST","/v1/accounts:delete",e)}async function Cg(n,e){return cu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BR(n,e=!1){const t=Wr(n),r=await t.getIdToken(e),i=wx(r);$t(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:X0(xv(i.auth_time)),issuedAtTime:X0(xv(i.iat)),expirationTime:X0(xv(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function xv(n){return Number(n)*1e3}function wx(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ig("JWT malformed, contained fewer than 3 sections"),null;try{const i=CA(t);return i?JSON.parse(i):(ig("Failed to decode base64 JWT payload"),null)}catch(i){return ig("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function s3(n){const e=wx(n);return $t(e,"internal-error"),$t(typeof e.exp<"u","internal-error"),$t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Is&&FR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function FR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=X0(this.lastLoginAt),this.creationTime=X0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ig(n){var e;const t=n.auth,r=await n.getIdToken(),i=await a1(n,Cg(t,{idToken:r}));$t(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?$A(a.providerUserInfo):[],s=VR(n.providerData,o),c=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),d=c?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new cy(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function UR(n){const e=Wr(n);await Ig(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $A(n){return n.map(e=>{var{providerId:t}=e,r=yx(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(n,e){const t=await WA(n,{},async()=>{const r=S1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await GA(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",HA.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function HR(n,e){return cu(n,"POST","/v2/accounts:revokeToken",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$t(e.idToken,"internal-error"),$t(typeof e.idToken<"u","internal-error"),$t(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$t(e.length!==0,"internal-error");const t=s3(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await qR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new ph;return r&&($t(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($t(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&($t(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ph,this.toJSON())}_performRefresh(){return Hc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(n,e){$t(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ll{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=yx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new cy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await a1(this,this.stsTokenManager.getToken(this.auth,e));return $t(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return BR(this,e)}reload(){return UR(this)}_assign(e){this!==e&&($t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ll(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ig(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yo(this.auth.app))return Promise.reject(Yc(this.auth));const e=await this.getIdToken();return await a1(this,jR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,c,f,d;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(s=t.tenantId)!==null&&s!==void 0?s:void 0,T=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,A=(f=t.createdAt)!==null&&f!==void 0?f:void 0,D=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:U,emailVerified:H,isAnonymous:X,providerData:q,stsTokenManager:j}=t;$t(U&&j,e,"internal-error");const C=ph.fromJSON(this.name,j);$t(typeof U=="string",e,"internal-error"),$u(p,e.name),$u(g,e.name),$t(typeof H=="boolean",e,"internal-error"),$t(typeof X=="boolean",e,"internal-error"),$u(m,e.name),$u(x,e.name),$u(_,e.name),$u(T,e.name),$u(A,e.name),$u(D,e.name);const N=new ll({uid:U,auth:e,email:g,emailVerified:H,displayName:p,isAnonymous:X,photoURL:x,phoneNumber:m,tenantId:_,stsTokenManager:C,createdAt:A,lastLoginAt:D});return q&&Array.isArray(q)&&(N.providerData=q.map(L=>Object.assign({},L))),T&&(N._redirectEventId=T),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new ph;i.updateFromServerResponse(t);const a=new ll({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ig(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];$t(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?$A(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new ph;s.updateFromIdToken(r);const c=new ll({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new cy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=new Map;function Wc(n){Zc(n instanceof Function,"Expected a class definition");let e=l3.get(n);return e?(Zc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,l3.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}YA.type="NONE";const c3=YA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n,e,t){return`firebase:${n}:${e}:${t}`}class gh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=ag(this.userKey,i.apiKey,a),this.fullPersistenceKey=ag("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Cg(this.auth,{idToken:e}).catch(()=>{});return t?ll._fromGetAccountInfoResponse(this.auth,t,e):null}return ll._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new gh(Wc(c3),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||Wc(c3);const o=ag(r,e.config.apiKey,e.name);let s=null;for(const f of t)try{const d=await f._get(o);if(d){let p;if(typeof d=="string"){const g=await Cg(e,{idToken:d}).catch(()=>{});if(!g)break;p=await ll._fromGetAccountInfoResponse(e,g,d)}else p=ll._fromJSON(e,d);f!==a&&(s=p),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new gh(a,e,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new gh(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e6(e))return"Blackberry";if(t6(e))return"Webos";if(KA(e))return"Safari";if((e.includes("chrome/")||QA(e))&&!e.includes("edge/"))return"Chrome";if(JA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XA(n=za()){return/firefox\//i.test(n)}function KA(n=za()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QA(n=za()){return/crios\//i.test(n)}function ZA(n=za()){return/iemobile/i.test(n)}function JA(n=za()){return/android/i.test(n)}function e6(n=za()){return/blackberry/i.test(n)}function t6(n=za()){return/webos/i.test(n)}function _x(n=za()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WR(n=za()){var e;return _x(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GR(){return i7()&&document.documentMode===10}function n6(n=za()){return _x(n)||JA(n)||t6(n)||e6(n)||/windows phone/i.test(n)||ZA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(n,e=[]){let t;switch(n){case"Browser":t=u3(za());break;case"Worker":t=`${u3(za())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const c=e(a);o(c)}catch(c){s(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e={}){return cu(n,"GET","/v2/passwordPolicy",lu(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=6;class KR{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:XR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f3(this),this.idTokenSubscription=new f3(this),this.beforeStateQueue=new $R(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wc(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await gh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Cg(this,{idToken:e}),r=await ll._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ig(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yo(this.app))return Promise.reject(Yc(this));const t=e?Wr(e):null;return t&&$t(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yo(this.app)?Promise.reject(Yc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yo(this.app)?Promise.reject(Yc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YR(this),t=new KR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await HR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wc(e)||this._popupRedirectResolver;$t(t,this,"argument-error"),this.redirectPersistenceManager=await gh.create(this,[Wc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if($t(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=r6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Yo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Sf(n){return Wr(n)}class f3{constructor(e){this.auth=e,this.observer=null,this.addObserver=f7(t=>this.observer=t)}get next(){return $t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZR(n){hm=n}function i6(n){return hm.loadJS(n)}function JR(){return hm.recaptchaEnterpriseScript}function e9(){return hm.gapiScript}function t9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class n9{constructor(){this.enterprise=new r9}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class r9{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const i9="recaptcha-enterprise",a6="NO_RECAPTCHA";class a9{constructor(e){this.type=i9,this.auth=Sf(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{MR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const f=new LR(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(c=>{s(c)})})}function i(a,o,s){const c=window.grecaptcha;o3(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(a6)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new n9().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&o3(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=JR();c.length!==0&&(c+=s),i6(c).then(()=>{i(s,a,o)}).catch(f=>{o(f)})}}).catch(s=>{o(s)})})}}async function d3(n,e,t,r=!1,i=!1){const a=new a9(n);let o;if(i)o=a6;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const s=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const c=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const c=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Tg(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await d3(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await d3(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(n,e){const t=Af(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(hf(a,e??{}))return i;dl(i,"already-initialized")}return t.initialize({options:e})}function s9(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Wc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function l9(n,e,t){const r=Sf(n);$t(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=o6(e),{host:o,port:s}=c9(e),c=s===null?"":`:${s}`,f={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$t(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$t(hf(f,r.config.emulator)&&hf(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ph(o)?(gx(`${a}//${o}${c}`),mx("Auth",!0)):u9()}function o6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function c9(n){const e=o6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:h3(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:h3(o)}}}function h3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function u9(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hc("not implemented")}_getIdTokenResponse(e){return Hc("not implemented")}_linkToIdToken(e,t){return Hc("not implemented")}_getReauthenticationResolver(e){return Hc("not implemented")}}async function f9(n,e){return cu(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9(n,e){return C1(n,"POST","/v1/accounts:signInWithPassword",lu(n,e))}async function s6(n,e){return cu(n,"POST","/v1/accounts:sendOobCode",lu(n,e))}async function h9(n,e){return s6(n,e)}async function p9(n,e){return s6(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g9(n,e){return C1(n,"POST","/v1/accounts:signInWithEmailLink",lu(n,e))}async function m9(n,e){return C1(n,"POST","/v1/accounts:signInWithEmailLink",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends Ax{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new o1(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new o1(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tg(e,t,"signInWithPassword",d9);case"emailLink":return g9(e,{email:this._email,oobCode:this._password});default:dl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tg(e,r,"signUpPassword",f9);case"emailLink":return m9(e,{idToken:t,email:this._email,oobCode:this._password});default:dl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(n,e){return C1(n,"POST","/v1/accounts:signInWithIdp",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9="http://localhost";class ud extends Ax{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ud(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=yx(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ud(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return mh(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,mh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mh(e,t)}buildRequest(){const e={requestUri:v9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=S1(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x9(n){const e=B0(F0(n)).link,t=e?B0(F0(e)).deep_link_id:null,r=B0(F0(n)).deep_link_id;return(r?B0(F0(r)).link:null)||r||t||e||n}class Sx{constructor(e){var t,r,i,a,o,s;const c=B0(F0(e)),f=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,p=y9((i=c.mode)!==null&&i!==void 0?i:null);$t(f&&d&&p,"argument-error"),this.apiKey=f,this.operation=p,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(s=c.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=x9(e);try{return new Sx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this.providerId=Lh.PROVIDER_ID}static credential(e,t){return o1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Sx.parseLink(t);return $t(r,"argument-error"),o1._fromEmailAndCode(e,r.code,r.tenantId)}}Lh.PROVIDER_ID="password";Lh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends l6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends I1{constructor(){super("facebook.com")}static credential(e){return ud._fromParams({providerId:Ju.PROVIDER_ID,signInMethod:Ju.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ju.credentialFromTaggedObject(e)}static credentialFromError(e){return Ju.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ju.credential(e.oauthAccessToken)}catch{return null}}}Ju.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ju.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends I1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ud._fromParams({providerId:ef.PROVIDER_ID,signInMethod:ef.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ef.credentialFromTaggedObject(e)}static credentialFromError(e){return ef.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ef.credential(t,r)}catch{return null}}}ef.GOOGLE_SIGN_IN_METHOD="google.com";ef.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends I1{constructor(){super("github.com")}static credential(e){return ud._fromParams({providerId:tf.PROVIDER_ID,signInMethod:tf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tf.credentialFromTaggedObject(e)}static credentialFromError(e){return tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tf.credential(e.oauthAccessToken)}catch{return null}}}tf.GITHUB_SIGN_IN_METHOD="github.com";tf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends I1{constructor(){super("twitter.com")}static credential(e,t){return ud._fromParams({providerId:nf.PROVIDER_ID,signInMethod:nf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nf.credentialFromTaggedObject(e)}static credentialFromError(e){return nf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return nf.credential(t,r)}catch{return null}}}nf.TWITTER_SIGN_IN_METHOD="twitter.com";nf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b9(n,e){return C1(n,"POST","/v1/accounts:signUp",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await ll._fromIdTokenResponse(e,r,i),o=p3(r);return new fd({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=p3(r);return new fd({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function p3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends Is{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Rg(e,t,r,i)}}function c6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Rg._fromErrorAndOperation(n,a,e,r):a})}async function w9(n,e,t=!1){const r=await a1(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fd._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _9(n,e,t=!1){const{auth:r}=n;if(Yo(r.app))return Promise.reject(Yc(r));const i="reauthenticate";try{const a=await a1(n,c6(r,i,e,n),t);$t(a.idToken,r,"internal-error");const o=wx(a.idToken);$t(o,r,"internal-error");const{sub:s}=o;return $t(n.uid===s,r,"user-mismatch"),fd._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&dl(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(n,e,t=!1){if(Yo(n.app))return Promise.reject(Yc(n));const r="signIn",i=await c6(n,r,e),a=await fd._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function A9(n,e){return u6(Sf(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(n){const e=Sf(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S9(n,e,t){const r=Sf(n);await Tg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",p9)}async function E9(n,e,t){if(Yo(n.app))return Promise.reject(Yc(n));const r=Sf(n),o=await Tg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",b9).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&f6(n),c}),s=await fd._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function C9(n,e,t){return Yo(n.app)?Promise.reject(Yc(n)):A9(Wr(n),Lh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&f6(n),r})}async function I9(n,e){const t=Wr(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await h9(t.auth,i);a!==n.email&&await n.reload()}function T9(n,e,t,r){return Wr(n).onIdTokenChanged(e,t,r)}function R9(n,e,t){return Wr(n).beforeAuthStateChanged(e,t)}function N9(n,e,t,r){return Wr(n).onAuthStateChanged(e,t,r)}function D9(n){return Wr(n).signOut()}const Ng="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ng,"1"),this.storage.removeItem(Ng),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=1e3,k9=10;class h6 extends d6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=n6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);GR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,k9):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},O9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}h6.type="LOCAL";const P9=h6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6 extends d6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}p6.type="SESSION";const g6=p6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new pm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async f=>f(t.origin,a)),c=await L9(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,c)=>{const f=Ex("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(g.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(){return window}function j9(n){Jl().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(){return typeof Jl().WorkerGlobalScope<"u"&&typeof Jl().importScripts=="function"}async function B9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F9(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function z9(){return m6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6="firebaseLocalStorageDb",U9=1,Dg="firebaseLocalStorage",y6="fbase_key";class T1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gm(n,e){return n.transaction([Dg],e?"readwrite":"readonly").objectStore(Dg)}function V9(){const n=indexedDB.deleteDatabase(v6);return new T1(n).toPromise()}function uy(){const n=indexedDB.open(v6,U9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Dg,{keyPath:y6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Dg)?e(r):(r.close(),await V9(),e(await uy()))})})}async function g3(n,e,t){const r=gm(n,!0).put({[y6]:e,value:t});return new T1(r).toPromise()}async function q9(n,e){const t=gm(n,!1).get(e),r=await new T1(t).toPromise();return r===void 0?null:r.value}function m3(n,e){const t=gm(n,!0).delete(e);return new T1(t).toPromise()}const H9=800,W9=3;class x6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>W9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pm._getInstance(z9()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await B9(),!this.activeServiceWorker)return;this.sender=new M9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uy();return await g3(e,Ng,"1"),await m3(e,Ng),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>g3(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>q9(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>m3(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=gm(i,!1).getAll();return new T1(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x6.type="LOCAL";const G9=x6;new E1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(n,e){return e?Wc(e):($t(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx extends Ax{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Y9(n){return u6(n.auth,new Cx(n),n.bypassAuthState)}function X9(n){const{auth:e,user:t}=n;return $t(t,e,"internal-error"),_9(t,new Cx(n),n.bypassAuthState)}async function K9(n){const{auth:e,user:t}=n;return $t(t,e,"internal-error"),w9(t,new Cx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y9;case"linkViaPopup":case"linkViaRedirect":return K9;case"reauthViaPopup":case"reauthViaRedirect":return X9;default:dl(this.auth,"internal-error")}}resolve(e){Zc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=new E1(2e3,1e4);class ch extends b6{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ch.currentPopupAction&&ch.currentPopupAction.cancel(),ch.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $t(e,this.auth,"internal-error"),e}async onExecution(){Zc(this.filter.length===1,"Popup operations only handle one event");const e=Ex();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ch.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q9.get())};e()}}ch.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9="pendingRedirect",og=new Map;class J9 extends b6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=og.get(this.auth._key());if(!e){try{const r=await eN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}og.set(this.auth._key(),e)}return this.bypassAuthState||og.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eN(n,e){const t=rN(e),r=nN(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function tN(n,e){og.set(n._key(),e)}function nN(n){return Wc(n._redirectPersistence)}function rN(n){return ag(Z9,n.config.apiKey,n.name)}async function iN(n,e,t=!1){if(Yo(n.app))return Promise.reject(Yc(n));const r=Sf(n),i=$9(r,e),o=await new J9(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=10*60*1e3;class oN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!w6(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aN&&this.cachedEventUids.clear(),this.cachedEventUids.has(v3(e))}saveEventToCache(e){this.cachedEventUids.add(v3(e)),this.lastProcessedEventTime=Date.now()}}function v3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function w6({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w6(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(n,e={}){return cu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uN=/^https?/;async function fN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await lN(n);for(const t of e)try{if(dN(t))return}catch{}dl(n,"unauthorized-domain")}function dN(n){const e=ly(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!uN.test(t))return!1;if(cN.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new E1(3e4,6e4);function y3(){const n=Jl().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pN(n){return new Promise((e,t)=>{var r,i,a;function o(){y3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y3(),t(Zl(n,"network-request-failed"))},timeout:hN.get()})}if(!((i=(r=Jl().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Jl().gapi)===null||a===void 0)&&a.load)o();else{const s=t9("iframefcb");return Jl()[s]=()=>{gapi.load?o():t(Zl(n,"network-request-failed"))},i6(`${e9()}?onload=${s}`).catch(c=>t(c))}}).catch(e=>{throw sg=null,e})}let sg=null;function gN(n){return sg=sg||pN(n),sg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new E1(5e3,15e3),vN="__/auth/iframe",yN="emulator/auth/iframe",xN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wN(n){const e=n.config;$t(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bx(e,yN):`https://${n.config.authDomain}/${vN}`,r={apiKey:e.apiKey,appName:n.name,v:xd},i=bN.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${S1(r).slice(1)}`}async function _N(n){const e=await gN(n),t=Jl().gapi;return $t(t,n,"internal-error"),e.open({where:document.body,url:wN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xN,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Zl(n,"network-request-failed"),s=Jl().setTimeout(()=>{a(o)},mN.get());function c(){Jl().clearTimeout(s),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SN=500,EN=600,CN="_blank",IN="http://localhost";class x3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TN(n,e,t,r=SN,i=EN){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const c=Object.assign(Object.assign({},AN),{width:r.toString(),height:i.toString(),top:a,left:o}),f=za().toLowerCase();t&&(s=QA(f)?CN:t),XA(f)&&(e=e||IN,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[m,x])=>`${g}${m}=${x},`,"");if(WR(f)&&s!=="_self")return RN(e||"",s),new x3(null);const p=window.open(e||"",s,d);$t(p,n,"popup-blocked");try{p.focus()}catch{}return new x3(p)}function RN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="__/auth/handler",DN="emulator/auth/handler",ON=encodeURIComponent("fac");async function b3(n,e,t,r,i,a){$t(n.config.authDomain,n,"auth-domain-config-required"),$t(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:xd,eventId:i};if(e instanceof l6){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",u7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof I1){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const d of Object.keys(s))s[d]===void 0&&delete s[d];const c=await n._getAppCheckToken(),f=c?`#${ON}=${encodeURIComponent(c)}`:"";return`${kN(n)}?${S1(s).slice(1)}${f}`}function kN({config:n}){return n.emulator?bx(n,DN):`https://${n.authDomain}/${NN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="webStorageSupport";class PN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g6,this._completeRedirectFn=iN,this._overrideRedirectResult=tN}async _openPopup(e,t,r,i){var a;Zc((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await b3(e,t,r,ly(),i);return TN(e,o,Ex())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await b3(e,t,r,ly(),i);return j9(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Zc(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _N(e),r=new oN(e);return t.register("authEvent",i=>($t(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bv,{type:bv},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[bv];o!==void 0&&t(!!o),dl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return n6()||KA()||_x()}}const LN=PN;var w3="@firebase/auth",_3="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BN(n){fl(new Cs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;$t(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r6(n)},f=new QR(r,i,a,c);return s9(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),fl(new Cs("auth-internal",e=>{const t=Sf(e.getProvider("auth").getImmediate());return(r=>new MN(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wo(w3,_3,jN(n)),wo(w3,_3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=5*60,zN=NA("authIdTokenMaxAge")||FN;let A3=null;const UN=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>zN)return;const i=t==null?void 0:t.token;A3!==i&&(A3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VN(n=dm()){const e=Af(n,"auth");if(e.isInitialized())return e.getImmediate();const t=o9(n,{popupRedirectResolver:LN,persistence:[G9,P9,g6]}),r=NA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=UN(a.toString());R9(t,o,()=>o(t.currentUser)),T9(t,s=>o(s))}}const i=IA("auth");return i&&l9(t,`http://${i}`),t}function qN(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ZR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Zl("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",qN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BN("Browser");var S3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lf,_6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,C){function N(){}N.prototype=C.prototype,j.D=C.prototype,j.prototype=new N,j.prototype.constructor=j,j.C=function(L,R,I){for(var P=Array(arguments.length-2),M=2;M<arguments.length;M++)P[M-2]=arguments[M];return C.prototype[R].apply(L,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,C,N){N||(N=0);var L=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)L[R]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(R=0;16>R;++R)L[R]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=j.g[0],N=j.g[1],R=j.g[2];var I=j.g[3],P=C+(I^N&(R^I))+L[0]+3614090360&4294967295;C=N+(P<<7&4294967295|P>>>25),P=I+(R^C&(N^R))+L[1]+3905402710&4294967295,I=C+(P<<12&4294967295|P>>>20),P=R+(N^I&(C^N))+L[2]+606105819&4294967295,R=I+(P<<17&4294967295|P>>>15),P=N+(C^R&(I^C))+L[3]+3250441966&4294967295,N=R+(P<<22&4294967295|P>>>10),P=C+(I^N&(R^I))+L[4]+4118548399&4294967295,C=N+(P<<7&4294967295|P>>>25),P=I+(R^C&(N^R))+L[5]+1200080426&4294967295,I=C+(P<<12&4294967295|P>>>20),P=R+(N^I&(C^N))+L[6]+2821735955&4294967295,R=I+(P<<17&4294967295|P>>>15),P=N+(C^R&(I^C))+L[7]+4249261313&4294967295,N=R+(P<<22&4294967295|P>>>10),P=C+(I^N&(R^I))+L[8]+1770035416&4294967295,C=N+(P<<7&4294967295|P>>>25),P=I+(R^C&(N^R))+L[9]+2336552879&4294967295,I=C+(P<<12&4294967295|P>>>20),P=R+(N^I&(C^N))+L[10]+4294925233&4294967295,R=I+(P<<17&4294967295|P>>>15),P=N+(C^R&(I^C))+L[11]+2304563134&4294967295,N=R+(P<<22&4294967295|P>>>10),P=C+(I^N&(R^I))+L[12]+1804603682&4294967295,C=N+(P<<7&4294967295|P>>>25),P=I+(R^C&(N^R))+L[13]+4254626195&4294967295,I=C+(P<<12&4294967295|P>>>20),P=R+(N^I&(C^N))+L[14]+2792965006&4294967295,R=I+(P<<17&4294967295|P>>>15),P=N+(C^R&(I^C))+L[15]+1236535329&4294967295,N=R+(P<<22&4294967295|P>>>10),P=C+(R^I&(N^R))+L[1]+4129170786&4294967295,C=N+(P<<5&4294967295|P>>>27),P=I+(N^R&(C^N))+L[6]+3225465664&4294967295,I=C+(P<<9&4294967295|P>>>23),P=R+(C^N&(I^C))+L[11]+643717713&4294967295,R=I+(P<<14&4294967295|P>>>18),P=N+(I^C&(R^I))+L[0]+3921069994&4294967295,N=R+(P<<20&4294967295|P>>>12),P=C+(R^I&(N^R))+L[5]+3593408605&4294967295,C=N+(P<<5&4294967295|P>>>27),P=I+(N^R&(C^N))+L[10]+38016083&4294967295,I=C+(P<<9&4294967295|P>>>23),P=R+(C^N&(I^C))+L[15]+3634488961&4294967295,R=I+(P<<14&4294967295|P>>>18),P=N+(I^C&(R^I))+L[4]+3889429448&4294967295,N=R+(P<<20&4294967295|P>>>12),P=C+(R^I&(N^R))+L[9]+568446438&4294967295,C=N+(P<<5&4294967295|P>>>27),P=I+(N^R&(C^N))+L[14]+3275163606&4294967295,I=C+(P<<9&4294967295|P>>>23),P=R+(C^N&(I^C))+L[3]+4107603335&4294967295,R=I+(P<<14&4294967295|P>>>18),P=N+(I^C&(R^I))+L[8]+1163531501&4294967295,N=R+(P<<20&4294967295|P>>>12),P=C+(R^I&(N^R))+L[13]+2850285829&4294967295,C=N+(P<<5&4294967295|P>>>27),P=I+(N^R&(C^N))+L[2]+4243563512&4294967295,I=C+(P<<9&4294967295|P>>>23),P=R+(C^N&(I^C))+L[7]+1735328473&4294967295,R=I+(P<<14&4294967295|P>>>18),P=N+(I^C&(R^I))+L[12]+2368359562&4294967295,N=R+(P<<20&4294967295|P>>>12),P=C+(N^R^I)+L[5]+4294588738&4294967295,C=N+(P<<4&4294967295|P>>>28),P=I+(C^N^R)+L[8]+2272392833&4294967295,I=C+(P<<11&4294967295|P>>>21),P=R+(I^C^N)+L[11]+1839030562&4294967295,R=I+(P<<16&4294967295|P>>>16),P=N+(R^I^C)+L[14]+4259657740&4294967295,N=R+(P<<23&4294967295|P>>>9),P=C+(N^R^I)+L[1]+2763975236&4294967295,C=N+(P<<4&4294967295|P>>>28),P=I+(C^N^R)+L[4]+1272893353&4294967295,I=C+(P<<11&4294967295|P>>>21),P=R+(I^C^N)+L[7]+4139469664&4294967295,R=I+(P<<16&4294967295|P>>>16),P=N+(R^I^C)+L[10]+3200236656&4294967295,N=R+(P<<23&4294967295|P>>>9),P=C+(N^R^I)+L[13]+681279174&4294967295,C=N+(P<<4&4294967295|P>>>28),P=I+(C^N^R)+L[0]+3936430074&4294967295,I=C+(P<<11&4294967295|P>>>21),P=R+(I^C^N)+L[3]+3572445317&4294967295,R=I+(P<<16&4294967295|P>>>16),P=N+(R^I^C)+L[6]+76029189&4294967295,N=R+(P<<23&4294967295|P>>>9),P=C+(N^R^I)+L[9]+3654602809&4294967295,C=N+(P<<4&4294967295|P>>>28),P=I+(C^N^R)+L[12]+3873151461&4294967295,I=C+(P<<11&4294967295|P>>>21),P=R+(I^C^N)+L[15]+530742520&4294967295,R=I+(P<<16&4294967295|P>>>16),P=N+(R^I^C)+L[2]+3299628645&4294967295,N=R+(P<<23&4294967295|P>>>9),P=C+(R^(N|~I))+L[0]+4096336452&4294967295,C=N+(P<<6&4294967295|P>>>26),P=I+(N^(C|~R))+L[7]+1126891415&4294967295,I=C+(P<<10&4294967295|P>>>22),P=R+(C^(I|~N))+L[14]+2878612391&4294967295,R=I+(P<<15&4294967295|P>>>17),P=N+(I^(R|~C))+L[5]+4237533241&4294967295,N=R+(P<<21&4294967295|P>>>11),P=C+(R^(N|~I))+L[12]+1700485571&4294967295,C=N+(P<<6&4294967295|P>>>26),P=I+(N^(C|~R))+L[3]+2399980690&4294967295,I=C+(P<<10&4294967295|P>>>22),P=R+(C^(I|~N))+L[10]+4293915773&4294967295,R=I+(P<<15&4294967295|P>>>17),P=N+(I^(R|~C))+L[1]+2240044497&4294967295,N=R+(P<<21&4294967295|P>>>11),P=C+(R^(N|~I))+L[8]+1873313359&4294967295,C=N+(P<<6&4294967295|P>>>26),P=I+(N^(C|~R))+L[15]+4264355552&4294967295,I=C+(P<<10&4294967295|P>>>22),P=R+(C^(I|~N))+L[6]+2734768916&4294967295,R=I+(P<<15&4294967295|P>>>17),P=N+(I^(R|~C))+L[13]+1309151649&4294967295,N=R+(P<<21&4294967295|P>>>11),P=C+(R^(N|~I))+L[4]+4149444226&4294967295,C=N+(P<<6&4294967295|P>>>26),P=I+(N^(C|~R))+L[11]+3174756917&4294967295,I=C+(P<<10&4294967295|P>>>22),P=R+(C^(I|~N))+L[2]+718787259&4294967295,R=I+(P<<15&4294967295|P>>>17),P=N+(I^(R|~C))+L[9]+3951481745&4294967295,j.g[0]=j.g[0]+C&4294967295,j.g[1]=j.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,j.g[2]=j.g[2]+R&4294967295,j.g[3]=j.g[3]+I&4294967295}r.prototype.u=function(j,C){C===void 0&&(C=j.length);for(var N=C-this.blockSize,L=this.B,R=this.h,I=0;I<C;){if(R==0)for(;I<=N;)i(this,j,I),I+=this.blockSize;if(typeof j=="string"){for(;I<C;)if(L[R++]=j.charCodeAt(I++),R==this.blockSize){i(this,L),R=0;break}}else for(;I<C;)if(L[R++]=j[I++],R==this.blockSize){i(this,L),R=0;break}}this.h=R,this.o+=C},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var C=1;C<j.length-8;++C)j[C]=0;var N=8*this.o;for(C=j.length-8;C<j.length;++C)j[C]=N&255,N/=256;for(this.u(j),j=Array(16),C=N=0;4>C;++C)for(var L=0;32>L;L+=8)j[N++]=this.g[C]>>>L&255;return j};function a(j,C){var N=s;return Object.prototype.hasOwnProperty.call(N,j)?N[j]:N[j]=C(j)}function o(j,C){this.h=C;for(var N=[],L=!0,R=j.length-1;0<=R;R--){var I=j[R]|0;L&&I==C||(N[R]=I,L=!1)}this.g=N}var s={};function c(j){return-128<=j&&128>j?a(j,function(C){return new o([C|0],0>C?-1:0)}):new o([j|0],0>j?-1:0)}function f(j){if(isNaN(j)||!isFinite(j))return p;if(0>j)return T(f(-j));for(var C=[],N=1,L=0;j>=N;L++)C[L]=j/N|0,N*=4294967296;return new o(C,0)}function d(j,C){if(j.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(j.charAt(0)=="-")return T(d(j.substring(1),C));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=f(Math.pow(C,8)),L=p,R=0;R<j.length;R+=8){var I=Math.min(8,j.length-R),P=parseInt(j.substring(R,R+I),C);8>I?(I=f(Math.pow(C,I)),L=L.j(I).add(f(P))):(L=L.j(N),L=L.add(f(P)))}return L}var p=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(_(this))return-T(this).m();for(var j=0,C=1,N=0;N<this.g.length;N++){var L=this.i(N);j+=(0<=L?L:4294967296+L)*C,C*=4294967296}return j},n.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(x(this))return"0";if(_(this))return"-"+T(this).toString(j);for(var C=f(Math.pow(j,6)),N=this,L="";;){var R=H(N,C).g;N=A(N,R.j(C));var I=((0<N.g.length?N.g[0]:N.h)>>>0).toString(j);if(N=R,x(N))return I+L;for(;6>I.length;)I="0"+I;L=I+L}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function x(j){if(j.h!=0)return!1;for(var C=0;C<j.g.length;C++)if(j.g[C]!=0)return!1;return!0}function _(j){return j.h==-1}n.l=function(j){return j=A(this,j),_(j)?-1:x(j)?0:1};function T(j){for(var C=j.g.length,N=[],L=0;L<C;L++)N[L]=~j.g[L];return new o(N,~j.h).add(g)}n.abs=function(){return _(this)?T(this):this},n.add=function(j){for(var C=Math.max(this.g.length,j.g.length),N=[],L=0,R=0;R<=C;R++){var I=L+(this.i(R)&65535)+(j.i(R)&65535),P=(I>>>16)+(this.i(R)>>>16)+(j.i(R)>>>16);L=P>>>16,I&=65535,P&=65535,N[R]=P<<16|I}return new o(N,N[N.length-1]&-2147483648?-1:0)};function A(j,C){return j.add(T(C))}n.j=function(j){if(x(this)||x(j))return p;if(_(this))return _(j)?T(this).j(T(j)):T(T(this).j(j));if(_(j))return T(this.j(T(j)));if(0>this.l(m)&&0>j.l(m))return f(this.m()*j.m());for(var C=this.g.length+j.g.length,N=[],L=0;L<2*C;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(var R=0;R<j.g.length;R++){var I=this.i(L)>>>16,P=this.i(L)&65535,M=j.i(R)>>>16,K=j.i(R)&65535;N[2*L+2*R]+=P*K,D(N,2*L+2*R),N[2*L+2*R+1]+=I*K,D(N,2*L+2*R+1),N[2*L+2*R+1]+=P*M,D(N,2*L+2*R+1),N[2*L+2*R+2]+=I*M,D(N,2*L+2*R+2)}for(L=0;L<C;L++)N[L]=N[2*L+1]<<16|N[2*L];for(L=C;L<2*C;L++)N[L]=0;return new o(N,0)};function D(j,C){for(;(j[C]&65535)!=j[C];)j[C+1]+=j[C]>>>16,j[C]&=65535,C++}function U(j,C){this.g=j,this.h=C}function H(j,C){if(x(C))throw Error("division by zero");if(x(j))return new U(p,p);if(_(j))return C=H(T(j),C),new U(T(C.g),T(C.h));if(_(C))return C=H(j,T(C)),new U(T(C.g),C.h);if(30<j.g.length){if(_(j)||_(C))throw Error("slowDivide_ only works with positive integers.");for(var N=g,L=C;0>=L.l(j);)N=X(N),L=X(L);var R=q(N,1),I=q(L,1);for(L=q(L,2),N=q(N,2);!x(L);){var P=I.add(L);0>=P.l(j)&&(R=R.add(N),I=P),L=q(L,1),N=q(N,1)}return C=A(j,R.j(C)),new U(R,C)}for(R=p;0<=j.l(C);){for(N=Math.max(1,Math.floor(j.m()/C.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),I=f(N),P=I.j(C);_(P)||0<P.l(j);)N-=L,I=f(N),P=I.j(C);x(I)&&(I=g),R=R.add(I),j=A(j,P)}return new U(R,j)}n.A=function(j){return H(this,j).h},n.and=function(j){for(var C=Math.max(this.g.length,j.g.length),N=[],L=0;L<C;L++)N[L]=this.i(L)&j.i(L);return new o(N,this.h&j.h)},n.or=function(j){for(var C=Math.max(this.g.length,j.g.length),N=[],L=0;L<C;L++)N[L]=this.i(L)|j.i(L);return new o(N,this.h|j.h)},n.xor=function(j){for(var C=Math.max(this.g.length,j.g.length),N=[],L=0;L<C;L++)N[L]=this.i(L)^j.i(L);return new o(N,this.h^j.h)};function X(j){for(var C=j.g.length+1,N=[],L=0;L<C;L++)N[L]=j.i(L)<<1|j.i(L-1)>>>31;return new o(N,j.h)}function q(j,C){var N=C>>5;C%=32;for(var L=j.g.length-N,R=[],I=0;I<L;I++)R[I]=0<C?j.i(I+N)>>>C|j.i(I+N+1)<<32-C:j.i(I+N);return new o(R,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,lf=o}).apply(typeof S3<"u"?S3:typeof self<"u"?self:typeof window<"u"?window:{});var Up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var A6,z0,S6,lg,fy,E6,C6,I6;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,V,Y){return w==Array.prototype||w==Object.prototype||(w[V]=Y.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Up=="object"&&Up];for(var V=0;V<w.length;++V){var Y=w[V];if(Y&&Y.Math==Math)return Y}throw Error("Cannot find global object")}var r=t(this);function i(w,V){if(V)e:{var Y=r;w=w.split(".");for(var le=0;le<w.length-1;le++){var Ie=w[le];if(!(Ie in Y))break e;Y=Y[Ie]}w=w[w.length-1],le=Y[w],V=V(le),V!=le&&V!=null&&e(Y,w,{configurable:!0,writable:!0,value:V})}}function a(w,V){w instanceof String&&(w+="");var Y=0,le=!1,Ie={next:function(){if(!le&&Y<w.length){var Me=Y++;return{value:V(Me,w[Me]),done:!1}}return le=!0,{done:!0,value:void 0}}};return Ie[Symbol.iterator]=function(){return Ie},Ie}i("Array.prototype.values",function(w){return w||function(){return a(this,function(V,Y){return Y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function c(w){var V=typeof w;return V=V!="object"?V:w?Array.isArray(w)?"array":V:"null",V=="array"||V=="object"&&typeof w.length=="number"}function f(w){var V=typeof w;return V=="object"&&w!=null||V=="function"}function d(w,V,Y){return w.call.apply(w.bind,arguments)}function p(w,V,Y){if(!w)throw Error();if(2<arguments.length){var le=Array.prototype.slice.call(arguments,2);return function(){var Ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ie,le),w.apply(V,Ie)}}return function(){return w.apply(V,arguments)}}function g(w,V,Y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function m(w,V){var Y=Array.prototype.slice.call(arguments,1);return function(){var le=Y.slice();return le.push.apply(le,arguments),w.apply(this,le)}}function x(w,V){function Y(){}Y.prototype=V.prototype,w.aa=V.prototype,w.prototype=new Y,w.prototype.constructor=w,w.Qb=function(le,Ie,Me){for(var st=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)st[zt-2]=arguments[zt];return V.prototype[Ie].apply(le,st)}}function _(w){const V=w.length;if(0<V){const Y=Array(V);for(let le=0;le<V;le++)Y[le]=w[le];return Y}return[]}function T(w,V){for(let Y=1;Y<arguments.length;Y++){const le=arguments[Y];if(c(le)){const Ie=w.length||0,Me=le.length||0;w.length=Ie+Me;for(let st=0;st<Me;st++)w[Ie+st]=le[st]}else w.push(le)}}class A{constructor(V,Y){this.i=V,this.j=Y,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function D(w){return/^[\s\xa0]*$/.test(w)}function U(){var w=s.navigator;return w&&(w=w.userAgent)?w:""}function H(w){return H[" "](w),w}H[" "]=function(){};var X=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function q(w,V,Y){for(const le in w)V.call(Y,w[le],le,w)}function j(w,V){for(const Y in w)V.call(void 0,w[Y],Y,w)}function C(w){const V={};for(const Y in w)V[Y]=w[Y];return V}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(w,V){let Y,le;for(let Ie=1;Ie<arguments.length;Ie++){le=arguments[Ie];for(Y in le)w[Y]=le[Y];for(let Me=0;Me<N.length;Me++)Y=N[Me],Object.prototype.hasOwnProperty.call(le,Y)&&(w[Y]=le[Y])}}function R(w){var V=1;w=w.split(":");const Y=[];for(;0<V&&w.length;)Y.push(w.shift()),V--;return w.length&&Y.push(w.join(":")),Y}function I(w){s.setTimeout(()=>{throw w},0)}function P(){var w=ae;let V=null;return w.g&&(V=w.g,w.g=w.g.next,w.g||(w.h=null),V.next=null),V}class M{constructor(){this.h=this.g=null}add(V,Y){const le=K.get();le.set(V,Y),this.h?this.h.next=le:this.g=le,this.h=le}}var K=new A(()=>new F,w=>w.reset());class F{constructor(){this.next=this.g=this.h=null}set(V,Y){this.h=V,this.g=Y,this.next=null}reset(){this.next=this.g=this.h=null}}let z,ee=!1,ae=new M,Q=()=>{const w=s.Promise.resolve(void 0);z=()=>{w.then(he)}};var he=()=>{for(var w;w=P();){try{w.h.call(w.g)}catch(Y){I(Y)}var V=K;V.j(w),100>V.h&&(V.h++,w.next=V.g,V.g=w)}ee=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(w,V){this.type=w,this.g=this.target=V,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var w=!1,V=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const Y=()=>{};s.addEventListener("test",Y,V),s.removeEventListener("test",Y,V)}catch{}return w}();function re(w,V){if($.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var Y=this.type=w.type,le=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=V,V=w.relatedTarget){if(X){e:{try{H(V.nodeName);var Ie=!0;break e}catch{}Ie=!1}Ie||(V=null)}}else Y=="mouseover"?V=w.fromElement:Y=="mouseout"&&(V=w.toElement);this.relatedTarget=V,le?(this.clientX=le.clientX!==void 0?le.clientX:le.pageX,this.clientY=le.clientY!==void 0?le.clientY:le.pageY,this.screenX=le.screenX||0,this.screenY=le.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:de[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&re.aa.h.call(this)}}x(re,$);var de={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),we=0;function Ee(w,V,Y,le,Ie){this.listener=w,this.proxy=null,this.src=V,this.type=Y,this.capture=!!le,this.ha=Ie,this.key=++we,this.da=this.fa=!1}function Ve(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function He(w){this.src=w,this.g={},this.h=0}He.prototype.add=function(w,V,Y,le,Ie){var Me=w.toString();w=this.g[Me],w||(w=this.g[Me]=[],this.h++);var st=ct(w,V,le,Ie);return-1<st?(V=w[st],Y||(V.fa=!1)):(V=new Ee(V,this.src,Me,!!le,Ie),V.fa=Y,w.push(V)),V};function it(w,V){var Y=V.type;if(Y in w.g){var le=w.g[Y],Ie=Array.prototype.indexOf.call(le,V,void 0),Me;(Me=0<=Ie)&&Array.prototype.splice.call(le,Ie,1),Me&&(Ve(V),w.g[Y].length==0&&(delete w.g[Y],w.h--))}}function ct(w,V,Y,le){for(var Ie=0;Ie<w.length;++Ie){var Me=w[Ie];if(!Me.da&&Me.listener==V&&Me.capture==!!Y&&Me.ha==le)return Ie}return-1}var vt="closure_lm_"+(1e6*Math.random()|0),ke={};function ve(w,V,Y,le,Ie){if(Array.isArray(V)){for(var Me=0;Me<V.length;Me++)ve(w,V[Me],Y,le,Ie);return null}return Y=Ct(Y),w&&w[xe]?w.K(V,Y,f(le)?!!le.capture:!1,Ie):dt(w,V,Y,!1,le,Ie)}function dt(w,V,Y,le,Ie,Me){if(!V)throw Error("Invalid event type");var st=f(Ie)?!!Ie.capture:!!Ie,zt=ft(w);if(zt||(w[vt]=zt=new He(w)),Y=zt.add(V,Y,le,st,Me),Y.proxy)return Y;if(le=ot(),Y.proxy=le,le.src=w,le.listener=Y,w.addEventListener)Z||(Ie=st),Ie===void 0&&(Ie=!1),w.addEventListener(V.toString(),le,Ie);else if(w.attachEvent)w.attachEvent(Ge(V.toString()),le);else if(w.addListener&&w.removeListener)w.addListener(le);else throw Error("addEventListener and attachEvent are unavailable.");return Y}function ot(){function w(Y){return V.call(w.src,w.listener,Y)}const V=lt;return w}function Te(w,V,Y,le,Ie){if(Array.isArray(V))for(var Me=0;Me<V.length;Me++)Te(w,V[Me],Y,le,Ie);else le=f(le)?!!le.capture:!!le,Y=Ct(Y),w&&w[xe]?(w=w.i,V=String(V).toString(),V in w.g&&(Me=w.g[V],Y=ct(Me,Y,le,Ie),-1<Y&&(Ve(Me[Y]),Array.prototype.splice.call(Me,Y,1),Me.length==0&&(delete w.g[V],w.h--)))):w&&(w=ft(w))&&(V=w.g[V.toString()],w=-1,V&&(w=ct(V,Y,le,Ie)),(Y=-1<w?V[w]:null)&&Ke(Y))}function Ke(w){if(typeof w!="number"&&w&&!w.da){var V=w.src;if(V&&V[xe])it(V.i,w);else{var Y=w.type,le=w.proxy;V.removeEventListener?V.removeEventListener(Y,le,w.capture):V.detachEvent?V.detachEvent(Ge(Y),le):V.addListener&&V.removeListener&&V.removeListener(le),(Y=ft(V))?(it(Y,w),Y.h==0&&(Y.src=null,V[vt]=null)):Ve(w)}}}function Ge(w){return w in ke?ke[w]:ke[w]="on"+w}function lt(w,V){if(w.da)w=!0;else{V=new re(V,this);var Y=w.listener,le=w.ha||w.src;w.fa&&Ke(w),w=Y.call(le,V)}return w}function ft(w){return w=w[vt],w instanceof He?w:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(w){return typeof w=="function"?w:(w[et]||(w[et]=function(V){return w.handleEvent(V)}),w[et])}function yt(){G.call(this),this.i=new He(this),this.M=this,this.F=null}x(yt,G),yt.prototype[xe]=!0,yt.prototype.removeEventListener=function(w,V,Y,le){Te(this,w,V,Y,le)};function At(w,V){var Y,le=w.F;if(le)for(Y=[];le;le=le.F)Y.push(le);if(w=w.M,le=V.type||V,typeof V=="string")V=new $(V,w);else if(V instanceof $)V.target=V.target||w;else{var Ie=V;V=new $(le,w),L(V,Ie)}if(Ie=!0,Y)for(var Me=Y.length-1;0<=Me;Me--){var st=V.g=Y[Me];Ie=Nt(st,le,!0,V)&&Ie}if(st=V.g=w,Ie=Nt(st,le,!0,V)&&Ie,Ie=Nt(st,le,!1,V)&&Ie,Y)for(Me=0;Me<Y.length;Me++)st=V.g=Y[Me],Ie=Nt(st,le,!1,V)&&Ie}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var w=this.i,V;for(V in w.g){for(var Y=w.g[V],le=0;le<Y.length;le++)Ve(Y[le]);delete w.g[V],w.h--}}this.F=null},yt.prototype.K=function(w,V,Y,le){return this.i.add(String(w),V,!1,Y,le)},yt.prototype.L=function(w,V,Y,le){return this.i.add(String(w),V,!0,Y,le)};function Nt(w,V,Y,le){if(V=w.i.g[String(V)],!V)return!0;V=V.concat();for(var Ie=!0,Me=0;Me<V.length;++Me){var st=V[Me];if(st&&!st.da&&st.capture==Y){var zt=st.listener,gn=st.ha||st.src;st.fa&&it(w.i,st),Ie=zt.call(gn,le)!==!1&&Ie}}return Ie&&!le.defaultPrevented}function xt(w,V,Y){if(typeof w=="function")Y&&(w=g(w,Y));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(V)?-1:s.setTimeout(w,V||0)}function It(w){w.g=xt(()=>{w.g=null,w.i&&(w.i=!1,It(w))},w.l);const V=w.h;w.h=null,w.m.apply(null,V)}class ut extends G{constructor(V,Y){super(),this.m=V,this.l=Y,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bn(w){G.call(this),this.h=w,this.g={}}x(bn,G);var Vt=[];function Jn(w){q(w.g,function(V,Y){this.g.hasOwnProperty(Y)&&Ke(V)},w),w.g={}}bn.prototype.N=function(){bn.aa.N.call(this),Jn(this)},bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=s.JSON.stringify,Cn=s.JSON.parse,mi=class{stringify(w){return s.JSON.stringify(w,void 0)}parse(w){return s.JSON.parse(w,void 0)}};function sn(){}sn.prototype.h=null;function ma(w){return w.h||(w.h=w.i())}function Rn(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fr(){$.call(this,"d")}x(fr,$);function wn(){$.call(this,"c")}x(wn,$);var Dt={},rn=null;function Ei(){return rn=rn||new yt}Dt.La="serverreachability";function Bn(w){$.call(this,Dt.La,w)}x(Bn,$);function yr(w){const V=Ei();At(V,new Bn(V))}Dt.STAT_EVENT="statevent";function Va(w,V){$.call(this,Dt.STAT_EVENT,w),this.stat=V}x(Va,$);function bt(w){const V=Ei();At(V,new Va(V,w))}Dt.Ma="timingevent";function Xn(w,V){$.call(this,Dt.Ma,w),this.size=V}x(Xn,$);function Kn(w,V){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){w()},V)}function xr(){this.g=!0}xr.prototype.xa=function(){this.g=!1};function Cr(w,V,Y,le,Ie,Me){w.info(function(){if(w.g)if(Me)for(var st="",zt=Me.split("&"),gn=0;gn<zt.length;gn++){var Qt=zt[gn].split("=");if(1<Qt.length){var Un=Qt[0];Qt=Qt[1];var er=Un.split("_");st=2<=er.length&&er[1]=="type"?st+(Un+"="+Qt+"&"):st+(Un+"=redacted&")}}else st=null;else st=Me;return"XMLHTTP REQ ("+le+") [attempt "+Ie+"]: "+V+`
`+Y+`
`+st})}function Or(w,V,Y,le,Ie,Me,st){w.info(function(){return"XMLHTTP RESP ("+le+") [ attempt "+Ie+"]: "+V+`
`+Y+`
`+Me+" "+st})}function $r(w,V,Y,le){w.info(function(){return"XMLHTTP TEXT ("+V+"): "+ea(w,Y)+(le?" "+le:"")})}function Ts(w,V){w.info(function(){return"TIMEOUT: "+V})}xr.prototype.info=function(){};function ea(w,V){if(!w.g)return V;if(!V)return null;try{var Y=JSON.parse(V);if(Y){for(w=0;w<Y.length;w++)if(Array.isArray(Y[w])){var le=Y[w];if(!(2>le.length)){var Ie=le[1];if(Array.isArray(Ie)&&!(1>Ie.length)){var Me=Ie[0];if(Me!="noop"&&Me!="stop"&&Me!="close")for(var st=1;st<Ie.length;st++)Ie[st]=""}}}}return Kt(Y)}catch{return V}}var vi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ni={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yr;function ri(){}x(ri,sn),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},Yr=new ri;function dr(w,V,Y,le){this.j=w,this.i=V,this.l=Y,this.R=le||1,this.U=new bn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fn}function Fn(){this.i=null,this.g="",this.h=!1}var Io={},To={};function Fi(w,V,Y){w.L=1,w.v=ts(Ii(V)),w.m=Y,w.P=!0,va(w,null)}function va(w,V){w.F=Date.now(),Ns(w),w.A=Ii(w.v);var Y=w.A,le=w.R;Array.isArray(le)||(le=[String(le)]),Ft(Y.i,"t",le),w.C=0,Y=w.j.J,w.h=new Fn,w.g=ne(w.j,Y?V:null,!w.m),0<w.O&&(w.M=new ut(g(w.Y,w,w.g),w.O)),V=w.U,Y=w.g,le=w.ca;var Ie="readystatechange";Array.isArray(Ie)||(Ie&&(Vt[0]=Ie.toString()),Ie=Vt);for(var Me=0;Me<Ie.length;Me++){var st=ve(Y,Ie[Me],le||V.handleEvent,!1,V.h||V);if(!st)break;V.g[st.key]=st}V=w.H?C(w.H):{},w.m?(w.u||(w.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,V)):(w.u="GET",w.g.ea(w.A,w.u,null,V)),yr(),Cr(w.i,w.u,w.A,w.l,w.R,w.m)}dr.prototype.ca=function(w){w=w.target;const V=this.M;V&&Kr(w)==3?V.j():this.Y(w)},dr.prototype.Y=function(w){try{if(w==this.g)e:{const er=Kr(this.g);var V=this.g.Ba();const so=this.g.Z();if(!(3>er)&&(er!=3||this.g&&(this.h.h||this.g.oa()||mu(this.g)))){this.J||er!=4||V==7||(V==8||0>=so?yr(3):yr(2)),qa(this);var Y=this.g.Z();this.X=Y;t:if(Rs(this)){var le=mu(this.g);w="";var Ie=le.length,Me=Kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),Ha(this);var st="";break t}this.h.i=new s.TextDecoder}for(V=0;V<Ie;V++)this.h.h=!0,w+=this.h.i.decode(le[V],{stream:!(Me&&V==Ie-1)});le.length=0,this.h.g+=w,this.C=0,st=this.h.g}else st=this.g.oa();if(this.o=Y==200,Or(this.i,this.u,this.A,this.l,this.R,er,Y),this.o){if(this.T&&!this.K){t:{if(this.g){var zt,gn=this.g;if((zt=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(zt)){var Qt=zt;break t}}Qt=null}if(Y=Qt)$r(this.i,this.l,Y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ro(this,Y);else{this.o=!1,this.s=3,bt(12),ii(this),Ha(this);break e}}if(this.P){Y=!0;let Fr;for(;!this.J&&this.C<st.length;)if(Fr=fc(this,st),Fr==To){er==4&&(this.s=4,bt(14),Y=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(Fr==Io){this.s=4,bt(15),$r(this.i,this.l,st,"[Invalid Chunk]"),Y=!1;break}else $r(this.i,this.l,Fr,null),Ro(this,Fr);if(Rs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),er!=4||st.length!=0||this.h.h||(this.s=1,bt(16),Y=!1),this.o=this.o&&Y,!Y)$r(this.i,this.l,st,"[Invalid Chunked Response]"),ii(this),Ha(this);else if(0<st.length&&!this.W){this.W=!0;var Un=this.j;Un.g==this&&Un.ba&&!Un.M&&(Un.j.info("Great, no buffering proxy detected. Bytes received: "+st.length),ss(Un),Un.M=!0,bt(11))}}else $r(this.i,this.l,st,null),Ro(this,st);er==4&&ii(this),this.o&&!this.J&&(er==4?ls(this.j,this):(this.o=!1,Ns(this)))}else is(this.g),Y==400&&0<st.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),ii(this),Ha(this)}}}catch{}finally{}};function Rs(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function fc(w,V){var Y=w.C,le=V.indexOf(`
`,Y);return le==-1?To:(Y=Number(V.substring(Y,le)),isNaN(Y)?Io:(le+=1,le+Y>V.length?To:(V=V.slice(le,le+Y),w.C=le+Y,V)))}dr.prototype.cancel=function(){this.J=!0,ii(this)};function Ns(w){w.S=Date.now()+w.I,fu(w,w.I)}function fu(w,V){if(w.B!=null)throw Error("WatchDog timer not null");w.B=Kn(g(w.ba,w),V)}function qa(w){w.B&&(s.clearTimeout(w.B),w.B=null)}dr.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(Ts(this.i,this.A),this.L!=2&&(yr(),bt(17)),ii(this),this.s=2,Ha(this)):fu(this,this.S-w)};function Ha(w){w.j.G==0||w.J||ls(w.j,w)}function ii(w){qa(w);var V=w.M;V&&typeof V.ma=="function"&&V.ma(),w.M=null,Jn(w.U),w.g&&(V=w.g,w.g=null,V.abort(),V.ma())}function Ro(w,V){try{var Y=w.j;if(Y.G!=0&&(Y.g==w||dc(Y.h,w))){if(!w.K&&dc(Y.h,w)&&Y.G==3){try{var le=Y.Da.g.parse(V)}catch{le=null}if(Array.isArray(le)&&le.length==3){var Ie=le;if(Ie[0]==0){e:if(!Y.u){if(Y.g)if(Y.g.F+3e3<w.F)jo(Y),bl(Y);else break e;Ms(Y),bt(18)}}else Y.za=Ie[1],0<Y.za-Y.T&&37500>Ie[2]&&Y.F&&Y.v==0&&!Y.C&&(Y.C=Kn(g(Y.Za,Y),6e3));if(1>=No(Y.h)&&Y.ca){try{Y.ca()}catch{}Y.ca=void 0}}else qi(Y,11)}else if((w.K||Y.g==w)&&jo(Y),!D(V))for(Ie=Y.Da.g.parse(V),V=0;V<Ie.length;V++){let Qt=Ie[V];if(Y.T=Qt[0],Qt=Qt[1],Y.G==2)if(Qt[0]=="c"){Y.K=Qt[1],Y.ia=Qt[2];const Un=Qt[3];Un!=null&&(Y.la=Un,Y.j.info("VER="+Y.la));const er=Qt[4];er!=null&&(Y.Aa=er,Y.j.info("SVER="+Y.Aa));const so=Qt[5];so!=null&&typeof so=="number"&&0<so&&(le=1.5*so,Y.L=le,Y.j.info("backChannelRequestTimeoutMs_="+le)),le=Y;const Fr=w.g;if(Fr){const _a=Fr.g?Fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var Me=le.h;Me.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(Me.j=Me.l,Me.g=new Set,Me.h&&(hr(Me,Me.h),Me.h=null))}if(le.D){const cs=Fr.g?Fr.g.getResponseHeader("X-HTTP-Session-Id"):null;cs&&(le.ya=cs,zn(le.I,le.D,cs))}}Y.G=3,Y.l&&Y.l.ua(),Y.ba&&(Y.R=Date.now()-w.F,Y.j.info("Handshake RTT: "+Y.R+"ms")),le=Y;var st=w;if(le.qa=k(le,le.J?le.ia:null,le.W),st.K){yi(le.h,st);var zt=st,gn=le.L;gn&&(zt.I=gn),zt.B&&(qa(zt),Ns(zt)),le.g=st}else _l(le);0<Y.i.length&&wl(Y)}else Qt[0]!="stop"&&Qt[0]!="close"||qi(Y,7);else Y.G==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?qi(Y,7):Mo(Y):Qt[0]!="noop"&&Y.l&&Y.l.ta(Qt),Y.v=0)}}yr(4)}catch{}}var du=class{constructor(w,V){this.g=w,this.map=V}};function Ja(w){this.l=w||10,s.PerformanceNavigationTiming?(w=s.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ml(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function No(w){return w.h?1:w.g?w.g.size:0}function dc(w,V){return w.h?w.h==V:w.g?w.g.has(V):!1}function hr(w,V){w.g?w.g.add(V):w.h=V}function yi(w,V){w.h&&w.h==V?w.h=null:w.g&&w.g.has(V)&&w.g.delete(V)}Ja.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function vl(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let V=w.i;for(const Y of w.g.values())V=V.concat(Y.D);return V}return _(w.i)}function hu(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var V=[],Y=w.length,le=0;le<Y;le++)V.push(w[le]);return V}V=[],Y=0;for(le in w)V[Y++]=w[le];return V}function Zo(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var V=[];w=w.length;for(var Y=0;Y<w;Y++)V.push(Y);return V}V=[],Y=0;for(const le in w)V[Y++]=le;return V}}}function hc(w,V){if(w.forEach&&typeof w.forEach=="function")w.forEach(V,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,V,void 0);else for(var Y=Zo(w),le=hu(w),Ie=le.length,Me=0;Me<Ie;Me++)V.call(void 0,le[Me],Y&&Y[Me],w)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yl(w,V){if(w){w=w.split("&");for(var Y=0;Y<w.length;Y++){var le=w[Y].indexOf("="),Ie=null;if(0<=le){var Me=w[Y].substring(0,le);Ie=w[Y].substring(le+1)}else Me=w[Y];V(Me,Ie?decodeURIComponent(Ie.replace(/\+/g," ")):"")}}}function In(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof In){this.h=w.h,Jo(this,w.j),this.o=w.o,this.g=w.g,es(this,w.s),this.l=w.l;var V=w.i,Y=new to;Y.i=V.i,V.g&&(Y.g=new Map(V.g),Y.h=V.h),eo(this,Y),this.m=w.m}else w&&(V=String(w).match(Ci))?(this.h=!1,Jo(this,V[1]||"",!0),this.o=ya(V[2]||""),this.g=ya(V[3]||"",!0),es(this,V[4]),this.l=ya(V[5]||"",!0),eo(this,V[6]||"",!0),this.m=ya(V[7]||"")):(this.h=!1,this.i=new to(null,this.h))}In.prototype.toString=function(){var w=[],V=this.j;V&&w.push(Do(V,pc,!0),":");var Y=this.g;return(Y||V=="file")&&(w.push("//"),(V=this.o)&&w.push(Do(V,pc,!0),"@"),w.push(encodeURIComponent(String(Y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Y=this.s,Y!=null&&w.push(":",String(Y))),(Y=this.l)&&(this.g&&Y.charAt(0)!="/"&&w.push("/"),w.push(Do(Y,Y.charAt(0)=="/"?Oo:gc,!0))),(Y=this.i.toString())&&w.push("?",Y),(Y=this.m)&&w.push("#",Do(Y,ko)),w.join("")};function Ii(w){return new In(w)}function Jo(w,V,Y){w.j=Y?ya(V,!0):V,w.j&&(w.j=w.j.replace(/:$/,""))}function es(w,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);w.s=V}else w.s=null}function eo(w,V,Y){V instanceof to?(w.i=V,gu(w.i,w.h)):(Y||(V=Do(V,xl)),w.i=new to(V,w.h))}function zn(w,V,Y){w.i.set(V,Y)}function ts(w){return zn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function ya(w,V){return w?V?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Do(w,V,Y){return typeof w=="string"?(w=encodeURI(w).replace(V,pu),Y&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function pu(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var pc=/[#\/\?@]/g,gc=/[#\?:]/g,Oo=/[#\?]/g,xl=/[#\?@]/g,ko=/#/g;function to(w,V){this.h=this.g=null,this.i=w||null,this.j=!!V}function ir(w){w.g||(w.g=new Map,w.h=0,w.i&&yl(w.i,function(V,Y){w.add(decodeURIComponent(V.replace(/\+/g," ")),Y)}))}n=to.prototype,n.add=function(w,V){ir(this),this.i=null,w=ro(this,w);var Y=this.g.get(w);return Y||this.g.set(w,Y=[]),Y.push(V),this.h+=1,this};function Po(w,V){ir(w),V=ro(w,V),w.g.has(V)&&(w.i=null,w.h-=w.g.get(V).length,w.g.delete(V))}function no(w,V){return ir(w),V=ro(w,V),w.g.has(V)}n.forEach=function(w,V){ir(this),this.g.forEach(function(Y,le){Y.forEach(function(Ie){w.call(V,Ie,le,this)},this)},this)},n.na=function(){ir(this);const w=Array.from(this.g.values()),V=Array.from(this.g.keys()),Y=[];for(let le=0;le<V.length;le++){const Ie=w[le];for(let Me=0;Me<Ie.length;Me++)Y.push(V[le])}return Y},n.V=function(w){ir(this);let V=[];if(typeof w=="string")no(this,w)&&(V=V.concat(this.g.get(ro(this,w))));else{w=Array.from(this.g.values());for(let Y=0;Y<w.length;Y++)V=V.concat(w[Y])}return V},n.set=function(w,V){return ir(this),this.i=null,w=ro(this,w),no(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[V]),this.h+=1,this},n.get=function(w,V){return w?(w=this.V(w),0<w.length?String(w[0]):V):V};function Ft(w,V,Y){Po(w,V),0<Y.length&&(w.i=null,w.g.set(ro(w,V),_(Y)),w.h+=Y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],V=Array.from(this.g.keys());for(var Y=0;Y<V.length;Y++){var le=V[Y];const Me=encodeURIComponent(String(le)),st=this.V(le);for(le=0;le<st.length;le++){var Ie=Me;st[le]!==""&&(Ie+="="+encodeURIComponent(String(st[le]))),w.push(Ie)}}return this.i=w.join("&")};function ro(w,V){return V=String(V),w.j&&(V=V.toLowerCase()),V}function gu(w,V){V&&!w.j&&(ir(w),w.i=null,w.g.forEach(function(Y,le){var Ie=le.toLowerCase();le!=Ie&&(Po(this,le),Ft(this,Ie,Y))},w)),w.j=V}function zi(w,V){const Y=new xr;if(s.Image){const le=new Image;le.onload=m(ta,Y,"TestLoadImage: loaded",!0,V,le),le.onerror=m(ta,Y,"TestLoadImage: error",!1,V,le),le.onabort=m(ta,Y,"TestLoadImage: abort",!1,V,le),le.ontimeout=m(ta,Y,"TestLoadImage: timeout",!1,V,le),s.setTimeout(function(){le.ontimeout&&le.ontimeout()},1e4),le.src=w}else V(!1)}function xa(w,V){const Y=new xr,le=new AbortController,Ie=setTimeout(()=>{le.abort(),ta(Y,"TestPingServer: timeout",!1,V)},1e4);fetch(w,{signal:le.signal}).then(Me=>{clearTimeout(Ie),Me.ok?ta(Y,"TestPingServer: ok",!0,V):ta(Y,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(Ie),ta(Y,"TestPingServer: error",!1,V)})}function ta(w,V,Y,le,Ie){try{Ie&&(Ie.onload=null,Ie.onerror=null,Ie.onabort=null,Ie.ontimeout=null),le(Y)}catch{}}function io(){this.g=new mi}function ba(w,V,Y){const le=Y||"";try{hc(w,function(Ie,Me){let st=Ie;f(Ie)&&(st=Kt(Ie)),V.push(le+Me+"="+encodeURIComponent(st))})}catch(Ie){throw V.push(le+"type="+encodeURIComponent("_badmap")),Ie}}function ns(w){this.l=w.Ub||null,this.j=w.eb||!1}x(ns,sn),ns.prototype.g=function(){return new Lo(this.l,this.j)},ns.prototype.i=function(w){return function(){return w}}({});function Lo(w,V){yt.call(this),this.D=w,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Lo,yt),n=Lo.prototype,n.open=function(w,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=V,this.readyState=1,Ui(this)},n.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(V.body=w),(this.D||s).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},n.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mc(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function mc(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}n.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var V=w.value?w.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!w.done}))&&(this.response=this.responseText+=V)}w.done?wa(this):Ui(this),this.readyState==3&&mc(this)}},n.Ra=function(w){this.g&&(this.response=this.responseText=w,wa(this))},n.Qa=function(w){this.g&&(this.response=w,wa(this))},n.ga=function(){this.g&&wa(this)};function wa(w){w.readyState=4,w.l=null,w.j=null,w.v=null,Ui(w)}n.setRequestHeader=function(w,V){this.u.append(w,V)},n.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],V=this.h.entries();for(var Y=V.next();!Y.done;)Y=Y.value,w.push(Y[0]+": "+Y[1]),Y=V.next();return w.join(`\r
`)};function Ui(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function ao(w){let V="";return q(w,function(Y,le){V+=le,V+=":",V+=Y,V+=`\r
`}),V}function Xr(w,V,Y){e:{for(le in Y){var le=!1;break e}le=!0}le||(Y=ao(Y),typeof w=="string"?Y!=null&&encodeURIComponent(String(Y)):zn(w,V,Y))}function pn(w){yt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(pn,yt);var rs=/^https?$/i,oo=["POST","PUT"];n=pn.prototype,n.Ha=function(w){this.J=w},n.ea=function(w,V,Y,le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);V=V?V.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yr.g(),this.v=this.o?ma(this.o):ma(Yr),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(V,String(w),!0),this.B=!1}catch(Me){vc(this,Me);return}if(w=Y||"",Y=new Map(this.headers),le)if(Object.getPrototypeOf(le)===Object.prototype)for(var Ie in le)Y.set(Ie,le[Ie]);else if(typeof le.keys=="function"&&typeof le.get=="function")for(const Me of le.keys())Y.set(Me,le.get(Me));else throw Error("Unknown input type for opt_headers: "+String(le));le=Array.from(Y.keys()).find(Me=>Me.toLowerCase()=="content-type"),Ie=s.FormData&&w instanceof s.FormData,!(0<=Array.prototype.indexOf.call(oo,V,void 0))||le||Ie||Y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Me,st]of Y)this.g.setRequestHeader(Me,st);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vi(this),this.u=!0,this.g.send(w),this.u=!1}catch(Me){vc(this,Me)}};function vc(w,V){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=V,w.m=5,Ds(w),Wa(w)}function Ds(w){w.A||(w.A=!0,At(w,"complete"),At(w,"error"))}n.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,At(this,"complete"),At(this,"abort"),Wa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wa(this,!0)),pn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Os(this):this.bb())},n.bb=function(){Os(this)};function Os(w){if(w.h&&typeof o<"u"&&(!w.v[1]||Kr(w)!=4||w.Z()!=2)){if(w.u&&Kr(w)==4)xt(w.Ea,0,w);else if(At(w,"readystatechange"),Kr(w)==4){w.h=!1;try{const st=w.Z();e:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var Y;if(!(Y=V)){var le;if(le=st===0){var Ie=String(w.D).match(Ci)[1]||null;!Ie&&s.self&&s.self.location&&(Ie=s.self.location.protocol.slice(0,-1)),le=!rs.test(Ie?Ie.toLowerCase():"")}Y=le}if(Y)At(w,"complete"),At(w,"success");else{w.m=6;try{var Me=2<Kr(w)?w.g.statusText:""}catch{Me=""}w.l=Me+" ["+w.Z()+"]",Ds(w)}}finally{Wa(w)}}}}function Wa(w,V){if(w.g){Vi(w);const Y=w.g,le=w.v[0]?()=>{}:null;w.g=null,w.v=null,V||At(w,"ready");try{Y.onreadystatechange=le}catch{}}}function Vi(w){w.I&&(s.clearTimeout(w.I),w.I=null)}n.isActive=function(){return!!this.g};function Kr(w){return w.g?w.g.readyState:0}n.Z=function(){try{return 2<Kr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(w){if(this.g){var V=this.g.responseText;return w&&V.indexOf(w)==0&&(V=V.substring(w.length)),Cn(V)}};function mu(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function is(w){const V={};w=(w.g&&2<=Kr(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let le=0;le<w.length;le++){if(D(w[le]))continue;var Y=R(w[le]);const Ie=Y[0];if(Y=Y[1],typeof Y!="string")continue;Y=Y.trim();const Me=V[Ie]||[];V[Ie]=Me,Me.push(Y)}j(V,function(le){return le.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(w,V,Y){return Y&&Y.internalChannelParams&&Y.internalChannelParams[w]||V}function as(w){this.Aa=0,this.i=[],this.j=new xr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ti("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ti("baseRetryDelayMs",5e3,w),this.cb=Ti("retryDelaySeedMs",1e4,w),this.Wa=Ti("forwardChannelMaxRetries",2,w),this.wa=Ti("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Ja(w&&w.concurrentRequestLimit),this.Da=new io,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=as.prototype,n.la=8,n.G=1,n.connect=function(w,V,Y,le){bt(0),this.W=w,this.H=V||{},Y&&le!==void 0&&(this.H.OSID=Y,this.H.OAID=le),this.F=this.X,this.I=k(this,null,this.W),wl(this)};function Mo(w){if(ks(w),w.G==3){var V=w.U++,Y=Ii(w.I);if(zn(Y,"SID",w.K),zn(Y,"RID",V),zn(Y,"TYPE","terminate"),os(w,Y),V=new dr(w,w.j,V),V.L=2,V.v=ts(Ii(Y)),Y=!1,s.navigator&&s.navigator.sendBeacon)try{Y=s.navigator.sendBeacon(V.v.toString(),"")}catch{}!Y&&s.Image&&(new Image().src=V.v,Y=!0),Y||(V.g=ne(V.j,null),V.g.ea(V.v)),V.F=Date.now(),Ns(V)}Al(w)}function bl(w){w.g&&(ss(w),w.g.cancel(),w.g=null)}function ks(w){bl(w),w.u&&(s.clearTimeout(w.u),w.u=null),jo(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&s.clearTimeout(w.s),w.s=null)}function wl(w){if(!ml(w.h)&&!w.s){w.s=!0;var V=w.Ga;z||Q(),ee||(z(),ee=!0),ae.add(V,w),w.B=0}}function yc(w,V){return No(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=V.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=Kn(g(w.Ga,w,V),js(w,w.B)),w.B++,!0)}n.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const Ie=new dr(this,this.j,w);let Me=this.o;if(this.S&&(Me?(Me=C(Me),L(Me,this.S)):Me=this.S),this.m!==null||this.O||(Ie.H=Me,Me=null),this.P)e:{for(var V=0,Y=0;Y<this.i.length;Y++){t:{var le=this.i[Y];if("__data__"in le.map&&(le=le.map.__data__,typeof le=="string")){le=le.length;break t}le=void 0}if(le===void 0)break;if(V+=le,4096<V){V=Y;break e}if(V===4096||Y===this.i.length-1){V=Y+1;break e}}V=1e3}else V=1e3;V=Ls(this,Ie,V),Y=Ii(this.I),zn(Y,"RID",w),zn(Y,"CVER",22),this.D&&zn(Y,"X-HTTP-Session-Id",this.D),os(this,Y),Me&&(this.O?V="headers="+encodeURIComponent(String(ao(Me)))+"&"+V:this.m&&Xr(Y,this.m,Me)),hr(this.h,Ie),this.Ua&&zn(Y,"TYPE","init"),this.P?(zn(Y,"$req",V),zn(Y,"SID","null"),Ie.T=!0,Fi(Ie,Y,null)):Fi(Ie,Y,V),this.G=2}}else this.G==3&&(w?Ps(this,w):this.i.length==0||ml(this.h)||Ps(this))};function Ps(w,V){var Y;V?Y=V.l:Y=w.U++;const le=Ii(w.I);zn(le,"SID",w.K),zn(le,"RID",Y),zn(le,"AID",w.T),os(w,le),w.m&&w.o&&Xr(le,w.m,w.o),Y=new dr(w,w.j,Y,w.B+1),w.m===null&&(Y.H=w.o),V&&(w.i=V.D.concat(w.i)),V=Ls(w,Y,1e3),Y.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),hr(w.h,Y),Fi(Y,le,V)}function os(w,V){w.H&&q(w.H,function(Y,le){zn(V,le,Y)}),w.l&&hc({},function(Y,le){zn(V,le,Y)})}function Ls(w,V,Y){Y=Math.min(w.i.length,Y);var le=w.l?g(w.l.Na,w.l,w):null;e:{var Ie=w.i;let Me=-1;for(;;){const st=["count="+Y];Me==-1?0<Y?(Me=Ie[0].g,st.push("ofs="+Me)):Me=0:st.push("ofs="+Me);let zt=!0;for(let gn=0;gn<Y;gn++){let Qt=Ie[gn].g;const Un=Ie[gn].map;if(Qt-=Me,0>Qt)Me=Math.max(0,Ie[gn].g-100),zt=!1;else try{ba(Un,st,"req"+Qt+"_")}catch{le&&le(Un)}}if(zt){le=st.join("&");break e}}}return w=w.i.splice(0,Y),V.D=w,le}function _l(w){if(!w.g&&!w.u){w.Y=1;var V=w.Fa;z||Q(),ee||(z(),ee=!0),ae.add(V,w),w.v=0}}function Ms(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=Kn(g(w.Fa,w),js(w,w.v)),w.v++,!0)}n.Fa=function(){if(this.u=null,vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=Kn(g(this.ab,this),w)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),bl(this),vu(this))};function ss(w){w.A!=null&&(s.clearTimeout(w.A),w.A=null)}function vu(w){w.g=new dr(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var V=Ii(w.qa);zn(V,"RID","rpc"),zn(V,"SID",w.K),zn(V,"AID",w.T),zn(V,"CI",w.F?"0":"1"),!w.F&&w.ja&&zn(V,"TO",w.ja),zn(V,"TYPE","xmlhttp"),os(w,V),w.m&&w.o&&Xr(V,w.m,w.o),w.L&&(w.g.I=w.L);var Y=w.g;w=w.ia,Y.L=1,Y.v=ts(Ii(V)),Y.m=null,Y.P=!0,va(Y,w)}n.Za=function(){this.C!=null&&(this.C=null,bl(this),Ms(this),bt(19))};function jo(w){w.C!=null&&(s.clearTimeout(w.C),w.C=null)}function ls(w,V){var Y=null;if(w.g==V){jo(w),ss(w),w.g=null;var le=2}else if(dc(w.h,V))Y=V.D,yi(w.h,V),le=1;else return;if(w.G!=0){if(V.o)if(le==1){Y=V.m?V.m.length:0,V=Date.now()-V.F;var Ie=w.B;le=Ei(),At(le,new Xn(le,Y)),wl(w)}else _l(w);else if(Ie=V.s,Ie==3||Ie==0&&0<V.X||!(le==1&&yc(w,V)||le==2&&Ms(w)))switch(Y&&0<Y.length&&(V=w.h,V.i=V.i.concat(Y)),Ie){case 1:qi(w,5);break;case 4:qi(w,10);break;case 3:qi(w,6);break;default:qi(w,2)}}}function js(w,V){let Y=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(Y*=2),Y*V}function qi(w,V){if(w.j.info("Error code "+V),V==2){var Y=g(w.fb,w),le=w.Xa;const Ie=!le;le=new In(le||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Jo(le,"https"),ts(le),Ie?zi(le.toString(),Y):xa(le.toString(),Y)}else bt(2);w.G=0,w.l&&w.l.sa(V),Al(w),ks(w)}n.fb=function(w){w?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Al(w){if(w.G=0,w.ka=[],w.l){const V=vl(w.h);(V.length!=0||w.i.length!=0)&&(T(w.ka,V),T(w.ka,w.i),w.h.i.length=0,_(w.i),w.i.length=0),w.l.ra()}}function k(w,V,Y){var le=Y instanceof In?Ii(Y):new In(Y);if(le.g!="")V&&(le.g=V+"."+le.g),es(le,le.s);else{var Ie=s.location;le=Ie.protocol,V=V?V+"."+Ie.hostname:Ie.hostname,Ie=+Ie.port;var Me=new In(null);le&&Jo(Me,le),V&&(Me.g=V),Ie&&es(Me,Ie),Y&&(Me.l=Y),le=Me}return Y=w.D,V=w.ya,Y&&V&&zn(le,Y,V),zn(le,"VER",w.la),os(w,le),le}function ne(w,V,Y){if(V&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return V=w.Ca&&!w.pa?new pn(new ns({eb:Y})):new pn(w.pa),V.Ha(w.J),V}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function me(){}n=me.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function be(){}be.prototype.g=function(w,V){return new Re(w,V)};function Re(w,V){yt.call(this),this.g=new as(V),this.l=w,this.h=V&&V.messageUrlParams||null,w=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(w?w["X-WebChannel-Content-Type"]=V.messageContentType:w={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(w?w["X-WebChannel-Client-Profile"]=V.va:w={"X-WebChannel-Client-Profile":V.va}),this.g.S=w,(w=V&&V.Sb)&&!D(w)&&(this.g.m=w),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!D(V)&&(this.g.D=V,w=this.h,w!==null&&V in w&&(w=this.h,V in w&&delete w[V])),this.j=new pt(this)}x(Re,yt),Re.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Re.prototype.close=function(){Mo(this.g)},Re.prototype.o=function(w){var V=this.g;if(typeof w=="string"){var Y={};Y.__data__=w,w=Y}else this.u&&(Y={},Y.__data__=Kt(w),w=Y);V.i.push(new du(V.Ya++,w)),V.G==3&&wl(V)},Re.prototype.N=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,Re.aa.N.call(this)};function qe(w){fr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var V=w.__sm__;if(V){e:{for(const Y in V){w=Y;break e}w=void 0}(this.i=w)&&(w=this.i,V=V!==null&&w in V?V[w]:void 0),this.data=V}else this.data=w}x(qe,fr);function at(){wn.call(this),this.status=1}x(at,wn);function pt(w){this.g=w}x(pt,me),pt.prototype.ua=function(){At(this.g,"a")},pt.prototype.ta=function(w){At(this.g,new qe(w))},pt.prototype.sa=function(w){At(this.g,new at)},pt.prototype.ra=function(){At(this.g,"b")},be.prototype.createWebChannel=be.prototype.g,Re.prototype.send=Re.prototype.o,Re.prototype.open=Re.prototype.m,Re.prototype.close=Re.prototype.close,I6=function(){return new be},C6=function(){return Ei()},E6=Dt,fy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vi.NO_ERROR=0,vi.TIMEOUT=8,vi.HTTP_ERROR=6,lg=vi,ni.COMPLETE="complete",S6=ni,Rn.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",yt.prototype.listen=yt.prototype.K,z0=Rn,pn.prototype.listenOnce=pn.prototype.L,pn.prototype.getLastError=pn.prototype.Ka,pn.prototype.getLastErrorCode=pn.prototype.Ba,pn.prototype.getStatus=pn.prototype.Z,pn.prototype.getResponseJson=pn.prototype.Oa,pn.prototype.getResponseText=pn.prototype.oa,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Ha,A6=pn}).apply(typeof Up<"u"?Up:typeof self<"u"?self:typeof window<"u"?window:{});const E3="@firebase/firestore",C3="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ma.UNAUTHENTICATED=new Ma(null),Ma.GOOGLE_CREDENTIALS=new Ma("google-credentials-uid"),Ma.FIRST_PARTY=new Ma("first-party-uid"),Ma.MOCK_USER=new Ma("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=new fm("@firebase/firestore");function rh(){return dd.logLevel}function St(n,...e){if(dd.logLevel<=Sn.DEBUG){const t=e.map(Ix);dd.debug(`Firestore (${Mh}): ${n}`,...t)}}function Jc(n,...e){if(dd.logLevel<=Sn.ERROR){const t=e.map(Ix);dd.error(`Firestore (${Mh}): ${n}`,...t)}}function Ah(n,...e){if(dd.logLevel<=Sn.WARN){const t=e.map(Ix);dd.warn(`Firestore (${Mh}): ${n}`,...t)}}function Ix(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,T6(n,r,t)}function T6(n,e,t){let r=`FIRESTORE (${Mh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Jc(r),new Error(r)}function rr(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||T6(e,i,r)}function nn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ma.UNAUTHENTICATED))}shutdown(){}}class WN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GN{constructor(e){this.t=e,this.currentUser=Ma.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rr(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new Xc;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Xc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},s=c=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>s(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?s(c):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rr(typeof r.accessToken=="string",31837,{l:r}),new R6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rr(e===null||typeof e=="string",2055,{h:e}),new Ma(e)}}class $N{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ma.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $N(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ma.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rr(this.o===void 0,3512);const r=a=>{a.error!=null&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,St("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new I3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rr(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new I3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=KN(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function dn(n,e){return n<e?-1:n>e?1:0}function dy(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return dn(r,i);{const a=N6(),o=QN(a.encode(T3(n,t)),a.encode(T3(e,t)));return o!==0?o:dn(r,i)}}t+=r>65535?2:1}return dn(n.length,e.length)}function T3(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function QN(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return dn(n[t],e[t]);return dn(n.length,e.length)}function Sh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=-62135596800,N3=1e6;class gi{static now(){return gi.fromMillis(Date.now())}static fromDate(e){return gi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*N3);return new gi(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<R3)throw new Et(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N3}_compareTo(e){return this.seconds===e.seconds?dn(this.nanoseconds,e.nanoseconds):dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-R3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{static fromTimestamp(e){return new Jt(e)}static min(){return new Jt(new gi(0,0))}static max(){return new Jt(new gi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="__name__";class Yl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Yt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Yt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Yl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Yl.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return dn(e.length,t.length)}static compareSegments(e,t){const r=Yl.isNumericId(e),i=Yl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Yl.extractNumericId(e).compare(Yl.extractNumericId(t)):dy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lf.fromString(e.substring(4,e.length-2))}}class Nr extends Yl{construct(e,t,r){return new Nr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Et(nt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Nr(t)}static emptyPath(){return new Nr([])}}const ZN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ha extends Yl{construct(e,t,r){return new ha(e,t,r)}static isValidIdentifier(e){return ZN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ha.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===D3}static keyField(){return new ha([D3])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Et(nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new Et(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Et(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Et(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ha(t)}static emptyPath(){return new ha([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(Nr.fromString(e))}static fromName(e){return new Mt(Nr.fromString(e).popFirst(5))}static empty(){return new Mt(Nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new Nr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=-1;function JN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Jt.fromTimestamp(r===1e9?new gi(t+1,0):new gi(t,r));return new pf(i,Mt.empty(),e)}function eD(n){return new pf(n.readTime,n.key,s1)}class pf{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new pf(Jt.min(),Mt.empty(),s1)}static max(){return new pf(Jt.max(),Mt.empty(),s1)}}function tD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Mt.comparator(n.documentKey,e.documentKey),t!==0?t:dn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(n){if(n.code!==nt.FAILED_PRECONDITION||n.message!==nD)throw n;St("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rt((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof rt?t:rt.resolve(t)}catch(t){return rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.reject(t)}static resolve(e){return new rt((t,r)=>{t(e)})}static reject(e){return new rt((t,r)=>{r(e)})}static waitFor(e){return new rt((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},c=>r(c))}),o=!0,a===i&&t()})}static or(e){let t=rt.resolve(!1);for(const r of e)t=t.next(i=>i?rt.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new rt((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let c=0;c<a;c++){const f=c;t(e[f]).next(d=>{o[f]=d,++s,s===a&&r(o)},d=>i(d))}})}static doWhile(e,t){return new rt((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function iD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}mm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=-1;function vm(n){return n==null}function Og(n){return n===0&&1/n==-1/0}function aD(n){return typeof n=="number"&&Number.isInteger(n)&&!Og(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="";function oD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=O3(e)),e=sD(n.get(t),e);return O3(e)}function sD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case O6:t+="";break;default:t+=a}}return t}function O3(n){return n+O6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ef(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function k6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t){this.comparator=e,this.root=t||fa.EMPTY}insert(e,t){return new Gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fa.BLACK,null,null))}remove(e){return new Gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vp(this.root,e,this.comparator,!0)}}class Vp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fa{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??fa.RED,this.left=i??fa.EMPTY,this.right=a??fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new fa(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return fa.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Yt(27949);return e+(this.isRed()?0:1)}}fa.EMPTY=null,fa.RED=!0,fa.BLACK=!1;fa.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt(57766)}get value(){throw Yt(16141)}get color(){throw Yt(16727)}get left(){throw Yt(29726)}get right(){throw Yt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new fa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.comparator=e,this.data=new Gr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P3(this.data.getIterator())}getIteratorFrom(e){return new P3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ji(this.comparator);return t.data=e,t}}class P3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.fields=e,e.sort(ha.comparator)}static empty(){return new Xo([])}unionWith(e){let t=new ji(ha.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new P6("Invalid base64 string: "+a):a}}(e);return new ga(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new ga(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ga.EMPTY_BYTE_STRING=new ga("");const lD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gf(n){if(rr(!!n,39018),typeof n=="string"){let e=0;const t=lD.exec(n);if(rr(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fi(n.seconds),nanos:fi(n.nanos)}}function fi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mf(n){return typeof n=="string"?ga.fromBase64String(n):ga.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6="server_timestamp",M6="__type__",j6="__previous_value__",B6="__local_write_time__";function Rx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[M6])===null||t===void 0?void 0:t.stringValue)===L6}function ym(n){const e=n.mapValue.fields[j6];return Rx(e)?ym(e):e}function l1(n){const e=gf(n.mapValue.fields[B6].timestampValue);return new gi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,t,r,i,a,o,s,c,f,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const kg="(default)";class c1{constructor(e,t){this.projectId=e,this.database=t||kg}static empty(){return new c1("","")}get isDefaultDatabase(){return this.database===kg}isEqual(e){return e instanceof c1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="__type__",uD="__max__",qp={mapValue:{}},z6="__vector__",Pg="value";function vf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Rx(n)?4:dD(n)?9007199254740991:fD(n)?10:11:Yt(28295,{value:n})}function ic(n,e){if(n===e)return!0;const t=vf(n);if(t!==vf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return l1(n).isEqual(l1(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=gf(i.timestampValue),s=gf(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return mf(i.bytesValue).isEqual(mf(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return fi(i.geoPointValue.latitude)===fi(a.geoPointValue.latitude)&&fi(i.geoPointValue.longitude)===fi(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return fi(i.integerValue)===fi(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=fi(i.doubleValue),s=fi(a.doubleValue);return o===s?Og(o)===Og(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return Sh(n.arrayValue.values||[],e.arrayValue.values||[],ic);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(k3(o)!==k3(s))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(s[c]===void 0||!ic(o[c],s[c])))return!1;return!0}(n,e);default:return Yt(52216,{left:n})}}function u1(n,e){return(n.values||[]).find(t=>ic(t,e))!==void 0}function Eh(n,e){if(n===e)return 0;const t=vf(n),r=vf(e);if(t!==r)return dn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return dn(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=fi(a.integerValue||a.doubleValue),c=fi(o.integerValue||o.doubleValue);return s<c?-1:s>c?1:s===c?0:isNaN(s)?isNaN(c)?0:-1:1}(n,e);case 3:return L3(n.timestampValue,e.timestampValue);case 4:return L3(l1(n),l1(e));case 5:return dy(n.stringValue,e.stringValue);case 6:return function(a,o){const s=mf(a),c=mf(o);return s.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),c=o.split("/");for(let f=0;f<s.length&&f<c.length;f++){const d=dn(s[f],c[f]);if(d!==0)return d}return dn(s.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=dn(fi(a.latitude),fi(o.latitude));return s!==0?s:dn(fi(a.longitude),fi(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return M3(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,c,f,d;const p=a.fields||{},g=o.fields||{},m=(s=p[Pg])===null||s===void 0?void 0:s.arrayValue,x=(c=g[Pg])===null||c===void 0?void 0:c.arrayValue,_=dn(((f=m==null?void 0:m.values)===null||f===void 0?void 0:f.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:M3(m,x)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===qp.mapValue&&o===qp.mapValue)return 0;if(a===qp.mapValue)return 1;if(o===qp.mapValue)return-1;const s=a.fields||{},c=Object.keys(s),f=o.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=dy(c[p],d[p]);if(g!==0)return g;const m=Eh(s[c[p]],f[d[p]]);if(m!==0)return m}return dn(c.length,d.length)}(n.mapValue,e.mapValue);default:throw Yt(23264,{Pe:t})}}function L3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return dn(n,e);const t=gf(n),r=gf(e),i=dn(t.seconds,r.seconds);return i!==0?i:dn(t.nanos,r.nanos)}function M3(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Eh(t[i],r[i]);if(a)return a}return dn(t.length,r.length)}function Ch(n){return hy(n)}function hy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=gf(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return mf(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Mt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=hy(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${hy(t.fields[o])}`;return i+"}"}(n.mapValue):Yt(61005,{value:n})}function cg(n){switch(vf(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ym(n);return e?16+cg(e):16;case 5:return 2*n.stringValue.length;case 6:return mf(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+cg(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ef(r.fields,(a,o)=>{i+=a.length+cg(o)}),i}(n.mapValue);default:throw Yt(13486,{value:n})}}function j3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function py(n){return!!n&&"integerValue"in n}function Nx(n){return!!n&&"arrayValue"in n}function B3(n){return!!n&&"nullValue"in n}function F3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ug(n){return!!n&&"mapValue"in n}function fD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[F6])===null||t===void 0?void 0:t.stringValue)===z6}function K0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ef(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=K0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=K0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.value=e}static empty(){return new xo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ug(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=K0(t)}setAll(e){let t=ha.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=K0(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ug(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ic(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ug(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ef(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new xo(K0(this.value))}}function U6(n){const e=[];return Ef(n.fields,(t,r)=>{const i=new ha([t]);if(ug(r)){const a=U6(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Xo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new ja(e,0,Jt.min(),Jt.min(),Jt.min(),xo.empty(),0)}static newFoundDocument(e,t,r,i){return new ja(e,1,t,Jt.min(),r,i,0)}static newNoDocument(e,t){return new ja(e,2,t,Jt.min(),Jt.min(),xo.empty(),0)}static newUnknownDocument(e,t){return new ja(e,3,t,Jt.min(),Jt.min(),xo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ja&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ja(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t){this.position=e,this.inclusive=t}}function z3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Mt.comparator(Mt.fromName(o.referenceValue),t.key):r=Eh(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function U3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ic(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t="asc"){this.field=e,this.dir=t}}function hD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{}class Si extends V6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gD(e,t,r):t==="array-contains"?new yD(e,r):t==="in"?new xD(e,r):t==="not-in"?new bD(e,r):t==="array-contains-any"?new wD(e,r):new Si(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new mD(e,r):new vD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Eh(t,this.value)):t!==null&&vf(this.value)===vf(t)&&this.matchesComparison(Eh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hl extends V6{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new hl(e,t)}matches(e){return q6(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function q6(n){return n.op==="and"}function H6(n){return pD(n)&&q6(n)}function pD(n){for(const e of n.filters)if(e instanceof hl)return!1;return!0}function gy(n){if(n instanceof Si)return n.field.canonicalString()+n.op.toString()+Ch(n.value);if(H6(n))return n.filters.map(e=>gy(e)).join(",");{const e=n.filters.map(t=>gy(t)).join(",");return`${n.op}(${e})`}}function W6(n,e){return n instanceof Si?function(r,i){return i instanceof Si&&r.op===i.op&&r.field.isEqual(i.field)&&ic(r.value,i.value)}(n,e):n instanceof hl?function(r,i){return i instanceof hl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&W6(o,i.filters[s]),!0):!1}(n,e):void Yt(19439)}function G6(n){return n instanceof Si?function(t){return`${t.field.canonicalString()} ${t.op} ${Ch(t.value)}`}(n):n instanceof hl?function(t){return t.op.toString()+" {"+t.getFilters().map(G6).join(" ,")+"}"}(n):"Filter"}class gD extends Si{constructor(e,t,r){super(e,t,r),this.key=Mt.fromName(r.referenceValue)}matches(e){const t=Mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class mD extends Si{constructor(e,t){super(e,"in",t),this.keys=$6("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vD extends Si{constructor(e,t){super(e,"not-in",t),this.keys=$6("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $6(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Mt.fromName(r.referenceValue))}class yD extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nx(t)&&u1(t.arrayValue,this.value)}}class xD extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&u1(this.value.arrayValue,t)}}class bD extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(u1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!u1(this.value.arrayValue,t)}}class wD extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nx(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>u1(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Ie=null}}function V3(n,e=null,t=[],r=[],i=null,a=null,o=null){return new _D(n,e,t,r,i,a,o)}function Dx(n){const e=nn(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),vm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ch(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ch(r)).join(",")),e.Ie=t}return e.Ie}function Ox(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!U3(n.startAt,e.startAt)&&U3(n.endAt,e.endAt)}function my(n){return Mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function AD(n,e,t,r,i,a,o,s){return new Fh(n,e,t,r,i,a,o,s)}function xm(n){return new Fh(n)}function q3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Y6(n){return n.collectionGroup!==null}function Q0(n){const e=nn(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new ji(ha.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(s=s.add(f.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new f1(a,r))}),t.has(ha.keyField().canonicalString())||e.Ee.push(new f1(ha.keyField(),r))}return e.Ee}function ec(n){const e=nn(n);return e.de||(e.de=SD(e,Q0(n))),e.de}function SD(n,e){if(n.limitType==="F")return V3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new f1(i.field,a)});const t=n.endAt?new Lg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Lg(n.startAt.position,n.startAt.inclusive):null;return V3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vy(n,e){const t=n.filters.concat([e]);return new Fh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yy(n,e,t){return new Fh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bm(n,e){return Ox(ec(n),ec(e))&&n.limitType===e.limitType}function X6(n){return`${Dx(ec(n))}|lt:${n.limitType}`}function ih(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>G6(i)).join(", ")}]`),vm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ch(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ch(i)).join(",")),`Target(${r})`}(ec(n))}; limitType=${n.limitType})`}function wm(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Mt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of Q0(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,c){const f=z3(o,s,c);return o.inclusive?f<=0:f<0}(r.startAt,Q0(r),i)||r.endAt&&!function(o,s,c){const f=z3(o,s,c);return o.inclusive?f>=0:f>0}(r.endAt,Q0(r),i))}(n,e)}function ED(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function K6(n){return(e,t)=>{let r=!1;for(const i of Q0(n)){const a=CD(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function CD(n,e,t){const r=n.field.isKeyField()?Mt.comparator(e.key,t.key):function(a,o,s){const c=o.data.field(a),f=s.data.field(a);return c!==null&&f!==null?Eh(c,f):Yt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Yt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ef(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return k6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new Gr(Mt.comparator);function eu(){return ID}const Q6=new Gr(Mt.comparator);function U0(...n){let e=Q6;for(const t of n)e=e.insert(t.key,t);return e}function Z6(n){let e=Q6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nd(){return Z0()}function J6(){return Z0()}function Z0(){return new bd(n=>n.toString(),(n,e)=>n.isEqual(e))}const TD=new Gr(Mt.comparator),RD=new ji(Mt.comparator);function En(...n){let e=RD;for(const t of n)e=e.add(t);return e}const ND=new ji(dn);function DD(){return ND}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Og(e)?"-0":e}}function e8(n){return{integerValue:""+n}}function OD(n,e){return aD(e)?e8(e):kx(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this._=void 0}}function kD(n,e,t){return n instanceof d1?function(i,a){const o={fields:{[M6]:{stringValue:L6},[B6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Rx(a)&&(a=ym(a)),a&&(o.fields[j6]=a),{mapValue:o}}(t,e):n instanceof h1?n8(n,e):n instanceof p1?r8(n,e):function(i,a){const o=t8(i,a),s=H3(o)+H3(i.Re);return py(o)&&py(i.Re)?e8(s):kx(i.serializer,s)}(n,e)}function PD(n,e,t){return n instanceof h1?n8(n,e):n instanceof p1?r8(n,e):t}function t8(n,e){return n instanceof Mg?function(r){return py(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class d1 extends _m{}class h1 extends _m{constructor(e){super(),this.elements=e}}function n8(n,e){const t=i8(e);for(const r of n.elements)t.some(i=>ic(i,r))||t.push(r);return{arrayValue:{values:t}}}class p1 extends _m{constructor(e){super(),this.elements=e}}function r8(n,e){let t=i8(e);for(const r of n.elements)t=t.filter(i=>!ic(i,r));return{arrayValue:{values:t}}}class Mg extends _m{constructor(e,t){super(),this.serializer=e,this.Re=t}}function H3(n){return fi(n.integerValue||n.doubleValue)}function i8(n){return Nx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t){this.field=e,this.transform=t}}function MD(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof h1&&i instanceof h1||r instanceof p1&&i instanceof p1?Sh(r.elements,i.elements,ic):r instanceof Mg&&i instanceof Mg?ic(r.Re,i.Re):r instanceof d1&&i instanceof d1}(n.transform,e.transform)}class jD{constructor(e,t){this.version=e,this.transformResults=t}}class As{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new As}static exists(e){return new As(void 0,e)}static updateTime(e){return new As(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Am{}function a8(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Px(n.key,As.none()):new R1(n.key,n.data,As.none());{const t=n.data,r=xo.empty();let i=new ji(ha.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Cf(n.key,r,new Xo(i.toArray()),As.none())}}function BD(n,e,t){n instanceof R1?function(i,a,o){const s=i.value.clone(),c=G3(i.fieldTransforms,a,o.transformResults);s.setAll(c),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof Cf?function(i,a,o){if(!fg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=G3(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(o8(i)),c.setAll(s),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function J0(n,e,t,r){return n instanceof R1?function(a,o,s,c){if(!fg(a.precondition,o))return s;const f=a.value.clone(),d=$3(a.fieldTransforms,c,o);return f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cf?function(a,o,s,c){if(!fg(a.precondition,o))return s;const f=$3(a.fieldTransforms,c,o),d=o.data;return d.setAll(o8(a)),d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,o,s){return fg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function FD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=t8(r.transform,i||null);a!=null&&(t===null&&(t=xo.empty()),t.set(r.field,a))}return t||null}function W3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sh(r,i,(a,o)=>MD(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class R1 extends Am{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cf extends Am{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function o8(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function G3(n,e,t){const r=new Map;rr(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,PD(o,s,t[i]))}return r}function $3(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,kD(a,o,e))}return r}class Px extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zD extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&BD(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=J0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=J0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=J6();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const c=a8(o,s);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Jt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),En())}isEqual(e){return this.batchId===e.batchId&&Sh(this.mutations,e.mutations,(t,r)=>W3(t,r))&&Sh(this.baseMutations,e.baseMutations,(t,r)=>W3(t,r))}}class Lx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rr(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return TD}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Lx(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai,kn;function HD(n){switch(n){case nt.OK:return Yt(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return Yt(15467,{code:n})}}function s8(n){if(n===void 0)return Jc("GRPC error has no .code"),nt.UNKNOWN;switch(n){case Ai.OK:return nt.OK;case Ai.CANCELLED:return nt.CANCELLED;case Ai.UNKNOWN:return nt.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return nt.INTERNAL;case Ai.UNAVAILABLE:return nt.UNAVAILABLE;case Ai.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Ai.NOT_FOUND:return nt.NOT_FOUND;case Ai.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Ai.ABORTED:return nt.ABORTED;case Ai.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Ai.DATA_LOSS:return nt.DATA_LOSS;default:return Yt(39323,{code:n})}}(kn=Ai||(Ai={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new lf([4294967295,4294967295],0);function Y3(n){const e=N6().encode(n),t=new _6;return t.update(e),new Uint8Array(t.digest())}function X3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new lf([t,r],0),new lf([i,a],0)]}class Mx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new V0(`Invalid padding: ${t}`);if(r<0)throw new V0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new V0(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new V0(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=lf.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(lf.fromNumber(r)));return i.compare(WD)===1&&(i=new lf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Y3(e),[r,i]=X3(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Mx(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.pe===0)return;const t=Y3(e),[r,i]=X3(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class V0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,N1.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sm(Jt.min(),i,new Gr(dn),eu(),En())}}class N1{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new N1(r,t,En(),En(),En())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class l8{constructor(e,t){this.targetId=e,this.Ce=t}}class c8{constructor(e,t,r=ga.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class K3{constructor(){this.Fe=0,this.Me=Q3(),this.xe=ga.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=En(),t=En(),r=En();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Yt(38017,{changeType:a})}}),new N1(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Q3()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,rr(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class GD{constructor(e){this.ze=e,this.je=new Map,this.He=eu(),this.Je=Hp(),this.Ye=Hp(),this.Ze=new Gr(dn)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Yt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(my(a))if(r===0){const o=new Mt(a.path);this.tt(t,o,ja.newNoDocument(o,Jt.min()))}else rr(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const s=this.ct(e),c=s?this.lt(s,e,o):1;if(c!==0){this.st(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=mf(r).toUint8Array()}catch(c){if(c instanceof P6)return Ah("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{s=new Mx(o,i,a)}catch(c){return Ah(c instanceof V0?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return s.pe===0?null:s}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.ze.Pt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,o)=>{const s=this._t(o);if(s){if(a.current&&my(s.target)){const c=new Mt(s.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,ja.newNoDocument(c,e))}a.Le&&(t.set(o,a.qe()),a.Qe())}});let r=En();this.Ye.forEach((a,o)=>{let s=!0;o.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.He.forEach((a,o)=>o.setReadTime(e));const i=new Sm(e,t,this.Ze,this.He,r);return this.He=eu(),this.Je=Hp(),this.Ye=Hp(),this.Ze=new Gr(dn),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new K3,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ji(dn),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ji(dn),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||St("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new K3),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Hp(){return new Gr(Mt.comparator)}function Q3(){return new Gr(Mt.comparator)}const $D={asc:"ASCENDING",desc:"DESCENDING"},YD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XD={and:"AND",or:"OR"};class KD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xy(n,e){return n.useProto3Json||vm(e)?e:{value:e}}function jg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QD(n,e){return jg(n,e.toTimestamp())}function tc(n){return rr(!!n,49232),Jt.fromTimestamp(function(t){const r=gf(t);return new gi(r.seconds,r.nanos)}(n))}function jx(n,e){return by(n,e).canonicalString()}function by(n,e){const t=function(i){return new Nr(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function f8(n){const e=Nr.fromString(n);return rr(m8(e),10190,{key:e.toString()}),e}function wy(n,e){return jx(n.databaseId,e.path)}function wv(n,e){const t=f8(e);if(t.get(1)!==n.databaseId.projectId)throw new Et(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Et(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Mt(h8(t))}function d8(n,e){return jx(n.databaseId,e)}function ZD(n){const e=f8(n);return e.length===4?Nr.emptyPath():h8(e)}function _y(n){return new Nr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function h8(n){return rr(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Z3(n,e,t){return{name:wy(n,e),fields:t.value.mapValue.fields}}function JD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Yt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,d){return f.useProto3Json?(rr(d===void 0||typeof d=="string",58123),ga.fromBase64String(d||"")):(rr(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ga.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(f){const d=f.code===void 0?nt.UNKNOWN:s8(f.code);return new Et(d,f.message||"")}(o);t=new c8(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wv(n,r.document.name),a=tc(r.document.updateTime),o=r.document.createTime?tc(r.document.createTime):Jt.min(),s=new xo({mapValue:{fields:r.document.fields}}),c=ja.newFoundDocument(i,a,o,s),f=r.targetIds||[],d=r.removedTargetIds||[];t=new dg(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wv(n,r.document),a=r.readTime?tc(r.readTime):Jt.min(),o=ja.newNoDocument(i,a),s=r.removedTargetIds||[];t=new dg([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wv(n,r.document),a=r.removedTargetIds||[];t=new dg([],a,i,null)}else{if(!("filter"in e))return Yt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new qD(i,a),s=r.targetId;t=new l8(s,o)}}return t}function eO(n,e){let t;if(e instanceof R1)t={update:Z3(n,e.key,e.value)};else if(e instanceof Px)t={delete:wy(n,e.key)};else if(e instanceof Cf)t={update:Z3(n,e.key,e.data),updateMask:cO(e.fieldMask)};else{if(!(e instanceof zD))return Yt(16599,{ft:e.type});t={verify:wy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof d1)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof h1)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof p1)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Mg)return{fieldPath:o.field.canonicalString(),increment:s.Re};throw Yt(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:QD(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Yt(27497)}(n,e.precondition)),t}function tO(n,e){return n&&n.length>0?(rr(e!==void 0,14353),n.map(t=>function(i,a){let o=i.updateTime?tc(i.updateTime):tc(a);return o.isEqual(Jt.min())&&(o=tc(a)),new jD(o,i.transformResults||[])}(t,e))):[]}function nO(n,e){return{documents:[d8(n,e.path)]}}function rO(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=d8(n,i);const a=function(f){if(f.length!==0)return g8(hl.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(f){if(f.length!==0)return f.map(d=>function(g){return{field:ah(g.field),direction:oO(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=xy(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function iO(n){let e=ZD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rr(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];t.where&&(a=function(p){const g=p8(p);return g instanceof hl&&H6(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(x){return new f1(oh(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(t.orderBy));let s=null;t.limit&&(s=function(p){let g;return g=typeof p=="object"?p.value:p,vm(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,m=p.values||[];return new Lg(m,g)}(t.startAt));let f=null;return t.endAt&&(f=function(p){const g=!p.before,m=p.values||[];return new Lg(m,g)}(t.endAt)),AD(e,i,o,a,s,"F",c,f)}function aO(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function p8(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=oh(t.unaryFilter.field);return Si.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=oh(t.unaryFilter.field);return Si.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=oh(t.unaryFilter.field);return Si.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oh(t.unaryFilter.field);return Si.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Yt(61313);default:return Yt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Si.create(oh(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Yt(58110);default:return Yt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return hl.create(t.compositeFilter.filters.map(r=>p8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yt(1026)}}(t.compositeFilter.op))}(n):Yt(30097,{filter:n})}function oO(n){return $D[n]}function sO(n){return YD[n]}function lO(n){return XD[n]}function ah(n){return{fieldPath:n.canonicalString()}}function oh(n){return ha.fromServerFormat(n.fieldPath)}function g8(n){return n instanceof Si?function(t){if(t.op==="=="){if(F3(t.value))return{unaryFilter:{field:ah(t.field),op:"IS_NAN"}};if(B3(t.value))return{unaryFilter:{field:ah(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(F3(t.value))return{unaryFilter:{field:ah(t.field),op:"IS_NOT_NAN"}};if(B3(t.value))return{unaryFilter:{field:ah(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ah(t.field),op:sO(t.op),value:t.value}}}(n):n instanceof hl?function(t){const r=t.getFilters().map(i=>g8(i));return r.length===1?r[0]:{compositeFilter:{op:lO(t.op),filters:r}}}(n):Yt(54877,{filter:n})}function cO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function m8(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t,r,i,a=Jt.min(),o=Jt.min(),s=ga.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=c}withSequenceNumber(e){return new rf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.wt=e}}function fO(n){const e=iO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.Cn=new hO}addToCollectionParentIndex(e,t){return this.Cn.add(t),rt.resolve()}getCollectionParents(e,t){return rt.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return rt.resolve()}deleteFieldIndex(e,t){return rt.resolve()}deleteAllFieldIndexes(e){return rt.resolve()}createTargetIndexes(e,t){return rt.resolve()}getDocumentsMatchingTarget(e,t){return rt.resolve(null)}getIndexType(e,t){return rt.resolve(0)}getFieldIndexes(e,t){return rt.resolve([])}getNextCollectionGroupToUpdate(e){return rt.resolve(null)}getMinOffset(e,t){return rt.resolve(pf.min())}getMinOffsetFromCollectionGroup(e,t){return rt.resolve(pf.min())}updateCollectionGroup(e,t,r){return rt.resolve()}updateIndexEntries(e,t){return rt.resolve()}}class hO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ji(Nr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ji(Nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},v8=41943040;class vo{static withCacheSize(e){return new vo(e,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo.DEFAULT_COLLECTION_PERCENTILE=10,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vo.DEFAULT=new vo(v8,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vo.DISABLED=new vo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ih(0)}static lr(){return new Ih(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="LruGarbageCollector",pO=1048576;function t_([n,e],[t,r]){const i=dn(n,t);return i===0?dn(e,r):i}class gO{constructor(e){this.Er=e,this.buffer=new ji(t_),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();t_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){St(e_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bh(t)?St(e_,"Ignoring IndexedDB error during garbage collection: ",t):await jh(t)}await this.mr(3e5)})}}class vO{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return rt.resolve(mm.le);const r=new gO(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(St("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(J3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J3):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,o,s,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(St("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,s=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),rh()<=Sn.DEBUG&&St("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(c-s)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function yO(n,e){return new vO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.changes=new bd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ja.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?rt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&J0(r.mutation,i,Xo.empty(),gi.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,En()).next(()=>r))}getLocalViewOfDocuments(e,t,r=En()){const i=nd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=U0();return a.forEach((s,c)=>{o=o.insert(s,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=nd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,En()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=eu();const o=Z0(),s=function(){return Z0()}();return t.forEach((c,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Cf)?a=a.insert(f.key,f):d!==void 0?(o.set(f.key,d.mutation.getFieldMask()),J0(d.mutation,f,d.mutation.getFieldMask(),gi.now())):o.set(f.key,Xo.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((f,d)=>o.set(f,d)),t.forEach((f,d)=>{var p;return s.set(f,new bO(d,(p=o.get(f))!==null&&p!==void 0?p:null))}),s))}recalculateAndSaveOverlays(e,t){const r=Z0();let i=new Gr((o,s)=>o-s),a=En();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(c=>{const f=t.get(c);if(f===null)return;let d=r.get(c)||Xo.empty();d=s.applyToLocalView(f,d),r.set(c,d);const p=(i.get(s.batchId)||En()).add(c);i=i.insert(s.batchId,p)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const c=s.getNext(),f=c.key,d=c.value,p=J6();d.forEach(g=>{if(!a.has(g)){const m=a8(t.get(g),r.get(g));m!==null&&p.set(g,m),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return rt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Mt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Y6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):rt.resolve(nd());let s=s1,c=a;return o.next(f=>rt.forEach(f,(d,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),a.get(d)?rt.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,c,f,En())).next(d=>({batchId:s,changes:Z6(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mt(t)).next(r=>{let i=U0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=U0();return this.indexManager.getCollectionParents(e,a).next(s=>rt.forEach(s,c=>{const f=function(p,g){return new Fh(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((c,f)=>{const d=f.getKey();o.get(d)===null&&(o=o.insert(d,ja.newInvalidDocument(d)))});let s=U0();return o.forEach((c,f)=>{const d=a.get(c);d!==void 0&&J0(d.mutation,f,Xo.empty(),gi.now()),wm(t,f)&&(s=s.insert(c,f))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return rt.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:tc(i.createTime)}}(t)),rt.resolve()}getNamedQuery(e,t){return rt.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:fO(i.bundledQuery),readTime:tc(i.readTime)}}(t)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.overlays=new Gr(Mt.comparator),this.Qr=new Map}getOverlay(e,t){return rt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nd();return rt.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.St(e,t,a)}),rt.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),rt.resolve()}getOverlaysForCollection(e,t,r){const i=nd(),a=t.length+1,o=new Mt(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const c=s.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return rt.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Gr((f,d)=>f-d);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let d=a.get(f.largestBatchId);d===null&&(d=nd(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const s=nd(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>s.set(f,d)),!(s.size()>=i)););return rt.resolve(s)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VD(t,r));let a=this.Qr.get(t);a===void 0&&(a=En(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.sessionToken=ga.EMPTY_BYTE_STRING}getSessionToken(e){return rt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.$r=new ji(Ki.Ur),this.Kr=new ji(Ki.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Ki(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Ki(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new Mt(new Nr([])),r=new Ki(t,e),i=new Ki(t,e+1),a=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),a.push(o.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Mt(new Nr([])),r=new Ki(t,e),i=new Ki(t,e+1);let a=En();return this.Kr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Ki(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ki{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Mt.comparator(e.key,t.key)||dn(e.Zr,t.Zr)}static Wr(e,t){return dn(e.Zr,t.Zr)||Mt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ji(Ki.Ur)}checkEmpty(e){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UD(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.Xr=this.Xr.add(new Ki(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return rt.resolve(o)}lookupMutationBatch(e,t){return rt.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return rt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?Tx:this.nr-1)}getAllMutationBatches(e){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ki(t,0),i=new Ki(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],o=>{const s=this.ei(o.Zr);a.push(s)}),rt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ji(dn);return t.forEach(i=>{const a=new Ki(i,0),o=new Ki(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,o],s=>{r=r.add(s.Zr)})}),rt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Mt.isDocumentKey(a)||(a=a.child(""));const o=new Ki(new Mt(a),0);let s=new ji(dn);return this.Xr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(s=s.add(c.Zr)),!0)},o),rt.resolve(this.ni(s))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rr(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return rt.forEach(t.mutations,i=>{const a=new Ki(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Ki(t,0),i=this.Xr.firstAfterOrEqual(r);return rt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,rt.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.ii=e,this.docs=function(){return new Gr(Mt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return rt.resolve(r?r.document.mutableCopy():ja.newInvalidDocument(t))}getEntries(e,t){let r=eu();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ja.newInvalidDocument(i))}),rt.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=eu();const o=t.path,s=new Mt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||tD(eD(d),r)<=0||(i.has(d.key)||wm(t,d))&&(a=a.insert(d.key,d.mutableCopy()))}return rt.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Yt(9500)}si(e,t){return rt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new IO(this)}getSize(e){return rt.resolve(this.size)}}class IO extends xO{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),rt.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.persistence=e,this.oi=new bd(t=>Dx(t),Ox),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this._i=0,this.ai=new Bx,this.targetCount=0,this.ui=Ih.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),rt.resolve()}getLastRemoteSnapshotVersion(e){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rt.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),rt.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ih(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,rt.resolve()}updateTargetData(e,t){return this.Tr(t),rt.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,rt.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.oi.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),rt.waitFor(a).next(()=>i)}getTargetCount(e){return rt.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return rt.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),rt.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),rt.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),rt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return rt.resolve(r)}containsKey(e,t){return rt.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,t){this.ci={},this.overlays={},this.li=new mm(0),this.hi=!1,this.hi=!0,this.Pi=new SO,this.referenceDelegate=e(this),this.Ti=new TO(this),this.indexManager=new dO,this.remoteDocumentCache=function(i){return new CO(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new uO(t),this.Ei=new _O(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new EO(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){St("MemoryPersistence","Starting transaction:",e);const i=new RO(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return rt.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class RO extends rD{constructor(e){super(),this.currentSequenceNumber=e}}class Fx{constructor(e){this.persistence=e,this.Vi=new Bx,this.mi=null}static fi(e){return new Fx(e)}get gi(){if(this.mi)return this.mi;throw Yt(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),rt.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),rt.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),rt.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.gi,r=>{const i=Mt.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,Jt.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return rt.or([()=>rt.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Bg{constructor(e,t){this.persistence=e,this.yi=new bd(r=>oD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=yO(this,t)}static fi(e,t){return new Bg(e,t)}di(){}Ai(e){return rt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return rt.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?rt.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(s=>{s||(r++,a.removeEntry(o,Jt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),rt.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),rt.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),rt.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),rt.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cg(e.data.value)),t}Dr(e,t,r){return rt.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return rt.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=En(),i=En();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new zx(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return a7()?8:iD(za())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.bs(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new NO;return this.Ss(e,t,o).next(s=>{if(a.result=s,this.fs)return this.Ds(e,t,o,s.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(rh()<=Sn.DEBUG&&St("QueryEngine","SDK will not create cache indexes for query:",ih(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),rt.resolve()):(rh()<=Sn.DEBUG&&St("QueryEngine","Query:",ih(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(rh()<=Sn.DEBUG&&St("QueryEngine","The SDK decides to create cache indexes for query:",ih(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ec(t))):rt.resolve())}ws(e,t){if(q3(t))return rt.resolve(null);let r=ec(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=yy(t,null,"F"),r=ec(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=En(...a);return this.ys.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.vs(t,s);return this.Cs(t,f,o,c.readTime)?this.ws(e,yy(t,null,"F")):this.Fs(e,f,t,c)}))})))}bs(e,t,r,i){return q3(t)||i.isEqual(Jt.min())?rt.resolve(null):this.ys.getDocuments(e,r).next(a=>{const o=this.vs(t,a);return this.Cs(t,o,r,i)?rt.resolve(null):(rh()<=Sn.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ih(t)),this.Fs(e,o,t,JN(i,s1)).next(s=>s))})}vs(e,t){let r=new ji(K6(e));return t.forEach((i,a)=>{wm(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return rh()<=Sn.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",ih(t)),this.ys.getDocumentsMatchingQuery(e,t,pf.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="LocalStore",OO=3e8;class kO{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Gr(dn),this.Os=new bd(a=>Dx(a),Ox),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wO(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function PO(n,e,t,r){return new kO(n,e,t,r)}async function x8(n,e){const t=nn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let c=En();for(const f of i){o.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(f=>({ks:f,removedBatchIds:o,addedBatchIds:s}))})})}function LO(n,e){const t=nn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(s,c,f,d){const p=f.batch,g=p.keys();let m=rt.resolve();return g.forEach(x=>{m=m.next(()=>d.getEntry(c,x)).next(_=>{const T=f.docVersions.get(x);rr(T!==null,48541),_.version.compareTo(T)<0&&(p.applyToRemoteDocument(_,f),_.isValidDocument()&&(_.setReadTime(f.commitVersion),d.addEntry(_)))})}),m.next(()=>s.mutationQueue.removeMutationBatch(c,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let c=En();for(let f=0;f<s.mutationResults.length;++f)s.mutationResults[f].transformResults.length>0&&(c=c.add(s.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function b8(n){const e=nn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function MO(n,e){const t=nn(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const s=[];e.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;s.push(t.Ti.removeMatchingKeys(a,d.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(a,d.addedDocuments,p)));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(ga.EMPTY_BYTE_STRING,Jt.min()).withLastLimboFreeSnapshotVersion(Jt.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(p,m),function(_,T,A){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=OO?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,m,d)&&s.push(t.Ti.updateTargetData(a,m))});let c=eu(),f=En();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,d))}),s.push(jO(a,o,e.documentUpdates).next(d=>{c=d.qs,f=d.Qs})),!r.isEqual(Jt.min())){const d=t.Ti.getLastRemoteSnapshotVersion(a).next(p=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(d)}return rt.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,f)).next(()=>c)}).then(a=>(t.xs=i,a))}function jO(n,e,t){let r=En(),i=En();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=eu();return t.forEach((s,c)=>{const f=a.get(s);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(s)),c.isNoDocument()&&c.version.isEqual(Jt.min())?(e.removeEntry(s,c.readTime),o=o.insert(s,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),o=o.insert(s,c)):St(Ux,"Ignoring outdated watch update for ",s,". Current version:",f.version," Watch version:",c.version)}),{qs:o,Qs:i}})}function BO(n,e){const t=nn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Tx),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FO(n,e){const t=nn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,rt.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new rf(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Ay(n,e,t){const r=nn(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Bh(o))throw o;St(Ux,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function n_(n,e,t){const r=nn(n);let i=Jt.min(),a=En();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,f,d){const p=nn(c),g=p.Os.get(d);return g!==void 0?rt.resolve(p.xs.get(g)):p.Ti.getTargetData(f,d)}(r,o,ec(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,s.targetId).next(c=>{a=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Jt.min(),t?a:En())).next(s=>(zO(r,ED(e),s),{documents:s,$s:a})))}function zO(n,e,t){let r=n.Ns.get(e)||Jt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class r_{constructor(){this.activeTargetIds=DD()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UO{constructor(){this.xo=new r_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new r_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="ConnectivityMonitor";class a_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){St(i_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){St(i_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp=null;function Sy(){return Wp===null?Wp=function(){return 268435456+Math.round(2147483648*Math.random())}():Wp++,"0x"+Wp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="RestConnection",qO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===kg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const o=Sy(),s=this.jo(e,t.toUriEncodedString());St(_v,`Sending RPC '${e}' ${o}:`,s,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,a);const{host:f}=new URL(s),d=Ph(f);return this.Jo(e,s,c,r,d).then(p=>(St(_v,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ah(_v,`RPC '${e}' ${o} failed with error: `,p,"url: ",s,"request:",r),p})}Yo(e,t,r,i,a,o){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=qO[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="WebChannelConnection";class GO extends HO{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=Sy();return new Promise((s,c)=>{const f=new A6;f.setWithCredentials(!0),f.listenOnce(S6.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case lg.NO_ERROR:const p=f.getResponseJson();St(Ra,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case lg.TIMEOUT:St(Ra,`RPC '${e}' ${o} timed out`),c(new Et(nt.DEADLINE_EXCEEDED,"Request time out"));break;case lg.HTTP_ERROR:const g=f.getStatus();if(St(Ra,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let m=f.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const _=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(D)>=0?D:nt.UNKNOWN}(x.status);c(new Et(_,x.message))}else c(new Et(nt.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Et(nt.UNAVAILABLE,"Connection failed."));break;default:Yt(9055,{h_:e,streamId:o,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{St(Ra,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);St(Ra,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",d,r,15)})}I_(e,t,r){const i=Sy(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I6(),s=C6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const d=a.join("");St(Ra,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=o.createWebChannel(d,c);this.E_(p);let g=!1,m=!1;const x=new WO({Zo:T=>{m?St(Ra,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(St(Ra,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),St(Ra,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},Xo:()=>p.close()}),_=(T,A,D)=>{T.listen(A,U=>{try{D(U)}catch(H){setTimeout(()=>{throw H},0)}})};return _(p,z0.EventType.OPEN,()=>{m||(St(Ra,`RPC '${e}' stream ${i} transport opened.`),x.__())}),_(p,z0.EventType.CLOSE,()=>{m||(m=!0,St(Ra,`RPC '${e}' stream ${i} transport closed`),x.u_(),this.d_(p))}),_(p,z0.EventType.ERROR,T=>{m||(m=!0,Ah(Ra,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),x.u_(new Et(nt.UNAVAILABLE,"The operation could not be completed")))}),_(p,z0.EventType.MESSAGE,T=>{var A;if(!m){const D=T.data[0];rr(!!D,16349);const U=D,H=(U==null?void 0:U.error)||((A=U[0])===null||A===void 0?void 0:A.error);if(H){St(Ra,`RPC '${e}' stream ${i} received error:`,H);const X=H.status;let q=function(N){const L=Ai[N];if(L!==void 0)return s8(L)}(X),j=H.message;q===void 0&&(q=nt.INTERNAL,j="Unknown error status: "+X+" with message "+H.message),m=!0,x.u_(new Et(q,j)),p.close()}else St(Ra,`RPC '${e}' stream ${i} received:`,D),x.c_(D)}}),_(s,E6.STAT_EVENT,T=>{T.stat===fy.PROXY?St(Ra,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===fy.NOPROXY&&St(Ra,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function Av(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n){return new KD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&St("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="PersistentStream";class _8{constructor(e,t,r,i,a,o,s,c){this.xi=e,this.S_=r,this.D_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new w8(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===nt.RESOURCE_EXHAUSTED?(Jc(t.toString()),Jc("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{const i=new Et(nt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return St(o_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(St(o_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $O extends _8{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=JD(this.serializer,e),r=function(a){if(!("targetChange"in a))return Jt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Jt.min():o.readTime?tc(o.readTime):Jt.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=_y(this.serializer),t.addTarget=function(a,o){let s;const c=o.target;if(s=my(c)?{documents:nO(a,c)}:{query:rO(a,c).gt},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=u8(a,o.resumeToken);const f=xy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}else if(o.snapshotVersion.compareTo(Jt.min())>0){s.readTime=jg(a,o.snapshotVersion.toTimestamp());const f=xy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}return s}(this.serializer,e);const r=aO(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=_y(this.serializer),t.removeTarget=e,this.Q_(t)}}class YO extends _8{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return rr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rr(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){rr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=tO(e.writeResults,e.commitTime),r=tc(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=_y(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>eO(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{}class KO extends XO{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new Et(nt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.zo(e,by(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Et(nt.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Yo(e,by(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Et(nt.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class QO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Jc(t),this.ua=!1):St("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="RemoteStore";class ZO{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(o=>{r.enqueueAndForget(async()=>{wd(this)&&(St(hd,"Restarting streams for network reachability change."),await async function(c){const f=nn(c);f.da.add(4),await D1(f),f.Va.set("Unknown"),f.da.delete(4),await Cm(f)}(this))})}),this.Va=new QO(r,i)}}async function Cm(n){if(wd(n))for(const e of n.Aa)await e(!0)}async function D1(n){for(const e of n.Aa)await e(!1)}function A8(n,e){const t=nn(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Wx(t)?Hx(t):zh(t).N_()&&qx(t,e))}function Vx(n,e){const t=nn(n),r=zh(t);t.Ea.delete(e),r.N_()&&S8(t,e),t.Ea.size===0&&(r.N_()?r.k_():wd(t)&&t.Va.set("Unknown"))}function qx(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Jt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zh(n).Z_(e)}function S8(n,e){n.ma.Ke(e),zh(n).X_(e)}function Hx(n){n.ma=new GD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),zh(n).start(),n.Va.ca()}function Wx(n){return wd(n)&&!zh(n).O_()&&n.Ea.size>0}function wd(n){return nn(n).da.size===0}function E8(n){n.ma=void 0}async function JO(n){n.Va.set("Online")}async function ek(n){n.Ea.forEach((e,t)=>{qx(n,e)})}async function tk(n,e){E8(n),Wx(n)?(n.Va.Pa(e),Hx(n)):n.Va.set("Unknown")}async function nk(n,e,t){if(n.Va.set("Online"),e instanceof c8&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ea.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ea.delete(s),i.ma.removeTarget(s))}(n,e)}catch(r){St(hd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fg(n,r)}else if(e instanceof dg?n.ma.Xe(e):e instanceof l8?n.ma.ot(e):n.ma.nt(e),!t.isEqual(Jt.min()))try{const r=await b8(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.ma.It(o);return s.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ea.get(f);d&&a.Ea.set(f,d.withResumeToken(c.resumeToken,o))}}),s.targetMismatches.forEach((c,f)=>{const d=a.Ea.get(c);if(!d)return;a.Ea.set(c,d.withResumeToken(ga.EMPTY_BYTE_STRING,d.snapshotVersion)),S8(a,c);const p=new rf(d.target,c,f,d.sequenceNumber);qx(a,p)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){St(hd,"Failed to raise snapshot:",r),await Fg(n,r)}}async function Fg(n,e,t){if(!Bh(e))throw e;n.da.add(1),await D1(n),n.Va.set("Offline"),t||(t=()=>b8(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{St(hd,"Retrying IndexedDB access"),await t(),n.da.delete(1),await Cm(n)})}function C8(n,e){return e().catch(t=>Fg(n,t,e))}async function Im(n){const e=nn(n),t=yf(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Tx;for(;rk(e);)try{const i=await BO(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,ik(e,i)}catch(i){await Fg(e,i)}I8(e)&&T8(e)}function rk(n){return wd(n)&&n.Ia.length<10}function ik(n,e){n.Ia.push(e);const t=yf(n);t.N_()&&t.ea&&t.ta(e.mutations)}function I8(n){return wd(n)&&!yf(n).O_()&&n.Ia.length>0}function T8(n){yf(n).start()}async function ak(n){yf(n).ia()}async function ok(n){const e=yf(n);for(const t of n.Ia)e.ta(t.mutations)}async function sk(n,e,t){const r=n.Ia.shift(),i=Lx.from(r,e,t);await C8(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Im(n)}async function lk(n,e){e&&yf(n).ea&&await async function(r,i){if(function(o){return HD(o)&&o!==nt.ABORTED}(i.code)){const a=r.Ia.shift();yf(r).L_(),await C8(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Im(r)}}(n,e),I8(n)&&T8(n)}async function s_(n,e){const t=nn(n);t.asyncQueue.verifyOperationInProgress(),St(hd,"RemoteStore received new credentials");const r=wd(t);t.da.add(3),await D1(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Cm(t)}async function ck(n,e){const t=nn(n);e?(t.da.delete(2),await Cm(t)):e||(t.da.add(2),await D1(t),t.Va.set("Unknown"))}function zh(n){return n.fa||(n.fa=function(t,r,i){const a=nn(t);return a.oa(),new $O(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:JO.bind(null,n),n_:ek.bind(null,n),i_:tk.bind(null,n),Y_:nk.bind(null,n)}),n.Aa.push(async e=>{e?(n.fa.L_(),Wx(n)?Hx(n):n.Va.set("Unknown")):(await n.fa.stop(),E8(n))})),n.fa}function yf(n){return n.ga||(n.ga=function(t,r,i){const a=nn(t);return a.oa(),new YO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:ak.bind(null,n),i_:lk.bind(null,n),na:ok.bind(null,n),ra:sk.bind(null,n)}),n.Aa.push(async e=>{e?(n.ga.L_(),await Im(n)):(await n.ga.stop(),n.Ia.length>0&&(St(hd,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new Gx(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $x(n,e){if(Jc("AsyncQueue",`${e}: ${n}`),Bh(n))return new Et(nt.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{static emptySet(e){return new vh(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Mt.comparator(t.key,r.key):(t,r)=>Mt.comparator(t.key,r.key),this.keyedMap=U0(),this.sortedSet=new Gr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new vh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(){this.pa=new Gr(Mt.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Yt(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Th{constructor(e,t,r,i,a,o,s,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new Th(e,t,vh.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class fk{constructor(){this.queries=c_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=nn(t),a=i.queries;i.queries=c_(),a.forEach((o,s)=>{for(const c of s.Sa)c.onError(r)})})(this,new Et(nt.ABORTED,"Firestore shutting down"))}}function c_(){return new bd(n=>X6(n),bm)}async function Yx(n,e){const t=nn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Da()&&e.va()&&(r=2):(a=new uk,r=e.va()?0:1);try{switch(r){case 0:a.ba=await t.onListen(i,!0);break;case 1:a.ba=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=$x(o,`Initialization of query '${ih(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.Sa.push(e),e.Fa(t.onlineState),a.ba&&e.Ma(a.ba)&&Kx(t)}async function Xx(n,e){const t=nn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.va()?0:1:!a.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dk(n,e){const t=nn(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.Sa)s.Ma(i)&&(r=!0);o.ba=i}}r&&Kx(t)}function hk(n,e,t){const r=nn(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Kx(n){n.Ca.forEach(e=>{e.next()})}var Ey,u_;(u_=Ey||(Ey={})).xa="default",u_.Cache="cache";class Qx{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Th(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e){this.key=e}}class N8{constructor(e){this.key=e}}class pk{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=En(),this.mutatedKeys=En(),this.Za=K6(e),this.Xa=new vh(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new l_,i=t?t.Xa:this.Xa;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const g=i.get(d),m=wm(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;g&&m?g.data.isEqual(m.data)?x!==_&&(r.track({type:3,doc:m}),T=!0):this.ru(g,m)||(r.track({type:2,doc:m}),T=!0,(c&&this.Za(m,c)>0||f&&this.Za(m,f)<0)&&(s=!0)):!g&&m?(r.track({type:0,doc:m}),T=!0):g&&!m&&(r.track({type:1,doc:g}),T=!0,(c||f)&&(s=!0)),T&&(m?(o=o.add(m),a=_?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Xa:o,nu:r,Cs:s,mutatedKeys:a}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((d,p)=>function(m,x){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt(20277,{Vt:T})}};return _(m)-_(x)}(d.type,p.type)||this.Za(d.doc,p.doc)),this.iu(r),i=i!=null&&i;const s=t&&!i?this.su():[],c=this.Ya.size===0&&this.current&&!i?1:0,f=c!==this.Ja;return this.Ja=c,o.length!==0||f?{snapshot:new Th(this.query,e.Xa,a,o,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:s}:{ou:s}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new l_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=En(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new N8(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new R8(r))}),t}au(e){this.Ha=e.$s,this.Ya=En();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Th.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Zx="SyncEngine";class gk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mk{constructor(e){this.key=e,this.cu=!1}}class vk{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new bd(s=>X6(s),bm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Gr(Mt.comparator),this.Eu=new Map,this.du=new Bx,this.Au={},this.Ru=new Map,this.Vu=Ih.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function yk(n,e,t=!0){const r=M8(n);let i;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.uu()):i=await D8(r,e,t,!0),i}async function xk(n,e){const t=M8(n);await D8(t,e,!0,!1)}async function D8(n,e,t,r){const i=await FO(n.localStore,ec(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await bk(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&A8(n.remoteStore,i),s}async function bk(n,e,t,r,i){n.fu=(p,g,m)=>async function(_,T,A,D){let U=T.view.tu(A);U.Cs&&(U=await n_(_.localStore,T.query,!1).then(({documents:j})=>T.view.tu(j,U)));const H=D&&D.targetChanges.get(T.targetId),X=D&&D.targetMismatches.get(T.targetId)!=null,q=T.view.applyChanges(U,_.isPrimaryClient,H,X);return d_(_,T.targetId,q.ou),q.snapshot}(n,p,g,m);const a=await n_(n.localStore,e,!0),o=new pk(e,a.$s),s=o.tu(a.documents),c=N1.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(s,n.isPrimaryClient,c);d_(n,t,f.ou);const d=new gk(e,t,o);return n.hu.set(e,d),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot}async function wk(n,e,t){const r=nn(n),i=r.hu.get(e),a=r.Pu.get(i.targetId);if(a.length>1)return r.Pu.set(i.targetId,a.filter(o=>!bm(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ay(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Vx(r.remoteStore,i.targetId),Cy(r,i.targetId)}).catch(jh)):(Cy(r,i.targetId),await Ay(r.localStore,i.targetId,!0))}async function _k(n,e){const t=nn(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vx(t.remoteStore,r.targetId))}async function Ak(n,e,t){const r=Nk(n);try{const i=await function(o,s){const c=nn(o),f=gi.now(),d=s.reduce((m,x)=>m.add(x.key),En());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=eu(),_=En();return c.Bs.getEntries(m,d).next(T=>{x=T,x.forEach((A,D)=>{D.isValidDocument()||(_=_.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,x)).next(T=>{p=T;const A=[];for(const D of s){const U=FD(D,p.get(D.key).overlayedDocument);U!=null&&A.push(new Cf(D.key,U,U6(U.value.mapValue),As.exists(!0)))}return c.mutationQueue.addMutationBatch(m,f,A,s)}).next(T=>{g=T;const A=T.applyToLocalDocumentSet(p,_);return c.documentOverlayCache.saveOverlays(m,T.batchId,A)})}).then(()=>({batchId:g.batchId,changes:Z6(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,c){let f=o.Au[o.currentUser.toKey()];f||(f=new Gr(dn)),f=f.insert(s,c),o.Au[o.currentUser.toKey()]=f}(r,i.batchId,t),await O1(r,i.changes),await Im(r.remoteStore)}catch(i){const a=$x(i,"Failed to persist write");t.reject(a)}}async function O8(n,e){const t=nn(n);try{const r=await MO(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Eu.get(a);o&&(rr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?rr(o.cu,14607):i.removedDocuments.size>0&&(rr(o.cu,42227),o.cu=!1))}),await O1(t,r,e)}catch(r){await jh(r)}}function f_(n,e,t){const r=nn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.hu.forEach((a,o)=>{const s=o.view.Fa(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const c=nn(o);c.onlineState=s;let f=!1;c.queries.forEach((d,p)=>{for(const g of p.Sa)g.Fa(s)&&(f=!0)}),f&&Kx(c)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Sk(n,e,t){const r=nn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let o=new Gr(Mt.comparator);o=o.insert(a,ja.newNoDocument(a,Jt.min()));const s=En().add(a),c=new Sm(Jt.min(),new Map,new Gr(dn),o,s);await O8(r,c),r.Iu=r.Iu.remove(a),r.Eu.delete(e),Jx(r)}else await Ay(r.localStore,e,!1).then(()=>Cy(r,e,t)).catch(jh)}async function Ek(n,e){const t=nn(n),r=e.batch.batchId;try{const i=await LO(t.localStore,e);P8(t,r,null),k8(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await O1(t,i)}catch(i){await jh(i)}}async function Ck(n,e,t){const r=nn(n);try{const i=await function(o,s){const c=nn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return c.mutationQueue.lookupMutationBatch(f,s).next(p=>(rr(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(f,p))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,s)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>c.localDocuments.getDocuments(f,d))})}(r.localStore,e);P8(r,e,t),k8(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await O1(r,i)}catch(i){await jh(i)}}function k8(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function P8(n,e,t){const r=nn(n);let i=r.Au[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function Cy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||L8(n,r)})}function L8(n,e){n.Tu.delete(e.path.canonicalString());const t=n.Iu.get(e);t!==null&&(Vx(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),Jx(n))}function d_(n,e,t){for(const r of t)r instanceof R8?(n.du.addReference(r.key,e),Ik(n,r)):r instanceof N8?(St(Zx,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||L8(n,r.key)):Yt(19791,{pu:r})}function Ik(n,e){const t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(St(Zx,"New document in limbo: "+t),n.Tu.add(r),Jx(n))}function Jx(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const e=n.Tu.values().next().value;n.Tu.delete(e);const t=new Mt(Nr.fromString(e)),r=n.Vu.next();n.Eu.set(r,new mk(t)),n.Iu=n.Iu.insert(t,r),A8(n.remoteStore,new rf(ec(xm(t.path)),r,"TargetPurposeLimboResolution",mm.le))}}async function O1(n,e,t){const r=nn(n),i=[],a=[],o=[];r.hu.isEmpty()||(r.hu.forEach((s,c)=>{o.push(r.fu(c,e,t).then(f=>{var d;if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){i.push(f);const p=zx.Rs(c.targetId,f);a.push(p)}}))}),await Promise.all(o),r.lu.Y_(i),await async function(c,f){const d=nn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>rt.forEach(f,g=>rt.forEach(g.ds,m=>d.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>rt.forEach(g.As,m=>d.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Bh(p))throw p;St(Ux,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const m=d.xs.get(g),x=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(x);d.xs=d.xs.insert(g,_)}}}(r.localStore,a))}async function Tk(n,e){const t=nn(n);if(!t.currentUser.isEqual(e)){St(Zx,"User change. New user:",e.toKey());const r=await x8(t.localStore,e);t.currentUser=e,function(a,o){a.Ru.forEach(s=>{s.forEach(c=>{c.reject(new Et(nt.CANCELLED,o))})}),a.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await O1(t,r.ks)}}function Rk(n,e){const t=nn(n),r=t.Eu.get(e);if(r&&r.cu)return En().add(r.key);{let i=En();const a=t.Pu.get(e);if(!a)return i;for(const o of a){const s=t.hu.get(o);i=i.unionWith(s.view.eu)}return i}}function M8(n){const e=nn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=O8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sk.bind(null,e),e.lu.Y_=dk.bind(null,e.eventManager),e.lu.gu=hk.bind(null,e.eventManager),e}function Nk(n){const e=nn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ck.bind(null,e),e}class zg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Em(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return PO(this.persistence,new DO,e.initialUser,this.serializer)}Su(e){return new y8(Fx.fi,this.serializer)}bu(e){return new UO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zg.provider={build:()=>new zg};class Dk extends zg{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){rr(this.persistence.referenceDelegate instanceof Bg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mO(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?vo.withCacheSize(this.cacheSizeBytes):vo.DEFAULT;return new y8(r=>Bg.fi(r,t),this.serializer)}}class Iy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>f_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tk.bind(null,this.syncEngine),await ck(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fk}()}createDatastore(e){const t=Em(e.databaseInfo.databaseId),r=function(a){return new GO(a)}(e.databaseInfo);return function(a,o,s,c){return new KO(a,o,s,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new ZO(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>f_(this.syncEngine,t,0),function(){return a_.C()?new a_:new VO}())}createSyncEngine(e,t){return function(i,a,o,s,c,f,d){const p=new vk(i,a,o,s,c,f);return d&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=nn(i);St(hd,"RemoteStore shutting down."),a.da.add(5),await D1(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Iy.provider={build:()=>new Iy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Jc("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="FirestoreClient";class Ok{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ma.UNAUTHENTICATED,this.clientId=D6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{St(xf,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(St(xf,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=$x(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sv(n,e){n.asyncQueue.verifyOperationInProgress(),St(xf,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await x8(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function h_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await kk(n);St(xf,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>s_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>s_(e.remoteStore,i)),n._onlineComponents=e}async function kk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){St(xf,"Using user provided OfflineComponentProvider");try{await Sv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===nt.FAILED_PRECONDITION||i.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ah("Error using user provided cache. Falling back to memory cache: "+t),await Sv(n,new zg)}}else St(xf,"Using default OfflineComponentProvider"),await Sv(n,new Dk(void 0));return n._offlineComponents}async function j8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(St(xf,"Using user provided OnlineComponentProvider"),await h_(n,n._uninitializedComponentsProvider._online)):(St(xf,"Using default OnlineComponentProvider"),await h_(n,new Iy))),n._onlineComponents}function Pk(n){return j8(n).then(e=>e.syncEngine)}async function Ug(n){const e=await j8(n),t=e.eventManager;return t.onListen=yk.bind(null,e.syncEngine),t.onUnlisten=wk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_k.bind(null,e.syncEngine),t}function Lk(n,e,t={}){const r=new Xc;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,c,f){const d=new e5({next:g=>{d.xu(),o.enqueueAndForget(()=>Xx(a,p));const m=g.docs.has(s);!m&&g.fromCache?f.reject(new Et(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?f.reject(new Et(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new Qx(xm(s.path),d,{includeMetadataChanges:!0,Qa:!0});return Yx(a,p)}(await Ug(n),n.asyncQueue,e,t,r)),r.promise}function Mk(n,e,t={}){const r=new Xc;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,c,f){const d=new e5({next:g=>{d.xu(),o.enqueueAndForget(()=>Xx(a,p)),g.fromCache&&c.source==="server"?f.reject(new Et(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new Qx(s,d,{includeMetadataChanges:!0,Qa:!0});return Yx(a,p)}(await Ug(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(n,e,t){if(!t)throw new Et(nt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jk(n,e,t,r){if(e===!0&&r===!0)throw new Et(nt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function g_(n){if(!Mt.isDocumentKey(n))throw new Et(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function m_(n){if(Mt.isDocumentKey(n))throw new Et(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Yt(12329,{type:typeof n})}function _o(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Et(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tm(n);throw new Et(nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8="firestore.googleapis.com",v_=!0;class y_{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Et(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z8,this.ssl=v_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:v_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=v8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pO)throw new Et(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B8((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Et(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Et(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Et(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Et(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HN;switch(r.type){case"firstParty":return new YN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=p_.get(t);r&&(St("ComponentProvider","Removing Datastore"),p_.delete(t),r.terminate())}(this),Promise.resolve()}}function Bk(n,e,t,r={}){var i;n=_o(n,Rm);const a=Ph(e),o=n._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(gx(`https://${c}`),mx("Firestore",!0)),o.host!==z8&&o.host!==c&&Ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},o),{host:c,ssl:a,emulatorOptions:r});if(!hf(f,s)&&(n._setSettings(f),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Ma.MOCK_USER;else{d=DA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Et(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ma(g)}n._authCredentials=new WN(new R6(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new If(this.firestore,e,this._query)}}class Fa{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fa(this.firestore,e,this._key)}}class cf extends If{constructor(e,t,r){super(e,t,xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fa(this.firestore,null,new Mt(e))}withConverter(e){return new cf(this.firestore,e,this._path)}}function tn(n,e,...t){if(n=Wr(n),F8("collection","path",e),n instanceof Rm){const r=Nr.fromString(e,...t);return m_(r),new cf(n,null,r)}{if(!(n instanceof Fa||n instanceof cf))throw new Et(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Nr.fromString(e,...t));return m_(r),new cf(n.firestore,null,r)}}function Yn(n,e,...t){if(n=Wr(n),arguments.length===1&&(e=D6.newId()),F8("doc","path",e),n instanceof Rm){const r=Nr.fromString(e,...t);return g_(r),new Fa(n,null,new Mt(r))}{if(!(n instanceof Fa||n instanceof cf))throw new Et(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Nr.fromString(e,...t));return g_(r),new Fa(n.firestore,n instanceof cf?n.converter:null,new Mt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="AsyncQueue";class b_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new w8(this,"async_queue_retry"),this.rc=()=>{const r=Av();r&&St(x_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=Av();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Av();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Xc;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Bh(e))throw e;St(x_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Jc("INTERNAL UNHANDLED ERROR: ",w_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=Gx.createAndSchedule(this,e,t,r,a=>this.uc(a));return this.Zu.push(i),i}oc(){this.Xu&&Yt(47125,{cc:w_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function w_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class tu extends Rm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new b_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b_(e),this._firestoreClient=void 0,await e}}}function Fk(n,e){const t=typeof n=="object"?n:dm(),r=typeof n=="string"?n:kg,i=Af(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=TA("firestore");a&&Bk(i,...a)}return i}function Nm(n){if(n._terminated)throw new Et(nt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zk(n),n._firestoreClient}function zk(n){var e,t,r;const i=n._freezeSettings(),a=function(s,c,f,d){return new cD(s,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,B8(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Ok(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const c=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rh(ga.fromBase64String(e))}catch(t){throw new Et(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rh(ga.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Et(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ha(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return dn(this._lat,e._lat)||dn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=/^__.*__$/;class Vk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Cf(e,this.data,this.fieldMask,t,this.fieldTransforms):new R1(e,this.data,t,this.fieldTransforms)}}class U8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function V8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt(40011,{Ic:n})}}class r5{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new r5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Vg(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(V8(this.Ic)&&Uk.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class qk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Em(e)}bc(e,t,r,i=!1){return new r5({Ic:e,methodName:t,wc:r,path:ha.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function km(n){const e=n._freezeSettings(),t=Em(n._databaseId);return new qk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function q8(n,e,t,r,i,a={}){const o=n.bc(a.merge||a.mergeFields?2:0,e,t,i);a5("Data must be an object, but it was:",o,r);const s=H8(r,o);let c,f;if(a.merge)c=new Xo(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const g=Ty(e,p,t);if(!o.contains(g))throw new Et(nt.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);G8(d,g)||d.push(g)}c=new Xo(d),f=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,f=o.fieldTransforms;return new Vk(new xo(s),c,f)}class Pm extends Om{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pm}}class i5 extends Om{_toFieldTransform(e){return new LD(e.path,new d1)}isEqual(e){return e instanceof i5}}function Hk(n,e,t,r){const i=n.bc(1,e,t);a5("Data must be an object, but it was:",i,r);const a=[],o=xo.empty();Ef(r,(c,f)=>{const d=o5(e,c,t);f=Wr(f);const p=i.mc(d);if(f instanceof Pm)a.push(d);else{const g=k1(f,p);g!=null&&(a.push(d),o.set(d,g))}});const s=new Xo(a);return new U8(o,s,i.fieldTransforms)}function Wk(n,e,t,r,i,a){const o=n.bc(1,e,t),s=[Ty(e,r,t)],c=[i];if(a.length%2!=0)throw new Et(nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)s.push(Ty(e,a[g])),c.push(a[g+1]);const f=[],d=xo.empty();for(let g=s.length-1;g>=0;--g)if(!G8(f,s[g])){const m=s[g];let x=c[g];x=Wr(x);const _=o.mc(m);if(x instanceof Pm)f.push(m);else{const T=k1(x,_);T!=null&&(f.push(m),d.set(m,T))}}const p=new Xo(f);return new U8(d,p,o.fieldTransforms)}function Gk(n,e,t,r=!1){return k1(t,n.bc(r?4:3,e))}function k1(n,e){if(W8(n=Wr(n)))return a5("Unsupported field value:",e,n),H8(n,e);if(n instanceof Om)return function(r,i){if(!V8(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let c=k1(s,i.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=Wr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gi.fromDate(r);return{timestampValue:jg(i.serializer,a)}}if(r instanceof gi){const a=new gi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jg(i.serializer,a)}}if(r instanceof t5)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rh)return{bytesValue:u8(i.serializer,r._byteString)};if(r instanceof Fa){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:jx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof n5)return function(o,s){return{mapValue:{fields:{[F6]:{stringValue:z6},[Pg]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw s.gc("VectorValues must only contain numeric values.");return kx(s.serializer,f)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Tm(r)}`)}(n,e)}function H8(n,e){const t={};return k6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ef(n,(r,i)=>{const a=k1(i,e.Ac(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function W8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gi||n instanceof t5||n instanceof Rh||n instanceof Fa||n instanceof Om||n instanceof n5)}function a5(n,e,t){if(!W8(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Tm(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function Ty(n,e,t){if((e=Wr(e))instanceof Dm)return e._internalPath;if(typeof e=="string")return o5(n,e);throw Vg("Field path arguments must be of type string or ",n,!1,void 0,t)}const $k=new RegExp("[~\\*/\\[\\]]");function o5(n,e,t){if(e.search($k)>=0)throw Vg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dm(...e.split("."))._internalPath}catch{throw Vg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vg(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Et(nt.INVALID_ARGUMENT,s+n+c)}function G8(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Fa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Yk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Yk extends $8{data(){return super.data()}}function Lm(n,e){return typeof e=="string"?o5(n,e):e instanceof Dm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Et(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s5{}class X8 extends s5{}function ul(n,e,...t){let r=[];e instanceof s5&&r.push(e),r=r.concat(t),function(a){const o=a.filter(c=>c instanceof l5).length,s=a.filter(c=>c instanceof Mm).length;if(o>1||o>0&&s>0)throw new Et(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Mm extends X8{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mm(e,t,r)}_apply(e){const t=this._parse(e);return Q8(e._query,t),new If(e.firestore,e.converter,vy(e._query,t))}_parse(e){const t=km(e.firestore);return function(a,o,s,c,f,d,p){let g;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Et(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){S_(p,d);const x=[];for(const _ of p)x.push(A_(c,a,_));g={arrayValue:{values:x}}}else g=A_(c,a,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||S_(p,d),g=Gk(s,o,p,d==="in"||d==="not-in");return Si.create(f,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nu(n,e,t){const r=e,i=Lm("where",n);return Mm._create(i,r,t)}class l5 extends s5{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new l5(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:hl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const c of s)Q8(o,c),o=vy(o,c)}(e._query,t),new If(e.firestore,e.converter,vy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class c5 extends X8{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new c5(e,t)}_apply(e){const t=function(i,a,o){if(i.startAt!==null)throw new Et(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Et(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new f1(a,o)}(e._query,this._field,this._direction);return new If(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Fh(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function K8(n,e="asc"){const t=e,r=Lm("orderBy",n);return c5._create(r,t)}function A_(n,e,t){if(typeof(t=Wr(t))=="string"){if(t==="")throw new Et(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y6(e)&&t.indexOf("/")!==-1)throw new Et(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Nr.fromString(t));if(!Mt.isDocumentKey(r))throw new Et(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return j3(n,new Mt(r))}if(t instanceof Fa)return j3(n,t._key);throw new Et(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tm(t)}.`)}function S_(n,e){if(!Array.isArray(n)||n.length===0)throw new Et(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Q8(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Et(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Et(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Xk{convertValue(e,t="none"){switch(vf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Yt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ef(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Pg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>fi(o.doubleValue));return new n5(a)}convertGeoPoint(e){return new t5(fi(e.latitude),fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ym(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(l1(e));default:return null}}convertTimestamp(e){const t=gf(e);return new gi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Nr.fromString(e);rr(m8(r),9688,{name:e});const i=new c1(r.get(1),r.get(3)),a=new Mt(r.popFirst(5));return i.isEqual(t)||Jc(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class J8 extends $8{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hg extends J8{data(e={}){return super.data(e)}}class eS{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new q0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hg(this._firestore,this._userDataWriter,r.key,r,new q0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const c=new hg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new q0(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const c=new hg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new q0(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return s.type!==0&&(f=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),d=o.indexOf(s.doc.key)),{type:Kk(s.type),doc:c,oldIndex:f,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(n){n=_o(n,Fa);const e=_o(n.firestore,tu);return Lk(Nm(e),n._key).then(t=>tS(e,n,t))}class u5 extends Xk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fa(this.firestore,null,t)}}function $n(n){n=_o(n,If);const e=_o(n.firestore,tu),t=Nm(e),r=new u5(e);return Y8(n._query),Mk(t,n._query).then(i=>new eS(e,r,n,i))}function f5(n,e,t){n=_o(n,Fa);const r=_o(n.firestore,tu),i=Z8(n.converter,e);return jm(r,[q8(km(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,As.none())])}function Bi(n,e,t,...r){n=_o(n,Fa);const i=_o(n.firestore,tu),a=km(i);let o;return o=typeof(e=Wr(e))=="string"||e instanceof Dm?Wk(a,"updateDoc",n._key,e,t,r):Hk(a,"updateDoc",n._key,e),jm(i,[o.toMutation(n._key,As.exists(!0))])}function Uh(n){return jm(_o(n.firestore,tu),[new Px(n._key,As.none())])}function pd(n,e){const t=_o(n.firestore,tu),r=Yn(n),i=Z8(n.converter,e);return jm(t,[q8(km(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,As.exists(!1))]).then(()=>r)}function P1(n,...e){var t,r,i;n=Wr(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||__(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(__(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,f,d;if(n instanceof Fa)f=_o(n.firestore,tu),d=xm(n._key.path),c={next:p=>{e[o]&&e[o](tS(f,n,p))},error:e[o+1],complete:e[o+2]};else{const p=_o(n,If);f=_o(p.firestore,tu),d=p._query;const g=new u5(f);c={next:m=>{e[o]&&e[o](new eS(f,g,p,m))},error:e[o+1],complete:e[o+2]},Y8(n._query)}return function(g,m,x,_){const T=new e5(_),A=new Qx(m,T,x);return g.asyncQueue.enqueueAndForget(async()=>Yx(await Ug(g),A)),()=>{T.xu(),g.asyncQueue.enqueueAndForget(async()=>Xx(await Ug(g),A))}}(Nm(f),d,s,c)}function jm(n,e){return function(r,i){const a=new Xc;return r.asyncQueue.enqueueAndForget(async()=>Ak(await Pk(r),i,a)),a.promise}(Nm(n),e)}function tS(n,e,t){const r=t.docs.get(e._key),i=new u5(n);return new J8(n,i,e._key,r,new q0(t.hasPendingWrites,t.fromCache),e.converter)}function _r(){return new i5("serverTimestamp")}(function(e,t=!0){(function(i){Mh=i})(xd),fl(new Cs("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new tu(new GN(r.getProvider("auth-internal")),new XN(o,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Et(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new c1(f.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),wo(E3,C3,e),wo(E3,C3,"esm2017")})();var Qk="firebase",Zk="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo(Qk,Zk,"app");const nS="@firebase/installations",d5="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=1e4,iS=`w:${d5}`,aS="FIS_v2",Jk="https://firebaseinstallations.googleapis.com/v1",eP=60*60*1e3,tP="installations",nP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},gd=new yd(tP,nP,rP);function oS(n){return n instanceof Is&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS({projectId:n}){return`${Jk}/projects/${n}/installations`}function lS(n){return{token:n.token,requestStatus:2,expiresIn:aP(n.expiresIn),creationTime:Date.now()}}async function cS(n,e){const r=(await e.json()).error;return gd.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function iP(n,{refreshToken:e}){const t=uS(n);return t.append("Authorization",oP(e)),t}async function fS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function aP(n){return Number(n.replace("s","000"))}function oP(n){return`${aS} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=sS(n),i=uS(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={fid:t,authVersion:aS,appId:n.appId,sdkVersion:iS},s={method:"POST",headers:i,body:JSON.stringify(o)},c=await fS(()=>fetch(r,s));if(c.ok){const f=await c.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:lS(f.authToken)}}else throw await cS("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=/^[cdef][\w-]{21}$/,Ry="";function uP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=fP(n);return cP.test(t)?t:Ry}catch{return Ry}}function fP(n){return lP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new Map;function pS(n,e){const t=Bm(n);gS(t,e),dP(t,e)}function gS(n,e){const t=hS.get(n);if(t)for(const r of t)r(e)}function dP(n,e){const t=hP();t&&t.postMessage({key:n,fid:e}),pP()}let rd=null;function hP(){return!rd&&"BroadcastChannel"in self&&(rd=new BroadcastChannel("[Firebase] FID Change"),rd.onmessage=n=>{gS(n.data.key,n.data.fid)}),rd}function pP(){hS.size===0&&rd&&(rd.close(),rd=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="firebase-installations-database",mP=1,md="firebase-installations-store";let Ev=null;function h5(){return Ev||(Ev=jA(gP,mP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(md)}}})),Ev}async function qg(n,e){const t=Bm(n),i=(await h5()).transaction(md,"readwrite"),a=i.objectStore(md),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&pS(n,e.fid),e}async function mS(n){const e=Bm(n),r=(await h5()).transaction(md,"readwrite");await r.objectStore(md).delete(e),await r.done}async function Fm(n,e){const t=Bm(n),i=(await h5()).transaction(md,"readwrite"),a=i.objectStore(md),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&pS(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(n){let e;const t=await Fm(n.appConfig,r=>{const i=vP(r),a=yP(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===Ry?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function vP(n){const e=n||{fid:uP(),registrationStatus:0};return vS(e)}function yP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(gd.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=xP(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:bP(n)}:{installationEntry:e}}async function xP(n,e){try{const t=await sP(n,e);return qg(n.appConfig,t)}catch(t){throw oS(t)&&t.customData.serverCode===409?await mS(n.appConfig):await qg(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function bP(n){let e=await E_(n.appConfig);for(;e.registrationStatus===1;)await dS(100),e=await E_(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await p5(n);return r||t}return e}function E_(n){return Fm(n,e=>{if(!e)throw gd.create("installation-not-found");return vS(e)})}function vS(n){return wP(n)?{fid:n.fid,registrationStatus:0}:n}function wP(n){return n.registrationStatus===1&&n.registrationTime+rS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P({appConfig:n,heartbeatServiceProvider:e},t){const r=AP(n,t),i=iP(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={installation:{sdkVersion:iS,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},c=await fS(()=>fetch(r,s));if(c.ok){const f=await c.json();return lS(f)}else throw await cS("Generate Auth Token",c)}function AP(n,{fid:e}){return`${sS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(n,e=!1){let t;const r=await Fm(n.appConfig,a=>{if(!yS(a))throw gd.create("not-registered");const o=a.authToken;if(!e&&CP(o))return a;if(o.requestStatus===1)return t=SP(n,e),a;{if(!navigator.onLine)throw gd.create("app-offline");const s=TP(a);return t=EP(n,s),s}});return t?await t:r.authToken}async function SP(n,e){let t=await C_(n.appConfig);for(;t.authToken.requestStatus===1;)await dS(100),t=await C_(n.appConfig);const r=t.authToken;return r.requestStatus===0?g5(n,e):r}function C_(n){return Fm(n,e=>{if(!yS(e))throw gd.create("not-registered");const t=e.authToken;return RP(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function EP(n,e){try{const t=await _P(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await qg(n.appConfig,r),t}catch(t){if(oS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await mS(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await qg(n.appConfig,r)}throw t}}function yS(n){return n!==void 0&&n.registrationStatus===2}function CP(n){return n.requestStatus===2&&!IP(n)}function IP(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+eP}function TP(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function RP(n){return n.requestStatus===1&&n.requestTime+rS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(n){const e=n,{installationEntry:t,registrationPromise:r}=await p5(e);return r?r.catch(console.error):g5(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e=!1){const t=n;return await OP(t),(await g5(t,e)).token}async function OP(n){const{registrationPromise:e}=await p5(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n){if(!n||!n.options)throw Cv("App Configuration");if(!n.name)throw Cv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Cv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Cv(n){return gd.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="installations",PP="installations-internal",LP=n=>{const e=n.getProvider("app").getImmediate(),t=kP(e),r=Af(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},MP=n=>{const e=n.getProvider("app").getImmediate(),t=Af(e,xS).getImmediate();return{getId:()=>NP(t),getToken:i=>DP(t,i)}};function jP(){fl(new Cs(xS,LP,"PUBLIC")),fl(new Cs(PP,MP,"PRIVATE"))}jP();wo(nS,d5);wo(nS,d5,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="analytics",BP="firebase_id",FP="origin",zP=60*1e3,UP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",m5="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new fm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qo=new yd("analytics","Analytics",VP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(n){if(!n.startsWith(m5)){const e=Qo.create("invalid-gtag-resource",{gtagURL:n});return Ao.warn(e.message),""}return n}function bS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function HP(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function WP(n,e){const t=HP("firebase-js-sdk-policy",{createScriptURL:qP}),r=document.createElement("script"),i=`${m5}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function GP(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function $P(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const c=(await bS(t)).find(f=>f.measurementId===i);c&&await e[c.appId]}}catch(s){Ao.error(s)}n("config",i,a)}async function YP(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await bS(t);for(const c of o){const f=s.find(p=>p.measurementId===c),d=f&&e[f.appId];if(d)a.push(d);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){Ao.error(a)}}function XP(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,c]=o;await YP(n,e,t,s,c)}else if(a==="config"){const[s,c]=o;await $P(n,e,t,r,s,c)}else if(a==="consent"){const[s,c]=o;n("consent",s,c)}else if(a==="get"){const[s,c,f]=o;n("get",s,c,f)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){Ao.error(s)}}return i}function KP(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=XP(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function QP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(m5)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=30,JP=1e3;class eL{constructor(e={},t=JP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wS=new eL;function tL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function nL(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:tL(r)},a=UP.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(s=c.error.message)}catch{}throw Qo.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function rL(n,e=wS,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Qo.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Qo.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new oL;return setTimeout(async()=>{s.abort()},zP),_S({appId:r,apiKey:i,measurementId:a},o,s,e)}async function _S(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=wS){var a;const{appId:o,measurementId:s}=n;try{await iL(r,e)}catch(c){if(s)return Ao.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:s};throw c}try{const c=await nL(n);return i.deleteThrottleMetadata(o),c}catch(c){const f=c;if(!aL(f)){if(i.deleteThrottleMetadata(o),s)return Ao.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:s};throw c}const d=Number((a=f==null?void 0:f.customData)===null||a===void 0?void 0:a.httpStatus)===503?Kw(t,i.intervalMillis,ZP):Kw(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return i.setThrottleMetadata(o,p),Ao.debug(`Calling attemptFetch again in ${d} millis`),_S(n,p,r,i)}}function iL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Qo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function aL(n){if(!(n instanceof Is)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class oL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function sL(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(){if(kA())try{await PA()}catch(n){return Ao.warn(Qo.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Ao.warn(Qo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cL(n,e,t,r,i,a,o){var s;const c=rL(n);c.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Ao.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ao.error(m)),e.push(c);const f=lL().then(m=>{if(m)return r.getId()}),[d,p]=await Promise.all([c,f]);QP(a)||WP(a,d.measurementId),i("js",new Date);const g=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return g[FP]="firebase",g.update=!0,p!=null&&(g[BP]=p),i("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.app=e}_delete(){return delete e1[this.app.options.appId],Promise.resolve()}}let e1={},I_=[];const T_={};let Iv="dataLayer",fL="gtag",R_,AS,N_=!1;function dL(){const n=[];if(OA()&&n.push("This is a browser extension environment."),o7()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Qo.create("invalid-analytics-context",{errorInfo:e});Ao.warn(t.message)}}function hL(n,e,t){dL();const r=n.options.appId;if(!r)throw Qo.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ao.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qo.create("no-api-key");if(e1[r]!=null)throw Qo.create("already-exists",{id:r});if(!N_){GP(Iv);const{wrappedGtag:a,gtagCore:o}=KP(e1,I_,T_,Iv,fL);AS=a,R_=o,N_=!0}return e1[r]=cL(n,I_,T_,e,R_,Iv,t),new uL(n)}function pL(n=dm()){n=Wr(n);const e=Af(n,Hg);return e.isInitialized()?e.getImmediate():gL(n)}function gL(n,e={}){const t=Af(n,Hg);if(t.isInitialized()){const i=t.getImmediate();if(hf(e,t.getOptions()))return i;throw Qo.create("already-initialized")}return t.initialize({options:e})}function mL(n,e,t,r){n=Wr(n),sL(AS,e1[n.app.options.appId],e,t,r).catch(i=>Ao.error(i))}const D_="@firebase/analytics",O_="0.10.16";function vL(){fl(new Cs(Hg,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return hL(r,i,t)},"PUBLIC")),fl(new Cs("analytics-internal",n,"PRIVATE")),wo(D_,O_),wo(D_,O_,"esm2017");function n(e){try{const t=e.getProvider(Hg).getImmediate();return{logEvent:(r,i,a)=>mL(t,r,i,a)}}catch(t){throw Qo.create("interop-component-reg-failed",{reason:t})}}}vL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firebasestorage.googleapis.com",yL="storageBucket",xL=2*60*1e3,bL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends Is{constructor(e,t,r=0){super(Tv(e),`Firebase Storage: ${t} (${Tv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lc.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ac;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ac||(ac={}));function Tv(n){return"storage/"+n}function wL(){const n="An unknown error occurred, please check the error payload for server response.";return new lc(ac.UNKNOWN,n)}function _L(){return new lc(ac.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AL(){return new lc(ac.CANCELED,"User canceled the upload/download.")}function SL(n){return new lc(ac.INVALID_URL,"Invalid URL '"+n+"'.")}function EL(n){return new lc(ac.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function k_(n){return new lc(ac.INVALID_ARGUMENT,n)}function ES(){return new lc(ac.APP_DELETED,"The Firebase app was deleted.")}function CL(n){return new lc(ac.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=cl.makeFromUrl(e,t)}catch{return new cl(e,"")}if(r.path==="")return r;throw EL(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const d="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),x={bucket:1,path:3},_=t===SS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",A=new RegExp(`^https?://${_}/${i}/${T}`,"i"),U=[{regex:s,indices:c,postModify:a},{regex:m,indices:x,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<U.length;H++){const X=U[H],q=X.regex.exec(e);if(q){const j=q[X.indices.bucket];let C=q[X.indices.path];C||(C=""),r=new cl(j,C),X.postModify(r);break}}if(r==null)throw SL(e);return r}}class IL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(n,e,t){let r=1,i=null,a=null,o=!1,s=0;function c(){return s===2}let f=!1;function d(...T){f||(f=!0,e.apply(null,T))}function p(T){i=setTimeout(()=>{i=null,n(m,c())},T)}function g(){a&&clearTimeout(a)}function m(T,...A){if(f){g();return}if(T){g(),d.call(null,T,...A);return}if(c()||o){g(),d.call(null,T,...A);return}r<64&&(r*=2);let U;s===1?(s=2,U=0):U=(r+Math.random())*1e3,p(U)}let x=!1;function _(T){x||(x=!0,g(),!f&&(i!==null?(T||(s=2),clearTimeout(i),p(0)):T||(s=1)))}return p(0),a=setTimeout(()=>{o=!0,_(!0)},t),_}function RL(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(n){return n!==void 0}function P_(n,e,t,r){if(r<e)throw k_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw k_(`Invalid value for '${n}'. Expected ${t} or less.`)}function DL(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Wg;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Wg||(Wg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,t,r,i,a,o,s,c,f,d,p,g=!0,m=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,_)=>{this.resolve_=x,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Gp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const c=s.loaded,f=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===Wg.NO_ERROR,c=a.getStatus();if(!s||OL(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Wg.ABORT;r(!1,new Gp(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Gp(f,a))})},t=(r,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(s,s.getResponse());NL(c)?a(c):a()}catch(c){o(c)}else if(s!==null){const c=wL();c.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,c)):o(c)}else if(i.canceled){const c=this.appDelete_?ES():AL();o(c)}else{const c=_L();o(c)}};this.canceled_?t(!1,new Gp(!1,null,!0)):this.backoffId_=TL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gp{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function PL(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function LL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ML(n,e){e&&(n["X-Firebase-GMPID"]=e)}function jL(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function BL(n,e,t,r,i,a,o=!0,s=!1){const c=DL(n.urlParams),f=n.url+c,d=Object.assign({},n.headers);return ML(d,e),PL(d,t),LL(d,a),jL(d,r),new kL(f,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function zL(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t){this._service=e,t instanceof cl?this._location=t:this._location=cl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gg(e,t)}get root(){const e=new cl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zL(this._location.path)}get storage(){return this._service}get parent(){const e=FL(this._location.path);if(e===null)return null;const t=new cl(this._location.bucket,e);return new Gg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw CL(e)}}function L_(n,e){const t=e==null?void 0:e[yL];return t==null?null:cl.makeFromBucketSpec(t,n)}function UL(n,e,t,r={}){n.host=`${e}:${t}`;const i=Ph(e);i&&(gx(`https://${n.host}`),mx("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:DA(a,n.app.options.projectId))}class VL{constructor(e,t,r,i,a,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=SS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xL,this._maxUploadRetryTime=bL,this._requests=new Set,i!=null?this._bucket=cl.makeFromBucketSpec(i,this._host):this._bucket=L_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cl.makeFromBucketSpec(this._url,e):this._bucket=L_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Yo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new IL(ES());{const o=BL(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const M_="@firebase/storage",j_="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="storage";function qL(n=dm(),e){n=Wr(n);const r=Af(n,CS).getImmediate({identifier:e}),i=TA("storage");return i&&HL(r,...i),r}function HL(n,e,t,r={}){UL(n,e,t,r)}function WL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new VL(t,r,i,e,xd)}function GL(){fl(new Cs(CS,WL,"PUBLIC").setMultipleInstances(!0)),wo(M_,j_,""),wo(M_,j_,"esm2017")}GL();const $L={apiKey:"AIzaSyD2okbjcvN3V4Qpd4deo59qZZNNRBIWX58",authDomain:"gmach-inventory-system.firebaseapp.com",projectId:"gmach-inventory-system",storageBucket:"gmach-inventory-system.appspot.com",messagingSenderId:"687472851540",appId:"1:687472851540:web:f846506cccaaefc1e74bc1",measurementId:"G-ZM8S3K7E2V"},zm=BA($L);pL(zm);const g1=VN(zm),_t=Fk(zm);qL(zm);const IS=ue.createContext(),TS=({children:n})=>{const[e,t]=ue.useState(null),[r,i]=ue.useState(!0);return ue.useEffect(()=>{const a=N9(g1,async s=>{if(s&&s.emailVerified){const c=await Nh(Yn(_t,"users",s.uid));if(c.exists()){const f=c.data();t({uid:s.uid,email:s.email,username:f.username,role:f.role})}}else t(null)});return(async()=>{const s=await Nh(Yn(_t,"settings","onlineOrdering"));if(s.exists()){const c=s.data();i(c.enabled===!0)}})(),()=>a()},[]),v.jsx(IS.Provider,{value:{user:e,setUser:t,onlineOrderingEnabled:r,setOnlineOrderingEnabled:i},children:n})},So=()=>ue.useContext(IS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),B_=n=>{const e=XL(n);return e.charAt(0).toUpperCase()+e.slice(1)},RS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),KL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=ue.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},c)=>ue.createElement("svg",{ref:c,...QL,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:RS("lucide",i),...!a&&!KL(s)&&{"aria-hidden":"true"},...s},[...o.map(([f,d])=>ue.createElement(f,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=(n,e)=>{const t=ue.forwardRef(({className:r,...i},a)=>ue.createElement(ZL,{ref:a,iconNode:e,className:RS(`lucide-${YL(B_(n))}`,`lucide-${n}`,r),...i}));return t.displayName=B_(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],eM=hn("arrow-right",JL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],nM=hn("ban",tM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],iM=hn("banknote",rM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uf=hn("bell",aM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ru=hn("calendar",oM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],lM=hn("car",sM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],uM=hn("chart-column",cM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],NS=hn("check",fM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],L1=hn("chevron-left",dM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],M1=hn("chevron-right",hM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gM=hn("circle-alert",pM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bf=hn("circle-check-big",mM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],j1=hn("circle-x",vM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],F_=hn("clipboard-check",yM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Um=hn("clock",xM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wM=hn("copy",bM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],AM=hn("download",_M);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],v5=hn("ellipsis",SM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],CM=hn("eye-off",EM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vm=hn("eye",IM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],RM=hn("info",TM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],DM=hn("mail",NM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],DS=hn("map-pin",OM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],PM=hn("map",kM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],MM=hn("message-circle",LM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],BM=hn("minimize-2",jM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M5 12h14",key:"1ays0h"}]],zM=hn("minus",FM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],VM=hn("navigation",UM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ss=hn("package",qM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],od=hn("phone",HM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],OS=hn("plus",WM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qm=hn("save",GM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kS=hn("search",$M);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],XM=hn("smartphone",YM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],y5=hn("square-pen",KM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],x5=hn("trash-2",QM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PS=hn("triangle-alert",ZM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],LS=hn("user",JM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uu=hn("x",ej),tj=()=>{const{user:n,setUser:e}=So(),t=lm(),r=su(),[i,a]=ue.useState(!1),[o,s]=ue.useState(null),[c,f]=ue.useState(null),[d,p]=ue.useState(!1);ue.useEffect(()=>{const F=Yn(_t,"settings","onlineOrdering"),z=P1(F,ee=>{ee.exists()&&s(ee.data().enabled)},ee=>{console.error("שגיאה בקבלת עדכונים בזמן אמת:",ee)});return()=>z()},[]),ue.useEffect(()=>{const F=()=>{f(window.innerWidth<=768)};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]);const g=()=>{p(!0)},m=async()=>{try{await D9(g1),e(null),p(!1),t("/login")}catch(F){alert("שגיאה בהתנתקות: "+F.message)}},x=()=>{p(!1)},_=()=>{a(!1)},T=F=>{switch(F){case"MainAdmin":return"מנהל ראשי";case"GmachAdmin":return"מנהל גמח";default:return"משתמש"}},A=F=>r.pathname===F,D=F=>({...q,backgroundColor:A(F)?"#0056b3":"transparent",color:A(F)?"white":"#0056b3",borderRadius:A(F)?"6px":"0",fontWeight:A(F)?"600":"500",transition:"all 0.3s ease"}),U=()=>!n||n.role==="User",H=()=>!n||n.role==="User";if(c===null)return null;const X={backgroundColor:"white",padding:"10px 0",direction:"rtl",borderBottom:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",zIndex:1e3,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},q={padding:"12px 16px",textDecoration:"none",color:"#0056b3",fontWeight:"500",fontSize:"16px",display:"block"},j={position:"absolute",top:"10px",left:c?"20px":"auto",right:c?"auto":"20px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold",color:"#333"},C={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},N={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},L={position:"fixed",top:0,right:i?0:"-70%",height:"100%",width:"70%",backgroundColor:"#ffffff",background:"#ffffff",backgroundImage:"none",boxShadow:"0 0 12px rgba(0,0,0,0.25)",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",transition:"right 0.3s ease",zIndex:1e3},R={display:"flex",justifyContent:"center",gap:"10px",padding:"10px 0"},I={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},P={backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",textAlign:"center",maxWidth:"300px",width:"90%"},M={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"},K={backgroundColor:"#6c757d",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"};return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          .mobile-sidebar-force-white {
            background: white !important;
            background-color: white !important;
            background-image: none !important;
            backdrop-filter: none !important;
          }
        `}),v.jsxs("div",{style:X,children:[c&&v.jsx("button",{onClick:()=>a(!0),style:{fontSize:"24px",background:"none",border:"none",cursor:"pointer",padding:"0 1rem"},children:"☰"}),!c&&v.jsxs("div",{style:R,children:[v.jsx(vn,{to:"/",style:D("/"),children:"דף הבית"}),H()&&v.jsx(vn,{to:"/about",style:D("/about"),children:"אודות"}),v.jsx(vn,{to:"/catalog",style:D("/catalog"),children:"קטלוג מוצרים"}),!n&&v.jsx(vn,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),children:"נוהל השאלה"}),(n==null?void 0:n.role)==="User"&&v.jsxs(v.Fragment,{children:[v.jsx(vn,{to:"/my-orders",style:D("/my-orders"),children:"ההזמנות שלי"}),o&&v.jsx(vn,{to:"/request",style:D("/request"),children:"בקשת השאלה"}),v.jsx(vn,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),children:"נוהל השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&v.jsxs(v.Fragment,{children:[v.jsx(vn,{to:"/new-loan",style:D("/new-loan"),children:"הזמנה חדשה"}),o&&v.jsx(vn,{to:"/requests",style:D("/requests"),children:"בקשות להזמנה"}),v.jsx(vn,{to:"/Calendar",style:D("/Calendar"),children:"השאלות פתוחות"}),v.jsx(vn,{to:"/history",style:D("/history"),children:"היסטוריית השאלות"})]}),(n==null?void 0:n.role)==="MainAdmin"&&v.jsxs(v.Fragment,{children:[v.jsx(vn,{to:"/manage-product",style:D("/manage-product"),children:"ניהול מוצרים"}),v.jsx(vn,{to:"/manage-users",style:D("/manage-users"),children:"ניהול משתמשים"}),v.jsx(vn,{to:"/alerts",style:D("/alerts"),children:"ניהול התראות"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&v.jsx(vn,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),children:"נוהל השאלה"}),U()&&v.jsx(vn,{to:"/donations",style:D("/donations"),children:"לתרומות"}),!n&&v.jsxs(v.Fragment,{children:[v.jsx(vn,{to:"/login",style:{...D("/login"),marginRight:"20px",backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600"},children:"התחברות"}),v.jsx(vn,{to:"/register",style:{...D("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600"},children:"הרשמה"})]})]}),i&&c&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:N,onClick:_}),v.jsxs("div",{style:L,className:"mobile-sidebar-force-white",children:[v.jsx(vn,{to:"/",style:D("/"),onClick:_,children:"דף הבית"}),H()&&v.jsx(vn,{to:"/about",style:D("/about"),onClick:_,children:"אודות"}),v.jsx(vn,{to:"/catalog",style:D("/catalog"),onClick:_,children:"קטלוג מוצרים"}),!n&&v.jsx(vn,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"}),(n==null?void 0:n.role)==="User"&&v.jsxs(v.Fragment,{children:[v.jsx(vn,{to:"/my-orders",style:D("/my-orders"),onClick:_,children:"ההזמנות שלי"}),o&&v.jsx(vn,{to:"/request",style:D("/request"),onClick:_,children:"בקשת השאלה"}),v.jsx(vn,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&v.jsxs(v.Fragment,{children:[v.jsx(vn,{to:"/new-loan",style:D("/new-loan"),onClick:_,children:"הזמנה חדשה"}),o&&v.jsx(vn,{to:"/requests",style:D("/requests"),onClick:_,children:"בקשות להזמנה"}),v.jsx(vn,{to:"/Calendar",style:D("/Calendar"),onClick:_,children:"השאלות פתוחות"}),v.jsx(vn,{to:"/history",style:D("/history"),onClick:_,children:"היסטוריית השאלות"})]}),(n==null?void 0:n.role)==="MainAdmin"&&v.jsxs(v.Fragment,{children:[v.jsx(vn,{to:"/manage-product",style:D("/manage-product"),onClick:_,children:"ניהול מוצרים"}),v.jsx(vn,{to:"/manage-users",style:D("/manage-users"),onClick:_,children:"ניהול משתמשים"}),v.jsx(vn,{to:"/alerts",style:D("/alerts"),onClick:_,children:"ניהול התראות"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&v.jsx(vn,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"}),U()&&v.jsx(vn,{to:"/donations",style:D("/donations"),onClick:_,children:"לתרומות"}),!n&&v.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:[v.jsx(vn,{to:"/login",style:{...D("/login"),backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600",textAlign:"center",marginBottom:"10px"},onClick:_,children:"התחברות"}),v.jsx(vn,{to:"/register",style:{...D("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600",textAlign:"center"},onClick:_,children:"הרשמה"})]})]})]}),n&&v.jsxs("div",{style:j,children:["שלום ",n.username," (",T(n.role),")",v.jsx("button",{style:C,onClick:g,children:"התנתק"})]})]}),d&&v.jsx("div",{style:I,children:v.jsxs("div",{style:P,children:[v.jsx("h3",{style:{marginBottom:"15px",color:"#333"},children:"אישור התנתקות"}),v.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"האם אתה בטוח שברצונך להתנתק?"}),v.jsxs("div",{children:[v.jsx("button",{style:M,onClick:m,children:"כן, התנתק"}),v.jsx("button",{style:K,onClick:x,children:"ביטול"})]})]})})]})},nj="/assets/GmachPic-D1t0vS9u.jpeg",rj=()=>{const{user:n}=So(),[e,t]=ue.useState(!1),[r,i]=ue.useState(!1),[a,o]=ue.useState("phone"),[s,c]=ue.useState("fade-in"),f=ue.useRef(null),d="054-257-5886",p="0542575886",g="054-4473-388",m="0544473388",x="972542575886";if(ue.useEffect(()=>{const q=j=>{f.current&&!f.current.contains(j.target)&&e&&D()};return e&&document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[e]),ue.useEffect(()=>{const q=()=>{e&&D()};return window.addEventListener("hoursBubbleOpened",q),window.addEventListener("navigationBubbleOpened",q),()=>{window.removeEventListener("hoursBubbleOpened",q),window.removeEventListener("navigationBubbleOpened",q)}},[e]),n&&n.role!=="User")return null;const _=()=>{window.open(`tel:${p}`,"_self")},T=()=>{window.open(`tel:${m}`,"_self")},A=()=>{const q=encodeURIComponent("שלום, אני מעוניין לקבל מידע נוסף על השירות"),j=`https://wa.me/${x}?text=${q}`;window.open(j,"_blank")},D=()=>{i(!0),c("fade-out"),setTimeout(()=>{o("phone"),c("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},U=()=>{e?D():(window.dispatchEvent(new CustomEvent("contactBubbleOpened")),t(!0),c("fade-out"),setTimeout(()=>{o("close"),c("fade-in")},150))},H={contactBubble:{position:"fixed",bottom:"160px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},contactBubbleMobile:{position:"fixed",bottom:"160px",right:"20px",left:"auto",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(37, 99, 235, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",fontWeight:"500",fontSize:"14px",overflow:"hidden",position:"relative",minWidth:"56px",minHeight:"56px"},bubbleMainCollapsed:{width:"56px",height:"56px",padding:"0",justifyContent:"center",borderRadius:"50%"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"70px",background:"white",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15)",padding:"16px",minWidth:"260px",border:"1px solid #e5e7eb",animation:"slideUp 0.3s ease"},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s",border:"none",width:"100%",textAlign:"right",background:"none",color:"#374151",fontSize:"14px",marginBottom:"4px"},menuItemPhone:{color:"#2563eb"},menuItemPhone2:{color:"#7c3aed"},menuItemWhatsapp:{color:"#10b981"},menuHeader:{textAlign:"center",marginBottom:"12px",color:"#1f2937",fontWeight:"600",fontSize:"16px"}},X=window.innerWidth<=768;return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            }
          }

          .contact-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .contact-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(37, 99, 235, 0.4);
            background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
          }

          .menu-item-hover:hover {
            background-color: #f3f4f6;
          }
        `}),v.jsxs("div",{ref:f,style:X?H.contactBubbleMobile:H.contactBubble,children:[(e||r)&&v.jsxs("div",{style:{...H.expandedMenu,...r?H.expandedMenuClosing:{}},dir:"rtl",children:[v.jsx("div",{style:H.menuHeader,children:"צור קשר"}),v.jsxs("button",{onClick:_,style:{...H.menuItem,...H.menuItemPhone},className:"menu-item-hover",children:[v.jsx(od,{size:20}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"500"},children:"לתיאום והגעה"}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:d})]})]}),v.jsxs("button",{onClick:T,style:{...H.menuItem,...H.menuItemPhone2},className:"menu-item-hover",children:[v.jsx(od,{size:20}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"500"},children:'למנהלת הגמ"ח'}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:g})]})]}),v.jsxs("button",{onClick:A,style:{...H.menuItem,...H.menuItemWhatsapp},className:"menu-item-hover",children:[v.jsx(MM,{size:20}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"500"},children:"WhatsApp"}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"שלח הודעה מהירה"})]})]})]}),v.jsx("button",{onClick:U,style:{...H.bubbleMain,...e?{}:H.bubbleMainCollapsed},className:`contact-bubble-hover ${e?"":"contact-bubble-pulse"}`,"aria-label":"צור קשר",children:v.jsx("div",{style:{...H.bubbleContent,...s==="fade-out"?H.bubbleContentFadeOut:{}},children:a==="close"?v.jsxs(v.Fragment,{children:[v.jsx(uu,{size:20}),v.jsx("span",{children:"סגור"})," "]}):v.jsx(od,{size:24})})})]})]})},ij=()=>{const{user:n}=So(),[e,t]=ue.useState(!1),[r,i]=ue.useState(!1),[a,o]=ue.useState("clock"),[s,c]=ue.useState("fade-in"),f=ue.useRef(null);ue.useEffect(()=>{const x=_=>{f.current&&!f.current.contains(_.target)&&e&&d()};return e&&document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[e]),ue.useEffect(()=>{const x=()=>{e&&d()};return window.addEventListener("contactBubbleOpened",x),window.addEventListener("navigationBubbleOpened",x),()=>{window.removeEventListener("contactBubbleOpened",x),window.removeEventListener("navigationBubbleOpened",x)}},[e]);const d=()=>{i(!0),c("fade-out"),setTimeout(()=>{o("clock"),c("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},p=()=>{e?d():(window.dispatchEvent(new CustomEvent("hoursBubbleOpened")),t(!0),c("fade-out"),setTimeout(()=>{o("close"),c("fade-in")},150))};if(n&&n.role!=="User")return null;const g={hoursBubble:{position:"fixed",bottom:"20px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(16, 185, 129, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"16px 24px",fontWeight:"600",fontSize:"16px",overflow:"hidden",position:"relative",whiteSpace:"nowrap",minWidth:"160px"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"130px",background:"white",borderRadius:"16px",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.2)",padding:"24px",minWidth:"320px",border:"3px solid #e5e7eb",color:"#1f2937",textAlign:"center",zIndex:901},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuHeader:{textAlign:"center",marginBottom:"16px",color:"#1f2937",fontWeight:"800",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},hoursContent:{lineHeight:"1.7",textAlign:"center"},hoursSection:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},hoursSectionLast:{marginBottom:"0",paddingBottom:"0",borderBottom:"none"},hoursTitle:{fontWeight:"700",color:"#374151",marginBottom:"6px",fontSize:"16px"},hoursDays:{color:"#6b7280",fontSize:"15px",marginBottom:"4px"},hoursTime:{fontWeight:"700",color:"#059669",fontSize:"16px"},hoursTimeDetail:{fontSize:"15px",marginBottom:"4px"}},m=window.innerWidth<=768;return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            }
          }

          .hours-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .hours-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
          }

          .expanded-menu-animation {
            animation: slideUp 0.3s ease;
          }

          @media (max-width: 768px) {
            .hours-bubble-mobile {
              bottom: 20px !important;
              right: 20px !important;
            }
            
            .expanded-menu-hours-mobile {
              width: 300px !important;
              right: 120px !important; /* גם במובייל יותר שמאלה */
              bottom: 65px !important;
              padding: 20px !important;
              border-radius: 12px !important;
              min-width: 280px !important;
            }
            
            .bubble-main-hours-mobile {
              padding: 12px 18px !important;
              font-size: 14px !important;
              min-height: 48px !important;
            }
          }
        `}),v.jsxs("div",{ref:f,style:g.hoursBubble,className:m?"hours-bubble-mobile":"",children:[(e||r)&&v.jsxs("div",{style:{...g.expandedMenu,...r?g.expandedMenuClosing:{}},className:`expanded-menu-animation ${m?"expanded-menu-hours-mobile":""}`,dir:"rtl",children:[v.jsx("div",{style:g.menuHeader,children:"🕐 שעות פתיחה"}),v.jsxs("div",{style:g.hoursContent,children:[v.jsxs("div",{style:{...g.hoursSection},children:[v.jsx("div",{style:g.hoursTitle,children:"ימים רגילים"}),v.jsx("div",{style:g.hoursDays,children:"ראשון, רביעי, חמישי"}),v.jsx("div",{style:g.hoursTime,children:"21:00 - 20:30"})]}),v.jsxs("div",{style:{...g.hoursSection,...g.hoursSectionLast},children:[v.jsx("div",{style:g.hoursTitle,children:"מוצאי שבת"}),v.jsxs("div",{style:g.hoursTimeDetail,children:[v.jsx("span",{style:{fontWeight:"700"},children:"קיץ:"}),v.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"21:30 - 21:00"})]}),v.jsxs("div",{style:g.hoursTimeDetail,children:[v.jsx("span",{style:{fontWeight:"700"},children:"חורף:"}),v.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"20:30 - 20:00"})]})]})]})]}),v.jsx("button",{onClick:p,style:g.bubbleMain,className:`hours-bubble-hover ${m?"bubble-main-hours-mobile":""} ${e?"":"hours-bubble-pulse"}`,"aria-label":"שעות פתיחה",children:v.jsx("div",{style:{...g.bubbleContent,...s==="fade-out"?g.bubbleContentFadeOut:{}},children:a==="close"?v.jsxs(v.Fragment,{children:[v.jsx(uu,{size:20}),e&&v.jsx("span",{children:"סגור"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Um,{size:20}),v.jsx("span",{children:"שעות פתיחה"})]})})})]})]})},aj=()=>{const{user:n}=So(),[e,t]=ue.useState(!1),[r,i]=ue.useState(!1),[a,o]=ue.useState("navigation"),[s,c]=ue.useState("fade-in"),f=ue.useRef(null);ue.useEffect(()=>{const T=A=>{f.current&&!f.current.contains(A.target)&&e&&g()};return e&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[e]),ue.useEffect(()=>{const T=()=>{e&&g()};return window.addEventListener("contactBubbleOpened",T),window.addEventListener("hoursBubbleOpened",T),()=>{window.removeEventListener("contactBubbleOpened",T),window.removeEventListener("navigationBubbleOpened",T)}},[e]);const d=()=>{window.open("https://www.google.com/maps/place/31%C2%B047'20.2%22N+34%C2%B047'59.5%22E/@31.7876206,34.8006596,16.5z/data=!4m4!3m3!8m2!3d31.7889462!4d34.79986?hl=en-US&entry=ttu&g_ep=EgoyMDI1MDYzMC4wIKXMDSoASAFQAw%3D%3D","_blank")},p=()=>{window.open("https://waze.com/ul?ll=31.7889462,34.79986","_blank")},g=()=>{i(!0),c("fade-out"),setTimeout(()=>{o("navigation"),c("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},m=()=>{e?g():(window.dispatchEvent(new CustomEvent("navigationBubbleOpened")),t(!0),c("fade-out"),setTimeout(()=>{o("close"),c("fade-in")},150))};if(n&&n.role!=="User")return null;const x={navigationBubble:{position:"fixed",bottom:"90px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(124, 58, 237, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"16px 24px",fontWeight:"600",fontSize:"16px",overflow:"hidden",position:"relative",whiteSpace:"nowrap",minWidth:"120px"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"70px",background:"white",borderRadius:"16px",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.2)",padding:"16px",minWidth:"260px",border:"3px solid #e5e7eb",color:"#1f2937",zIndex:901},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",border:"none",width:"100%",textAlign:"right",background:"none",color:"white",fontSize:"14px",marginBottom:"8px",fontWeight:"600",textDecoration:"none"},menuItemGoogleMaps:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",boxShadow:"0 6px 20px rgba(59, 130, 246, 0.3)"},menuItemWaze:{background:"linear-gradient(135deg, #f59e0b, #d97706)",boxShadow:"0 6px 20px rgba(245, 158, 11, 0.3)"},locationInfo:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",color:"#374151",padding:"12px 16px",borderRadius:"15px",fontSize:"12px",fontWeight:"600",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.6)",textAlign:"center",marginTop:"8px"}},_=window.innerWidth<=768;return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            }
          }

          .navigation-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .navigation-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(124, 58, 237, 0.4);
            background: linear-gradient(135deg, #6d28d9 0%, #7c3aed 100%);
          }

          .menu-item-google-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
          }

          .menu-item-waze-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
          }

          .expanded-menu-navigation {
            animation: slideUp 0.3s ease;
          }

          @media (max-width: 768px) {
            .navigation-bubble-mobile {
              bottom: 90px !important;
              right: 20px !important;
            }
            
            .expanded-menu-mobile {
              width: 240px !important;
              right: 70px !important;
              bottom: 65px !important;
              padding: 14px !important;
              border-radius: 12px !important;
              min-width: 240px !important;
            }
            
            .bubble-main-mobile {
              padding: 12px 18px !important;
              font-size: 14px !important;
              min-height: 48px !important;
            }
          }
        `}),v.jsxs("div",{ref:f,style:x.navigationBubble,className:_?"navigation-bubble-mobile":"",children:[(e||r)&&v.jsxs("div",{style:{...x.expandedMenu,...r?x.expandedMenuClosing:{}},className:`expanded-menu-navigation ${_?"expanded-menu-mobile":""}`,dir:"rtl",children:[v.jsxs("button",{onClick:d,style:{...x.menuItem,...x.menuItemGoogleMaps},className:"menu-item-google-hover",children:[v.jsx(PM,{size:20}),v.jsx("span",{children:"🗺️ Google Maps"})]}),v.jsxs("button",{onClick:p,style:{...x.menuItem,...x.menuItemWaze},className:"menu-item-waze-hover",children:[v.jsx(lM,{size:20}),v.jsx("span",{children:"🚗 Waze"})]}),v.jsx("div",{style:x.locationInfo,children:v.jsx("strong",{children:"קיבוץ חפץ חיים"})})]}),v.jsx("button",{onClick:m,style:x.bubbleMain,className:`navigation-bubble-hover ${_?"bubble-main-mobile":""} ${e?"":"navigation-bubble-pulse"}`,"aria-label":"ניווט",children:v.jsx("div",{style:{...x.bubbleContent,...s==="fade-out"?x.bubbleContentFadeOut:{}},children:a==="close"?v.jsxs(v.Fragment,{children:[v.jsx(uu,{size:20}),e&&v.jsx("span",{children:"סגור"})]}):v.jsxs(v.Fragment,{children:[v.jsx(VM,{size:20}),v.jsx("span",{children:"ניווט"})]})})})]})]})},oj=()=>{const[n,e]=ue.useState([]),[t,r]=ue.useState(new Set);ue.useEffect(()=>{const c=localStorage.getItem("dismissedAlerts");c&&r(new Set(JSON.parse(c)));const f=ul(tn(_t,"alerts"),K8("createdAt","desc")),d=P1(f,p=>{const g=[];p.docs.forEach(m=>{const x={id:m.id,...m.data()};x.isActive&&g.push(x)}),e(g)});return()=>d()},[]);const i=c=>{const f=new Set([...t,c]);r(f),localStorage.setItem("dismissedAlerts",JSON.stringify([...f]))},a=c=>{switch(c){case"warning":return v.jsx(PS,{size:20});case"success":return v.jsx(bf,{size:20});case"info":return v.jsx(RM,{size:20});default:return v.jsx(uf,{size:20})}},o=c=>{const f={padding:"16px 20px",marginBottom:"8px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",direction:"rtl",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"16px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"};switch(c){case"warning":return{...f,backgroundColor:"#fef3c7",color:"#92400e",border:"2px solid #f59e0b"};case"success":return{...f,backgroundColor:"#d1fae5",color:"#065f46",border:"2px solid #10b981"};case"info":return{...f,backgroundColor:"#dbeafe",color:"#1e40af",border:"2px solid #3b82f6"};default:return{...f,backgroundColor:"#f3f4f6",color:"#374151",border:"2px solid #6b7280"}}},s=n.filter(c=>!t.has(c.id));return s.length===0?null:v.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"8px 16px"},children:s.map(c=>v.jsxs("div",{style:o(c.type),children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[a(c.type),v.jsxs("div",{children:[c.title&&v.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:c.title}),v.jsx("div",{children:c.message})]})]}),v.jsx("button",{onClick:()=>i(c.id),style:{backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",opacity:.7,transition:"opacity 0.2s"},onMouseOver:f=>f.target.style.opacity="1",onMouseOut:f=>f.target.style.opacity="0.7",children:v.jsx(uu,{size:20})})]},c.id))})},sj="/assets/1-C0fYk9e0.jpg",lj="/assets/2-D1YHjbfq.jpg",cj="/assets/3-9zdlhfJf.jpg",uj="/assets/4-BAjrNR16.jpg",fj="/assets/5-CswG83Xw.jpg",dj="/assets/6-ChleApYI.jpg",hj="/assets/7-C0oDsTci.jpg",pj="/assets/9-BFtDqp3_.jpg",gj="/assets/10-Dw-XIxLk.jpg",mj="/assets/11-CA5zm9C5.jpg",vj="/assets/12-CI7MWke0.jpg",yj=()=>{const{user:n}=So(),e=[sj,lj,cj,uj,fj,dj,hj,pj,gj,mj,vj];return v.jsxs(v.Fragment,{children:[v.jsx(oj,{}),v.jsx("div",{style:{minHeight:"100vh",background:"transparent",width:"100%",overflowX:"hidden"},children:v.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"0 0.5rem"},className:"fade-in",children:[v.jsx("div",{style:{marginBottom:"1.5rem"},children:v.jsx("img",{src:nj,alt:"לוגו שמחת זקנתי",style:{margin:"0 auto",height:"clamp(250px, 35vw, 450px)",width:"auto",objectFit:"contain",filter:"drop-shadow(0 15px 35px rgba(0,0,0,0.15))",borderRadius:"20px"}})}),v.jsx("h1",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(28px, 6vw, 52px)",fontWeight:"700",color:"#059669",marginBottom:"1.5rem",textShadow:"0 3px 6px rgba(0,0,0,0.12)",letterSpacing:"0.5px",lineHeight:"1.2",padding:"0 0.5rem"},children:'גמ"ח לעיצוב ארועים'}),v.jsx("p",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(18px, 3.5vw, 28px)",color:"#374151",maxWidth:"900px",margin:"0 auto",lineHeight:"1.7",fontWeight:"500",padding:"0 1rem"},children:"מפות, אביזרים לקישוט שולחנות, מזנונים, פינות צילום ואווירה"})]}),v.jsx("div",{style:{marginBottom:"4rem",width:"100%",overflowX:"hidden"},className:"slide-in-left",children:v.jsx("div",{style:{position:"relative",width:"100%",margin:"0 auto",padding:"0 0.5rem"},children:v.jsx("div",{style:{position:"relative",overflow:"hidden",borderRadius:"15px",boxShadow:"0 15px 40px rgba(0,0,0,0.12)",background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.8)",height:"clamp(250px, 35vw, 400px)",width:"100%",maskImage:"linear-gradient(to right, transparent 0%, black 8%, black 92%, transparent 100%)"},children:v.jsx("div",{style:{display:"flex",height:"100%",animation:"panoramaSlide 45s linear infinite",gap:"clamp(8px, 2vw, 16px)",willChange:"transform"},children:e.concat(e).map((t,r)=>v.jsx("div",{style:{flexShrink:0,width:"clamp(180px, 18vw, 300px)",height:"100%",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",transition:"transform 0.3s ease"},children:v.jsx("img",{src:t,alt:`תמונה ${r%e.length+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},`img-${r}`))})})})}),v.jsx("div",{className:"fade-in",style:{padding:"0 0.5rem",width:"100%",boxSizing:"border-box"},children:v.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85))",backdropFilter:"blur(10px)",borderRadius:"15px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"clamp(1rem, 3vw, 1.5rem)",border:"1px solid rgba(255,255,255,0.6)",width:"100%",maxWidth:"900px",margin:"0 auto",boxSizing:"border-box"},children:v.jsx("iframe",{src:"https://www.google.com/maps?q=31.7889462,34.79986&output=embed",width:"100%",height:"350",style:{borderRadius:"15px",border:"none",width:"100%",display:"block"},allowFullScreen:"",loading:"lazy",title:'מיקום גמ"ח'})})})]})}),v.jsx("style",{children:`
        * {
          box-sizing: border-box;
        }
        
        body {
          overflow-x: hidden;
        }
        
        @keyframes panoramaSlide {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(calc(-${e.length} * (clamp(180px, 18vw, 300px) + clamp(8px, 2vw, 16px))));
          }
        }
        
        /* אנימציות כניסה מותאמות למובייל */
        .fade-in {
          animation: fadeIn 1s ease-out;
        }
        
        .slide-in-left {
          animation: slideInLeft 1.2s ease-out;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        
        /* מיטוב למכשירים קטנים */
        @media (max-width: 480px) {
          .panorama-container {
            height: 180px !important;
          }
          
          iframe {
            height: 220px !important;
          }
        }
        
        /* מיטוב למכשירים בינוניים */
        @media (min-width: 481px) and (max-width: 768px) {
          .panorama-container {
            height: 250px !important;
          }
          
          iframe {
            height: 280px !important;
          }
        }
        
        /* מיטוב לטאבלטים */
        @media (min-width: 769px) and (max-width: 1024px) {
          .panorama-container {
            height: 300px !important;
          }
          
          iframe {
            height: 320px !important;
          }
        }
        
        /* הסתרת גלילה אופקית */
        html, body {
          overflow-x: hidden;
          max-width: 100vw;
        }
      `}),v.jsx(ij,{}),v.jsx(aj,{}),v.jsx(rj,{})]})},xj=()=>v.jsxs(v.Fragment,{children:[v.jsx(v.Fragment,{}),v.jsx("div",{style:{minHeight:"100vh",background:"transparent",padding:"2rem 0"},children:v.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"0 1rem"},children:[v.jsx("div",{style:{textAlign:"center",marginBottom:"3rem"},className:"fade-in",children:v.jsx("h1",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(28px, 5vw, 42px)",fontWeight:"800",color:"#059669",marginBottom:"1rem",textShadow:"0 2px 4px rgba(0,0,0,0.1)",letterSpacing:"0.5px"},children:'אודות גמ"ח שמחת זקנתי'})}),v.jsx("div",{className:"fade-in",style:{marginBottom:"3rem"},children:v.jsx("div",{style:{background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",borderRadius:"20px",boxShadow:"0 15px 40px rgba(0,0,0,0.1)",padding:"clamp(1.5rem, 4vw, 3rem)",border:"1px solid rgba(255,255,255,0.5)",margin:"0 auto"},children:v.jsxs("div",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(16px, 2.2vw, 20px)",lineHeight:"1.8",color:"#374151",textAlign:"justify",direction:"rtl"},children:[v.jsxs("p",{style:{marginBottom:"1.5rem"},children:[v.jsx("strong",{style:{color:"#059669",fontSize:"1.1em"},children:'גמ"ח שמחת זקנתי הוא גמ"ח ארועים הפועל משנת 2013.'}),'הגמ"ח מציע השאלת ציוד לאירועים, כולל מפות קטיפה במגוון צבעים, עיצובי שולחן, עיצובים למזנונים ועוד.']}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['הגמ"ח הוקם ',v.jsx("strong",{style:{color:"#c2185b"},children:'לעילוי נשמת סבה וסבתה של ענבר, יוזמת ומנהלת הגמ"ח, אברהם ואסתר ליבן ז"ל'}),", ממקימי קיבוץ חפץ חיים."]}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['הגמ"ח משרת את תושבי המועצה האזורית נחל שורק כמו גם יישובים מרוחקים יותר כמו ',v.jsx("strong",{children:"אלומה, אשדוד, ניצן, מזכרת בתיה, יבנה ועוד"}),"."]}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['הגמ"ח זוכה לתמיכה קבועה של הנהלת קיבוץ חפץ חיים והמועצה האזורית נחל שורק שרואים בגמ"ח ',v.jsx("strong",{style:{color:"#059669"},children:"יוזמה ברוכה של חסד ועזרה לזולת ובעלת חשיבות קהילתית מרובה"}),"."]}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['הגמ"ח מופעל ע"י ',v.jsx("strong",{children:"צוות מתנדבות מסור"}),", דורש תחזוקה שוטפת- ניקוי, סידור, רכישת ציוד וחידוש המלאי באופן קבוע."]}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['הגמ"ח משרת ',v.jsx("strong",{style:{color:"#c2185b"},children:"עשרות ארועים מידי חודש"}),", ונשען על תרומות המשתמשים בלבד. נשמח אם תהיו שותפים."]}),v.jsx("p",{style:{marginBottom:"1.5rem"},children:"פרטים בדף התרומות."}),v.jsx("div",{style:{textAlign:"center",marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(139, 92, 246, 0.1))",borderRadius:"12px",border:"1px solid rgba(5, 150, 105, 0.2)"},children:v.jsx("p",{style:{fontSize:"clamp(18px, 3vw, 24px)",fontWeight:"700",color:"#059669",textShadow:"0 1px 2px rgba(0,0,0,0.1)",margin:0},children:"🎉 נתראה בשמחות! 🎉"})})]})})})]})})]}),bj=()=>{const[n,e]=ue.useState(""),[t,r]=ue.useState(""),[i,a]=ue.useState(""),{setUser:o}=So(),s=lm(),c=async()=>{if(!n||!n.includes("@")){a("יש להזין אימייל תקין לשחזור סיסמה");return}try{await S9(g1,n),a("קישור לאיפוס סיסמה נשלח לאימייל")}catch(p){a("שגיאה בשליחת קישור לאיפוס סיסמה: "+p.message)}},f=async p=>{p.preventDefault(),a("");let g=n;if(!n.includes("@"))try{const m=ul(tn(_t,"users"),nu("username","==",n)),x=await $n(m);if(!x.empty)g=x.docs[0].data().email;else{a("שם משתמש לא נמצא");return}}catch{a("שגיאה באחזור אימייל לפי שם משתמש");return}try{const x=(await C9(g1,g,t)).user;if(!x.emailVerified){a("נא לאמת את כתובת האימייל לפני ההתחברות");return}const _=Yn(_t,"users",x.uid),T=await Nh(_);if(T.exists()){const A=T.data();o({uid:x.uid,email:x.email,username:A.username,role:A.role}),s("/")}else a("לא נמצאו נתוני משתמש במסד הנתונים")}catch(m){switch(m.code){case"auth/invalid-credential":case"auth/wrong-password":a("סיסמה שגויה");break;case"auth/user-not-found":a("המשתמש לא נמצא");break;default:a("שגיאה: "+m.message)}}},d={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",background:"transparent"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return v.jsx("div",{style:d.container,children:v.jsxs("form",{onSubmit:f,style:d.form,children:[v.jsx("h2",{style:d.title,children:"התחברות"}),v.jsx("input",{type:"text",placeholder:"שם משתמש או אימייל",value:n,onChange:p=>e(p.target.value),style:d.input,required:!0}),v.jsx("input",{type:"password",placeholder:"סיסמה",value:t,onChange:p=>r(p.target.value),style:d.input,required:!0}),i&&v.jsx("div",{style:d.error,children:i}),v.jsx("button",{type:"submit",style:d.button,children:"התחבר"}),v.jsx("button",{type:"button",onClick:c,style:{marginTop:"0.5rem",backgroundColor:"transparent",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"שכחת סיסמה?"})]})})},wj=()=>{const[n,e]=ue.useState(""),[t,r]=ue.useState(""),[i,a]=ue.useState(""),[o,s]=ue.useState(""),c=p=>p.length>=8&&/[a-zA-Z]/.test(p),f=async p=>{if(p.preventDefault(),!c(i)){s("הסיסמה חייבת להכיל לפחות 8 תווים ולפחות אות אחת באנגלית A-Z / a-z");return}try{const m=(await E9(g1,n,i)).user;await f5(Yn(_t,"users",m.uid),{email:n,username:t,role:"User"}),await I9(m),alert("נרשמת בהצלחה! נשלח אליך מייל לאימות.")}catch(g){s(g.message)}},d={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",background:"transparent"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return v.jsx("div",{style:d.container,children:v.jsxs("form",{onSubmit:f,style:d.form,children:[v.jsx("h2",{style:d.title,children:"הרשמה"}),v.jsx("input",{type:"text",placeholder:"שם משתמש",value:t,onChange:p=>r(p.target.value),style:d.input,required:!0}),v.jsx("input",{type:"email",placeholder:"אימייל",value:n,onChange:p=>e(p.target.value),style:d.input,required:!0}),v.jsx("input",{type:"password",placeholder:"סיסמה",value:i,onChange:p=>a(p.target.value),style:d.input,required:!0}),o&&v.jsx("div",{style:d.error,children:o}),v.jsx("button",{type:"submit",style:d.button,children:"הרשם"})]})})},_j=({form:n,errors:e,handleChange:t,handleConfirm:r,handleClear:i,setShowCatalogPopup:a,saving:o,isLoadingClientData:s=!1})=>{const c=[{label:"מספר פלאפון",name:"phone",required:!0},{label:"שם מתנדבת",name:"volunteerName",required:!0},{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return v.jsxs("div",{className:"loan-form-box",children:[v.jsx("h2",{style:{textAlign:"center"},children:"הזמנה חדשה"}),c.map(({label:f,name:d,type:p="text",required:g})=>v.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[v.jsxs("label",{htmlFor:d,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[f,g&&" *",s&&(d==="clientName"||d==="address"||d==="email")&&v.jsx("span",{style:{marginRight:"0.5rem",color:"#2196f3"},children:"⏳"})]}),v.jsxs("div",{style:{position:"relative"},children:[v.jsx("input",{id:d,type:p,name:d,value:n[d],onChange:t,disabled:s&&(d==="clientName"||d==="address"||d==="email"),inputMode:d==="phone"?"numeric":void 0,pattern:d==="phone"?"[0-9]*":void 0,min:p==="date"?d==="pickupDate"?new Date().toISOString().split("T")[0]:d==="eventDate"||d==="returnDate"?n.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:e[d]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:s&&(d==="clientName"||d==="address"||d==="email")?"#f5f5f5":"white",opacity:s&&(d==="clientName"||d==="address"||d==="email")?.7:1},placeholder:s&&(d==="clientName"||d==="address"||d==="email")?"טוען...":""}),s&&d==="phone"&&v.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#2196f3"},children:v.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e3f2fd",borderTop:"2px solid #2196f3",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),e[d]&&v.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:e[d]})]},d)),v.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:v.jsx("button",{className:"btn btn-blue",onClick:()=>a(!0),children:"בחירת מוצרים"})}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[v.jsx("button",{className:"btn btn-green",onClick:r,disabled:o||s,children:o?"שומר...":"אישור הזמנה"}),v.jsx("button",{className:"btn btn-red",onClick:i,disabled:o||s,children:"ביטול הזמנה"})]}),v.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: translateY(-50%) rotate(0deg); }
          100% { transform: translateY(-50%) rotate(360deg); }
        }
      `})]})};function Aj(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function Sj(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var Ej=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cj=function(n){Ej(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Aj(a,i.prototype),Sj(a),a}return e}(Error),Ij=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Eo=function(n){Ij(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Cj),Tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rl=function(n){Tj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Eo),Rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bt=function(n){Rj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Eo),Nj=function(){function n(e){if(this.binarizer=e,e===null)throw new Bt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Dj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zi=function(n){Dj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Eo),Oj=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Er=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),b5=function(n){kj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Eo),Pj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),z_=function(n){Pj(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(b5),Lj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Li=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Bt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new z_(t);if(r>e)throw new z_(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=Lj(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Er.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=r(t,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),yn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ji=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Er.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var s=i*32+yn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var s=i*32+yn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Bt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var s=o>r?0:e&31,c=o<i?31:t&31,f=(2<<c)-(1<<s);a[o]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Bt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,s=i;s<=a;s++){var c=s>i?0:e&31,f=s<a?31:t&31,d=(2<<f)-(1<<c)&4294967295;if((o[s]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Bt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Bt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var s=r*32-this.size,c=e[0]>>>s,a=1;a<r;a++){var f=e[a];c|=f<<32-s,e[a-1]=c,c=f>>>s}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Li.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Li.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),Ny;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Ny||(Ny={}));const jr=Ny;var Mj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mt=function(n){Mj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Eo),jj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lr;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(lr||(lr={}));var Pi=function(){function n(e,t,r){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var p=c[f];n.VALUES_TO_ECI.set(p,this)}try{for(var g=jj(o),m=g.next();!m.done;m=g.next()){var x=m.value;n.NAME_TO_ECI.set(x,this)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new mt("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new mt("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new mt("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(lr.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(lr.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(lr.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(lr.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(lr.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(lr.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(lr.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(lr.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(lr.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(lr.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(lr.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(lr.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(lr.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(lr.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(lr.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(lr.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(lr.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(lr.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(lr.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(lr.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(lr.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(lr.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(lr.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(lr.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(lr.Big5,28,"Big5"),n.GB18030=new n(lr.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(lr.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Bj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pg=function(n){Bj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Eo),Es=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Pi?e:Pi.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(r.equals(Pi.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new pg("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Pi.UTF8)||e.equals(Pi.ISO8859_1)||e.equals(Pi.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),Pn=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Es.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(jr.CHARACTER_SET)!==void 0)return t.get(jr.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,s=0,c=0,f=0,d=0,p=0,g=0,m=0,x=0,_=0,T=0,A=0,D=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,U=0;U<r&&(i||a||o);U++){var H=e[U]&255;o&&(s>0?(H&128)===0?o=!1:s--:(H&128)!==0&&((H&64)===0?o=!1:(s++,(H&32)===0?c++:(s++,(H&16)===0?f++:(s++,(H&8)===0?d++:o=!1))))),i&&(H>127&&H<160?i=!1:H>159&&(H<192||H===215||H===247)&&A++),a&&(p>0?H<64||H===127||H>252?a=!1:p--:H===128||H===160||H>239?a=!1:H>160&&H<224?(g++,x=0,m++,m>_&&(_=m)):H>127?(p++,m=0,x++,x>T&&(T=x)):(m=0,x=0))}return o&&s>0&&(o=!1),a&&p>0&&(a=!1),o&&(D||c+f+d>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||_>=3||T>=3)?n.SHIFT_JIS:i&&a?_===2&&g===2||A*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(s,c,f,d,p,g){if(s==="%%")return"%";if(t[++i]!==void 0){s=d?parseInt(d.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=t[i];break;case"c":x=t[i][0];break;case"f":x=parseFloat(t[i]).toFixed(s);break;case"p":x=parseFloat(t[i]).toPrecision(s);break;case"e":x=parseFloat(t[i]).toExponential(s);break;case"x":x=parseInt(t[i]).toString(m||16);break;case"d":x=parseFloat(parseInt(t[i],m||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(m);for(var _=parseInt(f),T=f&&f[0]+""=="0"?"0":" ";x.length<_;)x=c!==void 0?x+T:T+x;return x}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return Es.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Pi.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Pi.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Pi.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),fn=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Pn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),oc=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Bt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],s=0;s<r;s++)o[s]&&i.set(s,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Bt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Bt("row lengths do not match");o=a,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new Bt("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Bt("row lengths do not match");c++}for(var d=new n(s,c),p=0;p<a;p++)i[p]&&d.set(Math.floor(p%s),Math.floor(p/s));return d},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Bt("input matrix dimensions do not match");for(var t=new Ji(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*r,c=e.getRow(a,t).getBitArray(),f=0;f<r;f++)i[s+f]^=c[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Bt("Left and top must be nonnegative");if(i<1||r<1)throw new Bt("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Bt("The region must fit inside the matrix");for(var s=this.rowSize,c=this.bits,f=t;f<o;f++)for(var d=f*s,p=e;p<a;p++)c[d+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Ji(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Er.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Ji(e),i=new Ji(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,s=-1,c=-1,f=0;f<t;f++)for(var d=0;d<r;d++){var p=i[f*r+d];if(p!==0){if(f<o&&(o=f),f>c&&(c=f),d*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;d*32+g<a&&(a=d*32+g)}if(d*32+31>s){for(var g=31;!(p>>>g);)g--;d*32+g>s&&(s=d*32+g)}}}return s<a||c<o?null:Int32Array.from([a,o,s-a+1,c-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],s=0;(o<<31-s&4294967295)===0;)s++;return a+=s,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Li.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Li.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new fn,a=0,o=this.height;a<o;a++){for(var s=0,c=this.width;s<c;s++)i.append(this.get(s,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Fj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),We=function(n){Fj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Eo),zj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uj=function(n){zj(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Ji(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),s=this.buckets,c=0;c<a;c++)s[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<f&&r.set(c);else for(var d=o[0]&255,p=o[1]&255,c=1;c<a-1;c++){var g=o[c+1]&255;(p*4-d-g)/2<f&&r.set(c),d=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new oc(r,i);this.initArrays(r);for(var o=this.buckets,s=1;s<5;s++)for(var c=Math.floor(i*s/5),f=t.getRow(c,this.luminances),d=Math.floor(r*4/5),p=Math.floor(r/5);p<d;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(o),x=t.getMatrix(),s=0;s<i;s++)for(var _=s*r,p=0;p<r;p++){var g=x[_+p]&255;g<m&&a.set(p,s)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,s=0;s<r;s++)t[s]>o&&(a=s,o=t[s]),t[s]>i&&(i=t[s]);for(var c=0,f=0,s=0;s<r;s++){var d=s-a,p=t[s]*d*d;p>f&&(c=s,f=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new We;for(var m=c-1,x=-1,s=c-1;s>a;s--){var _=s-a,p=_*_*(c-s)*(i-t[s]);p>x&&(m=s,x=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Oj),Vj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qj=function(n){Vj(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var c=e.calculateBlackPoints(a,o,s,r,i),f=new oc(r,i);e.calculateThresholdForBlock(a,o,s,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,s,c){for(var f=o-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var m=e.cap(p,2,i-3),x=0;x<r;x++){var _=x<<e.BLOCK_SIZE_POWER;_>d&&(_=d);for(var T=e.cap(x,2,r-3),A=0,D=-2;D<=2;D++){var U=s[m+D];A+=U[T-2]+U[T-1]+U[T]+U[T+1]+U[T+2]}var H=A/25;e.thresholdBlock(t,_,g,H,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,s){for(var c=0,f=i*o+r;c<e.BLOCK_SIZE;c++,f+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(t[f+d]&255)<=a&&s.set(r+d,i+c)},e.calculateBlackPoints=function(t,r,i,a,o){for(var s=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(r);var p=d<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var x=0,_=255,T=0,A=0,D=p*a+m;A<e.BLOCK_SIZE;A++,D+=a){for(var U=0;U<e.BLOCK_SIZE;U++){var H=t[D+U]&255;x+=H,H<_&&(_=H),H>T&&(T=H)}if(T-_>e.MIN_DYNAMIC_RANGE)for(A++,D+=a;A<e.BLOCK_SIZE;A++,D+=a)for(var U=0;U<e.BLOCK_SIZE;U++)x+=t[D+U]&255}var X=x>>e.BLOCK_SIZE_POWER*2;if(T-_<=e.MIN_DYNAMIC_RANGE&&(X=_/2,d>0&&g>0)){var q=(f[d-1][g]+2*f[d][g-1]+f[d-1][g-1])/4;_<q&&(X=q)}f[d][g]=X}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Uj),Hm=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new pg("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new pg("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new pg("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new fn,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},n}(),Hj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),w5=function(n){Hj(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Hm),Wj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gj=function(n){Wj(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,c=0,f=t.length;s<f;s+=4,c++){var d=void 0,p=t[s+3];if(p===0)d=255;else{var g=t[s],m=t[s+1],x=t[s+2];d=306*g+601*m+117*x+512>>10}o[c]=d}else for(var s=0,c=0,_=t.length;s<_;s+=4,c++){var d=void 0,p=t[s+3];if(p===0)d=255;else{var g=t[s],m=t[s+1],x=t[s+2];d=306*g+601*m+117*x+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new w5(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Hm),$j=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Xa=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?a(d.value):i(d.value).then(s,c)}f((r=r.apply(n,e||[])).next())})},Ka=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Yj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vh=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Xa(this,void 0,void 0,function(){var e,t,r,i,a,o,s,c,f,d,p,g;return Ka(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=Yj(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),f=a.groupId,d={deviceId:s,label:c,kind:o,groupId:f},t.push(d))}catch(x){p={error:x}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Xa(this,void 0,void 0,function(){var e;return Ka(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new $j(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Xa(this,void 0,void 0,function(){var t;return Ka(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Xa(this,void 0,void 0,function(){return Ka(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Xa(this,void 0,void 0,function(){var r,i;return Ka(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Xa(this,void 0,void 0,function(){var r;return Ka(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Xa(this,void 0,void 0,function(){var r,i;return Ka(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Xa(this,void 0,void 0,function(){return Ka(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Xa(this,void 0,void 0,function(){var i,a;return Ka(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Xa(this,void 0,void 0,function(){var i;return Ka(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Xa(this,void 0,void 0,function(){var i;return Ka(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Xa(this,void 0,void 0,function(){var r;return Ka(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Xa(this,void 0,void 0,function(){return Ka(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new rl("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new rl("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new rl("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new rl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new rl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new rl("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new rl("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new rl("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new rl("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new rl("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Xa(this,void 0,void 0,function(){return Ka(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Xa(this,void 0,void 0,function(){return Ka(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new We("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(g){var f=t&&g instanceof We,d=g instanceof Zi||g instanceof mt,p=d&&r;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(g)}};return new Promise(function(o,s){return a(o,s)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var o=c instanceof Zi||c instanceof mt,s=c instanceof We;(o||s)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new Gj(r,t),a=new qj(i);return new Nj(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),Ua=function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Er.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Er.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Er.arraycopy(t,0,r,0,t.length),Er.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Dy;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Dy||(Dy={}));const jt=Dy;var Oy;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Oy||(Oy={}));const pa=Oy;var Wm=function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),H0=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Bt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),ff=function(){function n(e,t){if(t.length===0)throw new Bt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Er.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=H0.addOrSubtract(r,o)}return r}r=t[0];for(var s=t.length,c=this.field,i=1;i<s;i++)r=H0.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Er.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=H0.addOrSubtract(t[s-o],r[s]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=this.field,c=0;c<r;c++)for(var f=t[c],d=0;d<a;d++)o[c+d]=H0.addOrSubtract(o[c+d],s.multiply(f,i[d]));return new n(s,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Bt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(r[s],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Bt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,c),d=t.buildMonomial(s,c);r=r.addOrSubtract(d),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Xj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MS=function(n){Xj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Eo),Kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bo=function(n){Kj(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),s=1,c=0;c<r;c++)o[c]=s,s*=2,s>=r&&(s^=t,s&=r-1);a.expTable=o;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[o[c]]=c;return a.logTable=f,a.zero=new ff(a,Int32Array.from([0])),a.one=new ff(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Bt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new ff(this,i)},e.prototype.inverse=function(t){if(t===0)throw new MS;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+yn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(H0),Qj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$p=function(n){Qj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Eo),Zj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),B1=function(n){Zj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Eo),Gm=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new ff(r,e),a=new Int32Array(t),o=!0,s=0;s<t;s++){var c=i.evaluateAt(r.exp(s+r.getGeneratorBase()));a[a.length-1-s]=c,c!==0&&(o=!1)}if(!o)for(var f=new ff(r,a),d=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=d[0],g=d[1],m=this.findErrorLocations(p),x=this.findErrorMagnitudes(g,m),s=0;s<m.length;s++){var _=e.length-1-r.log(m[s]);if(_<0)throw new $p("Bad error location");e[_]=bo.addOrSubtract(e[_],x[s])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,s=t,c=a.getZero(),f=a.getOne();s.getDegree()>=(r/2|0);){var d=o,p=c;if(o=s,c=f,o.isZero())throw new $p("r_{i-1} was zero");s=d;for(var g=a.getZero(),m=o.getCoefficient(o.getDegree()),x=a.inverse(m);s.getDegree()>=o.getDegree()&&!s.isZero();){var _=s.getDegree()-o.getDegree(),T=a.multiply(s.getCoefficient(s.getDegree()),x);g=g.addOrSubtract(a.buildMonomial(_,T)),s=s.addOrSubtract(o.multiplyByMonomial(_,T))}if(f=g.multiply(c).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new B1("Division algorithm failed to reduce polynomial?")}var A=f.getCoefficient(0);if(A===0)throw new $p("sigmaTilde(0) was zero");var D=a.inverse(A),U=f.multiplyScalar(D),H=s.multiplyScalar(D);return[U,H]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new $p("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var s=a.inverse(t[o]),c=1,f=0;f<r;f++)if(o!==f){var d=a.multiply(t[f],s),p=(d&1)===0?d|1:d&-2;c=a.multiply(c,p)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},n}(),ca;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(ca||(ca={}));var U_=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),s=new Wm(a,o,null,null);return s.setNumBits(i.length),s},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=ca.UPPER,i=ca.UPPER,a="",o=0;o<t;)if(i===ca.BINARY){if(t-o<5)break;var s=n.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=n.readCode(e,o,11)+31,o+=11}for(var c=0;c<s;c++){if(t-o<8){o=t;break}var f=n.readCode(e,o,8);a+=Pn.castAsNonUtf8Char(f),o+=8}i=r}else{var d=i===ca.DIGIT?4:5;if(t-o<d)break;var f=n.readCode(e,o,d);o+=d;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return ca.LOWER;case"P":return ca.PUNCT;case"M":return ca.MIXED;case"D":return ca.DIGIT;case"B":return ca.BINARY;case"U":default:return ca.UPPER}},n.getCharacter=function(e,t){switch(e){case ca.UPPER:return n.UPPER_TABLE[t];case ca.LOWER:return n.LOWER_TABLE[t];case ca.MIXED:return n.MIXED_TABLE[t];case ca.PUNCT:return n.PUNCT_TABLE[t];case ca.DIGIT:return n.DIGIT_TABLE[t];default:throw new B1("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=bo.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=bo.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=bo.AZTEC_DATA_10):(r=12,t=bo.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new mt;for(var o=e.length%r,s=new Int32Array(a),c=0;c<a;c++,o+=r)s[c]=n.readCode(e,o,r);try{var f=new Gm(t);f.decode(s,a-i)}catch(T){throw new mt(T)}for(var d=(1<<r)-1,p=0,c=0;c<i;c++){var g=s[c];if(g===0||g===d)throw new mt;(g===1||g===d-1)&&p++}for(var m=new Array(i*r-p),x=0,c=0;c<i;c++){var g=s[c];if(g===1||g===d-1)m.fill(g>1,x,x+r-1),x+=r-1;else for(var _=r-1;_>=0;--_)m[x++]=(g&1<<_)!==0}return m},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var s=0;s<a.length;s++)a[s]=s;else for(var c=i+1+2*yn.truncDivision(yn.truncDivision(i,2)-1,15),f=i/2,d=yn.truncDivision(c,2),s=0;s<f;s++){var p=s+yn.truncDivision(s,15);a[f-s-1]=d-p-1,a[f+s]=d+p+1}for(var s=0,g=0;s<r;s++){for(var m=(r-s)*4+(t?9:12),x=s*2,_=i-1-x,T=0;T<m;T++)for(var A=T*2,D=0;D<2;D++)o[g+A+D]=e.get(a[x+D],a[x+T]),o[g+2*m+A+D]=e.get(a[x+T],a[_-D]),o[g+4*m+A+D]=e.get(a[_-D],a[_-T]),o[g+6*m+A+D]=e.get(a[_-T],a[x+D]);g+=m*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Gn=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),ky=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ot=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*ky.floatToIntBits(this.x)+ky.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(r>=t&&r>=i?(o=e[0],a=e[1],s=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var c=a;a=s,s=c}e[0]=a,e[1]=o,e[2]=s},n.distance=function(e,t){return Gn.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),_5=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Jj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eB=function(n){Jj(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(_5),Py=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new We}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,c=!1,f=!1,d=!1,p=!1,g=this.width,m=this.height;o;){o=!1;for(var x=!0;(x||!c)&&t<g;)x=this.containsBlackPoint(r,i,t,!1),x?(t++,o=!0,c=!0):c||t++;if(t>=g){a=!0;break}for(var _=!0;(_||!f)&&i<m;)_=this.containsBlackPoint(e,t,i,!0),_?(i++,o=!0,f=!0):f||i++;if(i>=m){a=!0;break}for(var T=!0;(T||!d)&&e>=0;)T=this.containsBlackPoint(r,i,e,!1),T?(e--,o=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var A=!0;(A||!p)&&r>=0;)A=this.containsBlackPoint(e,t,r,!0),A?(r--,o=!0,p=!0):p||r--;if(r<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var D=t-e,U=null,H=1;U===null&&H<D;H++)U=this.getBlackPointOnSegment(e,i-H,e+H,i);if(U==null)throw new We;for(var X=null,H=1;X===null&&H<D;H++)X=this.getBlackPointOnSegment(e,r+H,e+H,r);if(X==null)throw new We;for(var q=null,H=1;q===null&&H<D;H++)q=this.getBlackPointOnSegment(t,r+H,t-H,r);if(q==null)throw new We;for(var j=null,H=1;j===null&&H<D;H++)j=this.getBlackPointOnSegment(t,i-H,t-H,i);if(j==null)throw new We;return this.centerEdges(j,U,q,X)}else throw new We},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=Gn.round(Gn.distance(e,t,r,i)),o=(r-e)/a,s=(i-t)/a,c=this.image,f=0;f<a;f++){var d=Gn.round(e+f*o),p=Gn.round(t+f*s);if(c.get(d,p))return new Ot(d,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),s=t.getX(),c=t.getY(),f=r.getX(),d=r.getY(),p=i.getX(),g=i.getY(),m=n.CORR;return a<this.width/2?[new Ot(p-m,g+m),new Ot(s+m,c+m),new Ot(f-m,d-m),new Ot(a+m,o-m)]:[new Ot(p+m,g+m),new Ot(s+m,c-m),new Ot(f-m,d+m),new Ot(a-m,o-m)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var s=e;s<=t;s++)if(a.get(r,s))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),V_=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>r||c<-1||c>i)throw new We;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>r||c<-1||c>i)throw new We;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}},n}(),jS=function(){function n(e,t,r,i,a,o,s,c,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,s,c,f,d,p,g,m,x,_,T){var A=n.quadrilateralToSquare(e,t,r,i,a,o,s,c),D=n.squareToQuadrilateral(f,d,p,g,m,x,_,T);return D.times(A)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=0;g<t;g+=2){var m=e[g],x=e[g+1],_=a*m+c*x+p;e[g]=(r*m+o*x+f)/_,e[g+1]=(i*m+s*x+d)/_}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var x=e[m],_=t[m],T=a*x+c*_+p;e[m]=(r*x+o*_+f)/T,t[m]=(i*x+s*_+d)/T}},n.squareToQuadrilateral=function(e,t,r,i,a,o,s,c){var f=e-r+a-s,d=t-i+o-c;if(f===0&&d===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var p=r-a,g=s-a,m=i-o,x=c-o,_=p*x-g*m,T=(f*x-g*d)/_,A=(p*d-f*m)/_;return new n(r-e+T*r,s-e+A*s,e,i-t+T*i,c-t+A*c,t,T,A,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,s,c){return n.squareToQuadrilateral(e,t,r,i,a,o,s,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),tB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nB=function(n){tB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,s,c,f,d,p,g,m,x,_,T,A,D,U,H){var X=jS.quadrilateralToQuadrilateral(a,o,s,c,f,d,p,g,m,x,_,T,A,D,U,H);return this.sampleGridWithTransform(t,r,i,X)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new We;for(var o=new oc(r,i),s=new Float32Array(2*r),c=0;c<i;c++){for(var f=s.length,d=c+.5,p=0;p<f;p+=2)s[p]=p/2+.5,s[p+1]=d;a.transformPoints(s),V_.checkAndNudgePoints(t,s);try{for(var p=0;p<f;p+=2)t.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,c)}catch{throw new We}}return o},e}(V_),A5=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new nB,n}(),mo=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ot(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),rB=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new eB(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new We;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,s){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(yn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new We},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),s=r-1;s>=0;--s)o[s]=e&15,e>>=4;try{var c=new Gm(bo.AZTEC_PARAM);c.decode(o,a)}catch{throw new We}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),c=this.getFirstDifferent(r,o,1,1),f=this.getFirstDifferent(i,o,-1,1),d=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,c,f,d))break}t=s,r=c,i=f,a=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new We;this.compact=this.nbCenterLayers===5;var g=new Ot(t.getX()+.5,t.getY()-.5),m=new Ot(r.getX()+.5,r.getY()+.5),x=new Ot(i.getX()-.5,i.getY()+.5),_=new Ot(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,x,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new Py(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new mo(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new mo(o+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new mo(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new mo(o-7,s-7),!1,-1,-1).toResultPoint()}var c=Gn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Gn.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new Py(this.image,15,c,f).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new mo(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new mo(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new mo(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new mo(c-7,f-7),!1,-1,-1).toResultPoint()}return c=Gn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Gn.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new mo(c,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=A5.getInstance(),s=this.getDimension(),c=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,c,c,f,c,f,f,c,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,s=e.getX(),c=e.getY(),f=o*(t.getX()-e.getX())/a,d=o*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(Gn.round(s+p*f),Gn.round(c+p*d))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new mo(e.getX()-a,e.getY()+a),t=new mo(t.getX()-a,t.getY()-a),r=new mo(r.getX()+a,r.getY()-a),i=new mo(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,r),s!==o)?!1:(s=this.getColor(r,i),s===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,s=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(r),p=0;p<d;p++)s+=i,c+=a,this.image.get(Gn.round(s),Gn.round(c))!==f&&o++;var g=o/r;return g>.1&&g<.9?0:g<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new mo(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Ot(s+i*a,c+i*o),d=new Ot(s-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Ot(s+i*a,c+i*o),g=new Ot(s-i*a,c-i*o),m=[f,p,d,g];return m},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Gn.round(e.getX()),r=Gn.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Gn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Gn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(yn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),Ly=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new rB(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new U_().decode(s)}catch(p){r=p}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new U_().decode(s)}catch(p){throw r??p}var c=new Ua(o.getText(),o.getRawBytes(),o.getNumBits(),a,jt.AZTEC,Er.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(pa.BYTE_SEGMENTS,f);var d=o.getECLevel();return d!=null&&c.putMetadata(pa.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(jr.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),iB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){iB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ly,t)||this}return e})(Vh);var Mi=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(jr.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),s=270;o!==null&&o.get(pa.ORIENTATION)===!0&&(s=s+o.get(pa.ORIENTATION)%360),a.putMetadata(pa.ORIENTATION,s);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Ot(f-c[d].getY()-1,c[d].getX());return a}else throw new We}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Ji(r),o=t&&t.get(jr.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var p=Math.trunc((d+1)/2),g=(d&1)===0,m=f+s*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var x=function(D){if(D===1&&(a.reverse(),t&&t.get(jr.NEED_RESULT_POINT_CALLBACK)===!0)){var U=new Map;t.forEach(function(q,j){return U.set(j,q)}),U.delete(jr.NEED_RESULT_POINT_CALLBACK),t=U}try{var H=_.decodeRow(m,a,t);if(D===1){H.putMetadata(pa.ORIENTATION,180);var X=H.getResultPoints();X!==null&&(X[0]=new Ot(r-X[0].getX()-1,X[0].getY()),X[1]=new Ot(r-X[1].getX()-1,X[1].getY()))}return{value:H}}catch{}},_=this,T=0;T<2;T++){var A=x(T);if(typeof A=="object")return A.value}}throw new We},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new We;for(var s=!e.get(t),c=0,f=t;f<o;){if(e.get(f)!==s)r[c]++;else{if(++c===i)break;r[c]=1,s=!s}f++}if(!(c===i||c===i-1&&f===o))throw new We},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new We;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;r*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=t[d]*c,m=p>g?p-g:g-p;if(m>r)return Number.POSITIVE_INFINITY;f+=m}return f/a},n}(),aB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),q_=function(n){aB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,c=!1,f=6,d=i;d<r;d++)if(t.get(d)!==c)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var x=Mi.patternMatchVariance(o,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);x<p&&(p=x,g=m)}if(g>=0&&t.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,g]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new We},e.decodeCode=function(t,r,i){Mi.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var c=e.CODE_PATTERNS[s],f=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new We},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(jr.ASSUME_GS1)===!0,o=e.findStartPattern(r),s=o[2],c=0,f=new Uint8Array(20);f[c++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new mt}for(var p=!1,g=!1,m="",x=o[0],_=o[1],T=Int32Array.from([0,0,0,0,0,0]),A=0,D=0,U=s,H=0,X=!0,q=!1,j=!1;!p;){var C=g;switch(g=!1,A=D,D=e.decodeCode(r,T,_),f[c++]=D,D!==e.CODE_STOP&&(X=!0),D!==e.CODE_STOP&&(H++,U+=H*D),x=_,_+=T.reduce(function(z,ee){return z+ee},0),D){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new mt}switch(d){case e.CODE_CODE_A:if(D<64)j===q?m+=String.fromCharCode(32+D):m+=String.fromCharCode(32+D+128),j=!1;else if(D<96)j===q?m+=String.fromCharCode(D-64):m+=String.fromCharCode(D+64),j=!1;else switch(D!==e.CODE_STOP&&(X=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!q&&j?(q=!0,j=!1):q&&j?(q=!1,j=!1):j=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(D<96)j===q?m+=String.fromCharCode(32+D):m+=String.fromCharCode(32+D+128),j=!1;else switch(D!==e.CODE_STOP&&(X=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!q&&j?(q=!0,j=!1):q&&j?(q=!1,j=!1):j=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(D<100)D<10&&(m+="0"),m+=D;else switch(D!==e.CODE_STOP&&(X=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}C&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var N=_-x;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-x)/2),!1))throw new We;if(U-=H*A,U%103!==A)throw new Zi;var L=m.length;if(L===0)throw new We;L>0&&X&&(d===e.CODE_CODE_C?m=m.substring(0,L-2):m=m.substring(0,L-1));for(var R=(o[1]+o[0])/2,I=x+N/2,P=f.length,M=new Uint8Array(P),K=0;K<P;K++)M[K]=f[K];var F=[new Ot(R,t),new Ot(I,t)];return new Ua(m,M,0,F,jt.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Mi),oB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H_=function(n){oB(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,f),p=r.getNextSet(d[1]),g=r.getSize(),m,x;do{e.recordPattern(r,p,f);var _=e.toNarrowWidePattern(f);if(_<0)throw new We;m=e.patternToChar(_),this.decodeRowResult+=m,x=p;try{for(var T=(a=void 0,Rv(f)),A=T.next();!A.done;A=T.next()){var D=A.value;p+=D}}catch(P){a={error:P}}finally{try{A&&!A.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var U=0;try{for(var H=Rv(f),X=H.next();!X.done;X=H.next()){var D=X.value;U+=D}}catch(P){s={error:P}}finally{try{X&&!X.done&&(c=H.return)&&c.call(H)}finally{if(s)throw s.error}}var q=p-x-U;if(p!==g&&q*2<U)throw new We;if(this.usingCheckDigit){for(var j=this.decodeRowResult.length-1,C=0,N=0;N<j;N++)C+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(j)!==e.ALPHABET_STRING.charAt(C%43))throw new Zi;this.decodeRowResult=this.decodeRowResult.substring(0,j)}if(this.decodeRowResult.length===0)throw new We;var L;this.extendedMode?L=e.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;var R=(d[1]+d[0])/2,I=x+U/2;return new Ua(L,null,0,[new Ot(R,t),new Ot(I,t)],jt.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,s=a,c=!1,f=r.length,d=a;d<i;d++)if(t.get(d)!==c)r[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,c=!c}throw new We},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,s;do{var c=2147483647;try{for(var f=(r=void 0,Rv(t)),d=f.next();!d.done;d=f.next()){var p=d.value;p<c&&p>o&&(c=p)}}catch(_){r={error:_}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}o=c,s=0;for(var g=0,m=0,x=0;x<a;x++){var p=t[x];p>o&&(m|=1<<a-1-x,s++,g+=p)}if(s===3){for(var x=0;x<a&&s>0;x++){var p=t[x];if(p>o&&(s--,p*2>=g))return-1}return m}}while(s>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new We},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(a+1),c="\0";switch(o){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new mt;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new mt;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new mt;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new mt;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Mi),sB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W_=function(n){sB(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.findAsteriskPattern(r),d=r.getNextSet(f[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,x;do{e.recordPattern(r,d,g);var _=this.toPattern(g);if(_<0)throw new We;m=this.patternToChar(_),this.decodeRowResult+=m,x=d;try{for(var T=(a=void 0,Nv(g)),A=T.next();!A.done;A=T.next()){var D=A.value;d+=D}}catch(N){a={error:N}}finally{try{A&&!A.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}d=r.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var U=0;try{for(var H=Nv(g),X=H.next();!X.done;X=H.next()){var D=X.value;U+=D}}catch(N){s={error:N}}finally{try{X&&!X.done&&(c=H.return)&&c.call(H)}finally{if(s)throw s.error}}if(d===p||!r.get(d))throw new We;if(this.decodeRowResult.length<2)throw new We;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var q=this.decodeExtended(this.decodeRowResult),j=(f[1]+f[0])/2,C=x+U/2;return new Ua(q,null,0,[new Ot(j,t),new Ot(C,t)],jt.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,c=a.length,f=0,d=i;d<r;d++)if(t.get(d)!==s)a[f]++;else{if(f===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new We},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=Nv(t),s=o.next();!s.done;s=o.next()){var c=s.value;a+=c}}catch(x){r={error:x}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var f=0,d=t.length,p=0;p<d;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new We},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new mt;var s=t.charAt(a+1),c="\0";switch(o){case"d":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new mt;break;case"a":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new mt;break;case"b":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s>="X"&&s<="Z")c="";else throw new mt;break;case"c":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new mt;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,s=r-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(s)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Zi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Mi),lB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G_=function(n){lB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,s=this.decodeStart(r),c=this.decodeEnd(r),f=new fn;e.decodeMiddle(r,s[1],c[0],f);var d=f.toString(),p=null;i!=null&&(p=i.get(jr.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=d.length,m=!1,x=0;try{for(var _=cB(p),T=_.next();!T.done;T=_.next()){var A=T.value;if(g===A){m=!0;break}A>x&&(x=A)}}catch(H){a={error:H}}finally{try{T&&!T.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}if(!m&&g>x&&(m=!0),!m)throw new mt;var D=[new Ot(s[1],t),new Ot(c[0],t)],U=new Ua(d,null,0,D,jt.ITF,new Date().getTime());return U},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),s.fill(0),c.fill(0);r<i;){Mi.recordPattern(t,r,o);for(var f=0;f<5;f++){var d=2*f;s[f]=o[d],c[f]=o[d+1]}var p=e.decodeDigit(s);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),o.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new We},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new We;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof We&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),s=t.getSize(),c=!1,f=0,d=r;o.fill(0);for(var p=r;p<s;p++)if(t.get(p)!==c)o[f]++;else{if(f===a-1){if(Mi.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,p];d+=o[0]+o[1],Er.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new We},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],c=Mi.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=o):c===r&&(i=-1)}if(i>=0)return i%10;throw new We},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Mi),uB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dh=function(n){uB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var c=s-(a-s);c>=0&&(r=t.isRange(c,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var s=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,f=r,d=a.length,p=i,g=r;g<s;g++)if(t.get(g)!==p)o[c]++;else{if(c===d-1){if(Mi.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var m=o.slice(2,o.length),x=0;x<c-1;x++)o[x]=m[x];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,p=!p}throw new We},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,s=-1,c=a.length,f=0;f<c;f++){var d=a[f],p=Mi.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=f)}if(s>=0)return s;throw new We},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Mi),fB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dB=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),c=[new Ot((r[0]+r[1])/2,e),new Ot(a,e)],f=new Ua(o,null,0,c,jt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,d=0;d<5&&c<s;d++){var p=Dh.decodeDigit(e,o,c,Dh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,fB(o)),m=g.next();!m.done;m=g.next()){var x=m.value;c+=x}}catch(T){i={error:T}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new We;var _=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==_)throw new We;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new We},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[pa.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n}(),hB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pB=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),c=[new Ot((r[0]+r[1])/2,e),new Ot(a,e)],f=new Ua(o,null,0,c,jt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,d=0;d<2&&c<s;d++){var p=Dh.decodeDigit(e,o,c,Dh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,hB(o)),m=g.next();!m.done;m=g.next()){var x=m.value;c+=x}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new We;if(parseInt(r.toString())%4!==f)throw new We;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[pa.ISSUE_NUMBER,parseInt(e)]])},n}(),gB=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Dh.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new dB;return a.decodeRow(e,t,i)}catch{var o=new pB;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),mB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ki=function(n){mB(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(jr.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new Ot((a[0]+a[1])/2,t);o.foundPossibleResultPoint(s)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(o!=null){var p=new Ot(f,t);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,f);if(o!=null){var m=new Ot((g[0]+g[1])/2,t);o.foundPossibleResultPoint(m)}var x=g[1],_=x+(x-g[0]);if(_>=r.getSize()||!r.isRange(x,_,!1))throw new We;var T=d.toString();if(T.length<8)throw new mt;if(!e.checkChecksum(T))throw new Zi;var A=(a[1]+a[0])/2,D=(g[1]+g[0])/2,U=this.getBarcodeFormat(),H=[new Ot(A,t),new Ot(D,t)],X=new Ua(T,null,0,H,U,new Date().getTime()),q=0;try{var j=gB.decodeRow(t,r,g[1]);X.putMetadata(pa.UPC_EAN_EXTENSION,j.getText()),X.putAllMetadata(j.getResultMetadata()),X.addResultPoints(j.getResultPoints()),q=j.getText().length}catch{}var C=i==null?null:i.get(jr.ALLOWED_EAN_EXTENSIONS);if(C!=null){var N=!1;for(var L in C)if(q.toString()===L){N=!0;break}if(!N)throw new We}return U===jt.EAN_13||jt.UPC_A,X},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Dh),vB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},My=function(n){vB(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],g=0,m=0;m<6&&p<d;m++){var x=ki.decodeDigit(t,f,p,ki.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var _=(a=void 0,$_(f)),T=_.next();!T.done;T=_.next()){var A=T.value;p+=A}}catch(X){a={error:X}}finally{try{T&&!T.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}x>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var D=ki.findGuardPattern(t,p,!0,ki.MIDDLE_PATTERN,new Int32Array(ki.MIDDLE_PATTERN.length).fill(0));p=D[1];for(var m=0;m<6&&p<d;m++){var x=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var U=(s=void 0,$_(f)),H=U.next();!H.done;H=U.next()){var A=H.value;p+=A}}catch(j){s={error:j}}finally{try{H&&!H.done&&(c=U.return)&&c.call(U)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return jt.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new We},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ki),yB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Y_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X_=function(n){yB(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],g=0;g<4&&p<d;g++){var m=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var x=(a=void 0,Y_(f)),_=x.next();!_.done;_=x.next()){var T=_.value;p+=T}}catch(H){a={error:H}}finally{try{_&&!_.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}}var A=ki.findGuardPattern(t,p,!0,ki.MIDDLE_PATTERN,new Int32Array(ki.MIDDLE_PATTERN.length).fill(0));p=A[1];for(var g=0;g<4&&p<d;g++){var m=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var D=(s=void 0,Y_(f)),U=D.next();!U.done;U=D.next()){var T=U.value;p+=T}}catch(q){s={error:q}}finally{try{U&&!U.done&&(c=D.return)&&c.call(D)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return jt.EAN_8},e}(ki),xB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),K_=function(n){xB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new My,t}return e.prototype.getBarcodeFormat=function(){return jt.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Ua(r.substring(1),null,null,t.getResultPoints(),jt.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new We},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ki),bB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q_=function(n){bB(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s=this.decodeMiddleCounters.map(function(T){return T});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=t.getSize(),f=r[1],d=0,p=0;p<6&&f<c;p++){var g=e.decodeDigit(t,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,wB(s)),x=m.next();!x.done;x=m.next()){var _=x.value;f+=_}}catch(T){a={error:T}}finally{try{x&&!x.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}g>=10&&(d|=1<<5-p)}return e.determineNumSysAndCheckDigit(new fn(i),d),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return ki.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw We.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return jt.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new fn;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ki),_B=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dv=function(n){_B(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(jr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(jt.EAN_13)>-1&&a.push(new My),i.indexOf(jt.UPC_A)>-1&&a.push(new K_),i.indexOf(jt.EAN_8)>-1&&a.push(new X_),i.indexOf(jt.UPC_E)>-1&&a.push(new Q_)),a.length===0&&(a.push(new My),a.push(new K_),a.push(new X_),a.push(new Q_)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var s=Z_(this.readers),c=s.next();!c.done;c=s.next()){var f=c.value;try{var d=f.decodeRow(t,r,i),p=d.getBarcodeFormat()===jt.EAN_13&&d.getText().charAt(0)==="0",g=i==null?null:i.get(jr.POSSIBLE_FORMATS),m=g==null||g.includes(jt.UPC_A);if(p&&m){var x=d.getRawBytes(),_=new Ua(d.getText().substring(1),x,x?x.length:null,d.getResultPoints(),jt.UPC_A);return _.putAllMetadata(d.getResultMetadata()),_}return d}catch{}}}catch(T){a={error:T}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new We},e.prototype.reset=function(){var t,r;try{for(var i=Z_(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Mi),AB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SB=function(n){AB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new We;var o=this.codaBarDecodeRow(a.row);if(!o)throw new We;return new Ua(o,null,0,[new Ot(a.left,t),new Ot(a.right,t)],jt.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],s=r[0],c=1,f=1;f<r.length;f++)r[f]===s?c++:(s=r[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Mi),EB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jf=function(n){EB(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Mi.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new We},e.count=function(t){return Gn.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=CB(t),p=d.next();!p.done;p=d.next()){var g=p.value;g>f&&(f=g),g<c&&(c=g)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Mi),$g=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),BS=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ot(r,a)),this.resultPoints.push(new Ot(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),IB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uh=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var s=IB(e),c=s.next();!c.done;c=s.next()){var f=c.value;o+=f}}catch(D){i={error:D}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var d=0,p=0,g=e.length,m=0;m<g-1;m++){var x=void 0;for(x=1,p|=1<<m;x<e[m];x++,p&=~(1<<m)){var _=n.combins(o-x-1,g-m-2);if(r&&p===0&&o-x-(g-m-1)>=g-m-1&&(_-=n.combins(o-x-(g-m),g-m-2)),g-m-1>1){for(var T=0,A=o-x-(g-m-2);A>t;A--)T+=n.combins(o-x-A-1,g-m-3);_-=T*(g-1-m)}else o-x>t&&_--;d+=_}o-=x}return d},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,s=e;s>r;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n}(),TB=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Ji(r),a=0,o=e[0],s=o.getRightChar().getValue(),c=11;c>=0;--c)(s&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var f=e[c],d=f.getLeftChar().getValue(),p=11;p>=0;--p)(d&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),Kf=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),S5=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),RB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),el=function(n){RB(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(S5),NB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qf=function(n){NB(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(S5),DB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zd=function(n){DB(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new mt;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(S5),Yp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OB=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,s,c,f;if(!e)return null;if(e.length<2)throw new We;var d=e.substring(0,2);try{for(var p=Yp(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===d)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,m[2],e):n.processFixedAI(2,m[1],e)}}catch(q){t={error:q}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new We;var x=e.substring(0,3);try{for(var _=Yp(n.THREE_DIGIT_DATA_LENGTH),T=_.next();!T.done;T=_.next()){var m=T.value;if(m[0]===x)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,m[2],e):n.processFixedAI(3,m[1],e)}}catch(q){i={error:q}}finally{try{T&&!T.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var A=Yp(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),D=A.next();!D.done;D=A.next()){var m=D.value;if(m[0]===x)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(q){o={error:q}}finally{try{D&&!D.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}if(e.length<4)throw new We;var U=e.substring(0,4);try{for(var H=Yp(n.FOUR_DIGIT_DATA_LENGTH),X=H.next();!X.done;X=H.next()){var m=X.value;if(m[0]===U)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(q){c={error:q}}finally{try{X&&!X.done&&(f=H.return)&&f.call(H)}finally{if(c)throw c.error}}throw new We},n.processFixedAI=function(e,t,r){if(r.length<e)throw new We;var i=r.substring(0,e);if(r.length<e+t)throw new We;var a=r.substring(e,e+t),o=r.substring(e+t),s="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(o);return c==null?s:s+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),s=r.substring(a),c="("+i+")"+o,f=n.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),gg=function(){function n(e){this.buffer=new fn,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=OB.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Zd(this.information.getSize(),Zd.FNC1,Zd.FNC1):new Zd(this.information.getSize(),t-1,Zd.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Zd(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Qf(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Qf(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Qf(this.current.getPosition(),this.buffer.toString()):t=new Qf(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Kf(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Qf(this.current.getPosition(),this.buffer.toString());return new Kf(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Kf(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Qf(this.current.getPosition(),this.buffer.toString());return new Kf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Kf(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Qf(this.current.getPosition(),this.buffer.toString());return new Kf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Kf(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new el(e+5,el.FNC1);if(t>=5&&t<15)return new el(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new el(e+7,""+(r+1));if(r>=90&&r<116)return new el(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new mt}return new el(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new el(e+5,el.FNC1);if(t>=5&&t<15)return new el(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new el(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new B1("Decoding invalid alphanumeric value: "+r)}return new el(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),FS=function(){function n(e){this.information=e,this.generalDecoder=new gg(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),kB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ol=function(n){kB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(FS),PB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LB=function(n){PB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new fn;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(ol),MB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jB=function(n){MB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new fn;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(FS),BB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mg=function(n){BB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),s=1e5,c=0;c<5;++c)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(ol),FB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zS=function(n){FB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+mg.GTIN_SIZE+e.WEIGHT_SIZE)throw new We;var t=new fn;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+mg.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(mg),zB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UB=function(n){zB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(zS),VB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qB=function(n){VB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(zS),HB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WB=function(n){HB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ol.GTIN_SIZE)throw new We;var t=new fn;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ol.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ol.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(ol),GB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$B=function(n){GB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ol.GTIN_SIZE)throw new We;var t=new fn;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ol.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ol.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ol.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(ol),YB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yu=function(n){YB(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new We;var t=new fn;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(mg);function XB(n){try{if(n.get(1))return new LB(n);if(!n.get(2))return new jB(n);var e=gg.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new UB(n);case 5:return new qB(n)}var t=gg.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new WB(n);case 13:return new $B(n)}var r=gg.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Yu(n,"310","11");case 57:return new Yu(n,"320","11");case 58:return new Yu(n,"310","13");case 59:return new Yu(n,"320","13");case 60:return new Yu(n,"310","15");case 61:return new Yu(n,"320","15");case 62:return new Yu(n,"310","17");case 63:return new Yu(n,"320","17")}}catch(i){throw console.log(i),new B1("unknown decoder: "+n)}}var J_=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),KB=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),QB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZB=function(n){QB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(s){if(s instanceof We){if(!this.pairs.length)throw new We;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new We},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,Xu(t)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(s);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new We},e.isValidSequence=function(t){var r,i;try{for(var a=Xu(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(t.length>s.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==s[f]){c=!1;break}if(c)return!0}}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new KB(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,s,c,f;try{for(var d=Xu(r),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.getPairs().length!==t.length){var m=!0;try{for(var x=(o=void 0,Xu(g.getPairs())),_=x.next();!_.done;_=x.next()){var T=_.value,A=!1;try{for(var D=(c=void 0,Xu(t)),U=D.next();!U.done;U=D.next()){var H=U.value;if(J_.equals(T,H)){A=!0;break}}}catch(X){c={error:X}}finally{try{U&&!U.done&&(f=D.return)&&f.call(D)}finally{if(c)throw c.error}}A||(m=!1)}}catch(X){o={error:X}}finally{try{_&&!_.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}}}}catch(X){i={error:X}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,s,c,f;try{for(var d=Xu(r),p=d.next();!p.done;p=d.next()){var g=p.value,m=!0;try{for(var x=(o=void 0,Xu(t)),_=x.next();!_.done;_=x.next()){var T=_.value,A=!1;try{for(var D=(c=void 0,Xu(g.getPairs())),U=D.next();!U.done;U=D.next()){var H=U.value;if(T.equals(H)){A=!0;break}}}catch(X){c={error:X}}finally{try{U&&!U.done&&(f=D.return)&&f.call(D)}finally{if(c)throw c.error}}if(!A){m=!1;break}}}catch(X){o={error:X}}finally{try{_&&!_.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}if(m)return!0}}catch(X){i={error:X}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=TB.buildBitArray(t),i=XB(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],s[0],s[1]];return new Ua(a,null,null,c,jt.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var c=this.pairs.get(s);a+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var d=211*(o-4)+a;return d===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,c=-1;do this.findNextPair(t,r,c),o=this.parseFoundFinderPattern(t,i,a),o===null?c=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new We;var d;try{d=this.decodeDataCharacter(t,o,a,!1)}catch(p){d=null,console.log(p)}return new J_(f,d,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(r))s=0;else{var c=r[r.length-1];s=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;s<o&&(d=!t.get(s),!!d);)s++;for(var p=0,g=s,m=s;m<o;m++)if(t.get(m)!==d)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,d=!d}throw new We},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,s;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();Er.arraycopy(f,0,f,1,f.length-1),f[0]=a;var d;try{d=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new BS(d,[o,s],o,s,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var d=o[c];o[c]=o[f],o[f]=d}}var p=17,g=Gn.sum(new Int32Array(o))/p,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new We;for(var x=this.getOddCounts(),_=this.getEvenCounts(),T=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var D=1*o[c]/g,U=D+.5;if(U<1){if(D<.3)throw new We;U=1}else if(U>8){if(D>8.7)throw new We;U=8}var H=c/2;(c&1)===0?(x[H]=U,T[H]=D-U):(_[H]=U,A[H]=D-U)}this.adjustOddEvenCounts(p);for(var X=4*r.getValue()+(i?0:2)+(a?0:1)-1,q=0,j=0,c=x.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var C=e.WEIGHTS[X][2*c];j+=x[c]*C}q+=x[c]}for(var N=0,c=_.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var C=e.WEIGHTS[X][2*c+1];N+=_[c]*C}var L=j+N;if((q&1)!==0||q>13||q<4)throw new We;var R=(13-q)/2,I=e.SYMBOL_WIDEST[R],P=9-I,M=uh.getRSSvalue(x,I,!0),K=uh.getRSSvalue(_,P,!1),F=e.EVEN_TOTAL_SUBSET[R],z=e.GSUM[R],ee=M*F+K+z;return new $g(ee,L)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Gn.sum(new Int32Array(this.getOddCounts())),i=Gn.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var s=!1,c=!1;i>13?c=!0:i<4&&(s=!0);var f=r+i-t,d=(r&1)===1,p=(i&1)===0;if(f===1)if(d){if(p)throw new We;o=!0}else{if(!p)throw new We;c=!0}else if(f===-1)if(d){if(p)throw new We;a=!0}else{if(!p)throw new We;s=!0}else if(f===0){if(d){if(!p)throw new We;r<i?(a=!0,c=!0):(o=!0,s=!0)}else if(p)throw new We}else throw new We;if(a){if(o)throw new We;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new We;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Jf),JB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eF=function(n){JB(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}($g),tF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ov=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e4=function(n){tF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var d=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var p=Ov(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var x=(s=void 0,Ov(this.possibleRightPairs)),_=x.next();!_.done;_=x.next()){var T=_.value;if(T.getCount()>1&&e.checkChecksum(m,T))return e.constructResult(m,T)}}catch(A){s={error:A}}finally{try{_&&!_.done&&(c=x.return)&&c.call(x)}finally{if(s)throw s.error}}}}catch(A){a={error:A}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new We},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var s=Ov(t),c=s.next();!c.done;c=s.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),o=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new fn,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var c=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;c+=(s&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Ua(o.toString(),null,0,[d[0],d[1],p[0],p[1]],jt.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),s=this.parseFoundFinderPattern(t,i,r,o),c=a==null?null:a.get(jr.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;r&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new Ot(f,i))}var d=this.decodeDataCharacter(t,s,!0),p=this.decodeDataCharacter(t,s,!1);return new eF(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Mi.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Mi.recordPattern(t,r.getStartEnd()[1]+1,a);for(var s=0,c=a.length-1;s<c;s++,c--){var f=a[s];a[s]=a[c],a[c]=f}}for(var d=i?16:15,p=Gn.sum(new Int32Array(a))/d,g=this.getOddCounts(),m=this.getEvenCounts(),x=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var T=a[s]/p,A=Math.floor(T+.5);A<1?A=1:A>8&&(A=8);var D=Math.floor(s/2);(s&1)===0?(g[D]=A,x[D]=T-A):(m[D]=A,_[D]=T-A)}this.adjustOddEvenCounts(i,d);for(var U=0,H=0,s=g.length-1;s>=0;s--)H*=9,H+=g[s],U+=g[s];for(var X=0,q=0,s=m.length-1;s>=0;s--)X*=9,X+=m[s],q+=m[s];var j=H+3*X;if(i){if((U&1)!==0||U>12||U<4)throw new We;var C=(12-U)/2,N=e.OUTSIDE_ODD_WIDEST[C],L=9-N,R=uh.getRSSvalue(g,N,!1),I=uh.getRSSvalue(m,L,!0),P=e.OUTSIDE_EVEN_TOTAL_SUBSET[C],M=e.OUTSIDE_GSUM[C];return new $g(R*P+I+M,j)}else{if((q&1)!==0||q>10||q<4)throw new We;var C=(10-q)/2,N=e.INSIDE_ODD_WIDEST[C],L=9-N,R=uh.getRSSvalue(g,N,!0),I=uh.getRSSvalue(m,L,!1),K=e.INSIDE_ODD_TOTAL_SUBSET[C],M=e.INSIDE_GSUM[C];return new $g(I*K+R+M,j)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,s=0;s<a&&(o=!t.get(s),r!==o);)s++;for(var c=0,f=s,d=s;d<a;d++)if(t.get(d)!==o)i[c]++;else{if(c===3){if(Jf.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new We},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),s=a[0]-1;s>=0&&o!==t.get(s);)s--;s++;var c=a[0]-s,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);Er.arraycopy(f,0,d,1,f.length-1),d[0]=c;var p=this.parseFinderValue(d,e.FINDER_PATTERNS),g=s,m=a[1];return i&&(g=t.getSize()-1-g,m=t.getSize()-1-m),new BS(p,[s,a[1]],g,m,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Gn.sum(new Int32Array(this.getOddCounts())),a=Gn.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,c=!1,f=!1;t?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(c=!0));var d=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(d===1)if(p){if(g)throw new We;s=!0}else{if(!g)throw new We;f=!0}else if(d===-1)if(p){if(g)throw new We;o=!0}else{if(!g)throw new We;c=!0}else if(d===0){if(p){if(!g)throw new We;i<a?(o=!0,f=!0):(s=!0,c=!0)}else if(g)throw new We}else throw new We;if(o){if(s)throw new We;Jf.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Jf.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new We;Jf.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Jf.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Jf),nF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),W0=function(n){nF(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(jr.POSSIBLE_FORMATS):null,a=t&&t.get(jr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(jr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(jt.EAN_13)||i.includes(jt.UPC_A)||i.includes(jt.EAN_8)||i.includes(jt.UPC_E))&&r.readers.push(new Dv(t)),i.includes(jt.CODE_39)&&r.readers.push(new H_(a,o)),i.includes(jt.CODE_93)&&r.readers.push(new W_),i.includes(jt.CODE_128)&&r.readers.push(new q_),i.includes(jt.ITF)&&r.readers.push(new G_),i.includes(jt.CODABAR)&&r.readers.push(new SB),i.includes(jt.RSS_14)&&r.readers.push(new e4),i.includes(jt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new ZB))),r.readers.length===0&&(r.readers.push(new Dv(t)),r.readers.push(new H_),r.readers.push(new W_),r.readers.push(new Dv(t)),r.readers.push(new q_),r.readers.push(new G_),r.readers.push(new e4)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new We},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Mi),rF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){rF(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new W0(r),t,r)||this}return e})(Vh);var t4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nr=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Qn=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),iF=function(){function n(e,t,r,i,a,o){var s,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,d=o.getECCodewords(),p=o.getECBlocks();try{for(var g=t4(p),m=g.next();!m.done;m=g.next()){var x=m.value;f+=x.getCount()*(x.getDataCodewords()+d)}}catch(_){s={error:_}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new mt;try{for(var a=t4(n.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new mt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new nr(5,new Qn(1,3))),new n(2,12,12,10,10,new nr(7,new Qn(1,5))),new n(3,14,14,12,12,new nr(10,new Qn(1,8))),new n(4,16,16,14,14,new nr(12,new Qn(1,12))),new n(5,18,18,16,16,new nr(14,new Qn(1,18))),new n(6,20,20,18,18,new nr(18,new Qn(1,22))),new n(7,22,22,20,20,new nr(20,new Qn(1,30))),new n(8,24,24,22,22,new nr(24,new Qn(1,36))),new n(9,26,26,24,24,new nr(28,new Qn(1,44))),new n(10,32,32,14,14,new nr(36,new Qn(1,62))),new n(11,36,36,16,16,new nr(42,new Qn(1,86))),new n(12,40,40,18,18,new nr(48,new Qn(1,114))),new n(13,44,44,20,20,new nr(56,new Qn(1,144))),new n(14,48,48,22,22,new nr(68,new Qn(1,174))),new n(15,52,52,24,24,new nr(42,new Qn(2,102))),new n(16,64,64,14,14,new nr(56,new Qn(2,140))),new n(17,72,72,16,16,new nr(36,new Qn(4,92))),new n(18,80,80,18,18,new nr(48,new Qn(4,114))),new n(19,88,88,20,20,new nr(56,new Qn(4,144))),new n(20,96,96,22,22,new nr(68,new Qn(4,174))),new n(21,104,104,24,24,new nr(56,new Qn(6,136))),new n(22,120,120,18,18,new nr(68,new Qn(6,175))),new n(23,132,132,20,20,new nr(62,new Qn(8,163))),new n(24,144,144,22,22,new nr(62,new Qn(8,156),new Qn(2,155))),new n(25,8,18,6,16,new nr(7,new Qn(1,5))),new n(26,8,32,6,14,new nr(11,new Qn(1,10))),new n(27,12,26,10,24,new nr(14,new Qn(1,16))),new n(28,12,36,10,16,new nr(18,new Qn(1,22))),new n(29,16,36,14,16,new nr(24,new Qn(1,32))),new n(30,16,48,14,22,new nr(28,new Qn(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),aF=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new mt;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new oc(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return iF.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,c=!1,f=!1,d=!1;do if(r===a&&i===0&&!s)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,s=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!c)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(o&7)===0&&!f)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(o&7)===4&&!d)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,d=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new mt;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Bt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,s=r/a|0,c=o*i,f=s*a,d=new oc(f,c),p=0;p<o;++p)for(var g=p*i,m=0;m<s;++m)for(var x=m*a,_=0;_<i;++_)for(var T=p*(i+2)+1+_,A=g+_,D=0;D<a;++D){var U=m*(a+2)+1+D;if(e.get(U,T)){var H=x+D;d.set(H,A)}}return d},n}(),n4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oF=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,s=t.getECBlocks(),c=0,f=s.getECBlocks();try{for(var d=n4(f),p=d.next();!p.done;p=d.next()){var g=p.value;c+=g.getCount()}}catch(M){r={error:M}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var m=new Array(c),x=0;try{for(var _=n4(f),T=_.next();!T.done;T=_.next())for(var g=T.value,A=0;A<g.getCount();A++){var D=g.getDataCodewords(),U=s.getECCodewords()+D;m[x++]=new n(D,new Uint8Array(U))}}catch(M){a={error:M}}finally{try{T&&!T.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}for(var H=m[0].codewords.length,X=H-s.getECCodewords(),q=X-1,j=0,A=0;A<q;A++)for(var C=0;C<x;C++)m[C].codewords[A]=e[j++];for(var N=t.getVersionNumber()===24,L=N?8:x,C=0;C<L;C++)m[C].codewords[X-1]=e[j++];for(var R=m[0].codewords.length,A=X;A<R;A++)for(var C=0;C<x;C++){var I=N?(C+8)%x:C,P=N&&I>7?A-1:A;m[I].codewords[P]=e[j++]}if(j!==e.length)throw new Bt;return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),US=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Bt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,s=e<o?e:o,c=o-s,f=255>>8-s<<c;t=(a[i]&f)>>c,e-=s,r+=s,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(a[i]&f)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Di;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Di||(Di={}));var sF=function(){function n(){}return n.decode=function(e){var t=new US(e),r=new fn,i=new fn,a=new Array,o=Di.ASCII_ENCODE;do if(o===Di.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Di.C40_ENCODE:this.decodeC40Segment(t,r);break;case Di.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Di.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Di.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Di.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new mt}o=Di.ASCII_ENCODE}while(o!==Di.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Wm(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new mt;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Di.ASCII_ENCODE;if(a===129)return Di.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Di.C40_ENCODE;case 231:return Di.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Di.ANSIX12_ENCODE;case 239:return Di.TEXT_ENCODE;case 240:return Di.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new mt;break}}while(e.available()>0);return Di.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new mt;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new mt}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new mt}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new mt;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new mt}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),a=0}else throw new mt;break;default:throw new mt}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new mt;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new mt;for(var s=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new mt;s[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(s);try{t.append(Es.decode(s,Pn.ISO88591))}catch(f){throw new B1("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),lF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cF=function(){function n(){this.rsDecoder=new Gm(bo.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new aF(e),a=i.getVersion(),o=i.readCodewords(),s=oF.getDataBlocks(o,a),c=0;try{for(var f=lF(s),d=f.next();!d.done;d=f.next()){var p=d.value;c+=p.getNumDataCodewords()}}catch(U){t={error:U}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var g=new Uint8Array(c),m=s.length,x=0;x<m;x++){var _=s[x],T=_.getCodewords(),A=_.getNumDataCodewords();this.correctErrors(T,A);for(var D=0;D<A;D++)g[D*m+x]=T[D]}return sF.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Zi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),uF=function(){function n(e){this.image=e,this.rectangleDetector=new Py(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new We;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],s=this.transitionsBetween(r,o)+1,c=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(c&1)===1&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var f=n.sampleGrid(this.image,r,i,a,o,s,c);return new _5(f,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Ot(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Ot(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),s=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),d=o,p=[a,t,r,i];return d>s&&(d=s,p[0]=t,p[1]=r,p[2]=i,p[3]=a),d>c&&(d=c,p[0]=r,p[1]=i,p[2]=a,p[3]=t),d>f&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=n.shiftPoint(r,i,(o+1)*4),c=n.shiftPoint(i,r,(o+1)*4),f=this.transitionsBetween(s,t),d=this.transitionsBetween(c,a);return f<d?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(s+1)*4),f=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(c,a),s=this.transitionsBetween(f,a);var d=new Ot(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),p=new Ot(a.getX()+(t.getX()-r.getX())/(s+1),a.getY()+(t.getY()-r.getY())/(s+1));if(!this.isValid(d))return this.isValid(p)?p:null;if(!this.isValid(p))return d;var g=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),m=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return g>m?d:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,s=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,s*4),f=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(c,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var d=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,d,p),r=n.moveAway(r,d,p),i=n.moveAway(i,d,p),a=n.moveAway(a,d,p);var g,m;return c=n.shiftPoint(t,r,s*4),c=n.shiftPoint(c,a,o*4),g=n.shiftPoint(r,t,s*4),g=n.shiftPoint(g,i,o*4),f=n.shiftPoint(i,a,s*4),f=n.shiftPoint(f,r,o*4),m=n.shiftPoint(a,i,s*4),m=n.shiftPoint(m,t,o*4),[c,g,f,m]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,s){var c=A5.getInstance();return c.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-i)>Math.abs(a-r);if(s){var c=r;r=i,i=c,c=a,a=o,o=c}for(var f=Math.abs(a-r),d=Math.abs(o-i),p=-f/2,g=i<o?1:-1,m=r<a?1:-1,x=0,_=this.image.get(s?i:r,s?r:i),T=r,A=i;T!==a;T+=m){var D=this.image.get(s?A:T,s?T:A);if(D!==_&&(x++,_=D),p+=d,p>0){if(A===o)break;A+=g,p-=f}}return x},n}(),jy=function(){function n(){this.decoder=new cF}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(jr.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new uF(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=r.getRawBytes(),c=new Ua(r.getText(),s,8*s.length,i,jt.DATA_MATRIX,Er.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(pa.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!=null&&c.putMetadata(pa.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new We;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],c=r[0],f=(c-s+1)/i,d=(o-a+1)/i;if(f<=0||d<=0)throw new We;var p=i/2;a+=p,s+=p;for(var g=new oc(f,d),m=0;m<d;m++)for(var x=a+m*i,_=0;_<f;_++)e.get(s+_*i,x)&&g.set(_,m);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new We;var o=i-e[0];if(o===0)throw new We;return o},n.NO_POINTS=[],n}(),fF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){fF(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new jy,t)||this}return e})(Vh);var fh;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(fh||(fh={}));var dF=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new rl(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Bt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(fh.L,"L",1),n.M=new n(fh.M,"M",0),n.Q=new n(fh.Q,"Q",3),n.H=new n(fh.H,"H",2),n}(),hF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VS=function(){function n(e){this.errorCorrectionLevel=dF.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return yn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=hF(n.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var f=c.value,d=f[0];if(d===e||d===t)return new n(f[1]);var p=n.numBitsDiffering(e,d);p<a&&(o=f[1],a=p),e!==t&&(p=n.numBitsDiffering(t,d),p<a&&(o=f[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),pF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Be=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=pF(i),o=a.next();!o.done;o=a.next()){var s=o.value;r+=s.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),pe=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),gF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sd=function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var s=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var d=gF(f),p=d.next();!p.done;p=d.next()){var g=p.value;s+=g.getCount()*(g.getDataCodewords()+c)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=s}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new mt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new mt}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Bt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=VS.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new oc(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Be(7,new pe(1,19)),new Be(10,new pe(1,16)),new Be(13,new pe(1,13)),new Be(17,new pe(1,9))),new n(2,Int32Array.from([6,18]),new Be(10,new pe(1,34)),new Be(16,new pe(1,28)),new Be(22,new pe(1,22)),new Be(28,new pe(1,16))),new n(3,Int32Array.from([6,22]),new Be(15,new pe(1,55)),new Be(26,new pe(1,44)),new Be(18,new pe(2,17)),new Be(22,new pe(2,13))),new n(4,Int32Array.from([6,26]),new Be(20,new pe(1,80)),new Be(18,new pe(2,32)),new Be(26,new pe(2,24)),new Be(16,new pe(4,9))),new n(5,Int32Array.from([6,30]),new Be(26,new pe(1,108)),new Be(24,new pe(2,43)),new Be(18,new pe(2,15),new pe(2,16)),new Be(22,new pe(2,11),new pe(2,12))),new n(6,Int32Array.from([6,34]),new Be(18,new pe(2,68)),new Be(16,new pe(4,27)),new Be(24,new pe(4,19)),new Be(28,new pe(4,15))),new n(7,Int32Array.from([6,22,38]),new Be(20,new pe(2,78)),new Be(18,new pe(4,31)),new Be(18,new pe(2,14),new pe(4,15)),new Be(26,new pe(4,13),new pe(1,14))),new n(8,Int32Array.from([6,24,42]),new Be(24,new pe(2,97)),new Be(22,new pe(2,38),new pe(2,39)),new Be(22,new pe(4,18),new pe(2,19)),new Be(26,new pe(4,14),new pe(2,15))),new n(9,Int32Array.from([6,26,46]),new Be(30,new pe(2,116)),new Be(22,new pe(3,36),new pe(2,37)),new Be(20,new pe(4,16),new pe(4,17)),new Be(24,new pe(4,12),new pe(4,13))),new n(10,Int32Array.from([6,28,50]),new Be(18,new pe(2,68),new pe(2,69)),new Be(26,new pe(4,43),new pe(1,44)),new Be(24,new pe(6,19),new pe(2,20)),new Be(28,new pe(6,15),new pe(2,16))),new n(11,Int32Array.from([6,30,54]),new Be(20,new pe(4,81)),new Be(30,new pe(1,50),new pe(4,51)),new Be(28,new pe(4,22),new pe(4,23)),new Be(24,new pe(3,12),new pe(8,13))),new n(12,Int32Array.from([6,32,58]),new Be(24,new pe(2,92),new pe(2,93)),new Be(22,new pe(6,36),new pe(2,37)),new Be(26,new pe(4,20),new pe(6,21)),new Be(28,new pe(7,14),new pe(4,15))),new n(13,Int32Array.from([6,34,62]),new Be(26,new pe(4,107)),new Be(22,new pe(8,37),new pe(1,38)),new Be(24,new pe(8,20),new pe(4,21)),new Be(22,new pe(12,11),new pe(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Be(30,new pe(3,115),new pe(1,116)),new Be(24,new pe(4,40),new pe(5,41)),new Be(20,new pe(11,16),new pe(5,17)),new Be(24,new pe(11,12),new pe(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Be(22,new pe(5,87),new pe(1,88)),new Be(24,new pe(5,41),new pe(5,42)),new Be(30,new pe(5,24),new pe(7,25)),new Be(24,new pe(11,12),new pe(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Be(24,new pe(5,98),new pe(1,99)),new Be(28,new pe(7,45),new pe(3,46)),new Be(24,new pe(15,19),new pe(2,20)),new Be(30,new pe(3,15),new pe(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Be(28,new pe(1,107),new pe(5,108)),new Be(28,new pe(10,46),new pe(1,47)),new Be(28,new pe(1,22),new pe(15,23)),new Be(28,new pe(2,14),new pe(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Be(30,new pe(5,120),new pe(1,121)),new Be(26,new pe(9,43),new pe(4,44)),new Be(28,new pe(17,22),new pe(1,23)),new Be(28,new pe(2,14),new pe(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Be(28,new pe(3,113),new pe(4,114)),new Be(26,new pe(3,44),new pe(11,45)),new Be(26,new pe(17,21),new pe(4,22)),new Be(26,new pe(9,13),new pe(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Be(28,new pe(3,107),new pe(5,108)),new Be(26,new pe(3,41),new pe(13,42)),new Be(30,new pe(15,24),new pe(5,25)),new Be(28,new pe(15,15),new pe(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Be(28,new pe(4,116),new pe(4,117)),new Be(26,new pe(17,42)),new Be(28,new pe(17,22),new pe(6,23)),new Be(30,new pe(19,16),new pe(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Be(28,new pe(2,111),new pe(7,112)),new Be(28,new pe(17,46)),new Be(30,new pe(7,24),new pe(16,25)),new Be(24,new pe(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Be(30,new pe(4,121),new pe(5,122)),new Be(28,new pe(4,47),new pe(14,48)),new Be(30,new pe(11,24),new pe(14,25)),new Be(30,new pe(16,15),new pe(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Be(30,new pe(6,117),new pe(4,118)),new Be(28,new pe(6,45),new pe(14,46)),new Be(30,new pe(11,24),new pe(16,25)),new Be(30,new pe(30,16),new pe(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Be(26,new pe(8,106),new pe(4,107)),new Be(28,new pe(8,47),new pe(13,48)),new Be(30,new pe(7,24),new pe(22,25)),new Be(30,new pe(22,15),new pe(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Be(28,new pe(10,114),new pe(2,115)),new Be(28,new pe(19,46),new pe(4,47)),new Be(28,new pe(28,22),new pe(6,23)),new Be(30,new pe(33,16),new pe(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Be(30,new pe(8,122),new pe(4,123)),new Be(28,new pe(22,45),new pe(3,46)),new Be(30,new pe(8,23),new pe(26,24)),new Be(30,new pe(12,15),new pe(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Be(30,new pe(3,117),new pe(10,118)),new Be(28,new pe(3,45),new pe(23,46)),new Be(30,new pe(4,24),new pe(31,25)),new Be(30,new pe(11,15),new pe(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Be(30,new pe(7,116),new pe(7,117)),new Be(28,new pe(21,45),new pe(7,46)),new Be(30,new pe(1,23),new pe(37,24)),new Be(30,new pe(19,15),new pe(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Be(30,new pe(5,115),new pe(10,116)),new Be(28,new pe(19,47),new pe(10,48)),new Be(30,new pe(15,24),new pe(25,25)),new Be(30,new pe(23,15),new pe(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Be(30,new pe(13,115),new pe(3,116)),new Be(28,new pe(2,46),new pe(29,47)),new Be(30,new pe(42,24),new pe(1,25)),new Be(30,new pe(23,15),new pe(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Be(30,new pe(17,115)),new Be(28,new pe(10,46),new pe(23,47)),new Be(30,new pe(10,24),new pe(35,25)),new Be(30,new pe(19,15),new pe(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Be(30,new pe(17,115),new pe(1,116)),new Be(28,new pe(14,46),new pe(21,47)),new Be(30,new pe(29,24),new pe(19,25)),new Be(30,new pe(11,15),new pe(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Be(30,new pe(13,115),new pe(6,116)),new Be(28,new pe(14,46),new pe(23,47)),new Be(30,new pe(44,24),new pe(7,25)),new Be(30,new pe(59,16),new pe(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Be(30,new pe(12,121),new pe(7,122)),new Be(28,new pe(12,47),new pe(26,48)),new Be(30,new pe(39,24),new pe(14,25)),new Be(30,new pe(22,15),new pe(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Be(30,new pe(6,121),new pe(14,122)),new Be(28,new pe(6,47),new pe(34,48)),new Be(30,new pe(46,24),new pe(10,25)),new Be(30,new pe(2,15),new pe(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Be(30,new pe(17,122),new pe(4,123)),new Be(28,new pe(29,46),new pe(14,47)),new Be(30,new pe(49,24),new pe(10,25)),new Be(30,new pe(24,15),new pe(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Be(30,new pe(4,122),new pe(18,123)),new Be(28,new pe(13,46),new pe(32,47)),new Be(30,new pe(48,24),new pe(14,25)),new Be(30,new pe(42,15),new pe(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Be(30,new pe(20,117),new pe(4,118)),new Be(28,new pe(40,47),new pe(7,48)),new Be(30,new pe(43,24),new pe(22,25)),new Be(30,new pe(10,15),new pe(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Be(30,new pe(19,118),new pe(6,119)),new Be(28,new pe(18,47),new pe(31,48)),new Be(30,new pe(34,24),new pe(34,25)),new Be(30,new pe(20,15),new pe(61,16)))],n}(),Yi;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Yi||(Yi={}));var r4=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Yi.DATA_MASK_000,new n(Yi.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Yi.DATA_MASK_001,new n(Yi.DATA_MASK_001,function(e,t){return(e&1)===0})],[Yi.DATA_MASK_010,new n(Yi.DATA_MASK_010,function(e,t){return t%3===0})],[Yi.DATA_MASK_011,new n(Yi.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Yi.DATA_MASK_100,new n(Yi.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Yi.DATA_MASK_101,new n(Yi.DATA_MASK_101,function(e,t){return e*t%6===0})],[Yi.DATA_MASK_110,new n(Yi.DATA_MASK_110,function(e,t){return e*t%6<3})],[Yi.DATA_MASK_111,new n(Yi.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),mF=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new mt;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=VS.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new mt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return sd.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var s=sd.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(s=sd.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new mt},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=r4.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),c=0,f=0,d=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=o?i-1-g:g,x=0;x<2;x++)a.get(p-x,m)||(d++,f<<=1,this.bitMatrix.get(p-x,m)&&(f|=1),d===8&&(s[c++]=f,d=0,f=0));o=!o}if(c!==t.getTotalCodewords())throw new mt;return s},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=r4.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),i4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vF=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,s;if(e.length!==t.getTotalCodewords())throw new Bt;var c=t.getECBlocksForLevel(r),f=0,d=c.getECBlocks();try{for(var p=i4(d),g=p.next();!g.done;g=p.next()){var m=g.value;f+=m.getCount()}}catch(P){i={error:P}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new Array(f),_=0;try{for(var T=i4(d),A=T.next();!A.done;A=T.next())for(var m=A.value,D=0;D<m.getCount();D++){var U=m.getDataCodewords(),H=c.getECCodewordsPerBlock()+U;x[_++]=new n(U,new Uint8Array(H))}}catch(P){o={error:P}}finally{try{A&&!A.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}for(var X=x[0].codewords.length,q=x.length-1;q>=0;){var j=x[q].codewords.length;if(j===X)break;q--}q++;for(var C=X-c.getECCodewordsPerBlock(),N=0,D=0;D<C;D++)for(var L=0;L<_;L++)x[L].codewords[D]=e[N++];for(var L=q;L<_;L++)x[L].codewords[C]=e[N++];for(var R=x[0].codewords.length,D=C;D<R;D++)for(var L=0;L<_;L++){var I=L<q?D:D+1;x[L].codewords[I]=e[N++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),ws;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(ws||(ws={}));var Rr=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Bt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(ws.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(ws.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(ws.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(ws.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(ws.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(ws.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(ws.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(ws.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(ws.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(ws.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),yF=function(){function n(){}return n.decode=function(e,t,r,i){var a=new US(e),o=new fn,s=new Array,c=-1,f=-1;try{var d=null,p=!1,g=void 0;do{if(a.available()<4)g=Rr.TERMINATOR;else{var m=a.readBits(4);g=Rr.forBits(m)}switch(g){case Rr.TERMINATOR:break;case Rr.FNC1_FIRST_POSITION:case Rr.FNC1_SECOND_POSITION:p=!0;break;case Rr.STRUCTURED_APPEND:if(a.available()<16)throw new mt;c=a.readBits(8),f=a.readBits(8);break;case Rr.ECI:var x=n.parseECIValue(a);if(d=Pi.getCharacterSetECIByValue(x),d===null)throw new mt;break;case Rr.HANZI:var _=a.readBits(4),T=a.readBits(g.getCharacterCountBits(t));_===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,T);break;default:var A=a.readBits(g.getCharacterCountBits(t));switch(g){case Rr.NUMERIC:n.decodeNumericSegment(a,o,A);break;case Rr.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,A,p);break;case Rr.BYTE:n.decodeByteSegment(a,o,A,d,s,i);break;case Rr.KANJI:n.decodeKanjiSegment(a,o,A);break;default:throw new mt}break}}while(g!==Rr.TERMINATOR)}catch{throw new mt}return new Wm(e,o.toString(),s.length===0?null:s,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new mt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,r--}try{t.append(Es.decode(i,Pn.GB2312))}catch(c){throw new mt(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new mt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,r--}try{t.append(Es.decode(i,Pn.SHIFT_JIS))}catch(c){throw new mt(c)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new mt;for(var s=new Uint8Array(r),c=0;c<r;c++)s[c]=e.readBits(8);var f;i===null?f=Pn.guessEncoding(s,o):f=i.getName();try{t.append(Es.decode(s,f))}catch(d){throw new mt(d)}a.push(s)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new mt;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new mt;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new mt;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new mt;var i=e.readBits(10);if(i>=1e3)throw new mt;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new mt;var a=e.readBits(7);if(a>=100)throw new mt;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new mt;var o=e.readBits(4);if(o>=10)throw new mt;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new mt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),qS=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),a4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xF=function(){function n(){this.rsDecoder=new Gm(bo.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(oc.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new mF(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new qS(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,s=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),d=vF.getDataBlocks(f,s,c),p=0;try{for(var g=a4(d),m=g.next();!m.done;m=g.next()){var x=m.value;p+=x.getNumDataCodewords()}}catch(q){r={error:q}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var _=new Uint8Array(p),T=0;try{for(var A=a4(d),D=A.next();!D.done;D=A.next()){var x=D.value,U=x.getCodewords(),H=x.getNumDataCodewords();this.correctErrors(U,H);for(var X=0;X<H;X++)_[T++]=U[X]}}catch(q){a={error:q}}finally{try{D&&!D.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}return yF.decode(_,s,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Zi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),bF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wF=function(n){bF(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(Ot),_F=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AF=function(){function n(e,t,r,i,a,o,s){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),s=this.image,c=0;c<t;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<i&&!s.get(d,f);)d++;for(var p=0;d<i;){if(s.get(d,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,d);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;d++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new We},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=e;c>=0&&a.get(t,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c)&&s[1]<=r;)s[1]++,c++;if(c===o||s[1]>r)return NaN;for(;c<o&&!a.get(t,c)&&s[2]<=r;)s[2]++,c++;if(s[2]>r)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],s=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var d=_F(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.aboutEquals(f,c,s))return g.combineEstimate(c,s,f)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var m=new wF(s,c,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},n}(),SF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EF=function(n){SF(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,s=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,c,a)},e}(Ot),CF=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),D0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IF=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(jr.TRY_HARDER)!==void 0,r=e!=null&&e.get(jr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*n.MAX_MODULES));(s<n.MIN_SKIP||t)&&(s=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=s-1;d<a&&!c;d+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,d))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,d,g,r);if(m===!0)if(s=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>f[2]&&(d+=x-f[2]-s,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,d,o,r);m===!0&&(s=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return Ot.orderBestPatterns(_),new CF(_)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var c=s.getHeight(),f=s.getWidth();for(o=1;e+o<c&&t+o<f&&s.get(t+o,e+o);)a[2]++,o++;if(e+o>=c||t+o>=f)return!1;for(;e+o<c&&t+o<f&&!s.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=c||t+o>=f||a[3]>=r)return!1;for(;e+o<c&&t+o<f&&s.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(t,c)&&s[3]<r;)s[3]++,c++;if(c===o||s[3]>=r)return NaN;for(;c<o&&a.get(t,c)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(c,t);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,t)&&s[3]<r;)s[3]++,c++;if(c===o||s[3]>=r)return NaN;for(;c<o&&a.get(c,t)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),s=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var c=a/7,f=!1,d=this.possibleCenters,p=0,g=d.length;p<g;p++){var m=d[p];if(m.aboutEquals(c,s,o)){d[p]=m.combineEstimate(s,o,c),f=!0;break}}if(!f){var x=new EF(o,s,c);d.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=D0(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=n.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,s=this.possibleCenters.length;try{for(var c=D0(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=n.CENTER_QUORUM&&(a++,o+=d.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/s,g=0;try{for(var m=D0(this.possibleCenters),x=m.next();!x.done;x=m.next()){var d=x.value;g+=Math.abs(d.getEstimatedModuleSize()-p)}}catch(_){r={error:_}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return g<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new We;var o=this.possibleCenters,s;if(a>3){var c=0,f=0;try{for(var d=D0(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value,m=g.getEstimatedModuleSize();c+=m,f+=m*m}}catch(X){e={error:X}}finally{try{p&&!p.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}s=c/a;var x=Math.sqrt(f/a-s*s);o.sort(function(X,q){var j=Math.abs(q.getEstimatedModuleSize()-s),C=Math.abs(X.getEstimatedModuleSize()-s);return j<C?-1:j>C?1:0});for(var _=Math.max(.2*s,x),T=0;T<o.length&&o.length>3;T++){var A=o[T];Math.abs(A.getEstimatedModuleSize()-s)>_&&(o.splice(T,1),T--)}}if(o.length>3){var c=0;try{for(var D=D0(o),U=D.next();!U.done;U=D.next()){var H=U.value;c+=H.getEstimatedModuleSize()}}catch(q){r={error:q}}finally{try{U&&!U.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}s=c/o.length,o.sort(function(q,j){if(j.getCount()===q.getCount()){var C=Math.abs(j.getEstimatedModuleSize()-s),N=Math.abs(q.getEstimatedModuleSize()-s);return C<N?1:C>N?-1:0}else return j.getCount()-q.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),TF=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(jr.NEED_RESULT_POINT_CALLBACK);var t=new IF(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new We("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),s=sd.getProvisionalVersionForDimension(o),c=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var d=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/c,m=Math.floor(t.getX()+g*(d-t.getX())),x=Math.floor(t.getY()+g*(p-t.getY())),_=4;_<=16;_<<=1)try{f=this.findAlignmentInRegion(a,m,x,_);break}catch(U){if(!(U instanceof We))throw U}var T=n.createTransform(t,r,i,f,o),A=n.sampleGrid(this.image,T,o),D;return f===null?D=[i,t,r]:D=[i,t,r,f],new _5(A,D)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,s,c,f,d;return i!==null?(s=i.getX(),c=i.getY(),f=o-3,d=f):(s=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),f=o,d=o),jS.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,d,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=A5.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=Gn.round(Ot.distance(e,t)/i),o=Gn.round(Ot.distance(e,r)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new We("Dimensions could be not found.")}return s},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,s=e-(r-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*o);return o=1,c<0?(o=t/(t-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,s,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var s=Math.abs(r-e),c=Math.abs(i-t),f=-s/2,d=e<r?1:-1,p=t<i?1:-1,g=0,m=r+d,x=e,_=t;x!==m;x+=d){var T=a?_:x,A=a?x:_;if(g===1===this.image.get(T,A)){if(g===2)return Gn.distance(x,_,e,t);g++}if(f+=c,f>0){if(_===i)break;_+=p,f-=s}}return g===2?Gn.distance(r+d,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),s=Math.min(this.image.getWidth()-1,t+a);if(s-o<e*3)throw new We("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-c<e*3)throw new We("Alignment bottom exceeds estimated module size.");var d=new AF(this.image,o,c,s-o,f-c,e,this.resultPointCallback);return d.find()},n}(),By=function(){function n(){this.decoder=new xF}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(jr.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new TF(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof qS&&r.getOther().applyMirroredCorrection(i);var s=new Ua(r.getText(),r.getRawBytes(),void 0,i,jt.QR_CODE,void 0),c=r.getByteSegments();c!==null&&s.putMetadata(pa.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&s.putMetadata(pa.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(s.putMetadata(pa.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(pa.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new We;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],c=r[0];if(s>=c||a>=o)throw new We;if(o-a!==c-s&&(c=s+(o-a),c>=e.getWidth()))throw new We;var f=Math.round((c-s+1)/i),d=Math.round((o-a+1)/i);if(f<=0||d<=0)throw new We;if(d!==f)throw new We;var p=Math.floor(i/2);a+=p,s+=p;var g=s+Math.floor((f-1)*i)-c;if(g>0){if(g>p)throw new We;s-=g}var m=a+Math.floor((d-1)*i)-o;if(m>0){if(m>p)throw new We;a-=m}for(var x=new oc(f,d),_=0;_<d;_++)for(var T=a+Math.floor(_*i),A=0;A<f;A++)e.get(s+Math.floor(A*i),T)&&x.set(A,_);return x},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],s=!0,c=0;a<i&&o<r;){if(s!==t.get(a,o)){if(++c===5)break;s=!s}a++,o++}if(a===i||o===r)throw new We;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),RF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jn=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Gn.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=RF(e),s=o.next();!s.done;s=o.next()){var c=s.value;i[a++]=c}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Li.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),NF=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),DF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OF=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new NF(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,s=0,c=!1;o<t.getHeight();){var f=n.findVertices(t,o,s);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,s=0;try{for(var d=(r=void 0,DF(a)),p=d.next();!p.done;p=d.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(c=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var s=new Array(4),c=!1,f=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var d=n.findGuardPattern(e,a,i,r,!1,o,f);if(d!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,o,f);if(p!=null)d=p;else{i++;break}}s[0]=new Ot(d[0],i),s[1]=new Ot(d[1],i),c=!0;break}}var g=i+1;if(c){for(var m=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);g<t;g++){var d=n.findGuardPattern(e,p[0],g,r,!1,o,f);if(d!=null&&Math.abs(p[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-d[1])<n.MAX_PATTERN_DRIFT)p=d,m=0;else{if(m>n.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,s[2]=new Ot(p[0],g),s[3]=new Ot(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&Li.fill(s,null),s},n.findGuardPattern=function(e,t,r,i,a,o,s){Li.fillWithin(s,0,s.length,0);for(var c=t,f=0;e.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var d=c,p=0,g=o.length,m=a;d<i;d++){var x=e.get(d,r);if(x!==m)s[p]++;else{if(p===g-1){if(n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=s[0]+s[1],Er.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,m=!m}}return p===g-1&&n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return 1/0;var c=a/o;r*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=t[d]*c,m=p>g?p-g:g-p;if(m>r)return 1/0;f+=m}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),kF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},id=function(){function n(e,t){if(t.length===0)throw new Bt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Er.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=kF(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(p){t={error:p}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Er.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=this.field.add(t[s-o],r[s]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=0;s<r;s++)for(var c=t[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(c,i[f]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Bt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new fn,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),PF=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Bt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new MS;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),LF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MF=function(n){LF(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new id(i,new Int32Array([0])),i.one=new id(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Bt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new id(this,i)},e.PDF417_GF=new e(jn.NUMBER_OF_CODEWORDS,3),e}(PF),jF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BF=function(){function n(){this.field=MF.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new id(this.field,e),s=new Int32Array(t),c=!1,f=t;f>0;f--){var d=o.evaluateAt(this.field.exp(f));s[t-f]=d,d!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=jF(r),m=g.next();!m.done;m=g.next()){var x=m.value,_=this.field.exp(e.length-1-x),T=new id(this.field,new Int32Array([this.field.subtract(0,_),1]));p=p.multiply(T)}}catch(C){i={error:C}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var A=new id(this.field,s),D=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),A,t),U=D[0],H=D[1],X=this.findErrorLocations(U),q=this.findErrorMagnitudes(H,U,X),f=0;f<X.length;f++){var j=e.length-1-this.field.log(X[f]);if(j<0)throw Zi.getChecksumInstance();e[j]=this.field.subtract(e[j],q[f])}return X.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,s=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(r/2);){var f=a,d=s;if(a=o,s=c,a.isZero())throw Zi.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var x=o.getDegree()-a.getDegree(),_=this.field.multiply(o.getCoefficient(o.getDegree()),m);p=p.add(this.field.buildMonomial(x,_)),o=o.subtract(a.multiplyByMonomial(x,_))}c=p.multiply(s).subtract(d).negative()}var T=c.getCoefficient(0);if(T===0)throw Zi.getChecksumInstance();var A=this.field.inverse(T),D=c.multiply(A),U=o.multiply(A);return[D,U]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Zi.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new id(this.field,a),c=r.length,f=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(r[o]),p=this.field.subtract(0,e.evaluateAt(d)),g=this.field.inverse(s.evaluateAt(d));f[o]=this.field.multiply(p,g)}return f},n}(),Fy=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,s=i==null||a==null;if(o&&s)throw new We;o?(t=new Ot(0,i.getY()),r=new Ot(0,a.getY())):s&&(i=new Ot(e.getWidth()-1,t.getY()),a=new Ot(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var d=new Ot(c.getX(),f);r?i=d:o=d}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new Ot(p.getX(),g);r?a=m:s=m}return new n(this.image,i,a,o,s)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),FF=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),E5=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,s,c,f,d,p){if(o==="%%")return"%";if(t[++r]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=d?parseInt(d.substr(1)):void 0,m;switch(p){case"s":m=t[r];break;case"c":m=t[r][0];break;case"f":m=parseFloat(t[r]).toFixed(o);break;case"p":m=parseFloat(t[r]).toPrecision(o);break;case"e":m=parseFloat(t[r]).toExponential(o);break;case"x":m=parseInt(t[r]).toString(g||16);break;case"d":m=parseFloat(parseInt(t[r],g||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var x=parseInt(c),_=c&&c[0]+""=="0"?"0":" ";m.length<x;)m=s!==void 0?m+_:_+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),zF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HS=function(){function n(e){this.boundingBox=new Fy(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new E5,i=0;try{for(var a=zF(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),UF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VF=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},G0=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var o=UF(this.values.entries()),s=o.next();!s.done;s=o.next()){var c=VF(s.value,2),f=c[0],d=c[1];a(f,d)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return jn.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),qF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o4=function(n){qF(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=kv(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,d=1,p=0,g=s;g<c;g++)if(r[g]!=null){var m=r[g],x=m.getRowNumber()-f;if(x===0)p++;else if(x===1)d=Math.max(d,p),p=1,f=m.getRowNumber();else if(x<0||m.getRowNumber()>=t.getRowCount()||x>g)r[g]=null;else{var _=void 0;d>2?_=(d-2)*x:_=x;for(var T=_>=g,A=1;A<=_&&!T;A++)T=r[g-A]!=null;T?r[g]=null:(f=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=kv(this.getCodewords()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,d=o;d<s;d++)if(c[d]!=null){var p=c[d];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[d]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new G0,o=new G0,s=new G0,c=new G0;try{for(var f=kv(i),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:o.setValue(g*3+1);break;case 1:c.setValue(g/3),s.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(_){t={error:_}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<jn.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>jn.MAX_ROWS_IN_BARCODE)return null;var x=new FF(a.getValue()[0],o.getValue()[0],s.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(HS),HF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WF=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=jn.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],s=this.detectionResultColumns[e-1].getCodewords(),c=s;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[t],f[3]=c[t],t>0&&(f[0]=r[t-1],f[4]=s[t-1],f[5]=c[t-1]),t>1&&(f[8]=r[t-2],f[10]=s[t-2],f[11]=c[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=s[t+1],f[7]=c[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=s[t+2],f[13]=c[t+2]);try{for(var d=HF(f),p=d.next();!p.done;p=d.next()){var g=p.value;if(n.adjustRowNumber(o,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new E5,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),GF=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),$F=function(){function n(){}return n.initialize=function(){for(var e=0;e<jn.SYMBOL_TABLE.length;e++)for(var t=jn.SYMBOL_TABLE[e],r=t&1,i=0;i<jn.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(jn.BARS_IN_MODULE)),n.RATIOS_TABLE[e][jn.BARS_IN_MODULE-i-1]=Math.fround(a/jn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Gn.sum(e),r=new Int32Array(jn.BARS_IN_MODULE),i=0,a=0,o=0;o<jn.MODULES_IN_CODEWORD;o++){var s=t/(2*jn.MODULES_IN_CODEWORD)+o*t/jn.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return jn.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Gn.sum(e),r=new Array(jn.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=ky.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var s=0;s<n.RATIOS_TABLE.length;s++){for(var c=0,f=n.RATIOS_TABLE[s],d=0;d<jn.BARS_IN_MODULE;d++){var p=Math.fround(f[d]-r[d]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,o=jn.SYMBOL_TABLE[s])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(jn.SYMBOL_TABLE.length).map(function(e){return new Array(jn.BARS_IN_MODULE)}),n}(),YF=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),s4=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),XF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KF=function(n){XF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Eo),QF=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new KF;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new b5;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),ZF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JF=function(n){ZF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Eo),ez=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tz=function(n){ez(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Bt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new JF;i=yn.MAX_VALUE}this.buf=Li.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new b5;this.ensureCapacity(this.count+i),Er.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Li.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(QF),vr;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(vr||(vr={}));function WS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Xp;function Zu(n){if(typeof Xp>"u"&&(Xp=WS()),Xp===null)throw new Error("BigInt is not supported!");return Xp(n)}function nz(){var n=[];n[0]=Zu(1);var e=Zu(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var rz=function(){function n(){}return n.decode=function(e,t){var r=new fn(""),i=Pi.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],s=new YF;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Pi.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,s);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new mt;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw mt.getFormatInstance()}if(r.length()===0)throw mt.getFormatInstance();var c=new Wm(null,r.toString(),null,t);return c.setOther(s),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw mt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(yn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new fn;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var s=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new fn;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new fn;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new fn;t=n.textCompaction(e,t+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new fn;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(yn.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new fn;t=n.numericCompaction(e,t+1,g),r.setTimestamp(s4.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new fn;t=n.numericCompaction(e,t+1,m),r.setChecksum(yn.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new fn;t=n.numericCompaction(e,t+1,x),r.setFileSize(s4.parseLong(x.toString()));break;default:throw mt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw mt.getFormatInstance()}if(s!==-1){var _=t-s;r.isLastSegment()&&_--,r.setOptionalData(Li.copyOfRange(e,s,s+_))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[o]=c,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=vr.ALPHA,o=vr.ALPHA,s=0;s<r;){var c=e[s],f="";switch(a){case vr.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:a=vr.LOWER;break;case n.ML:a=vr.MIXED;break;case n.PS:o=a,a=vr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=vr.ALPHA;break}break;case vr.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:o=a,a=vr.ALPHA_SHIFT;break;case n.ML:a=vr.MIXED;break;case n.PS:o=a,a=vr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=vr.ALPHA;break}break;case vr.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:a=vr.PUNCT;break;case 26:f=" ";break;case n.LL:a=vr.LOWER;break;case n.AL:a=vr.ALPHA;break;case n.PS:o=a,a=vr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=vr.ALPHA;break}break;case vr.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=vr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=vr.ALPHA;break}break;case vr.ALPHA_SHIFT:if(a=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=vr.ALPHA;break}break;case vr.PUNCT_SHIFT:if(a=o,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=vr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=vr.ALPHA;break}break}f!==""&&i.append(f),s++}},n.byteCompaction=function(e,t,r,i,a){var o=new tz,s=0,c=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(d[s++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Zu(c)>>Zu(8*(5-g))));c=0,s=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=p);for(var m=0;m<s;m++)o.write(d[m]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var x=t[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Zu(c)>>Zu(8*(5-g))));c=0,s=0}}break}return a.append(Es.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var s=e[t++];if(t===e[0]&&(a=!0),s<n.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||s===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Zu(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Zu(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new mt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=WS()?nz():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),O0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iz=function(){function n(){}return n.decode=function(e,t,r,i,a,o,s){for(var c=new Fy(e,t,r,i,a),f=null,d=null,p,g=!0;;g=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,c,t,!0,o,s)),i!=null&&(d=n.getRowIndicatorColumn(e,c,i,!1,o,s)),p=n.merge(f,d),p==null)throw We.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<c.getMinY()||m.getMaxY()>c.getMaxY()))c=m;else break}p.setBoundingBox(c);var x=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(x,d);for(var _=f!=null,T=1;T<=x;T++){var A=_?T:x-T;if(p.getDetectionResultColumn(A)===void 0){var D=void 0;A===0||A===x?D=new o4(c,A===0):D=new HS(c),p.setDetectionResultColumn(A,D);for(var U=-1,H=U,X=c.getMinY();X<=c.getMaxY();X++){if(U=n.getStartColumn(p,A,X,_),U<0||U>c.getMaxX()){if(H===-1)continue;U=H}var q=n.detectCodeword(e,c.getMinX(),c.getMaxX(),_,U,X,o,s);q!=null&&(D.setCodeword(X,q),H=U,o=Math.min(o,q.getWidth()),s=Math.max(s,q.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Fy.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new WF(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var s=O0(i),c=s.next();!c.done;c=s.next()){var f=c.value;if(o+=a-f,f>0)break}}catch(m){t={error:m}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}for(var d=e.getCodewords(),p=0;o>0&&d[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=d.length-1;g>0&&d[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=O0(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var s=new o4(t,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var g=n.detectCodeword(e,0,e.getWidth(),i,d,p,a,o);g!=null&&(s.setCodeword(p,g),i?d=g.getStartX():d=g.getEndX())}return s},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>jn.MAX_CODEWORDS_IN_BARCODE)throw We.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[s][c+1].getValue(),d=s*e.getBarcodeColumnCount()+c;f.length===0?r.push(d):f.length===1?i[d]=f[0]:(o.push(d),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,jn.toIntArray(r),jn.toIntArray(o),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var c=0;c<o.length;c++)t[i[c]]=a[c][o[c]];try{return n.decodeCodewords(t,e,r)}catch(d){var f=d instanceof Zi;if(!f)throw d}if(o.length===0)throw Zi.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Zi.getChecksumInstance()}throw Zi.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++)o[s][c]=new G0;var f=0;try{for(var d=O0(e.getDetectionResultColumns()),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,O0(g.getCodewords())),x=m.next();!x.done;x=m.next()){var _=x.value;if(_!=null){var T=_.getRowNumber();if(T>=0){if(T>=o.length)continue;o[T][f].setValue(_.getValue())}}}}catch(A){i={error:A}}finally{try{x&&!x.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}f++}}catch(A){t={error:A}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,s=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var d=(a=void 0,O0(e.getDetectionResultColumn(t).getCodewords())),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+s*f*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,s,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var f=n.getModuleBitCount(e,t,r,i,a,o);if(f==null)return null;var d,p=Gn.sum(f);if(i)d=a+p;else{for(var g=0;g<f.length/2;g++){var m=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=m}d=a,a=d-p}if(!n.checkCodewordSkew(p,s,c))return null;var x=$F.getDecodedValue(f),_=jn.getCodeword(x);return _===-1?null:new GF(a,d,n.getCodewordBucketNumber(x),_)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var s=a,c=new Int32Array(8),f=0,d=i?1:-1,p=i;(i?s<r:s>=t)&&f<c.length;)e.get(s,o)===p?(c[f]++,s+=d):(f++,p=!p);return f===c.length||s===(i?r:t)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var s=a,c=i?-1:1,f=0;f<2;f++){for(;(i?s>=t:s<r)&&i===e.get(s,o);){if(Math.abs(a-s)>n.CODEWORD_SKEW_SIZE)return a;s+=c}c=-c,i=!i}return s},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw mt.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=rz.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Zi.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw mt.getFormatInstance();var r=e[0];if(r>e.length)throw mt.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw mt.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new E5,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new BF,n}(),az=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zy=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw We.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof mt||r instanceof Zi?We.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,s=OF.detectMultiple(e,t,r);try{for(var c=az(s.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,p=iz.decode(s.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),g=new Ua(p.getText(),p.getRawBytes(),void 0,d,jt.PDF_417);g.putMetadata(pa.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(pa.PDF417_EXTRA_METADATA,m),o.push(g)}}catch(x){i={error:x}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(x){return x})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?yn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*jn.MODULES_IN_CODEWORD/jn.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*jn.MODULES_IN_CODEWORD/jn.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*jn.MODULES_IN_CODEWORD/jn.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*jn.MODULES_IN_CODEWORD/jn.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),oz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),l4=function(n){oz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Eo),c4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sz=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(jr.TRY_HARDER)!==void 0,r=e==null?null:e.get(jr.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===jt.UPC_A||o===jt.UPC_E||o===jt.EAN_13||o===jt.EAN_8||o===jt.CODABAR||o===jt.CODE_39||o===jt.CODE_93||o===jt.CODE_128||o===jt.ITF||o===jt.RSS_14||o===jt.RSS_EXPANDED});a&&!t&&i.push(new W0(e)),r.includes(jt.QR_CODE)&&i.push(new By),r.includes(jt.DATA_MATRIX)&&i.push(new jy),r.includes(jt.AZTEC)&&i.push(new Ly),r.includes(jt.PDF_417)&&i.push(new zy),a&&t&&i.push(new W0(e))}i.length===0&&(t||i.push(new W0(e)),i.push(new By),i.push(new jy),i.push(new Ly),i.push(new zy),t&&i.push(new W0(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=c4(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new l4("No readers where selected, nothing can be read.");try{for(var i=c4(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof l4)continue}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new We("No MultiFormat Readers were able to detect the code.")},n}(),lz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cz=function(n){lz(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new sz;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Vh),uz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){uz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new zy,t)||this}return e})(Vh);var fz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){fz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new By,t)||this}return e})(Vh);var Uy;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Uy||(Uy={}));const Kp=Uy;var GS=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ff(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new ff(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Bt("No error correction bytes");var r=e.length-t;if(r<=0)throw new Bt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Er.arraycopy(e,0,a,0,r);var o=new ff(this.field,a);o=o.multiplyByMonomial(t,1);for(var s=o.divide(i)[1],c=s.getCoefficients(),f=t-c.length,d=0;d<f;d++)e[r+d]=0;Er.arraycopy(c,0,e,r+f,c.length)},n}(),$0=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=r[o],c=0;c<i-1;c++){var f=s[c];f===s[c+1]&&f===r[o+1][c]&&f===r[o+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var c=r[o];s+6<i&&c[s]===1&&c[s+1]===0&&c[s+2]===1&&c[s+3]===1&&c[s+4]===1&&c[s+5]===0&&c[s+6]===1&&(n.isWhiteHorizontal(c,s-4,s)||n.isWhiteHorizontal(c,s+7,s+11))&&t++,o+6<a&&r[o][s]===1&&r[o+1][s]===0&&r[o+2][s]===1&&r[o+3][s]===1&&r[o+4][s]===1&&r[o+5][s]===0&&r[o+6][s]===1&&(n.isWhiteVertical(r,s,o-4,o)||n.isWhiteVertical(r,s,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=r[o],c=0;c<i;c++)s[c]===1&&t++;var f=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(t*2-f)*10/f);return d*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Bt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var c=0,f=-1,d=0;d<a;d++){var p=t?o[s][d]:o[d][s];p===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),dz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hz=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=dz(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Li.fill(o,e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],s=0,c=this.width;s<c;++s)if(a[s]!==o[s])return!1;return!0},n.prototype.toString=function(){for(var e=new fn,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Vy=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new fn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),pz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tr=function(n){pz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Eo),u4=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Ji;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],f=c[0],d=c[1];if(r.setBoolean(f,d,s),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,s)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,s)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Ji;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,a,s)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,s=r.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<r.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(n.isEmpty(r.get(f,s))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,t!==255&&$0.getDataMaskBit(t,f,s)&&(d=!d),r.setBoolean(f,s,d)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new Tr("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-yn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Bt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Vy.isValidMaskPattern(t))throw new Tr("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Ji;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Tr("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Tr("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Tr;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Tr;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Tr;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var c=0;c!==o;c++){var f=i[c];f>=0&&n.isEmpty(t.get(f,s))&&n.embedPositionAdjustmentPattern(f-2,s-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),gz=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),f4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return $0.applyMaskPenaltyRule1(e)+$0.applyMaskPenaltyRule2(e)+$0.applyMaskPenaltyRule3(e)+$0.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Kp.CHARACTER_SET)!==void 0;a&&(i=r.get(Kp.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new Ji;if(o===Rr.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Pi.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,s)}this.appendModeInfo(o,s);var f=new Ji;this.appendBytes(e,o,f,i);var d;if(r!==null&&r.get(Kp.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Kp.QR_VERSION).toString(),10);d=sd.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,s,f,d);if(!this.willFit(g,d,t))throw new Tr("Data too big for requested version")}else d=this.recommendVersion(t,o,s,f);var m=new Ji;m.appendBitArray(s);var x=o===Rr.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(x,d,o,m),m.appendBitArray(f);var _=d.getECBlocksForLevel(t),T=d.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(T,m);var A=this.interleaveWithECBytes(m,d.getTotalCodewords(),T,_.getNumBlocks()),D=new Vy;D.setECLevel(t),D.setMode(o),D.setVersion(d);var U=d.getDimensionForVersion(),H=new hz(U,U),X=this.chooseMaskPattern(A,t,d,H);return D.setMaskPattern(X),u4.buildMatrix(A,t,d,X,H),D.setMatrix(H),D},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,sd.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(s,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Pi.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Rr.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(n.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Rr.BYTE}return i?Rr.ALPHANUMERIC:r?Rr.NUMERIC:Rr.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Es.encode(e,Pi.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Vy.NUM_MASK_PATTERNS;s++){u4.buildMatrix(e,t,r,s,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=s)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=sd.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Tr("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),s=i-o,c=(e+7)/8;return s>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Tr("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Tr("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Tr("Block ID too large");var s=e%r,c=r-s,f=Math.floor(e/r),d=f+1,p=Math.floor(t/r),g=p+1,m=f-p,x=d-g;if(m!==x)throw new Tr("EC bytes mismatch");if(r!==c+s)throw new Tr("RS blocks mismatch");if(e!==(p+m)*c+(g+x)*s)throw new Tr("Total bytes mismatch");i<c?(a[0]=p,o[0]=m):(a[0]=g,o[0]=x)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,s,c;if(e.getSizeInBytes()!==r)throw new Tr("Number of bits and data bytes does not match");for(var f=0,d=0,p=0,g=new Array,m=0;m<i;++m){var x=new Int32Array(1),_=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,m,x,_);var T=x[0],A=new Uint8Array(T);e.toBytes(8*f,A,0,T);var D=n.generateECBytes(A,_[0]);g.push(new gz(A,D)),d=Math.max(d,T),p=Math.max(p,D.length),f+=x[0]}if(r!==f)throw new Tr("Data bytes does not match offset");for(var U=new Ji,m=0;m<d;++m)try{for(var H=(a=void 0,f4(g)),X=H.next();!X.done;X=H.next()){var q=X.value,A=q.getDataBytes();m<A.length&&U.appendBits(A[m],8)}}catch(L){a={error:L}}finally{try{X&&!X.done&&(o=H.return)&&o.call(H)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var j=(s=void 0,f4(g)),C=j.next();!C.done;C=j.next()){var q=C.value,D=q.getErrorCorrectionBytes();m<D.length&&U.appendBits(D[m],8)}}catch(L){s={error:L}}finally{try{C&&!C.done&&(c=j.return)&&c.call(j)}finally{if(s)throw s.error}}if(t!==U.getSizeInBytes())throw new Tr("Interleaving error: "+t+" and "+U.getSizeInBytes()+" differ.");return U},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new GS(bo.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Tr(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Rr.NUMERIC:n.appendNumericBytes(e,r);break;case Rr.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Rr.BYTE:n.append8BitBytes(e,r,i);break;case Rr.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Tr("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),s=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Tr;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Tr;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Es.encode(e,r)}catch(c){throw new Tr(c)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];t.appendBits(s,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Es.encode(e,Pi.SJIS)}catch(p){throw new Tr(p)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,s=r[a+1]&255,c=o<<8&4294967295|s,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Tr("Invalid byte sequence");var d=(f>>8)*192+(f&255);t.appendBits(d,13)}},n.appendECI=function(e,t){t.appendBits(Rr.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Pi.UTF8.getName(),n})();var mz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){mz(e,n);function e(t,r,i,a,o,s,c,f){var d=n.call(this,s,c)||this;if(d.yuvData=t,d.dataWidth=r,d.dataHeight=i,d.left=a,d.top=o,a+s>r||o+c>i)throw new Bt("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(s,c),d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Er.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Er.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<r;s++){var c=s*t;Er.arraycopy(this.yuvData,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var c=s*t,f=0;f<t;f++){var d=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var s=o+t/2,c=o,f=o+t-1;c<s;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},e.prototype.invert=function(){return new w5(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Hm);var vz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){vz(e,n);function e(t,r,i,a,o,s,c){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=c,t.BYTES_PER_ELEMENT===4){for(var d=r*i,p=new Uint8ClampedArray(d),g=0;g<d;g++){var m=t[g],x=m>>16&255,_=m>>7&510,T=m&255;p[g]=(x+_+T)/4&255}f.luminances=p}else f.luminances=t;if(a===void 0&&(f.dataWidth=r),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Bt("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Er.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Er.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<r;s++){var c=s*t;Er.arraycopy(this.luminances,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new w5(this)},e})(Hm);var yz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xz=function(n){yz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Pi),bz=function(){function n(){}return n.ISO_8859_1=Pi.ISO8859_1,n}(),qy,wz=301,_z=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=wz);return{LOG:n,ALOG:e}};qy=_z([],[]),qy.LOG;qy.ALOG;var d4;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(d4||(d4={}));var h4=129,$S=230,Az=231,Sz=235,Ez=236,Cz=237,Iz=238,Tz=239,Rz=240,Pv=254,Nz=254,p4="[)>05",g4="[)>06",m4="",cr=0,ua=1,Qa=2,Oi=3,Xi=4,La=5,Dz=function(){function n(){}return n.prototype.getEncodingMode=function(){return cr},n.prototype.encode=function(e){var t=sl.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=sl.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case La:e.writeCodeword(Az),e.signalEncoderChange(La);return;case ua:e.writeCodeword($S),e.signalEncoderChange(ua);return;case Oi:e.writeCodeword(Iz),e.signalEncoderChange(Oi);break;case Qa:e.writeCodeword(Tz),e.signalEncoderChange(Qa);break;case Xi:e.writeCodeword(Rz),e.signalEncoderChange(Xi);break;default:throw new Error("Illegal mode: "+i)}else sl.isExtendedASCII(r)?(e.writeCodeword(Sz),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(sl.isDigit(e)&&sl.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),Oz=function(){function n(){}return n.prototype.getEncodingMode=function(){return La},n.prototype.encode=function(e){var t=new fn;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=sl.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(cr);break}}var a=t.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,Pn.getCharAt(a));else if(a<=1555)t.setCharAt(0,Pn.getCharAt(Math.floor(a/250)+249)),t.insert(1,Pn.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),C5=function(){function n(){}return n.prototype.getEncodingMode=function(){return ua},n.prototype.encodeMaximal=function(e){for(var t=new fn,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var s=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(t.length()%3);(d===2&&f!==2||d===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword($S),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new fn;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new fn;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var f=t.length();if(f%3===0){var d=sl.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(cr);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Pv)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Pv),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Pv)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(cr)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new fn;return a.append(r),a.append(i),a.toString()},n}(),kz=function(){function n(){}return n.prototype.getEncodingMode=function(){return Xi},n.prototype.encode=function(e){for(var t=new fn;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=sl.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(cr);break}}}t.append(Pn.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,s=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(cr)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Pn.getCharAt(e-64)):sl.illegalCharacter(Pn.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(r<<18)+(i<<12)+(a<<6)+o,c=s>>16&255,f=s>>8&255,d=s&255,p=new fn;return p.append(c),t>=2&&p.append(f),t>=3&&p.append(d),p.toString()},n}(),Pz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zn=function(){function n(e,t,r,i,a,o,s,c){s===void 0&&(s=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var o,s;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=Lz(jz),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(t===1&&d.rectangular)&&!(t===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),Mz=function(n){Pz(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Zn),jz=[new Zn(!1,3,5,8,8,1),new Zn(!1,5,7,10,10,1),new Zn(!0,5,7,16,6,1),new Zn(!1,8,10,12,12,1),new Zn(!0,10,11,14,6,2),new Zn(!1,12,12,14,14,1),new Zn(!0,16,14,24,10,1),new Zn(!1,18,14,16,16,1),new Zn(!1,22,18,18,18,1),new Zn(!0,22,18,16,10,2),new Zn(!1,30,20,20,20,1),new Zn(!0,32,24,16,14,2),new Zn(!1,36,24,22,22,1),new Zn(!1,44,28,24,24,1),new Zn(!0,49,28,22,14,2),new Zn(!1,62,36,14,14,4),new Zn(!1,86,42,16,16,4),new Zn(!1,114,48,18,18,4),new Zn(!1,144,56,20,20,4),new Zn(!1,174,68,22,22,4),new Zn(!1,204,84,24,24,4,102,42),new Zn(!1,280,112,14,14,16,140,56),new Zn(!1,368,144,16,16,16,92,36),new Zn(!1,456,192,18,18,16,114,48),new Zn(!1,576,224,20,20,16,144,56),new Zn(!1,696,272,22,22,16,174,68),new Zn(!1,816,336,24,24,16,136,56),new Zn(!1,1050,408,18,18,36,175,68),new Zn(!1,1304,496,20,20,36,163,62),new Mz],Bz=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),r=new fn,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new fn,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Zn.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),Fz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zz=function(n){Fz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Oi},e.prototype.encode=function(t){for(var r=new fn;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=sl.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(cr);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):sl.illegalCharacter(Pn.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(Nz),t.getNewEncoding()<0&&t.signalEncoderChange(cr)},e}(C5),Uz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vz=function(n){Uz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Qa},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(C5),sl=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=h4+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new C5,s=[new Dz,o,new Vz,new zz,new kz,new Oz],c=new Bz(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(p4)&&e.endsWith(m4)?(c.writeCodeword(Ez),c.setSkipAtEnd(2),c.pos+=p4.length):e.startsWith(g4)&&e.endsWith(m4)&&(c.writeCodeword(Cz),c.setSkipAtEnd(2),c.pos+=g4.length);var f=cr;for(a&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)s[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();d<p&&f!==cr&&f!==La&&f!==Xi&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append(h4);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Oi&&i===Oi){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return cr}else if(r===Xi&&i===Xi){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return cr}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===cr?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(t+a===e.length){Li.fill(o,0),Li.fill(s,0);var c=this.findMinimums(i,s,yn.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[cr]===c)return cr;if(f===1){if(o[La]>0)return La;if(o[Xi]>0)return Xi;if(o[Qa]>0)return Qa;if(o[Oi]>0)return Oi}return ua}var d=e.charCodeAt(t+a);if(a++,this.isDigit(d)?i[cr]+=.5:this.isExtendedASCII(d)?(i[cr]=Math.ceil(i[cr]),i[cr]+=2):(i[cr]=Math.ceil(i[cr]),i[cr]++),this.isNativeC40(d)?i[ua]+=2/3:this.isExtendedASCII(d)?i[ua]+=8/3:i[ua]+=4/3,this.isNativeText(d)?i[Qa]+=2/3:this.isExtendedASCII(d)?i[Qa]+=8/3:i[Qa]+=4/3,this.isNativeX12(d)?i[Oi]+=2/3:this.isExtendedASCII(d)?i[Oi]+=13/3:i[Oi]+=10/3,this.isNativeEDIFACT(d)?i[Xi]+=3/4:this.isExtendedASCII(d)?i[Xi]+=17/4:i[Xi]+=13/4,this.isSpecialB256(d)?i[La]+=4:i[La]++,a>=4){if(Li.fill(o,0),Li.fill(s,0),this.findMinimums(i,s,yn.MAX_VALUE,o),s[cr]<this.min(s[La],s[ua],s[Qa],s[Oi],s[Xi]))return cr;if(s[La]<s[cr]||s[La]+1<this.min(s[ua],s[Qa],s[Oi],s[Xi]))return La;if(s[Xi]+1<this.min(s[La],s[ua],s[Qa],s[Oi],s[cr]))return Xi;if(s[Qa]+1<this.min(s[La],s[ua],s[Xi],s[Oi],s[cr]))return Qa;if(s[Oi]+1<this.min(s[La],s[ua],s[Xi],s[Qa],s[cr]))return Oi;if(s[ua]+1<this.min(s[cr],s[La],s[Xi],s[Qa])){if(s[ua]<s[Oi])return ua;if(s[ua]===s[Oi]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Oi;if(!this.isNativeX12(g))break;p++}return ua}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Li.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=yn.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Lv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v4=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Es.encode(e,this.charset)!=null}catch{return!1}},n}(),qz=function(){function n(e,t,r){var i,a,o,s,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new v4(xz.forName(N))}),this.encoders=[];var d=[];d.push(new v4(bz.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var x=(i=void 0,Lv(d)),_=x.next();!_.done;_=x.next()){var T=_.value,A=e.charAt(g),D=A.charCodeAt(0);if(D===r||T.canEncode(A)){m=!0;break}}}catch(N){i={error:N}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}if(!m)try{for(var U=(o=void 0,Lv(this.ENCODERS)),H=U.next();!H.done;H=U.next()){var T=H.value;if(T.canEncode(e.charAt(g))){d.push(T),m=!0;break}}}catch(N){o={error:N}}finally{try{H&&!H.done&&(s=U.return)&&s.call(U)}finally{if(o)throw o.error}}m||(p=!0)}if(d.length===1&&!p)this.encoders=[d[0]];else{this.encoders=[];var X=0;try{for(var q=Lv(d),j=q.next();!j.done;j=q.next()){var T=j.value;this.encoders[X++]=T}}catch(N){c={error:N}}finally{try{j&&!j.done&&(f=q.return)&&f.call(q)}finally{if(c)throw c.error}}}var C=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){C=g;break}}this.priorityEncoderIndex=C}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Es.encode(Pn.getCharAt(e),this.encoders[t].name)},n}(),Hz=3,Wz=function(){function n(e,t,r){this.fnc1=r;var i=new qz(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new fn,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var s=e.charAt(i).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(s===o||t.canEncode(s,d))&&this.addEdge(r,i+1,new y4(s,t,d,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new y4[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var s=0;s<t.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][s],r);for(var s=0;s<t.length();s++)a[o-1][s]=null}for(var c=-1,f=yn.MAX_VALUE,s=0;s<t.length();s++)if(a[i][s]!=null){var d=a[i][s];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=s)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=t.encode(g.c,g.encoderIndex),o=m.length-1;o>=0;o--)p.unshift(m[o]&255);var x=g.previous===null?0:g.previous.encoderIndex;x!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var _=[],o=0;o<_.length;o++)_[o]=p[o];return _},n}(),y4=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,s=i===null?0:i.encoderIndex;s!==r&&(o+=Hz),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),Gz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var x4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(x4||(x4={}));(function(n){Gz(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Wz);var $z=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),b4=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),Yz=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),Xz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),I5=function(n){Xz(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+yn.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(Yz),Kz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qz=function(n){Kz(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(I5);function Zz(n,e,t){return new Qz(n,e,t)}function k0(n,e,t){return new I5(n,e,t)}var Jz=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],df=0,Yg=1,_s=2,YS=3,Kl=4,eU=new I5(null,0,0),Mv=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],tU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function nU(n){var e,t;try{for(var r=tU(n),i=r.next();!i.done;i=r.next()){var a=i.value;Li.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[df][Kl]=0,n[Yg][Kl]=0,n[Yg][df]=28,n[YS][Kl]=0,n[_s][Kl]=0,n[_s][df]=15,n}var XS=nU(Li.createInt32Array(6,6)),rU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iU=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Mv[this.mode][e];i=k0(i,a&65535,a>>16),r+=a>>16}var o=e===_s?4:5;return i=k0(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===_s?4:5;return r=k0(r,XS[this.mode][e],i),r=k0(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Kl||this.mode===_s){var a=Mv[r][df];t=k0(t,a&65535,a>>16),i+=a>>16,r=df}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new n(t,r,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=Zz(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Mv[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Ji;try{for(var s=rU(i),c=s.next();!c.done;c=s.next()){var f=c.value;f.appendTo(o,e)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return Pn.format("%s bits=%d bytes=%d",Jz[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(eU,df,0,0),n}();function aU(n){var e=Pn.getCharCode(" "),t=Pn.getCharCode("."),r=Pn.getCharCode(",");n[df][e]=1;for(var i=Pn.getCharCode("Z"),a=Pn.getCharCode("A"),o=a;o<=i;o++)n[df][o]=o-a+2;n[Yg][e]=1;for(var s=Pn.getCharCode("z"),c=Pn.getCharCode("a"),o=c;o<=s;o++)n[Yg][o]=o-c+2;n[_s][e]=1;for(var f=Pn.getCharCode("9"),d=Pn.getCharCode("0"),o=d;o<=f;o++)n[_s][o]=o-d+2;n[_s][r]=12,n[_s][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[YS][Pn.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)Pn.getCharCode(m[g])>0&&(n[Kl][Pn.getCharCode(m[g])]=g);return n}var jv=aU(Li.createInt32Array(5,256)),Qp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oU=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=Pn.getCharCode(" "),t=Pn.getCharCode(`
`),r=b4.singletonList(iU.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Pn.getCharCode("\r"):a=o===t?2:0;break;case Pn.getCharCode("."):a=o===e?3:0;break;case Pn.getCharCode(","):a=o===e?4:0;break;case Pn.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var s=b4.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=Qp(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.updateStateForChar(c,t,a)}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=jv[e.getMode()][i]>0,o=null,s=0;s<=Kl;s++){var c=jv[s][i];if(c>0){if(o==null&&(o=e.endBinaryShift(t)),!a||s===e.getMode()||s===_s){var f=o.latchAndAppend(s,c);r.push(f)}if(!a&&XS[e.getMode()][s]>=0){var d=o.shiftAndAppend(s,c);r.push(d)}}}if(e.getBinaryShiftByteCount()>0||jv[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var s=Qp(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForPair(f,t,r,o)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Kl,r)),e.getMode()!==Kl&&i.push(a.shiftAndAppend(Kl,r)),r===3||r===4){var o=a.latchAndAppend(_s,16-r).latchAndAppend(_s,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var s=Qp(e),c=s.next();!c.done;c=s.next()){var f=c.value,d=!0,p=function(T){if(T.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(T)&&(o=o.filter(function(A){return A!==T}))};try{for(var g=(i=void 0,Qp(o)),m=g.next();!m.done;m=g.next()){var x=m.value,_=p(x);if(_==="break")break}}catch(T){i={error:T}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}d&&o.push(f)}}catch(T){t={error:T}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n}(),sU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new oU(e).encode(),a=yn.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,s,c,f,d,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(s=r<0,c=Math.abs(r),c>(s?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Bt(Pn.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,s),d=n.WORD_SIZE[c];var g=f-f%d;if(p=n.stuffBits(i,d),p.getSize()+a>g)throw new Bt("Data to large for user specified layer");if(s&&p.getSize()>d*64)throw new Bt("Data to large for user specified layer")}else{d=0,p=null;for(var m=0;;m++){if(m>n.MAX_NB_BITS)throw new Bt("Data too large for an Aztec code");if(s=m<=3,c=s?m+1:m,f=n.totalBitsInLayer(c,s),!(o>f)){(p==null||d!==n.WORD_SIZE[c])&&(d=n.WORD_SIZE[c],p=n.stuffBits(i,d));var g=f-f%d;if(!(s&&p.getSize()>d*64)&&p.getSize()+a<=g)break}}}var x=n.generateCheckWords(p,f,d),_=p.getSize()/d,T=n.generateModeMessage(s,c,_),A=(s?11:14)+c*4,D=new Int32Array(A),U;if(s){U=A;for(var m=0;m<D.length;m++)D[m]=m}else{U=A+1+2*yn.truncDivision(yn.truncDivision(A,2)-1,15);for(var H=yn.truncDivision(A,2),X=yn.truncDivision(U,2),m=0;m<H;m++){var q=m+yn.truncDivision(m,15);D[H-m-1]=X-q-1,D[H+m]=X+q+1}}for(var j=new oc(U),m=0,C=0;m<c;m++){for(var N=(c-m)*4+(s?9:12),L=0;L<N;L++)for(var R=L*2,I=0;I<2;I++)x.get(C+R+I)&&j.set(D[m*2+I],D[m*2+L]),x.get(C+N*2+R+I)&&j.set(D[m*2+L],D[A-1-m*2-I]),x.get(C+N*4+R+I)&&j.set(D[A-1-m*2-I],D[A-1-m*2-L]),x.get(C+N*6+R+I)&&j.set(D[A-1-m*2-L],D[m*2+I]);C+=N*8}if(n.drawModeMessage(j,s,U,T),s)n.drawBullsEye(j,yn.truncDivision(U,2),5);else{n.drawBullsEye(j,yn.truncDivision(U,2),7);for(var m=0,L=0;m<yn.truncDivision(A,2)-1;m+=15,L+=16)for(var I=yn.truncDivision(U,2)&1;I<U;I+=2)j.set(yn.truncDivision(U,2)-L,I),j.set(yn.truncDivision(U,2)+L,I),j.set(I,yn.truncDivision(U,2)-L),j.set(I,yn.truncDivision(U,2)+L)}var P=new $z;return P.setCompact(s),P.setSize(U),P.setLayers(c),P.setCodeWords(_),P.setMatrix(j),P},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Ji;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=yn.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+yn.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,s=new GS(n.getGF(r)),c=yn.truncDivision(t,r),f=n.bitsToWords(e,r,c);s.encode(f,c-o);var d=t%r,p=new Ji;p.appendBits(0,d);try{for(var g=sU(Array.from(f)),m=g.next();!m.done;m=g.next()){var x=m.value;p.appendBits(x,r)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var s=0,c=0;c<t;c++)s|=e.get(a*t+c)?1<<t-c-1:0;i[a]=s}return i},n.getGF=function(e){switch(e){case 4:return bo.AZTEC_PARAM;case 6:return bo.AZTEC_DATA_6;case 8:return bo.AZTEC_DATA_8;case 10:return bo.AZTEC_DATA_10;case 12:return bo.AZTEC_DATA_12;default:throw new Bt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Ji,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var s=0,c=0;c<t;c++)(o+c>=i||e.get(o+c))&&(s|=1<<t-1-c);(s&a)===a?(r.appendBits(s&a,t),o--):(s&a)===0?(r.appendBits(s|1,t),o--):r.appendBits(s,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const lU=({onScanSuccess:n,onClose:e})=>{const t=ue.useRef(null),r=ue.useRef(null);return ue.useEffect(()=>{const i=new cz;return r.current=i,i.decodeFromVideoDevice(null,t.current,a=>{a&&(i.reset(),n(a.getText()))}),()=>{try{i.reset()}catch{}}},[n]),v.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000e6",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[v.jsx("video",{ref:t,style:{width:"90%",maxWidth:"500px",borderRadius:"12px",border:"3px solid white"},muted:!0,autoPlay:!0,playsInline:!0}),v.jsx("button",{onClick:()=>{var i;(i=r.current)==null||i.reset(),e()},style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"סגור סורק"})]})};function cU(n){const e=[...new Set(n)].sort((t,r)=>t-r);for(let t=1;t<=e.length+1;t++)if(!e.includes(t))return t}async function uU(n,e=""){const t=Yn(_t,"items",n),r=await Nh(t);if(!r.exists())throw new Error("Item not found");const{ItemId:i,...a}=r.data();await pd(tn(_t,"deletedItems"),{...a,deletedAt:_r(),deletedBy:e}),await Uh(t)}async function fU(n,e=""){const t=Yn(_t,"deletedItems",n),r=await Nh(t);if(!r.exists())throw new Error("Deleted item not found");const i=r.data(),o=(await $n(tn(_t,"items"))).docs.map(c=>c.data().ItemId).filter(c=>typeof c=="number"),s=cU(o);await f5(Yn(tn(_t,"items")),{...i,ItemId:s,createdAt:_r(),updatedAt:_r(),createdBy:e,updatedBy:e,isActive:!0}),await Uh(t)}async function dU(n){const e=ul(tn(_t,"items"),nu("ItemId","==",Number(n))),t=await $n(e);if(!t.empty){const r=t.docs[0];return{id:r.id,...r.data()}}throw new Error("לא נמצא מוצר עם ברקוד זה")}const hU=({item:n,onConfirm:e,onCancel:t})=>{const[r,i]=ue.useState(1),a=r>=1&&r<=n.quantity;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-box",dir:"rtl",children:[v.jsx("h3",{style:{textAlign:"center"},children:n.name}),v.jsx("img",{src:n.imageUrl,alt:n.name,style:{width:"100%",maxHeight:"200px",objectFit:"cover"}}),v.jsxs("p",{children:["מזהה מוצר: ",n.ItemId]}),v.jsxs("p",{children:["כמות זמינה: ",n.quantity]}),v.jsxs("div",{style:{marginTop:"1rem"},children:[v.jsx("label",{children:"בחר כמות:"}),v.jsx("input",{type:"number",value:r,min:1,max:n.quantity,onChange:o=>i(+o.target.value),style:{width:"100%",padding:"10px",marginTop:"0.5rem",border:a?"1px solid #ccc":"2px solid red"}}),!a&&v.jsxs("p",{style:{color:"red",marginTop:"0.5rem"},children:["כמות לא תקינה. יש לבחור בין 1 ל־",n.quantity]})]}),v.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between"},children:[v.jsx("button",{className:"btn btn-red",onClick:t,children:"ביטול"}),v.jsx("button",{className:"btn btn-green",onClick:()=>e(r),disabled:!a,children:"אישור"})]})]})})},pU=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),x=Math.min(a,m+p-1);x-m+1<p&&(m=Math.max(1,x-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let T=m;T<=x;T++)_.push(T);return x<a&&(x<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return v.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"1.5rem 0",direction:"rtl"},children:[v.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",d," מתוך ",e," מוצרים"]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[v.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(M1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:v.jsx(v5,{size:o?16:20})},`dots-${g}`);const m=p===n;return v.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),v.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(L1,{size:o?16:20})})]})]})},KS=({showCatalogPopup:n,setShowCatalogPopup:e,searchTerm:t,setSearchTerm:r,availableItems:i,toggleSelectItem:a,changeQty:o,form:s,loadingItems:c,setAvailableItems:f,hideBarcodeScanner:d=!1})=>{const[p,g]=ue.useState(!1),[m,x]=ue.useState(null),[_,T]=ue.useState([]),[A,D]=ue.useState(1),[U,H]=ue.useState(window.innerWidth<=768),X=U?6:8;if(ue.useEffect(()=>{const z=()=>{const ee=window.innerWidth<=768;ee!==U&&(H(ee),D(1))};return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[U]),ue.useEffect(()=>{D(1)},[t]),ue.useEffect(()=>{n&&(console.log("🔍 Modal נפתח, מאתחל local state עם פריטים:",i.length),T([...i]))},[n,i]),!n)return null;const q=async z=>{console.log("📱 ברקוד נסרק:",z);try{const ee=await dU(z);console.log("🔍 פריט נמצא במאגר:",ee);const ae=i.find(he=>he.ItemId===ee.ItemId||he.id===ee.id);if(console.log("🔍 מחפש פריט ברשימה זמינה:",ae),!ae){console.log("❌ הפריט לא נמצא ברשימת הפריטים הזמינים לתקופה זו"),alert("הפריט לא זמין לתקופת ההזמנה שלך"),g(!1);return}if(_.some(he=>(he.ItemId===ee.ItemId||he.id===ee.id)&&he.selected)){console.log("⚠️ המוצר כבר נבחר ברשימה"),alert("המוצר כבר נבחר ברשימה"),g(!1);return}ae.quantity>0?(console.log("✅ המוצר זמין, פותח מודל אישור"),x(ae),g(!1)):(console.log("❌ המוצר לא זמין במלאי לתקופה זו"),alert("המוצר לא זמין במלאי לתקופה זו"),g(!1))}catch(ee){console.error("❌ שגיאה באיתור הפריט:",ee),alert(ee.message),g(!1)}},j=z=>{console.log("🔄 משנה בחירה עבור פריט:",z),T(ee=>ee.map(ae=>ae.id===z?{...ae,selected:!ae.selected,selectedQty:ae.selected?0:1}:ae))},C=(z,ee)=>{let ae=parseInt(ee)||0;ae>z.quantity&&(ae=z.quantity),ae<0&&(ae=0),console.log("🔢 משנה כמות עבור",z.name,"לכמות:",ae),T(Q=>Q.map(he=>he.id===z.id?{...he,selectedQty:ae,selected:ae>0}:he))},N=()=>{console.log("💾 מחיל שינויים על state הראשי..."),_.forEach(z=>{const ee=i.find(ae=>ae.id===z.id);ee&&(z.selected!==ee.selected&&a(z.id),z.selectedQty!==ee.selectedQty&&o(z.id,z.selectedQty))})},L=()=>{console.log("✅ מאשר בחירות ומחיל שינויים..."),N(),e(!1)},R=(z="unknown")=>{console.log("❌ מבטל בחירות וסוגר מודל - מקור:",z),e(!1)},I=z=>{z.target===z.currentTarget?(console.log("🖱️ קליק על overlay - סוגר מודל"),R("overlay-click")):console.log("🖱️ קליק בתוך המודל - לא סוגר")},P=_.filter(z=>z.name.toLowerCase().includes(t.toLowerCase())),M=(A-1)*X,K=M+X,F=P.slice(M,K);return console.log("📊 סטטיסטיקות פריטים:",{totalItems:_.length,filteredItems:P.length,currentPageItems:F.length,currentPage:A,itemsPerPage:X}),v.jsxs("div",{className:"modal-overlay",onClick:I,children:[v.jsxs("div",{className:"modal-box",dir:"rtl",onClick:z=>z.stopPropagation(),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[!d&&v.jsx("button",{style:{width:"180px"},className:"btn btn-gray",onClick:()=>{console.log("📱 פותח סורק ברקוד..."),g(!0)},children:"סריקת ברקוד"}),v.jsx("input",{type:"text",placeholder:"חיפוש מוצר...",value:t,onChange:z=>{console.log("🔍 חיפוש משתנה ל:",z.target.value),r(z.target.value)},style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px",width:d?"100%":"60%"}})]}),v.jsxs("h3",{style:{textAlign:"center",marginBottom:"1rem"},children:["מוצרים זמינים (",s.pickupDate," → ",s.returnDate,")"]}),t&&v.jsx("div",{style:{background:"#f0f9ff",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9",textAlign:"center"},children:v.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"0.9rem"},children:["🔍 נמצאו ",P.length,' מוצרים עבור "',t,'"']})}),c?v.jsx("p",{style:{textAlign:"center"},children:"טוען מוצרים…"}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"modal-grid",children:F.length===0?v.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:t?`לא נמצאו מוצרים לחיפוש "${t}"`:"לא נמצאו מוצרים זמינים"}):F.map(z=>v.jsxs("div",{className:`item-card ${z.selected?"selected":""}`,children:[v.jsx("img",{src:z.imageUrl||"/no-image-available.png",alt:z.name,className:"item-image"}),v.jsx("h4",{children:z.name}),v.jsxs("p",{children:["זמין: ",z.quantity]}),v.jsxs("p",{children:["מזהה מוצר: ",z.ItemId]}),v.jsxs("div",{style:{margin:"0.5rem 0"},children:[v.jsx("label",{style:{marginBottom:"0.3rem",display:"block"},children:"כמות:"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[v.jsx("button",{onClick:()=>C(z,Math.max(0,z.selectedQty-1)),disabled:z.selectedQty<=0,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:z.selectedQty<=0?"#f5f5f5":"#fff",cursor:z.selectedQty<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:z.selectedQty<=0?"#ccc":"#333"},children:"-"}),v.jsx("input",{type:"number",min:0,max:z.quantity,value:z.selectedQty,onChange:ee=>C(z,ee.target.value),onBlur:ee=>{(parseInt(ee.target.value)||0)>z.quantity&&C(z,z.quantity)},style:{width:"50px",height:"30px",padding:"5px",textAlign:"center",borderRadius:"6px",border:z.selectedQty>z.quantity?"2px solid red":"1px solid #ccc",backgroundColor:z.selectedQty>0?"#e3f2fd":"#fff",fontSize:"14px",fontWeight:"bold",appearance:"textfield",MozAppearance:"textfield"}}),v.jsx("button",{onClick:()=>C(z,Math.min(z.quantity,z.selectedQty+1)),disabled:z.selectedQty>=z.quantity,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:z.selectedQty>=z.quantity?"#f5f5f5":"#fff",cursor:z.selectedQty>=z.quantity?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:z.selectedQty>=z.quantity?"#ccc":"#333"},children:"+"})]}),z.selectedQty>z.quantity&&v.jsxs("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"0.2rem"},children:["מקסימום: ",z.quantity]})]}),v.jsx("button",{onClick:()=>j(z.id),className:`btn ${z.selected?"btn-red":"btn-blue"}`,style:{width:"100%",marginTop:"0.5rem"},children:z.selected?"❌ הסר מוצר":"🛒 בחר מוצר"})]},z.id))}),v.jsx(pU,{currentPage:A,totalItems:P.length,itemsPerPage:X,onPageChange:D})]}),v.jsxs("div",{className:"modal-actions",children:[v.jsx("button",{className:"btn btn-blue",onClick:()=>{console.log("✅ לחיצה על כפתור אישור"),L()},children:"✔️ אישור"}),v.jsx("button",{className:"btn btn-gray",onClick:()=>{console.log("❌ לחיצה על כפתור ביטול"),R("cancel-button")},children:"❌ ביטול"})]})]}),!d&&p&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:z=>{console.log("📱 קליק על רקע הסורק"),z.stopPropagation()},children:v.jsx(lU,{onScanSuccess:q,onClose:()=>{console.log("📱 סורק ברקוד נסגר"),g(!1)}})}),!d&&m&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10001,backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:z=>{console.log("📦 קליק על רקע מודל תוצאת סריקה"),z.stopPropagation()},children:v.jsx(hU,{item:m,onCancel:()=>{console.log("❌ מבטל תוצאת סריקה"),x(null),g(!1)},onConfirm:z=>{console.log("✅ מאשר הוספת פריט מסריקה:",m.name,"כמות:",z),T(ae=>{const Q=ae.map(he=>he.id===m.id||he.ItemId===m.ItemId?(console.log("📝 מעדכן פריט ב-localItems:",he.name,"כמות חדשה:",z),{...he,selected:!0,selectedQty:z}):he);return console.log("📊 localItems אחרי עדכון:",Q.filter(he=>he.selected)),Q}),x(null),console.log("🎯 פריט נוסף בהצלחה מסריקה, המודל נשאר פתוח להמשך בחירה");const ee=_.findIndex(ae=>ae.id===m.id||ae.ItemId===m.ItemId);if(ee>=0){const ae=Math.ceil((ee+1)/X);console.log("📄 מעבר לעמוד",ae,"כדי להציג את הפריט שנוסף"),D(ae)}}})})]})},QS={async findClientByPhone(n){try{if(console.log("🔍 מחפש פרטי לקוח למספר טלפון:",n),!n||n.length<10)return{found:!1};const e=n.replace(/[\s\-]/g,""),t=ul(tn(_t,"orders"),nu("phone","==",e)),r=await $n(t);if(r.empty)return console.log("❌ לא נמצאו הזמנות עבור מספר זה"),{found:!1};const i=r.docs.map(o=>({id:o.id,...o.data()}));i.sort((o,s)=>{var d,p;const c=((d=o.createdAt)==null?void 0:d.seconds)||0;return(((p=s.createdAt)==null?void 0:p.seconds)||0)-c});const a=i[0];return console.log("✅ נמצאה הזמנה:",{clientName:a.clientName,address:a.address,email:a.email}),{found:!0,clientData:{clientName:a.clientName||"",address:a.address||"",email:a.email||""}}}catch(e){return console.error("❌ שגיאה בחיפוש פרטי לקוח:",e),{found:!1}}}},qc={async getClosedDates(){try{const e=(await $n(tn(_t,"closedDates"))).docs.map(t=>({id:t.id,...t.data()}));return console.log("📅 נטענו ימים סגורים:",e.map(t=>({id:t.id,date:t.date}))),e}catch(n){return console.error("❌ שגיאה בשליפת ימים סגורים:",n),[]}},async addClosedDate(n,e,t="יום סגור"){try{const r=this.formatDateToString(n);if(!r)return console.error("❌ תאריך לא תקין:",n),!1;console.log(`🔒 מוסיף יום סגור: ${r} (מקורי: ${n})`);const i=Yn(_t,"closedDates",r);return await f5(i,{date:r,reason:t,createdBy:e,createdAt:_r()}),console.log("✅ יום סגור נוסף בהצלחה:",r),!0}catch(r){return console.error("❌ שגיאה בהוספת יום סגור:",r),!1}},async removeClosedDate(n){try{const e=this.formatDateToString(n);if(!e)return console.error("❌ תאריך לא תקין:",n),!1;console.log(`🗑️ מסיר יום סגור: ${e} (מקורי: ${n})`);const t=Yn(_t,"closedDates",e);return await Uh(t),console.log("✅ יום סגור הוסר בהצלחה:",e),!0}catch(e){return console.error("❌ שגיאה בהסרת יום סגור:",e),!1}},isDateClosed(n,e=null){try{const t=this.formatDateToString(n);if(!t)return console.warn("⚠️ תאריך לא תקין בבדיקת סגירה:",n),!1;if(e&&Array.isArray(e)){const r=e.some(i=>{const a=i.date||i.id,o=a===t;return o&&console.log(`🔒 נמצא יום סגור: ${a} === ${t}`),o});return console.log(`🔍 בודק תאריך ${t} - סגור: ${r}`),r}return console.log(`🔍 בודק תאריך ${t} - אין רשימה סגורים`),!1}catch(t){return console.error("❌ שגיאה בבדיקת תאריך סגור:",t),!1}},formatDateToString(n){try{let e;if(typeof n=="string"){if(n.match(/^\d{4}-\d{2}-\d{2}$/))return console.log(`📅 תאריך כבר בפורמט נכון: ${n}`),n;e=new Date(n+"T00:00:00")}else if(n instanceof Date)e=new Date(n);else return console.warn("⚠️ תאריך לא תקין:",n),"";if(isNaN(e.getTime()))return console.warn("⚠️ תאריך לא תקין אחרי המרה:",n),"";const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=`${t}-${r}-${i}`;return console.log(`📅 המרת תאריך: ${n} → ${a}`),a}catch(e){return console.error("❌ שגיאה בהמרת תאריך:",e,n),""}},canCloseDateValidation(n,e=[]){const t=new Date().toISOString().split("T")[0];return this.formatDateToString(n)<t?{valid:!1,reason:"לא ניתן לסגור תאריכים בעבר"}:e&&e.length>0&&e.filter(a=>a.type!=="השאלה פעילה").length>0?{valid:!1,reason:"קיימים אירועים בתאריך זה"}:{valid:!0,reason:"ניתן לסגירה"}},async addMultipleClosedDates(n,e,t="ימים סגורים"){const r={success:[],failed:[]};console.log("📅 מתחיל להוסיף ימים סגורים:",n);for(const i of n)try{await this.addClosedDate(i,e,t)?r.success.push(i):r.failed.push(i)}catch(a){console.error(`❌ שגיאה בסגירת ${i}:`,a),r.failed.push(i)}return console.log("📊 תוצאות סגירת ימים:",r),r},validateOrderDates(n,e,t){const r={};return n&&this.isDateClosed(n,t)&&(r.pickupDate="🔒 תאריך לקיחת המוצרים חל ביום סגור"),e&&this.isDateClosed(e,t)&&(r.returnDate="🔒 תאריך החזרת המוצרים חל ביום סגור"),{isValid:Object.keys(r).length===0,errors:r}}},gU=({onOrderCreated:n})=>{const[e,t]=ue.useState({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[r,i]=ue.useState({}),[a,o]=ue.useState(!1),[s,c]=ue.useState([]),[f,d]=ue.useState(!1),[p,g]=ue.useState(""),[m,x]=ue.useState(!1),[_,T]=ue.useState(!1),[A,D]=ue.useState([]);ue.useEffect(()=>{U()},[]);const U=async()=>{try{const L=await qc.getClosedDates();D(L),console.log("📅 נטענו ימים סגורים למערכת הזמנות:",L.length)}catch(L){console.error("❌ שגיאה בטעינת ימים סגורים:",L)}},H=async L=>{const{name:R,value:I}=L.target;if(t(P=>({...P,[R]:I})),R==="phone"&&I.length===10&&/^\d{10}$/.test(I)){T(!0);try{const P=await QS.findClientByPhone(I);P.found&&(t(M=>({...M,phone:I,clientName:P.clientData.clientName,address:P.clientData.address,email:P.clientData.email})),alert(`נמצא לקוח קיים! הפרטים מולאו אוטומטית:
שם: ${P.clientData.clientName}
כתובת: ${P.clientData.address}`))}catch(P){console.error("שגיאה בחיפוש פרטי לקוח:",P)}finally{T(!1)}}},X=()=>{const L={},R=new Date().toISOString().split("T")[0],{pickupDate:I,eventDate:P,returnDate:M}=e;e.volunteerName!==void 0&&!e.volunteerName.trim()&&(L.volunteerName="שדה חובה"),e.clientName.trim()||(L.clientName="שדה חובה"),e.address.trim()||(L.address="שדה חובה"),e.phone.trim()?/^\d{10}$/.test(e.phone)||(L.phone="מספר טלפון לא תקין"):L.phone="שדה חובה",e.eventType.trim()||(L.eventType="שדה חובה"),I||(L.pickupDate="שדה חובה"),P||(L.eventDate="שדה חובה"),M||(L.returnDate="שדה חובה"),I&&I<R&&(L.pickupDate="תאריך לא יכול להיות בעבר"),P&&I&&P<I&&(L.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),M&&I&&M<=I&&(L.returnDate="החזרה אחרי לקיחה");const K=qc.validateOrderDates(I,M,A);return K.isValid||Object.assign(L,K.errors),console.log("🔍 בדיקת תאריכים:",{pickupDate:I,returnDate:M,closedDatesCount:A.length,validation:K,errors:L}),i(L),Object.keys(L).length===0},q=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את ההזמנה?")&&(t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),i({}),c([]),g(""),o(!1))},j=async()=>{if(!X())return;const R=(await $n(tn(_t,"orders"))).docs.map(M=>M.data().simpleId).filter(M=>typeof M=="number"),I=R.length>0?Math.max(...R)+1:1,P=s.filter(M=>M.selected).map(M=>({id:M.id,ItemId:M.ItemId,name:M.name,quantity:M.selectedQty,imageUrl:M.imageUrl}));x(!0);try{const M=await pd(tn(_t,"orders"),{...e,items:P,status:"open",simpleId:I,createdAt:_r()});await Bi(M,{orderId:M.id}),t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),c([]),g(""),o(!1),alert(`ההזמנה נשמרה! מס' הזמנה: ${I}`),n&&await n()}catch(M){console.error("שגיאה בשמירה:",M),alert("שגיאה בשמירת ההזמנה")}x(!1)};ue.useEffect(()=>{if(!a)return;(async()=>{d(!0);const R=I=>I?I.toDate?I.toDate():typeof I=="string"?new Date(I):I:null;try{const P=(await $n(tn(_t,"items"))).docs.map(he=>({id:he.id,...he.data()})).filter(he=>he.isDeleted!==!0),M=await $n(tn(_t,"orders")),K=R(e.pickupDate),F=R(e.returnDate),z=M.docs.map(he=>he.data()).filter(he=>{const G=R(he.pickupDate),$=R(he.returnDate);return he.status==="open"&&G&&$&&K&&F&&$>=K&&G<=F}),ee={};z.forEach(he=>{var G;(G=he.items)==null||G.forEach($=>{ee[$.id]=(ee[$.id]||0)+$.quantity})});const ae={};s.forEach(he=>{he.selected&&he.selectedQty>0&&(ae[he.id]={selected:he.selected,selectedQty:he.selectedQty})});const Q=P.map(he=>{const G=(he.quantity||0)-(ee[he.id]||0),$=ae[he.id];return{...he,quantity:G,selected:$?$.selected:!1,selectedQty:$?$.selectedQty:0}}).filter(he=>he.quantity>0);c(Q)}catch(I){console.error("שגיאה בחישוב זמינות:",I),c([])}d(!1)})()},[a,e.pickupDate,e.returnDate]);const C=L=>{c(R=>R.map(I=>I.id===L?{...I,selected:!I.selected,selectedQty:I.selected?0:1}:I))},N=(L,R)=>{c(I=>I.map(P=>P.id===L?{...P,selected:R>0,selectedQty:R}:P))};return v.jsxs("div",{className:"new-loan-container",children:[v.jsx(_j,{form:e,errors:r,handleChange:H,handleConfirm:j,handleClear:q,setShowCatalogPopup:o,saving:m,isLoadingClientData:_}),v.jsx(KS,{showCatalogPopup:a,setShowCatalogPopup:o,searchTerm:p,setSearchTerm:g,setAvailableItems:c,availableItems:s,toggleSelectItem:C,changeQty:N,form:e,loadingItems:f})]})},mU=({onRequestSubmitted:n})=>{const{user:e}=So(),[t,r]=ue.useState({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[i,a]=ue.useState({}),[o,s]=ue.useState(!1),[c,f]=ue.useState([]),[d,p]=ue.useState(!1),[g,m]=ue.useState(""),[x,_]=ue.useState(!1),[T,A]=ue.useState(!1),[D,U]=ue.useState([]);ue.useEffect(()=>{H()},[]);const H=async()=>{try{const P=await qc.getClosedDates();U(P),console.log("📅 נטענו ימים סגורים למערכת בקשות:",P.length)}catch(P){console.error("❌ שגיאה בטעינת ימים סגורים:",P)}},X=ue.useCallback(async P=>{const{name:M,value:K}=P.target;if(r(F=>({...F,[M]:K})),M==="phone"&&K.length===10&&/^\d{10}$/.test(K)){A(!0);try{const F=await QS.findClientByPhone(K);F.found&&(r(z=>({...z,phone:K,clientName:F.clientData.clientName,address:F.clientData.address,email:F.clientData.email})),alert(`נמצא לקוח קיים! הפרטים מולאו אוטומטית:
שם: ${F.clientData.clientName}
כתובת: ${F.clientData.address}`))}catch(F){console.error("שגיאה בחיפוש פרטי לקוח:",F)}finally{A(!1)}}},[]),q=()=>{const P={},M=new Date().toISOString().split("T")[0],{pickupDate:K,eventDate:F,returnDate:z}=t;t.volunteerName!==void 0&&!t.volunteerName.trim()&&(P.volunteerName="שדה חובה"),t.clientName.trim()||(P.clientName="שדה חובה"),t.address.trim()||(P.address="שדה חובה"),t.phone.trim()?/^\d{10}$/.test(t.phone)||(P.phone="מספר טלפון לא תקין"):P.phone="שדה חובה",t.eventType.trim()||(P.eventType="שדה חובה"),K||(P.pickupDate="שדה חובה"),F||(P.eventDate="שדה חובה"),z||(P.returnDate="שדה חובה"),K&&K<M&&(P.pickupDate="תאריך לא יכול להיות בעבר"),F&&K&&F<K&&(P.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),z&&K&&z<=K&&(P.returnDate="החזרה אחרי לקיחה");const ee=qc.validateOrderDates(K,z,D);return ee.isValid||Object.assign(P,ee.errors),console.log("🔍 בדיקת תאריכים:",{pickupDate:K,returnDate:z,closedDatesCount:D.length,validation:ee,errors:P}),a(P),Object.keys(P).length===0},j=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את הבקשה?")&&(r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),a({}),f([]),m(""),s(!1))},C=async()=>{if(!q())return;const P=c.filter(M=>M.selected).map(M=>({id:M.id,ItemId:M.ItemId,name:M.name,quantity:M.selectedQty,imageUrl:M.imageUrl}));if(P.length===0){alert("יש לבחור לפחות פריט אחד");return}_(!0);try{await pd(tn(_t,"orderRequests"),{...t,items:P,status:"pending",requestedBy:e.uid,requestedByUsername:e.username,requestedByEmail:e.email,requestedAt:_r(),approvedBy:null,approvedAt:null}),r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),f([]),m(""),s(!1),alert("🎉 הבקשה נשלחה בהצלחה! תקבל עדכון כאשר הבקשה תאושר."),n&&await n()}catch(M){console.error("שגיאה בשליחת הבקשה:",M),alert("שגיאה בשליחת הבקשה. אנא נסה שוב.")}_(!1)},N=Ln.useRef([]);ue.useEffect(()=>{if(!o)return;(async()=>{p(!0);const M=K=>K?K.toDate?K.toDate():typeof K=="string"?new Date(K):K:null;try{const F=(await $n(tn(_t,"items"))).docs.map(Z=>({id:Z.id,...Z.data()})).filter(Z=>Z.isDeleted!==!0),z=await $n(tn(_t,"orders")),ee=M(t.pickupDate),ae=M(t.returnDate),Q=z.docs.map(Z=>Z.data()).filter(Z=>{const re=M(Z.pickupDate),de=M(Z.returnDate);return Z.status==="open"&&re&&de&&ee&&ae&&de>=ee&&re<=ae}),he={};Q.forEach(Z=>{var re;(re=Z.items)==null||re.forEach(de=>{he[de.id]=(he[de.id]||0)+de.quantity})});const G={};N.current.forEach(Z=>{Z.selected&&Z.selectedQty>0&&(G[Z.id]={selected:Z.selected,selectedQty:Z.selectedQty})});const $=F.map(Z=>{const re=(Z.quantity||0)-(he[Z.id]||0),de=G[Z.id];return{...Z,quantity:re,selected:de?de.selected:!1,selectedQty:de?de.selectedQty:0}}).filter(Z=>Z.quantity>0);N.current=$,f($)}catch(K){console.error("שגיאה בחישוב זמינות:",K),f([])}p(!1)})()},[o,t.pickupDate,t.returnDate]);const L=P=>{f(M=>{const K=M.map(F=>F.id===P?{...F,selected:!F.selected,selectedQty:F.selected?0:1}:F);return N.current=K,K})},R=(P,M)=>{f(K=>{const F=K.map(z=>z.id===P?{...z,selected:M>0,selectedQty:M}:z);return N.current=F,F})},I=[{label:"מספר פלאפון",name:"phone",required:!0},{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return v.jsxs("div",{className:"new-loan-container",children:[v.jsxs("div",{className:"loan-form-box",children:[v.jsx("h2",{style:{textAlign:"center"},children:"🙏 בקשת השאלה"}),v.jsx("p",{style:{textAlign:"center",color:"#666",marginBottom:"2rem"},children:"מלא את הפרטים והבקשה תישלח לאישור המנהלים"}),I.map(({label:P,name:M,type:K="text",required:F})=>v.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[v.jsxs("label",{htmlFor:M,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[P,F&&" *",T&&(M==="clientName"||M==="address"||M==="email")&&v.jsx("span",{style:{marginRight:"0.5rem",color:"#4caf50"},children:"⏳"})]}),v.jsxs("div",{style:{position:"relative"},children:[v.jsx("input",{id:M,type:K,name:M,value:t[M]||"",onChange:X,autoComplete:"off",disabled:T&&(M==="clientName"||M==="address"||M==="email"),min:K==="date"?M==="pickupDate"?new Date().toISOString().split("T")[0]:M==="eventDate"||M==="returnDate"?t.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:i[M]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:T&&(M==="clientName"||M==="address"||M==="email")?"#f5f5f5":"white",opacity:T&&(M==="clientName"||M==="address"||M==="email")?.7:1},placeholder:T&&(M==="clientName"||M==="address"||M==="email")?"טוען...":""}),T&&M==="phone"&&v.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#4caf50"},children:v.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e8f5e8",borderTop:"2px solid #4caf50",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),i[M]&&v.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:i[M]})]},M)),v.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:v.jsx("button",{className:"btn btn-blue",onClick:()=>s(!0),disabled:T,children:"בחירת מוצרים"})}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[v.jsx("button",{className:"btn btn-green",onClick:C,disabled:x||T,children:x?"שולח בקשה...":"📨 שלח בקשה לאישור"}),v.jsx("button",{className:"btn btn-red",onClick:j,disabled:x||T,children:"ביטול"})]}),v.jsx("style",{jsx:!0,children:`
          @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
          }
        `})]}),v.jsx(KS,{showCatalogPopup:o,setShowCatalogPopup:s,searchTerm:g,setSearchTerm:m,setAvailableItems:f,availableItems:c,toggleSelectItem:L,changeQty:R,form:t,loadingItems:d,hideBarcodeScanner:!0})]})},vU=()=>{const{user:n}=So(),[e,t]=ue.useState([]),[r,i]=ue.useState(!0),[a,o]=ue.useState(null),[s,c]=ue.useState(null),f=async()=>{try{i(!0);const _=(await $n(tn(_t,"orderRequests"))).docs.map(T=>({id:T.id,...T.data()})).filter(T=>T.status==="pending").sort((T,A)=>{var H,X;const D=((H=T.requestedAt)==null?void 0:H.seconds)||0;return(((X=A.requestedAt)==null?void 0:X.seconds)||0)-D});t(_)}catch(x){console.error("שגיאה בטעינת בקשות:",x)}finally{i(!1)}};ue.useEffect(()=>{f()},[]);const d=async x=>{if(window.confirm(`האם אתה בטוח שברצונך לאשר את הבקשה של ${x.clientName}?`)){c(x.id),console.log("🚀 מתחיל אישור בקשה:",x);try{console.log("📦 טוען נתוני מלאי והזמנות...");const _=await $n(tn(_t,"items")),T=await $n(tn(_t,"orders")),A=M=>M?M.toDate?M.toDate():typeof M=="string"?new Date(M):M:null,D=A(x.pickupDate),U=A(x.returnDate),H=T.docs.map(M=>M.data()).filter(M=>{const K=A(M.pickupDate),F=A(M.returnDate);return M.status==="open"&&K&&F&&D&&U&&F>=D&&K<=U}),X={};H.forEach(M=>{var K;(K=M.items)==null||K.forEach(F=>{X[F.id]=(X[F.id]||0)+F.quantity})});const q=_.docs.map(M=>({id:M.id,...M.data()}));console.log("🔍 בודק זמינות פריטים...",x.items);let j=!0,C=[];for(const M of x.items){console.log(`🔎 בודק פריט: ${M.name}`,M);const K=q.find(z=>z.id===M.id);if(!K){console.log(`❌ פריט לא נמצא במלאי: ${M.name}`),j=!1,C.push(`${M.name} (לא נמצא במלאי)`);continue}const F=(K.quantity||0)-(X[M.id]||0);console.log(`📊 ${M.name}: מלאי=${K.quantity}, שמור=${X[M.id]||0}, זמין=${F}, נדרש=${M.quantity}`),M.quantity>F&&(j=!1,C.push(`${M.name} (זמין: ${F}, נדרש: ${M.quantity})`))}if(!j){console.log("❌ לא כל הפריטים זמינים:",C),alert(`לא ניתן לאשר את הבקשה - פריטים לא זמינים:
${C.join(`
`)}`),c(null);return}console.log("✅ כל הפריטים זמינים, ממשיך ליצירת הזמנה..."),console.log("🔢 יוצר מזהה הזמנה חדש...");const L=(await $n(tn(_t,"orders"))).docs.map(M=>M.data().simpleId).filter(M=>typeof M=="number"),R=L.length>0?Math.max(...L)+1:1;console.log("🎯 מזהה הזמנה חדש:",R),console.log("📝 יוצר הזמנה חדשה..."),console.log("👤 פרטי משתמש:",n);const I={clientName:x.clientName,address:x.address,phone:x.phone,email:x.email,eventType:x.eventType,pickupDate:x.pickupDate,eventDate:x.eventDate,returnDate:x.returnDate,items:x.items,simpleId:R,status:"open",volunteerName:`מאושר ע"י ${(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל"}`,createdAt:_r(),approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",approvedAt:_r(),orderId:null};console.log("💾 שומר הזמנה חדשה:",I);const P=await pd(tn(_t,"orders"),I);console.log("✅ הזמנה נשמרה עם ID:",P.id),await Bi(P,{orderId:P.id}),console.log("🔄 עדכון orderId הושלם"),console.log("📋 מעדכן סטטוס בקשה לאושרה..."),await Bi(Yn(_t,"orderRequests",x.id),{status:"approved",approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",approvedAt:_r(),orderId:P.id}),console.log("🎉 תהליך האישור הושלם בהצלחה!"),alert(`✅ הבקשה אושרה בהצלחה! מספר הזמנה: ${R}`),await f()}catch(_){console.error("❌ שגיאה באישור הבקשה:",_),console.error("Stack trace:",_.stack),alert(`שגיאה באישור הבקשה: ${_.message}`)}finally{c(null)}}},p=async x=>{const _=prompt(`מדוע אתה דוחה את הבקשה של ${x.clientName}?
(ההודעה הזו תישלח ללקוח)`);if(_!==null){c(x.id),console.log("🚫 מתחיל דחיית בקשה:",x.id,"סיבה:",_);try{console.log("📝 מעדכן סטטוס בקשה לנדחתה..."),console.log("👤 פרטי משתמש:",n),await Bi(Yn(_t,"orderRequests",x.id),{status:"rejected",rejectedBy:(n==null?void 0:n.uid)||"unknown",rejectedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",rejectedAt:_r(),rejectionReason:_}),console.log("✅ בקשה נדחתה בהצלחה"),alert("❌ הבקשה נדחתה. הלקוח יקבל הודעה."),await f()}catch(T){console.error("❌ שגיאה בדחיית הבקשה:",T),console.error("Stack trace:",T.stack),alert(`שגיאה בדחיית הבקשה: ${T.message}`)}finally{c(null)}}},g=x=>new Date(x).toLocaleDateString("he-IL"),m=x=>x?(x.seconds?new Date(x.seconds*1e3):new Date(x)).toLocaleString("he-IL"):"";return r?v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),v.jsx("p",{children:"טוען בקשות..."})]})}):v.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[v.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"📋 בקשות להזמנה"}),v.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"בקשות ממתינות לאישור מנהלים"})]}),e.length===0?v.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsx(Ss,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),v.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"אין בקשות ממתינות"}),v.jsx("p",{style:{color:"#9ca3af"},children:"כל הבקשות עובדו או שאין בקשות חדשות"})]}):v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(x=>{var _;return v.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:T=>{T.currentTarget.style.transform="translateY(-2px)",T.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:T=>{T.currentTarget.style.transform="translateY(0)",T.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[v.jsxs("div",{children:[v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:x.clientName}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["נשלח: ",m(x.requestedAt)]})]}),v.jsx("div",{style:{background:"#fef3c7",color:"#92400e",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:"ממתין"})]}),v.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(LS,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:["מבקש: ",x.requestedByUsername]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(od,{size:16,style:{color:"#6b7280"}}),v.jsx("span",{style:{fontSize:"0.875rem"},children:x.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(DS,{size:16,style:{color:"#6b7280"}}),v.jsx("span",{style:{fontSize:"0.875rem"},children:x.address})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(ru,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(x.pickupDate)," → ",g(x.returnDate)]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Ss,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[(_=x.items)==null?void 0:_.reduce((T,A)=>T+A.quantity,0)," פריטים"]})]})]}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[v.jsxs("button",{onClick:()=>o(x),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[v.jsx(Vm,{size:16}),"הצג פרטים"]}),v.jsxs("button",{onClick:()=>d(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[v.jsx(bf,{size:16}),s===x.id?"מעבד...":"אשר"]}),v.jsxs("button",{onClick:()=>p(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[v.jsx(j1,{size:16}),"דחה"]})]})]},x.id)})}),a&&v.jsx(yU,{request:a,onClose:()=>o(null),onApprove:()=>{o(null),d(a)},onReject:()=>{o(null),p(a)},processing:s===a.id}),v.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},yU=({request:n,onClose:e,onApprove:t,onReject:r,processing:i})=>{var s,c;const a=f=>new Date(f).toLocaleDateString("he-IL"),o=f=>{f.target===f.currentTarget&&e()};return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:o,children:v.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:f=>f.stopPropagation(),children:[v.jsxs("div",{style:{background:"#1f2937",color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["פרטי בקשה - ",n.clientName]}),v.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"×"})]}),v.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"פרטי הלקוח"}),v.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"שם לקוח"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"אימייל"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.email||"לא צוין"})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),v.jsxs("span",{style:{fontWeight:"bold"},children:[a(n.pickupDate)," → ",a(n.returnDate)]})]})]})]}),v.jsxs("div",{children:[v.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים מבוקשים (",((s=n.items)==null?void 0:s.length)||0,")"]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(c=n.items)==null?void 0:c.map((f,d)=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[v.jsx("img",{src:f.imageUrl||"/no-image-available.png",alt:f.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),v.jsxs("div",{style:{flex:1},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:f.name}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["מזהה: ",f.ItemId]})]}),v.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",f.quantity]})]},d))})]})]}),v.jsxs("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center",gap:"1rem"},children:[v.jsxs("button",{onClick:t,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[v.jsx(bf,{size:20}),i?"מעבד...":"אשר בקשה"]}),v.jsxs("button",{onClick:r,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[v.jsx(j1,{size:20}),"דחה בקשה"]}),v.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"סגור"})]})]})})},xU=()=>{const{user:n}=So(),[e,t]=ue.useState([]),[r,i]=ue.useState(!0),[a,o]=ue.useState(null),[s,c]=ue.useState(null),f=async()=>{if(!(n!=null&&n.uid)){console.log("❌ אין משתמש מחובר:",n),i(!1);return}try{i(!0),console.log("🔍 מחפש הזמנות עבור משתמש:",n.uid);const x=ul(tn(_t,"orderRequests"),nu("requestedBy","==",n.uid));console.log("📋 מבצע שאילתה ל-orderRequests...");const _=await $n(x);console.log("📊 נמצאו",_.size,"בקשות");const T=_.docs.map(D=>{const U={id:D.id,type:"request",...D.data()};return console.log("📝 בקשה נמצאה:",U),U});console.log('✅ סה"כ בקשות שנמצאו:',T.length);const A=[...T].sort((D,U)=>{var q,j,C,N;const H=((q=D.requestedAt)==null?void 0:q.seconds)||((j=D.createdAt)==null?void 0:j.seconds)||0;return(((C=U.requestedAt)==null?void 0:C.seconds)||((N=U.createdAt)==null?void 0:N.seconds)||0)-H});console.log("🎯 הזמנות סופיות:",A),t(A)}catch(x){console.error("❌ שגיאה בטעינת ההזמנות:",x),console.error("Stack trace:",x.stack)}finally{i(!1)}},d=async x=>{const _=p(x).text;if(window.confirm(`האם אתה בטוח שברצונך למחוק את ההזמנה?

פרטים:
• לקוח: ${x.clientName}
• סטטוס: ${_}
• תאריך: ${g(x.pickupDate)}

פעולה זו אינה ניתנת לביטול.`)){c(x.id),console.log("🗑️ מוחק הזמנה:",x.id);try{await Uh(Yn(_t,"orderRequests",x.id)),console.log("✅ הזמנה נמחקה בהצלחה"),t(T=>T.filter(A=>A.id!==x.id)),alert("🗑️ ההזמנה נמחקה בהצלחה מהרשימה שלך")}catch(T){console.error("❌ שגיאה במחיקת הזמנה:",T),alert(`שגיאה במחיקת ההזמנה: ${T.message}`)}finally{c(null)}}};ue.useEffect(()=>{console.log("👤 משתמש השתנה:",n),n!=null&&n.uid?(console.log("🚀 קורא לטעינת הזמנות..."),f()):(console.log("⏳ מחכה למשתמש להיטען..."),i(!1))},[n]);const p=x=>{switch(x.status){case"pending":return{text:"מחכה לאישור",color:"#f59e0b",bgColor:"#fef3c7",icon:v.jsx(Um,{size:16})};case"approved":return{text:"מאושר",color:"#10b981",bgColor:"#d1fae5",icon:v.jsx(bf,{size:16})};case"rejected":return{text:"נדחה",color:"#ef4444",bgColor:"#fee2e2",icon:v.jsx(j1,{size:16})};default:return{text:"לא ידוע",color:"#6b7280",bgColor:"#f3f4f6",icon:v.jsx(Ss,{size:16})}}},g=x=>new Date(x).toLocaleDateString("he-IL"),m=x=>x?(x.seconds?new Date(x.seconds*1e3):new Date(x)).toLocaleString("he-IL"):"";return r?v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),v.jsx("p",{children:"טוען הזמנות..."})]})}):v.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[v.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"📋 ההזמנות שלי"}),v.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"כל הבקשות וההזמנות שלך במקום אחד"})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[v.jsxs("div",{style:{background:"#fef3c7",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fde68a"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#92400e"},children:e.filter(x=>x.status==="pending").length}),v.jsx("div",{style:{color:"#92400e",fontSize:"0.875rem"},children:"מחכות לאישור"})]}),v.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #a7f3d0"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#065f46"},children:e.filter(x=>x.status==="approved").length}),v.jsx("div",{style:{color:"#065f46",fontSize:"0.875rem"},children:"מאושרות"})]}),v.jsxs("div",{style:{background:"#fee2e2",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fecaca"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#991b1b"},children:e.filter(x=>x.status==="rejected").length}),v.jsx("div",{style:{color:"#991b1b",fontSize:"0.875rem"},children:"נדחו"})]}),v.jsxs("div",{style:{background:"#eff6ff",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #dbeafe"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1e40af"},children:e.length}),v.jsx("div",{style:{color:"#1e40af",fontSize:"0.875rem"},children:'סה"כ הזמנות'})]})]}),e.length===0?v.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsx(Ss,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),v.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"אין הזמנות עדיין"}),v.jsx("p",{style:{color:"#9ca3af",marginBottom:"1.5rem"},children:"עדיין לא שלחת בקשות השאלה"}),v.jsx("a",{href:"/request",style:{display:"inline-block",background:"#3b82f6",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",textDecoration:"none",fontWeight:"500"},children:"📝 צור בקשת השאלה ראשונה"})]}):v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(x=>{var T;const _=p(x);return v.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:A=>{A.currentTarget.style.transform="translateY(-2px)",A.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:A=>{A.currentTarget.style.transform="translateY(0)",A.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[v.jsxs("div",{children:[v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:x.clientName}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["נשלח: ",m(x.requestedAt)]})]}),v.jsxs("div",{style:{background:_.bgColor,color:_.color,padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.25rem"},children:[_.icon,_.text]})]}),v.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(od,{size:16,style:{color:"#6b7280"}}),v.jsx("span",{style:{fontSize:"0.875rem"},children:x.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(DS,{size:16,style:{color:"#6b7280"}}),v.jsx("span",{style:{fontSize:"0.875rem"},children:x.address})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(ru,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(x.pickupDate)," → ",g(x.returnDate)]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Ss,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[(T=x.items)==null?void 0:T.reduce((A,D)=>A+D.quantity,0)," פריטים"]})]}),x.status==="rejected"&&x.rejectionReason&&v.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",padding:"0.75rem",marginTop:"0.5rem"},children:[v.jsx("div",{style:{fontSize:"0.75rem",color:"#991b1b",fontWeight:"bold",marginBottom:"0.25rem"},children:"סיבת דחייה:"}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d"},children:x.rejectionReason})]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[v.jsxs("button",{onClick:()=>o(x),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[v.jsx(Vm,{size:16}),"הצג פרטים"]}),v.jsxs("button",{onClick:()=>d(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",opacity:s===x.id?.6:1},children:[v.jsx(x5,{size:16}),s===x.id?"מוחק...":"מחק"]})]})]},x.id)})}),a&&v.jsx(bU,{order:a,onClose:()=>o(null)}),v.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},bU=({order:n,onClose:e})=>{var o,s;const t=c=>{switch(c.status){case"pending":return{text:"מחכה לאישור",color:"#f59e0b",bgColor:"#fef3c7",icon:v.jsx(Um,{size:20})};case"approved":return{text:"מאושר",color:"#10b981",bgColor:"#d1fae5",icon:v.jsx(bf,{size:20})};case"rejected":return{text:"נדחה",color:"#ef4444",bgColor:"#fee2e2",icon:v.jsx(j1,{size:20})};default:return{text:"לא ידוע",color:"#6b7280",bgColor:"#f3f4f6",icon:v.jsx(Ss,{size:20})}}},r=c=>new Date(c).toLocaleDateString("he-IL"),i=t(n),a=c=>{c.target===c.currentTarget&&e()};return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:a,children:v.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:c=>c.stopPropagation(),children:[v.jsxs("div",{style:{background:i.color,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.icon,v.jsxs("div",{children:[v.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["הזמנה - ",n.clientName]}),v.jsx("p",{style:{fontSize:"0.875rem",margin:"0.25rem 0 0 0",opacity:.9},children:i.text})]})]}),v.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"×"})]}),v.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"פרטי ההזמנה"}),v.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"שם לקוח"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"אימייל"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.email||"לא צוין"})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),v.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),v.jsxs("span",{style:{fontWeight:"bold"},children:[r(n.pickupDate)," → ",r(n.returnDate)]})]})]})]}),v.jsxs("div",{children:[v.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים (",((o=n.items)==null?void 0:o.length)||0,")"]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(s=n.items)==null?void 0:s.map((c,f)=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[v.jsx("img",{src:c.imageUrl||"/no-image-available.png",alt:c.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),v.jsxs("div",{style:{flex:1},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:c.name}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["מזהה: ",c.ItemId]})]}),v.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",c.quantity]})]},f))})]}),n.status==="rejected"&&n.rejectionReason&&v.jsxs("div",{style:{marginTop:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"1rem"},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",color:"#991b1b",margin:"0 0 0.5rem 0"},children:"סיבת דחייה:"}),v.jsx("p",{style:{fontSize:"0.875rem",color:"#7f1d1d",margin:0},children:n.rejectionReason})]})]}),v.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center"},children:v.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"סגור"})})]})})},wU=["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],_U=["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],AU=n=>new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),SU=n=>new Date(n.getFullYear(),n.getMonth(),1).getDay(),EU=({currentDate:n,events:e=[],setCurrentDate:t,setSelectedEvents:r,setSelectedDate:i,setShowReport:a,fetchItemsAndOrders:o})=>{const{user:s}=So(),[c,f]=ue.useState([]),[d,p]=ue.useState(!1),[g,m]=ue.useState(new Set),[x,_]=ue.useState(!1),[T,A]=ue.useState(new Set);ue.useEffect(()=>{D()},[]);const D=async()=>{try{const $=await qc.getClosedDates();console.log("ימים סגורים נטענו:",$.map(Z=>({id:Z.id,date:Z.date}))),f($)}catch($){console.error("שגיאה בטעינת ימים סגורים:",$)}},U=()=>{if(!s)return console.log("אין משתמש מחובר"),!1;const $=s.role==="MainAdmin";return console.log("יש הרשאות מנהל:",$,"תפקיד:",s.role),$},H=($,Z,re)=>{const de=new Date($,Z,re),xe=de.getFullYear(),we=String(de.getMonth()+1).padStart(2,"0"),Ee=String(de.getDate()).padStart(2,"0");return`${xe}-${we}-${Ee}`},X=$=>{if(!Array.isArray(e))return[];const Z=H(n.getFullYear(),n.getMonth(),$);return e.filter(re=>re.date?qc.formatDateToString(re.date)===Z:!1)},q=$=>X($).some(re=>e.some(xe=>xe.orderId===re.orderId&&xe.availabilityStatus==="CONFLICT")),j=$=>X($).some(re=>re.isOverdue),C=$=>{const Z=H(n.getFullYear(),n.getMonth(),$);return qc.isDateClosed(Z,c)},N=$=>{const Z=new Date(n.getFullYear(),n.getMonth(),$),re=new Date;return re.setHours(0,0,0,0),Z.setHours(0,0,0,0),Z<re?!1:!X($).some(we=>we.type!=="השאלה פעילה")},L=$=>{const Z=new Date(n.getFullYear(),n.getMonth(),$),re=new Date;return re.setHours(0,0,0,0),Z.setHours(0,0,0,0),Z<re},R=$=>{const Z=new Date(n.getFullYear(),n.getMonth(),$),re=new Date;return Z.getDate()===re.getDate()&&Z.getMonth()===re.getMonth()&&Z.getFullYear()===re.getFullYear()},I=()=>{if(g.size>0)return!0;const $=new Set(c.map(Z=>Z.date||Z.id));if($.size!==T.size)return!0;for(const Z of $)if(!T.has(Z))return!0;return!1},P=$=>{if(d){M($);return}const Z=X($);Z.length>0&&Z.every(de=>de.type==="השאלה פעילה")||Z.length>0&&(r(Z),i(new Date(n.getFullYear(),n.getMonth(),$)),a(!0))},M=async $=>{console.log(`לחיצה על יום ${$} במצב עריכה`);const Z=C($);if(console.log(`היום סגור: ${Z}, מצב עריכה: ${d}`),Z){const xe=H(n.getFullYear(),n.getMonth(),$);console.log(`מבטל סגירה של ${xe} - עדכון מיידי + נשאר במצב עריכה`),f(we=>{const Ee=we.filter(Ve=>Ve.date!==xe&&Ve.id!==xe);return console.log(`עדכון מיידי: הוסרו ${we.length-Ee.length} ימים`),Ee}),await K(xe),console.log(`סיום טיפול ביום ${$} - מצב עריכה: ${d}`);return}if(!N($)){L($)?alert("לא ניתן לסגור תאריכים שכבר עברו"):alert("ניתן לסגור רק ימים ללא אירועים קיימים");return}const re=H(n.getFullYear(),n.getMonth(),$);console.log(`מסמן יום לבן ${re} לסגירה`);const de=new Set(g);de.has(re)?(de.delete(re),console.log(`הוסר מהבחירה: ${re}`)):(de.add(re),console.log(`נוסף לבחירה: ${re}`)),m(de),console.log(`סה"כ נבחרו לסגירה: ${de.size} ימים`)},K=async $=>{try{console.log(`מבטל סגירה במצב עריכה: ${$}`),await qc.removeClosedDate($)?(console.log(`הסגירה של ${$} בוטלה - נשאר במצב עריכה`),await D(),console.log("יום בוטל מהסגירה - נשאר במצב עריכה")):(await D(),alert("שגיאה בביטול הסגירה"))}catch(Z){console.error("שגיאה בביטול סגירת יום:",Z),await D(),alert("שגיאה בביטול הסגירה")}},F=()=>{console.log("מפעיל מצב עריכה"),p(!0),m(new Set);const $=new Set(c.map(Z=>Z.date||Z.id));A($),console.log("מצב עריכה פעיל, נשמר מצב מקורי:",$)},z=()=>{console.log("מבטל מצב עריכה"),p(!1),m(new Set),A(new Set),console.log("יצאנו ממצב עריכה")},ee=async()=>{_(!0);try{if(g.size>0){const $=Array.from(g);console.log("שומר ימים סגורים:",$);const Z=await qc.addMultipleClosedDates($,s.uid,"יום סגור - נקבע על ידי המנהל");Z.success.length>0&&(alert(`${Z.success.length} ימים נסגרו בהצלחה`),await D(),o&&await o()),Z.failed.length>0&&alert(`${Z.failed.length} ימים לא הצליחו להיסגר`)}else console.log("שינויים כבר בוצעו (ביטול ימים סגורים), מסיים מצב עריכה"),alert("השינויים נשמרו בהצלחה!"),o&&await o();p(!1),m(new Set),A(new Set)}catch($){console.error("שגיאה בשמירת שינויים:",$),alert("שגיאה בשמירת השינויים")}finally{_(!1)}},ae=$=>{const Z=X($),re=new Map;return Z.forEach(de=>{re.has(de.orderId)||re.set(de.orderId,{...de,allEventsForOrder:Z.filter(xe=>xe.orderId===de.orderId)})}),Array.from(re.values())},Q=AU(n),he=SU(n),G=[];console.log("CalendarGrid - בונה לוח לחודש:",n.getMonth()+1,"שנה:",n.getFullYear()),console.log("ימים בחודש:",Q,"יום ראשון:",he);for(let $=0;$<he;$++)G.push(v.jsx("div",{className:"day-cell empty"},`empty-${$}`));for(let $=1;$<=Q;$++){const Z=X($),re=ae($),de=Z.filter(Te=>Te.type==="השאלה"),xe=Z.filter(Te=>Te.type==="החזרה"),we=Z.length>0,Ee=re.length,Ve=C($),He=N($),it=L($),ct=R($),vt=q($),ke=j($),ve=H(n.getFullYear(),n.getMonth(),$),dt=g.has(ve);let ot="day-cell";we&&(ot+=" has-events"),de.length>0&&(ot+=" pickup-day"),xe.length>0&&(ot+=" return-day"),Ve&&(ot+=" closed-day"),it&&(ot+=" past-day"),ct&&(ot+=" today"),d&&(He||Ve)&&(ot+=" can-manage"),dt&&(ot+=" selected-for-closure"),vt&&(ot+=" availability-conflict"),ke&&(ot+=" overdue-orders"),$===4&&n.getMonth()===6&&console.log("יום 4 ביולי - נוצר עם:",{day:$,month:n.getMonth()+1,year:n.getFullYear(),dateStr:ve,hasEvents:we,hasConflicts:vt,hasOverdue:ke,dayClasses:ot}),G.push(v.jsxs("div",{className:ot,onClick:()=>P($),"data-day":$,"data-month":n.getMonth()+1,style:{cursor:d?He||Ve?"pointer":"not-allowed":Z.some(Te=>Te.type!=="השאלה פעילה")?"pointer":"default"},children:[v.jsx("span",{className:"day-number",children:$}),ct&&v.jsx("div",{className:"today-indicator",title:"היום",children:"📅"}),Ve&&v.jsx("div",{className:"closed-indicator",title:"יום סגור - במצב עריכה: לחץ לביטול מיידי",children:"🔒"}),ke&&!Ve&&v.jsx("div",{className:"overdue-indicator",title:"הזמנות שלא הוחזרו בזמן",children:"🚨"}),vt&&!Ve&&!ke&&v.jsx("div",{className:"conflict-indicator",title:"בעיות זמינות - לחץ לפרטים",children:v.jsx(uf,{size:16,style:{color:"#9333ea"}})}),d&&(He||Ve)&&v.jsx("div",{className:"closure-selector",title:Ve?"לחץ לביטול מיידי":"לחץ לבחירה לסגירה",children:Ve?"🔓":dt?"✅":"⭕"}),!Ve&&v.jsxs("div",{className:"event-icons",children:[de.length>0&&v.jsxs("div",{className:`event-tag pickup-tag ${ke?"overdue":vt?"conflict":""}`,title:"איסוף מוצרים",children:["📦 ",de.length>1&&de.length]}),xe.length>0&&v.jsxs("div",{className:`event-tag return-tag ${ke?"overdue":vt?"conflict":""}`,title:"החזרת מוצרים",children:["🔄 ",xe.length>1&&xe.length]})]}),!Ve&&Ee>0&&v.jsx("div",{className:`event-count ${ke?"overdue":vt?"conflict":""}`,title:`${Ee} הזמנות`,children:Ee})]},$))}return v.jsxs("div",{className:"calendar-container",children:[v.jsxs("div",{className:"calendar-header",children:[v.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()-1,1)),children:v.jsx(M1,{size:20})}),v.jsxs("h2",{className:"calendar-title",children:[v.jsx(ru,{size:24})," ",wU[n.getMonth()]," ",n.getFullYear()]}),v.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()+1,1)),children:v.jsx(L1,{size:20})})]}),U()&&v.jsx("div",{className:"calendar-controls",children:d?v.jsxs("div",{className:"edit-controls",children:[v.jsxs("span",{className:"edit-mode-indicator",children:["📝 מצב עריכה: בחר ימים לבנים לסגירה או ימים סגורים לביטול (",g.size," נבחרו)"]}),v.jsxs("div",{className:"edit-buttons",children:[v.jsxs("button",{className:"btn-save",onClick:ee,disabled:x||!I(),children:[v.jsx(qm,{size:16}),x?"שומר...":"שמור"]}),v.jsxs("button",{className:"btn-cancel",onClick:z,disabled:x,children:[v.jsx(uu,{size:16}),"ביטול"]})]})]}):v.jsx("div",{className:"control-buttons",children:v.jsxs("button",{className:"btn-edit-dates",onClick:F,title:"בטל תאריכים",children:[v.jsx(nM,{size:18}),"בטל תאריכים"]})})}),v.jsx("div",{className:"day-names",children:_U.map($=>v.jsx("div",{className:"day-name",children:$},$))}),v.jsx("div",{className:"calendar-grid",children:G}),v.jsxs("div",{className:"calendar-footer",children:[v.jsxs("div",{className:"calendar-legend",children:[v.jsx("span",{className:"legend-item",children:"📦 איסוף מוצרים"}),v.jsx("span",{className:"legend-item",children:"🔄 החזרת מוצרים"}),c.length>0&&v.jsxs("span",{className:"legend-item",children:["🔒 ימים סגורים (",c.length,")"]}),v.jsx("span",{className:"legend-item",children:"🚨 הזמנות שלא הוחזרו"}),v.jsx("span",{className:"legend-item",children:"🔔 בעיות זמינות"}),d&&v.jsx("span",{className:"legend-item",children:"⭕ זמין לסגירה • 🔓 זמין לביטול"}),v.jsx("span",{className:"legend-item",children:"📅 היום"})]}),v.jsxs("div",{className:"calendar-stats",children:['לחץ על יום עם אירועים כדי לראות פרטים • סה"כ אירועים: ',Array.isArray(e)?e.length:0,c.length>0&&` • ימים סגורים: ${c.length}`]}),(!Array.isArray(e)||e.length===0)&&v.jsx("div",{className:"warning",children:"אין אירועים נטענים - בדוק את החיבור למסד הנתונים"})]})]})};class F1{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const CU=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},da={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:CU()},T5=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},IU=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=T5(n);da.publicKey=t.publicKey,da.blockHeadless=t.blockHeadless,da.storageProvider=t.storageProvider,da.blockList=t.blockList,da.limitRate=t.limitRate,da.origin=t.origin||e},ZS=async(n,e,t={})=>{const r=await fetch(da.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),a=new F1(r.status,i);if(r.ok)return a;throw a},JS=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},TU=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},eE=n=>n.webdriver||!n.languages||n.languages.length===0,tE=()=>new F1(451,"Unavailable For Headless Browser"),RU=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},NU=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},DU=(n,e)=>n instanceof FormData?n.get(e):n[e],nE=(n,e)=>{if(NU(n))return!1;RU(n.list,n.watchVariable);const t=DU(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},rE=()=>new F1(403,"Forbidden"),OU=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},kU=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},iE=async(n,e,t)=>{if(!e.throttle||!t)return!1;OU(e.throttle,e.id);const r=e.id||n;return await kU(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},aE=()=>new F1(429,"Too Many Requests"),PU=async(n,e,t,r)=>{const i=T5(r),a=i.publicKey||da.publicKey,o=i.blockHeadless||da.blockHeadless,s=i.storageProvider||da.storageProvider,c={...da.blockList,...i.blockList},f={...da.limitRate,...i.limitRate};return o&&eE(navigator)?Promise.reject(tE()):(JS(a,n,e),TU(t),t&&nE(c,t)?Promise.reject(rE()):await iE(location.pathname,f,s)?Promise.reject(aE()):ZS("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},LU=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},MU=n=>typeof n=="string"?document.querySelector(n):n,jU=async(n,e,t,r)=>{const i=T5(r),a=i.publicKey||da.publicKey,o=i.blockHeadless||da.blockHeadless,s=da.storageProvider||i.storageProvider,c={...da.blockList,...i.blockList},f={...da.limitRate,...i.limitRate};if(o&&eE(navigator))return Promise.reject(tE());const d=MU(t);JS(a,n,e),LU(d);const p=new FormData(d);return nE(c,p)?Promise.reject(rE()):await iE(location.pathname,f,s)?Promise.reject(aE()):(p.append("lib_version","4.4.1"),p.append("service_id",n),p.append("template_id",e),p.append("user_id",a),ZS("/api/v1.0/email/send-form",p))},R5={init:IU,send:PU,sendForm:jU,EmailJSResponseStatus:F1},m1={serviceId:"service_zbzqfa3",reminderTemplateId:"template_02cqfdn",confirmationTemplateId:"template_lv2sc1p",publicKey:"gJHtAe_l22dY8tKju"};R5.init(m1.publicKey);const Xg=n=>n?new Date(n).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):"",BU=async(n,e)=>{var t,r;try{console.log(`📧 Sending manual pickup email for order ${e}`);const i={to_email:n.email,to_name:n.clientName,client_name:n.clientName,pickup_date:Xg(n.pickupDate),return_date:Xg(n.returnDate),volunteer_name:"צוות הארגון",volunteer_phone:"054-2575886",organization_name:"גמח שמחת זקנתי",items_list:((t=n.items)==null?void 0:t.map(o=>`• ${o.name} - כמות: ${o.quantity}`).join(`
`))||"לא צוינו פריטים",total_items:((r=n.items)==null?void 0:r.reduce((o,s)=>o+s.quantity,0))||0,event_type:n.eventType||"כללי",order_id:e,pickup_location:n.pickupLocation||"מיקום לפי תיאום",special_instructions:n.specialInstructions||"אין הוראות מיוחדות"},a=await R5.send(m1.serviceId,m1.confirmationTemplateId,i);return console.log("✅ Manual pickup email sent successfully:",a),await Bi(Yn(_t,"orders",e),{manualEmailSent:!0,manualEmailSentAt:gi.now(),manualEmailResult:{status:a.status,text:a.text,sentAt:new Date().toISOString(),sentBy:"admin"}}),{success:!0,result:a}}catch(i){return console.error(`❌ Failed to send manual pickup email for order ${e}:`,i),{success:!1,error:i.message}}},FU=async(n,e)=>{var t,r;try{console.log(`📧 Sending reminder email for order ${e}`);const i={to_email:n.email,to_name:n.clientName,client_name:n.clientName,return_date:Xg(n.returnDate),volunteer_name:n.volunteerName||"צוות הארגון",volunteer_phone:"054-2575886",organization_name:"גמח שמחת זקנתי",items_list:((t=n.items)==null?void 0:t.map(o=>`• ${o.name} - כמות: ${o.quantity}`).join(`
`))||"לא צוינו פריטים",total_items:((r=n.items)==null?void 0:r.reduce((o,s)=>o+s.quantity,0))||0,event_type:n.eventType||"כללי",pickup_date:Xg(n.pickupDate),order_id:e},a=await R5.send(m1.serviceId,m1.reminderTemplateId,i);return console.log("✅ Reminder email sent successfully:",a),await Bi(Yn(_t,"orders",e),{reminderSent:!0,reminderSentAt:gi.now(),emailSentResult:{status:a.status,text:a.text,sentAt:new Date().toISOString()}}),{success:!0,result:a}}catch(i){return console.error(`❌ Failed to send reminder for order ${e}:`,i),{success:!1,error:i.message}}},oE=async()=>{const n=new Date,e=new Date(n);e.setDate(n.getDate()+2);const t=e.toISOString().split("T")[0];console.log(`📅 Checking emails for reminder date: ${t}`);const r={reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0};try{console.log("🔍 Checking for reminders...");const i=ul(tn(_t,"orders"),nu("status","in",["active","confirmed","picked_up","open"]),nu("returnDate","==",t)),a=await $n(i);r.totalFound=a.size;for(const c of a.docs){const f=c.data(),d=c.id;if(f.reminderSent)r.reminders.alreadySent++;else{const p=await FU(f,d);p.success?r.reminders.sent++:r.reminders.errors.push({orderId:d,email:f.email,clientName:f.clientName,error:p.error})}}const o=r.reminders.sent,s=r.reminders.errors.length;return console.log("📊 Email check results:",{reminders:r.reminders,totalSent:o,totalErrors:s}),{...r,totalSent:o,totalErrors:s,message:o>0?`בדיקה הושלמה: ${o} תזכורות נשלחו`:"לא נמצאו תזכורות לשליחה היום"}}catch(i){return console.error("❌ Error in email check:",i),{reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:i.message}],message:"שגיאה בבדיקת אימיילים"}}},zU=({show:n,selectedDate:e,selectedEvents:t,allItems:r,setShowReport:i,setShowItemsModal:a,setEditItemModal:o,fetchItemsAndOrders:s,onStartReturnInspection:c})=>{const[f,d]=ue.useState(null),[p,g]=ue.useState(new Set);if(ue.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const m=async I=>{try{return await Uh(Yn(_t,"orders",I)),!0}catch(P){throw console.error("Error deleting order:",P),P}},x=I=>{const P=new Date;P.setHours(0,0,0,0);const M=new Date(I.returnDate);M.setHours(0,0,0,0);const K=P>M,F=K?Math.ceil((P-M)/(1e3*60*60*24)):0;return{isOverdue:K,overdueDays:F}},_=I=>{const P=new Date(I.pickupDate),M=new Date;return P.setHours(0,0,0,0),M.setHours(0,0,0,0),P.getTime()===M.getTime()},T=I=>I.events.some(P=>P.type==="השאלה"),A=I=>{const P=I.manualEmailSent===!0,M=p.has(I.orderId);return P||M},D=I=>I.email&&_(I)&&T(I)&&!A(I),U=async I=>{if(D(I)){d(I.orderId);try{console.log("🚀 Sending manual pickup email for order:",I.orderId);const P=await BU({email:I.email,clientName:I.clientName,phone:I.phone,items:I.items||[],pickupDate:I.pickupDate,returnDate:I.returnDate,eventType:I.eventType||"כללי",pickupLocation:I.pickupLocation||"מיקום לפי תיאום",specialInstructions:I.specialInstructions||"אין הוראות מיוחדות"},I.orderId);if(console.log("📧 Email send result:",P),P.success)g(M=>new Set([...M,I.orderId])),console.log("✅ Email sent successfully, refreshing data..."),s&&await s(),alert("✅ אימייל נשלח בהצלחה!");else throw new Error(P.error||"Unknown error")}catch(P){console.error("❌ שגיאה בשליחת אימייל:",P),alert(`❌ שגיאה בשליחת האימייל: ${P.message}`)}finally{d(null)}}},H=I=>f===I.orderId?"שולח...":A(I)?"נשלח ✓":_(I)?"שלח אימייל איסוף":"זמין ביום האיסוף",X=I=>I.email?T(I)?A(I)?"אימייל כבר נשלח עבור הזמנה זו":_(I)?"שלח אימייל אישור איסוף ללקוח":`הכפתור יהיה זמין ביום האיסוף: ${new Date(I.pickupDate).toLocaleDateString("he-IL")}`:"כפתור האימייל זמין רק בימי איסוף (לא החזרה)":"אין כתובת אימייל עבור הזמנה זו",j=(I=>{const P=new Map;return I.forEach(M=>{P.has(M.orderId)||P.set(M.orderId,{orderId:M.orderId,clientName:M.clientName,phone:M.phone,email:M.email,items:M.items,pickupDate:M.pickupDate,returnDate:M.returnDate,manualEmailSent:M.manualEmailSent||!1,availabilityStatus:M.availabilityStatus,availabilityConflicts:M.availabilityConflicts||[],needsAttention:M.needsAttention,events:[]}),P.get(M.orderId).events.push(M)}),Array.from(P.values())})(t),C=j.some(I=>I.availabilityStatus==="CONFLICT"&&I.availabilityConflicts.length>0),N=j.some(I=>{const{isOverdue:P}=x(I);return P}),L=async I=>{if(I&&window.confirm("האם אתה בטוח שברצונך למחוק את ההזמנה?"))try{await m(I),await s(),i(!1),alert("ההזמנה נמחקה בהצלחה.")}catch(P){console.error(P),alert("מחיקה נכשלה. נסה שוב.")}},R=I=>{I.target===I.currentTarget&&i(!1)};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        .modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 32rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
        
        .availability-warning {
          background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          border: 2px solid #9333ea !important;
          border-radius: 8px !important;
          padding: 1rem !important;
          margin-bottom: 1rem !important;
          animation: warningPulse 2s ease-in-out infinite !important;
        }
        
        @keyframes warningPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        @media (min-width: 768px) {
          .modal-content {
            max-width: 42rem !important;
          }
        }
      `}),v.jsx("div",{className:"modal-overlay",onClick:R,children:v.jsxs("div",{className:"modal-content",dir:"rtl",onClick:I=>I.stopPropagation(),children:[v.jsxs("div",{style:{background:N?"linear-gradient(to right, #dc2626, #b91c1c)":C?"linear-gradient(to right, #9333ea, #7c3aed)":"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[N?v.jsx("span",{style:{fontSize:"24px"},children:"🚨"}):C?v.jsx(uf,{size:24,style:{animation:"bellRing 2s infinite"}}):v.jsx(ru,{size:24}),v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:N?"🚨 הזמנות שלא הוחזרו בזמן":C?"🔔 אירועים עם בעיות זמינות":`אירועים ליום ${e==null?void 0:e.toLocaleDateString("he-IL")}`})]}),v.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),v.jsxs("div",{style:{marginTop:"0.5rem",color:N?"#fecaca":C?"#e9d5ff":"#bfdbfe"},children:[j.length," הזמנ",j.length!==1?"ות":"ה",N&&" • 🚨 דורש טיפול דחוף",C&&!N&&" • נדרש עדכון דחוף"]})]}),C&&!N&&v.jsxs("div",{className:"availability-warning",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsx(uf,{size:20,style:{color:"#9333ea"}}),v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#581c87"},children:"בעיות זמינות זוהו!"})]}),v.jsx("p",{style:{fontSize:"0.875rem",color:"#4c1d95",margin:"0 0 0.75rem 0",lineHeight:"1.4"},children:'חלק מההזמנות בתאריך זה דורשות עדכון בגלל שינויים במלאי. לחץ על "ערוך הזמנה" להתאמת הכמויות.'}),v.jsx("div",{style:{background:"rgba(243, 232, 255, 0.7)",padding:"0.5rem",borderRadius:"6px",fontSize:"0.8rem",color:"#4c1d95"},children:"💡 הזמנות בעייתיות מסומנות בסגול למטה"})]}),v.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 200px)"},children:v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:j.map((I,P)=>{const M=I.availabilityStatus==="CONFLICT"&&I.availabilityConflicts.length>0,{isOverdue:K,overdueDays:F}=x(I);return v.jsxs("div",{style:{border:K?"2px solid #dc2626":M?"2px solid #9333ea":"1px solid #e5e7eb",borderRadius:"8px",background:K?"#fef2f2":M?"#faf5ff":"white",boxShadow:K?"0 4px 12px rgba(220, 38, 38, 0.15)":M?"0 4px 12px rgba(147, 51, 234, 0.15)":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[K&&v.jsxs("div",{style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",padding:"0.75rem",borderBottom:"1px solid #f87171",borderTopLeftRadius:"6px",borderTopRightRadius:"6px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"18px"},children:"🚨"}),v.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#dc2626"},children:"הזמנה שלא הוחזרה בזמן!"})]}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#b91c1c"},children:["איחור של ",F," יום",F>1?"ים":""," • תאריך החזרה: ",new Date(I.returnDate).toLocaleDateString("he-IL")]})]}),M&&!K&&v.jsxs("div",{style:{background:"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",padding:"0.75rem",borderBottom:"1px solid #c084fc",borderTopLeftRadius:"6px",borderTopRightRadius:"6px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx(uf,{size:16,style:{color:"#9333ea"}}),v.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#581c87"},children:"בעיות זמינות בהזמנה זו:"})]}),v.jsx("div",{style:{fontSize:"0.8rem",color:"#4c1d95"},children:I.availabilityConflicts.map((z,ee)=>v.jsxs("div",{style:{marginBottom:"0.25rem"},children:["• ",v.jsxs("strong",{children:[z.itemName,":"]})," ",z.message]},ee))})]}),v.jsxs("div",{style:{padding:"1rem",borderBottom:M||K?"none":"1px solid #f3f4f6"},children:[v.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:v.jsxs("div",{style:{flex:1},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",color:K?"#dc2626":M?"#581c87":"#1f2937",margin:0},children:I.clientName}),v.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",background:K?"#dc2626":M?"#9333ea":"#3b82f6",color:"white"},children:K?`🚨 איחור ${F} יום`:M?"🔔 בעיות זמינות":`הזמנה #${P+1}`})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:K?"#b91c1c":M?"#4c1d95":"#4b5563",marginBottom:"0.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx(od,{size:16}),v.jsx("span",{children:I.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx(ru,{size:16}),v.jsxs("span",{children:[new Date(I.pickupDate).toLocaleDateString("he-IL")," - ",new Date(I.returnDate).toLocaleDateString("he-IL")]})]})]}),v.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:I.events.map((z,ee)=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:K?"#dc2626":M?"#9333ea":z.type==="השאלה"?"#10b981":z.type==="החזרה"?"#f59e0b":"#3b82f6",color:"white",border:K||M?"1px solid rgba(255,255,255,0.3)":"none"},children:[v.jsx("span",{children:z.icon}),v.jsx("span",{children:z.description}),z.isMultiDay&&v.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:["(יום ",z.dayNumber,"/",z.totalDays,")"]})]},ee))})]})}),I.items&&I.items.length>0&&v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx(Ss,{size:16,style:{color:K?"#dc2626":M?"#9333ea":"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:K?"#dc2626":M?"#581c87":"#374151"},children:["פריטים (",I.items.reduce((z,ee)=>z+(ee.quantity||1),0),")"]})]}),v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[I.items.slice(0,3).map((z,ee)=>{const ae=M&&I.availabilityConflicts.some(Q=>Q.itemName===z.name);return v.jsxs("div",{style:{background:K?"#fee2e2":ae?"#f3e8ff":"#f9fafb",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:K?"#dc2626":ae?"#581c87":"#4b5563",border:K?"1px solid #f87171":ae?"1px solid #c084fc":"1px solid #e5e7eb",fontWeight:K||ae?"bold":"normal"},children:[K?"🚨 ":ae?"🔔 ":"",z.name," ",z.quantity>1?`(×${z.quantity})`:""]},ee)}),I.items.length>3&&v.jsxs("div",{style:{background:K?"#fee2e2":M?"#f3e8ff":"#eff6ff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:K?"#dc2626":M?"#581c87":"#2563eb",border:K?"1px solid #f87171":M?"1px solid #c084fc":"1px solid #dbeafe"},children:["+",I.items.length-3," נוספים"]})]})]})]}),v.jsx("div",{style:{padding:"1rem",background:K?"#fef2f2":M?"#faf5ff":"#f9fafb"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",flexWrap:"wrap"},children:[K&&c&&v.jsxs("button",{onClick:()=>c(I.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold",boxShadow:"0 4px 12px rgba(220, 38, 38, 0.25)",animation:"pulse 2s infinite"},children:[v.jsx(F_,{size:16}),"סגור הזמנה - דחוף!"]}),I.email&&_(I)&&T(I)&&v.jsx("button",{onClick:()=>U(I),disabled:f===I.orderId||A(I),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:f===I.orderId?"#f59e0b":A(I)?"#22c55e":"#7c3aed",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:f===I.orderId||A(I)?"not-allowed":"pointer",fontSize:"0.875rem",opacity:A(I)?.8:1,fontWeight:A(I)?"bold":"normal"},title:X(I),children:f===I.orderId?v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"שולח..."]}):v.jsxs(v.Fragment,{children:[v.jsx(DM,{size:16}),H(I)]})}),I.events.some(z=>z.icon==="📦")&&v.jsxs("button",{onClick:()=>o({open:!0,eventId:`${I.orderId}-edit`,items:I.items.map(z=>({...z}))}),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:K?"#dc2626":M?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:K||M?"bold":"normal",boxShadow:K||M?"0 4px 12px rgba(147, 51, 234, 0.25)":"none",animation:K||M?"pulse 2s infinite":"none"},children:[v.jsx(y5,{size:16}),K||M?"ערוך הזמנה - דחוף!":"ערוך הזמנה"]}),v.jsxs("button",{onClick:()=>{const z=t.filter(ee=>ee.orderId===I.orderId);a(z)},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[v.jsx(Vm,{size:16}),"הצג פרטים"]}),I.events.some(z=>z.icon==="📦")&&v.jsxs("button",{onClick:()=>L(I.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[v.jsx(x5,{size:16}),"מחק"]}),c&&I.events.some(z=>z.type==="החזרה")&&!K&&v.jsxs("button",{onClick:()=>c(I.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f59e0b",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[v.jsx(F_,{size:16}),"בדיקת החזרה"]})]})})]},I.orderId)})})}),v.jsx("div",{style:{background:isOverdue?"#fef2f2":C?"#faf5ff":"#f9fafb",padding:"1rem 1.5rem",borderTop:N?"1px solid #f87171":C?"1px solid #d8b4fe":"1px solid #e5e7eb"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{fontSize:"0.875rem",color:N?"#dc2626":C?"#581c87":"#4b5563"},children:['סה"כ ',j.reduce((I,P)=>{var M;return I+(((M=P.items)==null?void 0:M.reduce((K,F)=>K+(F.quantity||1),0))||0)},0)," פריטים",N&&" • 🚨 יש הזמנות שלא הוחזרו",C&&!N&&" • 🔔 יש בעיות זמינות"]}),v.jsx("button",{onClick:()=>i(!1),style:{background:N?"#dc2626":C?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer"},children:"סגור"})]})})]})})]})},UU=({show:n,setShow:e,selectedEvents:t,allItems:r})=>{var o;if(ue.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const i=((o=t==null?void 0:t[0])==null?void 0:o.items)||[],a=s=>{s.target===s.currentTarget&&e(!1)};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        .items-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .items-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 28rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
      `}),v.jsx("div",{className:"items-modal-overlay",onClick:a,children:v.jsxs("div",{className:"items-modal-content",dir:"rtl",onClick:s=>s.stopPropagation(),children:[v.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #047857)",color:"white",padding:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsx(Ss,{size:24}),v.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"רשימת מוצרים"})]}),v.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:v.jsx(uu,{size:20})})]}),v.jsxs("div",{style:{marginTop:"0.5rem",color:"#a7f3d0"},children:[i.length," פריט",i.length!==1?"ים":""," בהזמנה"]})]}),v.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:i.length>0?v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map((s,c)=>(r.find(f=>f.name===s.name),v.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[s.imageUrl&&v.jsx("img",{src:s.imageUrl,alt:s.name,style:{width:"4rem",height:"4rem",objectFit:"cover",borderRadius:"8px",border:"2px solid #e5e7eb"}}),v.jsxs("div",{style:{flex:1},children:[v.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:s.name}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[v.jsxs("span",{children:[v.jsx("strong",{children:"כמות:"})," ",s.quantity]}),v.jsxs("span",{children:[v.jsx("strong",{children:"מזהה מוצר:"}),v.jsx("code",{style:{background:"#f3f4f6",padding:"0.125rem 0.375rem",borderRadius:"4px",marginRight:"0.25rem"},children:s.itemId||"לא נמצא"})]})]})]}),v.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",s.quantity]})]})},c)))}):v.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[v.jsx(Ss,{size:48,style:{color:"#d1d5db",marginBottom:"1rem"}}),v.jsx("p",{children:"אין פריטים בהזמנה זו"})]})}),v.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ כמות: ',i.reduce((s,c)=>s+(c.quantity||1),0)]}),v.jsx("button",{onClick:()=>e(!1),style:{background:"#059669",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"500"},children:"סגור"})]})})]})})]})},VU=({show:n,data:e,setData:t,allItems:r,setShowReport:i,fetchItemsAndOrders:a,allEvents:o})=>{const[s,c]=ue.useState({items:[]}),[f,d]=ue.useState(!1),[p,g]=ue.useState(""),[m,x]=ue.useState({pickupDate:null,returnDate:null}),[_,T]=ue.useState(new Set);if(ue.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),ue.useEffect(()=>{if(n&&e.eventId&&o.length>0){console.log("🚀 Initializing edit modal");const N=e.eventId.split("-")[0],L=o.filter(R=>R.orderId===N);if(L.length>0){const R=L[0];x({pickupDate:new Date(R.pickupDate),returnDate:new Date(R.returnDate)});const I=new Set;R.availabilityConflicts&&R.availabilityConflicts.length>0&&R.availabilityConflicts.forEach(P=>{I.add(P.itemName)}),T(I),console.log("📅 Order dates:",{pickup:R.pickupDate,return:R.returnDate}),console.log("⚠️ Problematic items:",Array.from(I))}c({items:[...e.items||[]]})}},[n,e,o]),!n)return null;const A=N=>{var z,ee;const L=r.find(ae=>ae.name===N);if(!L)return console.warn(`❌ Stock not found for ${N}`),0;const R=L.quantity||0,I=(z=e.eventId)==null?void 0:z.split("-")[0];if(!m.pickupDate||!m.returnDate)return console.warn("⚠️ Missing pickup/return dates for current order."),R;console.log(`🔎 Checking "${N}" availability from ${m.pickupDate.toDateString()} to ${m.returnDate.toDateString()}`),console.log(`📦 Total stock from database: ${R}`);let P=0;const M=new Set;o.forEach(ae=>{if(ae.orderId===I||M.has(`${ae.orderId}-${N}`))return;const Q=new Date(ae.pickupDate),he=new Date(ae.returnDate);if(Q<=m.returnDate&&he>=m.pickupDate&&ae.items){const $=ae.items.find(Z=>Z.name===N);$&&(console.log(`➡️ Overlapping Order ID: ${ae.orderId}`),console.log(`    Dates: ${Q.toDateString()} - ${he.toDateString()}`),console.log(`    Reserved: ${$.quantity}`),P+=$.quantity||0,M.add(`${ae.orderId}-${N}`))}});const K=((ee=s.items.find(ae=>ae.name===N))==null?void 0:ee.quantity)||0,F=R-P-K;return console.log(`✅ Available: ${F} = ${R} - ${P} - ${K} (already in order)`),Math.max(0,F)},D=N=>{console.log("➕ Trying to add item:",N.name);const L=A(N.name);if(L<=0){alert(`❌ לא ניתן להוסיף מ-${N.name}. זמין: ${L}`);return}const R=s.items.findIndex(I=>I.name===N.name);if(R>=0){const I=[...s.items];I[R]={...I[R],quantity:I[R].quantity+1},c({...s,items:I})}else{const I={name:N.name,quantity:1,ItemId:N.ItemId||N.itemId||N.id,itemId:N.ItemId||N.itemId||N.id,id:N.id,imageUrl:N.imageUrl||""};c({...s,items:[...s.items,I]})}},U=(N,L)=>{var M;if(console.log(`🔄 Updating ${N} to quantity: ${L}`),L<=0){c({...s,items:s.items.filter(K=>K.name!==N)});return}const R=((M=s.items.find(K=>K.name===N))==null?void 0:M.quantity)||0,I=A(N)+R;if(L>I){alert(`❌ לא ניתן להזמין ${L} מ-${N}. זמין: ${I}`);return}const P=s.items.map(K=>K.name===N?{...K,quantity:L}:K);c({...s,items:P})},H=N=>{console.log("🗑️ Removing item:",N),c({...s,items:s.items.filter(L=>L.name!==N)})},X=async()=>{var N;try{d(!0);const L=(N=e.eventId)==null?void 0:N.split("-")[0];if(!L)throw new Error("שגיאה: לא נמצא מזהה הזמנה");console.log("💾 Saving items:",s.items);const R=s.items.map(I=>({...I,ItemId:I.ItemId||I.itemId||I.id,itemId:I.ItemId||I.itemId||I.id}));await Bi(Yn(_t,"orders",L),{items:R,availabilityStatus:"OK",availabilityConflicts:[],needsAttention:!1,lastAvailabilityCheck:_r()}),await a(),t({open:!1,eventId:null,items:[]}),i(!1),alert("🎉 השינויים נשמרו בהצלחה!")}catch(L){console.error("❌ שגיאה בשמירה:",L),alert(L.message||"שמירה נכשלה. נסה שוב.")}finally{d(!1)}},q=()=>{t({open:!1,eventId:null,items:[]})},j=r.filter(N=>N.name.toLowerCase().includes(p.toLowerCase())),C=N=>{N.target===N.currentTarget&&q()};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        .edit-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .edit-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .problematic-item {
          border: 2px solid #9333ea !important;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%) !important;
          animation: problemPulse 3s ease-in-out infinite !important;
        }

        @keyframes problemPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 4px rgba(147, 51, 234, 0.1); }
        }

        .problematic-item-indicator {
          background: #9333ea !important;
          color: white !important;
          padding: 0.25rem 0.5rem !important;
          border-radius: 4px !important;
          font-size: 0.75rem !important;
          font-weight: bold !important;
          margin-left: 0.5rem !important;
        }

        @keyframes warningPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @media (max-width: 768px) {
          .edit-modal-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .edit-modal-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .modal-footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
          }
          
          .modal-footer-mobile button {
            width: 100% !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),v.jsx("div",{className:"edit-modal-overlay",onClick:C,children:v.jsxs("div",{className:"edit-modal-content",dir:"rtl",onClick:N=>N.stopPropagation(),children:[v.jsxs("div",{style:{background:_.size>0?"linear-gradient(to right, #9333ea, #7c3aed)":"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1rem",flexShrink:0},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[_.size>0?v.jsx(uf,{size:24,style:{animation:"bellRing 2s infinite"}}):v.jsx(y5,{size:24}),v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:_.size>0?"🔔 עריכת הזמנה - יש בעיות זמינות":"עריכת הזמנה"})]}),v.jsx("button",{onClick:q,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),m.pickupDate&&m.returnDate&&v.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:_.size>0?"#e9d5ff":"#bfdbfe"},children:["📅 תאריכי ההזמנה: ",m.pickupDate.toLocaleDateString("he-IL")," - ",m.returnDate.toLocaleDateString("he-IL"),_.size>0&&v.jsxs("div",{style:{marginTop:"0.25rem",fontWeight:"bold"},children:["🔔 ",_.size," פריטים דורשים עדכון"]})]})]}),v.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[_.size>0&&v.jsxs("div",{style:{background:"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",border:"2px solid #9333ea",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem",animation:"warningPulse 2s ease-in-out infinite"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx(uf,{size:20,style:{color:"#9333ea"}}),v.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#581c87"},children:["נמצאו ",_.size," פריטים עם בעיות זמינות!"]})]}),v.jsx("p",{style:{fontSize:"0.875rem",color:"#4c1d95",margin:"0 0 0.5rem 0"},children:"הפריטים המסומנים בסגול למטה אינם זמינים בכמות המבוקשת. התאם את הכמויות או הסר פריטים כדי לפתור את הבעיה."}),v.jsxs("div",{style:{background:"rgba(243, 232, 255, 0.7)",padding:"0.5rem",borderRadius:"6px",fontSize:"0.8rem",color:"#4c1d95"},children:["💡 פריטים בעייתיים: ",Array.from(_).join(", ")]})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים נוכחיים בהזמנה (",s.items.length,")"]}),s.items.length>0?v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.items.map((N,L)=>{const R=r.find(K=>K.name===N.name),P=A(N.name)+N.quantity,M=_.has(N.name);return v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:M?"#faf5ff":"#f9fafb",padding:"0.75rem",borderRadius:"8px",border:M?"2px solid #9333ea":"1px solid #e5e7eb"},className:M?"problematic-item":"",children:[M&&v.jsx("div",{className:"problematic-item-indicator",children:"🔔 בעיה"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[(R==null?void 0:R.imageUrl)&&v.jsx("img",{src:R.imageUrl,alt:N.name,style:{width:"2.5rem",height:"2.5rem",objectFit:"cover",borderRadius:"6px",flexShrink:0,border:M?"2px solid #9333ea":"none"}}),v.jsxs("div",{style:{minWidth:0,flex:1},children:[v.jsxs("div",{style:{fontWeight:"500",color:M?"#581c87":"#1f2937",fontSize:"0.9rem"},children:[M&&"🔔 ",N.name]}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["מזהה: ",(R==null?void 0:R.ItemId)||(R==null?void 0:R.itemId)||"לא נמצא"]}),v.jsxs("div",{style:{fontSize:"0.7rem",color:M?"#9333ea":"#059669",fontWeight:M?"bold":"500"},children:["מקסימום: ",P,M&&" (לא מספיק!)"]})]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},children:[v.jsx("button",{onClick:()=>U(N.name,N.quantity-1),style:{background:"#ef4444",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f,children:v.jsx(zM,{size:12})}),v.jsx("span",{style:{width:"1.5rem",textAlign:"center",fontWeight:"500",fontSize:"0.9rem",color:M?"#9333ea":"#1f2937"},children:N.quantity}),v.jsx("button",{onClick:()=>U(N.name,N.quantity+1),style:{background:N.quantity>=P?"#9ca3af":"#10b981",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:N.quantity>=P?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f||N.quantity>=P,children:v.jsx(OS,{size:12})}),v.jsx("button",{onClick:()=>H(N.name),style:{background:M?"#9333ea":"#ef4444",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",border:"none",cursor:"pointer",marginRight:"0.3rem",fontSize:"0.75rem",fontWeight:M?"bold":"normal"},disabled:f,children:M?"הסר בעיה":"הסר"})]})]},L)})}):v.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"#6b7280"},children:"אין פריטים בהזמנה"})]}),v.jsxs("div",{children:[v.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"הוסף פריטים מהמלאי"}),v.jsx("div",{style:{marginBottom:"1rem"},children:v.jsxs("div",{style:{position:"relative"},children:[v.jsx(kS,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),v.jsx("input",{type:"text",placeholder:"חפש פריט...",value:p,onChange:N=>g(N.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:f})]})}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"0.75rem",maxHeight:"10rem",overflowY:"auto",overflowX:"hidden"},children:j.map((N,L)=>{var F;const R=s.items.some(z=>z.name===N.name),I=R?(F=s.items.find(z=>z.name===N.name))==null?void 0:F.quantity:0,P=A(N.name),M=I<P+I,K=_.has(N.name);return v.jsx("div",{onClick:()=>!f&&M&&D(N),style:{padding:"0.6rem",borderRadius:"8px",border:R?K?"2px solid #9333ea":"2px solid #3b82f6":"1px solid #e5e7eb",background:R?K?"#faf5ff":"#eff6ff":"white",cursor:f||!M?"not-allowed":"pointer",transition:"all 0.2s",opacity:f||!M?.6:1},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[N.imageUrl&&v.jsx("img",{src:N.imageUrl,alt:N.name,style:{width:"2rem",height:"2rem",objectFit:"cover",borderRadius:"6px",flexShrink:0,border:K?"1px solid #9333ea":"none"}}),v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsxs("div",{style:{fontWeight:"500",fontSize:"0.8rem",color:K?"#581c87":"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[K&&"🔔 ",N.name]}),v.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["מזהה: ",N.itemId||N.ItemId]}),v.jsxs("div",{style:{fontSize:"0.65rem",color:P>0?"#059669":"#dc2626",fontWeight:"500"},children:["זמין: ",P]}),R&&v.jsxs("div",{style:{fontSize:"0.65rem",color:K?"#9333ea":"#2563eb",fontWeight:"500"},children:["בהזמנה: ",I,K&&" (בעיה!)"]})]})]})},L)})})]})]}),v.jsx("div",{style:{background:_.size>0?"#faf5ff":"#f9fafb",padding:"1rem",borderTop:_.size>0?"1px solid #d8b4fe":"1px solid #e5e7eb",flexShrink:0},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"modal-footer-mobile",children:[v.jsxs("div",{style:{fontSize:"0.875rem",color:_.size>0?"#581c87":"#4b5563"},children:['סה"כ פריטים: ',s.items.reduce((N,L)=>N+L.quantity,0),_.size>0&&` • 🔔 ${_.size} בעיות`]}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"modal-footer-mobile",children:[v.jsx("button",{onClick:q,disabled:f,style:{background:"#6b7280",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:f?"not-allowed":"pointer",fontSize:"0.875rem",opacity:f?.6:1},children:"ביטול"}),v.jsx("button",{onClick:X,disabled:f||s.items.length===0,style:{background:s.items.length===0?"#9ca3af":_.size>0?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:s.items.length===0||f?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:_.size>0?"bold":"normal"},children:f?v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"שומר..."]}):v.jsxs(v.Fragment,{children:[v.jsx(qm,{size:16}),_.size>0?"שמור ותקן בעיות":"שמור שינויים"]})})]})]})})]})})]})};class qU{static async checkAllActiveOrders(){try{console.log("🔍 מתחיל בדיקת זמינות לכל ההזמנות הפעילות...");const[e,t]=await Promise.all([this.getAllActiveOrders(),this.getAllItems()]);console.log(`📊 נמצאו ${e.length} הזמנות פעילות ו-${t.length} פריטים במלאי`);const r=[];for(const i of e){const a=await this.checkOrderAvailability(i,e,t);a.length>0&&r.push({order:i,conflicts:a})}return console.log(`⚠️ נמצאו ${r.length} הזמנות עם בעיות זמינות`),await this.updateOrdersWithConflicts(r),{success:!0,totalOrders:e.length,problematicOrders:r.length,conflicts:r}}catch(e){return console.error("❌ שגיאה בבדיקת זמינות:",e),{success:!1,error:e.message}}}static async getAllActiveOrders(){return(await $n(tn(_t,"orders"))).docs.map(t=>({id:t.id,...t.data()})).filter(t=>t.status==="open").sort((t,r)=>new Date(t.pickupDate)-new Date(r.pickupDate))}static async getAllItems(){return(await $n(tn(_t,"items"))).docs.map(t=>({id:t.id,...t.data()})).filter(t=>t.isDeleted!==!0)}static async checkOrderAvailability(e,t,r){const i=[];if(!e.items||!e.pickupDate||!e.returnDate)return i;const a=new Date(e.pickupDate),o=new Date(e.returnDate);for(const s of e.items){const c=r.find(d=>d.id===s.id||d.name===s.name);if(!c){i.push({itemName:s.name,itemId:s.ItemId||s.itemId,requested:s.quantity,available:0,issue:"ITEM_NOT_FOUND",message:"הפריט לא נמצא במלאי"});continue}const f=this.calculateAvailableQuantity(c,e,t,a,o);s.quantity>f&&i.push({itemName:s.name,itemId:c.ItemId,requested:s.quantity,available:f,totalStock:c.quantity,issue:"INSUFFICIENT_STOCK",message:`מבוקש: ${s.quantity}, זמין: ${f}`})}return i}static calculateAvailableQuantity(e,t,r,i,a){const o=e.quantity||0;let s=0;for(const c of r){if(c.id===t.id||!c.pickupDate||!c.returnDate||!c.items)continue;const f=new Date(c.pickupDate);if(new Date(c.returnDate)>=i&&f<=a){const g=c.items.find(m=>m.id===e.id||m.name===e.name);g&&(s+=g.quantity||0)}}return Math.max(0,o-s)}static async updateOrdersWithConflicts(e){const t=[];for(const{order:r,conflicts:i}of e)try{const a={availabilityStatus:"CONFLICT",availabilityConflicts:i,conflictDetectedAt:new Date().toISOString(),needsAttention:!0,lastAvailabilityCheck:_r()};t.push(Bi(Yn(_t,"orders",r.id),a)),console.log(`⚠️ עודכנה הזמנה ${r.simpleId||r.id} עם ${i.length} בעיות זמינות`)}catch(a){console.error(`❌ שגיאה בעדכון הזמנה ${r.id}:`,a)}t.length>0&&(await Promise.all(t),console.log(`✅ עודכנו ${t.length} הזמנות עם בעיות זמינות`))}static async clearAvailabilityConflict(e){try{await Bi(Yn(_t,"orders",e),{availabilityStatus:"OK",availabilityConflicts:[],needsAttention:!1,lastAvailabilityCheck:_r()}),console.log(`✅ נוקה סטטוס זמינות מהזמנה ${e}`)}catch(t){console.error("❌ שגיאה בניקוי סטטוס זמינות:",t)}}static async runAfterOrderClosure(e){console.log(`🔄 מריץ בדיקת זמינות אחרי סגירת הזמנה ${e}`);const t=await this.checkAllActiveOrders();return t.success&&t.problematicOrders>0?(console.log(`🚨 נמצאו ${t.problematicOrders} הזמנות שדורשות עדכון אחרי סגירת ההזמנה`),{shouldShowAlert:!0,message:`נמצאו ${t.problematicOrders} הזמנות עתידיות שדורשות עדכון בגלל שינויי מלאי`,conflicts:t.conflicts}):{shouldShowAlert:!1}}static async quickCheckOrder(e){try{const[t,r]=await Promise.all([this.getAllActiveOrders(),this.getAllItems()]),i=t.find(o=>o.id===e);if(!i)return{hasConflicts:!1};const a=await this.checkOrderAvailability(i,t,r);return{hasConflicts:a.length>0,conflicts:a}}catch(t){return console.error("❌ שגיאה בבדיקה מהירה:",t),{hasConflicts:!1,error:t.message}}}}const HU=({show:n,order:e,onClose:t,onCompleteInspection:r,allItems:i=[],updateItemQuantities:a})=>{const[o,s]=ue.useState([]),[c,f]=ue.useState(new Set),[d,p]=ue.useState(""),[g,m]=ue.useState(!1),[x,_]=ue.useState(null);if(ue.useEffect(()=>{if(n&&(e!=null&&e.items)){const q=e.items.map(j=>({itemId:j.id||j.itemId,name:j.name,quantityExpected:j.quantity||1,quantityReturned:j.quantity||1,isFullyReturned:!0,condition:"good",damageDescription:"",repairCost:0,notes:""}));s(q),f(new Set),p(""),_(null)}},[n,e]),ue.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n||!e)return null;const T=(q,j,C)=>{s(N=>N.map((L,R)=>{if(R===q){const I={...L,[j]:C};return I.isFullyReturned=C>=L.quantityExpected,C<L.quantityExpected?I.condition="lost":I.condition==="lost"&&(I.condition="good"),I}return L})),f(N=>{const L=new Set(N);return L.delete(q),L})},A=q=>{f(j=>new Set([...j,q]))},D=()=>o.length>0&&c.size===o.length,U=async()=>{if(!D()){alert("יש לאשר את כל הפריטים לפני השלמת הבדיקה");return}const q=o.reduce((L,R)=>L+R.quantityExpected,0),j=o.reduce((L,R)=>L+R.quantityReturned,0),C=Math.round(j/q*100),N=`האם אתה בטוח שברצונך לסיים את בדיקת ההחזרה?

סיכום:
• פריטים שהושאלו: ${q}/${q}
• פריטים שחזרו: ${j}/${q}
• אחוז החזרה: ${C}%

ההזמנה תעבור לאיסוף ההזמנות הסגורות.`;if(window.confirm(N))try{m(!0);const L=o.reduce((F,z)=>F+z.quantityExpected,0),R=o.reduce((F,z)=>F+z.quantityReturned,0),I=o.filter(F=>F.condition==="damaged").length,P=o.reduce((F,z)=>F+(z.repairCost||0),0),M={totalItemsExpected:L,totalItemsReturned:R,totalDamages:I,totalRepairCost:P,managerNotes:d,customerNotified:!1,customerAgreedToCharges:!1};for(const F of o){const z=i.find(ee=>ee.id===F.itemId||ee.name===F.name);if(z){let ee=0;const ae=F.quantityExpected-F.quantityReturned,Q=F.condition==="damaged"?F.quantityReturned:0;ee=ae+Q;const he=z.quantity-ee,G=Math.max(0,he);ee>0&&await Bi(Yn(_t,"items",z.id),{quantity:G,lastUpdated:_r()})}}await r(e.id,o,M),a&&await a(),console.log("🔍 בודק זמינות להזמנות עתידיות אחרי סגירת ההזמנה...");const K=await qU.runAfterOrderClosure(e.id);if(K.shouldShowAlert){console.log("🚨 נמצאו בעיות זמינות:",K),_(K),m(!1);return}t()}catch(L){console.error("Error completing return inspection:",L),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}finally{m(!1)}},H=()=>{_(null),t()},X=q=>{q.target===q.currentTarget&&window.confirm("האם אתה בטוח שברצונך לסגור את חלון בדיקת החזרה?")&&t()};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        .return-inspection-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.7) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .return-inspection-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .availability-alert {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important;
          border: 2px solid #f59e0b !important;
          border-radius: 12px !important;
          padding: 1.5rem !important;
          margin: 1rem !important;
          box-shadow: 0 8px 25px rgba(245, 158, 11, 0.2) !important;
        }

        @media (max-width: 768px) {
          .return-inspection-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .return-inspection-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
            align-items: stretch !important;
          }
          
          .footer-mobile button {
            width: 100% !important;
          }
          
          .footer-mobile .summary-text {
            text-align: center !important;
            margin-bottom: 0.5rem !important;
          }

          .availability-alert {
            margin: 0.5rem !important;
            padding: 1rem !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes slideDown {
          0% { transform: translateY(-10px); opacity: 0; }
          100% { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }
      `}),v.jsx("div",{className:"return-inspection-overlay",onClick:X,children:v.jsxs("div",{className:"return-inspection-content",dir:"rtl",onClick:q=>q.stopPropagation(),children:[x&&v.jsxs("div",{className:"availability-alert",style:{animation:"slideDown 0.3s ease-out"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[v.jsx(PS,{size:24,style:{color:"#f59e0b",animation:"pulse 2s infinite"}}),v.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"bold",margin:0,color:"#92400e"},children:"⚠️ נמצאו הזמנות עתידיות שדורשות עדכון!"})]}),v.jsx("p",{style:{color:"#92400e",marginBottom:"1rem",fontSize:"0.95rem",lineHeight:"1.5"},children:x.message}),x.conflicts&&x.conflicts.length>0&&v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#92400e",marginBottom:"0.5rem"},children:"הזמנות שדורשות עדכון:"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[x.conflicts.slice(0,3).map((q,j)=>v.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.5)",padding:"0.75rem",borderRadius:"8px",border:"1px solid #fbbf24"},children:[v.jsxs("div",{style:{fontWeight:"600",fontSize:"0.9rem",color:"#92400e"},children:["הזמנה #",q.order.simpleId||q.order.id]}),v.jsxs("div",{style:{fontSize:"0.85rem",color:"#78350f",marginTop:"0.25rem"},children:[q.conflicts.length," פריטים עם בעיות זמינות"]})]},j)),x.conflicts.length>3&&v.jsxs("div",{style:{textAlign:"center",fontSize:"0.85rem",color:"#92400e",fontStyle:"italic"},children:["ועוד ",x.conflicts.length-3," הזמנות נוספות..."]})]})]}),v.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.7)",padding:"0.75rem",borderRadius:"8px",fontSize:"0.9rem",color:"#78350f",marginBottom:"1rem"},children:["💡 ",v.jsx("strong",{children:"מה לעשות:"}),' עבור ללוח השנה, מצא את האירועים הבעייתיים (יופיעו בצבע שונה), ולחץ על "ערוך הזמנה" כדי להתאים את הכמויות למלאי הזמין.']}),v.jsx("button",{onClick:H,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",width:"100%",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",transition:"all 0.2s ease"},onMouseOver:q=>q.target.style.transform="translateY(-1px)",onMouseOut:q=>q.target.style.transform="translateY(0)",children:"הבנתי - סגור בדיקת החזרה ועבור ללוח השנה"})]}),v.jsxs("div",{style:{background:"linear-gradient(to right, #fb923c, #f97316)",color:"white",padding:"1rem",flexShrink:0},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsx(bf,{size:24}),v.jsxs("div",{children:[v.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"בדיקת החזרת מוצרים"}),v.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:["לקוח: ",e.clientName," • ",e.phone]})]})]}),v.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),v.jsxs("div",{style:{marginTop:"1rem",background:"rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"0.75rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.875rem"},children:[v.jsx("span",{children:"התקדמות הבדיקה"}),v.jsxs("span",{style:{fontWeight:"bold"},children:[c.size,"/",o.length," פריטים אושרו"]})]}),v.jsx("div",{style:{marginTop:"0.5rem",background:"rgba(255, 255, 255, 0.3)",borderRadius:"4px",height:"6px",overflow:"hidden"},children:v.jsx("div",{style:{background:"#10b981",height:"100%",width:`${o.length>0?c.size/o.length*100:0}%`,transition:"width 0.3s ease"}})})]})]}),v.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:o.map((q,j)=>{var N,L;return c.has(j)?null:v.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1rem",background:"#ffffff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsx("img",{src:((N=e.items.find(R=>R.id===q.itemId))==null?void 0:N.imageUrl)||"/no-image-available.png",alt:q.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb",flexShrink:0}}),v.jsxs("div",{style:{minWidth:0,flex:1},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:q.name}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["מזהה: ",q.ItemId||((L=e.items.find(R=>R.id===q.itemId))==null?void 0:L.ItemId)||q.itemId]}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["כמות מוזמנת: ",q.quantityExpected]})]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[v.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"כמות שחזרה:"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsx("button",{onClick:()=>{const R=Math.max(0,q.quantityReturned-1);T(j,"quantityReturned",R)},disabled:q.quantityReturned<=0,style:{background:q.quantityReturned<=0?"#d1d5db":"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:q.quantityReturned<=0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:q.quantityReturned<=0?.6:1},children:"-"}),v.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"40px",textAlign:"center",color:"#1f2937"},children:q.quantityReturned}),v.jsx("button",{onClick:()=>{const R=Math.min(q.quantityExpected,q.quantityReturned+1);T(j,"quantityReturned",R)},disabled:q.quantityReturned>=q.quantityExpected,style:{background:q.quantityReturned>=q.quantityExpected?"#d1d5db":"#10b981",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:q.quantityReturned>=q.quantityExpected?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:q.quantityReturned>=q.quantityExpected?.6:1},children:"+"}),v.jsxs("button",{onClick:()=>A(j),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",marginRight:"1rem"},children:[v.jsx(NS,{size:16}),"בוצע"]})]})]}),q.quantityReturned<q.quantityExpected&&v.jsx("div",{style:{padding:"0.5rem",background:"#fef3c7",borderRadius:"6px",textAlign:"center"},children:v.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"500"},children:["⚠️ חסרים ",q.quantityExpected-q.quantityReturned," פריטים"]})})]})},j)})}),c.size>0&&v.jsxs("div",{style:{marginTop:"2rem",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"12px",padding:"1rem"},children:[v.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"bold",color:"#0369a1",margin:"0 0 1rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(bf,{size:20}),"פריטים שאושרו (",c.size,"/",o.length,")"]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Array.from(c).map(q=>{const j=o[q];return v.jsxs("div",{style:{background:"white",border:"1px solid #bae6fd",borderRadius:"8px",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#1f2937"},children:j.name}),v.jsxs("span",{style:{fontSize:"0.875rem",color:"#059669",fontWeight:"500"},children:["כמות שחזרה: ",j.quantityReturned]})]},q)})})]})]}),v.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"footer-mobile",children:[v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"summary-text",children:D()?"כל הפריטים אושרו - ניתן להשלים את הבדיקה":`יש לאשר את כל הפריטים (${c.size}/${o.length})`}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"footer-mobile",children:[v.jsx("button",{onClick:t,disabled:g,style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:g?"not-allowed":"pointer",fontSize:"0.875rem",opacity:g?.6:1},children:"ביטול"}),v.jsx("button",{onClick:U,disabled:g||!D(),style:{background:D()?"#f59e0b":"#9ca3af",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:g||!D()?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:g||!D()?.6:1,justifyContent:"center"},children:g?v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"מעבד..."]}):v.jsxs(v.Fragment,{children:[v.jsx(qm,{size:16}),"השלם בדיקת החזרה"]})})]})]})})]})})]})},WU=({allItems:n,itemsMap:e,events:t,setAllItems:r,setItemsMap:i,setEvents:a,fetchItemsAndOrders:o})=>{const[s,c]=ue.useState(new Date),[f,d]=ue.useState([]),[p,g]=ue.useState(!1),[m,x]=ue.useState(null),[_,T]=ue.useState(!1),[A,D]=ue.useState({open:!1,eventId:null,items:[]}),[U,H]=ue.useState({show:!1,order:null}),X=async C=>{try{const N=t.filter(L=>L.orderId===C);if(N.length>0){const L={id:C,clientName:N[0].clientName,phone:N[0].phone,items:N[0].items,pickupDate:N[0].pickupDate,returnDate:N[0].returnDate};H({show:!0,order:L}),g(!1)}}catch(N){console.error("Error initializing return inspection:",N),alert("שגיאה בהתחלת בדיקת החזרה. נסה שוב.")}},q=async C=>{try{const N={status:"closed","returnInspection.inspectionStatus":"completed","returnInspection.inspectedBy":"סגירה ידנית","returnInspection.inspectionDate":_r(),"returnInspection.managerNotes":"הזמנה נסגרה ידנית על ידי המנהל","returnInspection.totalItemsReturned":0,"returnInspection.totalDamages":0,"returnInspection.totalRepairCost":0,closedAt:_r(),manuallyClosedAt:_r()};await Bi(Yn(_t,"orders",C),N),await o(),g(!1),alert("ההזמנה נסגרה ידנית והועברה להיסטוריה!")}catch(N){console.error("Error manually closing order:",N),alert("שגיאה בסגירת ההזמנה. נסה שוב.")}},j=async(C,N,L)=>{try{const R={status:"closed",returnInspection:{inspectionStatus:"completed",inspectedBy:"מנהל המערכת",inspectionDate:_r(),itemInspections:N.map(I=>({itemId:I.itemId,name:I.name,quantityExpected:I.quantityExpected,quantityReturned:I.quantityReturned,condition:I.condition,damageDescription:I.damageDescription||"",repairCost:I.repairCost||0,notes:I.notes||"",inspectedAt:new Date().toISOString()})),totalItemsReturned:L.totalItemsReturned,totalItemsExpected:L.totalItemsExpected,totalDamages:L.totalDamages,totalRepairCost:L.totalRepairCost,managerNotes:L.managerNotes,customerNotified:L.customerNotified,customerAgreedToCharges:L.customerAgreedToCharges},closedAt:_r()};await Bi(Yn(_t,"orders",C),R),await o(),H({show:!1,order:null}),alert("בדיקת החזרה הושלמה בהצלחה! ההזמנה הועברה להיסטוריה.")}catch(R){console.error("Error completing return inspection:",R),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}};return v.jsxs("div",{className:"mt-6",children:[v.jsx(EU,{currentDate:s,events:t,setCurrentDate:c,setSelectedEvents:d,setSelectedDate:x,setShowReport:g,fetchItemsAndOrders:o}),v.jsx(zU,{show:p,selectedDate:m,selectedEvents:f,allItems:n,setShowReport:g,setShowItemsModal:T,setEditItemModal:D,fetchItemsAndOrders:o,onStartReturnInspection:X,onCloseOrderManually:q}),v.jsx(UU,{show:!!_,setShow:()=>T(!1),selectedEvents:_,allItems:n}),v.jsx(VU,{show:A.open,data:A,setData:D,allItems:n,setShowReport:g,fetchItemsAndOrders:o,allEvents:t}),v.jsx(HU,{show:U.show,order:U.order,onClose:()=>H({show:!1,order:null}),onCompleteInspection:j,allItems:n,updateItemQuantities:o})]})},Hy=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},GU=async(n,e)=>{const t=Hy(new Date);for(const r of n.docs){const i=r.data();!i.pickupDate||i.stockUpdated||Hy(new Date(i.pickupDate))>t||await Bi(Yn(e,"orders",r.id),{stockUpdated:!0})}},$U=(n,e)=>{const t=Hy(new Date);return n.docs.flatMap(r=>{const i=r.data();if(i.status==="closed")return[];const a=(s=[])=>s.map(c=>{const f=e.find(d=>d.id===c.id);return{...c,imageUrl:(f==null?void 0:f.imageUrl)||null,itemId:(f==null?void 0:f.itemId)||"לא נמצא"}}),o=[];if(i.pickupDate&&i.returnDate){const s=new Date(i.pickupDate),c=new Date(i.returnDate);s.setHours(0,0,0,0),c.setHours(0,0,0,0);const f=t>c,d=f?Math.ceil((t-c)/(1e3*60*60*24)):0,p=Math.ceil((c-s)/(1e3*60*60*24));for(let g=0;g<=p;g++){if(g!==0&&g!==p)continue;const m=new Date(s);m.setDate(s.getDate()+g);let x,_,T;g===0?(x="השאלה",_="📦",T="איסוף מוצרים"):g===p&&(x="החזרה",_="🔄",T="החזרת מוצרים"),o.push({id:`${r.id}-${m.toISOString().slice(0,10)}`,orderId:r.id,date:new Date(m),clientName:i.clientName,phone:i.phone,email:i.email,manualEmailSent:i.manualEmailSent||!1,manualEmailSentAt:i.manualEmailSentAt||null,type:x,icon:_,description:T,items:a(i.items),pickupDate:i.pickupDate,returnDate:i.returnDate,dayNumber:g+1,totalDays:p+1,isMultiDay:p>0,isOverdue:f,overdueDays:d,availabilityStatus:i.availabilityStatus||"OK",availabilityConflicts:i.availabilityConflicts||[],needsAttention:i.needsAttention||!1,eventType:i.eventType||"כללי",pickupLocation:i.pickupLocation||"מיקום לפי תיאום",specialInstructions:i.specialInstructions||"אין הוראות מיוחדות"})}}return o})},YU=async(n,e,t,r)=>{try{console.log("🔄 Fetching items and orders...");const a=(await $n(tn(n,"items"))).docs.map(f=>{const d=f.data();return{id:f.id,itemId:d.ItemId,name:d.name,imageUrl:d.imageUrl,quantity:d.quantity||0,isDeleted:d.isDeleted||!1}}).filter(f=>!f.isDeleted);console.log("📊 Items loaded with quantities:",a.map(f=>({name:f.name,quantity:f.quantity}))),e(a);const o={};a.forEach(f=>{o[f.name]=f.imageUrl||null}),t(o);const s=await $n(tn(n,"orders"));console.log("📋 Orders loaded:",s.docs.length),await GU(s,n);const c=$U(s,a);console.log("📅 Events built:",c.length),r(c),console.log("✅ Data refresh completed")}catch(i){console.error("❌ שגיאה בטעינת ההזמנות והפריטים:",i)}},XU=()=>{const[n,e]=ue.useState([]),[t,r]=ue.useState({}),[i,a]=ue.useState([]),[o,s]=ue.useState(!0),[c,f]=ue.useState(null),[d,p]=ue.useState(new Date),g=async()=>{try{s(!0),f(null),await YU(_t,e,r,a)}catch(m){console.error("Error fetching calendar data:",m),f("שגיאה בטעינת נתוני היומן. אנא נסה שוב.")}finally{s(!1)}};return ue.useEffect(()=>{g()},[]),o?v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,children:`
          @keyframes highlightFlash {
            0%, 100% { 
              transform: scale(1);
              box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.8);
            }
            25% { 
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.4);
            }
            50% { 
              transform: scale(1.08);
              box-shadow: 0 0 0 20px rgba(147, 51, 234, 0.2);
            }
            75% { 
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.4);
            }
          }
        `}),v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full border-blue-600 border-t-transparent"}),v.jsx("p",{className:"mt-4 text-gray-600",children:"טוען נתוני יומן..."})]})})]}):c?v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-red-600 mb-4",children:c}),v.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"נסה שוב"})]})}):v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        @keyframes highlightFlash {
          0% { 
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(147, 51, 234, 1);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          }
          15% { 
            transform: scale(1.1);
            box-shadow: 0 0 0 15px rgba(147, 51, 234, 0.6);
            border-color: #7c3aed !important;
            background: linear-gradient(135deg, #e9d5ff 0%, #c4b5fd 100%) !important;
          }
          30% { 
            transform: scale(1.15);
            box-shadow: 0 0 0 25px rgba(147, 51, 234, 0.4);
            border-color: #6d28d9 !important;
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%) !important;
          }
          50% { 
            transform: scale(1.12);
            box-shadow: 0 0 0 30px rgba(147, 51, 234, 0.2);
            border-color: #5b21b6 !important;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%) !important;
          }
          70% { 
            transform: scale(1.08);
            box-shadow: 0 0 0 20px rgba(147, 51, 234, 0.3);
            border-color: #7c3aed !important;
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%) !important;
          }
          85% { 
            transform: scale(1.05);
            box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.5);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #e9d5ff 0%, #c4b5fd 100%) !important;
          }
          100% { 
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.8);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          }
        }
        
        /* סטיילינג נוסף למחוון יום מודגש */
        .day-cell[style*="highlightFlash"] {
          position: relative !important;
          z-index: 1000 !important;
        }
        
        .day-cell[style*="highlightFlash"] .day-number {
          color: #581c87 !important;
          font-weight: bold !important;
          font-size: 1.2rem !important;
        }
      `}),v.jsx("div",{className:"container mx-auto px-4",children:v.jsx(WU,{allItems:n,itemsMap:t,events:i,setAllItems:e,setItemsMap:r,setEvents:a,fetchItemsAndOrders:g,currentDate:d,setCurrentDate:p})})]})};function sE(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=sE(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ld(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=sE(n))&&(r&&(r+=" "),r+=e);return r}function KU(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}KU(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var z1=n=>typeof n=="number"&&!isNaN(n),vd=n=>typeof n=="string",iu=n=>typeof n=="function",QU=n=>vd(n)||z1(n),Wy=n=>vd(n)||iu(n)?n:null,ZU=(n,e)=>n===!1||z1(n)&&n>0?n:e,Gy=n=>ue.isValidElement(n)||vd(n)||iu(n)||z1(n);function JU(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function eV({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:s,done:c,nodeRef:f,isIn:d,playToast:p}){let g=t?`${n}--${o}`:n,m=t?`${e}--${o}`:e,x=ue.useRef(0);return ue.useLayoutEffect(()=>{let _=f.current,T=g.split(" "),A=D=>{D.target===f.current&&(p(),_.removeEventListener("animationend",A),_.removeEventListener("animationcancel",A),x.current===0&&D.type!=="animationcancel"&&_.classList.remove(...T))};_.classList.add(...T),_.addEventListener("animationend",A),_.addEventListener("animationcancel",A)},[]),ue.useEffect(()=>{let _=f.current,T=()=>{_.removeEventListener("animationend",T),r?JU(_,c,i):c()};d||(s?T():(x.current=1,_.className+=` ${m}`,_.addEventListener("animationend",T)))},[d]),Ln.createElement(Ln.Fragment,null,a)}}function w4(n,e){return{content:lE(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function lE(n,e,t=!1){return ue.isValidElement(n)&&!vd(n.type)?ue.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):iu(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function tV({closeToast:n,theme:e,ariaLabel:t="close"}){return Ln.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},Ln.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ln.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function nV({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:a,controlledProgress:o,progress:s,rtl:c,isIn:f,theme:d}){let p=i||o&&s===0,g={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};o&&(g.transform=`scaleX(${s})`);let m=ld("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),x=iu(a)?a({rtl:c,type:r,defaultClassName:m}):ld(m,a),_={[o&&s>=1?"onTransitionEnd":"onAnimationEnd"]:o&&s<1?null:()=>{f&&t()}};return Ln.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},Ln.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${r}`}),Ln.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:x,style:g,..._}))}var rV=1,cE=()=>`${rV++}`;function iV(n,e,t){let r=1,i=0,a=[],o=[],s=e,c=new Map,f=new Set,d=D=>(f.add(D),()=>f.delete(D)),p=()=>{o=Array.from(c.values()),f.forEach(D=>D())},g=({containerId:D,toastId:U,updateId:H})=>{let X=D?D!==n:n!==1,q=c.has(U)&&H==null;return X||q},m=(D,U)=>{c.forEach(H=>{var X;(U==null||U===H.props.toastId)&&((X=H.toggle)==null||X.call(H,D))})},x=D=>{var U,H;(H=(U=D.props)==null?void 0:U.onClose)==null||H.call(U,D.removalReason),D.isActive=!1},_=D=>{if(D==null)c.forEach(x);else{let U=c.get(D);U&&x(U)}p()},T=()=>{i-=a.length,a=[]},A=D=>{var U,H;let{toastId:X,updateId:q}=D.props,j=q==null;D.staleId&&c.delete(D.staleId),D.isActive=!0,c.set(X,D),p(),t(w4(D,j?"added":"updated")),j&&((H=(U=D.props).onOpen)==null||H.call(U))};return{id:n,props:s,observe:d,toggle:m,removeToast:_,toasts:c,clearQueue:T,buildToast:(D,U)=>{if(g(U))return;let{toastId:H,updateId:X,data:q,staleId:j,delay:C}=U,N=X==null;N&&i++;let L={...s,style:s.toastStyle,key:r++,...Object.fromEntries(Object.entries(U).filter(([I,P])=>P!=null)),toastId:H,updateId:X,data:q,isIn:!1,className:Wy(U.className||s.toastClassName),progressClassName:Wy(U.progressClassName||s.progressClassName),autoClose:U.isLoading?!1:ZU(U.autoClose,s.autoClose),closeToast(I){c.get(H).removalReason=I,_(H)},deleteToast(){let I=c.get(H);if(I!=null){if(t(w4(I,"removed")),c.delete(H),i--,i<0&&(i=0),a.length>0){A(a.shift());return}p()}}};L.closeButton=s.closeButton,U.closeButton===!1||Gy(U.closeButton)?L.closeButton=U.closeButton:U.closeButton===!0&&(L.closeButton=Gy(s.closeButton)?s.closeButton:!0);let R={content:D,props:L,staleId:j};s.limit&&s.limit>0&&i>s.limit&&N?a.push(R):z1(C)?setTimeout(()=>{A(R)},C):A(R)},setProps(D){s=D},setToggle:(D,U)=>{let H=c.get(D);H&&(H.toggle=U)},isToastActive:D=>{var U;return(U=c.get(D))==null?void 0:U.isActive},getSnapshot:()=>o}}var Za=new Map,v1=[],$y=new Set,aV=n=>$y.forEach(e=>e(n)),uE=()=>Za.size>0;function oV(){v1.forEach(n=>dE(n.content,n.options)),v1=[]}var sV=(n,{containerId:e})=>{var t;return(t=Za.get(e||1))==null?void 0:t.toasts.get(n)};function fE(n,e){var t;if(e)return!!((t=Za.get(e))!=null&&t.isToastActive(n));let r=!1;return Za.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function lV(n){if(!uE()){v1=v1.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||QU(n))Za.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Za.get(n.containerId);e?e.removeToast(n.id):Za.forEach(t=>{t.removeToast(n.id)})}}var cV=(n={})=>{Za.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function dE(n,e){Gy(n)&&(uE()||v1.push({content:n,options:e}),Za.forEach(t=>{t.buildToast(n,e)}))}function uV(n){var e;(e=Za.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function hE(n,e){Za.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function fV(n){let e=n.containerId||1;return{subscribe(t){let r=iV(e,n,aV);Za.set(e,r);let i=r.observe(t);return oV(),()=>{i(),Za.delete(e)}},setProps(t){var r;(r=Za.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Za.get(e))==null?void 0:t.getSnapshot()}}}function dV(n){return $y.add(n),()=>{$y.delete(n)}}function hV(n){return n&&(vd(n.toastId)||z1(n.toastId))?n.toastId:cE()}function U1(n,e){return dE(n,e),e.toastId}function $m(n,e){return{...e,type:e&&e.type||n,toastId:hV(e)}}function Ym(n){return(e,t)=>U1(e,$m(n,t))}function xn(n,e){return U1(n,$m("default",e))}xn.loading=(n,e)=>U1(n,$m("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function pV(n,{pending:e,error:t,success:r},i){let a;e&&(a=vd(e)?xn.loading(e,i):xn.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(f,d,p)=>{if(d==null){xn.dismiss(a);return}let g={type:f,...o,...i,data:p},m=vd(d)?{render:d}:d;return a?xn.update(a,{...g,...m}):xn(m.render,{...g,...m}),p},c=iu(n)?n():n;return c.then(f=>s("success",r,f)).catch(f=>s("error",t,f)),c}xn.promise=pV;xn.success=Ym("success");xn.info=Ym("info");xn.error=Ym("error");xn.warning=Ym("warning");xn.warn=xn.warning;xn.dark=(n,e)=>U1(n,$m("default",{theme:"dark",...e}));function gV(n){lV(n)}xn.dismiss=gV;xn.clearWaitingQueue=cV;xn.isActive=fE;xn.update=(n,e={})=>{let t=sV(n,e);if(t){let{props:r,content:i}=t,a={delay:100,...r,...e,toastId:e.toastId||n,updateId:cE()};a.toastId!==n&&(a.staleId=n);let o=a.render||i;delete a.render,U1(o,a)}};xn.done=n=>{xn.update(n,{progress:1})};xn.onChange=dV;xn.play=n=>hE(!0,n);xn.pause=n=>hE(!1,n);function mV(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=ue.useRef(fV(n)).current;i(n);let a=(e=ue.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function o(s){if(!a)return[];let c=new Map;return n.newestOnTop&&a.reverse(),a.forEach(f=>{let{position:d}=f.props;c.has(d)||c.set(d,[]),c.get(d).push(f)}),Array.from(c,f=>s(f[0],f[1]))}return{getToastToRender:o,isToastActive:fE,count:a==null?void 0:a.length}}function vV(n){let[e,t]=ue.useState(!1),[r,i]=ue.useState(!1),a=ue.useRef(null),o=ue.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:c,closeToast:f,onClick:d,closeOnClick:p}=n;uV({id:n.toastId,containerId:n.containerId,fn:t}),ue.useEffect(()=>{if(n.pauseOnFocusLoss)return g(),()=>{m()}},[n.pauseOnFocusLoss]);function g(){document.hasFocus()||A(),window.addEventListener("focus",T),window.addEventListener("blur",A)}function m(){window.removeEventListener("focus",T),window.removeEventListener("blur",A)}function x(j){if(n.draggable===!0||n.draggable===j.pointerType){D();let C=a.current;o.canCloseOnClick=!0,o.canDrag=!0,C.style.transition="none",n.draggableDirection==="x"?(o.start=j.clientX,o.removalDistance=C.offsetWidth*(n.draggablePercent/100)):(o.start=j.clientY,o.removalDistance=C.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function _(j){let{top:C,bottom:N,left:L,right:R}=a.current.getBoundingClientRect();j.nativeEvent.type!=="touchend"&&n.pauseOnHover&&j.clientX>=L&&j.clientX<=R&&j.clientY>=C&&j.clientY<=N?A():T()}function T(){t(!0)}function A(){t(!1)}function D(){o.didMove=!1,document.addEventListener("pointermove",H),document.addEventListener("pointerup",X)}function U(){document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",X)}function H(j){let C=a.current;if(o.canDrag&&C){o.didMove=!0,e&&A(),n.draggableDirection==="x"?o.delta=j.clientX-o.start:o.delta=j.clientY-o.start,o.start!==j.clientX&&(o.canCloseOnClick=!1);let N=n.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;C.style.transform=`translate3d(${N},0)`,C.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function X(){U();let j=a.current;if(o.canDrag&&o.didMove&&j){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}j.style.transition="transform 0.2s, opacity 0.2s",j.style.removeProperty("transform"),j.style.removeProperty("opacity")}}let q={onPointerDown:x,onPointerUp:_};return s&&c&&(q.onMouseEnter=A,n.stacked||(q.onMouseLeave=T)),p&&(q.onClick=j=>{d&&d(j),o.canCloseOnClick&&f(!0)}),{playToast:T,pauseToast:A,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:q}}var yV=typeof window<"u"?ue.useLayoutEffect:ue.useEffect,Xm=({theme:n,type:e,isLoading:t,...r})=>Ln.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function xV(n){return Ln.createElement(Xm,{...n},Ln.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function bV(n){return Ln.createElement(Xm,{...n},Ln.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function wV(n){return Ln.createElement(Xm,{...n},Ln.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function _V(n){return Ln.createElement(Xm,{...n},Ln.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function AV(){return Ln.createElement("div",{className:"Toastify__spinner"})}var Yy={info:bV,warning:xV,success:wV,error:_V,spinner:AV},SV=n=>n in Yy;function EV({theme:n,type:e,isLoading:t,icon:r}){let i=null,a={theme:n,type:e};return r===!1||(iu(r)?i=r({...a,isLoading:t}):ue.isValidElement(r)?i=ue.cloneElement(r,a):t?i=Yy.spinner():SV(e)&&(i=Yy[e](a))),i}var CV=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:a}=vV(n),{closeButton:o,children:s,autoClose:c,onClick:f,type:d,hideProgressBar:p,closeToast:g,transition:m,position:x,className:_,style:T,progressClassName:A,updateId:D,role:U,progress:H,rtl:X,toastId:q,deleteToast:j,isIn:C,isLoading:N,closeOnClick:L,theme:R,ariaLabel:I}=n,P=ld("Toastify__toast",`Toastify__toast-theme--${R}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":X},{"Toastify__toast--close-on-click":L}),M=iu(_)?_({rtl:X,position:x,type:d,defaultClassName:P}):ld(P,_),K=EV(n),F=!!H||!c,z={closeToast:g,type:d,theme:R},ee=null;return o===!1||(iu(o)?ee=o(z):ue.isValidElement(o)?ee=ue.cloneElement(o,z):ee=tV(z)),Ln.createElement(m,{isIn:C,done:j,position:x,preventExitTransition:t,nodeRef:r,playToast:a},Ln.createElement("div",{id:q,tabIndex:0,onClick:f,"data-in":C,className:M,...i,style:T,ref:r,...C&&{role:U,"aria-label":I}},K!=null&&Ln.createElement("div",{className:ld("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},K),lE(s,n,!e),ee,!n.customProgressBar&&Ln.createElement(nV,{...D&&!F?{key:`p-${D}`}:{},rtl:X,theme:R,delay:c,isRunning:e,isIn:C,closeToast:g,hide:p,type:d,className:A,controlledProgress:F,progress:H||0})))},IV=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),TV=eV(IV("bounce",!0)),RV={position:"top-right",transition:TV,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function NV(n){let e={...RV,...n},t=n.stacked,[r,i]=ue.useState(!0),a=ue.useRef(null),{getToastToRender:o,isToastActive:s,count:c}=mV(e),{className:f,style:d,rtl:p,containerId:g,hotKeys:m}=e;function x(T){let A=ld("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":p});return iu(f)?f({position:T,rtl:p,defaultClassName:A}):ld(A,Wy(f))}function _(){t&&(i(!0),xn.play())}return yV(()=>{var T;if(t){let A=a.current.querySelectorAll('[data-in="true"]'),D=12,U=(T=e.position)==null?void 0:T.includes("top"),H=0,X=0;Array.from(A).reverse().forEach((q,j)=>{let C=q;C.classList.add("Toastify__toast--stacked"),j>0&&(C.dataset.collapsed=`${r}`),C.dataset.pos||(C.dataset.pos=U?"top":"bot");let N=H*(r?.2:1)+(r?0:D*j);C.style.setProperty("--y",`${U?N:N*-1}px`),C.style.setProperty("--g",`${D}`),C.style.setProperty("--s",`${1-(r?X:0)}`),H+=C.offsetHeight,X+=.025})}},[r,c,t]),ue.useEffect(()=>{function T(A){var D;let U=a.current;m(A)&&((D=U.querySelector('[tabIndex="0"]'))==null||D.focus(),i(!1),xn.pause()),A.key==="Escape"&&(document.activeElement===U||U!=null&&U.contains(document.activeElement))&&(i(!0),xn.play())}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[m]),Ln.createElement("section",{ref:a,className:"Toastify",id:g,onMouseEnter:()=>{t&&(i(!1),xn.pause())},onMouseLeave:_,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((T,A)=>{let D=A.length?{...d}:{...d,pointerEvents:"none"};return Ln.createElement("div",{tabIndex:-1,className:x(T),"data-stacked":t,style:D,key:`c-${T}`},A.map(({content:U,props:H})=>Ln.createElement(CV,{...H,stacked:t,collapseAll:_,isIn:s(H.toastId,H.containerId),key:`t-${H.key}`},U)))}))}var Jd={},Bv={exports:{}},Fv,_4;function DV(){if(_4)return Fv;_4=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Fv=n,Fv}var zv,A4;function OV(){if(A4)return zv;A4=1;var n=DV();function e(){}function t(){}return t.resetWarningCache=e,zv=function(){function r(o,s,c,f,d,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},zv}var S4;function kV(){return S4||(S4=1,Bv.exports=OV()()),Bv.exports}var E4;function PV(){if(E4)return Jd;E4=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.default=void 0;var n=Object.assign||function(j){for(var C=1;C<arguments.length;C++){var N=arguments[C];for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&(j[L]=N[L])}return j},e=function(){function j(C,N){for(var L=0;L<N.length;L++){var R=N[L];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(C,R.key,R)}}return function(C,N,L){return N&&j(C.prototype,N),L&&j(C,L),C}}(),t,r;Jd.confirmAlert=q;var i=om(),a=f(i),o=kV(),s=f(o),c=sA();function f(j){return j&&j.__esModule?j:{default:j}}function d(j,C){if(!(j instanceof C))throw new TypeError("Cannot call a class as a function")}function p(j,C){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:j}function g(j,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);j.prototype=Object.create(C&&C.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(j,C):j.__proto__=C)}var m=(r=t=function(j){g(C,j);function C(){var N,L,R,I;d(this,C);for(var P=arguments.length,M=Array(P),K=0;K<P;K++)M[K]=arguments[K];return I=(L=(R=p(this,(N=C.__proto__||Object.getPrototypeOf(C)).call.apply(N,[this].concat(M))),R),R.handleClickButton=function(F){F.onClick&&F.onClick(),R.close()},R.handleClickOverlay=function(F){var z=R.props,ee=z.closeOnClickOutside,ae=z.onClickOutside,Q=F.target===R.overlay;ee&&Q&&(ae(),R.close()),F.stopPropagation()},R.close=function(){var F=R.props.afterClose;X(),U(R.props),A(F)},R.keyboard=function(F){var z=R.props,ee=z.closeOnEscape,ae=z.onKeypressEscape,Q=z.onkeyPress,he=z.keyCodeForClose,G=F.keyCode,$=G===27;he.includes(G)&&R.close(),ee&&$&&(ae(F),R.close()),Q&&Q()},R.componentDidMount=function(){document.addEventListener("keydown",R.keyboard,!1)},R.componentWillUnmount=function(){document.removeEventListener("keydown",R.keyboard,!1),R.props.willUnmount()},R.renderCustomUI=function(){var F=R.props,z=F.title,ee=F.message,ae=F.buttons,Q=F.customUI,he={title:z,message:ee,buttons:ae,onClose:R.close};return Q(he)},L),p(R,I)}return e(C,[{key:"render",value:function(){var L=this,R=this.props,I=R.title,P=R.message,M=R.buttons,K=R.childrenElement,F=R.customUI,z=R.overlayClassName;return a.default.createElement("div",{className:"react-confirm-alert-overlay "+z,ref:function(ae){return L.overlay=ae},onClick:this.handleClickOverlay},a.default.createElement("div",{className:"react-confirm-alert"},F?this.renderCustomUI():a.default.createElement("div",{className:"react-confirm-alert-body"},I&&a.default.createElement("h1",null,I),P,K(),a.default.createElement("div",{className:"react-confirm-alert-button-group"},M.map(function(ee,ae){return a.default.createElement("button",n({key:ae,className:ee.className},ee,{onClick:function(he){return L.handleClickButton(ee)}}),ee.label)})))))}}]),C}(i.Component),t.propTypes={title:s.default.string,message:s.default.string,buttons:s.default.array.isRequired,childrenElement:s.default.func,customUI:s.default.func,closeOnClickOutside:s.default.bool,closeOnEscape:s.default.bool,keyCodeForClose:s.default.arrayOf(s.default.number),willUnmount:s.default.func,afterClose:s.default.func,onClickOutside:s.default.func,onKeypressEscape:s.default.func,onkeyPress:s.default.func,overlayClassName:s.default.string},t.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},r);Jd.default=m;var x=null,_="react-confirm-alert";function T(){var j=document.getElementById("react-confirm-alert-firm-svg");if(!j){var C="http://www.w3.org/2000/svg",N=document.createElementNS(C,"feGaussianBlur");N.setAttribute("stdDeviation","0.3");var L=document.createElementNS(C,"filter");L.setAttribute("id","gaussian-blur"),L.appendChild(N);var R=document.createElementNS(C,"svg");R.setAttribute("id","react-confirm-alert-firm-svg"),R.setAttribute("class","react-confirm-alert-svg"),R.appendChild(L),document.body.appendChild(R)}}function A(j){var C=document.getElementById("react-confirm-alert-firm-svg");C&&C.parentNode.removeChild(C),document.body.children[0].classList.remove("react-confirm-alert-blur"),j()}function D(j){var C=document.getElementById(j.targetId||_);j.targetId&&!C&&console.error("React Confirm Alert:","Can not get element id (#"+j.targetId+")"),C?(x=(0,c.createRoot)(C),x.render(a.default.createElement(m,j))):(document.body.children[0].classList.add("react-confirm-alert-blur"),C=document.createElement("div"),C.id=_,document.body.appendChild(C),x=(0,c.createRoot)(C),x.render(a.default.createElement(m,j)))}function U(j){var C=document.getElementById(j.targetId||_);C&&x.unmount(C)}function H(){document.body.classList.add("react-confirm-alert-body-element")}function X(){document.body.classList.remove("react-confirm-alert-body-element")}function q(j){H(),T(),D(j)}return Jd}var LV=PV();function MV(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}function pE(n,e){return new Promise(function(t,r){let i;return jV(n).then(function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const jV=n=>new Promise((e,t)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let o=0;if(a.getUint16(o)!==65496)return t("not a valid JPEG");for(o+=2;;){const s=a.getUint16(o);if(s===65498)break;const c=a.getUint16(o+2);if(s===65505&&a.getUint32(o+4)===1165519206){const f=o+10;let d;switch(a.getUint16(f)){case 18761:d=!0;break;case 19789:d=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(f+2,d)!==42)return t("TIFF header contains invalid version");const p=a.getUint32(f+4,d),g=f+p+2+12*a.getUint16(f+p,d);for(let m=f+p+2;m<g;m+=12)if(a.getUint16(m,d)==274){if(a.getUint16(m+2,d)!==3)return t("Orientation data type is invalid");if(a.getUint32(m+4,d)!==1)return t("Orientation data count is invalid");a.setUint16(m+8,1,d);break}return e(i.slice(o,o+2+c))}o+=2+c}return e(new Blob)}),r.readAsArrayBuffer(n)});var Kg={},BV={get exports(){return Kg},set exports(n){Kg=n}};(function(n){var e,t,r={};BV.exports=r,r.parse=function(i,a){for(var o=r.bin.readUshort,s=r.bin.readUint,c=0,f={},d=new Uint8Array(i),p=d.length-4;s(d,p)!=101010256;)p--;c=p,c+=4;var g=o(d,c+=4);o(d,c+=2);var m=s(d,c+=2),x=s(d,c+=4);c+=4,c=x;for(var _=0;_<g;_++){s(d,c),c+=4,c+=4,c+=4,s(d,c+=4),m=s(d,c+=4);var T=s(d,c+=4),A=o(d,c+=4),D=o(d,c+2),U=o(d,c+4);c+=6;var H=s(d,c+=8);c+=4,c+=A+D+U,r._readLocal(d,H,f,m,T,a)}return f},r._readLocal=function(i,a,o,s,c,f){var d=r.bin.readUshort,p=r.bin.readUint;p(i,a),d(i,a+=4),d(i,a+=2);var g=d(i,a+=2);p(i,a+=2),p(i,a+=4),a+=4;var m=d(i,a+=8),x=d(i,a+=2);a+=2;var _=r.bin.readUTF8(i,a,m);if(a+=m,a+=x,f)o[_]={size:c,csize:s};else{var T=new Uint8Array(i.buffer,a);if(g==0)o[_]=new Uint8Array(T.buffer.slice(a,a+s));else{if(g!=8)throw"unknown compression method: "+g;var A=new Uint8Array(c);r.inflateRaw(T,A),o[_]=A}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var o=0,s=new Uint8Array(50+Math.floor(1.1*i.length));s[o]=120,s[o+1]=156,o+=2,o=r.F.deflateRaw(i,s,o,a.level);var c=r.adler(i,0,i.length);return s[o+0]=c>>>24&255,s[o+1]=c>>>16&255,s[o+2]=c>>>8&255,s[o+3]=c>>>0&255,new Uint8Array(s.buffer,0,o+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),s=r.F.deflateRaw(i,o,s,a.level);return new Uint8Array(o.buffer,0,s)},r.encode=function(i,a){a==null&&(a=!1);var o=0,s=r.bin.writeUint,c=r.bin.writeUshort,f={};for(var d in i){var p=!r._noNeed(d)&&!a,g=i[d],m=r.crc.crc(g,0,g.length);f[d]={cpr:p,usize:g.length,crc:m,file:p?r.deflateRaw(g):g}}for(var d in f)o+=f[d].file.length+30+46+2*r.bin.sizeUTF8(d);o+=22;var x=new Uint8Array(o),_=0,T=[];for(var d in f){var A=f[d];T.push(_),_=r._writeHeader(x,_,d,A,0)}var D=0,U=_;for(var d in f)A=f[d],T.push(_),_=r._writeHeader(x,_,d,A,1,T[D++]);var H=_-U;return s(x,_,101010256),_+=4,c(x,_+=4,D),c(x,_+=2,D),s(x,_+=2,H),s(x,_+=4,U),_+=4,_+=2,x.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,o,s,c,f){var d=r.bin.writeUint,p=r.bin.writeUshort,g=s.file;return d(i,a,c==0?67324752:33639248),a+=4,c==1&&(a+=2),p(i,a,20),p(i,a+=2,0),p(i,a+=2,s.cpr?8:0),d(i,a+=2,0),d(i,a+=4,s.crc),d(i,a+=4,g.length),d(i,a+=4,s.usize),p(i,a+=4,r.bin.sizeUTF8(o)),p(i,a+=2,0),a+=2,c==1&&(a+=2,a+=2,d(i,a+=6,f),a+=4),a+=r.bin.writeUTF8(i,a,o),c==0&&(i.set(g,a),a+=g.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var o=a,s=0;s<8;s++)1&o?o=3988292384^o>>>1:o>>>=1;i[a]=o}return i}(),update:function(i,a,o,s){for(var c=0;c<s;c++)i=r.crc.table[255&(i^a[o+c])]^i>>>8;return i},crc:function(i,a,o){return 4294967295^r.crc.update(4294967295,i,a,o)}},r.adler=function(i,a,o){for(var s=1,c=0,f=a,d=a+o;f<d;){for(var p=Math.min(f+5552,d);f<p;)c+=s+=i[f++];s%=65521,c%=65521}return c<<16|s},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255,i[a+2]=o>>16&255,i[a+3]=o>>24&255},readASCII:function(i,a,o){for(var s="",c=0;c<o;c++)s+=String.fromCharCode(i[a+c]);return s},writeASCII:function(i,a,o){for(var s=0;s<o.length;s++)i[a+s]=o.charCodeAt(s)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,o){for(var s,c="",f=0;f<o;f++)c+="%"+r.bin.pad(i[a+f].toString(16));try{s=decodeURIComponent(c)}catch{return r.bin.readASCII(i,a,o)}return s},writeUTF8:function(i,a,o){for(var s=o.length,c=0,f=0;f<s;f++){var d=o.charCodeAt(f);if((4294967168&d)==0)i[a+c]=d,c++;else if((4294965248&d)==0)i[a+c]=192|d>>6,i[a+c+1]=128|d>>0&63,c+=2;else if((4294901760&d)==0)i[a+c]=224|d>>12,i[a+c+1]=128|d>>6&63,i[a+c+2]=128|d>>0&63,c+=3;else{if((4292870144&d)!=0)throw"e";i[a+c]=240|d>>18,i[a+c+1]=128|d>>12&63,i[a+c+2]=128|d>>6&63,i[a+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var a=i.length,o=0,s=0;s<a;s++){var c=i.charCodeAt(s);if((4294967168&c)==0)o++;else if((4294965248&c)==0)o+=2;else if((4294901760&c)==0)o+=3;else{if((4292870144&c)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,a,o,s){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],f=r.F.U,d=r.F._goodIndex;r.F._hash;var p=r.F._putsE,g=0,m=o<<3,x=0,_=i.length;if(s==0){for(;g<_;)p(a,m,g+(R=Math.min(65535,_-g))==_?1:0),m=r.F._copyExact(i,g,R,a,m+8),g+=R;return m>>>3}var T=f.lits,A=f.strt,D=f.prev,U=0,H=0,X=0,q=0,j=0,C=0;for(_>2&&(A[C=r.F._hash(i,0)]=0),g=0;g<_;g++){if(j=C,g+1<_-2){C=r.F._hash(i,g+1);var N=g+1&32767;D[N]=A[C],A[C]=N}if(x<=g){(U>14e3||H>26697)&&_-g>100&&(x<g&&(T[U]=g-x,U+=2,x=g),m=r.F._writeBlock(g==_-1||x==_?1:0,T,U,q,i,X,g-X,a,m),U=H=q=0,X=g);var L=0;g<_-2&&(L=r.F._bestMatch(i,g,D,j,Math.min(c[2],_-g),c[3]));var R=L>>>16,I=65535&L;if(L!=0){I=65535&L;var P=d(R=L>>>16,f.of0);f.lhst[257+P]++;var M=d(I,f.df0);f.dhst[M]++,q+=f.exb[P]+f.dxb[M],T[U]=R<<23|g-x,T[U+1]=I<<16|P<<8|M,U+=2,x=g+R}else f.lhst[i[g]]++;H++}}for(X==g&&i.length!=0||(x<g&&(T[U]=g-x,U+=2,x=g),m=r.F._writeBlock(1,T,U,q,i,X,g-X,a,m),U=0,H=0,U=H=q=0,X=g);(7&m)!=0;)m++;return m>>>3},r.F._bestMatch=function(i,a,o,s,c,f){var d=32767&a,p=o[d],g=d-p+32768&32767;if(p==d||s!=r.F._hash(i,a-g))return 0;for(var m=0,x=0,_=Math.min(32767,a);g<=_&&--f!=0&&p!=d;){if(m==0||i[a+m]==i[a+m-g]){var T=r.F._howLong(i,a,g);if(T>m){if(x=g,(m=T)>=c)break;g+2<T&&(T=g+2);for(var A=0,D=0;D<T-2;D++){var U=a-g+D+32768&32767,H=U-o[U]+32768&32767;H>A&&(A=H,p=U)}}}g+=(d=p)-(p=o[d])+32768&32767}return m<<16|x},r.F._howLong=function(i,a,o){if(i[a]!=i[a-o]||i[a+1]!=i[a+1-o]||i[a+2]!=i[a+2-o])return 0;var s=a,c=Math.min(i.length,a+258);for(a+=3;a<c&&i[a]==i[a-o];)a++;return a-s},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,o,s,c,f,d,p,g){var m,x,_,T,A,D,U,H,X,q=r.F.U,j=r.F._putsF,C=r.F._putsE;q.lhst[256]++,x=(m=r.F.getTrees())[0],_=m[1],T=m[2],A=m[3],D=m[4],U=m[5],H=m[6],X=m[7];var N=32+((g+3&7)==0?0:8-(g+3&7))+(d<<3),L=s+r.F.contSize(q.fltree,q.lhst)+r.F.contSize(q.fdtree,q.dhst),R=s+r.F.contSize(q.ltree,q.lhst)+r.F.contSize(q.dtree,q.dhst);R+=14+3*U+r.F.contSize(q.itree,q.ihst)+(2*q.ihst[16]+3*q.ihst[17]+7*q.ihst[18]);for(var I=0;I<286;I++)q.lhst[I]=0;for(I=0;I<30;I++)q.dhst[I]=0;for(I=0;I<19;I++)q.ihst[I]=0;var P=N<L&&N<R?0:L<R?1:2;if(j(p,g,i),j(p,g+1,P),g+=3,P==0){for(;(7&g)!=0;)g++;g=r.F._copyExact(c,f,d,p,g)}else{var M,K;if(P==1&&(M=q.fltree,K=q.fdtree),P==2){r.F.makeCodes(q.ltree,x),r.F.revCodes(q.ltree,x),r.F.makeCodes(q.dtree,_),r.F.revCodes(q.dtree,_),r.F.makeCodes(q.itree,T),r.F.revCodes(q.itree,T),M=q.ltree,K=q.dtree,C(p,g,A-257),C(p,g+=5,D-1),C(p,g+=5,U-4),g+=4;for(var F=0;F<U;F++)C(p,g+3*F,q.itree[1+(q.ordr[F]<<1)]);g+=3*U,g=r.F._codeTiny(H,q.itree,p,g),g=r.F._codeTiny(X,q.itree,p,g)}for(var z=f,ee=0;ee<o;ee+=2){for(var ae=a[ee],Q=ae>>>23,he=z+(8388607&ae);z<he;)g=r.F._writeLit(c[z++],M,p,g);if(Q!=0){var G=a[ee+1],$=G>>16,Z=G>>8&255,re=255&G;C(p,g=r.F._writeLit(257+Z,M,p,g),Q-q.of0[Z]),g+=q.exb[Z],j(p,g=r.F._writeLit(re,K,p,g),$-q.df0[re]),g+=q.dxb[re],z+=Q}}g=r.F._writeLit(256,M,p,g)}return g},r.F._copyExact=function(i,a,o,s,c){var f=c>>>3;return s[f]=o,s[f+1]=o>>>8,s[f+2]=255-s[f],s[f+3]=255-s[f+1],f+=4,s.set(new Uint8Array(i.buffer,a,o),f),c+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),s=[],c=r.F._lenCodes(i.ltree,s),f=[],d=r.F._lenCodes(i.dtree,f),p=0;p<s.length;p+=2)i.ihst[s[p]]++;for(p=0;p<f.length;p+=2)i.ihst[f[p]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,o,g,c,d,m,s,f]},r.F.getSecond=function(i){for(var a=[],o=0;o<i.length;o+=2)a.push(i[o+1]);return a},r.F.nonZero=function(i){for(var a="",o=0;o<i.length;o+=2)i[o+1]!=0&&(a+=(o>>1)+",");return a},r.F.contSize=function(i,a){for(var o=0,s=0;s<a.length;s++)o+=a[s]*i[1+(s<<1)];return o},r.F._codeTiny=function(i,a,o,s){for(var c=0;c<i.length;c+=2){var f=i[c],d=i[c+1];s=r.F._writeLit(f,a,o,s);var p=f==16?2:f==17?3:7;f>15&&(r.F._putsE(o,s,d,p),s+=p)}return s},r.F._lenCodes=function(i,a){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var s=0;s<o;s+=2){var c=i[s+1],f=s+3<o?i[s+3]:-1,d=s+5<o?i[s+5]:-1,p=s==0?-1:i[s-1];if(c==0&&f==c&&d==c){for(var g=s+5;g+2<o&&i[g+2]==c;)g+=2;(m=Math.min(g+1-s>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),s+=2*m-2}else if(c==p&&f==c&&d==c){for(g=s+5;g+2<o&&i[g+2]==c;)g+=2;var m=Math.min(g+1-s>>>1,6);a.push(16,m-3),s+=2*m-2}else a.push(c,0)}return o>>>1},r.F._hufTree=function(i,a,o){var s=[],c=i.length,f=a.length,d=0;for(d=0;d<f;d+=2)a[d]=0,a[d+1]=0;for(d=0;d<c;d++)i[d]!=0&&s.push({lit:d,f:i[d]});var p=s.length,g=s.slice(0);if(p==0)return 0;if(p==1){var m=s[0].lit;return g=m==0?1:0,a[1+(m<<1)]=1,a[1+(g<<1)]=1,1}s.sort(function(H,X){return H.f-X.f});var x=s[0],_=s[1],T=0,A=1,D=2;for(s[0]={lit:-1,f:x.f+_.f,l:x,r:_,d:0};A!=p-1;)x=T!=A&&(D==p||s[T].f<s[D].f)?s[T++]:s[D++],_=T!=A&&(D==p||s[T].f<s[D].f)?s[T++]:s[D++],s[A++]={lit:-1,f:x.f+_.f,l:x,r:_};var U=r.F.setDepth(s[A-1],0);for(U>o&&(r.F.restrictDepth(g,o,U),U=o),d=0;d<p;d++)a[1+(g[d].lit<<1)]=g[d].d;return U},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,o){var s=0,c=1<<o-a,f=0;for(i.sort(function(p,g){return g.d==p.d?p.f-g.f:g.d-p.d}),s=0;s<i.length&&i[s].d>a;s++){var d=i[s].d;i[s].d=a,f+=c-(1<<o-d)}for(f>>>=o-a;f>0;)(d=i[s].d)<a?(i[s].d++,f-=1<<a-d-1):s++;for(;s>=0;s--)i[s].d==a&&f<0&&(i[s].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var o=0;return a[16|o]<=i&&(o|=16),a[8|o]<=i&&(o|=8),a[4|o]<=i&&(o|=4),a[2|o]<=i&&(o|=2),a[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,a,o,s){return r.F._putsF(o,s,a[i<<1]),s+a[1+(i<<1)]},r.F.inflate=function(i,a){var o=Uint8Array;if(i[0]==3&&i[1]==0)return a||new o(0);var s=r.F,c=s._bitsF,f=s._bitsE,d=s._decodeTiny,p=s.makeCodes,g=s.codes2map,m=s._get17,x=s.U,_=a==null;_&&(a=new o(i.length>>>2<<3));for(var T,A,D=0,U=0,H=0,X=0,q=0,j=0,C=0,N=0,L=0;D==0;)if(D=c(i,L,1),U=c(i,L+1,2),L+=3,U!=0){if(_&&(a=r.F._check(a,N+(1<<17))),U==1&&(T=x.flmap,A=x.fdmap,j=511,C=31),U==2){H=f(i,L,5)+257,X=f(i,L+5,5)+1,q=f(i,L+10,4)+4,L+=14;for(var R=0;R<38;R+=2)x.itree[R]=0,x.itree[R+1]=0;var I=1;for(R=0;R<q;R++){var P=f(i,L+3*R,3);x.itree[1+(x.ordr[R]<<1)]=P,P>I&&(I=P)}L+=3*q,p(x.itree,I),g(x.itree,I,x.imap),T=x.lmap,A=x.dmap,L=d(x.imap,(1<<I)-1,H+X,i,L,x.ttree);var M=s._copyOut(x.ttree,0,H,x.ltree);j=(1<<M)-1;var K=s._copyOut(x.ttree,H,X,x.dtree);C=(1<<K)-1,p(x.ltree,M),g(x.ltree,M,T),p(x.dtree,K),g(x.dtree,K,A)}for(;;){var F=T[m(i,L)&j];L+=15&F;var z=F>>>4;if(!(z>>>8))a[N++]=z;else{if(z==256)break;var ee=N+z-254;if(z>264){var ae=x.ldef[z-257];ee=N+(ae>>>3)+f(i,L,7&ae),L+=7&ae}var Q=A[m(i,L)&C];L+=15&Q;var he=Q>>>4,G=x.ddef[he],$=(G>>>4)+c(i,L,15&G);for(L+=15&G,_&&(a=r.F._check(a,N+(1<<17)));N<ee;)a[N]=a[N++-$],a[N]=a[N++-$],a[N]=a[N++-$],a[N]=a[N++-$];N=ee}}}else{(7&L)!=0&&(L+=8-(7&L));var Z=4+(L>>>3),re=i[Z-4]|i[Z-3]<<8;_&&(a=r.F._check(a,N+re)),a.set(new o(i.buffer,i.byteOffset+Z,re),N),L=Z+re<<3,N+=re}return a.length==N?a:a.slice(0,N)},r.F._check=function(i,a){var o=i.length;if(a<=o)return i;var s=new Uint8Array(Math.max(o<<1,a));return s.set(i,0),s},r.F._decodeTiny=function(i,a,o,s,c,f){for(var d=r.F._bitsE,p=r.F._get17,g=0;g<o;){var m=i[p(s,c)&a];c+=15&m;var x=m>>>4;if(x<=15)f[g]=x,g++;else{var _=0,T=0;x==16?(T=3+d(s,c,2),c+=2,_=f[g-1]):x==17?(T=3+d(s,c,3),c+=3):x==18&&(T=11+d(s,c,7),c+=7);for(var A=g+T;g<A;)f[g]=_,g++}}return c},r.F._copyOut=function(i,a,o,s){for(var c=0,f=0,d=s.length>>>1;f<o;){var p=i[f+a];s[f<<1]=0,s[1+(f<<1)]=p,p>c&&(c=p),f++}for(;f<d;)s[f<<1]=0,s[1+(f<<1)]=0,f++;return c},r.F.makeCodes=function(i,a){for(var o,s,c,f,d=r.F.U,p=i.length,g=d.bl_count,m=0;m<=a;m++)g[m]=0;for(m=1;m<p;m+=2)g[i[m]]++;var x=d.next_code;for(o=0,g[0]=0,s=1;s<=a;s++)o=o+g[s-1]<<1,x[s]=o;for(c=0;c<p;c+=2)(f=i[c+1])!=0&&(i[c]=x[f],x[f]++)},r.F.codes2map=function(i,a,o){for(var s=i.length,c=r.F.U.rev15,f=0;f<s;f+=2)if(i[f+1]!=0)for(var d=f>>1,p=i[f+1],g=d<<4|p,m=a-p,x=i[f]<<m,_=x+(1<<m);x!=_;)o[c[x]>>>15-a]=g,x++},r.F.revCodes=function(i,a){for(var o=r.F.U.rev15,s=15-a,c=0;c<i.length;c+=2){var f=i[c]<<a-i[c+1];i[c]=o[f]>>>s}},r.F._putsE=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8},r.F._putsF=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8,i[s+2]|=o>>>16},r.F._bitsE=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},r.F._bitsF=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[a]=(o>>>16|o<<16)>>>17}function s(c,f,d){for(;f--!=0;)c.push(0,d)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];s(i.fltree,144,8),s(i.fltree,112,9),s(i.fltree,24,7),s(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),s(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),s(i.itree,19,0),s(i.ltree,286,0),s(i.dtree,30,0),s(i.ttree,320,0)}()})();var FV=MV({__proto__:null,default:Kg},[Kg]);const il=function(){var n={nextZero(d,p){for(;d[p]!=0;)p++;return p},readUshort:(d,p)=>d[p]<<8|d[p+1],writeUshort(d,p,g){d[p]=g>>8&255,d[p+1]=255&g},readUint:(d,p)=>16777216*d[p]+(d[p+1]<<16|d[p+2]<<8|d[p+3]),writeUint(d,p,g){d[p]=g>>24&255,d[p+1]=g>>16&255,d[p+2]=g>>8&255,d[p+3]=255&g},readASCII(d,p,g){let m="";for(let x=0;x<g;x++)m+=String.fromCharCode(d[p+x]);return m},writeASCII(d,p,g){for(let m=0;m<g.length;m++)d[p+m]=g.charCodeAt(m)},readBytes(d,p,g){const m=[];for(let x=0;x<g;x++)m.push(d[p+x]);return m},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,p,g){let m,x="";for(let _=0;_<g;_++)x+=`%${n.pad(d[p+_].toString(16))}`;try{m=decodeURIComponent(x)}catch{return n.readASCII(d,p,g)}return m}};function e(d,p,g,m){const x=p*g,_=a(m),T=Math.ceil(p*_/8),A=new Uint8Array(4*x),D=new Uint32Array(A.buffer),{ctype:U}=m,{depth:H}=m,X=n.readUshort;if(U==6){const ae=x<<2;if(H==8)for(var q=0;q<ae;q+=4)A[q]=d[q],A[q+1]=d[q+1],A[q+2]=d[q+2],A[q+3]=d[q+3];if(H==16)for(q=0;q<ae;q++)A[q]=d[q<<1]}else if(U==2){const ae=m.tabs.tRNS;if(ae==null){if(H==8)for(q=0;q<x;q++){var j=3*q;D[q]=255<<24|d[j+2]<<16|d[j+1]<<8|d[j]}if(H==16)for(q=0;q<x;q++)j=6*q,D[q]=255<<24|d[j+4]<<16|d[j+2]<<8|d[j]}else{var C=ae[0];const Q=ae[1],he=ae[2];if(H==8)for(q=0;q<x;q++){var N=q<<2;j=3*q,D[q]=255<<24|d[j+2]<<16|d[j+1]<<8|d[j],d[j]==C&&d[j+1]==Q&&d[j+2]==he&&(A[N+3]=0)}if(H==16)for(q=0;q<x;q++)N=q<<2,j=6*q,D[q]=255<<24|d[j+4]<<16|d[j+2]<<8|d[j],X(d,j)==C&&X(d,j+2)==Q&&X(d,j+4)==he&&(A[N+3]=0)}}else if(U==3){const ae=m.tabs.PLTE,Q=m.tabs.tRNS,he=Q?Q.length:0;if(H==1)for(var L=0;L<g;L++){var R=L*T,I=L*p;for(q=0;q<p;q++){N=I+q<<2;var P=3*(M=d[R+(q>>3)]>>7-((7&q)<<0)&1);A[N]=ae[P],A[N+1]=ae[P+1],A[N+2]=ae[P+2],A[N+3]=M<he?Q[M]:255}}if(H==2)for(L=0;L<g;L++)for(R=L*T,I=L*p,q=0;q<p;q++)N=I+q<<2,P=3*(M=d[R+(q>>2)]>>6-((3&q)<<1)&3),A[N]=ae[P],A[N+1]=ae[P+1],A[N+2]=ae[P+2],A[N+3]=M<he?Q[M]:255;if(H==4)for(L=0;L<g;L++)for(R=L*T,I=L*p,q=0;q<p;q++)N=I+q<<2,P=3*(M=d[R+(q>>1)]>>4-((1&q)<<2)&15),A[N]=ae[P],A[N+1]=ae[P+1],A[N+2]=ae[P+2],A[N+3]=M<he?Q[M]:255;if(H==8)for(q=0;q<x;q++){var M;N=q<<2,P=3*(M=d[q]),A[N]=ae[P],A[N+1]=ae[P+1],A[N+2]=ae[P+2],A[N+3]=M<he?Q[M]:255}}else if(U==4){if(H==8)for(q=0;q<x;q++){N=q<<2;var K=d[F=q<<1];A[N]=K,A[N+1]=K,A[N+2]=K,A[N+3]=d[F+1]}if(H==16)for(q=0;q<x;q++){var F;N=q<<2,K=d[F=q<<2],A[N]=K,A[N+1]=K,A[N+2]=K,A[N+3]=d[F+2]}}else if(U==0)for(C=m.tabs.tRNS?m.tabs.tRNS:-1,L=0;L<g;L++){const ae=L*T,Q=L*p;if(H==1)for(var z=0;z<p;z++){var ee=(K=255*(d[ae+(z>>>3)]>>>7-(7&z)&1))==255*C?0:255;D[Q+z]=ee<<24|K<<16|K<<8|K}else if(H==2)for(z=0;z<p;z++)ee=(K=85*(d[ae+(z>>>2)]>>>6-((3&z)<<1)&3))==85*C?0:255,D[Q+z]=ee<<24|K<<16|K<<8|K;else if(H==4)for(z=0;z<p;z++)ee=(K=17*(d[ae+(z>>>1)]>>>4-((1&z)<<2)&15))==17*C?0:255,D[Q+z]=ee<<24|K<<16|K<<8|K;else if(H==8)for(z=0;z<p;z++)ee=(K=d[ae+z])==C?0:255,D[Q+z]=ee<<24|K<<16|K<<8|K;else if(H==16)for(z=0;z<p;z++)K=d[ae+(z<<1)],ee=X(d,ae+(z<<1))==C?0:255,D[Q+z]=ee<<24|K<<16|K<<8|K}return A}function t(d,p,g,m){const x=a(d),_=Math.ceil(g*x/8),T=new Uint8Array((_+1+d.interlace)*m);return p=d.tabs.CgBI?i(p,T):r(p,T),d.interlace==0?p=o(p,d,0,g,m):d.interlace==1&&(p=function(D,U){const H=U.width,X=U.height,q=a(U),j=q>>3,C=Math.ceil(H*q/8),N=new Uint8Array(X*C);let L=0;const R=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],P=[8,8,8,4,4,2,2],M=[8,8,4,4,2,2,1];let K=0;for(;K<7;){const z=P[K],ee=M[K];let ae=0,Q=0,he=R[K];for(;he<X;)he+=z,Q++;let G=I[K];for(;G<H;)G+=ee,ae++;const $=Math.ceil(ae*q/8);o(D,U,L,ae,Q);let Z=0,re=R[K];for(;re<X;){let de=I[K],xe=L+Z*$<<3;for(;de<H;){var F;if(q==1&&(F=(F=D[xe>>3])>>7-(7&xe)&1,N[re*C+(de>>3)]|=F<<7-((7&de)<<0)),q==2&&(F=(F=D[xe>>3])>>6-(7&xe)&3,N[re*C+(de>>2)]|=F<<6-((3&de)<<1)),q==4&&(F=(F=D[xe>>3])>>4-(7&xe)&15,N[re*C+(de>>1)]|=F<<4-((1&de)<<2)),q>=8){const we=re*C+de*j;for(let Ee=0;Ee<j;Ee++)N[we+Ee]=D[(xe>>3)+Ee]}xe+=q,de+=ee}Z++,re+=z}ae*Q!=0&&(L+=Q*(1+$)),K+=1}return N}(p,d)),p}function r(d,p){return i(new Uint8Array(d.buffer,2,d.length-6),p)}var i=function(){const d={H:{}};return d.H.N=function(p,g){const m=Uint8Array;let x,_,T=0,A=0,D=0,U=0,H=0,X=0,q=0,j=0,C=0;if(p[0]==3&&p[1]==0)return g||new m(0);const N=d.H,L=N.b,R=N.e,I=N.R,P=N.n,M=N.A,K=N.Z,F=N.m,z=g==null;for(z&&(g=new m(p.length>>>2<<5));T==0;)if(T=L(p,C,1),A=L(p,C+1,2),C+=3,A!=0){if(z&&(g=d.H.W(g,j+(1<<17))),A==1&&(x=F.J,_=F.h,X=511,q=31),A==2){D=R(p,C,5)+257,U=R(p,C+5,5)+1,H=R(p,C+10,4)+4,C+=14;let ae=1;for(var ee=0;ee<38;ee+=2)F.Q[ee]=0,F.Q[ee+1]=0;for(ee=0;ee<H;ee++){const G=R(p,C+3*ee,3);F.Q[1+(F.X[ee]<<1)]=G,G>ae&&(ae=G)}C+=3*H,P(F.Q,ae),M(F.Q,ae,F.u),x=F.w,_=F.d,C=I(F.u,(1<<ae)-1,D+U,p,C,F.v);const Q=N.V(F.v,0,D,F.C);X=(1<<Q)-1;const he=N.V(F.v,D,U,F.D);q=(1<<he)-1,P(F.C,Q),M(F.C,Q,x),P(F.D,he),M(F.D,he,_)}for(;;){const ae=x[K(p,C)&X];C+=15&ae;const Q=ae>>>4;if(!(Q>>>8))g[j++]=Q;else{if(Q==256)break;{let he=j+Q-254;if(Q>264){const de=F.q[Q-257];he=j+(de>>>3)+R(p,C,7&de),C+=7&de}const G=_[K(p,C)&q];C+=15&G;const $=G>>>4,Z=F.c[$],re=(Z>>>4)+L(p,C,15&Z);for(C+=15&Z;j<he;)g[j]=g[j++-re],g[j]=g[j++-re],g[j]=g[j++-re],g[j]=g[j++-re];j=he}}}}else{(7&C)!=0&&(C+=8-(7&C));const ae=4+(C>>>3),Q=p[ae-4]|p[ae-3]<<8;z&&(g=d.H.W(g,j+Q)),g.set(new m(p.buffer,p.byteOffset+ae,Q),j),C=ae+Q<<3,j+=Q}return g.length==j?g:g.slice(0,j)},d.H.W=function(p,g){const m=p.length;if(g<=m)return p;const x=new Uint8Array(m<<1);return x.set(p,0),x},d.H.R=function(p,g,m,x,_,T){const A=d.H.e,D=d.H.Z;let U=0;for(;U<m;){const H=p[D(x,_)&g];_+=15&H;const X=H>>>4;if(X<=15)T[U]=X,U++;else{let q=0,j=0;X==16?(j=3+A(x,_,2),_+=2,q=T[U-1]):X==17?(j=3+A(x,_,3),_+=3):X==18&&(j=11+A(x,_,7),_+=7);const C=U+j;for(;U<C;)T[U]=q,U++}}return _},d.H.V=function(p,g,m,x){let _=0,T=0;const A=x.length>>>1;for(;T<m;){const D=p[T+g];x[T<<1]=0,x[1+(T<<1)]=D,D>_&&(_=D),T++}for(;T<A;)x[T<<1]=0,x[1+(T<<1)]=0,T++;return _},d.H.n=function(p,g){const m=d.H.m,x=p.length;let _,T,A,D;const U=m.j;for(var H=0;H<=g;H++)U[H]=0;for(H=1;H<x;H+=2)U[p[H]]++;const X=m.K;for(_=0,U[0]=0,T=1;T<=g;T++)_=_+U[T-1]<<1,X[T]=_;for(A=0;A<x;A+=2)D=p[A+1],D!=0&&(p[A]=X[D],X[D]++)},d.H.A=function(p,g,m){const x=p.length,_=d.H.m.r;for(let T=0;T<x;T+=2)if(p[T+1]!=0){const A=T>>1,D=p[T+1],U=A<<4|D,H=g-D;let X=p[T]<<H;const q=X+(1<<H);for(;X!=q;)m[_[X]>>>15-g]=U,X++}},d.H.l=function(p,g){const m=d.H.m.r,x=15-g;for(let _=0;_<p.length;_+=2){const T=p[_]<<g-p[_+1];p[_]=m[T]>>>x}},d.H.M=function(p,g,m){m<<=7&g;const x=g>>>3;p[x]|=m,p[x+1]|=m>>>8},d.H.I=function(p,g,m){m<<=7&g;const x=g>>>3;p[x]|=m,p[x+1]|=m>>>8,p[x+2]|=m>>>16},d.H.e=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8)>>>(7&g)&(1<<m)-1},d.H.b=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)&(1<<m)-1},d.H.Z=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)},d.H.i=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16|p[3+(g>>>3)]<<24)>>>(7&g)},d.H.m=function(){const p=Uint16Array,g=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=d.H.m;for(var g=0;g<32768;g++){let x=g;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,p.r[g]=(x>>>16|x<<16)>>>17}function m(x,_,T){for(;_--!=0;)x.push(0,T)}for(g=0;g<32;g++)p.q[g]=p.S[g]<<3|p.T[g],p.c[g]=p.p[g]<<4|p.z[g];m(p._,144,8),m(p._,112,9),m(p._,24,7),m(p._,8,8),d.H.n(p._,9),d.H.A(p._,9,p.J),d.H.l(p._,9),m(p.$,32,5),d.H.n(p.$,5),d.H.A(p.$,5,p.h),d.H.l(p.$,5),m(p.Q,19,0),m(p.C,286,0),m(p.D,30,0),m(p.v,320,0)}(),d.H.N}();function a(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,p,g,m,x){let _=a(p);const T=Math.ceil(m*_/8);let A,D;_=Math.ceil(_/8);let U=d[g],H=0;if(U>1&&(d[g]=[0,0,1][U-2]),U==3)for(H=_;H<T;H++)d[H+1]=d[H+1]+(d[H+1-_]>>>1)&255;for(let X=0;X<x;X++)if(A=g+X*T,D=A+X+1,U=d[D-1],H=0,U==0)for(;H<T;H++)d[A+H]=d[D+H];else if(U==1){for(;H<_;H++)d[A+H]=d[D+H];for(;H<T;H++)d[A+H]=d[D+H]+d[A+H-_]}else if(U==2)for(;H<T;H++)d[A+H]=d[D+H]+d[A+H-T];else if(U==3){for(;H<_;H++)d[A+H]=d[D+H]+(d[A+H-T]>>>1);for(;H<T;H++)d[A+H]=d[D+H]+(d[A+H-T]+d[A+H-_]>>>1)}else{for(;H<_;H++)d[A+H]=d[D+H]+s(0,d[A+H-T],0);for(;H<T;H++)d[A+H]=d[D+H]+s(d[A+H-_],d[A+H-T],d[A+H-_-T])}return d}function s(d,p,g){const m=d+p-g,x=m-d,_=m-p,T=m-g;return x*x<=_*_&&x*x<=T*T?d:_*_<=T*T?p:g}function c(d,p,g){g.width=n.readUint(d,p),p+=4,g.height=n.readUint(d,p),p+=4,g.depth=d[p],p++,g.ctype=d[p],p++,g.compress=d[p],p++,g.filter=d[p],p++,g.interlace=d[p],p++}function f(d,p,g,m,x,_,T,A,D){const U=Math.min(p,x),H=Math.min(g,_);let X=0,q=0;for(let K=0;K<H;K++)for(let F=0;F<U;F++)if(T>=0&&A>=0?(X=K*p+F<<2,q=(A+K)*x+T+F<<2):(X=(-A+K)*p-T+F<<2,q=K*x+F<<2),D==0)m[q]=d[X],m[q+1]=d[X+1],m[q+2]=d[X+2],m[q+3]=d[X+3];else if(D==1){var j=d[X+3]*.00392156862745098,C=d[X]*j,N=d[X+1]*j,L=d[X+2]*j,R=m[q+3]*(1/255),I=m[q]*R,P=m[q+1]*R,M=m[q+2]*R;const z=1-j,ee=j+R*z,ae=ee==0?0:1/ee;m[q+3]=255*ee,m[q+0]=(C+I*z)*ae,m[q+1]=(N+P*z)*ae,m[q+2]=(L+M*z)*ae}else if(D==2)j=d[X+3],C=d[X],N=d[X+1],L=d[X+2],R=m[q+3],I=m[q],P=m[q+1],M=m[q+2],j==R&&C==I&&N==P&&L==M?(m[q]=0,m[q+1]=0,m[q+2]=0,m[q+3]=0):(m[q]=C,m[q+1]=N,m[q+2]=L,m[q+3]=j);else if(D==3){if(j=d[X+3],C=d[X],N=d[X+1],L=d[X+2],R=m[q+3],I=m[q],P=m[q+1],M=m[q+2],j==R&&C==I&&N==P&&L==M)continue;if(j<220&&R>20)return!1}return!0}return{decode:function(p){const g=new Uint8Array(p);let m=8;const x=n,_=x.readUshort,T=x.readUint,A={tabs:{},frames:[]},D=new Uint8Array(g.length);let U,H=0,X=0;const q=[137,80,78,71,13,10,26,10];for(var j=0;j<8;j++)if(g[j]!=q[j])throw"The input is not a PNG file!";for(;m<g.length;){const K=x.readUint(g,m);m+=4;const F=x.readASCII(g,m,4);if(m+=4,F=="IHDR")c(g,m,A);else if(F=="iCCP"){for(var C=m;g[C]!=0;)C++;x.readASCII(g,m,C-m),g[C+1];const z=g.slice(C+2,m+K);let ee=null;try{ee=r(z)}catch{ee=i(z)}A.tabs[F]=ee}else if(F=="CgBI")A.tabs[F]=g.slice(m,m+4);else if(F=="IDAT"){for(j=0;j<K;j++)D[H+j]=g[m+j];H+=K}else if(F=="acTL")A.tabs[F]={num_frames:T(g,m),num_plays:T(g,m+4)},U=new Uint8Array(g.length);else if(F=="fcTL"){X!=0&&((M=A.frames[A.frames.length-1]).data=t(A,U.slice(0,X),M.rect.width,M.rect.height),X=0);const z={x:T(g,m+12),y:T(g,m+16),width:T(g,m+4),height:T(g,m+8)};let ee=_(g,m+22);ee=_(g,m+20)/(ee==0?100:ee);const ae={rect:z,delay:Math.round(1e3*ee),dispose:g[m+24],blend:g[m+25]};A.frames.push(ae)}else if(F=="fdAT"){for(j=0;j<K-4;j++)U[X+j]=g[m+j+4];X+=K-4}else if(F=="pHYs")A.tabs[F]=[x.readUint(g,m),x.readUint(g,m+4),g[m+8]];else if(F=="cHRM")for(A.tabs[F]=[],j=0;j<8;j++)A.tabs[F].push(x.readUint(g,m+4*j));else if(F=="tEXt"||F=="zTXt"){A.tabs[F]==null&&(A.tabs[F]={});var N=x.nextZero(g,m),L=x.readASCII(g,m,N-m),R=m+K-N-1;if(F=="tEXt")P=x.readASCII(g,N+1,R);else{var I=r(g.slice(N+2,N+2+R));P=x.readUTF8(I,0,I.length)}A.tabs[F][L]=P}else if(F=="iTXt"){A.tabs[F]==null&&(A.tabs[F]={}),N=0,C=m,N=x.nextZero(g,C),L=x.readASCII(g,C,N-C);const z=g[C=N+1];var P;g[C+1],C+=2,N=x.nextZero(g,C),x.readASCII(g,C,N-C),C=N+1,N=x.nextZero(g,C),x.readUTF8(g,C,N-C),R=K-((C=N+1)-m),z==0?P=x.readUTF8(g,C,R):(I=r(g.slice(C,C+R)),P=x.readUTF8(I,0,I.length)),A.tabs[F][L]=P}else if(F=="PLTE")A.tabs[F]=x.readBytes(g,m,K);else if(F=="hIST"){const z=A.tabs.PLTE.length/3;for(A.tabs[F]=[],j=0;j<z;j++)A.tabs[F].push(_(g,m+2*j))}else if(F=="tRNS")A.ctype==3?A.tabs[F]=x.readBytes(g,m,K):A.ctype==0?A.tabs[F]=_(g,m):A.ctype==2&&(A.tabs[F]=[_(g,m),_(g,m+2),_(g,m+4)]);else if(F=="gAMA")A.tabs[F]=x.readUint(g,m)/1e5;else if(F=="sRGB")A.tabs[F]=g[m];else if(F=="bKGD")A.ctype==0||A.ctype==4?A.tabs[F]=[_(g,m)]:A.ctype==2||A.ctype==6?A.tabs[F]=[_(g,m),_(g,m+2),_(g,m+4)]:A.ctype==3&&(A.tabs[F]=g[m]);else if(F=="IEND")break;m+=K,x.readUint(g,m),m+=4}var M;return X!=0&&((M=A.frames[A.frames.length-1]).data=t(A,U.slice(0,X),M.rect.width,M.rect.height)),A.data=t(A,D,A.width,A.height),delete A.compress,delete A.interlace,delete A.filter,A},toRGBA8:function(p){const g=p.width,m=p.height;if(p.tabs.acTL==null)return[e(p.data,g,m,p).buffer];const x=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const _=g*m*4,T=new Uint8Array(_),A=new Uint8Array(_),D=new Uint8Array(_);for(let H=0;H<p.frames.length;H++){const X=p.frames[H],q=X.rect.x,j=X.rect.y,C=X.rect.width,N=X.rect.height,L=e(X.data,C,N,p);if(H!=0)for(var U=0;U<_;U++)D[U]=T[U];if(X.blend==0?f(L,C,N,T,g,m,q,j,0):X.blend==1&&f(L,C,N,T,g,m,q,j,1),x.push(T.buffer.slice(0)),X.dispose!=0){if(X.dispose==1)f(A,C,N,T,g,m,q,j,0);else if(X.dispose==2)for(U=0;U<_;U++)T[U]=D[U]}}return x},_paeth:s,_copyTile:f,_bin:n}}();(function(){const{_copyTile:n}=il,{_bin:e}=il,t=il._paeth;var r={table:function(){const C=new Uint32Array(256);for(let N=0;N<256;N++){let L=N;for(let R=0;R<8;R++)1&L?L=3988292384^L>>>1:L>>>=1;C[N]=L}return C}(),update(C,N,L,R){for(let I=0;I<R;I++)C=r.table[255&(C^N[L+I])]^C>>>8;return C},crc:(C,N,L)=>4294967295^r.update(4294967295,C,N,L)};function i(C,N,L,R){N[L]+=C[0]*R>>4,N[L+1]+=C[1]*R>>4,N[L+2]+=C[2]*R>>4,N[L+3]+=C[3]*R>>4}function a(C){return Math.max(0,Math.min(255,C))}function o(C,N){const L=C[0]-N[0],R=C[1]-N[1],I=C[2]-N[2],P=C[3]-N[3];return L*L+R*R+I*I+P*P}function s(C,N,L,R,I,P,M){M==null&&(M=1);const K=R.length,F=[];for(var z=0;z<K;z++){const re=R[z];F.push([re>>>0&255,re>>>8&255,re>>>16&255,re>>>24&255])}for(z=0;z<K;z++){let re=4294967295;for(var ee=0,ae=0;ae<K;ae++){var Q=o(F[z],F[ae]);ae!=z&&Q<re&&(re=Q,ee=ae)}}const he=new Uint32Array(I.buffer),G=new Int16Array(N*L*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(z=0;z<$.length;z++)$[z]=255*(($[z]+.5)/16-.5);for(let re=0;re<L;re++)for(let de=0;de<N;de++){var Z;z=4*(re*N+de),M!=2?Z=[a(C[z]+G[z]),a(C[z+1]+G[z+1]),a(C[z+2]+G[z+2]),a(C[z+3]+G[z+3])]:(Q=$[4*(3&re)+(3&de)],Z=[a(C[z]+Q),a(C[z+1]+Q),a(C[z+2]+Q),a(C[z+3]+Q)]),ee=0;let xe=16777215;for(ae=0;ae<K;ae++){const Ve=o(Z,F[ae]);Ve<xe&&(xe=Ve,ee=ae)}const we=F[ee],Ee=[Z[0]-we[0],Z[1]-we[1],Z[2]-we[2],Z[3]-we[3]];M==1&&(de!=N-1&&i(Ee,G,z+4,7),re!=L-1&&(de!=0&&i(Ee,G,z+4*N-4,3),i(Ee,G,z+4*N,5),de!=N-1&&i(Ee,G,z+4*N+4,1))),P[z>>2]=ee,he[z>>2]=R[ee]}}function c(C,N,L,R,I){I==null&&(I={});const{crc:P}=r,M=e.writeUint,K=e.writeUshort,F=e.writeASCII;let z=8;const ee=C.frames.length>1;let ae,Q=!1,he=33+(ee?20:0);if(I.sRGB!=null&&(he+=13),I.pHYs!=null&&(he+=21),I.iCCP!=null&&(ae=pako.deflate(I.iCCP),he+=21+ae.length+4),C.ctype==3){for(var G=C.plte.length,$=0;$<G;$++)C.plte[$]>>>24!=255&&(Q=!0);he+=8+3*G+4+(Q?8+1*G+4:0)}for(var Z=0;Z<C.frames.length;Z++)ee&&(he+=38),he+=(we=C.frames[Z]).cimg.length+12,Z!=0&&(he+=4);he+=12;const re=new Uint8Array(he),de=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)re[$]=de[$];if(M(re,z,13),z+=4,F(re,z,"IHDR"),z+=4,M(re,z,N),z+=4,M(re,z,L),z+=4,re[z]=C.depth,z++,re[z]=C.ctype,z++,re[z]=0,z++,re[z]=0,z++,re[z]=0,z++,M(re,z,P(re,z-17,17)),z+=4,I.sRGB!=null&&(M(re,z,1),z+=4,F(re,z,"sRGB"),z+=4,re[z]=I.sRGB,z++,M(re,z,P(re,z-5,5)),z+=4),I.iCCP!=null){const Ee=13+ae.length;M(re,z,Ee),z+=4,F(re,z,"iCCP"),z+=4,F(re,z,"ICC profile"),z+=11,z+=2,re.set(ae,z),z+=ae.length,M(re,z,P(re,z-(Ee+4),Ee+4)),z+=4}if(I.pHYs!=null&&(M(re,z,9),z+=4,F(re,z,"pHYs"),z+=4,M(re,z,I.pHYs[0]),z+=4,M(re,z,I.pHYs[1]),z+=4,re[z]=I.pHYs[2],z++,M(re,z,P(re,z-13,13)),z+=4),ee&&(M(re,z,8),z+=4,F(re,z,"acTL"),z+=4,M(re,z,C.frames.length),z+=4,M(re,z,I.loop!=null?I.loop:0),z+=4,M(re,z,P(re,z-12,12)),z+=4),C.ctype==3){for(M(re,z,3*(G=C.plte.length)),z+=4,F(re,z,"PLTE"),z+=4,$=0;$<G;$++){const Ee=3*$,Ve=C.plte[$],He=255&Ve,it=Ve>>>8&255,ct=Ve>>>16&255;re[z+Ee+0]=He,re[z+Ee+1]=it,re[z+Ee+2]=ct}if(z+=3*G,M(re,z,P(re,z-3*G-4,3*G+4)),z+=4,Q){for(M(re,z,G),z+=4,F(re,z,"tRNS"),z+=4,$=0;$<G;$++)re[z+$]=C.plte[$]>>>24&255;z+=G,M(re,z,P(re,z-G-4,G+4)),z+=4}}let xe=0;for(Z=0;Z<C.frames.length;Z++){var we=C.frames[Z];ee&&(M(re,z,26),z+=4,F(re,z,"fcTL"),z+=4,M(re,z,xe++),z+=4,M(re,z,we.rect.width),z+=4,M(re,z,we.rect.height),z+=4,M(re,z,we.rect.x),z+=4,M(re,z,we.rect.y),z+=4,K(re,z,R[Z]),z+=2,K(re,z,1e3),z+=2,re[z]=we.dispose,z++,re[z]=we.blend,z++,M(re,z,P(re,z-30,30)),z+=4);const Ee=we.cimg;M(re,z,(G=Ee.length)+(Z==0?0:4)),z+=4;const Ve=z;F(re,z,Z==0?"IDAT":"fdAT"),z+=4,Z!=0&&(M(re,z,xe++),z+=4),re.set(Ee,z),z+=G,M(re,z,P(re,Ve,z-Ve)),z+=4}return M(re,z,0),z+=4,F(re,z,"IEND"),z+=4,M(re,z,P(re,z-4,4)),z+=4,re.buffer}function f(C,N,L){for(let R=0;R<C.frames.length;R++){const I=C.frames[R];I.rect.width;const P=I.rect.height,M=new Uint8Array(P*I.bpl+P);I.cimg=m(I.img,P,I.bpp,I.bpl,M,N,L)}}function d(C,N,L,R,I){const P=I[0],M=I[1],K=I[2],F=I[3],z=I[4],ee=I[5];let ae=6,Q=8,he=255;for(var G=0;G<C.length;G++){const ve=new Uint8Array(C[G]);for(var $=ve.length,Z=0;Z<$;Z+=4)he&=ve[Z+3]}const re=he!=255,de=function(dt,ot,Te,Ke,Ge,lt){const ft=[];for(var et=0;et<dt.length;et++){const It=new Uint8Array(dt[et]),ut=new Uint32Array(It.buffer);var Ct;let bn=0,Vt=0,Jn=ot,Kt=Te,Cn=Ke?1:0;if(et!=0){const mi=lt||Ke||et==1||ft[et-2].dispose!=0?1:2;let sn=0,ma=1e9;for(let Rn=0;Rn<mi;Rn++){var yt=new Uint8Array(dt[et-1-Rn]);const Br=new Uint32Array(dt[et-1-Rn]);let fr=ot,wn=Te,Dt=-1,rn=-1;for(let Bn=0;Bn<Te;Bn++)for(let yr=0;yr<ot;yr++)ut[Nt=Bn*ot+yr]!=Br[Nt]&&(yr<fr&&(fr=yr),yr>Dt&&(Dt=yr),Bn<wn&&(wn=Bn),Bn>rn&&(rn=Bn));Dt==-1&&(fr=wn=Dt=rn=0),Ge&&((1&fr)==1&&fr--,(1&wn)==1&&wn--);const Ei=(Dt-fr+1)*(rn-wn+1);Ei<ma&&(ma=Ei,sn=Rn,bn=fr,Vt=wn,Jn=Dt-fr+1,Kt=rn-wn+1)}yt=new Uint8Array(dt[et-1-sn]),sn==1&&(ft[et-1].dispose=2),Ct=new Uint8Array(Jn*Kt*4),n(yt,ot,Te,Ct,Jn,Kt,-bn,-Vt,0),Cn=n(It,ot,Te,Ct,Jn,Kt,-bn,-Vt,3)?1:0,Cn==1?g(It,ot,Te,Ct,{x:bn,y:Vt,width:Jn,height:Kt}):n(It,ot,Te,Ct,Jn,Kt,-bn,-Vt,0)}else Ct=It.slice(0);ft.push({rect:{x:bn,y:Vt,width:Jn,height:Kt},img:Ct,blend:Cn,dispose:0})}if(Ke)for(et=0;et<ft.length;et++){if((xt=ft[et]).blend==1)continue;const It=xt.rect,ut=ft[et-1].rect,bn=Math.min(It.x,ut.x),Vt=Math.min(It.y,ut.y),Jn={x:bn,y:Vt,width:Math.max(It.x+It.width,ut.x+ut.width)-bn,height:Math.max(It.y+It.height,ut.y+ut.height)-Vt};ft[et-1].dispose=1,et-1!=0&&p(dt,ot,Te,ft,et-1,Jn,Ge),p(dt,ot,Te,ft,et,Jn,Ge)}let At=0;if(dt.length!=1)for(var Nt=0;Nt<ft.length;Nt++){var xt;At+=(xt=ft[Nt]).rect.width*xt.rect.height}return ft}(C,N,L,P,M,K),xe={},we=[],Ee=[];if(R!=0){const ve=[];for(Z=0;Z<de.length;Z++)ve.push(de[Z].img.buffer);const dt=function(Ge){let lt=0;for(var ft=0;ft<Ge.length;ft++)lt+=Ge[ft].byteLength;const et=new Uint8Array(lt);let Ct=0;for(ft=0;ft<Ge.length;ft++){const yt=new Uint8Array(Ge[ft]),At=yt.length;for(let Nt=0;Nt<At;Nt+=4){let xt=yt[Nt],It=yt[Nt+1],ut=yt[Nt+2];const bn=yt[Nt+3];bn==0&&(xt=It=ut=0),et[Ct+Nt]=xt,et[Ct+Nt+1]=It,et[Ct+Nt+2]=ut,et[Ct+Nt+3]=bn}Ct+=At}return et.buffer}(ve),ot=_(dt,R);for(Z=0;Z<ot.plte.length;Z++)we.push(ot.plte[Z].est.rgba);let Te=0;for(Z=0;Z<de.length;Z++){const Ke=(He=de[Z]).img.length;var Ve=new Uint8Array(ot.inds.buffer,Te>>2,Ke>>2);Ee.push(Ve);const Ge=new Uint8Array(ot.abuf,Te,Ke);ee&&s(He.img,He.rect.width,He.rect.height,we,Ge,Ve),He.img.set(Ge),Te+=Ke}}else for(G=0;G<de.length;G++){var He=de[G];const ve=new Uint32Array(He.img.buffer);var it=He.rect.width;for($=ve.length,Ve=new Uint8Array($),Ee.push(Ve),Z=0;Z<$;Z++){const dt=ve[Z];if(Z!=0&&dt==ve[Z-1])Ve[Z]=Ve[Z-1];else if(Z>it&&dt==ve[Z-it])Ve[Z]=Ve[Z-it];else{let ot=xe[dt];if(ot==null&&(xe[dt]=ot=we.length,we.push(dt),we.length>=300))break;Ve[Z]=ot}}}const ct=we.length;for(ct<=256&&z==0&&(Q=ct<=2?1:ct<=4?2:ct<=16?4:8,Q=Math.max(Q,F)),G=0;G<de.length;G++){(He=de[G]).rect.x,He.rect.y,it=He.rect.width;const ve=He.rect.height;let dt=He.img;new Uint32Array(dt.buffer);let ot=4*it,Te=4;if(ct<=256&&z==0){ot=Math.ceil(Q*it/8);var vt=new Uint8Array(ot*ve);const Ke=Ee[G];for(let Ge=0;Ge<ve;Ge++){Z=Ge*ot;const lt=Ge*it;if(Q==8)for(var ke=0;ke<it;ke++)vt[Z+ke]=Ke[lt+ke];else if(Q==4)for(ke=0;ke<it;ke++)vt[Z+(ke>>1)]|=Ke[lt+ke]<<4-4*(1&ke);else if(Q==2)for(ke=0;ke<it;ke++)vt[Z+(ke>>2)]|=Ke[lt+ke]<<6-2*(3&ke);else if(Q==1)for(ke=0;ke<it;ke++)vt[Z+(ke>>3)]|=Ke[lt+ke]<<7-1*(7&ke)}dt=vt,ae=3,Te=1}else if(re==0&&de.length==1){vt=new Uint8Array(it*ve*3);const Ke=it*ve;for(Z=0;Z<Ke;Z++){const Ge=3*Z,lt=4*Z;vt[Ge]=dt[lt],vt[Ge+1]=dt[lt+1],vt[Ge+2]=dt[lt+2]}dt=vt,ae=2,Te=3,ot=3*it}He.img=dt,He.bpl=ot,He.bpp=Te}return{ctype:ae,depth:Q,plte:we,frames:de}}function p(C,N,L,R,I,P,M){const K=Uint8Array,F=Uint32Array,z=new K(C[I-1]),ee=new F(C[I-1]),ae=I+1<C.length?new K(C[I+1]):null,Q=new K(C[I]),he=new F(Q.buffer);let G=N,$=L,Z=-1,re=-1;for(let xe=0;xe<P.height;xe++)for(let we=0;we<P.width;we++){const Ee=P.x+we,Ve=P.y+xe,He=Ve*N+Ee,it=he[He];it==0||R[I-1].dispose==0&&ee[He]==it&&(ae==null||ae[4*He+3]!=0)||(Ee<G&&(G=Ee),Ee>Z&&(Z=Ee),Ve<$&&($=Ve),Ve>re&&(re=Ve))}Z==-1&&(G=$=Z=re=0),M&&((1&G)==1&&G--,(1&$)==1&&$--),P={x:G,y:$,width:Z-G+1,height:re-$+1};const de=R[I];de.rect=P,de.blend=1,de.img=new Uint8Array(P.width*P.height*4),R[I-1].dispose==0?(n(z,N,L,de.img,P.width,P.height,-P.x,-P.y,0),g(Q,N,L,de.img,P)):n(Q,N,L,de.img,P.width,P.height,-P.x,-P.y,0)}function g(C,N,L,R,I){n(C,N,L,R,I.width,I.height,-I.x,-I.y,2)}function m(C,N,L,R,I,P,M){const K=[];let F,z=[0,1,2,3,4];P!=-1?z=[P]:(N*R>5e5||L==1)&&(z=[0]),M&&(F={level:0});const ee=FV;for(var ae=0;ae<z.length;ae++){for(let G=0;G<N;G++)x(I,C,G,R,L,z[ae]);K.push(ee.deflate(I,F))}let Q,he=1e9;for(ae=0;ae<K.length;ae++)K[ae].length<he&&(Q=ae,he=K[ae].length);return K[Q]}function x(C,N,L,R,I,P){const M=L*R;let K=M+L;if(C[K]=P,K++,P==0)if(R<500)for(var F=0;F<R;F++)C[K+F]=N[M+F];else C.set(new Uint8Array(N.buffer,M,R),K);else if(P==1){for(F=0;F<I;F++)C[K+F]=N[M+F];for(F=I;F<R;F++)C[K+F]=N[M+F]-N[M+F-I]+256&255}else if(L==0){for(F=0;F<I;F++)C[K+F]=N[M+F];if(P==2)for(F=I;F<R;F++)C[K+F]=N[M+F];if(P==3)for(F=I;F<R;F++)C[K+F]=N[M+F]-(N[M+F-I]>>1)+256&255;if(P==4)for(F=I;F<R;F++)C[K+F]=N[M+F]-t(N[M+F-I],0,0)+256&255}else{if(P==2)for(F=0;F<R;F++)C[K+F]=N[M+F]+256-N[M+F-R]&255;if(P==3){for(F=0;F<I;F++)C[K+F]=N[M+F]+256-(N[M+F-R]>>1)&255;for(F=I;F<R;F++)C[K+F]=N[M+F]+256-(N[M+F-R]+N[M+F-I]>>1)&255}if(P==4){for(F=0;F<I;F++)C[K+F]=N[M+F]+256-t(0,N[M+F-R],0)&255;for(F=I;F<R;F++)C[K+F]=N[M+F]+256-t(N[M+F-I],N[M+F-R],N[M+F-I-R])&255}}}function _(C,N){const L=new Uint8Array(C),R=L.slice(0),I=new Uint32Array(R.buffer),P=T(R,N),M=P[0],K=P[1],F=L.length,z=new Uint8Array(F>>2);let ee;if(L.length<2e7)for(var ae=0;ae<F;ae+=4)ee=A(M,Q=L[ae]*(1/255),he=L[ae+1]*(1/255),G=L[ae+2]*(1/255),$=L[ae+3]*(1/255)),z[ae>>2]=ee.ind,I[ae>>2]=ee.est.rgba;else for(ae=0;ae<F;ae+=4){var Q=L[ae]*.00392156862745098,he=L[ae+1]*(1/255),G=L[ae+2]*(1/255),$=L[ae+3]*(1/255);for(ee=M;ee.left;)ee=D(ee.est,Q,he,G,$)<=0?ee.left:ee.right;z[ae>>2]=ee.ind,I[ae>>2]=ee.est.rgba}return{abuf:R.buffer,inds:z,plte:K}}function T(C,N,L){L==null&&(L=1e-4);const R=new Uint32Array(C.buffer),I={i0:0,i1:C.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=X(C,I.i0,I.i1),I.est=q(I.bst);const P=[I];for(;P.length<N;){let K=0,F=0;for(var M=0;M<P.length;M++)P[M].est.L>K&&(K=P[M].est.L,F=M);if(K<L)break;const z=P[F],ee=U(C,R,z.i0,z.i1,z.est.e,z.est.eMq255);if(z.i0>=ee||z.i1<=ee){z.est.L=0;continue}const ae={i0:z.i0,i1:ee,bst:null,est:null,tdst:0,left:null,right:null};ae.bst=X(C,ae.i0,ae.i1),ae.est=q(ae.bst);const Q={i0:ee,i1:z.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Q.bst={R:[],m:[],N:z.bst.N-ae.bst.N},M=0;M<16;M++)Q.bst.R[M]=z.bst.R[M]-ae.bst.R[M];for(M=0;M<4;M++)Q.bst.m[M]=z.bst.m[M]-ae.bst.m[M];Q.est=q(Q.bst),z.left=ae,z.right=Q,P[F]=ae,P.push(Q)}for(P.sort((K,F)=>F.bst.N-K.bst.N),M=0;M<P.length;M++)P[M].ind=M;return[I,P]}function A(C,N,L,R,I){if(C.left==null)return C.tdst=function(ae,Q,he,G,$){const Z=Q-ae[0],re=he-ae[1],de=G-ae[2],xe=$-ae[3];return Z*Z+re*re+de*de+xe*xe}(C.est.q,N,L,R,I),C;const P=D(C.est,N,L,R,I);let M=C.left,K=C.right;P>0&&(M=C.right,K=C.left);const F=A(M,N,L,R,I);if(F.tdst<=P*P)return F;const z=A(K,N,L,R,I);return z.tdst<F.tdst?z:F}function D(C,N,L,R,I){const{e:P}=C;return P[0]*N+P[1]*L+P[2]*R+P[3]*I-C.eMq}function U(C,N,L,R,I,P){for(R-=4;L<R;){for(;H(C,L,I)<=P;)L+=4;for(;H(C,R,I)>P;)R-=4;if(L>=R)break;const M=N[L>>2];N[L>>2]=N[R>>2],N[R>>2]=M,L+=4,R-=4}for(;H(C,L,I)>P;)L-=4;return L+4}function H(C,N,L){return C[N]*L[0]+C[N+1]*L[1]+C[N+2]*L[2]+C[N+3]*L[3]}function X(C,N,L){const R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],P=L-N>>2;for(let M=N;M<L;M+=4){const K=C[M]*.00392156862745098,F=C[M+1]*(1/255),z=C[M+2]*(1/255),ee=C[M+3]*(1/255);I[0]+=K,I[1]+=F,I[2]+=z,I[3]+=ee,R[0]+=K*K,R[1]+=K*F,R[2]+=K*z,R[3]+=K*ee,R[5]+=F*F,R[6]+=F*z,R[7]+=F*ee,R[10]+=z*z,R[11]+=z*ee,R[15]+=ee*ee}return R[4]=R[1],R[8]=R[2],R[9]=R[6],R[12]=R[3],R[13]=R[7],R[14]=R[11],{R,m:I,N:P}}function q(C){const{R:N}=C,{m:L}=C,{N:R}=C,I=L[0],P=L[1],M=L[2],K=L[3],F=R==0?0:1/R,z=[N[0]-I*I*F,N[1]-I*P*F,N[2]-I*M*F,N[3]-I*K*F,N[4]-P*I*F,N[5]-P*P*F,N[6]-P*M*F,N[7]-P*K*F,N[8]-M*I*F,N[9]-M*P*F,N[10]-M*M*F,N[11]-M*K*F,N[12]-K*I*F,N[13]-K*P*F,N[14]-K*M*F,N[15]-K*K*F],ee=z,ae=j;let Q=[Math.random(),Math.random(),Math.random(),Math.random()],he=0,G=0;if(R!=0)for(let Z=0;Z<16&&(Q=ae.multVec(ee,Q),G=Math.sqrt(ae.dot(Q,Q)),Q=ae.sml(1/G,Q),!(Z!=0&&Math.abs(G-he)<1e-9));Z++)he=G;const $=[I*F,P*F,M*F,K*F];return{Cov:z,q:$,e:Q,L:he,eMq255:ae.dot(ae.sml(255,$),Q),eMq:ae.dot(Q,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var j={multVec:(C,N)=>[C[0]*N[0]+C[1]*N[1]+C[2]*N[2]+C[3]*N[3],C[4]*N[0]+C[5]*N[1]+C[6]*N[2]+C[7]*N[3],C[8]*N[0]+C[9]*N[1]+C[10]*N[2]+C[11]*N[3],C[12]*N[0]+C[13]*N[1]+C[14]*N[2]+C[15]*N[3]],dot:(C,N)=>C[0]*N[0]+C[1]*N[1]+C[2]*N[2]+C[3]*N[3],sml:(C,N)=>[C*N[0],C*N[1],C*N[2],C*N[3]]};il.encode=function(N,L,R,I,P,M,K){I==null&&(I=0),K==null&&(K=!1);const F=d(N,L,R,I,[!1,!1,!1,0,K,!1]);return f(F,-1),c(F,L,R,P,M)},il.encodeLL=function(N,L,R,I,P,M,K,F){const z={ctype:0+(I==1?0:2)+(P==0?0:4),depth:M,frames:[]},ee=(I+P)*M,ae=ee*L;for(let Q=0;Q<N.length;Q++)z.frames.push({rect:{x:0,y:0,width:L,height:R},img:new Uint8Array(N[Q]),blend:0,dispose:1,bpp:Math.ceil(ee/8),bpl:Math.ceil(ae/8)});return f(z,0,!0),c(z,L,R,K,F)},il.encode.compress=d,il.encode.dither=s,il.quantize=_,il.quantize.getKDtree=T,il.quantize.getNearest=A})();const gE={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,a=n.getContext("2d").getImageData(0,0,t,r),o=new Uint32Array(a.data.buffer),s=(32*t+31)/32<<2,c=s*r,f=122+c,d=new ArrayBuffer(f),p=new DataView(d),g=1<<20;let m,x,_,T,A=g,D=0,U=0,H=0;function X(C){p.setUint16(U,C,!0),U+=2}function q(C){p.setUint32(U,C,!0),U+=4}function j(C){U+=C}X(19778),q(f),j(4),q(122),q(108),q(t),q(-r>>>0),X(1),X(32),q(3),q(c),q(2835),q(2835),j(8),q(16711680),q(65280),q(255),q(4278190080),q(1466527264),function C(){for(;D<r&&A>0;){for(T=122+D*s,m=0;m<i;)A--,x=o[H++],_=x>>>24,p.setUint32(T+m,x<<8|_),m+=4;D++}H<o.length?(A=g,setTimeout(C,gE._dly)):e(d)}()},toBlob(n,e){this.toArrayBuffer(n,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var yo={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},zV={[yo.CHROME]:16384,[yo.FIREFOX]:11180,[yo.DESKTOP_SAFARI]:16384,[yo.IE]:8192,[yo.IOS]:4096,[yo.ETC]:8192};const N5=typeof window<"u",mE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Qg=N5&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),UV=(N5||mE)&&(Qg&&Qg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),vE=(N5||mE)&&(Qg&&Qg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function D5(n,e,t=Date.now()){return new Promise(r=>{const i=n.split(","),a=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let s=o.length;const c=new Uint8Array(s);for(;s--;)c[s]=o.charCodeAt(s);const f=new Blob([c],{type:a});f.name=e,f.lastModified=t,r(f)})}function yE(n){return new Promise((e,t)=>{const r=new vE;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)})}function xE(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n})}function ad(){if(ad.cachedResult!==void 0)return ad.cachedResult;let n=yo.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=yo.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=yo.IOS:/Safari/i.test(e)?n=yo.DESKTOP_SAFARI:/Firefox/i.test(e)?n=yo.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=yo.IE),ad.cachedResult=n,ad.cachedResult}function bE(n,e){const t=ad(),r=zV[t];let i=n,a=e,o=i*a;const s=i>a?a/i:i/a;for(;o>r*r;){const c=(r+i)/2,f=(r+a)/2;c<f?(a=f,i=f*s):(a=c*s,i=c),o=i*a}return{width:i,height:a}}function Km(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function wE(n,e){const{width:t,height:r}=bE(n.width,n.height),[i,a]=Km(t,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(n,0,0,i.width,i.height),i}function vg(){return vg.cachedResult!==void 0||(vg.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),vg.cachedResult}function Zg(n,e={}){return new Promise(function(t,r){let i,a;var o=function(){try{return a=wE(i,e.fileType||n.type),t([i,a])}catch(c){return r(c)}},s=function(c){try{var f=function(d){try{throw d}catch(p){return r(p)}};try{let d;return yE(n).then(function(p){try{return d=p,xE(d).then(function(g){try{return i=g,function(){try{return o()}catch(m){return r(m)}}()}catch(m){return f(m)}},f)}catch(g){return f(g)}},f)}catch(d){f(d)}}catch(d){return r(d)}};try{if(vg()||[yo.DESKTOP_SAFARI,yo.MOBILE_SAFARI].includes(ad()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(c){try{return i=c,o()}catch{return s()}},s)}catch{s()}})}function Jg(n,e,t,r,i=1){return new Promise(function(a,o){let s;if(e==="image/png"){let f,d,p;return f=n.getContext("2d"),{data:d}=f.getImageData(0,0,n.width,n.height),p=il.encode([d.buffer],n.width,n.height,4096*i),s=new Blob([p],{type:e}),s.name=t,s.lastModified=r,c.call(this)}{let f=function(){return c.call(this)};if(e==="image/bmp")return new Promise(d=>gE.toBlob(n,d)).then((function(d){try{return s=d,s.name=t,s.lastModified=r,f.call(this)}catch(p){return o(p)}}).bind(this),o);{let d=function(){return f.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(p){try{return s=p,s.name=t,s.lastModified=r,d.call(this)}catch(g){return o(g)}}).bind(this),o);{let p;return p=n.toDataURL(e,i),D5(p,t,r).then((function(g){try{return s=g,d.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function c(){return a(s)}})}function Xl(n){n.width=0,n.height=0}function dh(){return new Promise(function(n,e){let t,r,i,a;return dh.cachedResult!==void 0?n(dh.cachedResult):D5("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return t=o,Zg(t).then(function(s){try{return r=s[1],Jg(r,t.type,t.name,t.lastModified).then(function(c){try{return i=c,Xl(r),Zg(i).then(function(f){try{return a=f[0],dh.cachedResult=a.width===1&&a.height===2,n(dh.cachedResult)}catch(d){return e(d)}},e)}catch(f){return e(f)}},e)}catch(c){return e(c)}},e)}catch(s){return e(s)}},e)})}function _E(n){return new Promise((e,t)=>{const r=new vE;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let s=2;for(;s<o;){if(a.getUint16(s+2,!1)<=8)return e(-1);const c=a.getUint16(s,!1);if(s+=2,c==65505){if(a.getUint32(s+=2,!1)!=1165519206)return e(-1);const f=a.getUint16(s+=6,!1)==18761;s+=a.getUint32(s+4,f);const d=a.getUint16(s,f);s+=2;for(let p=0;p<d;p++)if(a.getUint16(s+12*p,f)==274)return e(a.getUint16(s+12*p+8,f))}else{if((65280&c)!=65280)break;s+=a.getUint16(s,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)})}function AE(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let a,o=n;return isFinite(i)&&(t>i||r>i)&&([o,a]=Km(t,r),t>r?(o.width=i,o.height=r/t*i):(o.width=t/r*i,o.height=i),a.drawImage(n,0,0,o.width,o.height),Xl(n)),o}function SE(n,e){const{width:t}=n,{height:r}=n,[i,a]=Km(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,r),Xl(n),i}function C4(n,e,t=0){return new Promise(function(r,i){let a,o,s,c,f,d,p,g,m,x,_,T,A,D,U,H,X,q,j,C;function N(R=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=R,e.onProgress(Math.min(a,100))}function L(R){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(R,a),100),e.onProgress(a)}return a=t,o=e.maxIteration||10,s=1024*e.maxSizeMB*1024,N(),Zg(n,e).then((function(R){try{return[,c]=R,N(),f=AE(c,e),N(),new Promise(function(I,P){var M;if(!(M=e.exifOrientation))return _E(n).then((function(F){try{return M=F,K.call(this)}catch(z){return P(z)}}).bind(this),P);function K(){return I(M)}return K.call(this)}).then((function(I){try{return d=I,N(),dh().then((function(P){try{return p=P?f:SE(f,d),N(),g=e.initialQuality||1,m=e.fileType||n.type,Jg(p,m,n.name,n.lastModified,g).then((function(M){try{{let F=function(){if(o--&&(U>s||U>A)){let ee,ae;return ee=C?.95*j.width:j.width,ae=C?.95*j.height:j.height,[X,q]=Km(ee,ae),q.drawImage(j,0,0,ee,ae),g*=m==="image/png"?.85:.95,Jg(X,m,n.name,n.lastModified,g).then(function(Q){try{return H=Q,Xl(j),j=X,U=H.size,L(Math.min(99,Math.floor((D-U)/(D-s)*100))),F}catch(he){return i(he)}},i)}return[1]},z=function(){return Xl(j),Xl(X),Xl(f),Xl(p),Xl(c),L(100),r(H)};if(x=M,N(),_=x.size>s,T=x.size>n.size,!_&&!T)return L(100),r(x);var K;return A=n.size,D=x.size,U=D,j=p,C=!e.alwaysKeepResolution&&_,(K=(function(ee){for(;ee;){if(ee.then)return void ee.then(K,i);try{if(ee.pop){if(ee.length)return ee.pop()?z.call(this):ee;ee=F}else ee=ee.call(this)}catch(ae){return i(ae)}}}).bind(this))(F)}}catch(F){return i(F)}}).bind(this),i)}catch(M){return i(M)}}).bind(this),i)}catch(P){return i(P)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const VV=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Uv;function qV(n,e){return new Promise((t,r)=>{Uv||(Uv=function(o){const s=[];return s.push(o),URL.createObjectURL(new Blob(s))}(VV));const i=new Worker(Uv);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();t(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Pa(n,e){return new Promise(function(t,r){let i,a,o,s,c,f;if(i={...e},o=0,{onProgress:s}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{o=m,typeof s=="function"&&s(o)},!(n instanceof Blob||n instanceof UV))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return C4(n,i).then((function(m){try{return a=m,g.call(this)}catch(x){return r(x)}}).bind(this),r);var d=(function(){try{return g.call(this)}catch(m){return r(m)}}).bind(this),p=function(m){try{return C4(n,i).then(function(x){try{return a=x,d()}catch(_){return r(_)}},r)}catch(x){return r(x)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",qV(n,i).then(function(m){try{return a=m,d()}catch{return p()}},p)}catch{p()}function g(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(a=pE(n,a))}catch{}return t(a)}})}Pa.getDataUrlFromFile=yE,Pa.getFilefromDataUrl=D5,Pa.loadImage=xE,Pa.drawImageInCanvas=wE,Pa.drawFileInCanvas=Zg,Pa.canvasToFile=Jg,Pa.getExifOrientation=_E,Pa.handleMaxWidthOrHeight=AE,Pa.followExifOrientation=SE,Pa.cleanupCanvasMemory=Xl,Pa.isAutoOrientationInBrowser=dh,Pa.approximateBelowMaximumCanvasSizeOfBrowser=bE,Pa.copyExifWithoutOrientation=pE,Pa.getBrowserName=ad,Pa.version="2.0.2";const y1=n=>n.images&&Array.isArray(n.images)?{...n,images:n.images.filter(e=>e&&e.trim()),primaryImage:n.images[0]||null}:n.imageUrl&&n.imageUrl.trim()?{...n,images:[n.imageUrl],primaryImage:n.imageUrl}:{...n,images:[],primaryImage:null},HV=n=>y1(n).primaryImage,EE=n=>y1(n).images,WV=async(n,e,t,r,i)=>{try{console.log("🔄 מתחיל migration של מוצרים קיימים...");const a=await r(i(n,"items")),o=[];a.docs.forEach(s=>{const c=s.data();c.images&&Array.isArray(c.images)||c.imageUrl&&c.imageUrl.trim()&&o.push({id:s.id,images:[c.imageUrl]})}),console.log(`📊 נמצאו ${o.length} מוצרים לעדכון`);for(const s of o)await e(t(n,"items",s.id),{images:s.images}),console.log(`✅ עודכן מוצר: ${s.id}`);return console.log("🎉 Migration הושלם בהצלחה!"),{success:!0,updatedCount:o.length}}catch(a){return console.error("❌ שגיאה ב-migration:",a),{success:!1,error:a.message}}},x1=({item:n,width:e="100%",height:t="200px",showNavigation:r=!0,className:i="",style:a={},borderRadius:o="8px"})=>{const s=EE(n),[c,f]=ue.useState(0),[d,p]=ue.useState(!1),[g,m]=ue.useState(!1);if(ue.useEffect(()=>{const A=()=>{const D=window.innerWidth<=768,U=window.location.pathname.includes("/management")||document.querySelector(".product-card-mobile")!==null||i.includes("management")||a.managementMode===!0;p(D),m(U)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[i,a]),s.length===0)return v.jsx("div",{style:{width:e,height:t,borderRadius:o,border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",...a},className:i,children:v.jsx("img",{src:"/no-image-available.png",alt:"אין תמונה זמינה",style:{maxWidth:"80%",maxHeight:"80%",objectFit:"contain",opacity:.5}})});if(s.length===1)return v.jsx("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",...a},className:i,children:v.jsx("img",{src:s[0],alt:n.name||"תמונת מוצר",style:{width:"100%",height:"100%",objectFit:"contain",background:"white"}})});const x=()=>{f(A=>(A+1)%s.length)},_=()=>{f(A=>(A-1+s.length)%s.length)},T=A=>{f(A)};return v.jsxs("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",background:"#f3f4f6",...a},className:i,children:[v.jsx("img",{src:s[c],alt:`${n.name||"מוצר"} - תמונה ${c+1}`,style:{width:"100%",height:"100%",objectFit:"contain",transition:"opacity 0.3s ease",background:"white"}}),s.length>1&&v.jsx(v.Fragment,{children:d&&g?v.jsx("button",{onClick:x,style:{position:"absolute",right:"8px",bottom:"8px",background:"rgba(255, 255, 255, 0.9)",color:"#333",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},"aria-label":"תמונה הבאה",children:"›"}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:_,style:{position:"absolute",left:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:A=>{A.currentTarget.style.background="rgba(0, 0, 0, 0.9)",A.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:A=>{A.currentTarget.style.background="rgba(0, 0, 0, 0.7)",A.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"תמונה קודמת",children:v.jsx(L1,{size:20})}),v.jsx("button",{onClick:x,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:A=>{A.currentTarget.style.background="rgba(0, 0, 0, 0.9)",A.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:A=>{A.currentTarget.style.background="rgba(0, 0, 0, 0.7)",A.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"תמונה הבאה",children:v.jsx(M1,{size:20})})]})}),!(d&&g)&&s.length>1&&s.length<=5&&v.jsx("div",{style:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"6px",zIndex:10},children:s.map((A,D)=>v.jsx("button",{onClick:()=>T(D),style:{width:"8px",height:"8px",borderRadius:"50%",border:"none",background:D===c?"white":"rgba(255, 255, 255, 0.5)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":`תמונה ${D+1}`},D))}),!(d&&g)&&s.length>5&&v.jsxs("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"bold",zIndex:10},children:[c+1," / ",s.length]}),d&&g&&s.length>1&&v.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5},onTouchStart:A=>{const D=A.touches[0];A.currentTarget.startX=D.clientX},onTouchEnd:A=>{const D=A.changedTouches[0];if(!A.currentTarget.startX)return;const U=A.currentTarget.startX-D.clientX;Math.abs(U)>50&&(U>0?x():_())}}),d&&g&&s.length>1&&v.jsxs("div",{style:{position:"absolute",bottom:"2px",right:"2px",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"1px 4px",borderRadius:"4px",fontSize:"8px",zIndex:10},children:[c+1,"/",s.length]}),v.jsx("div",{tabIndex:0,onKeyDown:A=>{A.key==="ArrowRight"&&x(),A.key==="ArrowLeft"&&_()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",outline:"none"},"aria-label":"גלריית תמונות - השתמש בחצים לניווט"})]})},GV=async n=>{const e="https://api.cloudinary.com/v1_1/dcydl9rz8/image/upload",t=new FormData;return t.append("file",n),t.append("upload_preset","GmachMedia"),(await(await fetch(e,{method:"POST",body:t})).json()).secure_url},$V=({editingItem:n,name:e,quantity:t,imageUrl:r,imageFile:i,onNameChange:a,onQuantityChange:o,onImageUrlChange:s,onImageFileChange:c,onCancel:f,onSubmit:d,publicComment:p,internalComment:g,onPublicCommentChange:m,onInternalCommentChange:x})=>{const _=ue.useRef(null),[T,A]=ue.useState([]),[D,U]=ue.useState(!1);ue.useEffect(()=>{if(n){const L=EE(n);A(L.map((R,I)=>({id:Date.now()+I,url:R,isUploaded:!0})))}else A([])},[n]),ue.useEffect(()=>{const L=I=>{_.current&&!_.current.contains(I.target)&&f()},R=I=>{I.key==="Escape"&&f()};return document.addEventListener("mousedown",L),document.addEventListener("keydown",R),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("keydown",R)}},[f]);const H=()=>{if(r&&r.trim()){const L={id:Date.now(),url:r.trim(),isUploaded:!0};A(R=>[...R,L]),s({target:{value:""}})}},X=async L=>{if(L){U(!0);try{const R=await Pa(L,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0}),I=await GV(R),P={id:Date.now(),url:I,isUploaded:!0};A(M=>[...M,P]),xn.success("התמונה הועלתה בהצלחה!")}catch(R){xn.error("שגיאה בהעלאת התמונה: "+R.message)}finally{U(!1)}}},q=L=>{A(R=>R.filter(I=>I.id!==L))},j=L=>{L!==0&&A(R=>{const I=[...R];return[I[L-1],I[L]]=[I[L],I[L-1]],I})},C=L=>{L!==T.length-1&&A(R=>{const I=[...R];return[I[L],I[L+1]]=[I[L+1],I[L]],I})},N=async L=>{L.preventDefault();const R=T.map(P=>P.url);R[0];const I={name:e,quantity:t,publicComment:p,internalComment:g,images:R,imageUrl:R[0]||null};await d(L,I)};return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,direction:"ltr",padding:"1rem"},children:v.jsxs("div",{ref:_,style:{position:"relative",background:"white",padding:"2rem",borderRadius:"12px",width:"95%",maxWidth:"600px",direction:"rtl",textAlign:"initial",maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[v.jsx("button",{onClick:f,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",lineHeight:1,color:"#666",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"סגור",children:"×"}),v.jsx("h3",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",color:"#333"},children:n?"עריכת מוצר":"הוספת מוצר חדש"}),v.jsxs("form",{onSubmit:N,children:[v.jsxs("div",{style:P0,children:[v.jsx("label",{style:L0,children:"שם המוצר:"}),v.jsx("input",{dir:"rtl",type:"text",value:e,onChange:a,required:!0,style:eh})]}),v.jsxs("div",{style:P0,children:[v.jsx("label",{style:L0,children:"כמות:"}),v.jsx("input",{dir:"rtl",type:"number",value:t,onChange:o,required:!0,style:eh})]}),v.jsxs("div",{style:P0,children:[v.jsx("label",{style:L0,children:"הערה לפרסום (חיצונית):"}),v.jsx("input",{dir:"rtl",type:"text",value:p,onChange:m,style:eh})]}),v.jsxs("div",{style:P0,children:[v.jsx("label",{style:L0,children:"הערה פנימית:"}),v.jsx("input",{dir:"rtl",type:"text",value:g,onChange:x,style:eh})]}),v.jsxs("div",{style:P0,children:[v.jsx("label",{style:L0,children:"תמונות המוצר:"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[v.jsx("input",{dir:"rtl",type:"text",value:r,onChange:s,placeholder:"הדבק כתובת תמונה (URL)",style:{...eh,flex:1,margin:0}}),v.jsx("button",{type:"button",onClick:H,disabled:!r.trim(),style:{padding:"8px 12px",backgroundColor:r.trim()?"#1976d2":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.trim()?"pointer":"not-allowed",whiteSpace:"nowrap"},children:"הוסף"})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("input",{type:"file",accept:"image/*",onChange:L=>{const R=L.target.files[0];R&&(X(R),L.target.value="")},style:{...eh,padding:"8px"},disabled:D}),D&&v.jsx("div",{style:{fontSize:"0.875rem",color:"#1976d2",marginTop:"0.5rem"},children:"מעלה תמונה..."})]}),T.length>0&&v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsxs("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:["תמונות (",T.length,")"]}),v.jsx("div",{style:{marginBottom:"1rem"},children:v.jsx(x1,{item:{images:T.map(L=>L.url)},width:"100%",height:"200px",showNavigation:!0})}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:T.map((L,R)=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"0.5rem",background:"#f9fafb",position:"relative"},children:[v.jsx("img",{src:L.url,alt:`תמונה ${R+1}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"4px",marginBottom:"0.5rem"}}),v.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:R+1}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.25rem"},children:[v.jsx("button",{type:"button",onClick:()=>j(R),disabled:R===0,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:R===0?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:R===0?"not-allowed":"pointer",flex:1},children:"↑"}),v.jsx("button",{type:"button",onClick:()=>C(R),disabled:R===T.length-1,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:R===T.length-1?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:R===T.length-1?"not-allowed":"pointer",flex:1},children:"↓"}),v.jsx("button",{type:"button",onClick:()=>q(L.id),style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",flex:1},children:"✕"})]})]},L.id))})]})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem",flexWrap:"wrap"},children:[v.jsx("button",{type:"submit",disabled:D,style:{...YV,minWidth:"120px",opacity:D?.6:1,cursor:D?"not-allowed":"pointer"},children:D?"מעלה...":n?"שמור שינויים":"הוסף מוצר"}),v.jsx("button",{type:"button",onClick:f,disabled:D,style:{...XV,minWidth:"120px",opacity:D?.6:1,cursor:D?"not-allowed":"pointer"},children:"ביטול"})]})]})]})})},P0={marginBottom:"1.5rem",width:"100%"},L0={display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"1rem"},eh={width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"16px",boxSizing:"border-box",transition:"border-color 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none"},YV={padding:"12px 20px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},XV={padding:"12px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"};var CE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},I4=Ln.createContext&&Ln.createContext(CE),KV=["attr","size","title"];function QV(n,e){if(n==null)return{};var t=ZV(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ZV(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function em(){return em=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},em.apply(this,arguments)}function T4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T4(Object(t),!0).forEach(function(r){JV(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function JV(n,e,t){return e=eq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eq(n){var e=tq(n,"string");return typeof e=="symbol"?e:e+""}function tq(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function IE(n){return n&&n.map((e,t)=>Ln.createElement(e.tag,tm({key:t},e.attr),IE(e.child)))}function cc(n){return e=>Ln.createElement(nq,em({attr:tm({},n.attr)},e),IE(n.child))}function nq(n){var e=t=>{var{attr:r,size:i,title:a}=n,o=QV(n,KV),s=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),Ln.createElement("svg",em({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:c,style:tm(tm({color:n.color||t.color},t.style),n.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Ln.createElement("title",null,a),n.children)};return I4!==void 0?Ln.createElement(I4.Consumer,null,t=>e(t)):e(CE)}function rq(n){return cc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function iq(n){return cc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function aq(n){return cc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(n)}function oq(n){return cc({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(n)}function sq(n){return cc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}function lq(n){return cc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function cq(n){return cc({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function R4(n){return cc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function uq(n){return cc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(n)}function N4(n){return cc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const fq=({item:n,onClose:e})=>{const[t,r]=ue.useState([]),[i,a]=ue.useState(!0);ue.useEffect(()=>{if(!n)return;(async()=>{a(!0);try{console.log("🔍 מחפש הזמנות פעילות עבור מוצר:",n.name,"ID:",n.id);const f=(await $n(tn(_t,"orders"))).docs.map(g=>({id:g.id,...g.data()})).filter(g=>g.status==="open");console.log("📋 כל ההזמנות הפעילות:",f.length);const d=f.filter(g=>{var x;return(x=g.items)==null?void 0:x.some(_=>_.id===n.id||_.ItemId===n.ItemId)});console.log("🎯 הזמנות שמכילות את המוצר:",d.length);const p=d.map(g=>{const m=g.items.find(x=>x.id===n.id||x.ItemId===n.ItemId);return{...g,itemQuantity:(m==null?void 0:m.quantity)||0}});p.sort((g,m)=>{var T,A;const x=((T=g.createdAt)==null?void 0:T.seconds)||0;return(((A=m.createdAt)==null?void 0:A.seconds)||0)-x}),r(p)}catch(c){console.error("❌ שגיאה בשליפת הזמנות פעילות:",c)}finally{a(!1)}})()},[n]);const o=s=>{if(!s)return"לא צוין";let c;return s.seconds?c=new Date(s.seconds*1e3):typeof s=="string"?c=new Date(s):c=s,isNaN(c.getTime())?"תאריך לא תקין":c.toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"})};return n?v.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1500,padding:"1rem"},onClick:s=>{s.target===s.currentTarget&&e()},children:[v.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"12px",width:"95%",maxWidth:"800px",maxHeight:"85vh",overflowY:"auto",padding:"0",direction:"rtl",boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},onClick:s=>s.stopPropagation(),children:[v.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1.5rem",borderRadius:"12px 12px 0 0",position:"relative"},children:[v.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",left:"1rem",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",color:"white",fontSize:"1.2rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.background="rgba(255,255,255,0.3)"},onMouseLeave:s=>{s.target.style.background="rgba(255,255,255,0.2)"},children:v.jsx(cq,{})}),v.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",textAlign:"center",paddingRight:"3rem"},children:['📋 הזמנות פעילות עבור "',n.name,'"']}),v.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,textAlign:"center",fontSize:"0.95rem"},children:["מזהה מוצר: ",n.ItemId]})]}),v.jsx("div",{style:{padding:"1.5rem"},children:i?v.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[v.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #f3f3f3",borderTop:"3px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"טוען הזמנות פעילות..."]}):t.length===0?v.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[v.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",color:"#ddd"},children:"📄"}),v.jsx("h3",{style:{color:"#666",marginBottom:"0.5rem"},children:"לא נמצאו הזמנות פעילות"}),v.jsx("p",{style:{color:"#999",margin:0},children:"המוצר הזה כרגע לא נמצא באף הזמנה פעילה"})]}):v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center",border:"1px solid #e9ecef"},children:v.jsxs("p",{style:{margin:0,color:"#495057",fontSize:"1rem",fontWeight:"500"},children:["📊 נמצא ב-",t.length," הזמנ",t.length===1?"ה":"ות"," פעיל",t.length===1?"ה":"ות",v.jsx("br",{}),v.jsxs("span",{style:{fontSize:"0.9rem",color:"#6c757d"},children:['סה"כ כמות מושאלת: ',t.reduce((s,c)=>s+c.itemQuantity,0)]})]})}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:window.innerWidth<=768?"0 0.5rem":"0"},children:t.map((s,c)=>v.jsxs("div",{style:{border:"1px solid #e9ecef",borderRadius:"10px",padding:"1.25rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:f=>{f.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)",f.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:f=>{f.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",f.currentTarget.style.transform="translateY(0)"},children:[v.jsxs("div",{style:{position:"absolute",top:"0.75rem",left:"0.75rem",background:"#667eea",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold"},children:["#",s.simpleId||s.id.slice(0,6)]}),v.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem",marginBottom:"1rem"},children:v.jsx("div",{style:{background:"#28a745",color:"white",padding:window.innerWidth<=768?"0.3rem 0.6rem":"0.4rem 0.8rem",borderRadius:"15px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold",textAlign:"center",lineHeight:"1.2",wordBreak:"break-word",maxWidth:window.innerWidth<=768?"180px":"220px",margin:"0 auto",display:"inline-block"},children:window.innerWidth<=768?v.jsxs(v.Fragment,{children:["כמות: ",s.itemQuantity]}):v.jsxs(v.Fragment,{children:["מוצר: ",n.name,v.jsx("br",{}),"כמות: ",s.itemQuantity]})})}),v.jsxs("div",{style:{marginBottom:"1rem",textAlign:"center"},children:[v.jsxs("h4",{style:{margin:"0 0 0.75rem 0",color:"#333",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[v.jsx(N4,{color:"#667eea"}),s.clientName]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"#555"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(sq,{color:"#28a745",size:14}),v.jsx("span",{children:s.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(oq,{color:"#dc3545",size:14}),v.jsx("span",{children:s.address})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(N4,{color:"#6c757d",size:14}),v.jsxs("span",{children:["מתנדבת: ",s.volunteerName]})]})]})]}),v.jsxs("div",{style:{background:"#f8f9fa",padding:"0.75rem",borderRadius:"6px",border:"1px solid #e9ecef",textAlign:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500",color:"#495057"},children:[v.jsx(rq,{color:"#667eea",size:14}),"תאריכי השאלה"]}),v.jsxs("div",{style:{fontSize:"0.85rem",color:"#6c757d",lineHeight:"1.4"},children:[v.jsxs("div",{children:["📤 לקיחה: ",o(s.pickupDate)]}),v.jsxs("div",{children:["🎉 אירוע: ",o(s.eventDate)]}),v.jsxs("div",{children:["📥 החזרה: ",o(s.returnDate)]}),s.eventType&&v.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:"500",color:"#495057"},children:["🎊 סוג אירוע: ",s.eventType]})]})]})]},s.id))})]})}),v.jsx("div",{style:{background:"#f8f9fa",padding:"1rem 1.5rem",borderRadius:"0 0 12px 12px",borderTop:"1px solid #e9ecef",textAlign:"center"},children:v.jsx("button",{onClick:e,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"25px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.transform="translateY(-1px)",s.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)"},onMouseLeave:s=>{s.target.style.transform="translateY(0)",s.target.style.boxShadow="none"},children:"סגור"})})]}),v.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):null},D4=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),x=Math.min(a,m+p-1);x-m+1<p&&(m=Math.max(1,x-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let T=m;T<=x;T++)_.push(T);return x<a&&(x<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return v.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[v.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",d," מתוך ",e," מוצרים"]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[v.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(M1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:v.jsx(v5,{size:o?16:20})},`dots-${g}`);const m=p===n;return v.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),v.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(L1,{size:o?16:20})})]})]})},dq=()=>{const[n,e]=ue.useState(""),[t,r]=ue.useState(""),[i,a]=ue.useState([]),[o,s]=ue.useState([]),[c,f]=ue.useState(""),[d,p]=ue.useState(""),[g,m]=ue.useState(null),[x,_]=ue.useState(""),[T,A]=ue.useState(!1),[D,U]=ue.useState(!1),[H,X]=ue.useState(null),[q,j]=ue.useState(""),[C,N]=ue.useState(""),[L,R]=ue.useState(1),[I,P]=ue.useState(1),[M,K]=ue.useState(window.innerWidth<=768),[F,z]=ue.useState(!1),[ee,ae]=ue.useState(null),{user:Q}=So(),he=(Q==null?void 0:Q.username)||"משתמש לא ידוע",G=ue.useRef(null),$=M?12:20,Z=M?12:20;ue.useEffect(()=>{const Te=()=>{const Ke=window.innerWidth<=768;Ke!==M&&(K(Ke),R(1),P(1))};return window.addEventListener("resize",Te),()=>window.removeEventListener("resize",Te)},[M]),ue.useEffect(()=>{R(1)},[c]),ue.useEffect(()=>{P(1)},[d]),ue.useEffect(()=>{const Te=document.createElement("style");return Te.innerHTML=`
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] { -moz-appearance: textfield; }
      
      /* רספונסיביות משופרת */
      .products-grid-mobile {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.2rem;
        padding: 0;
      }
      
      .product-card-mobile {
        min-height: 380px;
        padding: 1rem;
      }
      
      .product-card-mobile img {
        height: 140px;
      }
      
      .product-card-mobile h3 {
        font-size: 1rem;
        margin: 0.5rem 0;
      }
      
      .product-card-mobile p {
        font-size: 0.875rem;
        margin: 0.25rem 0;
      }
      
      .product-card-mobile .button-group {
        flex-direction: row;
        gap: 0.5rem;
        width: 100%;
      }
      
      .product-card-mobile button {
        font-size: 0.8rem;
        padding: 6px 10px;
        flex: 1;
      }
      
      /* מובייל בלבד */
      @media (max-width: 768px) {
        .products-grid-mobile {
          grid-template-columns: 1fr 1fr !important;
          gap: 0.75rem !important;
          padding: 0 0.5rem;
        }
        
        .product-card-mobile {
          min-height: 320px !important;
          padding: 0.75rem !important;
        }
        
        .product-card-mobile img {
          height: 100px !important;
        }
        
        .product-card-mobile h3 {
          font-size: 0.9rem !important;
          margin: 0.5rem 0 !important;
        }
        
        .product-card-mobile p {
          font-size: 0.8rem !important;
          margin: 0.25rem 0 !important;
        }
        
        .product-card-mobile .button-group {
          flex-direction: column !important;
          gap: 0.3rem !important;
        }
        
        .product-card-mobile button {
          font-size: 0.75rem !important;
          padding: 4px 8px !important;
          width: 100% !important;
        }
      }
    `,document.head.appendChild(Te),()=>document.head.removeChild(Te)},[]);const re=async()=>{const Ke=(await $n(tn(_t,"orders"))).docs.map(et=>et.data()).filter(et=>et.status==="open"),Ge=new Set;Ke.forEach(et=>{var Ct;(Ct=et.items)==null||Ct.forEach(yt=>{Ge.add(yt.id)})});const ft=(await $n(tn(_t,"items"))).docs.filter(et=>et.data().isDeleted!==!0).map(et=>{const Ct=et.data(),yt=y1(Ct);return{id:et.id,...yt,inUse:Ge.has(et.id)}});a(ft)},de=async()=>{const Ke=(await $n(tn(_t,"deletedItems"))).docs.map(Ge=>{const lt=Ge.data();return{id:Ge.id,...y1(lt)}});s(Ke)};ue.useEffect(()=>{const Te=async()=>{try{console.log("🔄 בדיקת migration למבנה תמונות חדש...");const Ge=await WV(_t,Bi,Yn,$n,tn);console.log("📊 תוצאות migration:",Ge)}catch{console.log("⚠️ Migration כבר רץ או שאין צורך בו")}};localStorage.getItem("imagesMigrationComplete")?(re(),de()):Te().then(()=>{localStorage.setItem("imagesMigrationComplete","true"),re(),de()})},[]),ue.useEffect(()=>{const Te=Ge=>{D&&G.current&&!G.current.contains(Ge.target)&&U(!1)},Ke=Ge=>{Ge.key==="Escape"&&U(!1)};return document.addEventListener("mousedown",Te),document.addEventListener("keydown",Ke),()=>{document.removeEventListener("mousedown",Te),document.removeEventListener("keydown",Ke)}},[D]);const xe=i.filter(Te=>Te.name.toLowerCase().includes(c.toLowerCase())),we=o.filter(Te=>Te.name.toLowerCase().includes(d.toLowerCase())),Ee=(L-1)*$,Ve=Ee+$,He=xe.slice(Ee,Ve),it=(I-1)*Z,ct=it+Z,vt=we.slice(it,ct),ke=Te=>{console.log("🔍 פותח מודל הזמנות פעילות עבור:",Te.name),ae(Te),z(!0)},ve=async Te=>{if(window.confirm("האם את/ה בטוח/ה שברצונך למחוק את המוצר?"))try{await uU(Te,he),xn.success("המוצר הוסר מהרשימה."),re(),de();const Ke=xe.length-1,Ge=Math.ceil(Ke/$);L>Ge&&Ge>0&&R(Ge)}catch{xn.error("שגיאה במחיקת המוצר")}},dt=async Te=>{if(window.confirm("האם ברצונך להשיב את המוצר למלאי?"))try{await fU(Te,he),xn.success("המוצר הושב למלאי בהצלחה."),re(),de();const Ke=we.length-1,Ge=Math.ceil(Ke/Z);I>Ge&&Ge>0&&P(Ge)}catch{xn.error("שגיאה בהחזרת המוצר")}},ot=async(Te,Ke=null)=>{var Ge,lt,ft;Te.preventDefault();try{const et=Ke||{name:n,quantity:parseInt(t),images:x?[x]:[],imageUrl:x,publicComment:q,internalComment:C},Ct=ul(tn(_t,"items"),nu("name","==",et.name.trim())),yt=await $n(Ct),Nt=(await $n(tn(_t,"items"))).docs.map(It=>It.data().ItemId).filter(It=>typeof It=="number").sort((It,ut)=>ut-It),xt=Nt.length>0?Nt[0]+1:1;if(H)await Bi(Yn(_t,"items",H.id),{name:et.name,quantity:parseInt(et.quantity),images:et.images||[],imageUrl:((Ge=et.images)==null?void 0:Ge[0])||null,publicComment:et.publicComment||"",internalComment:et.internalComment||"",updatedBy:he,updatedAt:_r()}),xn.success("המוצר עודכן בהצלחה");else if(yt.empty)await pd(tn(_t,"items"),{name:et.name,quantity:parseInt(et.quantity),images:et.images||[],imageUrl:((lt=et.images)==null?void 0:lt[0])||null,publicComment:et.publicComment||"",internalComment:et.internalComment||"",createdBy:he,updatedBy:he,createdAt:_r(),updatedAt:_r(),ItemId:xt}),xn.success(`המוצר "${et.name}" נוסף בהצלחה עם ${((ft=et.images)==null?void 0:ft.length)||0} תמונות`);else{const It=yt.docs[0].data();LV.confirmAlert({title:"המוצר כבר קיים",message:`המוצר "${et.name}" כבר קיים בכמות ${It.quantity}.
האם להוסיף ${et.quantity}?`,buttons:[{label:"כן",onClick:async()=>{var ut;await pd(tn(_t,"items"),{name:et.name,quantity:parseInt(et.quantity),images:et.images||[],imageUrl:((ut=et.images)==null?void 0:ut[0])||null,publicComment:et.publicComment||"",internalComment:et.internalComment||"",createdBy:he,updatedBy:he,createdAt:_r(),updatedAt:_r(),ItemId:xt}),xn.success("הכמות עודכנה בהצלחה"),re(),de()}},{label:"לא",onClick:()=>xn.info("בוטל")}]});return}e(""),r(""),m(null),_(""),j(""),N(""),A(!1),X(null),re(),de()}catch(et){console.error("שגיאה בהוספת המוצר:",et),xn.error("הוספת המוצר נכשלה")}};return v.jsxs("div",{className:"page-container",style:{padding:"1rem",direction:"rtl"},children:[v.jsxs("div",{style:{width:"100%"},children:[v.jsx("h2",{children:"ניהול מוצרים"}),v.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[v.jsxs("button",{onClick:()=>{X(null),e(""),r(""),_(""),m(null),A(!0),j(""),N("")},className:"btn-primary",style:{backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[v.jsx(lq,{size:14})," הוספת מוצר"]}),v.jsxs("button",{onClick:()=>U(!0),className:"btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[v.jsx(R4,{size:14})," מוצרים שנמחקו"]})]}),v.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצר...",value:c,onChange:Te=>f(Te.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",marginBottom:"1rem",boxSizing:"border-box"}}),c&&v.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9"},children:v.jsxs("p",{style:{margin:0,color:"#0369a1"},children:["🔍 נמצאו ",xe.length,' מוצרים עבור "',c,'"']})}),v.jsx("div",{className:"products-grid-mobile",children:He.length===0?v.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:c?`לא נמצאו מוצרים לחיפוש "${c}"`:"לא נמצא מוצרים במלאי."}):He.map(Te=>v.jsxs("div",{className:"product-card product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",transition:"transform 0.2s",boxSizing:"border-box"},children:[v.jsx(x1,{item:Te,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),v.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1rem"},children:Te.name}),v.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",Te.quantity]}),Te.internalComment&&v.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"0.25rem",margin:"0.25rem 0"},children:["📌 ",Te.internalComment]}),v.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",margin:"0.25rem 0"},children:["מזהה מוצר: ",Te.ItemId]}),Te.inUse&&v.jsx("p",{style:{color:"#d97706",fontWeight:"bold",fontSize:"0.85rem",margin:"0.25rem 0"},children:"🕐 מוצר זה נמצא בהזמנות פעילות"}),v.jsxs("div",{className:"button-group",style:{display:"flex",gap:"0.4rem",marginTop:"auto",width:"100%",flexDirection:"column"},children:[Te.inUse&&v.jsxs("button",{onClick:()=>ke(Te),style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:M?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:M?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",width:"100%",minHeight:M?"28px":"32px"},children:[v.jsx(aq,{size:M?12:14})," ראה הזמנות"]}),v.jsxs("div",{style:{display:"flex",gap:"0.4rem",width:"100%"},children:[v.jsxs("button",{onClick:()=>{X(Te),e(Te.name),r(Te.quantity.toString()),_(HV(Te)||""),m(null),A(!0),j(Te.publicComment||""),N(Te.internalComment||"")},style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:M?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:M?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:M?"28px":"32px"},children:[v.jsx(iq,{size:M?12:14})," עריכה"]}),v.jsxs("button",{onClick:()=>ve(Te.id),style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:M?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:M?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:M?"28px":"32px"},children:[v.jsx(R4,{size:M?12:14})," מחיקה"]})]})]})]},Te.id))}),v.jsx(D4,{currentPage:L,totalItems:xe.length,itemsPerPage:$,onPageChange:R})]}),D&&v.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},children:v.jsxs("div",{className:"modal-content",ref:G,style:{position:"relative",backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80%",overflowY:"auto",padding:"2rem",direction:"rtl"},children:[v.jsx("h2",{children:"מוצרים שנמחקו"}),v.jsx("button",{onClick:()=>U(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"×"}),v.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצרים שנמחקו...",value:d,onChange:Te=>p(Te.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",margin:"1rem 0",boxSizing:"border-box"}}),d&&v.jsx("div",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fca5a5"},children:v.jsxs("p",{style:{margin:0,color:"#dc2626"},children:["🔍 נמצאו ",we.length,' מוצרים שנמחקו עבור "',d,'"']})}),v.jsx("div",{className:"products-grid-mobile",children:vt.length===0?v.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:d?`לא נמצאו מוצרים שנמחקו לחיפוש "${d}"`:"אין פריטים שנמחקו."}):vt.map(Te=>v.jsxs("div",{className:"product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",boxSizing:"border-box"},children:[v.jsx(x1,{item:Te,width:"100%",height:"120px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),v.jsx("h3",{style:{margin:"0.5rem 0"},children:Te.name}),v.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",Te.quantity]}),v.jsxs("button",{onClick:()=>dt(Te.id),style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",marginTop:"auto"},children:[v.jsx(uq,{size:14})," השבה"]})]},Te.id))}),v.jsx(D4,{currentPage:I,totalItems:we.length,itemsPerPage:Z,onPageChange:P})]})}),T&&v.jsx($V,{editingItem:H,name:n,quantity:t,imageUrl:x,imageFile:g,publicComment:q,internalComment:C,onNameChange:Te=>e(Te.target.value.trimStart()),onQuantityChange:Te=>r(Te.target.value.trimStart()),onImageUrlChange:Te=>_(Te.target.value),onImageFileChange:Te=>m(Te.target.files[0]),onPublicCommentChange:Te=>j(Te.target.value),onInternalCommentChange:Te=>N(Te.target.value),onCancel:()=>A(!1),onSubmit:ot}),F&&v.jsx(fq,{item:ee,onClose:()=>{z(!1),ae(null)}}),v.jsx(NV,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},hq=()=>{const{user:n}=So(),[e,t]=ue.useState([]),[r,i]=ue.useState(""),[a,o]=ue.useState(null);ue.useEffect(()=>{(async()=>{const m=tn(_t,"users"),_=(await $n(m)).docs.map(T=>({id:T.id,...T.data()}));t(_)})()},[]),ue.useEffect(()=>{(async()=>{try{const m=Yn(_t,"settings","onlineOrdering"),x=await Nh(m);x.exists()&&o(x.data().enabled)}catch(m){console.error("שגיאה בטעינת ההגדרה:",m)}})()},[]);const s=async(g,m)=>{const x=Yn(_t,"users",g);await Bi(x,{role:m}),t(e.map(_=>_.id===g?{..._,role:m}:_))},c=async()=>{try{const g=!a;await Bi(Yn(_t,"settings","onlineOrdering"),{enabled:g}),o(g)}catch(g){alert("שגיאה בעדכון ההגדרה: "+g.message)}},f={container:{padding:"1rem",direction:"rtl",maxWidth:"100%",overflow:"hidden"},header:{fontSize:"1.8rem",marginBottom:"2rem",textAlign:"center",color:"#333",fontWeight:"600"},toggleBox:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"2rem",backgroundColor:"#f8f9fa",padding:"16px 24px",borderRadius:"15px",border:"2px solid #e9ecef",maxWidth:"400px",margin:"0 auto 2rem auto",boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},toggleSwitch:{width:"50px",height:"28px",borderRadius:"50px",backgroundColor:a?"#4caf50":"#e74c3c",position:"relative",cursor:"pointer",transition:"0.3s",flexShrink:0},toggleCircle:{position:"absolute",top:"3px",left:a?"25px":"3px",width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"white",transition:"0.3s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},searchBox:{padding:"12px 16px",width:"100%",maxWidth:"500px",borderRadius:"10px",border:"2px solid #ddd",fontSize:"16px",marginBottom:"2rem",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s ease",display:"block",margin:"0 auto 2rem auto"},tableContainer:{overflowX:"auto",marginTop:"1rem",borderRadius:"12px",border:"1px solid #ddd",maxWidth:"1200px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},table:{width:"100%",borderCollapse:"collapse",minWidth:"600px",backgroundColor:"white"},th:{border:"1px solid #ddd",padding:"12px 8px",backgroundColor:"#f8f9fa",fontWeight:"600",fontSize:"0.9rem",textAlign:"center",whiteSpace:"nowrap"},td:{border:"1px solid #ddd",padding:"12px 8px",textAlign:"center",fontSize:"0.85rem",verticalAlign:"middle"},button:{padding:"8px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"100px",transition:"opacity 0.2s ease"},promoteBtn:{backgroundColor:"#28a745",color:"white"},demoteBtn:{backgroundColor:"#dc3545",color:"white"}};if(!n||n.role!=="MainAdmin")return v.jsx("div",{style:{padding:"2rem",textAlign:"center",direction:"rtl"},children:v.jsx("p",{children:"אין לך גישה לעמוד זה"})});const d=e.filter(g=>g.username&&g.username.toLowerCase().includes(r.toLowerCase())),p=({user:g})=>v.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[v.jsx("h4",{style:{margin:0,color:"#333",fontSize:"1.1rem"},children:g.username}),v.jsx("span",{style:{backgroundColor:g.role==="MainAdmin"?"#6f42c1":g.role==="GmachAdmin"?"#17a2b8":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"500"},children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role})]}),v.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"0.9rem",wordBreak:"break-all"},children:["📧 ",g.email]}),g.role!=="MainAdmin"&&v.jsx("div",{style:{marginTop:"1rem"},children:g.role==="User"?v.jsx("button",{style:{...f.button,...f.promoteBtn,width:"100%"},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):v.jsx("button",{style:{...f.button,...f.demoteBtn,width:"100%"},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})})]});return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-table {
              display: none !important;
            }
            .mobile-cards {
              display: block !important;
            }
            .container-mobile {
              padding: 1rem !important;
            }
            .header-mobile {
              font-size: 1.5rem !important;
              margin-bottom: 1.5rem !important;
            }
            .toggle-mobile {
              max-width: 100% !important;
              margin: 0 0 1.5rem 0 !important;
              padding: 12px 16px !important;
            }
            .search-mobile {
              margin: 0 0 1.5rem 0 !important;
              max-width: 100% !important;
            }
          }
          
          @media (min-width: 769px) {
            .desktop-table {
              display: table !important;
            }
            .mobile-cards {
              display: none !important;
            }
            .container-desktop {
              padding: 2rem !important;
              max-width: 1400px !important;
              margin: 0 auto !important;
            }
          }
          
          input:focus {
            border-color: #1976d2 !important;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
          }
          
          button:hover {
            opacity: 0.9;
          }
          
          button:active {
            transform: translateY(1px);
          }
        `}),v.jsxs("div",{style:f.container,className:"container-mobile container-desktop",children:[v.jsx("h2",{style:f.header,className:"header-mobile",children:"ניהול משתמשים"}),a!==null&&v.jsxs("div",{style:f.toggleBox,className:"toggle-mobile",children:[v.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"הזמנות דרך האתר:"}),v.jsx("div",{style:f.toggleSwitch,onClick:c,children:v.jsx("div",{style:f.toggleCircle})})]}),v.jsx("input",{type:"text",placeholder:"חיפוש משתמש...",value:r,onChange:g=>i(g.target.value),style:f.searchBox,className:"search-mobile",dir:"rtl"}),v.jsx("div",{style:f.tableContainer,className:"desktop-table",children:v.jsxs("table",{style:f.table,children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:f.th,children:"שם משתמש"}),v.jsx("th",{style:f.th,children:"אימייל"}),v.jsx("th",{style:f.th,children:"הרשאה"}),v.jsx("th",{style:f.th,children:"פעולה"})]})}),v.jsx("tbody",{children:d.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"לא נמצאו משתמשים תואמים"})}):d.map(g=>v.jsxs("tr",{children:[v.jsx("td",{style:f.td,children:g.username}),v.jsx("td",{style:f.td,children:g.email}),v.jsx("td",{style:f.td,children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role}),v.jsxs("td",{style:f.td,children:[g.role!=="MainAdmin"&&(g.role==="User"?v.jsx("button",{style:{...f.button,...f.promoteBtn},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):v.jsx("button",{style:{...f.button,...f.demoteBtn},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})),g.role==="MainAdmin"&&v.jsx("span",{style:{color:"#999",fontSize:"0.8rem"},children:"---"})]})]},g.id))})]})}),v.jsx("div",{className:"mobile-cards",style:{display:"none"},children:d.length===0?v.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",backgroundColor:"white",borderRadius:"12px",border:"1px solid #ddd"},children:"לא נמצאו משתמשים תואמים"}):d.map(g=>v.jsx(p,{user:g},g.id))})]})]})},pq=({item:n,isOpen:e,onClose:t})=>!e||!n?null:v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",direction:"rtl"},onClick:t,children:v.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative",padding:"1.5rem",boxShadow:"0 20px 40px rgba(0,0,0,0.3)"},onClick:r=>r.stopPropagation(),children:[v.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",left:"1rem",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1001,transition:"background 0.2s ease"},onMouseEnter:r=>r.target.style.background="#e5e7eb",onMouseLeave:r=>r.target.style.background="#f3f4f6",children:v.jsx(uu,{size:20})}),v.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"2rem",alignItems:"flex-start"},children:[v.jsx("div",{style:{flex:window.innerWidth<=768?"none":"1",width:window.innerWidth<=768?"100%":"400px"},children:v.jsx(x1,{item:n,width:"100%",height:window.innerWidth<=768?"300px":"400px",showNavigation:!0,style:{borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})}),v.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[v.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",textAlign:"center"},children:n.name}),v.jsx("div",{style:{backgroundColor:"#f8fafc",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:v.jsxs("p",{style:{fontSize:"1.1rem",color:"#4b5563",margin:0,textAlign:"center"},children:[v.jsx("strong",{children:"מזהה מוצר:"})," ",n.ItemId]})}),n.publicComment&&v.jsxs("div",{style:{backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[v.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#1e40af",fontSize:"1rem"},children:"📝 הערות"}),v.jsx("p",{style:{margin:0,color:"#1e3a8a",fontSize:"1rem"},children:n.publicComment})]})]})]})]})}),gq=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),x=Math.min(a,m+p-1);x-m+1<p&&(m=Math.max(1,x-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let T=m;T<=x;T++)_.push(T);return x<a&&(x<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return v.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[v.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",d," מתוך ",e," מוצרים"]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[v.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(M1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:v.jsx(v5,{size:o?16:20})},`dots-${g}`);const m=p===n;return v.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),v.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(L1,{size:o?16:20})})]})]})},mq=()=>{const[n,e]=ue.useState([]),[t,r]=ue.useState(""),[i,a]=ue.useState(!0),[o,s]=ue.useState(null),[c,f]=ue.useState(!1),[d,p]=ue.useState(1),[g,m]=ue.useState(window.innerWidth<=768),x=g?12:20;ue.useEffect(()=>{const X=()=>{const q=window.innerWidth<=768;q!==g&&(m(q),p(1))};return window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[g]),ue.useEffect(()=>{p(1)},[t]),ue.useEffect(()=>{const X=tn(_t,"items"),q=P1(X,j=>{const C=j.docs.map(N=>{const L=N.data(),R=y1(L);return{id:N.id,...R}}).filter(N=>N.isDeleted!==!0);e(C),a(!1)});return()=>q()},[]);const _=(X,q)=>{q.target.closest("button")||q.target.closest("[data-navigation]")||(s(X),f(!0))},T=()=>{f(!1),s(null)};if(i)return v.jsxs("div",{style:{padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[v.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),v.jsx("h2",{children:"טוען קטלוג"}),v.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]});const A=n.filter(X=>X.name.toLowerCase().includes(t.toLowerCase())),D=(d-1)*x,U=D+x,H=A.slice(D,U);return v.jsxs("div",{style:{padding:"2rem",direction:"rtl",textAlign:"right",paddingLeft:"1rem",paddingRight:"1rem"},children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"2rem",color:"#1f2937"},children:"קטלוג מוצרים"}),v.jsx("input",{type:"text",placeholder:"חיפוש פריט",value:t,onChange:X=>r(X.target.value),dir:"rtl",style:{padding:"12px 16px",width:"100%",marginBottom:"1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:X=>X.target.style.borderColor="#3b82f6",onBlur:X=>X.target.style.borderColor="#e5e7eb"}),t&&v.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #0ea5e9",textAlign:"center"},children:v.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"1rem"},children:["🔍 נמצאו ",A.length,' מוצרים עבור "',t,'"']})}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:H.length===0?v.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",marginTop:"3rem",padding:"2rem"},children:t?v.jsxs(v.Fragment,{children:[v.jsxs("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:['לא נמצאו פריטים עבור "',t,'"']}),v.jsx("p",{style:{color:"#9ca3af"},children:"נסה לחפש במילות מפתח אחרות"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:"לא נמצאו פריטים"}),v.jsx("p",{style:{color:"#9ca3af"},children:"אנא נסה לחפש שוב או צור קשר עם המנהלים"})]})}):H.map(X=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",padding:"0.8rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"all 0.3s ease-in-out",minHeight:"250px",maxWidth:"100%",cursor:"pointer"},onMouseEnter:q=>{q.currentTarget.style.transform="scale(1.05) translateY(-8px)",q.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.2)",q.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:q=>{q.currentTarget.style.transform="scale(1) translateY(0)",q.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",q.currentTarget.style.borderColor="#e5e7eb"},onClick:q=>_(X,q),children:[v.jsx(x1,{item:X,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem",borderRadius:"4px"}}),v.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[v.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"1.1rem",lineHeight:"1.3",textAlign:"center",color:"#1f2937",fontWeight:"700"},children:X.name}),X.publicComment&&v.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",margin:"0.3rem 0",fontStyle:"italic",background:"#f9fafb",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:["📝 ",X.publicComment]}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",textAlign:"center",marginTop:"auto",paddingTop:"0.5rem"},children:["מזהה: ",X.ItemId]})]})]},X.ItemId))}),v.jsx(gq,{currentPage:d,totalItems:A.length,itemsPerPage:x,onPageChange:p}),v.jsx(pq,{item:o,isOpen:c,onClose:T}),v.jsx("style",{jsx:!0,children:`
        @media (max-width: 768px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.8rem !important;
          }
        }
        
        @media (max-width: 480px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
          }
        }
      `})]})},vq="modulepreload",yq=function(n){return"/"+n},O4={},Xy=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(f=>{if(f=yq(f),f in O4)return;O4[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":vq,d||(g.as="script"),g.crossOrigin="",g.href=f,c&&g.setAttribute("nonce",c),document.head.appendChild(g),d)return new Promise((m,x)=>{g.addEventListener("load",m),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function ur(n){"@babel/helpers - typeof";return ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(n)}var Ba=Uint8Array,Ko=Uint16Array,O5=Int32Array,Qm=new Ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Zm=new Ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ky=new Ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),TE=function(n,e){for(var t=new Ko(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new O5(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},RE=TE(Qm,2),NE=RE.b,Qy=RE.r;NE[28]=258,Qy[258]=28;var DE=TE(Zm,0),xq=DE.b,k4=DE.r,Zy=new Ko(32768);for(var Dr=0;Dr<32768;++Dr){var Ku=(Dr&43690)>>1|(Dr&21845)<<1;Ku=(Ku&52428)>>2|(Ku&13107)<<2,Ku=(Ku&61680)>>4|(Ku&3855)<<4,Zy[Dr]=((Ku&65280)>>8|(Ku&255)<<8)>>1}var nc=function(n,e,t){for(var r=n.length,i=0,a=new Ko(e);i<r;++i)n[i]&&++a[n[i]-1];var o=new Ko(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(t){s=new Ko(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],d=e-n[i],p=o[n[i]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)s[Zy[p]>>c]=f}else for(s=new Ko(r),i=0;i<r;++i)n[i]&&(s[i]=Zy[o[n[i]-1]++]>>15-n[i]);return s},wf=new Ba(288);for(var Dr=0;Dr<144;++Dr)wf[Dr]=8;for(var Dr=144;Dr<256;++Dr)wf[Dr]=9;for(var Dr=256;Dr<280;++Dr)wf[Dr]=7;for(var Dr=280;Dr<288;++Dr)wf[Dr]=8;var b1=new Ba(32);for(var Dr=0;Dr<32;++Dr)b1[Dr]=5;var bq=nc(wf,9,0),wq=nc(wf,9,1),_q=nc(b1,5,0),Aq=nc(b1,5,1),Vv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},tl=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},qv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},k5=function(n){return(n+7)/8|0},OE=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ba(n.subarray(e,t))},Sq=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],al=function(n,e,t){var r=new Error(e||Sq[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,al),!t)throw r;return r},Eq=function(n,e,t,r){var i=n.length,a=0;if(!i||e.f&&!e.l)return t||new Ba(0);var o=!t,s=o||e.i!=2,c=e.i;o&&(t=new Ba(i*3));var f=function(He){var it=t.length;if(He>it){var ct=new Ba(Math.max(it*2,He));ct.set(t),t=ct}},d=e.f||0,p=e.p||0,g=e.b||0,m=e.l,x=e.d,_=e.m,T=e.n,A=i*8;do{if(!m){d=tl(n,p,1);var D=tl(n,p+1,3);if(p+=3,D)if(D==1)m=wq,x=Aq,_=9,T=5;else if(D==2){var q=tl(n,p,31)+257,j=tl(n,p+10,15)+4,C=q+tl(n,p+5,31)+1;p+=14;for(var N=new Ba(C),L=new Ba(19),R=0;R<j;++R)L[Ky[R]]=tl(n,p+R*3,7);p+=j*3;for(var I=Vv(L),P=(1<<I)-1,M=nc(L,I,1),R=0;R<C;){var K=M[tl(n,p,P)];p+=K&15;var U=K>>4;if(U<16)N[R++]=U;else{var F=0,z=0;for(U==16?(z=3+tl(n,p,3),p+=2,F=N[R-1]):U==17?(z=3+tl(n,p,7),p+=3):U==18&&(z=11+tl(n,p,127),p+=7);z--;)N[R++]=F}}var ee=N.subarray(0,q),ae=N.subarray(q);_=Vv(ee),T=Vv(ae),m=nc(ee,_,1),x=nc(ae,T,1)}else al(1);else{var U=k5(p)+4,H=n[U-4]|n[U-3]<<8,X=U+H;if(X>i){c&&al(0);break}s&&f(g+H),t.set(n.subarray(U,X),g),e.b=g+=H,e.p=p=X*8,e.f=d;continue}if(p>A){c&&al(0);break}}s&&f(g+131072);for(var Q=(1<<_)-1,he=(1<<T)-1,G=p;;G=p){var F=m[qv(n,p)&Q],$=F>>4;if(p+=F&15,p>A){c&&al(0);break}if(F||al(2),$<256)t[g++]=$;else if($==256){G=p,m=null;break}else{var Z=$-254;if($>264){var R=$-257,re=Qm[R];Z=tl(n,p,(1<<re)-1)+NE[R],p+=re}var de=x[qv(n,p)&he],xe=de>>4;de||al(3),p+=de&15;var ae=xq[xe];if(xe>3){var re=Zm[xe];ae+=qv(n,p)&(1<<re)-1,p+=re}if(p>A){c&&al(0);break}s&&f(g+131072);var we=g+Z;if(g<ae){var Ee=a-ae,Ve=Math.min(ae,we);for(Ee+g<0&&al(3);g<Ve;++g)t[g]=r[Ee+g]}for(;g<we;++g)t[g]=t[g-ae]}}e.l=m,e.p=G,e.b=g,e.f=d,m&&(d=1,e.m=_,e.d=x,e.n=T)}while(!d);return g!=t.length&&o?OE(t,0,g):t.subarray(0,g)},Vc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},M0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Hv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:PE,l:0};if(i==1){var o=new Ba(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(X,q){return X.f-q.f}),t.push({s:-1,f:25001});var s=t[0],c=t[1],f=0,d=1,p=2;for(t[0]={s:-1,f:s.f+c.f,l:s,r:c};d!=i-1;)s=t[t[f].f<t[p].f?f++:p++],c=t[f!=d&&t[f].f<t[p].f?f++:p++],t[d++]={s:-1,f:s.f+c.f,l:s,r:c};for(var g=a[0].s,r=1;r<i;++r)a[r].s>g&&(g=a[r].s);var m=new Ko(g+1),x=Jy(t[d-1],m,0);if(x>e){var r=0,_=0,T=x-e,A=1<<T;for(a.sort(function(q,j){return m[j.s]-m[q.s]||q.f-j.f});r<i;++r){var D=a[r].s;if(m[D]>e)_+=A-(1<<x-m[D]),m[D]=e;else break}for(_>>=T;_>0;){var U=a[r].s;m[U]<e?_-=1<<e-m[U]++-1:++r}for(;r>=0&&_;--r){var H=a[r].s;m[H]==e&&(--m[H],++_)}x=e}return{t:new Ba(m),l:x}},Jy=function(n,e,t){return n.s==-1?Math.max(Jy(n.l,e,t+1),Jy(n.r,e,t+1)):e[n.s]=t},P4=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ko(++e),r=0,i=n[0],a=1,o=function(c){t[r++]=c},s=1;s<=e;++s)if(n[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=n[s]}return{c:t.subarray(0,r),n:e}},j0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},kE=function(n,e,t){var r=t.length,i=k5(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},L4=function(n,e,t,r,i,a,o,s,c,f,d){Vc(e,d++,t),++i[256];for(var p=Hv(i,15),g=p.t,m=p.l,x=Hv(a,15),_=x.t,T=x.l,A=P4(g),D=A.c,U=A.n,H=P4(_),X=H.c,q=H.n,j=new Ko(19),C=0;C<D.length;++C)++j[D[C]&31];for(var C=0;C<X.length;++C)++j[X[C]&31];for(var N=Hv(j,7),L=N.t,R=N.l,I=19;I>4&&!L[Ky[I-1]];--I);var P=f+5<<3,M=j0(i,wf)+j0(a,b1)+o,K=j0(i,g)+j0(a,_)+o+14+3*I+j0(j,L)+2*j[16]+3*j[17]+7*j[18];if(c>=0&&P<=M&&P<=K)return kE(e,d,n.subarray(c,c+f));var F,z,ee,ae;if(Vc(e,d,1+(K<M)),d+=2,K<M){F=nc(g,m,0),z=g,ee=nc(_,T,0),ae=_;var Q=nc(L,R,0);Vc(e,d,U-257),Vc(e,d+5,q-1),Vc(e,d+10,I-4),d+=14;for(var C=0;C<I;++C)Vc(e,d+3*C,L[Ky[C]]);d+=3*I;for(var he=[D,X],G=0;G<2;++G)for(var $=he[G],C=0;C<$.length;++C){var Z=$[C]&31;Vc(e,d,Q[Z]),d+=L[Z],Z>15&&(Vc(e,d,$[C]>>5&127),d+=$[C]>>12)}}else F=bq,z=wf,ee=_q,ae=b1;for(var C=0;C<s;++C){var re=r[C];if(re>255){var Z=re>>18&31;M0(e,d,F[Z+257]),d+=z[Z+257],Z>7&&(Vc(e,d,re>>23&31),d+=Qm[Z]);var de=re&31;M0(e,d,ee[de]),d+=ae[de],de>3&&(M0(e,d,re>>5&8191),d+=Zm[de])}else M0(e,d,F[re]),d+=z[re]}return M0(e,d,F[256]),d+z[256]},Cq=new O5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),PE=new Ba(0),Iq=function(n,e,t,r,i,a){var o=a.z||n.length,s=new Ba(r+o+5*(1+Math.ceil(o/7e3))+i),c=s.subarray(r,s.length-i),f=a.l,d=(a.r||0)&7;if(e){d&&(c[0]=a.r>>3);for(var p=Cq[e-1],g=p>>13,m=p&8191,x=(1<<t)-1,_=a.p||new Ko(32768),T=a.h||new Ko(x+1),A=Math.ceil(t/3),D=2*A,U=function(vt){return(n[vt]^n[vt+1]<<A^n[vt+2]<<D)&x},H=new O5(25e3),X=new Ko(288),q=new Ko(32),j=0,C=0,N=a.i||0,L=0,R=a.w||0,I=0;N+2<o;++N){var P=U(N),M=N&32767,K=T[P];if(_[M]=K,T[P]=M,R<=N){var F=o-N;if((j>7e3||L>24576)&&(F>423||!f)){d=L4(n,c,0,H,X,q,C,L,I,N-I,d),L=j=C=0,I=N;for(var z=0;z<286;++z)X[z]=0;for(var z=0;z<30;++z)q[z]=0}var ee=2,ae=0,Q=m,he=M-K&32767;if(F>2&&P==U(N-he))for(var G=Math.min(g,F)-1,$=Math.min(32767,N),Z=Math.min(258,F);he<=$&&--Q&&M!=K;){if(n[N+ee]==n[N+ee-he]){for(var re=0;re<Z&&n[N+re]==n[N+re-he];++re);if(re>ee){if(ee=re,ae=he,re>G)break;for(var de=Math.min(he,re-2),xe=0,z=0;z<de;++z){var we=N-he+z&32767,Ee=_[we],Ve=we-Ee&32767;Ve>xe&&(xe=Ve,K=we)}}}M=K,K=_[M],he+=M-K&32767}if(ae){H[L++]=268435456|Qy[ee]<<18|k4[ae];var He=Qy[ee]&31,it=k4[ae]&31;C+=Qm[He]+Zm[it],++X[257+He],++q[it],R=N+ee,++j}else H[L++]=n[N],++X[n[N]]}}for(N=Math.max(N,R);N<o;++N)H[L++]=n[N],++X[n[N]];d=L4(n,c,f,H,X,q,C,L,I,N-I,d),f||(a.r=d&7|c[d/8|0]<<3,d-=7,a.h=T,a.p=_,a.i=N,a.w=R)}else{for(var N=a.w||0;N<o+f;N+=65535){var ct=N+65535;ct>=o&&(c[d/8|0]=f,ct=o),d=kE(c,d+1,n.subarray(N,ct))}a.i=o}return OE(s,0,r+k5(d)+i)},LE=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Tq=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new Ba(a.length+n.length);o.set(a),o.set(n,a.length),n=o,i.w=a.length}return Iq(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},ME=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Rq=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=LE();i.p(e.dictionary),ME(n,2,i.d())}},Nq=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&al(6,"invalid zlib data"),(n[1]>>5&1)==1&&al(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ex(n,e){e||(e={});var t=LE();t.p(n);var r=Tq(n,e,e.dictionary?6:2,4);return Rq(r,e),ME(r,r.length-4,t.d()),r}function Dq(n,e){return Eq(n.subarray(Nq(n),-4),{i:2},e,e)}var Oq=typeof TextDecoder<"u"&&new TextDecoder,kq=0;try{Oq.decode(PE,{stream:!0}),kq=1}catch{}var Gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Wv(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var wr={log:Wv,warn:function(n){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):Wv.call(null,arguments))},error:function(n){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):Wv(n))}};function Gv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){ed(r.response,e,t)},r.onerror=function(){wr.error("could not download file")},r.send()}function M4(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Zp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var t1,tx,ed=Gt.saveAs||((typeof window>"u"?"undefined":ur(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Gt.URL||Gt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?M4(i.href)?Gv(n,e,t):Zp(i,i.target="_blank"):Zp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Zp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(M4(n))Gv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Zp(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:ur(a)!=="object"&&(wr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Gv(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(Gt.HTMLElement)||Gt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":ur(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var d=s.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},s.readAsDataURL(n)}else{var c=Gt.URL||Gt.webkitURL,f=c.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jE(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,o=i.exec(n);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return s.length==1&&(s="0"+s),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+s+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $v(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Na(t,r,i,a,e[0],7,-680876936),a=Na(a,t,r,i,e[1],12,-389564586),i=Na(i,a,t,r,e[2],17,606105819),r=Na(r,i,a,t,e[3],22,-1044525330),t=Na(t,r,i,a,e[4],7,-176418897),a=Na(a,t,r,i,e[5],12,1200080426),i=Na(i,a,t,r,e[6],17,-1473231341),r=Na(r,i,a,t,e[7],22,-45705983),t=Na(t,r,i,a,e[8],7,1770035416),a=Na(a,t,r,i,e[9],12,-1958414417),i=Na(i,a,t,r,e[10],17,-42063),r=Na(r,i,a,t,e[11],22,-1990404162),t=Na(t,r,i,a,e[12],7,1804603682),a=Na(a,t,r,i,e[13],12,-40341101),i=Na(i,a,t,r,e[14],17,-1502002290),t=Da(t,r=Na(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Da(a,t,r,i,e[6],9,-1069501632),i=Da(i,a,t,r,e[11],14,643717713),r=Da(r,i,a,t,e[0],20,-373897302),t=Da(t,r,i,a,e[5],5,-701558691),a=Da(a,t,r,i,e[10],9,38016083),i=Da(i,a,t,r,e[15],14,-660478335),r=Da(r,i,a,t,e[4],20,-405537848),t=Da(t,r,i,a,e[9],5,568446438),a=Da(a,t,r,i,e[14],9,-1019803690),i=Da(i,a,t,r,e[3],14,-187363961),r=Da(r,i,a,t,e[8],20,1163531501),t=Da(t,r,i,a,e[13],5,-1444681467),a=Da(a,t,r,i,e[2],9,-51403784),i=Da(i,a,t,r,e[7],14,1735328473),t=Oa(t,r=Da(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Oa(a,t,r,i,e[8],11,-2022574463),i=Oa(i,a,t,r,e[11],16,1839030562),r=Oa(r,i,a,t,e[14],23,-35309556),t=Oa(t,r,i,a,e[1],4,-1530992060),a=Oa(a,t,r,i,e[4],11,1272893353),i=Oa(i,a,t,r,e[7],16,-155497632),r=Oa(r,i,a,t,e[10],23,-1094730640),t=Oa(t,r,i,a,e[13],4,681279174),a=Oa(a,t,r,i,e[0],11,-358537222),i=Oa(i,a,t,r,e[3],16,-722521979),r=Oa(r,i,a,t,e[6],23,76029189),t=Oa(t,r,i,a,e[9],4,-640364487),a=Oa(a,t,r,i,e[12],11,-421815835),i=Oa(i,a,t,r,e[15],16,530742520),t=ka(t,r=Oa(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=ka(a,t,r,i,e[7],10,1126891415),i=ka(i,a,t,r,e[14],15,-1416354905),r=ka(r,i,a,t,e[5],21,-57434055),t=ka(t,r,i,a,e[12],6,1700485571),a=ka(a,t,r,i,e[3],10,-1894986606),i=ka(i,a,t,r,e[10],15,-1051523),r=ka(r,i,a,t,e[1],21,-2054922799),t=ka(t,r,i,a,e[8],6,1873313359),a=ka(a,t,r,i,e[15],10,-30611744),i=ka(i,a,t,r,e[6],15,-1560198380),r=ka(r,i,a,t,e[13],21,1309151649),t=ka(t,r,i,a,e[4],6,-145523070),a=ka(a,t,r,i,e[11],10,-1120210379),i=ka(i,a,t,r,e[2],15,718787259),r=ka(r,i,a,t,e[9],21,-343485551),n[0]=af(t,n[0]),n[1]=af(r,n[1]),n[2]=af(i,n[2]),n[3]=af(a,n[3])}function Jm(n,e,t,r,i,a){return e=af(af(e,n),af(r,a)),af(e<<i|e>>>32-i,t)}function Na(n,e,t,r,i,a,o){return Jm(e&t|~e&r,n,e,i,a,o)}function Da(n,e,t,r,i,a,o){return Jm(e&r|t&~r,n,e,i,a,o)}function Oa(n,e,t,r,i,a,o){return Jm(e^t^r,n,e,i,a,o)}function ka(n,e,t,r,i,a,o){return Jm(t^(e|~r),n,e,i,a,o)}function BE(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)$v(r,Pq(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for($v(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,$v(r,i),r}function Pq(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}t1=Gt.atob.bind(Gt),tx=Gt.btoa.bind(Gt);var j4="0123456789abcdef".split("");function Lq(n){for(var e="",t=0;t<4;t++)e+=j4[n>>8*t+4&15]+j4[n>>8*t&15];return e}function Mq(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function nx(n){return BE(n).map(Mq).join("")}var jq=function(n){for(var e=0;e<n.length;e++)n[e]=Lq(n[e]);return n.join("")}(BE("hello"))!="5d41402abc4b2a76b9719d911017c592";function af(n,e){if(jq){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function rx(n,e){var t,r,i,a;if(n!==t){for(var o=(i=n,a=1+(256/n.length>>0),new Array(a+1).join(i)),s=[],c=0;c<256;c++)s[c]=c;var f=0;for(c=0;c<256;c++){var d=s[c];f=(f+d+o.charCodeAt(c))%256,s[c]=s[f],s[f]=d}t=n,r=s}else s=r;var p=e.length,g=0,m=0,x="";for(c=0;c<p;c++)m=(m+(d=s[g=(g+1)%256]))%256,s[g]=s[m],s[m]=d,o=s[(s[g]+s[m])%256],x+=String.fromCharCode(e.charCodeAt(c)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var B4={print:4,modify:8,copy:16,"annot-forms":32};function sh(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(s){if(B4.perm!==void 0)throw new Error("Invalid permission: "+s);i+=B4[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=nx(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=rx(this.encryptionKey,this.padding)}function lh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function F4(n){if(ur(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var o=e[t][a];try{o[0].apply(n,r)}catch(s){Gt.console&&wr.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function nm(n){if(!(this instanceof nm))return new nm(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function FE(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function td(n,e,t,r,i){if(!(this instanceof td))return new td(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,FE.call(this,r,i)}function hh(n,e,t,r,i){if(!(this instanceof hh))return new hh(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,FE.call(this,r,i)}function Wt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,c=16,f="S",d=null;ur(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),s=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),f=n.defaultPathOperation||"S"),o=n.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=F4;var x="1.3",_=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(k){x=k};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return T};var A=m.__private__.getPageFormat=function(k){return T[k]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},U=D.COMPAT;function H(){this.saveGraphicsState(),ve(new bt(ut,0,0,-ut,0,qi()*ut).toString()+" cm"),this.setFontSize(this.getFontSize()/ut),f="n",U=D.ADVANCED}function X(){this.restoreGraphicsState(),f="S",U=D.COMPAT}var q=m.__private__.combineFontStyleAndFontWeight=function(k,ne){if(k=="bold"&&ne=="normal"||k=="bold"&&ne==400||k=="normal"&&ne=="italic"||k=="bold"&&ne=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ne&&(k=ne==400||ne==="normal"?k==="italic"?"italic":"normal":ne!=700&&ne!=="bold"||k!=="normal"?(ne==700?"bold":ne)+""+k:"bold"),k};m.advancedAPI=function(k){var ne=U===D.COMPAT;return ne&&H.call(this),typeof k!="function"||(k(this),ne&&X.call(this)),this},m.compatAPI=function(k){var ne=U===D.ADVANCED;return ne&&X.call(this),typeof k!="function"||(k(this),ne&&H.call(this)),this},m.isAdvancedAPI=function(){return U===D.ADVANCED};var j,C=function(k){if(U!==D.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=m.roundToPrecision=m.__private__.roundToPrecision=function(k,ne){var me=e||ne;if(isNaN(k)||isNaN(me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(me).replace(/0+$/,"")};j=m.hpf=m.__private__.hpf=typeof c=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return N(k,c)}:c==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return N(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return N(k,16)};var L=m.f2=m.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return N(k,2)},R=m.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return N(k,3)},I=m.scale=m.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return U===D.COMPAT?k*ut:U===D.ADVANCED?k:void 0},P=function(k){return U===D.COMPAT?qi()-k:U===D.ADVANCED?k:void 0},M=function(k){return I(P(k))};m.__private__.setPrecision=m.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var K,F="00000000000000000000000000000000",z=m.__private__.getFileId=function(){return F},ee=m.__private__.setFileId=function(k){return F=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():F.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ir=new sh(d.userPermissions,d.userPassword,d.ownerPassword,F)),F};m.setFileId=function(k){return ee(k),this},m.getFileId=function(){return z()};var ae=m.__private__.convertDateToPDFDate=function(k){var ne=k.getTimezoneOffset(),me=ne<0?"+":"-",be=Math.floor(Math.abs(ne/60)),Re=Math.abs(ne%60),qe=[me,Z(be),"'",Z(Re),"'"].join("");return["D:",k.getFullYear(),Z(k.getMonth()+1),Z(k.getDate()),Z(k.getHours()),Z(k.getMinutes()),Z(k.getSeconds()),qe].join("")},Q=m.__private__.convertPDFDateToDate=function(k){var ne=parseInt(k.substr(2,4),10),me=parseInt(k.substr(6,2),10)-1,be=parseInt(k.substr(8,2),10),Re=parseInt(k.substr(10,2),10),qe=parseInt(k.substr(12,2),10),at=parseInt(k.substr(14,2),10);return new Date(ne,me,be,Re,qe,at,0)},he=m.__private__.setCreationDate=function(k){var ne;if(k===void 0&&(k=new Date),k instanceof Date)ne=ae(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ne=k}return K=ne},G=m.__private__.getCreationDate=function(k){var ne=K;return k==="jsDate"&&(ne=Q(K)),ne};m.setCreationDate=function(k){return he(k),this},m.getCreationDate=function(k){return G(k)};var $,Z=m.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},re=m.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},de=0,xe=[],we=[],Ee=0,Ve=[],He=[],it=!1,ct=we,vt=function(){de=0,Ee=0,we=[],xe=[],Ve=[],ea=Or(),vi=Or()};m.__private__.setCustomOutputDestination=function(k){it=!0,ct=k};var ke=function(k){it||(ct=k)};m.__private__.resetCustomOutputDestination=function(){it=!1,ct=we};var ve=m.__private__.out=function(k){return k=k.toString(),Ee+=k.length+1,ct.push(k),ct},dt=m.__private__.write=function(k){return ve(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},ot=m.__private__.getArrayBuffer=function(k){for(var ne=k.length,me=new ArrayBuffer(ne),be=new Uint8Array(me);ne--;)be[ne]=k.charCodeAt(ne);return me},Te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Te};var Ke=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(k){return Ke=U===D.ADVANCED?k/ut:k,this};var Ge,lt=m.__private__.getFontSize=m.getFontSize=function(){return U===D.COMPAT?Ke:Ke*ut},ft=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(k){return ft=k,this},m.__private__.getR2L=m.getR2L=function(){return ft};var et,Ct=m.__private__.setZoomMode=function(k){var ne=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))Ge=k;else if(isNaN(k)){if(ne.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');Ge=k}else Ge=parseInt(k,10)};m.__private__.getZoomMode=function(){return Ge};var yt,At=m.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');et=k};m.__private__.getPageMode=function(){return et};var Nt=m.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');yt=k};m.__private__.getLayoutMode=function(){return yt},m.__private__.setDisplayMode=m.setDisplayMode=function(k,ne,me){return Ct(k),Nt(ne),At(me),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(k){if(Object.keys(xt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[k]},m.__private__.getDocumentProperties=function(){return xt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(k){for(var ne in xt)xt.hasOwnProperty(ne)&&k[ne]&&(xt[ne]=k[ne]);return this},m.__private__.setDocumentProperty=function(k,ne){if(Object.keys(xt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[k]=ne};var It,ut,bn,Vt,Jn,Kt={},Cn={},mi=[],sn={},ma={},Rn={},Br={},fr=null,wn=0,Dt=[],rn=new F4(m),Ei=n.hotfixes||[],Bn={},yr={},Va=[],bt=function k(ne,me,be,Re,qe,at){if(!(this instanceof k))return new k(ne,me,be,Re,qe,at);isNaN(ne)&&(ne=1),isNaN(me)&&(me=0),isNaN(be)&&(be=0),isNaN(Re)&&(Re=1),isNaN(qe)&&(qe=0),isNaN(at)&&(at=0),this._matrix=[ne,me,be,Re,qe,at]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(k)},bt.prototype.multiply=function(k){var ne=k.sx*this.sx+k.shy*this.shx,me=k.sx*this.shy+k.shy*this.sy,be=k.shx*this.sx+k.sy*this.shx,Re=k.shx*this.shy+k.sy*this.sy,qe=k.tx*this.sx+k.ty*this.shx+this.tx,at=k.tx*this.shy+k.ty*this.sy+this.ty;return new bt(ne,me,be,Re,qe,at)},bt.prototype.decompose=function(){var k=this.sx,ne=this.shy,me=this.shx,be=this.sy,Re=this.tx,qe=this.ty,at=Math.sqrt(k*k+ne*ne),pt=(k/=at)*me+(ne/=at)*be;me-=k*pt,be-=ne*pt;var w=Math.sqrt(me*me+be*be);return pt/=w,k*(be/=w)<ne*(me/=w)&&(k=-k,ne=-ne,pt=-pt,at=-at),{scale:new bt(at,0,0,w,0,0),translate:new bt(1,0,0,1,Re,qe),rotate:new bt(k,ne,-ne,k,0,0),skew:new bt(1,0,pt,1,0,0)}},bt.prototype.toString=function(k){return this.join(" ")},bt.prototype.inversed=function(){var k=this.sx,ne=this.shy,me=this.shx,be=this.sy,Re=this.tx,qe=this.ty,at=1/(k*be-ne*me),pt=be*at,w=-ne*at,V=-me*at,Y=k*at;return new bt(pt,w,V,Y,-pt*Re-V*qe,-w*Re-Y*qe)},bt.prototype.applyToPoint=function(k){var ne=k.x*this.sx+k.y*this.shx+this.tx,me=k.x*this.shy+k.y*this.sy+this.ty;return new Ls(ne,me)},bt.prototype.applyToRectangle=function(k){var ne=this.applyToPoint(k),me=this.applyToPoint(new Ls(k.x+k.w,k.y+k.h));return new _l(ne.x,ne.y,me.x-ne.x,me.y-ne.y)},bt.prototype.clone=function(){var k=this.sx,ne=this.shy,me=this.shx,be=this.sy,Re=this.tx,qe=this.ty;return new bt(k,ne,me,be,Re,qe)},m.Matrix=bt;var Xn=m.matrixMult=function(k,ne){return ne.multiply(k)},Kn=new bt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Kn;var xr=function(k,ne){if(!ma[k]){var me=(ne instanceof td?"Sh":"P")+(Object.keys(sn).length+1).toString(10);ne.id=me,ma[k]=me,sn[me]=ne,rn.publish("addPattern",ne)}};m.ShadingPattern=td,m.TilingPattern=hh,m.addShadingPattern=function(k,ne){return C("addShadingPattern()"),xr(k,ne),this},m.beginTilingPattern=function(k){C("beginTilingPattern()"),ss(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},m.endTilingPattern=function(k,ne){C("endTilingPattern()"),ne.stream=He[$].join(`
`),xr(k,ne),rn.publish("endTilingPattern",ne),Va.pop().restore()};var Cr=m.__private__.newObject=function(){var k=Or();return $r(k,!0),k},Or=m.__private__.newObjectDeferred=function(){return de++,xe[de]=function(){return Ee},de},$r=function(k,ne){return ne=typeof ne=="boolean"&&ne,xe[k]=Ee,ne&&ve(k+" 0 obj"),k},Ts=m.__private__.newAdditionalObject=function(){var k={objId:Or(),content:""};return Ve.push(k),k},ea=Or(),vi=Or(),ni=m.__private__.decodeColorString=function(k){var ne=k.split(" ");if(ne.length!==2||ne[1]!=="g"&&ne[1]!=="G")ne.length===5&&(ne[4]==="k"||ne[4]==="K")&&(ne=[(1-ne[0])*(1-ne[3]),(1-ne[1])*(1-ne[3]),(1-ne[2])*(1-ne[3]),"r"]);else{var me=parseFloat(ne[0]);ne=[me,me,me,"r"]}for(var be="#",Re=0;Re<3;Re++)be+=("0"+Math.floor(255*parseFloat(ne[Re])).toString(16)).slice(-2);return be},Yr=m.__private__.encodeColorString=function(k){var ne;typeof k=="string"&&(k={ch1:k});var me=k.ch1,be=k.ch2,Re=k.ch3,qe=k.ch4,at=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof me=="string"&&me.charAt(0)!=="#"){var pt=new jE(me);if(pt.ok)me=pt.toHex();else if(!/^\d*\.?\d*$/.test(me))throw new Error('Invalid color "'+me+'" passed to jsPDF.encodeColorString.')}if(typeof me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(me)&&(me="#"+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]),typeof me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(me)){var w=parseInt(me.substr(1),16);me=w>>16&255,be=w>>8&255,Re=255&w}if(be===void 0||qe===void 0&&me===be&&be===Re)if(typeof me=="string")ne=me+" "+at[0];else switch(k.precision){case 2:ne=L(me/255)+" "+at[0];break;case 3:default:ne=R(me/255)+" "+at[0]}else if(qe===void 0||ur(qe)==="object"){if(qe&&!isNaN(qe.a)&&qe.a===0)return ne=["1.","1.","1.",at[1]].join(" ");if(typeof me=="string")ne=[me,be,Re,at[1]].join(" ");else switch(k.precision){case 2:ne=[L(me/255),L(be/255),L(Re/255),at[1]].join(" ");break;default:case 3:ne=[R(me/255),R(be/255),R(Re/255),at[1]].join(" ")}}else if(typeof me=="string")ne=[me,be,Re,qe,at[2]].join(" ");else switch(k.precision){case 2:ne=[L(me),L(be),L(Re),L(qe),at[2]].join(" ");break;case 3:default:ne=[R(me),R(be),R(Re),R(qe),at[2]].join(" ")}return ne},ri=m.__private__.getFilters=function(){return o},dr=m.__private__.putStream=function(k){var ne=(k=k||{}).data||"",me=k.filters||ri(),be=k.alreadyAppliedFilters||[],Re=k.addLength1||!1,qe=ne.length,at=k.objectId,pt=function(zt){return zt};if(d!==null&&at===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(pt=ir.encryptor(at,0));var w={};me===!0&&(me=["FlateEncode"]);var V=k.additionalKeyValues||[],Y=(w=Wt.API.processDataByFilters!==void 0?Wt.API.processDataByFilters(ne,me):{data:ne,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(w.data.length!==0&&(V.push({key:"Length",value:w.data.length}),Re===!0&&V.push({key:"Length1",value:qe})),Y.length!=0)if(Y.split("/").length-1==1)V.push({key:"Filter",value:Y});else{V.push({key:"Filter",value:"["+Y+"]"});for(var le=0;le<V.length;le+=1)if(V[le].key==="DecodeParms"){for(var Ie=[],Me=0;Me<w.reverseChain.split("/").length-1;Me+=1)Ie.push("null");Ie.push(V[le].value),V[le].value="["+Ie.join(" ")+"]"}}ve("<<");for(var st=0;st<V.length;st++)ve("/"+V[st].key+" "+V[st].value);ve(">>"),w.data.length!==0&&(ve("stream"),ve(pt(w.data)),ve("endstream"))},Fn=m.__private__.putPage=function(k){var ne=k.number,me=k.data,be=k.objId,Re=k.contentsObjId;$r(be,!0),ve("<</Type /Page"),ve("/Parent "+k.rootDictionaryObjId+" 0 R"),ve("/Resources "+k.resourceDictionaryObjId+" 0 R"),ve("/MediaBox ["+parseFloat(j(k.mediaBox.bottomLeftX))+" "+parseFloat(j(k.mediaBox.bottomLeftY))+" "+j(k.mediaBox.topRightX)+" "+j(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&ve("/CropBox ["+j(k.cropBox.bottomLeftX)+" "+j(k.cropBox.bottomLeftY)+" "+j(k.cropBox.topRightX)+" "+j(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&ve("/BleedBox ["+j(k.bleedBox.bottomLeftX)+" "+j(k.bleedBox.bottomLeftY)+" "+j(k.bleedBox.topRightX)+" "+j(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&ve("/TrimBox ["+j(k.trimBox.bottomLeftX)+" "+j(k.trimBox.bottomLeftY)+" "+j(k.trimBox.topRightX)+" "+j(k.trimBox.topRightY)+"]"),k.artBox!==null&&ve("/ArtBox ["+j(k.artBox.bottomLeftX)+" "+j(k.artBox.bottomLeftY)+" "+j(k.artBox.topRightX)+" "+j(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&ve("/UserUnit "+k.userUnit),rn.publish("putPage",{objId:be,pageContext:Dt[ne],pageNumber:ne,page:me}),ve("/Contents "+Re+" 0 R"),ve(">>"),ve("endobj");var qe=me.join(`
`);return U===D.ADVANCED&&(qe+=`
Q`),$r(Re,!0),dr({data:qe,filters:ri(),objectId:Re}),ve("endobj"),be},Io=m.__private__.putPages=function(){var k,ne,me=[];for(k=1;k<=wn;k++)Dt[k].objId=Or(),Dt[k].contentsObjId=Or();for(k=1;k<=wn;k++)me.push(Fn({number:k,data:He[k],objId:Dt[k].objId,contentsObjId:Dt[k].contentsObjId,mediaBox:Dt[k].mediaBox,cropBox:Dt[k].cropBox,bleedBox:Dt[k].bleedBox,trimBox:Dt[k].trimBox,artBox:Dt[k].artBox,userUnit:Dt[k].userUnit,rootDictionaryObjId:ea,resourceDictionaryObjId:vi}));$r(ea,!0),ve("<</Type /Pages");var be="/Kids [";for(ne=0;ne<wn;ne++)be+=me[ne]+" 0 R ";ve(be+"]"),ve("/Count "+wn),ve(">>"),ve("endobj"),rn.publish("postPutPages")},To=function(k){rn.publish("putFont",{font:k,out:ve,newObject:Cr,putStream:dr}),k.isAlreadyPutted!==!0&&(k.objectNumber=Cr(),ve("<<"),ve("/Type /Font"),ve("/BaseFont /"+lh(k.postScriptName)),ve("/Subtype /Type1"),typeof k.encoding=="string"&&ve("/Encoding /"+k.encoding),ve("/FirstChar 32"),ve("/LastChar 255"),ve(">>"),ve("endobj"))},Fi=function(){for(var k in Kt)Kt.hasOwnProperty(k)&&(p===!1||p===!0&&g.hasOwnProperty(k))&&To(Kt[k])},va=function(k){k.objectNumber=Cr();var ne=[];ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Form"}),ne.push({key:"BBox",value:"["+[j(k.x),j(k.y),j(k.x+k.width),j(k.y+k.height)].join(" ")+"]"}),ne.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var me=k.pages[1].join(`
`);dr({data:me,additionalKeyValues:ne,objectId:k.objectNumber}),ve("endobj")},Rs=function(){for(var k in Bn)Bn.hasOwnProperty(k)&&va(Bn[k])},fc=function(k,ne){var me,be=[],Re=1/(ne-1);for(me=0;me<1;me+=Re)be.push(me);if(be.push(1),k[0].offset!=0){var qe={offset:0,color:k[0].color};k.unshift(qe)}if(k[k.length-1].offset!=1){var at={offset:1,color:k[k.length-1].color};k.push(at)}for(var pt="",w=0,V=0;V<be.length;V++){for(me=be[V];me>k[w+1].offset;)w++;var Y=k[w].offset,le=(me-Y)/(k[w+1].offset-Y),Ie=k[w].color,Me=k[w+1].color;pt+=re(Math.round((1-le)*Ie[0]+le*Me[0]).toString(16))+re(Math.round((1-le)*Ie[1]+le*Me[1]).toString(16))+re(Math.round((1-le)*Ie[2]+le*Me[2]).toString(16))}return pt.trim()},Ns=function(k,ne){ne||(ne=21);var me=Cr(),be=fc(k.colors,ne),Re=[];Re.push({key:"FunctionType",value:"0"}),Re.push({key:"Domain",value:"[0.0 1.0]"}),Re.push({key:"Size",value:"["+ne+"]"}),Re.push({key:"BitsPerSample",value:"8"}),Re.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dr({data:be,additionalKeyValues:Re,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:me}),ve("endobj"),k.objectNumber=Cr(),ve("<< /ShadingType "+k.type),ve("/ColorSpace /DeviceRGB");var qe="/Coords ["+j(parseFloat(k.coords[0]))+" "+j(parseFloat(k.coords[1]))+" ";k.type===2?qe+=j(parseFloat(k.coords[2]))+" "+j(parseFloat(k.coords[3])):qe+=j(parseFloat(k.coords[2]))+" "+j(parseFloat(k.coords[3]))+" "+j(parseFloat(k.coords[4]))+" "+j(parseFloat(k.coords[5])),ve(qe+="]"),k.matrix&&ve("/Matrix ["+k.matrix.toString()+"]"),ve("/Function "+me+" 0 R"),ve("/Extend [true true]"),ve(">>"),ve("endobj")},fu=function(k,ne){var me=Or(),be=Cr();ne.push({resourcesOid:me,objectOid:be}),k.objectNumber=be;var Re=[];Re.push({key:"Type",value:"/Pattern"}),Re.push({key:"PatternType",value:"1"}),Re.push({key:"PaintType",value:"1"}),Re.push({key:"TilingType",value:"1"}),Re.push({key:"BBox",value:"["+k.boundingBox.map(j).join(" ")+"]"}),Re.push({key:"XStep",value:j(k.xStep)}),Re.push({key:"YStep",value:j(k.yStep)}),Re.push({key:"Resources",value:me+" 0 R"}),k.matrix&&Re.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),dr({data:k.stream,additionalKeyValues:Re,objectId:k.objectNumber}),ve("endobj")},qa=function(k){var ne;for(ne in sn)sn.hasOwnProperty(ne)&&(sn[ne]instanceof td?Ns(sn[ne]):sn[ne]instanceof hh&&fu(sn[ne],k))},Ha=function(k){for(var ne in k.objectNumber=Cr(),ve("<<"),k)switch(ne){case"opacity":ve("/ca "+L(k[ne]));break;case"stroke-opacity":ve("/CA "+L(k[ne]))}ve(">>"),ve("endobj")},ii=function(){var k;for(k in Rn)Rn.hasOwnProperty(k)&&Ha(Rn[k])},Ro=function(){for(var k in ve("/XObject <<"),Bn)Bn.hasOwnProperty(k)&&Bn[k].objectNumber>=0&&ve("/"+k+" "+Bn[k].objectNumber+" 0 R");rn.publish("putXobjectDict"),ve(">>")},du=function(){ir.oid=Cr(),ve("<<"),ve("/Filter /Standard"),ve("/V "+ir.v),ve("/R "+ir.r),ve("/U <"+ir.toHexString(ir.U)+">"),ve("/O <"+ir.toHexString(ir.O)+">"),ve("/P "+ir.P),ve(">>"),ve("endobj")},Ja=function(){for(var k in ve("/Font <<"),Kt)Kt.hasOwnProperty(k)&&(p===!1||p===!0&&g.hasOwnProperty(k))&&ve("/"+k+" "+Kt[k].objectNumber+" 0 R");ve(">>")},ml=function(){if(Object.keys(sn).length>0){for(var k in ve("/Shading <<"),sn)sn.hasOwnProperty(k)&&sn[k]instanceof td&&sn[k].objectNumber>=0&&ve("/"+k+" "+sn[k].objectNumber+" 0 R");rn.publish("putShadingPatternDict"),ve(">>")}},No=function(k){if(Object.keys(sn).length>0){for(var ne in ve("/Pattern <<"),sn)sn.hasOwnProperty(ne)&&sn[ne]instanceof m.TilingPattern&&sn[ne].objectNumber>=0&&sn[ne].objectNumber<k&&ve("/"+ne+" "+sn[ne].objectNumber+" 0 R");rn.publish("putTilingPatternDict"),ve(">>")}},dc=function(){if(Object.keys(Rn).length>0){var k;for(k in ve("/ExtGState <<"),Rn)Rn.hasOwnProperty(k)&&Rn[k].objectNumber>=0&&ve("/"+k+" "+Rn[k].objectNumber+" 0 R");rn.publish("putGStateDict"),ve(">>")}},hr=function(k){$r(k.resourcesOid,!0),ve("<<"),ve("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ja(),ml(),No(k.objectOid),dc(),Ro(),ve(">>"),ve("endobj")},yi=function(){var k=[];Fi(),ii(),Rs(),qa(k),rn.publish("putResources"),k.forEach(hr),hr({resourcesOid:vi,objectOid:Number.MAX_SAFE_INTEGER}),rn.publish("postPutResources")},vl=function(){rn.publish("putAdditionalObjects");for(var k=0;k<Ve.length;k++){var ne=Ve[k];$r(ne.objId,!0),ve(ne.content),ve("endobj")}rn.publish("postPutAdditionalObjects")},hu=function(k){Cn[k.fontName]=Cn[k.fontName]||{},Cn[k.fontName][k.fontStyle]=k.id},Zo=function(k,ne,me,be,Re){var qe={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:k,fontName:ne,fontStyle:me,encoding:be,isStandardFont:Re||!1,metadata:{}};return rn.publish("addFont",{font:qe,instance:this}),Kt[qe.id]=qe,hu(qe),qe.id},hc=function(k){for(var ne=0,me=Te.length;ne<me;ne++){var be=Zo.call(this,k[ne][0],k[ne][1],k[ne][2],Te[ne][3],!0);p===!1&&(g[be]=!0);var Re=k[ne][0].split("-");hu({id:be,fontName:Re[0],fontStyle:Re[1]||""})}rn.publish("addFonts",{fonts:Kt,dictionary:Cn})},Ci=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(be){var ne=be.stack||"";~ne.indexOf(" at ")&&(ne=ne.split(" at ")[1]);var me="Error in function "+ne.split(`
`)[0].split("<")[0]+": "+be.message;if(!Gt.console)throw new Error(me);Gt.console.error(me,be),Gt.alert&&alert(me)}},k.foo.bar=k,k.foo},yl=function(k,ne){var me,be,Re,qe,at,pt,w,V,Y;if(Re=(ne=ne||{}).sourceEncoding||"Unicode",at=ne.outputEncoding,(ne.autoencode||at)&&Kt[It].metadata&&Kt[It].metadata[Re]&&Kt[It].metadata[Re].encoding&&(qe=Kt[It].metadata[Re].encoding,!at&&Kt[It].encoding&&(at=Kt[It].encoding),!at&&qe.codePages&&(at=qe.codePages[0]),typeof at=="string"&&(at=qe[at]),at)){for(w=!1,pt=[],me=0,be=k.length;me<be;me++)(V=at[k.charCodeAt(me)])?pt.push(String.fromCharCode(V)):pt.push(k[me]),pt[me].charCodeAt(0)>>8&&(w=!0);k=pt.join("")}for(me=k.length;w===void 0&&me!==0;)k.charCodeAt(me-1)>>8&&(w=!0),me--;if(!w)return k;for(pt=ne.noBOM?[]:[254,255],me=0,be=k.length;me<be;me++){if((Y=(V=k.charCodeAt(me))>>8)>>8)throw new Error("Character at position "+me+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push(Y),pt.push(V-(Y<<8))}return String.fromCharCode.apply(void 0,pt)},In=m.__private__.pdfEscape=m.pdfEscape=function(k,ne){return yl(k,ne).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ii=m.__private__.beginPage=function(k){He[++wn]=[],Dt[wn]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},eo(wn),ke(He[$])},Jo=function(k,ne){var me,be,Re;switch(t=ne||t,typeof k=="string"&&(me=A(k.toLowerCase()),Array.isArray(me)&&(be=me[0],Re=me[1])),Array.isArray(k)&&(be=k[0]*ut,Re=k[1]*ut),isNaN(be)&&(be=i[0],Re=i[1]),(be>14400||Re>14400)&&(wr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Re=Math.min(14400,Re)),i=[be,Re],t.substr(0,1)){case"l":Re>be&&(i=[Re,be]);break;case"p":be>Re&&(i=[Re,be])}Ii(i),vc(rs),ve(Ti),yc!==0&&ve(yc+" J"),Ps!==0&&ve(Ps+" j"),rn.publish("addPage",{pageNumber:wn})},es=function(k){k>0&&k<=wn&&(He.splice(k,1),Dt.splice(k,1),wn--,$>wn&&($=wn),this.setPage($))},eo=function(k){k>0&&k<=wn&&($=k)},zn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return He.length-1},ts=function(k,ne,me){var be,Re=void 0;return me=me||{},k=k!==void 0?k:Kt[It].fontName,ne=ne!==void 0?ne:Kt[It].fontStyle,be=k.toLowerCase(),Cn[be]!==void 0&&Cn[be][ne]!==void 0?Re=Cn[be][ne]:Cn[k]!==void 0&&Cn[k][ne]!==void 0?Re=Cn[k][ne]:me.disableWarning===!1&&wr.warn("Unable to look up font label for font '"+k+"', '"+ne+"'. Refer to getFontList() for available fonts."),Re||me.noFallback||(Re=Cn.times[ne])==null&&(Re=Cn.times.normal),Re},ya=m.__private__.putInfo=function(){var k=Cr(),ne=function(be){return be};for(var me in d!==null&&(ne=ir.encryptor(k,0)),ve("<<"),ve("/Producer ("+In(ne("jsPDF "+Wt.version))+")"),xt)xt.hasOwnProperty(me)&&xt[me]&&ve("/"+me.substr(0,1).toUpperCase()+me.substr(1)+" ("+In(ne(xt[me]))+")");ve("/CreationDate ("+In(ne(K))+")"),ve(">>"),ve("endobj")},Do=m.__private__.putCatalog=function(k){var ne=(k=k||{}).rootDictionaryObjId||ea;switch(Cr(),ve("<<"),ve("/Type /Catalog"),ve("/Pages "+ne+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":ve("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ve("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ve("/OpenAction [3 0 R /Fit]");break;case"original":ve("/OpenAction [3 0 R /XYZ null null 1]");break;default:var me=""+Ge;me.substr(me.length-1)==="%"&&(Ge=parseInt(Ge)/100),typeof Ge=="number"&&ve("/OpenAction [3 0 R /XYZ null null "+L(Ge)+"]")}switch(yt||(yt="continuous"),yt){case"continuous":ve("/PageLayout /OneColumn");break;case"single":ve("/PageLayout /SinglePage");break;case"two":case"twoleft":ve("/PageLayout /TwoColumnLeft");break;case"tworight":ve("/PageLayout /TwoColumnRight")}et&&ve("/PageMode /"+et),rn.publish("putCatalog"),ve(">>"),ve("endobj")},pu=m.__private__.putTrailer=function(){ve("trailer"),ve("<<"),ve("/Size "+(de+1)),ve("/Root "+de+" 0 R"),ve("/Info "+(de-1)+" 0 R"),d!==null&&ve("/Encrypt "+ir.oid+" 0 R"),ve("/ID [ <"+F+"> <"+F+"> ]"),ve(">>")},pc=m.__private__.putHeader=function(){ve("%PDF-"+x),ve("%ºß¬à")},gc=m.__private__.putXRef=function(){var k="0000000000";ve("xref"),ve("0 "+(de+1)),ve("0000000000 65535 f ");for(var ne=1;ne<=de;ne++)typeof xe[ne]=="function"?ve((k+xe[ne]()).slice(-10)+" 00000 n "):xe[ne]!==void 0?ve((k+xe[ne]).slice(-10)+" 00000 n "):ve("0000000000 00000 n ")},Oo=m.__private__.buildDocument=function(){vt(),ke(we),rn.publish("buildDocument"),pc(),Io(),vl(),yi(),d!==null&&du(),ya(),Do();var k=Ee;return gc(),pu(),ve("startxref"),ve(""+k),ve("%%EOF"),ke(He[$]),we.join(`
`)},xl=m.__private__.getBlob=function(k){return new Blob([ot(k)],{type:"application/pdf"})},ko=m.output=m.__private__.output=Ci(function(k,ne){switch(typeof(ne=ne||{})=="string"?ne={filename:ne}:ne.filename=ne.filename||"generated.pdf",k){case void 0:return Oo();case"save":m.save(ne.filename);break;case"arraybuffer":return ot(Oo());case"blob":return xl(Oo());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(xl(Oo()))||void 0;wr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var me="",be=Oo();try{me=tx(be)}catch{me=tx(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+ne.filename+";base64,"+me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var Re="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ne.pdfObjectUrl&&(Re=ne.pdfObjectUrl,qe="");var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Re+'"'+qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ne)+");<\/script></body></html>",pt=Gt.open();return pt!==null&&pt.document.write(at),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var w='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ne.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ne.filename+'" width="500px" height="400px" /></body></html>',V=Gt.open();if(V!==null){V.document.write(w);var Y=this;V.document.documentElement.querySelector("#pdfViewer").onload=function(){V.document.title=ne.filename,V.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Y.output("bloburl"))}}return V}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ne)+'"></iframe></body></html>',Ie=Gt.open();if(Ie!==null&&(Ie.document.write(le),Ie.document.title=ne.filename),Ie||typeof safari>"u")return Ie;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",ne);default:return null}}),to=function(k){return Array.isArray(Ei)===!0&&Ei.indexOf(k)>-1};switch(r){case"pt":ut=1;break;case"mm":ut=72/25.4;break;case"cm":ut=72/2.54;break;case"in":ut=72;break;case"px":ut=to("px_scaling")==1?.75:96/72;break;case"pc":case"em":ut=12;break;case"ex":ut=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ut=r}var ir=null;he(),ee();var Po=function(k){return d!==null?ir.encryptor(k,0):function(ne){return ne}},no=m.__private__.getPageInfo=m.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[k].objId,pageNumber:k,pageContext:Dt[k]}},Ft=m.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ne in Dt)if(Dt[ne].objId===k)break;return no(ne)},ro=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Dt[$].objId,pageNumber:$,pageContext:Dt[$]}};m.addPage=function(){return Jo.apply(this,arguments),this},m.setPage=function(){return eo.apply(this,arguments),ke.call(this,He[$]),this},m.insertPage=function(k){return this.addPage(),this.movePage($,k),this},m.movePage=function(k,ne){var me,be;if(k>ne){me=He[k],be=Dt[k];for(var Re=k;Re>ne;Re--)He[Re]=He[Re-1],Dt[Re]=Dt[Re-1];He[ne]=me,Dt[ne]=be,this.setPage(ne)}else if(k<ne){me=He[k],be=Dt[k];for(var qe=k;qe<ne;qe++)He[qe]=He[qe+1],Dt[qe]=Dt[qe+1];He[ne]=me,Dt[ne]=be,this.setPage(ne)}return this},m.deletePage=function(){return es.apply(this,arguments),this},m.__private__.text=m.text=function(k,ne,me,be,Re){var qe,at,pt,w,V,Y,le,Ie,Me,st=(be=be||{}).scope||this;if(typeof k=="number"&&typeof ne=="number"&&(typeof me=="string"||Array.isArray(me))){var zt=me;me=ne,ne=k,k=zt}if(arguments[3]instanceof bt?(C("The transform parameter of text() with a Matrix value"),Me=Re):(pt=arguments[4],w=arguments[5],ur(le=arguments[3])==="object"&&le!==null||(typeof pt=="string"&&(w=pt,pt=null),typeof le=="string"&&(w=le,le=null),typeof le=="number"&&(pt=le,le=null),be={flags:le,angle:pt,align:w})),isNaN(ne)||isNaN(me)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return st;var gn="",Qt=!1,Un=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:pn,er=st.internal.scaleFactor;function so(cn){return cn=cn.split("	").join(Array(be.TabLen||9).join(" ")),In(cn,le)}function Fr(cn){for(var un,pr=cn.concat(),zr=[],co=pr.length;co--;)typeof(un=pr.shift())=="string"?zr.push(un):Array.isArray(cn)&&(un.length===1||un[1]===void 0&&un[2]===void 0)?zr.push(un[0]):zr.push([un[0],un[1],un[2]]);return zr}function _a(cn,un){var pr;if(typeof cn=="string")pr=un(cn)[0];else if(Array.isArray(cn)){for(var zr,co,kl=cn.concat(),Pl=[],zs=kl.length;zs--;)typeof(zr=kl.shift())=="string"?Pl.push(un(zr)[0]):Array.isArray(zr)&&typeof zr[0]=="string"&&(co=un(zr[0],zr[1],zr[2]),Pl.push([co[0],co[1],co[2]]));pr=Pl}return pr}var cs=!1,Sl=!0;if(typeof k=="string")cs=!0;else if(Array.isArray(k)){var yu=k.concat();at=[];for(var xc,ai=yu.length;ai--;)(typeof(xc=yu.shift())!="string"||Array.isArray(xc)&&typeof xc[0]!="string")&&(Sl=!1);cs=Sl}if(cs===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var El=Ke/st.internal.scaleFactor,bc=El*(Un-1);switch(be.baseline){case"bottom":me-=bc;break;case"top":me+=El-bc;break;case"hanging":me+=El-2*bc;break;case"middle":me+=El/2-bc}if((Y=be.maxWidth||0)>0&&(typeof k=="string"?k=st.splitTextToSize(k,Y):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(cn,un){return cn.concat(st.splitTextToSize(un,Y))},[]))),qe={text:k,x:ne,y:me,options:be,mutex:{pdfEscape:In,activeFontKey:It,fonts:Kt,activeFontSize:Ke}},rn.publish("preProcessText",qe),k=qe.text,pt=(be=qe.options).angle,!(Me instanceof bt)&&pt&&typeof pt=="number"){pt*=Math.PI/180,be.rotationDirection===0&&(pt=-pt),U===D.ADVANCED&&(pt=-pt);var wc=Math.cos(pt),xu=Math.sin(pt);Me=new bt(wc,xu,-xu,wc,0,0)}else pt&&pt instanceof bt&&(Me=pt);U!==D.ADVANCED||Me||(Me=Kn),(V=be.charSpace||ks)!==void 0&&(gn+=j(I(V))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ie=be.horizontalScale)!==void 0&&(gn+=j(100*Ie)+` Tz
`),be.lang;var Aa=-1,qh=be.renderingMode!==void 0?be.renderingMode:be.stroke,Tf=st.internal.getCurrentPageInfo().pageContext;switch(qh){case 0:case!1:case"fill":Aa=0;break;case 1:case!0:case"stroke":Aa=1;break;case 2:case"fillThenStroke":Aa=2;break;case 3:case"invisible":Aa=3;break;case 4:case"fillAndAddForClipping":Aa=4;break;case 5:case"strokeAndAddPathForClipping":Aa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Aa=6;break;case 7:case"addToPathForClipping":Aa=7}var Ad=Tf.usedRenderingMode!==void 0?Tf.usedRenderingMode:-1;Aa!==-1?gn+=Aa+` Tr
`:Ad!==-1&&(gn+=`0 Tr
`),Aa!==-1&&(Tf.usedRenderingMode=Aa),w=be.align||"left";var lo,xi=Ke*Un,Cl=st.internal.pageSize.getWidth(),Rf=Kt[It];V=be.charSpace||ks,Y=be.maxWidth||0,le=Object.assign({autoencode:!0,noBOM:!0},be.flags);var Bs=[],Il=function(cn){return st.getStringUnitWidth(cn,{font:Rf,charSpace:V,fontSize:Ke,doKerning:!1})*Ke/er};if(Object.prototype.toString.call(k)==="[object Array]"){var na;at=Fr(k),w!=="left"&&(lo=at.map(Il));var Ri,Tl=0;if(w==="right"){ne-=lo[0],k=[],ai=at.length;for(var Sa=0;Sa<ai;Sa++)Sa===0?(Ri=Vi(ne),na=Kr(me)):(Ri=I(Tl-lo[Sa]),na=-xi),k.push([at[Sa],Ri,na]),Tl=lo[Sa]}else if(w==="center"){ne-=lo[0]/2,k=[],ai=at.length;for(var Bo=0;Bo<ai;Bo++)Bo===0?(Ri=Vi(ne),na=Kr(me)):(Ri=I((Tl-lo[Bo])/2),na=-xi),k.push([at[Bo],Ri,na]),Tl=lo[Bo]}else if(w==="left"){k=[],ai=at.length;for(var us=0;us<ai;us++)k.push(at[us])}else if(w==="justify"&&Rf.encoding==="Identity-H"){k=[],ai=at.length,Y=Y!==0?Y:Cl;for(var Fo=0,kr=0;kr<ai;kr++)if(na=kr===0?Kr(me):-xi,Ri=kr===0?Vi(ne):Fo,kr<ai-1){var zo=I((Y-lo[kr])/(at[kr].split(" ").length-1)),Qr=at[kr].split(" ");k.push([Qr[0]+" ",Ri,na]),Fo=0;for(var Ea=1;Ea<Qr.length;Ea++){var _c=(Il(Qr[Ea-1]+" "+Qr[Ea])-Il(Qr[Ea]))*er+zo;Ea==Qr.length-1?k.push([Qr[Ea],_c,0]):k.push([Qr[Ea]+" ",_c,0]),Fo-=_c}}else k.push([at[kr],Ri,na]);k.push(["",Fo,0])}else{if(w!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],ai=at.length,Y=Y!==0?Y:Cl,kr=0;kr<ai;kr++)na=kr===0?Kr(me):-xi,Ri=kr===0?Vi(ne):0,kr<ai-1?Bs.push(j(I((Y-lo[kr])/(at[kr].split(" ").length-1)))):Bs.push(0),k.push([at[kr],Ri,na])}}var fs=typeof be.R2L=="boolean"?be.R2L:ft;fs===!0&&(k=_a(k,function(cn,un,pr){return[cn.split("").reverse().join(""),un,pr]})),qe={text:k,x:ne,y:me,options:be,mutex:{pdfEscape:In,activeFontKey:It,fonts:Kt,activeFontSize:Ke}},rn.publish("postProcessText",qe),k=qe.text,Qt=qe.mutex.isHex||!1;var bu=Kt[It].encoding;bu!=="WinAnsiEncoding"&&bu!=="StandardEncoding"||(k=_a(k,function(cn,un,pr){return[so(cn),un,pr]})),at=Fr(k),k=[];for(var Rl,Nl,Dl,Ac=0,wu=1,Ol=Array.isArray(at[0])?wu:Ac,Fs="",Sc=function(cn,un,pr){var zr="";return pr instanceof bt?(pr=typeof be.angle=="number"?Xn(pr,new bt(1,0,0,1,cn,un)):Xn(new bt(1,0,0,1,cn,un),pr),U===D.ADVANCED&&(pr=Xn(new bt(1,0,0,-1,0,0),pr)),zr=pr.join(" ")+` Tm
`):zr=j(cn)+" "+j(un)+` Td
`,zr},Pr=0;Pr<at.length;Pr++){switch(Fs="",Ol){case wu:Dl=(Qt?"<":"(")+at[Pr][0]+(Qt?">":")"),Rl=parseFloat(at[Pr][1]),Nl=parseFloat(at[Pr][2]);break;case Ac:Dl=(Qt?"<":"(")+at[Pr]+(Qt?">":")"),Rl=Vi(ne),Nl=Kr(me)}Bs!==void 0&&Bs[Pr]!==void 0&&(Fs=Bs[Pr]+` Tw
`),Pr===0?k.push(Fs+Sc(Rl,Nl,Me)+Dl):Ol===Ac?k.push(Fs+Dl):Ol===wu&&k.push(Fs+Sc(Rl,Nl,Me)+Dl)}k=Ol===Ac?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var Ga=`BT
/`;return Ga+=It+" "+Ke+` Tf
`,Ga+=j(Ke*Un)+` TL
`,Ga+=Mo+`
`,Ga+=gn,Ga+=k,ve(Ga+="ET"),g[It]=!0,st};var gu=m.__private__.clip=m.clip=function(k){return ve(k==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return gu("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ve("n"),this};var zi=m.__private__.isValidStyle=function(k){var ne=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(ne=!0),ne};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(k){return zi(k)&&(f=k),this};var xa=m.__private__.getStyle=m.getStyle=function(k){var ne=f;switch(k){case"D":case"S":ne="S";break;case"F":ne="f";break;case"FD":case"DF":ne="B";break;case"f":case"f*":case"B":case"B*":ne=k}return ne},ta=m.close=function(){return ve("h"),this};m.stroke=function(){return ve("S"),this},m.fill=function(k){return io("f",k),this},m.fillEvenOdd=function(k){return io("f*",k),this},m.fillStroke=function(k){return io("B",k),this},m.fillStrokeEvenOdd=function(k){return io("B*",k),this};var io=function(k,ne){ur(ne)==="object"?Lo(ne,k):ve(k)},ba=function(k){k===null||U===D.ADVANCED&&k===void 0||(k=xa(k),ve(k))};function ns(k,ne,me,be,Re){var qe=new hh(ne||this.boundingBox,me||this.xStep,be||this.yStep,this.gState,Re||this.matrix);qe.stream=this.stream;var at=k+"$$"+this.cloneIndex+++"$$";return xr(at,qe),qe}var Lo=function(k,ne){var me=ma[k.key],be=sn[me];if(be instanceof td)ve("q"),ve(mc(ne)),be.gState&&m.setGState(be.gState),ve(k.matrix.toString()+" cm"),ve("/"+me+" sh"),ve("Q");else if(be instanceof hh){var Re=new bt(1,0,0,-1,0,qi());k.matrix&&(Re=Re.multiply(k.matrix||Kn),me=ns.call(be,k.key,k.boundingBox,k.xStep,k.yStep,Re).id),ve("q"),ve("/Pattern cs"),ve("/"+me+" scn"),be.gState&&m.setGState(be.gState),ve(ne),ve("Q")}},mc=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},wa=m.moveTo=function(k,ne){return ve(j(I(k))+" "+j(M(ne))+" m"),this},Ui=m.lineTo=function(k,ne){return ve(j(I(k))+" "+j(M(ne))+" l"),this},ao=m.curveTo=function(k,ne,me,be,Re,qe){return ve([j(I(k)),j(M(ne)),j(I(me)),j(M(be)),j(I(Re)),j(M(qe)),"c"].join(" ")),this};m.__private__.line=m.line=function(k,ne,me,be,Re){if(isNaN(k)||isNaN(ne)||isNaN(me)||isNaN(be)||!zi(Re))throw new Error("Invalid arguments passed to jsPDF.line");return U===D.COMPAT?this.lines([[me-k,be-ne]],k,ne,[1,1],Re||"S"):this.lines([[me-k,be-ne]],k,ne,[1,1]).stroke()},m.__private__.lines=m.lines=function(k,ne,me,be,Re,qe){var at,pt,w,V,Y,le,Ie,Me,st,zt,gn,Qt;if(typeof k=="number"&&(Qt=me,me=ne,ne=k,k=Qt),be=be||[1,1],qe=qe||!1,isNaN(ne)||isNaN(me)||!Array.isArray(k)||!Array.isArray(be)||!zi(Re)||typeof qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wa(ne,me),at=be[0],pt=be[1],V=k.length,zt=ne,gn=me,w=0;w<V;w++)(Y=k[w]).length===2?(zt=Y[0]*at+zt,gn=Y[1]*pt+gn,Ui(zt,gn)):(le=Y[0]*at+zt,Ie=Y[1]*pt+gn,Me=Y[2]*at+zt,st=Y[3]*pt+gn,zt=Y[4]*at+zt,gn=Y[5]*pt+gn,ao(le,Ie,Me,st,zt,gn));return qe&&ta(),ba(Re),this},m.path=function(k){for(var ne=0;ne<k.length;ne++){var me=k[ne],be=me.c;switch(me.op){case"m":wa(be[0],be[1]);break;case"l":Ui(be[0],be[1]);break;case"c":ao.apply(this,be);break;case"h":ta()}}return this},m.__private__.rect=m.rect=function(k,ne,me,be,Re){if(isNaN(k)||isNaN(ne)||isNaN(me)||isNaN(be)||!zi(Re))throw new Error("Invalid arguments passed to jsPDF.rect");return U===D.COMPAT&&(be=-be),ve([j(I(k)),j(M(ne)),j(I(me)),j(I(be)),"re"].join(" ")),ba(Re),this},m.__private__.triangle=m.triangle=function(k,ne,me,be,Re,qe,at){if(isNaN(k)||isNaN(ne)||isNaN(me)||isNaN(be)||isNaN(Re)||isNaN(qe)||!zi(at))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[me-k,be-ne],[Re-me,qe-be],[k-Re,ne-qe]],k,ne,[1,1],at,!0),this},m.__private__.roundedRect=m.roundedRect=function(k,ne,me,be,Re,qe,at){if(isNaN(k)||isNaN(ne)||isNaN(me)||isNaN(be)||isNaN(Re)||isNaN(qe)||!zi(at))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return Re=Math.min(Re,.5*me),qe=Math.min(qe,.5*be),this.lines([[me-2*Re,0],[Re*pt,0,Re,qe-qe*pt,Re,qe],[0,be-2*qe],[0,qe*pt,-Re*pt,qe,-Re,qe],[2*Re-me,0],[-Re*pt,0,-Re,-qe*pt,-Re,-qe],[0,2*qe-be],[0,-qe*pt,Re*pt,-qe,Re,-qe]],k+Re,ne,[1,1],at,!0),this},m.__private__.ellipse=m.ellipse=function(k,ne,me,be,Re){if(isNaN(k)||isNaN(ne)||isNaN(me)||isNaN(be)||!zi(Re))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qe=4/3*(Math.SQRT2-1)*me,at=4/3*(Math.SQRT2-1)*be;return wa(k+me,ne),ao(k+me,ne-at,k+qe,ne-be,k,ne-be),ao(k-qe,ne-be,k-me,ne-at,k-me,ne),ao(k-me,ne+at,k-qe,ne+be,k,ne+be),ao(k+qe,ne+be,k+me,ne+at,k+me,ne),ba(Re),this},m.__private__.circle=m.circle=function(k,ne,me,be){if(isNaN(k)||isNaN(ne)||isNaN(me)||!zi(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,ne,me,me,be)},m.setFont=function(k,ne,me){return me&&(ne=q(ne,me)),It=ts(k,ne,{disableWarning:!1}),this};var Xr=m.__private__.getFont=m.getFont=function(){return Kt[ts.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var k,ne,me={};for(k in Cn)if(Cn.hasOwnProperty(k))for(ne in me[k]=[],Cn[k])Cn[k].hasOwnProperty(ne)&&me[k].push(ne);return me},m.addFont=function(k,ne,me,be,Re){var qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qe.indexOf(arguments[3])!==-1?Re=arguments[3]:arguments[3]&&qe.indexOf(arguments[3])==-1&&(me=q(me,be)),Re=Re||"Identity-H",Zo.call(this,k,ne,me,Re)};var pn,rs=n.lineWidth||.200025,oo=m.__private__.getLineWidth=m.getLineWidth=function(){return rs},vc=m.__private__.setLineWidth=m.setLineWidth=function(k){return rs=k,ve(j(I(k))+" w"),this};m.__private__.setLineDash=Wt.API.setLineDash=Wt.API.setLineDashPattern=function(k,ne){if(k=k||[],ne=ne||0,isNaN(ne)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(me){return j(I(me))}).join(" "),ne=j(I(ne)),ve("["+k+"] "+ne+" d"),this};var Ds=m.__private__.getLineHeight=m.getLineHeight=function(){return Ke*pn};m.__private__.getLineHeight=m.getLineHeight=function(){return Ke*pn};var Os=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(pn=k),this},Wa=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return pn};Os(n.lineHeight);var Vi=m.__private__.getHorizontalCoordinate=function(k){return I(k)},Kr=m.__private__.getVerticalCoordinate=function(k){return U===D.ADVANCED?k:Dt[$].mediaBox.topRightY-Dt[$].mediaBox.bottomLeftY-I(k)},mu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(k){return j(Vi(k))},is=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(k){return j(Kr(k))},Ti=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ni(Ti)},m.__private__.setStrokeColor=m.setDrawColor=function(k,ne,me,be){return Ti=Yr({ch1:k,ch2:ne,ch3:me,ch4:be,pdfColorType:"draw",precision:2}),ve(Ti),this};var as=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ni(as)},m.__private__.setFillColor=m.setFillColor=function(k,ne,me,be){return as=Yr({ch1:k,ch2:ne,ch3:me,ch4:be,pdfColorType:"fill",precision:2}),ve(as),this};var Mo=n.textColor||"0 g",bl=m.__private__.getTextColor=m.getTextColor=function(){return ni(Mo)};m.__private__.setTextColor=m.setTextColor=function(k,ne,me,be){return Mo=Yr({ch1:k,ch2:ne,ch3:me,ch4:be,pdfColorType:"text",precision:3}),this};var ks=n.charSpace,wl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ks||0)};m.__private__.setCharSpace=m.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ks=k,this};var yc=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(k){var ne=m.CapJoinStyles[k];if(ne===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yc=ne,ve(ne+" J"),this};var Ps=0;m.__private__.setLineJoin=m.setLineJoin=function(k){var ne=m.CapJoinStyles[k];if(ne===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ps=ne,ve(ne+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ve(j(I(k))+" M"),this},m.GState=nm,m.setGState=function(k){(k=typeof k=="string"?Rn[Br[k]]:os(null,k)).equals(fr)||(ve("/"+k.id+" gs"),fr=k)};var os=function(k,ne){if(!k||!Br[k]){var me=!1;for(var be in Rn)if(Rn.hasOwnProperty(be)&&Rn[be].equals(ne)){me=!0;break}if(me)ne=Rn[be];else{var Re="GS"+(Object.keys(Rn).length+1).toString(10);Rn[Re]=ne,ne.id=Re}return k&&(Br[k]=ne.id),rn.publish("addGState",ne),ne}};m.addGState=function(k,ne){return os(k,ne),this},m.saveGraphicsState=function(){return ve("q"),mi.push({key:It,size:Ke,color:Mo}),this},m.restoreGraphicsState=function(){ve("Q");var k=mi.pop();return It=k.key,Ke=k.size,Mo=k.color,fr=null,this},m.setCurrentTransformationMatrix=function(k){return ve(k.toString()+" cm"),this},m.comment=function(k){return ve("#"+k),this};var Ls=function(k,ne){var me=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(qe){isNaN(qe)||(me=parseFloat(qe))}});var be=ne||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(qe){isNaN(qe)||(be=parseFloat(qe))}});var Re="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Re},set:function(qe){Re=qe.toString()}}),this},_l=function(k,ne,me,be){Ls.call(this,k,ne),this.type="rect";var Re=me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Re},set:function(at){isNaN(at)||(Re=parseFloat(at))}});var qe=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qe},set:function(at){isNaN(at)||(qe=parseFloat(at))}}),this},Ms=function(){this.page=wn,this.currentPage=$,this.pages=He.slice(0),this.pagesContext=Dt.slice(0),this.x=bn,this.y=Vt,this.matrix=Jn,this.width=ls($),this.height=qi($),this.outputDestination=ct,this.id="",this.objectNumber=-1};Ms.prototype.restore=function(){wn=this.page,$=this.currentPage,Dt=this.pagesContext,He=this.pages,bn=this.x,Vt=this.y,Jn=this.matrix,js($,this.width),Al($,this.height),ct=this.outputDestination};var ss=function(k,ne,me,be,Re){Va.push(new Ms),wn=$=0,He=[],bn=k,Vt=ne,Jn=Re,Ii([me,be])},vu=function(k){if(yr[k])Va.pop().restore();else{var ne=new Ms,me="Xo"+(Object.keys(Bn).length+1).toString(10);ne.id=me,yr[k]=me,Bn[me]=ne,rn.publish("addFormObject",ne),Va.pop().restore()}};for(var jo in m.beginFormObject=function(k,ne,me,be,Re){return ss(k,ne,me,be,Re),this},m.endFormObject=function(k){return vu(k),this},m.doFormObject=function(k,ne){var me=Bn[yr[k]];return ve("q"),ve(ne.toString()+" cm"),ve("/"+me.id+" Do"),ve("Q"),this},m.getFormObject=function(k){var ne=Bn[yr[k]];return{x:ne.x,y:ne.y,width:ne.width,height:ne.height,matrix:ne.matrix}},m.save=function(k,ne){return k=k||"generated.pdf",(ne=ne||{}).returnPromise=ne.returnPromise||!1,ne.returnPromise===!1?(ed(xl(Oo()),k),typeof ed.unload=="function"&&Gt.setTimeout&&setTimeout(ed.unload,911),this):new Promise(function(me,be){try{var Re=ed(xl(Oo()),k);typeof ed.unload=="function"&&Gt.setTimeout&&setTimeout(ed.unload,911),me(Re)}catch(qe){be(qe.message)}})},Wt.API)Wt.API.hasOwnProperty(jo)&&(jo==="events"&&Wt.API.events.length?function(k,ne){var me,be,Re;for(Re=ne.length-1;Re!==-1;Re--)me=ne[Re][0],be=ne[Re][1],k.subscribe.apply(k,[me].concat(typeof be=="function"?[be]:be))}(rn,Wt.API.events):m[jo]=Wt.API[jo]);var ls=m.getPageWidth=function(k){return(Dt[k=k||$].mediaBox.topRightX-Dt[k].mediaBox.bottomLeftX)/ut},js=m.setPageWidth=function(k,ne){Dt[k].mediaBox.topRightX=ne*ut+Dt[k].mediaBox.bottomLeftX},qi=m.getPageHeight=function(k){return(Dt[k=k||$].mediaBox.topRightY-Dt[k].mediaBox.bottomLeftY)/ut},Al=m.setPageHeight=function(k,ne){Dt[k].mediaBox.topRightY=ne*ut+Dt[k].mediaBox.bottomLeftY};return m.internal={pdfEscape:In,getStyle:xa,getFont:Xr,getFontSize:lt,getCharSpace:wl,getTextColor:bl,getLineHeight:Ds,getLineHeightFactor:Wa,getLineWidth:oo,write:dt,getHorizontalCoordinate:Vi,getVerticalCoordinate:Kr,getCoordinateString:mu,getVerticalCoordinateString:is,collections:{},newObject:Cr,newAdditionalObject:Ts,newObjectDeferred:Or,newObjectDeferredBegin:$r,getFilters:ri,putStream:dr,events:rn,scaleFactor:ut,pageSize:{getWidth:function(){return ls($)},setWidth:function(k){js($,k)},getHeight:function(){return qi($)},setHeight:function(k){Al($,k)}},encryptionOptions:d,encryption:ir,getEncryptor:Po,output:ko,getNumberOfPages:zn,pages:He,out:ve,f2:L,f3:R,getPageInfo:no,getPageInfoByObjId:Ft,getCurrentPageInfo:ro,getPDFVersion:_,Point:Ls,Rectangle:_l,Matrix:bt,hasHotfix:to},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ls($)},set:function(k){js($,k)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return qi($)},set:function(k){Al($,k)},enumerable:!0,configurable:!0}),hc.call(m,Te),It="F1",Jo(i,t),rn.publish("initialized"),m}sh.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},sh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},sh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},sh.prototype.processOwnerPassword=function(n,e){return rx(nx(e).substr(0,5),n)},sh.prototype.encryptor=function(n,e){var t=nx(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return rx(t,r)}},nm.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||ur(n)!==ur(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Wt.API={events:[]},Wt.version="3.0.1";var ti=Wt.API,P5=1,_d=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},th=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(n){return n.toFixed(2)},Qu=function(n){return n.toFixed(5)};ti.__acroform__={};var Co=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},z4=function(n){return n*P5},$l=function(n){var e=new UE,t=Rt.internal.getHeight(n)||0,r=Rt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(en(r)),Number(en(t))],e},Bq=ti.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},Fq=ti.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},zq=ti.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},di=ti.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zq(n,e-1)},hi=ti.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Bq(n,e-1)},pi=ti.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Fq(n,e-1)},Uq=ti.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],o=n[2],s=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(a+s)||0,c.upperRight_X=t(i+o)||0,c.upperRight_Y=r(a)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},Vq=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=ix(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+en(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=$l(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},ix=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var a=t,o=Rt.internal.getHeight(n)||0;o=o<0?-o:o;var s=Rt.internal.getWidth(n)||0;s=s<0?-s:s;var c=function(R,I,P){if(R+1<i.length){var M=I+" "+i[R+1][0];return Jp(M,n,P).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var f,d,p=Jp("3",n,a).height,g=n.multiline?o-a:(o-p)/2,m=g+=2,x=0,_=0,T=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Jp(e,n,a=12).width+", FieldWidth:"+s+`
`;break}for(var A="",D=0,U=0;U<i.length;U++)if(i.hasOwnProperty(U)){var H=!1;if(i[U].length!==1&&T!==i[U].length-1){if((p+2)*(D+2)+2>o)continue e;A+=i[U][T],H=!0,_=U,U--}else{A=(A+=i[U][T]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var X=parseInt(U),q=c(X,A,a),j=U>=i.length-1;if(q&&!j){A+=" ",T=0;continue}if(q||j){if(j)_=X;else if(n.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(D+2)+2>o)continue e;_=X}}for(var C="",N=x;N<=_;N++){var L=i[N];if(n.multiline){if(N===_){C+=L[T]+" ",T=(T+1)%L.length;continue}if(N===x){C+=L[L.length-1]+" ";continue}}C+=L[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,d=Jp(C,n,a).width,n.textAlign){case"right":f=s-d-2;break;case"center":f=(s-d)/2;break;case"left":default:f=2}e+=en(f)+" "+en(m)+` Td
`,e+="("+_d(C)+`) Tj
`,e+=-en(f)+` 0 Td
`,m=-(a+2),d=0,x=H?_:_+1,D++,A=""}break}return r.text=e,r.fontSize=a,r},Jp=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},qq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Hq=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Wq=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),ur(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},Gq=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(pl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(qq)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");P5=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new VE,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&Hq(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var s=r[o],c=[],f=s.Rect;if(s.Rect&&(s.Rect=Uq(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Rt.createDefaultAppearanceStream(s),ur(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(c=s.getKeyValueListForStream()),s.Rect=f,s.hasAppearanceStream&&!s.appearanceStreamContent){var d=Vq(s);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(s.appearanceStreamContent){var p="";for(var g in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(g)){var m=s.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,s)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,s)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:s.objId}),i.internal.out("endobj")}a&&Wq(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},zE=ti.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),ur(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+_d(r(n[a].toString()))+")"):i+=n[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Yv=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+_d(r(n))+")"},Ql=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ql.prototype.toString=function(){return this.objId+" 0 R"},Ql.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ql.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:zE(i,this.objId,this.scope)}):i instanceof Ql?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var UE=function(){Ql.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Co(UE,Ql);var VE=function(){Ql.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+_d(t(n))+")"}},set:function(t){n=t}})};Co(VE,Ql);var pl=function n(){Ql.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!di(e,3)},set:function(A){A?this.F=hi(e,3):this.F=pi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');t=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof rm)return;a="FieldObject"+n.FieldNum++}var A=function(D){return D};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+_d(A(a))+")"},set:function(A){a=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(A){a=A}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(A){s=A}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(A){c=A}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/P5:f},set:function(A){f=A}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof rm||this instanceof cd))return Yv(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Qi?g:Yv(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=this instanceof Qi?A:A.substr(0,1)==="("?th(A.substr(1,A.length-2)):th(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi?th(g.substr(1,g.length-1)):g},set:function(A){A=A.toString(),g=this instanceof Qi?"/"+A:A}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Qi?m:Yv(m,this.objId,this.scope)},set:function(A){A=A.toString(),m=this instanceof Qi?A:A.substr(0,1)==="("?th(A.substr(1,A.length-2)):th(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi?th(m.substr(1,m.length-1)):m},set:function(A){A=A.toString(),m=this instanceof Qi?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(A){A=!!A,_=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(A){x=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,1)},set:function(A){A?this.Ff=hi(this.Ff,1):this.Ff=pi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,2)},set:function(A){A?this.Ff=hi(this.Ff,2):this.Ff=pi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,3)},set:function(A){A?this.Ff=hi(this.Ff,3):this.Ff=pi(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');T=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(T){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};Co(pl,Ql);var yh=function(){pl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return zE(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(a,o,s){s||(s=1);for(var c,f=[];c=o.exec(a);)f.push(c[s]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,18)},set:function(t){t?this.Ff=hi(this.Ff,18):this.Ff=pi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=hi(this.Ff,19):this.Ff=pi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,20)},set:function(t){t?(this.Ff=hi(this.Ff,20),e.sort()):this.Ff=pi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,22)},set:function(t){t?this.Ff=hi(this.Ff,22):this.Ff=pi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,23)},set:function(t){t?this.Ff=hi(this.Ff,23):this.Ff=pi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,27)},set:function(t){t?this.Ff=hi(this.Ff,27):this.Ff=pi(this.Ff,27)}}),this.hasAppearanceStream=!1};Co(yh,pl);var xh=function(){yh.call(this),this.fontName="helvetica",this.combo=!1};Co(xh,yh);var bh=function(){xh.call(this),this.combo=!0};Co(bh,xh);var yg=function(){bh.call(this),this.edit=!0};Co(yg,bh);var Qi=function(){pl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,15)},set:function(t){t?this.Ff=hi(this.Ff,15):this.Ff=pi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,16)},set:function(t){t?this.Ff=hi(this.Ff,16):this.Ff=pi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,17)},set:function(t){t?this.Ff=hi(this.Ff,17):this.Ff=pi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,26)},set:function(t){t?this.Ff=hi(this.Ff,26):this.Ff=pi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+_d(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){ur(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Co(Qi,pl);var xg=function(){Qi.call(this),this.pushButton=!0};Co(xg,Qi);var wh=function(){Qi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Co(wh,Qi);var rm=function(){var n,e;pl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+_d(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ur(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Co(rm,pl),wh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},wh.prototype.createOption=function(n){var e=new rm;return e.Parent=this,e.optionName=n,this.Kids.push(e),$q.call(this.scope,e),e};var bg=function(){Qi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rt.CheckBox.createAppearanceStream()};Co(bg,Qi);var cd=function(){pl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,13)},set:function(e){e?this.Ff=hi(this.Ff,13):this.Ff=pi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,21)},set:function(e){e?this.Ff=hi(this.Ff,21):this.Ff=pi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,23)},set:function(e){e?this.Ff=hi(this.Ff,23):this.Ff=pi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,24)},set:function(e){e?this.Ff=hi(this.Ff,24):this.Ff=pi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,25)},set:function(e){e?this.Ff=hi(this.Ff,25):this.Ff=pi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,26)},set:function(e){e?this.Ff=hi(this.Ff,26):this.Ff=pi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Co(cd,pl);var wg=function(){cd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,14)},set:function(n){n?this.Ff=hi(this.Ff,14):this.Ff=pi(this.Ff,14)}}),this.password=!0};Co(wg,cd);var Rt={CheckBox:{createAppearanceStream:function(){return{N:{On:Rt.CheckBox.YesNormal},D:{On:Rt.CheckBox.YesPushDown,Off:Rt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=ix(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+en(Rt.internal.getWidth(n))+" "+en(Rt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+en(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=$l(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=Rt.internal.getHeight(n),o=Rt.internal.getWidth(n),s=ix(n,n.caption);return i.push("1 g"),i.push("0 0 "+en(o)+" "+en(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+en(o-1)+" "+en(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+en(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(Rt.internal.getWidth(n))+" "+en(Rt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Rt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Rt.RadioButton.Circle.YesNormal,e.D[n]=Rt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=Rt.internal.getWidth(n)<=Rt.internal.getHeight(n)?Rt.internal.getWidth(n)/4:Rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Rt.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Qu(Rt.internal.getWidth(n)/2)+" "+Qu(Rt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=Rt.internal.getWidth(n)<=Rt.internal.getHeight(n)?Rt.internal.getWidth(n)/4:Rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Rt.internal.Bezier_C).toFixed(5)),o=Number((r*Rt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qu(Rt.internal.getWidth(n)/2)+" "+Qu(Rt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Qu(Rt.internal.getWidth(n)/2)+" "+Qu(Rt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=Rt.internal.getWidth(n)<=Rt.internal.getHeight(n)?Rt.internal.getWidth(n)/4:Rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Rt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qu(Rt.internal.getWidth(n)/2)+" "+Qu(Rt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Rt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Rt.RadioButton.Cross.YesNormal,e.D[n]=Rt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=Rt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+en(Rt.internal.getWidth(n)-2)+" "+en(Rt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),t.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),t.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),t.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=Rt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+en(Rt.internal.getWidth(n))+" "+en(Rt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+en(Rt.internal.getWidth(n)-2)+" "+en(Rt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(en(t.x1.x)+" "+en(t.x1.y)+" m"),r.push(en(t.x2.x)+" "+en(t.x2.y)+" l"),r.push(en(t.x4.x)+" "+en(t.x4.y)+" m"),r.push(en(t.x3.x)+" "+en(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(Rt.internal.getWidth(n))+" "+en(Rt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Rt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Rt.internal.getWidth(n),t=Rt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Rt.internal.getWidth=function(n){var e=0;return ur(n)==="object"&&(e=z4(n.Rect[2])),e},Rt.internal.getHeight=function(n){var e=0;return ur(n)==="object"&&(e=z4(n.Rect[3])),e};var $q=ti.addField=function(n){if(Gq(this,n),!(n instanceof pl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ti.AcroFormChoiceField=yh,ti.AcroFormListBox=xh,ti.AcroFormComboBox=bh,ti.AcroFormEditBox=yg,ti.AcroFormButton=Qi,ti.AcroFormPushButton=xg,ti.AcroFormRadioButton=wh,ti.AcroFormCheckBox=bg,ti.AcroFormTextField=cd,ti.AcroFormPasswordField=wg,ti.AcroFormAppearance=Rt,ti.AcroForm={ChoiceField:yh,ListBox:xh,ComboBox:bh,EditBox:yg,Button:Qi,PushButton:xg,RadioButton:wh,CheckBox:bg,TextField:cd,PasswordField:wg,Appearance:Rt},Wt.AcroForm={ChoiceField:yh,ListBox:xh,ComboBox:bh,EditBox:yg,Button:Qi,PushButton:xg,RadioButton:wh,CheckBox:bg,TextField:cd,PasswordField:wg,Appearance:Rt};Wt.AcroForm;function qE(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(R,I){var P,M,K,F,z,ee=e;if((I=I||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(q(R))for(z in t)for(K=t[z],P=0;P<K.length;P+=1){for(F=!0,M=0;M<K[P].length;M+=1)if(K[P][M]!==void 0&&K[P][M]!==R[M]){F=!1;break}if(F===!0){ee=z;break}}else for(z in t)for(K=t[z],P=0;P<K.length;P+=1){for(F=!0,M=0;M<K[P].length;M+=1)if(K[P][M]!==void 0&&K[P][M]!==R.charCodeAt(M)){F=!1;break}if(F===!0){ee=z;break}}return ee===e&&I!==e&&(ee=I),ee},i=function R(I){for(var P=this.internal.write,M=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var F=[];if(F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Image"}),F.push({key:"Width",value:I.width}),F.push({key:"Height",value:I.height}),I.colorSpace===T.INDEXED?F.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(F.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===T.DEVICE_CMYK&&F.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),F.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&F.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var z="",ee=0,ae=I.transparency.length;ee<ae;ee++)z+=I.transparency[ee]+" "+I.transparency[ee]+" ";F.push({key:"Mask",value:"["+z+"]"})}I.sMask!==void 0&&F.push({key:"SMask",value:I.objectId+1+" 0 R"});var Q=I.filter!==void 0?["/"+I.filter]:void 0;if(M({data:I.data,additionalKeyValues:F,alreadyAppliedFilters:Q,objectId:I.objectId}),P("endobj"),"sMask"in I&&I.sMask!==void 0){var he="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,G={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:he,data:I.sMask};"filter"in I&&(G.filter=I.filter),R.call(this,G)}if(I.colorSpace===T.INDEXED){var $=this.internal.newObject();M({data:C(new Uint8Array(I.palette)),objectId:$}),P("endobj")}},a=function(){var R=this.internal.collections.addImage_images;for(var I in R)i.call(this,R[I])},o=function(){var R,I=this.internal.collections.addImage_images,P=this.internal.write;for(var M in I)P("/I"+(R=I[M]).index,R.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var R=this.internal.collections.addImage_images;return s.call(this),R},f=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof n["process"+R.toUpperCase()]=="function"},p=function(R){return ur(R)==="object"&&R.nodeType===1},g=function(R,I){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var P=""+R.getAttribute("src");if(P.indexOf("data:image/")===0)return t1(unescape(P).split("base64,").pop());var M=n.loadFile(P,!0);if(M!==void 0)return M}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var K;switch(I){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return t1(R.toDataURL(K,1).split("base64,").pop())}},m=function(R){var I=this.internal.collections.addImage_images;if(I){for(var P in I)if(R===I[P].alias)return I[P]}},x=function(R,I,P){return R||I||(R=-96,I=-96),R<0&&(R=-1*P.width*72/R/this.internal.scaleFactor),I<0&&(I=-1*P.height*72/I/this.internal.scaleFactor),R===0&&(R=I*P.width/P.height),I===0&&(I=R*P.height/P.width),[R,I]},_=function(R,I,P,M,K,F){var z=x.call(this,P,M,K),ee=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,Q=c.call(this);if(P=z[0],M=z[1],Q[K.index]=K,F){F*=Math.PI/180;var he=Math.cos(F),G=Math.sin(F),$=function(re){return re.toFixed(4)},Z=[$(he),$(G),$(-1*G),$(he),0,0,"cm"]}this.internal.write("q"),F?(this.internal.write([1,"0","0",1,ee(R),ae(I+M),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([ee(P),"0","0",ee(M),"0","0","cm"].join(" "))):this.internal.write([ee(P),"0","0",ee(M),ee(R),ae(I+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},T=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(R){var I,P,M=0;if(typeof R=="string")for(P=R.length,I=0;I<P;I++)M=(M<<5)-M+R.charCodeAt(I),M|=0;else if(q(R))for(P=R.byteLength/2,I=0;I<P;I++)M=(M<<5)-M+R[I],M|=0;return M},U=n.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var I=!0;return R.length===0&&(I=!1),R.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(I=!1),I},H=n.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var I=R.indexOf(",");return I<0?null:R.substring(0,I).trim().endsWith("base64")?R.substring(I+1):null},X=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(R){return X()&&R instanceof ArrayBuffer};var q=n.__addimage__.isArrayBufferView=function(R){return X()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},j=n.__addimage__.binaryStringToUint8Array=function(R){for(var I=R.length,P=new Uint8Array(I),M=0;M<I;M++)P[M]=R.charCodeAt(M);return P},C=n.__addimage__.arrayBufferToBinaryString=function(R){for(var I="",P=q(R)?R:new Uint8Array(R),M=0;M<P.length;M+=8192)I+=String.fromCharCode.apply(null,P.subarray(M,M+8192));return I};n.addImage=function(){var R,I,P,M,K,F,z,ee,ae;if(typeof arguments[1]=="number"?(I=e,P=arguments[1],M=arguments[2],K=arguments[3],F=arguments[4],z=arguments[5],ee=arguments[6],ae=arguments[7]):(I=arguments[1],P=arguments[2],M=arguments[3],K=arguments[4],F=arguments[5],z=arguments[6],ee=arguments[7],ae=arguments[8]),ur(R=arguments[0])==="object"&&!p(R)&&"imageData"in R){var Q=R;R=Q.imageData,I=Q.format||I||e,P=Q.x||P||0,M=Q.y||M||0,K=Q.w||Q.width||K,F=Q.h||Q.height||F,z=Q.alias||z,ee=Q.compression||ee,ae=Q.rotation||Q.angle||ae}var he=this.internal.getFilters();if(ee===void 0&&he.indexOf("FlateEncode")!==-1&&(ee="SLOW"),isNaN(P)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var G=N.call(this,R,I,z,ee);return _.call(this,P,M,K,F,G,ae),this};var N=function(R,I,P,M){var K,F,z;if(typeof R=="string"&&r(R)===e){R=unescape(R);var ee=L(R,!1);(ee!==""||(ee=n.loadFile(R,!0))!==void 0)&&(R=ee)}if(p(R)&&(R=g(R,I)),I=r(R,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((z=P)==null||z.length===0)&&(P=function(ae){return typeof ae=="string"||q(ae)?D(ae):q(ae.data)?D(ae.data):null}(R)),(K=m.call(this,P))||(X()&&(R instanceof Uint8Array||I==="RGBA"||(F=R,R=j(R))),K=this["process"+I.toUpperCase()](R,f.call(this),P,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in n.image_compression?ae:A.NONE}(M),F)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},L=n.__addimage__.convertBase64ToBinaryString=function(R,I){I=typeof I!="boolean"||I;var P,M="";if(typeof R=="string"){var K;P=(K=H(R))!==null&&K!==void 0?K:R;try{M=t1(P)}catch(F){if(I)throw U(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+F.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};n.getImageProperties=function(R){var I,P,M="";if(p(R)&&(R=g(R)),typeof R=="string"&&r(R)===e&&((M=L(R,!1))===""&&(M=n.loadFile(R)||""),R=M),P=r(R),!d(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!X()||R instanceof Uint8Array||(R=j(R)),!(I=this["process"+P.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=P,I}})(Wt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Wt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,d=!1,p=0;p<f.length&&!d;p++)switch((r=f[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<f.length;g++){r=f[g];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(_.objId),D=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+m(A(r.contents))+")",a+=" /Popup "+T.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(A(D))+") >>",_.content=a;var U=_.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+U,r.open&&(a+=" /Open true"),a+=" >>",T.content=a,this.internal.write(_.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var H=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+H+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var X=this.annotations._nameMap[r.options.name];r.options.pageNumber=X.page,r.options.top=X.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var q=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+q+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,o){var s=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:c(t),y:f(r),w:c(t+i),h:f(r+a)},options:o,type:"link"})},n.textWithLink=function(t,r,i,a){var o,s,c=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var d=this.splitTextToSize(t,s).length;o=Math.ceil(f*d)}else s=c,o=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=c/2),a.align==="right"&&(r-=c),this.link(r,i-f,s,o,a),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Wt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},s=n.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&i.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(_){var T=0,A=t,D="",U=0;for(T=0;T<_.length;T+=1)A[_.charCodeAt(T)]!==void 0?(U++,typeof(A=A[_.charCodeAt(T)])=="number"&&(D+=String.fromCharCode(A),A=t,U=0),T===_.length-1&&(A=t,D+=_.charAt(T-(U-1)),T-=U-1,U=0)):(A=t,D+=_.charAt(T-U),T-=U,U=0);return D};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(_,T,A){return o(_)?a(_)===!1?-1:!f(_)||!o(T)&&!o(A)||!o(A)&&s(T)||s(_)&&!o(T)||s(_)&&c(T)||s(_)&&s(T)?0:d(_)&&o(T)&&!s(T)&&o(A)&&f(A)?3:s(_)||!o(A)?1:2:-1},m=function(_){var T=0,A=0,D=0,U="",H="",X="",q=(_=_||"").split("\\s+"),j=[];for(T=0;T<q.length;T+=1){for(j.push(""),A=0;A<q[T].length;A+=1)U=q[T][A],H=q[T][A-1],X=q[T][A+1],o(U)?(D=g(U,H,X),j[T]+=D!==-1?String.fromCharCode(e[U.charCodeAt(0)][D]):U):j[T]+=U;j[T]=p(j[T])}return j.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var _,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(T)){var D=0;for(A=[],D=0;D<T.length;D+=1)Array.isArray(T[D])?A.push([m(T[D][0]),T[D][1],T[D][2]]):A.push([m(T[D])]);_=A}else _=m(T);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",x])}(Wt.API),Wt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(s){t=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Wt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(_){x=_}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,f){r.call(this);var d=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),g=f.scaleFactor||this.internal.scaleFactor,m=0,x=0,_=0,T=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var A=f.maxWidth;A>0?typeof c=="string"?c=this.splitTextToSize(c,A):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(U,H){return U.concat(T.splitTextToSize(H,A))},[])):c=Array.isArray(c)?c:[c];for(var D=0;D<c.length;D++)m<(_=this.getStringUnitWidth(c[D],{font:p})*d)&&(m=_);return m!==0&&(x=c.length),{w:m/=g,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,m&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};n.table=function(c,f,d,p,g){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,x,_,T,A=[],D=[],U=[],H={},X={},q=[],j=[],C=(g=g||{}).autoSize||!1,N=g.printHeaders!==!1,L=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,R=g.margins||Object.assign({width:this.getPageWidth()},e),I=typeof g.padding=="number"?g.padding:3,P=g.headerBackgroundColor||"#c8c8c8",M=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=M,this.setFontSize(L),p==null)D=A=Object.keys(d[0]),U=A.map(function(){return"left"});else if(Array.isArray(p)&&ur(p[0])==="object")for(A=p.map(function(Q){return Q.name}),D=p.map(function(Q){return Q.prompt||Q.name||""}),U=p.map(function(Q){return Q.align||"left"}),m=0;m<p.length;m+=1)X[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=A=p,U=A.map(function(){return"left"}));if(C||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<A.length;m+=1){for(H[T=A[m]]=d.map(function(Q){return Q[T]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=H[T],this.setFont(void 0,"normal"),_=0;_<x.length;_+=1)q.push(this.getTextDimensions(x[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);X[T]=Math.max.apply(null,q)+I+I,q=[]}if(N){var K={};for(m=0;m<A.length;m+=1)K[A[m]]={},K[A[m]].text=D[m],K[A[m]].align=U[m];var F=s.call(this,K,X);j=A.map(function(Q){return new a(c,f,X[Q],F,K[Q].text,void 0,K[Q].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var z=p.reduce(function(Q,he){return Q[he.name]=he.align,Q},{});for(m=0;m<d.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:d[m]},this);var ee=s.call(this,d[m],X);for(_=0;_<A.length;_+=1){var ae=d[m][A[_]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:_,data:ae},this),o.call(this,new a(c,f,X[A[_]],ee,ae,m+2,z[A[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var s=function(c,f){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(m){var x=c[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,f[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Wt.API);var HE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},WE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ax=qE(WE),GE=[100,200,300,400,500,600,700,800,900],Yq=qE(GE);function ox(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return HE[a=a||"normal"]?a:"normal"}(n.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(a){return typeof ax[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function U4(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Xq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},V4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function q4(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Kq(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Xq,t.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=ox(e[s])).family]&&(a.family=i[a.family]),n.hasOwnProperty(a.family)){o=n[a.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+q4(a)+"' and default family '"+r+"'.");if(o=function(c,f){if(f[c])return f[c];var d=ax[c],p=d<=ax.normal?-1:1,g=U4(f,WE,d,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(a.stretch,o),o=function(c,f){if(f[c])return f[c];for(var d=HE[c],p=0;p<d.length;++p)if(f[d[p]])return f[d[p]];throw new Error("Could not find a matching font-style for "+c)}(a.style,o),!(o=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var d=Yq[c],p=U4(f,GE,d,c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+q4(a)+"'.");return o}function H4(n){return n.trimLeft()}function Qq(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Zq(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var eg,W4,G4,Xv=["times"];(function(n){var e,t,r,i,a,o,s,c,f,d=function(G){return G=G||{},this.isStrokeTransparent=G.isStrokeTransparent||!1,this.strokeOpacity=G.strokeOpacity||1,this.strokeStyle=G.strokeStyle||"#000000",this.fillStyle=G.fillStyle||"#000000",this.isFillTransparent=G.isFillTransparent||!1,this.fillOpacity=G.fillOpacity||1,this.font=G.font||"10px sans-serif",this.textBaseline=G.textBaseline||"alphabetic",this.textAlign=G.textAlign||"left",this.lineWidth=G.lineWidth||1,this.lineJoin=G.lineJoin||"miter",this.lineCap=G.lineCap||"butt",this.path=G.path||[],this.transform=G.transform!==void 0?G.transform.clone():new c,this.globalCompositeOperation=G.globalCompositeOperation||"normal",this.globalAlpha=G.globalAlpha||1,this.clip_path=G.clip_path||[],this.currentPoint=G.currentPoint||new o,this.miterLimit=G.miterLimit||10,this.lastPoint=G.lastPoint||new o,this.lineDashOffset=G.lineDashOffset||0,this.lineDash=G.lineDash||[],this.margin=G.margin||[0,0,0,0],this.prevPageLastElemOffset=G.prevPageLastElemOffset||0,this.ignoreClearRect=typeof G.ignoreClearRect!="boolean"||G.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,c=this.internal.Matrix,f=new d}]);var p=function(G){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=G;Object.defineProperty(this,"pdf",{get:function(){return $}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(ke){Z=!!ke}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(ke){re=!!ke}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(ke){isNaN(ke)||(de=ke)}});var xe=0;Object.defineProperty(this,"posY",{get:function(){return xe},set:function(ke){isNaN(ke)||(xe=ke)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ke){var ve;typeof ke=="number"?ve=[ke,ke,ke,ke]:((ve=new Array(4))[0]=ke[0],ve[1]=ke.length>=2?ke[1]:ve[0],ve[2]=ke.length>=3?ke[2]:ve[0],ve[3]=ke.length>=4?ke[3]:ve[1]),f.margin=ve}});var we=!1;Object.defineProperty(this,"autoPaging",{get:function(){return we},set:function(ke){we=ke}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(ke){Ee=ke}});var Ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ve},set:function(ke){Ve=ke}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ke){ke instanceof d&&(f=ke)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ke){f.path=ke}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(ke){He=ke}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ke){var ve;ve=g(ke),this.ctx.fillStyle=ve.style,this.ctx.isFillTransparent=ve.a===0,this.ctx.fillOpacity=ve.a,this.pdf.setFillColor(ve.r,ve.g,ve.b,{a:ve.a}),this.pdf.setTextColor(ve.r,ve.g,ve.b,{a:ve.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ke){var ve=g(ke);this.ctx.strokeStyle=ve.style,this.ctx.isStrokeTransparent=ve.a===0,this.ctx.strokeOpacity=ve.a,ve.a===0?this.pdf.setDrawColor(255,255,255):(ve.a,this.pdf.setDrawColor(ve.r,ve.g,ve.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ke){["butt","round","square"].indexOf(ke)!==-1&&(this.ctx.lineCap=ke,this.pdf.setLineCap(ke))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ke){isNaN(ke)||(this.ctx.lineWidth=ke,this.pdf.setLineWidth(ke))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ke){["bevel","round","miter"].indexOf(ke)!==-1&&(this.ctx.lineJoin=ke,this.pdf.setLineJoin(ke))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ke){isNaN(ke)||(this.ctx.miterLimit=ke,this.pdf.setMiterLimit(ke))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ke){this.ctx.textBaseline=ke}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ke){["right","end","center","left","start"].indexOf(ke)!==-1&&(this.ctx.textAlign=ke)}});var it=null;function ct(ke,ve){if(it===null){var dt=function(ot){var Te=[];return Object.keys(ot).forEach(function(Ke){ot[Ke].forEach(function(Ge){var lt=null;switch(Ge){case"bold":lt={family:Ke,weight:"bold"};break;case"italic":lt={family:Ke,style:"italic"};break;case"bolditalic":lt={family:Ke,weight:"bold",style:"italic"};break;case"":case"normal":lt={family:Ke}}lt!==null&&(lt.ref={name:Ke,style:Ge},Te.push(lt))})}),Te}(ke.getFontList());it=function(ot){for(var Te={},Ke=0;Ke<ot.length;++Ke){var Ge=ox(ot[Ke]),lt=Ge.family,ft=Ge.stretch,et=Ge.style,Ct=Ge.weight;Te[lt]=Te[lt]||{},Te[lt][ft]=Te[lt][ft]||{},Te[lt][ft][et]=Te[lt][ft][et]||{},Te[lt][ft][et][Ct]=Ge}return Te}(dt.concat(ve))}return it}var vt=null;Object.defineProperty(this,"fontFaces",{get:function(){return vt},set:function(ke){it=null,vt=ke}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ke){var ve;if(this.ctx.font=ke,(ve=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ke))!==null){var dt=ve[1];ve[2];var ot=ve[3],Te=ve[4];ve[5];var Ke=ve[6],Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Te)[2];Te=Math.floor(Ge==="px"?parseFloat(Te)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(Te)*this.pdf.getFontSize():parseFloat(Te)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Te);var lt=function(xt){var It,ut,bn=[],Vt=xt.trim();if(Vt==="")return Xv;if(Vt in V4)return[V4[Vt]];for(;Vt!=="";){switch(ut=null,It=(Vt=H4(Vt)).charAt(0)){case'"':case"'":ut=Qq(Vt.substring(1),It);break;default:ut=Zq(Vt)}if(ut===null||(bn.push(ut[0]),(Vt=H4(ut[1]))!==""&&Vt.charAt(0)!==","))return Xv;Vt=Vt.replace(/^,/,"")}return bn}(Ke);if(this.fontFaces){var ft=Kq(ct(this.pdf,this.fontFaces),lt.map(function(xt){return{family:xt,stretch:"normal",weight:ot,style:dt}}));this.pdf.setFont(ft.ref.name,ft.ref.style)}else{var et="";(ot==="bold"||parseInt(ot,10)>=700||dt==="bold")&&(et="bold"),dt==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var Ct="",yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},At=0;At<lt.length;At++){if(this.pdf.internal.getFont(lt[At],et,{noFallback:!0,disableWarning:!0})!==void 0){Ct=lt[At];break}if(et==="bolditalic"&&this.pdf.internal.getFont(lt[At],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ct=lt[At],et="bold";else if(this.pdf.internal.getFont(lt[At],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ct=lt[At],et="normal";break}}if(Ct===""){for(var Nt=0;Nt<lt.length;Nt++)if(yt[lt[Nt]]){Ct=yt[lt[Nt]];break}}Ct=Ct===""?"Times":Ct,this.pdf.setFont(Ct,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ke){this.ctx.globalCompositeOperation=ke}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ke){this.ctx.globalAlpha=ke}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ke){this.ctx.lineDashOffset=ke,he.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ke){this.ctx.lineDash=ke,he.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ke){this.ctx.ignoreClearRect=!!ke}})};p.prototype.setLineDash=function(G){this.lineDash=G},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){H.call(this,"fill",!1)},p.prototype.stroke=function(){H.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(G,$){if(isNaN(G)||isNaN($))throw wr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new o(G,$));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(G,$)},p.prototype.closePath=function(){var G=new o(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&ur(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){G=new o(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.lineTo=function(G,$){if(isNaN(G)||isNaN($))throw wr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new o(G,$));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),H.call(this,null,!0)},p.prototype.quadraticCurveTo=function(G,$,Z,re){if(isNaN(Z)||isNaN(re)||isNaN(G)||isNaN($))throw wr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new o(Z,re)),xe=this.ctx.transform.applyToPoint(new o(G,$));this.path.push({type:"qct",x1:xe.x,y1:xe.y,x:de.x,y:de.y}),this.ctx.lastPoint=new o(de.x,de.y)},p.prototype.bezierCurveTo=function(G,$,Z,re,de,xe){if(isNaN(de)||isNaN(xe)||isNaN(G)||isNaN($)||isNaN(Z)||isNaN(re))throw wr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var we=this.ctx.transform.applyToPoint(new o(de,xe)),Ee=this.ctx.transform.applyToPoint(new o(G,$)),Ve=this.ctx.transform.applyToPoint(new o(Z,re));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:Ve.x,y2:Ve.y,x:we.x,y:we.y}),this.ctx.lastPoint=new o(we.x,we.y)},p.prototype.arc=function(G,$,Z,re,de,xe){if(isNaN(G)||isNaN($)||isNaN(Z)||isNaN(re)||isNaN(de))throw wr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(xe=!!xe,!this.ctx.transform.isIdentity){var we=this.ctx.transform.applyToPoint(new o(G,$));G=we.x,$=we.y;var Ee=this.ctx.transform.applyToPoint(new o(0,Z)),Ve=this.ctx.transform.applyToPoint(new o(0,0));Z=Math.sqrt(Math.pow(Ee.x-Ve.x,2)+Math.pow(Ee.y-Ve.y,2))}Math.abs(de-re)>=2*Math.PI&&(re=0,de=2*Math.PI),this.path.push({type:"arc",x:G,y:$,radius:Z,startAngle:re,endAngle:de,counterclockwise:xe})},p.prototype.arcTo=function(G,$,Z,re,de){throw new Error("arcTo not implemented.")},p.prototype.rect=function(G,$,Z,re){if(isNaN(G)||isNaN($)||isNaN(Z)||isNaN(re))throw wr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(G,$),this.lineTo(G+Z,$),this.lineTo(G+Z,$+re),this.lineTo(G,$+re),this.lineTo(G,$),this.lineTo(G+Z,$),this.lineTo(G,$)},p.prototype.fillRect=function(G,$,Z,re){if(isNaN(G)||isNaN($)||isNaN(Z)||isNaN(re))throw wr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(G,$,Z,re),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},p.prototype.strokeRect=function(G,$,Z,re){if(isNaN(G)||isNaN($)||isNaN(Z)||isNaN(re))throw wr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(G,$,Z,re),this.stroke())},p.prototype.clearRect=function(G,$,Z,re){if(isNaN(G)||isNaN($)||isNaN(Z)||isNaN(re))throw wr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(G,$,Z,re))},p.prototype.save=function(G){G=typeof G!="boolean"||G;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage($),G){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},p.prototype.restore=function(G){G=typeof G!="boolean"||G;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage($),G&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(G){var $,Z,re,de;if(G.isCanvasGradient===!0&&(G=G.getColor()),!G)return{r:0,g:0,b:0,a:0,style:G};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(G))$=0,Z=0,re=0,de=0;else{var xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(G);if(xe!==null)$=parseInt(xe[1]),Z=parseInt(xe[2]),re=parseInt(xe[3]),de=1;else if((xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(G))!==null)$=parseInt(xe[1]),Z=parseInt(xe[2]),re=parseInt(xe[3]),de=parseFloat(xe[4]);else{if(de=1,typeof G=="string"&&G.charAt(0)!=="#"){var we=new jE(G);G=we.ok?we.toHex():"#000000"}G.length===4?($=G.substring(1,2),$+=$,Z=G.substring(2,3),Z+=Z,re=G.substring(3,4),re+=re):($=G.substring(1,3),Z=G.substring(3,5),re=G.substring(5,7)),$=parseInt($,16),Z=parseInt(Z,16),re=parseInt(re,16)}}return{r:$,g:Z,b:re,a:de,style:G}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(G,$,Z,re){if(isNaN($)||isNaN(Z)||typeof G!="string")throw wr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!m.call(this)){var de=ee(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;I.call(this,{text:G,x:$,y:Z,scale:xe,angle:de,align:this.textAlign,maxWidth:re})}},p.prototype.strokeText=function(G,$,Z,re){if(isNaN($)||isNaN(Z)||typeof G!="string")throw wr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){re=isNaN(re)?void 0:re;var de=ee(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;I.call(this,{text:G,x:$,y:Z,scale:xe,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:re})}},p.prototype.measureText=function(G){if(typeof G!="string")throw wr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,Z=this.pdf.internal.scaleFactor,re=$.internal.getFontSize(),de=$.getStringUnitWidth(G)*re/$.internal.scaleFactor,xe=function(we){var Ee=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this};return new xe({width:de*=Math.round(96*Z/72*1e4)/1e4})},p.prototype.scale=function(G,$){if(isNaN(G)||isNaN($))throw wr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new c(G,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.rotate=function(G){if(isNaN(G))throw wr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new c(Math.cos(G),Math.sin(G),-Math.sin(G),Math.cos(G),0,0);this.ctx.transform=this.ctx.transform.multiply($)},p.prototype.translate=function(G,$){if(isNaN(G)||isNaN($))throw wr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new c(1,0,0,1,G,$);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.transform=function(G,$,Z,re,de,xe){if(isNaN(G)||isNaN($)||isNaN(Z)||isNaN(re)||isNaN(de)||isNaN(xe))throw wr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var we=new c(G,$,Z,re,de,xe);this.ctx.transform=this.ctx.transform.multiply(we)},p.prototype.setTransform=function(G,$,Z,re,de,xe){G=isNaN(G)?1:G,$=isNaN($)?0:$,Z=isNaN(Z)?0:Z,re=isNaN(re)?1:re,de=isNaN(de)?0:de,xe=isNaN(xe)?0:xe,this.ctx.transform=new c(G,$,Z,re,de,xe)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(G,$,Z,re,de,xe,we,Ee,Ve){var He=this.pdf.getImageProperties(G),it=1,ct=1,vt=1,ke=1;re!==void 0&&Ee!==void 0&&(vt=Ee/re,ke=Ve/de,it=He.width/re*Ee/re,ct=He.height/de*Ve/de),xe===void 0&&(xe=$,we=Z,$=0,Z=0),re!==void 0&&Ee===void 0&&(Ee=re,Ve=de),re===void 0&&Ee===void 0&&(Ee=He.width,Ve=He.height);for(var ve,dt=this.ctx.transform.decompose(),ot=ee(dt.rotate.shx),Te=new c,Ke=(Te=(Te=(Te=Te.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale)).applyToRectangle(new s(xe-$*vt,we-Z*ke,re*it,de*ct)),Ge=T.call(this,Ke),lt=[],ft=0;ft<Ge.length;ft+=1)lt.indexOf(Ge[ft])===-1&&lt.push(Ge[ft]);if(U(lt),this.autoPaging)for(var et=lt[0],Ct=lt[lt.length-1],yt=et;yt<Ct+1;yt++){this.pdf.setPage(yt);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=yt===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=yt===1?0:xt+(yt-2)*It;if(this.ctx.clip_path.length!==0){var bn=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ve,this.posX+this.margin[3],-ut+Nt+this.ctx.prevPageLastElemOffset),X.call(this,"fill",!0),this.path=bn}var Vt=JSON.parse(JSON.stringify(Ke));Vt=D([Vt],this.posX+this.margin[3],-ut+Nt+this.ctx.prevPageLastElemOffset)[0];var Jn=(yt>et||yt<Ct)&&_.call(this);Jn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,It,null).clip().discardPath()),this.pdf.addImage(G,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,ot),Jn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(G,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,ot)};var T=function(G,$,Z){var re=[];$=$||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(G.type){default:case"mt":case"lt":re.push(Math.floor((G.y+de)/Z)+1);break;case"arc":re.push(Math.floor((G.y+de-G.radius)/Z)+1),re.push(Math.floor((G.y+de+G.radius)/Z)+1);break;case"qct":var xe=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x,G.y);re.push(Math.floor((xe.y+de)/Z)+1),re.push(Math.floor((xe.y+xe.h+de)/Z)+1);break;case"bct":var we=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x2,G.y2,G.x,G.y);re.push(Math.floor((we.y+de)/Z)+1),re.push(Math.floor((we.y+we.h+de)/Z)+1);break;case"rect":re.push(Math.floor((G.y+de)/Z)+1),re.push(Math.floor((G.y+G.h+de)/Z)+1)}for(var Ee=0;Ee<re.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<re[Ee];)A.call(this);return re},A=function(){var G=this.fillStyle,$=this.strokeStyle,Z=this.font,re=this.lineCap,de=this.lineWidth,xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=G,this.strokeStyle=$,this.font=Z,this.lineCap=re,this.lineWidth=de,this.lineJoin=xe},D=function(G,$,Z){for(var re=0;re<G.length;re++)switch(G[re].type){case"bct":G[re].x2+=$,G[re].y2+=Z;case"qct":G[re].x1+=$,G[re].y1+=Z;case"mt":case"lt":case"arc":default:G[re].x+=$,G[re].y+=Z}return G},U=function(G){return G.sort(function($,Z){return $-Z})},H=function(G,$){for(var Z,re,de=this.fillStyle,xe=this.strokeStyle,we=this.lineCap,Ee=this.lineWidth,Ve=Math.abs(Ee*this.ctx.transform.scaleX),He=this.lineJoin,it=JSON.parse(JSON.stringify(this.path)),ct=JSON.parse(JSON.stringify(this.path)),vt=[],ke=0;ke<ct.length;ke++)if(ct[ke].x!==void 0)for(var ve=T.call(this,ct[ke]),dt=0;dt<ve.length;dt+=1)vt.indexOf(ve[dt])===-1&&vt.push(ve[dt]);for(var ot=0;ot<vt.length;ot++)for(;this.pdf.internal.getNumberOfPages()<vt[ot];)A.call(this);if(U(vt),this.autoPaging)for(var Te=vt[0],Ke=vt[vt.length-1],Ge=Te;Ge<Ke+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=de,this.strokeStyle=xe,this.lineCap=we,this.lineWidth=Ve,this.lineJoin=He;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ft=Ge===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=Ge===1?0:et+(Ge-2)*Ct;if(this.ctx.clip_path.length!==0){var At=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Z,this.posX+this.margin[3],-yt+ft+this.ctx.prevPageLastElemOffset),X.call(this,G,!0),this.path=At}if(re=JSON.parse(JSON.stringify(it)),this.path=D(re,this.posX+this.margin[3],-yt+ft+this.ctx.prevPageLastElemOffset),$===!1||Ge===0){var Nt=(Ge>Te||Ge<Ke)&&_.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Ct,null).clip().discardPath()),X.call(this,G,$),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ee}else this.lineWidth=Ve,X.call(this,G,$),this.lineWidth=Ee;this.path=it},X=function(G,$){if((G!=="stroke"||$||!x.call(this))&&(G==="stroke"||$||!m.call(this))){for(var Z,re,de=[],xe=this.path,we=0;we<xe.length;we++){var Ee=xe[we];switch(Ee.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Ee,deltas:[],abs:[]});break;case"lt":var Ve=de.length;if(xe[we-1]&&!isNaN(xe[we-1].x)&&(Z=[Ee.x-xe[we-1].x,Ee.y-xe[we-1].y],Ve>0)){for(;Ve>=0;Ve--)if(de[Ve-1].close!==!0&&de[Ve-1].begin!==!0){de[Ve-1].deltas.push(Z),de[Ve-1].abs.push(Ee);break}}break;case"bct":Z=[Ee.x1-xe[we-1].x,Ee.y1-xe[we-1].y,Ee.x2-xe[we-1].x,Ee.y2-xe[we-1].y,Ee.x-xe[we-1].x,Ee.y-xe[we-1].y],de[de.length-1].deltas.push(Z);break;case"qct":var He=xe[we-1].x+2/3*(Ee.x1-xe[we-1].x),it=xe[we-1].y+2/3*(Ee.y1-xe[we-1].y),ct=Ee.x+2/3*(Ee.x1-Ee.x),vt=Ee.y+2/3*(Ee.y1-Ee.y),ke=Ee.x,ve=Ee.y;Z=[He-xe[we-1].x,it-xe[we-1].y,ct-xe[we-1].x,vt-xe[we-1].y,ke-xe[we-1].x,ve-xe[we-1].y],de[de.length-1].deltas.push(Z);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Ee)}}re=$?null:G==="stroke"?"stroke":"fill";for(var dt=!1,ot=0;ot<de.length;ot++)if(de[ot].arc)for(var Te=de[ot].abs,Ke=0;Ke<Te.length;Ke++){var Ge=Te[Ke];Ge.type==="arc"?C.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,$,!dt):P.call(this,Ge.x,Ge.y),dt=!0}else if(de[ot].close===!0)this.pdf.internal.out("h"),dt=!1;else if(de[ot].begin!==!0){var lt=de[ot].start.x,ft=de[ot].start.y;M.call(this,de[ot].deltas,lt,ft),dt=!0}re&&N.call(this,re),$&&L.call(this)}},q=function(G){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return G-Z;case"top":return G+$-Z;case"hanging":return G+$-2*Z;case"middle":return G+$/2-Z;case"ideographic":return G;case"alphabetic":default:return G}},j=function(G){return G+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var G=function(){};return G.colorStops=[],G.addColorStop=function($,Z){this.colorStops.push([$,Z])},G.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},G.isCanvasGradient=!0,G},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(G,$,Z,re,de,xe,we,Ee,Ve){for(var He=F.call(this,Z,re,de,xe),it=0;it<He.length;it++){var ct=He[it];it===0&&(Ve?R.call(this,ct.x1+G,ct.y1+$):P.call(this,ct.x1+G,ct.y1+$)),K.call(this,G,$,ct.x2,ct.y2,ct.x3,ct.y3,ct.x4,ct.y4)}Ee?L.call(this):N.call(this,we)},N=function(G){switch(G){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(G,$){this.pdf.internal.out(t(G)+" "+r($)+" m")},I=function(G){var $;switch(G.align){case"right":case"end":$="right";break;case"center":$="center";break;case"left":case"start":default:$="left"}var Z=this.pdf.getTextDimensions(G.text),re=q.call(this,G.y),de=j.call(this,re)-Z.h,xe=this.ctx.transform.applyToPoint(new o(G.x,re)),we=this.ctx.transform.decompose(),Ee=new c;Ee=(Ee=(Ee=Ee.multiply(we.translate)).multiply(we.skew)).multiply(we.scale);for(var Ve,He,it,ct=this.ctx.transform.applyToRectangle(new s(G.x,re,Z.w,Z.h)),vt=Ee.applyToRectangle(new s(G.x,de,Z.w,Z.h)),ke=T.call(this,vt),ve=[],dt=0;dt<ke.length;dt+=1)ve.indexOf(ke[dt])===-1&&ve.push(ke[dt]);if(U(ve),this.autoPaging)for(var ot=ve[0],Te=ve[ve.length-1],Ke=ot;Ke<Te+1;Ke++){this.pdf.setPage(Ke);var Ge=Ke===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[2],et=ft-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],yt=Ct-this.margin[3],At=Ke===1?0:lt+(Ke-2)*et;if(this.ctx.clip_path.length!==0){var Nt=this.path;Ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Ve,this.posX+this.margin[3],-1*At+Ge),X.call(this,"fill",!0),this.path=Nt}var xt=D([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-At+Ge+this.ctx.prevPageLastElemOffset)[0];G.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*G.scale),it=this.lineWidth,this.lineWidth=it*G.scale);var It=this.autoPaging!=="text";if(It||xt.y+xt.h<=ft){if(It||xt.y>=Ge&&xt.x<=Ct){var ut=It?G.text:this.pdf.splitTextToSize(G.text,G.maxWidth||Ct-xt.x)[0],bn=D([JSON.parse(JSON.stringify(ct))],this.posX+this.margin[3],-At+Ge+this.ctx.prevPageLastElemOffset)[0],Vt=It&&(Ke>ot||Ke<Te)&&_.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,et,null).clip().discardPath()),this.pdf.text(ut,bn.x,bn.y,{angle:G.angle,align:$,renderingMode:G.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else xt.y<ft&&(this.ctx.prevPageLastElemOffset+=ft-xt.y);G.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=it)}else G.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*G.scale),it=this.lineWidth,this.lineWidth=it*G.scale),this.pdf.text(G.text,xe.x+this.posX,xe.y+this.posY,{angle:G.angle,align:$,renderingMode:G.renderingMode,maxWidth:G.maxWidth}),G.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=it)},P=function(G,$,Z,re){Z=Z||0,re=re||0,this.pdf.internal.out(t(G+Z)+" "+r($+re)+" l")},M=function(G,$,Z){return this.pdf.lines(G,$,Z,null,null)},K=function(G,$,Z,re,de,xe,we,Ee){this.pdf.internal.out([e(i(Z+G)),e(a(re+$)),e(i(de+G)),e(a(xe+$)),e(i(we+G)),e(a(Ee+$)),"c"].join(" "))},F=function(G,$,Z,re){for(var de=2*Math.PI,xe=Math.PI/2;$>Z;)$-=de;var we=Math.abs(Z-$);we<de&&re&&(we=de-we);for(var Ee=[],Ve=re?-1:1,He=$;we>1e-5;){var it=He+Ve*Math.min(we,xe);Ee.push(z.call(this,G,He,it)),we-=Math.abs(it-He),He=it}return Ee},z=function(G,$,Z){var re=(Z-$)/2,de=G*Math.cos(re),xe=G*Math.sin(re),we=de,Ee=-xe,Ve=we*we+Ee*Ee,He=Ve+we*de+Ee*xe,it=4/3*(Math.sqrt(2*Ve*He)-He)/(we*xe-Ee*de),ct=we-it*Ee,vt=Ee+it*we,ke=ct,ve=-vt,dt=re+$,ot=Math.cos(dt),Te=Math.sin(dt);return{x1:G*Math.cos($),y1:G*Math.sin($),x2:ct*ot-vt*Te,y2:ct*Te+vt*ot,x3:ke*ot-ve*Te,y3:ke*Te+ve*ot,x4:G*Math.cos(Z),y4:G*Math.sin(Z)}},ee=function(G){return 180*G/Math.PI},ae=function(G,$,Z,re,de,xe){var we=G+.5*(Z-G),Ee=$+.5*(re-$),Ve=de+.5*(Z-de),He=xe+.5*(re-xe),it=Math.min(G,de,we,Ve),ct=Math.max(G,de,we,Ve),vt=Math.min($,xe,Ee,He),ke=Math.max($,xe,Ee,He);return new s(it,vt,ct-it,ke-vt)},Q=function(G,$,Z,re,de,xe,we,Ee){var Ve,He,it,ct,vt,ke,ve,dt,ot,Te,Ke,Ge,lt,ft,et=Z-G,Ct=re-$,yt=de-Z,At=xe-re,Nt=we-de,xt=Ee-xe;for(He=0;He<41;He++)ot=(ve=(it=G+(Ve=He/40)*et)+Ve*((vt=Z+Ve*yt)-it))+Ve*(vt+Ve*(de+Ve*Nt-vt)-ve),Te=(dt=(ct=$+Ve*Ct)+Ve*((ke=re+Ve*At)-ct))+Ve*(ke+Ve*(xe+Ve*xt-ke)-dt),He==0?(Ke=ot,Ge=Te,lt=ot,ft=Te):(Ke=Math.min(Ke,ot),Ge=Math.min(Ge,Te),lt=Math.max(lt,ot),ft=Math.max(ft,Te));return new s(Math.round(Ke),Math.round(Ge),Math.round(lt-Ke),Math.round(ft-Ge))},he=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var G,$,Z=(G=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:G,lineDashOffset:$}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Wt.API),function(n){var e=function(a){var o,s,c,f,d,p,g,m,x,_;for(s=[],c=0,f=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;f>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(p=(d=((d=((d=((d=(d-(_=d%85))/85)-(x=d%85))/85)-(m=d%85))/85)-(g=d%85))/85)%85,s.push(p+33,g+33,m+33,x+33,_+33)):s.push(122);return function(T,A){for(var D=A;D>0;D--)T.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},t=function(a){var o,s,c,f,d,p=String,g="length",m=255,x="charCodeAt",_="slice",T="replace";for(a[_](-2),a=a[_](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),c=[],f=0,d=(a+=o="uuuuu"[_](a[g]%5||5))[g];d>f;f+=5)s=52200625*(a[x](f)-33)+614125*(a[x](f+1)-33)+7225*(a[x](f+2)-33)+85*(a[x](f+3)-33)+(a[x](f+4)-33),c.push(m&s>>24,m&s>>16,m&s>>8,m&s);return function(A,D){for(var U=D;U>0;U--)A.pop()}(c,o[g]),p.fromCharCode.apply(p,c)},r=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",c=0;c<a.length;c+=2)s+=String.fromCharCode("0x"+(a[c]+a[c+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=ex(o)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};n.processDataByFilters=function(a,o){var s=0,c=a||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(Wt.API),function(n){n.loadFile=function(e,t,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(c,f,d){var p=new XMLHttpRequest,g=0,m=function(x){var _=x.length,T=[],A=String.fromCharCode;for(g=0;g<_;g+=1)T.push(A(255&x.charCodeAt(g)));return T.join("")};if(p.open("GET",c,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)}(i,a,o)}catch{}return s}(e,t,r)},n.loadImageFile=n.loadFile}(Wt.API),function(n){function e(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):Xy(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):Xy(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var s=ur(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var c=document.createElement(o);for(var f in s.className&&(c.className=s.className),s.innerHTML&&s.dompurify&&(c.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)c.style[f]=s.style[f];return c},a=function o(s){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function c(f,d){for(var p=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),g=f.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(c(g,d));return f.nodeType===1&&(f.nodeName==="CANVAS"?(p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(p.value=f.value),p.addEventListener("load",function(){p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,s(this.prop.container,c)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var c=this.opt.jsPDF,f=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var m=f[g],x=m.src.find(function(_){return _.format==="truetype"});x&&c.addFont(x.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),s(this.prop.container,p)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var s=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(o=o||Wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,c,f){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,c,f){return this.setProgress(o?this.progress.val+o:null,s||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(o,s){var c=this;return this.thenCore(o,s,function(f,d){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,f),p}).then(f,d).then(function(p){return c.updateProgress(1),p})})},a.prototype.thenCore=function(o,s,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=c.call(f,o,s);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(c){s=s.thenCore(c)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Wt.getPageSize=function(o,s,c){if(ur(o)==="object"){var f=o;o=f.orientation,s=f.unit||s,c=f.format||c}s=s||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+s}var m,x=0,_=0;if(g.hasOwnProperty(p))x=g[p][1]/d,_=g[p][0]/d;else try{x=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",_>x&&(m=_,_=x,x=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>_&&(m=_,_=x,x=m)}return{width:_,height:x,unit:s,k:d,orientation:o}},n.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(ox):null;var c=new a(s);return s.worker?c:c.from(o).doCallback()}}(Wt.API),Wt.API.addJS=function(n){return G4=n,this.internal.events.subscribe("postPutResources",function(){eg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(eg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),W4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+G4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){eg!==void 0&&W4!==void 0&&this.internal.out("/Names <</JavaScript "+eg+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=r.exec(o);if(s!=null){var c=s[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,d=[];for(a=0;a<f;a++){var p=t.internal.newObject();d.push(p);var g=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<d.length;a++)t.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var c=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(Wt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,o,s){var c,f=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,_={width:0,height:0,numcomponents:1},T=4;T<x;T+=2){if(T+=m,e.indexOf(p.charCodeAt(T+1))!==-1){g=256*p.charCodeAt(T+5)+p.charCodeAt(T+6),_={width:256*p.charCodeAt(T+7)+p.charCodeAt(T+8),height:g,numcomponents:p.charCodeAt(T+9)};break}m=256*p.charCodeAt(T+2)+p.charCodeAt(T+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}d={data:t,width:c.width,height:c.height,colorSpace:s,bitsPerComponent:8,filter:f,index:r,alias:i}}return d}}(Wt.API);var nh,tg,$4,Y4,X4,Jq=function(){var n,e,t;function r(a){var o,s,c,f,d,p,g,m,x,_,T,A,D,U;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var H,X;for(X=[],H=0;H<4;++H)X.push(String.fromCharCode(this.data[this.pos++]));return X}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),f=this.readUInt16()||100,p.delay=1e3*d/f,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),a=(p!=null?p.data:void 0)||this.imgData,A=0;0<=o?A<o:A>o;0<=o?++A:--A)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(D=0;0<=_?D<_:D>_;0<=_?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(T=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,T.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,T.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(U=this.colorType)===4||U===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),c=0,f=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(p,g,m,x){var _,T,A,D,U,H,X,q,j,C,N,L,R,I,P,M,K,F,z,ee,ae,Q=Math.ceil((f.width-p)/m),he=Math.ceil((f.height-g)/x),G=f.width==Q&&f.height==he;for(I=o*Q,L=G?s:new Uint8Array(I*he),H=a.length,R=0,T=0;R<he&&c<H;){switch(a[c++]){case 0:for(D=K=0;K<I;D=K+=1)L[T++]=a[c++];break;case 1:for(D=F=0;F<I;D=F+=1)_=a[c++],U=D<o?0:L[T-o],L[T++]=(_+U)%256;break;case 2:for(D=z=0;z<I;D=z+=1)_=a[c++],A=(D-D%o)/o,P=R&&L[(R-1)*I+A*o+D%o],L[T++]=(P+_)%256;break;case 3:for(D=ee=0;ee<I;D=ee+=1)_=a[c++],A=(D-D%o)/o,U=D<o?0:L[T-o],P=R&&L[(R-1)*I+A*o+D%o],L[T++]=(_+Math.floor((U+P)/2))%256;break;case 4:for(D=ae=0;ae<I;D=ae+=1)_=a[c++],A=(D-D%o)/o,U=D<o?0:L[T-o],R===0?P=M=0:(P=L[(R-1)*I+A*o+D%o],M=A&&L[(R-1)*I+(A-1)*o+D%o]),X=U+P-M,q=Math.abs(X-U),C=Math.abs(X-P),N=Math.abs(X-M),j=q<=C&&q<=N?U:C<=N?P:M,L[T++]=(_+j)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!G){var $=((g+R*x)*f.width+p)*o,Z=R*I;for(D=0;D<Q;D+=1){for(var re=0;re<o;re+=1)s[$++]=L[Z++];$+=(m-1)*o}}R++}}return a=Dq(a),f.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),s},r.prototype.decodePalette=function(){var a,o,s,c,f,d,p,g,m;for(s=this.palette,d=this.transparency.indexed||[],f=new Uint8Array((d.length||0)+s.length),c=0,a=0,o=p=0,g=s.length;p<g;o=p+=3)f[c++]=s[o],f[c++]=s[o+1],f[c++]=s[o+2],f[c++]=(m=d[a++])!=null?m:255;return f},r.prototype.copyToImageData=function(a,o){var s,c,f,d,p,g,m,x,_,T,A;if(c=this.colors,_=null,s=this.hasAlphaChannel,this.palette.length&&(_=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),c=4,s=!0),x=(f=a.data||a).length,p=_||o,d=g=0,c===1)for(;d<x;)m=_?4*o[d/4]:g,T=p[m++],f[d++]=T,f[d++]=T,f[d++]=T,f[d++]=s?p[m++]:255,g=m;else for(;d<x;)m=_?4*o[d/4]:g,f[d++]=p[m++],f[d++]=p[m++],f[d++]=p[m++],f[d++]=s?p[m++]:255,g=m},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Gt)==="[object Window]"){try{e=Gt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(a){var o;if(i()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var o,s,c,f,d,p,g,m;if(this.animation){for(m=[],s=d=0,p=(g=this.animation.frames).length;d<p;s=++d)o=g[s],c=a.createImageData(o.width,o.height),f=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,f),o.imageData=c,m.push(o.image=n(c));return m}},r.prototype.renderFrame=function(a,o){var s,c,f;return s=(c=this.animation.frames)[o],f=c[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?a.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&a.putImageData(f.imageData,f.xOffset,f.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(a){var o,s,c,f,d,p,g=this;return s=0,p=this.animation,f=p.numFrames,c=p.frames,d=p.numPlays,(o=function(){var m,x;if(m=s++%f,x=c[m],g.renderFrame(a,m),f>1&&s/f<d)return g.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function eH(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var s=null,c=null;a&&(s=e,c=o,e+=3*o);var f=!0,d=[],p=0,g=null,m=0,x=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];p=n[e++]|n[e++]<<8,g=n[e++],(1&_)==0&&(g=null),m=_>>2&7,e++;break;case 254:for(;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var T=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,U=n[e++]|n[e++]<<8,H=n[e++],X=H>>6&1,q=1<<(7&H)+1,j=s,C=c,N=!1;H>>7&&(N=!0,j=e,C=q,e+=3*q);var L=e;for(e++;;){var R;if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:T,y:A,width:D,height:U,has_local_palette:N,palette_offset:j,palette_size:C,data_offset:L,data_length:e-L,transparent_index:g,interlaced:!!X,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,P){var M=this.frameInfo(I),K=M.width*M.height,F=new Uint8Array(K);K4(n,M.data_offset,F,K);var z=M.palette_offset,ee=M.transparent_index;ee===null&&(ee=256);var ae=M.width,Q=t-ae,he=ae,G=4*(M.y*t+M.x),$=4*((M.y+M.height)*t+M.x),Z=G,re=4*Q;M.interlaced===!0&&(re+=4*t*7);for(var de=8,xe=0,we=F.length;xe<we;++xe){var Ee=F[xe];if(he===0&&(he=ae,(Z+=re)>=$&&(re=4*Q+4*t*(de-1),Z=G+(ae+Q)*(de<<1),de>>=1)),Ee===ee)Z+=4;else{var Ve=n[z+3*Ee],He=n[z+3*Ee+1],it=n[z+3*Ee+2];P[Z++]=it,P[Z++]=He,P[Z++]=Ve,P[Z++]=255}--he}},this.decodeAndBlitFrameRGBA=function(I,P){var M=this.frameInfo(I),K=M.width*M.height,F=new Uint8Array(K);K4(n,M.data_offset,F,K);var z=M.palette_offset,ee=M.transparent_index;ee===null&&(ee=256);var ae=M.width,Q=t-ae,he=ae,G=4*(M.y*t+M.x),$=4*((M.y+M.height)*t+M.x),Z=G,re=4*Q;M.interlaced===!0&&(re+=4*t*7);for(var de=8,xe=0,we=F.length;xe<we;++xe){var Ee=F[xe];if(he===0&&(he=ae,(Z+=re)>=$&&(re=4*Q+4*t*(de-1),Z=G+(ae+Q)*(de<<1),de>>=1)),Ee===ee)Z+=4;else{var Ve=n[z+3*Ee],He=n[z+3*Ee+1],it=n[z+3*Ee+2];P[Z++]=Ve,P[Z++]=He,P[Z++]=it,P[Z++]=255}--he}}}function K4(n,e,t,r){for(var i=n[e++],a=1<<i,o=a+1,s=o+1,c=i+1,f=(1<<c)-1,d=0,p=0,g=0,m=n[e++],x=new Int32Array(4096),_=null;;){for(;d<16&&m!==0;)p|=n[e++]<<d,d+=8,m===1?m=n[e++]:--m;if(d<c)break;var T=p&f;if(p>>=c,d-=c,T!==a){if(T===o)break;for(var A=T<s?T:_,D=0,U=A;U>a;)U=x[U]>>8,++D;var H=U;if(g+D+(A!==T?1:0)>r)return void wr.log("Warning, gif stream longer than expected.");t[g++]=H;var X=g+=D;for(A!==T&&(t[g++]=H),U=A;D--;)U=x[U],t[--X]=255&U,U>>=8;_!==null&&s<4096&&(x[s++]=_<<8|H,s>=f+1&&c<12&&(++c,f=f<<1|1)),_=T}else s=o+1,f=(1<<(c=i+1))-1,_=null}return g!==r&&wr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Kv(n){var e,t,r,i,a,o=Math.floor,s=new Array(64),c=new Array(64),f=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),x=new Array(64),_=[],T=0,A=7,D=new Array(64),U=new Array(64),H=new Array(64),X=new Array(256),q=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function F(G,$){for(var Z=0,re=0,de=new Array,xe=1;xe<=16;xe++){for(var we=1;we<=G[xe];we++)de[$[re]]=[],de[$[re]][0]=Z,de[$[re]][1]=xe,re++,Z++;Z*=2}return de}function z(G){for(var $=G[0],Z=G[1]-1;Z>=0;)$&1<<Z&&(T|=1<<A),Z--,--A<0&&(T==255?(ee(255),ee(0)):ee(T),A=7,T=0)}function ee(G){_.push(G)}function ae(G){ee(G>>8&255),ee(255&G)}function Q(G,$,Z,re,de){for(var xe,we=de[0],Ee=de[240],Ve=function(Te,Ke){var Ge,lt,ft,et,Ct,yt,At,Nt,xt,It,ut=0;for(xt=0;xt<8;++xt){Ge=Te[ut],lt=Te[ut+1],ft=Te[ut+2],et=Te[ut+3],Ct=Te[ut+4],yt=Te[ut+5],At=Te[ut+6];var bn=Ge+(Nt=Te[ut+7]),Vt=Ge-Nt,Jn=lt+At,Kt=lt-At,Cn=ft+yt,mi=ft-yt,sn=et+Ct,ma=et-Ct,Rn=bn+sn,Br=bn-sn,fr=Jn+Cn,wn=Jn-Cn;Te[ut]=Rn+fr,Te[ut+4]=Rn-fr;var Dt=.707106781*(wn+Br);Te[ut+2]=Br+Dt,Te[ut+6]=Br-Dt;var rn=.382683433*((Rn=ma+mi)-(wn=Kt+Vt)),Ei=.5411961*Rn+rn,Bn=1.306562965*wn+rn,yr=.707106781*(fr=mi+Kt),Va=Vt+yr,bt=Vt-yr;Te[ut+5]=bt+Ei,Te[ut+3]=bt-Ei,Te[ut+1]=Va+Bn,Te[ut+7]=Va-Bn,ut+=8}for(ut=0,xt=0;xt<8;++xt){Ge=Te[ut],lt=Te[ut+8],ft=Te[ut+16],et=Te[ut+24],Ct=Te[ut+32],yt=Te[ut+40],At=Te[ut+48];var Xn=Ge+(Nt=Te[ut+56]),Kn=Ge-Nt,xr=lt+At,Cr=lt-At,Or=ft+yt,$r=ft-yt,Ts=et+Ct,ea=et-Ct,vi=Xn+Ts,ni=Xn-Ts,Yr=xr+Or,ri=xr-Or;Te[ut]=vi+Yr,Te[ut+32]=vi-Yr;var dr=.707106781*(ri+ni);Te[ut+16]=ni+dr,Te[ut+48]=ni-dr;var Fn=.382683433*((vi=ea+$r)-(ri=Cr+Kn)),Io=.5411961*vi+Fn,To=1.306562965*ri+Fn,Fi=.707106781*(Yr=$r+Cr),va=Kn+Fi,Rs=Kn-Fi;Te[ut+40]=Rs+Io,Te[ut+24]=Rs-Io,Te[ut+8]=va+To,Te[ut+56]=va-To,ut++}for(xt=0;xt<64;++xt)It=Te[xt]*Ke[xt],m[xt]=It>0?It+.5|0:It-.5|0;return m}(G,$),He=0;He<64;++He)x[j[He]]=Ve[He];var it=x[0]-Z;Z=x[0],it==0?z(re[0]):(z(re[g[xe=32767+it]]),z(p[xe]));for(var ct=63;ct>0&&x[ct]==0;)ct--;if(ct==0)return z(we),Z;for(var vt,ke=1;ke<=ct;){for(var ve=ke;x[ke]==0&&ke<=ct;)++ke;var dt=ke-ve;if(dt>=16){vt=dt>>4;for(var ot=1;ot<=vt;++ot)z(Ee);dt&=15}xe=32767+x[ke],z(de[(dt<<4)+g[xe]]),z(p[xe]),ke++}return ct!=63&&z(we),Z}function he(G){G=Math.min(Math.max(G,1),100),a!=G&&(function($){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var de=o((Z[re]*$+50)/100);de=Math.min(Math.max(de,1),255),s[j[re]]=de}for(var xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],we=0;we<64;we++){var Ee=o((xe[we]*$+50)/100);Ee=Math.min(Math.max(Ee,1),255),c[j[we]]=Ee}for(var Ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,it=0;it<8;it++)for(var ct=0;ct<8;ct++)f[He]=1/(s[j[He]]*Ve[it]*Ve[ct]*8),d[He]=1/(c[j[He]]*Ve[it]*Ve[ct]*8),He++}(G<50?Math.floor(5e3/G):Math.floor(200-2*G)),a=G)}this.encode=function(G,$){$&&he($),_=new Array,T=0,A=7,ae(65496),ae(65504),ae(16),ee(74),ee(70),ee(73),ee(70),ee(0),ee(1),ee(1),ee(0),ae(1),ae(1),ee(0),ee(0),function(){ae(65499),ae(132),ee(0);for(var lt=0;lt<64;lt++)ee(s[lt]);ee(1);for(var ft=0;ft<64;ft++)ee(c[ft])}(),function(lt,ft){ae(65472),ae(17),ee(8),ae(ft),ae(lt),ee(3),ee(1),ee(17),ee(0),ee(2),ee(17),ee(1),ee(3),ee(17),ee(1)}(G.width,G.height),function(){ae(65476),ae(418),ee(0);for(var lt=0;lt<16;lt++)ee(C[lt+1]);for(var ft=0;ft<=11;ft++)ee(N[ft]);ee(16);for(var et=0;et<16;et++)ee(L[et+1]);for(var Ct=0;Ct<=161;Ct++)ee(R[Ct]);ee(1);for(var yt=0;yt<16;yt++)ee(I[yt+1]);for(var At=0;At<=11;At++)ee(P[At]);ee(17);for(var Nt=0;Nt<16;Nt++)ee(M[Nt+1]);for(var xt=0;xt<=161;xt++)ee(K[xt])}(),ae(65498),ae(12),ee(3),ee(1),ee(0),ee(2),ee(17),ee(3),ee(17),ee(0),ee(63),ee(0);var Z=0,re=0,de=0;T=0,A=7,this.encode.displayName="_encode_";for(var xe,we,Ee,Ve,He,it,ct,vt,ke,ve=G.data,dt=G.width,ot=G.height,Te=4*dt,Ke=0;Ke<ot;){for(xe=0;xe<Te;){for(He=Te*Ke+xe,ct=-1,vt=0,ke=0;ke<64;ke++)it=He+(vt=ke>>3)*Te+(ct=4*(7&ke)),Ke+vt>=ot&&(it-=Te*(Ke+1+vt-ot)),xe+ct>=Te&&(it-=xe+ct-Te+4),we=ve[it++],Ee=ve[it++],Ve=ve[it++],D[ke]=(q[we]+q[Ee+256>>0]+q[Ve+512>>0]>>16)-128,U[ke]=(q[we+768>>0]+q[Ee+1024>>0]+q[Ve+1280>>0]>>16)-128,H[ke]=(q[we+1280>>0]+q[Ee+1536>>0]+q[Ve+1792>>0]>>16)-128;Z=Q(D,f,Z,e,r),re=Q(U,d,re,t,i),de=Q(H,d,de,t,i),xe+=32}Ke+=8}if(A>=0){var Ge=[];Ge[1]=A+1,Ge[0]=(1<<A+1)-1,z(Ge)}return ae(65497),new Uint8Array(_)},n=n||50,function(){for(var G=String.fromCharCode,$=0;$<256;$++)X[$]=G($)}(),e=F(C,N),t=F(I,P),r=F(L,R),i=F(M,K),function(){for(var G=1,$=2,Z=1;Z<=15;Z++){for(var re=G;re<$;re++)g[32767+re]=Z,p[32767+re]=[],p[32767+re][1]=Z,p[32767+re][0]=re;for(var de=-($-1);de<=-G;de++)g[32767+de]=Z,p[32767+de]=[],p[32767+de][1]=Z,p[32767+de][0]=$-1+de;G<<=1,$<<=1}}(),function(){for(var G=0;G<256;G++)q[G]=19595*G,q[G+256>>0]=38470*G,q[G+512>>0]=7471*G+32768,q[G+768>>0]=-11059*G,q[G+1024>>0]=-21709*G,q[G+1280>>0]=32768*G+8421375,q[G+1536>>0]=-27439*G,q[G+1792>>0]=-5329*G}(),he(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function nl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Q4(n){function e(C){if(!C)throw Error("assert :P")}function t(C,N,L){for(var R=0;4>R;R++)if(C[N+R]!=L.charCodeAt(R))return!0;return!1}function r(C,N,L,R,I){for(var P=0;P<I;P++)C[N+P]=L[R+P]}function i(C,N,L,R){for(var I=0;I<R;I++)C[N+I]=L}function a(C){return new Int32Array(C)}function o(C,N){for(var L=[],R=0;R<C;R++)L.push(new N);return L}function s(C,N){var L=[];return function R(I,P,M){for(var K=M[P],F=0;F<K&&(I.push(M.length>P+1?[]:new N),!(M.length<P+1));F++)R(I[F],P+1,M)}(L,0,C),L}var c=function(){var C=this;function N(b,E){for(var B=1<<E-1>>>0;b&B;)B>>>=1;return B?(b&B-1)+B:b}function L(b,E,B,W,te){e(!(W%B));do b[E+(W-=B)]=te;while(0<W)}function R(b,E,B,W,te){if(e(2328>=te),512>=te)var ie=a(512);else if((ie=a(te))==null)return 0;return function(oe,se,fe,ge,_e,Le){var Oe,Ne,Ze=se,Ue=1<<fe,Ae=a(16),Ce=a(16);for(e(_e!=0),e(ge!=null),e(oe!=null),e(0<fe),Ne=0;Ne<_e;++Ne){if(15<ge[Ne])return 0;++Ae[ge[Ne]]}if(Ae[0]==_e)return 0;for(Ce[1]=0,Oe=1;15>Oe;++Oe){if(Ae[Oe]>1<<Oe)return 0;Ce[Oe+1]=Ce[Oe]+Ae[Oe]}for(Ne=0;Ne<_e;++Ne)Oe=ge[Ne],0<ge[Ne]&&(Le[Ce[Oe]++]=Ne);if(Ce[15]==1)return(ge=new I).g=0,ge.value=Le[0],L(oe,Ze,1,Ue,ge),Ue;var $e,Je=-1,Xe=Ue-1,wt=0,ht=1,kt=1,gt=1<<fe;for(Ne=0,Oe=1,_e=2;Oe<=fe;++Oe,_e<<=1){if(ht+=kt<<=1,0>(kt-=Ae[Oe]))return 0;for(;0<Ae[Oe];--Ae[Oe])(ge=new I).g=Oe,ge.value=Le[Ne++],L(oe,Ze+wt,_e,gt,ge),wt=N(wt,Oe)}for(Oe=fe+1,_e=2;15>=Oe;++Oe,_e<<=1){if(ht+=kt<<=1,0>(kt-=Ae[Oe]))return 0;for(;0<Ae[Oe];--Ae[Oe]){if(ge=new I,(wt&Xe)!=Je){for(Ze+=gt,$e=1<<(Je=Oe)-fe;15>Je&&!(0>=($e-=Ae[Je]));)++Je,$e<<=1;Ue+=gt=1<<($e=Je-fe),oe[se+(Je=wt&Xe)].g=$e+fe,oe[se+Je].value=Ze-se-Je}ge.g=Oe-fe,ge.value=Le[Ne++],L(oe,Ze+(wt>>fe),_e,gt,ge),wt=N(wt,Oe)}}return ht!=2*Ce[15]-1?0:Ue}(b,E,B,W,te,ie)}function I(){this.value=this.g=0}function P(){this.value=this.g=0}function M(){this.G=o(5,I),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ai,P)}function K(b,E,B,W){e(b!=null),e(E!=null),e(2147483648>W),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=E,b.pa=B,b.Jd=E,b.Yc=B+W,b.Zc=4<=W?B+W-4+1:B,xe(b)}function F(b,E){for(var B=0;0<E--;)B|=Ee(b,128)<<E;return B}function z(b,E){var B=F(b,E);return we(b)?-B:B}function ee(b,E,B,W){var te,ie=0;for(e(b!=null),e(E!=null),e(4294967288>W),b.Sb=W,b.Ra=0,b.u=0,b.h=0,4<W&&(W=4),te=0;te<W;++te)ie+=E[B+te]<<8*te;b.Ra=ie,b.bb=W,b.oa=E,b.pa=B}function ae(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<wc-8>>>0,++b.bb,b.u-=8;Z(b)&&(b.h=1,b.u=0)}function Q(b,E){if(e(0<=E),!b.h&&E<=bc){var B=$(b)&El[E];return b.u+=E,ae(b),B}return b.h=1,b.u=0}function he(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(b){return b.Ra>>>(b.u&wc-1)>>>0}function Z(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>wc}function re(b,E){b.u=E,b.h=Z(b)}function de(b){b.u>=xu&&(e(b.u>=xu),ae(b))}function xe(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function we(b){return F(b,1)}function Ee(b,E){var B=b.Ca;0>b.b&&xe(b);var W=b.b,te=B*E>>>8,ie=(b.I>>>W>te)+0;for(ie?(B-=te,b.I-=te+1<<W>>>0):B=te+1,W=B,te=0;256<=W;)te+=8,W>>=8;return W=7^te+Aa[W],b.b-=W,b.Ca=(B<<W)-1,ie}function Ve(b,E,B){b[E+0]=B>>24&255,b[E+1]=B>>16&255,b[E+2]=B>>8&255,b[E+3]=B>>0&255}function He(b,E){return b[E+0]<<0|b[E+1]<<8}function it(b,E){return He(b,E)|b[E+2]<<16}function ct(b,E){return He(b,E)|He(b,E+2)<<16}function vt(b,E){var B=1<<E;return e(b!=null),e(0<E),b.X=a(B),b.X==null?0:(b.Mb=32-E,b.Xa=E,1)}function ke(b,E){e(b!=null),e(E!=null),e(b.Xa==E.Xa),r(E.X,0,b.X,0,1<<E.Xa)}function ve(){this.X=[],this.Xa=this.Mb=0}function dt(b,E,B,W){e(B!=null),e(W!=null);var te=B[0],ie=W[0];return te==0&&(te=(b*ie+E/2)/E),ie==0&&(ie=(E*te+b/2)/b),0>=te||0>=ie?0:(B[0]=te,W[0]=ie,1)}function ot(b,E){return b+(1<<E)-1>>>E}function Te(b,E){return((4278255360&b)+(4278255360&E)>>>0&4278255360)+((16711935&b)+(16711935&E)>>>0&16711935)>>>0}function Ke(b,E){C[E]=function(B,W,te,ie,oe,se,fe){var ge;for(ge=0;ge<oe;++ge){var _e=C[b](se[fe+ge-1],te,ie+ge);se[fe+ge]=Te(B[W+ge],_e)}}}function Ge(){this.ud=this.hd=this.jd=0}function lt(b,E){return((4278124286&(b^E))>>>1)+(b&E)>>>0}function ft(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function et(b,E){return ft(b+(b-E+.5>>1))}function Ct(b,E,B){return Math.abs(E-B)-Math.abs(b-B)}function yt(b,E,B,W,te,ie,oe){for(W=ie[oe-1],B=0;B<te;++B)ie[oe+B]=W=Te(b[E+B],W)}function At(b,E,B,W,te){var ie;for(ie=0;ie<B;++ie){var oe=b[E+ie],se=oe>>8&255,fe=16711935&(fe=(fe=16711935&oe)+((se<<16)+se));W[te+ie]=(4278255360&oe)+fe>>>0}}function Nt(b,E){E.jd=b>>0&255,E.hd=b>>8&255,E.ud=b>>16&255}function xt(b,E,B,W,te,ie){var oe;for(oe=0;oe<W;++oe){var se=E[B+oe],fe=se>>>8,ge=se,_e=255&(_e=(_e=se>>>16)+((b.jd<<24>>24)*(fe<<24>>24)>>>5));ge=255&(ge=(ge=ge+((b.hd<<24>>24)*(fe<<24>>24)>>>5))+((b.ud<<24>>24)*(_e<<24>>24)>>>5)),te[ie+oe]=(4278255360&se)+(_e<<16)+ge}}function It(b,E,B,W,te){C[E]=function(ie,oe,se,fe,ge,_e,Le,Oe,Ne){for(fe=Le;fe<Oe;++fe)for(Le=0;Le<Ne;++Le)ge[_e++]=te(se[W(ie[oe++])])},C[b]=function(ie,oe,se,fe,ge,_e,Le){var Oe=8>>ie.b,Ne=ie.Ea,Ze=ie.K[0],Ue=ie.w;if(8>Oe)for(ie=(1<<ie.b)-1,Ue=(1<<Oe)-1;oe<se;++oe){var Ae,Ce=0;for(Ae=0;Ae<Ne;++Ae)Ae&ie||(Ce=W(fe[ge++])),_e[Le++]=te(Ze[Ce&Ue]),Ce>>=Oe}else C["VP8LMapColor"+B](fe,ge,Ze,Ue,_e,Le,oe,se,Ne)}}function ut(b,E,B,W,te){for(B=E+B;E<B;){var ie=b[E++];W[te++]=ie>>16&255,W[te++]=ie>>8&255,W[te++]=ie>>0&255}}function bn(b,E,B,W,te){for(B=E+B;E<B;){var ie=b[E++];W[te++]=ie>>16&255,W[te++]=ie>>8&255,W[te++]=ie>>0&255,W[te++]=ie>>24&255}}function Vt(b,E,B,W,te){for(B=E+B;E<B;){var ie=(oe=b[E++])>>16&240|oe>>12&15,oe=oe>>0&240|oe>>28&15;W[te++]=ie,W[te++]=oe}}function Jn(b,E,B,W,te){for(B=E+B;E<B;){var ie=(oe=b[E++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;W[te++]=ie,W[te++]=oe}}function Kt(b,E,B,W,te){for(B=E+B;E<B;){var ie=b[E++];W[te++]=ie>>0&255,W[te++]=ie>>8&255,W[te++]=ie>>16&255}}function Cn(b,E,B,W,te,ie){if(ie==0)for(B=E+B;E<B;)Ve(W,((ie=b[E++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),te+=32;else r(W,te,b,E,B)}function mi(b,E){C[E][0]=C[b+"0"],C[E][1]=C[b+"1"],C[E][2]=C[b+"2"],C[E][3]=C[b+"3"],C[E][4]=C[b+"4"],C[E][5]=C[b+"5"],C[E][6]=C[b+"6"],C[E][7]=C[b+"7"],C[E][8]=C[b+"8"],C[E][9]=C[b+"9"],C[E][10]=C[b+"10"],C[E][11]=C[b+"11"],C[E][12]=C[b+"12"],C[E][13]=C[b+"13"],C[E][14]=C[b+"0"],C[E][15]=C[b+"0"]}function sn(b){return b==Df||b==Ll||b==Vs||b==Au}function ma(){this.eb=[],this.size=this.A=this.fb=0}function Rn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Br(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ma,this.f.kb=new Rn,this.sd=null}function fr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dt(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function rn(b,E){var B=b.T,W=E.ba.f.RGBA,te=W.eb,ie=W.fb+b.ka*W.A,oe=wi[E.ba.S],se=b.y,fe=b.O,ge=b.f,_e=b.N,Le=b.ea,Oe=b.W,Ne=E.cc,Ze=E.dc,Ue=E.Mc,Ae=E.Nc,Ce=b.ka,$e=b.ka+b.T,Je=b.U,Xe=Je+1>>1;for(Ce==0?oe(se,fe,null,null,ge,_e,Le,Oe,ge,_e,Le,Oe,te,ie,null,null,Je):(oe(E.ec,E.fc,se,fe,Ne,Ze,Ue,Ae,ge,_e,Le,Oe,te,ie-W.A,te,ie,Je),++B);Ce+2<$e;Ce+=2)Ne=ge,Ze=_e,Ue=Le,Ae=Oe,_e+=b.Rc,Oe+=b.Rc,ie+=2*W.A,oe(se,(fe+=2*b.fa)-b.fa,se,fe,Ne,Ze,Ue,Ae,ge,_e,Le,Oe,te,ie-W.A,te,ie,Je);return fe+=b.fa,b.j+$e<b.o?(r(E.ec,E.fc,se,fe,Je),r(E.cc,E.dc,ge,_e,Xe),r(E.Mc,E.Nc,Le,Oe,Xe),B--):1&$e||oe(se,fe,null,null,ge,_e,Le,Oe,ge,_e,Le,Oe,te,ie+W.A,null,null,Je),B}function Ei(b,E,B){var W=b.F,te=[b.J];if(W!=null){var ie=b.U,oe=E.ba.S,se=oe==Cc||oe==Vs;E=E.ba.f.RGBA;var fe=[0],ge=b.ka;fe[0]=b.T,b.Kb&&(ge==0?--fe[0]:(--ge,te[0]-=b.width),b.j+b.ka+b.T==b.o&&(fe[0]=b.o-b.j-ge));var _e=E.eb;ge=E.fb+ge*E.A,b=un(W,te[0],b.width,ie,fe,_e,ge+(se?0:3),E.A),e(B==fe),b&&sn(oe)&&Ga(_e,ge,se,ie,fe,E.A)}return 0}function Bn(b){var E=b.ma,B=E.ba.S,W=11>B,te=B==_u||B==Nf||B==Cc||B==Us||B==12||sn(B);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Sl(E.Oa,b,te?11:12))return 0;if(te&&sn(B)&&at(),b.da)alert("todo:use_scaling");else{if(W){if(E.Ib=Dt,b.Kb){if(B=b.U+1>>1,E.memory=a(b.U+2*B),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+b.U,E.Mc=E.cc,E.Nc=E.dc+B,E.Ib=rn,at()}}else alert("todo:EmitYUV");te&&(E.Jb=Ei,W&&Re())}if(W&&!W1){for(b=0;256>b;++b)n2[b]=89858*(b-128)+si>>ms,Pf[b]=-22014*(b-128)+si,Wh[b]=-45773*(b-128),li[b]=113618*(b-128)+si>>ms;for(b=Bl;b<Nd;++b)E=76283*(b-16)+si>>ms,Lf[b-Bl]=Un(E,255),Gh[b-Bl]=Un(E+8>>4,15);W1=1}return 1}function yr(b){var E=b.ma,B=b.U,W=b.T;return e(!(1&b.ka)),0>=B||0>=W?0:(B=E.Ib(b,E),E.Jb!=null&&E.Jb(b,E,B),E.Dc+=B,1)}function Va(b){b.ma.memory=null}function bt(b,E,B,W){return Q(b,8)!=47?0:(E[0]=Q(b,14)+1,B[0]=Q(b,14)+1,W[0]=Q(b,1),Q(b,3)!=0?0:!b.h)}function Xn(b,E){if(4>b)return b+1;var B=b-2>>1;return(2+(1&b)<<B)+Q(E,B)+1}function Kn(b,E){return 120<E?E-120:1<=(B=((B=Hs[E-1])>>4)*b+(8-(15&B)))?B:1;var B}function xr(b,E,B){var W=$(B),te=b[E+=255&W].g-8;return 0<te&&(re(B,B.u+8),W=$(B),E+=b[E].value,E+=W&(1<<te)-1),re(B,B.u+b[E].g),b[E].value}function Cr(b,E,B){return B.g+=b.g,B.value+=b.value<<E>>>0,e(8>=B.g),b.g}function Or(b,E,B){var W=b.xc;return e((E=W==0?0:b.vc[b.md*(B>>W)+(E>>W)])<b.Wb),b.Ya[E]}function $r(b,E,B,W){var te=b.ab,ie=b.c*E,oe=b.C;E=oe+E;var se=B,fe=W;for(W=b.Ta,B=b.Ua;0<te--;){var ge=b.gc[te],_e=oe,Le=E,Oe=se,Ne=fe,Ze=(fe=W,se=B,ge.Ea);switch(e(_e<Le),e(Le<=ge.nc),ge.hc){case 2:Ad(Oe,Ne,(Le-_e)*Ze,fe,se);break;case 0:var Ue=_e,Ae=Le,Ce=fe,$e=se,Je=(gt=ge).Ea;Ue==0&&(qh(Oe,Ne,null,null,1,Ce,$e),yt(Oe,Ne+1,0,0,Je-1,Ce,$e+1),Ne+=Je,$e+=Je,++Ue);for(var Xe=1<<gt.b,wt=Xe-1,ht=ot(Je,gt.b),kt=gt.K,gt=gt.w+(Ue>>gt.b)*ht;Ue<Ae;){var Nn=kt,Vn=gt,ln=1;for(Tf(Oe,Ne,Ce,$e-Je,1,Ce,$e);ln<Je;){var an=(ln&~wt)+Xe;an>Je&&(an=Je),(0,Bs[Nn[Vn++]>>8&15])(Oe,Ne+ +ln,Ce,$e+ln-Je,an-ln,Ce,$e+ln),ln=an}Ne+=Je,$e+=Je,++Ue&wt||(gt+=ht)}Le!=ge.nc&&r(fe,se-Ze,fe,se+(Le-_e-1)*Ze,Ze);break;case 1:for(Ze=Oe,Ae=Ne,Je=(Oe=ge.Ea)-($e=Oe&~(Ce=(Ne=1<<ge.b)-1)),Ue=ot(Oe,ge.b),Xe=ge.K,ge=ge.w+(_e>>ge.b)*Ue;_e<Le;){for(wt=Xe,ht=ge,kt=new Ge,gt=Ae+$e,Nn=Ae+Oe;Ae<gt;)Nt(wt[ht++],kt),Il(kt,Ze,Ae,Ne,fe,se),Ae+=Ne,se+=Ne;Ae<Nn&&(Nt(wt[ht++],kt),Il(kt,Ze,Ae,Je,fe,se),Ae+=Je,se+=Je),++_e&Ce||(ge+=Ue)}break;case 3:if(Oe==fe&&Ne==se&&0<ge.b){for(Ae=fe,Oe=Ze=se+(Le-_e)*Ze-($e=(Le-_e)*ot(ge.Ea,ge.b)),Ne=fe,Ce=se,Ue=[],$e=(Je=$e)-1;0<=$e;--$e)Ue[$e]=Ne[Ce+$e];for($e=Je-1;0<=$e;--$e)Ae[Oe+$e]=Ue[$e];lo(ge,_e,Le,fe,Ze,fe,se)}else lo(ge,_e,Le,Oe,Ne,fe,se)}se=W,fe=B}fe!=B&&r(W,B,se,fe,ie)}function Ts(b,E){var B=b.V,W=b.Ba+b.c*b.C,te=E-b.C;if(e(E<=b.l.o),e(16>=te),0<te){var ie=b.l,oe=b.Ta,se=b.Ua,fe=ie.width;if($r(b,te,B,W),te=se=[se],e((B=b.C)<(W=E)),e(ie.v<ie.va),W>ie.o&&(W=ie.o),B<ie.j){var ge=ie.j-B;B=ie.j,te[0]+=ge*fe}if(B>=W?B=0:(te[0]+=4*ie.v,ie.ka=B-ie.j,ie.U=ie.va-ie.v,ie.T=W-B,B=1),B){if(se=se[0],11>(B=b.ca).S){var _e=B.f.RGBA,Le=(W=B.S,te=ie.U,ie=ie.T,ge=_e.eb,_e.A),Oe=ie;for(_e=_e.fb+b.Ma*_e.A;0<Oe--;){var Ne=oe,Ze=se,Ue=te,Ae=ge,Ce=_e;switch(W){case Hi:na(Ne,Ze,Ue,Ae,Ce);break;case _u:Ri(Ne,Ze,Ue,Ae,Ce);break;case Df:Ri(Ne,Ze,Ue,Ae,Ce),Ga(Ae,Ce,0,Ue,1,0);break;case ds:Bo(Ne,Ze,Ue,Ae,Ce);break;case Nf:Cn(Ne,Ze,Ue,Ae,Ce,1);break;case Ll:Cn(Ne,Ze,Ue,Ae,Ce,1),Ga(Ae,Ce,0,Ue,1,0);break;case Cc:Cn(Ne,Ze,Ue,Ae,Ce,0);break;case Vs:Cn(Ne,Ze,Ue,Ae,Ce,0),Ga(Ae,Ce,1,Ue,1,0);break;case Us:Tl(Ne,Ze,Ue,Ae,Ce);break;case Au:Tl(Ne,Ze,Ue,Ae,Ce),cn(Ae,Ce,Ue,1,0);break;case Ed:Sa(Ne,Ze,Ue,Ae,Ce);break;default:e(0)}se+=fe,_e+=Le}b.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=B.height)}}b.C=E,e(b.C<=b.i)}function ea(b){var E;if(0<b.ua)return 0;for(E=0;E<b.Wb;++E){var B=b.Ya[E].G,W=b.Ya[E].H;if(0<B[1][W[1]+0].g||0<B[2][W[2]+0].g||0<B[3][W[3]+0].g)return 0}return 1}function vi(b,E,B,W,te,ie){if(b.Z!=0){var oe=b.qd,se=b.rd;for(e(ps[b.Z]!=null);E<B;++E)ps[b.Z](oe,se,W,te,W,te,ie),oe=W,se=te,te+=ie;b.qd=oe,b.rd=se}}function ni(b,E){var B=b.l.ma,W=B.Z==0||B.Z==1?b.l.j:b.C;if(W=b.C<W?W:b.C,e(E<=b.l.o),E>W){var te=b.l.width,ie=B.ca,oe=B.tb+te*W,se=b.V,fe=b.Ba+b.c*W,ge=b.gc;e(b.ab==1),e(ge[0].hc==3),Cl(ge[0],W,E,se,fe,ie,oe),vi(B,W,E,ie,oe,te)}b.C=b.Ma=E}function Yr(b,E,B,W,te,ie,oe){var se=b.$/W,fe=b.$%W,ge=b.m,_e=b.s,Le=B+b.$,Oe=Le;te=B+W*te;var Ne=B+W*ie,Ze=280+_e.ua,Ue=b.Pb?se:16777216,Ae=0<_e.ua?_e.Wa:null,Ce=_e.wc,$e=Le<Ne?Or(_e,fe,se):null;e(b.C<ie),e(Ne<=te);var Je=!1;e:for(;;){for(;Je||Le<Ne;){var Xe=0;if(se>=Ue){var wt=Le-B;e((Ue=b).Pb),Ue.wd=Ue.m,Ue.xd=wt,0<Ue.s.ua&&ke(Ue.s.Wa,Ue.s.vb),Ue=se+V1}if(fe&Ce||($e=Or(_e,fe,se)),e($e!=null),$e.Qb&&(E[Le]=$e.qb,Je=!0),!Je)if(de(ge),$e.jc){Xe=ge,wt=E;var ht=Le,kt=$e.pd[$(Xe)&ai-1];e($e.jc),256>kt.g?(re(Xe,Xe.u+kt.g),wt[ht]=kt.value,Xe=0):(re(Xe,Xe.u+kt.g-256),e(256<=kt.value),Xe=kt.value),Xe==0&&(Je=!0)}else Xe=xr($e.G[0],$e.H[0],ge);if(ge.h)break;if(Je||256>Xe){if(!Je)if($e.nd)E[Le]=($e.qb|Xe<<8)>>>0;else{if(de(ge),Je=xr($e.G[1],$e.H[1],ge),de(ge),wt=xr($e.G[2],$e.H[2],ge),ht=xr($e.G[3],$e.H[3],ge),ge.h)break;E[Le]=(ht<<24|Je<<16|Xe<<8|wt)>>>0}if(Je=!1,++Le,++fe>=W&&(fe=0,++se,oe!=null&&se<=ie&&!(se%16)&&oe(b,se),Ae!=null))for(;Oe<Le;)Xe=E[Oe++],Ae.X[(506832829*Xe&4294967295)>>>Ae.Mb]=Xe}else if(280>Xe){if(Xe=Xn(Xe-256,ge),wt=xr($e.G[4],$e.H[4],ge),de(ge),wt=Kn(W,wt=Xn(wt,ge)),ge.h)break;if(Le-B<wt||te-Le<Xe)break e;for(ht=0;ht<Xe;++ht)E[Le+ht]=E[Le+ht-wt];for(Le+=Xe,fe+=Xe;fe>=W;)fe-=W,++se,oe!=null&&se<=ie&&!(se%16)&&oe(b,se);if(e(Le<=te),fe&Ce&&($e=Or(_e,fe,se)),Ae!=null)for(;Oe<Le;)Xe=E[Oe++],Ae.X[(506832829*Xe&4294967295)>>>Ae.Mb]=Xe}else{if(!(Xe<Ze))break e;for(Je=Xe-280,e(Ae!=null);Oe<Le;)Xe=E[Oe++],Ae.X[(506832829*Xe&4294967295)>>>Ae.Mb]=Xe;Xe=Le,e(!(Je>>>(wt=Ae).Xa)),E[Xe]=wt.X[Je],Je=!0}Je||e(ge.h==Z(ge))}if(b.Pb&&ge.h&&Le<te)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&ke(b.s.vb,b.s.Wa);else{if(ge.h)break e;oe!=null&&oe(b,se>ie?ie:se),b.a=0,b.$=Le-B}return 1}return b.a=3,0}function ri(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var E=b.Wa;E!=null&&(E.X=null),b.vb=null,e(b!=null)}function dr(){var b=new vu;return b==null?null:(b.a=0,b.xb=Su,mi("Predictor","VP8LPredictors"),mi("Predictor","VP8LPredictors_C"),mi("PredictorAdd","VP8LPredictorsAdd"),mi("PredictorAdd","VP8LPredictorsAdd_C"),Ad=At,Il=xt,na=ut,Ri=bn,Tl=Vt,Sa=Jn,Bo=Kt,C.VP8LMapColor32b=xi,C.VP8LMapColor8b=Rf,b)}function Fn(b,E,B,W,te){var ie=1,oe=[b],se=[E],fe=W.m,ge=W.s,_e=null,Le=0;e:for(;;){if(B)for(;ie&&Q(fe,1);){var Oe=oe,Ne=se,Ze=W,Ue=1,Ae=Ze.m,Ce=Ze.gc[Ze.ab],$e=Q(Ae,2);if(Ze.Oc&1<<$e)ie=0;else{switch(Ze.Oc|=1<<$e,Ce.hc=$e,Ce.Ea=Oe[0],Ce.nc=Ne[0],Ce.K=[null],++Ze.ab,e(4>=Ze.ab),$e){case 0:case 1:Ce.b=Q(Ae,3)+2,Ue=Fn(ot(Ce.Ea,Ce.b),ot(Ce.nc,Ce.b),0,Ze,Ce.K),Ce.K=Ce.K[0];break;case 3:var Je,Xe=Q(Ae,8)+1,wt=16<Xe?0:4<Xe?1:2<Xe?2:3;if(Oe[0]=ot(Ce.Ea,wt),Ce.b=wt,Je=Ue=Fn(Xe,1,0,Ze,Ce.K)){var ht,kt=Xe,gt=Ce,Nn=1<<(8>>gt.b),Vn=a(Nn);if(Vn==null)Je=0;else{var ln=gt.K[0],an=gt.w;for(Vn[0]=gt.K[0][0],ht=1;ht<1*kt;++ht)Vn[ht]=Te(ln[an+ht],Vn[ht-1]);for(;ht<4*Nn;++ht)Vn[ht]=0;gt.K[0]=null,gt.K[0]=Vn,Je=1}}Ue=Je;break;case 2:break;default:e(0)}ie=Ue}}if(oe=oe[0],se=se[0],ie&&Q(fe,1)&&!(ie=1<=(Le=Q(fe,4))&&11>=Le)){W.a=3;break e}var tr;if(tr=ie)t:{var qn,Zt,ar,Lt=W,Ht=oe,Tn=se,Dn=Le,_i=B,ci=Lt.m,Ur=Lt.s,Vr=[null],Zr=1,ho=0,Hn=Tc[Dn];n:for(;;){if(_i&&Q(ci,1)){var Jr=Q(ci,3)+2,Uo=ot(Ht,Jr),Fl=ot(Tn,Jr),Dc=Uo*Fl;if(!Fn(Uo,Fl,0,Lt,Vr))break n;for(Vr=Vr[0],Ur.xc=Jr,qn=0;qn<Dc;++qn){var zl=Vr[qn]>>8&65535;Vr[qn]=zl,zl>=Zr&&(Zr=zl+1)}}if(ci.h)break n;for(Zt=0;5>Zt;++Zt){var Ar=$a[Zt];!Zt&&0<Dn&&(Ar+=1<<Dn),ho<Ar&&(ho=Ar)}var Mf=o(Zr*Hn,I),Dd=Zr,ia=o(Dd,M);if(ia==null)var Ir=null;else e(65536>=Dd),Ir=ia;var Oc=a(ho);if(Ir==null||Oc==null||Mf==null){Lt.a=1;break n}var Ul=Mf;for(qn=ar=0;qn<Zr;++qn){var Ca=Ir[qn],Vl=Ca.G,Ia=Ca.H,jf=0,Cu=1,Od=0;for(Zt=0;5>Zt;++Zt){Ar=$a[Zt],Vl[Zt]=Ul,Ia[Zt]=ar,!Zt&&0<Dn&&(Ar+=1<<Dn);i:{var Bf,kd=Ar,Ff=Lt,Iu=Oc,Y1=Ul,X1=ar,zf=0,Ys=Ff.m,i2=Q(Ys,1);if(i(Iu,0,0,kd),i2){var K1=Q(Ys,1)+1,Q1=Q(Ys,1),$h=Q(Ys,Q1==0?1:8);Iu[$h]=1,K1==2&&(Iu[$h=Q(Ys,8)]=1);var Tu=1}else{var Yh=a(19),Xh=Q(Ys,4)+4;if(19<Xh){Ff.a=3;var Uf=0;break i}for(Bf=0;Bf<Xh;++Bf)Yh[qs[Bf]]=Q(Ys,3);var Pd=void 0,Ru=void 0,Z1=Ff,J1=Yh,Xs=kd,Vf=Iu,Ld=0,Vo=Z1.m,Nu=8,Kh=o(128,I);r:for(;R(Kh,0,7,J1,19);){if(Q(Vo,1)){var ep=2+2*Q(Vo,3);if((Pd=2+Q(Vo,ep))>Xs)break r}else Pd=Xs;for(Ru=0;Ru<Xs&&Pd--;){de(Vo);var Qh=Kh[0+(127&$(Vo))];re(Vo,Vo.u+Qh.g);var kc=Qh.value;if(16>kc)Vf[Ru++]=kc,kc!=0&&(Nu=kc);else{var tp=kc==16,Zh=kc-16,Jh=fo[Zh],e0=Q(Vo,Cd[Zh])+Jh;if(Ru+e0>Xs)break r;for(var np=tp?Nu:0;0<e0--;)Vf[Ru++]=np}}Ld=1;break r}Ld||(Z1.a=3),Tu=Ld}(Tu=Tu&&!Ys.h)&&(zf=R(Y1,X1,8,Iu,kd)),Tu&&zf!=0?Uf=zf:(Ff.a=3,Uf=0)}if(Uf==0)break n;if(Cu&&Ic[Zt]==1&&(Cu=Ul[ar].g==0),jf+=Ul[ar].g,ar+=Uf,3>=Zt){var Pc,Md=Oc[0];for(Pc=1;Pc<Ar;++Pc)Oc[Pc]>Md&&(Md=Oc[Pc]);Od+=Md}}if(Ca.nd=Cu,Ca.Qb=0,Cu&&(Ca.qb=(Vl[3][Ia[3]+0].value<<24|Vl[1][Ia[1]+0].value<<16|Vl[2][Ia[2]+0].value)>>>0,jf==0&&256>Vl[0][Ia[0]+0].value&&(Ca.Qb=1,Ca.qb+=Vl[0][Ia[0]+0].value<<8)),Ca.jc=!Ca.Qb&&6>Od,Ca.jc){var qf,Ks=Ca;for(qf=0;qf<ai;++qf){var vs=qf,Qs=Ks.pd[vs],Hf=Ks.G[0][Ks.H[0]+vs];256<=Hf.value?(Qs.g=Hf.g+256,Qs.value=Hf.value):(Qs.g=0,Qs.value=0,vs>>=Cr(Hf,8,Qs),vs>>=Cr(Ks.G[1][Ks.H[1]+vs],16,Qs),vs>>=Cr(Ks.G[2][Ks.H[2]+vs],0,Qs),Cr(Ks.G[3][Ks.H[3]+vs],24,Qs))}}}Ur.vc=Vr,Ur.Wb=Zr,Ur.Ya=Ir,Ur.yc=Mf,tr=1;break t}tr=0}if(!(ie=tr)){W.a=3;break e}if(0<Le){if(ge.ua=1<<Le,!vt(ge.Wa,Le)){W.a=1,ie=0;break e}}else ge.ua=0;var Wf=W,t0=oe,rp=se,n0=Wf.s,r0=n0.xc;if(Wf.c=t0,Wf.i=rp,n0.md=ot(t0,r0),n0.wc=r0==0?-1:(1<<r0)-1,B){W.xb=H1;break e}if((_e=a(oe*se))==null){W.a=1,ie=0;break e}ie=(ie=Yr(W,_e,0,oe,se,se,null))&&!fe.h;break e}return ie?(te!=null?te[0]=_e:(e(_e==null),e(B)),W.$=0,B||ri(ge)):ri(ge),ie}function Io(b,E){var B=b.c*b.i,W=B+E+16*E;return e(b.c<=E),b.V=a(W),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+B+E,1)}function To(b,E){var B=b.C,W=E-B,te=b.V,ie=b.Ba+b.c*B;for(e(E<=b.l.o);0<W;){var oe=16<W?16:W,se=b.l.ma,fe=b.l.width,ge=fe*oe,_e=se.ca,Le=se.tb+fe*B,Oe=b.Ta,Ne=b.Ua;$r(b,oe,te,ie),pr(Oe,Ne,_e,Le,ge),vi(se,B,B+oe,_e,Le,fe),W-=oe,te+=oe*b.c,B+=oe}e(B==E),b.C=b.Ma=E}function Fi(){this.ub=this.yd=this.td=this.Rb=0}function va(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Rs(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function fc(){this.Yb=function(){var b=[];return function E(B,W,te){for(var ie=te[W],oe=0;oe<ie&&(B.push(te.length>W+1?[]:0),!(te.length<W+1));oe++)E(B[oe],W+1,te)}(b,0,[3,11]),b}()}function Ns(){this.jb=a(3),this.Wc=s([4,8],fc),this.Xc=s([4,17],fc)}function fu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function qa(){this.ld=this.La=this.dd=this.tc=0}function Ha(){this.Na=this.la=0}function ii(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ro(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function du(){this.uc=this.M=this.Nb=0,this.wa=Array(new qa),this.Y=0,this.ya=Array(new Ro),this.aa=0,this.l=new No}function Ja(){this.y=a(16),this.f=a(8),this.ea=a(8)}function ml(){this.cb=this.a=0,this.sc="",this.m=new he,this.Od=new Fi,this.Kc=new va,this.ed=new fu,this.Qa=new Rs,this.Ic=this.$c=this.Aa=0,this.D=new du,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,he),this.ia=0,this.pb=o(4,ii),this.Pa=new Ns,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ja),this.Hd=0,this.rb=Array(new Ha),this.sb=0,this.wa=Array(new qa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ro),this.L=this.aa=0,this.gd=s([4,2],qa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function No(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function dc(){var b=new ml;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,oi||(oi=hu)),b}function hr(b,E,B){return b.a==0&&(b.a=E,b.sc=B,b.cb=0),0}function yi(b,E,B){return 3<=B&&b[E+0]==157&&b[E+1]==1&&b[E+2]==42}function vl(b,E){if(b==null)return 0;if(b.a=0,b.sc="OK",E==null)return hr(b,2,"null VP8Io passed to VP8GetHeaders()");var B=E.data,W=E.w,te=E.ha;if(4>te)return hr(b,7,"Truncated header.");var ie=B[W+0]|B[W+1]<<8|B[W+2]<<16,oe=b.Od;if(oe.Rb=!(1&ie),oe.td=ie>>1&7,oe.yd=ie>>4&1,oe.ub=ie>>5,3<oe.td)return hr(b,3,"Incorrect keyframe parameters.");if(!oe.yd)return hr(b,4,"Frame not displayable.");W+=3,te-=3;var se=b.Kc;if(oe.Rb){if(7>te)return hr(b,7,"cannot parse picture header");if(!yi(B,W,te))return hr(b,3,"Bad code word");se.c=16383&(B[W+4]<<8|B[W+3]),se.Td=B[W+4]>>6,se.i=16383&(B[W+6]<<8|B[W+5]),se.Ud=B[W+6]>>6,W+=7,te-=7,b.za=se.c+15>>4,b.Ub=se.i+15>>4,E.width=se.c,E.height=se.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,i((ie=b.Pa).jb,0,255,ie.jb.length),e((ie=b.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,i(ie.Zb,0,0,ie.Zb.length),i(ie.Lb,0,0,ie.Lb)}if(oe.ub>te)return hr(b,7,"bad partition length");K(ie=b.m,B,W,oe.ub),W+=oe.ub,te-=oe.ub,oe.Rb&&(se.Ld=we(ie),se.Kd=we(ie)),se=b.Qa;var fe,ge=b.Pa;if(e(ie!=null),e(se!=null),se.Cb=we(ie),se.Cb){if(se.Bb=we(ie),we(ie)){for(se.Fb=we(ie),fe=0;4>fe;++fe)se.Zb[fe]=we(ie)?z(ie,7):0;for(fe=0;4>fe;++fe)se.Lb[fe]=we(ie)?z(ie,6):0}if(se.Bb)for(fe=0;3>fe;++fe)ge.jb[fe]=we(ie)?F(ie,8):255}else se.Bb=0;if(ie.Ka)return hr(b,3,"cannot parse segment header");if((se=b.ed).zd=we(ie),se.Tb=F(ie,6),se.wb=F(ie,3),se.Pc=we(ie),se.Pc&&we(ie)){for(ge=0;4>ge;++ge)we(ie)&&(se.vd[ge]=z(ie,6));for(ge=0;4>ge;++ge)we(ie)&&(se.od[ge]=z(ie,6))}if(b.L=se.Tb==0?0:se.zd?1:2,ie.Ka)return hr(b,3,"cannot parse filter header");var _e=te;if(te=fe=W,W=fe+_e,se=_e,b.Xb=(1<<F(b.m,2))-1,_e<3*(ge=b.Xb))B=7;else{for(fe+=3*ge,se-=3*ge,_e=0;_e<ge;++_e){var Le=B[te+0]|B[te+1]<<8|B[te+2]<<16;Le>se&&(Le=se),K(b.Jc[+_e],B,fe,Le),fe+=Le,se-=Le,te+=3}K(b.Jc[+ge],B,fe,se),B=fe<W?0:5}if(B!=0)return hr(b,B,"cannot parse partitions");for(B=F(fe=b.m,7),te=we(fe)?z(fe,4):0,W=we(fe)?z(fe,4):0,se=we(fe)?z(fe,4):0,ge=we(fe)?z(fe,4):0,fe=we(fe)?z(fe,4):0,_e=b.Qa,Le=0;4>Le;++Le){if(_e.Cb){var Oe=_e.Zb[Le];_e.Fb||(Oe+=B)}else{if(0<Le){b.pb[Le]=b.pb[0];continue}Oe=B}var Ne=b.pb[Le];Ne.Sc[0]=Of[Un(Oe+te,127)],Ne.Sc[1]=kf[Un(Oe+0,127)],Ne.Eb[0]=2*Of[Un(Oe+W,127)],Ne.Eb[1]=101581*kf[Un(Oe+se,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=Of[Un(Oe+ge,117)],Ne.Qc[1]=kf[Un(Oe+fe,127)],Ne.lc=Oe+fe}if(!oe.Rb)return hr(b,4,"Not a key frame.");for(we(ie),oe=b.Pa,B=0;4>B;++B){for(te=0;8>te;++te)for(W=0;3>W;++W)for(se=0;11>se;++se)ge=Ee(ie,Rc[B][te][W][se])?F(ie,8):hs[B][te][W][se],oe.Wc[B][te].Yb[W][se]=ge;for(te=0;17>te;++te)oe.Xc[B][te]=oe.Wc[B][q1[te]]}return b.kc=we(ie),b.kc&&(b.Bd=F(ie,8)),b.cb=1}function hu(b,E,B,W,te,ie,oe){var se=E[te].Yb[B];for(B=0;16>te;++te){if(!Ee(b,se[B+0]))return te;for(;!Ee(b,se[B+1]);)if(se=E[++te].Yb[0],B=0,te==16)return 16;var fe=E[te+1].Yb;if(Ee(b,se[B+2])){var ge=b,_e=0;if(Ee(ge,(Oe=se)[(Le=B)+3]))if(Ee(ge,Oe[Le+6])){for(se=0,Le=2*(_e=Ee(ge,Oe[Le+8]))+(Oe=Ee(ge,Oe[Le+9+_e])),_e=0,Oe=Lr[Le];Oe[se];++se)_e+=_e+Ee(ge,Oe[se]);_e+=3+(8<<Le)}else Ee(ge,Oe[Le+7])?(_e=7+2*Ee(ge,165),_e+=Ee(ge,145)):_e=5+Ee(ge,159);else _e=Ee(ge,Oe[Le+4])?3+Ee(ge,Oe[Le+5]):2;se=fe[2]}else _e=1,se=fe[1];fe=oe+Mn[te],0>(ge=b).b&&xe(ge);var Le,Oe=ge.b,Ne=(Le=ge.Ca>>1)-(ge.I>>Oe)>>31;--ge.b,ge.Ca+=Ne,ge.Ca|=1,ge.I-=(Le+1&Ne)<<Oe,ie[fe]=((_e^Ne)-Ne)*W[(0<te)+0]}return 16}function Zo(b){var E=b.rb[b.sb-1];E.la=0,E.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function hc(b,E){if(b==null)return 0;if(E==null)return hr(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!vl(b,E))return 0;if(e(b.cb),E.ac==null||E.ac(E)){E.ob&&(b.L=0);var B=$s[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=E.v-B>>4,b.zb=E.j-B>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=E.o+15+B>>4,b.Hb=E.va+15+B>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var W=b.ed;for(B=0;4>B;++B){var te;if(b.Qa.Cb){var ie=b.Qa.Lb[B];b.Qa.Fb||(ie+=W.Tb)}else ie=W.Tb;for(te=0;1>=te;++te){var oe=b.gd[B][te],se=ie;if(W.Pc&&(se+=W.vd[0],te&&(se+=W.od[0])),0<(se=0>se?0:63<se?63:se)){var fe=se;0<W.wb&&(fe=4<W.wb?fe>>2:fe>>1)>9-W.wb&&(fe=9-W.wb),1>fe&&(fe=1),oe.dd=fe,oe.tc=2*se+fe,oe.ld=40<=se?2:15<=se?1:0}else oe.tc=0;oe.La=te}}}B=0}else hr(b,6,"Frame setup failed"),B=b.a;if(B=B==0){if(B){b.$c=0,0<b.Aa||(b.Ic=G1);e:{B=b.Ic,W=4*(fe=b.za);var ge=32*fe,_e=fe+1,Le=0<b.L?fe*(0<b.Aa?2:1):0,Oe=(b.Aa==2?2:1)*fe;if((oe=W+832+(te=3*(16*B+$s[b.L])/2*ge)+(ie=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=oe)B=0;else{if(oe>b.Vb){if(b.Vb=0,b.Ec=a(oe),b.Fc=0,b.Ec==null){B=hr(b,1,"no memory during frame initialization.");break e}b.Vb=oe}oe=b.Ec,se=b.Fc,b.Ac=oe,b.Bc=se,se+=W,b.Gd=o(ge,Ja),b.Hd=0,b.rb=o(_e+1,Ha),b.sb=1,b.wa=Le?o(Le,qa):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=fe),e(!0),b.oc=oe,b.pc=se,se+=832,b.ya=o(Oe,Ro),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=fe),b.R=16*fe,b.B=8*fe,fe=(ge=$s[b.L])*b.R,ge=ge/2*b.B,b.sa=oe,b.ta=se+fe,b.qa=b.sa,b.ra=b.ta+16*B*b.R+ge,b.Ha=b.qa,b.Ia=b.ra+8*B*b.B+ge,b.$c=0,se+=te,b.mb=ie?oe:null,b.nb=ie?se:null,e(se+ie<=b.Fc+b.Vb),Zo(b),i(b.Ac,b.Bc,0,W),B=1}}if(B){if(E.ka=0,E.y=b.sa,E.O=b.ta,E.f=b.qa,E.N=b.ra,E.ea=b.Ha,E.Vd=b.Ia,E.fa=b.R,E.Rc=b.B,E.F=null,E.J=0,!zs){for(B=-255;255>=B;++B)zr[255+B]=0>B?-B:B;for(B=-1020;1020>=B;++B)co[1020+B]=-128>B?-128:127<B?127:B;for(B=-112;112>=B;++B)kl[112+B]=-16>B?-16:15<B?15:B;for(B=-255;510>=B;++B)Pl[255+B]=0>B?0:255<B?255:B;zs=1}us=ya,Fo=es,zo=eo,Qr=zn,Ea=ts,kr=Jo,_c=as,fs=Mo,bu=wl,Rl=yc,Nl=bl,Dl=ks,Ac=Ps,wu=os,Ol=Wa,Fs=Vi,Sc=Kr,Pr=mu,ra[0]=zi,ra[1]=pu,ra[2]=ro,ra[3]=gu,ra[4]=xa,ra[5]=io,ra[6]=ta,ra[7]=ba,ra[8]=Lo,ra[9]=ns,Ws[0]=to,Ws[1]=gc,Ws[2]=Oo,Ws[3]=xl,Ws[4]=ir,Ws[5]=Po,Ws[6]=no,Ya[0]=ao,Ya[1]=pc,Ya[2]=mc,Ya[3]=wa,Ya[4]=pn,Ya[5]=Xr,Ya[6]=rs,B=1}else B=0}B&&(B=function(Ne,Ze){for(Ne.M=0;Ne.M<Ne.Va;++Ne.M){var Ue,Ae=Ne.Jc[Ne.M&Ne.Xb],Ce=Ne.m,$e=Ne;for(Ue=0;Ue<$e.za;++Ue){var Je=Ce,Xe=$e,wt=Xe.Ac,ht=Xe.Bc+4*Ue,kt=Xe.zc,gt=Xe.ya[Xe.aa+Ue];if(Xe.Qa.Bb?gt.$b=Ee(Je,Xe.Pa.jb[0])?2+Ee(Je,Xe.Pa.jb[2]):Ee(Je,Xe.Pa.jb[1]):gt.$b=0,Xe.kc&&(gt.Ad=Ee(Je,Xe.Bd)),gt.Za=!Ee(Je,145)+0,gt.Za){var Nn=gt.Ob,Vn=0;for(Xe=0;4>Xe;++Xe){var ln,an=kt[0+Xe];for(ln=0;4>ln;++ln){an=Hh[wt[ht+ln]][an];for(var tr=Ml[Ee(Je,an[0])];0<tr;)tr=Ml[2*tr+Ee(Je,an[tr])];an=-tr,wt[ht+ln]=an}r(Nn,Vn,wt,ht,4),Vn+=4,kt[0+Xe]=an}}else an=Ee(Je,156)?Ee(Je,128)?1:3:Ee(Je,163)?2:0,gt.Ob[0]=an,i(wt,ht,an,4),i(kt,0,an,4);gt.Dd=Ee(Je,142)?Ee(Je,114)?Ee(Je,183)?1:3:2:0}if($e.m.Ka)return hr(Ne,7,"Premature end-of-partition0 encountered.");for(;Ne.ja<Ne.za;++Ne.ja){if($e=Ae,Je=(Ce=Ne).rb[Ce.sb-1],wt=Ce.rb[Ce.sb+Ce.ja],Ue=Ce.ya[Ce.aa+Ce.ja],ht=Ce.kc?Ue.Ad:0)Je.la=wt.la=0,Ue.Za||(Je.Na=wt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var qn,Zt;if(Je=wt,wt=$e,ht=Ce.Pa.Xc,kt=Ce.ya[Ce.aa+Ce.ja],gt=Ce.pb[kt.$b],Xe=kt.ad,Nn=0,Vn=Ce.rb[Ce.sb-1],an=ln=0,i(Xe,Nn,0,384),kt.Za)var ar=0,Lt=ht[3];else{tr=a(16);var Ht=Je.Na+Vn.Na;if(Ht=oi(wt,ht[1],Ht,gt.Eb,0,tr,0),Je.Na=Vn.Na=(0<Ht)+0,1<Ht)us(tr,0,Xe,Nn);else{var Tn=tr[0]+3>>3;for(tr=0;256>tr;tr+=16)Xe[Nn+tr]=Tn}ar=1,Lt=ht[0]}var Dn=15&Je.la,_i=15&Vn.la;for(tr=0;4>tr;++tr){var ci=1&_i;for(Tn=Zt=0;4>Tn;++Tn)Dn=Dn>>1|(ci=(Ht=oi(wt,Lt,Ht=ci+(1&Dn),gt.Sc,ar,Xe,Nn))>ar)<<7,Zt=Zt<<2|(3<Ht?3:1<Ht?2:Xe[Nn+0]!=0),Nn+=16;Dn>>=4,_i=_i>>1|ci<<7,ln=(ln<<8|Zt)>>>0}for(Lt=Dn,ar=_i>>4,qn=0;4>qn;qn+=2){for(Zt=0,Dn=Je.la>>4+qn,_i=Vn.la>>4+qn,tr=0;2>tr;++tr){for(ci=1&_i,Tn=0;2>Tn;++Tn)Ht=ci+(1&Dn),Dn=Dn>>1|(ci=0<(Ht=oi(wt,ht[2],Ht,gt.Qc,0,Xe,Nn)))<<3,Zt=Zt<<2|(3<Ht?3:1<Ht?2:Xe[Nn+0]!=0),Nn+=16;Dn>>=2,_i=_i>>1|ci<<5}an|=Zt<<4*qn,Lt|=Dn<<4<<qn,ar|=(240&_i)<<qn}Je.la=Lt,Vn.la=ar,kt.Hc=ln,kt.Gc=an,kt.ia=43690&an?0:gt.ia,ht=!(ln|an)}if(0<Ce.L&&(Ce.wa[Ce.Y+Ce.ja]=Ce.gd[Ue.$b][Ue.Za],Ce.wa[Ce.Y+Ce.ja].La|=!ht),$e.Ka)return hr(Ne,7,"Premature end-of-file encountered.")}if(Zo(Ne),Ce=Ze,$e=1,Ue=(Ae=Ne).D,Je=0<Ae.L&&Ae.M>=Ae.zb&&Ae.M<=Ae.Va,Ae.Aa==0)e:{if(Ue.M=Ae.M,Ue.uc=Je,_a(Ae,Ue),$e=1,Ue=(Zt=Ae.D).Nb,Je=(an=$s[Ae.L])*Ae.R,wt=an/2*Ae.B,tr=16*Ue*Ae.R,Tn=8*Ue*Ae.B,ht=Ae.sa,kt=Ae.ta-Je+tr,gt=Ae.qa,Xe=Ae.ra-wt+Tn,Nn=Ae.Ha,Vn=Ae.Ia-wt+Tn,_i=(Dn=Zt.M)==0,ln=Dn>=Ae.Va-1,Ae.Aa==2&&_a(Ae,Zt),Zt.uc)for(ci=(Ht=Ae).D.M,e(Ht.D.uc),Zt=Ht.yb;Zt<Ht.Hb;++Zt){ar=Zt,Lt=ci;var Ur=(Vr=(Ar=Ht).D).Nb;qn=Ar.R;var Vr=Vr.wa[Vr.Y+ar],Zr=Ar.sa,ho=Ar.ta+16*Ur*qn+16*ar,Hn=Vr.dd,Jr=Vr.tc;if(Jr!=0)if(e(3<=Jr),Ar.L==1)0<ar&&Fs(Zr,ho,qn,Jr+4),Vr.La&&Pr(Zr,ho,qn,Jr),0<Lt&&Ol(Zr,ho,qn,Jr+4),Vr.La&&Sc(Zr,ho,qn,Jr);else{var Uo=Ar.B,Fl=Ar.qa,Dc=Ar.ra+8*Ur*Uo+8*ar,zl=Ar.Ha,Ar=Ar.Ia+8*Ur*Uo+8*ar;Ur=Vr.ld,0<ar&&(fs(Zr,ho,qn,Jr+4,Hn,Ur),Rl(Fl,Dc,zl,Ar,Uo,Jr+4,Hn,Ur)),Vr.La&&(Dl(Zr,ho,qn,Jr,Hn,Ur),wu(Fl,Dc,zl,Ar,Uo,Jr,Hn,Ur)),0<Lt&&(_c(Zr,ho,qn,Jr+4,Hn,Ur),bu(Fl,Dc,zl,Ar,Uo,Jr+4,Hn,Ur)),Vr.La&&(Nl(Zr,ho,qn,Jr,Hn,Ur),Ac(Fl,Dc,zl,Ar,Uo,Jr,Hn,Ur))}}if(Ae.ia&&alert("todo:DitherRow"),Ce.put!=null){if(Zt=16*Dn,Dn=16*(Dn+1),_i?(Ce.y=Ae.sa,Ce.O=Ae.ta+tr,Ce.f=Ae.qa,Ce.N=Ae.ra+Tn,Ce.ea=Ae.Ha,Ce.W=Ae.Ia+Tn):(Zt-=an,Ce.y=ht,Ce.O=kt,Ce.f=gt,Ce.N=Xe,Ce.ea=Nn,Ce.W=Vn),ln||(Dn-=an),Dn>Ce.o&&(Dn=Ce.o),Ce.F=null,Ce.J=null,Ae.Fa!=null&&0<Ae.Fa.length&&Zt<Dn&&(Ce.J=Al(Ae,Ce,Zt,Dn-Zt),Ce.F=Ae.mb,Ce.F==null&&Ce.F.length==0)){$e=hr(Ae,3,"Could not decode alpha data.");break e}Zt<Ce.j&&(an=Ce.j-Zt,Zt=Ce.j,e(!(1&an)),Ce.O+=Ae.R*an,Ce.N+=Ae.B*(an>>1),Ce.W+=Ae.B*(an>>1),Ce.F!=null&&(Ce.J+=Ce.width*an)),Zt<Dn&&(Ce.O+=Ce.v,Ce.N+=Ce.v>>1,Ce.W+=Ce.v>>1,Ce.F!=null&&(Ce.J+=Ce.v),Ce.ka=Zt-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=Dn-Zt,$e=Ce.put(Ce))}Ue+1!=Ae.Ic||ln||(r(Ae.sa,Ae.ta-Je,ht,kt+16*Ae.R,Je),r(Ae.qa,Ae.ra-wt,gt,Xe+8*Ae.B,wt),r(Ae.Ha,Ae.Ia-wt,Nn,Vn+8*Ae.B,wt))}if(!$e)return hr(Ne,6,"Output aborted.")}return 1}(b,E)),E.bc!=null&&E.bc(E),B&=1}return B?(b.cb=0,B):0}function Ci(b,E,B,W,te){te=b[E+B+32*W]+(te>>3),b[E+B+32*W]=-256&te?0>te?0:255:te}function yl(b,E,B,W,te,ie){Ci(b,E,0,B,W+te),Ci(b,E,1,B,W+ie),Ci(b,E,2,B,W-ie),Ci(b,E,3,B,W-te)}function In(b){return(20091*b>>16)+b}function Ii(b,E,B,W){var te,ie=0,oe=a(16);for(te=0;4>te;++te){var se=b[E+0]+b[E+8],fe=b[E+0]-b[E+8],ge=(35468*b[E+4]>>16)-In(b[E+12]),_e=In(b[E+4])+(35468*b[E+12]>>16);oe[ie+0]=se+_e,oe[ie+1]=fe+ge,oe[ie+2]=fe-ge,oe[ie+3]=se-_e,ie+=4,E++}for(te=ie=0;4>te;++te)se=(b=oe[ie+0]+4)+oe[ie+8],fe=b-oe[ie+8],ge=(35468*oe[ie+4]>>16)-In(oe[ie+12]),Ci(B,W,0,0,se+(_e=In(oe[ie+4])+(35468*oe[ie+12]>>16))),Ci(B,W,1,0,fe+ge),Ci(B,W,2,0,fe-ge),Ci(B,W,3,0,se-_e),ie++,W+=32}function Jo(b,E,B,W){var te=b[E+0]+4,ie=35468*b[E+4]>>16,oe=In(b[E+4]),se=35468*b[E+1]>>16;yl(B,W,0,te+oe,b=In(b[E+1]),se),yl(B,W,1,te+ie,b,se),yl(B,W,2,te-ie,b,se),yl(B,W,3,te-oe,b,se)}function es(b,E,B,W,te){Ii(b,E,B,W),te&&Ii(b,E+16,B,W+4)}function eo(b,E,B,W){Fo(b,E+0,B,W,1),Fo(b,E+32,B,W+128,1)}function zn(b,E,B,W){var te;for(b=b[E+0]+4,te=0;4>te;++te)for(E=0;4>E;++E)Ci(B,W,E,te,b)}function ts(b,E,B,W){b[E+0]&&Qr(b,E+0,B,W),b[E+16]&&Qr(b,E+16,B,W+4),b[E+32]&&Qr(b,E+32,B,W+128),b[E+48]&&Qr(b,E+48,B,W+128+4)}function ya(b,E,B,W){var te,ie=a(16);for(te=0;4>te;++te){var oe=b[E+0+te]+b[E+12+te],se=b[E+4+te]+b[E+8+te],fe=b[E+4+te]-b[E+8+te],ge=b[E+0+te]-b[E+12+te];ie[0+te]=oe+se,ie[8+te]=oe-se,ie[4+te]=ge+fe,ie[12+te]=ge-fe}for(te=0;4>te;++te)oe=(b=ie[0+4*te]+3)+ie[3+4*te],se=ie[1+4*te]+ie[2+4*te],fe=ie[1+4*te]-ie[2+4*te],ge=b-ie[3+4*te],B[W+0]=oe+se>>3,B[W+16]=ge+fe>>3,B[W+32]=oe-se>>3,B[W+48]=ge-fe>>3,W+=64}function Do(b,E,B){var W,te=E-32,ie=bi,oe=255-b[te-1];for(W=0;W<B;++W){var se,fe=ie,ge=oe+b[E-1];for(se=0;se<B;++se)b[E+se]=fe[ge+b[te+se]];E+=32}}function pu(b,E){Do(b,E,4)}function pc(b,E){Do(b,E,8)}function gc(b,E){Do(b,E,16)}function Oo(b,E){var B;for(B=0;16>B;++B)r(b,E+32*B,b,E-32,16)}function xl(b,E){var B;for(B=16;0<B;--B)i(b,E,b[E-1],16),E+=32}function ko(b,E,B){var W;for(W=0;16>W;++W)i(E,B+32*W,b,16)}function to(b,E){var B,W=16;for(B=0;16>B;++B)W+=b[E-1+32*B]+b[E+B-32];ko(W>>5,b,E)}function ir(b,E){var B,W=8;for(B=0;16>B;++B)W+=b[E-1+32*B];ko(W>>4,b,E)}function Po(b,E){var B,W=8;for(B=0;16>B;++B)W+=b[E+B-32];ko(W>>4,b,E)}function no(b,E){ko(128,b,E)}function Ft(b,E,B){return b+2*E+B+2>>2}function ro(b,E){var B,W=E-32;for(W=new Uint8Array([Ft(b[W-1],b[W+0],b[W+1]),Ft(b[W+0],b[W+1],b[W+2]),Ft(b[W+1],b[W+2],b[W+3]),Ft(b[W+2],b[W+3],b[W+4])]),B=0;4>B;++B)r(b,E+32*B,W,0,W.length)}function gu(b,E){var B=b[E-1],W=b[E-1+32],te=b[E-1+64],ie=b[E-1+96];Ve(b,E+0,16843009*Ft(b[E-1-32],B,W)),Ve(b,E+32,16843009*Ft(B,W,te)),Ve(b,E+64,16843009*Ft(W,te,ie)),Ve(b,E+96,16843009*Ft(te,ie,ie))}function zi(b,E){var B,W=4;for(B=0;4>B;++B)W+=b[E+B-32]+b[E-1+32*B];for(W>>=3,B=0;4>B;++B)i(b,E+32*B,W,4)}function xa(b,E){var B=b[E-1+0],W=b[E-1+32],te=b[E-1+64],ie=b[E-1-32],oe=b[E+0-32],se=b[E+1-32],fe=b[E+2-32],ge=b[E+3-32];b[E+0+96]=Ft(W,te,b[E-1+96]),b[E+1+96]=b[E+0+64]=Ft(B,W,te),b[E+2+96]=b[E+1+64]=b[E+0+32]=Ft(ie,B,W),b[E+3+96]=b[E+2+64]=b[E+1+32]=b[E+0+0]=Ft(oe,ie,B),b[E+3+64]=b[E+2+32]=b[E+1+0]=Ft(se,oe,ie),b[E+3+32]=b[E+2+0]=Ft(fe,se,oe),b[E+3+0]=Ft(ge,fe,se)}function ta(b,E){var B=b[E+1-32],W=b[E+2-32],te=b[E+3-32],ie=b[E+4-32],oe=b[E+5-32],se=b[E+6-32],fe=b[E+7-32];b[E+0+0]=Ft(b[E+0-32],B,W),b[E+1+0]=b[E+0+32]=Ft(B,W,te),b[E+2+0]=b[E+1+32]=b[E+0+64]=Ft(W,te,ie),b[E+3+0]=b[E+2+32]=b[E+1+64]=b[E+0+96]=Ft(te,ie,oe),b[E+3+32]=b[E+2+64]=b[E+1+96]=Ft(ie,oe,se),b[E+3+64]=b[E+2+96]=Ft(oe,se,fe),b[E+3+96]=Ft(se,fe,fe)}function io(b,E){var B=b[E-1+0],W=b[E-1+32],te=b[E-1+64],ie=b[E-1-32],oe=b[E+0-32],se=b[E+1-32],fe=b[E+2-32],ge=b[E+3-32];b[E+0+0]=b[E+1+64]=ie+oe+1>>1,b[E+1+0]=b[E+2+64]=oe+se+1>>1,b[E+2+0]=b[E+3+64]=se+fe+1>>1,b[E+3+0]=fe+ge+1>>1,b[E+0+96]=Ft(te,W,B),b[E+0+64]=Ft(W,B,ie),b[E+0+32]=b[E+1+96]=Ft(B,ie,oe),b[E+1+32]=b[E+2+96]=Ft(ie,oe,se),b[E+2+32]=b[E+3+96]=Ft(oe,se,fe),b[E+3+32]=Ft(se,fe,ge)}function ba(b,E){var B=b[E+0-32],W=b[E+1-32],te=b[E+2-32],ie=b[E+3-32],oe=b[E+4-32],se=b[E+5-32],fe=b[E+6-32],ge=b[E+7-32];b[E+0+0]=B+W+1>>1,b[E+1+0]=b[E+0+64]=W+te+1>>1,b[E+2+0]=b[E+1+64]=te+ie+1>>1,b[E+3+0]=b[E+2+64]=ie+oe+1>>1,b[E+0+32]=Ft(B,W,te),b[E+1+32]=b[E+0+96]=Ft(W,te,ie),b[E+2+32]=b[E+1+96]=Ft(te,ie,oe),b[E+3+32]=b[E+2+96]=Ft(ie,oe,se),b[E+3+64]=Ft(oe,se,fe),b[E+3+96]=Ft(se,fe,ge)}function ns(b,E){var B=b[E-1+0],W=b[E-1+32],te=b[E-1+64],ie=b[E-1+96];b[E+0+0]=B+W+1>>1,b[E+2+0]=b[E+0+32]=W+te+1>>1,b[E+2+32]=b[E+0+64]=te+ie+1>>1,b[E+1+0]=Ft(B,W,te),b[E+3+0]=b[E+1+32]=Ft(W,te,ie),b[E+3+32]=b[E+1+64]=Ft(te,ie,ie),b[E+3+64]=b[E+2+64]=b[E+0+96]=b[E+1+96]=b[E+2+96]=b[E+3+96]=ie}function Lo(b,E){var B=b[E-1+0],W=b[E-1+32],te=b[E-1+64],ie=b[E-1+96],oe=b[E-1-32],se=b[E+0-32],fe=b[E+1-32],ge=b[E+2-32];b[E+0+0]=b[E+2+32]=B+oe+1>>1,b[E+0+32]=b[E+2+64]=W+B+1>>1,b[E+0+64]=b[E+2+96]=te+W+1>>1,b[E+0+96]=ie+te+1>>1,b[E+3+0]=Ft(se,fe,ge),b[E+2+0]=Ft(oe,se,fe),b[E+1+0]=b[E+3+32]=Ft(B,oe,se),b[E+1+32]=b[E+3+64]=Ft(W,B,oe),b[E+1+64]=b[E+3+96]=Ft(te,W,B),b[E+1+96]=Ft(ie,te,W)}function mc(b,E){var B;for(B=0;8>B;++B)r(b,E+32*B,b,E-32,8)}function wa(b,E){var B;for(B=0;8>B;++B)i(b,E,b[E-1],8),E+=32}function Ui(b,E,B){var W;for(W=0;8>W;++W)i(E,B+32*W,b,8)}function ao(b,E){var B,W=8;for(B=0;8>B;++B)W+=b[E+B-32]+b[E-1+32*B];Ui(W>>4,b,E)}function Xr(b,E){var B,W=4;for(B=0;8>B;++B)W+=b[E+B-32];Ui(W>>3,b,E)}function pn(b,E){var B,W=4;for(B=0;8>B;++B)W+=b[E-1+32*B];Ui(W>>3,b,E)}function rs(b,E){Ui(128,b,E)}function oo(b,E,B){var W=b[E-B],te=b[E+0],ie=3*(te-W)+Sd[1020+b[E-2*B]-b[E+B]],oe=Ec[112+(ie+4>>3)];b[E-B]=bi[255+W+Ec[112+(ie+3>>3)]],b[E+0]=bi[255+te-oe]}function vc(b,E,B,W){var te=b[E+0],ie=b[E+B];return uo[255+b[E-2*B]-b[E-B]]>W||uo[255+ie-te]>W}function Ds(b,E,B,W){return 4*uo[255+b[E-B]-b[E+0]]+uo[255+b[E-2*B]-b[E+B]]<=W}function Os(b,E,B,W,te){var ie=b[E-3*B],oe=b[E-2*B],se=b[E-B],fe=b[E+0],ge=b[E+B],_e=b[E+2*B],Le=b[E+3*B];return 4*uo[255+se-fe]+uo[255+oe-ge]>W?0:uo[255+b[E-4*B]-ie]<=te&&uo[255+ie-oe]<=te&&uo[255+oe-se]<=te&&uo[255+Le-_e]<=te&&uo[255+_e-ge]<=te&&uo[255+ge-fe]<=te}function Wa(b,E,B,W){var te=2*W+1;for(W=0;16>W;++W)Ds(b,E+W,B,te)&&oo(b,E+W,B)}function Vi(b,E,B,W){var te=2*W+1;for(W=0;16>W;++W)Ds(b,E+W*B,1,te)&&oo(b,E+W*B,1)}function Kr(b,E,B,W){var te;for(te=3;0<te;--te)Wa(b,E+=4*B,B,W)}function mu(b,E,B,W){var te;for(te=3;0<te;--te)Vi(b,E+=4,B,W)}function is(b,E,B,W,te,ie,oe,se){for(ie=2*ie+1;0<te--;){if(Os(b,E,B,ie,oe))if(vc(b,E,B,se))oo(b,E,B);else{var fe=b,ge=E,_e=B,Le=fe[ge-2*_e],Oe=fe[ge-_e],Ne=fe[ge+0],Ze=fe[ge+_e],Ue=fe[ge+2*_e],Ae=27*($e=Sd[1020+3*(Ne-Oe)+Sd[1020+Le-Ze]])+63>>7,Ce=18*$e+63>>7,$e=9*$e+63>>7;fe[ge-3*_e]=bi[255+fe[ge-3*_e]+$e],fe[ge-2*_e]=bi[255+Le+Ce],fe[ge-_e]=bi[255+Oe+Ae],fe[ge+0]=bi[255+Ne-Ae],fe[ge+_e]=bi[255+Ze-Ce],fe[ge+2*_e]=bi[255+Ue-$e]}E+=W}}function Ti(b,E,B,W,te,ie,oe,se){for(ie=2*ie+1;0<te--;){if(Os(b,E,B,ie,oe))if(vc(b,E,B,se))oo(b,E,B);else{var fe=b,ge=E,_e=B,Le=fe[ge-_e],Oe=fe[ge+0],Ne=fe[ge+_e],Ze=Ec[112+((Ue=3*(Oe-Le))+4>>3)],Ue=Ec[112+(Ue+3>>3)],Ae=Ze+1>>1;fe[ge-2*_e]=bi[255+fe[ge-2*_e]+Ae],fe[ge-_e]=bi[255+Le+Ue],fe[ge+0]=bi[255+Oe-Ze],fe[ge+_e]=bi[255+Ne-Ae]}E+=W}}function as(b,E,B,W,te,ie){is(b,E,B,1,16,W,te,ie)}function Mo(b,E,B,W,te,ie){is(b,E,1,B,16,W,te,ie)}function bl(b,E,B,W,te,ie){var oe;for(oe=3;0<oe;--oe)Ti(b,E+=4*B,B,1,16,W,te,ie)}function ks(b,E,B,W,te,ie){var oe;for(oe=3;0<oe;--oe)Ti(b,E+=4,1,B,16,W,te,ie)}function wl(b,E,B,W,te,ie,oe,se){is(b,E,te,1,8,ie,oe,se),is(B,W,te,1,8,ie,oe,se)}function yc(b,E,B,W,te,ie,oe,se){is(b,E,1,te,8,ie,oe,se),is(B,W,1,te,8,ie,oe,se)}function Ps(b,E,B,W,te,ie,oe,se){Ti(b,E+4*te,te,1,8,ie,oe,se),Ti(B,W+4*te,te,1,8,ie,oe,se)}function os(b,E,B,W,te,ie,oe,se){Ti(b,E+4,1,te,8,ie,oe,se),Ti(B,W+4,1,te,8,ie,oe,se)}function Ls(){this.ba=new Br,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _l(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ms(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ss(){this.ua=0,this.Wa=new ve,this.vb=new ve,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new I}function vu(){this.xb=this.a=0,this.l=new No,this.ca=new Br,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ss,this.ab=0,this.gc=o(4,Ms),this.Oc=0}function jo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new No,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ls(b,E,B,W,te,ie,oe){for(b=b==null?0:b[E+0],E=0;E<oe;++E)te[ie+E]=b+B[W+E]&255,b=te[ie+E]}function js(b,E,B,W,te,ie,oe){var se;if(b==null)ls(null,null,B,W,te,ie,oe);else for(se=0;se<oe;++se)te[ie+se]=b[E+se]+B[W+se]&255}function qi(b,E,B,W,te,ie,oe){if(b==null)ls(null,null,B,W,te,ie,oe);else{var se,fe=b[E+0],ge=fe,_e=fe;for(se=0;se<oe;++se)ge=_e+(fe=b[E+se])-ge,_e=B[W+se]+(-256&ge?0>ge?0:255:ge)&255,ge=fe,te[ie+se]=_e}}function Al(b,E,B,W){var te=E.width,ie=E.o;if(e(b!=null&&E!=null),0>B||0>=W||B+W>ie)return null;if(!b.Cc){if(b.ga==null){var oe;if(b.ga=new jo,(oe=b.ga==null)||(oe=E.width*E.o,e(b.Gb.length==0),b.Gb=a(oe),b.Uc=0,b.Gb==null?oe=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,oe=1),oe=!oe),!oe){oe=b.ga;var se=b.Fa,fe=b.P,ge=b.qc,_e=b.mb,Le=b.nb,Oe=fe+1,Ne=ge-1,Ze=oe.l;if(e(se!=null&&_e!=null&&E!=null),ps[0]=null,ps[1]=ls,ps[2]=js,ps[3]=qi,oe.ca=_e,oe.tb=Le,oe.c=E.width,oe.i=E.height,e(0<oe.c&&0<oe.i),1>=ge)E=0;else if(oe.$a=se[fe+0]>>0&3,oe.Z=se[fe+0]>>2&3,oe.Lc=se[fe+0]>>4&3,fe=se[fe+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||fe)E=0;else if(Ze.put=yr,Ze.ac=Bn,Ze.bc=Va,Ze.ma=oe,Ze.width=E.width,Ze.height=E.height,Ze.Da=E.Da,Ze.v=E.v,Ze.va=E.va,Ze.j=E.j,Ze.o=E.o,oe.$a)e:{e(oe.$a==1),E=dr();t:for(;;){if(E==null){E=0;break e}if(e(oe!=null),oe.mc=E,E.c=oe.c,E.i=oe.i,E.l=oe.l,E.l.ma=oe,E.l.width=oe.c,E.l.height=oe.i,E.a=0,ee(E.m,se,Oe,Ne),!Fn(oe.c,oe.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&ea(E.s)?(oe.ic=1,se=E.c*E.i,E.Ta=null,E.Ua=0,E.V=a(se),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(oe.ic=0,E=Io(E,oe.c)),!E))break t;E=1;break e}oe.mc=null,E=0}else E=Ne>=oe.c*oe.i;oe=!E}if(oe)return null;b.ga.Lc!=1?b.Ga=0:W=ie-B}e(b.ga!=null),e(B+W<=ie);e:{if(E=(se=b.ga).c,ie=se.l.o,se.$a==0){if(Oe=b.rc,Ne=b.Vc,Ze=b.Fa,fe=b.P+1+B*E,ge=b.mb,_e=b.nb+B*E,e(fe<=b.P+b.qc),se.Z!=0)for(e(ps[se.Z]!=null),oe=0;oe<W;++oe)ps[se.Z](Oe,Ne,Ze,fe,ge,_e,E),Oe=ge,Ne=_e,_e+=E,fe+=E;else for(oe=0;oe<W;++oe)r(ge,_e,Ze,fe,E),Oe=ge,Ne=_e,_e+=E,fe+=E;b.rc=Oe,b.Vc=Ne}else{if(e(se.mc!=null),E=B+W,e((oe=se.mc)!=null),e(E<=oe.i),oe.C>=E)E=1;else if(se.ic||Re(),se.ic){se=oe.V,Oe=oe.Ba,Ne=oe.c;var Ue=oe.i,Ae=(Ze=1,fe=oe.$/Ne,ge=oe.$%Ne,_e=oe.m,Le=oe.s,oe.$),Ce=Ne*Ue,$e=Ne*E,Je=Le.wc,Xe=Ae<$e?Or(Le,ge,fe):null;e(Ae<=Ce),e(E<=Ue),e(ea(Le));t:for(;;){for(;!_e.h&&Ae<$e;){if(ge&Je||(Xe=Or(Le,ge,fe)),e(Xe!=null),de(_e),256>(Ue=xr(Xe.G[0],Xe.H[0],_e)))se[Oe+Ae]=Ue,++Ae,++ge>=Ne&&(ge=0,++fe<=E&&!(fe%16)&&ni(oe,fe));else{if(!(280>Ue)){Ze=0;break t}Ue=Xn(Ue-256,_e);var wt,ht=xr(Xe.G[4],Xe.H[4],_e);if(de(_e),!(Ae>=(ht=Kn(Ne,ht=Xn(ht,_e)))&&Ce-Ae>=Ue)){Ze=0;break t}for(wt=0;wt<Ue;++wt)se[Oe+Ae+wt]=se[Oe+Ae+wt-ht];for(Ae+=Ue,ge+=Ue;ge>=Ne;)ge-=Ne,++fe<=E&&!(fe%16)&&ni(oe,fe);Ae<$e&&ge&Je&&(Xe=Or(Le,ge,fe))}e(_e.h==Z(_e))}ni(oe,fe>E?E:fe);break t}!Ze||_e.h&&Ae<Ce?(Ze=0,oe.a=_e.h?5:3):oe.$=Ae,E=Ze}else E=Yr(oe,oe.V,oe.Ba,oe.c,oe.i,E,To);if(!E){W=0;break e}}B+W>=ie&&(b.Cc=1),W=1}if(!W)return null;if(b.Cc&&((W=b.ga)!=null&&(W.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+B*te}function k(b,E,B,W,te,ie){for(;0<te--;){var oe,se=b,fe=E+(B?1:0),ge=b,_e=E+(B?0:3);for(oe=0;oe<W;++oe){var Le=ge[_e+4*oe];Le!=255&&(Le*=32897,se[fe+4*oe+0]=se[fe+4*oe+0]*Le>>23,se[fe+4*oe+1]=se[fe+4*oe+1]*Le>>23,se[fe+4*oe+2]=se[fe+4*oe+2]*Le>>23)}E+=ie}}function ne(b,E,B,W,te){for(;0<W--;){var ie;for(ie=0;ie<B;++ie){var oe=b[E+2*ie+0],se=15&(ge=b[E+2*ie+1]),fe=4369*se,ge=(240&ge|ge>>4)*fe>>16;b[E+2*ie+0]=(240&oe|oe>>4)*fe>>16&240|(15&oe|oe<<4)*fe>>16>>4&15,b[E+2*ie+1]=240&ge|se}E+=te}}function me(b,E,B,W,te,ie,oe,se){var fe,ge,_e=255;for(ge=0;ge<te;++ge){for(fe=0;fe<W;++fe){var Le=b[E+fe];ie[oe+4*fe]=Le,_e&=Le}E+=B,oe+=se}return _e!=255}function be(b,E,B,W,te){var ie;for(ie=0;ie<te;++ie)B[W+ie]=b[E+ie]>>8}function Re(){Ga=k,cn=ne,un=me,pr=be}function qe(b,E,B){C[b]=function(W,te,ie,oe,se,fe,ge,_e,Le,Oe,Ne,Ze,Ue,Ae,Ce,$e,Je){var Xe,wt=Je-1>>1,ht=se[fe+0]|ge[_e+0]<<16,kt=Le[Oe+0]|Ne[Ze+0]<<16;e(W!=null);var gt=3*ht+kt+131074>>2;for(E(W[te+0],255&gt,gt>>16,Ue,Ae),ie!=null&&(gt=3*kt+ht+131074>>2,E(ie[oe+0],255&gt,gt>>16,Ce,$e)),Xe=1;Xe<=wt;++Xe){var Nn=se[fe+Xe]|ge[_e+Xe]<<16,Vn=Le[Oe+Xe]|Ne[Ze+Xe]<<16,ln=ht+Nn+kt+Vn+524296,an=ln+2*(Nn+kt)>>3;gt=an+ht>>1,ht=(ln=ln+2*(ht+Vn)>>3)+Nn>>1,E(W[te+2*Xe-1],255&gt,gt>>16,Ue,Ae+(2*Xe-1)*B),E(W[te+2*Xe-0],255&ht,ht>>16,Ue,Ae+(2*Xe-0)*B),ie!=null&&(gt=ln+kt>>1,ht=an+Vn>>1,E(ie[oe+2*Xe-1],255&gt,gt>>16,Ce,$e+(2*Xe-1)*B),E(ie[oe+2*Xe+0],255&ht,ht>>16,Ce,$e+(2*Xe+0)*B)),ht=Nn,kt=Vn}1&Je||(gt=3*ht+kt+131074>>2,E(W[te+Je-1],255&gt,gt>>16,Ue,Ae+(Je-1)*B),ie!=null&&(gt=3*kt+ht+131074>>2,E(ie[oe+Je-1],255&gt,gt>>16,Ce,$e+(Je-1)*B)))}}function at(){wi[Hi]=Gs,wi[_u]=gs,wi[ds]=jl,wi[Nf]=Id,wi[Cc]=Td,wi[Us]=Eu,wi[Ed]=Rd,wi[Df]=gs,wi[Ll]=Id,wi[Vs]=Td,wi[Au]=Eu}function pt(b){return b&-16384?0>b?0:255:b>>t2}function w(b,E){return pt((19077*b>>8)+(26149*E>>8)-14234)}function V(b,E,B){return pt((19077*b>>8)-(6419*E>>8)-(13320*B>>8)+8708)}function Y(b,E){return pt((19077*b>>8)+(33050*E>>8)-17685)}function le(b,E,B,W,te){W[te+0]=w(b,B),W[te+1]=V(b,E,B),W[te+2]=Y(b,E)}function Ie(b,E,B,W,te){W[te+0]=Y(b,E),W[te+1]=V(b,E,B),W[te+2]=w(b,B)}function Me(b,E,B,W,te){var ie=V(b,E,B);E=ie<<3&224|Y(b,E)>>3,W[te+0]=248&w(b,B)|ie>>5,W[te+1]=E}function st(b,E,B,W,te){var ie=240&Y(b,E)|15;W[te+0]=240&w(b,B)|V(b,E,B)>>4,W[te+1]=ie}function zt(b,E,B,W,te){W[te+0]=255,le(b,E,B,W,te+1)}function gn(b,E,B,W,te){Ie(b,E,B,W,te),W[te+3]=255}function Qt(b,E,B,W,te){le(b,E,B,W,te),W[te+3]=255}function Un(b,E){return 0>b?0:b>E?E:b}function er(b,E,B){C[b]=function(W,te,ie,oe,se,fe,ge,_e,Le){for(var Oe=_e+(-2&Le)*B;_e!=Oe;)E(W[te+0],ie[oe+0],se[fe+0],ge,_e),E(W[te+1],ie[oe+0],se[fe+0],ge,_e+B),te+=2,++oe,++fe,_e+=2*B;1&Le&&E(W[te+0],ie[oe+0],se[fe+0],ge,_e)}}function so(b,E,B){return B==0?b==0?E==0?6:5:E==0?4:0:B}function Fr(b,E,B,W,te){switch(b>>>30){case 3:Fo(E,B,W,te,0);break;case 2:kr(E,B,W,te);break;case 1:Qr(E,B,W,te)}}function _a(b,E){var B,W,te=E.M,ie=E.Nb,oe=b.oc,se=b.pc+40,fe=b.oc,ge=b.pc+584,_e=b.oc,Le=b.pc+600;for(B=0;16>B;++B)oe[se+32*B-1]=129;for(B=0;8>B;++B)fe[ge+32*B-1]=129,_e[Le+32*B-1]=129;for(0<te?oe[se-1-32]=fe[ge-1-32]=_e[Le-1-32]=129:(i(oe,se-32-1,127,21),i(fe,ge-32-1,127,9),i(_e,Le-32-1,127,9)),W=0;W<b.za;++W){var Oe=E.ya[E.aa+W];if(0<W){for(B=-1;16>B;++B)r(oe,se+32*B-4,oe,se+32*B+12,4);for(B=-1;8>B;++B)r(fe,ge+32*B-4,fe,ge+32*B+4,4),r(_e,Le+32*B-4,_e,Le+32*B+4,4)}var Ne=b.Gd,Ze=b.Hd+W,Ue=Oe.ad,Ae=Oe.Hc;if(0<te&&(r(oe,se-32,Ne[Ze].y,0,16),r(fe,ge-32,Ne[Ze].f,0,8),r(_e,Le-32,Ne[Ze].ea,0,8)),Oe.Za){var Ce=oe,$e=se-32+16;for(0<te&&(W>=b.za-1?i(Ce,$e,Ne[Ze].y[15],4):r(Ce,$e,Ne[Ze+1].y,0,4)),B=0;4>B;B++)Ce[$e+128+B]=Ce[$e+256+B]=Ce[$e+384+B]=Ce[$e+0+B];for(B=0;16>B;++B,Ae<<=2)Ce=oe,$e=se+Nc[B],ra[Oe.Ob[B]](Ce,$e),Fr(Ae,Ue,16*+B,Ce,$e)}else if(Ce=so(W,te,Oe.Ob[0]),Ws[Ce](oe,se),Ae!=0)for(B=0;16>B;++B,Ae<<=2)Fr(Ae,Ue,16*+B,oe,se+Nc[B]);for(B=Oe.Gc,Ce=so(W,te,Oe.Dd),Ya[Ce](fe,ge),Ya[Ce](_e,Le),Ae=Ue,Ce=fe,$e=ge,255&(Oe=B>>0)&&(170&Oe?zo(Ae,256,Ce,$e):Ea(Ae,256,Ce,$e)),Oe=_e,Ae=Le,255&(B>>=8)&&(170&B?zo(Ue,320,Oe,Ae):Ea(Ue,320,Oe,Ae)),te<b.Ub-1&&(r(Ne[Ze].y,0,oe,se+480,16),r(Ne[Ze].f,0,fe,ge+224,8),r(Ne[Ze].ea,0,_e,Le+224,8)),B=8*ie*b.B,Ne=b.sa,Ze=b.ta+16*W+16*ie*b.R,Ue=b.qa,Oe=b.ra+8*W+B,Ae=b.Ha,Ce=b.Ia+8*W+B,B=0;16>B;++B)r(Ne,Ze+B*b.R,oe,se+32*B,16);for(B=0;8>B;++B)r(Ue,Oe+B*b.B,fe,ge+32*B,8),r(Ae,Ce+B*b.B,_e,Le+32*B,8)}}function cs(b,E,B,W,te,ie,oe,se,fe){var ge=[0],_e=[0],Le=0,Oe=fe!=null?fe.kd:0,Ne=fe??new _l;if(b==null||12>B)return 7;Ne.data=b,Ne.w=E,Ne.ha=B,E=[E],B=[B],Ne.gb=[Ne.gb];e:{var Ze=E,Ue=B,Ae=Ne.gb;if(e(b!=null),e(Ue!=null),e(Ae!=null),Ae[0]=0,12<=Ue[0]&&!t(b,Ze[0],"RIFF")){if(t(b,Ze[0]+8,"WEBP")){Ae=3;break e}var Ce=ct(b,Ze[0]+4);if(12>Ce||4294967286<Ce){Ae=3;break e}if(Oe&&Ce>Ue[0]-8){Ae=7;break e}Ae[0]=Ce,Ze[0]+=12,Ue[0]-=12}Ae=0}if(Ae!=0)return Ae;for(Ce=0<Ne.gb[0],B=B[0];;){e:{var $e=b;Ue=E,Ae=B;var Je=ge,Xe=_e,wt=Ze=[0];if((gt=Le=[Le])[0]=0,8>Ae[0])Ae=7;else{if(!t($e,Ue[0],"VP8X")){if(ct($e,Ue[0]+4)!=10){Ae=3;break e}if(18>Ae[0]){Ae=7;break e}var ht=ct($e,Ue[0]+8),kt=1+it($e,Ue[0]+12);if(2147483648<=kt*($e=1+it($e,Ue[0]+15))){Ae=3;break e}wt!=null&&(wt[0]=ht),Je!=null&&(Je[0]=kt),Xe!=null&&(Xe[0]=$e),Ue[0]+=18,Ae[0]-=18,gt[0]=1}Ae=0}}if(Le=Le[0],Ze=Ze[0],Ae!=0)return Ae;if(Ue=!!(2&Ze),!Ce&&Le)return 3;if(ie!=null&&(ie[0]=!!(16&Ze)),oe!=null&&(oe[0]=Ue),se!=null&&(se[0]=0),oe=ge[0],Ze=_e[0],Le&&Ue&&fe==null){Ae=0;break}if(4>B){Ae=7;break}if(Ce&&Le||!Ce&&!Le&&!t(b,E[0],"ALPH")){B=[B],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{ht=b,Ae=E,Ce=B;var gt=Ne.gb;Je=Ne.na,Xe=Ne.P,wt=Ne.Sa,kt=22,e(ht!=null),e(Ce!=null),$e=Ae[0];var Nn=Ce[0];for(e(Je!=null),e(wt!=null),Je[0]=null,Xe[0]=null,wt[0]=0;;){if(Ae[0]=$e,Ce[0]=Nn,8>Nn){Ae=7;break e}var Vn=ct(ht,$e+4);if(4294967286<Vn){Ae=3;break e}var ln=8+Vn+1&-2;if(kt+=ln,0<gt&&kt>gt){Ae=3;break e}if(!t(ht,$e,"VP8 ")||!t(ht,$e,"VP8L")){Ae=0;break e}if(Nn[0]<ln){Ae=7;break e}t(ht,$e,"ALPH")||(Je[0]=ht,Xe[0]=$e+8,wt[0]=Vn),$e+=ln,Nn-=ln}}if(B=B[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],Ae!=0)break}B=[B],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(gt=b,Ae=E,Ce=B,Je=Ne.gb[0],Xe=Ne.Ja,wt=Ne.xa,ht=Ae[0],$e=!t(gt,ht,"VP8 "),kt=!t(gt,ht,"VP8L"),e(gt!=null),e(Ce!=null),e(Xe!=null),e(wt!=null),8>Ce[0])Ae=7;else{if($e||kt){if(gt=ct(gt,ht+4),12<=Je&&gt>Je-12){Ae=3;break e}if(Oe&&gt>Ce[0]-8){Ae=7;break e}Xe[0]=gt,Ae[0]+=8,Ce[0]-=8,wt[0]=kt}else wt[0]=5<=Ce[0]&&gt[ht+0]==47&&!(gt[ht+4]>>5),Xe[0]=Ce[0];Ae=0}if(B=B[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],E=E[0],Ae!=0)break;if(4294967286<Ne.Ja)return 3;if(se==null||Ue||(se[0]=Ne.xa?2:1),oe=[oe],Ze=[Ze],Ne.xa){if(5>B){Ae=7;break}se=oe,Oe=Ze,Ue=ie,b==null||5>B?b=0:5<=B&&b[E+0]==47&&!(b[E+4]>>5)?(Ce=[0],gt=[0],Je=[0],ee(Xe=new G,b,E,B),bt(Xe,Ce,gt,Je)?(se!=null&&(se[0]=Ce[0]),Oe!=null&&(Oe[0]=gt[0]),Ue!=null&&(Ue[0]=Je[0]),b=1):b=0):b=0}else{if(10>B){Ae=7;break}se=Ze,b==null||10>B||!yi(b,E+3,B-3)?b=0:(Oe=b[E+0]|b[E+1]<<8|b[E+2]<<16,Ue=16383&(b[E+7]<<8|b[E+6]),b=16383&(b[E+9]<<8|b[E+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Ne.Ja||!Ue||!b?b=0:(oe&&(oe[0]=Ue),se&&(se[0]=b),b=1))}if(!b||(oe=oe[0],Ze=Ze[0],Le&&(ge[0]!=oe||_e[0]!=Ze)))return 3;fe!=null&&(fe[0]=Ne,fe.offset=E-fe.w,e(4294967286>E-fe.w),e(fe.offset==fe.ha-B));break}return Ae==0||Ae==7&&Le&&fe==null?(ie!=null&&(ie[0]|=Ne.na!=null&&0<Ne.na.length),W!=null&&(W[0]=oe),te!=null&&(te[0]=Ze),0):Ae}function Sl(b,E,B){var W=E.width,te=E.height,ie=0,oe=0,se=W,fe=te;if(E.Da=b!=null&&0<b.Da,E.Da&&(se=b.cd,fe=b.bd,ie=b.v,oe=b.j,11>B||(ie&=-2,oe&=-2),0>ie||0>oe||0>=se||0>=fe||ie+se>W||oe+fe>te))return 0;if(E.v=ie,E.j=oe,E.va=ie+se,E.o=oe+fe,E.U=se,E.T=fe,E.da=b!=null&&0<b.da,E.da){if(!dt(se,fe,B=[b.ib],ie=[b.hb]))return 0;E.ib=B[0],E.hb=ie[0]}return E.ob=b!=null&&b.ob,E.Kb=b==null||!b.Sd,E.da&&(E.ob=E.ib<3*W/4&&E.hb<3*te/4,E.Kb=0),1}function yu(b){if(b==null)return 2;if(11>b.S){var E=b.f.RGBA;E.fb+=(b.height-1)*E.A,E.A=-E.A}else E=b.f.kb,b=b.height,E.O+=(b-1)*E.fa,E.fa=-E.fa,E.N+=(b-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(b-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(b-1)*E.lb,E.lb=-E.lb);return 0}function xc(b,E,B,W){if(W==null||0>=b||0>=E)return 2;if(B!=null){if(B.Da){var te=B.cd,ie=B.bd,oe=-2&B.v,se=-2&B.j;if(0>oe||0>se||0>=te||0>=ie||oe+te>b||se+ie>E)return 2;b=te,E=ie}if(B.da){if(!dt(b,E,te=[B.ib],ie=[B.hb]))return 2;b=te[0],E=ie[0]}}W.width=b,W.height=E;e:{var fe=W.width,ge=W.height;if(b=W.S,0>=fe||0>=ge||!(b>=Hi&&13>b))b=2;else{if(0>=W.Rd&&W.sd==null){oe=ie=te=E=0;var _e=(se=fe*$1[b])*ge;if(11>b||(ie=(ge+1)/2*(E=(fe+1)/2),b==12&&(oe=(te=fe)*ge)),(ge=a(_e+2*ie+oe))==null){b=1;break e}W.sd=ge,11>b?((fe=W.f.RGBA).eb=ge,fe.fb=0,fe.A=se,fe.size=_e):((fe=W.f.kb).y=ge,fe.O=0,fe.fa=se,fe.Fd=_e,fe.f=ge,fe.N=0+_e,fe.Ab=E,fe.Cd=ie,fe.ea=ge,fe.W=0+_e+ie,fe.Db=E,fe.Ed=ie,b==12&&(fe.F=ge,fe.J=0+_e+2*ie),fe.Tc=oe,fe.lb=te)}if(E=1,te=W.S,ie=W.width,oe=W.height,te>=Hi&&13>te)if(11>te)b=W.f.RGBA,E&=(se=Math.abs(b.A))*(oe-1)+ie<=b.size,E&=se>=ie*$1[te],E&=b.eb!=null;else{b=W.f.kb,se=(ie+1)/2,_e=(oe+1)/2,fe=Math.abs(b.fa),ge=Math.abs(b.Ab);var Le=Math.abs(b.Db),Oe=Math.abs(b.lb),Ne=Oe*(oe-1)+ie;E&=fe*(oe-1)+ie<=b.Fd,E&=ge*(_e-1)+se<=b.Cd,E=(E&=Le*(_e-1)+se<=b.Ed)&fe>=ie&ge>=se&Le>=se,E&=b.y!=null,E&=b.f!=null,E&=b.ea!=null,te==12&&(E&=Oe>=ie,E&=Ne<=b.Tc,E&=b.F!=null)}else E=0;b=E?0:2}}return b!=0||B!=null&&B.fd&&(b=yu(W)),b}var ai=64,El=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bc=24,wc=32,xu=8,Aa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(b){return b},C.Predictor2=function(b,E,B){return E[B+0]},C.Predictor3=function(b,E,B){return E[B+1]},C.Predictor4=function(b,E,B){return E[B-1]},C.Predictor5=function(b,E,B){return lt(lt(b,E[B+1]),E[B+0])},C.Predictor6=function(b,E,B){return lt(b,E[B-1])},C.Predictor7=function(b,E,B){return lt(b,E[B+0])},C.Predictor8=function(b,E,B){return lt(E[B-1],E[B+0])},C.Predictor9=function(b,E,B){return lt(E[B+0],E[B+1])},C.Predictor10=function(b,E,B){return lt(lt(b,E[B-1]),lt(E[B+0],E[B+1]))},C.Predictor11=function(b,E,B){var W=E[B+0];return 0>=Ct(W>>24&255,b>>24&255,(E=E[B-1])>>24&255)+Ct(W>>16&255,b>>16&255,E>>16&255)+Ct(W>>8&255,b>>8&255,E>>8&255)+Ct(255&W,255&b,255&E)?W:b},C.Predictor12=function(b,E,B){var W=E[B+0];return(ft((b>>24&255)+(W>>24&255)-((E=E[B-1])>>24&255))<<24|ft((b>>16&255)+(W>>16&255)-(E>>16&255))<<16|ft((b>>8&255)+(W>>8&255)-(E>>8&255))<<8|ft((255&b)+(255&W)-(255&E)))>>>0},C.Predictor13=function(b,E,B){var W=E[B-1];return(et((b=lt(b,E[B+0]))>>24&255,W>>24&255)<<24|et(b>>16&255,W>>16&255)<<16|et(b>>8&255,W>>8&255)<<8|et(b>>0&255,W>>0&255))>>>0};var qh=C.PredictorAdd0;C.PredictorAdd1=yt,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var Tf=C.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Ad,lo=C.ColorIndexInverseTransform,xi=C.MapARGB,Cl=C.VP8LColorIndexInverseTransformAlpha,Rf=C.MapAlpha,Bs=C.VP8LPredictorsAdd=[];Bs.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Il,na,Ri,Tl,Sa,Bo,us,Fo,kr,zo,Qr,Ea,_c,fs,bu,Rl,Nl,Dl,Ac,wu,Ol,Fs,Sc,Pr,Ga,cn,un,pr,zr=a(511),co=a(2041),kl=a(225),Pl=a(767),zs=0,Sd=co,Ec=kl,bi=Pl,uo=zr,Hi=0,_u=1,ds=2,Nf=3,Cc=4,Us=5,Ed=6,Df=7,Ll=8,Vs=9,Au=10,Cd=[2,3,7],fo=[3,3,11],$a=[280,256,256,256,40],Ic=[0,1,1,1,0],qs=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Hs=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Tc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],V1=8,Of=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],oi=null,Lr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ml=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],hs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Rc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],q1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ws=[],ra=[],Ya=[],H1=1,Su=2,ps=[],wi=[];qe("UpsampleRgbLinePair",le,3),qe("UpsampleBgrLinePair",Ie,3),qe("UpsampleRgbaLinePair",Qt,4),qe("UpsampleBgraLinePair",gn,4),qe("UpsampleArgbLinePair",zt,4),qe("UpsampleRgba4444LinePair",st,2),qe("UpsampleRgb565LinePair",Me,2);var Gs=C.UpsampleRgbLinePair,jl=C.UpsampleBgrLinePair,gs=C.UpsampleRgbaLinePair,Id=C.UpsampleBgraLinePair,Td=C.UpsampleArgbLinePair,Eu=C.UpsampleRgba4444LinePair,Rd=C.UpsampleRgb565LinePair,ms=16,si=1<<ms-1,Bl=-227,Nd=482,t2=6,W1=0,n2=a(256),li=a(256),Wh=a(256),Pf=a(256),Lf=a(Nd-Bl),Gh=a(Nd-Bl);er("YuvToRgbRow",le,3),er("YuvToBgrRow",Ie,3),er("YuvToRgbaRow",Qt,4),er("YuvToBgraRow",gn,4),er("YuvToArgbRow",zt,4),er("YuvToRgba4444Row",st,2),er("YuvToRgb565Row",Me,2);var Nc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$s=[0,2,8],r2=[8,7,6,4,4,2,2,2,1,1,1,1],G1=1;this.WebPDecodeRGBA=function(b,E,B,W,te){var ie=_u,oe=new Ls,se=new Br;oe.ba=se,se.S=ie,se.width=[se.width],se.height=[se.height];var fe=se.width,ge=se.height,_e=new fr;if(_e==null||b==null)var Le=2;else e(_e!=null),Le=cs(b,E,B,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Le!=0?fe=0:(fe!=null&&(fe[0]=_e.width[0]),ge!=null&&(ge[0]=_e.height[0]),fe=1),fe){se.width=se.width[0],se.height=se.height[0],W!=null&&(W[0]=se.width),te!=null&&(te[0]=se.height);e:{if(W=new No,(te=new _l).data=b,te.w=E,te.ha=B,te.kd=1,E=[0],e(te!=null),((b=cs(te.data,te.w,te.ha,null,null,null,E,null,te))==0||b==7)&&E[0]&&(b=4),(E=b)==0){if(e(oe!=null),W.data=te.data,W.w=te.w+te.offset,W.ha=te.ha-te.offset,W.put=yr,W.ac=Bn,W.bc=Va,W.ma=oe,te.xa){if((b=dr())==null){oe=1;break e}if(function(Oe,Ne){var Ze=[0],Ue=[0],Ae=[0];t:for(;;){if(Oe==null)return 0;if(Ne==null)return Oe.a=2,0;if(Oe.l=Ne,Oe.a=0,ee(Oe.m,Ne.data,Ne.w,Ne.ha),!bt(Oe.m,Ze,Ue,Ae)){Oe.a=3;break t}if(Oe.xb=Su,Ne.width=Ze[0],Ne.height=Ue[0],!Fn(Ze[0],Ue[0],1,Oe,null))break t;return 1}return e(Oe.a!=0),0}(b,W)){if(W=(E=xc(W.width,W.height,oe.Oa,oe.ba))==0){t:{W=b;n:for(;;){if(W==null){W=0;break t}if(e(W.s.yc!=null),e(W.s.Ya!=null),e(0<W.s.Wb),e((B=W.l)!=null),e((te=B.ma)!=null),W.xb!=0){if(W.ca=te.ba,W.tb=te.tb,e(W.ca!=null),!Sl(te.Oa,B,Nf)){W.a=2;break n}if(!Io(W,B.width)||B.da)break n;if((B.da||sn(W.ca.S))&&Re(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&Re()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!vt(W.s.vb,W.s.Wa.Xa)){W.a=1;break n}W.xb=0}if(!Yr(W,W.V,W.Ba,W.c,W.i,B.o,Ts))break n;te.Dc=W.Ma,W=1;break t}e(W.a!=0),W=0}W=!W}W&&(E=b.a)}else E=b.a}else{if((b=new dc)==null){oe=1;break e}if(b.Fa=te.na,b.P=te.P,b.qc=te.Sa,vl(b,W)){if((E=xc(W.width,W.height,oe.Oa,oe.ba))==0){if(b.Aa=0,B=oe.Oa,e((te=b)!=null),B!=null){if(0<(fe=0>(fe=B.Md)?0:100<fe?255:255*fe/100)){for(ge=_e=0;4>ge;++ge)12>(Le=te.pb[ge]).lc&&(Le.ia=fe*r2[0>Le.lc?0:Le.lc]>>3),_e|=Le.ia;_e&&(alert("todo:VP8InitRandom"),te.ia=1)}te.Ga=B.Id,100<te.Ga?te.Ga=100:0>te.Ga&&(te.Ga=0)}hc(b,W)||(E=b.a)}}else E=b.a}E==0&&oe.Oa!=null&&oe.Oa.fd&&(E=yu(oe.ba))}oe=E}ie=oe!=0?null:11>ie?se.f.RGBA.eb:se.f.kb.y}else ie=null;return ie};var $1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(C,N){for(var L="",R=0;R<4;R++)L+=String.fromCharCode(C[N++]);return L}function d(C,N){return(C[N+0]<<0|C[N+1]<<8|C[N+2]<<16)>>>0}function p(C,N){return(C[N+0]<<0|C[N+1]<<8|C[N+2]<<16|C[N+3]<<24)>>>0}new c;var g=[0],m=[0],x=[],_=new c,T=n,A=function(C,N){var L={},R=0,I=!1,P=0,M=0;if(L.frames=[],!function($,Z,re,de){for(var xe=0;xe<de;xe++)if($[Z+xe]!=re.charCodeAt(xe))return!0;return!1}(C,N,"RIFF",4)){for(p(C,N+=4),N+=8;N<C.length;){var K=f(C,N),F=p(C,N+=4);N+=4;var z=F+(1&F);switch(K){case"VP8 ":case"VP8L":L.frames[R]===void 0&&(L.frames[R]={}),(Q=L.frames[R]).src_off=I?M:N-8,Q.src_size=P+F+8,R++,I&&(I=!1,P=0,M=0);break;case"VP8X":(Q=L.header={}).feature_flags=C[N];var ee=N+4;Q.canvas_width=1+d(C,ee),ee+=3,Q.canvas_height=1+d(C,ee),ee+=3;break;case"ALPH":I=!0,P=z+8,M=N-8;break;case"ANIM":(Q=L.header).bgcolor=p(C,N),ee=N+4,Q.loop_count=(he=C)[(G=ee)+0]<<0|he[G+1]<<8,ee+=2;break;case"ANMF":var ae,Q;(Q=L.frames[R]={}).offset_x=2*d(C,N),N+=3,Q.offset_y=2*d(C,N),N+=3,Q.width=1+d(C,N),N+=3,Q.height=1+d(C,N),N+=3,Q.duration=d(C,N),N+=3,ae=C[N++],Q.dispose=1&ae,Q.blend=ae>>1&1}K!="ANMF"&&(N+=z)}var he,G;return L}}(T,0);A.response=T,A.rgbaoutput=!0,A.dataurl=!1;var D=A.header?A.header:null,U=A.frames?A.frames:null;if(D){D.loop_counter=D.loop_count,g=[D.canvas_height],m=[D.canvas_width];for(var H=0;H<U.length&&U[H].blend!=0;H++);}var X=U[0],q=_.WebPDecodeRGBA(T,X.src_off,X.src_size,m,g);X.rgba=q,X.imgwidth=m[0],X.imgheight=g[0];for(var j=0;j<m[0]*g[0]*4;j++)x[j]=q[j];return this.width=m,this.height=g,this.data=x,this}(function(n){var e=function(){return typeof ex=="function"},t=function(g,m,x,_){var T=4,A=o;switch(_){case n.image_compression.FAST:T=1,A=a;break;case n.image_compression.MEDIUM:T=6,A=s;break;case n.image_compression.SLOW:T=9,A=c}g=r(g,m,x,A);var D=ex(g,{level:T});return n.__addimage__.arrayBufferToBinaryString(D)},r=function(g,m,x,_){for(var T,A,D,U=g.length/m,H=new Uint8Array(g.length+U),X=d(),q=0;q<U;q+=1){if(D=q*m,T=g.subarray(D,D+m),_)H.set(_(T,x,A),D+q);else{for(var j,C=X.length,N=[];j<C;j+=1)N[j]=X[j](T,x,A);var L=p(N.concat());H.set(N[L],D+q)}A=T}return H},i=function(g){var m=Array.apply([],g);return m.unshift(0),m},a=function(g,m){var x,_=[],T=g.length;_[0]=1;for(var A=0;A<T;A+=1)x=g[A-m]||0,_[A+1]=g[A]-x+256&255;return _},o=function(g,m,x){var _,T=[],A=g.length;T[0]=2;for(var D=0;D<A;D+=1)_=x&&x[D]||0,T[D+1]=g[D]-_+256&255;return T},s=function(g,m,x){var _,T,A=[],D=g.length;A[0]=3;for(var U=0;U<D;U+=1)_=g[U-m]||0,T=x&&x[U]||0,A[U+1]=g[U]+256-(_+T>>>1)&255;return A},c=function(g,m,x){var _,T,A,D,U=[],H=g.length;U[0]=4;for(var X=0;X<H;X+=1)_=g[X-m]||0,T=x&&x[X]||0,A=x&&x[X-m]||0,D=f(_,T,A),U[X+1]=g[X]-D+256&255;return U},f=function(g,m,x){if(g===m&&m===x)return g;var _=Math.abs(m-x),T=Math.abs(g-x),A=Math.abs(g+m-x-x);return _<=T&&_<=A?g:T<=A?m:x},d=function(){return[i,a,o,s,c]},p=function(g){var m=g.map(function(x){return x.reduce(function(_,T){return _+Math.abs(T)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(g,m,x,_){var T,A,D,U,H,X,q,j,C,N,L,R,I,P,M,K=this.decode.FLATE_DECODE,F="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(D=new Jq(g)).imgData,A=D.bits,T=D.colorSpace,H=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){C=(j=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,L=new Uint8Array(C*D.colors),N=new Uint8Array(C);var z,ee=D.pixelBitlength-D.bits;for(P=0,M=0;P<C;P++){for(I=j[P],z=0;z<ee;)L[M++]=I>>>z&255,z+=D.bits;N[P]=I>>>z&255}}if(D.bits===16){C=(j=new Uint32Array(D.decodePixels().buffer)).length,L=new Uint8Array(C*(32/D.pixelBitlength)*D.colors),N=new Uint8Array(C*(32/D.pixelBitlength)),R=D.colors>1,P=0,M=0;for(var ae=0;P<C;)I=j[P++],L[M++]=I>>>0&255,R&&(L[M++]=I>>>16&255,I=j[P++],L[M++]=I>>>0&255),N[ae++]=I>>>16&255;A=8}_!==n.image_compression.NONE&&e()?(g=t(L,D.width*D.colors,D.colors,_),q=t(N,D.width,1,_)):(g=L,q=N,K=void 0)}if(D.colorType===3&&(T=this.color_spaces.INDEXED,X=D.palette,D.transparency.indexed)){var Q=D.transparency.indexed,he=0;for(P=0,C=Q.length;P<C;++P)he+=Q[P];if((he/=255)===C-1&&Q.indexOf(0)!==-1)U=[Q.indexOf(0)];else if(he!==C){for(j=D.decodePixels(),N=new Uint8Array(j.length),P=0,C=j.length;P<C;P++)N[P]=Q[j[P]];q=t(N,D.width,1)}}var G=function($){var Z;switch($){case n.image_compression.FAST:Z=11;break;case n.image_compression.MEDIUM:Z=13;break;case n.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(_);return K===this.decode.FLATE_DECODE&&(F="/Predictor "+G+" "),F+="/Colors "+H+" /BitsPerComponent "+A+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(q&&this.__addimage__.isArrayBuffer(q)||this.__addimage__.isArrayBufferView(q))&&(q=this.__addimage__.arrayBufferToBinaryString(q)),{alias:x,data:g,index:m,filter:K,decodeParameters:F,transparency:U,palette:X,sMask:q,predictor:G,width:D.width,height:D.height,bitsPerComponent:A,colorSpace:T}}}})(Wt.API),function(n){n.processGIF89A=function(e,t,r,i){var a=new eH(e),o=a.width,s=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:o,height:s},d=new Kv(100).encode(f,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A}(Wt.API),nl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},nl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){wr.log("bit decode error:"+t)}},nl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var c=this.palette[a>>7-s&1];this.data[o+4*s]=c.blue,this.data[o+4*s+1]=c.green,this.data[o+4*s+2]=c.red,this.data[o+4*s+3]=255}t!==0&&(this.pos+=4-t)}},nl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,s=a>>4,c=15&a,f=this.palette[s];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},nl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},nl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,c=(a>>10&e)/e*255|0,f=a>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=s,this.data[d+2]=o,this.data[d+3]=f}this.pos+=n}},nl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,c=(o>>5&t)/t*255|0,f=(o>>11)/e*255|0,d=i*this.width*4+4*a;this.data[d]=f,this.data[d+1]=c,this.data[d+2]=s,this.data[d+3]=255}this.pos+=n}},nl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},nl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=o}},nl.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var a=new nl(e,!1),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},f=new Kv(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(Wt.API),Q4.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var a=new Q4(e),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},f=new Kv(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(Wt.API),Wt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,c=0,f=0;f<i;f+=4){var d=r[f],p=r[f+1],g=r[f+2],m=r[f+3];a[s++]=d,a[s++]=p,a[s++]=g,o[c++]=m}var x=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Wt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},nh=Wt.API,tg=nh.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,c=s.fof?s.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=f.fof?f.fof:1,p=e.doKerning!==!1,g=0,m=n.length,x=0,_=s[0]||c,T=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(g=p&&ur(f[r])==="object"&&!isNaN(parseInt(f[r][x],10))?f[r][x]/d:0,T.push((s[r]||_)/c+g)),x=r;return T},$4=nh.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return nh.processArabic&&(n=nh.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:tg.apply(this,arguments).reduce(function(a,o){return a+o},0)},Y4=function(n,e,t,r){for(var i=[],a=0,o=n.length,s=0;a!==o&&s+e[a]<t;)s+=e[a],a++;i.push(n.slice(0,a));var c=a;for(s=0;a!==o;)s+e[a]>r&&(i.push(n.slice(c,a)),s=0,c=a),s+=e[a],a++;return c!==a&&i.push(n.slice(c,a)),i},X4=function(n,e,t){t||(t={});var r,i,a,o,s,c,f,d=[],p=[d],g=t.textIndent||0,m=0,x=0,_=n.split(" "),T=tg.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var A=Array(c).join(" "),D=[];_.map(function(H){(H=H.split(/\s*\n/)).length>1?D=D.concat(H.map(function(X,q){return(q&&X.length?`
`:"")+X})):D.push(H[0])}),_=D,c=$4.apply(this,[A,t])}for(a=0,o=_.length;a<o;a++){var U=0;if(r=_[a],c&&r[0]==`
`&&(r=r.substr(1),U=1),g+m+(x=(i=tg.apply(this,[r,t])).reduce(function(H,X){return H+X},0))>e||U){if(x>e){for(s=Y4.apply(this,[r,i,e-(g+m),e]),d.push(s.shift()),d=[s.pop()];s.length;)p.push([s.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(H,X){return H+X},0)}else d=[r];p.push(d),g=x+c,m=T}else d.push(r),g+=m+x,m=T}return f=c?function(H,X){return(X?A:"")+H.join(" ")}:function(H){return H.join(" ")},p.map(f)},nh.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var s,c,f=[];for(s=0,c=r.length;s<c;s++)f=f.concat(X4.apply(this,[r[s],o,a]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var g,m,x,_,T=["{"];for(var A in p){if(g=p[A],isNaN(parseInt(A,10))?m="'"+A+"'":(A=parseInt(A,10),m=(m=a(A).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof g=="number")g<0?(x=a(g).slice(3),_="-"):(x=a(g).slice(2),_=""),x=_+x.slice(0,-1)+r[x.slice(-1)];else{if(ur(g)!=="object")throw new Error("Don't know what to do with value type "+ur(g)+".");x=o(g)}T.push(m+x)}return T.push("}"),T.join("")},s=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,x,_,T={},A=1,D=T,U=[],H="",X="",q=p.length-1,j=1;j<q;j+=1)(_=p[j])=="'"?g?(x=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(U.push([D,x]),D={},x=void 0):_=="}"?((m=U.pop())[0][m[1]]=D,x=void 0,D=m[0]):_=="-"?A=-1:x===void 0?t.hasOwnProperty(_)?(H+=t[_],x=parseInt(H,16)*A,A=1,H=""):H+=_:t.hasOwnProperty(_)?(X+=t[_],D[x]=parseInt(X,16)*A,A=1,x=void 0,X=""):X+=_;return T},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var g=p.font,m=d.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var x=f.Unicode[g.postScriptName];x&&(g.metadata.Unicode.encoding=x,g.encoding=x.codePages[0])}])}(Wt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(t1(s)),o.metadata=n.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Wt),function(n){function e(){return(Gt.canvg?Promise.resolve(Gt.canvg):Xy(()=>import("./index.es-BrwJ816g.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Wt.API.addSvgAsImage=function(t,r,i,a,o,s,c,f){if(isNaN(r)||isNaN(i))throw wr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw wr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(p,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),r,i,a,o,c,f)})}}(),Wt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Wt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),c=[],f=0,d=0,p=0;function g(x,_){var T,A=!1;for(T=0;T<x.length;T+=1)x[T]===_&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=s.length;for(p=0;p<m;p+=1)t[s[p]].value=t[s[p]].defaultValue,t[s[p]].explicitSet=!1}if(ur(n)==="object"){for(i in n)if(a=n[i],g(s,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&g(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")c.push(String(a[f]-1));else if(a[f].length>1){for(d=0;d<a[f].length;d+=1)typeof a[f][d]!="number"&&(r=!1);r===!0&&c.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,_=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?_.push("/"+x+" /"+t[x].value):_.push("/"+x+" "+t[x].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+o.length+s.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Wt.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,o){for(var s,c=o.metadata.Unicode.widths,f=["","0","00","000","0000"],d=[""],p=0,g=a.length;p<g;++p){if(s=o.metadata.characterToGlyph(a.charCodeAt(p)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(p),c.indexOf(s)==-1&&(c.push(s),c.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return d.join("");s=s.toString(16),d.push(f[4-s.length],s)}return d.join("")},r=function(a){var o,s,c,f,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,g=(s=Object.keys(a).sort(function(m,x){return m-x})).length;p<g;p++)o=s[p],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(f=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+f+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,f=o.newObject,d=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="Identity-H"){for(var p=s.metadata.Unicode.widths,g=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),m="",x=0;x<g.length;x++)m+=String.fromCharCode(g[x]);var _=f();d({data:m,addLength1:!0,objectId:_}),c("endobj");var T=f();d({data:r(s.metadata.toUnicode),addLength1:!0,objectId:T}),c("endobj");var A=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+lh(s.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),c("/Flags "+s.metadata.flags),c("/StemV "+s.metadata.stemV),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c(">>"),c("endobj");var D=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+lh(s.fontName)),c("/FontDescriptor "+A+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+s.encoding+")"),c(">>"),c(">>"),c("endobj"),s.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+T+" 0 R"),c("/BaseFont /"+lh(s.fontName)),c("/Encoding /"+s.encoding),c("/DescendantFonts ["+D+" 0 R]"),c(">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,f=o.newObject,d=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var p=s.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var x=f();d({data:g,addLength1:!0,objectId:x}),c("endobj");var _=f();d({data:r(s.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var T=f();c("<<"),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c("/StemV "+s.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),c("/FontName /"+lh(s.fontName)),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c(">>"),c("endobj"),s.objectNumber=f();for(var A=0;A<s.metadata.hmtx.widths.length;A++)s.metadata.hmtx.widths[A]=parseInt(s.metadata.hmtx.widths[A]*(1e3/s.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+lh(s.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",c=a.x,f=a.y,d=a.options||{},p=a.mutex||{},g=p.pdfEscape,m=p.activeFontKey,x=p.fonts,_=m,T="",A=0,D="",U=x[_].encoding;if(x[_].encoding!=="Identity-H")return{text:s,x:c,y:f,options:d,mutex:p};for(D=s,_=m,Array.isArray(s)&&(D=s[0]),A=0;A<D.length;A+=1)x[_].metadata.hasOwnProperty("cmap")&&(o=x[_].metadata.cmap.unicode.codeMap[D[A].charCodeAt(0)]),o||D[A].charCodeAt(0)<256&&x[_].metadata.hasOwnProperty("Unicode")?T+=D[A]:T+="";var H="";return parseInt(_.slice(1))<14||U==="WinAnsiEncoding"?H=g(T,_).split("").map(function(X){return X.charCodeAt(0).toString(16)}).join(""):U==="Identity-H"&&(H=t(T,x[_])),p.isHex=!0,{text:H,x:c,y:f,options:d,mutex:p}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?s.push([i(Object.assign({},c,{text:o[f][0]})).text,o[f][1],o[f][2]]):s.push(i(Object.assign({},c,{text:o[f]})).text);a.text=s}else a.text=i(Object.assign({},c,{text:o})).text}])}(Wt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Wt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,o,s,c,f,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,U=0;this.__bidiEngine__={};var H=function(R){var I=R.charCodeAt(),P=I>>8,M=_[P];return M!==void 0?p[256*M+(255&I)]:P===252||P===253?"AL":A.test(P)?"L":P===8?"R":"N"},X=function(R){for(var I,P=0;P<R.length;P++){if((I=H(R.charAt(P)))==="L")return!1;if(I==="R")return!0}return!1},q=function(R,I,P,M){var K,F,z,ee,ae=I[M];switch(ae){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(ae="AN");break;case"AL":D=!0,ae="R";break;case"WS":ae="N";break;case"CS":M<1||M+1>=I.length||(K=P[M-1])!=="EN"&&K!=="AN"||(F=I[M+1])!=="EN"&&F!=="AN"?ae="N":D&&(F="AN"),ae=F===K?F:"N";break;case"ES":ae=(K=M>0?P[M-1]:"B")==="EN"&&M+1<I.length&&I[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&P[M-1]==="EN"){ae="EN";break}if(D){ae="N";break}for(z=M+1,ee=I.length;z<ee&&I[z]==="ET";)z++;ae=z<ee&&I[z]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(ee=I.length,z=M+1;z<ee&&I[z]==="NSM";)z++;if(z<ee){var Q=R[M],he=Q>=1425&&Q<=2303||Q===64286;if(K=I[z],he&&(K==="R"||K==="AL")){ae="R";break}}}ae=M<1||(K=I[M-1])==="B"?"N":P[M-1];break;case"B":D=!1,i=!0,ae=U;break;case"S":a=!0,ae="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":ae="N"}return ae},j=function(R,I,P){var M=R.split("");return P&&C(M,P,{hiLevel:U}),M.reverse(),I&&I.reverse(),M.join("")},C=function(R,I,P){var M,K,F,z,ee,ae=-1,Q=R.length,he=0,G=[],$=U?m:g,Z=[];for(D=!1,i=!1,a=!1,K=0;K<Q;K++)Z[K]=H(R[K]);for(F=0;F<Q;F++){if(ee=he,G[F]=q(R,Z,G,F),M=240&(he=$[ee][x[G[F]]]),he&=15,I[F]=z=$[he][5],M>0)if(M===16){for(K=ae;K<F;K++)I[K]=1;ae=-1}else ae=-1;if($[he][6])ae===-1&&(ae=F);else if(ae>-1){for(K=ae;K<F;K++)I[K]=z;ae=-1}Z[F]==="B"&&(I[F]=0),P.hiLevel|=z}a&&function(re,de,xe){for(var we=0;we<xe;we++)if(re[we]==="S"){de[we]=U;for(var Ee=we-1;Ee>=0&&re[Ee]==="WS";Ee--)de[Ee]=U}}(Z,I,Q)},N=function(R,I,P,M,K){if(!(K.hiLevel<R)){if(R===1&&U===1&&!i)return I.reverse(),void(P&&P.reverse());for(var F,z,ee,ae,Q=I.length,he=0;he<Q;){if(M[he]>=R){for(ee=he+1;ee<Q&&M[ee]>=R;)ee++;for(ae=he,z=ee-1;ae<z;ae++,z--)F=I[ae],I[ae]=I[z],I[z]=F,P&&(F=P[ae],P[ae]=P[z],P[z]=F);he=ee}he++}}},L=function(R,I,P){var M=R.split(""),K={hiLevel:U};return P||(P=[]),C(M,P,K),function(F,z,ee){if(ee.hiLevel!==0&&d)for(var ae,Q=0;Q<F.length;Q++)z[Q]===1&&(ae=T.indexOf(F[Q]))>=0&&(F[Q]=T[ae+1])}(M,P,K),N(2,M,I,P,K),N(1,M,I,P,K),M.join("")};return this.__bidiEngine__.doBidiReorder=function(R,I,P){if(function(K,F){if(F)for(var z=0;z<K.length;z++)F[z]=z;s===void 0&&(s=X(K)),f===void 0&&(f=X(K))}(R,I),o||!c||f)if(o&&c&&s^f)U=s?1:0,R=j(R,I,P);else if(!o&&c&&f)U=s?1:0,R=L(R,I,P),R=j(R,I);else if(!o||s||c||f){if(o&&!c&&s^f)R=j(R,I),s?(U=0,R=L(R,I,P)):(U=1,R=L(R,I,P),R=j(R,I));else if(o&&s&&!c&&f)U=1,R=L(R,I,P),R=j(R,I);else if(!o&&!c&&s^f){var M=d;s?(U=1,R=L(R,I,P),U=0,d=!1,R=L(R,I,P),d=M):(U=0,R=L(R,I,P),R=j(R,I),U=1,d=!1,R=L(R,I,P),d=M,R=j(R,I))}}else U=0,R=L(R,I,P);else U=s?1:0,R=L(R,I,P);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,c=R.isOutputVisual,s=R.isInputRtl,f=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([t.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([t.doBidiReorder(i[s])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Wt),Wt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new _f(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new gH(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new tH(this.contents),this.head=new rH(this),this.name=new lH(this),this.cmap=new $E(this),this.toUnicode={},this.hhea=new iH(this),this.maxp=new cH(this),this.hmtx=new uH(this),this.post=new oH(this),this.os2=new aH(this),this.loca=new pH(this),this.glyf=new fH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,c,f;for(f=[],o=0,s=(c=this.bbox).length;o<s;o++)e=c[o],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var gl,_f=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,o,s,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*o+256*s+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n}(),tH=function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,o,s,c,f,d,p,g,m,x,_;for(_ in m=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(m)/c),o=Math.floor(p/c),d=16*m-p,(i=new _f).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(d),a=16*m,f=i.pos+a,s=null,x=[],t)for(g=t[_],i.writeString(_),i.writeInt(n(g)),i.writeInt(f),i.writeInt(g.length),x=x.concat(g),_==="head"&&(s=f),f+=g.length;f%4;)x.push(0),f++;return i.write(x),r=2981146554-n(i.data),i.pos=s+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,o;for(t=YE.call(t);t.length%4;)t.push(0);for(a=new _f(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),nH={}.hasOwnProperty,uc=function(n,e){for(var t in e)nH.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};gl=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var rH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new _f).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Z4=function(){function n(e,t){var r,i,a,o,s,c,f,d,p,g,m,x,_,T,A,D,U;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,a=function(){var H,X;for(X=[],c=H=0;0<=g?H<g:H>g;c=0<=g?++H:--H)X.push(e.readUInt16());return X}(),e.pos+=2,_=function(){var H,X;for(X=[],c=H=0;0<=g?H<g:H>g;c=0<=g?++H:--H)X.push(e.readUInt16());return X}(),f=function(){var H,X;for(X=[],c=H=0;0<=g?H<g:H>g;c=0<=g?++H:--H)X.push(e.readUInt16());return X}(),d=function(){var H,X;for(X=[],c=H=0;0<=g?H<g:H>g;c=0<=g?++H:--H)X.push(e.readUInt16());return X}(),i=(this.length-e.pos+this.offset)/2,s=function(){var H,X;for(X=[],c=H=0;0<=i?H<i:H>i;c=0<=i?++H:--H)X.push(e.readUInt16());return X}(),c=A=0,U=a.length;A<U;c=++A)for(T=a[c],r=D=x=_[c];x<=T?D<=T:D>=T;r=x<=T?++D:--D)d[c]===0?o=r+f[c]:(o=s[d[c]/2+(r-x)-(g-c)]||0)!==0&&(o+=f[c]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,a,o,s,c,f,d,p,g,m,x,_,T,A,D,U,H,X,q,j,C,N,L,R,I,P,M,K,F,z,ee,ae,Q,he,G,$,Z,re,de,xe,we,Ee,Ve,He,it;switch(M=new _f,o=Object.keys(e).sort(function(ct,vt){return ct-vt}),t){case"macroman":for(_=0,T=function(){var ct=[];for(x=0;x<256;++x)ct.push(0);return ct}(),D={0:0},a={},K=0,ae=o.length;K<ae;K++)D[Ee=e[i=o[K]]]==null&&(D[Ee]=++_),a[i]={old:e[i],new:D[e[i]]},T[i]=D[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(T),{charMap:a,subtable:M.data,maxGlyphID:_+1};case"unicode":for(I=[],p=[],U=0,D={},r={},A=f=null,F=0,Q=o.length;F<Q;F++)D[X=e[i=o[F]]]==null&&(D[X]=++U),r[i]={old:X,new:D[X]},s=D[X]-i,A!=null&&s===f||(A&&p.push(A),I.push(i),f=s),A=i;for(A&&p.push(A),p.push(65535),I.push(65535),L=2*(N=I.length),C=2*Math.pow(Math.log(N)/Math.LN2,2),g=Math.log(C/2)/Math.LN2,j=2*N-C,c=[],q=[],m=[],x=z=0,he=I.length;z<he;x=++z){if(R=I[x],d=p[x],R===65535){c.push(0),q.push(0);break}if(R-(P=r[R].new)>=32768)for(c.push(0),q.push(2*(m.length+N-x)),i=ee=R;R<=d?ee<=d:ee>=d;i=R<=d?++ee:--ee)m.push(r[i].new);else c.push(P-R),q.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*N+2*m.length),M.writeUInt16(0),M.writeUInt16(L),M.writeUInt16(C),M.writeUInt16(g),M.writeUInt16(j),xe=0,G=p.length;xe<G;xe++)i=p[xe],M.writeUInt16(i);for(M.writeUInt16(0),we=0,$=I.length;we<$;we++)i=I[we],M.writeUInt16(i);for(Ve=0,Z=c.length;Ve<Z;Ve++)s=c[Ve],M.writeUInt16(s);for(He=0,re=q.length;He<re;He++)H=q[He],M.writeUInt16(H);for(it=0,de=m.length;it<de;it++)_=m[it],M.writeUInt16(_);return{charMap:r,subtable:M.data,maxGlyphID:U+1}}},n}(),$E=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new Z4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,a;return r==null&&(r="macroman"),i=Z4.encode(t,r),(a=new _f).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),iH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),aH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),oH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var s,c,f;for(f=[],o=s=0,c=this.file.maxp.numGlyphs;0<=c?s<c:s>c;o=0<=c?++s:--s)f.push(t.readUInt32());return f}).call(this)}},e}(),sH=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},lH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,a,o,s,c,f,d,p,g,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(f={},o=p=0,g=i.length;p<g;o=++p)a=i[o],t.pos=a.offset,d=t.readString(a.length),s=new sH(d,a),f[m=a.nameID]==null&&(f[m]=[]),f[a.nameID].push(s);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),cH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),uH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,a,o,s,c,f;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)p.push(t.readInt16());return p}(),this.widths=(function(){var d,p,g,m;for(m=[],d=0,p=(g=this.metrics).length;d<p;d++)o=g[d],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],f=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),YE=[].slice,fH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,a,o,s,c,f,d,p,g;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(a=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,s=(c=new _f(r.read(a))).readShort(),d=c.readShort(),g=c.readShort(),f=c.readShort(),p=c.readShort(),this.cache[t]=s===-1?new hH(c,d,g,f,p):new dH(c,s,d,g,f,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var a,o,s,c,f;for(s=[],o=[],c=0,f=r.length;c<f;c++)a=t[r[c]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),dH=function(){function n(e,t,r,i,a,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),hH=function(){function n(e,t,r,i,a){var o,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new _f(YE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),pH=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,gl),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<r.length&&r[o]==s){++o,i[s]=a;var c=this.offsets[s],f=this.offsets[s+1]-c;f>0&&(a+=f)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),gH=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,o,s,c;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in c=this.glyphsFor(t))r=c[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,o,s,c,f,d,p,g,m,x,_,T,A;for(i in r=$E.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},A=r.charMap)m[(c=A[i]).old]=c.new;for(x in g=r.maxGlyphID,o)x in m||(m[x]=g++);return d=function(D){var U,H;for(U in H={},D)H[D[U]]=U;return H}(m),p=Object.keys(d).sort(function(D,U){return D-U}),_=function(){var D,U,H;for(H=[],D=0,U=p.length;D<U;D++)s=p[D],H.push(d[s]);return H}(),a=this.font.glyf.encode(o,_,m),f=this.font.loca.encode(a.offsets,_),T={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},n}();Wt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,o;if(Array.isArray(t))return"["+function(){var s,c,f;for(f=[],s=0,c=t.length;s<c;s++)r=t[s],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)o=t[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+t},e}();function XE(n,e,t,r,i){r=r||{};var a=1.15,o=i.internal.scaleFactor,s=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():a,f=s*c,d=/\r\n|\r|\n/g,p="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(d):n,g=p.length||1),t+=s*(2-a),r.valign==="middle"?t-=g/2*f:r.valign==="bottom"&&(t-=g*f),r.halign==="center"||r.halign==="right"){var m=s;if(r.halign==="center"&&(m*=.5),p&&g>=1){for(var x=0;x<p.length;x++)i.text(p[x],e-i.getStringUnitWidth(p[x])*m,t),t+=f;return i}e-=i.getStringUnitWidth(n)*m}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var J4={},_h=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:J4=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){s=e.fontStyle;var f=this.getFontList()[c];f&&f.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),s=f[0])}if(this.jsPDFDocument.setFont(c,s),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=n.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=n.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=n.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return J4||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),sx=function(n,e){return sx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},sx(n,e)};function KE(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");sx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var QE=function(n){KE(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function mH(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function vH(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function im(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function ZE(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var o=JE(i,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,o)}function JE(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function e2(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function eC(n,e){var t=e2(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function yH(n,e,t,r,i){var a={},o=1.3333333333333333,s=Qv(e,function(U){return i.getComputedStyle(U).backgroundColor});s!=null&&(a.fillColor=s);var c=Qv(e,function(U){return i.getComputedStyle(U).color});c!=null&&(a.textColor=c);var f=bH(r,t);f&&(a.cellPadding=f);var d="borderTopColor",p=o*t,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var x=Qv(e,function(U){return i.getComputedStyle(U)[d]});x!=null&&(a.lineColor=x);var _=["left","right","center","justify"];_.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),_=["middle","bottom","top"],_.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var T=parseInt(r.fontSize||"");isNaN(T)||(a.fontSize=T/o);var A=xH(r);A&&(a.fontStyle=A);var D=(r.fontFamily||"").toLowerCase();return n.indexOf(D)!==-1&&(a.font=D),a}function xH(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Qv(n,e){var t=tC(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function tC(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:tC(n.parentElement,e):t}function bH(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(s){return parseInt(s||"0")/r}),o=e2(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function nC(n,e,t,r,i){var a,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var s;typeof e=="string"?s=t.document.querySelector(e):s=e;var c=Object.keys(n.getFontList()),f=n.scaleFactor(),d=[],p=[],g=[];if(!s)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:g};for(var m=0;m<s.rows.length;m++){var x=s.rows[m],_=(o=(a=x==null?void 0:x.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),T=wH(c,f,t,x,r,i);T&&(_==="thead"?d.push(T):_==="tfoot"?g.push(T):p.push(T))}return{head:d,body:p,foot:g}}function wH(n,e,t,r,i,a){for(var o=new QE(r),s=0;s<r.cells.length;s++){var c=r.cells[s],f=t.getComputedStyle(c);if(i||f.display!=="none"){var d=void 0;a&&(d=yH(n,c,e,f,t)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:_H(c)})}}var p=t.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function _H(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function AH(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Gc(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c])}return a}function SH(n,e){var t=new _h(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();AH(i,r,e);var a=Gc({},i,r,e),o;typeof window<"u"&&(o=window);var s=EH(i,r,e),c=CH(i,r,e),f=IH(t,a),d=RH(t,a,o);return{id:e.tableId,content:d,hooks:c,styles:s,settings:f}}function EH(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var f=n[c],d=e[c],p=t[c];r.columnStyles=Gc({},f,d,p)}else{var g=[n,e,t],m=g.map(function(x){return x[c]||{}});r[c]=Gc({},m[0],m[1],m[2])}},a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];i(s)}return r}function CH(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=r;a<o.length;a++){var s=o[a];s.didParseCell&&i.didParseCell.push(s.didParseCell),s.willDrawCell&&i.willDrawCell.push(s.willDrawCell),s.didDrawCell&&i.didDrawCell.push(s.didDrawCell),s.willDrawPage&&i.willDrawPage.push(s.willDrawPage),s.didDrawPage&&i.didDrawPage.push(s.didDrawPage)}return i}function IH(n,e){var t,r,i,a,o,s,c,f,d,p,g,m,x=e2(e.margin,40/n.scaleFactor()),_=(t=TH(n,e.startY))!==null&&t!==void 0?t:x.top,T;e.showFoot===!0?T="everyPage":e.showFoot===!1?T="never":T=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var A;e.showHead===!0?A="everyPage":e.showHead===!1?A="never":A=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var D=(a=e.useCss)!==null&&a!==void 0?a:!1,U=e.theme||(D?"plain":"striped"),H=!!e.horizontalPageBreak,X=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(s=e.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:D,theme:U,startY:_,margin:x,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:A,showFoot:T,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:H,horizontalPageBreakRepeat:X,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function TH(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;a=o===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function RH(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var s=nC(n,e.html,t,o,e.useCss)||{};r=s.head||r,i=s.body||r,a=s.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||NH(r,i,a);return{columns:c,head:r,body:i,foot:a}}function NH(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,s;Array.isArray(r)?s=r[parseInt(a)]:s=r[a],typeof s=="object"&&!Array.isArray(s)&&(o=(s==null?void 0:s.colSpan)||1);for(var c=0;c<o;c++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(c>0?"_".concat(c):"");var d={dataKey:f};i.push(d)}}),i}var lx=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),DH=function(n){KE(e,n);function e(t,r,i,a,o,s){var c=n.call(this,t,r,s)||this;return c.cell=i,c.row=a,c.column=o,c.section=a.section,c}return e}(lx),OH=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,o){for(var s=0,c=t;s<c.length;s++){var f=c[s],d=new DH(e,this,r,i,a,o),p=f(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new lx(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new lx(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),rC=function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof QE&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var o=r.cells[a.index];if(!o)return 0;var s=t.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),f=c+s;return f>i?f:i},0)},n}(),iC=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=o.split(s)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=e2(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),kH=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n}();function PH(n,e){LH(n,e);var t=[],r=0;e.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(e);o?a.width=o:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=cx(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=cx(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),jH(e),BH(e,n),MH(e)}function LH(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=eC(n,e);e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f){var d=e.hooks.didParseCell;e.callCellHooks(n,d,f,a,c,null);var p=f.padding("horizontal");f.contentWidth=im(f.text,f.styles,n)+p;var g=im(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=g+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var m=10/t;f.minWidth=f.styles.minCellWidth||m,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f&&f.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,f.wrappedWidth),c.minWidth=Math.max(c.minWidth,f.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,f.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(c.minWidth=p,c.wrappedWidth=p)}f&&(f.colSpan>1&&!c.minWidth&&(c.minWidth=f.minWidth),f.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=f.minWidth))}})}function cx(n,e,t){for(var r=e,i=n.reduce(function(m,x){return m+x.wrappedWidth},0),a=0;a<n.length;a++){var o=n[a],s=o.wrappedWidth/i,c=r*s,f=o.width+c,d=t(o),p=f<d?d:f;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=n.filter(function(m){return e<0?m.width>t(m):!0});g.length&&(e=cx(g,e,t))}return e}function MH(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],o=0,s=n.columns;o<s.length;o++){var c=s[o],f=e[c.index];if(t>1)t--,delete a.cells[c.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[c.index],f.left--,f.left<=1&&delete e[c.index];else{var d=a.cells[c.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var p=r.length-i,g=d.rowSpan>p?p:d.rowSpan;e[c.index]={cell:d,left:g,row:a}}}}}function jH(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,o=0,s=0;s<n.columns.length;s++){var c=n.columns[s];if(o-=1,o>1&&n.columns[s+1])a+=c.width,delete r.cells[c.index];else if(i){var f=i;delete r.cells[c.index],i=null,f.width=c.width+a}else{var f=r.cells[c.index];if(!f)continue;if(o=f.colSpan,a=0,f.colSpan>1){i=f,a+=c.width;continue}f.width=c.width+a}}}function BH(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],o=0,s=n.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f){e.applyStyles(f.styles,!0);var d=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,d+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=eA(f.text,d,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=eA(f.text,d,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var p=f.styles.overflow(f.text,d);typeof p=="string"?f.text=[p]:f.text=p}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<g*f.rowSpan?t={height:g,count:f.rowSpan}:t&&t.count>0&&t.height>g&&(g=t.height),g>a.height&&(a.height=g)}}t.count--}}function eA(n,e,t,r,i){return n.map(function(a){return FH(a,e,t,r,i)})}function FH(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=im(n,t,r))return n;for(;e<im(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function zH(n,e){var t=new _h(n),r=UH(e,t.scaleFactor()),i=new OH(e,r);return PH(t,i),t.applyStyles(t.userStyles),i}function UH(n,e){var t=n.content,r=qH(t.columns);if(t.head.length===0){var i=tA(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=tA(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,o=n.styles;return{columns:r,head:Zv("head",t.head,r,o,a,e),body:Zv("body",t.body,r,o,a,e),foot:Zv("foot",t.foot,r,o,a,e)}}function Zv(n,e,t,r,i,a){var o={},s=e.map(function(c,f){for(var d=0,p={},g=0,m=0,x=0,_=t;x<_.length;x++){var T=_[x];if(o[T.index]==null||o[T.index].left===0)if(m===0){var A=void 0;Array.isArray(c)?A=c[T.index-g-d]:A=c[T.dataKey];var D={};typeof A=="object"&&!Array.isArray(A)&&(D=(A==null?void 0:A.styles)||{});var U=HH(n,T,f,i,r,a,D),H=new iC(A,U,n);p[T.dataKey]=H,p[T.index]=H,m=H.colSpan-1,o[T.index]={left:H.rowSpan-1,times:m}}else m--,g++;else o[T.index].left--,m=o[T.index].times,d++}return new rC(c,f,n,p)});return s}function tA(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=VH(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function VH(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function qH(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new kH(i,e,t)})}function HH(n,e,t,r,i,a,o){var s=vH(r),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var f=Gc({},s.table,s[n],i.styles,c),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?d:{},g=n==="body"&&t%2===0?Gc({},s.alternateRow,i.alternateRowStyles):{},m=mH(a),x=Gc({},m,f,g,p);return Gc(x,o)}function WH(n,e,t){var r;t===void 0&&(t={});var i=eC(n,e),a=new Map,o=[],s=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var m=e.columns.find(function(x){return x.dataKey===g||x.index===g});m&&!a.has(m.index)&&(a.set(m.index,!0),o.push(m.index),s.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var f=!0,d=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(f||i>=p)f=!1,o.push(d),s.push(e.columns[d]),i-=p;else break;d++}return{colIndexes:o,columns:s,lastIndex:d-1}}function GH(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=WH(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function $H(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),s=r+i.bottom+o;if(t.pageBreak==="avoid"){var c=e.body,f=c.reduce(function(g,m){return g+m.height},0);s+=f}var d=new _h(n);(t.pageBreak==="always"||t.startY!=null&&s>d.pageSize().height)&&(oC(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var p=Gc({},a);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?YH(d,e,p,a):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(g){return au(d,e,g,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(g,m){var x=m===e.body.length-1;am(d,e,g,x,p,a,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(g){return au(d,e,g,a,e.columns)})),ZE(d,e,p,a),e.callEndPageHooks(d,a),e.finalY=a.y,n.lastAutoTable=e,d.applyStyles(d.userStyles)}function YH(n,e,t,r){var i=GH(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,d){n.applyStyles(n.userStyles),d>0?n1(n,e,t,r,f.columns,!0):nA(n,e,r,f.columns),XH(n,e,t,r,f.columns),Jv(n,e,r,f.columns)});else for(var o=-1,s=i[0],c=function(){var f=o;if(s){n.applyStyles(n.userStyles);var d=s.columns;o>=0?n1(n,e,t,r,d,!0):nA(n,e,r,d),f=rA(n,e,o+1,r,d),Jv(n,e,r,d)}var p=f-o;i.slice(1).forEach(function(g){n.applyStyles(n.userStyles),n1(n,e,t,r,g.columns,!0),rA(n,e,o+1,r,g.columns,p),Jv(n,e,r,g.columns)}),o=f};o<e.body.length-1;)c()}function nA(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return au(n,e,a,t,r)})}function XH(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,o){var s=o===e.body.length-1;am(n,e,a,s,t,r,i)})}function rA(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var o=Math.min(t+a,e.body.length),s=-1;return e.body.slice(t,o).forEach(function(c,f){var d=t+f===e.body.length-1,p=aC(n,e,d,r);c.canEntireRowFit(p,i)&&(au(n,e,c,r,i),s=t+f)}),s}function Jv(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return au(n,e,a,t,r)})}function KH(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function QH(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,o=0,s=t.columns;o<s.length;o++){var c=s[o],f=n.cells[c.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var d=new iC(f.raw,f.styles,f.section);d=Gc(d,f),d.text=[];var p=KH(f,e,r);f.text.length>p&&(d.text=f.text.splice(p,f.text.length));var g=r.scaleFactor(),m=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(g,m),f.contentHeight>=e&&(f.contentHeight=e,d.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),d.contentHeight=d.getContentHeight(g,m),d.contentHeight>a&&(a=d.contentHeight),i[c.index]=d}}var x=new rC(n.raw,-1,n.section,i,!0);x.height=a;for(var _=0,T=t.columns;_<T.length;_++){var c=T[_],d=x.cells[c.index];d&&(d.height=x.height);var f=n.cells[c.index];f&&(f.height=n.height)}return x}function ZH(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,o=a.top+a.bottom,s=i-o;e.section==="body"&&(s-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,n),f=c<t;if(c>s)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var d=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>s;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function am(n,e,t,r,i,a,o){var s=aC(n,e,r,a);if(t.canEntireRowFit(s,o))au(n,e,t,a,o);else if(ZH(n,t,s,e)){var c=QH(t,s,e,n);au(n,e,t,a,o),n1(n,e,i,a,o),am(n,e,c,r,i,a,o)}else n1(n,e,i,a,o),am(n,e,t,r,i,a,o)}function au(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var s=o[a],c=t.cells[s.index];if(!c){r.x+=s.width;continue}n.applyStyles(c.styles),c.x=r.x,c.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,c,t,s,r);if(f===!1){r.x+=s.width;continue}JH(n,c,r);var d=c.getTextPos();XE(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,s,r),r.x+=s.width}r.y+=t.height}function JH(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=JE(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),eW(n,e,t,r.lineWidth))}function eW(n,e,t,r){var i,a,o,s;r.top&&(i=t.x,a=t.y,o=t.x+e.width,s=t.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.top,i,a,o,s)),r.bottom&&(i=t.x,a=t.y+e.height,o=t.x+e.width,s=t.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.bottom,i,a,o,s)),r.left&&(i=t.x,a=t.y,o=t.x,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.left,i,a,o,s)),r.right&&(i=t.x+e.width,a=t.y,o=t.x+e.width,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.right,i,a,o,s));function c(f,d,p,g,m){n.getDocument().setLineWidth(f),n.getDocument().line(d,p,g,m,"S")}}function aC(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function n1(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(s){return au(n,e,s,r,i)}),e.callEndPageHooks(n,r);var o=e.settings.margin;ZE(n,e,t,r),oC(n),e.pageNumber++,r.x=o.left,r.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(s){return au(n,e,s,r,i)}),n.applyStyles(n.userStyles))}function oC(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function tW(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=SH(this,r),a=zH(this,i);return $H(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){XE(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return _h.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){_h.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new _h(this),a=nC(i,e,window,t,!1),o=a.head,s=a.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:c,rows:s,data:s}}}var ey;try{if(typeof window<"u"&&window){var iA=window,aA=iA.jsPDF||((ey=iA.jspdf)===null||ey===void 0?void 0:ey.jsPDF);aA&&tW(aA)}}catch(n){console.error("Could not apply autoTable plugin",n)}const nW=({showStatsModal:n,setShowStatsModal:e,loanHistory:t})=>{const r=ue.useMemo(()=>{if(!t||t.length===0)return null;const i=M=>M?M.seconds?new Date(M.seconds*1e3):new Date(M):null,a=t.length,o=a,s=0,c=t.flatMap(M=>M.items||[]),f=c.reduce((M,K)=>M+(K.quantity||1),0),d={};c.forEach(M=>{const K=M.name;d[K]=(d[K]||0)+(M.quantity||1)});const p=Object.entries(d).sort(([,M],[,K])=>K-M).slice(0,5).map(([M,K])=>({name:M,count:K})),g={};t.forEach(M=>{const K=M.clientName||"לא צוין";g[K]=(g[K]||0)+1});const m=Object.entries(g).sort(([,M],[,K])=>K-M).slice(0,5).map(([M,K])=>({name:M,count:K})),x={};t.forEach(M=>{const K=M.volunteerName||"לא צוין";x[K]=(x[K]||0)+1});const _=Object.entries(x).sort(([,M],[,K])=>K-M).slice(0,5).map(([M,K])=>({name:M,count:K})),T=new Date().getMonth(),A=new Date().getFullYear(),D=t.filter(M=>{const K=i(M.pickupDate);return K?K.getMonth()===T&&K.getFullYear()===A:!1}).length,U=T===0?11:T-1,H=T===0?A-1:A,X=t.filter(M=>{const K=i(M.pickupDate);return K?K.getMonth()===U&&K.getFullYear()===H:!1}).length,q=t.filter(M=>M.pickupDate&&M.returnDate);let j=0;if(q.length>0){const M=q.reduce((K,F)=>{const z=i(F.pickupDate),ee=i(F.returnDate);if(!z||!ee)return K;const ae=Math.ceil((ee-z)/(1e3*60*60*24));return K+Math.max(0,ae)},0);j=Math.round(M/q.length)}const C=t.filter(M=>M.returnInspection),N=C.reduce((M,K)=>{var F;return(F=K.returnInspection)!=null&&F.itemInspections?M+K.returnInspection.itemInspections.reduce((z,ee)=>z+(ee.quantityReturned||0),0):M},0),L=C.reduce((M,K)=>{var F;return(F=K.returnInspection)!=null&&F.itemInspections?M+K.returnInspection.itemInspections.filter(z=>z.condition==="damaged").reduce((z,ee)=>z+(ee.quantityReturned||0),0):M},0),R=C.reduce((M,K)=>{var F;return(F=K.returnInspection)!=null&&F.itemInspections?M+K.returnInspection.itemInspections.filter(z=>z.condition==="lost").reduce((z,ee)=>z+Math.max(0,(ee.quantityExpected||0)-(ee.quantityReturned||0)),0):M},0),I={};t.forEach(M=>{const K=M.eventType||"לא צוין";I[K]=(I[K]||0)+1});const P=Object.entries(I).sort(([,M],[,K])=>K-M).slice(0,5).map(([M,K])=>({name:M,count:K}));return{totalLoans:a,activeLoans:s,completedLoans:o,totalItemsLoaned:f,totalItemsReturned:N,damagedItems:L,lostItems:R,mostPopularItems:p,topBorrowers:m,topVolunteers:_,topEventTypes:P,thisMonthLoans:D,lastMonthLoans:X,averageDuration:j,loansWithInspection:C.length}},[t]);return n?r?v.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:v.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2196F3"},children:"📊 סטטיסטיקות השאלות"}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📈 נתונים כלליים"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1976d2"},children:r.totalLoans}),v.jsx("div",{children:'סה"כ השאלות'})]}),v.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#388e3c"},children:r.completedLoans}),v.jsx("div",{children:"השאלות שהושלמו"})]}),v.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f57c00"},children:r.totalItemsLoaned}),v.jsx("div",{children:"פריטים הושאלו"})]}),v.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),v.jsx("div",{children:"פריטים הוחזרו"})]})]})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📅 השוואה חודשית"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.thisMonthLoans}),v.jsx("div",{children:"השאלות החודש"})]}),v.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#666"},children:r.lastMonthLoans}),v.jsx("div",{children:"השאלות החודש שעבר"})]})]}),r.lastMonthLoans>0&&v.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.9rem"},children:r.thisMonthLoans>r.lastMonthLoans?v.jsxs("span",{style:{color:"#388e3c"},children:["⬆️ עלייה של ",((r.thisMonthLoans-r.lastMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):r.thisMonthLoans<r.lastMonthLoans?v.jsxs("span",{style:{color:"#d32f2f"},children:["⬇️ ירידה של ",((r.lastMonthLoans-r.thisMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):v.jsx("span",{style:{color:"#666"},children:"➡️ ללא שינוי"})})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📦 סטטיסטיקות פריטים"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.totalItemsLoaned}),v.jsx("div",{children:'סה"כ פריטים הושאלו'})]}),v.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),v.jsx("div",{children:"פריטים הוחזרו"})]}),r.damagedItems>0&&v.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:r.damagedItems}),v.jsx("div",{children:"פריטים פגומים"})]}),r.lostItems>0&&v.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:r.lostItems}),v.jsx("div",{children:"פריטים אבודים"})]})]}),r.mostPopularItems.length>0&&v.jsxs("div",{children:[v.jsx("h4",{style:{marginBottom:"0.5rem"},children:"🏆 הפריטים הפופולריים ביותר:"}),r.mostPopularItems.map((i,a)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#fff3e0":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[v.jsxs("span",{children:[a+1,". ",i.name]}),v.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," פעמים"]})]},a))]})]}),r.topBorrowers.length>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"👥 הלקוחות הפעילים ביותר"}),r.topBorrowers.map((i,a)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e8f5e8":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[v.jsxs("span",{children:[a+1,". ",i.name]}),v.jsxs("span",{style:{fontWeight:"bold",color:"#388e3c"},children:[i.count," השאלות"]})]},a))]}),r.topVolunteers.length>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🌟 המתנדבות הפעילות ביותר"}),r.topVolunteers.map((i,a)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e3f2fd":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[v.jsxs("span",{children:[a+1,". ",i.name]}),v.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," השאלות"]})]},a))]}),r.topEventTypes.length>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🎉 סוגי האירועים הפופולריים"}),r.topEventTypes.map((i,a)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#f0fdf4":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[v.jsxs("span",{children:[a+1,". ",i.name]}),v.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[i.count," פעמים"]})]},a))]}),r.averageDuration>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"⏱️ משך השאלה ממוצע"}),v.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[r.averageDuration," ימים"]}),v.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["(מבוסס על ",t.filter(i=>i.pickupDate&&i.returnDate).length," השאלות)"]})]})]}),r.loansWithInspection>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🔍 סיכום בדיקות החזרה"}),v.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.loansWithInspection}),v.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["השאלות עם בדיקת החזרה מתוך ",r.totalLoans,' סה"כ']}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:["(",(r.loansWithInspection/r.totalLoans*100).toFixed(1),"% מהשאלות נבדקו)"]})]})]}),v.jsx("div",{className:"modal-actions",children:v.jsx("button",{className:"btn btn-blue",onClick:()=>e(!1),children:"✔️ סגור"})})]})}):v.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:v.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"📊 סטטיסטיקות השאלות"}),v.jsx("p",{style:{textAlign:"center"},children:"אין נתונים זמינים"}),v.jsx("div",{className:"modal-actions",children:v.jsx("button",{className:"btn btn-gray",onClick:()=>e(!1),children:"סגור"})})]})}):null},rW=()=>{var c,f,d,p,g,m;const[n,e]=ue.useState(!1),[t,r]=ue.useState(null),[i,a]=ue.useState(null);ue.useEffect(()=>{o()},[]);const o=async()=>{e(!0),a(null);try{console.log("👤 Manual: Starting manual email check from history page...");const x=await oE();a(x)}catch(x){console.error("❌ Manual: Error in email check:",x),a({reminders:{sent:0,alreadySent:0,errors:[],skippedToday:0},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:x.message}],message:"שגיאה בבדיקת אימיילים"})}finally{e(!1),r(new Date)}},s=()=>{o()};return v.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[v.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h1",{style:{margin:0,fontSize:"1.8rem"},children:"🤖 מערכת תזכורות חכמה"}),v.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"תזכורות אוטומטיות גלובליות • אישורי איסוף ידניים • פעילה תמיד ברקע"})]}),v.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[v.jsx("h2",{style:{margin:0,color:"#1f2937"},children:"סטטוס המערכת"}),v.jsx("button",{onClick:s,disabled:n,style:{background:n?"#9ca3af":"linear-gradient(45deg, #20b2aa, #48d1cc)",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:n?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"},children:n?"🔄 בודק...":"🔍 בדוק תזכורות עכשיו"})]}),v.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdfa, #ecfeff)",border:"1px solid #5eead4",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"1.5rem"},children:"🌐"}),v.jsx("h3",{style:{margin:0,color:"#0f766e"},children:"בדיקה אוטומטית גלובלית"})]}),v.jsx("p",{style:{margin:0,color:"#0f766e",fontSize:"0.9rem"},children:"✅ המערכת פועלת אוטומטית ברקע בכל דפי האתר (8:00-20:00, פעם ביום)"}),v.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0f766e",fontSize:"0.8rem",fontStyle:"italic"},children:"💡 אין צורך לבקר בעמוד זה כדי לשלוח תזכורות - הן נשלחות אוטומטית!"})]}),t&&v.jsxs("div",{style:{background:"#f3f4f6",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#6b7280"},children:[v.jsx("strong",{children:"בדיקה אחרונה (ידנית):"})," ",t.toLocaleString("he-IL")]}),i&&v.jsxs("div",{style:{background:i.totalErrors>0?"#fef2f2":i.weekend?"#f0f9ff":"linear-gradient(135deg, #f0fdfa, #ecfeff)",border:`1px solid ${i.totalErrors>0?"#fecaca":i.weekend?"#7dd3fc":"#5eead4"}`,borderRadius:"8px",padding:"1.5rem"},children:[v.jsx("h3",{style:{margin:"0 0 1rem 0",color:i.totalErrors>0?"#dc2626":i.weekend?"#0369a1":"#0f766e"},children:i.message}),i.weekend&&v.jsxs("div",{style:{background:"#e0f2fe",border:"1px solid #0284c7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[v.jsx("p",{style:{margin:0,color:"#0369a1",fontWeight:"bold"},children:"🕊️ המערכת לא שולחת אימיילים בימי שישי ושבת מטעמים דתיים"}),v.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0369a1",fontSize:"0.9rem"},children:"תזכורות שאמורות להישלח היום יישלחו ביום ראשון"})]}),!i.weekend&&v.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdfa, #ecfeff)",padding:"1.5rem",borderRadius:"8px",border:"1px solid #5eead4",marginBottom:"1rem"},children:[v.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#0f766e"},children:"⏰ תזכורות החזרה (2 ימים לפני)"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"1rem",textAlign:"center"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#3b82f6"},children:i.totalFound||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נמצאו"})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:((c=i.reminders)==null?void 0:c.sent)||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נשלחו"})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#6b7280"},children:((f=i.reminders)==null?void 0:f.alreadySent)||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"כבר נשלחו"})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:((d=i.reminders)==null?void 0:d.skippedToday)||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"דולגו היום"})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:((g=(p=i.reminders)==null?void 0:p.errors)==null?void 0:g.length)||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"שגיאות"})]})]})]}),!i.weekend&&i.totalErrors>0&&v.jsxs("div",{style:{background:"white",border:"1px solid #fecaca",borderRadius:"6px",padding:"1rem"},children:[v.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc2626"},children:"שגיאות:"}),(((m=i.reminders)==null?void 0:m.errors)||[]).map((x,_)=>v.jsxs("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",marginBottom:"0.25rem"},children:[v.jsx("strong",{children:"[תזכורת]"})," ",x.clientName?`${x.clientName} (${x.email})`:"שגיאה כללית",": ",x.error]},_))]})]})]}),v.jsxs("div",{style:{background:"#fdf2f8",border:"1px solid #f8b2dd",borderRadius:"12px",padding:"2rem"},children:[v.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#be185d"},children:"🔧 איך המערכת החכמה עובדת"}),v.jsxs("ul",{style:{color:"#be185d",paddingRight:"1.5rem"},children:[v.jsxs("li",{children:[v.jsx("strong",{children:"🌐 בדיקה אוטומטית גלובלית:"})," המערכת פועלת ברקע בכל דפי האתר (8:00-20:00)"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"📧 תזכורות החזרה:"})," נשלחים אוטומטית 2 ימים לפני תאריך ההחזרה"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"📦 אישורי איסוף:"})," נשלחים רק ידנית על ידי לחיצה על הכפתור במערכת הזמנות"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"🔒 מניעת כפילויות:"})," המערכת מונעת שליחת אימיילים כפולים"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"🕊️ מטעמים דתיים:"})," לא נשלחים אימיילים בימי שישי ושבת"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"👤 בדיקה ידנית:"})," ניתן להפעיל בדיקה ידנית בכל עת באמצעות הכפתור למעלה"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"📊 מעקב מלא:"})," כל האימיילים נרשמים במסד הנתונים למעקב"]})]}),v.jsxs("div",{style:{background:"linear-gradient(135deg, #fdf2f8, #fce7f3)",border:"1px solid #f8b2dd",borderRadius:"8px",padding:"1rem",marginTop:"1rem"},children:[v.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#be185d"},children:"🎯 המערכת החדשה - פועלת בכל מקום!"}),v.jsxs("p",{style:{margin:0,color:"#be185d",fontSize:"0.9rem"},children:["✅ ",v.jsx("strong",{children:"אוטומטית באמת"})," - עובדת בכל דף באתר",v.jsx("br",{}),"✅ ",v.jsx("strong",{children:"אין צורך לבקר כאן"})," - תזכורות נשלחות בכל מקרה",v.jsx("br",{}),"✅ ",v.jsx("strong",{children:"פעם ביום בלבד"})," - מונעת כפילויות",v.jsx("br",{}),"✅ ",v.jsx("strong",{children:"פועלת ברקע"})," - בשקט ובדיסקרטיות"]})]})]})]})},iW=({item:n,size:e=60})=>{const t=n.imageUrl||(n.images&&n.images.length>0?n.images[0]:null);return t?v.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",overflow:"hidden",flexShrink:0,background:"#f9fafb"},children:v.jsx("img",{src:t,alt:n.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{r.target.parentNode.innerHTML=`
            <div style="
              width: 100%; 
              height: 100%; 
              display: flex; 
              align-items: center; 
              justify-content: center;
              background: #f9fafb;
            ">
              <svg width="${e*.4}" height="${e*.4}" viewBox="0 0 24 24" fill="#9ca3af">
                <path d="M20 7h-3V6a4 4 0 0 0-4-4h-2a4 4 0 0 0-4 4v1H4a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM9 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1H9V6zm8 15H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v11a1 1 0 0 1-1 1z"/>
              </svg>
            </div>
          `}})}):v.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",flexShrink:0},children:v.jsx(Ss,{size:e*.4,style:{color:"#9ca3af"}})})},aW=()=>{var H,X;const[n,e]=ue.useState([]),[t,r]=ue.useState([]),[i,a]=ue.useState(null),[o,s]=ue.useState(""),[c,f]=ue.useState(""),[d,p]=ue.useState(""),[g,m]=ue.useState(!0),[x,_]=ue.useState(!1);ue.useEffect(()=>{(async()=>{try{m(!0),console.log("🔍 מחפש את כל ההזמנות...");const j=ul(tn(_t,"orders")),N=(await $n(j)).docs.map(F=>({id:F.id,...F.data()}));console.log("📋 כל ההזמנות:",N),console.log("📊 סטטוסים:",N.map(F=>({id:F.id,client:F.clientName,status:F.status}))),console.log("🔍 מחפש הזמנות סגורות...");const L=ul(tn(_t,"orders"),nu("status","==","closed")),I=(await $n(L)).docs.map(F=>({id:F.id,...F.data()}));console.log("✅ הזמנות סגורות:",I),e(I),console.log("🔍 מחפש הזמנות שהוחזרו...");const P=ul(tn(_t,"orders"),nu("status","==","returned")),K=(await $n(P)).docs.map(F=>({id:F.id,...F.data()}));console.log("🔄 הזמנות שהוחזרו:",K)}catch(j){console.error("❌ שגיאה בטעינת ההזמנות:",j)}finally{m(!1)}})()},[]);const T=q=>q?(q.seconds?new Date(q.seconds*1e3):new Date(q)).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"}):"",A=q=>q?(q.seconds?new Date(q.seconds*1e3):new Date(q)).toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",D=q=>{var P;if(!((P=q.returnInspection)!=null&&P.itemInspections))return{totalItemsExpected:0,totalItemsReturned:0,totalItemsNotReturned:0,totalDamagedItems:0,totalLostItems:0};const j=q.returnInspection.itemInspections,C=j.reduce((M,K)=>M+(K.quantityExpected||0),0),N=j.reduce((M,K)=>M+(K.quantityReturned||0),0),L=j.reduce((M,K)=>M+Math.max(0,(K.quantityExpected||0)-(K.quantityReturned||0)),0),R=j.filter(M=>M.condition==="damaged").reduce((M,K)=>M+(K.quantityReturned||0),0),I=j.filter(M=>M.condition==="lost").reduce((M,K)=>M+Math.max(0,(K.quantityExpected||0)-(K.quantityReturned||0)),0);return{totalItemsExpected:C,totalItemsReturned:N,totalItemsNotReturned:L,totalDamagedItems:R,totalLostItems:I}};ue.useEffect(()=>{const q=c?new Date(c):null,j=d?new Date(d):null,C=n.filter(N=>{var K,F,z;const L=((K=N.clientName)==null?void 0:K.toLowerCase().includes(o.toLowerCase()))||"",R=((F=N.phone)==null?void 0:F.includes(o))||"",I=L||R,P=(z=N.pickupDate)!=null&&z.seconds?new Date(N.pickupDate.seconds*1e3):new Date(N.pickupDate),M=(!q||P>=q)&&(!j||P<=j);return I&&M});r(C)},[o,c,d,n]);const U=q=>{var L,R;const j=D(q),C=`
      <!DOCTYPE html>
      <html dir="rtl" lang="he">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>דוח השאלה - ${q.clientName}</title>
          <style>
              body { 
                  font-family: Arial, sans-serif; 
                  direction: rtl; 
                  text-align: right;
                  margin: 20px;
                  line-height: 1.6;
                  padding-bottom: 100px;
              }
              .header { 
                  text-align: center; 
                  margin-bottom: 30px;
                  border-bottom: 2px solid #333;
                  padding-bottom: 15px;
              }
              .header h1 {
                  font-size: 24px;
                  color: #2c5aa0;
                  margin: 0 0 5px 0;
              }
              .header h2 {
                  font-size: 20px;
                  color: #333;
                  margin: 0 0 10px 0;
              }
              .info-grid { 
                  display: grid; 
                  grid-template-columns: 1fr 1fr; 
                  gap: 20px; 
                  margin-bottom: 30px;
              }
              .info-item { 
                  margin-bottom: 10px; 
              }
              .label { 
                  font-weight: bold; 
                  color: #333;
              }
              table { 
                  width: 100%; 
                  border-collapse: collapse; 
                  margin-bottom: 30px;
              }
              th, td { 
                  border: 1px solid #ddd; 
                  padding: 8px; 
                  text-align: center;
              }
              th { 
                  background-color: #f5f5f5; 
                  font-weight: bold;
              }
              .summary { 
                  background-color: #f9f9f9; 
                  padding: 20px; 
                  border-radius: 5px;
                  margin-top: 20px;
              }
              .summary h3 {
                  margin-top: 0;
                  color: #2c5aa0;
              }
              
              .download-btn {
                  position: fixed;
                  bottom: 20px;
                  right: 20px;
                  background: linear-gradient(45deg, #20b2aa, #48d1cc);
                  color: white;
                  border: none;
                  padding: 15px 25px;
                  border-radius: 50px;
                  cursor: pointer;
                  font-size: 16px;
                  font-weight: bold;
                  box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
                  transition: all 0.3s ease;
                  z-index: 1000;
                  display: flex;
                  align-items: center;
                  gap: 8px;
              }
              
              .download-btn:hover {
                  transform: translateY(-2px);
                  box-shadow: 0 6px 20px rgba(32, 178, 170, 0.4);
              }
              
              .download-btn:active {
                  transform: translateY(0);
              }
              
              @media print {
                  body { margin: 0; font-size: 14px; }
                  .header { page-break-after: avoid; }
                  .download-btn { display: none !important; }
              }
          </style>
      </head>
      <body>
          <button class="download-btn" onclick="window.print(); return false;">
              📥 הורדת דוח
          </button>
          
          <div class="header">
              <h1>גמ"ח שמחת זקנתי</h1>
              <h2>דוח השאלה - ${q.clientName}</h2>
              <p>נוצר בתאריך: ${new Date().toLocaleDateString("he-IL")}</p>
          </div>
          
          <div class="info-grid">
              <div>
                  <div class="info-item">
                      <span class="label">מתנדבת:</span> ${q.volunteerName}
                  </div>
                  <div class="info-item">
                      <span class="label">טלפון:</span> ${q.phone}
                  </div>
                  <div class="info-item">
                      <span class="label">כתובת:</span> ${q.address}
                  </div>
              </div>
              <div>
                  <div class="info-item">
                      <span class="label">תאריך איסוף:</span> ${T(q.pickupDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">תאריך החזרה:</span> ${T(q.returnDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">סוג אירוע:</span> ${q.eventType}
                  </div>
              </div>
          </div>

          <h3>פריטים בהזמנה</h3>
          <table>
              <thead>
                  <tr>
                      <th>#</th>
                      <th>שם פריט</th>
                      <th>כמות שהושאלה</th>
                      <th>תקין</th>
                      <th>אבד/לא הוחזר</th>
                  </tr>
              </thead>
              <tbody>
                  ${((L=q.items)==null?void 0:L.map((I,P)=>{var Q,he;const M=(he=(Q=q.returnInspection)==null?void 0:Q.itemInspections)==null?void 0:he.find(G=>G.itemId===I.id||G.name===I.name),K=I.quantity,F=(M==null?void 0:M.quantityReturned)||0,z=Math.max(0,K-F);let ee=0,ae=z;return M&&F>0&&(M.condition==="good"?ee=F:M.condition==="damaged"?ae+=F:ee=F),`
                      <tr>
                          <td>${P+1}</td>
                          <td>${I.name}</td>
                          <td>${K}</td>
                          <td>${ee}</td>
                          <td>${ae}</td>
                      </tr>
                    `}).join(""))||'<tr><td colspan="5">אין פריטים</td></tr>'}
              </tbody>
          </table>

          ${q.returnInspection?`
          <div class="summary">
              <h3 style="text-align: center;">סיכום בדיקת החזרה</h3>
              <div style="text-align: center;">
                  <div class="info-item">
                      <span class="label">סה"כ פריטים שהושאלו:</span> ${j.totalItemsExpected}
                  </div>
                  <div class="info-item">
                      <span class="label">סה"כ פריטים שהוחזרו:</span> ${j.totalItemsReturned}
                  </div>
                  <div class="info-item">
                      <span class="label">פריטים שלא הוחזרו:</span> ${j.totalItemsNotReturned}
                  </div>
              </div>
              
              ${(R=q.returnInspection.summary)!=null&&R.managerNotes?`
              <div class="info-item" style="margin-top: 20px; text-align: center;">
                  <span class="label">הערות מנהל:</span><br>
                  ${q.returnInspection.summary.managerNotes}
              </div>
              `:""}
          </div>
          `:""}
      </body>
      </html>
    `,N=window.open("","_blank","width=800,height=900,scrollbars=yes,resizable=yes");N.document.write(C),N.document.close(),N.focus()};return g?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"טוען היסטוריית השאלות..."})]})}):v.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[v.jsx("style",{children:`
        @media (max-width: 768px) {
          .date-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            background: white !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            text-align: center !important;
            direction: ltr !important;
            width: 100% !important;
            box-sizing: border-box !important;
            cursor: pointer !important;
            letter-spacing: 1px !important;
          }
          
          .date-input::-webkit-calendar-picker-indicator {
            opacity: 0 !important;
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            height: 100% !important;
            cursor: pointer !important;
            background: transparent !important;
          }
          
          .date-input::-webkit-inner-spin-button,
          .date-input::-webkit-outer-spin-button {
            opacity: 0 !important;
            -webkit-appearance: none !important;
            margin: 0 !important;
          }
        }
      `}),v.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"1.5rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[v.jsxs("div",{style:{textAlign:window.innerWidth<768?"center":"right",flex:"1"},children:[v.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",margin:0,marginBottom:"0.5rem"},children:"📚 היסטוריית השאלות"}),v.jsx("p",{style:{fontSize:"0.95rem",opacity:.9,margin:0},children:"כל ההזמנות שהושלמו עם פרטי בדיקת החזרה"})]}),v.jsxs("button",{onClick:()=>_(!0),style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",backdropFilter:"blur(10px)",whiteSpace:"nowrap"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(255, 255, 255, 0.3)",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.background="rgba(255, 255, 255, 0.2)",q.currentTarget.style.transform="translateY(0)"},children:[v.jsx(uM,{size:20}),"📊 סטטיסטיקות"]})]}),!i&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[v.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem",alignItems:window.innerWidth<768?"stretch":"end"},children:[v.jsxs("div",{style:{flex:window.innerWidth<768?"none":"2"},children:[v.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[v.jsx(kS,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"חיפוש לפי שם לקוח או טלפון"]}),v.jsx("input",{type:"text",value:o,onChange:q=>s(q.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"},placeholder:"הקלד שם או טלפון..."})]}),v.jsxs("div",{style:{flex:"1"},children:[v.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[v.jsx(ru,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"מתאריך"]}),v.jsx("input",{type:"date",value:c,onChange:q=>f(q.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]}),v.jsxs("div",{style:{flex:"1"},children:[v.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[v.jsx(ru,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"עד תאריך"]}),v.jsx("input",{type:"date",value:d,onChange:q=>p(q.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]})]}),v.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem",color:"#374151"},children:["נמצאו ",t.length," השאלות מתוך ",n.length,' סה"כ']})]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":window.innerWidth<1024?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:window.innerWidth<768?"1rem":"1.5rem"},children:t.length===0?v.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[v.jsx(Ss,{size:48,style:{color:"#9ca3af",marginBottom:"1rem"}}),v.jsx("h3",{style:{fontSize:"1.25rem",color:"#6b7280",margin:0},children:"לא נמצאו השאלות"}),v.jsx("p",{style:{color:"#9ca3af",margin:"0.5rem 0 0 0"},children:"נסה לשנות את פרמטרי החיפוש"})]}):t.map(q=>{var j;return v.jsxs("div",{onClick:()=>a(q),style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box"},onMouseEnter:C=>{C.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",C.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:C=>{C.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",C.currentTarget.style.transform="translateY(0)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[v.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[v.jsx("h3",{style:{fontSize:window.innerWidth<768?"1rem":"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937",wordBreak:"break-word"},children:q.clientName}),v.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0",display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx(LS,{size:window.innerWidth<768?12:14}),q.volunteerName]})]}),v.jsx("div",{style:{background:"#10b981",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:window.innerWidth<768?"0.6rem":"0.75rem",fontWeight:"bold",whiteSpace:"nowrap"},children:"הושלם"})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem",fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(od,{size:window.innerWidth<768?12:14}),v.jsx("span",{style:{wordBreak:"break-all"},children:q.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Um,{size:window.innerWidth<768?12:14}),v.jsxs("span",{style:{fontSize:window.innerWidth<768?"0.7rem":"0.875rem"},children:[T(q.pickupDate)," ← ",T(q.returnDate)]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Ss,{size:window.innerWidth<768?12:14}),(j=q.items)==null?void 0:j.reduce((C,N)=>C+N.quantity,0)," פריטים"]})]})]},q.id)})})]}),i&&v.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e5e7eb",flexWrap:"wrap",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsxs("h2",{style:{fontSize:window.innerWidth<768?"1.25rem":"2rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:["השאלה - ",i.clientName]}),v.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:["הושלמה ב-",A((H=i.returnInspection)==null?void 0:H.completedAt)]})]}),v.jsxs("button",{onClick:()=>a(null),style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:window.innerWidth<768?"0.875rem":"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(eM,{size:16}),"חזרה לרשימה"]})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"לקוח"}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.clientName})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"מתנדבת"}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.volunteerName})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.phone})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.address})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),v.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:[T(i.pickupDate)," ← ",T(i.returnDate)]})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.eventType})]})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#1f2937"},children:"📦 פריטים וסטטוס החזרה"}),v.jsx("div",{style:{display:"grid",gap:"1rem"},children:(X=i.items)==null?void 0:X.map((q,j)=>{var N,L;const C=(L=(N=i.returnInspection)==null?void 0:N.itemInspections)==null?void 0:L.find(R=>R.itemId===q.id||R.name===q.name);return v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",flexWrap:window.innerWidth<768?"wrap":"nowrap",gap:"0.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:"1",minWidth:"200px"},children:[v.jsx(iW,{item:q,size:window.innerWidth<768?50:60}),v.jsxs("div",{children:[v.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:q.name}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["הושאל: ",q.quantity," | תקין: ",(()=>{const R=(C==null?void 0:C.quantityReturned)||0;return C&&R>0&&C.condition==="good"||C&&R>0&&C.condition!=="damaged"?R:0})()," | אבד/פגום: ",(()=>{const R=q.quantity,I=(C==null?void 0:C.quantityReturned)||0;let M=Math.max(0,R-I);return C&&I>0&&C.condition==="damaged"&&(M+=I),M})()]})]})]}),v.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const R=q.quantity,I=(C==null?void 0:C.quantityReturned)||0;let M=Math.max(0,R-I);return C&&I>0&&C.condition==="damaged"&&(M+=I),M===0?v.jsxs(v.Fragment,{children:[v.jsx(bf,{size:16,style:{color:"#10b981"}}),v.jsx("span",{style:{color:"#10b981",fontWeight:"bold",fontSize:"0.875rem"},children:"הכל תקין"})]}):v.jsxs(v.Fragment,{children:[v.jsx(j1,{size:16,style:{color:"#ef4444"}}),v.jsxs("span",{style:{color:"#ef4444",fontWeight:"bold",fontSize:"0.875rem"},children:[M," חסר/פגום"]})]})})()})]},j)})})]}),v.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:v.jsxs("button",{onClick:()=>U(i),style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"1rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",fontSize:"1.2rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",minWidth:window.innerWidth<768?"100%":"250px",justifyContent:"center"},onMouseEnter:q=>{q.currentTarget.style.transform="translateY(-2px)",q.currentTarget.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.4)"},onMouseLeave:q=>{q.currentTarget.style.transform="translateY(0)",q.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:[v.jsx(AM,{size:20}),"🖨️ הדפס דוח עברית"]})})]}),v.jsx(nW,{showStatsModal:x,setShowStatsModal:_,loanHistory:n}),v.jsx(rW,{})]})},oW=()=>{const[n,e]=ue.useState(""),t="054-4773388",r=async(o,s)=>{try{await navigator.clipboard.writeText(o),e(s),setTimeout(()=>e(""),2e3)}catch(c){console.error("Failed to copy text: ",c)}},i=()=>{const o=t.replace(/-/g,"");r(o,"bit-app"),setTimeout(()=>{if(confirm(`המספר הועתק! 📋

📱 הנחיות לתרומה בביט:
1. פתח את אפליקציית ביט
2. לחץ על "העבר כסף"
3. בחר "למספר טלפון"
4. הדבק את המספר (או הקלד: `+t+`)
5. הכנס סכום לתרומה
6. אשר את התרומה 💚

לחץ "אישור" כדי לפתוח את ביט עכשיו`))try{window.location.href="bit://"}catch{window.open("https://bit.co.il/","_blank")}},500)},a=()=>{const o=t.replace(/-/g,"");r(o,"paybox-app"),setTimeout(()=>{try{window.location.href="https://payboxapp.page.link/rcKWijyydRQpxEfb9"}catch{window.open("https://payboxapp.page.link/rcKWijyydRQpxEfb9","_blank")}},500)};return v.jsxs("div",{style:{minHeight:"100vh",background:"transparent",padding:"2rem 1rem",direction:"rtl"},children:[v.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",backgroundColor:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{background:"linear-gradient(135deg, #20b2aa 0%, #48d1cc 100%)",padding:"3rem 2rem",textAlign:"center",color:"white"},children:[v.jsx("div",{style:{fontSize:"4rem"}}),v.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",margin:"0 0 1rem 0",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:'תרומות לגמ"ח'}),v.jsx("p",{style:{fontSize:"1.2rem",opacity:"0.95",margin:0,fontWeight:"700"},children:"עזרו לנו להמשיך לעזור לכם"})]}),v.jsxs("div",{style:{padding:"3rem 2rem"},children:[v.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"2rem",borderRadius:"15px",marginBottom:"3rem",border:"2px solid #e9ecef"},children:[v.jsx("h2",{style:{fontSize:"1.5rem",color:"#2c3e50",marginBottom:"1rem",textAlign:"center"},children:'הגמ"ח נשען על תרומות בלבד'}),v.jsx("p",{style:{fontSize:"1.1rem",lineHeight:"1.6",color:"#495057",textAlign:"center",margin:0},children:'עם החזרת הציוד נשמח לתרומתכם על מנת שנוכל להמשיך להחזיק ולחדש את הציוד בגמ"ח לטובת כולנו.'})]}),v.jsx("h3",{style:{fontSize:"2rem",textAlign:"center",marginBottom:"2rem",color:"#2c3e50"},children:"🎯 אפשרויות לתרומה"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[v.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #c2185b",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(194, 24, 91, 0.2)"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 8px 25px rgba(194, 24, 91, 0.3)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(194, 24, 91, 0.2)"},children:[v.jsx(XM,{size:48,color:"#c2185b",style:{marginBottom:"1rem"}}),v.jsx("h4",{style:{fontSize:"1.3rem",color:"#c2185b",marginBottom:"1rem",fontWeight:"700"},children:"ביט / פייבוקס"}),v.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",marginBottom:"1rem"},children:[v.jsx("p",{style:{fontSize:"1.2rem",fontWeight:"800",color:"#c2185b",margin:"0 0 0.5rem 0"},children:t}),v.jsxs("button",{onClick:()=>r(t,"bit"),style:{background:"#c2185b",border:"2px solid #c2185b",color:"white",padding:"8px 15px",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",margin:"0 auto 10px auto",fontWeight:"600"},children:[n==="bit"?v.jsx(NS,{size:16}):v.jsx(wM,{size:16}),n==="bit"?"הועתק!":"העתק מספר"]})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[v.jsx("button",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:o=>o.target.style.transform="scale(1.05)",onMouseLeave:o=>o.target.style.transform="scale(1)",onClick:i,children:"🤍 ביט"}),v.jsx("button",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:o=>o.target.style.transform="scale(1.05)",onMouseLeave:o=>o.target.style.transform="scale(1)",onClick:a,children:"🤍 פייבוקס"})]})]}),v.jsxs("div",{style:{backgroundColor:"#fff",border:"2px solid #c2185b",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(194, 24, 91, 0.1)"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 8px 25px rgba(194, 24, 91, 0.2)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(194, 24, 91, 0.1)"},children:[v.jsx(iM,{size:48,color:"#c2185b",style:{marginBottom:"1rem"}}),v.jsx("h4",{style:{fontSize:"1.3rem",color:"#c2185b",marginBottom:"1rem",fontWeight:"600"},children:"תרומה במזומן"}),v.jsx("p",{style:{color:"#7f8c8d",marginBottom:"1.5rem",fontSize:"1rem",fontWeight:"600",lineHeight:"1.4"},children:'למתנדבות הגמ"ח בעת החזרת הציוד'}),v.jsx("div",{style:{display:"flex",justifyContent:"center"},children:v.jsx("div",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",padding:"12px 24px",borderRadius:"25px",fontSize:"1rem",fontWeight:"600"},children:"💰 בעת החזרה"})})]})]}),v.jsxs("div",{style:{background:"linear-gradient(135deg, #20b2aa 0%, #48d1cc 100%)",padding:"2.5rem",borderRadius:"20px",textAlign:"center",color:"white",boxShadow:"0 10px 30px rgba(32, 178, 170, 0.3)"},children:[v.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"1rem",fontWeight:"600"},children:"תודה מראש"}),v.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"1rem",opacity:"0.95"},children:"התרומה שלכם עוזרת לנו להמשיך לספק שירות איכותי לקהילה"}),v.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"🎉 נתראה בשמחות!"})]})]})]}),v.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        
        @media (max-width: 768px) {
          h1 {
            font-size: 2rem !important;
          }
          
          h3 {
            font-size: 1.5rem !important;
          }
          
          .donation-cards {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})},sW=()=>{const n=window.innerWidth<=768,e={maxWidth:n?"100%":"900px",width:"100%",margin:n?"0":"20px auto",padding:n?"10px":"40px",backgroundColor:"#ffffff",borderRadius:n?"0":"8px",boxShadow:n?"none":"0 2px 8px rgba(0, 0, 0, 0.08)",fontFamily:"system-ui, -apple-system, sans-serif",direction:"rtl",lineHeight:n?"1.6":"1.7",boxSizing:"border-box"},t={textAlign:"center",marginBottom:n?"30px":"50px",padding:n?"20px 15px":"30px 20px",backgroundColor:"#fafbfc",borderRadius:"6px",border:"3px solid #718096",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.1)":"0 4px 12px rgba(0, 0, 0, 0.12)"},r={fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"600",color:"#1a202c",marginBottom:"8px",lineHeight:"1.2"},i={fontSize:"clamp(14px, 3.5vw, 18px)",color:"#4a5568",fontWeight:"400",margin:"0"},a={marginBottom:n?"25px":"40px",padding:n?"20px 15px":"32px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"2px solid #a0aec0":"3px solid #a0aec0",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 4px 12px rgba(0, 0, 0, 0.12)"},o={fontSize:"clamp(18px, 4vw, 24px)",fontWeight:"600",color:"#2d3748",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},s={display:"flex",alignItems:"flex-start",marginBottom:n?"20px":"24px",padding:n?"15px":"24px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:n?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",gap:n?"12px":"20px"},c={backgroundColor:"#4299e1",color:"white",borderRadius:"50%",width:n?"32px":"36px",height:n?"32px":"36px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:n?"14px":"16px",flexShrink:0,minWidth:n?"32px":"36px"},f={flex:1,fontSize:"clamp(14px, 3.5vw, 16px)",color:"#4a5568",lineHeight:"1.5",minWidth:0},d={backgroundColor:"#f7fafc",border:n?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:n?"15px":"24px",marginBottom:n?"15px":"20px",textAlign:"center",boxShadow:n?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},p={backgroundColor:"#f7fafc",border:n?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:n?"15px":"24px",marginBottom:n?"15px":"20px",boxShadow:n?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},g={padding:n?"15px":"20px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:n?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",marginBottom:n?"15px":"0"},m={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"15px",width:"100%"},x={display:"flex",flexDirection:"column",gap:"15px",width:"100%"},_={fontSize:"clamp(16px, 4vw, 20px)",marginLeft:"4px"};return v.jsxs("div",{style:e,children:[v.jsxs("div",{style:t,children:[v.jsxs("h1",{style:r,children:[v.jsx("span",{style:_}),"נוהל השאלה"]}),v.jsx("p",{style:i,children:'שואלים יקרים - אנא קראו בעיון את נוהל הגמ"ח'})]}),v.jsxs("div",{style:{...a,backgroundColor:"#f8fafc",border:n?"1px solid #e2e8f0":"4px solid #2d3748",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 6px 16px rgba(45, 55, 72, 0.15)"},children:[v.jsxs("h2",{style:o,children:[v.jsx("span",{style:_,children:"🔄"}),"התהליך המלא - איך זה עובד?"]}),v.jsxs("div",{style:s,children:[v.jsx("div",{style:c,children:"1"}),v.jsxs("div",{style:f,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"הזמנה ורישום בלוח:"}),v.jsx("br",{}),'מתקשרים/מגיעים לגמ"ח בזמני הפתיחה ומשריינים תאריך לארוע. רושמים אתכם ביומן השמחות לפי סדר הרישום.',v.jsx("br",{}),v.jsx("strong",{children:"הזמנת רשימת ציוד:"})," משריינים עם המתנדבות רשימה של הציוד המבוקש ומסכמים מועד לאיסוף."]})]}),v.jsxs("div",{style:s,children:[v.jsx("div",{style:c,children:"2"}),v.jsxs("div",{style:f,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"איסוף הציוד:"}),v.jsx("br",{}),"מגיעים לקחת את הציוד שהוזמן מראש.",v.jsx("strong",{style:{color:"#2d3748"},children:" חשוב להיצמד לרשימה"})," - זה מקל על המתנדבות לתת שירות טוב יותר לכולם."]})]}),v.jsxs("div",{style:s,children:[v.jsx("div",{style:c,children:"3"}),v.jsxs("div",{style:f,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"החזרת הציוד:"}),v.jsx("br",{}),"לאחר הארוע מחזירים את הציוד. המתנדבות יבדקו את הפריטים המוחזרים וידריכו איך להחזיר אותם למקומם."]})]}),v.jsx("div",{style:d,children:v.jsxs("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",margin:0,fontWeight:"500",color:"#2d3748"},children:["🏆 ",v.jsx("strong",{children:"עדיפויות:"})," ההשאלה היא לפי סדר הרישום - מי שנרשם ראשון, משאיל ראשון!"]})})]}),v.jsxs("div",{style:a,children:[v.jsxs("h2",{style:o,children:[v.jsx("span",{style:_,children:"📝"}),"כללים חשובים לזכור"]}),v.jsxs("div",{style:n?x:m,children:[v.jsxs("div",{style:g,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"⏰ זמני פתיחה:"}),v.jsx("br",{}),'הגמ"ח פתוח רק בשעות המפורסמות. הטלפון זמין בשעות הפתיחה.',v.jsx("br",{}),v.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"המתנדבות עסוקות בנתינת שירות - הן עונות כשהן פנויות, אנא האזרו בסבלנות."})]}),v.jsxs("div",{style:g,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"📅 החזרה בזמן:"}),v.jsx("br",{}),"הקפידו להחזיר את הציוד ביום שנקבע מראש."]}),v.jsxs("div",{style:g,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"📸 המלצה:"}),v.jsx("br",{}),"צלמו את הפריטים שלקחתם זה יקל עליכם בשעת ההחזרה.",v.jsx("br",{}),v.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"החפצים יקרים ומאוד עדינים - אנא שימרו עליהם כשלכם."})]})]})]}),v.jsxs("div",{style:n?x:m,children:[v.jsxs("div",{style:d,children:[v.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[v.jsx("span",{style:_,children:"💝"}),"תרומות"]}),v.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:'הגמ"ח מאפשר השאלה ללא תשלום. בכדי שנוכל להרחיב ולהעשיר אותו נשמח מאוד לתרומתכם.'})]}),v.jsxs("div",{style:p,children:[v.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[v.jsx("span",{style:_,children:"🔧"}),"במקרה של נזק"]}),v.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:"אם נגרם נזק בטעות - הפנו את תשומת לבנו על מנת להעריך את עלותו."})]})]}),v.jsxs("div",{style:a,children:[v.jsxs("h2",{style:o,children:[v.jsx("span",{style:_,children:"🧽"}),"הוראות ניקוי והחזרה"]}),v.jsxs("div",{style:n?x:m,children:[v.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[v.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"🧺"}),v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"מפות"}),v.jsx("br",{}),v.jsxs("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:["יש להחזיר נקיות, יבשות ומקופלות",v.jsx("br",{}),"(מסיר כתמים לפני כביסה)",v.jsx("br",{}),v.jsx("em",{children:"(להקפיד על הסרת כתמים)"})]})]}),v.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[v.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"🕯️"}),v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"מעמדי נרות"}),v.jsx("br",{}),v.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"נקיים משעווה"})]}),v.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[v.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"☕"}),v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"ערכת קפה ומגשים"}),v.jsx("br",{}),v.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"חובה לשטוף ולנגב"})]})]})]}),v.jsxs("div",{style:{...d,marginTop:n?"30px":"40px"},children:[v.jsx("h3",{style:{color:"#2d3748",fontSize:"clamp(18px, 4vw, 20px)",marginBottom:"8px",fontWeight:"600"},children:"שפע ברכות ושמחה"}),v.jsx("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",fontStyle:"italic",margin:0,color:"#4a5568"},children:"תודה על שיתוף הפעולה ועל שמירת הכללים"})]})]})},lW=()=>{const{user:n}=So(),e=lm(),[t,r]=ue.useState([]),[i,a]=ue.useState(!1),[o,s]=ue.useState(!1),[c,f]=ue.useState(!1),[d,p]=ue.useState(!1);ue.useEffect(()=>{const A=()=>{f(window.innerWidth<=768)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]),ue.useEffect(()=>{if(!(n!=null&&n.uid))return;const A=`conflicts_dismissed_${n.uid}`,D=localStorage.getItem(A);D&&((Date.now()-parseInt(D))/6e4<15?p(!0):(localStorage.removeItem(A),p(!1)))},[n==null?void 0:n.uid]);const g=n&&(n.role==="MainAdmin"||n.role==="GmachAdmin");ue.useEffect(()=>{if(!g){r([]),a(!1);return}console.log("🔔 מתחיל מעקב בזמן אמת אחרי בעיות זמינות...");const A=P1(tn(_t,"orders"),D=>{const U=[];D.docs.forEach(H=>{const X=H.data();X.status==="open"&&X.availabilityStatus==="CONFLICT"&&X.availabilityConflicts&&X.availabilityConflicts.length>0&&U.push({id:H.id,clientName:X.clientName,phone:X.phone,pickupDate:X.pickupDate,returnDate:X.returnDate,conflicts:X.availabilityConflicts})}),console.log(`🔔 עדכון בזמן אמת: נמצאו ${U.length} הזמנות עם בעיות זמינות`),r(U),a(U.length>0),U.length>0&&(s(!1),p(!1))},D=>{console.error("❌ שגיאה במעקב בזמן אמת:",D),m()});return()=>{console.log("🔔 מפסיק מעקב בזמן אמת"),A()}},[g]);const m=async()=>{try{console.log("🔄 בדיקה ידנית לבעיות זמינות...");const A=await $n(tn(_t,"orders")),D=[];A.docs.forEach(U=>{const H=U.data();H.status==="open"&&H.availabilityStatus==="CONFLICT"&&H.availabilityConflicts&&H.availabilityConflicts.length>0&&D.push({id:U.id,clientName:H.clientName,phone:H.phone,pickupDate:H.pickupDate,returnDate:H.returnDate,conflicts:H.availabilityConflicts})}),r(D),a(D.length>0)}catch(A){console.error("❌ שגיאה בבדיקה ידנית:",A)}};if(!g||t.length===0||!i||d)return null;const x=()=>{e("/calendar")},_=()=>{if(n!=null&&n.uid){const A=`conflicts_dismissed_${n.uid}`;localStorage.setItem(A,Date.now().toString()),console.log(`✅ משתמש ${n.uid} סגר את ההתראה ל-15 דקות`)}a(!1),p(!0)},T=()=>{s(!o)};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,children:`
        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @keyframes slideIn {
          from { 
            transform: translateX(100%); 
            opacity: 0; 
          }
          to { 
            transform: translateX(0); 
            opacity: 1; 
          }
        }

        @keyframes slideInMobile {
          from { 
            transform: translateY(-100%); 
            opacity: 0; 
          }
          to { 
            transform: translateY(0); 
            opacity: 1; 
          }
        }

        @keyframes pulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        .notification-container {
          position: fixed;
          z-index: 10000;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          direction: rtl;
        }

        /* Desktop positioning */
        .notification-container.desktop {
          bottom: 100px;
          right: 20px;
          animation: slideIn 0.5s ease-out;
        }

        /* Mobile positioning - top center for better visibility */
        .notification-container.mobile {
          top: 70px;
          left: 10px;
          right: 10px;
          animation: slideInMobile 0.5s ease-out;
        }

        .notification-card {
          background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
          border: 2px solid #9333ea;
          border-radius: 16px;
          box-shadow: 0 8px 25px rgba(147, 51, 234, 0.2);
          overflow: hidden;
          transition: all 0.3s ease;
        }

        .notification-card.desktop {
          min-width: 280px;
          max-width: 350px;
          animation: pulse 3s ease-in-out infinite;
        }

        .notification-card.mobile {
          width: 100%;
          max-height: ${o?"60px":"80vh"};
          animation: ${o?"none":"pulse 3s ease-in-out infinite"};
        }

        .notification-header {
          background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
          color: white;
          padding: 12px 16px;
          display: flex;
          align-items: center;
          justify-content: space-between;
          cursor: ${c?"pointer":"default"};
          min-height: 60px;
        }

        .header-content {
          display: flex;
          align-items: center;
          gap: 8px;
          flex: 1;
        }

        .header-controls {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .control-button {
          background: rgba(255, 255, 255, 0.2);
          border: none;
          border-radius: 6px;
          color: white;
          cursor: pointer;
          padding: 8px;
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          min-width: 32px;
          min-height: 32px;
        }

        .control-button:hover {
          background: rgba(255, 255, 255, 0.3);
          transform: scale(1.1);
        }

        .control-button:active {
          transform: scale(0.95);
        }

        .bell-icon {
          animation: bellRing 2s ease-in-out infinite;
        }

        .notification-body {
          background: rgba(248, 250, 252, 0.8);
          transition: all 0.3s ease-out;
          overflow-y: auto;
        }

        .notification-body.desktop {
          padding: 16px;
          max-height: 300px;
        }

        .notification-body.mobile {
          padding: ${o?"0":"16px"};
          max-height: ${o?"0":"60vh"};
          opacity: ${o?"0":"1"};
        }

        .notification-body.minimized {
          padding: 0;
          max-height: 0;
          overflow: hidden;
          opacity: 0;
        }

        .conflict-item {
          background: white;
          border: 1px solid #d1d5db;
          border-radius: 12px;
          padding: 12px;
          margin-bottom: 12px;
          transition: all 0.2s ease;
          border-right: 4px solid #9333ea;
        }

        .conflict-item:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(147, 51, 234, 0.1);
        }

        .conflict-item:last-child {
          margin-bottom: 0;
        }

        .client-name {
          font-weight: 600;
          color: #1f2937;
          margin-bottom: 4px;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .date-info {
          font-size: 0.85rem;
          color: #6b7280;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .conflicts-summary {
          font-size: 0.8rem;
          color: #7c3aed;
          font-weight: 500;
        }

        .action-button {
          background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
          color: white;
          border: none;
          border-radius: 8px;
          padding: 14px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-top: 12px;
          box-shadow: 0 4px 12px rgba(147, 51, 234, 0.3);
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          min-height: 48px;
        }

        .action-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(147, 51, 234, 0.4);
        }

        .action-button:active {
          transform: translateY(0);
        }

        .instructions {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
          border: 1px solid #f59e0b;
          border-radius: 8px;
          padding: 12px;
          margin-top: 12px;
          font-size: 0.8rem;
          color: #92400e;
          line-height: 1.4;
        }

        /* Mobile backdrop */
        .mobile-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.1);
          z-index: 9999;
          opacity: ${o?"0":"1"};
          visibility: ${o?"hidden":"visible"};
          transition: all 0.3s ease;
        }

        /* Override for small screens */
        @media (max-width: 480px) {
          .notification-container.mobile {
            top: 60px;
            left: 5px;
            right: 5px;
          }
          
          .notification-header {
            padding: 10px 12px;
          }
          
          .control-button {
            padding: 6px;
            min-width: 28px;
            min-height: 28px;
          }
        }
      `}),c&&!o&&v.jsx("div",{className:"mobile-backdrop",onClick:T}),v.jsx("div",{className:`notification-container ${c?"mobile":"desktop"}`,children:v.jsxs("div",{className:`notification-card ${c?"mobile":"desktop"}`,children:[v.jsxs("div",{className:"notification-header",onClick:c?T:void 0,children:[v.jsxs("div",{className:"header-content",children:[v.jsx(uf,{size:20,className:"bell-icon"}),v.jsxs("div",{children:[v.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:["🔔 יש לך ",t.length," הזמנ",t.length===1?"ה":"ות"]}),v.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9},children:[t.length===1?"שדורשת":"שדורשות"," עדכון זמינות"]})]})]}),v.jsxs("div",{className:"header-controls",children:[c&&v.jsx("button",{className:"control-button",onClick:A=>{A.stopPropagation(),T()},title:o?"הרחב":"מזער",children:v.jsx(BM,{size:16})}),v.jsx("button",{className:"control-button",onClick:A=>{A.stopPropagation(),_()},title:"סגור התראה ל-15 דקות",children:v.jsx(uu,{size:16})})]})]}),v.jsxs("div",{className:`notification-body ${c?"mobile":"desktop"} ${o?"minimized":""}`,children:[t.map((A,D)=>v.jsxs("div",{className:"conflict-item",title:"פרטי ההזמנה הבעייתית",children:[v.jsxs("div",{className:"client-name",children:[v.jsx(gM,{size:14,style:{color:"#9333ea"}}),A.clientName]}),v.jsxs("div",{className:"date-info",children:[v.jsx(ru,{size:12}),new Date(A.pickupDate).toLocaleDateString("he-IL")," - ",new Date(A.returnDate).toLocaleDateString("he-IL")]}),v.jsxs("div",{className:"conflicts-summary",children:[A.conflicts.length," פריט",A.conflicts.length===1?"":"ים"," עם בעיות זמינות"]})]},A.id)),v.jsxs("div",{className:"instructions",children:["💡 ",v.jsx("strong",{children:"איך לפתור:"}),' עבור להשאלות פתוחות → מצא ימים עם בעיות זמינות (מסומנים בסגול) → לחץ על יום → לחץ "ערוך הזמנה" → התאם כמויות']}),v.jsxs("button",{className:"action-button",onClick:x,children:[v.jsx(ru,{size:16}),"עבור להשאלות פתוחות"]})]})]})})]})},cW=()=>{const{user:n}=So(),[e,t]=ue.useState([]),[r,i]=ue.useState(!1),[a,o]=ue.useState(null),[s,c]=ue.useState({title:"",message:"",type:"info",isActive:!0}),[f,d]=ue.useState(!1),p=n&&(n.role==="MainAdmin"||n.role==="GmachAdmin");if(ue.useEffect(()=>{if(!p)return;const A=ul(tn(_t,"alerts"),K8("createdAt","desc")),D=P1(A,U=>{const H=U.docs.map(X=>({id:X.id,...X.data()}));t(H)});return()=>D()},[p]),!p)return v.jsx("div",{style:{padding:"2rem",textAlign:"center",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',direction:"rtl"},children:v.jsx("h2",{children:"אין הרשאה לצפייה בדף זה"})});const g=()=>{c({title:"",message:"",type:"info",isActive:!0}),o(null),i(!1)},m=async A=>{if(A.preventDefault(),!!s.message.trim()){d(!0);try{a?await Bi(Yn(_t,"alerts",a.id),{...s,updatedAt:_r(),updatedBy:n.uid}):await pd(tn(_t,"alerts"),{...s,createdAt:_r(),createdBy:n.uid,createdByName:n.displayName||n.email||n.username}),g()}catch(D){console.error("Error saving alert:",D),alert("שגיאה בשמירת ההתראה")}finally{d(!1)}}},x=A=>{c({title:A.title||"",message:A.message||"",type:A.type||"info",isActive:A.isActive}),o(A),i(!0)},_=async A=>{try{await Bi(Yn(_t,"alerts",A.id),{isActive:!A.isActive,updatedAt:_r(),updatedBy:n.uid})}catch(D){console.error("Error toggling alert:",D),A("שגיאה בעדכון ההתראה")}},T=async A=>{if(window.confirm("האם אתה בטוח שברצונך למחוק את ההתראה?"))try{await Uh(Yn(_t,"alerts",A))}catch(D){console.error("Error deleting alert:",D),alert("שגיאה במחיקת ההתראה")}};return v.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif'},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[v.jsx("h1",{style:{margin:0,color:"#1f2937"},children:"ניהול התראות"}),v.jsxs("button",{onClick:()=>i(!0),style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"16px",fontWeight:"500"},children:[v.jsx(OS,{size:20}),"התראה חדשה"]})]}),r&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:v.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"500px",direction:"rtl"},children:[v.jsx("h3",{style:{marginTop:0},children:a?"עריכת התראה":"התראה חדשה"}),v.jsxs("form",{onSubmit:m,children:[v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"כותרת (אופציונלי)"}),v.jsx("input",{type:"text",value:s.title,onChange:A=>c({...s,title:A.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"כותרת ההתראה"})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"הודעה *"}),v.jsx("textarea",{value:s.message,onChange:A=>c({...s,message:A.target.value}),required:!0,rows:4,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",resize:"vertical",boxSizing:"border-box"},placeholder:"תוכן ההתראה"})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"סוג התראה"}),v.jsxs("select",{value:s.type,onChange:A=>c({...s,type:A.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},children:[v.jsx("option",{value:"info",children:"מידע"}),v.jsx("option",{value:"warning",children:"אזהרה"}),v.jsx("option",{value:"success",children:"הצלחה"})]})]}),v.jsx("div",{style:{marginBottom:"2rem"},children:v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("input",{type:"checkbox",checked:s.isActive,onChange:A=>c({...s,isActive:A.target.checked})}),"התראה פעילה"]})}),v.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[v.jsxs("button",{type:"button",onClick:g,disabled:f,style:{backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx(uu,{size:16}),"ביטול"]}),v.jsxs("button",{type:"submit",disabled:f||!s.message.trim(),style:{backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:f||!s.message.trim()?.6:1},children:[v.jsx(qm,{size:16}),f?"שומר...":"שמור"]})]})]})]})}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?v.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280",backgroundColor:"#f9fafb",borderRadius:"8px"},children:"אין התראות במערכת"}):e.map(A=>v.jsx("div",{style:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[v.jsxs("div",{style:{flex:1},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[A.title&&v.jsx("h3",{style:{margin:0,fontSize:"18px"},children:A.title}),v.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:A.type==="warning"?"#fef3c7":A.type==="success"?"#d1fae5":"#dbeafe",color:A.type==="warning"?"#92400e":A.type==="success"?"#065f46":"#1e40af"},children:A.type==="warning"?"אזהרה":A.type==="success"?"הצלחה":"מידע"}),v.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:A.isActive?"#d1fae5":"#f3f4f6",color:A.isActive?"#065f46":"#6b7280"},children:A.isActive?"פעילה":"לא פעילה"})]}),v.jsx("p",{style:{margin:"0 0 12px 0",lineHeight:"1.5"},children:A.message}),v.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["נוצר על ידי: ",A.createdByName," •",A.createdAt&&` ${A.createdAt.toDate().toLocaleDateString("he-IL")}`]})]}),v.jsxs("div",{style:{display:"flex",gap:"8px"},children:[v.jsx("button",{onClick:()=>_(A),style:{backgroundColor:A.isActive?"#f59e0b":"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},title:A.isActive?"השבת":"הפעל",children:A.isActive?v.jsx(CM,{size:16}):v.jsx(Vm,{size:16})}),v.jsx("button",{onClick:()=>x(A),style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:v.jsx(y5,{size:16})}),v.jsx("button",{onClick:()=>T(A.id),style:{backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:v.jsx(x5,{size:16})})]})]})},A.id))})]})},uW=()=>{const n=ue.useRef(!1),e=ue.useRef(null),t=ue.useRef(null),r=su();ue.useEffect(()=>{switch(document.body.classList.remove("home-page","about-page","catalog-page","login-page","register-page","donations-page","guidelines-page","new-loan-page","calendar-page","orders-page","history-page","manage-page"),r.pathname){case"/":document.body.classList.add("home-page");break;case"/about":document.body.classList.add("about-page");break;case"/catalog":document.body.classList.add("catalog-page");break;case"/login":document.body.classList.add("login-page");break;case"/register":document.body.classList.add("register-page");break;case"/donations":document.body.classList.add("donations-page");break;case"/borrowing-guidelines":document.body.classList.add("guidelines-page");break;case"/new-loan":document.body.classList.add("new-loan-page");break;case"/calendar":document.body.classList.add("calendar-page");break;case"/my-orders":case"/requests":document.body.classList.add("orders-page");break;case"/history":document.body.classList.add("history-page");break;case"/manage-product":case"/manage-users":document.body.classList.add("manage-page");break;default:document.body.classList.add("other-page");break}return console.log("🎨 דף נוכחי:",r.pathname,"- מחלקת CSS:",document.body.className),()=>{document.body.classList.remove("home-page","about-page","catalog-page","login-page","register-page","donations-page","guidelines-page","new-loan-page","calendar-page","orders-page","history-page","manage-page","other-page")}},[r.pathname]),ue.useEffect(()=>(console.log("🚀 App: Setting up automatic email service..."),i(),()=>{e.current&&(clearInterval(e.current),console.log("🛑 App: Stopped automatic email service"))}),[]);const i=()=>{const a=()=>{const c=new Date,f=c.toDateString();if(t.current!==f&&(n.current=!1,t.current=f,console.log("🔄 App: Reset daily auto-check tracking for",f)),n.current)return console.log("⏭️ App: Auto-check already completed today"),!1;const d=c.getHours();return d<8||d>20?(console.log(`⏰ App: Outside business hours (${d}:00), skipping auto-check`),!1):!0},o=async()=>{if(a())try{console.log("🤖 App: Performing automatic reminder check...");const c=await oE();c.totalSent>0?(console.log(`✅ App: ${c.totalSent} reminder emails sent automatically`),typeof window<"u"&&window.Notification&&(Notification.permission==="default"?Notification.requestPermission():Notification.permission==="granted"&&new Notification("מערכת התזכורות",{body:`${c.totalSent} תזכורות נשלחו אוטומטית`,icon:"/favicon.ico",tag:"email-reminder"}))):console.log("📭 App: No reminder emails to send today"),n.current=!0}catch(c){console.error("❌ App: Error in automatic email check:",c)}},s=setTimeout(()=>{console.log("🎯 App: Starting initial automatic email check..."),o()},6e4);return e.current=setInterval(()=>{console.log("🔄 App: Periodic automatic email check..."),o()},3*60*60*1e3),()=>{s&&clearTimeout(s)}};return v.jsxs(TS,{children:[v.jsx(tj,{}),v.jsxs(cT,{children:[v.jsx(la,{path:"/alerts",element:v.jsx(cW,{})}),v.jsx(la,{path:"/",element:v.jsx(yj,{})}),v.jsx(la,{path:"/about",element:v.jsx(xj,{})}),v.jsx(la,{path:"/login",element:v.jsx(bj,{})}),v.jsx(la,{path:"/register",element:v.jsx(wj,{})}),v.jsx(la,{path:"/catalog",element:v.jsx(mq,{})}),v.jsx(la,{path:"/donations",element:v.jsx(oW,{})}),v.jsx(la,{path:"/borrowing-guidelines",element:v.jsx(sW,{})}),v.jsx(la,{path:"/request",element:v.jsx(mU,{})}),v.jsx(la,{path:"/my-orders",element:v.jsx(xU,{})}),v.jsx(la,{path:"/requests",element:v.jsx(vU,{})}),v.jsx(la,{path:"/new-loan",element:v.jsx(gU,{})}),v.jsx(la,{path:"/calendar",element:v.jsx(XU,{})}),v.jsx(la,{path:"/manage-product",element:v.jsx(dq,{})}),v.jsx(la,{path:"/manage-users",element:v.jsx(hq,{})}),v.jsx(la,{path:"/history",element:v.jsx(aW,{})})]}),v.jsx(lW,{})]})};yI.createRoot(document.getElementById("root")).render(v.jsx(Ln.StrictMode,{children:v.jsx(TS,{children:v.jsx(kT,{children:v.jsx(uW,{})})})}));export{ur as _,fW as c,oA as g};
