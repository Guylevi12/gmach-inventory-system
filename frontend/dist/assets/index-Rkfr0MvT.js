(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var EH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var J2={exports:{}},A0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function tI(){if(Ew)return A0;Ew=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return A0.Fragment=e,A0.jsx=t,A0.jsxs=t,A0}var Cw;function nI(){return Cw||(Cw=1,J2.exports=tI()),J2.exports}var y=nI(),ev={exports:{}},an={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw;function rI(){if(Iw)return an;Iw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function g(Q){return Q===null||typeof Q!="object"?null:(Q=p&&Q[p]||Q["@@iterator"],typeof Q=="function"?Q:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function I(Q,oe,W){this.props=Q,this.context=oe,this.refs=_,this.updater=W||m}I.prototype.isReactComponent={},I.prototype.setState=function(Q,oe){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,oe,"setState")},I.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function C(){}C.prototype=I.prototype;function D(Q,oe,W){this.props=Q,this.context=oe,this.refs=_,this.updater=W||m}var B=D.prototype=new C;B.constructor=D,b(B,I.prototype),B.isPureReactComponent=!0;var q=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function P(Q,oe,W,K,J,re){return W=re.ref,{$$typeof:n,type:Q,key:oe,ref:W!==void 0?W:null,props:re}}function S(Q,oe){return P(Q.type,oe,void 0,void 0,void 0,Q.props)}function R(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===n}function M(Q){var oe={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(W){return oe[W]})}var T=/\/+/g;function N(Q,oe){return typeof Q=="object"&&Q!==null&&Q.key!=null?M(""+Q.key):oe.toString(36)}function L(){}function F(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(L,L):(Q.status="pending",Q.then(function(oe){Q.status==="pending"&&(Q.status="fulfilled",Q.value=oe)},function(oe){Q.status==="pending"&&(Q.status="rejected",Q.reason=oe)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function X(Q,oe,W,K,J){var re=typeof Q;(re==="undefined"||re==="boolean")&&(Q=null);var he=!1;if(Q===null)he=!0;else switch(re){case"bigint":case"string":case"number":he=!0;break;case"object":switch(Q.$$typeof){case n:case e:he=!0;break;case d:return he=Q._init,X(he(Q._payload),oe,W,K,J)}}if(he)return J=J(Q),he=K===""?"."+N(Q,0):K,q(J)?(W="",he!=null&&(W=he.replace(T,"$&/")+"/"),X(J,oe,W,"",function(Ce){return Ce})):J!=null&&(R(J)&&(J=S(J,W+(J.key==null||Q&&Q.key===J.key?"":(""+J.key).replace(T,"$&/")+"/")+he)),oe.push(J)),1;he=0;var we=K===""?".":K+":";if(q(Q))for(var xe=0;xe<Q.length;xe++)K=Q[xe],re=we+N(K,xe),he+=X(K,oe,W,re,J);else if(xe=g(Q),typeof xe=="function")for(Q=xe.call(Q),xe=0;!(K=Q.next()).done;)K=K.value,re=we+N(K,xe++),he+=X(K,oe,W,re,J);else if(re==="object"){if(typeof Q.then=="function")return X(F(Q),oe,W,K,J);throw oe=String(Q),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return he}function V(Q,oe,W){if(Q==null)return Q;var K=[],J=0;return X(Q,K,"","",function(re){return oe.call(W,re,J++)}),K}function z(Q){if(Q._status===-1){var oe=Q._result;oe=oe(),oe.then(function(W){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=W)},function(W){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=W)}),Q._status===-1&&(Q._status=0,Q._result=oe)}if(Q._status===1)return Q._result.default;throw Q._result}var ne=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function se(){}return an.Children={map:V,forEach:function(Q,oe,W){V(Q,function(){oe.apply(this,arguments)},W)},count:function(Q){var oe=0;return V(Q,function(){oe++}),oe},toArray:function(Q){return V(Q,function(oe){return oe})||[]},only:function(Q){if(!R(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},an.Component=I,an.Fragment=t,an.Profiler=i,an.PureComponent=D,an.StrictMode=r,an.Suspense=c,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,an.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return Y.H.useMemoCache(Q)}},an.cache=function(Q){return function(){return Q.apply(null,arguments)}},an.cloneElement=function(Q,oe,W){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var K=b({},Q.props),J=Q.key,re=void 0;if(oe!=null)for(he in oe.ref!==void 0&&(re=void 0),oe.key!==void 0&&(J=""+oe.key),oe)!H.call(oe,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&oe.ref===void 0||(K[he]=oe[he]);var he=arguments.length-2;if(he===1)K.children=W;else if(1<he){for(var we=Array(he),xe=0;xe<he;xe++)we[xe]=arguments[xe+2];K.children=we}return P(Q.type,J,void 0,void 0,re,K)},an.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:a,_context:Q},Q},an.createElement=function(Q,oe,W){var K,J={},re=null;if(oe!=null)for(K in oe.key!==void 0&&(re=""+oe.key),oe)H.call(oe,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(J[K]=oe[K]);var he=arguments.length-2;if(he===1)J.children=W;else if(1<he){for(var we=Array(he),xe=0;xe<he;xe++)we[xe]=arguments[xe+2];J.children=we}if(Q&&Q.defaultProps)for(K in he=Q.defaultProps,he)J[K]===void 0&&(J[K]=he[K]);return P(Q,re,void 0,void 0,null,J)},an.createRef=function(){return{current:null}},an.forwardRef=function(Q){return{$$typeof:s,render:Q}},an.isValidElement=R,an.lazy=function(Q){return{$$typeof:d,_payload:{_status:-1,_result:Q},_init:z}},an.memo=function(Q,oe){return{$$typeof:f,type:Q,compare:oe===void 0?null:oe}},an.startTransition=function(Q){var oe=Y.T,W={};Y.T=W;try{var K=Q(),J=Y.S;J!==null&&J(W,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(se,ne)}catch(re){ne(re)}finally{Y.T=oe}},an.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},an.use=function(Q){return Y.H.use(Q)},an.useActionState=function(Q,oe,W){return Y.H.useActionState(Q,oe,W)},an.useCallback=function(Q,oe){return Y.H.useCallback(Q,oe)},an.useContext=function(Q){return Y.H.useContext(Q)},an.useDebugValue=function(){},an.useDeferredValue=function(Q,oe){return Y.H.useDeferredValue(Q,oe)},an.useEffect=function(Q,oe,W){var K=Y.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(Q,oe)},an.useId=function(){return Y.H.useId()},an.useImperativeHandle=function(Q,oe,W){return Y.H.useImperativeHandle(Q,oe,W)},an.useInsertionEffect=function(Q,oe){return Y.H.useInsertionEffect(Q,oe)},an.useLayoutEffect=function(Q,oe){return Y.H.useLayoutEffect(Q,oe)},an.useMemo=function(Q,oe){return Y.H.useMemo(Q,oe)},an.useOptimistic=function(Q,oe){return Y.H.useOptimistic(Q,oe)},an.useReducer=function(Q,oe,W){return Y.H.useReducer(Q,oe,W)},an.useRef=function(Q){return Y.H.useRef(Q)},an.useState=function(Q){return Y.H.useState(Q)},an.useSyncExternalStore=function(Q,oe,W){return Y.H.useSyncExternalStore(Q,oe,W)},an.useTransition=function(){return Y.H.useTransition()},an.version="19.1.0",an}var Tw;function rm(){return Tw||(Tw=1,ev.exports=rI()),ev.exports}var de=rm();const Pn=eA(de);var tv={exports:{}},S0={},nv={exports:{}},rv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function iI(){return Rw||(Rw=1,function(n){function e(V,z){var ne=V.length;V.push(z);e:for(;0<ne;){var se=ne-1>>>1,Q=V[se];if(0<i(Q,z))V[se]=z,V[ne]=Q,ne=se;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var z=V[0],ne=V.pop();if(ne!==z){V[0]=ne;e:for(var se=0,Q=V.length,oe=Q>>>1;se<oe;){var W=2*(se+1)-1,K=V[W],J=W+1,re=V[J];if(0>i(K,ne))J<Q&&0>i(re,K)?(V[se]=re,V[J]=ne,se=J):(V[se]=K,V[W]=ne,se=W);else if(J<Q&&0>i(re,ne))V[se]=re,V[J]=ne,se=J;else break e}}return z}function i(V,z){var ne=V.sortIndex-z.sortIndex;return ne!==0?ne:V.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var c=[],f=[],d=1,p=null,g=3,m=!1,b=!1,_=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function q(V){for(var z=t(f);z!==null;){if(z.callback===null)r(f);else if(z.startTime<=V)r(f),z.sortIndex=z.expirationTime,e(c,z);else break;z=t(f)}}function Y(V){if(_=!1,q(V),!b)if(t(c)!==null)b=!0,H||(H=!0,N());else{var z=t(f);z!==null&&X(Y,z.startTime-V)}}var H=!1,P=-1,S=5,R=-1;function M(){return I?!0:!(n.unstable_now()-R<S)}function T(){if(I=!1,H){var V=n.unstable_now();R=V;var z=!0;try{e:{b=!1,_&&(_=!1,D(P),P=-1),m=!0;var ne=g;try{t:{for(q(V),p=t(c);p!==null&&!(p.expirationTime>V&&M());){var se=p.callback;if(typeof se=="function"){p.callback=null,g=p.priorityLevel;var Q=se(p.expirationTime<=V);if(V=n.unstable_now(),typeof Q=="function"){p.callback=Q,q(V),z=!0;break t}p===t(c)&&r(c),q(V)}else r(c);p=t(c)}if(p!==null)z=!0;else{var oe=t(f);oe!==null&&X(Y,oe.startTime-V),z=!1}}break e}finally{p=null,g=ne,m=!1}z=void 0}}finally{z?N():H=!1}}}var N;if(typeof B=="function")N=function(){B(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=T,N=function(){F.postMessage(null)}}else N=function(){C(T,0)};function X(V,z){P=C(function(){V(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(V){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var ne=g;g=z;try{return V()}finally{g=ne}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(V,z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ne=g;g=V;try{return z()}finally{g=ne}},n.unstable_scheduleCallback=function(V,z,ne){var se=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?se+ne:se):ne=se,V){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ne+Q,V={id:d++,callback:z,priorityLevel:V,startTime:ne,expirationTime:Q,sortIndex:-1},ne>se?(V.sortIndex=ne,e(f,V),t(c)===null&&V===t(f)&&(_?(D(P),P=-1):_=!0,X(Y,ne-se))):(V.sortIndex=Q,e(c,V),b||m||(b=!0,H||(H=!0,N()))),V},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(V){var z=g;return function(){var ne=g;g=z;try{return V.apply(this,arguments)}finally{g=ne}}}}(rv)),rv}var Nw;function aI(){return Nw||(Nw=1,nv.exports=iI()),nv.exports}var iv={exports:{}},Ca={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function oI(){if(Dw)return Ca;Dw=1;var n=rm();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ca.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ca.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},Ca.flushSync=function(c){var f=o.T,d=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=d,r.d.f()}},Ca.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Ca.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ca.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ca.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=s(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Ca.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ca.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=s(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Ca.requestFormReset=function(c){r.d.r(c)},Ca.unstable_batchedUpdates=function(c,f){return c(f)},Ca.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},Ca.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ca.version="19.1.0",Ca}var Ow;function sI(){if(Ow)return iv.exports;Ow=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),iv.exports=oI(),iv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function lI(){if(kw)return S0;kw=1;var n=aI(),e=rm(),t=sI();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function s(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,v=u;;){var A=h.return;if(A===null)break;var O=A.alternate;if(O===null){if(v=A.return,v!==null){h=v;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===h)return s(A),l;if(O===v)return s(A),u;O=O.sibling}throw Error(r(188))}if(h.return!==v.return)h=A,v=O;else{for(var Z=!1,ue=A.child;ue;){if(ue===h){Z=!0,h=A,v=O;break}if(ue===v){Z=!0,v=A,h=O;break}ue=ue.sibling}if(!Z){for(ue=O.child;ue;){if(ue===h){Z=!0,h=O,v=A;break}if(ue===v){Z=!0,v=O,h=A;break}ue=ue.sibling}if(!Z)throw Error(r(189))}}if(h.alternate!==v)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function f(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=f(l),u!==null)return u;l=l.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function N(l){return l===null||typeof l!="object"?null:(l=T&&l[T]||l["@@iterator"],typeof l=="function"?l:null)}var L=Symbol.for("react.client.reference");function F(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===L?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case I:return"Profiler";case _:return"StrictMode";case Y:return"Suspense";case H:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case m:return"Portal";case B:return(l.displayName||"Context")+".Provider";case D:return(l._context.displayName||"Context")+".Consumer";case q:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return u=l.displayName||null,u!==null?u:F(l.type)||"Memo";case S:u=l._payload,l=l._init;try{return F(l(u))}catch{}}return null}var X=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},se=[],Q=-1;function oe(l){return{current:l}}function W(l){0>Q||(l.current=se[Q],se[Q]=null,Q--)}function K(l,u){Q++,se[Q]=l.current,l.current=u}var J=oe(null),re=oe(null),he=oe(null),we=oe(null);function xe(l,u){switch(K(he,u),K(re,l),K(J,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?Jb(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=Jb(u),l=ew(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}W(J),K(J,l)}function Ce(){W(J),W(re),W(he)}function We(l){l.memoizedState!==null&&K(we,l);var u=J.current,h=ew(u,l.type);u!==h&&(K(re,l),K(J,h))}function qe(l){re.current===l&&(W(J),W(re)),we.current===l&&(W(we),y0._currentValue=ne)}var it=Object.prototype.hasOwnProperty,lt=n.unstable_scheduleCallback,vt=n.unstable_cancelCallback,Pe=n.unstable_shouldYield,ve=n.unstable_requestPaint,dt=n.unstable_now,ut=n.unstable_getCurrentPriorityLevel,Ne=n.unstable_ImmediatePriority,Ke=n.unstable_UserBlockingPriority,Ge=n.unstable_NormalPriority,st=n.unstable_LowPriority,ft=n.unstable_IdlePriority,et=n.log,St=n.unstable_setDisableYieldValue,yt=null,_t=null;function Rt(l){if(typeof et=="function"&&St(l),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(yt,l)}catch{}}var xt=Math.clz32?Math.clz32:yn,Et=Math.log,ct=Math.LN2;function yn(l){return l>>>=0,l===0?32:31-(Et(l)/ct|0)|0}var Vt=256,Kn=4194304;function Kt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Sn(l,u,h){var v=l.pendingLanes;if(v===0)return 0;var A=0,O=l.suspendedLanes,Z=l.pingedLanes;l=l.warmLanes;var ue=v&134217727;return ue!==0?(v=ue&~O,v!==0?A=Kt(v):(Z&=ue,Z!==0?A=Kt(Z):h||(h=ue&~l,h!==0&&(A=Kt(h))))):(ue=v&~O,ue!==0?A=Kt(ue):Z!==0?A=Kt(Z):h||(h=v&~l,h!==0&&(A=Kt(h)))),A===0?0:u!==0&&u!==A&&(u&O)===0&&(O=A&-A,h=u&-u,O>=h||O===32&&(h&4194048)!==0)?u:A}function mi(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function on(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pa(){var l=Vt;return Vt<<=1,(Vt&4194048)===0&&(Vt=256),l}function In(){var l=Kn;return Kn<<=1,(Kn&62914560)===0&&(Kn=4194304),l}function jr(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function ur(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function xn(l,u,h,v,A,O){var Z=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var ue=l.entanglements,ye=l.expirationTimes,je=l.hiddenUpdates;for(h=Z&~h;0<h;){var Ye=31-xt(h),tt=1<<Ye;ue[Ye]=0,ye[Ye]=-1;var Fe=je[Ye];if(Fe!==null)for(je[Ye]=null,Ye=0;Ye<Fe.length;Ye++){var Ue=Fe[Ye];Ue!==null&&(Ue.lane&=-536870913)}h&=~tt}v!==0&&Nt(l,v,0),O!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=O&~(Z&~u))}function Nt(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var v=31-xt(u);l.entangledLanes|=u,l.entanglements[v]=l.entanglements[v]|1073741824|h&4194090}function nn(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var v=31-xt(h),A=1<<v;A&u|l[v]&u&&(l[v]|=u),h&=~A}}function Ei(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function jn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function vr(){var l=z.p;return l!==0?l:(l=window.event,l===void 0?32:xw(l.type))}function Ua(l,u){var h=z.p;try{return z.p=l,u()}finally{z.p=h}}var bt=Math.random().toString(36).slice(2),Gn="__reactFiber$"+bt,$n="__reactProps$"+bt,yr="__reactContainer$"+bt,Er="__reactEvents$"+bt,Dr="__reactListeners$"+bt,Gr="__reactHandles$"+bt,Is="__reactResources$"+bt,Ji="__reactMarker$"+bt;function vi(l){delete l[Gn],delete l[$n],delete l[Er],delete l[Dr],delete l[Gr]}function ti(l){var u=l[Gn];if(u)return u;for(var h=l.parentNode;h;){if(u=h[yr]||h[Gn]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=iw(l);l!==null;){if(h=l[Gn])return h;l=iw(l)}return u}l=h,h=l.parentNode}return null}function $r(l){if(l=l[Gn]||l[yr]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function ni(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function fr(l){var u=l[Is];return u||(u=l[Is]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Bn(l){l[Ji]=!0}var Co=new Set,Io={};function Bi(l,u){ga(l,u),ga(l+"Capture",u)}function ga(l,u){for(Io[l]=u,l=0;l<u.length;l++)Co.add(u[l])}var Ts=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dc={},Rs={};function lu(l){return it.call(Rs,l)?!0:it.call(dc,l)?!1:Ts.test(l)?Rs[l]=!0:(dc[l]=!0,!1)}function za(l,u,h){if(lu(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function Va(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function ri(l,u,h,v){if(v===null)l.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+v)}}var To,cu;function Ja(l){if(To===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);To=u&&u[1]||"",cu=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+To+l+cu}var gl=!1;function Ro(l,u){if(!l||gl)return"";gl=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Ue){var Fe=Ue}Reflect.construct(l,[],tt)}else{try{tt.call()}catch(Ue){Fe=Ue}l.call(tt.prototype)}}else{try{throw Error()}catch(Ue){Fe=Ue}(tt=l())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Ue){if(Ue&&Fe&&typeof Ue.stack=="string")return[Ue.stack,Fe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=v.DetermineComponentFrameRoot(),Z=O[0],ue=O[1];if(Z&&ue){var ye=Z.split(`
`),je=ue.split(`
`);for(A=v=0;v<ye.length&&!ye[v].includes("DetermineComponentFrameRoot");)v++;for(;A<je.length&&!je[A].includes("DetermineComponentFrameRoot");)A++;if(v===ye.length||A===je.length)for(v=ye.length-1,A=je.length-1;1<=v&&0<=A&&ye[v]!==je[A];)A--;for(;1<=v&&0<=A;v--,A--)if(ye[v]!==je[A]){if(v!==1||A!==1)do if(v--,A--,0>A||ye[v]!==je[A]){var Ye=`
`+ye[v].replace(" at new "," at ");return l.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",l.displayName)),Ye}while(1<=v&&0<=A);break}}}finally{gl=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?Ja(h):""}function hc(l){switch(l.tag){case 26:case 27:case 5:return Ja(l.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 15:return Ro(l.type,!1);case 11:return Ro(l.type.render,!1);case 1:return Ro(l.type,!0);case 31:return Ja("Activity");default:return""}}function dr(l){try{var u="";do u+=hc(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function yi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ml(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function uu(l){var u=ml(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),v=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var A=h.get,O=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return A.call(this)},set:function(Z){v=""+Z,O.call(this,Z)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return v},setValue:function(Z){v=""+Z},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Qo(l){l._valueTracker||(l._valueTracker=uu(l))}function pc(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),v="";return l&&(v=ml(l)?l.checked?"true":"false":l.value),l=v,l!==h?(u.setValue(l),!0):!1}function Ci(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var vl=/[\n"\\]/g;function En(l){return l.replace(vl,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ii(l,u,h,v,A,O,Z,ue){l.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?l.type=Z:l.removeAttribute("type"),u!=null?Z==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+yi(u)):l.value!==""+yi(u)&&(l.value=""+yi(u)):Z!=="submit"&&Z!=="reset"||l.removeAttribute("value"),u!=null?Jo(l,Z,yi(u)):h!=null?Jo(l,Z,yi(h)):v!=null&&l.removeAttribute("value"),A==null&&O!=null&&(l.defaultChecked=!!O),A!=null&&(l.checked=A&&typeof A!="function"&&typeof A!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?l.name=""+yi(ue):l.removeAttribute("name")}function Zo(l,u,h,v,A,O,Z,ue){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),u!=null||h!=null){if(!(O!=="submit"&&O!=="reset"||u!=null))return;h=h!=null?""+yi(h):"",u=u!=null?""+yi(u):h,ue||u===l.value||(l.value=u),l.defaultValue=u}v=v??A,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=ue?l.checked:!!v,l.defaultChecked=!!v,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(l.name=Z)}function Jo(l,u,h){u==="number"&&Ci(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function eo(l,u,h,v){if(l=l.options,u){u={};for(var A=0;A<h.length;A++)u["$"+h[A]]=!0;for(h=0;h<l.length;h++)A=u.hasOwnProperty("$"+l[h].value),l[h].selected!==A&&(l[h].selected=A),A&&v&&(l[h].defaultSelected=!0)}else{for(h=""+yi(h),u=null,A=0;A<l.length;A++){if(l[A].value===h){l[A].selected=!0,v&&(l[A].defaultSelected=!0);return}u!==null||l[A].disabled||(u=l[A])}u!==null&&(u.selected=!0)}}function Fn(l,u,h){if(u!=null&&(u=""+yi(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+yi(h):""}function es(l,u,h,v){if(u==null){if(v!=null){if(h!=null)throw Error(r(92));if(X(v)){if(1<v.length)throw Error(r(93));v=v[0]}h=v}h==null&&(h=""),u=h}h=yi(u),l.defaultValue=h,v=l.textContent,v===h&&v!==""&&v!==null&&(l.value=v)}function ma(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var No=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fu(l,u,h){var v=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?v?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":v?l.setProperty(u,h):typeof h!="number"||h===0||No.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function gc(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var v in h)!h.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var A in u)v=u[A],u.hasOwnProperty(A)&&h[A]!==v&&fu(l,A,v)}else for(var O in u)u.hasOwnProperty(O)&&fu(l,O,u[O])}function mc(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Do=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(l){return yl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var to=null;function nr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ko=null,no=null;function Ft(l){var u=$r(l);if(u&&(l=u.stateNode)){var h=l[$n]||null;e:switch(l=u.stateNode,u.type){case"input":if(Ii(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+En(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var v=h[u];if(v!==l&&v.form===l.form){var A=v[$n]||null;if(!A)throw Error(r(90));Ii(v,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(u=0;u<h.length;u++)v=h[u],v.form===l.form&&pc(v)}break e;case"textarea":Fn(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&eo(l,!!h.multiple,u,!1)}}}var ro=!1;function du(l,u,h){if(ro)return l(u,h);ro=!0;try{var v=l(u);return v}finally{if(ro=!1,(ko!==null||no!==null)&&(pp(),ko&&(u=ko,l=no,no=ko=null,Ft(u),l)))for(u=0;u<l.length;u++)Ft(l[u])}}function Fi(l,u){var h=l.stateNode;if(h===null)return null;var v=h[$n]||null;if(v===null)return null;h=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=!1;if(va)try{var io={};Object.defineProperty(io,"passive",{get:function(){ea=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{ea=!1}var ya=null,ts=null,Po=null;function vc(){if(Po)return Po;var l,u=ts,h=u.length,v,A="value"in ya?ya.value:ya.textContent,O=A.length;for(l=0;l<h&&u[l]===A[l];l++);var Z=h-l;for(v=1;v<=Z&&u[h-v]===A[O-v];v++);return Po=A.slice(l,1<v?1-v:void 0)}function xa(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Ui(){return!0}function ao(){return!1}function Yr(l){function u(h,v,A,O,Z){this._reactName=h,this._targetInst=A,this.type=v,this.nativeEvent=O,this.target=Z,this.currentTarget=null;for(var ue in l)l.hasOwnProperty(ue)&&(h=l[ue],this[ue]=h?h(O):O[ue]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Ui:ao,this.isPropagationStopped=ao,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),u}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ns=Yr(dn),oo=d({},dn,{view:0,detail:0}),yc=Yr(oo),Ns,Ds,qa,zi=d({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==qa&&(qa&&l.type==="mousemove"?(Ns=l.screenX-qa.screenX,Ds=l.screenY-qa.screenY):Ds=Ns=0,qa=l),Ns)},movementY:function(l){return"movementY"in l?l.movementY:Ds}}),Xr=Yr(zi),hu=d({},zi,{dataTransfer:0}),rs=Yr(hu),Ti=d({},oo,{relatedTarget:0}),is=Yr(Ti),Lo=d({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),xl=Yr(Lo),Os=d({},dn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),bl=Yr(Os),xc=d({},dn,{data:0}),ks=Yr(xc),as={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ls(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=wl[l])?!!u[l]:!1}function os(){return Ls}var pu=d({},oo,{key:function(l){if(l.key){var u=as[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=xa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ps[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(l){return l.type==="keypress"?xa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?xa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Mo=Yr(pu),ss=d({},zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ms=Yr(ss),Vi=d({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),_l=Yr(Vi),k=d({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),te=Yr(k),me=d({},zi,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Yr(me),Te=d({},dn,{newState:0,oldState:0}),Ve=Yr(Te),at=[9,13,27,32],pt=va&&"CompositionEvent"in window,w=null;va&&"documentMode"in document&&(w=document.documentMode);var U=va&&"TextEvent"in window&&!w,$=va&&(!pt||w&&8<w&&11>=w),ce=" ",Ie=!1;function Me(l,u){switch(l){case"keyup":return at.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ot(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ut=!1;function hn(l,u){switch(l){case"compositionend":return ot(u);case"keypress":return u.which!==32?null:(Ie=!0,ce);case"textInput":return l=u.data,l===ce&&Ie?null:l;default:return null}}function Qt(l,u){if(Ut)return l==="compositionend"||!pt&&Me(l,u)?(l=vc(),Po=ts=ya=null,Ut=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return $&&u.locale!=="ko"?null:u.data;default:return null}}var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Un[l.type]:u==="textarea"}function so(l,u,h,v){ko?no?no.push(v):no=[v]:ko=v,u=bp(u,"onChange"),0<u.length&&(h=new ns("onChange","change",null,h,v),l.push({event:h,listeners:u}))}var Br=null,ba=null;function ls(l){Yb(l,0)}function Al(l){var u=ni(l);if(pc(u))return l}function gu(l,u){if(l==="change")return u}var bc=!1;if(va){var ii;if(va){var Sl="oninput"in document;if(!Sl){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),Sl=typeof wc.oninput=="function"}ii=Sl}else ii=!1;bc=ii&&(!document.documentMode||9<document.documentMode)}function _c(){Br&&(Br.detachEvent("onpropertychange",mu),ba=Br=null)}function mu(l){if(l.propertyName==="value"&&Al(ba)){var u=[];so(u,ba,l,nr(l)),du(ls,u)}}function wa(l,u,h){l==="focusin"?(_c(),Br=u,ba=h,Br.attachEvent("onpropertychange",mu)):l==="focusout"&&_c()}function Fh(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Al(ba)}function Af(l,u){if(l==="click")return Al(u)}function bd(l,u){if(l==="input"||l==="change")return Al(u)}function lo(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var xi=typeof Object.is=="function"?Object.is:lo;function El(l,u){if(xi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),v=Object.keys(u);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var A=h[v];if(!it.call(u,A)||!xi(l[A],u[A]))return!1}return!0}function Sf(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function js(l,u){var h=Sf(l);l=0;for(var v;h;){if(h.nodeType===3){if(v=l+h.textContent.length,l<=u&&v>=u)return{node:h,offset:u-l};l=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Sf(h)}}function Cl(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Cl(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function ta(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Ci(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=Ci(l.document)}return u}function Ri(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var Il=va&&"documentMode"in document&&11>=document.documentMode,_a=null,jo=null,cs=null,Bo=!1;function Or(l,u,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Bo||_a==null||_a!==Ci(v)||(v=_a,"selectionStart"in v&&Ri(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),cs&&El(cs,v)||(cs=v,v=bp(jo,"onSelect"),0<v.length&&(u=new ns("onSelect","select",null,u,h),l.push({event:u,listeners:v}),u.target=_a)))}function Fo(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var Kr={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},Aa={},Ac={};va&&(Ac=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function us(l){if(Aa[l])return Aa[l];if(!Kr[l])return l;var u=Kr[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in Ac)return Aa[l]=u[h];return l}var vu=us("animationend"),Tl=us("animationiteration"),Rl=us("animationstart"),Nl=us("transitionrun"),Sc=us("transitionstart"),yu=us("transitioncancel"),Dl=us("transitionend"),Bs=new Map,Ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ec.push("scrollEnd");function kr(l,u){Bs.set(l,u),Bi(u,[l])}var Ha=new WeakMap;function ln(l,u){if(typeof l=="object"&&l!==null){var h=Ha.get(l);return h!==void 0?h:(u={value:l,source:u,stack:dr(u)},Ha.set(l,u),u)}return{value:l,source:u,stack:dr(u)}}var cn=[],hr=0,Fr=0;function co(){for(var l=hr,u=Fr=hr=0;u<l;){var h=cn[u];cn[u++]=null;var v=cn[u];cn[u++]=null;var A=cn[u];cn[u++]=null;var O=cn[u];if(cn[u++]=null,v!==null&&A!==null){var Z=v.pending;Z===null?A.next=A:(A.next=Z.next,Z.next=A),v.pending=A}O!==0&&wd(h,A,O)}}function Ol(l,u,h,v){cn[hr++]=l,cn[hr++]=u,cn[hr++]=h,cn[hr++]=v,Fr|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function kl(l,u,h,v){return Ol(l,u,h,v),Cc(l)}function Fs(l,u){return Ol(l,null,null,u),Cc(l)}function wd(l,u,h){l.lanes|=h;var v=l.alternate;v!==null&&(v.lanes|=h);for(var A=!1,O=l.return;O!==null;)O.childLanes|=h,v=O.alternate,v!==null&&(v.childLanes|=h),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(A=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,A&&u!==null&&(A=31-xt(h),l=O.hiddenUpdates,v=l[A],v===null?l[A]=[u]:v.push(u),u.lane=h|536870912),O):null}function Cc(l){if(50<u0)throw u0=0,A2=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var bi={};function uo(l,u,h,v){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(l,u,h,v){return new uo(l,u,h,v)}function xu(l){return l=l.prototype,!(!l||!l.isReactComponent)}function fs(l,u){var h=l.alternate;return h===null?(h=qi(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function Ef(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Ic(l,u,h,v,A,O){var Z=0;if(v=l,typeof l=="function")xu(l)&&(Z=1);else if(typeof l=="string")Z=VC(l,h,J.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=qi(31,h,u,A),l.elementType=R,l.lanes=O,l;case b:return Us(h.children,A,O,u);case _:Z=8,A|=24;break;case I:return l=qi(12,h,u,A|2),l.elementType=I,l.lanes=O,l;case Y:return l=qi(13,h,u,A),l.elementType=Y,l.lanes=O,l;case H:return l=qi(19,h,u,A),l.elementType=H,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case C:case B:Z=10;break e;case D:Z=9;break e;case q:Z=11;break e;case P:Z=14;break e;case S:Z=16,v=null;break e}Z=29,h=Error(r(130,l===null?"null":typeof l,"")),v=null}return u=qi(Z,h,u,A),u.elementType=l,u.type=v,u.lanes=O,u}function Us(l,u,h,v){return l=qi(7,l,v,u),l.lanes=h,l}function _d(l,u,h){return l=qi(6,l,null,u),l.lanes=h,l}function Cf(l,u,h){return u=qi(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Pl=[],zs=0,bu=null,Ad=0,fo=[],Wa=0,Tc=null,Vs=1,qs="";function Rc(l,u){Pl[zs++]=Ad,Pl[zs++]=bu,bu=l,Ad=u}function B1(l,u,h){fo[Wa++]=Vs,fo[Wa++]=qs,fo[Wa++]=Tc,Tc=l;var v=Vs;l=qs;var A=32-xt(v)-1;v&=~(1<<A),h+=1;var O=32-xt(u)+A;if(30<O){var Z=A-A%5;O=(v&(1<<Z)-1).toString(32),v>>=Z,A-=Z,Vs=1<<32-xt(u)+A|h<<A|v,qs=O+l}else Vs=1<<O|h<<A|v,qs=l}function If(l){l.return!==null&&(Rc(l,1),B1(l,1,0))}function Tf(l){for(;l===bu;)bu=Pl[--zs],Pl[zs]=null,Ad=Pl[--zs],Pl[zs]=null;for(;l===Tc;)Tc=fo[--Wa],fo[Wa]=null,qs=fo[--Wa],fo[Wa]=null,Vs=fo[--Wa],fo[Wa]=null}var ai=null,Pr=null,Ln=!1,Ll=null,ds=!1,Uh=Error(r(519));function Nc(l){var u=Error(r(418,""));throw wu(ln(u,l)),Uh}function F1(l){var u=l.stateNode,h=l.type,v=l.memoizedProps;switch(u[Gn]=l,u[$n]=v,h){case"dialog":wn("cancel",u),wn("close",u);break;case"iframe":case"object":case"embed":wn("load",u);break;case"video":case"audio":for(h=0;h<d0.length;h++)wn(d0[h],u);break;case"source":wn("error",u);break;case"img":case"image":case"link":wn("error",u),wn("load",u);break;case"details":wn("toggle",u);break;case"input":wn("invalid",u),Zo(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Qo(u);break;case"select":wn("invalid",u);break;case"textarea":wn("invalid",u),es(u,v.value,v.defaultValue,v.children),Qo(u)}h=v.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||v.suppressHydrationWarning===!0||Zb(u.textContent,h)?(v.popover!=null&&(wn("beforetoggle",u),wn("toggle",u)),v.onScroll!=null&&wn("scroll",u),v.onScrollEnd!=null&&wn("scrollend",u),v.onClick!=null&&(u.onclick=wp),u=!0):u=!1,u||Nc(l)}function Hs(l){for(ai=l.return;ai;)switch(ai.tag){case 5:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:ai=ai.return}}function na(l){if(l!==ai)return!1;if(!Ln)return Hs(l),Ln=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||F2(l.type,l.memoizedProps)),h=!h),h&&Pr&&Nc(l),Hs(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){Pr=Zs(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}Pr=null}}else u===27?(u=Pr,Bu(l.type)?(l=q2,q2=null,Pr=l):Pr=u):Pr=ai?Zs(l.stateNode.nextSibling):null;return!0}function Ga(){Pr=ai=null,Ln=!1}function U1(){var l=Ll;return l!==null&&(go===null?go=l:go.push.apply(go,l),Ll=null),l}function wu(l){Ll===null?Ll=[l]:Ll.push(l)}var hs=oe(null),wi=null,Ws=null;function Ml(l,u,h){K(hs,u._currentValue),u._currentValue=h}function ps(l){l._currentValue=hs.current,W(hs)}function Sd(l,u,h){for(;l!==null;){var v=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),l===h)break;l=l.return}}function Ed(l,u,h,v){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var O=A.dependencies;if(O!==null){var Z=A.child;O=O.firstContext;e:for(;O!==null;){var ue=O;O=A;for(var ye=0;ye<u.length;ye++)if(ue.context===u[ye]){O.lanes|=h,ue=O.alternate,ue!==null&&(ue.lanes|=h),Sd(O.return,h,l),v||(Z=null);break e}O=ue.next}}else if(A.tag===18){if(Z=A.return,Z===null)throw Error(r(341));Z.lanes|=h,O=Z.alternate,O!==null&&(O.lanes|=h),Sd(Z,h,l),Z=null}else Z=A.child;if(Z!==null)Z.return=A;else for(Z=A;Z!==null;){if(Z===l){Z=null;break}if(A=Z.sibling,A!==null){A.return=Z.return,Z=A;break}Z=Z.return}A=Z}}function _u(l,u,h,v){l=null;for(var A=u,O=!1;A!==null;){if(!O){if((A.flags&524288)!==0)O=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var Z=A.alternate;if(Z===null)throw Error(r(387));if(Z=Z.memoizedProps,Z!==null){var ue=A.type;xi(A.pendingProps.value,Z.value)||(l!==null?l.push(ue):l=[ue])}}else if(A===we.current){if(Z=A.alternate,Z===null)throw Error(r(387));Z.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(y0):l=[y0])}A=A.return}l!==null&&Ed(u,l,h,v),u.flags|=262144}function Cd(l){for(l=l.firstContext;l!==null;){if(!xi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function gs(l){wi=l,Ws=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function oi(l){return Id(wi,l)}function jl(l,u){return wi===null&&gs(l),Id(l,u)}function Id(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Ws===null){if(l===null)throw Error(r(308));Ws=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Ws=Ws.next=u;return h}var Ym=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,v){l.push(v)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},z1=n.unstable_scheduleCallback,Xm=n.unstable_NormalPriority,si={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zh(){return{controller:new Ym,data:new Map,refCount:0}}function Rf(l){l.refCount--,l.refCount===0&&z1(Xm,function(){l.controller.abort()})}var Nf=null,Vh=0,Dc=0,Gs=null;function Km(l,u){if(Nf===null){var h=Nf=[];Vh=0,Dc=N2(),Gs={status:"pending",value:void 0,then:function(v){h.push(v)}}}return Vh++,u.then(V1,V1),u}function V1(){if(--Vh===0&&Nf!==null){Gs!==null&&(Gs.status="fulfilled");var l=Nf;Nf=null,Dc=0,Gs=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function q1(l,u){var h=[],v={status:"pending",value:null,reason:null,then:function(A){h.push(A)}};return l.then(function(){v.status="fulfilled",v.value=u;for(var A=0;A<h.length;A++)(0,h[A])(u)},function(A){for(v.status="rejected",v.reason=A,A=0;A<h.length;A++)(0,h[A])(void 0)}),v}var x=V.S;V.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Km(l,u),x!==null&&x(l,u)};var E=oe(null);function j(){var l=E.current;return l!==null?l:Ar.pooledCache}function G(l,u){u===null?K(E,E.current):K(E,u.pool)}function ee(){var l=j();return l===null?null:{parent:si._currentValue,pool:l}}var ie=Error(r(460)),ae=Error(r(474)),le=Error(r(542)),fe={then:function(){}};function ge(l){return l=l.status,l==="fulfilled"||l==="rejected"}function _e(){}function Le(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(_e,_e),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Ze(l),l;default:if(typeof u.status=="string")u.then(_e,_e);else{if(l=Ar,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(v){if(u.status==="pending"){var A=u;A.status="fulfilled",A.value=v}},function(v){if(u.status==="pending"){var A=u;A.status="rejected",A.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Ze(l),l}throw Oe=u,ie}}var Oe=null;function Re(){if(Oe===null)throw Error(r(459));var l=Oe;return Oe=null,l}function Ze(l){if(l===ie||l===le)throw Error(r(483))}var ze=!1;function Ae(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ee(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function $e(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Je(l,u,h){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(ir&2)!==0){var A=v.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),v.pending=u,u=Cc(l),wd(l,null,h),u}return Ol(l,v,u,h),Cc(l)}function Xe(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var v=u.lanes;v&=l.pendingLanes,h|=v,u.lanes=h,nn(l,h)}}function wt(l,u){var h=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var A=null,O=null;if(h=h.firstBaseUpdate,h!==null){do{var Z={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};O===null?A=O=Z:O=O.next=Z,h=h.next}while(h!==null);O===null?A=O=u:O=O.next=u}else A=O=u;h={baseState:v.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:v.shared,callbacks:v.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var ht=!1;function kt(){if(ht){var l=Gs;if(l!==null)throw l}}function gt(l,u,h,v){ht=!1;var A=l.updateQueue;ze=!1;var O=A.firstBaseUpdate,Z=A.lastBaseUpdate,ue=A.shared.pending;if(ue!==null){A.shared.pending=null;var ye=ue,je=ye.next;ye.next=null,Z===null?O=je:Z.next=je,Z=ye;var Ye=l.alternate;Ye!==null&&(Ye=Ye.updateQueue,ue=Ye.lastBaseUpdate,ue!==Z&&(ue===null?Ye.firstBaseUpdate=je:ue.next=je,Ye.lastBaseUpdate=ye))}if(O!==null){var tt=A.baseState;Z=0,Ye=je=ye=null,ue=O;do{var Fe=ue.lane&-536870913,Ue=Fe!==ue.lane;if(Ue?(Nn&Fe)===Fe:(v&Fe)===Fe){Fe!==0&&Fe===Dc&&(ht=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Xt=l,zt=ue;Fe=u;var gr=h;switch(zt.tag){case 1:if(Xt=zt.payload,typeof Xt=="function"){tt=Xt.call(gr,tt,Fe);break e}tt=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=zt.payload,Fe=typeof Xt=="function"?Xt.call(gr,tt,Fe):Xt,Fe==null)break e;tt=d({},tt,Fe);break e;case 2:ze=!0}}Fe=ue.callback,Fe!==null&&(l.flags|=64,Ue&&(l.flags|=8192),Ue=A.callbacks,Ue===null?A.callbacks=[Fe]:Ue.push(Fe))}else Ue={lane:Fe,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Ye===null?(je=Ye=Ue,ye=tt):Ye=Ye.next=Ue,Z|=Fe;if(ue=ue.next,ue===null){if(ue=A.shared.pending,ue===null)break;Ue=ue,ue=Ue.next,Ue.next=null,A.lastBaseUpdate=Ue,A.shared.pending=null}}while(!0);Ye===null&&(ye=tt),A.baseState=ye,A.firstBaseUpdate=je,A.lastBaseUpdate=Ye,O===null&&(A.shared.lanes=0),Pu|=Z,l.lanes=Z,l.memoizedState=tt}}function Tn(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function zn(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)Tn(h[l],u)}var sn=oe(null),rn=oe(0);function Zn(l,u){l=zc,K(rn,l),K(sn,u),zc=l|u.baseLanes}function Vn(){K(rn,zc),K(sn,sn.current)}function Zt(){zc=rn.current,W(sn),W(rn)}var rr=0,Lt=null,Ht=null,Cn=null,Rn=!1,_i=!1,li=!1,Ur=0,zr=0,Qr=null,ho=0;function qn(){throw Error(r(321))}function Zr(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!xi(l[h],u[h]))return!1;return!0}function Uo(l,u,h,v,A,O){return rr=O,Lt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,V.H=l===null||l.memoizedState===null?Ox:kx,li=!1,O=h(v,A),li=!1,_i&&(O=Oc(u,h,v,A)),Bl(l),O}function Bl(l){V.H=tp;var u=Ht!==null&&Ht.next!==null;if(rr=0,Cn=Ht=Lt=null,Rn=!1,zr=0,Qr=null,u)throw Error(r(300));l===null||Hi||(l=l.dependencies,l!==null&&Cd(l)&&(Hi=!0))}function Oc(l,u,h,v){Lt=l;var A=0;do{if(_i&&(Qr=null),zr=0,_i=!1,25<=A)throw Error(r(301));if(A+=1,Cn=Ht=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}V.H=JE,O=u(h,v)}while(_i);return O}function Fl(){var l=V.H,u=l.useState()[0];return u=typeof u.then=="function"?Ul(u):u,l=l.useState()[0],(Ht!==null?Ht.memoizedState:null)!==l&&(Lt.flags|=1024),u}function _r(){var l=Ur!==0;return Ur=0,l}function Df(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function Td(l){if(Rn){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Rn=!1}rr=0,Cn=Ht=Lt=null,_i=!1,zr=Ur=0,Qr=null}function ra(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Lt.memoizedState=Cn=l:Cn=Cn.next=l,Cn}function Cr(){if(Ht===null){var l=Lt.alternate;l=l!==null?l.memoizedState:null}else l=Ht.next;var u=Cn===null?Lt.memoizedState:Cn.next;if(u!==null)Cn=u,Ht=l;else{if(l===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));Ht=l,l={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Cn===null?Lt.memoizedState=Cn=l:Cn=Cn.next=l}return Cn}function kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(l){var u=zr;return zr+=1,Qr===null&&(Qr=[]),l=Le(Qr,l,u),u=Lt,(Cn===null?u.memoizedState:Cn.next)===null&&(u=u.alternate,V.H=u===null||u.memoizedState===null?Ox:kx),l}function Sa(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ul(l);if(l.$$typeof===B)return oi(l)}throw Error(r(438,String(l)))}function zl(l){var u=null,h=Lt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var v=Lt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(A){return A.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=kc(),Lt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),v=0;v<l;v++)h[v]=M;return u.index++,h}function Ea(l,u){return typeof u=="function"?u(l):u}function Of(l){var u=Cr();return Au(u,Ht,l)}function Au(l,u,h){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=h;var A=l.baseQueue,O=v.pending;if(O!==null){if(A!==null){var Z=A.next;A.next=O.next,O.next=Z}u.baseQueue=A=O,v.pending=null}if(O=l.baseState,A===null)l.memoizedState=O;else{u=A.next;var ue=Z=null,ye=null,je=u,Ye=!1;do{var tt=je.lane&-536870913;if(tt!==je.lane?(Nn&tt)===tt:(rr&tt)===tt){var Fe=je.revertLane;if(Fe===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),tt===Dc&&(Ye=!0);else if((rr&Fe)===Fe){je=je.next,Fe===Dc&&(Ye=!0);continue}else tt={lane:0,revertLane:je.revertLane,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},ye===null?(ue=ye=tt,Z=O):ye=ye.next=tt,Lt.lanes|=Fe,Pu|=Fe;tt=je.action,li&&h(O,tt),O=je.hasEagerState?je.eagerState:h(O,tt)}else Fe={lane:tt,revertLane:je.revertLane,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},ye===null?(ue=ye=Fe,Z=O):ye=ye.next=Fe,Lt.lanes|=tt,Pu|=tt;je=je.next}while(je!==null&&je!==u);if(ye===null?Z=O:ye.next=ue,!xi(O,l.memoizedState)&&(Hi=!0,Ye&&(h=Gs,h!==null)))throw h;l.memoizedState=O,l.baseState=Z,l.baseQueue=ye,v.lastRenderedState=O}return A===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function Rd(l){var u=Cr(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var v=h.dispatch,A=h.pending,O=u.memoizedState;if(A!==null){h.pending=null;var Z=A=A.next;do O=l(O,Z.action),Z=Z.next;while(Z!==A);xi(O,u.memoizedState)||(Hi=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),h.lastRenderedState=O}return[O,v]}function kf(l,u,h){var v=Lt,A=Cr(),O=Ln;if(O){if(h===void 0)throw Error(r(407));h=h()}else h=u();var Z=!xi((Ht||A).memoizedState,h);Z&&(A.memoizedState=h,Hi=!0),A=A.queue;var ue=Su.bind(null,v,A,l);if(Iu(2048,8,ue,[l]),A.getSnapshot!==u||Z||Cn!==null&&Cn.memoizedState.tag&1){if(v.flags|=2048,Ys(9,jf(),Pf.bind(null,v,A,h,u),null),Ar===null)throw Error(r(349));O||(rr&124)!==0||Nd(v,u,h)}return h}function Nd(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=Lt.updateQueue,u===null?(u=kc(),Lt.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function Pf(l,u,h,v){u.value=h,u.getSnapshot=v,H1(u)&&W1(l)}function Su(l,u,h){return h(function(){H1(u)&&W1(l)})}function H1(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!xi(l,h)}catch{return!0}}function W1(l){var u=Fs(l,2);u!==null&&Go(u,l,2)}function Lf(l){var u=ra();if(typeof l=="function"){var h=l;if(l=h(),li){Rt(!0);try{h()}finally{Rt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:l},u}function $s(l,u,h,v){return l.baseState=h,Au(l,Ht,typeof v=="function"?v:Ea)}function Qm(l,u,h,v,A){if(ep(l))throw Error(r(485));if(l=u.action,l!==null){var O={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){O.listeners.push(Z)}};V.T!==null?h(!0):O.isTransition=!1,v(O),h=u.pending,h===null?(O.next=u.pending=O,G1(u,O)):(O.next=h.next,u.pending=h.next=O)}}function G1(l,u){var h=u.action,v=u.payload,A=l.state;if(u.isTransition){var O=V.T,Z={};V.T=Z;try{var ue=h(A,v),ye=V.S;ye!==null&&ye(Z,ue),$1(l,u,ue)}catch(je){Eu(l,u,je)}finally{V.T=O}}else try{O=h(A,v),$1(l,u,O)}catch(je){Eu(l,u,je)}}function $1(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(v){qh(l,u,v)},function(v){return Eu(l,u,v)}):qh(l,u,h)}function qh(l,u,h){u.status="fulfilled",u.value=h,Hh(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,G1(l,h)))}function Eu(l,u,h){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=h,Hh(u),u=u.next;while(u!==v)}l.action=null}function Hh(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Wh(l,u){return u}function Mf(l,u){if(Ln){var h=Ar.formState;if(h!==null){e:{var v=Lt;if(Ln){if(Pr){t:{for(var A=Pr,O=ds;A.nodeType!==8;){if(!O){A=null;break t}if(A=Zs(A.nextSibling),A===null){A=null;break t}}O=A.data,A=O==="F!"||O==="F"?A:null}if(A){Pr=Zs(A.nextSibling),v=A.data==="F!";break e}}Nc(v)}v=!1}v&&(u=h[0])}}return h=ra(),h.memoizedState=h.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wh,lastRenderedState:u},h.queue=v,h=Rx.bind(null,Lt,v),v.dispatch=h,v=Lf(!1),O=Zm.bind(null,Lt,!1,v.queue),v=ra(),A={state:u,dispatch:null,action:l,pending:null},v.queue=A,h=Qm.bind(null,Lt,A,O,h),A.dispatch=h,v.memoizedState=l,[u,h,!1]}function Dd(l){var u=Cr();return Cu(u,Ht,l)}function Cu(l,u,h){if(u=Au(l,u,Wh)[0],l=Of(Ea)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=Ul(u)}catch(Z){throw Z===ie?le:Z}else v=u;u=Cr();var A=u.queue,O=A.dispatch;return h!==u.memoizedState&&(Lt.flags|=2048,Ys(9,jf(),Y1.bind(null,A,h),null)),[v,O,l]}function Y1(l,u){l.action=u}function X1(l){var u=Cr(),h=Ht;if(h!==null)return Cu(u,h,l);Cr(),u=u.memoizedState,h=Cr();var v=h.queue.dispatch;return h.memoizedState=l,[u,v,!1]}function Ys(l,u,h,v){return l={tag:l,create:h,deps:v,inst:u,next:null},u=Lt.updateQueue,u===null&&(u=kc(),Lt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(v=h.next,h.next=l,l.next=v,u.lastEffect=l),l}function jf(){return{destroy:void 0,resource:void 0}}function Od(){return Cr().memoizedState}function zo(l,u,h,v){var A=ra();v=v===void 0?null:v,Lt.flags|=l,A.memoizedState=Ys(1|u,jf(),h,v)}function Iu(l,u,h,v){var A=Cr();v=v===void 0?null:v;var O=A.memoizedState.inst;Ht!==null&&v!==null&&Zr(v,Ht.memoizedState.deps)?A.memoizedState=Ys(u,O,h,v):(Lt.flags|=l,A.memoizedState=Ys(1|u,O,h,v))}function Gh(l,u){zo(8390656,8,l,u)}function K1(l,u){Iu(2048,8,l,u)}function $h(l,u){return Iu(4,2,l,u)}function Pc(l,u){return Iu(4,4,l,u)}function Q1(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Yh(l,u,h){h=h!=null?h.concat([l]):null,Iu(4,4,Q1.bind(null,u,l),h)}function Xh(){}function Kh(l,u){var h=Cr();u=u===void 0?null:u;var v=h.memoizedState;return u!==null&&Zr(u,v[1])?v[0]:(h.memoizedState=[l,u],l)}function Z1(l,u){var h=Cr();u=u===void 0?null:u;var v=h.memoizedState;if(u!==null&&Zr(u,v[1]))return v[0];if(v=l(),li){Rt(!0);try{l()}finally{Rt(!1)}}return h.memoizedState=[v,u],v}function Lc(l,u,h){return h===void 0||(rr&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=Eb(),Lt.lanes|=l,Pu|=l,h)}function kd(l,u,h,v){return xi(h,u)?h:sn.current!==null?(l=Lc(l,h,v),xi(l,u)||(Hi=!0),l):(rr&42)===0?(Hi=!0,l.memoizedState=h):(l=Eb(),Lt.lanes|=l,Pu|=l,u)}function Bf(l,u,h,v,A){var O=z.p;z.p=O!==0&&8>O?O:8;var Z=V.T,ue={};V.T=ue,Zm(l,!1,u,h);try{var ye=A(),je=V.S;if(je!==null&&je(ue,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ye=q1(ye,v);e0(l,u,Ye,Wo(l))}else e0(l,u,v,Wo(l))}catch(tt){e0(l,u,{then:function(){},status:"rejected",reason:tt},Wo())}finally{z.p=O,V.T=Z}}function Xs(){}function ms(l,u,h,v){if(l.tag!==5)throw Error(r(476));var A=Ks(l).queue;Bf(l,A,u,ne,h===null?Xs:function(){return Ff(l),h(v)})}function Ks(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:ne},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Ff(l){var u=Ks(l).next.queue;e0(l,u,{},Wo())}function Uf(){return oi(y0)}function Qh(){return Cr().memoizedState}function J1(){return Cr().memoizedState}function Zh(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Wo();l=$e(h);var v=Je(u,l,h);v!==null&&(Go(v,u,h),Xe(v,u,h)),u={cache:zh()},l.payload=u;return}u=u.return}}function Jh(l,u,h){var v=Wo();h={lane:v,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},ep(l)?Nx(u,h):(h=kl(l,u,h,v),h!==null&&(Go(h,l,v),Dx(h,u,v)))}function Rx(l,u,h){var v=Wo();e0(l,u,h,v)}function e0(l,u,h,v){var A={lane:v,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(ep(l))Nx(u,A);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer,O!==null))try{var Z=u.lastRenderedState,ue=O(Z,h);if(A.hasEagerState=!0,A.eagerState=ue,xi(ue,Z))return Ol(l,u,A,0),Ar===null&&co(),!1}catch{}finally{}if(h=kl(l,u,A,v),h!==null)return Go(h,l,v),Dx(h,u,v),!0}return!1}function Zm(l,u,h,v){if(v={lane:2,revertLane:N2(),action:v,hasEagerState:!1,eagerState:null,next:null},ep(l)){if(u)throw Error(r(479))}else u=kl(l,h,v,2),u!==null&&Go(u,l,2)}function ep(l){var u=l.alternate;return l===Lt||u!==null&&u===Lt}function Nx(l,u){_i=Rn=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function Dx(l,u,h){if((h&4194048)!==0){var v=u.lanes;v&=l.pendingLanes,h|=v,u.lanes=h,nn(l,h)}}var tp={readContext:oi,use:Sa,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn},Ox={readContext:oi,use:Sa,useCallback:function(l,u){return ra().memoizedState=[l,u===void 0?null:u],l},useContext:oi,useEffect:Gh,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,zo(4194308,4,Q1.bind(null,u,l),h)},useLayoutEffect:function(l,u){return zo(4194308,4,l,u)},useInsertionEffect:function(l,u){zo(4,2,l,u)},useMemo:function(l,u){var h=ra();u=u===void 0?null:u;var v=l();if(li){Rt(!0);try{l()}finally{Rt(!1)}}return h.memoizedState=[v,u],v},useReducer:function(l,u,h){var v=ra();if(h!==void 0){var A=h(u);if(li){Rt(!0);try{h(u)}finally{Rt(!1)}}}else A=u;return v.memoizedState=v.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},v.queue=l,l=l.dispatch=Jh.bind(null,Lt,l),[v.memoizedState,l]},useRef:function(l){var u=ra();return l={current:l},u.memoizedState=l},useState:function(l){l=Lf(l);var u=l.queue,h=Rx.bind(null,Lt,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:Xh,useDeferredValue:function(l,u){var h=ra();return Lc(h,l,u)},useTransition:function(){var l=Lf(!1);return l=Bf.bind(null,Lt,l.queue,!0,!1),ra().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var v=Lt,A=ra();if(Ln){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),Ar===null)throw Error(r(349));(Nn&124)!==0||Nd(v,u,h)}A.memoizedState=h;var O={value:h,getSnapshot:u};return A.queue=O,Gh(Su.bind(null,v,O,l),[l]),v.flags|=2048,Ys(9,jf(),Pf.bind(null,v,O,h,u),null),h},useId:function(){var l=ra(),u=Ar.identifierPrefix;if(Ln){var h=qs,v=Vs;h=(v&~(1<<32-xt(v)-1)).toString(32)+h,u="«"+u+"R"+h,h=Ur++,0<h&&(u+="H"+h.toString(32)),u+="»"}else h=ho++,u="«"+u+"r"+h.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:Uf,useFormState:Mf,useActionState:Mf,useOptimistic:function(l){var u=ra();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=Zm.bind(null,Lt,!0,h),h.dispatch=u,[l,u]},useMemoCache:zl,useCacheRefresh:function(){return ra().memoizedState=Zh.bind(null,Lt)}},kx={readContext:oi,use:Sa,useCallback:Kh,useContext:oi,useEffect:K1,useImperativeHandle:Yh,useInsertionEffect:$h,useLayoutEffect:Pc,useMemo:Z1,useReducer:Of,useRef:Od,useState:function(){return Of(Ea)},useDebugValue:Xh,useDeferredValue:function(l,u){var h=Cr();return kd(h,Ht.memoizedState,l,u)},useTransition:function(){var l=Of(Ea)[0],u=Cr().memoizedState;return[typeof l=="boolean"?l:Ul(l),u]},useSyncExternalStore:kf,useId:Qh,useHostTransitionStatus:Uf,useFormState:Dd,useActionState:Dd,useOptimistic:function(l,u){var h=Cr();return $s(h,Ht,l,u)},useMemoCache:zl,useCacheRefresh:J1},JE={readContext:oi,use:Sa,useCallback:Kh,useContext:oi,useEffect:K1,useImperativeHandle:Yh,useInsertionEffect:$h,useLayoutEffect:Pc,useMemo:Z1,useReducer:Rd,useRef:Od,useState:function(){return Rd(Ea)},useDebugValue:Xh,useDeferredValue:function(l,u){var h=Cr();return Ht===null?Lc(h,l,u):kd(h,Ht.memoizedState,l,u)},useTransition:function(){var l=Rd(Ea)[0],u=Cr().memoizedState;return[typeof l=="boolean"?l:Ul(l),u]},useSyncExternalStore:kf,useId:Qh,useHostTransitionStatus:Uf,useFormState:X1,useActionState:X1,useOptimistic:function(l,u){var h=Cr();return Ht!==null?$s(h,Ht,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:zl,useCacheRefresh:J1},Pd=null,t0=0;function np(l){var u=t0;return t0+=1,Pd===null&&(Pd=[]),Le(Pd,l,u)}function n0(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function rp(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Px(l){var u=l._init;return u(l._payload)}function Lx(l){function u(De,Se){if(l){var ke=De.deletions;ke===null?(De.deletions=[Se],De.flags|=16):ke.push(Se)}}function h(De,Se){if(!l)return null;for(;Se!==null;)u(De,Se),Se=Se.sibling;return null}function v(De){for(var Se=new Map;De!==null;)De.key!==null?Se.set(De.key,De):Se.set(De.index,De),De=De.sibling;return Se}function A(De,Se){return De=fs(De,Se),De.index=0,De.sibling=null,De}function O(De,Se,ke){return De.index=ke,l?(ke=De.alternate,ke!==null?(ke=ke.index,ke<Se?(De.flags|=67108866,Se):ke):(De.flags|=67108866,Se)):(De.flags|=1048576,Se)}function Z(De){return l&&De.alternate===null&&(De.flags|=67108866),De}function ue(De,Se,ke,Qe){return Se===null||Se.tag!==6?(Se=_d(ke,De.mode,Qe),Se.return=De,Se):(Se=A(Se,ke),Se.return=De,Se)}function ye(De,Se,ke,Qe){var It=ke.type;return It===b?Ye(De,Se,ke.props.children,Qe,ke.key):Se!==null&&(Se.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===S&&Px(It)===Se.type)?(Se=A(Se,ke.props),n0(Se,ke),Se.return=De,Se):(Se=Ic(ke.type,ke.key,ke.props,null,De.mode,Qe),n0(Se,ke),Se.return=De,Se)}function je(De,Se,ke,Qe){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==ke.containerInfo||Se.stateNode.implementation!==ke.implementation?(Se=Cf(ke,De.mode,Qe),Se.return=De,Se):(Se=A(Se,ke.children||[]),Se.return=De,Se)}function Ye(De,Se,ke,Qe,It){return Se===null||Se.tag!==7?(Se=Us(ke,De.mode,Qe,It),Se.return=De,Se):(Se=A(Se,ke),Se.return=De,Se)}function tt(De,Se,ke){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=_d(""+Se,De.mode,ke),Se.return=De,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case g:return ke=Ic(Se.type,Se.key,Se.props,null,De.mode,ke),n0(ke,Se),ke.return=De,ke;case m:return Se=Cf(Se,De.mode,ke),Se.return=De,Se;case S:var Qe=Se._init;return Se=Qe(Se._payload),tt(De,Se,ke)}if(X(Se)||N(Se))return Se=Us(Se,De.mode,ke,null),Se.return=De,Se;if(typeof Se.then=="function")return tt(De,np(Se),ke);if(Se.$$typeof===B)return tt(De,jl(De,Se),ke);rp(De,Se)}return null}function Fe(De,Se,ke,Qe){var It=Se!==null?Se.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return It!==null?null:ue(De,Se,""+ke,Qe);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case g:return ke.key===It?ye(De,Se,ke,Qe):null;case m:return ke.key===It?je(De,Se,ke,Qe):null;case S:return It=ke._init,ke=It(ke._payload),Fe(De,Se,ke,Qe)}if(X(ke)||N(ke))return It!==null?null:Ye(De,Se,ke,Qe,null);if(typeof ke.then=="function")return Fe(De,Se,np(ke),Qe);if(ke.$$typeof===B)return Fe(De,Se,jl(De,ke),Qe);rp(De,ke)}return null}function Ue(De,Se,ke,Qe,It){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return De=De.get(ke)||null,ue(Se,De,""+Qe,It);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:return De=De.get(Qe.key===null?ke:Qe.key)||null,ye(Se,De,Qe,It);case m:return De=De.get(Qe.key===null?ke:Qe.key)||null,je(Se,De,Qe,It);case S:var pn=Qe._init;return Qe=pn(Qe._payload),Ue(De,Se,ke,Qe,It)}if(X(Qe)||N(Qe))return De=De.get(ke)||null,Ye(Se,De,Qe,It,null);if(typeof Qe.then=="function")return Ue(De,Se,ke,np(Qe),It);if(Qe.$$typeof===B)return Ue(De,Se,ke,jl(Se,Qe),It);rp(Se,Qe)}return null}function Xt(De,Se,ke,Qe){for(var It=null,pn=null,Pt=Se,qt=Se=0,Gi=null;Pt!==null&&qt<ke.length;qt++){Pt.index>qt?(Gi=Pt,Pt=null):Gi=Pt.sibling;var Hn=Fe(De,Pt,ke[qt],Qe);if(Hn===null){Pt===null&&(Pt=Gi);break}l&&Pt&&Hn.alternate===null&&u(De,Pt),Se=O(Hn,Se,qt),pn===null?It=Hn:pn.sibling=Hn,pn=Hn,Pt=Gi}if(qt===ke.length)return h(De,Pt),Ln&&Rc(De,qt),It;if(Pt===null){for(;qt<ke.length;qt++)Pt=tt(De,ke[qt],Qe),Pt!==null&&(Se=O(Pt,Se,qt),pn===null?It=Pt:pn.sibling=Pt,pn=Pt);return Ln&&Rc(De,qt),It}for(Pt=v(Pt);qt<ke.length;qt++)Gi=Ue(Pt,De,qt,ke[qt],Qe),Gi!==null&&(l&&Gi.alternate!==null&&Pt.delete(Gi.key===null?qt:Gi.key),Se=O(Gi,Se,qt),pn===null?It=Gi:pn.sibling=Gi,pn=Gi);return l&&Pt.forEach(function(qu){return u(De,qu)}),Ln&&Rc(De,qt),It}function zt(De,Se,ke,Qe){if(ke==null)throw Error(r(151));for(var It=null,pn=null,Pt=Se,qt=Se=0,Gi=null,Hn=ke.next();Pt!==null&&!Hn.done;qt++,Hn=ke.next()){Pt.index>qt?(Gi=Pt,Pt=null):Gi=Pt.sibling;var qu=Fe(De,Pt,Hn.value,Qe);if(qu===null){Pt===null&&(Pt=Gi);break}l&&Pt&&qu.alternate===null&&u(De,Pt),Se=O(qu,Se,qt),pn===null?It=qu:pn.sibling=qu,pn=qu,Pt=Gi}if(Hn.done)return h(De,Pt),Ln&&Rc(De,qt),It;if(Pt===null){for(;!Hn.done;qt++,Hn=ke.next())Hn=tt(De,Hn.value,Qe),Hn!==null&&(Se=O(Hn,Se,qt),pn===null?It=Hn:pn.sibling=Hn,pn=Hn);return Ln&&Rc(De,qt),It}for(Pt=v(Pt);!Hn.done;qt++,Hn=ke.next())Hn=Ue(Pt,De,qt,Hn.value,Qe),Hn!==null&&(l&&Hn.alternate!==null&&Pt.delete(Hn.key===null?qt:Hn.key),Se=O(Hn,Se,qt),pn===null?It=Hn:pn.sibling=Hn,pn=Hn);return l&&Pt.forEach(function(eI){return u(De,eI)}),Ln&&Rc(De,qt),It}function gr(De,Se,ke,Qe){if(typeof ke=="object"&&ke!==null&&ke.type===b&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case g:e:{for(var It=ke.key;Se!==null;){if(Se.key===It){if(It=ke.type,It===b){if(Se.tag===7){h(De,Se.sibling),Qe=A(Se,ke.props.children),Qe.return=De,De=Qe;break e}}else if(Se.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===S&&Px(It)===Se.type){h(De,Se.sibling),Qe=A(Se,ke.props),n0(Qe,ke),Qe.return=De,De=Qe;break e}h(De,Se);break}else u(De,Se);Se=Se.sibling}ke.type===b?(Qe=Us(ke.props.children,De.mode,Qe,ke.key),Qe.return=De,De=Qe):(Qe=Ic(ke.type,ke.key,ke.props,null,De.mode,Qe),n0(Qe,ke),Qe.return=De,De=Qe)}return Z(De);case m:e:{for(It=ke.key;Se!==null;){if(Se.key===It)if(Se.tag===4&&Se.stateNode.containerInfo===ke.containerInfo&&Se.stateNode.implementation===ke.implementation){h(De,Se.sibling),Qe=A(Se,ke.children||[]),Qe.return=De,De=Qe;break e}else{h(De,Se);break}else u(De,Se);Se=Se.sibling}Qe=Cf(ke,De.mode,Qe),Qe.return=De,De=Qe}return Z(De);case S:return It=ke._init,ke=It(ke._payload),gr(De,Se,ke,Qe)}if(X(ke))return Xt(De,Se,ke,Qe);if(N(ke)){if(It=N(ke),typeof It!="function")throw Error(r(150));return ke=It.call(ke),zt(De,Se,ke,Qe)}if(typeof ke.then=="function")return gr(De,Se,np(ke),Qe);if(ke.$$typeof===B)return gr(De,Se,jl(De,ke),Qe);rp(De,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,Se!==null&&Se.tag===6?(h(De,Se.sibling),Qe=A(Se,ke),Qe.return=De,De=Qe):(h(De,Se),Qe=_d(ke,De.mode,Qe),Qe.return=De,De=Qe),Z(De)):h(De,Se)}return function(De,Se,ke,Qe){try{t0=0;var It=gr(De,Se,ke,Qe);return Pd=null,It}catch(Pt){if(Pt===ie||Pt===le)throw Pt;var pn=qi(29,Pt,null,De.mode);return pn.lanes=Qe,pn.return=De,pn}finally{}}}var Ld=Lx(!0),Mx=Lx(!1),vs=oe(null),Vl=null;function Tu(l){var u=l.alternate;K(Ni,Ni.current&1),K(vs,l),Vl===null&&(u===null||sn.current!==null||u.memoizedState!==null)&&(Vl=l)}function jx(l){if(l.tag===22){if(K(Ni,Ni.current),K(vs,l),Vl===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(Vl=l)}}else Ru()}function Ru(){K(Ni,Ni.current),K(vs,vs.current)}function Mc(l){W(vs),Vl===l&&(Vl=null),W(Ni)}var Ni=oe(0);function ip(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||V2(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Jm(l,u,h,v){u=l.memoizedState,h=h(v,u),h=h==null?u:d({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var e2={enqueueSetState:function(l,u,h){l=l._reactInternals;var v=Wo(),A=$e(v);A.payload=u,h!=null&&(A.callback=h),u=Je(l,A,v),u!==null&&(Go(u,l,v),Xe(u,l,v))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var v=Wo(),A=$e(v);A.tag=1,A.payload=u,h!=null&&(A.callback=h),u=Je(l,A,v),u!==null&&(Go(u,l,v),Xe(u,l,v))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Wo(),v=$e(h);v.tag=2,u!=null&&(v.callback=u),u=Je(l,v,h),u!==null&&(Go(u,l,h),Xe(u,l,h))}};function Bx(l,u,h,v,A,O,Z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,O,Z):u.prototype&&u.prototype.isPureReactComponent?!El(h,v)||!El(A,O):!0}function Fx(l,u,h,v){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,v),u.state!==l&&e2.enqueueReplaceState(u,u.state,null)}function zf(l,u){var h=u;if("ref"in u){h={};for(var v in u)v!=="ref"&&(h[v]=u[v])}if(l=l.defaultProps){h===u&&(h=d({},h));for(var A in l)h[A]===void 0&&(h[A]=l[A])}return h}var ap=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Ux(l){ap(l)}function zx(l){console.error(l)}function Vx(l){ap(l)}function op(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function qx(l,u,h){try{var v=l.onCaughtError;v(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function t2(l,u,h){return h=$e(h),h.tag=3,h.payload={element:null},h.callback=function(){op(l,u)},h}function Hx(l){return l=$e(l),l.tag=3,l}function Wx(l,u,h,v){var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var O=v.value;l.payload=function(){return A(O)},l.callback=function(){qx(u,h,v)}}var Z=h.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(l.callback=function(){qx(u,h,v),typeof A!="function"&&(Lu===null?Lu=new Set([this]):Lu.add(this));var ue=v.stack;this.componentDidCatch(v.value,{componentStack:ue!==null?ue:""})})}function eC(l,u,h,v,A){if(h.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=h.alternate,u!==null&&_u(u,h,A,!0),h=vs.current,h!==null){switch(h.tag){case 13:return Vl===null?E2():h.alternate===null&&Jr===0&&(Jr=3),h.flags&=-257,h.flags|=65536,h.lanes=A,v===fe?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([v]):u.add(v),I2(l,v,A)),!1;case 22:return h.flags|=65536,v===fe?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([v]):h.add(v)),I2(l,v,A)),!1}throw Error(r(435,h.tag))}return I2(l,v,A),E2(),!1}if(Ln)return u=vs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=A,v!==Uh&&(l=Error(r(422),{cause:v}),wu(ln(l,h)))):(v!==Uh&&(u=Error(r(423),{cause:v}),wu(ln(u,h))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,v=ln(v,h),A=t2(l.stateNode,v,A),wt(l,A),Jr!==4&&(Jr=2)),!1;var O=Error(r(520),{cause:v});if(O=ln(O,h),c0===null?c0=[O]:c0.push(O),Jr!==4&&(Jr=2),u===null)return!0;v=ln(v,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=A&-A,h.lanes|=l,l=t2(h.stateNode,v,l),wt(h,l),!1;case 1:if(u=h.type,O=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Lu===null||!Lu.has(O))))return h.flags|=65536,A&=-A,h.lanes|=A,A=Hx(A),Wx(A,l,h,v),wt(h,A),!1}h=h.return}while(h!==null);return!1}var Gx=Error(r(461)),Hi=!1;function ia(l,u,h,v){u.child=l===null?Mx(u,null,h,v):Ld(u,l.child,h,v)}function $x(l,u,h,v,A){h=h.render;var O=u.ref;if("ref"in v){var Z={};for(var ue in v)ue!=="ref"&&(Z[ue]=v[ue])}else Z=v;return gs(u),v=Uo(l,u,h,Z,O,A),ue=_r(),l!==null&&!Hi?(Df(l,u,A),jc(l,u,A)):(Ln&&ue&&If(u),u.flags|=1,ia(l,u,v,A),u.child)}function Yx(l,u,h,v,A){if(l===null){var O=h.type;return typeof O=="function"&&!xu(O)&&O.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=O,Xx(l,u,O,v,A)):(l=Ic(h.type,null,v,u,u.mode,A),l.ref=u.ref,l.return=u,u.child=l)}if(O=l.child,!c2(l,A)){var Z=O.memoizedProps;if(h=h.compare,h=h!==null?h:El,h(Z,v)&&l.ref===u.ref)return jc(l,u,A)}return u.flags|=1,l=fs(O,v),l.ref=u.ref,l.return=u,u.child=l}function Xx(l,u,h,v,A){if(l!==null){var O=l.memoizedProps;if(El(O,v)&&l.ref===u.ref)if(Hi=!1,u.pendingProps=v=O,c2(l,A))(l.flags&131072)!==0&&(Hi=!0);else return u.lanes=l.lanes,jc(l,u,A)}return n2(l,u,h,v,A)}function Kx(l,u,h){var v=u.pendingProps,A=v.children,O=l!==null?l.memoizedState:null;if(v.mode==="hidden"){if((u.flags&128)!==0){if(v=O!==null?O.baseLanes|h:h,l!==null){for(A=u.child=l.child,O=0;A!==null;)O=O|A.lanes|A.childLanes,A=A.sibling;u.childLanes=O&~v}else u.childLanes=0,u.child=null;return Qx(l,u,v,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&G(u,O!==null?O.cachePool:null),O!==null?Zn(u,O):Vn(),jx(u);else return u.lanes=u.childLanes=536870912,Qx(l,u,O!==null?O.baseLanes|h:h,h)}else O!==null?(G(u,O.cachePool),Zn(u,O),Ru(),u.memoizedState=null):(l!==null&&G(u,null),Vn(),Ru());return ia(l,u,A,h),u.child}function Qx(l,u,h,v){var A=j();return A=A===null?null:{parent:si._currentValue,pool:A},u.memoizedState={baseLanes:h,cachePool:A},l!==null&&G(u,null),Vn(),jx(u),l!==null&&_u(l,u,v,!0),null}function sp(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function n2(l,u,h,v,A){return gs(u),h=Uo(l,u,h,v,void 0,A),v=_r(),l!==null&&!Hi?(Df(l,u,A),jc(l,u,A)):(Ln&&v&&If(u),u.flags|=1,ia(l,u,h,A),u.child)}function Zx(l,u,h,v,A,O){return gs(u),u.updateQueue=null,h=Oc(u,v,h,A),Bl(l),v=_r(),l!==null&&!Hi?(Df(l,u,O),jc(l,u,O)):(Ln&&v&&If(u),u.flags|=1,ia(l,u,h,O),u.child)}function Jx(l,u,h,v,A){if(gs(u),u.stateNode===null){var O=bi,Z=h.contextType;typeof Z=="object"&&Z!==null&&(O=oi(Z)),O=new h(v,O),u.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=e2,u.stateNode=O,O._reactInternals=u,O=u.stateNode,O.props=v,O.state=u.memoizedState,O.refs={},Ae(u),Z=h.contextType,O.context=typeof Z=="object"&&Z!==null?oi(Z):bi,O.state=u.memoizedState,Z=h.getDerivedStateFromProps,typeof Z=="function"&&(Jm(u,h,Z,v),O.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(Z=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),Z!==O.state&&e2.enqueueReplaceState(O,O.state,null),gt(u,v,O,A),kt(),O.state=u.memoizedState),typeof O.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(l===null){O=u.stateNode;var ue=u.memoizedProps,ye=zf(h,ue);O.props=ye;var je=O.context,Ye=h.contextType;Z=bi,typeof Ye=="object"&&Ye!==null&&(Z=oi(Ye));var tt=h.getDerivedStateFromProps;Ye=typeof tt=="function"||typeof O.getSnapshotBeforeUpdate=="function",ue=u.pendingProps!==ue,Ye||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ue||je!==Z)&&Fx(u,O,v,Z),ze=!1;var Fe=u.memoizedState;O.state=Fe,gt(u,v,O,A),kt(),je=u.memoizedState,ue||Fe!==je||ze?(typeof tt=="function"&&(Jm(u,h,tt,v),je=u.memoizedState),(ye=ze||Bx(u,h,ye,v,Fe,je,Z))?(Ye||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=je),O.props=v,O.state=je,O.context=Z,v=ye):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{O=u.stateNode,Ee(l,u),Z=u.memoizedProps,Ye=zf(h,Z),O.props=Ye,tt=u.pendingProps,Fe=O.context,je=h.contextType,ye=bi,typeof je=="object"&&je!==null&&(ye=oi(je)),ue=h.getDerivedStateFromProps,(je=typeof ue=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Z!==tt||Fe!==ye)&&Fx(u,O,v,ye),ze=!1,Fe=u.memoizedState,O.state=Fe,gt(u,v,O,A),kt();var Ue=u.memoizedState;Z!==tt||Fe!==Ue||ze||l!==null&&l.dependencies!==null&&Cd(l.dependencies)?(typeof ue=="function"&&(Jm(u,h,ue,v),Ue=u.memoizedState),(Ye=ze||Bx(u,h,Ye,v,Fe,Ue,ye)||l!==null&&l.dependencies!==null&&Cd(l.dependencies))?(je||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(v,Ue,ye),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(v,Ue,ye)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||Z===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Z===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=Ue),O.props=v,O.state=Ue,O.context=ye,v=Ye):(typeof O.componentDidUpdate!="function"||Z===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Z===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=1024),v=!1)}return O=v,sp(l,u),v=(u.flags&128)!==0,O||v?(O=u.stateNode,h=v&&typeof h.getDerivedStateFromError!="function"?null:O.render(),u.flags|=1,l!==null&&v?(u.child=Ld(u,l.child,null,A),u.child=Ld(u,null,h,A)):ia(l,u,h,A),u.memoizedState=O.state,l=u.child):l=jc(l,u,A),l}function eb(l,u,h,v){return Ga(),u.flags|=256,ia(l,u,h,v),u.child}var r2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function i2(l){return{baseLanes:l,cachePool:ee()}}function a2(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=ys),l}function tb(l,u,h){var v=u.pendingProps,A=!1,O=(u.flags&128)!==0,Z;if((Z=O)||(Z=l!==null&&l.memoizedState===null?!1:(Ni.current&2)!==0),Z&&(A=!0,u.flags&=-129),Z=(u.flags&32)!==0,u.flags&=-33,l===null){if(Ln){if(A?Tu(u):Ru(),Ln){var ue=Pr,ye;if(ye=ue){e:{for(ye=ue,ue=ds;ye.nodeType!==8;){if(!ue){ue=null;break e}if(ye=Zs(ye.nextSibling),ye===null){ue=null;break e}}ue=ye}ue!==null?(u.memoizedState={dehydrated:ue,treeContext:Tc!==null?{id:Vs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},ye=qi(18,null,null,0),ye.stateNode=ue,ye.return=u,u.child=ye,ai=u,Pr=null,ye=!0):ye=!1}ye||Nc(u)}if(ue=u.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return V2(ue)?u.lanes=32:u.lanes=536870912,null;Mc(u)}return ue=v.children,v=v.fallback,A?(Ru(),A=u.mode,ue=lp({mode:"hidden",children:ue},A),v=Us(v,A,h,null),ue.return=u,v.return=u,ue.sibling=v,u.child=ue,A=u.child,A.memoizedState=i2(h),A.childLanes=a2(l,Z,h),u.memoizedState=r2,v):(Tu(u),o2(u,ue))}if(ye=l.memoizedState,ye!==null&&(ue=ye.dehydrated,ue!==null)){if(O)u.flags&256?(Tu(u),u.flags&=-257,u=s2(l,u,h)):u.memoizedState!==null?(Ru(),u.child=l.child,u.flags|=128,u=null):(Ru(),A=v.fallback,ue=u.mode,v=lp({mode:"visible",children:v.children},ue),A=Us(A,ue,h,null),A.flags|=2,v.return=u,A.return=u,v.sibling=A,u.child=v,Ld(u,l.child,null,h),v=u.child,v.memoizedState=i2(h),v.childLanes=a2(l,Z,h),u.memoizedState=r2,u=A);else if(Tu(u),V2(ue)){if(Z=ue.nextSibling&&ue.nextSibling.dataset,Z)var je=Z.dgst;Z=je,v=Error(r(419)),v.stack="",v.digest=Z,wu({value:v,source:null,stack:null}),u=s2(l,u,h)}else if(Hi||_u(l,u,h,!1),Z=(h&l.childLanes)!==0,Hi||Z){if(Z=Ar,Z!==null&&(v=h&-h,v=(v&42)!==0?1:Ei(v),v=(v&(Z.suspendedLanes|h))!==0?0:v,v!==0&&v!==ye.retryLane))throw ye.retryLane=v,Fs(l,v),Go(Z,l,v),Gx;ue.data==="$?"||E2(),u=s2(l,u,h)}else ue.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=ye.treeContext,Pr=Zs(ue.nextSibling),ai=u,Ln=!0,Ll=null,ds=!1,l!==null&&(fo[Wa++]=Vs,fo[Wa++]=qs,fo[Wa++]=Tc,Vs=l.id,qs=l.overflow,Tc=u),u=o2(u,v.children),u.flags|=4096);return u}return A?(Ru(),A=v.fallback,ue=u.mode,ye=l.child,je=ye.sibling,v=fs(ye,{mode:"hidden",children:v.children}),v.subtreeFlags=ye.subtreeFlags&65011712,je!==null?A=fs(je,A):(A=Us(A,ue,h,null),A.flags|=2),A.return=u,v.return=u,v.sibling=A,u.child=v,v=A,A=u.child,ue=l.child.memoizedState,ue===null?ue=i2(h):(ye=ue.cachePool,ye!==null?(je=si._currentValue,ye=ye.parent!==je?{parent:je,pool:je}:ye):ye=ee(),ue={baseLanes:ue.baseLanes|h,cachePool:ye}),A.memoizedState=ue,A.childLanes=a2(l,Z,h),u.memoizedState=r2,v):(Tu(u),h=l.child,l=h.sibling,h=fs(h,{mode:"visible",children:v.children}),h.return=u,h.sibling=null,l!==null&&(Z=u.deletions,Z===null?(u.deletions=[l],u.flags|=16):Z.push(l)),u.child=h,u.memoizedState=null,h)}function o2(l,u){return u=lp({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function lp(l,u){return l=qi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function s2(l,u,h){return Ld(u,l.child,null,h),l=o2(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function nb(l,u,h){l.lanes|=u;var v=l.alternate;v!==null&&(v.lanes|=u),Sd(l.return,u,h)}function l2(l,u,h,v,A){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:A}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=v,O.tail=h,O.tailMode=A)}function rb(l,u,h){var v=u.pendingProps,A=v.revealOrder,O=v.tail;if(ia(l,u,v.children,h),v=Ni.current,(v&2)!==0)v=v&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&nb(l,h,u);else if(l.tag===19)nb(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}switch(K(Ni,v),A){case"forwards":for(h=u.child,A=null;h!==null;)l=h.alternate,l!==null&&ip(l)===null&&(A=h),h=h.sibling;h=A,h===null?(A=u.child,u.child=null):(A=h.sibling,h.sibling=null),l2(u,!1,A,h,O);break;case"backwards":for(h=null,A=u.child,u.child=null;A!==null;){if(l=A.alternate,l!==null&&ip(l)===null){u.child=A;break}l=A.sibling,A.sibling=h,h=A,A=l}l2(u,!0,h,null,O);break;case"together":l2(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function jc(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),Pu|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(_u(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=fs(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=fs(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function c2(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Cd(l)))}function tC(l,u,h){switch(u.tag){case 3:xe(u,u.stateNode.containerInfo),Ml(u,si,l.memoizedState.cache),Ga();break;case 27:case 5:We(u);break;case 4:xe(u,u.stateNode.containerInfo);break;case 10:Ml(u,u.type,u.memoizedProps.value);break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(Tu(u),u.flags|=128,null):(h&u.child.childLanes)!==0?tb(l,u,h):(Tu(u),l=jc(l,u,h),l!==null?l.sibling:null);Tu(u);break;case 19:var A=(l.flags&128)!==0;if(v=(h&u.childLanes)!==0,v||(_u(l,u,h,!1),v=(h&u.childLanes)!==0),A){if(v)return rb(l,u,h);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),K(Ni,Ni.current),v)break;return null;case 22:case 23:return u.lanes=0,Kx(l,u,h);case 24:Ml(u,si,l.memoizedState.cache)}return jc(l,u,h)}function ib(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Hi=!0;else{if(!c2(l,h)&&(u.flags&128)===0)return Hi=!1,tC(l,u,h);Hi=(l.flags&131072)!==0}else Hi=!1,Ln&&(u.flags&1048576)!==0&&B1(u,Ad,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var v=u.elementType,A=v._init;if(v=A(v._payload),u.type=v,typeof v=="function")xu(v)?(l=zf(v,l),u.tag=1,u=Jx(null,u,v,l,h)):(u.tag=0,u=n2(null,u,v,l,h));else{if(v!=null){if(A=v.$$typeof,A===q){u.tag=11,u=$x(null,u,v,l,h);break e}else if(A===P){u.tag=14,u=Yx(null,u,v,l,h);break e}}throw u=F(v)||v,Error(r(306,u,""))}}return u;case 0:return n2(l,u,u.type,u.pendingProps,h);case 1:return v=u.type,A=zf(v,u.pendingProps),Jx(l,u,v,A,h);case 3:e:{if(xe(u,u.stateNode.containerInfo),l===null)throw Error(r(387));v=u.pendingProps;var O=u.memoizedState;A=O.element,Ee(l,u),gt(u,v,null,h);var Z=u.memoizedState;if(v=Z.cache,Ml(u,si,v),v!==O.cache&&Ed(u,[si],h,!0),kt(),v=Z.element,O.isDehydrated)if(O={element:v,isDehydrated:!1,cache:Z.cache},u.updateQueue.baseState=O,u.memoizedState=O,u.flags&256){u=eb(l,u,v,h);break e}else if(v!==A){A=ln(Error(r(424)),u),wu(A),u=eb(l,u,v,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Pr=Zs(l.firstChild),ai=u,Ln=!0,Ll=null,ds=!0,h=Mx(u,null,v,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Ga(),v===A){u=jc(l,u,h);break e}ia(l,u,v,h)}u=u.child}return u;case 26:return sp(l,u),l===null?(h=lw(u.type,null,u.pendingProps,null))?u.memoizedState=h:Ln||(h=u.type,l=u.pendingProps,v=_p(he.current).createElement(h),v[Gn]=u,v[$n]=l,oa(v,h,l),Bn(v),u.stateNode=v):u.memoizedState=lw(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return We(u),l===null&&Ln&&(v=u.stateNode=aw(u.type,u.pendingProps,he.current),ai=u,ds=!0,A=Pr,Bu(u.type)?(q2=A,Pr=Zs(v.firstChild)):Pr=A),ia(l,u,u.pendingProps.children,h),sp(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Ln&&((A=v=Pr)&&(v=RC(v,u.type,u.pendingProps,ds),v!==null?(u.stateNode=v,ai=u,Pr=Zs(v.firstChild),ds=!1,A=!0):A=!1),A||Nc(u)),We(u),A=u.type,O=u.pendingProps,Z=l!==null?l.memoizedProps:null,v=O.children,F2(A,O)?v=null:Z!==null&&F2(A,Z)&&(u.flags|=32),u.memoizedState!==null&&(A=Uo(l,u,Fl,null,null,h),y0._currentValue=A),sp(l,u),ia(l,u,v,h),u.child;case 6:return l===null&&Ln&&((l=h=Pr)&&(h=NC(h,u.pendingProps,ds),h!==null?(u.stateNode=h,ai=u,Pr=null,l=!0):l=!1),l||Nc(u)),null;case 13:return tb(l,u,h);case 4:return xe(u,u.stateNode.containerInfo),v=u.pendingProps,l===null?u.child=Ld(u,null,v,h):ia(l,u,v,h),u.child;case 11:return $x(l,u,u.type,u.pendingProps,h);case 7:return ia(l,u,u.pendingProps,h),u.child;case 8:return ia(l,u,u.pendingProps.children,h),u.child;case 12:return ia(l,u,u.pendingProps.children,h),u.child;case 10:return v=u.pendingProps,Ml(u,u.type,v.value),ia(l,u,v.children,h),u.child;case 9:return A=u.type._context,v=u.pendingProps.children,gs(u),A=oi(A),v=v(A),u.flags|=1,ia(l,u,v,h),u.child;case 14:return Yx(l,u,u.type,u.pendingProps,h);case 15:return Xx(l,u,u.type,u.pendingProps,h);case 19:return rb(l,u,h);case 31:return v=u.pendingProps,h=u.mode,v={mode:v.mode,children:v.children},l===null?(h=lp(v,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=fs(l.child,v),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return Kx(l,u,h);case 24:return gs(u),v=oi(si),l===null?(A=j(),A===null&&(A=Ar,O=zh(),A.pooledCache=O,O.refCount++,O!==null&&(A.pooledCacheLanes|=h),A=O),u.memoizedState={parent:v,cache:A},Ae(u),Ml(u,si,A)):((l.lanes&h)!==0&&(Ee(l,u),gt(u,null,null,h),kt()),A=l.memoizedState,O=u.memoizedState,A.parent!==v?(A={parent:v,cache:v},u.memoizedState=A,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=A),Ml(u,si,v)):(v=O.cache,Ml(u,si,v),v!==A.cache&&Ed(u,[si],h,!0))),ia(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Bc(l){l.flags|=4}function ab(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!hw(u)){if(u=vs.current,u!==null&&((Nn&4194048)===Nn?Vl!==null:(Nn&62914560)!==Nn&&(Nn&536870912)===0||u!==Vl))throw Oe=fe,ae;l.flags|=8192}}function cp(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?In():536870912,l.lanes|=u,Fd|=u)}function r0(l,u){if(!Ln)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Vr(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,v=0;if(u)for(var A=l.child;A!==null;)h|=A.lanes|A.childLanes,v|=A.subtreeFlags&65011712,v|=A.flags&65011712,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)h|=A.lanes|A.childLanes,v|=A.subtreeFlags,v|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=v,l.childLanes=h,u}function nC(l,u,h){var v=u.pendingProps;switch(Tf(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(u),null;case 1:return Vr(u),null;case 3:return h=u.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),ps(si),Ce(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(na(u)?Bc(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,U1())),Vr(u),null;case 26:return h=u.memoizedState,l===null?(Bc(u),h!==null?(Vr(u),ab(u,h)):(Vr(u),u.flags&=-16777217)):h?h!==l.memoizedState?(Bc(u),Vr(u),ab(u,h)):(Vr(u),u.flags&=-16777217):(l.memoizedProps!==v&&Bc(u),Vr(u),u.flags&=-16777217),null;case 27:qe(u),h=he.current;var A=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==v&&Bc(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}l=J.current,na(u)?F1(u):(l=aw(A,v,h),u.stateNode=l,Bc(u))}return Vr(u),null;case 5:if(qe(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==v&&Bc(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}if(l=J.current,na(u))F1(u);else{switch(A=_p(he.current),l){case 1:l=A.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=A.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=A.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof v.is=="string"?A.createElement("select",{is:v.is}):A.createElement("select"),v.multiple?l.multiple=!0:v.size&&(l.size=v.size);break;default:l=typeof v.is=="string"?A.createElement(h,{is:v.is}):A.createElement(h)}}l[Gn]=u,l[$n]=v;e:for(A=u.child;A!==null;){if(A.tag===5||A.tag===6)l.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===u)break e;for(;A.sibling===null;){if(A.return===null||A.return===u)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}u.stateNode=l;e:switch(oa(l,h,v),h){case"button":case"input":case"select":case"textarea":l=!!v.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bc(u)}}return Vr(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==v&&Bc(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(r(166));if(l=he.current,na(u)){if(l=u.stateNode,h=u.memoizedProps,v=null,A=ai,A!==null)switch(A.tag){case 27:case 5:v=A.memoizedProps}l[Gn]=u,l=!!(l.nodeValue===h||v!==null&&v.suppressHydrationWarning===!0||Zb(l.nodeValue,h)),l||Nc(u)}else l=_p(l).createTextNode(v),l[Gn]=u,u.stateNode=l}return Vr(u),null;case 13:if(v=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=na(u),v!==null&&v.dehydrated!==null){if(l===null){if(!A)throw Error(r(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[Gn]=u}else Ga(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vr(u),A=!1}else A=U1(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=A),A=!0;if(!A)return u.flags&256?(Mc(u),u):(Mc(u),null)}if(Mc(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=v!==null,l=l!==null&&l.memoizedState!==null,h){v=u.child,A=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(A=v.alternate.memoizedState.cachePool.pool);var O=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(O=v.memoizedState.cachePool.pool),O!==A&&(v.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),cp(u,u.updateQueue),Vr(u),null;case 4:return Ce(),l===null&&P2(u.stateNode.containerInfo),Vr(u),null;case 10:return ps(u.type),Vr(u),null;case 19:if(W(Ni),A=u.memoizedState,A===null)return Vr(u),null;if(v=(u.flags&128)!==0,O=A.rendering,O===null)if(v)r0(A,!1);else{if(Jr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(O=ip(l),O!==null){for(u.flags|=128,r0(A,!1),l=O.updateQueue,u.updateQueue=l,cp(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)Ef(h,l),h=h.sibling;return K(Ni,Ni.current&1|2),u.child}l=l.sibling}A.tail!==null&&dt()>dp&&(u.flags|=128,v=!0,r0(A,!1),u.lanes=4194304)}else{if(!v)if(l=ip(O),l!==null){if(u.flags|=128,v=!0,l=l.updateQueue,u.updateQueue=l,cp(u,l),r0(A,!0),A.tail===null&&A.tailMode==="hidden"&&!O.alternate&&!Ln)return Vr(u),null}else 2*dt()-A.renderingStartTime>dp&&h!==536870912&&(u.flags|=128,v=!0,r0(A,!1),u.lanes=4194304);A.isBackwards?(O.sibling=u.child,u.child=O):(l=A.last,l!==null?l.sibling=O:u.child=O,A.last=O)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=dt(),u.sibling=null,l=Ni.current,K(Ni,v?l&1|2:l&1),u):(Vr(u),null);case 22:case 23:return Mc(u),Zt(),v=u.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(h&536870912)!==0&&(u.flags&128)===0&&(Vr(u),u.subtreeFlags&6&&(u.flags|=8192)):Vr(u),h=u.updateQueue,h!==null&&cp(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==h&&(u.flags|=2048),l!==null&&W(E),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),ps(si),Vr(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function rC(l,u){switch(Tf(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return ps(si),Ce(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return qe(u),null;case 13:if(Mc(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ga()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return W(Ni),null;case 4:return Ce(),null;case 10:return ps(u.type),null;case 22:case 23:return Mc(u),Zt(),l!==null&&W(E),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return ps(si),null;case 25:return null;default:return null}}function ob(l,u){switch(Tf(u),u.tag){case 3:ps(si),Ce();break;case 26:case 27:case 5:qe(u);break;case 4:Ce();break;case 13:Mc(u);break;case 19:W(Ni);break;case 10:ps(u.type);break;case 22:case 23:Mc(u),Zt(),l!==null&&W(E);break;case 24:ps(si)}}function i0(l,u){try{var h=u.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var A=v.next;h=A;do{if((h.tag&l)===l){v=void 0;var O=h.create,Z=h.inst;v=O(),Z.destroy=v}h=h.next}while(h!==A)}}catch(ue){xr(u,u.return,ue)}}function Nu(l,u,h){try{var v=u.updateQueue,A=v!==null?v.lastEffect:null;if(A!==null){var O=A.next;v=O;do{if((v.tag&l)===l){var Z=v.inst,ue=Z.destroy;if(ue!==void 0){Z.destroy=void 0,A=u;var ye=h,je=ue;try{je()}catch(Ye){xr(A,ye,Ye)}}}v=v.next}while(v!==O)}}catch(Ye){xr(u,u.return,Ye)}}function sb(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{zn(u,h)}catch(v){xr(l,l.return,v)}}}function lb(l,u,h){h.props=zf(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(v){xr(l,u,v)}}function a0(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof h=="function"?l.refCleanup=h(v):h.current=v}}catch(A){xr(l,u,A)}}function ql(l,u){var h=l.ref,v=l.refCleanup;if(h!==null)if(typeof v=="function")try{v()}catch(A){xr(l,u,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(A){xr(l,u,A)}else h.current=null}function cb(l){var u=l.type,h=l.memoizedProps,v=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&v.focus();break e;case"img":h.src?v.src=h.src:h.srcSet&&(v.srcset=h.srcSet)}}catch(A){xr(l,l.return,A)}}function u2(l,u,h){try{var v=l.stateNode;SC(v,l.type,h,u),v[$n]=u}catch(A){xr(l,l.return,A)}}function ub(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Bu(l.type)||l.tag===4}function f2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||ub(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Bu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function d2(l,u,h){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=wp));else if(v!==4&&(v===27&&Bu(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(d2(l,u,h),l=l.sibling;l!==null;)d2(l,u,h),l=l.sibling}function up(l,u,h){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(v!==4&&(v===27&&Bu(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(up(l,u,h),l=l.sibling;l!==null;)up(l,u,h),l=l.sibling}function fb(l){var u=l.stateNode,h=l.memoizedProps;try{for(var v=l.type,A=u.attributes;A.length;)u.removeAttributeNode(A[0]);oa(u,v,h),u[Gn]=l,u[$n]=h}catch(O){xr(l,l.return,O)}}var Fc=!1,ci=!1,h2=!1,db=typeof WeakSet=="function"?WeakSet:Set,Wi=null;function iC(l,u){if(l=l.containerInfo,j2=Tp,l=ta(l),Ri(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var A=v.anchorOffset,O=v.focusNode;v=v.focusOffset;try{h.nodeType,O.nodeType}catch{h=null;break e}var Z=0,ue=-1,ye=-1,je=0,Ye=0,tt=l,Fe=null;t:for(;;){for(var Ue;tt!==h||A!==0&&tt.nodeType!==3||(ue=Z+A),tt!==O||v!==0&&tt.nodeType!==3||(ye=Z+v),tt.nodeType===3&&(Z+=tt.nodeValue.length),(Ue=tt.firstChild)!==null;)Fe=tt,tt=Ue;for(;;){if(tt===l)break t;if(Fe===h&&++je===A&&(ue=Z),Fe===O&&++Ye===v&&(ye=Z),(Ue=tt.nextSibling)!==null)break;tt=Fe,Fe=tt.parentNode}tt=Ue}h=ue===-1||ye===-1?null:{start:ue,end:ye}}else h=null}h=h||{start:0,end:0}}else h=null;for(B2={focusedElem:l,selectionRange:h},Tp=!1,Wi=u;Wi!==null;)if(u=Wi,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Wi=l;else for(;Wi!==null;){switch(u=Wi,O=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,h=u,A=O.memoizedProps,O=O.memoizedState,v=h.stateNode;try{var Xt=zf(h.type,A,h.elementType===h.type);l=v.getSnapshotBeforeUpdate(Xt,O),v.__reactInternalSnapshotBeforeUpdate=l}catch(zt){xr(h,h.return,zt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)z2(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":z2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Wi=l;break}Wi=u.return}}function hb(l,u,h){var v=h.flags;switch(h.tag){case 0:case 11:case 15:Du(l,h),v&4&&i0(5,h);break;case 1:if(Du(l,h),v&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(Z){xr(h,h.return,Z)}else{var A=zf(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(A,u,l.__reactInternalSnapshotBeforeUpdate)}catch(Z){xr(h,h.return,Z)}}v&64&&sb(h),v&512&&a0(h,h.return);break;case 3:if(Du(l,h),v&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{zn(l,u)}catch(Z){xr(h,h.return,Z)}}break;case 27:u===null&&v&4&&fb(h);case 26:case 5:Du(l,h),u===null&&v&4&&cb(h),v&512&&a0(h,h.return);break;case 12:Du(l,h);break;case 13:Du(l,h),v&4&&mb(l,h),v&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=hC.bind(null,h),DC(l,h))));break;case 22:if(v=h.memoizedState!==null||Fc,!v){u=u!==null&&u.memoizedState!==null||ci,A=Fc;var O=ci;Fc=v,(ci=u)&&!O?Ou(l,h,(h.subtreeFlags&8772)!==0):Du(l,h),Fc=A,ci=O}break;case 30:break;default:Du(l,h)}}function pb(l){var u=l.alternate;u!==null&&(l.alternate=null,pb(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&vi(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Lr=null,po=!1;function Uc(l,u,h){for(h=h.child;h!==null;)gb(l,u,h),h=h.sibling}function gb(l,u,h){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(yt,h)}catch{}switch(h.tag){case 26:ci||ql(h,u),Uc(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:ci||ql(h,u);var v=Lr,A=po;Bu(h.type)&&(Lr=h.stateNode,po=!1),Uc(l,u,h),p0(h.stateNode),Lr=v,po=A;break;case 5:ci||ql(h,u);case 6:if(v=Lr,A=po,Lr=null,Uc(l,u,h),Lr=v,po=A,Lr!==null)if(po)try{(Lr.nodeType===9?Lr.body:Lr.nodeName==="HTML"?Lr.ownerDocument.body:Lr).removeChild(h.stateNode)}catch(O){xr(h,u,O)}else try{Lr.removeChild(h.stateNode)}catch(O){xr(h,u,O)}break;case 18:Lr!==null&&(po?(l=Lr,rw(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),_0(l)):rw(Lr,h.stateNode));break;case 4:v=Lr,A=po,Lr=h.stateNode.containerInfo,po=!0,Uc(l,u,h),Lr=v,po=A;break;case 0:case 11:case 14:case 15:ci||Nu(2,h,u),ci||Nu(4,h,u),Uc(l,u,h);break;case 1:ci||(ql(h,u),v=h.stateNode,typeof v.componentWillUnmount=="function"&&lb(h,u,v)),Uc(l,u,h);break;case 21:Uc(l,u,h);break;case 22:ci=(v=ci)||h.memoizedState!==null,Uc(l,u,h),ci=v;break;default:Uc(l,u,h)}}function mb(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{_0(l)}catch(h){xr(u,u.return,h)}}function aC(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new db),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new db),u;default:throw Error(r(435,l.tag))}}function p2(l,u){var h=aC(l);u.forEach(function(v){var A=pC.bind(null,l,v);h.has(v)||(h.add(v),v.then(A,A))})}function Vo(l,u){var h=u.deletions;if(h!==null)for(var v=0;v<h.length;v++){var A=h[v],O=l,Z=u,ue=Z;e:for(;ue!==null;){switch(ue.tag){case 27:if(Bu(ue.type)){Lr=ue.stateNode,po=!1;break e}break;case 5:Lr=ue.stateNode,po=!1;break e;case 3:case 4:Lr=ue.stateNode.containerInfo,po=!0;break e}ue=ue.return}if(Lr===null)throw Error(r(160));gb(O,Z,A),Lr=null,po=!1,O=A.alternate,O!==null&&(O.return=null),A.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)vb(u,l),u=u.sibling}var Qs=null;function vb(l,u){var h=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Vo(u,l),qo(l),v&4&&(Nu(3,l,l.return),i0(3,l),Nu(5,l,l.return));break;case 1:Vo(u,l),qo(l),v&512&&(ci||h===null||ql(h,h.return)),v&64&&Fc&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?v:h.concat(v))));break;case 26:var A=Qs;if(Vo(u,l),qo(l),v&512&&(ci||h===null||ql(h,h.return)),v&4){var O=h!==null?h.memoizedState:null;if(v=l.memoizedState,h===null)if(v===null)if(l.stateNode===null){e:{v=l.type,h=l.memoizedProps,A=A.ownerDocument||A;t:switch(v){case"title":O=A.getElementsByTagName("title")[0],(!O||O[Ji]||O[Gn]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=A.createElement(v),A.head.insertBefore(O,A.querySelector("head > title"))),oa(O,v,h),O[Gn]=l,Bn(O),v=O;break e;case"link":var Z=fw("link","href",A).get(v+(h.href||""));if(Z){for(var ue=0;ue<Z.length;ue++)if(O=Z[ue],O.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&O.getAttribute("rel")===(h.rel==null?null:h.rel)&&O.getAttribute("title")===(h.title==null?null:h.title)&&O.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){Z.splice(ue,1);break t}}O=A.createElement(v),oa(O,v,h),A.head.appendChild(O);break;case"meta":if(Z=fw("meta","content",A).get(v+(h.content||""))){for(ue=0;ue<Z.length;ue++)if(O=Z[ue],O.getAttribute("content")===(h.content==null?null:""+h.content)&&O.getAttribute("name")===(h.name==null?null:h.name)&&O.getAttribute("property")===(h.property==null?null:h.property)&&O.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&O.getAttribute("charset")===(h.charSet==null?null:h.charSet)){Z.splice(ue,1);break t}}O=A.createElement(v),oa(O,v,h),A.head.appendChild(O);break;default:throw Error(r(468,v))}O[Gn]=l,Bn(O),v=O}l.stateNode=v}else dw(A,l.type,l.stateNode);else l.stateNode=uw(A,v,l.memoizedProps);else O!==v?(O===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):O.count--,v===null?dw(A,l.type,l.stateNode):uw(A,v,l.memoizedProps)):v===null&&l.stateNode!==null&&u2(l,l.memoizedProps,h.memoizedProps)}break;case 27:Vo(u,l),qo(l),v&512&&(ci||h===null||ql(h,h.return)),h!==null&&v&4&&u2(l,l.memoizedProps,h.memoizedProps);break;case 5:if(Vo(u,l),qo(l),v&512&&(ci||h===null||ql(h,h.return)),l.flags&32){A=l.stateNode;try{ma(A,"")}catch(Ue){xr(l,l.return,Ue)}}v&4&&l.stateNode!=null&&(A=l.memoizedProps,u2(l,A,h!==null?h.memoizedProps:A)),v&1024&&(h2=!0);break;case 6:if(Vo(u,l),qo(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,h=l.stateNode;try{h.nodeValue=v}catch(Ue){xr(l,l.return,Ue)}}break;case 3:if(Ep=null,A=Qs,Qs=Ap(u.containerInfo),Vo(u,l),Qs=A,qo(l),v&4&&h!==null&&h.memoizedState.isDehydrated)try{_0(u.containerInfo)}catch(Ue){xr(l,l.return,Ue)}h2&&(h2=!1,yb(l));break;case 4:v=Qs,Qs=Ap(l.stateNode.containerInfo),Vo(u,l),qo(l),Qs=v;break;case 12:Vo(u,l),qo(l);break;case 13:Vo(u,l),qo(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(b2=dt()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,p2(l,v)));break;case 22:A=l.memoizedState!==null;var ye=h!==null&&h.memoizedState!==null,je=Fc,Ye=ci;if(Fc=je||A,ci=Ye||ye,Vo(u,l),ci=Ye,Fc=je,qo(l),v&8192)e:for(u=l.stateNode,u._visibility=A?u._visibility&-2:u._visibility|1,A&&(h===null||ye||Fc||ci||Vf(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){ye=h=u;try{if(O=ye.stateNode,A)Z=O.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{ue=ye.stateNode;var tt=ye.memoizedProps.style,Fe=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;ue.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(Ue){xr(ye,ye.return,Ue)}}}else if(u.tag===6){if(h===null){ye=u;try{ye.stateNode.nodeValue=A?"":ye.memoizedProps}catch(Ue){xr(ye,ye.return,Ue)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=l.updateQueue,v!==null&&(h=v.retryQueue,h!==null&&(v.retryQueue=null,p2(l,h))));break;case 19:Vo(u,l),qo(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,p2(l,v)));break;case 30:break;case 21:break;default:Vo(u,l),qo(l)}}function qo(l){var u=l.flags;if(u&2){try{for(var h,v=l.return;v!==null;){if(ub(v)){h=v;break}v=v.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var A=h.stateNode,O=f2(l);up(l,O,A);break;case 5:var Z=h.stateNode;h.flags&32&&(ma(Z,""),h.flags&=-33);var ue=f2(l);up(l,ue,Z);break;case 3:case 4:var ye=h.stateNode.containerInfo,je=f2(l);d2(l,je,ye);break;default:throw Error(r(161))}}catch(Ye){xr(l,l.return,Ye)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function yb(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;yb(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Du(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)hb(l,u.alternate,u),u=u.sibling}function Vf(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Nu(4,u,u.return),Vf(u);break;case 1:ql(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&lb(u,u.return,h),Vf(u);break;case 27:p0(u.stateNode);case 26:case 5:ql(u,u.return),Vf(u);break;case 22:u.memoizedState===null&&Vf(u);break;case 30:Vf(u);break;default:Vf(u)}l=l.sibling}}function Ou(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,A=l,O=u,Z=O.flags;switch(O.tag){case 0:case 11:case 15:Ou(A,O,h),i0(4,O);break;case 1:if(Ou(A,O,h),v=O,A=v.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(je){xr(v,v.return,je)}if(v=O,A=v.updateQueue,A!==null){var ue=v.stateNode;try{var ye=A.shared.hiddenCallbacks;if(ye!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ye.length;A++)Tn(ye[A],ue)}catch(je){xr(v,v.return,je)}}h&&Z&64&&sb(O),a0(O,O.return);break;case 27:fb(O);case 26:case 5:Ou(A,O,h),h&&v===null&&Z&4&&cb(O),a0(O,O.return);break;case 12:Ou(A,O,h);break;case 13:Ou(A,O,h),h&&Z&4&&mb(A,O);break;case 22:O.memoizedState===null&&Ou(A,O,h),a0(O,O.return);break;case 30:break;default:Ou(A,O,h)}u=u.sibling}}function g2(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Rf(h))}function m2(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Rf(l))}function Hl(l,u,h,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)xb(l,u,h,v),u=u.sibling}function xb(l,u,h,v){var A=u.flags;switch(u.tag){case 0:case 11:case 15:Hl(l,u,h,v),A&2048&&i0(9,u);break;case 1:Hl(l,u,h,v);break;case 3:Hl(l,u,h,v),A&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Rf(l)));break;case 12:if(A&2048){Hl(l,u,h,v),l=u.stateNode;try{var O=u.memoizedProps,Z=O.id,ue=O.onPostCommit;typeof ue=="function"&&ue(Z,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ye){xr(u,u.return,ye)}}else Hl(l,u,h,v);break;case 13:Hl(l,u,h,v);break;case 23:break;case 22:O=u.stateNode,Z=u.alternate,u.memoizedState!==null?O._visibility&2?Hl(l,u,h,v):o0(l,u):O._visibility&2?Hl(l,u,h,v):(O._visibility|=2,Md(l,u,h,v,(u.subtreeFlags&10256)!==0)),A&2048&&g2(Z,u);break;case 24:Hl(l,u,h,v),A&2048&&m2(u.alternate,u);break;default:Hl(l,u,h,v)}}function Md(l,u,h,v,A){for(A=A&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var O=l,Z=u,ue=h,ye=v,je=Z.flags;switch(Z.tag){case 0:case 11:case 15:Md(O,Z,ue,ye,A),i0(8,Z);break;case 23:break;case 22:var Ye=Z.stateNode;Z.memoizedState!==null?Ye._visibility&2?Md(O,Z,ue,ye,A):o0(O,Z):(Ye._visibility|=2,Md(O,Z,ue,ye,A)),A&&je&2048&&g2(Z.alternate,Z);break;case 24:Md(O,Z,ue,ye,A),A&&je&2048&&m2(Z.alternate,Z);break;default:Md(O,Z,ue,ye,A)}u=u.sibling}}function o0(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,v=u,A=v.flags;switch(v.tag){case 22:o0(h,v),A&2048&&g2(v.alternate,v);break;case 24:o0(h,v),A&2048&&m2(v.alternate,v);break;default:o0(h,v)}u=u.sibling}}var s0=8192;function jd(l){if(l.subtreeFlags&s0)for(l=l.child;l!==null;)bb(l),l=l.sibling}function bb(l){switch(l.tag){case 26:jd(l),l.flags&s0&&l.memoizedState!==null&&HC(Qs,l.memoizedState,l.memoizedProps);break;case 5:jd(l);break;case 3:case 4:var u=Qs;Qs=Ap(l.stateNode.containerInfo),jd(l),Qs=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=s0,s0=16777216,jd(l),s0=u):jd(l));break;default:jd(l)}}function wb(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function l0(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];Wi=v,Ab(v,l)}wb(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)_b(l),l=l.sibling}function _b(l){switch(l.tag){case 0:case 11:case 15:l0(l),l.flags&2048&&Nu(9,l,l.return);break;case 3:l0(l);break;case 12:l0(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,fp(l)):l0(l);break;default:l0(l)}}function fp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];Wi=v,Ab(v,l)}wb(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Nu(8,u,u.return),fp(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,fp(u));break;default:fp(u)}l=l.sibling}}function Ab(l,u){for(;Wi!==null;){var h=Wi;switch(h.tag){case 0:case 11:case 15:Nu(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var v=h.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Rf(h.memoizedState.cache)}if(v=h.child,v!==null)v.return=h,Wi=v;else e:for(h=l;Wi!==null;){v=Wi;var A=v.sibling,O=v.return;if(pb(v),v===h){Wi=null;break e}if(A!==null){A.return=O,Wi=A;break e}Wi=O}}}var oC={getCacheForType:function(l){var u=oi(si),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},sC=typeof WeakMap=="function"?WeakMap:Map,ir=0,Ar=null,bn=null,Nn=0,ar=0,Ho=null,ku=!1,Bd=!1,v2=!1,zc=0,Jr=0,Pu=0,qf=0,y2=0,ys=0,Fd=0,c0=null,go=null,x2=!1,b2=0,dp=1/0,hp=null,Lu=null,aa=0,Mu=null,Ud=null,zd=0,w2=0,_2=null,Sb=null,u0=0,A2=null;function Wo(){if((ir&2)!==0&&Nn!==0)return Nn&-Nn;if(V.T!==null){var l=Dc;return l!==0?l:N2()}return vr()}function Eb(){ys===0&&(ys=(Nn&536870912)===0||Ln?pa():536870912);var l=vs.current;return l!==null&&(l.flags|=32),ys}function Go(l,u,h){(l===Ar&&(ar===2||ar===9)||l.cancelPendingCommit!==null)&&(Vd(l,0),ju(l,Nn,ys,!1)),ur(l,h),((ir&2)===0||l!==Ar)&&(l===Ar&&((ir&2)===0&&(qf|=h),Jr===4&&ju(l,Nn,ys,!1)),Wl(l))}function Cb(l,u,h){if((ir&6)!==0)throw Error(r(327));var v=!h&&(u&124)===0&&(u&l.expiredLanes)===0||mi(l,u),A=v?uC(l,u):C2(l,u,!0),O=v;do{if(A===0){Bd&&!v&&ju(l,u,0,!1);break}else{if(h=l.current.alternate,O&&!lC(h)){A=C2(l,u,!1),O=!1;continue}if(A===2){if(O=u,l.errorRecoveryDisabledLanes&O)var Z=0;else Z=l.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){u=Z;e:{var ue=l;A=c0;var ye=ue.current.memoizedState.isDehydrated;if(ye&&(Vd(ue,Z).flags|=256),Z=C2(ue,Z,!1),Z!==2){if(v2&&!ye){ue.errorRecoveryDisabledLanes|=O,qf|=O,A=4;break e}O=go,go=A,O!==null&&(go===null?go=O:go.push.apply(go,O))}A=Z}if(O=!1,A!==2)continue}}if(A===1){Vd(l,0),ju(l,u,0,!0);break}e:{switch(v=l,O=A,O){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ju(v,u,ys,!ku);break e;case 2:go=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(A=b2+300-dt(),10<A)){if(ju(v,u,ys,!ku),Sn(v,0,!0)!==0)break e;v.timeoutHandle=tw(Ib.bind(null,v,h,go,hp,x2,u,ys,qf,Fd,ku,O,2,-0,0),A);break e}Ib(v,h,go,hp,x2,u,ys,qf,Fd,ku,O,0,-0,0)}}break}while(!0);Wl(l)}function Ib(l,u,h,v,A,O,Z,ue,ye,je,Ye,tt,Fe,Ue){if(l.timeoutHandle=-1,tt=u.subtreeFlags,(tt&8192||(tt&16785408)===16785408)&&(v0={stylesheets:null,count:0,unsuspend:qC},bb(u),tt=WC(),tt!==null)){l.cancelPendingCommit=tt(Pb.bind(null,l,u,O,h,v,A,Z,ue,ye,Ye,1,Fe,Ue)),ju(l,O,Z,!je);return}Pb(l,u,O,h,v,A,Z,ue,ye)}function lC(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var v=0;v<h.length;v++){var A=h[v],O=A.getSnapshot;A=A.value;try{if(!xi(O(),A))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ju(l,u,h,v){u&=~y2,u&=~qf,l.suspendedLanes|=u,l.pingedLanes&=~u,v&&(l.warmLanes|=u),v=l.expirationTimes;for(var A=u;0<A;){var O=31-xt(A),Z=1<<O;v[O]=-1,A&=~Z}h!==0&&Nt(l,h,u)}function pp(){return(ir&6)===0?(f0(0),!1):!0}function S2(){if(bn!==null){if(ar===0)var l=bn.return;else l=bn,Ws=wi=null,Td(l),Pd=null,t0=0,l=bn;for(;l!==null;)ob(l.alternate,l),l=l.return;bn=null}}function Vd(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,CC(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),S2(),Ar=l,bn=h=fs(l.current,null),Nn=u,ar=0,Ho=null,ku=!1,Bd=mi(l,u),v2=!1,Fd=ys=y2=qf=Pu=Jr=0,go=c0=null,x2=!1,(u&8)!==0&&(u|=u&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=u;0<v;){var A=31-xt(v),O=1<<A;u|=l[A],v&=~O}return zc=u,co(),h}function Tb(l,u){Lt=null,V.H=tp,u===ie||u===le?(u=Re(),ar=3):u===ae?(u=Re(),ar=4):ar=u===Gx?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ho=u,bn===null&&(Jr=1,op(l,ln(u,l.current)))}function Rb(){var l=V.H;return V.H=tp,l===null?tp:l}function Nb(){var l=V.A;return V.A=oC,l}function E2(){Jr=4,ku||(Nn&4194048)!==Nn&&vs.current!==null||(Bd=!0),(Pu&134217727)===0&&(qf&134217727)===0||Ar===null||ju(Ar,Nn,ys,!1)}function C2(l,u,h){var v=ir;ir|=2;var A=Rb(),O=Nb();(Ar!==l||Nn!==u)&&(hp=null,Vd(l,u)),u=!1;var Z=Jr;e:do try{if(ar!==0&&bn!==null){var ue=bn,ye=Ho;switch(ar){case 8:S2(),Z=6;break e;case 3:case 2:case 9:case 6:vs.current===null&&(u=!0);var je=ar;if(ar=0,Ho=null,qd(l,ue,ye,je),h&&Bd){Z=0;break e}break;default:je=ar,ar=0,Ho=null,qd(l,ue,ye,je)}}cC(),Z=Jr;break}catch(Ye){Tb(l,Ye)}while(!0);return u&&l.shellSuspendCounter++,Ws=wi=null,ir=v,V.H=A,V.A=O,bn===null&&(Ar=null,Nn=0,co()),Z}function cC(){for(;bn!==null;)Db(bn)}function uC(l,u){var h=ir;ir|=2;var v=Rb(),A=Nb();Ar!==l||Nn!==u?(hp=null,dp=dt()+500,Vd(l,u)):Bd=mi(l,u);e:do try{if(ar!==0&&bn!==null){u=bn;var O=Ho;t:switch(ar){case 1:ar=0,Ho=null,qd(l,u,O,1);break;case 2:case 9:if(ge(O)){ar=0,Ho=null,Ob(u);break}u=function(){ar!==2&&ar!==9||Ar!==l||(ar=7),Wl(l)},O.then(u,u);break e;case 3:ar=7;break e;case 4:ar=5;break e;case 7:ge(O)?(ar=0,Ho=null,Ob(u)):(ar=0,Ho=null,qd(l,u,O,7));break;case 5:var Z=null;switch(bn.tag){case 26:Z=bn.memoizedState;case 5:case 27:var ue=bn;if(!Z||hw(Z)){ar=0,Ho=null;var ye=ue.sibling;if(ye!==null)bn=ye;else{var je=ue.return;je!==null?(bn=je,gp(je)):bn=null}break t}}ar=0,Ho=null,qd(l,u,O,5);break;case 6:ar=0,Ho=null,qd(l,u,O,6);break;case 8:S2(),Jr=6;break e;default:throw Error(r(462))}}fC();break}catch(Ye){Tb(l,Ye)}while(!0);return Ws=wi=null,V.H=v,V.A=A,ir=h,bn!==null?0:(Ar=null,Nn=0,co(),Jr)}function fC(){for(;bn!==null&&!Pe();)Db(bn)}function Db(l){var u=ib(l.alternate,l,zc);l.memoizedProps=l.pendingProps,u===null?gp(l):bn=u}function Ob(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=Zx(h,u,u.pendingProps,u.type,void 0,Nn);break;case 11:u=Zx(h,u,u.pendingProps,u.type.render,u.ref,Nn);break;case 5:Td(u);default:ob(h,u),u=bn=Ef(u,zc),u=ib(h,u,zc)}l.memoizedProps=l.pendingProps,u===null?gp(l):bn=u}function qd(l,u,h,v){Ws=wi=null,Td(u),Pd=null,t0=0;var A=u.return;try{if(eC(l,A,u,h,Nn)){Jr=1,op(l,ln(h,l.current)),bn=null;return}}catch(O){if(A!==null)throw bn=A,O;Jr=1,op(l,ln(h,l.current)),bn=null;return}u.flags&32768?(Ln||v===1?l=!0:Bd||(Nn&536870912)!==0?l=!1:(ku=l=!0,(v===2||v===9||v===3||v===6)&&(v=vs.current,v!==null&&v.tag===13&&(v.flags|=16384))),kb(u,l)):gp(u)}function gp(l){var u=l;do{if((u.flags&32768)!==0){kb(u,ku);return}l=u.return;var h=nC(u.alternate,u,zc);if(h!==null){bn=h;return}if(u=u.sibling,u!==null){bn=u;return}bn=u=l}while(u!==null);Jr===0&&(Jr=5)}function kb(l,u){do{var h=rC(l.alternate,l);if(h!==null){h.flags&=32767,bn=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){bn=l;return}bn=l=h}while(l!==null);Jr=6,bn=null}function Pb(l,u,h,v,A,O,Z,ue,ye){l.cancelPendingCommit=null;do mp();while(aa!==0);if((ir&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(O=u.lanes|u.childLanes,O|=Fr,xn(l,h,O,Z,ue,ye),l===Ar&&(bn=Ar=null,Nn=0),Ud=u,Mu=l,zd=h,w2=O,_2=A,Sb=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,gC(Ge,function(){return Fb(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=V.T,V.T=null,A=z.p,z.p=2,Z=ir,ir|=4;try{iC(l,u,h)}finally{ir=Z,z.p=A,V.T=v}}aa=1,Lb(),Mb(),jb()}}function Lb(){if(aa===1){aa=0;var l=Mu,u=Ud,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=V.T,V.T=null;var v=z.p;z.p=2;var A=ir;ir|=4;try{vb(u,l);var O=B2,Z=ta(l.containerInfo),ue=O.focusedElem,ye=O.selectionRange;if(Z!==ue&&ue&&ue.ownerDocument&&Cl(ue.ownerDocument.documentElement,ue)){if(ye!==null&&Ri(ue)){var je=ye.start,Ye=ye.end;if(Ye===void 0&&(Ye=je),"selectionStart"in ue)ue.selectionStart=je,ue.selectionEnd=Math.min(Ye,ue.value.length);else{var tt=ue.ownerDocument||document,Fe=tt&&tt.defaultView||window;if(Fe.getSelection){var Ue=Fe.getSelection(),Xt=ue.textContent.length,zt=Math.min(ye.start,Xt),gr=ye.end===void 0?zt:Math.min(ye.end,Xt);!Ue.extend&&zt>gr&&(Z=gr,gr=zt,zt=Z);var De=js(ue,zt),Se=js(ue,gr);if(De&&Se&&(Ue.rangeCount!==1||Ue.anchorNode!==De.node||Ue.anchorOffset!==De.offset||Ue.focusNode!==Se.node||Ue.focusOffset!==Se.offset)){var ke=tt.createRange();ke.setStart(De.node,De.offset),Ue.removeAllRanges(),zt>gr?(Ue.addRange(ke),Ue.extend(Se.node,Se.offset)):(ke.setEnd(Se.node,Se.offset),Ue.addRange(ke))}}}}for(tt=[],Ue=ue;Ue=Ue.parentNode;)Ue.nodeType===1&&tt.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<tt.length;ue++){var Qe=tt[ue];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}Tp=!!j2,B2=j2=null}finally{ir=A,z.p=v,V.T=h}}l.current=u,aa=2}}function Mb(){if(aa===2){aa=0;var l=Mu,u=Ud,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=V.T,V.T=null;var v=z.p;z.p=2;var A=ir;ir|=4;try{hb(l,u.alternate,u)}finally{ir=A,z.p=v,V.T=h}}aa=3}}function jb(){if(aa===4||aa===3){aa=0,ve();var l=Mu,u=Ud,h=zd,v=Sb;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?aa=5:(aa=0,Ud=Mu=null,Bb(l,l.pendingLanes));var A=l.pendingLanes;if(A===0&&(Lu=null),jn(h),u=u.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(yt,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=V.T,A=z.p,z.p=2,V.T=null;try{for(var O=l.onRecoverableError,Z=0;Z<v.length;Z++){var ue=v[Z];O(ue.value,{componentStack:ue.stack})}}finally{V.T=u,z.p=A}}(zd&3)!==0&&mp(),Wl(l),A=l.pendingLanes,(h&4194090)!==0&&(A&42)!==0?l===A2?u0++:(u0=0,A2=l):u0=0,f0(0)}}function Bb(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Rf(u)))}function mp(l){return Lb(),Mb(),jb(),Fb()}function Fb(){if(aa!==5)return!1;var l=Mu,u=w2;w2=0;var h=jn(zd),v=V.T,A=z.p;try{z.p=32>h?32:h,V.T=null,h=_2,_2=null;var O=Mu,Z=zd;if(aa=0,Ud=Mu=null,zd=0,(ir&6)!==0)throw Error(r(331));var ue=ir;if(ir|=4,_b(O.current),xb(O,O.current,Z,h),ir=ue,f0(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(yt,O)}catch{}return!0}finally{z.p=A,V.T=v,Bb(l,u)}}function Ub(l,u,h){u=ln(h,u),u=t2(l.stateNode,u,2),l=Je(l,u,2),l!==null&&(ur(l,2),Wl(l))}function xr(l,u,h){if(l.tag===3)Ub(l,l,h);else for(;u!==null;){if(u.tag===3){Ub(u,l,h);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Lu===null||!Lu.has(v))){l=ln(h,l),h=Hx(2),v=Je(u,h,2),v!==null&&(Wx(h,v,u,l),ur(v,2),Wl(v));break}}u=u.return}}function I2(l,u,h){var v=l.pingCache;if(v===null){v=l.pingCache=new sC;var A=new Set;v.set(u,A)}else A=v.get(u),A===void 0&&(A=new Set,v.set(u,A));A.has(h)||(v2=!0,A.add(h),l=dC.bind(null,l,u,h),u.then(l,l))}function dC(l,u,h){var v=l.pingCache;v!==null&&v.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,Ar===l&&(Nn&h)===h&&(Jr===4||Jr===3&&(Nn&62914560)===Nn&&300>dt()-b2?(ir&2)===0&&Vd(l,0):y2|=h,Fd===Nn&&(Fd=0)),Wl(l)}function zb(l,u){u===0&&(u=In()),l=Fs(l,u),l!==null&&(ur(l,u),Wl(l))}function hC(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),zb(l,h)}function pC(l,u){var h=0;switch(l.tag){case 13:var v=l.stateNode,A=l.memoizedState;A!==null&&(h=A.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(u),zb(l,h)}function gC(l,u){return lt(l,u)}var vp=null,Hd=null,T2=!1,yp=!1,R2=!1,Hf=0;function Wl(l){l!==Hd&&l.next===null&&(Hd===null?vp=Hd=l:Hd=Hd.next=l),yp=!0,T2||(T2=!0,vC())}function f0(l,u){if(!R2&&yp){R2=!0;do for(var h=!1,v=vp;v!==null;){if(l!==0){var A=v.pendingLanes;if(A===0)var O=0;else{var Z=v.suspendedLanes,ue=v.pingedLanes;O=(1<<31-xt(42|l)+1)-1,O&=A&~(Z&~ue),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(h=!0,Wb(v,O))}else O=Nn,O=Sn(v,v===Ar?O:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(O&3)===0||mi(v,O)||(h=!0,Wb(v,O));v=v.next}while(h);R2=!1}}function mC(){Vb()}function Vb(){yp=T2=!1;var l=0;Hf!==0&&(EC()&&(l=Hf),Hf=0);for(var u=dt(),h=null,v=vp;v!==null;){var A=v.next,O=qb(v,u);O===0?(v.next=null,h===null?vp=A:h.next=A,A===null&&(Hd=h)):(h=v,(l!==0||(O&3)!==0)&&(yp=!0)),v=A}f0(l)}function qb(l,u){for(var h=l.suspendedLanes,v=l.pingedLanes,A=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var Z=31-xt(O),ue=1<<Z,ye=A[Z];ye===-1?((ue&h)===0||(ue&v)!==0)&&(A[Z]=on(ue,u)):ye<=u&&(l.expiredLanes|=ue),O&=~ue}if(u=Ar,h=Nn,h=Sn(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,h===0||l===u&&(ar===2||ar===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&vt(v),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||mi(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(v!==null&&vt(v),jn(h)){case 2:case 8:h=Ke;break;case 32:h=Ge;break;case 268435456:h=ft;break;default:h=Ge}return v=Hb.bind(null,l),h=lt(h,v),l.callbackPriority=u,l.callbackNode=h,u}return v!==null&&v!==null&&vt(v),l.callbackPriority=2,l.callbackNode=null,2}function Hb(l,u){if(aa!==0&&aa!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(mp()&&l.callbackNode!==h)return null;var v=Nn;return v=Sn(l,l===Ar?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(Cb(l,v,u),qb(l,dt()),l.callbackNode!=null&&l.callbackNode===h?Hb.bind(null,l):null)}function Wb(l,u){if(mp())return null;Cb(l,u,!0)}function vC(){IC(function(){(ir&6)!==0?lt(Ne,mC):Vb()})}function N2(){return Hf===0&&(Hf=pa()),Hf}function Gb(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Oo(""+l)}function $b(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function yC(l,u,h,v,A){if(u==="submit"&&h&&h.stateNode===A){var O=Gb((A[$n]||null).action),Z=v.submitter;Z&&(u=(u=Z[$n]||null)?Gb(u.formAction):Z.getAttribute("formAction"),u!==null&&(O=u,Z=null));var ue=new ns("action","action",null,v,A);l.push({event:ue,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Hf!==0){var ye=Z?$b(A,Z):new FormData(A);ms(h,{pending:!0,data:ye,method:A.method,action:O},null,ye)}}else typeof O=="function"&&(ue.preventDefault(),ye=Z?$b(A,Z):new FormData(A),ms(h,{pending:!0,data:ye,method:A.method,action:O},O,ye))},currentTarget:A}]})}}for(var D2=0;D2<Ec.length;D2++){var O2=Ec[D2],xC=O2.toLowerCase(),bC=O2[0].toUpperCase()+O2.slice(1);kr(xC,"on"+bC)}kr(vu,"onAnimationEnd"),kr(Tl,"onAnimationIteration"),kr(Rl,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Nl,"onTransitionRun"),kr(Sc,"onTransitionStart"),kr(yu,"onTransitionCancel"),kr(Dl,"onTransitionEnd"),ga("onMouseEnter",["mouseout","mouseover"]),ga("onMouseLeave",["mouseout","mouseover"]),ga("onPointerEnter",["pointerout","pointerover"]),ga("onPointerLeave",["pointerout","pointerover"]),Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var d0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(d0));function Yb(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var v=l[h],A=v.event;v=v.listeners;e:{var O=void 0;if(u)for(var Z=v.length-1;0<=Z;Z--){var ue=v[Z],ye=ue.instance,je=ue.currentTarget;if(ue=ue.listener,ye!==O&&A.isPropagationStopped())break e;O=ue,A.currentTarget=je;try{O(A)}catch(Ye){ap(Ye)}A.currentTarget=null,O=ye}else for(Z=0;Z<v.length;Z++){if(ue=v[Z],ye=ue.instance,je=ue.currentTarget,ue=ue.listener,ye!==O&&A.isPropagationStopped())break e;O=ue,A.currentTarget=je;try{O(A)}catch(Ye){ap(Ye)}A.currentTarget=null,O=ye}}}}function wn(l,u){var h=u[Er];h===void 0&&(h=u[Er]=new Set);var v=l+"__bubble";h.has(v)||(Xb(u,l,2,!1),h.add(v))}function k2(l,u,h){var v=0;u&&(v|=4),Xb(h,l,v,u)}var xp="_reactListening"+Math.random().toString(36).slice(2);function P2(l){if(!l[xp]){l[xp]=!0,Co.forEach(function(h){h!=="selectionchange"&&(wC.has(h)||k2(h,!1,l),k2(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[xp]||(u[xp]=!0,k2("selectionchange",!1,u))}}function Xb(l,u,h,v){switch(xw(u)){case 2:var A=YC;break;case 8:A=XC;break;default:A=Y2}h=A.bind(null,u,h,l),A=void 0,!ea||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),v?A!==void 0?l.addEventListener(u,h,{capture:!0,passive:A}):l.addEventListener(u,h,!0):A!==void 0?l.addEventListener(u,h,{passive:A}):l.addEventListener(u,h,!1)}function L2(l,u,h,v,A){var O=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var Z=v.tag;if(Z===3||Z===4){var ue=v.stateNode.containerInfo;if(ue===A)break;if(Z===4)for(Z=v.return;Z!==null;){var ye=Z.tag;if((ye===3||ye===4)&&Z.stateNode.containerInfo===A)return;Z=Z.return}for(;ue!==null;){if(Z=ti(ue),Z===null)return;if(ye=Z.tag,ye===5||ye===6||ye===26||ye===27){v=O=Z;continue e}ue=ue.parentNode}}v=v.return}du(function(){var je=O,Ye=nr(h),tt=[];e:{var Fe=Bs.get(l);if(Fe!==void 0){var Ue=ns,Xt=l;switch(l){case"keypress":if(xa(h)===0)break e;case"keydown":case"keyup":Ue=Mo;break;case"focusin":Xt="focus",Ue=is;break;case"focusout":Xt="blur",Ue=is;break;case"beforeblur":case"afterblur":Ue=is;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=Xr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=rs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=_l;break;case vu:case Tl:case Rl:Ue=xl;break;case Dl:Ue=te;break;case"scroll":case"scrollend":Ue=yc;break;case"wheel":Ue=be;break;case"copy":case"cut":case"paste":Ue=bl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=Ms;break;case"toggle":case"beforetoggle":Ue=Ve}var zt=(u&4)!==0,gr=!zt&&(l==="scroll"||l==="scrollend"),De=zt?Fe!==null?Fe+"Capture":null:Fe;zt=[];for(var Se=je,ke;Se!==null;){var Qe=Se;if(ke=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||ke===null||De===null||(Qe=Fi(Se,De),Qe!=null&&zt.push(h0(Se,Qe,ke))),gr)break;Se=Se.return}0<zt.length&&(Fe=new Ue(Fe,Xt,null,h,Ye),tt.push({event:Fe,listeners:zt}))}}if((u&7)===0){e:{if(Fe=l==="mouseover"||l==="pointerover",Ue=l==="mouseout"||l==="pointerout",Fe&&h!==to&&(Xt=h.relatedTarget||h.fromElement)&&(ti(Xt)||Xt[yr]))break e;if((Ue||Fe)&&(Fe=Ye.window===Ye?Ye:(Fe=Ye.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,Ue?(Xt=h.relatedTarget||h.toElement,Ue=je,Xt=Xt?ti(Xt):null,Xt!==null&&(gr=a(Xt),zt=Xt.tag,Xt!==gr||zt!==5&&zt!==27&&zt!==6)&&(Xt=null)):(Ue=null,Xt=je),Ue!==Xt)){if(zt=Xr,Qe="onMouseLeave",De="onMouseEnter",Se="mouse",(l==="pointerout"||l==="pointerover")&&(zt=Ms,Qe="onPointerLeave",De="onPointerEnter",Se="pointer"),gr=Ue==null?Fe:ni(Ue),ke=Xt==null?Fe:ni(Xt),Fe=new zt(Qe,Se+"leave",Ue,h,Ye),Fe.target=gr,Fe.relatedTarget=ke,Qe=null,ti(Ye)===je&&(zt=new zt(De,Se+"enter",Xt,h,Ye),zt.target=ke,zt.relatedTarget=gr,Qe=zt),gr=Qe,Ue&&Xt)t:{for(zt=Ue,De=Xt,Se=0,ke=zt;ke;ke=Wd(ke))Se++;for(ke=0,Qe=De;Qe;Qe=Wd(Qe))ke++;for(;0<Se-ke;)zt=Wd(zt),Se--;for(;0<ke-Se;)De=Wd(De),ke--;for(;Se--;){if(zt===De||De!==null&&zt===De.alternate)break t;zt=Wd(zt),De=Wd(De)}zt=null}else zt=null;Ue!==null&&Kb(tt,Fe,Ue,zt,!1),Xt!==null&&gr!==null&&Kb(tt,gr,Xt,zt,!0)}}e:{if(Fe=je?ni(je):window,Ue=Fe.nodeName&&Fe.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Fe.type==="file")var It=gu;else if(Qn(Fe))if(bc)It=bd;else{It=Fh;var pn=wa}else Ue=Fe.nodeName,!Ue||Ue.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?je&&mc(je.elementType)&&(It=gu):It=Af;if(It&&(It=It(l,je))){so(tt,It,h,Ye);break e}pn&&pn(l,Fe,je),l==="focusout"&&je&&Fe.type==="number"&&je.memoizedProps.value!=null&&Jo(Fe,"number",Fe.value)}switch(pn=je?ni(je):window,l){case"focusin":(Qn(pn)||pn.contentEditable==="true")&&(_a=pn,jo=je,cs=null);break;case"focusout":cs=jo=_a=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,Or(tt,h,Ye);break;case"selectionchange":if(Il)break;case"keydown":case"keyup":Or(tt,h,Ye)}var Pt;if(pt)e:{switch(l){case"compositionstart":var qt="onCompositionStart";break e;case"compositionend":qt="onCompositionEnd";break e;case"compositionupdate":qt="onCompositionUpdate";break e}qt=void 0}else Ut?Me(l,h)&&(qt="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(qt="onCompositionStart");qt&&($&&h.locale!=="ko"&&(Ut||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&Ut&&(Pt=vc()):(ya=Ye,ts="value"in ya?ya.value:ya.textContent,Ut=!0)),pn=bp(je,qt),0<pn.length&&(qt=new ks(qt,l,null,h,Ye),tt.push({event:qt,listeners:pn}),Pt?qt.data=Pt:(Pt=ot(h),Pt!==null&&(qt.data=Pt)))),(Pt=U?hn(l,h):Qt(l,h))&&(qt=bp(je,"onBeforeInput"),0<qt.length&&(pn=new ks("onBeforeInput","beforeinput",null,h,Ye),tt.push({event:pn,listeners:qt}),pn.data=Pt)),yC(tt,l,je,h,Ye)}Yb(tt,u)})}function h0(l,u,h){return{instance:l,listener:u,currentTarget:h}}function bp(l,u){for(var h=u+"Capture",v=[];l!==null;){var A=l,O=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||O===null||(A=Fi(l,h),A!=null&&v.unshift(h0(l,A,O)),A=Fi(l,u),A!=null&&v.push(h0(l,A,O))),l.tag===3)return v;l=l.return}return[]}function Wd(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Kb(l,u,h,v,A){for(var O=u._reactName,Z=[];h!==null&&h!==v;){var ue=h,ye=ue.alternate,je=ue.stateNode;if(ue=ue.tag,ye!==null&&ye===v)break;ue!==5&&ue!==26&&ue!==27||je===null||(ye=je,A?(je=Fi(h,O),je!=null&&Z.unshift(h0(h,je,ye))):A||(je=Fi(h,O),je!=null&&Z.push(h0(h,je,ye)))),h=h.return}Z.length!==0&&l.push({event:u,listeners:Z})}var _C=/\r\n?/g,AC=/\u0000|\uFFFD/g;function Qb(l){return(typeof l=="string"?l:""+l).replace(_C,`
`).replace(AC,"")}function Zb(l,u){return u=Qb(u),Qb(l)===u}function wp(){}function pr(l,u,h,v,A,O){switch(h){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||ma(l,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&ma(l,""+v);break;case"className":Va(l,"class",v);break;case"tabIndex":Va(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(l,h,v);break;case"style":gc(l,v,O);break;case"data":if(u!=="object"){Va(l,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(h);break}v=Oo(""+v),l.setAttribute(h,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(h==="formAction"?(u!=="input"&&pr(l,u,"name",A.name,A,null),pr(l,u,"formEncType",A.formEncType,A,null),pr(l,u,"formMethod",A.formMethod,A,null),pr(l,u,"formTarget",A.formTarget,A,null)):(pr(l,u,"encType",A.encType,A,null),pr(l,u,"method",A.method,A,null),pr(l,u,"target",A.target,A,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(h);break}v=Oo(""+v),l.setAttribute(h,v);break;case"onClick":v!=null&&(l.onclick=wp);break;case"onScroll":v!=null&&wn("scroll",l);break;case"onScrollEnd":v!=null&&wn("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(h=v.__html,h!=null){if(A.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}h=Oo(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,""+v):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":v===!0?l.setAttribute(h,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,v):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(h,v):l.removeAttribute(h);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(h):l.setAttribute(h,v);break;case"popover":wn("beforetoggle",l),wn("toggle",l),za(l,"popover",v);break;case"xlinkActuate":ri(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ri(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ri(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ri(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ri(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ri(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ri(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ri(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ri(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":za(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Do.get(h)||h,za(l,h,v))}}function M2(l,u,h,v,A,O){switch(h){case"style":gc(l,v,O);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(h=v.__html,h!=null){if(A.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof v=="string"?ma(l,v):(typeof v=="number"||typeof v=="bigint")&&ma(l,""+v);break;case"onScroll":v!=null&&wn("scroll",l);break;case"onScrollEnd":v!=null&&wn("scrollend",l);break;case"onClick":v!=null&&(l.onclick=wp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(A=h.endsWith("Capture"),u=h.slice(2,A?h.length-7:void 0),O=l[$n]||null,O=O!=null?O[h]:null,typeof O=="function"&&l.removeEventListener(u,O,A),typeof v=="function")){typeof O!="function"&&O!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,v,A);break e}h in l?l[h]=v:v===!0?l.setAttribute(h,""):za(l,h,v)}}}function oa(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",l),wn("load",l);var v=!1,A=!1,O;for(O in h)if(h.hasOwnProperty(O)){var Z=h[O];if(Z!=null)switch(O){case"src":v=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:pr(l,u,O,Z,h,null)}}A&&pr(l,u,"srcSet",h.srcSet,h,null),v&&pr(l,u,"src",h.src,h,null);return;case"input":wn("invalid",l);var ue=O=Z=A=null,ye=null,je=null;for(v in h)if(h.hasOwnProperty(v)){var Ye=h[v];if(Ye!=null)switch(v){case"name":A=Ye;break;case"type":Z=Ye;break;case"checked":ye=Ye;break;case"defaultChecked":je=Ye;break;case"value":O=Ye;break;case"defaultValue":ue=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,u));break;default:pr(l,u,v,Ye,h,null)}}Zo(l,O,ue,ye,je,Z,A,!1),Qo(l);return;case"select":wn("invalid",l),v=Z=O=null;for(A in h)if(h.hasOwnProperty(A)&&(ue=h[A],ue!=null))switch(A){case"value":O=ue;break;case"defaultValue":Z=ue;break;case"multiple":v=ue;default:pr(l,u,A,ue,h,null)}u=O,h=Z,l.multiple=!!v,u!=null?eo(l,!!v,u,!1):h!=null&&eo(l,!!v,h,!0);return;case"textarea":wn("invalid",l),O=A=v=null;for(Z in h)if(h.hasOwnProperty(Z)&&(ue=h[Z],ue!=null))switch(Z){case"value":v=ue;break;case"defaultValue":A=ue;break;case"children":O=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(91));break;default:pr(l,u,Z,ue,h,null)}es(l,v,A,O),Qo(l);return;case"option":for(ye in h)if(h.hasOwnProperty(ye)&&(v=h[ye],v!=null))switch(ye){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:pr(l,u,ye,v,h,null)}return;case"dialog":wn("beforetoggle",l),wn("toggle",l),wn("cancel",l),wn("close",l);break;case"iframe":case"object":wn("load",l);break;case"video":case"audio":for(v=0;v<d0.length;v++)wn(d0[v],l);break;case"image":wn("error",l),wn("load",l);break;case"details":wn("toggle",l);break;case"embed":case"source":case"link":wn("error",l),wn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(je in h)if(h.hasOwnProperty(je)&&(v=h[je],v!=null))switch(je){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:pr(l,u,je,v,h,null)}return;default:if(mc(u)){for(Ye in h)h.hasOwnProperty(Ye)&&(v=h[Ye],v!==void 0&&M2(l,u,Ye,v,h,void 0));return}}for(ue in h)h.hasOwnProperty(ue)&&(v=h[ue],v!=null&&pr(l,u,ue,v,h,null))}function SC(l,u,h,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,O=null,Z=null,ue=null,ye=null,je=null,Ye=null;for(Ue in h){var tt=h[Ue];if(h.hasOwnProperty(Ue)&&tt!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":ye=tt;default:v.hasOwnProperty(Ue)||pr(l,u,Ue,null,v,tt)}}for(var Fe in v){var Ue=v[Fe];if(tt=h[Fe],v.hasOwnProperty(Fe)&&(Ue!=null||tt!=null))switch(Fe){case"type":O=Ue;break;case"name":A=Ue;break;case"checked":je=Ue;break;case"defaultChecked":Ye=Ue;break;case"value":Z=Ue;break;case"defaultValue":ue=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,u));break;default:Ue!==tt&&pr(l,u,Fe,Ue,v,tt)}}Ii(l,Z,ue,ye,je,Ye,O,A);return;case"select":Ue=Z=ue=Fe=null;for(O in h)if(ye=h[O],h.hasOwnProperty(O)&&ye!=null)switch(O){case"value":break;case"multiple":Ue=ye;default:v.hasOwnProperty(O)||pr(l,u,O,null,v,ye)}for(A in v)if(O=v[A],ye=h[A],v.hasOwnProperty(A)&&(O!=null||ye!=null))switch(A){case"value":Fe=O;break;case"defaultValue":ue=O;break;case"multiple":Z=O;default:O!==ye&&pr(l,u,A,O,v,ye)}u=ue,h=Z,v=Ue,Fe!=null?eo(l,!!h,Fe,!1):!!v!=!!h&&(u!=null?eo(l,!!h,u,!0):eo(l,!!h,h?[]:"",!1));return;case"textarea":Ue=Fe=null;for(ue in h)if(A=h[ue],h.hasOwnProperty(ue)&&A!=null&&!v.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:pr(l,u,ue,null,v,A)}for(Z in v)if(A=v[Z],O=h[Z],v.hasOwnProperty(Z)&&(A!=null||O!=null))switch(Z){case"value":Fe=A;break;case"defaultValue":Ue=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==O&&pr(l,u,Z,A,v,O)}Fn(l,Fe,Ue);return;case"option":for(var Xt in h)if(Fe=h[Xt],h.hasOwnProperty(Xt)&&Fe!=null&&!v.hasOwnProperty(Xt))switch(Xt){case"selected":l.selected=!1;break;default:pr(l,u,Xt,null,v,Fe)}for(ye in v)if(Fe=v[ye],Ue=h[ye],v.hasOwnProperty(ye)&&Fe!==Ue&&(Fe!=null||Ue!=null))switch(ye){case"selected":l.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:pr(l,u,ye,Fe,v,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zt in h)Fe=h[zt],h.hasOwnProperty(zt)&&Fe!=null&&!v.hasOwnProperty(zt)&&pr(l,u,zt,null,v,Fe);for(je in v)if(Fe=v[je],Ue=h[je],v.hasOwnProperty(je)&&Fe!==Ue&&(Fe!=null||Ue!=null))switch(je){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,u));break;default:pr(l,u,je,Fe,v,Ue)}return;default:if(mc(u)){for(var gr in h)Fe=h[gr],h.hasOwnProperty(gr)&&Fe!==void 0&&!v.hasOwnProperty(gr)&&M2(l,u,gr,void 0,v,Fe);for(Ye in v)Fe=v[Ye],Ue=h[Ye],!v.hasOwnProperty(Ye)||Fe===Ue||Fe===void 0&&Ue===void 0||M2(l,u,Ye,Fe,v,Ue);return}}for(var De in h)Fe=h[De],h.hasOwnProperty(De)&&Fe!=null&&!v.hasOwnProperty(De)&&pr(l,u,De,null,v,Fe);for(tt in v)Fe=v[tt],Ue=h[tt],!v.hasOwnProperty(tt)||Fe===Ue||Fe==null&&Ue==null||pr(l,u,tt,Fe,v,Ue)}var j2=null,B2=null;function _p(l){return l.nodeType===9?l:l.ownerDocument}function Jb(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ew(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function F2(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var U2=null;function EC(){var l=window.event;return l&&l.type==="popstate"?l===U2?!1:(U2=l,!0):(U2=null,!1)}var tw=typeof setTimeout=="function"?setTimeout:void 0,CC=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,IC=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(l){return nw.resolve(null).then(l).catch(TC)}:tw;function TC(l){setTimeout(function(){throw l})}function Bu(l){return l==="head"}function rw(l,u){var h=u,v=0,A=0;do{var O=h.nextSibling;if(l.removeChild(h),O&&O.nodeType===8)if(h=O.data,h==="/$"){if(0<v&&8>v){h=v;var Z=l.ownerDocument;if(h&1&&p0(Z.documentElement),h&2&&p0(Z.body),h&4)for(h=Z.head,p0(h),Z=h.firstChild;Z;){var ue=Z.nextSibling,ye=Z.nodeName;Z[Ji]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||h.removeChild(Z),Z=ue}}if(A===0){l.removeChild(O),_0(u);return}A--}else h==="$"||h==="$?"||h==="$!"?A++:v=h.charCodeAt(0)-48;else v=0;h=O}while(h);_0(u)}function z2(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":z2(h),vi(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function RC(l,u,h,v){for(;l.nodeType===1;){var A=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Ji])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==A.rel||l.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||l.getAttribute("title")!==(A.title==null?null:A.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(A.src==null?null:A.src)||l.getAttribute("type")!==(A.type==null?null:A.type)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var O=A.name==null?null:""+A.name;if(A.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=Zs(l.nextSibling),l===null)break}return null}function NC(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Zs(l.nextSibling),l===null))return null;return l}function V2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function DC(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var v=function(){u(),h.removeEventListener("DOMContentLoaded",v)};h.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Zs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var q2=null;function iw(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function aw(l,u,h){switch(u=_p(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function p0(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);vi(l)}var xs=new Map,ow=new Set;function Ap(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Vc=z.d;z.d={f:OC,r:kC,D:PC,C:LC,L:MC,m:jC,X:FC,S:BC,M:UC};function OC(){var l=Vc.f(),u=pp();return l||u}function kC(l){var u=$r(l);u!==null&&u.tag===5&&u.type==="form"?Ff(u):Vc.r(l)}var Gd=typeof document>"u"?null:document;function sw(l,u,h){var v=Gd;if(v&&typeof u=="string"&&u){var A=En(u);A='link[rel="'+l+'"][href="'+A+'"]',typeof h=="string"&&(A+='[crossorigin="'+h+'"]'),ow.has(A)||(ow.add(A),l={rel:l,crossOrigin:h,href:u},v.querySelector(A)===null&&(u=v.createElement("link"),oa(u,"link",l),Bn(u),v.head.appendChild(u)))}}function PC(l){Vc.D(l),sw("dns-prefetch",l,null)}function LC(l,u){Vc.C(l,u),sw("preconnect",l,u)}function MC(l,u,h){Vc.L(l,u,h);var v=Gd;if(v&&l&&u){var A='link[rel="preload"][as="'+En(u)+'"]';u==="image"&&h&&h.imageSrcSet?(A+='[imagesrcset="'+En(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(A+='[imagesizes="'+En(h.imageSizes)+'"]')):A+='[href="'+En(l)+'"]';var O=A;switch(u){case"style":O=$d(l);break;case"script":O=Yd(l)}xs.has(O)||(l=d({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),xs.set(O,l),v.querySelector(A)!==null||u==="style"&&v.querySelector(g0(O))||u==="script"&&v.querySelector(m0(O))||(u=v.createElement("link"),oa(u,"link",l),Bn(u),v.head.appendChild(u)))}}function jC(l,u){Vc.m(l,u);var h=Gd;if(h&&l){var v=u&&typeof u.as=="string"?u.as:"script",A='link[rel="modulepreload"][as="'+En(v)+'"][href="'+En(l)+'"]',O=A;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Yd(l)}if(!xs.has(O)&&(l=d({rel:"modulepreload",href:l},u),xs.set(O,l),h.querySelector(A)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(m0(O)))return}v=h.createElement("link"),oa(v,"link",l),Bn(v),h.head.appendChild(v)}}}function BC(l,u,h){Vc.S(l,u,h);var v=Gd;if(v&&l){var A=fr(v).hoistableStyles,O=$d(l);u=u||"default";var Z=A.get(O);if(!Z){var ue={loading:0,preload:null};if(Z=v.querySelector(g0(O)))ue.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":u},h),(h=xs.get(O))&&H2(l,h);var ye=Z=v.createElement("link");Bn(ye),oa(ye,"link",l),ye._p=new Promise(function(je,Ye){ye.onload=je,ye.onerror=Ye}),ye.addEventListener("load",function(){ue.loading|=1}),ye.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,Sp(Z,u,v)}Z={type:"stylesheet",instance:Z,count:1,state:ue},A.set(O,Z)}}}function FC(l,u){Vc.X(l,u);var h=Gd;if(h&&l){var v=fr(h).hoistableScripts,A=Yd(l),O=v.get(A);O||(O=h.querySelector(m0(A)),O||(l=d({src:l,async:!0},u),(u=xs.get(A))&&W2(l,u),O=h.createElement("script"),Bn(O),oa(O,"link",l),h.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},v.set(A,O))}}function UC(l,u){Vc.M(l,u);var h=Gd;if(h&&l){var v=fr(h).hoistableScripts,A=Yd(l),O=v.get(A);O||(O=h.querySelector(m0(A)),O||(l=d({src:l,async:!0,type:"module"},u),(u=xs.get(A))&&W2(l,u),O=h.createElement("script"),Bn(O),oa(O,"link",l),h.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},v.set(A,O))}}function lw(l,u,h,v){var A=(A=he.current)?Ap(A):null;if(!A)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=$d(h.href),h=fr(A).hoistableStyles,v=h.get(u),v||(v={type:"style",instance:null,count:0,state:null},h.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=$d(h.href);var O=fr(A).hoistableStyles,Z=O.get(l);if(Z||(A=A.ownerDocument||A,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,Z),(O=A.querySelector(g0(l)))&&!O._p&&(Z.instance=O,Z.state.loading=5),xs.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},xs.set(l,h),O||zC(A,l,h,Z.state))),u&&v===null)throw Error(r(528,""));return Z}if(u&&v!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Yd(h),h=fr(A).hoistableScripts,v=h.get(u),v||(v={type:"script",instance:null,count:0,state:null},h.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function $d(l){return'href="'+En(l)+'"'}function g0(l){return'link[rel="stylesheet"]['+l+"]"}function cw(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function zC(l,u,h,v){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=l.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),oa(u,"link",h),Bn(u),l.head.appendChild(u))}function Yd(l){return'[src="'+En(l)+'"]'}function m0(l){return"script[async]"+l}function uw(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var v=l.querySelector('style[data-href~="'+En(h.href)+'"]');if(v)return u.instance=v,Bn(v),v;var A=d({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Bn(v),oa(v,"style",A),Sp(v,h.precedence,l),u.instance=v;case"stylesheet":A=$d(h.href);var O=l.querySelector(g0(A));if(O)return u.state.loading|=4,u.instance=O,Bn(O),O;v=cw(h),(A=xs.get(A))&&H2(v,A),O=(l.ownerDocument||l).createElement("link"),Bn(O);var Z=O;return Z._p=new Promise(function(ue,ye){Z.onload=ue,Z.onerror=ye}),oa(O,"link",v),u.state.loading|=4,Sp(O,h.precedence,l),u.instance=O;case"script":return O=Yd(h.src),(A=l.querySelector(m0(O)))?(u.instance=A,Bn(A),A):(v=h,(A=xs.get(O))&&(v=d({},h),W2(v,A)),l=l.ownerDocument||l,A=l.createElement("script"),Bn(A),oa(A,"link",v),l.head.appendChild(A),u.instance=A);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,Sp(v,h.precedence,l));return u.instance}function Sp(l,u,h){for(var v=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=v.length?v[v.length-1]:null,O=A,Z=0;Z<v.length;Z++){var ue=v[Z];if(ue.dataset.precedence===u)O=ue;else if(O!==A)break}O?O.parentNode.insertBefore(l,O.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function H2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function W2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Ep=null;function fw(l,u,h){if(Ep===null){var v=new Map,A=Ep=new Map;A.set(h,v)}else A=Ep,v=A.get(h),v||(v=new Map,A.set(h,v));if(v.has(l))return v;for(v.set(l,null),h=h.getElementsByTagName(l),A=0;A<h.length;A++){var O=h[A];if(!(O[Ji]||O[Gn]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=O.getAttribute(u)||"";Z=l+Z;var ue=v.get(Z);ue?ue.push(O):v.set(Z,[O])}}return v}function dw(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function VC(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function hw(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var v0=null;function qC(){}function HC(l,u,h){if(v0===null)throw Error(r(475));var v=v0;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var A=$d(h.href),O=l.querySelector(g0(A));if(O){l=O._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(v.count++,v=Cp.bind(v),l.then(v,v)),u.state.loading|=4,u.instance=O,Bn(O);return}O=l.ownerDocument||l,h=cw(h),(A=xs.get(A))&&H2(h,A),O=O.createElement("link"),Bn(O);var Z=O;Z._p=new Promise(function(ue,ye){Z.onload=ue,Z.onerror=ye}),oa(O,"link",h),u.instance=O}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(v.count++,u=Cp.bind(v),l.addEventListener("load",u),l.addEventListener("error",u))}}function WC(){if(v0===null)throw Error(r(475));var l=v0;return l.stylesheets&&l.count===0&&G2(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&G2(l,l.stylesheets),l.unsuspend){var v=l.unsuspend;l.unsuspend=null,v()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function Cp(){if(this.count--,this.count===0){if(this.stylesheets)G2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ip=null;function G2(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ip=new Map,u.forEach(GC,l),Ip=null,Cp.call(l))}function GC(l,u){if(!(u.state.loading&4)){var h=Ip.get(l);if(h)var v=h.get(null);else{h=new Map,Ip.set(l,h);for(var A=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<A.length;O++){var Z=A[O];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(h.set(Z.dataset.precedence,Z),v=Z)}v&&h.set(null,v)}A=u.instance,Z=A.getAttribute("data-precedence"),O=h.get(Z)||v,O===v&&h.set(null,A),h.set(Z,A),this.count++,v=Cp.bind(this),A.addEventListener("load",v),A.addEventListener("error",v),O?O.parentNode.insertBefore(A,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(A,l.firstChild)),u.state.loading|=4}}var y0={$$typeof:B,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function $C(l,u,h,v,A,O,Z,ue){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=v,this.onUncaughtError=A,this.onCaughtError=O,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function pw(l,u,h,v,A,O,Z,ue,ye,je,Ye,tt){return l=new $C(l,u,h,Z,ue,ye,je,tt),u=1,O===!0&&(u|=24),O=qi(3,null,null,u),l.current=O,O.stateNode=l,u=zh(),u.refCount++,l.pooledCache=u,u.refCount++,O.memoizedState={element:v,isDehydrated:h,cache:u},Ae(O),l}function gw(l){return l?(l=bi,l):bi}function mw(l,u,h,v,A,O){A=gw(A),v.context===null?v.context=A:v.pendingContext=A,v=$e(u),v.payload={element:h},O=O===void 0?null:O,O!==null&&(v.callback=O),h=Je(l,v,u),h!==null&&(Go(h,l,u),Xe(h,l,u))}function vw(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function $2(l,u){vw(l,u),(l=l.alternate)&&vw(l,u)}function yw(l){if(l.tag===13){var u=Fs(l,67108864);u!==null&&Go(u,l,67108864),$2(l,67108864)}}var Tp=!0;function YC(l,u,h,v){var A=V.T;V.T=null;var O=z.p;try{z.p=2,Y2(l,u,h,v)}finally{z.p=O,V.T=A}}function XC(l,u,h,v){var A=V.T;V.T=null;var O=z.p;try{z.p=8,Y2(l,u,h,v)}finally{z.p=O,V.T=A}}function Y2(l,u,h,v){if(Tp){var A=X2(v);if(A===null)L2(l,u,v,Rp,h),bw(l,v);else if(QC(A,l,u,h,v))v.stopPropagation();else if(bw(l,v),u&4&&-1<KC.indexOf(l)){for(;A!==null;){var O=$r(A);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var Z=Kt(O.pendingLanes);if(Z!==0){var ue=O;for(ue.pendingLanes|=2,ue.entangledLanes|=2;Z;){var ye=1<<31-xt(Z);ue.entanglements[1]|=ye,Z&=~ye}Wl(O),(ir&6)===0&&(dp=dt()+500,f0(0))}}break;case 13:ue=Fs(O,2),ue!==null&&Go(ue,O,2),pp(),$2(O,2)}if(O=X2(v),O===null&&L2(l,u,v,Rp,h),O===A)break;A=O}A!==null&&v.stopPropagation()}else L2(l,u,v,null,h)}}function X2(l){return l=nr(l),K2(l)}var Rp=null;function K2(l){if(Rp=null,l=ti(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=o(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Rp=l,null}function xw(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case Ne:return 2;case Ke:return 8;case Ge:case st:return 32;case ft:return 268435456;default:return 32}default:return 32}}var Q2=!1,Fu=null,Uu=null,zu=null,x0=new Map,b0=new Map,Vu=[],KC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bw(l,u){switch(l){case"focusin":case"focusout":Fu=null;break;case"dragenter":case"dragleave":Uu=null;break;case"mouseover":case"mouseout":zu=null;break;case"pointerover":case"pointerout":x0.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":b0.delete(u.pointerId)}}function w0(l,u,h,v,A,O){return l===null||l.nativeEvent!==O?(l={blockedOn:u,domEventName:h,eventSystemFlags:v,nativeEvent:O,targetContainers:[A]},u!==null&&(u=$r(u),u!==null&&yw(u)),l):(l.eventSystemFlags|=v,u=l.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),l)}function QC(l,u,h,v,A){switch(u){case"focusin":return Fu=w0(Fu,l,u,h,v,A),!0;case"dragenter":return Uu=w0(Uu,l,u,h,v,A),!0;case"mouseover":return zu=w0(zu,l,u,h,v,A),!0;case"pointerover":var O=A.pointerId;return x0.set(O,w0(x0.get(O)||null,l,u,h,v,A)),!0;case"gotpointercapture":return O=A.pointerId,b0.set(O,w0(b0.get(O)||null,l,u,h,v,A)),!0}return!1}function ww(l){var u=ti(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=o(h),u!==null){l.blockedOn=u,Ua(l.priority,function(){if(h.tag===13){var v=Wo();v=Ei(v);var A=Fs(h,v);A!==null&&Go(A,h,v),$2(h,v)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Np(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=X2(l.nativeEvent);if(h===null){h=l.nativeEvent;var v=new h.constructor(h.type,h);to=v,h.target.dispatchEvent(v),to=null}else return u=$r(h),u!==null&&yw(u),l.blockedOn=h,!1;u.shift()}return!0}function _w(l,u,h){Np(l)&&h.delete(u)}function ZC(){Q2=!1,Fu!==null&&Np(Fu)&&(Fu=null),Uu!==null&&Np(Uu)&&(Uu=null),zu!==null&&Np(zu)&&(zu=null),x0.forEach(_w),b0.forEach(_w)}function Dp(l,u){l.blockedOn===u&&(l.blockedOn=null,Q2||(Q2=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ZC)))}var Op=null;function Aw(l){Op!==l&&(Op=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Op===l&&(Op=null);for(var u=0;u<l.length;u+=3){var h=l[u],v=l[u+1],A=l[u+2];if(typeof v!="function"){if(K2(v||h)===null)continue;break}var O=$r(h);O!==null&&(l.splice(u,3),u-=3,ms(O,{pending:!0,data:A,method:h.method,action:v},v,A))}}))}function _0(l){function u(ye){return Dp(ye,l)}Fu!==null&&Dp(Fu,l),Uu!==null&&Dp(Uu,l),zu!==null&&Dp(zu,l),x0.forEach(u),b0.forEach(u);for(var h=0;h<Vu.length;h++){var v=Vu[h];v.blockedOn===l&&(v.blockedOn=null)}for(;0<Vu.length&&(h=Vu[0],h.blockedOn===null);)ww(h),h.blockedOn===null&&Vu.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(v=0;v<h.length;v+=3){var A=h[v],O=h[v+1],Z=A[$n]||null;if(typeof O=="function")Z||Aw(h);else if(Z){var ue=null;if(O&&O.hasAttribute("formAction")){if(A=O,Z=O[$n]||null)ue=Z.formAction;else if(K2(A)!==null)continue}else ue=Z.action;typeof ue=="function"?h[v+1]=ue:(h.splice(v,3),v-=3),Aw(h)}}}function Z2(l){this._internalRoot=l}kp.prototype.render=Z2.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,v=Wo();mw(h,v,l,u,null,null)},kp.prototype.unmount=Z2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;mw(l.current,2,null,l,null,null),pp(),u[yr]=null}};function kp(l){this._internalRoot=l}kp.prototype.unstable_scheduleHydration=function(l){if(l){var u=vr();l={blockedOn:null,target:l,priority:u};for(var h=0;h<Vu.length&&u!==0&&u<Vu[h].priority;h++);Vu.splice(h,0,l),h===0&&ww(l)}};var Sw=e.version;if(Sw!=="19.1.0")throw Error(r(527,Sw,"19.1.0"));z.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var JC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pp.isDisabled&&Pp.supportsFiber)try{yt=Pp.inject(JC),_t=Pp}catch{}}return S0.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,v="",A=Ux,O=zx,Z=Vx,ue=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(Z=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ue=u.unstable_transitionCallbacks)),u=pw(l,1,!1,null,null,h,v,A,O,Z,ue,null),l[yr]=u.current,P2(l),new Z2(u)},S0.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var v=!1,A="",O=Ux,Z=zx,ue=Vx,ye=null,je=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onUncaughtError!==void 0&&(O=h.onUncaughtError),h.onCaughtError!==void 0&&(Z=h.onCaughtError),h.onRecoverableError!==void 0&&(ue=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(ye=h.unstable_transitionCallbacks),h.formState!==void 0&&(je=h.formState)),u=pw(l,1,!0,u,h??null,v,A,O,Z,ue,ye,je),u.context=gw(null),h=u.current,v=Wo(),v=Ei(v),A=$e(v),A.callback=null,Je(h,A,v),h=v,u.current.lanes=h,ur(u,h),Wl(u),l[yr]=u.current,P2(l),new kp(u)},S0.version="19.1.0",S0}var Pw;function tA(){if(Pw)return tv.exports;Pw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tv.exports=lI(),tv.exports}var cI=tA();const uI=eA(cI);var E0={},Lw;function fI(){if(Lw)return E0;Lw=1,Object.defineProperty(E0,"__esModule",{value:!0}),E0.parse=o,E0.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,m){const b=new a,_=g.length;if(_<2)return b;const I=(m==null?void 0:m.decode)||d;let C=0;do{const D=g.indexOf("=",C);if(D===-1)break;const B=g.indexOf(";",C),q=B===-1?_:B;if(D>q){C=g.lastIndexOf(";",D-1)+1;continue}const Y=s(g,C,D),H=c(g,D,Y),P=g.slice(Y,H);if(b[P]===void 0){let S=s(g,D+1,q),R=c(g,q,S);const M=I(g.slice(S,R));b[P]=M}C=q+1}while(C<_);return b}function s(g,m,b){do{const _=g.charCodeAt(m);if(_!==32&&_!==9)return m}while(++m<b);return b}function c(g,m,b){for(;m>b;){const _=g.charCodeAt(--m);if(_!==32&&_!==9)return m+1}return b}function f(g,m,b){const _=(b==null?void 0:b.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const I=_(m);if(!e.test(I))throw new TypeError(`argument val is invalid: ${m}`);let C=g+"="+I;if(!b)return C;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);C+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);C+="; Domain="+b.domain}if(b.path){if(!r.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);C+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);C+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(C+="; HttpOnly"),b.secure&&(C+="; Secure"),b.partitioned&&(C+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return C}function d(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return E0}fI();var Mw="popstate";function dI(n={}){function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return Yv("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:J0(i)}return pI(e,t,null,n)}function qr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function rc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hI(){return Math.random().toString(36).substring(2,10)}function jw(n,e){return{usr:n.state,key:n.key,idx:e}}function Yv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Nh(e):e,state:t,key:e&&e.key||r||hI()}}function J0({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Nh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function pI(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",c=null,f=d();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function d(){return(o.state||{idx:null}).idx}function p(){s="POP";let I=d(),C=I==null?null:I-f;f=I,c&&c({action:s,location:_.location,delta:C})}function g(I,C){s="PUSH";let D=Yv(_.location,I,C);f=d()+1;let B=jw(D,f),q=_.createHref(D);try{o.pushState(B,"",q)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(q)}a&&c&&c({action:s,location:_.location,delta:1})}function m(I,C){s="REPLACE";let D=Yv(_.location,I,C);f=d();let B=jw(D,f),q=_.createHref(D);o.replaceState(B,"",q),a&&c&&c({action:s,location:_.location,delta:0})}function b(I){return gI(I)}let _={get action(){return s},get location(){return n(i,o)},listen(I){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Mw,p),c=I,()=>{i.removeEventListener(Mw,p),c=null}},createHref(I){return e(i,I)},createURL:b,encodeLocation(I){let C=b(I);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:m,go(I){return o.go(I)}};return _}function gI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),qr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:J0(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function nA(n,e,t="/"){return mI(n,e,t,!1)}function mI(n,e,t,r){let i=typeof e=="string"?Nh(e):e,a=Qc(i.pathname||"/",t);if(a==null)return null;let o=rA(n);vI(o);let s=null;for(let c=0;s==null&&c<o.length;++c){let f=TI(a);s=CI(o[c],f,r)}return s}function rA(n,e=[],t=[],r=""){let i=(a,o,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(qr(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=Yc([r,c.relativePath]),d=t.concat(c);a.children&&a.children.length>0&&(qr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),rA(a.children,e,d,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:SI(f,a.index),routesMeta:d})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let c of iA(a.path))i(a,o,c)}),e}function iA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=iA(r.join("/")),s=[];return s.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&s.push(...o),s.map(c=>n.startsWith("/")&&c===""?"/":c)}function vI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var yI=/^:[\w-]+$/,xI=3,bI=2,wI=1,_I=10,AI=-2,Bw=n=>n==="*";function SI(n,e){let t=n.split("/"),r=t.length;return t.some(Bw)&&(r+=AI),e&&(r+=bI),t.filter(i=>!Bw(i)).reduce((i,a)=>i+(yI.test(a)?xI:a===""?wI:_I),r)}function EI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function CI(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let c=r[s],f=s===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",p=yg({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},d),g=c.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=yg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Yc([a,p.pathname]),pathnameBase:OI(Yc([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=Yc([a,p.pathnameBase]))}return o}function yg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=II(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((f,{paramName:d,isOptional:p},g)=>{if(d==="*"){let b=s[g]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const m=s[g];return p&&!m?f[d]=void 0:f[d]=(m||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:n}}function II(n,e=!1,t=!0){rc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function TI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rc(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function RI(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Nh(n):n;return{pathname:t?t.startsWith("/")?t:NI(t,e):e,search:kI(r),hash:PI(i)}}function NI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function av(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function aA(n){let e=DI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function oA(n,e,t,r=!1){let i;typeof n=="string"?i=Nh(n):(i={...n},qr(!i.pathname||!i.pathname.includes("?"),av("?","pathname","search",i)),qr(!i.pathname||!i.pathname.includes("#"),av("#","pathname","hash",i)),qr(!i.search||!i.search.includes("#"),av("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}s=p>=0?e[p]:"/"}let c=RI(i,s),f=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}var Yc=n=>n.join("/").replace(/\/\/+/g,"/"),OI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,PI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function LI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var sA=["POST","PUT","PATCH","DELETE"];new Set(sA);var MI=["GET",...sA];new Set(MI);var Dh=de.createContext(null);Dh.displayName="DataRouter";var im=de.createContext(null);im.displayName="DataRouterState";var lA=de.createContext({isTransitioning:!1});lA.displayName="ViewTransition";var jI=de.createContext(new Map);jI.displayName="Fetchers";var BI=de.createContext(null);BI.displayName="Await";var sc=de.createContext(null);sc.displayName="Navigation";var m1=de.createContext(null);m1.displayName="Location";var au=de.createContext({outlet:null,matches:[],isDataRoute:!1});au.displayName="Route";var n5=de.createContext(null);n5.displayName="RouteError";function FI(n,{relative:e}={}){qr(v1(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=de.useContext(sc),{hash:i,pathname:a,search:o}=y1(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:Yc([t,a])),r.createHref({pathname:s,search:o,hash:i})}function v1(){return de.useContext(m1)!=null}function yf(){return qr(v1(),"useLocation() may be used only in the context of a <Router> component."),de.useContext(m1).location}var cA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uA(n){de.useContext(sc).static||de.useLayoutEffect(n)}function r5(){let{isDataRoute:n}=de.useContext(au);return n?ZI():UI()}function UI(){qr(v1(),"useNavigate() may be used only in the context of a <Router> component.");let n=de.useContext(Dh),{basename:e,navigator:t}=de.useContext(sc),{matches:r}=de.useContext(au),{pathname:i}=yf(),a=JSON.stringify(aA(r)),o=de.useRef(!1);return uA(()=>{o.current=!0}),de.useCallback((c,f={})=>{if(rc(o.current,cA),!o.current)return;if(typeof c=="number"){t.go(c);return}let d=oA(c,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Yc([e,d.pathname])),(f.replace?t.replace:t.push)(d,f.state,f)},[e,t,a,i,n])}de.createContext(null);function y1(n,{relative:e}={}){let{matches:t}=de.useContext(au),{pathname:r}=yf(),i=JSON.stringify(aA(t));return de.useMemo(()=>oA(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function zI(n,e){return fA(n,e)}function fA(n,e,t,r){var C;qr(v1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=de.useContext(sc),{matches:a}=de.useContext(au),o=a[a.length-1],s=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",d=o&&o.route;{let D=d&&d.path||"";dA(c,!d||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let p=yf(),g;if(e){let D=typeof e=="string"?Nh(e):e;qr(f==="/"||((C=D.pathname)==null?void 0:C.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${D.pathname}" was given in the \`location\` prop.`),g=D}else g=p;let m=g.pathname||"/",b=m;if(f!=="/"){let D=f.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(D.length).join("/")}let _=nA(n,{pathname:b});rc(d||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),rc(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=GI(_&&_.map(D=>Object.assign({},D,{params:Object.assign({},s,D.params),pathname:Yc([f,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?f:Yc([f,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),a,t,r);return e&&I?de.createElement(m1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},I):I}function VI(){let n=QI(),e=LI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=de.createElement(de.Fragment,null,de.createElement("p",null,"💿 Hey developer 👋"),de.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",de.createElement("code",{style:a},"ErrorBoundary")," or"," ",de.createElement("code",{style:a},"errorElement")," prop on your route.")),de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},e),t?de.createElement("pre",{style:i},t):null,o)}var qI=de.createElement(VI,null),HI=class extends de.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?de.createElement(au.Provider,{value:this.props.routeContext},de.createElement(n5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WI({routeContext:n,match:e,children:t}){let r=de.useContext(Dh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),de.createElement(au.Provider,{value:n},t)}function GI(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let c=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);qr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,s=-1;if(t)for(let c=0;c<i.length;c++){let f=i[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(s=c),f.route.id){let{loaderData:d,errors:p}=t,g=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((c,f,d)=>{let p,g=!1,m=null,b=null;t&&(p=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||qI,o&&(s<0&&d===0?(dA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):s===d&&(g=!0,b=f.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,d+1)),I=()=>{let C;return p?C=m:g?C=b:f.route.Component?C=de.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=c,de.createElement(WI,{match:f,routeContext:{outlet:c,matches:_,isDataRoute:t!=null},children:C})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?de.createElement(HI,{location:t.location,revalidation:t.revalidation,component:m,error:p,children:I(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):I()},null)}function i5(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $I(n){let e=de.useContext(Dh);return qr(e,i5(n)),e}function YI(n){let e=de.useContext(im);return qr(e,i5(n)),e}function XI(n){let e=de.useContext(au);return qr(e,i5(n)),e}function a5(n){let e=XI(n),t=e.matches[e.matches.length-1];return qr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function KI(){return a5("useRouteId")}function QI(){var r;let n=de.useContext(n5),e=YI("useRouteError"),t=a5("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function ZI(){let{router:n}=$I("useNavigate"),e=a5("useNavigate"),t=de.useRef(!1);return uA(()=>{t.current=!0}),de.useCallback(async(i,a={})=>{rc(t.current,cA),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Fw={};function dA(n,e,t){!e&&!Fw[n]&&(Fw[n]=!0,rc(!1,t))}de.memo(JI);function JI({routes:n,future:e,state:t}){return fA(n,void 0,t,e)}function Xa(n){qr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){qr(!v1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=de.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Nh(t));let{pathname:c="/",search:f="",hash:d="",state:p=null,key:g="default"}=t,m=de.useMemo(()=>{let b=Qc(c,o);return b==null?null:{location:{pathname:b,search:f,hash:d,state:p,key:g},navigationType:r}},[o,c,f,d,p,g,r]);return rc(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:de.createElement(sc.Provider,{value:s},de.createElement(m1.Provider,{children:e,value:m}))}function tT({children:n,location:e}){return zI(Xv(n),e)}function Xv(n,e=[]){let t=[];return de.Children.forEach(n,(r,i)=>{if(!de.isValidElement(r))return;let a=[...e,i];if(r.type===de.Fragment){t.push.apply(t,Xv(r.props.children,a));return}qr(r.type===Xa,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xv(r.props.children,a)),t.push(o)}),t}var Zp="get",Jp="application/x-www-form-urlencoded";function am(n){return n!=null&&typeof n.tagName=="string"}function nT(n){return am(n)&&n.tagName.toLowerCase()==="button"}function rT(n){return am(n)&&n.tagName.toLowerCase()==="form"}function iT(n){return am(n)&&n.tagName.toLowerCase()==="input"}function aT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oT(n,e){return n.button===0&&(!e||e==="_self")&&!aT(n)}var Lp=null;function sT(){if(Lp===null)try{new FormData(document.createElement("form"),0),Lp=!1}catch{Lp=!0}return Lp}var lT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ov(n){return n!=null&&!lT.has(n)?(rc(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jp}"`),null):n}function cT(n,e){let t,r,i,a,o;if(rT(n)){let s=n.getAttribute("action");r=s?Qc(s,e):null,t=n.getAttribute("method")||Zp,i=ov(n.getAttribute("enctype"))||Jp,a=new FormData(n)}else if(nT(n)||iT(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||s.getAttribute("action");if(r=c?Qc(c,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||Zp,i=ov(n.getAttribute("formenctype"))||ov(s.getAttribute("enctype"))||Jp,a=new FormData(s,n),!sT()){let{name:f,type:d,value:p}=n;if(d==="image"){let g=f?`${f}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else f&&a.append(f,p)}}else{if(am(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zp,r=null,i=Jp,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function o5(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function uT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dT(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await uT(a,t);return o.links?o.links():[]}return[]}));return mT(r.flat(1).filter(fT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Uw(n,e,t,r,i,a){let o=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,s=(c,f)=>{var d;return t[f].pathname!==c.pathname||((d=t[f].route.path)==null?void 0:d.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,f)=>o(c,f)||s(c,f)):a==="data"?e.filter((c,f)=>{var p;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,f)||s(c,f))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function hT(n,e,{includeHydrateFallback:t}={}){return pT(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function pT(n){return[...new Set(n)]}function gT(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function mT(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(gT(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vT=new Set([100,101,204,205]);function yT(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Qc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function hA(){let n=de.useContext(Dh);return o5(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function xT(){let n=de.useContext(im);return o5(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var s5=de.createContext(void 0);s5.displayName="FrameworkContext";function pA(){let n=de.useContext(s5);return o5(n,"You must render this element inside a <HydratedRouter> element"),n}function bT(n,e){let t=de.useContext(s5),[r,i]=de.useState(!1),[a,o]=de.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:f,onMouseLeave:d,onTouchStart:p}=e,g=de.useRef(null);de.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let _=C=>{C.forEach(D=>{o(D.isIntersecting)})},I=new IntersectionObserver(_,{threshold:.5});return g.current&&I.observe(g.current),()=>{I.disconnect()}}},[n]),de.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let m=()=>{i(!0)},b=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,g,{}]:[a,g,{onFocus:C0(s,m),onBlur:C0(c,b),onMouseEnter:C0(f,m),onMouseLeave:C0(d,b),onTouchStart:C0(p,m)}]:[!1,g,{}]}function C0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function wT({page:n,...e}){let{router:t}=hA(),r=de.useMemo(()=>nA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?de.createElement(AT,{page:n,matches:r,...e}):null}function _T(n){let{manifest:e,routeModules:t}=pA(),[r,i]=de.useState([]);return de.useEffect(()=>{let a=!1;return dT(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function AT({page:n,matches:e,...t}){let r=yf(),{manifest:i,routeModules:a}=pA(),{basename:o}=hA(),{loaderData:s,matches:c}=xT(),f=de.useMemo(()=>Uw(n,e,c,i,r,"data"),[n,e,c,i,r]),d=de.useMemo(()=>Uw(n,e,c,i,r,"assets"),[n,e,c,i,r]),p=de.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let b=new Set,_=!1;if(e.forEach(C=>{var B;let D=i.routes[C.route.id];!D||!D.hasLoader||(!f.some(q=>q.route.id===C.route.id)&&C.route.id in s&&((B=a[C.route.id])!=null&&B.shouldRevalidate)||D.hasClientLoader?_=!0:b.add(C.route.id))}),b.size===0)return[];let I=yT(n,o);return _&&b.size>0&&I.searchParams.set("_routes",e.filter(C=>b.has(C.route.id)).map(C=>C.route.id).join(",")),[I.pathname+I.search]},[o,s,r,i,f,e,n,a]),g=de.useMemo(()=>hT(d,i),[d,i]),m=_T(d);return de.createElement(de.Fragment,null,p.map(b=>de.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),g.map(b=>de.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),m.map(({key:b,link:_})=>de.createElement("link",{key:b,..._})))}function ST(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var gA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gA&&(window.__reactRouterVersion="7.6.2")}catch{}function ET({basename:n,children:e,window:t}){let r=de.useRef();r.current==null&&(r.current=dI({window:t,v5Compat:!0}));let i=r.current,[a,o]=de.useState({action:i.action,location:i.location}),s=de.useCallback(c=>{de.startTransition(()=>o(c))},[o]);return de.useLayoutEffect(()=>i.listen(s),[i,s]),de.createElement(eT,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var mA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,On=de.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:c,to:f,preventScrollReset:d,viewTransition:p,...g},m){let{basename:b}=de.useContext(sc),_=typeof f=="string"&&mA.test(f),I,C=!1;if(typeof f=="string"&&_&&(I=f,gA))try{let R=new URL(window.location.href),M=f.startsWith("//")?new URL(R.protocol+f):new URL(f),T=Qc(M.pathname,b);M.origin===R.origin&&T!=null?f=T+M.search+M.hash:C=!0}catch{rc(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=FI(f,{relative:i}),[B,q,Y]=bT(r,g),H=RT(f,{replace:o,state:s,target:c,preventScrollReset:d,relative:i,viewTransition:p});function P(R){e&&e(R),R.defaultPrevented||H(R)}let S=de.createElement("a",{...g,...Y,href:I||D,onClick:C||a?e:P,ref:ST(m,q),target:c,"data-discover":!_&&t==="render"?"true":void 0});return B&&!_?de.createElement(de.Fragment,null,S,de.createElement(wT,{page:D})):S});On.displayName="Link";var CT=de.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:c,...f},d){let p=y1(o,{relative:f.relative}),g=yf(),m=de.useContext(im),{navigator:b,basename:_}=de.useContext(sc),I=m!=null&&PT(p)&&s===!0,C=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,D=g.pathname,B=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(D=D.toLowerCase(),B=B?B.toLowerCase():null,C=C.toLowerCase()),B&&_&&(B=Qc(B,_)||B);const q=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let Y=D===C||!i&&D.startsWith(C)&&D.charAt(q)==="/",H=B!=null&&(B===C||!i&&B.startsWith(C)&&B.charAt(C.length)==="/"),P={isActive:Y,isPending:H,isTransitioning:I},S=Y?e:void 0,R;typeof r=="function"?R=r(P):R=[r,Y?"active":null,H?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(P):a;return de.createElement(On,{...f,"aria-current":S,className:R,ref:d,style:M,to:o,viewTransition:s},typeof c=="function"?c(P):c)});CT.displayName="NavLink";var IT=de.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Zp,action:s,onSubmit:c,relative:f,preventScrollReset:d,viewTransition:p,...g},m)=>{let b=OT(),_=kT(s,{relative:f}),I=o.toLowerCase()==="get"?"get":"post",C=typeof s=="string"&&mA.test(s),D=B=>{if(c&&c(B),B.defaultPrevented)return;B.preventDefault();let q=B.nativeEvent.submitter,Y=(q==null?void 0:q.getAttribute("formmethod"))||o;b(q||B.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:i,state:a,relative:f,preventScrollReset:d,viewTransition:p})};return de.createElement("form",{ref:m,method:I,action:_,onSubmit:r?c:D,...g,"data-discover":!C&&n==="render"?"true":void 0})});IT.displayName="Form";function TT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vA(n){let e=de.useContext(Dh);return qr(e,TT(n)),e}function RT(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=r5(),c=yf(),f=y1(n,{relative:a});return de.useCallback(d=>{if(oT(d,e)){d.preventDefault();let p=t!==void 0?t:J0(c)===J0(f);s(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[c,s,f,t,r,e,n,i,a,o])}var NT=0,DT=()=>`__${String(++NT)}__`;function OT(){let{router:n}=vA("useSubmit"),{basename:e}=de.useContext(sc),t=KI();return de.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:c,body:f}=cT(r,e);if(i.navigate===!1){let d=i.fetcherKey||DT();await n.fetch(d,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function kT(n,{relative:e}={}){let{basename:t}=de.useContext(sc),r=de.useContext(au);qr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...y1(n||".",{relative:e})},o=yf();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(d=>d==="")){s.delete("index"),c.filter(p=>p).forEach(p=>s.append("index",p));let d=s.toString();a.search=d?`?${d}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Yc([t,a.pathname])),J0(a)}function PT(n,e={}){let t=de.useContext(lA);qr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vA("useViewTransitionState"),i=y1(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Qc(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Qc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return yg(i.pathname,o)!=null||yg(i.pathname,a)!=null}[...vT];const LT=()=>{};var zw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},MT=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},xA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,d=a>>2,p=(a&3)<<4|s>>4;let g=(s&15)<<2|f>>6,m=f&63;c||(m=64,o||(g=64)),r.push(t[d],t[p],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||f==null||p==null)throw new jT;const g=a<<2|s>>4;if(r.push(g),f!==64){const m=s<<4&240|f>>2;if(r.push(m),p!==64){const b=f<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BT=function(n){const e=yA(n);return xA.encodeByteArray(e,!0)},xg=function(n){return BT(n).replace(/\./g,"")},bA=function(n){try{return xA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=()=>FT().__FIREBASE_DEFAULTS__,zT=()=>{if(typeof process>"u"||typeof zw>"u")return;const n=zw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&bA(n[1]);return e&&JSON.parse(e)},om=()=>{try{return LT()||UT()||zT()||VT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wA=n=>{var e,t;return(t=(e=om())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},_A=n=>{const e=wA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},AA=()=>{var n;return(n=om())===null||n===void 0?void 0:n.config},SA=n=>{var e;return(e=om())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(n){return n.endsWith(".cloudworkstations.dev")}async function l5(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xg(JSON.stringify(t)),xg(JSON.stringify(o)),""].join(".")}const H0={};function HT(){const n={prod:[],emulator:[]};for(const e of Object.keys(H0))H0[e]?n.emulator.push(e):n.prod.push(e);return n}function WT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Vw=!1;function c5(n,e){if(typeof window>"u"||typeof document>"u"||!Oh(window.location.host)||H0[n]===e||H0[n]||Vw)return;H0[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=HT().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function s(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Vw=!0,o()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=WT(r),m=t("text"),b=document.getElementById(m)||document.createElement("span"),_=t("learnmore"),I=document.getElementById(_)||document.createElement("a"),C=t("preprendIcon"),D=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const B=g.element;s(B),d(I,_);const q=f();c(D,C),B.append(D,b,I,q),document.body.appendChild(B)}a?(b.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ba())}function $T(){var n;const e=(n=om())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KT(){const n=Ba();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QT(){return!$T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IA(){try{return typeof indexedDB=="object"}catch{return!1}}function TA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function ZT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="FirebaseError";class Cs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JT,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pd.prototype.create)}}class pd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?e7(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new Cs(i,s,r)}}function e7(n,e){return n.replace(t7,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const t7=/\{\$([^}]+)}/g;function n7(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function cf(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(qw(a)&&qw(o)){if(!cf(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function qw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function P0(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function L0(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function r7(n,e){const t=new i7(n,e);return t.subscribe.bind(t)}class i7{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");a7(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=sv),i.error===void 0&&(i.error=sv),i.complete===void 0&&(i.complete=sv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a7(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=1e3,s7=2,l7=4*60*60*1e3,c7=.5;function Hw(n,e=o7,t=s7){const r=e*Math.pow(t,n),i=Math.round(c7*r*(Math.random()-.5)*2);return Math.min(l7,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(n){return n&&n._delegate?n._delegate:n}class Es{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new qT;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d7(e))try{this.getOrInitializeService({instanceIdentifier:$f})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=$f){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$f){return this.instances.has(e)}getOptions(e=$f){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:f7(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$f){return this.component?this.component.multipleInstances?e:$f:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f7(n){return n===$f?void 0:n}function d7(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new u7(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_n||(_n={}));const p7={debug:_n.DEBUG,verbose:_n.VERBOSE,info:_n.INFO,warn:_n.WARN,error:_n.ERROR,silent:_n.SILENT},g7=_n.INFO,m7={[_n.DEBUG]:"log",[_n.VERBOSE]:"log",[_n.INFO]:"info",[_n.WARN]:"warn",[_n.ERROR]:"error"},v7=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=m7[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sm{constructor(e){this.name=e,this._logLevel=g7,this._logHandler=v7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _n))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_n.DEBUG,...e),this._logHandler(this,_n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_n.VERBOSE,...e),this._logHandler(this,_n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_n.INFO,...e),this._logHandler(this,_n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_n.WARN,...e),this._logHandler(this,_n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_n.ERROR,...e),this._logHandler(this,_n.ERROR,...e)}}const y7=(n,e)=>e.some(t=>n instanceof t);let Ww,Gw;function x7(){return Ww||(Ww=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b7(){return Gw||(Gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RA=new WeakMap,Kv=new WeakMap,NA=new WeakMap,lv=new WeakMap,u5=new WeakMap;function w7(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(nf(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&RA.set(t,n)}).catch(()=>{}),u5.set(e,n),e}function _7(n){if(Kv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Kv.set(n,e)}let Qv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nf(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function A7(n){Qv=n(Qv)}function S7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cv(this),e,...t);return NA.set(r,e.sort?e.sort():[e]),nf(r)}:b7().includes(n)?function(...e){return n.apply(cv(this),e),nf(RA.get(this))}:function(...e){return nf(n.apply(cv(this),e))}}function E7(n){return typeof n=="function"?S7(n):(n instanceof IDBTransaction&&_7(n),y7(n,x7())?new Proxy(n,Qv):n)}function nf(n){if(n instanceof IDBRequest)return w7(n);if(lv.has(n))return lv.get(n);const e=E7(n);return e!==n&&(lv.set(n,e),u5.set(e,n)),e}const cv=n=>u5.get(n);function DA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=nf(o);return r&&o.addEventListener("upgradeneeded",c=>{r(nf(o.result),c.oldVersion,c.newVersion,nf(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),s.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),s}const C7=["get","getKey","getAll","getAllKeys","count"],I7=["put","add","delete","clear"],uv=new Map;function $w(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(uv.get(e))return uv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=I7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||C7.includes(t)))return;const a=async function(o,...s){const c=this.transaction(o,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(s.shift())),(await Promise.all([f[t](...s),i&&c.done]))[0]};return uv.set(e,a),a}A7(n=>({...n,get:(e,t,r)=>$w(e,t)||n.get(e,t,r),has:(e,t)=>!!$w(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(R7(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function R7(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zv="@firebase/app",Yw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new sm("@firebase/app"),N7="@firebase/app-compat",D7="@firebase/analytics-compat",O7="@firebase/analytics",k7="@firebase/app-check-compat",P7="@firebase/app-check",L7="@firebase/auth",M7="@firebase/auth-compat",j7="@firebase/database",B7="@firebase/data-connect",F7="@firebase/database-compat",U7="@firebase/functions",z7="@firebase/functions-compat",V7="@firebase/installations",q7="@firebase/installations-compat",H7="@firebase/messaging",W7="@firebase/messaging-compat",G7="@firebase/performance",$7="@firebase/performance-compat",Y7="@firebase/remote-config",X7="@firebase/remote-config-compat",K7="@firebase/storage",Q7="@firebase/storage-compat",Z7="@firebase/firestore",J7="@firebase/ai",eR="@firebase/firestore-compat",tR="firebase",nR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="[DEFAULT]",rR={[Zv]:"fire-core",[N7]:"fire-core-compat",[O7]:"fire-analytics",[D7]:"fire-analytics-compat",[P7]:"fire-app-check",[k7]:"fire-app-check-compat",[L7]:"fire-auth",[M7]:"fire-auth-compat",[j7]:"fire-rtdb",[B7]:"fire-data-connect",[F7]:"fire-rtdb-compat",[U7]:"fire-fn",[z7]:"fire-fn-compat",[V7]:"fire-iid",[q7]:"fire-iid-compat",[H7]:"fire-fcm",[W7]:"fire-fcm-compat",[G7]:"fire-perf",[$7]:"fire-perf-compat",[Y7]:"fire-rc",[X7]:"fire-rc-compat",[K7]:"fire-gcs",[Q7]:"fire-gcs-compat",[Z7]:"fire-fst",[eR]:"fire-fst-compat",[J7]:"fire-vertex","fire-js":"fire-js",[tR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=new Map,iR=new Map,ey=new Map;function Xw(n,e){try{n.container.addComponent(e)}catch(t){Zc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ul(n){const e=n.name;if(ey.has(e))return Zc.debug(`There were multiple attempts to register component ${e}.`),!1;ey.set(e,n);for(const t of bg.values())Xw(t,n);for(const t of iR.values())Xw(t,n);return!0}function xf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $o(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rf=new pd("app","Firebase",aR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=nR;function OA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw rf.create("bad-app-name",{appName:String(i)});if(t||(t=AA()),!t)throw rf.create("no-options");const a=bg.get(i);if(a){if(cf(t,a.options)&&cf(r,a.config))return a;throw rf.create("duplicate-app",{appName:i})}const o=new h7(i);for(const c of ey.values())o.addComponent(c);const s=new oR(t,r,o);return bg.set(i,s),s}function lm(n=Jv){const e=bg.get(n);if(!e&&n===Jv&&AA())return OA();if(!e)throw rf.create("no-app",{appName:n});return e}function wo(n,e,t){var r;let i=(r=rR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zc.warn(s.join(" "));return}ul(new Es(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="firebase-heartbeat-database",lR=1,e1="firebase-heartbeat-store";let fv=null;function kA(){return fv||(fv=DA(sR,lR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(e1)}catch(t){console.warn(t)}}}}).catch(n=>{throw rf.create("idb-open",{originalErrorMessage:n.message})})),fv}async function cR(n){try{const t=(await kA()).transaction(e1),r=await t.objectStore(e1).get(PA(n));return await t.done,r}catch(e){if(e instanceof Cs)Zc.warn(e.message);else{const t=rf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zc.warn(t.message)}}}async function Kw(n,e){try{const r=(await kA()).transaction(e1,"readwrite");await r.objectStore(e1).put(e,PA(n)),await r.done}catch(t){if(t instanceof Cs)Zc.warn(t.message);else{const r=rf.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zc.warn(r.message)}}}function PA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=1024,fR=30;class dR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Qw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>fR){const o=gR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Qw(),{heartbeatsToSend:r,unsentEntries:i}=hR(this._heartbeatsCache.heartbeats),a=xg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Zc.warn(t),""}}}function Qw(){return new Date().toISOString().substring(0,10)}function hR(n,e=uR){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),Zw(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Zw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class pR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IA()?TA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zw(n){return xg(JSON.stringify({version:2,heartbeats:n})).length}function gR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(n){ul(new Es("platform-logger",e=>new T7(e),"PRIVATE")),ul(new Es("heartbeat",e=>new dR(e),"PRIVATE")),wo(Zv,Yw,n),wo(Zv,Yw,"esm2017"),wo("fire-js","")}mR("");function f5(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function LA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vR=LA,MA=new pd("auth","Firebase",LA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=new sm("@firebase/auth");function yR(n,...e){wg.logLevel<=_n.WARN&&wg.warn(`Auth (${gd}): ${n}`,...e)}function eg(n,...e){wg.logLevel<=_n.ERROR&&wg.error(`Auth (${gd}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n,...e){throw d5(n,...e)}function Ql(n,...e){return d5(n,...e)}function jA(n,e,t){const r=Object.assign(Object.assign({},vR()),{[e]:t});return new pd("auth","Firebase",r).create(e,{appName:n.name})}function Xc(n){return jA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d5(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return MA.create(n,...e)}function $t(n,e,...t){if(!n)throw d5(e,...t)}function Wc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw eg(e),new Error(e)}function Jc(n,e){n||Wc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function xR(){return Jw()==="http:"||Jw()==="https:"}function Jw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xR()||CA()||"connection"in navigator)?navigator.onLine:!0}function wR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jc(t>e,"Short delay should be less than long delay!"),this.isMobile=GT()||XT()}get(){return bR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(n,e){Jc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SR=new b1(3e4,6e4);function ou(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function su(n,e,t,r,i={}){return FA(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=x1(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:c},a);return YT()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Oh(n.emulatorConfig.host)&&(f.credentials="include"),BA.fetch()(await UA(n,n.config.apiHost,t,s),f)})}async function FA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},_R),e);try{const i=new CR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Mp(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[c,f]=s.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mp(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Mp(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Mp(n,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw jA(n,d,f);fl(n,d)}}catch(i){if(i instanceof Cs)throw i;fl(n,"network-request-failed",{message:String(i)})}}async function w1(n,e,t,r,i={}){const a=await su(n,e,t,r,i);return"mfaPendingCredential"in a&&fl(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function UA(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?h5(n.config,i):`${n.config.apiScheme}://${i}`;return AR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function ER(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ql(this.auth,"network-request-failed")),SR.get())})}}function Mp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ql(n,e,r);return i.customData._tokenResponse=t,i}function e3(n){return n!==void 0&&n.enterprise!==void 0}class IR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ER(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TR(n,e){return su(n,"GET","/v2/recaptchaConfig",ou(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(n,e){return su(n,"POST","/v1/accounts:delete",e)}async function _g(n,e){return su(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NR(n,e=!1){const t=Hr(n),r=await t.getIdToken(e),i=p5(r);$t(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:W0(dv(i.auth_time)),issuedAtTime:W0(dv(i.iat)),expirationTime:W0(dv(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function dv(n){return Number(n)*1e3}function p5(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return eg("JWT malformed, contained fewer than 3 sections"),null;try{const i=bA(t);return i?JSON.parse(i):(eg("Failed to decode base64 JWT payload"),null)}catch(i){return eg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function t3(n){const e=p5(n);return $t(e,"internal-error"),$t(typeof e.exp<"u","internal-error"),$t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Cs&&DR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function DR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=W0(this.lastLoginAt),this.creationTime=W0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ag(n){var e;const t=n.auth,r=await n.getIdToken(),i=await t1(n,_g(t,{idToken:r}));$t(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?zA(a.providerUserInfo):[],s=PR(n.providerData,o),c=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),d=c?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new ny(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function kR(n){const e=Hr(n);await Ag(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zA(n){return n.map(e=>{var{providerId:t}=e,r=f5(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(n,e){const t=await FA(n,{},async()=>{const r=x1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await UA(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",BA.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MR(n,e){return su(n,"POST","/v2/accounts:revokeToken",ou(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$t(e.idToken,"internal-error"),$t(typeof e.idToken<"u","internal-error"),$t(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$t(e.length!==0,"internal-error");const t=t3(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await LR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new fh;return r&&($t(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($t(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&($t(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fh,this.toJSON())}_performRefresh(){return Wc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(n,e){$t(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sl{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=f5(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ny(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await t1(this,this.stsTokenManager.getToken(this.auth,e));return $t(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return NR(this,e)}reload(){return kR(this)}_assign(e){this!==e&&($t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ag(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($o(this.auth.app))return Promise.reject(Xc(this.auth));const e=await this.getIdToken();return await t1(this,RR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,c,f,d;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,b=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(s=t.tenantId)!==null&&s!==void 0?s:void 0,I=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,C=(f=t.createdAt)!==null&&f!==void 0?f:void 0,D=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:B,emailVerified:q,isAnonymous:Y,providerData:H,stsTokenManager:P}=t;$t(B&&P,e,"internal-error");const S=fh.fromJSON(this.name,P);$t(typeof B=="string",e,"internal-error"),Hu(p,e.name),Hu(g,e.name),$t(typeof q=="boolean",e,"internal-error"),$t(typeof Y=="boolean",e,"internal-error"),Hu(m,e.name),Hu(b,e.name),Hu(_,e.name),Hu(I,e.name),Hu(C,e.name),Hu(D,e.name);const R=new sl({uid:B,auth:e,email:g,emailVerified:q,displayName:p,isAnonymous:Y,photoURL:b,phoneNumber:m,tenantId:_,stsTokenManager:S,createdAt:C,lastLoginAt:D});return H&&Array.isArray(H)&&(R.providerData=H.map(M=>Object.assign({},M))),I&&(R._redirectEventId=I),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new fh;i.updateFromServerResponse(t);const a=new sl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ag(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];$t(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?zA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new fh;s.updateFromIdToken(r);const c=new sl({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ny(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new Map;function Gc(n){Jc(n instanceof Function,"Expected a class definition");let e=n3.get(n);return e?(Jc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,n3.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VA.type="NONE";const r3=VA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n,e,t){return`firebase:${n}:${e}:${t}`}class dh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=tg(this.userKey,i.apiKey,a),this.fullPersistenceKey=tg("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _g(this.auth,{idToken:e}).catch(()=>{});return t?sl._fromGetAccountInfoResponse(this.auth,t,e):null}return sl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new dh(Gc(r3),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||Gc(r3);const o=tg(r,e.config.apiKey,e.name);let s=null;for(const f of t)try{const d=await f._get(o);if(d){let p;if(typeof d=="string"){const g=await _g(e,{idToken:d}).catch(()=>{});if(!g)break;p=await sl._fromGetAccountInfoResponse(e,g,d)}else p=sl._fromJSON(e,d);f!==a&&(s=p),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new dh(a,e,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new dh(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YA(e))return"Blackberry";if(XA(e))return"Webos";if(HA(e))return"Safari";if((e.includes("chrome/")||WA(e))&&!e.includes("edge/"))return"Chrome";if($A(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qA(n=Ba()){return/firefox\//i.test(n)}function HA(n=Ba()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WA(n=Ba()){return/crios\//i.test(n)}function GA(n=Ba()){return/iemobile/i.test(n)}function $A(n=Ba()){return/android/i.test(n)}function YA(n=Ba()){return/blackberry/i.test(n)}function XA(n=Ba()){return/webos/i.test(n)}function g5(n=Ba()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jR(n=Ba()){var e;return g5(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BR(){return KT()&&document.documentMode===10}function KA(n=Ba()){return g5(n)||$A(n)||XA(n)||YA(n)||/windows phone/i.test(n)||GA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n,e=[]){let t;switch(n){case"Browser":t=i3(Ba());break;case"Worker":t=`${i3(Ba())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const c=e(a);o(c)}catch(c){s(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(n,e={}){return su(n,"GET","/v2/passwordPolicy",ou(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=6;class VR{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:zR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a3(this),this.idTokenSubscription=new a3(this),this.beforeStateQueue=new FR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gc(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await dh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _g(this,{idToken:e}),r=await sl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($o(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ag(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($o(this.app))return Promise.reject(Xc(this));const t=e?Hr(e):null;return t&&$t(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $o(this.app)?Promise.reject(Xc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $o(this.app)?Promise.reject(Xc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UR(this),t=new VR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await MR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gc(e)||this._popupRedirectResolver;$t(t,this,"argument-error"),this.redirectPersistenceManager=await dh.create(this,[Gc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if($t(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if($o(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&yR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function bf(n){return Hr(n)}class a3{constructor(e){this.auth=e,this.observer=null,this.addObserver=r7(t=>this.observer=t)}get next(){return $t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HR(n){cm=n}function ZA(n){return cm.loadJS(n)}function WR(){return cm.recaptchaEnterpriseScript}function GR(){return cm.gapiScript}function $R(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class YR{constructor(){this.enterprise=new XR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class XR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const KR="recaptcha-enterprise",JA="NO_RECAPTCHA";class QR{constructor(e){this.type=KR,this.auth=bf(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{TR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const f=new IR(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(c=>{s(c)})})}function i(a,o,s){const c=window.grecaptcha;e3(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(JA)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YR().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&e3(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=WR();c.length!==0&&(c+=s),ZA(c).then(()=>{i(s,a,o)}).catch(f=>{o(f)})}}).catch(s=>{o(s)})})}}async function o3(n,e,t,r=!1,i=!1){const a=new QR(n);let o;if(i)o=JA;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const s=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const c=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const c=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Sg(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await o3(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await o3(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n,e){const t=xf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(cf(a,e??{}))return i;fl(i,"already-initialized")}return t.initialize({options:e})}function JR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Gc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eN(n,e,t){const r=bf(n);$t(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=e6(e),{host:o,port:s}=tN(e),c=s===null?"":`:${s}`,f={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$t(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$t(cf(f,r.config.emulator)&&cf(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Oh(o)?(l5(`${a}//${o}${c}`),c5("Auth",!0)):nN()}function e6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tN(n){const e=e6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:s3(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:s3(o)}}}function s3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wc("not implemented")}_getIdTokenResponse(e){return Wc("not implemented")}_linkToIdToken(e,t){return Wc("not implemented")}_getReauthenticationResolver(e){return Wc("not implemented")}}async function rN(n,e){return su(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(n,e){return w1(n,"POST","/v1/accounts:signInWithPassword",ou(n,e))}async function t6(n,e){return su(n,"POST","/v1/accounts:sendOobCode",ou(n,e))}async function aN(n,e){return t6(n,e)}async function oN(n,e){return t6(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(n,e){return w1(n,"POST","/v1/accounts:signInWithEmailLink",ou(n,e))}async function lN(n,e){return w1(n,"POST","/v1/accounts:signInWithEmailLink",ou(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1 extends m5{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n1(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n1(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sg(e,t,"signInWithPassword",iN);case"emailLink":return sN(e,{email:this._email,oobCode:this._password});default:fl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sg(e,r,"signUpPassword",rN);case"emailLink":return lN(e,{idToken:t,email:this._email,oobCode:this._password});default:fl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(n,e){return w1(n,"POST","/v1/accounts:signInWithIdp",ou(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="http://localhost";class ad extends m5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ad(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=f5(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ad(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return hh(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hh(e,t)}buildRequest(){const e={requestUri:cN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=x1(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fN(n){const e=P0(L0(n)).link,t=e?P0(L0(e)).deep_link_id:null,r=P0(L0(n)).deep_link_id;return(r?P0(L0(r)).link:null)||r||t||e||n}class v5{constructor(e){var t,r,i,a,o,s;const c=P0(L0(e)),f=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,p=uN((i=c.mode)!==null&&i!==void 0?i:null);$t(f&&d&&p,"argument-error"),this.apiKey=f,this.operation=p,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(s=c.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=fN(e);try{return new v5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.providerId=kh.PROVIDER_ID}static credential(e,t){return n1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=v5.parseLink(t);return $t(r,"argument-error"),n1._fromEmailAndCode(e,r.code,r.tenantId)}}kh.PROVIDER_ID="password";kh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1 extends n6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends _1{constructor(){super("facebook.com")}static credential(e){return ad._fromParams({providerId:Ku.PROVIDER_ID,signInMethod:Ku.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ku.credentialFromTaggedObject(e)}static credentialFromError(e){return Ku.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ku.credential(e.oauthAccessToken)}catch{return null}}}Ku.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ku.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends _1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ad._fromParams({providerId:Qu.PROVIDER_ID,signInMethod:Qu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qu.credentialFromTaggedObject(e)}static credentialFromError(e){return Qu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qu.credential(t,r)}catch{return null}}}Qu.GOOGLE_SIGN_IN_METHOD="google.com";Qu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends _1{constructor(){super("github.com")}static credential(e){return ad._fromParams({providerId:Zu.PROVIDER_ID,signInMethod:Zu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zu.credentialFromTaggedObject(e)}static credentialFromError(e){return Zu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zu.credential(e.oauthAccessToken)}catch{return null}}}Zu.GITHUB_SIGN_IN_METHOD="github.com";Zu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends _1{constructor(){super("twitter.com")}static credential(e,t){return ad._fromParams({providerId:Ju.PROVIDER_ID,signInMethod:Ju.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ju.credentialFromTaggedObject(e)}static credentialFromError(e){return Ju.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ju.credential(t,r)}catch{return null}}}Ju.TWITTER_SIGN_IN_METHOD="twitter.com";Ju.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(n,e){return w1(n,"POST","/v1/accounts:signUp",ou(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await sl._fromIdTokenResponse(e,r,i),o=l3(r);return new od({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=l3(r);return new od({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function l3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends Cs{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Eg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Eg(e,t,r,i)}}function r6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Eg._fromErrorAndOperation(n,a,e,r):a})}async function hN(n,e,t=!1){const r=await t1(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return od._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e,t=!1){const{auth:r}=n;if($o(r.app))return Promise.reject(Xc(r));const i="reauthenticate";try{const a=await t1(n,r6(r,i,e,n),t);$t(a.idToken,r,"internal-error");const o=p5(a.idToken);$t(o,r,"internal-error");const{sub:s}=o;return $t(n.uid===s,r,"user-mismatch"),od._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&fl(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i6(n,e,t=!1){if($o(n.app))return Promise.reject(Xc(n));const r="signIn",i=await r6(n,r,e),a=await od._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function gN(n,e){return i6(bf(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(n){const e=bf(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mN(n,e,t){const r=bf(n);await Sg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",oN)}async function vN(n,e,t){if($o(n.app))return Promise.reject(Xc(n));const r=bf(n),o=await Sg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&a6(n),c}),s=await od._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function yN(n,e,t){return $o(n.app)?Promise.reject(Xc(n)):gN(Hr(n),kh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&a6(n),r})}async function xN(n,e){const t=Hr(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await aN(t.auth,i);a!==n.email&&await n.reload()}function bN(n,e,t,r){return Hr(n).onIdTokenChanged(e,t,r)}function wN(n,e,t){return Hr(n).beforeAuthStateChanged(e,t)}function _N(n,e,t,r){return Hr(n).onAuthStateChanged(e,t,r)}function AN(n){return Hr(n).signOut()}const Cg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cg,"1"),this.storage.removeItem(Cg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1e3,EN=10;class s6 extends o6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);BR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,EN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}s6.type="LOCAL";const CN=s6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6 extends o6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}l6.type="SESSION";const c6=l6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new um(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async f=>f(t.origin,a)),c=await IN(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}um.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,c)=>{const f=y5("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(g.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(){return window}function RN(n){Zl().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(){return typeof Zl().WorkerGlobalScope<"u"&&typeof Zl().importScripts=="function"}async function NN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ON(){return u6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="firebaseLocalStorageDb",kN=1,Ig="firebaseLocalStorage",d6="fbase_key";class A1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fm(n,e){return n.transaction([Ig],e?"readwrite":"readonly").objectStore(Ig)}function PN(){const n=indexedDB.deleteDatabase(f6);return new A1(n).toPromise()}function ry(){const n=indexedDB.open(f6,kN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ig,{keyPath:d6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ig)?e(r):(r.close(),await PN(),e(await ry()))})})}async function c3(n,e,t){const r=fm(n,!0).put({[d6]:e,value:t});return new A1(r).toPromise()}async function LN(n,e){const t=fm(n,!1).get(e),r=await new A1(t).toPromise();return r===void 0?null:r.value}function u3(n,e){const t=fm(n,!0).delete(e);return new A1(t).toPromise()}const MN=800,jN=3;class h6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ry(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>jN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return u6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=um._getInstance(ON()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await NN(),!this.activeServiceWorker)return;this.sender=new TN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ry();return await c3(e,Cg,"1"),await u3(e,Cg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>c3(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>LN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>u3(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=fm(i,!1).getAll();return new A1(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}h6.type="LOCAL";const BN=h6;new b1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n,e){return e?Gc(e):($t(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5 extends m5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UN(n){return i6(n.auth,new x5(n),n.bypassAuthState)}function zN(n){const{auth:e,user:t}=n;return $t(t,e,"internal-error"),pN(t,new x5(n),n.bypassAuthState)}async function VN(n){const{auth:e,user:t}=n;return $t(t,e,"internal-error"),hN(t,new x5(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UN;case"linkViaPopup":case"linkViaRedirect":return VN;case"reauthViaPopup":case"reauthViaRedirect":return zN;default:fl(this.auth,"internal-error")}}resolve(e){Jc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new b1(2e3,1e4);class oh extends p6{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,oh.currentPopupAction&&oh.currentPopupAction.cancel(),oh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $t(e,this.auth,"internal-error"),e}async onExecution(){Jc(this.filter.length===1,"Popup operations only handle one event");const e=y5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ql(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ql(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ql(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qN.get())};e()}}oh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="pendingRedirect",ng=new Map;class WN extends p6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ng.get(this.auth._key());if(!e){try{const r=await GN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ng.set(this.auth._key(),e)}return this.bypassAuthState||ng.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GN(n,e){const t=XN(e),r=YN(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function $N(n,e){ng.set(n._key(),e)}function YN(n){return Gc(n._redirectPersistence)}function XN(n){return tg(HN,n.config.apiKey,n.name)}async function KN(n,e,t=!1){if($o(n.app))return Promise.reject(Xc(n));const r=bf(n),i=FN(r,e),o=await new WN(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=10*60*1e3;class ZN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!g6(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ql(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QN&&this.cachedEventUids.clear(),this.cachedEventUids.has(f3(e))}saveEventToCache(e){this.cachedEventUids.add(f3(e)),this.lastProcessedEventTime=Date.now()}}function f3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function g6({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g6(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e9(n,e={}){return su(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n9=/^https?/;async function r9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await e9(n);for(const t of e)try{if(i9(t))return}catch{}fl(n,"unauthorized-domain")}function i9(n){const e=ty(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!n9.test(t))return!1;if(t9.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=new b1(3e4,6e4);function d3(){const n=Zl().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function o9(n){return new Promise((e,t)=>{var r,i,a;function o(){d3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d3(),t(Ql(n,"network-request-failed"))},timeout:a9.get()})}if(!((i=(r=Zl().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Zl().gapi)===null||a===void 0)&&a.load)o();else{const s=$R("iframefcb");return Zl()[s]=()=>{gapi.load?o():t(Ql(n,"network-request-failed"))},ZA(`${GR()}?onload=${s}`).catch(c=>t(c))}}).catch(e=>{throw rg=null,e})}let rg=null;function s9(n){return rg=rg||o9(n),rg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=new b1(5e3,15e3),c9="__/auth/iframe",u9="emulator/auth/iframe",f9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h9(n){const e=n.config;$t(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?h5(e,u9):`https://${n.config.authDomain}/${c9}`,r={apiKey:e.apiKey,appName:n.name,v:gd},i=d9.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${x1(r).slice(1)}`}async function p9(n){const e=await s9(n),t=Zl().gapi;return $t(t,n,"internal-error"),e.open({where:document.body,url:h9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f9,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Ql(n,"network-request-failed"),s=Zl().setTimeout(()=>{a(o)},l9.get());function c(){Zl().clearTimeout(s),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m9=500,v9=600,y9="_blank",x9="http://localhost";class h3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function b9(n,e,t,r=m9,i=v9){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const c=Object.assign(Object.assign({},g9),{width:r.toString(),height:i.toString(),top:a,left:o}),f=Ba().toLowerCase();t&&(s=WA(f)?y9:t),qA(f)&&(e=e||x9,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[m,b])=>`${g}${m}=${b},`,"");if(jR(f)&&s!=="_self")return w9(e||"",s),new h3(null);const p=window.open(e||"",s,d);$t(p,n,"popup-blocked");try{p.focus()}catch{}return new h3(p)}function w9(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="__/auth/handler",A9="emulator/auth/handler",S9=encodeURIComponent("fac");async function p3(n,e,t,r,i,a){$t(n.config.authDomain,n,"auth-domain-config-required"),$t(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:gd,eventId:i};if(e instanceof n6){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",n7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof _1){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const d of Object.keys(s))s[d]===void 0&&delete s[d];const c=await n._getAppCheckToken(),f=c?`#${S9}=${encodeURIComponent(c)}`:"";return`${E9(n)}?${x1(s).slice(1)}${f}`}function E9({config:n}){return n.emulator?h5(n,A9):`https://${n.authDomain}/${_9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="webStorageSupport";class C9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c6,this._completeRedirectFn=KN,this._overrideRedirectResult=$N}async _openPopup(e,t,r,i){var a;Jc((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await p3(e,t,r,ty(),i);return b9(e,o,y5())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await p3(e,t,r,ty(),i);return RN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Jc(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await p9(e),r=new ZN(e);return t.register("authEvent",i=>($t(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hv,{type:hv},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[hv];o!==void 0&&t(!!o),fl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=r9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KA()||HA()||g5()}}const I9=C9;var g3="@firebase/auth",m3="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N9(n){ul(new Es("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;$t(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QA(n)},f=new qR(r,i,a,c);return JR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ul(new Es("auth-internal",e=>{const t=bf(e.getProvider("auth").getImmediate());return(r=>new T9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wo(g3,m3,R9(n)),wo(g3,m3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=5*60,O9=SA("authIdTokenMaxAge")||D9;let v3=null;const k9=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>O9)return;const i=t==null?void 0:t.token;v3!==i&&(v3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function P9(n=lm()){const e=xf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ZR(n,{popupRedirectResolver:I9,persistence:[BN,CN,c6]}),r=SA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=k9(a.toString());wN(t,o,()=>o(t.currentUser)),bN(t,s=>o(s))}}const i=wA("auth");return i&&eN(t,`http://${i}`),t}function L9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}HR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Ql("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",L9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N9("Browser");var y3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var af,m6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function R(){}R.prototype=S.prototype,P.D=S.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(M,T,N){for(var L=Array(arguments.length-2),F=2;F<arguments.length;F++)L[F-2]=arguments[F];return S.prototype[T].apply(M,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,S,R){R||(R=0);var M=Array(16);if(typeof S=="string")for(var T=0;16>T;++T)M[T]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(T=0;16>T;++T)M[T]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=P.g[0],R=P.g[1],T=P.g[2];var N=P.g[3],L=S+(N^R&(T^N))+M[0]+3614090360&4294967295;S=R+(L<<7&4294967295|L>>>25),L=N+(T^S&(R^T))+M[1]+3905402710&4294967295,N=S+(L<<12&4294967295|L>>>20),L=T+(R^N&(S^R))+M[2]+606105819&4294967295,T=N+(L<<17&4294967295|L>>>15),L=R+(S^T&(N^S))+M[3]+3250441966&4294967295,R=T+(L<<22&4294967295|L>>>10),L=S+(N^R&(T^N))+M[4]+4118548399&4294967295,S=R+(L<<7&4294967295|L>>>25),L=N+(T^S&(R^T))+M[5]+1200080426&4294967295,N=S+(L<<12&4294967295|L>>>20),L=T+(R^N&(S^R))+M[6]+2821735955&4294967295,T=N+(L<<17&4294967295|L>>>15),L=R+(S^T&(N^S))+M[7]+4249261313&4294967295,R=T+(L<<22&4294967295|L>>>10),L=S+(N^R&(T^N))+M[8]+1770035416&4294967295,S=R+(L<<7&4294967295|L>>>25),L=N+(T^S&(R^T))+M[9]+2336552879&4294967295,N=S+(L<<12&4294967295|L>>>20),L=T+(R^N&(S^R))+M[10]+4294925233&4294967295,T=N+(L<<17&4294967295|L>>>15),L=R+(S^T&(N^S))+M[11]+2304563134&4294967295,R=T+(L<<22&4294967295|L>>>10),L=S+(N^R&(T^N))+M[12]+1804603682&4294967295,S=R+(L<<7&4294967295|L>>>25),L=N+(T^S&(R^T))+M[13]+4254626195&4294967295,N=S+(L<<12&4294967295|L>>>20),L=T+(R^N&(S^R))+M[14]+2792965006&4294967295,T=N+(L<<17&4294967295|L>>>15),L=R+(S^T&(N^S))+M[15]+1236535329&4294967295,R=T+(L<<22&4294967295|L>>>10),L=S+(T^N&(R^T))+M[1]+4129170786&4294967295,S=R+(L<<5&4294967295|L>>>27),L=N+(R^T&(S^R))+M[6]+3225465664&4294967295,N=S+(L<<9&4294967295|L>>>23),L=T+(S^R&(N^S))+M[11]+643717713&4294967295,T=N+(L<<14&4294967295|L>>>18),L=R+(N^S&(T^N))+M[0]+3921069994&4294967295,R=T+(L<<20&4294967295|L>>>12),L=S+(T^N&(R^T))+M[5]+3593408605&4294967295,S=R+(L<<5&4294967295|L>>>27),L=N+(R^T&(S^R))+M[10]+38016083&4294967295,N=S+(L<<9&4294967295|L>>>23),L=T+(S^R&(N^S))+M[15]+3634488961&4294967295,T=N+(L<<14&4294967295|L>>>18),L=R+(N^S&(T^N))+M[4]+3889429448&4294967295,R=T+(L<<20&4294967295|L>>>12),L=S+(T^N&(R^T))+M[9]+568446438&4294967295,S=R+(L<<5&4294967295|L>>>27),L=N+(R^T&(S^R))+M[14]+3275163606&4294967295,N=S+(L<<9&4294967295|L>>>23),L=T+(S^R&(N^S))+M[3]+4107603335&4294967295,T=N+(L<<14&4294967295|L>>>18),L=R+(N^S&(T^N))+M[8]+1163531501&4294967295,R=T+(L<<20&4294967295|L>>>12),L=S+(T^N&(R^T))+M[13]+2850285829&4294967295,S=R+(L<<5&4294967295|L>>>27),L=N+(R^T&(S^R))+M[2]+4243563512&4294967295,N=S+(L<<9&4294967295|L>>>23),L=T+(S^R&(N^S))+M[7]+1735328473&4294967295,T=N+(L<<14&4294967295|L>>>18),L=R+(N^S&(T^N))+M[12]+2368359562&4294967295,R=T+(L<<20&4294967295|L>>>12),L=S+(R^T^N)+M[5]+4294588738&4294967295,S=R+(L<<4&4294967295|L>>>28),L=N+(S^R^T)+M[8]+2272392833&4294967295,N=S+(L<<11&4294967295|L>>>21),L=T+(N^S^R)+M[11]+1839030562&4294967295,T=N+(L<<16&4294967295|L>>>16),L=R+(T^N^S)+M[14]+4259657740&4294967295,R=T+(L<<23&4294967295|L>>>9),L=S+(R^T^N)+M[1]+2763975236&4294967295,S=R+(L<<4&4294967295|L>>>28),L=N+(S^R^T)+M[4]+1272893353&4294967295,N=S+(L<<11&4294967295|L>>>21),L=T+(N^S^R)+M[7]+4139469664&4294967295,T=N+(L<<16&4294967295|L>>>16),L=R+(T^N^S)+M[10]+3200236656&4294967295,R=T+(L<<23&4294967295|L>>>9),L=S+(R^T^N)+M[13]+681279174&4294967295,S=R+(L<<4&4294967295|L>>>28),L=N+(S^R^T)+M[0]+3936430074&4294967295,N=S+(L<<11&4294967295|L>>>21),L=T+(N^S^R)+M[3]+3572445317&4294967295,T=N+(L<<16&4294967295|L>>>16),L=R+(T^N^S)+M[6]+76029189&4294967295,R=T+(L<<23&4294967295|L>>>9),L=S+(R^T^N)+M[9]+3654602809&4294967295,S=R+(L<<4&4294967295|L>>>28),L=N+(S^R^T)+M[12]+3873151461&4294967295,N=S+(L<<11&4294967295|L>>>21),L=T+(N^S^R)+M[15]+530742520&4294967295,T=N+(L<<16&4294967295|L>>>16),L=R+(T^N^S)+M[2]+3299628645&4294967295,R=T+(L<<23&4294967295|L>>>9),L=S+(T^(R|~N))+M[0]+4096336452&4294967295,S=R+(L<<6&4294967295|L>>>26),L=N+(R^(S|~T))+M[7]+1126891415&4294967295,N=S+(L<<10&4294967295|L>>>22),L=T+(S^(N|~R))+M[14]+2878612391&4294967295,T=N+(L<<15&4294967295|L>>>17),L=R+(N^(T|~S))+M[5]+4237533241&4294967295,R=T+(L<<21&4294967295|L>>>11),L=S+(T^(R|~N))+M[12]+1700485571&4294967295,S=R+(L<<6&4294967295|L>>>26),L=N+(R^(S|~T))+M[3]+2399980690&4294967295,N=S+(L<<10&4294967295|L>>>22),L=T+(S^(N|~R))+M[10]+4293915773&4294967295,T=N+(L<<15&4294967295|L>>>17),L=R+(N^(T|~S))+M[1]+2240044497&4294967295,R=T+(L<<21&4294967295|L>>>11),L=S+(T^(R|~N))+M[8]+1873313359&4294967295,S=R+(L<<6&4294967295|L>>>26),L=N+(R^(S|~T))+M[15]+4264355552&4294967295,N=S+(L<<10&4294967295|L>>>22),L=T+(S^(N|~R))+M[6]+2734768916&4294967295,T=N+(L<<15&4294967295|L>>>17),L=R+(N^(T|~S))+M[13]+1309151649&4294967295,R=T+(L<<21&4294967295|L>>>11),L=S+(T^(R|~N))+M[4]+4149444226&4294967295,S=R+(L<<6&4294967295|L>>>26),L=N+(R^(S|~T))+M[11]+3174756917&4294967295,N=S+(L<<10&4294967295|L>>>22),L=T+(S^(N|~R))+M[2]+718787259&4294967295,T=N+(L<<15&4294967295|L>>>17),L=R+(N^(T|~S))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(T+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+T&4294967295,P.g[3]=P.g[3]+N&4294967295}r.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var R=S-this.blockSize,M=this.B,T=this.h,N=0;N<S;){if(T==0)for(;N<=R;)i(this,P,N),N+=this.blockSize;if(typeof P=="string"){for(;N<S;)if(M[T++]=P.charCodeAt(N++),T==this.blockSize){i(this,M),T=0;break}}else for(;N<S;)if(M[T++]=P[N++],T==this.blockSize){i(this,M),T=0;break}}this.h=T,this.o+=S},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var R=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=R&255,R/=256;for(this.u(P),P=Array(16),S=R=0;4>S;++S)for(var M=0;32>M;M+=8)P[R++]=this.g[S]>>>M&255;return P};function a(P,S){var R=s;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=S(P)}function o(P,S){this.h=S;for(var R=[],M=!0,T=P.length-1;0<=T;T--){var N=P[T]|0;M&&N==S||(R[T]=N,M=!1)}this.g=R}var s={};function c(P){return-128<=P&&128>P?a(P,function(S){return new o([S|0],0>S?-1:0)}):new o([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return I(f(-P));for(var S=[],R=1,M=0;P>=R;M++)S[M]=P/R|0,R*=4294967296;return new o(S,0)}function d(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return I(d(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=f(Math.pow(S,8)),M=p,T=0;T<P.length;T+=8){var N=Math.min(8,P.length-T),L=parseInt(P.substring(T,T+N),S);8>N?(N=f(Math.pow(S,N)),M=M.j(N).add(f(L))):(M=M.j(R),M=M.add(f(L)))}return M}var p=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(_(this))return-I(this).m();for(var P=0,S=1,R=0;R<this.g.length;R++){var M=this.i(R);P+=(0<=M?M:4294967296+M)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(_(this))return"-"+I(this).toString(P);for(var S=f(Math.pow(P,6)),R=this,M="";;){var T=q(R,S).g;R=C(R,T.j(S));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=T,b(R))return N+M;for(;6>N.length;)N="0"+N;M=N+M}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function _(P){return P.h==-1}n.l=function(P){return P=C(this,P),_(P)?-1:b(P)?0:1};function I(P){for(var S=P.g.length,R=[],M=0;M<S;M++)R[M]=~P.g[M];return new o(R,~P.h).add(g)}n.abs=function(){return _(this)?I(this):this},n.add=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],M=0,T=0;T<=S;T++){var N=M+(this.i(T)&65535)+(P.i(T)&65535),L=(N>>>16)+(this.i(T)>>>16)+(P.i(T)>>>16);M=L>>>16,N&=65535,L&=65535,R[T]=L<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function C(P,S){return P.add(I(S))}n.j=function(P){if(b(this)||b(P))return p;if(_(this))return _(P)?I(this).j(I(P)):I(I(this).j(P));if(_(P))return I(this.j(I(P)));if(0>this.l(m)&&0>P.l(m))return f(this.m()*P.m());for(var S=this.g.length+P.g.length,R=[],M=0;M<2*S;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var T=0;T<P.g.length;T++){var N=this.i(M)>>>16,L=this.i(M)&65535,F=P.i(T)>>>16,X=P.i(T)&65535;R[2*M+2*T]+=L*X,D(R,2*M+2*T),R[2*M+2*T+1]+=N*X,D(R,2*M+2*T+1),R[2*M+2*T+1]+=L*F,D(R,2*M+2*T+1),R[2*M+2*T+2]+=N*F,D(R,2*M+2*T+2)}for(M=0;M<S;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=S;M<2*S;M++)R[M]=0;return new o(R,0)};function D(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function B(P,S){this.g=P,this.h=S}function q(P,S){if(b(S))throw Error("division by zero");if(b(P))return new B(p,p);if(_(P))return S=q(I(P),S),new B(I(S.g),I(S.h));if(_(S))return S=q(P,I(S)),new B(I(S.g),S.h);if(30<P.g.length){if(_(P)||_(S))throw Error("slowDivide_ only works with positive integers.");for(var R=g,M=S;0>=M.l(P);)R=Y(R),M=Y(M);var T=H(R,1),N=H(M,1);for(M=H(M,2),R=H(R,2);!b(M);){var L=N.add(M);0>=L.l(P)&&(T=T.add(R),N=L),M=H(M,1),R=H(R,1)}return S=C(P,T.j(S)),new B(T,S)}for(T=p;0<=P.l(S);){for(R=Math.max(1,Math.floor(P.m()/S.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),N=f(R),L=N.j(S);_(L)||0<L.l(P);)R-=M,N=f(R),L=N.j(S);b(N)&&(N=g),T=T.add(N),P=C(P,L)}return new B(T,P)}n.A=function(P){return q(this,P).h},n.and=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)&P.i(M);return new o(R,this.h&P.h)},n.or=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)|P.i(M);return new o(R,this.h|P.h)},n.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)^P.i(M);return new o(R,this.h^P.h)};function Y(P){for(var S=P.g.length+1,R=[],M=0;M<S;M++)R[M]=P.i(M)<<1|P.i(M-1)>>>31;return new o(R,P.h)}function H(P,S){var R=S>>5;S%=32;for(var M=P.g.length-R,T=[],N=0;N<M;N++)T[N]=0<S?P.i(N+R)>>>S|P.i(N+R+1)<<32-S:P.i(N+R);return new o(T,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,m6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,af=o}).apply(typeof y3<"u"?y3:typeof self<"u"?self:typeof window<"u"?window:{});var jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v6,M0,y6,ig,iy,x6,b6,w6;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,U,$){return w==Array.prototype||w==Object.prototype||(w[U]=$.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof jp=="object"&&jp];for(var U=0;U<w.length;++U){var $=w[U];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var r=t(this);function i(w,U){if(U)e:{var $=r;w=w.split(".");for(var ce=0;ce<w.length-1;ce++){var Ie=w[ce];if(!(Ie in $))break e;$=$[Ie]}w=w[w.length-1],ce=$[w],U=U(ce),U!=ce&&U!=null&&e($,w,{configurable:!0,writable:!0,value:U})}}function a(w,U){w instanceof String&&(w+="");var $=0,ce=!1,Ie={next:function(){if(!ce&&$<w.length){var Me=$++;return{value:U(Me,w[Me]),done:!1}}return ce=!0,{done:!0,value:void 0}}};return Ie[Symbol.iterator]=function(){return Ie},Ie}i("Array.prototype.values",function(w){return w||function(){return a(this,function(U,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function c(w){var U=typeof w;return U=U!="object"?U:w?Array.isArray(w)?"array":U:"null",U=="array"||U=="object"&&typeof w.length=="number"}function f(w){var U=typeof w;return U=="object"&&w!=null||U=="function"}function d(w,U,$){return w.call.apply(w.bind,arguments)}function p(w,U,$){if(!w)throw Error();if(2<arguments.length){var ce=Array.prototype.slice.call(arguments,2);return function(){var Ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ie,ce),w.apply(U,Ie)}}return function(){return w.apply(U,arguments)}}function g(w,U,$){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function m(w,U){var $=Array.prototype.slice.call(arguments,1);return function(){var ce=$.slice();return ce.push.apply(ce,arguments),w.apply(this,ce)}}function b(w,U){function $(){}$.prototype=U.prototype,w.aa=U.prototype,w.prototype=new $,w.prototype.constructor=w,w.Qb=function(ce,Ie,Me){for(var ot=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)ot[Ut-2]=arguments[Ut];return U.prototype[Ie].apply(ce,ot)}}function _(w){const U=w.length;if(0<U){const $=Array(U);for(let ce=0;ce<U;ce++)$[ce]=w[ce];return $}return[]}function I(w,U){for(let $=1;$<arguments.length;$++){const ce=arguments[$];if(c(ce)){const Ie=w.length||0,Me=ce.length||0;w.length=Ie+Me;for(let ot=0;ot<Me;ot++)w[Ie+ot]=ce[ot]}else w.push(ce)}}class C{constructor(U,$){this.i=U,this.j=$,this.h=0,this.g=null}get(){let U;return 0<this.h?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}function D(w){return/^[\s\xa0]*$/.test(w)}function B(){var w=s.navigator;return w&&(w=w.userAgent)?w:""}function q(w){return q[" "](w),w}q[" "]=function(){};var Y=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function H(w,U,$){for(const ce in w)U.call($,w[ce],ce,w)}function P(w,U){for(const $ in w)U.call(void 0,w[$],$,w)}function S(w){const U={};for(const $ in w)U[$]=w[$];return U}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(w,U){let $,ce;for(let Ie=1;Ie<arguments.length;Ie++){ce=arguments[Ie];for($ in ce)w[$]=ce[$];for(let Me=0;Me<R.length;Me++)$=R[Me],Object.prototype.hasOwnProperty.call(ce,$)&&(w[$]=ce[$])}}function T(w){var U=1;w=w.split(":");const $=[];for(;0<U&&w.length;)$.push(w.shift()),U--;return w.length&&$.push(w.join(":")),$}function N(w){s.setTimeout(()=>{throw w},0)}function L(){var w=se;let U=null;return w.g&&(U=w.g,w.g=w.g.next,w.g||(w.h=null),U.next=null),U}class F{constructor(){this.h=this.g=null}add(U,$){const ce=X.get();ce.set(U,$),this.h?this.h.next=ce:this.g=ce,this.h=ce}}var X=new C(()=>new V,w=>w.reset());class V{constructor(){this.next=this.g=this.h=null}set(U,$){this.h=U,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let z,ne=!1,se=new F,Q=()=>{const w=s.Promise.resolve(void 0);z=()=>{w.then(oe)}};var oe=()=>{for(var w;w=L();){try{w.h.call(w.g)}catch($){N($)}var U=X;U.j(w),100>U.h&&(U.h++,w.next=U.g,U.g=w)}ne=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(w,U){this.type=w,this.g=this.target=U,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var w=!1,U=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const $=()=>{};s.addEventListener("test",$,U),s.removeEventListener("test",$,U)}catch{}return w}();function re(w,U){if(K.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var $=this.type=w.type,ce=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=U,U=w.relatedTarget){if(Y){e:{try{q(U.nodeName);var Ie=!0;break e}catch{}Ie=!1}Ie||(U=null)}}else $=="mouseover"?U=w.fromElement:$=="mouseout"&&(U=w.toElement);this.relatedTarget=U,ce?(this.clientX=ce.clientX!==void 0?ce.clientX:ce.pageX,this.clientY=ce.clientY!==void 0?ce.clientY:ce.pageY,this.screenX=ce.screenX||0,this.screenY=ce.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:he[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&re.aa.h.call(this)}}b(re,K);var he={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Ce(w,U,$,ce,Ie){this.listener=w,this.proxy=null,this.src=U,this.type=$,this.capture=!!ce,this.ha=Ie,this.key=++xe,this.da=this.fa=!1}function We(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function qe(w){this.src=w,this.g={},this.h=0}qe.prototype.add=function(w,U,$,ce,Ie){var Me=w.toString();w=this.g[Me],w||(w=this.g[Me]=[],this.h++);var ot=lt(w,U,ce,Ie);return-1<ot?(U=w[ot],$||(U.fa=!1)):(U=new Ce(U,this.src,Me,!!ce,Ie),U.fa=$,w.push(U)),U};function it(w,U){var $=U.type;if($ in w.g){var ce=w.g[$],Ie=Array.prototype.indexOf.call(ce,U,void 0),Me;(Me=0<=Ie)&&Array.prototype.splice.call(ce,Ie,1),Me&&(We(U),w.g[$].length==0&&(delete w.g[$],w.h--))}}function lt(w,U,$,ce){for(var Ie=0;Ie<w.length;++Ie){var Me=w[Ie];if(!Me.da&&Me.listener==U&&Me.capture==!!$&&Me.ha==ce)return Ie}return-1}var vt="closure_lm_"+(1e6*Math.random()|0),Pe={};function ve(w,U,$,ce,Ie){if(Array.isArray(U)){for(var Me=0;Me<U.length;Me++)ve(w,U[Me],$,ce,Ie);return null}return $=St($),w&&w[we]?w.K(U,$,f(ce)?!!ce.capture:!1,Ie):dt(w,U,$,!1,ce,Ie)}function dt(w,U,$,ce,Ie,Me){if(!U)throw Error("Invalid event type");var ot=f(Ie)?!!Ie.capture:!!Ie,Ut=ft(w);if(Ut||(w[vt]=Ut=new qe(w)),$=Ut.add(U,$,ce,ot,Me),$.proxy)return $;if(ce=ut(),$.proxy=ce,ce.src=w,ce.listener=$,w.addEventListener)J||(Ie=ot),Ie===void 0&&(Ie=!1),w.addEventListener(U.toString(),ce,Ie);else if(w.attachEvent)w.attachEvent(Ge(U.toString()),ce);else if(w.addListener&&w.removeListener)w.addListener(ce);else throw Error("addEventListener and attachEvent are unavailable.");return $}function ut(){function w($){return U.call(w.src,w.listener,$)}const U=st;return w}function Ne(w,U,$,ce,Ie){if(Array.isArray(U))for(var Me=0;Me<U.length;Me++)Ne(w,U[Me],$,ce,Ie);else ce=f(ce)?!!ce.capture:!!ce,$=St($),w&&w[we]?(w=w.i,U=String(U).toString(),U in w.g&&(Me=w.g[U],$=lt(Me,$,ce,Ie),-1<$&&(We(Me[$]),Array.prototype.splice.call(Me,$,1),Me.length==0&&(delete w.g[U],w.h--)))):w&&(w=ft(w))&&(U=w.g[U.toString()],w=-1,U&&(w=lt(U,$,ce,Ie)),($=-1<w?U[w]:null)&&Ke($))}function Ke(w){if(typeof w!="number"&&w&&!w.da){var U=w.src;if(U&&U[we])it(U.i,w);else{var $=w.type,ce=w.proxy;U.removeEventListener?U.removeEventListener($,ce,w.capture):U.detachEvent?U.detachEvent(Ge($),ce):U.addListener&&U.removeListener&&U.removeListener(ce),($=ft(U))?(it($,w),$.h==0&&($.src=null,U[vt]=null)):We(w)}}}function Ge(w){return w in Pe?Pe[w]:Pe[w]="on"+w}function st(w,U){if(w.da)w=!0;else{U=new re(U,this);var $=w.listener,ce=w.ha||w.src;w.fa&&Ke(w),w=$.call(ce,U)}return w}function ft(w){return w=w[vt],w instanceof qe?w:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(w){return typeof w=="function"?w:(w[et]||(w[et]=function(U){return w.handleEvent(U)}),w[et])}function yt(){W.call(this),this.i=new qe(this),this.M=this,this.F=null}b(yt,W),yt.prototype[we]=!0,yt.prototype.removeEventListener=function(w,U,$,ce){Ne(this,w,U,$,ce)};function _t(w,U){var $,ce=w.F;if(ce)for($=[];ce;ce=ce.F)$.push(ce);if(w=w.M,ce=U.type||U,typeof U=="string")U=new K(U,w);else if(U instanceof K)U.target=U.target||w;else{var Ie=U;U=new K(ce,w),M(U,Ie)}if(Ie=!0,$)for(var Me=$.length-1;0<=Me;Me--){var ot=U.g=$[Me];Ie=Rt(ot,ce,!0,U)&&Ie}if(ot=U.g=w,Ie=Rt(ot,ce,!0,U)&&Ie,Ie=Rt(ot,ce,!1,U)&&Ie,$)for(Me=0;Me<$.length;Me++)ot=U.g=$[Me],Ie=Rt(ot,ce,!1,U)&&Ie}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var w=this.i,U;for(U in w.g){for(var $=w.g[U],ce=0;ce<$.length;ce++)We($[ce]);delete w.g[U],w.h--}}this.F=null},yt.prototype.K=function(w,U,$,ce){return this.i.add(String(w),U,!1,$,ce)},yt.prototype.L=function(w,U,$,ce){return this.i.add(String(w),U,!0,$,ce)};function Rt(w,U,$,ce){if(U=w.i.g[String(U)],!U)return!0;U=U.concat();for(var Ie=!0,Me=0;Me<U.length;++Me){var ot=U[Me];if(ot&&!ot.da&&ot.capture==$){var Ut=ot.listener,hn=ot.ha||ot.src;ot.fa&&it(w.i,ot),Ie=Ut.call(hn,ce)!==!1&&Ie}}return Ie&&!ce.defaultPrevented}function xt(w,U,$){if(typeof w=="function")$&&(w=g(w,$));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(U)?-1:s.setTimeout(w,U||0)}function Et(w){w.g=xt(()=>{w.g=null,w.i&&(w.i=!1,Et(w))},w.l);const U=w.h;w.h=null,w.m.apply(null,U)}class ct extends W{constructor(U,$){super(),this.m=U,this.l=$,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(w){W.call(this),this.h=w,this.g={}}b(yn,W);var Vt=[];function Kn(w){H(w.g,function(U,$){this.g.hasOwnProperty($)&&Ke(U)},w),w.g={}}yn.prototype.N=function(){yn.aa.N.call(this),Kn(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=s.JSON.stringify,Sn=s.JSON.parse,mi=class{stringify(w){return s.JSON.stringify(w,void 0)}parse(w){return s.JSON.parse(w,void 0)}};function on(){}on.prototype.h=null;function pa(w){return w.h||(w.h=w.i())}function In(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){K.call(this,"d")}b(ur,K);function xn(){K.call(this,"c")}b(xn,K);var Nt={},nn=null;function Ei(){return nn=nn||new yt}Nt.La="serverreachability";function jn(w){K.call(this,Nt.La,w)}b(jn,K);function vr(w){const U=Ei();_t(U,new jn(U))}Nt.STAT_EVENT="statevent";function Ua(w,U){K.call(this,Nt.STAT_EVENT,w),this.stat=U}b(Ua,K);function bt(w){const U=Ei();_t(U,new Ua(U,w))}Nt.Ma="timingevent";function Gn(w,U){K.call(this,Nt.Ma,w),this.size=U}b(Gn,K);function $n(w,U){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){w()},U)}function yr(){this.g=!0}yr.prototype.xa=function(){this.g=!1};function Er(w,U,$,ce,Ie,Me){w.info(function(){if(w.g)if(Me)for(var ot="",Ut=Me.split("&"),hn=0;hn<Ut.length;hn++){var Qt=Ut[hn].split("=");if(1<Qt.length){var Un=Qt[0];Qt=Qt[1];var Qn=Un.split("_");ot=2<=Qn.length&&Qn[1]=="type"?ot+(Un+"="+Qt+"&"):ot+(Un+"=redacted&")}}else ot=null;else ot=Me;return"XMLHTTP REQ ("+ce+") [attempt "+Ie+"]: "+U+`
`+$+`
`+ot})}function Dr(w,U,$,ce,Ie,Me,ot){w.info(function(){return"XMLHTTP RESP ("+ce+") [ attempt "+Ie+"]: "+U+`
`+$+`
`+Me+" "+ot})}function Gr(w,U,$,ce){w.info(function(){return"XMLHTTP TEXT ("+U+"): "+Ji(w,$)+(ce?" "+ce:"")})}function Is(w,U){w.info(function(){return"TIMEOUT: "+U})}yr.prototype.info=function(){};function Ji(w,U){if(!w.g)return U;if(!U)return null;try{var $=JSON.parse(U);if($){for(w=0;w<$.length;w++)if(Array.isArray($[w])){var ce=$[w];if(!(2>ce.length)){var Ie=ce[1];if(Array.isArray(Ie)&&!(1>Ie.length)){var Me=Ie[0];if(Me!="noop"&&Me!="stop"&&Me!="close")for(var ot=1;ot<Ie.length;ot++)Ie[ot]=""}}}}return Kt($)}catch{return U}}var vi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$r;function ni(){}b(ni,on),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},$r=new ni;function fr(w,U,$,ce){this.j=w,this.i=U,this.l=$,this.R=ce||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var Co={},Io={};function Bi(w,U,$){w.L=1,w.v=es(Ii(U)),w.m=$,w.P=!0,ga(w,null)}function ga(w,U){w.F=Date.now(),Rs(w),w.A=Ii(w.v);var $=w.A,ce=w.R;Array.isArray(ce)||(ce=[String(ce)]),Ft($.i,"t",ce),w.C=0,$=w.j.J,w.h=new Bn,w.g=te(w.j,$?U:null,!w.m),0<w.O&&(w.M=new ct(g(w.Y,w,w.g),w.O)),U=w.U,$=w.g,ce=w.ca;var Ie="readystatechange";Array.isArray(Ie)||(Ie&&(Vt[0]=Ie.toString()),Ie=Vt);for(var Me=0;Me<Ie.length;Me++){var ot=ve($,Ie[Me],ce||U.handleEvent,!1,U.h||U);if(!ot)break;U.g[ot.key]=ot}U=w.H?S(w.H):{},w.m?(w.u||(w.u="POST"),U["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,U)):(w.u="GET",w.g.ea(w.A,w.u,null,U)),vr(),Er(w.i,w.u,w.A,w.l,w.R,w.m)}fr.prototype.ca=function(w){w=w.target;const U=this.M;U&&Xr(w)==3?U.j():this.Y(w)},fr.prototype.Y=function(w){try{if(w==this.g)e:{const Qn=Xr(this.g);var U=this.g.Ba();const so=this.g.Z();if(!(3>Qn)&&(Qn!=3||this.g&&(this.h.h||this.g.oa()||hu(this.g)))){this.J||Qn!=4||U==7||(U==8||0>=so?vr(3):vr(2)),za(this);var $=this.g.Z();this.X=$;t:if(Ts(this)){var ce=hu(this.g);w="";var Ie=ce.length,Me=Xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),Va(this);var ot="";break t}this.h.i=new s.TextDecoder}for(U=0;U<Ie;U++)this.h.h=!0,w+=this.h.i.decode(ce[U],{stream:!(Me&&U==Ie-1)});ce.length=0,this.h.g+=w,this.C=0,ot=this.h.g}else ot=this.g.oa();if(this.o=$==200,Dr(this.i,this.u,this.A,this.l,this.R,Qn,$),this.o){if(this.T&&!this.K){t:{if(this.g){var Ut,hn=this.g;if((Ut=hn.g?hn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Ut)){var Qt=Ut;break t}}Qt=null}if($=Qt)Gr(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,To(this,$);else{this.o=!1,this.s=3,bt(12),ri(this),Va(this);break e}}if(this.P){$=!0;let Br;for(;!this.J&&this.C<ot.length;)if(Br=dc(this,ot),Br==Io){Qn==4&&(this.s=4,bt(14),$=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Br==Co){this.s=4,bt(15),Gr(this.i,this.l,ot,"[Invalid Chunk]"),$=!1;break}else Gr(this.i,this.l,Br,null),To(this,Br);if(Ts(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qn!=4||ot.length!=0||this.h.h||(this.s=1,bt(16),$=!1),this.o=this.o&&$,!$)Gr(this.i,this.l,ot,"[Invalid Chunked Response]"),ri(this),Va(this);else if(0<ot.length&&!this.W){this.W=!0;var Un=this.j;Un.g==this&&Un.ba&&!Un.M&&(Un.j.info("Great, no buffering proxy detected. Bytes received: "+ot.length),os(Un),Un.M=!0,bt(11))}}else Gr(this.i,this.l,ot,null),To(this,ot);Qn==4&&ri(this),this.o&&!this.J&&(Qn==4?ss(this.j,this):(this.o=!1,Rs(this)))}else rs(this.g),$==400&&0<ot.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),ri(this),Va(this)}}}catch{}finally{}};function Ts(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function dc(w,U){var $=w.C,ce=U.indexOf(`
`,$);return ce==-1?Io:($=Number(U.substring($,ce)),isNaN($)?Co:(ce+=1,ce+$>U.length?Io:(U=U.slice(ce,ce+$),w.C=ce+$,U)))}fr.prototype.cancel=function(){this.J=!0,ri(this)};function Rs(w){w.S=Date.now()+w.I,lu(w,w.I)}function lu(w,U){if(w.B!=null)throw Error("WatchDog timer not null");w.B=$n(g(w.ba,w),U)}function za(w){w.B&&(s.clearTimeout(w.B),w.B=null)}fr.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(Is(this.i,this.A),this.L!=2&&(vr(),bt(17)),ri(this),this.s=2,Va(this)):lu(this,this.S-w)};function Va(w){w.j.G==0||w.J||ss(w.j,w)}function ri(w){za(w);var U=w.M;U&&typeof U.ma=="function"&&U.ma(),w.M=null,Kn(w.U),w.g&&(U=w.g,w.g=null,U.abort(),U.ma())}function To(w,U){try{var $=w.j;if($.G!=0&&($.g==w||hc($.h,w))){if(!w.K&&hc($.h,w)&&$.G==3){try{var ce=$.Da.g.parse(U)}catch{ce=null}if(Array.isArray(ce)&&ce.length==3){var Ie=ce;if(Ie[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<w.F)Mo($),xl($);else break e;Ls($),bt(18)}}else $.za=Ie[1],0<$.za-$.T&&37500>Ie[2]&&$.F&&$.v==0&&!$.C&&($.C=$n(g($.Za,$),6e3));if(1>=Ro($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else Vi($,11)}else if((w.K||$.g==w)&&Mo($),!D(U))for(Ie=$.Da.g.parse(U),U=0;U<Ie.length;U++){let Qt=Ie[U];if($.T=Qt[0],Qt=Qt[1],$.G==2)if(Qt[0]=="c"){$.K=Qt[1],$.ia=Qt[2];const Un=Qt[3];Un!=null&&($.la=Un,$.j.info("VER="+$.la));const Qn=Qt[4];Qn!=null&&($.Aa=Qn,$.j.info("SVER="+$.Aa));const so=Qt[5];so!=null&&typeof so=="number"&&0<so&&(ce=1.5*so,$.L=ce,$.j.info("backChannelRequestTimeoutMs_="+ce)),ce=$;const Br=w.g;if(Br){const ba=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var Me=ce.h;Me.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(Me.j=Me.l,Me.g=new Set,Me.h&&(dr(Me,Me.h),Me.h=null))}if(ce.D){const ls=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;ls&&(ce.ya=ls,Fn(ce.I,ce.D,ls))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-w.F,$.j.info("Handshake RTT: "+$.R+"ms")),ce=$;var ot=w;if(ce.qa=k(ce,ce.J?ce.ia:null,ce.W),ot.K){yi(ce.h,ot);var Ut=ot,hn=ce.L;hn&&(Ut.I=hn),Ut.B&&(za(Ut),Rs(Ut)),ce.g=ot}else wl(ce);0<$.i.length&&bl($)}else Qt[0]!="stop"&&Qt[0]!="close"||Vi($,7);else $.G==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Vi($,7):Lo($):Qt[0]!="noop"&&$.l&&$.l.ta(Qt),$.v=0)}}vr(4)}catch{}}var cu=class{constructor(w,U){this.g=w,this.map=U}};function Ja(w){this.l=w||10,s.PerformanceNavigationTiming?(w=s.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gl(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function Ro(w){return w.h?1:w.g?w.g.size:0}function hc(w,U){return w.h?w.h==U:w.g?w.g.has(U):!1}function dr(w,U){w.g?w.g.add(U):w.h=U}function yi(w,U){w.h&&w.h==U?w.h=null:w.g&&w.g.has(U)&&w.g.delete(U)}Ja.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function ml(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let U=w.i;for(const $ of w.g.values())U=U.concat($.D);return U}return _(w.i)}function uu(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var U=[],$=w.length,ce=0;ce<$;ce++)U.push(w[ce]);return U}U=[],$=0;for(ce in w)U[$++]=w[ce];return U}function Qo(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var U=[];w=w.length;for(var $=0;$<w;$++)U.push($);return U}U=[],$=0;for(const ce in w)U[$++]=ce;return U}}}function pc(w,U){if(w.forEach&&typeof w.forEach=="function")w.forEach(U,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,U,void 0);else for(var $=Qo(w),ce=uu(w),Ie=ce.length,Me=0;Me<Ie;Me++)U.call(void 0,ce[Me],$&&$[Me],w)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vl(w,U){if(w){w=w.split("&");for(var $=0;$<w.length;$++){var ce=w[$].indexOf("="),Ie=null;if(0<=ce){var Me=w[$].substring(0,ce);Ie=w[$].substring(ce+1)}else Me=w[$];U(Me,Ie?decodeURIComponent(Ie.replace(/\+/g," ")):"")}}}function En(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof En){this.h=w.h,Zo(this,w.j),this.o=w.o,this.g=w.g,Jo(this,w.s),this.l=w.l;var U=w.i,$=new to;$.i=U.i,U.g&&($.g=new Map(U.g),$.h=U.h),eo(this,$),this.m=w.m}else w&&(U=String(w).match(Ci))?(this.h=!1,Zo(this,U[1]||"",!0),this.o=ma(U[2]||""),this.g=ma(U[3]||"",!0),Jo(this,U[4]),this.l=ma(U[5]||"",!0),eo(this,U[6]||"",!0),this.m=ma(U[7]||"")):(this.h=!1,this.i=new to(null,this.h))}En.prototype.toString=function(){var w=[],U=this.j;U&&w.push(No(U,gc,!0),":");var $=this.g;return($||U=="file")&&(w.push("//"),(U=this.o)&&w.push(No(U,gc,!0),"@"),w.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&w.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&w.push("/"),w.push(No($,$.charAt(0)=="/"?Do:mc,!0))),($=this.i.toString())&&w.push("?",$),($=this.m)&&w.push("#",No($,Oo)),w.join("")};function Ii(w){return new En(w)}function Zo(w,U,$){w.j=$?ma(U,!0):U,w.j&&(w.j=w.j.replace(/:$/,""))}function Jo(w,U){if(U){if(U=Number(U),isNaN(U)||0>U)throw Error("Bad port number "+U);w.s=U}else w.s=null}function eo(w,U,$){U instanceof to?(w.i=U,du(w.i,w.h)):($||(U=No(U,yl)),w.i=new to(U,w.h))}function Fn(w,U,$){w.i.set(U,$)}function es(w){return Fn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function ma(w,U){return w?U?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function No(w,U,$){return typeof w=="string"?(w=encodeURI(w).replace(U,fu),$&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function fu(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var gc=/[#\/\?@]/g,mc=/[#\?:]/g,Do=/[#\?]/g,yl=/[#\?@]/g,Oo=/#/g;function to(w,U){this.h=this.g=null,this.i=w||null,this.j=!!U}function nr(w){w.g||(w.g=new Map,w.h=0,w.i&&vl(w.i,function(U,$){w.add(decodeURIComponent(U.replace(/\+/g," ")),$)}))}n=to.prototype,n.add=function(w,U){nr(this),this.i=null,w=ro(this,w);var $=this.g.get(w);return $||this.g.set(w,$=[]),$.push(U),this.h+=1,this};function ko(w,U){nr(w),U=ro(w,U),w.g.has(U)&&(w.i=null,w.h-=w.g.get(U).length,w.g.delete(U))}function no(w,U){return nr(w),U=ro(w,U),w.g.has(U)}n.forEach=function(w,U){nr(this),this.g.forEach(function($,ce){$.forEach(function(Ie){w.call(U,Ie,ce,this)},this)},this)},n.na=function(){nr(this);const w=Array.from(this.g.values()),U=Array.from(this.g.keys()),$=[];for(let ce=0;ce<U.length;ce++){const Ie=w[ce];for(let Me=0;Me<Ie.length;Me++)$.push(U[ce])}return $},n.V=function(w){nr(this);let U=[];if(typeof w=="string")no(this,w)&&(U=U.concat(this.g.get(ro(this,w))));else{w=Array.from(this.g.values());for(let $=0;$<w.length;$++)U=U.concat(w[$])}return U},n.set=function(w,U){return nr(this),this.i=null,w=ro(this,w),no(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[U]),this.h+=1,this},n.get=function(w,U){return w?(w=this.V(w),0<w.length?String(w[0]):U):U};function Ft(w,U,$){ko(w,U),0<$.length&&(w.i=null,w.g.set(ro(w,U),_($)),w.h+=$.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],U=Array.from(this.g.keys());for(var $=0;$<U.length;$++){var ce=U[$];const Me=encodeURIComponent(String(ce)),ot=this.V(ce);for(ce=0;ce<ot.length;ce++){var Ie=Me;ot[ce]!==""&&(Ie+="="+encodeURIComponent(String(ot[ce]))),w.push(Ie)}}return this.i=w.join("&")};function ro(w,U){return U=String(U),w.j&&(U=U.toLowerCase()),U}function du(w,U){U&&!w.j&&(nr(w),w.i=null,w.g.forEach(function($,ce){var Ie=ce.toLowerCase();ce!=Ie&&(ko(this,ce),Ft(this,Ie,$))},w)),w.j=U}function Fi(w,U){const $=new yr;if(s.Image){const ce=new Image;ce.onload=m(ea,$,"TestLoadImage: loaded",!0,U,ce),ce.onerror=m(ea,$,"TestLoadImage: error",!1,U,ce),ce.onabort=m(ea,$,"TestLoadImage: abort",!1,U,ce),ce.ontimeout=m(ea,$,"TestLoadImage: timeout",!1,U,ce),s.setTimeout(function(){ce.ontimeout&&ce.ontimeout()},1e4),ce.src=w}else U(!1)}function va(w,U){const $=new yr,ce=new AbortController,Ie=setTimeout(()=>{ce.abort(),ea($,"TestPingServer: timeout",!1,U)},1e4);fetch(w,{signal:ce.signal}).then(Me=>{clearTimeout(Ie),Me.ok?ea($,"TestPingServer: ok",!0,U):ea($,"TestPingServer: server error",!1,U)}).catch(()=>{clearTimeout(Ie),ea($,"TestPingServer: error",!1,U)})}function ea(w,U,$,ce,Ie){try{Ie&&(Ie.onload=null,Ie.onerror=null,Ie.onabort=null,Ie.ontimeout=null),ce($)}catch{}}function io(){this.g=new mi}function ya(w,U,$){const ce=$||"";try{pc(w,function(Ie,Me){let ot=Ie;f(Ie)&&(ot=Kt(Ie)),U.push(ce+Me+"="+encodeURIComponent(ot))})}catch(Ie){throw U.push(ce+"type="+encodeURIComponent("_badmap")),Ie}}function ts(w){this.l=w.Ub||null,this.j=w.eb||!1}b(ts,on),ts.prototype.g=function(){return new Po(this.l,this.j)},ts.prototype.i=function(w){return function(){return w}}({});function Po(w,U){yt.call(this),this.D=w,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Po,yt),n=Po.prototype,n.open=function(w,U){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=U,this.readyState=1,Ui(this)},n.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const U={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(U.body=w),(this.D||s).fetch(new Request(this.A,U)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},n.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vc(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function vc(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}n.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var U=w.value?w.value:new Uint8Array(0);(U=this.v.decode(U,{stream:!w.done}))&&(this.response=this.responseText+=U)}w.done?xa(this):Ui(this),this.readyState==3&&vc(this)}},n.Ra=function(w){this.g&&(this.response=this.responseText=w,xa(this))},n.Qa=function(w){this.g&&(this.response=w,xa(this))},n.ga=function(){this.g&&xa(this)};function xa(w){w.readyState=4,w.l=null,w.j=null,w.v=null,Ui(w)}n.setRequestHeader=function(w,U){this.u.append(w,U)},n.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],U=this.h.entries();for(var $=U.next();!$.done;)$=$.value,w.push($[0]+": "+$[1]),$=U.next();return w.join(`\r
`)};function Ui(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function ao(w){let U="";return H(w,function($,ce){U+=ce,U+=":",U+=$,U+=`\r
`}),U}function Yr(w,U,$){e:{for(ce in $){var ce=!1;break e}ce=!0}ce||($=ao($),typeof w=="string"?$!=null&&encodeURIComponent(String($)):Fn(w,U,$))}function dn(w){yt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(dn,yt);var ns=/^https?$/i,oo=["POST","PUT"];n=dn.prototype,n.Ha=function(w){this.J=w},n.ea=function(w,U,$,ce){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);U=U?U.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$r.g(),this.v=this.o?pa(this.o):pa($r),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(U,String(w),!0),this.B=!1}catch(Me){yc(this,Me);return}if(w=$||"",$=new Map(this.headers),ce)if(Object.getPrototypeOf(ce)===Object.prototype)for(var Ie in ce)$.set(Ie,ce[Ie]);else if(typeof ce.keys=="function"&&typeof ce.get=="function")for(const Me of ce.keys())$.set(Me,ce.get(Me));else throw Error("Unknown input type for opt_headers: "+String(ce));ce=Array.from($.keys()).find(Me=>Me.toLowerCase()=="content-type"),Ie=s.FormData&&w instanceof s.FormData,!(0<=Array.prototype.indexOf.call(oo,U,void 0))||ce||Ie||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Me,ot]of $)this.g.setRequestHeader(Me,ot);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zi(this),this.u=!0,this.g.send(w),this.u=!1}catch(Me){yc(this,Me)}};function yc(w,U){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=U,w.m=5,Ns(w),qa(w)}function Ns(w){w.A||(w.A=!0,_t(w,"complete"),_t(w,"error"))}n.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,_t(this,"complete"),_t(this,"abort"),qa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),dn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ds(this):this.bb())},n.bb=function(){Ds(this)};function Ds(w){if(w.h&&typeof o<"u"&&(!w.v[1]||Xr(w)!=4||w.Z()!=2)){if(w.u&&Xr(w)==4)xt(w.Ea,0,w);else if(_t(w,"readystatechange"),Xr(w)==4){w.h=!1;try{const ot=w.Z();e:switch(ot){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var $;if(!($=U)){var ce;if(ce=ot===0){var Ie=String(w.D).match(Ci)[1]||null;!Ie&&s.self&&s.self.location&&(Ie=s.self.location.protocol.slice(0,-1)),ce=!ns.test(Ie?Ie.toLowerCase():"")}$=ce}if($)_t(w,"complete"),_t(w,"success");else{w.m=6;try{var Me=2<Xr(w)?w.g.statusText:""}catch{Me=""}w.l=Me+" ["+w.Z()+"]",Ns(w)}}finally{qa(w)}}}}function qa(w,U){if(w.g){zi(w);const $=w.g,ce=w.v[0]?()=>{}:null;w.g=null,w.v=null,U||_t(w,"ready");try{$.onreadystatechange=ce}catch{}}}function zi(w){w.I&&(s.clearTimeout(w.I),w.I=null)}n.isActive=function(){return!!this.g};function Xr(w){return w.g?w.g.readyState:0}n.Z=function(){try{return 2<Xr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(w){if(this.g){var U=this.g.responseText;return w&&U.indexOf(w)==0&&(U=U.substring(w.length)),Sn(U)}};function hu(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(w){const U={};w=(w.g&&2<=Xr(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let ce=0;ce<w.length;ce++){if(D(w[ce]))continue;var $=T(w[ce]);const Ie=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const Me=U[Ie]||[];U[Ie]=Me,Me.push($)}P(U,function(ce){return ce.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(w,U,$){return $&&$.internalChannelParams&&$.internalChannelParams[w]||U}function is(w){this.Aa=0,this.i=[],this.j=new yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ti("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ti("baseRetryDelayMs",5e3,w),this.cb=Ti("retryDelaySeedMs",1e4,w),this.Wa=Ti("forwardChannelMaxRetries",2,w),this.wa=Ti("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Ja(w&&w.concurrentRequestLimit),this.Da=new io,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=is.prototype,n.la=8,n.G=1,n.connect=function(w,U,$,ce){bt(0),this.W=w,this.H=U||{},$&&ce!==void 0&&(this.H.OSID=$,this.H.OAID=ce),this.F=this.X,this.I=k(this,null,this.W),bl(this)};function Lo(w){if(Os(w),w.G==3){var U=w.U++,$=Ii(w.I);if(Fn($,"SID",w.K),Fn($,"RID",U),Fn($,"TYPE","terminate"),as(w,$),U=new fr(w,w.j,U),U.L=2,U.v=es(Ii($)),$=!1,s.navigator&&s.navigator.sendBeacon)try{$=s.navigator.sendBeacon(U.v.toString(),"")}catch{}!$&&s.Image&&(new Image().src=U.v,$=!0),$||(U.g=te(U.j,null),U.g.ea(U.v)),U.F=Date.now(),Rs(U)}_l(w)}function xl(w){w.g&&(os(w),w.g.cancel(),w.g=null)}function Os(w){xl(w),w.u&&(s.clearTimeout(w.u),w.u=null),Mo(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&s.clearTimeout(w.s),w.s=null)}function bl(w){if(!gl(w.h)&&!w.s){w.s=!0;var U=w.Ga;z||Q(),ne||(z(),ne=!0),se.add(U,w),w.B=0}}function xc(w,U){return Ro(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=U.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=$n(g(w.Ga,w,U),Ms(w,w.B)),w.B++,!0)}n.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const Ie=new fr(this,this.j,w);let Me=this.o;if(this.S&&(Me?(Me=S(Me),M(Me,this.S)):Me=this.S),this.m!==null||this.O||(Ie.H=Me,Me=null),this.P)e:{for(var U=0,$=0;$<this.i.length;$++){t:{var ce=this.i[$];if("__data__"in ce.map&&(ce=ce.map.__data__,typeof ce=="string")){ce=ce.length;break t}ce=void 0}if(ce===void 0)break;if(U+=ce,4096<U){U=$;break e}if(U===4096||$===this.i.length-1){U=$+1;break e}}U=1e3}else U=1e3;U=Ps(this,Ie,U),$=Ii(this.I),Fn($,"RID",w),Fn($,"CVER",22),this.D&&Fn($,"X-HTTP-Session-Id",this.D),as(this,$),Me&&(this.O?U="headers="+encodeURIComponent(String(ao(Me)))+"&"+U:this.m&&Yr($,this.m,Me)),dr(this.h,Ie),this.Ua&&Fn($,"TYPE","init"),this.P?(Fn($,"$req",U),Fn($,"SID","null"),Ie.T=!0,Bi(Ie,$,null)):Bi(Ie,$,U),this.G=2}}else this.G==3&&(w?ks(this,w):this.i.length==0||gl(this.h)||ks(this))};function ks(w,U){var $;U?$=U.l:$=w.U++;const ce=Ii(w.I);Fn(ce,"SID",w.K),Fn(ce,"RID",$),Fn(ce,"AID",w.T),as(w,ce),w.m&&w.o&&Yr(ce,w.m,w.o),$=new fr(w,w.j,$,w.B+1),w.m===null&&($.H=w.o),U&&(w.i=U.D.concat(w.i)),U=Ps(w,$,1e3),$.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),dr(w.h,$),Bi($,ce,U)}function as(w,U){w.H&&H(w.H,function($,ce){Fn(U,ce,$)}),w.l&&pc({},function($,ce){Fn(U,ce,$)})}function Ps(w,U,$){$=Math.min(w.i.length,$);var ce=w.l?g(w.l.Na,w.l,w):null;e:{var Ie=w.i;let Me=-1;for(;;){const ot=["count="+$];Me==-1?0<$?(Me=Ie[0].g,ot.push("ofs="+Me)):Me=0:ot.push("ofs="+Me);let Ut=!0;for(let hn=0;hn<$;hn++){let Qt=Ie[hn].g;const Un=Ie[hn].map;if(Qt-=Me,0>Qt)Me=Math.max(0,Ie[hn].g-100),Ut=!1;else try{ya(Un,ot,"req"+Qt+"_")}catch{ce&&ce(Un)}}if(Ut){ce=ot.join("&");break e}}}return w=w.i.splice(0,$),U.D=w,ce}function wl(w){if(!w.g&&!w.u){w.Y=1;var U=w.Fa;z||Q(),ne||(z(),ne=!0),se.add(U,w),w.v=0}}function Ls(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=$n(g(w.Fa,w),Ms(w,w.v)),w.v++,!0)}n.Fa=function(){if(this.u=null,pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=$n(g(this.ab,this),w)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),xl(this),pu(this))};function os(w){w.A!=null&&(s.clearTimeout(w.A),w.A=null)}function pu(w){w.g=new fr(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var U=Ii(w.qa);Fn(U,"RID","rpc"),Fn(U,"SID",w.K),Fn(U,"AID",w.T),Fn(U,"CI",w.F?"0":"1"),!w.F&&w.ja&&Fn(U,"TO",w.ja),Fn(U,"TYPE","xmlhttp"),as(w,U),w.m&&w.o&&Yr(U,w.m,w.o),w.L&&(w.g.I=w.L);var $=w.g;w=w.ia,$.L=1,$.v=es(Ii(U)),$.m=null,$.P=!0,ga($,w)}n.Za=function(){this.C!=null&&(this.C=null,xl(this),Ls(this),bt(19))};function Mo(w){w.C!=null&&(s.clearTimeout(w.C),w.C=null)}function ss(w,U){var $=null;if(w.g==U){Mo(w),os(w),w.g=null;var ce=2}else if(hc(w.h,U))$=U.D,yi(w.h,U),ce=1;else return;if(w.G!=0){if(U.o)if(ce==1){$=U.m?U.m.length:0,U=Date.now()-U.F;var Ie=w.B;ce=Ei(),_t(ce,new Gn(ce,$)),bl(w)}else wl(w);else if(Ie=U.s,Ie==3||Ie==0&&0<U.X||!(ce==1&&xc(w,U)||ce==2&&Ls(w)))switch($&&0<$.length&&(U=w.h,U.i=U.i.concat($)),Ie){case 1:Vi(w,5);break;case 4:Vi(w,10);break;case 3:Vi(w,6);break;default:Vi(w,2)}}}function Ms(w,U){let $=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||($*=2),$*U}function Vi(w,U){if(w.j.info("Error code "+U),U==2){var $=g(w.fb,w),ce=w.Xa;const Ie=!ce;ce=new En(ce||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Zo(ce,"https"),es(ce),Ie?Fi(ce.toString(),$):va(ce.toString(),$)}else bt(2);w.G=0,w.l&&w.l.sa(U),_l(w),Os(w)}n.fb=function(w){w?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function _l(w){if(w.G=0,w.ka=[],w.l){const U=ml(w.h);(U.length!=0||w.i.length!=0)&&(I(w.ka,U),I(w.ka,w.i),w.h.i.length=0,_(w.i),w.i.length=0),w.l.ra()}}function k(w,U,$){var ce=$ instanceof En?Ii($):new En($);if(ce.g!="")U&&(ce.g=U+"."+ce.g),Jo(ce,ce.s);else{var Ie=s.location;ce=Ie.protocol,U=U?U+"."+Ie.hostname:Ie.hostname,Ie=+Ie.port;var Me=new En(null);ce&&Zo(Me,ce),U&&(Me.g=U),Ie&&Jo(Me,Ie),$&&(Me.l=$),ce=Me}return $=w.D,U=w.ya,$&&U&&Fn(ce,$,U),Fn(ce,"VER",w.la),as(w,ce),ce}function te(w,U,$){if(U&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return U=w.Ca&&!w.pa?new dn(new ts({eb:$})):new dn(w.pa),U.Ha(w.J),U}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function me(){}n=me.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function be(){}be.prototype.g=function(w,U){return new Te(w,U)};function Te(w,U){yt.call(this),this.g=new is(U),this.l=w,this.h=U&&U.messageUrlParams||null,w=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(w?w["X-WebChannel-Content-Type"]=U.messageContentType:w={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.va&&(w?w["X-WebChannel-Client-Profile"]=U.va:w={"X-WebChannel-Client-Profile":U.va}),this.g.S=w,(w=U&&U.Sb)&&!D(w)&&(this.g.m=w),this.v=U&&U.supportsCrossDomainXhr||!1,this.u=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!D(U)&&(this.g.D=U,w=this.h,w!==null&&U in w&&(w=this.h,U in w&&delete w[U])),this.j=new pt(this)}b(Te,yt),Te.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Te.prototype.close=function(){Lo(this.g)},Te.prototype.o=function(w){var U=this.g;if(typeof w=="string"){var $={};$.__data__=w,w=$}else this.u&&($={},$.__data__=Kt(w),w=$);U.i.push(new cu(U.Ya++,w)),U.G==3&&bl(U)},Te.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,Te.aa.N.call(this)};function Ve(w){ur.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var U=w.__sm__;if(U){e:{for(const $ in U){w=$;break e}w=void 0}(this.i=w)&&(w=this.i,U=U!==null&&w in U?U[w]:void 0),this.data=U}else this.data=w}b(Ve,ur);function at(){xn.call(this),this.status=1}b(at,xn);function pt(w){this.g=w}b(pt,me),pt.prototype.ua=function(){_t(this.g,"a")},pt.prototype.ta=function(w){_t(this.g,new Ve(w))},pt.prototype.sa=function(w){_t(this.g,new at)},pt.prototype.ra=function(){_t(this.g,"b")},be.prototype.createWebChannel=be.prototype.g,Te.prototype.send=Te.prototype.o,Te.prototype.open=Te.prototype.m,Te.prototype.close=Te.prototype.close,w6=function(){return new be},b6=function(){return Ei()},x6=Nt,iy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vi.NO_ERROR=0,vi.TIMEOUT=8,vi.HTTP_ERROR=6,ig=vi,ti.COMPLETE="complete",y6=ti,In.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",yt.prototype.listen=yt.prototype.K,M0=In,dn.prototype.listenOnce=dn.prototype.L,dn.prototype.getLastError=dn.prototype.Ka,dn.prototype.getLastErrorCode=dn.prototype.Ba,dn.prototype.getStatus=dn.prototype.Z,dn.prototype.getResponseJson=dn.prototype.Oa,dn.prototype.getResponseText=dn.prototype.oa,dn.prototype.send=dn.prototype.ea,dn.prototype.setWithCredentials=dn.prototype.Ha,v6=dn}).apply(typeof jp<"u"?jp:typeof self<"u"?self:typeof window<"u"?window:{});const x3="@firebase/firestore",b3="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pa.UNAUTHENTICATED=new Pa(null),Pa.GOOGLE_CREDENTIALS=new Pa("google-credentials-uid"),Pa.FIRST_PARTY=new Pa("first-party-uid"),Pa.MOCK_USER=new Pa("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new sm("@firebase/firestore");function eh(){return sd.logLevel}function At(n,...e){if(sd.logLevel<=_n.DEBUG){const t=e.map(b5);sd.debug(`Firestore (${Ph}): ${n}`,...t)}}function eu(n,...e){if(sd.logLevel<=_n.ERROR){const t=e.map(b5);sd.error(`Firestore (${Ph}): ${n}`,...t)}}function bh(n,...e){if(sd.logLevel<=_n.WARN){const t=e.map(b5);sd.warn(`Firestore (${Ph}): ${n}`,...t)}}function b5(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,_6(n,r,t)}function _6(n,e,t){let r=`FIRESTORE (${Ph}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw eu(r),new Error(r)}function tr(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||_6(e,i,r)}function tn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pa.UNAUTHENTICATED))}shutdown(){}}class j9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class B9{constructor(e){this.t=e,this.currentUser=Pa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tr(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new Kc;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Kc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},s=c=>{At("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>s(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?s(c):(At("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Kc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(At("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tr(typeof r.accessToken=="string",31837,{l:r}),new A6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tr(e===null||typeof e=="string",2055,{h:e}),new Pa(e)}}class F9{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Pa.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U9{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new F9(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Pa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class w3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z9{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$o(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tr(this.o===void 0,3512);const r=a=>{a.error!=null&&At("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,At("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{At("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):At("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new w3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tr(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new w3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=V9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function fn(n,e){return n<e?-1:n>e?1:0}function ay(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return fn(r,i);{const a=S6(),o=q9(a.encode(_3(n,t)),a.encode(_3(e,t)));return o!==0?o:fn(r,i)}}t+=r>65535?2:1}return fn(n.length,e.length)}function _3(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function q9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return fn(n[t],e[t]);return fn(n.length,e.length)}function wh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=-62135596800,S3=1e6;class gi{static now(){return gi.fromMillis(Date.now())}static fromDate(e){return gi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*S3);return new gi(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ct(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ct(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<A3)throw new Ct(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ct(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/S3}_compareTo(e){return this.seconds===e.seconds?fn(this.nanoseconds,e.nanoseconds):fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-A3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{static fromTimestamp(e){return new Jt(e)}static min(){return new Jt(new gi(0,0))}static max(){return new Jt(new gi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="__name__";class $l{constructor(e,t,r){t===void 0?t=0:t>e.length&&Yt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Yt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return $l.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $l?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=$l.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return fn(e.length,t.length)}static compareSegments(e,t){const r=$l.isNumericId(e),i=$l.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?$l.extractNumericId(e).compare($l.extractNumericId(t)):ay(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return af.fromString(e.substring(4,e.length-2))}}class Rr extends $l{construct(e,t,r){return new Rr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ct(rt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rr(t)}static emptyPath(){return new Rr([])}}const H9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fa extends $l{construct(e,t,r){return new fa(e,t,r)}static isValidIdentifier(e){return H9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E3}static keyField(){return new fa([E3])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ct(rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new Ct(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ct(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Ct(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fa(t)}static emptyPath(){return new fa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(Rr.fromString(e))}static fromName(e){return new Mt(Rr.fromString(e).popFirst(5))}static empty(){return new Mt(Rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new Rr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=-1;function W9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Jt.fromTimestamp(r===1e9?new gi(t+1,0):new gi(t,r));return new uf(i,Mt.empty(),e)}function G9(n){return new uf(n.readTime,n.key,r1)}class uf{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new uf(Jt.min(),Mt.empty(),r1)}static max(){return new uf(Jt.max(),Mt.empty(),r1)}}function $9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Mt.comparator(n.documentKey,e.documentKey),t!==0?t:fn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(n){if(n.code!==rt.FAILED_PRECONDITION||n.message!==Y9)throw n;At("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nt((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof nt?t:nt.resolve(t)}catch(t){return nt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nt.reject(t)}static resolve(e){return new nt((t,r)=>{t(e)})}static reject(e){return new nt((t,r)=>{r(e)})}static waitFor(e){return new nt((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},c=>r(c))}),o=!0,a===i&&t()})}static or(e){let t=nt.resolve(!1);for(const r of e)t=t.next(i=>i?nt.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new nt((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let c=0;c<a;c++){const f=c;t(e[f]).next(d=>{o[f]=d,++s,s===a&&r(o)},d=>i(d))}})}static doWhile(e,t){return new nt((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function K9(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Mh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}dm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=-1;function hm(n){return n==null}function Tg(n){return n===0&&1/n==-1/0}function Q9(n){return typeof n=="number"&&Number.isInteger(n)&&!Tg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6="";function Z9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C3(e)),e=J9(n.get(t),e);return C3(e)}function J9(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case C6:t+="";break;default:t+=a}}return t}function C3(n){return n+C6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function I6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t){this.comparator=e,this.root=t||ca.EMPTY}insert(e,t){return new Wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ca.BLACK,null,null))}remove(e){return new Wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ca.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bp(this.root,e,this.comparator,!0)}}class Bp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ca{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ca.RED,this.left=i??ca.EMPTY,this.right=a??ca.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ca(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ca.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ca.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ca.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ca.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Yt(27949);return e+(this.isRed()?0:1)}}ca.EMPTY=null,ca.RED=!0,ca.BLACK=!1;ca.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt(57766)}get value(){throw Yt(16141)}get color(){throw Yt(16727)}get left(){throw Yt(29726)}get right(){throw Yt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new ca(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.comparator=e,this.data=new Wr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new T3(this.data.getIterator())}getIteratorFrom(e){return new T3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ji(this.comparator);return t.data=e,t}}class T3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.fields=e,e.sort(fa.comparator)}static empty(){return new Yo([])}unionWith(e){let t=new ji(fa.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new T6("Invalid base64 string: "+a):a}}(e);return new ha(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new ha(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ha.EMPTY_BYTE_STRING=new ha("");const eD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ff(n){if(tr(!!n,39018),typeof n=="string"){let e=0;const t=eD.exec(n);if(tr(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ui(n.seconds),nanos:ui(n.nanos)}}function ui(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function df(n){return typeof n=="string"?ha.fromBase64String(n):ha.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="server_timestamp",N6="__type__",D6="__previous_value__",O6="__local_write_time__";function _5(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[N6])===null||t===void 0?void 0:t.stringValue)===R6}function pm(n){const e=n.mapValue.fields[D6];return _5(e)?pm(e):e}function i1(n){const e=ff(n.mapValue.fields[O6].timestampValue);return new gi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t,r,i,a,o,s,c,f,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Rg="(default)";class a1{constructor(e,t){this.projectId=e,this.database=t||Rg}static empty(){return new a1("","")}get isDefaultDatabase(){return this.database===Rg}isEqual(e){return e instanceof a1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="__type__",nD="__max__",Fp={mapValue:{}},P6="__vector__",Ng="value";function hf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_5(n)?4:iD(n)?9007199254740991:rD(n)?10:11:Yt(28295,{value:n})}function ic(n,e){if(n===e)return!0;const t=hf(n);if(t!==hf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return i1(n).isEqual(i1(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=ff(i.timestampValue),s=ff(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return df(i.bytesValue).isEqual(df(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return ui(i.geoPointValue.latitude)===ui(a.geoPointValue.latitude)&&ui(i.geoPointValue.longitude)===ui(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ui(i.integerValue)===ui(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=ui(i.doubleValue),s=ui(a.doubleValue);return o===s?Tg(o)===Tg(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return wh(n.arrayValue.values||[],e.arrayValue.values||[],ic);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(I3(o)!==I3(s))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(s[c]===void 0||!ic(o[c],s[c])))return!1;return!0}(n,e);default:return Yt(52216,{left:n})}}function o1(n,e){return(n.values||[]).find(t=>ic(t,e))!==void 0}function _h(n,e){if(n===e)return 0;const t=hf(n),r=hf(e);if(t!==r)return fn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fn(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=ui(a.integerValue||a.doubleValue),c=ui(o.integerValue||o.doubleValue);return s<c?-1:s>c?1:s===c?0:isNaN(s)?isNaN(c)?0:-1:1}(n,e);case 3:return R3(n.timestampValue,e.timestampValue);case 4:return R3(i1(n),i1(e));case 5:return ay(n.stringValue,e.stringValue);case 6:return function(a,o){const s=df(a),c=df(o);return s.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),c=o.split("/");for(let f=0;f<s.length&&f<c.length;f++){const d=fn(s[f],c[f]);if(d!==0)return d}return fn(s.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=fn(ui(a.latitude),ui(o.latitude));return s!==0?s:fn(ui(a.longitude),ui(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return N3(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,c,f,d;const p=a.fields||{},g=o.fields||{},m=(s=p[Ng])===null||s===void 0?void 0:s.arrayValue,b=(c=g[Ng])===null||c===void 0?void 0:c.arrayValue,_=fn(((f=m==null?void 0:m.values)===null||f===void 0?void 0:f.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:N3(m,b)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===Fp.mapValue&&o===Fp.mapValue)return 0;if(a===Fp.mapValue)return 1;if(o===Fp.mapValue)return-1;const s=a.fields||{},c=Object.keys(s),f=o.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=ay(c[p],d[p]);if(g!==0)return g;const m=_h(s[c[p]],f[d[p]]);if(m!==0)return m}return fn(c.length,d.length)}(n.mapValue,e.mapValue);default:throw Yt(23264,{Pe:t})}}function R3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fn(n,e);const t=ff(n),r=ff(e),i=fn(t.seconds,r.seconds);return i!==0?i:fn(t.nanos,r.nanos)}function N3(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=_h(t[i],r[i]);if(a)return a}return fn(t.length,r.length)}function Ah(n){return oy(n)}function oy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ff(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return df(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Mt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=oy(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${oy(t.fields[o])}`;return i+"}"}(n.mapValue):Yt(61005,{value:n})}function ag(n){switch(hf(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pm(n);return e?16+ag(e):16;case 5:return 2*n.stringValue.length;case 6:return df(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+ag(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return wf(r.fields,(a,o)=>{i+=a.length+ag(o)}),i}(n.mapValue);default:throw Yt(13486,{value:n})}}function D3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sy(n){return!!n&&"integerValue"in n}function A5(n){return!!n&&"arrayValue"in n}function O3(n){return!!n&&"nullValue"in n}function k3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function og(n){return!!n&&"mapValue"in n}function rD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[k6])===null||t===void 0?void 0:t.stringValue)===P6}function G0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=G0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=G0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.value=e}static empty(){return new xo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!og(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=G0(t)}setAll(e){let t=fa.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=G0(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());og(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ic(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];og(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){wf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new xo(G0(this.value))}}function L6(n){const e=[];return wf(n.fields,(t,r)=>{const i=new fa([t]);if(og(r)){const a=L6(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Yo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new La(e,0,Jt.min(),Jt.min(),Jt.min(),xo.empty(),0)}static newFoundDocument(e,t,r,i){return new La(e,1,t,Jt.min(),r,i,0)}static newNoDocument(e,t){return new La(e,2,t,Jt.min(),Jt.min(),xo.empty(),0)}static newUnknownDocument(e,t){return new La(e,3,t,Jt.min(),Jt.min(),xo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof La&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new La(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t){this.position=e,this.inclusive=t}}function P3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Mt.comparator(Mt.fromName(o.referenceValue),t.key):r=_h(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function L3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ic(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t="asc"){this.field=e,this.dir=t}}function aD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{}class Si extends M6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sD(e,t,r):t==="array-contains"?new uD(e,r):t==="in"?new fD(e,r):t==="not-in"?new dD(e,r):t==="array-contains-any"?new hD(e,r):new Si(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lD(e,r):new cD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_h(t,this.value)):t!==null&&hf(this.value)===hf(t)&&this.matchesComparison(_h(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dl extends M6{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new dl(e,t)}matches(e){return j6(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function j6(n){return n.op==="and"}function B6(n){return oD(n)&&j6(n)}function oD(n){for(const e of n.filters)if(e instanceof dl)return!1;return!0}function ly(n){if(n instanceof Si)return n.field.canonicalString()+n.op.toString()+Ah(n.value);if(B6(n))return n.filters.map(e=>ly(e)).join(",");{const e=n.filters.map(t=>ly(t)).join(",");return`${n.op}(${e})`}}function F6(n,e){return n instanceof Si?function(r,i){return i instanceof Si&&r.op===i.op&&r.field.isEqual(i.field)&&ic(r.value,i.value)}(n,e):n instanceof dl?function(r,i){return i instanceof dl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&F6(o,i.filters[s]),!0):!1}(n,e):void Yt(19439)}function U6(n){return n instanceof Si?function(t){return`${t.field.canonicalString()} ${t.op} ${Ah(t.value)}`}(n):n instanceof dl?function(t){return t.op.toString()+" {"+t.getFilters().map(U6).join(" ,")+"}"}(n):"Filter"}class sD extends Si{constructor(e,t,r){super(e,t,r),this.key=Mt.fromName(r.referenceValue)}matches(e){const t=Mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class lD extends Si{constructor(e,t){super(e,"in",t),this.keys=z6("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cD extends Si{constructor(e,t){super(e,"not-in",t),this.keys=z6("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function z6(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Mt.fromName(r.referenceValue))}class uD extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return A5(t)&&o1(t.arrayValue,this.value)}}class fD extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&o1(this.value.arrayValue,t)}}class dD extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(o1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!o1(this.value.arrayValue,t)}}class hD extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!A5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>o1(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Ie=null}}function M3(n,e=null,t=[],r=[],i=null,a=null,o=null){return new pD(n,e,t,r,i,a,o)}function S5(n){const e=tn(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ly(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),hm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ah(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ah(r)).join(",")),e.Ie=t}return e.Ie}function E5(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!F6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!L3(n.startAt,e.startAt)&&L3(n.endAt,e.endAt)}function cy(n){return Mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function gD(n,e,t,r,i,a,o,s){return new S1(n,e,t,r,i,a,o,s)}function gm(n){return new S1(n)}function j3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function V6(n){return n.collectionGroup!==null}function $0(n){const e=tn(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new ji(fa.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(s=s.add(f.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Og(a,r))}),t.has(fa.keyField().canonicalString())||e.Ee.push(new Og(fa.keyField(),r))}return e.Ee}function Jl(n){const e=tn(n);return e.de||(e.de=mD(e,$0(n))),e.de}function mD(n,e){if(n.limitType==="F")return M3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Og(i.field,a)});const t=n.endAt?new Dg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Dg(n.startAt.position,n.startAt.inclusive):null;return M3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function uy(n,e){const t=n.filters.concat([e]);return new S1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fy(n,e,t){return new S1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mm(n,e){return E5(Jl(n),Jl(e))&&n.limitType===e.limitType}function q6(n){return`${S5(Jl(n))}|lt:${n.limitType}`}function th(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>U6(i)).join(", ")}]`),hm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ah(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ah(i)).join(",")),`Target(${r})`}(Jl(n))}; limitType=${n.limitType})`}function vm(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Mt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of $0(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,c){const f=P3(o,s,c);return o.inclusive?f<=0:f<0}(r.startAt,$0(r),i)||r.endAt&&!function(o,s,c){const f=P3(o,s,c);return o.inclusive?f>=0:f>0}(r.endAt,$0(r),i))}(n,e)}function vD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function H6(n){return(e,t)=>{let r=!1;for(const i of $0(n)){const a=yD(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function yD(n,e,t){const r=n.field.isKeyField()?Mt.comparator(e.key,t.key):function(a,o,s){const c=o.data.field(a),f=s.data.field(a);return c!==null&&f!==null?_h(c,f):Yt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Yt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return I6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new Wr(Mt.comparator);function tu(){return xD}const W6=new Wr(Mt.comparator);function j0(...n){let e=W6;for(const t of n)e=e.insert(t.key,t);return e}function G6(n){let e=W6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qf(){return Y0()}function $6(){return Y0()}function Y0(){return new md(n=>n.toString(),(n,e)=>n.isEqual(e))}const bD=new Wr(Mt.comparator),wD=new ji(Mt.comparator);function An(...n){let e=wD;for(const t of n)e=e.add(t);return e}const _D=new ji(fn);function AD(){return _D}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tg(e)?"-0":e}}function Y6(n){return{integerValue:""+n}}function SD(n,e){return Q9(e)?Y6(e):C5(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this._=void 0}}function ED(n,e,t){return n instanceof s1?function(i,a){const o={fields:{[N6]:{stringValue:R6},[O6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&_5(a)&&(a=pm(a)),a&&(o.fields[D6]=a),{mapValue:o}}(t,e):n instanceof l1?K6(n,e):n instanceof c1?Q6(n,e):function(i,a){const o=X6(i,a),s=B3(o)+B3(i.Re);return sy(o)&&sy(i.Re)?Y6(s):C5(i.serializer,s)}(n,e)}function CD(n,e,t){return n instanceof l1?K6(n,e):n instanceof c1?Q6(n,e):t}function X6(n,e){return n instanceof kg?function(r){return sy(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class s1 extends ym{}class l1 extends ym{constructor(e){super(),this.elements=e}}function K6(n,e){const t=Z6(e);for(const r of n.elements)t.some(i=>ic(i,r))||t.push(r);return{arrayValue:{values:t}}}class c1 extends ym{constructor(e){super(),this.elements=e}}function Q6(n,e){let t=Z6(e);for(const r of n.elements)t=t.filter(i=>!ic(i,r));return{arrayValue:{values:t}}}class kg extends ym{constructor(e,t){super(),this.serializer=e,this.Re=t}}function B3(n){return ui(n.integerValue||n.doubleValue)}function Z6(n){return A5(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.field=e,this.transform=t}}function TD(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof l1&&i instanceof l1||r instanceof c1&&i instanceof c1?wh(r.elements,i.elements,ic):r instanceof kg&&i instanceof kg?ic(r.Re,i.Re):r instanceof s1&&i instanceof s1}(n.transform,e.transform)}class RD{constructor(e,t){this.version=e,this.transformResults=t}}class _s{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _s}static exists(e){return new _s(void 0,e)}static updateTime(e){return new _s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class xm{}function J6(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new I5(n.key,_s.none()):new E1(n.key,n.data,_s.none());{const t=n.data,r=xo.empty();let i=new ji(fa.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new _f(n.key,r,new Yo(i.toArray()),_s.none())}}function ND(n,e,t){n instanceof E1?function(i,a,o){const s=i.value.clone(),c=U3(i.fieldTransforms,a,o.transformResults);s.setAll(c),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof _f?function(i,a,o){if(!sg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=U3(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(e8(i)),c.setAll(s),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function X0(n,e,t,r){return n instanceof E1?function(a,o,s,c){if(!sg(a.precondition,o))return s;const f=a.value.clone(),d=z3(a.fieldTransforms,c,o);return f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof _f?function(a,o,s,c){if(!sg(a.precondition,o))return s;const f=z3(a.fieldTransforms,c,o),d=o.data;return d.setAll(e8(a)),d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,o,s){return sg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function DD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=X6(r.transform,i||null);a!=null&&(t===null&&(t=xo.empty()),t.set(r.field,a))}return t||null}function F3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wh(r,i,(a,o)=>TD(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class E1 extends xm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _f extends xm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function e8(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function U3(n,e,t){const r=new Map;tr(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,CD(o,s,t[i]))}return r}function z3(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,ED(a,o,e))}return r}class I5 extends xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OD extends xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ND(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=X0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=X0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$6();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const c=J6(o,s);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Jt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&wh(this.mutations,e.mutations,(t,r)=>F3(t,r))&&wh(this.baseMutations,e.baseMutations,(t,r)=>F3(t,r))}}class T5{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){tr(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return bD}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new T5(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai,Dn;function MD(n){switch(n){case rt.OK:return Yt(64938);case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0;default:return Yt(15467,{code:n})}}function t8(n){if(n===void 0)return eu("GRPC error has no .code"),rt.UNKNOWN;switch(n){case Ai.OK:return rt.OK;case Ai.CANCELLED:return rt.CANCELLED;case Ai.UNKNOWN:return rt.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return rt.INTERNAL;case Ai.UNAVAILABLE:return rt.UNAVAILABLE;case Ai.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case Ai.NOT_FOUND:return rt.NOT_FOUND;case Ai.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case Ai.ABORTED:return rt.ABORTED;case Ai.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case Ai.DATA_LOSS:return rt.DATA_LOSS;default:return Yt(39323,{code:n})}}(Dn=Ai||(Ai={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new af([4294967295,4294967295],0);function V3(n){const e=S6().encode(n),t=new m6;return t.update(e),new Uint8Array(t.digest())}function q3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new af([t,r],0),new af([i,a],0)]}class R5{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new B0(`Invalid padding: ${t}`);if(r<0)throw new B0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new B0(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new B0(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=af.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(af.fromNumber(r)));return i.compare(jD)===1&&(i=new af([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=V3(e),[r,i]=q3(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new R5(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.pe===0)return;const t=V3(e),[r,i]=q3(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class B0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,C1.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bm(Jt.min(),i,new Wr(fn),tu(),An())}}class C1{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new C1(r,t,An(),An(),An())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class n8{constructor(e,t){this.targetId=e,this.Ce=t}}class r8{constructor(e,t,r=ha.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class H3{constructor(){this.Fe=0,this.Me=W3(),this.xe=ha.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=An(),t=An(),r=An();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Yt(38017,{changeType:a})}}),new C1(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=W3()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,tr(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class BD{constructor(e){this.ze=e,this.je=new Map,this.He=tu(),this.Je=Up(),this.Ye=Up(),this.Ze=new Wr(fn)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Yt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(cy(a))if(r===0){const o=new Mt(a.path);this.tt(t,o,La.newNoDocument(o,Jt.min()))}else tr(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const s=this.ct(e),c=s?this.lt(s,e,o):1;if(c!==0){this.st(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=df(r).toUint8Array()}catch(c){if(c instanceof T6)return bh("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{s=new R5(o,i,a)}catch(c){return bh(c instanceof B0?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return s.pe===0?null:s}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.ze.Pt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,o)=>{const s=this._t(o);if(s){if(a.current&&cy(s.target)){const c=new Mt(s.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,La.newNoDocument(c,e))}a.Le&&(t.set(o,a.qe()),a.Qe())}});let r=An();this.Ye.forEach((a,o)=>{let s=!0;o.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.He.forEach((a,o)=>o.setReadTime(e));const i=new bm(e,t,this.Ze,this.He,r);return this.He=tu(),this.Je=Up(),this.Ye=Up(),this.Ze=new Wr(fn),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new H3,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ji(fn),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ji(fn),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||At("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new H3),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Up(){return new Wr(Mt.comparator)}function W3(){return new Wr(Mt.comparator)}const FD={asc:"ASCENDING",desc:"DESCENDING"},UD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zD={and:"AND",or:"OR"};class VD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dy(n,e){return n.useProto3Json||hm(e)?e:{value:e}}function Pg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qD(n,e){return Pg(n,e.toTimestamp())}function ec(n){return tr(!!n,49232),Jt.fromTimestamp(function(t){const r=ff(t);return new gi(r.seconds,r.nanos)}(n))}function N5(n,e){return hy(n,e).canonicalString()}function hy(n,e){const t=function(i){return new Rr(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function a8(n){const e=Rr.fromString(n);return tr(u8(e),10190,{key:e.toString()}),e}function py(n,e){return N5(n.databaseId,e.path)}function pv(n,e){const t=a8(e);if(t.get(1)!==n.databaseId.projectId)throw new Ct(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ct(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Mt(s8(t))}function o8(n,e){return N5(n.databaseId,e)}function HD(n){const e=a8(n);return e.length===4?Rr.emptyPath():s8(e)}function gy(n){return new Rr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function s8(n){return tr(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function G3(n,e,t){return{name:py(n,e),fields:t.value.mapValue.fields}}function WD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Yt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,d){return f.useProto3Json?(tr(d===void 0||typeof d=="string",58123),ha.fromBase64String(d||"")):(tr(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ha.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(f){const d=f.code===void 0?rt.UNKNOWN:t8(f.code);return new Ct(d,f.message||"")}(o);t=new r8(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pv(n,r.document.name),a=ec(r.document.updateTime),o=r.document.createTime?ec(r.document.createTime):Jt.min(),s=new xo({mapValue:{fields:r.document.fields}}),c=La.newFoundDocument(i,a,o,s),f=r.targetIds||[],d=r.removedTargetIds||[];t=new lg(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pv(n,r.document),a=r.readTime?ec(r.readTime):Jt.min(),o=La.newNoDocument(i,a),s=r.removedTargetIds||[];t=new lg([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pv(n,r.document),a=r.removedTargetIds||[];t=new lg([],a,i,null)}else{if(!("filter"in e))return Yt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new LD(i,a),s=r.targetId;t=new n8(s,o)}}return t}function GD(n,e){let t;if(e instanceof E1)t={update:G3(n,e.key,e.value)};else if(e instanceof I5)t={delete:py(n,e.key)};else if(e instanceof _f)t={update:G3(n,e.key,e.data),updateMask:tO(e.fieldMask)};else{if(!(e instanceof OD))return Yt(16599,{ft:e.type});t={verify:py(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof s1)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof l1)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof c1)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof kg)return{fieldPath:o.field.canonicalString(),increment:s.Re};throw Yt(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:qD(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Yt(27497)}(n,e.precondition)),t}function $D(n,e){return n&&n.length>0?(tr(e!==void 0,14353),n.map(t=>function(i,a){let o=i.updateTime?ec(i.updateTime):ec(a);return o.isEqual(Jt.min())&&(o=ec(a)),new RD(o,i.transformResults||[])}(t,e))):[]}function YD(n,e){return{documents:[o8(n,e.path)]}}function XD(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=o8(n,i);const a=function(f){if(f.length!==0)return c8(dl.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(f){if(f.length!==0)return f.map(d=>function(g){return{field:nh(g.field),direction:ZD(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=dy(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function KD(n){let e=HD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){tr(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];t.where&&(a=function(p){const g=l8(p);return g instanceof dl&&B6(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(b){return new Og(rh(b.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(t.orderBy));let s=null;t.limit&&(s=function(p){let g;return g=typeof p=="object"?p.value:p,hm(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,m=p.values||[];return new Dg(m,g)}(t.startAt));let f=null;return t.endAt&&(f=function(p){const g=!p.before,m=p.values||[];return new Dg(m,g)}(t.endAt)),gD(e,i,o,a,s,"F",c,f)}function QD(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function l8(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=rh(t.unaryFilter.field);return Si.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rh(t.unaryFilter.field);return Si.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=rh(t.unaryFilter.field);return Si.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rh(t.unaryFilter.field);return Si.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Yt(61313);default:return Yt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Si.create(rh(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Yt(58110);default:return Yt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dl.create(t.compositeFilter.filters.map(r=>l8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yt(1026)}}(t.compositeFilter.op))}(n):Yt(30097,{filter:n})}function ZD(n){return FD[n]}function JD(n){return UD[n]}function eO(n){return zD[n]}function nh(n){return{fieldPath:n.canonicalString()}}function rh(n){return fa.fromServerFormat(n.fieldPath)}function c8(n){return n instanceof Si?function(t){if(t.op==="=="){if(k3(t.value))return{unaryFilter:{field:nh(t.field),op:"IS_NAN"}};if(O3(t.value))return{unaryFilter:{field:nh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(k3(t.value))return{unaryFilter:{field:nh(t.field),op:"IS_NOT_NAN"}};if(O3(t.value))return{unaryFilter:{field:nh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nh(t.field),op:JD(t.op),value:t.value}}}(n):n instanceof dl?function(t){const r=t.getFilters().map(i=>c8(i));return r.length===1?r[0]:{compositeFilter:{op:eO(t.op),filters:r}}}(n):Yt(54877,{filter:n})}function tO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function u8(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t,r,i,a=Jt.min(),o=Jt.min(),s=ha.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=c}withSequenceNumber(e){return new ef(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.wt=e}}function rO(n){const e=KD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.Cn=new aO}addToCollectionParentIndex(e,t){return this.Cn.add(t),nt.resolve()}getCollectionParents(e,t){return nt.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return nt.resolve()}deleteFieldIndex(e,t){return nt.resolve()}deleteAllFieldIndexes(e){return nt.resolve()}createTargetIndexes(e,t){return nt.resolve()}getDocumentsMatchingTarget(e,t){return nt.resolve(null)}getIndexType(e,t){return nt.resolve(0)}getFieldIndexes(e,t){return nt.resolve([])}getNextCollectionGroupToUpdate(e){return nt.resolve(null)}getMinOffset(e,t){return nt.resolve(uf.min())}getMinOffsetFromCollectionGroup(e,t){return nt.resolve(uf.min())}updateCollectionGroup(e,t,r){return nt.resolve()}updateIndexEntries(e,t){return nt.resolve()}}class aO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ji(Rr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ji(Rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f8=41943040;class vo{static withCacheSize(e){return new vo(e,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo.DEFAULT_COLLECTION_PERCENTILE=10,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vo.DEFAULT=new vo(f8,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vo.DISABLED=new vo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Sh(0)}static lr(){return new Sh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="LruGarbageCollector",oO=1048576;function X3([n,e],[t,r]){const i=fn(n,t);return i===0?fn(e,r):i}class sO{constructor(e){this.Er=e,this.buffer=new ji(X3),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();X3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){At(Y3,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mh(t)?At(Y3,"Ignoring IndexedDB error during garbage collection: ",t):await Lh(t)}await this.mr(3e5)})}}class cO{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return nt.resolve(dm.le);const r=new sO(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(At("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve($3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$3):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,o,s,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(At("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,s=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),eh()<=_n.DEBUG&&At("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(c-s)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function uO(n,e){return new cO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.changes=new md(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,La.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?nt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&X0(r.mutation,i,Yo.empty(),gi.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,An()).next(()=>r))}getLocalViewOfDocuments(e,t,r=An()){const i=Qf();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=j0();return a.forEach((s,c)=>{o=o.insert(s,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Qf();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,An()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=tu();const o=Y0(),s=function(){return Y0()}();return t.forEach((c,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof _f)?a=a.insert(f.key,f):d!==void 0?(o.set(f.key,d.mutation.getFieldMask()),X0(d.mutation,f,d.mutation.getFieldMask(),gi.now())):o.set(f.key,Yo.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((f,d)=>o.set(f,d)),t.forEach((f,d)=>{var p;return s.set(f,new dO(d,(p=o.get(f))!==null&&p!==void 0?p:null))}),s))}recalculateAndSaveOverlays(e,t){const r=Y0();let i=new Wr((o,s)=>o-s),a=An();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(c=>{const f=t.get(c);if(f===null)return;let d=r.get(c)||Yo.empty();d=s.applyToLocalView(f,d),r.set(c,d);const p=(i.get(s.batchId)||An()).add(c);i=i.insert(s.batchId,p)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const c=s.getNext(),f=c.key,d=c.value,p=$6();d.forEach(g=>{if(!a.has(g)){const m=J6(t.get(g),r.get(g));m!==null&&p.set(g,m),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return nt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Mt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):V6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):nt.resolve(Qf());let s=r1,c=a;return o.next(f=>nt.forEach(f,(d,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),a.get(d)?nt.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,c,f,An())).next(d=>({batchId:s,changes:G6(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mt(t)).next(r=>{let i=j0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=j0();return this.indexManager.getCollectionParents(e,a).next(s=>nt.forEach(s,c=>{const f=function(p,g){return new S1(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((c,f)=>{const d=f.getKey();o.get(d)===null&&(o=o.insert(d,La.newInvalidDocument(d)))});let s=j0();return o.forEach((c,f)=>{const d=a.get(c);d!==void 0&&X0(d.mutation,f,Yo.empty(),gi.now()),vm(t,f)&&(s=s.insert(c,f))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return nt.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ec(i.createTime)}}(t)),nt.resolve()}getNamedQuery(e,t){return nt.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:rO(i.bundledQuery),readTime:ec(i.readTime)}}(t)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.overlays=new Wr(Mt.comparator),this.Qr=new Map}getOverlay(e,t){return nt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qf();return nt.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.St(e,t,a)}),nt.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),nt.resolve()}getOverlaysForCollection(e,t,r){const i=Qf(),a=t.length+1,o=new Mt(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const c=s.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return nt.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Wr((f,d)=>f-d);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let d=a.get(f.largestBatchId);d===null&&(d=Qf(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const s=Qf(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>s.set(f,d)),!(s.size()>=i)););return nt.resolve(s)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PD(t,r));let a=this.Qr.get(t);a===void 0&&(a=An(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.sessionToken=ha.EMPTY_BYTE_STRING}getSessionToken(e){return nt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.$r=new ji(Xi.Ur),this.Kr=new ji(Xi.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Xi(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Xi(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new Mt(new Rr([])),r=new Xi(t,e),i=new Xi(t,e+1),a=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),a.push(o.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Mt(new Rr([])),r=new Xi(t,e),i=new Xi(t,e+1);let a=An();return this.Kr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Xi(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xi{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Mt.comparator(e.key,t.key)||fn(e.Zr,t.Zr)}static Wr(e,t){return fn(e.Zr,t.Zr)||Mt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ji(Xi.Ur)}checkEmpty(e){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kD(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.Xr=this.Xr.add(new Xi(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return nt.resolve(o)}lookupMutationBatch(e,t){return nt.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return nt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?w5:this.nr-1)}getAllMutationBatches(e){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xi(t,0),i=new Xi(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],o=>{const s=this.ei(o.Zr);a.push(s)}),nt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ji(fn);return t.forEach(i=>{const a=new Xi(i,0),o=new Xi(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,o],s=>{r=r.add(s.Zr)})}),nt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Mt.isDocumentKey(a)||(a=a.child(""));const o=new Xi(new Mt(a),0);let s=new ji(fn);return this.Xr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(s=s.add(c.Zr)),!0)},o),nt.resolve(this.ni(s))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){tr(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return nt.forEach(t.mutations,i=>{const a=new Xi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Xi(t,0),i=this.Xr.firstAfterOrEqual(r);return nt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,nt.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.ii=e,this.docs=function(){return new Wr(Mt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return nt.resolve(r?r.document.mutableCopy():La.newInvalidDocument(t))}getEntries(e,t){let r=tu();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():La.newInvalidDocument(i))}),nt.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=tu();const o=t.path,s=new Mt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||$9(G9(d),r)<=0||(i.has(d.key)||vm(t,d))&&(a=a.insert(d.key,d.mutableCopy()))}return nt.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Yt(9500)}si(e,t){return nt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xO(this)}getSize(e){return nt.resolve(this.size)}}class xO extends fO{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),nt.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.persistence=e,this.oi=new md(t=>S5(t),E5),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this._i=0,this.ai=new D5,this.targetCount=0,this.ui=Sh.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),nt.resolve()}getLastRemoteSnapshotVersion(e){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nt.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),nt.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Sh(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,nt.resolve()}updateTargetData(e,t){return this.Tr(t),nt.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,nt.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.oi.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),nt.waitFor(a).next(()=>i)}getTargetCount(e){return nt.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return nt.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),nt.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),nt.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),nt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return nt.resolve(r)}containsKey(e,t){return nt.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,t){this.ci={},this.overlays={},this.li=new dm(0),this.hi=!1,this.hi=!0,this.Pi=new mO,this.referenceDelegate=e(this),this.Ti=new bO(this),this.indexManager=new iO,this.remoteDocumentCache=function(i){return new yO(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new nO(t),this.Ei=new pO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new vO(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){At("MemoryPersistence","Starting transaction:",e);const i=new wO(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return nt.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class wO extends X9{constructor(e){super(),this.currentSequenceNumber=e}}class O5{constructor(e){this.persistence=e,this.Vi=new D5,this.mi=null}static fi(e){return new O5(e)}get gi(){if(this.mi)return this.mi;throw Yt(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),nt.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),nt.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),nt.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.gi,r=>{const i=Mt.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,Jt.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return nt.or([()=>nt.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Lg{constructor(e,t){this.persistence=e,this.yi=new md(r=>Z9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uO(this,t)}static fi(e,t){return new Lg(e,t)}di(){}Ai(e){return nt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return nt.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?nt.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(s=>{s||(r++,a.removeEntry(o,Jt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),nt.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),nt.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),nt.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),nt.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ag(e.data.value)),t}Dr(e,t,r){return nt.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return nt.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=An(),i=An();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new k5(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return QT()?8:K9(Ba())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.bs(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new _O;return this.Ss(e,t,o).next(s=>{if(a.result=s,this.fs)return this.Ds(e,t,o,s.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(eh()<=_n.DEBUG&&At("QueryEngine","SDK will not create cache indexes for query:",th(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),nt.resolve()):(eh()<=_n.DEBUG&&At("QueryEngine","Query:",th(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(eh()<=_n.DEBUG&&At("QueryEngine","The SDK decides to create cache indexes for query:",th(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jl(t))):nt.resolve())}ws(e,t){if(j3(t))return nt.resolve(null);let r=Jl(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=fy(t,null,"F"),r=Jl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=An(...a);return this.ys.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.vs(t,s);return this.Cs(t,f,o,c.readTime)?this.ws(e,fy(t,null,"F")):this.Fs(e,f,t,c)}))})))}bs(e,t,r,i){return j3(t)||i.isEqual(Jt.min())?nt.resolve(null):this.ys.getDocuments(e,r).next(a=>{const o=this.vs(t,a);return this.Cs(t,o,r,i)?nt.resolve(null):(eh()<=_n.DEBUG&&At("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),th(t)),this.Fs(e,o,t,W9(i,r1)).next(s=>s))})}vs(e,t){let r=new ji(H6(e));return t.forEach((i,a)=>{vm(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return eh()<=_n.DEBUG&&At("QueryEngine","Using full collection scan to execute query:",th(t)),this.ys.getDocumentsMatchingQuery(e,t,uf.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="LocalStore",SO=3e8;class EO{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Wr(fn),this.Os=new md(a=>S5(a),E5),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hO(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function CO(n,e,t,r){return new EO(n,e,t,r)}async function h8(n,e){const t=tn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let c=An();for(const f of i){o.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(f=>({ks:f,removedBatchIds:o,addedBatchIds:s}))})})}function IO(n,e){const t=tn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(s,c,f,d){const p=f.batch,g=p.keys();let m=nt.resolve();return g.forEach(b=>{m=m.next(()=>d.getEntry(c,b)).next(_=>{const I=f.docVersions.get(b);tr(I!==null,48541),_.version.compareTo(I)<0&&(p.applyToRemoteDocument(_,f),_.isValidDocument()&&(_.setReadTime(f.commitVersion),d.addEntry(_)))})}),m.next(()=>s.mutationQueue.removeMutationBatch(c,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let c=An();for(let f=0;f<s.mutationResults.length;++f)s.mutationResults[f].transformResults.length>0&&(c=c.add(s.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function p8(n){const e=tn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function TO(n,e){const t=tn(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const s=[];e.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;s.push(t.Ti.removeMatchingKeys(a,d.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(a,d.addedDocuments,p)));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(ha.EMPTY_BYTE_STRING,Jt.min()).withLastLimboFreeSnapshotVersion(Jt.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(p,m),function(_,I,C){return _.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=SO?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,m,d)&&s.push(t.Ti.updateTargetData(a,m))});let c=tu(),f=An();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,d))}),s.push(RO(a,o,e.documentUpdates).next(d=>{c=d.qs,f=d.Qs})),!r.isEqual(Jt.min())){const d=t.Ti.getLastRemoteSnapshotVersion(a).next(p=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(d)}return nt.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,f)).next(()=>c)}).then(a=>(t.xs=i,a))}function RO(n,e,t){let r=An(),i=An();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=tu();return t.forEach((s,c)=>{const f=a.get(s);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(s)),c.isNoDocument()&&c.version.isEqual(Jt.min())?(e.removeEntry(s,c.readTime),o=o.insert(s,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),o=o.insert(s,c)):At(P5,"Ignoring outdated watch update for ",s,". Current version:",f.version," Watch version:",c.version)}),{qs:o,Qs:i}})}function NO(n,e){const t=tn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=w5),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DO(n,e){const t=tn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,nt.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new ef(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function my(n,e,t){const r=tn(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Mh(o))throw o;At(P5,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function K3(n,e,t){const r=tn(n);let i=Jt.min(),a=An();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,f,d){const p=tn(c),g=p.Os.get(d);return g!==void 0?nt.resolve(p.xs.get(g)):p.Ti.getTargetData(f,d)}(r,o,Jl(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,s.targetId).next(c=>{a=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Jt.min(),t?a:An())).next(s=>(OO(r,vD(e),s),{documents:s,$s:a})))}function OO(n,e,t){let r=n.Ns.get(e)||Jt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class Q3{constructor(){this.activeTargetIds=AD()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kO{constructor(){this.xo=new Q3,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Q3,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="ConnectivityMonitor";class J3{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){At(Z3,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){At(Z3,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zp=null;function vy(){return zp===null?zp=function(){return 268435456+Math.round(2147483648*Math.random())}():zp++,"0x"+zp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="RestConnection",LO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Rg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const o=vy(),s=this.jo(e,t.toUriEncodedString());At(gv,`Sending RPC '${e}' ${o}:`,s,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,a);const{host:f}=new URL(s),d=Oh(f);return this.Jo(e,s,c,r,d).then(p=>(At(gv,`Received RPC '${e}' ${o}: `,p),p),p=>{throw bh(gv,`RPC '${e}' ${o} failed with error: `,p,"url: ",s,"request:",r),p})}Yo(e,t,r,i,a,o){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ph}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=LO[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="WebChannelConnection";class BO extends MO{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=vy();return new Promise((s,c)=>{const f=new v6;f.setWithCredentials(!0),f.listenOnce(y6.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ig.NO_ERROR:const p=f.getResponseJson();At(Ia,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case ig.TIMEOUT:At(Ia,`RPC '${e}' ${o} timed out`),c(new Ct(rt.DEADLINE_EXCEEDED,"Request time out"));break;case ig.HTTP_ERROR:const g=f.getStatus();if(At(Ia,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let m=f.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m==null?void 0:m.error;if(b&&b.status&&b.message){const _=function(C){const D=C.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(D)>=0?D:rt.UNKNOWN}(b.status);c(new Ct(_,b.message))}else c(new Ct(rt.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Ct(rt.UNAVAILABLE,"Connection failed."));break;default:Yt(9055,{h_:e,streamId:o,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{At(Ia,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);At(Ia,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",d,r,15)})}I_(e,t,r){const i=vy(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=w6(),s=b6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const d=a.join("");At(Ia,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=o.createWebChannel(d,c);this.E_(p);let g=!1,m=!1;const b=new jO({Zo:I=>{m?At(Ia,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(g||(At(Ia,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),At(Ia,`RPC '${e}' stream ${i} sending:`,I),p.send(I))},Xo:()=>p.close()}),_=(I,C,D)=>{I.listen(C,B=>{try{D(B)}catch(q){setTimeout(()=>{throw q},0)}})};return _(p,M0.EventType.OPEN,()=>{m||(At(Ia,`RPC '${e}' stream ${i} transport opened.`),b.__())}),_(p,M0.EventType.CLOSE,()=>{m||(m=!0,At(Ia,`RPC '${e}' stream ${i} transport closed`),b.u_(),this.d_(p))}),_(p,M0.EventType.ERROR,I=>{m||(m=!0,bh(Ia,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),b.u_(new Ct(rt.UNAVAILABLE,"The operation could not be completed")))}),_(p,M0.EventType.MESSAGE,I=>{var C;if(!m){const D=I.data[0];tr(!!D,16349);const B=D,q=(B==null?void 0:B.error)||((C=B[0])===null||C===void 0?void 0:C.error);if(q){At(Ia,`RPC '${e}' stream ${i} received error:`,q);const Y=q.status;let H=function(R){const M=Ai[R];if(M!==void 0)return t8(M)}(Y),P=q.message;H===void 0&&(H=rt.INTERNAL,P="Unknown error status: "+Y+" with message "+q.message),m=!0,b.u_(new Ct(H,P)),p.close()}else At(Ia,`RPC '${e}' stream ${i} received:`,D),b.c_(D)}}),_(s,x6.STAT_EVENT,I=>{I.stat===iy.PROXY?At(Ia,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===iy.NOPROXY&&At(Ia,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.a_()},0),b}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function mv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n){return new VD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&At("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="PersistentStream";class m8{constructor(e,t,r,i,a,o,s,c){this.xi=e,this.S_=r,this.D_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new g8(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===rt.RESOURCE_EXHAUSTED?(eu(t.toString()),eu("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{const i=new Ct(rt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return At(e_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(At(e_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FO extends m8{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=WD(this.serializer,e),r=function(a){if(!("targetChange"in a))return Jt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Jt.min():o.readTime?ec(o.readTime):Jt.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=gy(this.serializer),t.addTarget=function(a,o){let s;const c=o.target;if(s=cy(c)?{documents:YD(a,c)}:{query:XD(a,c).gt},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=i8(a,o.resumeToken);const f=dy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}else if(o.snapshotVersion.compareTo(Jt.min())>0){s.readTime=Pg(a,o.snapshotVersion.toTimestamp());const f=dy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}return s}(this.serializer,e);const r=QD(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=gy(this.serializer),t.removeTarget=e,this.Q_(t)}}class UO extends m8{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return tr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tr(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){tr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=$D(e.writeResults,e.commitTime),r=ec(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=gy(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>GD(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{}class VO extends zO{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new Ct(rt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.zo(e,hy(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ct(rt.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Yo(e,hy(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ct(rt.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class qO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(eu(t),this.ua=!1):At("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="RemoteStore";class HO{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(o=>{r.enqueueAndForget(async()=>{vd(this)&&(At(ld,"Restarting streams for network reachability change."),await async function(c){const f=tn(c);f.da.add(4),await I1(f),f.Va.set("Unknown"),f.da.delete(4),await _m(f)}(this))})}),this.Va=new qO(r,i)}}async function _m(n){if(vd(n))for(const e of n.Aa)await e(!0)}async function I1(n){for(const e of n.Aa)await e(!1)}function v8(n,e){const t=tn(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),B5(t)?j5(t):jh(t).N_()&&M5(t,e))}function L5(n,e){const t=tn(n),r=jh(t);t.Ea.delete(e),r.N_()&&y8(t,e),t.Ea.size===0&&(r.N_()?r.k_():vd(t)&&t.Va.set("Unknown"))}function M5(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Jt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jh(n).Z_(e)}function y8(n,e){n.ma.Ke(e),jh(n).X_(e)}function j5(n){n.ma=new BD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),jh(n).start(),n.Va.ca()}function B5(n){return vd(n)&&!jh(n).O_()&&n.Ea.size>0}function vd(n){return tn(n).da.size===0}function x8(n){n.ma=void 0}async function WO(n){n.Va.set("Online")}async function GO(n){n.Ea.forEach((e,t)=>{M5(n,e)})}async function $O(n,e){x8(n),B5(n)?(n.Va.Pa(e),j5(n)):n.Va.set("Unknown")}async function YO(n,e,t){if(n.Va.set("Online"),e instanceof r8&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ea.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ea.delete(s),i.ma.removeTarget(s))}(n,e)}catch(r){At(ld,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mg(n,r)}else if(e instanceof lg?n.ma.Xe(e):e instanceof n8?n.ma.ot(e):n.ma.nt(e),!t.isEqual(Jt.min()))try{const r=await p8(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.ma.It(o);return s.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ea.get(f);d&&a.Ea.set(f,d.withResumeToken(c.resumeToken,o))}}),s.targetMismatches.forEach((c,f)=>{const d=a.Ea.get(c);if(!d)return;a.Ea.set(c,d.withResumeToken(ha.EMPTY_BYTE_STRING,d.snapshotVersion)),y8(a,c);const p=new ef(d.target,c,f,d.sequenceNumber);M5(a,p)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){At(ld,"Failed to raise snapshot:",r),await Mg(n,r)}}async function Mg(n,e,t){if(!Mh(e))throw e;n.da.add(1),await I1(n),n.Va.set("Offline"),t||(t=()=>p8(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{At(ld,"Retrying IndexedDB access"),await t(),n.da.delete(1),await _m(n)})}function b8(n,e){return e().catch(t=>Mg(n,t,e))}async function Am(n){const e=tn(n),t=pf(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:w5;for(;XO(e);)try{const i=await NO(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,KO(e,i)}catch(i){await Mg(e,i)}w8(e)&&_8(e)}function XO(n){return vd(n)&&n.Ia.length<10}function KO(n,e){n.Ia.push(e);const t=pf(n);t.N_()&&t.ea&&t.ta(e.mutations)}function w8(n){return vd(n)&&!pf(n).O_()&&n.Ia.length>0}function _8(n){pf(n).start()}async function QO(n){pf(n).ia()}async function ZO(n){const e=pf(n);for(const t of n.Ia)e.ta(t.mutations)}async function JO(n,e,t){const r=n.Ia.shift(),i=T5.from(r,e,t);await b8(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Am(n)}async function ek(n,e){e&&pf(n).ea&&await async function(r,i){if(function(o){return MD(o)&&o!==rt.ABORTED}(i.code)){const a=r.Ia.shift();pf(r).L_(),await b8(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Am(r)}}(n,e),w8(n)&&_8(n)}async function t_(n,e){const t=tn(n);t.asyncQueue.verifyOperationInProgress(),At(ld,"RemoteStore received new credentials");const r=vd(t);t.da.add(3),await I1(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await _m(t)}async function tk(n,e){const t=tn(n);e?(t.da.delete(2),await _m(t)):e||(t.da.add(2),await I1(t),t.Va.set("Unknown"))}function jh(n){return n.fa||(n.fa=function(t,r,i){const a=tn(t);return a.oa(),new FO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:WO.bind(null,n),n_:GO.bind(null,n),i_:$O.bind(null,n),Y_:YO.bind(null,n)}),n.Aa.push(async e=>{e?(n.fa.L_(),B5(n)?j5(n):n.Va.set("Unknown")):(await n.fa.stop(),x8(n))})),n.fa}function pf(n){return n.ga||(n.ga=function(t,r,i){const a=tn(t);return a.oa(),new UO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:QO.bind(null,n),i_:ek.bind(null,n),na:ZO.bind(null,n),ra:JO.bind(null,n)}),n.Aa.push(async e=>{e?(n.ga.L_(),await Am(n)):(await n.ga.stop(),n.Ia.length>0&&(At(ld,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Kc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new F5(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U5(n,e){if(eu("AsyncQueue",`${e}: ${n}`),Mh(n))return new Ct(rt.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{static emptySet(e){return new ph(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Mt.comparator(t.key,r.key):(t,r)=>Mt.comparator(t.key,r.key),this.keyedMap=j0(),this.sortedSet=new Wr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ph)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ph;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(){this.pa=new Wr(Mt.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Yt(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Eh{constructor(e,t,r,i,a,o,s,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new Eh(e,t,ph.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class rk{constructor(){this.queries=r_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=tn(t),a=i.queries;i.queries=r_(),a.forEach((o,s)=>{for(const c of s.Sa)c.onError(r)})})(this,new Ct(rt.ABORTED,"Firestore shutting down"))}}function r_(){return new md(n=>q6(n),mm)}async function z5(n,e){const t=tn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Da()&&e.va()&&(r=2):(a=new nk,r=e.va()?0:1);try{switch(r){case 0:a.ba=await t.onListen(i,!0);break;case 1:a.ba=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=U5(o,`Initialization of query '${th(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.Sa.push(e),e.Fa(t.onlineState),a.ba&&e.Ma(a.ba)&&q5(t)}async function V5(n,e){const t=tn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.va()?0:1:!a.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ik(n,e){const t=tn(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.Sa)s.Ma(i)&&(r=!0);o.ba=i}}r&&q5(t)}function ak(n,e,t){const r=tn(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function q5(n){n.Ca.forEach(e=>{e.next()})}var yy,i_;(i_=yy||(yy={})).xa="default",i_.Cache="cache";class H5{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Eh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==yy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.key=e}}class S8{constructor(e){this.key=e}}class ok{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=An(),this.mutatedKeys=An(),this.Za=H6(e),this.Xa=new ph(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new n_,i=t?t.Xa:this.Xa;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const g=i.get(d),m=vm(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;g&&m?g.data.isEqual(m.data)?b!==_&&(r.track({type:3,doc:m}),I=!0):this.ru(g,m)||(r.track({type:2,doc:m}),I=!0,(c&&this.Za(m,c)>0||f&&this.Za(m,f)<0)&&(s=!0)):!g&&m?(r.track({type:0,doc:m}),I=!0):g&&!m&&(r.track({type:1,doc:g}),I=!0,(c||f)&&(s=!0)),I&&(m?(o=o.add(m),a=_?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Xa:o,nu:r,Cs:s,mutatedKeys:a}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((d,p)=>function(m,b){const _=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt(20277,{Vt:I})}};return _(m)-_(b)}(d.type,p.type)||this.Za(d.doc,p.doc)),this.iu(r),i=i!=null&&i;const s=t&&!i?this.su():[],c=this.Ya.size===0&&this.current&&!i?1:0,f=c!==this.Ja;return this.Ja=c,o.length!==0||f?{snapshot:new Eh(this.query,e.Xa,a,o,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:s}:{ou:s}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new n_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=An(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new S8(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new A8(r))}),t}au(e){this.Ha=e.$s,this.Ya=An();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Eh.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const W5="SyncEngine";class sk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lk{constructor(e){this.key=e,this.cu=!1}}class ck{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new md(s=>q6(s),mm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Wr(Mt.comparator),this.Eu=new Map,this.du=new D5,this.Au={},this.Ru=new Map,this.Vu=Sh.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function uk(n,e,t=!0){const r=N8(n);let i;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.uu()):i=await E8(r,e,t,!0),i}async function fk(n,e){const t=N8(n);await E8(t,e,!0,!1)}async function E8(n,e,t,r){const i=await DO(n.localStore,Jl(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await dk(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&v8(n.remoteStore,i),s}async function dk(n,e,t,r,i){n.fu=(p,g,m)=>async function(_,I,C,D){let B=I.view.tu(C);B.Cs&&(B=await K3(_.localStore,I.query,!1).then(({documents:P})=>I.view.tu(P,B)));const q=D&&D.targetChanges.get(I.targetId),Y=D&&D.targetMismatches.get(I.targetId)!=null,H=I.view.applyChanges(B,_.isPrimaryClient,q,Y);return o_(_,I.targetId,H.ou),H.snapshot}(n,p,g,m);const a=await K3(n.localStore,e,!0),o=new ok(e,a.$s),s=o.tu(a.documents),c=C1.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(s,n.isPrimaryClient,c);o_(n,t,f.ou);const d=new sk(e,t,o);return n.hu.set(e,d),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot}async function hk(n,e,t){const r=tn(n),i=r.hu.get(e),a=r.Pu.get(i.targetId);if(a.length>1)return r.Pu.set(i.targetId,a.filter(o=>!mm(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await my(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&L5(r.remoteStore,i.targetId),xy(r,i.targetId)}).catch(Lh)):(xy(r,i.targetId),await my(r.localStore,i.targetId,!0))}async function pk(n,e){const t=tn(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),L5(t.remoteStore,r.targetId))}async function gk(n,e,t){const r=_k(n);try{const i=await function(o,s){const c=tn(o),f=gi.now(),d=s.reduce((m,b)=>m.add(b.key),An());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=tu(),_=An();return c.Bs.getEntries(m,d).next(I=>{b=I,b.forEach((C,D)=>{D.isValidDocument()||(_=_.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,b)).next(I=>{p=I;const C=[];for(const D of s){const B=DD(D,p.get(D.key).overlayedDocument);B!=null&&C.push(new _f(D.key,B,L6(B.value.mapValue),_s.exists(!0)))}return c.mutationQueue.addMutationBatch(m,f,C,s)}).next(I=>{g=I;const C=I.applyToLocalDocumentSet(p,_);return c.documentOverlayCache.saveOverlays(m,I.batchId,C)})}).then(()=>({batchId:g.batchId,changes:G6(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,c){let f=o.Au[o.currentUser.toKey()];f||(f=new Wr(fn)),f=f.insert(s,c),o.Au[o.currentUser.toKey()]=f}(r,i.batchId,t),await T1(r,i.changes),await Am(r.remoteStore)}catch(i){const a=U5(i,"Failed to persist write");t.reject(a)}}async function C8(n,e){const t=tn(n);try{const r=await TO(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Eu.get(a);o&&(tr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?tr(o.cu,14607):i.removedDocuments.size>0&&(tr(o.cu,42227),o.cu=!1))}),await T1(t,r,e)}catch(r){await Lh(r)}}function a_(n,e,t){const r=tn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.hu.forEach((a,o)=>{const s=o.view.Fa(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const c=tn(o);c.onlineState=s;let f=!1;c.queries.forEach((d,p)=>{for(const g of p.Sa)g.Fa(s)&&(f=!0)}),f&&q5(c)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mk(n,e,t){const r=tn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let o=new Wr(Mt.comparator);o=o.insert(a,La.newNoDocument(a,Jt.min()));const s=An().add(a),c=new bm(Jt.min(),new Map,new Wr(fn),o,s);await C8(r,c),r.Iu=r.Iu.remove(a),r.Eu.delete(e),G5(r)}else await my(r.localStore,e,!1).then(()=>xy(r,e,t)).catch(Lh)}async function vk(n,e){const t=tn(n),r=e.batch.batchId;try{const i=await IO(t.localStore,e);T8(t,r,null),I8(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await T1(t,i)}catch(i){await Lh(i)}}async function yk(n,e,t){const r=tn(n);try{const i=await function(o,s){const c=tn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return c.mutationQueue.lookupMutationBatch(f,s).next(p=>(tr(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(f,p))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,s)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>c.localDocuments.getDocuments(f,d))})}(r.localStore,e);T8(r,e,t),I8(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await T1(r,i)}catch(i){await Lh(i)}}function I8(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function T8(n,e,t){const r=tn(n);let i=r.Au[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function xy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||R8(n,r)})}function R8(n,e){n.Tu.delete(e.path.canonicalString());const t=n.Iu.get(e);t!==null&&(L5(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),G5(n))}function o_(n,e,t){for(const r of t)r instanceof A8?(n.du.addReference(r.key,e),xk(n,r)):r instanceof S8?(At(W5,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||R8(n,r.key)):Yt(19791,{pu:r})}function xk(n,e){const t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(At(W5,"New document in limbo: "+t),n.Tu.add(r),G5(n))}function G5(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const e=n.Tu.values().next().value;n.Tu.delete(e);const t=new Mt(Rr.fromString(e)),r=n.Vu.next();n.Eu.set(r,new lk(t)),n.Iu=n.Iu.insert(t,r),v8(n.remoteStore,new ef(Jl(gm(t.path)),r,"TargetPurposeLimboResolution",dm.le))}}async function T1(n,e,t){const r=tn(n),i=[],a=[],o=[];r.hu.isEmpty()||(r.hu.forEach((s,c)=>{o.push(r.fu(c,e,t).then(f=>{var d;if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){i.push(f);const p=k5.Rs(c.targetId,f);a.push(p)}}))}),await Promise.all(o),r.lu.Y_(i),await async function(c,f){const d=tn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>nt.forEach(f,g=>nt.forEach(g.ds,m=>d.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>nt.forEach(g.As,m=>d.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Mh(p))throw p;At(P5,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const m=d.xs.get(g),b=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(b);d.xs=d.xs.insert(g,_)}}}(r.localStore,a))}async function bk(n,e){const t=tn(n);if(!t.currentUser.isEqual(e)){At(W5,"User change. New user:",e.toKey());const r=await h8(t.localStore,e);t.currentUser=e,function(a,o){a.Ru.forEach(s=>{s.forEach(c=>{c.reject(new Ct(rt.CANCELLED,o))})}),a.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await T1(t,r.ks)}}function wk(n,e){const t=tn(n),r=t.Eu.get(e);if(r&&r.cu)return An().add(r.key);{let i=An();const a=t.Pu.get(e);if(!a)return i;for(const o of a){const s=t.hu.get(o);i=i.unionWith(s.view.eu)}return i}}function N8(n){const e=tn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=C8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mk.bind(null,e),e.lu.Y_=ik.bind(null,e.eventManager),e.lu.gu=ak.bind(null,e.eventManager),e}function _k(n){const e=tn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yk.bind(null,e),e}class jg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return CO(this.persistence,new AO,e.initialUser,this.serializer)}Su(e){return new d8(O5.fi,this.serializer)}bu(e){return new kO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jg.provider={build:()=>new jg};class Ak extends jg{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){tr(this.persistence.referenceDelegate instanceof Lg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lO(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?vo.withCacheSize(this.cacheSizeBytes):vo.DEFAULT;return new d8(r=>Lg.fi(r,t),this.serializer)}}class by{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>a_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bk.bind(null,this.syncEngine),await tk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rk}()}createDatastore(e){const t=wm(e.databaseInfo.databaseId),r=function(a){return new BO(a)}(e.databaseInfo);return function(a,o,s,c){return new VO(a,o,s,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new HO(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>a_(this.syncEngine,t,0),function(){return J3.C()?new J3:new PO}())}createSyncEngine(e,t){return function(i,a,o,s,c,f,d){const p=new ck(i,a,o,s,c,f);return d&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=tn(i);At(ld,"RemoteStore shutting down."),a.da.add(5),await I1(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}by.provider={build:()=>new by};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):eu("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="FirestoreClient";class Sk{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pa.UNAUTHENTICATED,this.clientId=E6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{At(gf,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(At(gf,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=U5(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vv(n,e){n.asyncQueue.verifyOperationInProgress(),At(gf,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await h8(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function s_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ek(n);At(gf,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>t_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>t_(e.remoteStore,i)),n._onlineComponents=e}async function Ek(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){At(gf,"Using user provided OfflineComponentProvider");try{await vv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===rt.FAILED_PRECONDITION||i.code===rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;bh("Error using user provided cache. Falling back to memory cache: "+t),await vv(n,new jg)}}else At(gf,"Using default OfflineComponentProvider"),await vv(n,new Ak(void 0));return n._offlineComponents}async function D8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(At(gf,"Using user provided OnlineComponentProvider"),await s_(n,n._uninitializedComponentsProvider._online)):(At(gf,"Using default OnlineComponentProvider"),await s_(n,new by))),n._onlineComponents}function Ck(n){return D8(n).then(e=>e.syncEngine)}async function Bg(n){const e=await D8(n),t=e.eventManager;return t.onListen=uk.bind(null,e.syncEngine),t.onUnlisten=hk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pk.bind(null,e.syncEngine),t}function Ik(n,e,t={}){const r=new Kc;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,c,f){const d=new $5({next:g=>{d.xu(),o.enqueueAndForget(()=>V5(a,p));const m=g.docs.has(s);!m&&g.fromCache?f.reject(new Ct(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?f.reject(new Ct(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new H5(gm(s.path),d,{includeMetadataChanges:!0,Qa:!0});return z5(a,p)}(await Bg(n),n.asyncQueue,e,t,r)),r.promise}function Tk(n,e,t={}){const r=new Kc;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,c,f){const d=new $5({next:g=>{d.xu(),o.enqueueAndForget(()=>V5(a,p)),g.fromCache&&c.source==="server"?f.reject(new Ct(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new H5(s,d,{includeMetadataChanges:!0,Qa:!0});return z5(a,p)}(await Bg(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(n,e,t){if(!t)throw new Ct(rt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Rk(n,e,t,r){if(e===!0&&r===!0)throw new Ct(rt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function c_(n){if(!Mt.isDocumentKey(n))throw new Ct(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function u_(n){if(Mt.isDocumentKey(n))throw new Ct(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Yt(12329,{type:typeof n})}function _o(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ct(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sm(n);throw new Ct(rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8="firestore.googleapis.com",f_=!0;class d_{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ct(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=P8,this.ssl=f_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:f_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oO)throw new Ct(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O8((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ct(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ct(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ct(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Em{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ct(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new M9;switch(r.type){case"firstParty":return new U9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ct(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=l_.get(t);r&&(At("ComponentProvider","Removing Datastore"),l_.delete(t),r.terminate())}(this),Promise.resolve()}}function Nk(n,e,t,r={}){var i;n=_o(n,Em);const a=Oh(e),o=n._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(l5(`https://${c}`),c5("Firestore",!0)),o.host!==P8&&o.host!==c&&bh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},o),{host:c,ssl:a,emulatorOptions:r});if(!cf(f,s)&&(n._setSettings(f),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Pa.MOCK_USER;else{d=EA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ct(rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Pa(g)}n._authCredentials=new j9(new A6(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yd(this.firestore,e,this._query)}}class ja{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new of(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ja(this.firestore,e,this._key)}}class of extends yd{constructor(e,t,r){super(e,t,gm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ja(this.firestore,null,new Mt(e))}withConverter(e){return new of(this.firestore,e,this._path)}}function vn(n,e,...t){if(n=Hr(n),k8("collection","path",e),n instanceof Em){const r=Rr.fromString(e,...t);return u_(r),new of(n,null,r)}{if(!(n instanceof ja||n instanceof of))throw new Ct(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rr.fromString(e,...t));return u_(r),new of(n.firestore,null,r)}}function wr(n,e,...t){if(n=Hr(n),arguments.length===1&&(e=E6.newId()),k8("doc","path",e),n instanceof Em){const r=Rr.fromString(e,...t);return c_(r),new ja(n,null,new Mt(r))}{if(!(n instanceof ja||n instanceof of))throw new Ct(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rr.fromString(e,...t));return c_(r),new ja(n.firestore,n instanceof of?n.converter:null,new Mt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="AsyncQueue";class p_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new g8(this,"async_queue_retry"),this.rc=()=>{const r=mv();r&&At(h_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=mv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=mv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Kc;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Mh(e))throw e;At(h_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,eu("INTERNAL UNHANDLED ERROR: ",g_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=F5.createAndSchedule(this,e,t,r,a=>this.uc(a));return this.Zu.push(i),i}oc(){this.Xu&&Yt(47125,{cc:g_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function g_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class nu extends Em{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new p_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p_(e),this._firestoreClient=void 0,await e}}}function Dk(n,e){const t=typeof n=="object"?n:lm(),r=typeof n=="string"?n:Rg,i=xf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=_A("firestore");a&&Nk(i,...a)}return i}function Cm(n){if(n._terminated)throw new Ct(rt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ok(n),n._firestoreClient}function Ok(n){var e,t,r;const i=n._freezeSettings(),a=function(s,c,f,d){return new tD(s,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,O8(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Sk(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const c=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ch(ha.fromBase64String(e))}catch(t){throw new Ct(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ch(ha.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ct(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ct(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ct(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fn(this._lat,e._lat)||fn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=/^__.*__$/;class Pk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _f(e,this.data,this.fieldMask,t,this.fieldTransforms):new E1(e,this.data,t,this.fieldTransforms)}}class L8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new _f(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function M8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt(40011,{Ic:n})}}class K5{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new K5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Fg(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(M8(this.Ic)&&kk.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Lk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wm(e)}bc(e,t,r,i=!1){return new K5({Ic:e,methodName:t,wc:r,path:fa.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rm(n){const e=n._freezeSettings(),t=wm(n._databaseId);return new Lk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function j8(n,e,t,r,i,a={}){const o=n.bc(a.merge||a.mergeFields?2:0,e,t,i);Z5("Data must be an object, but it was:",o,r);const s=B8(r,o);let c,f;if(a.merge)c=new Yo(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const g=wy(e,p,t);if(!o.contains(g))throw new Ct(rt.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);U8(d,g)||d.push(g)}c=new Yo(d),f=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,f=o.fieldTransforms;return new Pk(new xo(s),c,f)}class Nm extends Tm{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nm}}class Q5 extends Tm{_toFieldTransform(e){return new ID(e.path,new s1)}isEqual(e){return e instanceof Q5}}function Mk(n,e,t,r){const i=n.bc(1,e,t);Z5("Data must be an object, but it was:",i,r);const a=[],o=xo.empty();wf(r,(c,f)=>{const d=J5(e,c,t);f=Hr(f);const p=i.mc(d);if(f instanceof Nm)a.push(d);else{const g=R1(f,p);g!=null&&(a.push(d),o.set(d,g))}});const s=new Yo(a);return new L8(o,s,i.fieldTransforms)}function jk(n,e,t,r,i,a){const o=n.bc(1,e,t),s=[wy(e,r,t)],c=[i];if(a.length%2!=0)throw new Ct(rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)s.push(wy(e,a[g])),c.push(a[g+1]);const f=[],d=xo.empty();for(let g=s.length-1;g>=0;--g)if(!U8(f,s[g])){const m=s[g];let b=c[g];b=Hr(b);const _=o.mc(m);if(b instanceof Nm)f.push(m);else{const I=R1(b,_);I!=null&&(f.push(m),d.set(m,I))}}const p=new Yo(f);return new L8(d,p,o.fieldTransforms)}function Bk(n,e,t,r=!1){return R1(t,n.bc(r?4:3,e))}function R1(n,e){if(F8(n=Hr(n)))return Z5("Unsupported field value:",e,n),B8(n,e);if(n instanceof Tm)return function(r,i){if(!M8(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let c=R1(s,i.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=Hr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gi.fromDate(r);return{timestampValue:Pg(i.serializer,a)}}if(r instanceof gi){const a=new gi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pg(i.serializer,a)}}if(r instanceof Y5)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ch)return{bytesValue:i8(i.serializer,r._byteString)};if(r instanceof ja){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:N5(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof X5)return function(o,s){return{mapValue:{fields:{[k6]:{stringValue:P6},[Ng]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw s.gc("VectorValues must only contain numeric values.");return C5(s.serializer,f)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Sm(r)}`)}(n,e)}function B8(n,e){const t={};return I6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wf(n,(r,i)=>{const a=R1(i,e.Ac(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function F8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gi||n instanceof Y5||n instanceof Ch||n instanceof ja||n instanceof Tm||n instanceof X5)}function Z5(n,e,t){if(!F8(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Sm(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function wy(n,e,t){if((e=Hr(e))instanceof Im)return e._internalPath;if(typeof e=="string")return J5(n,e);throw Fg("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fk=new RegExp("[~\\*/\\[\\]]");function J5(n,e,t){if(e.search(Fk)>=0)throw Fg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Im(...e.split("."))._internalPath}catch{throw Fg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fg(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Ct(rt.INVALID_ARGUMENT,s+n+c)}function U8(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ja(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ex("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Uk extends z8{data(){return super.data()}}function ex(n,e){return typeof e=="string"?J5(n,e):e instanceof Im?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ct(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tx{}class zk extends tx{}function tc(n,e,...t){let r=[];e instanceof tx&&r.push(e),r=r.concat(t),function(a){const o=a.filter(c=>c instanceof nx).length,s=a.filter(c=>c instanceof Dm).length;if(o>1||o>0&&s>0)throw new Ct(rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Dm extends zk{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Dm(e,t,r)}_apply(e){const t=this._parse(e);return q8(e._query,t),new yd(e.firestore,e.converter,uy(e._query,t))}_parse(e){const t=Rm(e.firestore);return function(a,o,s,c,f,d,p){let g;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ct(rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){y_(p,d);const b=[];for(const _ of p)b.push(v_(c,a,_));g={arrayValue:{values:b}}}else g=v_(c,a,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||y_(p,d),g=Bk(s,o,p,d==="in"||d==="not-in");return Si.create(f,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ll(n,e,t){const r=e,i=ex("where",n);return Dm._create(i,r,t)}class nx extends tx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nx(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:dl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const c of s)q8(o,c),o=uy(o,c)}(e._query,t),new yd(e.firestore,e.converter,uy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function v_(n,e,t){if(typeof(t=Hr(t))=="string"){if(t==="")throw new Ct(rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V6(e)&&t.indexOf("/")!==-1)throw new Ct(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rr.fromString(t));if(!Mt.isDocumentKey(r))throw new Ct(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return D3(n,new Mt(r))}if(t instanceof ja)return D3(n,t._key);throw new Ct(rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sm(t)}.`)}function y_(n,e){if(!Array.isArray(n)||n.length===0)throw new Ct(rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function q8(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ct(rt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ct(rt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Vk{convertValue(e,t="none"){switch(hf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(df(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Yt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return wf(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ng].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ui(o.doubleValue));return new X5(a)}convertGeoPoint(e){return new Y5(ui(e.latitude),ui(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(i1(e));default:return null}}convertTimestamp(e){const t=ff(e);return new gi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rr.fromString(e);tr(u8(r),9688,{name:e});const i=new a1(r.get(1),r.get(3)),a=new Mt(r.popFirst(5));return i.isEqual(t)||eu(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class W8 extends z8{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ex("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cg extends W8{data(e={}){return super.data(e)}}class G8{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new F0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cg(this._firestore,this._userDataWriter,r.key,r,new F0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ct(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const c=new cg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new F0(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const c=new cg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new F0(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return s.type!==0&&(f=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),d=o.indexOf(s.doc.key)),{type:qk(s.type),doc:c,oldIndex:f,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(n){n=_o(n,ja);const e=_o(n.firestore,nu);return Ik(Cm(e),n._key).then(t=>Y8(e,n,t))}class rx extends Vk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ch(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ja(this.firestore,null,t)}}function er(n){n=_o(n,yd);const e=_o(n.firestore,nu),t=Cm(e),r=new rx(e);return V8(n._query),Tk(t,n._query).then(i=>new G8(e,r,n,i))}function ix(n,e,t){n=_o(n,ja);const r=_o(n.firestore,nu),i=H8(n.converter,e);return Om(r,[j8(Rm(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,_s.none())])}function Za(n,e,t,...r){n=_o(n,ja);const i=_o(n.firestore,nu),a=Rm(i);let o;return o=typeof(e=Hr(e))=="string"||e instanceof Im?jk(a,"updateDoc",n._key,e,t,r):Mk(a,"updateDoc",n._key,e),Om(i,[o.toMutation(n._key,_s.exists(!0))])}function N1(n){return Om(_o(n.firestore,nu),[new I5(n._key,_s.none())])}function Th(n,e){const t=_o(n.firestore,nu),r=wr(n),i=H8(n.converter,e);return Om(t,[j8(Rm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,_s.exists(!1))]).then(()=>r)}function $8(n,...e){var t,r,i;n=Hr(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||m_(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(m_(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,f,d;if(n instanceof ja)f=_o(n.firestore,nu),d=gm(n._key.path),c={next:p=>{e[o]&&e[o](Y8(f,n,p))},error:e[o+1],complete:e[o+2]};else{const p=_o(n,yd);f=_o(p.firestore,nu),d=p._query;const g=new rx(f);c={next:m=>{e[o]&&e[o](new G8(f,g,p,m))},error:e[o+1],complete:e[o+2]},V8(n._query)}return function(g,m,b,_){const I=new $5(_),C=new H5(m,I,b);return g.asyncQueue.enqueueAndForget(async()=>z5(await Bg(g),C)),()=>{I.xu(),g.asyncQueue.enqueueAndForget(async()=>V5(await Bg(g),C))}}(Cm(f),d,s,c)}function Om(n,e){return function(r,i){const a=new Kc;return r.asyncQueue.enqueueAndForget(async()=>gk(await Ck(r),i,a)),a.promise}(Cm(n),e)}function Y8(n,e,t){const r=t.docs.get(e._key),i=new rx(n);return new W8(n,i,e._key,r,new F0(t.hasPendingWrites,t.fromCache),e.converter)}function pi(){return new Q5("serverTimestamp")}(function(e,t=!0){(function(i){Ph=i})(gd),ul(new Es("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new nu(new B9(r.getProvider("auth-internal")),new z9(o,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ct(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new a1(f.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),wo(x3,b3,e),wo(x3,b3,"esm2017")})();var Hk="firebase",Wk="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo(Hk,Wk,"app");const X8="@firebase/installations",ax="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=1e4,Q8=`w:${ax}`,Z8="FIS_v2",Gk="https://firebaseinstallations.googleapis.com/v1",$k=60*60*1e3,Yk="installations",Xk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},cd=new pd(Yk,Xk,Kk);function J8(n){return n instanceof Cs&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS({projectId:n}){return`${Gk}/projects/${n}/installations`}function tS(n){return{token:n.token,requestStatus:2,expiresIn:Zk(n.expiresIn),creationTime:Date.now()}}async function nS(n,e){const r=(await e.json()).error;return cd.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function rS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Qk(n,{refreshToken:e}){const t=rS(n);return t.append("Authorization",Jk(e)),t}async function iS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Zk(n){return Number(n.replace("s","000"))}function Jk(n){return`${Z8} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=eS(n),i=rS(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={fid:t,authVersion:Z8,appId:n.appId,sdkVersion:Q8},s={method:"POST",headers:i,body:JSON.stringify(o)},c=await iS(()=>fetch(r,s));if(c.ok){const f=await c.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:tS(f.authToken)}}else throw await nS("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=/^[cdef][\w-]{21}$/,_y="";function rP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=iP(n);return nP.test(t)?t:_y}catch{return _y}}function iP(n){return tP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Map;function sS(n,e){const t=km(n);lS(t,e),aP(t,e)}function lS(n,e){const t=oS.get(n);if(t)for(const r of t)r(e)}function aP(n,e){const t=oP();t&&t.postMessage({key:n,fid:e}),sP()}let Zf=null;function oP(){return!Zf&&"BroadcastChannel"in self&&(Zf=new BroadcastChannel("[Firebase] FID Change"),Zf.onmessage=n=>{lS(n.data.key,n.data.fid)}),Zf}function sP(){oS.size===0&&Zf&&(Zf.close(),Zf=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="firebase-installations-database",cP=1,ud="firebase-installations-store";let yv=null;function ox(){return yv||(yv=DA(lP,cP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ud)}}})),yv}async function Ug(n,e){const t=km(n),i=(await ox()).transaction(ud,"readwrite"),a=i.objectStore(ud),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&sS(n,e.fid),e}async function cS(n){const e=km(n),r=(await ox()).transaction(ud,"readwrite");await r.objectStore(ud).delete(e),await r.done}async function Pm(n,e){const t=km(n),i=(await ox()).transaction(ud,"readwrite"),a=i.objectStore(ud),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&sS(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(n){let e;const t=await Pm(n.appConfig,r=>{const i=uP(r),a=fP(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===_y?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function uP(n){const e=n||{fid:rP(),registrationStatus:0};return uS(e)}function fP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(cd.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=dP(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:hP(n)}:{installationEntry:e}}async function dP(n,e){try{const t=await eP(n,e);return Ug(n.appConfig,t)}catch(t){throw J8(t)&&t.customData.serverCode===409?await cS(n.appConfig):await Ug(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function hP(n){let e=await x_(n.appConfig);for(;e.registrationStatus===1;)await aS(100),e=await x_(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await sx(n);return r||t}return e}function x_(n){return Pm(n,e=>{if(!e)throw cd.create("installation-not-found");return uS(e)})}function uS(n){return pP(n)?{fid:n.fid,registrationStatus:0}:n}function pP(n){return n.registrationStatus===1&&n.registrationTime+K8<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP({appConfig:n,heartbeatServiceProvider:e},t){const r=mP(n,t),i=Qk(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={installation:{sdkVersion:Q8,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},c=await iS(()=>fetch(r,s));if(c.ok){const f=await c.json();return tS(f)}else throw await nS("Generate Auth Token",c)}function mP(n,{fid:e}){return`${eS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(n,e=!1){let t;const r=await Pm(n.appConfig,a=>{if(!fS(a))throw cd.create("not-registered");const o=a.authToken;if(!e&&xP(o))return a;if(o.requestStatus===1)return t=vP(n,e),a;{if(!navigator.onLine)throw cd.create("app-offline");const s=wP(a);return t=yP(n,s),s}});return t?await t:r.authToken}async function vP(n,e){let t=await b_(n.appConfig);for(;t.authToken.requestStatus===1;)await aS(100),t=await b_(n.appConfig);const r=t.authToken;return r.requestStatus===0?lx(n,e):r}function b_(n){return Pm(n,e=>{if(!fS(e))throw cd.create("not-registered");const t=e.authToken;return _P(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function yP(n,e){try{const t=await gP(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Ug(n.appConfig,r),t}catch(t){if(J8(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await cS(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ug(n.appConfig,r)}throw t}}function fS(n){return n!==void 0&&n.registrationStatus===2}function xP(n){return n.requestStatus===2&&!bP(n)}function bP(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+$k}function wP(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function _P(n){return n.requestStatus===1&&n.requestTime+K8<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(n){const e=n,{installationEntry:t,registrationPromise:r}=await sx(e);return r?r.catch(console.error):lx(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(n,e=!1){const t=n;return await EP(t),(await lx(t,e)).token}async function EP(n){const{registrationPromise:e}=await sx(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n){if(!n||!n.options)throw xv("App Configuration");if(!n.name)throw xv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw xv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function xv(n){return cd.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="installations",IP="installations-internal",TP=n=>{const e=n.getProvider("app").getImmediate(),t=CP(e),r=xf(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},RP=n=>{const e=n.getProvider("app").getImmediate(),t=xf(e,dS).getImmediate();return{getId:()=>AP(t),getToken:i=>SP(t,i)}};function NP(){ul(new Es(dS,TP,"PUBLIC")),ul(new Es(IP,RP,"PRIVATE"))}NP();wo(X8,ax);wo(X8,ax,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="analytics",DP="firebase_id",OP="origin",kP=60*1e3,PP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new sm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ko=new pd("analytics","Analytics",LP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n){if(!n.startsWith(cx)){const e=Ko.create("invalid-gtag-resource",{gtagURL:n});return Ao.warn(e.message),""}return n}function hS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function jP(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function BP(n,e){const t=jP("firebase-js-sdk-policy",{createScriptURL:MP}),r=document.createElement("script"),i=`${cx}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function FP(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function UP(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const c=(await hS(t)).find(f=>f.measurementId===i);c&&await e[c.appId]}}catch(s){Ao.error(s)}n("config",i,a)}async function zP(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await hS(t);for(const c of o){const f=s.find(p=>p.measurementId===c),d=f&&e[f.appId];if(d)a.push(d);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){Ao.error(a)}}function VP(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,c]=o;await zP(n,e,t,s,c)}else if(a==="config"){const[s,c]=o;await UP(n,e,t,r,s,c)}else if(a==="consent"){const[s,c]=o;n("consent",s,c)}else if(a==="get"){const[s,c,f]=o;n("get",s,c,f)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){Ao.error(s)}}return i}function qP(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=VP(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function HP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(cx)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=30,GP=1e3;class $P{constructor(e={},t=GP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const pS=new $P;function YP(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function XP(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:YP(r)},a=PP.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(s=c.error.message)}catch{}throw Ko.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function KP(n,e=pS,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Ko.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Ko.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new JP;return setTimeout(async()=>{s.abort()},kP),gS({appId:r,apiKey:i,measurementId:a},o,s,e)}async function gS(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=pS){var a;const{appId:o,measurementId:s}=n;try{await QP(r,e)}catch(c){if(s)return Ao.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:s};throw c}try{const c=await XP(n);return i.deleteThrottleMetadata(o),c}catch(c){const f=c;if(!ZP(f)){if(i.deleteThrottleMetadata(o),s)return Ao.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:s};throw c}const d=Number((a=f==null?void 0:f.customData)===null||a===void 0?void 0:a.httpStatus)===503?Hw(t,i.intervalMillis,WP):Hw(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return i.setThrottleMetadata(o,p),Ao.debug(`Calling attemptFetch again in ${d} millis`),gS(n,p,r,i)}}function QP(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ko.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZP(n){if(!(n instanceof Cs)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class JP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function eL(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(){if(IA())try{await TA()}catch(n){return Ao.warn(Ko.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Ao.warn(Ko.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function nL(n,e,t,r,i,a,o){var s;const c=KP(n);c.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Ao.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ao.error(m)),e.push(c);const f=tL().then(m=>{if(m)return r.getId()}),[d,p]=await Promise.all([c,f]);HP(a)||BP(a,d.measurementId),i("js",new Date);const g=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return g[OP]="firebase",g.update=!0,p!=null&&(g[DP]=p),i("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.app=e}_delete(){return delete K0[this.app.options.appId],Promise.resolve()}}let K0={},w_=[];const __={};let bv="dataLayer",iL="gtag",A_,mS,S_=!1;function aL(){const n=[];if(CA()&&n.push("This is a browser extension environment."),ZT()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ko.create("invalid-analytics-context",{errorInfo:e});Ao.warn(t.message)}}function oL(n,e,t){aL();const r=n.options.appId;if(!r)throw Ko.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ao.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ko.create("no-api-key");if(K0[r]!=null)throw Ko.create("already-exists",{id:r});if(!S_){FP(bv);const{wrappedGtag:a,gtagCore:o}=qP(K0,w_,__,bv,iL);mS=a,A_=o,S_=!0}return K0[r]=nL(n,w_,__,e,A_,bv,t),new rL(n)}function sL(n=lm()){n=Hr(n);const e=xf(n,zg);return e.isInitialized()?e.getImmediate():lL(n)}function lL(n,e={}){const t=xf(n,zg);if(t.isInitialized()){const i=t.getImmediate();if(cf(e,t.getOptions()))return i;throw Ko.create("already-initialized")}return t.initialize({options:e})}function cL(n,e,t,r){n=Hr(n),eL(mS,K0[n.app.options.appId],e,t,r).catch(i=>Ao.error(i))}const E_="@firebase/analytics",C_="0.10.16";function uL(){ul(new Es(zg,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return oL(r,i,t)},"PUBLIC")),ul(new Es("analytics-internal",n,"PRIVATE")),wo(E_,C_),wo(E_,C_,"esm2017");function n(e){try{const t=e.getProvider(zg).getImmediate();return{logEvent:(r,i,a)=>cL(t,r,i,a)}}catch(t){throw Ko.create("interop-component-reg-failed",{reason:t})}}}uL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="firebasestorage.googleapis.com",fL="storageBucket",dL=2*60*1e3,hL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends Cs{constructor(e,t,r=0){super(wv(e),`Firebase Storage: ${t} (${wv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lc.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ac;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ac||(ac={}));function wv(n){return"storage/"+n}function pL(){const n="An unknown error occurred, please check the error payload for server response.";return new lc(ac.UNKNOWN,n)}function gL(){return new lc(ac.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mL(){return new lc(ac.CANCELED,"User canceled the upload/download.")}function vL(n){return new lc(ac.INVALID_URL,"Invalid URL '"+n+"'.")}function yL(n){return new lc(ac.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function I_(n){return new lc(ac.INVALID_ARGUMENT,n)}function yS(){return new lc(ac.APP_DELETED,"The Firebase app was deleted.")}function xL(n){return new lc(ac.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=cl.makeFromUrl(e,t)}catch{return new cl(e,"")}if(r.path==="")return r;throw yL(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const d="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),b={bucket:1,path:3},_=t===vS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",C=new RegExp(`^https?://${_}/${i}/${I}`,"i"),B=[{regex:s,indices:c,postModify:a},{regex:m,indices:b,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<B.length;q++){const Y=B[q],H=Y.regex.exec(e);if(H){const P=H[Y.indices.bucket];let S=H[Y.indices.path];S||(S=""),r=new cl(P,S),Y.postModify(r);break}}if(r==null)throw vL(e);return r}}class bL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(n,e,t){let r=1,i=null,a=null,o=!1,s=0;function c(){return s===2}let f=!1;function d(...I){f||(f=!0,e.apply(null,I))}function p(I){i=setTimeout(()=>{i=null,n(m,c())},I)}function g(){a&&clearTimeout(a)}function m(I,...C){if(f){g();return}if(I){g(),d.call(null,I,...C);return}if(c()||o){g(),d.call(null,I,...C);return}r<64&&(r*=2);let B;s===1?(s=2,B=0):B=(r+Math.random())*1e3,p(B)}let b=!1;function _(I){b||(b=!0,g(),!f&&(i!==null?(I||(s=2),clearTimeout(i),p(0)):I||(s=1)))}return p(0),a=setTimeout(()=>{o=!0,_(!0)},t),_}function _L(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(n){return n!==void 0}function T_(n,e,t,r){if(r<e)throw I_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw I_(`Invalid value for '${n}'. Expected ${t} or less.`)}function SL(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Vg;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Vg||(Vg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,t,r,i,a,o,s,c,f,d,p,g=!0,m=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,_)=>{this.resolve_=b,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Vp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const c=s.loaded,f=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===Vg.NO_ERROR,c=a.getStatus();if(!s||EL(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Vg.ABORT;r(!1,new Vp(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Vp(f,a))})},t=(r,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(s,s.getResponse());AL(c)?a(c):a()}catch(c){o(c)}else if(s!==null){const c=pL();c.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,c)):o(c)}else if(i.canceled){const c=this.appDelete_?yS():mL();o(c)}else{const c=gL();o(c)}};this.canceled_?t(!1,new Vp(!1,null,!0)):this.backoffId_=wL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_L(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vp{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function IL(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function TL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RL(n,e){e&&(n["X-Firebase-GMPID"]=e)}function NL(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function DL(n,e,t,r,i,a,o=!0,s=!1){const c=SL(n.urlParams),f=n.url+c,d=Object.assign({},n.headers);return RL(d,e),IL(d,t),TL(d,a),NL(d,r),new CL(f,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function kL(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t){this._service=e,t instanceof cl?this._location=t:this._location=cl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qg(e,t)}get root(){const e=new cl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kL(this._location.path)}get storage(){return this._service}get parent(){const e=OL(this._location.path);if(e===null)return null;const t=new cl(this._location.bucket,e);return new qg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw xL(e)}}function R_(n,e){const t=e==null?void 0:e[fL];return t==null?null:cl.makeFromBucketSpec(t,n)}function PL(n,e,t,r={}){n.host=`${e}:${t}`;const i=Oh(e);i&&(l5(`https://${n.host}`),c5("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:EA(a,n.app.options.projectId))}class LL{constructor(e,t,r,i,a,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=vS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dL,this._maxUploadRetryTime=hL,this._requests=new Set,i!=null?this._bucket=cl.makeFromBucketSpec(i,this._host):this._bucket=R_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cl.makeFromBucketSpec(this._url,e):this._bucket=R_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){T_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){T_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if($o(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new bL(yS());{const o=DL(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const N_="@firebase/storage",D_="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="storage";function ML(n=lm(),e){n=Hr(n);const r=xf(n,xS).getImmediate({identifier:e}),i=_A("storage");return i&&jL(r,...i),r}function jL(n,e,t,r={}){PL(n,e,t,r)}function BL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new LL(t,r,i,e,gd)}function FL(){ul(new Es(xS,BL,"PUBLIC").setMultipleInstances(!0)),wo(N_,D_,""),wo(N_,D_,"esm2017")}FL();const UL={apiKey:"AIzaSyD2okbjcvN3V4Qpd4deo59qZZNNRBIWX58",authDomain:"gmach-inventory-system.firebaseapp.com",projectId:"gmach-inventory-system",storageBucket:"gmach-inventory-system.appspot.com",messagingSenderId:"687472851540",appId:"1:687472851540:web:f846506cccaaefc1e74bc1",measurementId:"G-ZM8S3K7E2V"},Lm=OA(UL);sL(Lm);const u1=P9(Lm),Ot=Dk(Lm);ML(Lm);const bS=de.createContext(),wS=({children:n})=>{const[e,t]=de.useState(null),[r,i]=de.useState(!0);return de.useEffect(()=>{const a=_N(u1,async s=>{if(s&&s.emailVerified){const c=await Ih(wr(Ot,"users",s.uid));if(c.exists()){const f=c.data();t({uid:s.uid,email:s.email,username:f.username,role:f.role})}}else t(null)});return(async()=>{const s=await Ih(wr(Ot,"settings","onlineOrdering"));if(s.exists()){const c=s.data();i(c.enabled===!0)}})(),()=>a()},[]),y.jsx(bS.Provider,{value:{user:e,setUser:t,onlineOrderingEnabled:r,setOnlineOrderingEnabled:i},children:n})},cc=()=>de.useContext(bS),zL=()=>{const{user:n,setUser:e}=cc(),t=r5(),r=yf(),[i,a]=de.useState(!1),[o,s]=de.useState(null),[c,f]=de.useState(null),[d,p]=de.useState(!1);de.useEffect(()=>{const X=wr(Ot,"settings","onlineOrdering"),V=$8(X,z=>{z.exists()&&s(z.data().enabled)},z=>{console.error("שגיאה בקבלת עדכונים בזמן אמת:",z)});return()=>V()},[]),de.useEffect(()=>{const X=()=>{f(window.innerWidth<=768)};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]);const g=()=>{p(!0)},m=async()=>{try{await AN(u1),e(null),p(!1),t("/login")}catch(X){alert("שגיאה בהתנתקות: "+X.message)}},b=()=>{p(!1)},_=()=>{a(!1)},I=X=>{switch(X){case"MainAdmin":return"מנהל ראשי";case"GmachAdmin":return"מנהל גמח";default:return"משתמש"}},C=X=>r.pathname===X,D=X=>({...Y,backgroundColor:C(X)?"#0056b3":"transparent",color:C(X)?"white":"#0056b3",borderRadius:C(X)?"6px":"0",fontWeight:C(X)?"600":"500",transition:"all 0.3s ease"}),B=()=>!n||n.role==="User";if(c===null)return null;const q={backgroundColor:"#f2f2f2",padding:"10px 0",direction:"rtl",borderBottom:"1px solid #ccc",position:"relative",zIndex:1e3},Y={padding:"12px 16px",textDecoration:"none",color:"#0056b3",fontWeight:"500",fontSize:"16px",display:"block"},H={position:"absolute",top:"10px",left:c?"20px":"auto",right:c?"auto":"20px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold",color:"#333"},P={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},S={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},R={position:"fixed",top:0,right:i?0:"-70%",height:"100%",width:"70%",backgroundColor:"#fff",boxShadow:"0 0 12px rgba(0,0,0,0.25)",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",transition:"right 0.3s ease",zIndex:1e3},M={display:"flex",justifyContent:"center",gap:"10px",padding:"10px 0"},T={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},N={backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",textAlign:"center",maxWidth:"300px",width:"90%"},L={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"},F={backgroundColor:"#6c757d",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"};return y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:q,children:[c&&y.jsx("button",{onClick:()=>a(!0),style:{fontSize:"24px",background:"none",border:"none",cursor:"pointer",padding:"0 1rem"},children:"☰"}),!c&&y.jsxs("div",{style:M,children:[y.jsx(On,{to:"/",style:D("/"),children:"דף הבית"}),y.jsx(On,{to:"/catalog",style:D("/catalog"),children:"קטלוג מוצרים"}),!n&&y.jsx(On,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),children:"נוהל השאלה"}),(n==null?void 0:n.role)==="User"&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/my-orders",style:D("/my-orders"),children:"ההזמנות שלי"}),o&&y.jsx(On,{to:"/request",style:D("/request"),children:"בקשת השאלה"}),y.jsx(On,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),children:"נוהל השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/new-loan",style:D("/new-loan"),children:"הזמנה חדשה"}),o&&y.jsx(On,{to:"/requests",style:D("/requests"),children:"בקשות להזמנה"}),y.jsx(On,{to:"/Calendar",style:D("/Calendar"),children:"השאלות פתוחות"}),y.jsx(On,{to:"/history",style:D("/history"),children:"היסטוריית השאלות"})]}),(n==null?void 0:n.role)==="MainAdmin"&&y.jsx(On,{to:"/manage-product",style:D("/manage-product"),children:"ניהול מוצרים"}),(n==null?void 0:n.role)==="MainAdmin"&&y.jsx(On,{to:"/manage-users",style:D("/manage-users"),children:"ניהול משתמשים"}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&y.jsx(On,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),children:"נוהל השאלה"}),B()&&y.jsx(On,{to:"/donations",style:D("/donations"),children:"לתרומות"}),!n&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/login",style:{...D("/login"),marginRight:"20px",backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600"},children:"התחברות"}),y.jsx(On,{to:"/register",style:{...D("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600"},children:"הרשמה"})]})]}),i&&c&&y.jsxs(y.Fragment,{children:[y.jsx("div",{style:S,onClick:_}),y.jsxs("div",{style:R,children:[y.jsx(On,{to:"/",style:D("/"),onClick:_,children:"דף הבית"}),y.jsx(On,{to:"/catalog",style:D("/catalog"),onClick:_,children:"קטלוג מוצרים"}),!n&&y.jsx(On,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"}),(n==null?void 0:n.role)==="User"&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/my-orders",style:D("/my-orders"),onClick:_,children:"ההזמנות שלי"}),o&&y.jsx(On,{to:"/request",style:D("/request"),onClick:_,children:"בקשת השאלה"}),y.jsx(On,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/new-loan",style:D("/new-loan"),onClick:_,children:"הזמנה חדשה"}),o&&y.jsx(On,{to:"/requests",style:D("/requests"),onClick:_,children:"בקשות להזמנה"}),y.jsx(On,{to:"/Calendar",style:D("/Calendar"),onClick:_,children:"השאלות פתוחות"}),y.jsx(On,{to:"/history",style:D("/history"),onClick:_,children:"היסטוריית השאלות"})]}),(n==null?void 0:n.role)==="MainAdmin"&&y.jsx(On,{to:"/manage-product",style:D("/manage-product"),onClick:_,children:"ניהול מוצרים"}),(n==null?void 0:n.role)==="MainAdmin"&&y.jsx(On,{to:"/manage-users",style:D("/manage-users"),onClick:_,children:"ניהול משתמשים"}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&y.jsx(On,{to:"/borrowing-guidelines",style:D("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"}),B()&&y.jsx(On,{to:"/donations",style:D("/donations"),onClick:_,children:"לתרומות"}),!n&&y.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:[y.jsx(On,{to:"/login",style:{...D("/login"),backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600",textAlign:"center",marginBottom:"10px"},onClick:_,children:"התחברות"}),y.jsx(On,{to:"/register",style:{...D("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600",textAlign:"center"},onClick:_,children:"הרשמה"})]})]})]}),n&&y.jsxs("div",{style:H,children:["שלום ",n.username," (",I(n.role),")",y.jsx("button",{style:P,onClick:g,children:"התנתק"})]})]}),d&&y.jsx("div",{style:T,children:y.jsxs("div",{style:N,children:[y.jsx("h3",{style:{marginBottom:"15px",color:"#333"},children:"אישור התנתקות"}),y.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"האם אתה בטוח שברצונך להתנתק?"}),y.jsxs("div",{children:[y.jsx("button",{style:L,onClick:m,children:"כן, התנתק"}),y.jsx("button",{style:F,onClick:b,children:"ביטול"})]})]})})]})},VL="/assets/GmachPic-D1t0vS9u.jpeg",qL=()=>{const{user:n}=cc(),e={position:"relative",padding:"2rem",textAlign:"center",direction:"rtl",maxWidth:"1000px",margin:"0 auto",fontFamily:'"Assistant", "Heebo", "Segoe UI", "Helvetica Neue", Arial, sans-serif',zIndex:1},t={fontSize:"clamp(28px, 4vw, 40px)",fontWeight:"800",marginBottom:"1.5rem",color:"#1a365d",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',textShadow:"0 2px 4px rgba(0,0,0,0.1)",letterSpacing:"0.5px"},r={maxWidth:"800px",margin:"0 auto",fontSize:"clamp(17px, 2.5vw, 22px)",lineHeight:"1.6",color:"#2d3748",textAlign:"justify",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontWeight:"500",textShadow:"0 1px 2px rgba(0,0,0,0.05)"},i={display:"flex",justifyContent:"center",marginTop:"2rem",padding:"0 1rem"},a={width:"100%",maxWidth:"600px",minHeight:"250px",aspectRatio:"16/10",border:"3px solid #e2e8f0",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},o={marginTop:"2.5rem",fontSize:"clamp(20px, 3vw, 26px)",fontWeight:"700",color:"#1a365d",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif'},s={marginTop:"0.8rem",fontSize:"clamp(16px, 2vw, 20px)",fontWeight:"600"},c={position:"fixed",bottom:"20px",left:"20px",backgroundColor:"white",color:"#1f2937",padding:"24px",borderRadius:"16px",fontWeight:"600",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",border:"3px solid #e5e7eb",zIndex:1e3,fontSize:"16px",maxWidth:"calc(50% - 40px)",minWidth:"300px",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif'};return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;500;600;700;800&family=Heebo:wght@400;500;600;700;800&display=swap');
      `}),y.jsxs("div",{style:e,children:[y.jsx("h2",{style:t,children:'ברוכים הבאים לגמ"ח שמחת זקנתי'}),y.jsx("img",{src:VL,alt:'תמונה של גמ"ח',style:{width:"65%",height:"auto",borderRadius:"16px",marginBottom:"2rem",maxWidth:"600px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)",border:"3px solid #e2e8f0"}}),y.jsxs("div",{style:r,children:['גמ"ח שמחת זקנתי הוא גמ"ח ארועים הפועל משנת 2013.',y.jsx("br",{}),'הגמ"ח מציע השאלת ציוד לאירועים, כולל מפות קטיפה במגוון צבעים, עיצובי שולחן, עיצובים למזנונים ועוד.',y.jsx("br",{}),'הגמ"ח הוקם לעילוי נשמת סבה וסבתה של ענבר, יוזמת ומנהלת הגמ"ח, אברהם ואסתר ליבן ז"ל, ממקימי קיבוץ חפץ חיים.',y.jsx("br",{}),'הגמ"ח משרת את תושבי המועצה האזורית נחל שורק כמו גם יישובים מרוחקים יותר כמו אלומה, אשדוד, ניצן, מזכרת בתיה, יבנה ועוד.',y.jsx("br",{}),'הגמ"ח זוכה לתמיכה קבועה של הנהלת קיבוץ חפץ חיים והמועצה האזורית נחל שורק שרואים בגמ"ח יוזמה ברוכה של חסד ועזרה לזולת ובעלת חשיבות קהילתית מרובה.',y.jsx("br",{}),'הגמ"ח מופעל ע"י צוות מתנדבות מסור, דורש תחזוקה שוטפת- ניקוי, סידור, רכישת ציוד וחידוש המלאי באופן קבוע.',y.jsx("br",{}),'הגמ"ח משרת עשרות ארועים מידי חודש, ונשען על תרומות המשתמשים בלבד. נשמח אם תהיו שותפים.',y.jsx("br",{}),"פרטים בדף התרומות.",y.jsx("br",{}),y.jsx("strong",{style:{fontSize:"1.1em"},children:"נתראה בשמחות!"})]}),y.jsxs("div",{style:o,children:[y.jsx("h3",{children:"📍 מיקום והגעה"}),y.jsx("div",{style:{fontSize:"clamp(18px, 2.8vw, 24px)",fontWeight:"600",color:"#4a5568",marginTop:"0.5rem",marginBottom:"0.5rem"},children:"קיבוץ חפץ חיים"}),y.jsxs("div",{style:s,children:[y.jsx("a",{href:"https://maps.app.goo.gl/zHkUGZDnGVsUrBCB6",target:"_blank",rel:"noopener noreferrer",style:{color:"#2b6cb0",textDecoration:"none",borderBottom:"2px solid transparent",transition:"border-bottom 0.3s ease"},children:"Google Maps"})," |"," ",y.jsx("a",{href:"https://waze.com/ul?ll=31.775887,34.703164",target:"_blank",rel:"noopener noreferrer",style:{color:"#2b6cb0",textDecoration:"none",borderBottom:"2px solid transparent",transition:"border-bottom 0.3s ease"},children:"Waze"})]})]}),y.jsx("div",{style:i,children:y.jsx("iframe",{src:"https://www.google.com/maps?q=31.7889462,34.79986&output=embed",width:"100%",height:"100%",style:a,allowFullScreen:"",loading:"lazy",title:'מיקום גמ"ח'})}),y.jsxs("div",{style:c,children:[y.jsx("div",{style:{fontSize:"18px",fontWeight:"800",marginBottom:"14px",color:"#1f2937",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:"🕐 שעות פתיחה"}),y.jsxs("div",{style:{lineHeight:"1.7"},children:[y.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:[y.jsx("div",{style:{fontWeight:"700",color:"#374151",marginBottom:"6px",fontSize:"16px"},children:"ימים רגילים"}),y.jsx("div",{style:{color:"#6b7280",fontSize:"15px",marginBottom:"4px"},children:"ראשון, רביעי, חמישי"}),y.jsx("div",{style:{fontWeight:"700",color:"#059669",fontSize:"16px"},children:"21:00 - 20:30"})]}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:"700",color:"#374151",marginBottom:"6px",fontSize:"16px"},children:"מוצאי שבת"}),y.jsxs("div",{style:{fontSize:"15px",marginBottom:"4px"},children:[y.jsx("span",{style:{fontWeight:"700"},children:"קיץ:"}),y.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"21:30 - 21:00"})]}),y.jsxs("div",{style:{fontSize:"15px"},children:[y.jsx("span",{style:{fontWeight:"700"},children:"חורף:"}),y.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"20:30 - 20:00"})]})]})]})]})]}),y.jsx("style",{children:`
        @media (max-width: 768px) {
          [style*="position: fixed"][style*="bottom: 20px"] {
            position: static !important;
            margin: 1rem auto !important;
            maxWidth: 100% !important;
            minWidth: auto !important;
            display: block !important;
          }
        }
      `})]})},HL=()=>{const[n,e]=de.useState(""),[t,r]=de.useState(""),[i,a]=de.useState(""),{setUser:o}=cc(),s=r5(),c=async()=>{if(!n||!n.includes("@")){a("יש להזין אימייל תקין לשחזור סיסמה");return}try{await mN(u1,n),a("קישור לאיפוס סיסמה נשלח לאימייל")}catch(p){a("שגיאה בשליחת קישור לאיפוס סיסמה: "+p.message)}},f=async p=>{p.preventDefault(),a("");let g=n;if(!n.includes("@"))try{const m=tc(vn(Ot,"users"),ll("username","==",n)),b=await er(m);if(!b.empty)g=b.docs[0].data().email;else{a("שם משתמש לא נמצא");return}}catch{a("שגיאה באחזור אימייל לפי שם משתמש");return}try{const b=(await yN(u1,g,t)).user;if(!b.emailVerified){a("נא לאמת את כתובת האימייל לפני ההתחברות");return}const _=wr(Ot,"users",b.uid),I=await Ih(_);if(I.exists()){const C=I.data();o({uid:b.uid,email:b.email,username:C.username,role:C.role}),s("/")}else a("לא נמצאו נתוני משתמש במסד הנתונים")}catch(m){switch(m.code){case"auth/invalid-credential":case"auth/wrong-password":a("סיסמה שגויה");break;case"auth/user-not-found":a("המשתמש לא נמצא");break;default:a("שגיאה: "+m.message)}}},d={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"#f2f2f2"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return y.jsx("div",{style:d.container,children:y.jsxs("form",{onSubmit:f,style:d.form,children:[y.jsx("h2",{style:d.title,children:"התחברות"}),y.jsx("input",{type:"text",placeholder:"שם משתמש או אימייל",value:n,onChange:p=>e(p.target.value),style:d.input,required:!0}),y.jsx("input",{type:"password",placeholder:"סיסמה",value:t,onChange:p=>r(p.target.value),style:d.input,required:!0}),i&&y.jsx("div",{style:d.error,children:i}),y.jsx("button",{type:"submit",style:d.button,children:"התחבר"}),y.jsx("button",{type:"button",onClick:c,style:{marginTop:"0.5rem",backgroundColor:"transparent",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"שכחת סיסמה?"})]})})},WL=()=>{const[n,e]=de.useState(""),[t,r]=de.useState(""),[i,a]=de.useState(""),[o,s]=de.useState(""),c=p=>p.length>=8&&/[a-zA-Z]/.test(p),f=async p=>{if(p.preventDefault(),!c(i)){s("הסיסמה חייבת להכיל לפחות 8 תווים ולפחות אות אחת באנגלית A-Z / a-z");return}try{const m=(await vN(u1,n,i)).user;await ix(wr(Ot,"users",m.uid),{email:n,username:t,role:"User"}),await xN(m),alert("נרשמת בהצלחה! נשלח אליך מייל לאימות.")}catch(g){s(g.message)}},d={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"#f2f2f2"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return y.jsx("div",{style:d.container,children:y.jsxs("form",{onSubmit:f,style:d.form,children:[y.jsx("h2",{style:d.title,children:"הרשמה"}),y.jsx("input",{type:"text",placeholder:"שם משתמש",value:t,onChange:p=>r(p.target.value),style:d.input,required:!0}),y.jsx("input",{type:"email",placeholder:"אימייל",value:n,onChange:p=>e(p.target.value),style:d.input,required:!0}),y.jsx("input",{type:"password",placeholder:"סיסמה",value:i,onChange:p=>a(p.target.value),style:d.input,required:!0}),o&&y.jsx("div",{style:d.error,children:o}),y.jsx("button",{type:"submit",style:d.button,children:"הרשם"})]})})},GL=({form:n,errors:e,handleChange:t,handleConfirm:r,handleClear:i,setShowCatalogPopup:a,saving:o,isLoadingClientData:s=!1})=>{const c=[{label:"מספר פלאפון",name:"phone",required:!0},{label:"שם מתנדבת",name:"volunteerName",required:!0},{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return y.jsxs("div",{className:"loan-form-box",children:[y.jsx("h2",{style:{textAlign:"center"},children:"הזמנה חדשה"}),c.map(({label:f,name:d,type:p="text",required:g})=>y.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[y.jsxs("label",{htmlFor:d,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[f,g&&" *",s&&(d==="clientName"||d==="address"||d==="email")&&y.jsx("span",{style:{marginRight:"0.5rem",color:"#2196f3"},children:"⏳"})]}),y.jsxs("div",{style:{position:"relative"},children:[y.jsx("input",{id:d,type:p,name:d,value:n[d],onChange:t,disabled:s&&(d==="clientName"||d==="address"||d==="email"),inputMode:d==="phone"?"numeric":void 0,pattern:d==="phone"?"[0-9]*":void 0,min:p==="date"?d==="pickupDate"?new Date().toISOString().split("T")[0]:d==="eventDate"||d==="returnDate"?n.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:e[d]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:s&&(d==="clientName"||d==="address"||d==="email")?"#f5f5f5":"white",opacity:s&&(d==="clientName"||d==="address"||d==="email")?.7:1},placeholder:s&&(d==="clientName"||d==="address"||d==="email")?"טוען...":""}),s&&d==="phone"&&y.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#2196f3"},children:y.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e3f2fd",borderTop:"2px solid #2196f3",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),e[d]&&y.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:e[d]})]},d)),y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:y.jsx("button",{className:"btn btn-blue",onClick:()=>a(!0),children:"בחירת מוצרים"})}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[y.jsx("button",{className:"btn btn-green",onClick:r,disabled:o||s,children:o?"שומר...":"אישור הזמנה"}),y.jsx("button",{className:"btn btn-red",onClick:i,disabled:o||s,children:"ביטול הזמנה"})]}),y.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: translateY(-50%) rotate(0deg); }
          100% { transform: translateY(-50%) rotate(360deg); }
        }
      `})]})};function $L(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function YL(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var XL=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KL=function(n){XL(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),$L(a,i.prototype),YL(a),a}return e}(Error),QL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),So=function(n){QL(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(KL),ZL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nl=function(n){ZL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(So),JL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bt=function(n){JL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(So),eM=function(){function n(e){if(this.binarizer=e,e===null)throw new Bt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),tM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qi=function(n){tM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(So),nM=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Sr=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),rM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ux=function(n){rM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(So),iM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),O_=function(n){iM(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(ux),aM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Li=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Bt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new O_(t);if(r>e)throw new O_(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=aM(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Sr.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=r(t,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),gn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Zi=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Sr.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var s=i*32+gn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var s=i*32+gn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Bt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var s=o>r?0:e&31,c=o<i?31:t&31,f=(2<<c)-(1<<s);a[o]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Bt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,s=i;s<=a;s++){var c=s>i?0:e&31,f=s<a?31:t&31,d=(2<<f)-(1<<c)&4294967295;if((o[s]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Bt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Bt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var s=r*32-this.size,c=e[0]>>>s,a=1;a<r;a++){var f=e[a];c|=f<<32-s,e[a-1]=c,c=f>>>s}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Li.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Li.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),Ay;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Ay||(Ay={}));const Mr=Ay;var oM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mt=function(n){oM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(So),sM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},or;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(or||(or={}));var Pi=function(){function n(e,t,r){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var p=c[f];n.VALUES_TO_ECI.set(p,this)}try{for(var g=sM(o),m=g.next();!m.done;m=g.next()){var b=m.value;n.NAME_TO_ECI.set(b,this)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new mt("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new mt("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new mt("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(or.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(or.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(or.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(or.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(or.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(or.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(or.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(or.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(or.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(or.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(or.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(or.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(or.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(or.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(or.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(or.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(or.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(or.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(or.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(or.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(or.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(or.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(or.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(or.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(or.Big5,28,"Big5"),n.GB18030=new n(or.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(or.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),lM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ug=function(n){lM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(So),As=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Pi?e:Pi.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(r.equals(Pi.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ug("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Pi.UTF8)||e.equals(Pi.ISO8859_1)||e.equals(Pi.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),kn=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return As.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Mr.CHARACTER_SET)!==void 0)return t.get(Mr.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,s=0,c=0,f=0,d=0,p=0,g=0,m=0,b=0,_=0,I=0,C=0,D=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,B=0;B<r&&(i||a||o);B++){var q=e[B]&255;o&&(s>0?(q&128)===0?o=!1:s--:(q&128)!==0&&((q&64)===0?o=!1:(s++,(q&32)===0?c++:(s++,(q&16)===0?f++:(s++,(q&8)===0?d++:o=!1))))),i&&(q>127&&q<160?i=!1:q>159&&(q<192||q===215||q===247)&&C++),a&&(p>0?q<64||q===127||q>252?a=!1:p--:q===128||q===160||q>239?a=!1:q>160&&q<224?(g++,b=0,m++,m>_&&(_=m)):q>127?(p++,m=0,b++,b>I&&(I=b)):(m=0,b=0))}return o&&s>0&&(o=!1),a&&p>0&&(a=!1),o&&(D||c+f+d>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||_>=3||I>=3)?n.SHIFT_JIS:i&&a?_===2&&g===2||C*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(s,c,f,d,p,g){if(s==="%%")return"%";if(t[++i]!==void 0){s=d?parseInt(d.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,b;switch(g){case"s":b=t[i];break;case"c":b=t[i][0];break;case"f":b=parseFloat(t[i]).toFixed(s);break;case"p":b=parseFloat(t[i]).toPrecision(s);break;case"e":b=parseFloat(t[i]).toExponential(s);break;case"x":b=parseInt(t[i]).toString(m||16);break;case"d":b=parseFloat(parseInt(t[i],m||10).toPrecision(s)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(m);for(var _=parseInt(f),I=f&&f[0]+""=="0"?"0":" ";b.length<_;)b=c!==void 0?b+I:I+b;return b}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return As.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Pi.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Pi.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Pi.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),un=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=kn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),oc=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Bt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],s=0;s<r;s++)o[s]&&i.set(s,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Bt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Bt("row lengths do not match");o=a,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new Bt("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Bt("row lengths do not match");c++}for(var d=new n(s,c),p=0;p<a;p++)i[p]&&d.set(Math.floor(p%s),Math.floor(p/s));return d},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Bt("input matrix dimensions do not match");for(var t=new Zi(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*r,c=e.getRow(a,t).getBitArray(),f=0;f<r;f++)i[s+f]^=c[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Bt("Left and top must be nonnegative");if(i<1||r<1)throw new Bt("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Bt("The region must fit inside the matrix");for(var s=this.rowSize,c=this.bits,f=t;f<o;f++)for(var d=f*s,p=e;p<a;p++)c[d+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Zi(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Sr.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Zi(e),i=new Zi(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,s=-1,c=-1,f=0;f<t;f++)for(var d=0;d<r;d++){var p=i[f*r+d];if(p!==0){if(f<o&&(o=f),f>c&&(c=f),d*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;d*32+g<a&&(a=d*32+g)}if(d*32+31>s){for(var g=31;!(p>>>g);)g--;d*32+g>s&&(s=d*32+g)}}}return s<a||c<o?null:Int32Array.from([a,o,s-a+1,c-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],s=0;(o<<31-s&4294967295)===0;)s++;return a+=s,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Li.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Li.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new un,a=0,o=this.height;a<o;a++){for(var s=0,c=this.width;s<c;s++)i.append(this.get(s,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),cM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),He=function(n){cM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(So),uM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fM=function(n){uM(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Zi(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),s=this.buckets,c=0;c<a;c++)s[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<f&&r.set(c);else for(var d=o[0]&255,p=o[1]&255,c=1;c<a-1;c++){var g=o[c+1]&255;(p*4-d-g)/2<f&&r.set(c),d=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new oc(r,i);this.initArrays(r);for(var o=this.buckets,s=1;s<5;s++)for(var c=Math.floor(i*s/5),f=t.getRow(c,this.luminances),d=Math.floor(r*4/5),p=Math.floor(r/5);p<d;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(o),b=t.getMatrix(),s=0;s<i;s++)for(var _=s*r,p=0;p<r;p++){var g=b[_+p]&255;g<m&&a.set(p,s)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,s=0;s<r;s++)t[s]>o&&(a=s,o=t[s]),t[s]>i&&(i=t[s]);for(var c=0,f=0,s=0;s<r;s++){var d=s-a,p=t[s]*d*d;p>f&&(c=s,f=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new He;for(var m=c-1,b=-1,s=c-1;s>a;s--){var _=s-a,p=_*_*(c-s)*(i-t[s]);p>b&&(m=s,b=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(nM),dM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hM=function(n){dM(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var c=e.calculateBlackPoints(a,o,s,r,i),f=new oc(r,i);e.calculateThresholdForBlock(a,o,s,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,s,c){for(var f=o-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var m=e.cap(p,2,i-3),b=0;b<r;b++){var _=b<<e.BLOCK_SIZE_POWER;_>d&&(_=d);for(var I=e.cap(b,2,r-3),C=0,D=-2;D<=2;D++){var B=s[m+D];C+=B[I-2]+B[I-1]+B[I]+B[I+1]+B[I+2]}var q=C/25;e.thresholdBlock(t,_,g,q,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,s){for(var c=0,f=i*o+r;c<e.BLOCK_SIZE;c++,f+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(t[f+d]&255)<=a&&s.set(r+d,i+c)},e.calculateBlackPoints=function(t,r,i,a,o){for(var s=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(r);var p=d<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var b=0,_=255,I=0,C=0,D=p*a+m;C<e.BLOCK_SIZE;C++,D+=a){for(var B=0;B<e.BLOCK_SIZE;B++){var q=t[D+B]&255;b+=q,q<_&&(_=q),q>I&&(I=q)}if(I-_>e.MIN_DYNAMIC_RANGE)for(C++,D+=a;C<e.BLOCK_SIZE;C++,D+=a)for(var B=0;B<e.BLOCK_SIZE;B++)b+=t[D+B]&255}var Y=b>>e.BLOCK_SIZE_POWER*2;if(I-_<=e.MIN_DYNAMIC_RANGE&&(Y=_/2,d>0&&g>0)){var H=(f[d-1][g]+2*f[d][g-1]+f[d-1][g-1])/4;_<H&&(Y=H)}f[d][g]=Y}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(fM),Mm=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new ug("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new ug("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new ug("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new un,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},n}(),pM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fx=function(n){pM(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Mm),gM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mM=function(n){gM(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,c=0,f=t.length;s<f;s+=4,c++){var d=void 0,p=t[s+3];if(p===0)d=255;else{var g=t[s],m=t[s+1],b=t[s+2];d=306*g+601*m+117*b+512>>10}o[c]=d}else for(var s=0,c=0,_=t.length;s<_;s+=4,c++){var d=void 0,p=t[s+3];if(p===0)d=255;else{var g=t[s],m=t[s+1],b=t[s+2];d=306*g+601*m+117*b+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new fx(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Mm),vM=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),$a=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?a(d.value):i(d.value).then(s,c)}f((r=r.apply(n,e||[])).next())})},Ya=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},yM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bh=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return $a(this,void 0,void 0,function(){var e,t,r,i,a,o,s,c,f,d,p,g;return Ya(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=yM(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),f=a.groupId,d={deviceId:s,label:c,kind:o,groupId:f},t.push(d))}catch(b){p={error:b}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return $a(this,void 0,void 0,function(){var e;return Ya(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new vM(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return $a(this,void 0,void 0,function(){var t;return Ya(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return $a(this,void 0,void 0,function(){return Ya(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return $a(this,void 0,void 0,function(){var r,i;return Ya(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return $a(this,void 0,void 0,function(){var r;return Ya(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return $a(this,void 0,void 0,function(){var r,i;return Ya(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return $a(this,void 0,void 0,function(){return Ya(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return $a(this,void 0,void 0,function(){var i,a;return Ya(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return $a(this,void 0,void 0,function(){var i;return Ya(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return $a(this,void 0,void 0,function(){var i;return Ya(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return $a(this,void 0,void 0,function(){var r;return Ya(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return $a(this,void 0,void 0,function(){return Ya(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new nl("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new nl("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new nl("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new nl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new nl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new nl("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new nl("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new nl("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new nl("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new nl("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return $a(this,void 0,void 0,function(){return Ya(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return $a(this,void 0,void 0,function(){return Ya(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new He("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(g){var f=t&&g instanceof He,d=g instanceof Qi||g instanceof mt,p=d&&r;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(g)}};return new Promise(function(o,s){return a(o,s)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var o=c instanceof Qi||c instanceof mt,s=c instanceof He;(o||s)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new mM(r,t),a=new hM(i);return new eM(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),Fa=function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Sr.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Sr.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Sr.arraycopy(t,0,r,0,t.length),Sr.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Sy;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Sy||(Sy={}));const jt=Sy;var Ey;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ey||(Ey={}));const da=Ey;var jm=function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),U0=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Bt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),sf=function(){function n(e,t){if(t.length===0)throw new Bt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Sr.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=U0.addOrSubtract(r,o)}return r}r=t[0];for(var s=t.length,c=this.field,i=1;i<s;i++)r=U0.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Sr.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=U0.addOrSubtract(t[s-o],r[s]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=this.field,c=0;c<r;c++)for(var f=t[c],d=0;d<a;d++)o[c+d]=U0.addOrSubtract(o[c+d],s.multiply(f,i[d]));return new n(s,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Bt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(r[s],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Bt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,c),d=t.buildMonomial(s,c);r=r.addOrSubtract(d),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),xM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_S=function(n){xM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(So),bM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bo=function(n){bM(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),s=1,c=0;c<r;c++)o[c]=s,s*=2,s>=r&&(s^=t,s&=r-1);a.expTable=o;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[o[c]]=c;return a.logTable=f,a.zero=new sf(a,Int32Array.from([0])),a.one=new sf(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Bt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new sf(this,i)},e.prototype.inverse=function(t){if(t===0)throw new _S;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+gn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(U0),wM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qp=function(n){wM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(So),_M=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),D1=function(n){_M(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(So),Bm=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new sf(r,e),a=new Int32Array(t),o=!0,s=0;s<t;s++){var c=i.evaluateAt(r.exp(s+r.getGeneratorBase()));a[a.length-1-s]=c,c!==0&&(o=!1)}if(!o)for(var f=new sf(r,a),d=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=d[0],g=d[1],m=this.findErrorLocations(p),b=this.findErrorMagnitudes(g,m),s=0;s<m.length;s++){var _=e.length-1-r.log(m[s]);if(_<0)throw new qp("Bad error location");e[_]=bo.addOrSubtract(e[_],b[s])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,s=t,c=a.getZero(),f=a.getOne();s.getDegree()>=(r/2|0);){var d=o,p=c;if(o=s,c=f,o.isZero())throw new qp("r_{i-1} was zero");s=d;for(var g=a.getZero(),m=o.getCoefficient(o.getDegree()),b=a.inverse(m);s.getDegree()>=o.getDegree()&&!s.isZero();){var _=s.getDegree()-o.getDegree(),I=a.multiply(s.getCoefficient(s.getDegree()),b);g=g.addOrSubtract(a.buildMonomial(_,I)),s=s.addOrSubtract(o.multiplyByMonomial(_,I))}if(f=g.multiply(c).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new D1("Division algorithm failed to reduce polynomial?")}var C=f.getCoefficient(0);if(C===0)throw new qp("sigmaTilde(0) was zero");var D=a.inverse(C),B=f.multiplyScalar(D),q=s.multiplyScalar(D);return[B,q]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new qp("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var s=a.inverse(t[o]),c=1,f=0;f<r;f++)if(o!==f){var d=a.multiply(t[f],s),p=(d&1)===0?d|1:d&-2;c=a.multiply(c,p)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},n}(),sa;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(sa||(sa={}));var k_=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),s=new jm(a,o,null,null);return s.setNumBits(i.length),s},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=sa.UPPER,i=sa.UPPER,a="",o=0;o<t;)if(i===sa.BINARY){if(t-o<5)break;var s=n.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=n.readCode(e,o,11)+31,o+=11}for(var c=0;c<s;c++){if(t-o<8){o=t;break}var f=n.readCode(e,o,8);a+=kn.castAsNonUtf8Char(f),o+=8}i=r}else{var d=i===sa.DIGIT?4:5;if(t-o<d)break;var f=n.readCode(e,o,d);o+=d;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return sa.LOWER;case"P":return sa.PUNCT;case"M":return sa.MIXED;case"D":return sa.DIGIT;case"B":return sa.BINARY;case"U":default:return sa.UPPER}},n.getCharacter=function(e,t){switch(e){case sa.UPPER:return n.UPPER_TABLE[t];case sa.LOWER:return n.LOWER_TABLE[t];case sa.MIXED:return n.MIXED_TABLE[t];case sa.PUNCT:return n.PUNCT_TABLE[t];case sa.DIGIT:return n.DIGIT_TABLE[t];default:throw new D1("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=bo.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=bo.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=bo.AZTEC_DATA_10):(r=12,t=bo.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new mt;for(var o=e.length%r,s=new Int32Array(a),c=0;c<a;c++,o+=r)s[c]=n.readCode(e,o,r);try{var f=new Bm(t);f.decode(s,a-i)}catch(I){throw new mt(I)}for(var d=(1<<r)-1,p=0,c=0;c<i;c++){var g=s[c];if(g===0||g===d)throw new mt;(g===1||g===d-1)&&p++}for(var m=new Array(i*r-p),b=0,c=0;c<i;c++){var g=s[c];if(g===1||g===d-1)m.fill(g>1,b,b+r-1),b+=r-1;else for(var _=r-1;_>=0;--_)m[b++]=(g&1<<_)!==0}return m},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var s=0;s<a.length;s++)a[s]=s;else for(var c=i+1+2*gn.truncDivision(gn.truncDivision(i,2)-1,15),f=i/2,d=gn.truncDivision(c,2),s=0;s<f;s++){var p=s+gn.truncDivision(s,15);a[f-s-1]=d-p-1,a[f+s]=d+p+1}for(var s=0,g=0;s<r;s++){for(var m=(r-s)*4+(t?9:12),b=s*2,_=i-1-b,I=0;I<m;I++)for(var C=I*2,D=0;D<2;D++)o[g+C+D]=e.get(a[b+D],a[b+I]),o[g+2*m+C+D]=e.get(a[b+I],a[_-D]),o[g+4*m+C+D]=e.get(a[_-D],a[_-I]),o[g+6*m+C+D]=e.get(a[_-I],a[b+D]);g+=m*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Wn=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),Cy=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Dt=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*Cy.floatToIntBits(this.x)+Cy.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(r>=t&&r>=i?(o=e[0],a=e[1],s=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var c=a;a=s,s=c}e[0]=a,e[1]=o,e[2]=s},n.distance=function(e,t){return Wn.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),dx=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),AM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SM=function(n){AM(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(dx),Iy=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new He}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,c=!1,f=!1,d=!1,p=!1,g=this.width,m=this.height;o;){o=!1;for(var b=!0;(b||!c)&&t<g;)b=this.containsBlackPoint(r,i,t,!1),b?(t++,o=!0,c=!0):c||t++;if(t>=g){a=!0;break}for(var _=!0;(_||!f)&&i<m;)_=this.containsBlackPoint(e,t,i,!0),_?(i++,o=!0,f=!0):f||i++;if(i>=m){a=!0;break}for(var I=!0;(I||!d)&&e>=0;)I=this.containsBlackPoint(r,i,e,!1),I?(e--,o=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var C=!0;(C||!p)&&r>=0;)C=this.containsBlackPoint(e,t,r,!0),C?(r--,o=!0,p=!0):p||r--;if(r<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var D=t-e,B=null,q=1;B===null&&q<D;q++)B=this.getBlackPointOnSegment(e,i-q,e+q,i);if(B==null)throw new He;for(var Y=null,q=1;Y===null&&q<D;q++)Y=this.getBlackPointOnSegment(e,r+q,e+q,r);if(Y==null)throw new He;for(var H=null,q=1;H===null&&q<D;q++)H=this.getBlackPointOnSegment(t,r+q,t-q,r);if(H==null)throw new He;for(var P=null,q=1;P===null&&q<D;q++)P=this.getBlackPointOnSegment(t,i-q,t-q,i);if(P==null)throw new He;return this.centerEdges(P,B,H,Y)}else throw new He},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=Wn.round(Wn.distance(e,t,r,i)),o=(r-e)/a,s=(i-t)/a,c=this.image,f=0;f<a;f++){var d=Wn.round(e+f*o),p=Wn.round(t+f*s);if(c.get(d,p))return new Dt(d,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),s=t.getX(),c=t.getY(),f=r.getX(),d=r.getY(),p=i.getX(),g=i.getY(),m=n.CORR;return a<this.width/2?[new Dt(p-m,g+m),new Dt(s+m,c+m),new Dt(f-m,d-m),new Dt(a+m,o-m)]:[new Dt(p+m,g+m),new Dt(s+m,c-m),new Dt(f-m,d+m),new Dt(a-m,o-m)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var s=e;s<=t;s++)if(a.get(r,s))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),P_=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>r||c<-1||c>i)throw new He;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>r||c<-1||c>i)throw new He;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}},n}(),AS=function(){function n(e,t,r,i,a,o,s,c,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,s,c,f,d,p,g,m,b,_,I){var C=n.quadrilateralToSquare(e,t,r,i,a,o,s,c),D=n.squareToQuadrilateral(f,d,p,g,m,b,_,I);return D.times(C)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=0;g<t;g+=2){var m=e[g],b=e[g+1],_=a*m+c*b+p;e[g]=(r*m+o*b+f)/_,e[g+1]=(i*m+s*b+d)/_}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var b=e[m],_=t[m],I=a*b+c*_+p;e[m]=(r*b+o*_+f)/I,t[m]=(i*b+s*_+d)/I}},n.squareToQuadrilateral=function(e,t,r,i,a,o,s,c){var f=e-r+a-s,d=t-i+o-c;if(f===0&&d===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var p=r-a,g=s-a,m=i-o,b=c-o,_=p*b-g*m,I=(f*b-g*d)/_,C=(p*d-f*m)/_;return new n(r-e+I*r,s-e+C*s,e,i-t+I*i,c-t+C*c,t,I,C,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,s,c){return n.squareToQuadrilateral(e,t,r,i,a,o,s,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),EM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CM=function(n){EM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,s,c,f,d,p,g,m,b,_,I,C,D,B,q){var Y=AS.quadrilateralToQuadrilateral(a,o,s,c,f,d,p,g,m,b,_,I,C,D,B,q);return this.sampleGridWithTransform(t,r,i,Y)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new He;for(var o=new oc(r,i),s=new Float32Array(2*r),c=0;c<i;c++){for(var f=s.length,d=c+.5,p=0;p<f;p+=2)s[p]=p/2+.5,s[p+1]=d;a.transformPoints(s),P_.checkAndNudgePoints(t,s);try{for(var p=0;p<f;p+=2)t.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,c)}catch{throw new He}}return o},e}(P_),hx=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new CM,n}(),mo=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Dt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),IM=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new SM(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new He;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,s){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(gn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new He},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),s=r-1;s>=0;--s)o[s]=e&15,e>>=4;try{var c=new Bm(bo.AZTEC_PARAM);c.decode(o,a)}catch{throw new He}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),c=this.getFirstDifferent(r,o,1,1),f=this.getFirstDifferent(i,o,-1,1),d=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,c,f,d))break}t=s,r=c,i=f,a=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new He;this.compact=this.nbCenterLayers===5;var g=new Dt(t.getX()+.5,t.getY()-.5),m=new Dt(r.getX()+.5,r.getY()+.5),b=new Dt(i.getX()-.5,i.getY()+.5),_=new Dt(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,b,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new Iy(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new mo(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new mo(o+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new mo(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new mo(o-7,s-7),!1,-1,-1).toResultPoint()}var c=Wn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Wn.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new Iy(this.image,15,c,f).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new mo(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new mo(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new mo(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new mo(c-7,f-7),!1,-1,-1).toResultPoint()}return c=Wn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Wn.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new mo(c,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=hx.getInstance(),s=this.getDimension(),c=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,c,c,f,c,f,f,c,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,s=e.getX(),c=e.getY(),f=o*(t.getX()-e.getX())/a,d=o*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(Wn.round(s+p*f),Wn.round(c+p*d))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new mo(e.getX()-a,e.getY()+a),t=new mo(t.getX()-a,t.getY()-a),r=new mo(r.getX()+a,r.getY()-a),i=new mo(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,r),s!==o)?!1:(s=this.getColor(r,i),s===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,s=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(r),p=0;p<d;p++)s+=i,c+=a,this.image.get(Wn.round(s),Wn.round(c))!==f&&o++;var g=o/r;return g>.1&&g<.9?0:g<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new mo(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Dt(s+i*a,c+i*o),d=new Dt(s-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Dt(s+i*a,c+i*o),g=new Dt(s-i*a,c-i*o),m=[f,p,d,g];return m},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Wn.round(e.getX()),r=Wn.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Wn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Wn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(gn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),Ty=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new IM(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new k_().decode(s)}catch(p){r=p}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new k_().decode(s)}catch(p){throw r??p}var c=new Fa(o.getText(),o.getRawBytes(),o.getNumBits(),a,jt.AZTEC,Sr.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(da.BYTE_SEGMENTS,f);var d=o.getECLevel();return d!=null&&c.putMetadata(da.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Mr.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),TM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){TM(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ty,t)||this}return e})(Bh);var Mi=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Mr.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),s=270;o!==null&&o.get(da.ORIENTATION)===!0&&(s=s+o.get(da.ORIENTATION)%360),a.putMetadata(da.ORIENTATION,s);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Dt(f-c[d].getY()-1,c[d].getX());return a}else throw new He}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Zi(r),o=t&&t.get(Mr.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var p=Math.trunc((d+1)/2),g=(d&1)===0,m=f+s*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var b=function(D){if(D===1&&(a.reverse(),t&&t.get(Mr.NEED_RESULT_POINT_CALLBACK)===!0)){var B=new Map;t.forEach(function(H,P){return B.set(P,H)}),B.delete(Mr.NEED_RESULT_POINT_CALLBACK),t=B}try{var q=_.decodeRow(m,a,t);if(D===1){q.putMetadata(da.ORIENTATION,180);var Y=q.getResultPoints();Y!==null&&(Y[0]=new Dt(r-Y[0].getX()-1,Y[0].getY()),Y[1]=new Dt(r-Y[1].getX()-1,Y[1].getY()))}return{value:q}}catch{}},_=this,I=0;I<2;I++){var C=b(I);if(typeof C=="object")return C.value}}throw new He},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new He;for(var s=!e.get(t),c=0,f=t;f<o;){if(e.get(f)!==s)r[c]++;else{if(++c===i)break;r[c]=1,s=!s}f++}if(!(c===i||c===i-1&&f===o))throw new He},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new He;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;r*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=t[d]*c,m=p>g?p-g:g-p;if(m>r)return Number.POSITIVE_INFINITY;f+=m}return f/a},n}(),RM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),L_=function(n){RM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,c=!1,f=6,d=i;d<r;d++)if(t.get(d)!==c)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var b=Mi.patternMatchVariance(o,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);b<p&&(p=b,g=m)}if(g>=0&&t.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,g]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new He},e.decodeCode=function(t,r,i){Mi.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var c=e.CODE_PATTERNS[s],f=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new He},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Mr.ASSUME_GS1)===!0,o=e.findStartPattern(r),s=o[2],c=0,f=new Uint8Array(20);f[c++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new mt}for(var p=!1,g=!1,m="",b=o[0],_=o[1],I=Int32Array.from([0,0,0,0,0,0]),C=0,D=0,B=s,q=0,Y=!0,H=!1,P=!1;!p;){var S=g;switch(g=!1,C=D,D=e.decodeCode(r,I,_),f[c++]=D,D!==e.CODE_STOP&&(Y=!0),D!==e.CODE_STOP&&(q++,B+=q*D),b=_,_+=I.reduce(function(z,ne){return z+ne},0),D){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new mt}switch(d){case e.CODE_CODE_A:if(D<64)P===H?m+=String.fromCharCode(32+D):m+=String.fromCharCode(32+D+128),P=!1;else if(D<96)P===H?m+=String.fromCharCode(D-64):m+=String.fromCharCode(D+64),P=!1;else switch(D!==e.CODE_STOP&&(Y=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!H&&P?(H=!0,P=!1):H&&P?(H=!1,P=!1):P=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(D<96)P===H?m+=String.fromCharCode(32+D):m+=String.fromCharCode(32+D+128),P=!1;else switch(D!==e.CODE_STOP&&(Y=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!H&&P?(H=!0,P=!1):H&&P?(H=!1,P=!1):P=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(D<100)D<10&&(m+="0"),m+=D;else switch(D!==e.CODE_STOP&&(Y=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}S&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=_-b;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-b)/2),!1))throw new He;if(B-=q*C,B%103!==C)throw new Qi;var M=m.length;if(M===0)throw new He;M>0&&Y&&(d===e.CODE_CODE_C?m=m.substring(0,M-2):m=m.substring(0,M-1));for(var T=(o[1]+o[0])/2,N=b+R/2,L=f.length,F=new Uint8Array(L),X=0;X<L;X++)F[X]=f[X];var V=[new Dt(T,t),new Dt(N,t)];return new Fa(m,F,0,V,jt.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Mi),NM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_v=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M_=function(n){NM(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,f),p=r.getNextSet(d[1]),g=r.getSize(),m,b;do{e.recordPattern(r,p,f);var _=e.toNarrowWidePattern(f);if(_<0)throw new He;m=e.patternToChar(_),this.decodeRowResult+=m,b=p;try{for(var I=(a=void 0,_v(f)),C=I.next();!C.done;C=I.next()){var D=C.value;p+=D}}catch(L){a={error:L}}finally{try{C&&!C.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var q=_v(f),Y=q.next();!Y.done;Y=q.next()){var D=Y.value;B+=D}}catch(L){s={error:L}}finally{try{Y&&!Y.done&&(c=q.return)&&c.call(q)}finally{if(s)throw s.error}}var H=p-b-B;if(p!==g&&H*2<B)throw new He;if(this.usingCheckDigit){for(var P=this.decodeRowResult.length-1,S=0,R=0;R<P;R++)S+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(P)!==e.ALPHABET_STRING.charAt(S%43))throw new Qi;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new He;var M;this.extendedMode?M=e.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;var T=(d[1]+d[0])/2,N=b+B/2;return new Fa(M,null,0,[new Dt(T,t),new Dt(N,t)],jt.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,s=a,c=!1,f=r.length,d=a;d<i;d++)if(t.get(d)!==c)r[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,c=!c}throw new He},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,s;do{var c=2147483647;try{for(var f=(r=void 0,_v(t)),d=f.next();!d.done;d=f.next()){var p=d.value;p<c&&p>o&&(c=p)}}catch(_){r={error:_}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}o=c,s=0;for(var g=0,m=0,b=0;b<a;b++){var p=t[b];p>o&&(m|=1<<a-1-b,s++,g+=p)}if(s===3){for(var b=0;b<a&&s>0;b++){var p=t[b];if(p>o&&(s--,p*2>=g))return-1}return m}}while(s>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new He},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(a+1),c="\0";switch(o){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new mt;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new mt;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new mt;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new mt;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Mi),DM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Av=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j_=function(n){DM(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.findAsteriskPattern(r),d=r.getNextSet(f[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,b;do{e.recordPattern(r,d,g);var _=this.toPattern(g);if(_<0)throw new He;m=this.patternToChar(_),this.decodeRowResult+=m,b=d;try{for(var I=(a=void 0,Av(g)),C=I.next();!C.done;C=I.next()){var D=C.value;d+=D}}catch(R){a={error:R}}finally{try{C&&!C.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}d=r.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var q=Av(g),Y=q.next();!Y.done;Y=q.next()){var D=Y.value;B+=D}}catch(R){s={error:R}}finally{try{Y&&!Y.done&&(c=q.return)&&c.call(q)}finally{if(s)throw s.error}}if(d===p||!r.get(d))throw new He;if(this.decodeRowResult.length<2)throw new He;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var H=this.decodeExtended(this.decodeRowResult),P=(f[1]+f[0])/2,S=b+B/2;return new Fa(H,null,0,[new Dt(P,t),new Dt(S,t)],jt.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,c=a.length,f=0,d=i;d<r;d++)if(t.get(d)!==s)a[f]++;else{if(f===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new He},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=Av(t),s=o.next();!s.done;s=o.next()){var c=s.value;a+=c}}catch(b){r={error:b}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var f=0,d=t.length,p=0;p<d;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new He},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new mt;var s=t.charAt(a+1),c="\0";switch(o){case"d":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new mt;break;case"a":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new mt;break;case"b":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s>="X"&&s<="Z")c="";else throw new mt;break;case"c":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new mt;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,s=r-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(s)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Qi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Mi),OM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B_=function(n){OM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,s=this.decodeStart(r),c=this.decodeEnd(r),f=new un;e.decodeMiddle(r,s[1],c[0],f);var d=f.toString(),p=null;i!=null&&(p=i.get(Mr.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=d.length,m=!1,b=0;try{for(var _=kM(p),I=_.next();!I.done;I=_.next()){var C=I.value;if(g===C){m=!0;break}C>b&&(b=C)}}catch(q){a={error:q}}finally{try{I&&!I.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}if(!m&&g>b&&(m=!0),!m)throw new mt;var D=[new Dt(s[1],t),new Dt(c[0],t)],B=new Fa(d,null,0,D,jt.ITF,new Date().getTime());return B},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),s.fill(0),c.fill(0);r<i;){Mi.recordPattern(t,r,o);for(var f=0;f<5;f++){var d=2*f;s[f]=o[d],c[f]=o[d+1]}var p=e.decodeDigit(s);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),o.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new He},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new He;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof He&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),s=t.getSize(),c=!1,f=0,d=r;o.fill(0);for(var p=r;p<s;p++)if(t.get(p)!==c)o[f]++;else{if(f===a-1){if(Mi.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,p];d+=o[0]+o[1],Sr.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new He},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],c=Mi.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=o):c===r&&(i=-1)}if(i>=0)return i%10;throw new He},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Mi),PM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rh=function(n){PM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var c=s-(a-s);c>=0&&(r=t.isRange(c,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var s=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,f=r,d=a.length,p=i,g=r;g<s;g++)if(t.get(g)!==p)o[c]++;else{if(c===d-1){if(Mi.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var m=o.slice(2,o.length),b=0;b<c-1;b++)o[b]=m[b];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,p=!p}throw new He},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,s=-1,c=a.length,f=0;f<c;f++){var d=a[f],p=Mi.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=f)}if(s>=0)return s;throw new He},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Mi),LM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MM=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),c=[new Dt((r[0]+r[1])/2,e),new Dt(a,e)],f=new Fa(o,null,0,c,jt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,d=0;d<5&&c<s;d++){var p=Rh.decodeDigit(e,o,c,Rh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,LM(o)),m=g.next();!m.done;m=g.next()){var b=m.value;c+=b}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new He;var _=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==_)throw new He;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new He},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[da.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n}(),jM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BM=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),c=[new Dt((r[0]+r[1])/2,e),new Dt(a,e)],f=new Fa(o,null,0,c,jt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,d=0;d<2&&c<s;d++){var p=Rh.decodeDigit(e,o,c,Rh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,jM(o)),m=g.next();!m.done;m=g.next()){var b=m.value;c+=b}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new He;if(parseInt(r.toString())%4!==f)throw new He;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[da.ISSUE_NUMBER,parseInt(e)]])},n}(),FM=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Rh.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new MM;return a.decodeRow(e,t,i)}catch{var o=new BM;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),UM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ki=function(n){UM(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(Mr.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new Dt((a[0]+a[1])/2,t);o.foundPossibleResultPoint(s)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(o!=null){var p=new Dt(f,t);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,f);if(o!=null){var m=new Dt((g[0]+g[1])/2,t);o.foundPossibleResultPoint(m)}var b=g[1],_=b+(b-g[0]);if(_>=r.getSize()||!r.isRange(b,_,!1))throw new He;var I=d.toString();if(I.length<8)throw new mt;if(!e.checkChecksum(I))throw new Qi;var C=(a[1]+a[0])/2,D=(g[1]+g[0])/2,B=this.getBarcodeFormat(),q=[new Dt(C,t),new Dt(D,t)],Y=new Fa(I,null,0,q,B,new Date().getTime()),H=0;try{var P=FM.decodeRow(t,r,g[1]);Y.putMetadata(da.UPC_EAN_EXTENSION,P.getText()),Y.putAllMetadata(P.getResultMetadata()),Y.addResultPoints(P.getResultPoints()),H=P.getText().length}catch{}var S=i==null?null:i.get(Mr.ALLOWED_EAN_EXTENSIONS);if(S!=null){var R=!1;for(var M in S)if(H.toString()===M){R=!0;break}if(!R)throw new He}return B===jt.EAN_13||jt.UPC_A,Y},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Rh),zM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),F_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ry=function(n){zM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],g=0,m=0;m<6&&p<d;m++){var b=ki.decodeDigit(t,f,p,ki.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);try{for(var _=(a=void 0,F_(f)),I=_.next();!I.done;I=_.next()){var C=I.value;p+=C}}catch(Y){a={error:Y}}finally{try{I&&!I.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}b>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var D=ki.findGuardPattern(t,p,!0,ki.MIDDLE_PATTERN,new Int32Array(ki.MIDDLE_PATTERN.length).fill(0));p=D[1];for(var m=0;m<6&&p<d;m++){var b=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+b);try{for(var B=(s=void 0,F_(f)),q=B.next();!q.done;q=B.next()){var C=q.value;p+=C}}catch(P){s={error:P}}finally{try{q&&!q.done&&(c=B.return)&&c.call(B)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return jt.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new He},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ki),VM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),U_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z_=function(n){VM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],g=0;g<4&&p<d;g++){var m=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var b=(a=void 0,U_(f)),_=b.next();!_.done;_=b.next()){var I=_.value;p+=I}}catch(q){a={error:q}}finally{try{_&&!_.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}}var C=ki.findGuardPattern(t,p,!0,ki.MIDDLE_PATTERN,new Int32Array(ki.MIDDLE_PATTERN.length).fill(0));p=C[1];for(var g=0;g<4&&p<d;g++){var m=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var D=(s=void 0,U_(f)),B=D.next();!B.done;B=D.next()){var I=B.value;p+=I}}catch(H){s={error:H}}finally{try{B&&!B.done&&(c=D.return)&&c.call(D)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return jt.EAN_8},e}(ki),qM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),V_=function(n){qM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new Ry,t}return e.prototype.getBarcodeFormat=function(){return jt.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Fa(r.substring(1),null,null,t.getResultPoints(),jt.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new He},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ki),HM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q_=function(n){HM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s=this.decodeMiddleCounters.map(function(I){return I});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=t.getSize(),f=r[1],d=0,p=0;p<6&&f<c;p++){var g=e.decodeDigit(t,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,WM(s)),b=m.next();!b.done;b=m.next()){var _=b.value;f+=_}}catch(I){a={error:I}}finally{try{b&&!b.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}g>=10&&(d|=1<<5-p)}return e.determineNumSysAndCheckDigit(new un(i),d),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return ki.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw He.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return jt.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new un;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ki),GM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),H_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sv=function(n){GM(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Mr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(jt.EAN_13)>-1&&a.push(new Ry),i.indexOf(jt.UPC_A)>-1&&a.push(new V_),i.indexOf(jt.EAN_8)>-1&&a.push(new z_),i.indexOf(jt.UPC_E)>-1&&a.push(new q_)),a.length===0&&(a.push(new Ry),a.push(new V_),a.push(new z_),a.push(new q_)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var s=H_(this.readers),c=s.next();!c.done;c=s.next()){var f=c.value;try{var d=f.decodeRow(t,r,i),p=d.getBarcodeFormat()===jt.EAN_13&&d.getText().charAt(0)==="0",g=i==null?null:i.get(Mr.POSSIBLE_FORMATS),m=g==null||g.includes(jt.UPC_A);if(p&&m){var b=d.getRawBytes(),_=new Fa(d.getText().substring(1),b,b?b.length:null,d.getResultPoints(),jt.UPC_A);return _.putAllMetadata(d.getResultMetadata()),_}return d}catch{}}}catch(I){a={error:I}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new He},e.prototype.reset=function(){var t,r;try{for(var i=H_(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Mi),$M=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YM=function(n){$M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new He;var o=this.codaBarDecodeRow(a.row);if(!o)throw new He;return new Fa(o,null,0,[new Dt(a.left,t),new Dt(a.right,t)],jt.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],s=r[0],c=1,f=1;f<r.length;f++)r[f]===s?c++:(s=r[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Mi),XM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yf=function(n){XM(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Mi.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new He},e.count=function(t){return Wn.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=KM(t),p=d.next();!p.done;p=d.next()){var g=p.value;g>f&&(f=g),g<c&&(c=g)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Mi),Hg=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),SS=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Dt(r,a)),this.resultPoints.push(new Dt(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),QM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sh=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var s=QM(e),c=s.next();!c.done;c=s.next()){var f=c.value;o+=f}}catch(D){i={error:D}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var d=0,p=0,g=e.length,m=0;m<g-1;m++){var b=void 0;for(b=1,p|=1<<m;b<e[m];b++,p&=~(1<<m)){var _=n.combins(o-b-1,g-m-2);if(r&&p===0&&o-b-(g-m-1)>=g-m-1&&(_-=n.combins(o-b-(g-m),g-m-2)),g-m-1>1){for(var I=0,C=o-b-(g-m-2);C>t;C--)I+=n.combins(o-b-C-1,g-m-3);_-=I*(g-1-m)}else o-b>t&&_--;d+=_}o-=b}return d},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,s=e;s>r;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n}(),ZM=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Zi(r),a=0,o=e[0],s=o.getRightChar().getValue(),c=11;c>=0;--c)(s&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var f=e[c],d=f.getLeftChar().getValue(),p=11;p>=0;--p)(d&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),Wf=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),px=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),JM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Js=function(n){JM(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(px),ej=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gf=function(n){ej(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(px),tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xd=function(n){tj(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new mt;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(px),Hp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nj=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,s,c,f;if(!e)return null;if(e.length<2)throw new He;var d=e.substring(0,2);try{for(var p=Hp(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===d)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,m[2],e):n.processFixedAI(2,m[1],e)}}catch(H){t={error:H}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new He;var b=e.substring(0,3);try{for(var _=Hp(n.THREE_DIGIT_DATA_LENGTH),I=_.next();!I.done;I=_.next()){var m=I.value;if(m[0]===b)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,m[2],e):n.processFixedAI(3,m[1],e)}}catch(H){i={error:H}}finally{try{I&&!I.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var C=Hp(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),D=C.next();!D.done;D=C.next()){var m=D.value;if(m[0]===b)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(H){o={error:H}}finally{try{D&&!D.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}if(e.length<4)throw new He;var B=e.substring(0,4);try{for(var q=Hp(n.FOUR_DIGIT_DATA_LENGTH),Y=q.next();!Y.done;Y=q.next()){var m=Y.value;if(m[0]===B)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(H){c={error:H}}finally{try{Y&&!Y.done&&(f=q.return)&&f.call(q)}finally{if(c)throw c.error}}throw new He},n.processFixedAI=function(e,t,r){if(r.length<e)throw new He;var i=r.substring(0,e);if(r.length<e+t)throw new He;var a=r.substring(e,e+t),o=r.substring(e+t),s="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(o);return c==null?s:s+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),s=r.substring(a),c="("+i+")"+o,f=n.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),fg=function(){function n(e){this.buffer=new un,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=nj.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Xd(this.information.getSize(),Xd.FNC1,Xd.FNC1):new Xd(this.information.getSize(),t-1,Xd.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Xd(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Gf(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Gf(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Gf(this.current.getPosition(),this.buffer.toString()):t=new Gf(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Wf(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Gf(this.current.getPosition(),this.buffer.toString());return new Wf(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wf(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Gf(this.current.getPosition(),this.buffer.toString());return new Wf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wf(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Gf(this.current.getPosition(),this.buffer.toString());return new Wf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wf(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Js(e+5,Js.FNC1);if(t>=5&&t<15)return new Js(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Js(e+7,""+(r+1));if(r>=90&&r<116)return new Js(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new mt}return new Js(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Js(e+5,Js.FNC1);if(t>=5&&t<15)return new Js(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Js(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new D1("Decoding invalid alphanumeric value: "+r)}return new Js(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),ES=function(){function n(e){this.information=e,this.generalDecoder=new fg(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),al=function(n){rj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(ES),ij=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aj=function(n){ij(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new un;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(al),oj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sj=function(n){oj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new un;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(ES),lj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dg=function(n){lj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),s=1e5,c=0;c<5;++c)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(al),cj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CS=function(n){cj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+dg.GTIN_SIZE+e.WEIGHT_SIZE)throw new He;var t=new un;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+dg.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(dg),uj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fj=function(n){uj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(CS),dj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hj=function(n){dj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(CS),pj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gj=function(n){pj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+al.GTIN_SIZE)throw new He;var t=new un;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(al),mj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vj=function(n){mj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+al.GTIN_SIZE)throw new He;var t=new un;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(al),yj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wu=function(n){yj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new He;var t=new un;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(dg);function xj(n){try{if(n.get(1))return new aj(n);if(!n.get(2))return new sj(n);var e=fg.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new fj(n);case 5:return new hj(n)}var t=fg.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new gj(n);case 13:return new vj(n)}var r=fg.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Wu(n,"310","11");case 57:return new Wu(n,"320","11");case 58:return new Wu(n,"310","13");case 59:return new Wu(n,"320","13");case 60:return new Wu(n,"310","15");case 61:return new Wu(n,"320","15");case 62:return new Wu(n,"310","17");case 63:return new Wu(n,"320","17")}}catch(i){throw console.log(i),new D1("unknown decoder: "+n)}}var W_=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),bj=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),wj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_j=function(n){wj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(s){if(s instanceof He){if(!this.pairs.length)throw new He;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new He},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,Gu(t)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(s);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new He},e.isValidSequence=function(t){var r,i;try{for(var a=Gu(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(t.length>s.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==s[f]){c=!1;break}if(c)return!0}}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new bj(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,s,c,f;try{for(var d=Gu(r),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.getPairs().length!==t.length){var m=!0;try{for(var b=(o=void 0,Gu(g.getPairs())),_=b.next();!_.done;_=b.next()){var I=_.value,C=!1;try{for(var D=(c=void 0,Gu(t)),B=D.next();!B.done;B=D.next()){var q=B.value;if(W_.equals(I,q)){C=!0;break}}}catch(Y){c={error:Y}}finally{try{B&&!B.done&&(f=D.return)&&f.call(D)}finally{if(c)throw c.error}}C||(m=!1)}}catch(Y){o={error:Y}}finally{try{_&&!_.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}}}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,s,c,f;try{for(var d=Gu(r),p=d.next();!p.done;p=d.next()){var g=p.value,m=!0;try{for(var b=(o=void 0,Gu(t)),_=b.next();!_.done;_=b.next()){var I=_.value,C=!1;try{for(var D=(c=void 0,Gu(g.getPairs())),B=D.next();!B.done;B=D.next()){var q=B.value;if(I.equals(q)){C=!0;break}}}catch(Y){c={error:Y}}finally{try{B&&!B.done&&(f=D.return)&&f.call(D)}finally{if(c)throw c.error}}if(!C){m=!1;break}}}catch(Y){o={error:Y}}finally{try{_&&!_.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}if(m)return!0}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=ZM.buildBitArray(t),i=xj(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],s[0],s[1]];return new Fa(a,null,null,c,jt.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var c=this.pairs.get(s);a+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var d=211*(o-4)+a;return d===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,c=-1;do this.findNextPair(t,r,c),o=this.parseFoundFinderPattern(t,i,a),o===null?c=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new He;var d;try{d=this.decodeDataCharacter(t,o,a,!1)}catch(p){d=null,console.log(p)}return new W_(f,d,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(r))s=0;else{var c=r[r.length-1];s=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;s<o&&(d=!t.get(s),!!d);)s++;for(var p=0,g=s,m=s;m<o;m++)if(t.get(m)!==d)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,d=!d}throw new He},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,s;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();Sr.arraycopy(f,0,f,1,f.length-1),f[0]=a;var d;try{d=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new SS(d,[o,s],o,s,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var d=o[c];o[c]=o[f],o[f]=d}}var p=17,g=Wn.sum(new Int32Array(o))/p,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new He;for(var b=this.getOddCounts(),_=this.getEvenCounts(),I=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var D=1*o[c]/g,B=D+.5;if(B<1){if(D<.3)throw new He;B=1}else if(B>8){if(D>8.7)throw new He;B=8}var q=c/2;(c&1)===0?(b[q]=B,I[q]=D-B):(_[q]=B,C[q]=D-B)}this.adjustOddEvenCounts(p);for(var Y=4*r.getValue()+(i?0:2)+(a?0:1)-1,H=0,P=0,c=b.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var S=e.WEIGHTS[Y][2*c];P+=b[c]*S}H+=b[c]}for(var R=0,c=_.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var S=e.WEIGHTS[Y][2*c+1];R+=_[c]*S}var M=P+R;if((H&1)!==0||H>13||H<4)throw new He;var T=(13-H)/2,N=e.SYMBOL_WIDEST[T],L=9-N,F=sh.getRSSvalue(b,N,!0),X=sh.getRSSvalue(_,L,!1),V=e.EVEN_TOTAL_SUBSET[T],z=e.GSUM[T],ne=F*V+X+z;return new Hg(ne,M)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Wn.sum(new Int32Array(this.getOddCounts())),i=Wn.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var s=!1,c=!1;i>13?c=!0:i<4&&(s=!0);var f=r+i-t,d=(r&1)===1,p=(i&1)===0;if(f===1)if(d){if(p)throw new He;o=!0}else{if(!p)throw new He;c=!0}else if(f===-1)if(d){if(p)throw new He;a=!0}else{if(!p)throw new He;s=!0}else if(f===0){if(d){if(!p)throw new He;r<i?(a=!0,c=!0):(o=!0,s=!0)}else if(p)throw new He}else throw new He;if(a){if(o)throw new He;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new He;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Yf),Aj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sj=function(n){Aj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Hg),Ej=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ev=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G_=function(n){Ej(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var d=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var p=Ev(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var b=(s=void 0,Ev(this.possibleRightPairs)),_=b.next();!_.done;_=b.next()){var I=_.value;if(I.getCount()>1&&e.checkChecksum(m,I))return e.constructResult(m,I)}}catch(C){s={error:C}}finally{try{_&&!_.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}}}catch(C){a={error:C}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new He},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var s=Ev(t),c=s.next();!c.done;c=s.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),o=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new un,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var c=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;c+=(s&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Fa(o.toString(),null,0,[d[0],d[1],p[0],p[1]],jt.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),s=this.parseFoundFinderPattern(t,i,r,o),c=a==null?null:a.get(Mr.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;r&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new Dt(f,i))}var d=this.decodeDataCharacter(t,s,!0),p=this.decodeDataCharacter(t,s,!1);return new Sj(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Mi.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Mi.recordPattern(t,r.getStartEnd()[1]+1,a);for(var s=0,c=a.length-1;s<c;s++,c--){var f=a[s];a[s]=a[c],a[c]=f}}for(var d=i?16:15,p=Wn.sum(new Int32Array(a))/d,g=this.getOddCounts(),m=this.getEvenCounts(),b=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var I=a[s]/p,C=Math.floor(I+.5);C<1?C=1:C>8&&(C=8);var D=Math.floor(s/2);(s&1)===0?(g[D]=C,b[D]=I-C):(m[D]=C,_[D]=I-C)}this.adjustOddEvenCounts(i,d);for(var B=0,q=0,s=g.length-1;s>=0;s--)q*=9,q+=g[s],B+=g[s];for(var Y=0,H=0,s=m.length-1;s>=0;s--)Y*=9,Y+=m[s],H+=m[s];var P=q+3*Y;if(i){if((B&1)!==0||B>12||B<4)throw new He;var S=(12-B)/2,R=e.OUTSIDE_ODD_WIDEST[S],M=9-R,T=sh.getRSSvalue(g,R,!1),N=sh.getRSSvalue(m,M,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[S],F=e.OUTSIDE_GSUM[S];return new Hg(T*L+N+F,P)}else{if((H&1)!==0||H>10||H<4)throw new He;var S=(10-H)/2,R=e.INSIDE_ODD_WIDEST[S],M=9-R,T=sh.getRSSvalue(g,R,!0),N=sh.getRSSvalue(m,M,!1),X=e.INSIDE_ODD_TOTAL_SUBSET[S],F=e.INSIDE_GSUM[S];return new Hg(N*X+T+F,P)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,s=0;s<a&&(o=!t.get(s),r!==o);)s++;for(var c=0,f=s,d=s;d<a;d++)if(t.get(d)!==o)i[c]++;else{if(c===3){if(Yf.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new He},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),s=a[0]-1;s>=0&&o!==t.get(s);)s--;s++;var c=a[0]-s,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);Sr.arraycopy(f,0,d,1,f.length-1),d[0]=c;var p=this.parseFinderValue(d,e.FINDER_PATTERNS),g=s,m=a[1];return i&&(g=t.getSize()-1-g,m=t.getSize()-1-m),new SS(p,[s,a[1]],g,m,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Wn.sum(new Int32Array(this.getOddCounts())),a=Wn.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,c=!1,f=!1;t?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(c=!0));var d=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(d===1)if(p){if(g)throw new He;s=!0}else{if(!g)throw new He;f=!0}else if(d===-1)if(p){if(g)throw new He;o=!0}else{if(!g)throw new He;c=!0}else if(d===0){if(p){if(!g)throw new He;i<a?(o=!0,f=!0):(s=!0,c=!0)}else if(g)throw new He}else throw new He;if(o){if(s)throw new He;Yf.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Yf.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new He;Yf.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Yf.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Yf),Cj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),z0=function(n){Cj(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Mr.POSSIBLE_FORMATS):null,a=t&&t.get(Mr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Mr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(jt.EAN_13)||i.includes(jt.UPC_A)||i.includes(jt.EAN_8)||i.includes(jt.UPC_E))&&r.readers.push(new Sv(t)),i.includes(jt.CODE_39)&&r.readers.push(new M_(a,o)),i.includes(jt.CODE_93)&&r.readers.push(new j_),i.includes(jt.CODE_128)&&r.readers.push(new L_),i.includes(jt.ITF)&&r.readers.push(new B_),i.includes(jt.CODABAR)&&r.readers.push(new YM),i.includes(jt.RSS_14)&&r.readers.push(new G_),i.includes(jt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new _j))),r.readers.length===0&&(r.readers.push(new Sv(t)),r.readers.push(new M_),r.readers.push(new j_),r.readers.push(new Sv(t)),r.readers.push(new L_),r.readers.push(new B_),r.readers.push(new G_)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new He},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Mi),Ij=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Ij(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new z0(r),t,r)||this}return e})(Bh);var $_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jn=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Yn=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Tj=function(){function n(e,t,r,i,a,o){var s,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,d=o.getECCodewords(),p=o.getECBlocks();try{for(var g=$_(p),m=g.next();!m.done;m=g.next()){var b=m.value;f+=b.getCount()*(b.getDataCodewords()+d)}}catch(_){s={error:_}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new mt;try{for(var a=$_(n.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new mt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Jn(5,new Yn(1,3))),new n(2,12,12,10,10,new Jn(7,new Yn(1,5))),new n(3,14,14,12,12,new Jn(10,new Yn(1,8))),new n(4,16,16,14,14,new Jn(12,new Yn(1,12))),new n(5,18,18,16,16,new Jn(14,new Yn(1,18))),new n(6,20,20,18,18,new Jn(18,new Yn(1,22))),new n(7,22,22,20,20,new Jn(20,new Yn(1,30))),new n(8,24,24,22,22,new Jn(24,new Yn(1,36))),new n(9,26,26,24,24,new Jn(28,new Yn(1,44))),new n(10,32,32,14,14,new Jn(36,new Yn(1,62))),new n(11,36,36,16,16,new Jn(42,new Yn(1,86))),new n(12,40,40,18,18,new Jn(48,new Yn(1,114))),new n(13,44,44,20,20,new Jn(56,new Yn(1,144))),new n(14,48,48,22,22,new Jn(68,new Yn(1,174))),new n(15,52,52,24,24,new Jn(42,new Yn(2,102))),new n(16,64,64,14,14,new Jn(56,new Yn(2,140))),new n(17,72,72,16,16,new Jn(36,new Yn(4,92))),new n(18,80,80,18,18,new Jn(48,new Yn(4,114))),new n(19,88,88,20,20,new Jn(56,new Yn(4,144))),new n(20,96,96,22,22,new Jn(68,new Yn(4,174))),new n(21,104,104,24,24,new Jn(56,new Yn(6,136))),new n(22,120,120,18,18,new Jn(68,new Yn(6,175))),new n(23,132,132,20,20,new Jn(62,new Yn(8,163))),new n(24,144,144,22,22,new Jn(62,new Yn(8,156),new Yn(2,155))),new n(25,8,18,6,16,new Jn(7,new Yn(1,5))),new n(26,8,32,6,14,new Jn(11,new Yn(1,10))),new n(27,12,26,10,24,new Jn(14,new Yn(1,16))),new n(28,12,36,10,16,new Jn(18,new Yn(1,22))),new n(29,16,36,14,16,new Jn(24,new Yn(1,32))),new n(30,16,48,14,22,new Jn(28,new Yn(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),Rj=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new mt;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new oc(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return Tj.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,c=!1,f=!1,d=!1;do if(r===a&&i===0&&!s)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,s=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!c)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(o&7)===0&&!f)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(o&7)===4&&!d)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,d=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new mt;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Bt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,s=r/a|0,c=o*i,f=s*a,d=new oc(f,c),p=0;p<o;++p)for(var g=p*i,m=0;m<s;++m)for(var b=m*a,_=0;_<i;++_)for(var I=p*(i+2)+1+_,C=g+_,D=0;D<a;++D){var B=m*(a+2)+1+D;if(e.get(B,I)){var q=b+D;d.set(q,C)}}return d},n}(),Y_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,s=t.getECBlocks(),c=0,f=s.getECBlocks();try{for(var d=Y_(f),p=d.next();!p.done;p=d.next()){var g=p.value;c+=g.getCount()}}catch(F){r={error:F}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var m=new Array(c),b=0;try{for(var _=Y_(f),I=_.next();!I.done;I=_.next())for(var g=I.value,C=0;C<g.getCount();C++){var D=g.getDataCodewords(),B=s.getECCodewords()+D;m[b++]=new n(D,new Uint8Array(B))}}catch(F){a={error:F}}finally{try{I&&!I.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}for(var q=m[0].codewords.length,Y=q-s.getECCodewords(),H=Y-1,P=0,C=0;C<H;C++)for(var S=0;S<b;S++)m[S].codewords[C]=e[P++];for(var R=t.getVersionNumber()===24,M=R?8:b,S=0;S<M;S++)m[S].codewords[Y-1]=e[P++];for(var T=m[0].codewords.length,C=Y;C<T;C++)for(var S=0;S<b;S++){var N=R?(S+8)%b:S,L=R&&N>7?C-1:C;m[N].codewords[L]=e[P++]}if(P!==e.length)throw new Bt;return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),IS=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Bt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,s=e<o?e:o,c=o-s,f=255>>8-s<<c;t=(a[i]&f)>>c,e-=s,r+=s,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(a[i]&f)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Di;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Di||(Di={}));var Dj=function(){function n(){}return n.decode=function(e){var t=new IS(e),r=new un,i=new un,a=new Array,o=Di.ASCII_ENCODE;do if(o===Di.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Di.C40_ENCODE:this.decodeC40Segment(t,r);break;case Di.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Di.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Di.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Di.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new mt}o=Di.ASCII_ENCODE}while(o!==Di.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new jm(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new mt;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Di.ASCII_ENCODE;if(a===129)return Di.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Di.C40_ENCODE;case 231:return Di.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Di.ANSIX12_ENCODE;case 239:return Di.TEXT_ENCODE;case 240:return Di.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new mt;break}}while(e.available()>0);return Di.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new mt;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new mt}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new mt}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new mt;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new mt}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),a=0}else throw new mt;break;default:throw new mt}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new mt;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new mt;for(var s=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new mt;s[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(s);try{t.append(As.decode(s,kn.ISO88591))}catch(f){throw new D1("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),Oj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kj=function(){function n(){this.rsDecoder=new Bm(bo.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new Rj(e),a=i.getVersion(),o=i.readCodewords(),s=Nj.getDataBlocks(o,a),c=0;try{for(var f=Oj(s),d=f.next();!d.done;d=f.next()){var p=d.value;c+=p.getNumDataCodewords()}}catch(B){t={error:B}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var g=new Uint8Array(c),m=s.length,b=0;b<m;b++){var _=s[b],I=_.getCodewords(),C=_.getNumDataCodewords();this.correctErrors(I,C);for(var D=0;D<C;D++)g[D*m+b]=I[D]}return Dj.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Qi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),Pj=function(){function n(e){this.image=e,this.rectangleDetector=new Iy(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new He;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],s=this.transitionsBetween(r,o)+1,c=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(c&1)===1&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var f=n.sampleGrid(this.image,r,i,a,o,s,c);return new dx(f,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Dt(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Dt(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),s=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),d=o,p=[a,t,r,i];return d>s&&(d=s,p[0]=t,p[1]=r,p[2]=i,p[3]=a),d>c&&(d=c,p[0]=r,p[1]=i,p[2]=a,p[3]=t),d>f&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=n.shiftPoint(r,i,(o+1)*4),c=n.shiftPoint(i,r,(o+1)*4),f=this.transitionsBetween(s,t),d=this.transitionsBetween(c,a);return f<d?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(s+1)*4),f=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(c,a),s=this.transitionsBetween(f,a);var d=new Dt(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),p=new Dt(a.getX()+(t.getX()-r.getX())/(s+1),a.getY()+(t.getY()-r.getY())/(s+1));if(!this.isValid(d))return this.isValid(p)?p:null;if(!this.isValid(p))return d;var g=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),m=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return g>m?d:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,s=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,s*4),f=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(c,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var d=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,d,p),r=n.moveAway(r,d,p),i=n.moveAway(i,d,p),a=n.moveAway(a,d,p);var g,m;return c=n.shiftPoint(t,r,s*4),c=n.shiftPoint(c,a,o*4),g=n.shiftPoint(r,t,s*4),g=n.shiftPoint(g,i,o*4),f=n.shiftPoint(i,a,s*4),f=n.shiftPoint(f,r,o*4),m=n.shiftPoint(a,i,s*4),m=n.shiftPoint(m,t,o*4),[c,g,f,m]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,s){var c=hx.getInstance();return c.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-i)>Math.abs(a-r);if(s){var c=r;r=i,i=c,c=a,a=o,o=c}for(var f=Math.abs(a-r),d=Math.abs(o-i),p=-f/2,g=i<o?1:-1,m=r<a?1:-1,b=0,_=this.image.get(s?i:r,s?r:i),I=r,C=i;I!==a;I+=m){var D=this.image.get(s?C:I,s?I:C);if(D!==_&&(b++,_=D),p+=d,p>0){if(C===o)break;C+=g,p-=f}}return b},n}(),Ny=function(){function n(){this.decoder=new kj}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Mr.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new Pj(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=r.getRawBytes(),c=new Fa(r.getText(),s,8*s.length,i,jt.DATA_MATRIX,Sr.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(da.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!=null&&c.putMetadata(da.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new He;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],c=r[0],f=(c-s+1)/i,d=(o-a+1)/i;if(f<=0||d<=0)throw new He;var p=i/2;a+=p,s+=p;for(var g=new oc(f,d),m=0;m<d;m++)for(var b=a+m*i,_=0;_<f;_++)e.get(s+_*i,b)&&g.set(_,m);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new He;var o=i-e[0];if(o===0)throw new He;return o},n.NO_POINTS=[],n}(),Lj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Lj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ny,t)||this}return e})(Bh);var lh;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(lh||(lh={}));var Mj=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new nl(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Bt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(lh.L,"L",1),n.M=new n(lh.M,"M",0),n.Q=new n(lh.Q,"Q",3),n.H=new n(lh.H,"H",2),n}(),jj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TS=function(){function n(e){this.errorCorrectionLevel=Mj.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return gn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=jj(n.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var f=c.value,d=f[0];if(d===e||d===t)return new n(f[1]);var p=n.numBitsDiffering(e,d);p<a&&(o=f[1],a=p),e!==t&&(p=n.numBitsDiffering(t,d),p<a&&(o=f[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Bj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Be=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=Bj(i),o=a.next();!o.done;o=a.next()){var s=o.value;r+=s.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),pe=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Fj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},td=function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var s=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var d=Fj(f),p=d.next();!p.done;p=d.next()){var g=p.value;s+=g.getCount()*(g.getDataCodewords()+c)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=s}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new mt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new mt}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Bt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=TS.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new oc(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Be(7,new pe(1,19)),new Be(10,new pe(1,16)),new Be(13,new pe(1,13)),new Be(17,new pe(1,9))),new n(2,Int32Array.from([6,18]),new Be(10,new pe(1,34)),new Be(16,new pe(1,28)),new Be(22,new pe(1,22)),new Be(28,new pe(1,16))),new n(3,Int32Array.from([6,22]),new Be(15,new pe(1,55)),new Be(26,new pe(1,44)),new Be(18,new pe(2,17)),new Be(22,new pe(2,13))),new n(4,Int32Array.from([6,26]),new Be(20,new pe(1,80)),new Be(18,new pe(2,32)),new Be(26,new pe(2,24)),new Be(16,new pe(4,9))),new n(5,Int32Array.from([6,30]),new Be(26,new pe(1,108)),new Be(24,new pe(2,43)),new Be(18,new pe(2,15),new pe(2,16)),new Be(22,new pe(2,11),new pe(2,12))),new n(6,Int32Array.from([6,34]),new Be(18,new pe(2,68)),new Be(16,new pe(4,27)),new Be(24,new pe(4,19)),new Be(28,new pe(4,15))),new n(7,Int32Array.from([6,22,38]),new Be(20,new pe(2,78)),new Be(18,new pe(4,31)),new Be(18,new pe(2,14),new pe(4,15)),new Be(26,new pe(4,13),new pe(1,14))),new n(8,Int32Array.from([6,24,42]),new Be(24,new pe(2,97)),new Be(22,new pe(2,38),new pe(2,39)),new Be(22,new pe(4,18),new pe(2,19)),new Be(26,new pe(4,14),new pe(2,15))),new n(9,Int32Array.from([6,26,46]),new Be(30,new pe(2,116)),new Be(22,new pe(3,36),new pe(2,37)),new Be(20,new pe(4,16),new pe(4,17)),new Be(24,new pe(4,12),new pe(4,13))),new n(10,Int32Array.from([6,28,50]),new Be(18,new pe(2,68),new pe(2,69)),new Be(26,new pe(4,43),new pe(1,44)),new Be(24,new pe(6,19),new pe(2,20)),new Be(28,new pe(6,15),new pe(2,16))),new n(11,Int32Array.from([6,30,54]),new Be(20,new pe(4,81)),new Be(30,new pe(1,50),new pe(4,51)),new Be(28,new pe(4,22),new pe(4,23)),new Be(24,new pe(3,12),new pe(8,13))),new n(12,Int32Array.from([6,32,58]),new Be(24,new pe(2,92),new pe(2,93)),new Be(22,new pe(6,36),new pe(2,37)),new Be(26,new pe(4,20),new pe(6,21)),new Be(28,new pe(7,14),new pe(4,15))),new n(13,Int32Array.from([6,34,62]),new Be(26,new pe(4,107)),new Be(22,new pe(8,37),new pe(1,38)),new Be(24,new pe(8,20),new pe(4,21)),new Be(22,new pe(12,11),new pe(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Be(30,new pe(3,115),new pe(1,116)),new Be(24,new pe(4,40),new pe(5,41)),new Be(20,new pe(11,16),new pe(5,17)),new Be(24,new pe(11,12),new pe(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Be(22,new pe(5,87),new pe(1,88)),new Be(24,new pe(5,41),new pe(5,42)),new Be(30,new pe(5,24),new pe(7,25)),new Be(24,new pe(11,12),new pe(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Be(24,new pe(5,98),new pe(1,99)),new Be(28,new pe(7,45),new pe(3,46)),new Be(24,new pe(15,19),new pe(2,20)),new Be(30,new pe(3,15),new pe(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Be(28,new pe(1,107),new pe(5,108)),new Be(28,new pe(10,46),new pe(1,47)),new Be(28,new pe(1,22),new pe(15,23)),new Be(28,new pe(2,14),new pe(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Be(30,new pe(5,120),new pe(1,121)),new Be(26,new pe(9,43),new pe(4,44)),new Be(28,new pe(17,22),new pe(1,23)),new Be(28,new pe(2,14),new pe(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Be(28,new pe(3,113),new pe(4,114)),new Be(26,new pe(3,44),new pe(11,45)),new Be(26,new pe(17,21),new pe(4,22)),new Be(26,new pe(9,13),new pe(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Be(28,new pe(3,107),new pe(5,108)),new Be(26,new pe(3,41),new pe(13,42)),new Be(30,new pe(15,24),new pe(5,25)),new Be(28,new pe(15,15),new pe(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Be(28,new pe(4,116),new pe(4,117)),new Be(26,new pe(17,42)),new Be(28,new pe(17,22),new pe(6,23)),new Be(30,new pe(19,16),new pe(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Be(28,new pe(2,111),new pe(7,112)),new Be(28,new pe(17,46)),new Be(30,new pe(7,24),new pe(16,25)),new Be(24,new pe(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Be(30,new pe(4,121),new pe(5,122)),new Be(28,new pe(4,47),new pe(14,48)),new Be(30,new pe(11,24),new pe(14,25)),new Be(30,new pe(16,15),new pe(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Be(30,new pe(6,117),new pe(4,118)),new Be(28,new pe(6,45),new pe(14,46)),new Be(30,new pe(11,24),new pe(16,25)),new Be(30,new pe(30,16),new pe(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Be(26,new pe(8,106),new pe(4,107)),new Be(28,new pe(8,47),new pe(13,48)),new Be(30,new pe(7,24),new pe(22,25)),new Be(30,new pe(22,15),new pe(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Be(28,new pe(10,114),new pe(2,115)),new Be(28,new pe(19,46),new pe(4,47)),new Be(28,new pe(28,22),new pe(6,23)),new Be(30,new pe(33,16),new pe(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Be(30,new pe(8,122),new pe(4,123)),new Be(28,new pe(22,45),new pe(3,46)),new Be(30,new pe(8,23),new pe(26,24)),new Be(30,new pe(12,15),new pe(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Be(30,new pe(3,117),new pe(10,118)),new Be(28,new pe(3,45),new pe(23,46)),new Be(30,new pe(4,24),new pe(31,25)),new Be(30,new pe(11,15),new pe(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Be(30,new pe(7,116),new pe(7,117)),new Be(28,new pe(21,45),new pe(7,46)),new Be(30,new pe(1,23),new pe(37,24)),new Be(30,new pe(19,15),new pe(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Be(30,new pe(5,115),new pe(10,116)),new Be(28,new pe(19,47),new pe(10,48)),new Be(30,new pe(15,24),new pe(25,25)),new Be(30,new pe(23,15),new pe(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Be(30,new pe(13,115),new pe(3,116)),new Be(28,new pe(2,46),new pe(29,47)),new Be(30,new pe(42,24),new pe(1,25)),new Be(30,new pe(23,15),new pe(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Be(30,new pe(17,115)),new Be(28,new pe(10,46),new pe(23,47)),new Be(30,new pe(10,24),new pe(35,25)),new Be(30,new pe(19,15),new pe(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Be(30,new pe(17,115),new pe(1,116)),new Be(28,new pe(14,46),new pe(21,47)),new Be(30,new pe(29,24),new pe(19,25)),new Be(30,new pe(11,15),new pe(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Be(30,new pe(13,115),new pe(6,116)),new Be(28,new pe(14,46),new pe(23,47)),new Be(30,new pe(44,24),new pe(7,25)),new Be(30,new pe(59,16),new pe(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Be(30,new pe(12,121),new pe(7,122)),new Be(28,new pe(12,47),new pe(26,48)),new Be(30,new pe(39,24),new pe(14,25)),new Be(30,new pe(22,15),new pe(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Be(30,new pe(6,121),new pe(14,122)),new Be(28,new pe(6,47),new pe(34,48)),new Be(30,new pe(46,24),new pe(10,25)),new Be(30,new pe(2,15),new pe(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Be(30,new pe(17,122),new pe(4,123)),new Be(28,new pe(29,46),new pe(14,47)),new Be(30,new pe(49,24),new pe(10,25)),new Be(30,new pe(24,15),new pe(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Be(30,new pe(4,122),new pe(18,123)),new Be(28,new pe(13,46),new pe(32,47)),new Be(30,new pe(48,24),new pe(14,25)),new Be(30,new pe(42,15),new pe(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Be(30,new pe(20,117),new pe(4,118)),new Be(28,new pe(40,47),new pe(7,48)),new Be(30,new pe(43,24),new pe(22,25)),new Be(30,new pe(10,15),new pe(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Be(30,new pe(19,118),new pe(6,119)),new Be(28,new pe(18,47),new pe(31,48)),new Be(30,new pe(34,24),new pe(34,25)),new Be(30,new pe(20,15),new pe(61,16)))],n}(),$i;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})($i||($i={}));var X_=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[$i.DATA_MASK_000,new n($i.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[$i.DATA_MASK_001,new n($i.DATA_MASK_001,function(e,t){return(e&1)===0})],[$i.DATA_MASK_010,new n($i.DATA_MASK_010,function(e,t){return t%3===0})],[$i.DATA_MASK_011,new n($i.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[$i.DATA_MASK_100,new n($i.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[$i.DATA_MASK_101,new n($i.DATA_MASK_101,function(e,t){return e*t%6===0})],[$i.DATA_MASK_110,new n($i.DATA_MASK_110,function(e,t){return e*t%6<3})],[$i.DATA_MASK_111,new n($i.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),Uj=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new mt;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=TS.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new mt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return td.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var s=td.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(s=td.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new mt},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=X_.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),c=0,f=0,d=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=o?i-1-g:g,b=0;b<2;b++)a.get(p-b,m)||(d++,f<<=1,this.bitMatrix.get(p-b,m)&&(f|=1),d===8&&(s[c++]=f,d=0,f=0));o=!o}if(c!==t.getTotalCodewords())throw new mt;return s},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=X_.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),K_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,s;if(e.length!==t.getTotalCodewords())throw new Bt;var c=t.getECBlocksForLevel(r),f=0,d=c.getECBlocks();try{for(var p=K_(d),g=p.next();!g.done;g=p.next()){var m=g.value;f+=m.getCount()}}catch(L){i={error:L}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var b=new Array(f),_=0;try{for(var I=K_(d),C=I.next();!C.done;C=I.next())for(var m=C.value,D=0;D<m.getCount();D++){var B=m.getDataCodewords(),q=c.getECCodewordsPerBlock()+B;b[_++]=new n(B,new Uint8Array(q))}}catch(L){o={error:L}}finally{try{C&&!C.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}for(var Y=b[0].codewords.length,H=b.length-1;H>=0;){var P=b[H].codewords.length;if(P===Y)break;H--}H++;for(var S=Y-c.getECCodewordsPerBlock(),R=0,D=0;D<S;D++)for(var M=0;M<_;M++)b[M].codewords[D]=e[R++];for(var M=H;M<_;M++)b[M].codewords[S]=e[R++];for(var T=b[0].codewords.length,D=S;D<T;D++)for(var M=0;M<_;M++){var N=M<H?D:D+1;b[M].codewords[N]=e[R++]}return b},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),bs;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(bs||(bs={}));var Tr=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Bt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(bs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(bs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(bs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(bs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(bs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(bs.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(bs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(bs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(bs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(bs.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),Vj=function(){function n(){}return n.decode=function(e,t,r,i){var a=new IS(e),o=new un,s=new Array,c=-1,f=-1;try{var d=null,p=!1,g=void 0;do{if(a.available()<4)g=Tr.TERMINATOR;else{var m=a.readBits(4);g=Tr.forBits(m)}switch(g){case Tr.TERMINATOR:break;case Tr.FNC1_FIRST_POSITION:case Tr.FNC1_SECOND_POSITION:p=!0;break;case Tr.STRUCTURED_APPEND:if(a.available()<16)throw new mt;c=a.readBits(8),f=a.readBits(8);break;case Tr.ECI:var b=n.parseECIValue(a);if(d=Pi.getCharacterSetECIByValue(b),d===null)throw new mt;break;case Tr.HANZI:var _=a.readBits(4),I=a.readBits(g.getCharacterCountBits(t));_===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,I);break;default:var C=a.readBits(g.getCharacterCountBits(t));switch(g){case Tr.NUMERIC:n.decodeNumericSegment(a,o,C);break;case Tr.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,C,p);break;case Tr.BYTE:n.decodeByteSegment(a,o,C,d,s,i);break;case Tr.KANJI:n.decodeKanjiSegment(a,o,C);break;default:throw new mt}break}}while(g!==Tr.TERMINATOR)}catch{throw new mt}return new jm(e,o.toString(),s.length===0?null:s,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new mt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,r--}try{t.append(As.decode(i,kn.GB2312))}catch(c){throw new mt(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new mt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,r--}try{t.append(As.decode(i,kn.SHIFT_JIS))}catch(c){throw new mt(c)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new mt;for(var s=new Uint8Array(r),c=0;c<r;c++)s[c]=e.readBits(8);var f;i===null?f=kn.guessEncoding(s,o):f=i.getName();try{t.append(As.decode(s,f))}catch(d){throw new mt(d)}a.push(s)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new mt;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new mt;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new mt;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new mt;var i=e.readBits(10);if(i>=1e3)throw new mt;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new mt;var a=e.readBits(7);if(a>=100)throw new mt;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new mt;var o=e.readBits(4);if(o>=10)throw new mt;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new mt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),RS=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),Q_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qj=function(){function n(){this.rsDecoder=new Bm(bo.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(oc.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new Uj(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new RS(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,s=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),d=zj.getDataBlocks(f,s,c),p=0;try{for(var g=Q_(d),m=g.next();!m.done;m=g.next()){var b=m.value;p+=b.getNumDataCodewords()}}catch(H){r={error:H}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var _=new Uint8Array(p),I=0;try{for(var C=Q_(d),D=C.next();!D.done;D=C.next()){var b=D.value,B=b.getCodewords(),q=b.getNumDataCodewords();this.correctErrors(B,q);for(var Y=0;Y<q;Y++)_[I++]=B[Y]}}catch(H){a={error:H}}finally{try{D&&!D.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}return Vj.decode(_,s,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Qi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),Hj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wj=function(n){Hj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(Dt),Gj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$j=function(){function n(e,t,r,i,a,o,s){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),s=this.image,c=0;c<t;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<i&&!s.get(d,f);)d++;for(var p=0;d<i;){if(s.get(d,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,d);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;d++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new He},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=e;c>=0&&a.get(t,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c)&&s[1]<=r;)s[1]++,c++;if(c===o||s[1]>r)return NaN;for(;c<o&&!a.get(t,c)&&s[2]<=r;)s[2]++,c++;if(s[2]>r)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],s=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var d=Gj(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.aboutEquals(f,c,s))return g.combineEstimate(c,s,f)}}catch(b){i={error:b}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var m=new Wj(s,c,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},n}(),Yj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xj=function(n){Yj(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,s=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,c,a)},e}(Dt),Kj=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),I0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qj=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Mr.TRY_HARDER)!==void 0,r=e!=null&&e.get(Mr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*n.MAX_MODULES));(s<n.MIN_SKIP||t)&&(s=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=s-1;d<a&&!c;d+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,d))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,d,g,r);if(m===!0)if(s=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var b=this.findRowSkip();b>f[2]&&(d+=b-f[2]-s,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,d,o,r);m===!0&&(s=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return Dt.orderBestPatterns(_),new Kj(_)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var c=s.getHeight(),f=s.getWidth();for(o=1;e+o<c&&t+o<f&&s.get(t+o,e+o);)a[2]++,o++;if(e+o>=c||t+o>=f)return!1;for(;e+o<c&&t+o<f&&!s.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=c||t+o>=f||a[3]>=r)return!1;for(;e+o<c&&t+o<f&&s.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(t,c)&&s[3]<r;)s[3]++,c++;if(c===o||s[3]>=r)return NaN;for(;c<o&&a.get(t,c)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(c,t);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,t)&&s[3]<r;)s[3]++,c++;if(c===o||s[3]>=r)return NaN;for(;c<o&&a.get(c,t)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),s=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var c=a/7,f=!1,d=this.possibleCenters,p=0,g=d.length;p<g;p++){var m=d[p];if(m.aboutEquals(c,s,o)){d[p]=m.combineEstimate(s,o,c),f=!0;break}}if(!f){var b=new Xj(o,s,c);d.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=I0(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=n.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,s=this.possibleCenters.length;try{for(var c=I0(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=n.CENTER_QUORUM&&(a++,o+=d.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/s,g=0;try{for(var m=I0(this.possibleCenters),b=m.next();!b.done;b=m.next()){var d=b.value;g+=Math.abs(d.getEstimatedModuleSize()-p)}}catch(_){r={error:_}}finally{try{b&&!b.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return g<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new He;var o=this.possibleCenters,s;if(a>3){var c=0,f=0;try{for(var d=I0(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value,m=g.getEstimatedModuleSize();c+=m,f+=m*m}}catch(Y){e={error:Y}}finally{try{p&&!p.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}s=c/a;var b=Math.sqrt(f/a-s*s);o.sort(function(Y,H){var P=Math.abs(H.getEstimatedModuleSize()-s),S=Math.abs(Y.getEstimatedModuleSize()-s);return P<S?-1:P>S?1:0});for(var _=Math.max(.2*s,b),I=0;I<o.length&&o.length>3;I++){var C=o[I];Math.abs(C.getEstimatedModuleSize()-s)>_&&(o.splice(I,1),I--)}}if(o.length>3){var c=0;try{for(var D=I0(o),B=D.next();!B.done;B=D.next()){var q=B.value;c+=q.getEstimatedModuleSize()}}catch(H){r={error:H}}finally{try{B&&!B.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}s=c/o.length,o.sort(function(H,P){if(P.getCount()===H.getCount()){var S=Math.abs(P.getEstimatedModuleSize()-s),R=Math.abs(H.getEstimatedModuleSize()-s);return S<R?1:S>R?-1:0}else return P.getCount()-H.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Zj=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Mr.NEED_RESULT_POINT_CALLBACK);var t=new Qj(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new He("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),s=td.getProvisionalVersionForDimension(o),c=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var d=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/c,m=Math.floor(t.getX()+g*(d-t.getX())),b=Math.floor(t.getY()+g*(p-t.getY())),_=4;_<=16;_<<=1)try{f=this.findAlignmentInRegion(a,m,b,_);break}catch(B){if(!(B instanceof He))throw B}var I=n.createTransform(t,r,i,f,o),C=n.sampleGrid(this.image,I,o),D;return f===null?D=[i,t,r]:D=[i,t,r,f],new dx(C,D)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,s,c,f,d;return i!==null?(s=i.getX(),c=i.getY(),f=o-3,d=f):(s=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),f=o,d=o),AS.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,d,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=hx.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=Wn.round(Dt.distance(e,t)/i),o=Wn.round(Dt.distance(e,r)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new He("Dimensions could be not found.")}return s},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,s=e-(r-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*o);return o=1,c<0?(o=t/(t-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,s,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var s=Math.abs(r-e),c=Math.abs(i-t),f=-s/2,d=e<r?1:-1,p=t<i?1:-1,g=0,m=r+d,b=e,_=t;b!==m;b+=d){var I=a?_:b,C=a?b:_;if(g===1===this.image.get(I,C)){if(g===2)return Wn.distance(b,_,e,t);g++}if(f+=c,f>0){if(_===i)break;_+=p,f-=s}}return g===2?Wn.distance(r+d,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),s=Math.min(this.image.getWidth()-1,t+a);if(s-o<e*3)throw new He("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-c<e*3)throw new He("Alignment bottom exceeds estimated module size.");var d=new $j(this.image,o,c,s-o,f-c,e,this.resultPointCallback);return d.find()},n}(),Dy=function(){function n(){this.decoder=new qj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Mr.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new Zj(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof RS&&r.getOther().applyMirroredCorrection(i);var s=new Fa(r.getText(),r.getRawBytes(),void 0,i,jt.QR_CODE,void 0),c=r.getByteSegments();c!==null&&s.putMetadata(da.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&s.putMetadata(da.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(s.putMetadata(da.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(da.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new He;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],c=r[0];if(s>=c||a>=o)throw new He;if(o-a!==c-s&&(c=s+(o-a),c>=e.getWidth()))throw new He;var f=Math.round((c-s+1)/i),d=Math.round((o-a+1)/i);if(f<=0||d<=0)throw new He;if(d!==f)throw new He;var p=Math.floor(i/2);a+=p,s+=p;var g=s+Math.floor((f-1)*i)-c;if(g>0){if(g>p)throw new He;s-=g}var m=a+Math.floor((d-1)*i)-o;if(m>0){if(m>p)throw new He;a-=m}for(var b=new oc(f,d),_=0;_<d;_++)for(var I=a+Math.floor(_*i),C=0;C<f;C++)e.get(s+Math.floor(C*i),I)&&b.set(C,_);return b},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],s=!0,c=0;a<i&&o<r;){if(s!==t.get(a,o)){if(++c===5)break;s=!s}a++,o++}if(a===i||o===r)throw new He;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),Jj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mn=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Wn.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=Jj(e),s=o.next();!s.done;s=o.next()){var c=s.value;i[a++]=c}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Li.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),eB=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),tB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nB=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new eB(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,s=0,c=!1;o<t.getHeight();){var f=n.findVertices(t,o,s);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,s=0;try{for(var d=(r=void 0,tB(a)),p=d.next();!p.done;p=d.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(c=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var s=new Array(4),c=!1,f=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var d=n.findGuardPattern(e,a,i,r,!1,o,f);if(d!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,o,f);if(p!=null)d=p;else{i++;break}}s[0]=new Dt(d[0],i),s[1]=new Dt(d[1],i),c=!0;break}}var g=i+1;if(c){for(var m=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);g<t;g++){var d=n.findGuardPattern(e,p[0],g,r,!1,o,f);if(d!=null&&Math.abs(p[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-d[1])<n.MAX_PATTERN_DRIFT)p=d,m=0;else{if(m>n.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,s[2]=new Dt(p[0],g),s[3]=new Dt(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&Li.fill(s,null),s},n.findGuardPattern=function(e,t,r,i,a,o,s){Li.fillWithin(s,0,s.length,0);for(var c=t,f=0;e.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var d=c,p=0,g=o.length,m=a;d<i;d++){var b=e.get(d,r);if(b!==m)s[p]++;else{if(p===g-1){if(n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=s[0]+s[1],Sr.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,m=!m}}return p===g-1&&n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return 1/0;var c=a/o;r*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=t[d]*c,m=p>g?p-g:g-p;if(m>r)return 1/0;f+=m}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),rB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jf=function(){function n(e,t){if(t.length===0)throw new Bt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Sr.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=rB(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(p){t={error:p}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Sr.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=this.field.add(t[s-o],r[s]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=0;s<r;s++)for(var c=t[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(c,i[f]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Bt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new un,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),iB=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Bt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new _S;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),aB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oB=function(n){aB(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Jf(i,new Int32Array([0])),i.one=new Jf(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Bt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Jf(this,i)},e.PDF417_GF=new e(Mn.NUMBER_OF_CODEWORDS,3),e}(iB),sB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lB=function(){function n(){this.field=oB.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Jf(this.field,e),s=new Int32Array(t),c=!1,f=t;f>0;f--){var d=o.evaluateAt(this.field.exp(f));s[t-f]=d,d!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=sB(r),m=g.next();!m.done;m=g.next()){var b=m.value,_=this.field.exp(e.length-1-b),I=new Jf(this.field,new Int32Array([this.field.subtract(0,_),1]));p=p.multiply(I)}}catch(S){i={error:S}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var C=new Jf(this.field,s),D=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),C,t),B=D[0],q=D[1],Y=this.findErrorLocations(B),H=this.findErrorMagnitudes(q,B,Y),f=0;f<Y.length;f++){var P=e.length-1-this.field.log(Y[f]);if(P<0)throw Qi.getChecksumInstance();e[P]=this.field.subtract(e[P],H[f])}return Y.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,s=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(r/2);){var f=a,d=s;if(a=o,s=c,a.isZero())throw Qi.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var b=o.getDegree()-a.getDegree(),_=this.field.multiply(o.getCoefficient(o.getDegree()),m);p=p.add(this.field.buildMonomial(b,_)),o=o.subtract(a.multiplyByMonomial(b,_))}c=p.multiply(s).subtract(d).negative()}var I=c.getCoefficient(0);if(I===0)throw Qi.getChecksumInstance();var C=this.field.inverse(I),D=c.multiply(C),B=o.multiply(C);return[D,B]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Qi.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new Jf(this.field,a),c=r.length,f=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(r[o]),p=this.field.subtract(0,e.evaluateAt(d)),g=this.field.inverse(s.evaluateAt(d));f[o]=this.field.multiply(p,g)}return f},n}(),Oy=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,s=i==null||a==null;if(o&&s)throw new He;o?(t=new Dt(0,i.getY()),r=new Dt(0,a.getY())):s&&(i=new Dt(e.getWidth()-1,t.getY()),a=new Dt(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var d=new Dt(c.getX(),f);r?i=d:o=d}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new Dt(p.getX(),g);r?a=m:s=m}return new n(this.image,i,a,o,s)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),cB=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),gx=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,s,c,f,d,p){if(o==="%%")return"%";if(t[++r]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=d?parseInt(d.substr(1)):void 0,m;switch(p){case"s":m=t[r];break;case"c":m=t[r][0];break;case"f":m=parseFloat(t[r]).toFixed(o);break;case"p":m=parseFloat(t[r]).toPrecision(o);break;case"e":m=parseFloat(t[r]).toExponential(o);break;case"x":m=parseInt(t[r]).toString(g||16);break;case"d":m=parseFloat(parseInt(t[r],g||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var b=parseInt(c),_=c&&c[0]+""=="0"?"0":" ";m.length<b;)m=s!==void 0?m+_:_+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),uB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NS=function(){function n(e){this.boundingBox=new Oy(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new gx,i=0;try{for(var a=uB(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),fB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dB=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},V0=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var o=fB(this.values.entries()),s=o.next();!s.done;s=o.next()){var c=dB(s.value,2),f=c[0],d=c[1];a(f,d)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return Mn.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),hB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z_=function(n){hB(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Cv(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,d=1,p=0,g=s;g<c;g++)if(r[g]!=null){var m=r[g],b=m.getRowNumber()-f;if(b===0)p++;else if(b===1)d=Math.max(d,p),p=1,f=m.getRowNumber();else if(b<0||m.getRowNumber()>=t.getRowCount()||b>g)r[g]=null;else{var _=void 0;d>2?_=(d-2)*b:_=b;for(var I=_>=g,C=1;C<=_&&!I;C++)I=r[g-C]!=null;I?r[g]=null:(f=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=Cv(this.getCodewords()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,d=o;d<s;d++)if(c[d]!=null){var p=c[d];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[d]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new V0,o=new V0,s=new V0,c=new V0;try{for(var f=Cv(i),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:o.setValue(g*3+1);break;case 1:c.setValue(g/3),s.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(_){t={error:_}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<Mn.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>Mn.MAX_ROWS_IN_BARCODE)return null;var b=new cB(a.getValue()[0],o.getValue()[0],s.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,b),b},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(NS),pB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gB=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Mn.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],s=this.detectionResultColumns[e-1].getCodewords(),c=s;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[t],f[3]=c[t],t>0&&(f[0]=r[t-1],f[4]=s[t-1],f[5]=c[t-1]),t>1&&(f[8]=r[t-2],f[10]=s[t-2],f[11]=c[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=s[t+1],f[7]=c[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=s[t+2],f[13]=c[t+2]);try{for(var d=pB(f),p=d.next();!p.done;p=d.next()){var g=p.value;if(n.adjustRowNumber(o,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new gx,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),mB=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),vB=function(){function n(){}return n.initialize=function(){for(var e=0;e<Mn.SYMBOL_TABLE.length;e++)for(var t=Mn.SYMBOL_TABLE[e],r=t&1,i=0;i<Mn.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Mn.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Mn.BARS_IN_MODULE-i-1]=Math.fround(a/Mn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Wn.sum(e),r=new Int32Array(Mn.BARS_IN_MODULE),i=0,a=0,o=0;o<Mn.MODULES_IN_CODEWORD;o++){var s=t/(2*Mn.MODULES_IN_CODEWORD)+o*t/Mn.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Mn.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Wn.sum(e),r=new Array(Mn.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=Cy.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var s=0;s<n.RATIOS_TABLE.length;s++){for(var c=0,f=n.RATIOS_TABLE[s],d=0;d<Mn.BARS_IN_MODULE;d++){var p=Math.fround(f[d]-r[d]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,o=Mn.SYMBOL_TABLE[s])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Mn.SYMBOL_TABLE.length).map(function(e){return new Array(Mn.BARS_IN_MODULE)}),n}(),yB=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),J_=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),xB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bB=function(n){xB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(So),wB=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new bB;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new ux;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),_B=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AB=function(n){_B(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(So),SB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EB=function(n){SB(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Bt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new AB;i=gn.MAX_VALUE}this.buf=Li.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new ux;this.ensureCapacity(this.count+i),Sr.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Li.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(wB),mr;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(mr||(mr={}));function DS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Wp;function Xu(n){if(typeof Wp>"u"&&(Wp=DS()),Wp===null)throw new Error("BigInt is not supported!");return Wp(n)}function CB(){var n=[];n[0]=Xu(1);var e=Xu(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var IB=function(){function n(){}return n.decode=function(e,t){var r=new un(""),i=Pi.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],s=new yB;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Pi.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,s);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new mt;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw mt.getFormatInstance()}if(r.length()===0)throw mt.getFormatInstance();var c=new jm(null,r.toString(),null,t);return c.setOther(s),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw mt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(gn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new un;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var s=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new un;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new un;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new un;t=n.textCompaction(e,t+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new un;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(gn.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new un;t=n.numericCompaction(e,t+1,g),r.setTimestamp(J_.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new un;t=n.numericCompaction(e,t+1,m),r.setChecksum(gn.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var b=new un;t=n.numericCompaction(e,t+1,b),r.setFileSize(J_.parseLong(b.toString()));break;default:throw mt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw mt.getFormatInstance()}if(s!==-1){var _=t-s;r.isLastSegment()&&_--,r.setOptionalData(Li.copyOfRange(e,s,s+_))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[o]=c,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=mr.ALPHA,o=mr.ALPHA,s=0;s<r;){var c=e[s],f="";switch(a){case mr.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:a=mr.LOWER;break;case n.ML:a=mr.MIXED;break;case n.PS:o=a,a=mr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mr.ALPHA;break}break;case mr.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:o=a,a=mr.ALPHA_SHIFT;break;case n.ML:a=mr.MIXED;break;case n.PS:o=a,a=mr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mr.ALPHA;break}break;case mr.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:a=mr.PUNCT;break;case 26:f=" ";break;case n.LL:a=mr.LOWER;break;case n.AL:a=mr.ALPHA;break;case n.PS:o=a,a=mr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mr.ALPHA;break}break;case mr.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=mr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mr.ALPHA;break}break;case mr.ALPHA_SHIFT:if(a=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=mr.ALPHA;break}break;case mr.PUNCT_SHIFT:if(a=o,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=mr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mr.ALPHA;break}break}f!==""&&i.append(f),s++}},n.byteCompaction=function(e,t,r,i,a){var o=new EB,s=0,c=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(d[s++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Xu(c)>>Xu(8*(5-g))));c=0,s=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=p);for(var m=0;m<s;m++)o.write(d[m]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var b=t[i++];if(b<n.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+b;else switch(b){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Xu(c)>>Xu(8*(5-g))));c=0,s=0}}break}return a.append(As.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var s=e[t++];if(t===e[0]&&(a=!0),s<n.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||s===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Xu(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Xu(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new mt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=DS()?CB():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),T0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TB=function(){function n(){}return n.decode=function(e,t,r,i,a,o,s){for(var c=new Oy(e,t,r,i,a),f=null,d=null,p,g=!0;;g=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,c,t,!0,o,s)),i!=null&&(d=n.getRowIndicatorColumn(e,c,i,!1,o,s)),p=n.merge(f,d),p==null)throw He.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<c.getMinY()||m.getMaxY()>c.getMaxY()))c=m;else break}p.setBoundingBox(c);var b=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(b,d);for(var _=f!=null,I=1;I<=b;I++){var C=_?I:b-I;if(p.getDetectionResultColumn(C)===void 0){var D=void 0;C===0||C===b?D=new Z_(c,C===0):D=new NS(c),p.setDetectionResultColumn(C,D);for(var B=-1,q=B,Y=c.getMinY();Y<=c.getMaxY();Y++){if(B=n.getStartColumn(p,C,Y,_),B<0||B>c.getMaxX()){if(q===-1)continue;B=q}var H=n.detectCodeword(e,c.getMinX(),c.getMaxX(),_,B,Y,o,s);H!=null&&(D.setCodeword(Y,H),q=B,o=Math.min(o,H.getWidth()),s=Math.max(s,H.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Oy.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new gB(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var s=T0(i),c=s.next();!c.done;c=s.next()){var f=c.value;if(o+=a-f,f>0)break}}catch(m){t={error:m}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}for(var d=e.getCodewords(),p=0;o>0&&d[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=d.length-1;g>0&&d[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=T0(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var s=new Z_(t,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var g=n.detectCodeword(e,0,e.getWidth(),i,d,p,a,o);g!=null&&(s.setCodeword(p,g),i?d=g.getStartX():d=g.getEndX())}return s},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Mn.MAX_CODEWORDS_IN_BARCODE)throw He.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[s][c+1].getValue(),d=s*e.getBarcodeColumnCount()+c;f.length===0?r.push(d):f.length===1?i[d]=f[0]:(o.push(d),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Mn.toIntArray(r),Mn.toIntArray(o),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var c=0;c<o.length;c++)t[i[c]]=a[c][o[c]];try{return n.decodeCodewords(t,e,r)}catch(d){var f=d instanceof Qi;if(!f)throw d}if(o.length===0)throw Qi.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Qi.getChecksumInstance()}throw Qi.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++)o[s][c]=new V0;var f=0;try{for(var d=T0(e.getDetectionResultColumns()),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,T0(g.getCodewords())),b=m.next();!b.done;b=m.next()){var _=b.value;if(_!=null){var I=_.getRowNumber();if(I>=0){if(I>=o.length)continue;o[I][f].setValue(_.getValue())}}}}catch(C){i={error:C}}finally{try{b&&!b.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}f++}}catch(C){t={error:C}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,s=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var d=(a=void 0,T0(e.getDetectionResultColumn(t).getCodewords())),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+s*f*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,s,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var f=n.getModuleBitCount(e,t,r,i,a,o);if(f==null)return null;var d,p=Wn.sum(f);if(i)d=a+p;else{for(var g=0;g<f.length/2;g++){var m=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=m}d=a,a=d-p}if(!n.checkCodewordSkew(p,s,c))return null;var b=vB.getDecodedValue(f),_=Mn.getCodeword(b);return _===-1?null:new mB(a,d,n.getCodewordBucketNumber(b),_)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var s=a,c=new Int32Array(8),f=0,d=i?1:-1,p=i;(i?s<r:s>=t)&&f<c.length;)e.get(s,o)===p?(c[f]++,s+=d):(f++,p=!p);return f===c.length||s===(i?r:t)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var s=a,c=i?-1:1,f=0;f<2;f++){for(;(i?s>=t:s<r)&&i===e.get(s,o);){if(Math.abs(a-s)>n.CODEWORD_SKEW_SIZE)return a;s+=c}c=-c,i=!i}return s},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw mt.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=IB.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Qi.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw mt.getFormatInstance();var r=e[0];if(r>e.length)throw mt.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw mt.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new gx,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new lB,n}(),RB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ky=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw He.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof mt||r instanceof Qi?He.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,s=nB.detectMultiple(e,t,r);try{for(var c=RB(s.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,p=TB.decode(s.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),g=new Fa(p.getText(),p.getRawBytes(),void 0,d,jt.PDF_417);g.putMetadata(da.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(da.PDF417_EXTRA_METADATA,m),o.push(g)}}catch(b){i={error:b}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(b){return b})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?gn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Mn.MODULES_IN_CODEWORD/Mn.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Mn.MODULES_IN_CODEWORD/Mn.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Mn.MODULES_IN_CODEWORD/Mn.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Mn.MODULES_IN_CODEWORD/Mn.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),NB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),e4=function(n){NB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(So),t4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DB=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Mr.TRY_HARDER)!==void 0,r=e==null?null:e.get(Mr.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===jt.UPC_A||o===jt.UPC_E||o===jt.EAN_13||o===jt.EAN_8||o===jt.CODABAR||o===jt.CODE_39||o===jt.CODE_93||o===jt.CODE_128||o===jt.ITF||o===jt.RSS_14||o===jt.RSS_EXPANDED});a&&!t&&i.push(new z0(e)),r.includes(jt.QR_CODE)&&i.push(new Dy),r.includes(jt.DATA_MATRIX)&&i.push(new Ny),r.includes(jt.AZTEC)&&i.push(new Ty),r.includes(jt.PDF_417)&&i.push(new ky),a&&t&&i.push(new z0(e))}i.length===0&&(t||i.push(new z0(e)),i.push(new Dy),i.push(new Ny),i.push(new Ty),i.push(new ky),t&&i.push(new z0(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=t4(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new e4("No readers where selected, nothing can be read.");try{for(var i=t4(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof e4)continue}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new He("No MultiFormat Readers were able to detect the code.")},n}(),OB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kB=function(n){OB(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new DB;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Bh),PB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){PB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new ky,t)||this}return e})(Bh);var LB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){LB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Dy,t)||this}return e})(Bh);var Py;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Py||(Py={}));const Gp=Py;var OS=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new sf(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new sf(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Bt("No error correction bytes");var r=e.length-t;if(r<=0)throw new Bt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Sr.arraycopy(e,0,a,0,r);var o=new sf(this.field,a);o=o.multiplyByMonomial(t,1);for(var s=o.divide(i)[1],c=s.getCoefficients(),f=t-c.length,d=0;d<f;d++)e[r+d]=0;Sr.arraycopy(c,0,e,r+f,c.length)},n}(),q0=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=r[o],c=0;c<i-1;c++){var f=s[c];f===s[c+1]&&f===r[o+1][c]&&f===r[o+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var c=r[o];s+6<i&&c[s]===1&&c[s+1]===0&&c[s+2]===1&&c[s+3]===1&&c[s+4]===1&&c[s+5]===0&&c[s+6]===1&&(n.isWhiteHorizontal(c,s-4,s)||n.isWhiteHorizontal(c,s+7,s+11))&&t++,o+6<a&&r[o][s]===1&&r[o+1][s]===0&&r[o+2][s]===1&&r[o+3][s]===1&&r[o+4][s]===1&&r[o+5][s]===0&&r[o+6][s]===1&&(n.isWhiteVertical(r,s,o-4,o)||n.isWhiteVertical(r,s,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=r[o],c=0;c<i;c++)s[c]===1&&t++;var f=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(t*2-f)*10/f);return d*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Bt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var c=0,f=-1,d=0;d<a;d++){var p=t?o[s][d]:o[d][s];p===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),MB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jB=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=MB(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Li.fill(o,e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],s=0,c=this.width;s<c;++s)if(a[s]!==o[s])return!1;return!0},n.prototype.toString=function(){for(var e=new un,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Ly=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new un;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),BB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ir=function(n){BB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(So),n4=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Zi;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],f=c[0],d=c[1];if(r.setBoolean(f,d,s),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,s)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,s)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Zi;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,a,s)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,s=r.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<r.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(n.isEmpty(r.get(f,s))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,t!==255&&q0.getDataMaskBit(t,f,s)&&(d=!d),r.setBoolean(f,s,d)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new Ir("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-gn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Bt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Ly.isValidMaskPattern(t))throw new Ir("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Zi;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Ir("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Ir("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ir;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Ir;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Ir;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var c=0;c!==o;c++){var f=i[c];f>=0&&n.isEmpty(t.get(f,s))&&n.embedPositionAdjustmentPattern(f-2,s-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),FB=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),r4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return q0.applyMaskPenaltyRule1(e)+q0.applyMaskPenaltyRule2(e)+q0.applyMaskPenaltyRule3(e)+q0.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Gp.CHARACTER_SET)!==void 0;a&&(i=r.get(Gp.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new Zi;if(o===Tr.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Pi.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,s)}this.appendModeInfo(o,s);var f=new Zi;this.appendBytes(e,o,f,i);var d;if(r!==null&&r.get(Gp.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Gp.QR_VERSION).toString(),10);d=td.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,s,f,d);if(!this.willFit(g,d,t))throw new Ir("Data too big for requested version")}else d=this.recommendVersion(t,o,s,f);var m=new Zi;m.appendBitArray(s);var b=o===Tr.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(b,d,o,m),m.appendBitArray(f);var _=d.getECBlocksForLevel(t),I=d.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(I,m);var C=this.interleaveWithECBytes(m,d.getTotalCodewords(),I,_.getNumBlocks()),D=new Ly;D.setECLevel(t),D.setMode(o),D.setVersion(d);var B=d.getDimensionForVersion(),q=new jB(B,B),Y=this.chooseMaskPattern(C,t,d,q);return D.setMaskPattern(Y),n4.buildMatrix(C,t,d,Y,q),D.setMatrix(q),D},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,td.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(s,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Pi.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Tr.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(n.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Tr.BYTE}return i?Tr.ALPHANUMERIC:r?Tr.NUMERIC:Tr.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=As.encode(e,Pi.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Ly.NUM_MASK_PATTERNS;s++){n4.buildMatrix(e,t,r,s,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=s)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=td.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Ir("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),s=i-o,c=(e+7)/8;return s>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Ir("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Ir("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Ir("Block ID too large");var s=e%r,c=r-s,f=Math.floor(e/r),d=f+1,p=Math.floor(t/r),g=p+1,m=f-p,b=d-g;if(m!==b)throw new Ir("EC bytes mismatch");if(r!==c+s)throw new Ir("RS blocks mismatch");if(e!==(p+m)*c+(g+b)*s)throw new Ir("Total bytes mismatch");i<c?(a[0]=p,o[0]=m):(a[0]=g,o[0]=b)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,s,c;if(e.getSizeInBytes()!==r)throw new Ir("Number of bits and data bytes does not match");for(var f=0,d=0,p=0,g=new Array,m=0;m<i;++m){var b=new Int32Array(1),_=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,m,b,_);var I=b[0],C=new Uint8Array(I);e.toBytes(8*f,C,0,I);var D=n.generateECBytes(C,_[0]);g.push(new FB(C,D)),d=Math.max(d,I),p=Math.max(p,D.length),f+=b[0]}if(r!==f)throw new Ir("Data bytes does not match offset");for(var B=new Zi,m=0;m<d;++m)try{for(var q=(a=void 0,r4(g)),Y=q.next();!Y.done;Y=q.next()){var H=Y.value,C=H.getDataBytes();m<C.length&&B.appendBits(C[m],8)}}catch(M){a={error:M}}finally{try{Y&&!Y.done&&(o=q.return)&&o.call(q)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var P=(s=void 0,r4(g)),S=P.next();!S.done;S=P.next()){var H=S.value,D=H.getErrorCorrectionBytes();m<D.length&&B.appendBits(D[m],8)}}catch(M){s={error:M}}finally{try{S&&!S.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}if(t!==B.getSizeInBytes())throw new Ir("Interleaving error: "+t+" and "+B.getSizeInBytes()+" differ.");return B},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new OS(bo.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Ir(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Tr.NUMERIC:n.appendNumericBytes(e,r);break;case Tr.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Tr.BYTE:n.append8BitBytes(e,r,i);break;case Tr.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Ir("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),s=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Ir;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Ir;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=As.encode(e,r)}catch(c){throw new Ir(c)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];t.appendBits(s,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=As.encode(e,Pi.SJIS)}catch(p){throw new Ir(p)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,s=r[a+1]&255,c=o<<8&4294967295|s,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Ir("Invalid byte sequence");var d=(f>>8)*192+(f&255);t.appendBits(d,13)}},n.appendECI=function(e,t){t.appendBits(Tr.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Pi.UTF8.getName(),n})();var UB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){UB(e,n);function e(t,r,i,a,o,s,c,f){var d=n.call(this,s,c)||this;if(d.yuvData=t,d.dataWidth=r,d.dataHeight=i,d.left=a,d.top=o,a+s>r||o+c>i)throw new Bt("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(s,c),d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Sr.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Sr.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<r;s++){var c=s*t;Sr.arraycopy(this.yuvData,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var c=s*t,f=0;f<t;f++){var d=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var s=o+t/2,c=o,f=o+t-1;c<s;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},e.prototype.invert=function(){return new fx(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Mm);var zB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){zB(e,n);function e(t,r,i,a,o,s,c){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=c,t.BYTES_PER_ELEMENT===4){for(var d=r*i,p=new Uint8ClampedArray(d),g=0;g<d;g++){var m=t[g],b=m>>16&255,_=m>>7&510,I=m&255;p[g]=(b+_+I)/4&255}f.luminances=p}else f.luminances=t;if(a===void 0&&(f.dataWidth=r),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Bt("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Sr.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Sr.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<r;s++){var c=s*t;Sr.arraycopy(this.luminances,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new fx(this)},e})(Mm);var VB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qB=function(n){VB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Pi),HB=function(){function n(){}return n.ISO_8859_1=Pi.ISO8859_1,n}(),My,WB=301,GB=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=WB);return{LOG:n,ALOG:e}};My=GB([],[]),My.LOG;My.ALOG;var i4;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(i4||(i4={}));var a4=129,kS=230,$B=231,YB=235,XB=236,KB=237,QB=238,ZB=239,JB=240,Iv=254,eF=254,o4="[)>05",s4="[)>06",l4="",sr=0,la=1,Ka=2,Oi=3,Yi=4,ka=5,tF=function(){function n(){}return n.prototype.getEncodingMode=function(){return sr},n.prototype.encode=function(e){var t=ol.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case ka:e.writeCodeword($B),e.signalEncoderChange(ka);return;case la:e.writeCodeword(kS),e.signalEncoderChange(la);return;case Oi:e.writeCodeword(QB),e.signalEncoderChange(Oi);break;case Ka:e.writeCodeword(ZB),e.signalEncoderChange(Ka);break;case Yi:e.writeCodeword(JB),e.signalEncoderChange(Yi);break;default:throw new Error("Illegal mode: "+i)}else ol.isExtendedASCII(r)?(e.writeCodeword(YB),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(ol.isDigit(e)&&ol.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),nF=function(){function n(){}return n.prototype.getEncodingMode=function(){return ka},n.prototype.encode=function(e){var t=new un;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(sr);break}}var a=t.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,kn.getCharAt(a));else if(a<=1555)t.setCharAt(0,kn.getCharAt(Math.floor(a/250)+249)),t.insert(1,kn.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),mx=function(){function n(){}return n.prototype.getEncodingMode=function(){return la},n.prototype.encodeMaximal=function(e){for(var t=new un,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var s=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(t.length()%3);(d===2&&f!==2||d===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(kS),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new un;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new un;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var f=t.length();if(f%3===0){var d=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(sr);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Iv)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Iv),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Iv)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(sr)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new un;return a.append(r),a.append(i),a.toString()},n}(),rF=function(){function n(){}return n.prototype.getEncodingMode=function(){return Yi},n.prototype.encode=function(e){for(var t=new un;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(sr);break}}}t.append(kn.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,s=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(sr)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(kn.getCharAt(e-64)):ol.illegalCharacter(kn.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(r<<18)+(i<<12)+(a<<6)+o,c=s>>16&255,f=s>>8&255,d=s&255,p=new un;return p.append(c),t>=2&&p.append(f),t>=3&&p.append(d),p.toString()},n}(),iF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=function(){function n(e,t,r,i,a,o,s,c){s===void 0&&(s=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var o,s;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=aF(sF),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(t===1&&d.rectangular)&&!(t===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),oF=function(n){iF(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Xn),sF=[new Xn(!1,3,5,8,8,1),new Xn(!1,5,7,10,10,1),new Xn(!0,5,7,16,6,1),new Xn(!1,8,10,12,12,1),new Xn(!0,10,11,14,6,2),new Xn(!1,12,12,14,14,1),new Xn(!0,16,14,24,10,1),new Xn(!1,18,14,16,16,1),new Xn(!1,22,18,18,18,1),new Xn(!0,22,18,16,10,2),new Xn(!1,30,20,20,20,1),new Xn(!0,32,24,16,14,2),new Xn(!1,36,24,22,22,1),new Xn(!1,44,28,24,24,1),new Xn(!0,49,28,22,14,2),new Xn(!1,62,36,14,14,4),new Xn(!1,86,42,16,16,4),new Xn(!1,114,48,18,18,4),new Xn(!1,144,56,20,20,4),new Xn(!1,174,68,22,22,4),new Xn(!1,204,84,24,24,4,102,42),new Xn(!1,280,112,14,14,16,140,56),new Xn(!1,368,144,16,16,16,92,36),new Xn(!1,456,192,18,18,16,114,48),new Xn(!1,576,224,20,20,16,144,56),new Xn(!1,696,272,22,22,16,174,68),new Xn(!1,816,336,24,24,16,136,56),new Xn(!1,1050,408,18,18,36,175,68),new Xn(!1,1304,496,20,20,36,163,62),new oF],lF=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),r=new un,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new un,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Xn.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),cF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uF=function(n){cF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Oi},e.prototype.encode=function(t){for(var r=new un;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=ol.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(sr);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):ol.illegalCharacter(kn.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(eF),t.getNewEncoding()<0&&t.signalEncoderChange(sr)},e}(mx),fF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dF=function(n){fF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ka},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(mx),ol=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=a4+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new mx,s=[new tF,o,new dF,new uF,new rF,new nF],c=new lF(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(o4)&&e.endsWith(l4)?(c.writeCodeword(XB),c.setSkipAtEnd(2),c.pos+=o4.length):e.startsWith(s4)&&e.endsWith(l4)&&(c.writeCodeword(KB),c.setSkipAtEnd(2),c.pos+=s4.length);var f=sr;for(a&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)s[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();d<p&&f!==sr&&f!==ka&&f!==Yi&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append(a4);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Oi&&i===Oi){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return sr}else if(r===Yi&&i===Yi){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return sr}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===sr?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(t+a===e.length){Li.fill(o,0),Li.fill(s,0);var c=this.findMinimums(i,s,gn.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[sr]===c)return sr;if(f===1){if(o[ka]>0)return ka;if(o[Yi]>0)return Yi;if(o[Ka]>0)return Ka;if(o[Oi]>0)return Oi}return la}var d=e.charCodeAt(t+a);if(a++,this.isDigit(d)?i[sr]+=.5:this.isExtendedASCII(d)?(i[sr]=Math.ceil(i[sr]),i[sr]+=2):(i[sr]=Math.ceil(i[sr]),i[sr]++),this.isNativeC40(d)?i[la]+=2/3:this.isExtendedASCII(d)?i[la]+=8/3:i[la]+=4/3,this.isNativeText(d)?i[Ka]+=2/3:this.isExtendedASCII(d)?i[Ka]+=8/3:i[Ka]+=4/3,this.isNativeX12(d)?i[Oi]+=2/3:this.isExtendedASCII(d)?i[Oi]+=13/3:i[Oi]+=10/3,this.isNativeEDIFACT(d)?i[Yi]+=3/4:this.isExtendedASCII(d)?i[Yi]+=17/4:i[Yi]+=13/4,this.isSpecialB256(d)?i[ka]+=4:i[ka]++,a>=4){if(Li.fill(o,0),Li.fill(s,0),this.findMinimums(i,s,gn.MAX_VALUE,o),s[sr]<this.min(s[ka],s[la],s[Ka],s[Oi],s[Yi]))return sr;if(s[ka]<s[sr]||s[ka]+1<this.min(s[la],s[Ka],s[Oi],s[Yi]))return ka;if(s[Yi]+1<this.min(s[ka],s[la],s[Ka],s[Oi],s[sr]))return Yi;if(s[Ka]+1<this.min(s[ka],s[la],s[Yi],s[Oi],s[sr]))return Ka;if(s[Oi]+1<this.min(s[ka],s[la],s[Yi],s[Ka],s[sr]))return Oi;if(s[la]+1<this.min(s[sr],s[ka],s[Yi],s[Ka])){if(s[la]<s[Oi])return la;if(s[la]===s[Oi]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Oi;if(!this.isNativeX12(g))break;p++}return la}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Li.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=gn.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Tv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c4=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return As.encode(e,this.charset)!=null}catch{return!1}},n}(),hF=function(){function n(e,t,r){var i,a,o,s,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(R){return new c4(qB.forName(R))}),this.encoders=[];var d=[];d.push(new c4(HB.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var b=(i=void 0,Tv(d)),_=b.next();!_.done;_=b.next()){var I=_.value,C=e.charAt(g),D=C.charCodeAt(0);if(D===r||I.canEncode(C)){m=!0;break}}}catch(R){i={error:R}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}if(!m)try{for(var B=(o=void 0,Tv(this.ENCODERS)),q=B.next();!q.done;q=B.next()){var I=q.value;if(I.canEncode(e.charAt(g))){d.push(I),m=!0;break}}}catch(R){o={error:R}}finally{try{q&&!q.done&&(s=B.return)&&s.call(B)}finally{if(o)throw o.error}}m||(p=!0)}if(d.length===1&&!p)this.encoders=[d[0]];else{this.encoders=[];var Y=0;try{for(var H=Tv(d),P=H.next();!P.done;P=H.next()){var I=P.value;this.encoders[Y++]=I}}catch(R){c={error:R}}finally{try{P&&!P.done&&(f=H.return)&&f.call(H)}finally{if(c)throw c.error}}}var S=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){S=g;break}}this.priorityEncoderIndex=S}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return As.encode(kn.getCharAt(e),this.encoders[t].name)},n}(),pF=3,gF=function(){function n(e,t,r){this.fnc1=r;var i=new hF(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new un,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var s=e.charAt(i).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(s===o||t.canEncode(s,d))&&this.addEdge(r,i+1,new u4(s,t,d,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new u4[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var s=0;s<t.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][s],r);for(var s=0;s<t.length();s++)a[o-1][s]=null}for(var c=-1,f=gn.MAX_VALUE,s=0;s<t.length();s++)if(a[i][s]!=null){var d=a[i][s];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=s)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=t.encode(g.c,g.encoderIndex),o=m.length-1;o>=0;o--)p.unshift(m[o]&255);var b=g.previous===null?0:g.previous.encoderIndex;b!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var _=[],o=0;o<_.length;o++)_[o]=p[o];return _},n}(),u4=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,s=i===null?0:i.encoderIndex;s!==r&&(o+=pF),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),mF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var f4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(f4||(f4={}));(function(n){mF(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(gF);var vF=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),d4=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),yF=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),xF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vx=function(n){xF(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+gn.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(yF),bF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wF=function(n){bF(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(vx);function _F(n,e,t){return new wF(n,e,t)}function R0(n,e,t){return new vx(n,e,t)}var AF=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],lf=0,Wg=1,ws=2,PS=3,Xl=4,SF=new vx(null,0,0),Rv=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],EF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function CF(n){var e,t;try{for(var r=EF(n),i=r.next();!i.done;i=r.next()){var a=i.value;Li.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[lf][Xl]=0,n[Wg][Xl]=0,n[Wg][lf]=28,n[PS][Xl]=0,n[ws][Xl]=0,n[ws][lf]=15,n}var LS=CF(Li.createInt32Array(6,6)),IF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TF=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Rv[this.mode][e];i=R0(i,a&65535,a>>16),r+=a>>16}var o=e===ws?4:5;return i=R0(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===ws?4:5;return r=R0(r,LS[this.mode][e],i),r=R0(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Xl||this.mode===ws){var a=Rv[r][lf];t=R0(t,a&65535,a>>16),i+=a>>16,r=lf}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new n(t,r,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=_F(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Rv[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Zi;try{for(var s=IF(i),c=s.next();!c.done;c=s.next()){var f=c.value;f.appendTo(o,e)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return kn.format("%s bits=%d bytes=%d",AF[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(SF,lf,0,0),n}();function RF(n){var e=kn.getCharCode(" "),t=kn.getCharCode("."),r=kn.getCharCode(",");n[lf][e]=1;for(var i=kn.getCharCode("Z"),a=kn.getCharCode("A"),o=a;o<=i;o++)n[lf][o]=o-a+2;n[Wg][e]=1;for(var s=kn.getCharCode("z"),c=kn.getCharCode("a"),o=c;o<=s;o++)n[Wg][o]=o-c+2;n[ws][e]=1;for(var f=kn.getCharCode("9"),d=kn.getCharCode("0"),o=d;o<=f;o++)n[ws][o]=o-d+2;n[ws][r]=12,n[ws][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[PS][kn.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)kn.getCharCode(m[g])>0&&(n[Xl][kn.getCharCode(m[g])]=g);return n}var Nv=RF(Li.createInt32Array(5,256)),$p=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NF=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=kn.getCharCode(" "),t=kn.getCharCode(`
`),r=d4.singletonList(TF.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case kn.getCharCode("\r"):a=o===t?2:0;break;case kn.getCharCode("."):a=o===e?3:0;break;case kn.getCharCode(","):a=o===e?4:0;break;case kn.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var s=d4.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=$p(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.updateStateForChar(c,t,a)}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Nv[e.getMode()][i]>0,o=null,s=0;s<=Xl;s++){var c=Nv[s][i];if(c>0){if(o==null&&(o=e.endBinaryShift(t)),!a||s===e.getMode()||s===ws){var f=o.latchAndAppend(s,c);r.push(f)}if(!a&&LS[e.getMode()][s]>=0){var d=o.shiftAndAppend(s,c);r.push(d)}}}if(e.getBinaryShiftByteCount()>0||Nv[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var s=$p(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForPair(f,t,r,o)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Xl,r)),e.getMode()!==Xl&&i.push(a.shiftAndAppend(Xl,r)),r===3||r===4){var o=a.latchAndAppend(ws,16-r).latchAndAppend(ws,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var s=$p(e),c=s.next();!c.done;c=s.next()){var f=c.value,d=!0,p=function(I){if(I.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(I)&&(o=o.filter(function(C){return C!==I}))};try{for(var g=(i=void 0,$p(o)),m=g.next();!m.done;m=g.next()){var b=m.value,_=p(b);if(_==="break")break}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}d&&o.push(f)}}catch(I){t={error:I}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n}(),DF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new NF(e).encode(),a=gn.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,s,c,f,d,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(s=r<0,c=Math.abs(r),c>(s?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Bt(kn.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,s),d=n.WORD_SIZE[c];var g=f-f%d;if(p=n.stuffBits(i,d),p.getSize()+a>g)throw new Bt("Data to large for user specified layer");if(s&&p.getSize()>d*64)throw new Bt("Data to large for user specified layer")}else{d=0,p=null;for(var m=0;;m++){if(m>n.MAX_NB_BITS)throw new Bt("Data too large for an Aztec code");if(s=m<=3,c=s?m+1:m,f=n.totalBitsInLayer(c,s),!(o>f)){(p==null||d!==n.WORD_SIZE[c])&&(d=n.WORD_SIZE[c],p=n.stuffBits(i,d));var g=f-f%d;if(!(s&&p.getSize()>d*64)&&p.getSize()+a<=g)break}}}var b=n.generateCheckWords(p,f,d),_=p.getSize()/d,I=n.generateModeMessage(s,c,_),C=(s?11:14)+c*4,D=new Int32Array(C),B;if(s){B=C;for(var m=0;m<D.length;m++)D[m]=m}else{B=C+1+2*gn.truncDivision(gn.truncDivision(C,2)-1,15);for(var q=gn.truncDivision(C,2),Y=gn.truncDivision(B,2),m=0;m<q;m++){var H=m+gn.truncDivision(m,15);D[q-m-1]=Y-H-1,D[q+m]=Y+H+1}}for(var P=new oc(B),m=0,S=0;m<c;m++){for(var R=(c-m)*4+(s?9:12),M=0;M<R;M++)for(var T=M*2,N=0;N<2;N++)b.get(S+T+N)&&P.set(D[m*2+N],D[m*2+M]),b.get(S+R*2+T+N)&&P.set(D[m*2+M],D[C-1-m*2-N]),b.get(S+R*4+T+N)&&P.set(D[C-1-m*2-N],D[C-1-m*2-M]),b.get(S+R*6+T+N)&&P.set(D[C-1-m*2-M],D[m*2+N]);S+=R*8}if(n.drawModeMessage(P,s,B,I),s)n.drawBullsEye(P,gn.truncDivision(B,2),5);else{n.drawBullsEye(P,gn.truncDivision(B,2),7);for(var m=0,M=0;m<gn.truncDivision(C,2)-1;m+=15,M+=16)for(var N=gn.truncDivision(B,2)&1;N<B;N+=2)P.set(gn.truncDivision(B,2)-M,N),P.set(gn.truncDivision(B,2)+M,N),P.set(N,gn.truncDivision(B,2)-M),P.set(N,gn.truncDivision(B,2)+M)}var L=new vF;return L.setCompact(s),L.setSize(B),L.setLayers(c),L.setCodeWords(_),L.setMatrix(P),L},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Zi;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=gn.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+gn.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,s=new OS(n.getGF(r)),c=gn.truncDivision(t,r),f=n.bitsToWords(e,r,c);s.encode(f,c-o);var d=t%r,p=new Zi;p.appendBits(0,d);try{for(var g=DF(Array.from(f)),m=g.next();!m.done;m=g.next()){var b=m.value;p.appendBits(b,r)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var s=0,c=0;c<t;c++)s|=e.get(a*t+c)?1<<t-c-1:0;i[a]=s}return i},n.getGF=function(e){switch(e){case 4:return bo.AZTEC_PARAM;case 6:return bo.AZTEC_DATA_6;case 8:return bo.AZTEC_DATA_8;case 10:return bo.AZTEC_DATA_10;case 12:return bo.AZTEC_DATA_12;default:throw new Bt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Zi,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var s=0,c=0;c<t;c++)(o+c>=i||e.get(o+c))&&(s|=1<<t-1-c);(s&a)===a?(r.appendBits(s&a,t),o--):(s&a)===0?(r.appendBits(s|1,t),o--):r.appendBits(s,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const OF=({onScanSuccess:n,onClose:e})=>{const t=de.useRef(null),r=de.useRef(null);return de.useEffect(()=>{const i=new kB;return r.current=i,i.decodeFromVideoDevice(null,t.current,a=>{a&&(i.reset(),n(a.getText()))}),()=>{try{i.reset()}catch{}}},[n]),y.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000e6",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[y.jsx("video",{ref:t,style:{width:"90%",maxWidth:"500px",borderRadius:"12px",border:"3px solid white"},muted:!0,autoPlay:!0,playsInline:!0}),y.jsx("button",{onClick:()=>{var i;(i=r.current)==null||i.reset(),e()},style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"סגור סורק"})]})};function kF(n){const e=[...new Set(n)].sort((t,r)=>t-r);for(let t=1;t<=e.length+1;t++)if(!e.includes(t))return t}async function PF(n,e=""){const t=wr(Ot,"items",n),r=await Ih(t);if(!r.exists())throw new Error("Item not found");const{ItemId:i,...a}=r.data();await Th(vn(Ot,"deletedItems"),{...a,deletedAt:pi(),deletedBy:e}),await N1(t)}async function LF(n,e=""){const t=wr(Ot,"deletedItems",n),r=await Ih(t);if(!r.exists())throw new Error("Deleted item not found");const i=r.data(),o=(await er(vn(Ot,"items"))).docs.map(c=>c.data().ItemId).filter(c=>typeof c=="number"),s=kF(o);await ix(wr(vn(Ot,"items")),{...i,ItemId:s,createdAt:pi(),updatedAt:pi(),createdBy:e,updatedBy:e,isActive:!0}),await N1(t)}async function MF(n){const e=tc(vn(Ot,"items"),ll("ItemId","==",Number(n))),t=await er(e);if(!t.empty){const r=t.docs[0];return{id:r.id,...r.data()}}throw new Error("לא נמצא מוצר עם ברקוד זה")}const jF=({item:n,onConfirm:e,onCancel:t})=>{const[r,i]=de.useState(1),a=r>=1&&r<=n.quantity;return y.jsx("div",{className:"modal-overlay",children:y.jsxs("div",{className:"modal-box",dir:"rtl",children:[y.jsx("h3",{style:{textAlign:"center"},children:n.name}),y.jsx("img",{src:n.imageUrl,alt:n.name,style:{width:"100%",maxHeight:"200px",objectFit:"cover"}}),y.jsxs("p",{children:["מזהה מוצר: ",n.ItemId]}),y.jsxs("p",{children:["כמות זמינה: ",n.quantity]}),y.jsxs("div",{style:{marginTop:"1rem"},children:[y.jsx("label",{children:"בחר כמות:"}),y.jsx("input",{type:"number",value:r,min:1,max:n.quantity,onChange:o=>i(+o.target.value),style:{width:"100%",padding:"10px",marginTop:"0.5rem",border:a?"1px solid #ccc":"2px solid red"}}),!a&&y.jsxs("p",{style:{color:"red",marginTop:"0.5rem"},children:["כמות לא תקינה. יש לבחור בין 1 ל־",n.quantity]})]}),y.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between"},children:[y.jsx("button",{className:"btn btn-red",onClick:t,children:"ביטול"}),y.jsx("button",{className:"btn btn-green",onClick:()=>e(r),disabled:!a,children:"אישור"})]})]})})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FF=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),h4=n=>{const e=FF(n);return e.charAt(0).toUpperCase()+e.slice(1)},MS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),UF=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=de.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},c)=>de.createElement("svg",{ref:c,...zF,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:MS("lucide",i),...!a&&!UF(s)&&{"aria-hidden":"true"},...s},[...o.map(([f,d])=>de.createElement(f,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=(n,e)=>{const t=de.forwardRef(({className:r,...i},a)=>de.createElement(VF,{ref:a,iconNode:e,className:MS(`lucide-${BF(h4(n))}`,`lucide-${n}`,r),...i}));return t.displayName=h4(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],HF=cr("arrow-right",qF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],GF=cr("ban",WF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],YF=cr("banknote",$F);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fd=cr("calendar",XF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],QF=cr("chart-column",KF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jS=cr("check",ZF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],O1=cr("chevron-left",JF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],k1=cr("chevron-right",eU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dd=cr("circle-check-big",tU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],P1=cr("circle-x",nU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],iU=cr("clipboard-check",rU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],yx=cr("clock",aU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sU=cr("copy",oU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cU=cr("download",lU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],xx=cr("ellipsis",uU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bx=cr("eye",fU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],BS=cr("map-pin",dU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],pU=cr("message-circle",hU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M5 12h14",key:"1ays0h"}]],mU=cr("minus",gU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ss=cr("package",vU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],nd=cr("phone",yU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bU=cr("plus",xU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],wx=cr("save",wU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],FS=cr("search",_U);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],SU=cr("smartphone",AU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],US=cr("square-pen",EU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zS=cr("trash-2",CU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],VS=cr("user",IU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fm=cr("x",TU),RU=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),b=Math.min(a,m+p-1);b-m+1<p&&(m=Math.max(1,b-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let I=m;I<=b;I++)_.push(I);return b<a&&(b<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return y.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"1.5rem 0",direction:"rtl"},children:[y.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",d," מתוך ",e," מוצרים"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[y.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(k1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return y.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:y.jsx(xx,{size:o?16:20})},`dots-${g}`);const m=p===n;return y.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),y.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(O1,{size:o?16:20})})]})]})},qS=({showCatalogPopup:n,setShowCatalogPopup:e,searchTerm:t,setSearchTerm:r,availableItems:i,toggleSelectItem:a,changeQty:o,form:s,loadingItems:c,setAvailableItems:f,hideBarcodeScanner:d=!1})=>{const[p,g]=de.useState(!1),[m,b]=de.useState(null),[_,I]=de.useState([]),[C,D]=de.useState(1),[B,q]=de.useState(window.innerWidth<=768),Y=B?6:8;if(de.useEffect(()=>{const z=()=>{const ne=window.innerWidth<=768;ne!==B&&(q(ne),D(1))};return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[B]),de.useEffect(()=>{D(1)},[t]),de.useEffect(()=>{n&&(console.log("🔍 Modal נפתח, מאתחל local state עם פריטים:",i.length),I([...i]))},[n,i]),!n)return null;const H=async z=>{console.log("📱 ברקוד נסרק:",z);try{const ne=await MF(z);console.log("🔍 פריט נמצא במאגר:",ne);const se=i.find(oe=>oe.ItemId===ne.ItemId||oe.id===ne.id);if(console.log("🔍 מחפש פריט ברשימה זמינה:",se),!se){console.log("❌ הפריט לא נמצא ברשימת הפריטים הזמינים לתקופה זו"),alert("הפריט לא זמין לתקופת ההזמנה שלך"),g(!1);return}if(_.some(oe=>(oe.ItemId===ne.ItemId||oe.id===ne.id)&&oe.selected)){console.log("⚠️ המוצר כבר נבחר ברשימה"),alert("המוצר כבר נבחר ברשימה"),g(!1);return}se.quantity>0?(console.log("✅ המוצר זמין, פותח מודל אישור"),b(se),g(!1)):(console.log("❌ המוצר לא זמין במלאי לתקופה זו"),alert("המוצר לא זמין במלאי לתקופה זו"),g(!1))}catch(ne){console.error("❌ שגיאה באיתור הפריט:",ne),alert(ne.message),g(!1)}},P=z=>{console.log("🔄 משנה בחירה עבור פריט:",z),I(ne=>ne.map(se=>se.id===z?{...se,selected:!se.selected,selectedQty:se.selected?0:1}:se))},S=(z,ne)=>{let se=parseInt(ne)||0;se>z.quantity&&(se=z.quantity),se<0&&(se=0),console.log("🔢 משנה כמות עבור",z.name,"לכמות:",se),I(Q=>Q.map(oe=>oe.id===z.id?{...oe,selectedQty:se,selected:se>0}:oe))},R=()=>{console.log("💾 מחיל שינויים על state הראשי..."),_.forEach(z=>{const ne=i.find(se=>se.id===z.id);ne&&(z.selected!==ne.selected&&a(z.id),z.selectedQty!==ne.selectedQty&&o(z.id,z.selectedQty))})},M=()=>{console.log("✅ מאשר בחירות ומחיל שינויים..."),R(),e(!1)},T=(z="unknown")=>{console.log("❌ מבטל בחירות וסוגר מודל - מקור:",z),e(!1)},N=z=>{z.target===z.currentTarget?(console.log("🖱️ קליק על overlay - סוגר מודל"),T("overlay-click")):console.log("🖱️ קליק בתוך המודל - לא סוגר")},L=_.filter(z=>z.name.toLowerCase().includes(t.toLowerCase())),F=(C-1)*Y,X=F+Y,V=L.slice(F,X);return console.log("📊 סטטיסטיקות פריטים:",{totalItems:_.length,filteredItems:L.length,currentPageItems:V.length,currentPage:C,itemsPerPage:Y}),y.jsxs("div",{className:"modal-overlay",onClick:N,children:[y.jsxs("div",{className:"modal-box",dir:"rtl",onClick:z=>z.stopPropagation(),children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[!d&&y.jsx("button",{style:{width:"180px"},className:"btn btn-gray",onClick:()=>{console.log("📱 פותח סורק ברקוד..."),g(!0)},children:"סריקת ברקוד"}),y.jsx("input",{type:"text",placeholder:"חיפוש מוצר...",value:t,onChange:z=>{console.log("🔍 חיפוש משתנה ל:",z.target.value),r(z.target.value)},style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px",width:d?"100%":"60%"}})]}),y.jsxs("h3",{style:{textAlign:"center",marginBottom:"1rem"},children:["מוצרים זמינים (",s.pickupDate," → ",s.returnDate,")"]}),t&&y.jsx("div",{style:{background:"#f0f9ff",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9",textAlign:"center"},children:y.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"0.9rem"},children:["🔍 נמצאו ",L.length,' מוצרים עבור "',t,'"']})}),c?y.jsx("p",{style:{textAlign:"center"},children:"טוען מוצרים…"}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"modal-grid",children:V.length===0?y.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:t?`לא נמצאו מוצרים לחיפוש "${t}"`:"לא נמצאו מוצרים זמינים"}):V.map(z=>y.jsxs("div",{className:`item-card ${z.selected?"selected":""}`,children:[y.jsx("img",{src:z.imageUrl||"/no-image-available.png",alt:z.name,className:"item-image"}),y.jsx("h4",{children:z.name}),y.jsxs("p",{children:["זמין: ",z.quantity]}),y.jsxs("p",{children:["מזהה מוצר: ",z.ItemId]}),y.jsxs("div",{style:{margin:"0.5rem 0"},children:[y.jsx("label",{style:{marginBottom:"0.3rem",display:"block"},children:"כמות:"}),y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[y.jsx("button",{onClick:()=>S(z,Math.max(0,z.selectedQty-1)),disabled:z.selectedQty<=0,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:z.selectedQty<=0?"#f5f5f5":"#fff",cursor:z.selectedQty<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:z.selectedQty<=0?"#ccc":"#333"},children:"-"}),y.jsx("input",{type:"number",min:0,max:z.quantity,value:z.selectedQty,onChange:ne=>S(z,ne.target.value),onBlur:ne=>{(parseInt(ne.target.value)||0)>z.quantity&&S(z,z.quantity)},style:{width:"50px",height:"30px",padding:"5px",textAlign:"center",borderRadius:"6px",border:z.selectedQty>z.quantity?"2px solid red":"1px solid #ccc",backgroundColor:z.selectedQty>0?"#e3f2fd":"#fff",fontSize:"14px",fontWeight:"bold",appearance:"textfield",MozAppearance:"textfield"}}),y.jsx("button",{onClick:()=>S(z,Math.min(z.quantity,z.selectedQty+1)),disabled:z.selectedQty>=z.quantity,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:z.selectedQty>=z.quantity?"#f5f5f5":"#fff",cursor:z.selectedQty>=z.quantity?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:z.selectedQty>=z.quantity?"#ccc":"#333"},children:"+"})]}),z.selectedQty>z.quantity&&y.jsxs("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"0.2rem"},children:["מקסימום: ",z.quantity]})]}),y.jsx("button",{onClick:()=>P(z.id),className:`btn ${z.selected?"btn-red":"btn-blue"}`,style:{width:"100%",marginTop:"0.5rem"},children:z.selected?"❌ הסר מוצר":"🛒 בחר מוצר"})]},z.id))}),y.jsx(RU,{currentPage:C,totalItems:L.length,itemsPerPage:Y,onPageChange:D})]}),y.jsxs("div",{className:"modal-actions",children:[y.jsx("button",{className:"btn btn-blue",onClick:()=>{console.log("✅ לחיצה על כפתור אישור"),M()},children:"✔️ אישור"}),y.jsx("button",{className:"btn btn-gray",onClick:()=>{console.log("❌ לחיצה על כפתור ביטול"),T("cancel-button")},children:"❌ ביטול"})]})]}),!d&&p&&y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:z=>{console.log("📱 קליק על רקע הסורק"),z.stopPropagation()},children:y.jsx(OF,{onScanSuccess:H,onClose:()=>{console.log("📱 סורק ברקוד נסגר"),g(!1)}})}),!d&&m&&y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10001,backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:z=>{console.log("📦 קליק על רקע מודל תוצאת סריקה"),z.stopPropagation()},children:y.jsx(jF,{item:m,onCancel:()=>{console.log("❌ מבטל תוצאת סריקה"),b(null),g(!1)},onConfirm:z=>{console.log("✅ מאשר הוספת פריט מסריקה:",m.name,"כמות:",z),I(se=>{const Q=se.map(oe=>oe.id===m.id||oe.ItemId===m.ItemId?(console.log("📝 מעדכן פריט ב-localItems:",oe.name,"כמות חדשה:",z),{...oe,selected:!0,selectedQty:z}):oe);return console.log("📊 localItems אחרי עדכון:",Q.filter(oe=>oe.selected)),Q}),b(null),console.log("🎯 פריט נוסף בהצלחה מסריקה, המודל נשאר פתוח להמשך בחירה");const ne=_.findIndex(se=>se.id===m.id||se.ItemId===m.ItemId);if(ne>=0){const se=Math.ceil((ne+1)/Y);console.log("📄 מעבר לעמוד",se,"כדי להציג את הפריט שנוסף"),D(se)}}})})]})},HS={async findClientByPhone(n){try{if(console.log("🔍 מחפש פרטי לקוח למספר טלפון:",n),!n||n.length<10)return{found:!1};const e=n.replace(/[\s\-]/g,""),t=tc(vn(Ot,"orders"),ll("phone","==",e)),r=await er(t);if(r.empty)return console.log("❌ לא נמצאו הזמנות עבור מספר זה"),{found:!1};const i=r.docs.map(o=>({id:o.id,...o.data()}));i.sort((o,s)=>{var d,p;const c=((d=o.createdAt)==null?void 0:d.seconds)||0;return(((p=s.createdAt)==null?void 0:p.seconds)||0)-c});const a=i[0];return console.log("✅ נמצאה הזמנה:",{clientName:a.clientName,address:a.address,email:a.email}),{found:!0,clientData:{clientName:a.clientName||"",address:a.address||"",email:a.email||""}}}catch(e){return console.error("❌ שגיאה בחיפוש פרטי לקוח:",e),{found:!1}}}},Hc={async getClosedDates(){try{const e=(await er(vn(Ot,"closedDates"))).docs.map(t=>({id:t.id,...t.data()}));return console.log("📅 נטענו ימים סגורים:",e.map(t=>({id:t.id,date:t.date}))),e}catch(n){return console.error("❌ שגיאה בשליפת ימים סגורים:",n),[]}},async addClosedDate(n,e,t="יום סגור"){try{const r=this.formatDateToString(n);if(!r)return console.error("❌ תאריך לא תקין:",n),!1;console.log(`🔒 מוסיף יום סגור: ${r} (מקורי: ${n})`);const i=wr(Ot,"closedDates",r);return await ix(i,{date:r,reason:t,createdBy:e,createdAt:pi()}),console.log("✅ יום סגור נוסף בהצלחה:",r),!0}catch(r){return console.error("❌ שגיאה בהוספת יום סגור:",r),!1}},async removeClosedDate(n){try{const e=this.formatDateToString(n);if(!e)return console.error("❌ תאריך לא תקין:",n),!1;console.log(`🗑️ מסיר יום סגור: ${e} (מקורי: ${n})`);const t=wr(Ot,"closedDates",e);return await N1(t),console.log("✅ יום סגור הוסר בהצלחה:",e),!0}catch(e){return console.error("❌ שגיאה בהסרת יום סגור:",e),!1}},isDateClosed(n,e=null){try{const t=this.formatDateToString(n);if(!t)return console.warn("⚠️ תאריך לא תקין בבדיקת סגירה:",n),!1;if(e&&Array.isArray(e)){const r=e.some(i=>{const a=i.date||i.id,o=a===t;return o&&console.log(`🔒 נמצא יום סגור: ${a} === ${t}`),o});return console.log(`🔍 בודק תאריך ${t} - סגור: ${r}`),r}return console.log(`🔍 בודק תאריך ${t} - אין רשימה סגורים`),!1}catch(t){return console.error("❌ שגיאה בבדיקת תאריך סגור:",t),!1}},formatDateToString(n){try{let e;if(typeof n=="string"){if(n.match(/^\d{4}-\d{2}-\d{2}$/))return console.log(`📅 תאריך כבר בפורמט נכון: ${n}`),n;e=new Date(n+"T00:00:00")}else if(n instanceof Date)e=new Date(n);else return console.warn("⚠️ תאריך לא תקין:",n),"";if(isNaN(e.getTime()))return console.warn("⚠️ תאריך לא תקין אחרי המרה:",n),"";const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=`${t}-${r}-${i}`;return console.log(`📅 המרת תאריך: ${n} → ${a}`),a}catch(e){return console.error("❌ שגיאה בהמרת תאריך:",e,n),""}},canCloseDateValidation(n,e=[]){const t=new Date().toISOString().split("T")[0];return this.formatDateToString(n)<t?{valid:!1,reason:"לא ניתן לסגור תאריכים בעבר"}:e&&e.length>0&&e.filter(a=>a.type!=="השאלה פעילה").length>0?{valid:!1,reason:"קיימים אירועים בתאריך זה"}:{valid:!0,reason:"ניתן לסגירה"}},async addMultipleClosedDates(n,e,t="ימים סגורים"){const r={success:[],failed:[]};console.log("📅 מתחיל להוסיף ימים סגורים:",n);for(const i of n)try{await this.addClosedDate(i,e,t)?r.success.push(i):r.failed.push(i)}catch(a){console.error(`❌ שגיאה בסגירת ${i}:`,a),r.failed.push(i)}return console.log("📊 תוצאות סגירת ימים:",r),r},validateOrderDates(n,e,t){const r={};return n&&this.isDateClosed(n,t)&&(r.pickupDate="🔒 תאריך לקיחת המוצרים חל ביום סגור"),e&&this.isDateClosed(e,t)&&(r.returnDate="🔒 תאריך החזרת המוצרים חל ביום סגור"),{isValid:Object.keys(r).length===0,errors:r}}},NU=({onOrderCreated:n})=>{const[e,t]=de.useState({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[r,i]=de.useState({}),[a,o]=de.useState(!1),[s,c]=de.useState([]),[f,d]=de.useState(!1),[p,g]=de.useState(""),[m,b]=de.useState(!1),[_,I]=de.useState(!1),[C,D]=de.useState([]);de.useEffect(()=>{B()},[]);const B=async()=>{try{const M=await Hc.getClosedDates();D(M),console.log("📅 נטענו ימים סגורים למערכת הזמנות:",M.length)}catch(M){console.error("❌ שגיאה בטעינת ימים סגורים:",M)}},q=async M=>{const{name:T,value:N}=M.target;if(t(L=>({...L,[T]:N})),T==="phone"&&N.length===10&&/^\d{10}$/.test(N)){I(!0);try{const L=await HS.findClientByPhone(N);L.found&&(t(F=>({...F,phone:N,clientName:L.clientData.clientName,address:L.clientData.address,email:L.clientData.email})),alert(`נמצא לקוח קיים! הפרטים מולאו אוטומטית:
שם: ${L.clientData.clientName}
כתובת: ${L.clientData.address}`))}catch(L){console.error("שגיאה בחיפוש פרטי לקוח:",L)}finally{I(!1)}}},Y=()=>{const M={},T=new Date().toISOString().split("T")[0],{pickupDate:N,eventDate:L,returnDate:F}=e;e.volunteerName!==void 0&&!e.volunteerName.trim()&&(M.volunteerName="שדה חובה"),e.clientName.trim()||(M.clientName="שדה חובה"),e.address.trim()||(M.address="שדה חובה"),e.phone.trim()?/^\d{10}$/.test(e.phone)||(M.phone="מספר טלפון לא תקין"):M.phone="שדה חובה",e.eventType.trim()||(M.eventType="שדה חובה"),N||(M.pickupDate="שדה חובה"),L||(M.eventDate="שדה חובה"),F||(M.returnDate="שדה חובה"),N&&N<T&&(M.pickupDate="תאריך לא יכול להיות בעבר"),L&&N&&L<N&&(M.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),F&&N&&F<=N&&(M.returnDate="החזרה אחרי לקיחה");const X=Hc.validateOrderDates(N,F,C);return X.isValid||Object.assign(M,X.errors),console.log("🔍 בדיקת תאריכים:",{pickupDate:N,returnDate:F,closedDatesCount:C.length,validation:X,errors:M}),i(M),Object.keys(M).length===0},H=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את ההזמנה?")&&(t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),i({}),c([]),g(""),o(!1))},P=async()=>{if(!Y())return;const T=(await er(vn(Ot,"orders"))).docs.map(F=>F.data().simpleId).filter(F=>typeof F=="number"),N=T.length>0?Math.max(...T)+1:1,L=s.filter(F=>F.selected).map(F=>({id:F.id,ItemId:F.ItemId,name:F.name,quantity:F.selectedQty,imageUrl:F.imageUrl}));b(!0);try{const F=await Th(vn(Ot,"orders"),{...e,items:L,status:"open",simpleId:N,createdAt:pi()});await Za(F,{orderId:F.id}),t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),c([]),g(""),o(!1),alert(`ההזמנה נשמרה! מס' הזמנה: ${N}`),n&&await n()}catch(F){console.error("שגיאה בשמירה:",F),alert("שגיאה בשמירת ההזמנה")}b(!1)};de.useEffect(()=>{if(!a)return;(async()=>{d(!0);const T=N=>N?N.toDate?N.toDate():typeof N=="string"?new Date(N):N:null;try{const L=(await er(vn(Ot,"items"))).docs.map(oe=>({id:oe.id,...oe.data()})).filter(oe=>oe.isDeleted!==!0),F=await er(vn(Ot,"orders")),X=T(e.pickupDate),V=T(e.returnDate),z=F.docs.map(oe=>oe.data()).filter(oe=>{const W=T(oe.pickupDate),K=T(oe.returnDate);return oe.status==="open"&&W&&K&&X&&V&&K>=X&&W<=V}),ne={};z.forEach(oe=>{var W;(W=oe.items)==null||W.forEach(K=>{ne[K.id]=(ne[K.id]||0)+K.quantity})});const se={};s.forEach(oe=>{oe.selected&&oe.selectedQty>0&&(se[oe.id]={selected:oe.selected,selectedQty:oe.selectedQty})});const Q=L.map(oe=>{const W=(oe.quantity||0)-(ne[oe.id]||0),K=se[oe.id];return{...oe,quantity:W,selected:K?K.selected:!1,selectedQty:K?K.selectedQty:0}}).filter(oe=>oe.quantity>0);c(Q)}catch(N){console.error("שגיאה בחישוב זמינות:",N),c([])}d(!1)})()},[a,e.pickupDate,e.returnDate]);const S=M=>{c(T=>T.map(N=>N.id===M?{...N,selected:!N.selected,selectedQty:N.selected?0:1}:N))},R=(M,T)=>{c(N=>N.map(L=>L.id===M?{...L,selected:T>0,selectedQty:T}:L))};return y.jsxs("div",{className:"new-loan-container",children:[y.jsx(GL,{form:e,errors:r,handleChange:q,handleConfirm:P,handleClear:H,setShowCatalogPopup:o,saving:m,isLoadingClientData:_}),y.jsx(qS,{showCatalogPopup:a,setShowCatalogPopup:o,searchTerm:p,setSearchTerm:g,setAvailableItems:c,availableItems:s,toggleSelectItem:S,changeQty:R,form:e,loadingItems:f})]})},DU=({onRequestSubmitted:n})=>{const{user:e}=cc(),[t,r]=de.useState({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[i,a]=de.useState({}),[o,s]=de.useState(!1),[c,f]=de.useState([]),[d,p]=de.useState(!1),[g,m]=de.useState(""),[b,_]=de.useState(!1),[I,C]=de.useState(!1),[D,B]=de.useState([]);de.useEffect(()=>{q()},[]);const q=async()=>{try{const L=await Hc.getClosedDates();B(L),console.log("📅 נטענו ימים סגורים למערכת בקשות:",L.length)}catch(L){console.error("❌ שגיאה בטעינת ימים סגורים:",L)}},Y=de.useCallback(async L=>{const{name:F,value:X}=L.target;if(r(V=>({...V,[F]:X})),F==="phone"&&X.length===10&&/^\d{10}$/.test(X)){C(!0);try{const V=await HS.findClientByPhone(X);V.found&&(r(z=>({...z,phone:X,clientName:V.clientData.clientName,address:V.clientData.address,email:V.clientData.email})),alert(`נמצא לקוח קיים! הפרטים מולאו אוטומטית:
שם: ${V.clientData.clientName}
כתובת: ${V.clientData.address}`))}catch(V){console.error("שגיאה בחיפוש פרטי לקוח:",V)}finally{C(!1)}}},[]),H=()=>{const L={},F=new Date().toISOString().split("T")[0],{pickupDate:X,eventDate:V,returnDate:z}=t;t.volunteerName!==void 0&&!t.volunteerName.trim()&&(L.volunteerName="שדה חובה"),t.clientName.trim()||(L.clientName="שדה חובה"),t.address.trim()||(L.address="שדה חובה"),t.phone.trim()?/^\d{10}$/.test(t.phone)||(L.phone="מספר טלפון לא תקין"):L.phone="שדה חובה",t.eventType.trim()||(L.eventType="שדה חובה"),X||(L.pickupDate="שדה חובה"),V||(L.eventDate="שדה חובה"),z||(L.returnDate="שדה חובה"),X&&X<F&&(L.pickupDate="תאריך לא יכול להיות בעבר"),V&&X&&V<X&&(L.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),z&&X&&z<=X&&(L.returnDate="החזרה אחרי לקיחה");const ne=Hc.validateOrderDates(X,z,D);return ne.isValid||Object.assign(L,ne.errors),console.log("🔍 בדיקת תאריכים:",{pickupDate:X,returnDate:z,closedDatesCount:D.length,validation:ne,errors:L}),a(L),Object.keys(L).length===0},P=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את הבקשה?")&&(r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),a({}),f([]),m(""),s(!1))},S=async()=>{if(!H())return;const L=c.filter(F=>F.selected).map(F=>({id:F.id,ItemId:F.ItemId,name:F.name,quantity:F.selectedQty,imageUrl:F.imageUrl}));if(L.length===0){alert("יש לבחור לפחות פריט אחד");return}_(!0);try{await Th(vn(Ot,"orderRequests"),{...t,items:L,status:"pending",requestedBy:e.uid,requestedByUsername:e.username,requestedByEmail:e.email,requestedAt:pi(),approvedBy:null,approvedAt:null}),r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),f([]),m(""),s(!1),alert("🎉 הבקשה נשלחה בהצלחה! תקבל עדכון כאשר הבקשה תאושר."),n&&await n()}catch(F){console.error("שגיאה בשליחת הבקשה:",F),alert("שגיאה בשליחת הבקשה. אנא נסה שוב.")}_(!1)},R=Pn.useRef([]);de.useEffect(()=>{if(!o)return;(async()=>{p(!0);const F=X=>X?X.toDate?X.toDate():typeof X=="string"?new Date(X):X:null;try{const V=(await er(vn(Ot,"items"))).docs.map(J=>({id:J.id,...J.data()})).filter(J=>J.isDeleted!==!0),z=await er(vn(Ot,"orders")),ne=F(t.pickupDate),se=F(t.returnDate),Q=z.docs.map(J=>J.data()).filter(J=>{const re=F(J.pickupDate),he=F(J.returnDate);return J.status==="open"&&re&&he&&ne&&se&&he>=ne&&re<=se}),oe={};Q.forEach(J=>{var re;(re=J.items)==null||re.forEach(he=>{oe[he.id]=(oe[he.id]||0)+he.quantity})});const W={};R.current.forEach(J=>{J.selected&&J.selectedQty>0&&(W[J.id]={selected:J.selected,selectedQty:J.selectedQty})});const K=V.map(J=>{const re=(J.quantity||0)-(oe[J.id]||0),he=W[J.id];return{...J,quantity:re,selected:he?he.selected:!1,selectedQty:he?he.selectedQty:0}}).filter(J=>J.quantity>0);R.current=K,f(K)}catch(X){console.error("שגיאה בחישוב זמינות:",X),f([])}p(!1)})()},[o,t.pickupDate,t.returnDate]);const M=L=>{f(F=>{const X=F.map(V=>V.id===L?{...V,selected:!V.selected,selectedQty:V.selected?0:1}:V);return R.current=X,X})},T=(L,F)=>{f(X=>{const V=X.map(z=>z.id===L?{...z,selected:F>0,selectedQty:F}:z);return R.current=V,V})},N=[{label:"מספר פלאפון",name:"phone",required:!0},{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return y.jsxs("div",{className:"new-loan-container",children:[y.jsxs("div",{className:"loan-form-box",children:[y.jsx("h2",{style:{textAlign:"center"},children:"🙏 בקשת השאלה"}),y.jsx("p",{style:{textAlign:"center",color:"#666",marginBottom:"2rem"},children:"מלא את הפרטים והבקשה תישלח לאישור המנהלים"}),N.map(({label:L,name:F,type:X="text",required:V})=>y.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[y.jsxs("label",{htmlFor:F,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[L,V&&" *",I&&(F==="clientName"||F==="address"||F==="email")&&y.jsx("span",{style:{marginRight:"0.5rem",color:"#4caf50"},children:"⏳"})]}),y.jsxs("div",{style:{position:"relative"},children:[y.jsx("input",{id:F,type:X,name:F,value:t[F]||"",onChange:Y,autoComplete:"off",disabled:I&&(F==="clientName"||F==="address"||F==="email"),min:X==="date"?F==="pickupDate"?new Date().toISOString().split("T")[0]:F==="eventDate"||F==="returnDate"?t.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:i[F]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:I&&(F==="clientName"||F==="address"||F==="email")?"#f5f5f5":"white",opacity:I&&(F==="clientName"||F==="address"||F==="email")?.7:1},placeholder:I&&(F==="clientName"||F==="address"||F==="email")?"טוען...":""}),I&&F==="phone"&&y.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#4caf50"},children:y.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e8f5e8",borderTop:"2px solid #4caf50",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),i[F]&&y.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:i[F]})]},F)),y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:y.jsx("button",{className:"btn btn-blue",onClick:()=>s(!0),disabled:I,children:"בחירת מוצרים"})}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[y.jsx("button",{className:"btn btn-green",onClick:S,disabled:b||I,children:b?"שולח בקשה...":"📨 שלח בקשה לאישור"}),y.jsx("button",{className:"btn btn-red",onClick:P,disabled:b||I,children:"ביטול"})]}),y.jsx("style",{jsx:!0,children:`
          @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
          }
        `})]}),y.jsx(qS,{showCatalogPopup:o,setShowCatalogPopup:s,searchTerm:g,setSearchTerm:m,setAvailableItems:f,availableItems:c,toggleSelectItem:M,changeQty:T,form:t,loadingItems:d,hideBarcodeScanner:!0})]})},OU=()=>{const{user:n}=cc(),[e,t]=de.useState([]),[r,i]=de.useState(!0),[a,o]=de.useState(null),[s,c]=de.useState(null),f=async()=>{try{i(!0);const _=(await er(vn(Ot,"orderRequests"))).docs.map(I=>({id:I.id,...I.data()})).filter(I=>I.status==="pending").sort((I,C)=>{var q,Y;const D=((q=I.requestedAt)==null?void 0:q.seconds)||0;return(((Y=C.requestedAt)==null?void 0:Y.seconds)||0)-D});t(_)}catch(b){console.error("שגיאה בטעינת בקשות:",b)}finally{i(!1)}};de.useEffect(()=>{f()},[]);const d=async b=>{if(window.confirm(`האם אתה בטוח שברצונך לאשר את הבקשה של ${b.clientName}?`)){c(b.id),console.log("🚀 מתחיל אישור בקשה:",b);try{console.log("📦 טוען נתוני מלאי והזמנות...");const _=await er(vn(Ot,"items")),I=await er(vn(Ot,"orders")),C=F=>F?F.toDate?F.toDate():typeof F=="string"?new Date(F):F:null,D=C(b.pickupDate),B=C(b.returnDate),q=I.docs.map(F=>F.data()).filter(F=>{const X=C(F.pickupDate),V=C(F.returnDate);return F.status==="open"&&X&&V&&D&&B&&V>=D&&X<=B}),Y={};q.forEach(F=>{var X;(X=F.items)==null||X.forEach(V=>{Y[V.id]=(Y[V.id]||0)+V.quantity})});const H=_.docs.map(F=>({id:F.id,...F.data()}));console.log("🔍 בודק זמינות פריטים...",b.items);let P=!0,S=[];for(const F of b.items){console.log(`🔎 בודק פריט: ${F.name}`,F);const X=H.find(z=>z.id===F.id);if(!X){console.log(`❌ פריט לא נמצא במלאי: ${F.name}`),P=!1,S.push(`${F.name} (לא נמצא במלאי)`);continue}const V=(X.quantity||0)-(Y[F.id]||0);console.log(`📊 ${F.name}: מלאי=${X.quantity}, שמור=${Y[F.id]||0}, זמין=${V}, נדרש=${F.quantity}`),F.quantity>V&&(P=!1,S.push(`${F.name} (זמין: ${V}, נדרש: ${F.quantity})`))}if(!P){console.log("❌ לא כל הפריטים זמינים:",S),alert(`לא ניתן לאשר את הבקשה - פריטים לא זמינים:
${S.join(`
`)}`),c(null);return}console.log("✅ כל הפריטים זמינים, ממשיך ליצירת הזמנה..."),console.log("🔢 יוצר מזהה הזמנה חדש...");const M=(await er(vn(Ot,"orders"))).docs.map(F=>F.data().simpleId).filter(F=>typeof F=="number"),T=M.length>0?Math.max(...M)+1:1;console.log("🎯 מזהה הזמנה חדש:",T),console.log("📝 יוצר הזמנה חדשה..."),console.log("👤 פרטי משתמש:",n);const N={clientName:b.clientName,address:b.address,phone:b.phone,email:b.email,eventType:b.eventType,pickupDate:b.pickupDate,eventDate:b.eventDate,returnDate:b.returnDate,items:b.items,simpleId:T,status:"open",volunteerName:`מאושר ע"י ${(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל"}`,createdAt:pi(),approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",approvedAt:pi(),orderId:null};console.log("💾 שומר הזמנה חדשה:",N);const L=await Th(vn(Ot,"orders"),N);console.log("✅ הזמנה נשמרה עם ID:",L.id),await Za(L,{orderId:L.id}),console.log("🔄 עדכון orderId הושלם"),console.log("📋 מעדכן סטטוס בקשה לאושרה..."),await Za(wr(Ot,"orderRequests",b.id),{status:"approved",approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",approvedAt:pi(),orderId:L.id}),console.log("🎉 תהליך האישור הושלם בהצלחה!"),alert(`✅ הבקשה אושרה בהצלחה! מספר הזמנה: ${T}`),await f()}catch(_){console.error("❌ שגיאה באישור הבקשה:",_),console.error("Stack trace:",_.stack),alert(`שגיאה באישור הבקשה: ${_.message}`)}finally{c(null)}}},p=async b=>{const _=prompt(`מדוע אתה דוחה את הבקשה של ${b.clientName}?
(ההודעה הזו תישלח ללקוח)`);if(_!==null){c(b.id),console.log("🚫 מתחיל דחיית בקשה:",b.id,"סיבה:",_);try{console.log("📝 מעדכן סטטוס בקשה לנדחתה..."),console.log("👤 פרטי משתמש:",n),await Za(wr(Ot,"orderRequests",b.id),{status:"rejected",rejectedBy:(n==null?void 0:n.uid)||"unknown",rejectedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",rejectedAt:pi(),rejectionReason:_}),console.log("✅ בקשה נדחתה בהצלחה"),alert("❌ הבקשה נדחתה. הלקוח יקבל הודעה."),await f()}catch(I){console.error("❌ שגיאה בדחיית הבקשה:",I),console.error("Stack trace:",I.stack),alert(`שגיאה בדחיית הבקשה: ${I.message}`)}finally{c(null)}}},g=b=>new Date(b).toLocaleDateString("he-IL"),m=b=>b?(b.seconds?new Date(b.seconds*1e3):new Date(b)).toLocaleString("he-IL"):"";return r?y.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),y.jsx("p",{children:"טוען בקשות..."})]})}):y.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #f59e0b, #d97706)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[y.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"📋 בקשות להזמנה"}),y.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"בקשות ממתינות לאישור מנהלים"})]}),e.length===0?y.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsx(Ss,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),y.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"אין בקשות ממתינות"}),y.jsx("p",{style:{color:"#9ca3af"},children:"כל הבקשות עובדו או שאין בקשות חדשות"})]}):y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(b=>{var _;return y.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-2px)",I.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[y.jsxs("div",{children:[y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:b.clientName}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["נשלח: ",m(b.requestedAt)]})]}),y.jsx("div",{style:{background:"#fef3c7",color:"#92400e",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:"ממתין"})]}),y.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(VS,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:["מבקש: ",b.requestedByUsername]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(nd,{size:16,style:{color:"#6b7280"}}),y.jsx("span",{style:{fontSize:"0.875rem"},children:b.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(BS,{size:16,style:{color:"#6b7280"}}),y.jsx("span",{style:{fontSize:"0.875rem"},children:b.address})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(fd,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(b.pickupDate)," → ",g(b.returnDate)]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(Ss,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:[(_=b.items)==null?void 0:_.reduce((I,C)=>I+C.quantity,0)," פריטים"]})]})]}),y.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[y.jsxs("button",{onClick:()=>o(b),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[y.jsx(bx,{size:16}),"הצג פרטים"]}),y.jsxs("button",{onClick:()=>d(b),disabled:s===b.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===b.id?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:s===b.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[y.jsx(dd,{size:16}),s===b.id?"מעבד...":"אשר"]}),y.jsxs("button",{onClick:()=>p(b),disabled:s===b.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===b.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===b.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[y.jsx(P1,{size:16}),"דחה"]})]})]},b.id)})}),a&&y.jsx(kU,{request:a,onClose:()=>o(null),onApprove:()=>{o(null),d(a)},onReject:()=>{o(null),p(a)},processing:s===a.id}),y.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},kU=({request:n,onClose:e,onApprove:t,onReject:r,processing:i})=>{var s,c;const a=f=>new Date(f).toLocaleDateString("he-IL"),o=f=>{f.target===f.currentTarget&&e()};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:o,children:y.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:f=>f.stopPropagation(),children:[y.jsxs("div",{style:{background:"#1f2937",color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["פרטי בקשה - ",n.clientName]}),y.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"×"})]}),y.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"פרטי הלקוח"}),y.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"שם לקוח"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"אימייל"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.email||"לא צוין"})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),y.jsxs("span",{style:{fontWeight:"bold"},children:[a(n.pickupDate)," → ",a(n.returnDate)]})]})]})]}),y.jsxs("div",{children:[y.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים מבוקשים (",((s=n.items)==null?void 0:s.length)||0,")"]}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(c=n.items)==null?void 0:c.map((f,d)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsx("img",{src:f.imageUrl||"/no-image-available.png",alt:f.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),y.jsxs("div",{style:{flex:1},children:[y.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:f.name}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["מזהה: ",f.ItemId]})]}),y.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",f.quantity]})]},d))})]})]}),y.jsxs("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center",gap:"1rem"},children:[y.jsxs("button",{onClick:t,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[y.jsx(dd,{size:20}),i?"מעבד...":"אשר בקשה"]}),y.jsxs("button",{onClick:r,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[y.jsx(P1,{size:20}),"דחה בקשה"]}),y.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"סגור"})]})]})})},PU=()=>{const{user:n}=cc(),[e,t]=de.useState([]),[r,i]=de.useState(!0),[a,o]=de.useState(null),[s,c]=de.useState(null),f=async()=>{if(!(n!=null&&n.uid)){console.log("❌ אין משתמש מחובר:",n),i(!1);return}try{i(!0),console.log("🔍 מחפש הזמנות עבור משתמש:",n.uid);const b=tc(vn(Ot,"orderRequests"),ll("requestedBy","==",n.uid));console.log("📋 מבצע שאילתה ל-orderRequests...");const _=await er(b);console.log("📊 נמצאו",_.size,"בקשות");const I=_.docs.map(D=>{const B={id:D.id,type:"request",...D.data()};return console.log("📝 בקשה נמצאה:",B),B});console.log('✅ סה"כ בקשות שנמצאו:',I.length);const C=[...I].sort((D,B)=>{var H,P,S,R;const q=((H=D.requestedAt)==null?void 0:H.seconds)||((P=D.createdAt)==null?void 0:P.seconds)||0;return(((S=B.requestedAt)==null?void 0:S.seconds)||((R=B.createdAt)==null?void 0:R.seconds)||0)-q});console.log("🎯 הזמנות סופיות:",C),t(C)}catch(b){console.error("❌ שגיאה בטעינת ההזמנות:",b),console.error("Stack trace:",b.stack)}finally{i(!1)}},d=async b=>{const _=p(b).text;if(window.confirm(`האם אתה בטוח שברצונך למחוק את ההזמנה?

פרטים:
• לקוח: ${b.clientName}
• סטטוס: ${_}
• תאריך: ${g(b.pickupDate)}

פעולה זו אינה ניתנת לביטול.`)){c(b.id),console.log("🗑️ מוחק הזמנה:",b.id);try{await N1(wr(Ot,"orderRequests",b.id)),console.log("✅ הזמנה נמחקה בהצלחה"),t(I=>I.filter(C=>C.id!==b.id)),alert("🗑️ ההזמנה נמחקה בהצלחה מהרשימה שלך")}catch(I){console.error("❌ שגיאה במחיקת הזמנה:",I),alert(`שגיאה במחיקת ההזמנה: ${I.message}`)}finally{c(null)}}};de.useEffect(()=>{console.log("👤 משתמש השתנה:",n),n!=null&&n.uid?(console.log("🚀 קורא לטעינת הזמנות..."),f()):(console.log("⏳ מחכה למשתמש להיטען..."),i(!1))},[n]);const p=b=>{switch(b.status){case"pending":return{text:"מחכה לאישור",color:"#f59e0b",bgColor:"#fef3c7",icon:y.jsx(yx,{size:16})};case"approved":return{text:"מאושר",color:"#10b981",bgColor:"#d1fae5",icon:y.jsx(dd,{size:16})};case"rejected":return{text:"נדחה",color:"#ef4444",bgColor:"#fee2e2",icon:y.jsx(P1,{size:16})};default:return{text:"לא ידוע",color:"#6b7280",bgColor:"#f3f4f6",icon:y.jsx(Ss,{size:16})}}},g=b=>new Date(b).toLocaleDateString("he-IL"),m=b=>b?(b.seconds?new Date(b.seconds*1e3):new Date(b)).toLocaleString("he-IL"):"";return r?y.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),y.jsx("p",{children:"טוען הזמנות..."})]})}):y.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[y.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"📋 ההזמנות שלי"}),y.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"כל הבקשות וההזמנות שלך במקום אחד"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[y.jsxs("div",{style:{background:"#fef3c7",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fde68a"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#92400e"},children:e.filter(b=>b.status==="pending").length}),y.jsx("div",{style:{color:"#92400e",fontSize:"0.875rem"},children:"מחכות לאישור"})]}),y.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #a7f3d0"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#065f46"},children:e.filter(b=>b.status==="approved").length}),y.jsx("div",{style:{color:"#065f46",fontSize:"0.875rem"},children:"מאושרות"})]}),y.jsxs("div",{style:{background:"#fee2e2",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fecaca"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#991b1b"},children:e.filter(b=>b.status==="rejected").length}),y.jsx("div",{style:{color:"#991b1b",fontSize:"0.875rem"},children:"נדחו"})]}),y.jsxs("div",{style:{background:"#eff6ff",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #dbeafe"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1e40af"},children:e.length}),y.jsx("div",{style:{color:"#1e40af",fontSize:"0.875rem"},children:'סה"כ הזמנות'})]})]}),e.length===0?y.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsx(Ss,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),y.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"אין הזמנות עדיין"}),y.jsx("p",{style:{color:"#9ca3af",marginBottom:"1.5rem"},children:"עדיין לא שלחת בקשות השאלה"}),y.jsx("a",{href:"/request",style:{display:"inline-block",background:"#3b82f6",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",textDecoration:"none",fontWeight:"500"},children:"📝 צור בקשת השאלה ראשונה"})]}):y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(b=>{var I;const _=p(b);return y.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:C=>{C.currentTarget.style.transform="translateY(-2px)",C.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:C=>{C.currentTarget.style.transform="translateY(0)",C.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[y.jsxs("div",{children:[y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:b.clientName}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["נשלח: ",m(b.requestedAt)]})]}),y.jsxs("div",{style:{background:_.bgColor,color:_.color,padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.25rem"},children:[_.icon,_.text]})]}),y.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(nd,{size:16,style:{color:"#6b7280"}}),y.jsx("span",{style:{fontSize:"0.875rem"},children:b.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(BS,{size:16,style:{color:"#6b7280"}}),y.jsx("span",{style:{fontSize:"0.875rem"},children:b.address})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(fd,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(b.pickupDate)," → ",g(b.returnDate)]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(Ss,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:[(I=b.items)==null?void 0:I.reduce((C,D)=>C+D.quantity,0)," פריטים"]})]}),b.status==="rejected"&&b.rejectionReason&&y.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",padding:"0.75rem",marginTop:"0.5rem"},children:[y.jsx("div",{style:{fontSize:"0.75rem",color:"#991b1b",fontWeight:"bold",marginBottom:"0.25rem"},children:"סיבת דחייה:"}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d"},children:b.rejectionReason})]})]}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[y.jsxs("button",{onClick:()=>o(b),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[y.jsx(bx,{size:16}),"הצג פרטים"]}),y.jsxs("button",{onClick:()=>d(b),disabled:s===b.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===b.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===b.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",opacity:s===b.id?.6:1},children:[y.jsx(zS,{size:16}),s===b.id?"מוחק...":"מחק"]})]})]},b.id)})}),a&&y.jsx(LU,{order:a,onClose:()=>o(null)}),y.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},LU=({order:n,onClose:e})=>{var o,s;const t=c=>{switch(c.status){case"pending":return{text:"מחכה לאישור",color:"#f59e0b",bgColor:"#fef3c7",icon:y.jsx(yx,{size:20})};case"approved":return{text:"מאושר",color:"#10b981",bgColor:"#d1fae5",icon:y.jsx(dd,{size:20})};case"rejected":return{text:"נדחה",color:"#ef4444",bgColor:"#fee2e2",icon:y.jsx(P1,{size:20})};default:return{text:"לא ידוע",color:"#6b7280",bgColor:"#f3f4f6",icon:y.jsx(Ss,{size:20})}}},r=c=>new Date(c).toLocaleDateString("he-IL"),i=t(n),a=c=>{c.target===c.currentTarget&&e()};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:a,children:y.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:c=>c.stopPropagation(),children:[y.jsxs("div",{style:{background:i.color,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.icon,y.jsxs("div",{children:[y.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["הזמנה - ",n.clientName]}),y.jsx("p",{style:{fontSize:"0.875rem",margin:"0.25rem 0 0 0",opacity:.9},children:i.text})]})]}),y.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"×"})]}),y.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"פרטי ההזמנה"}),y.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"שם לקוח"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"אימייל"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.email||"לא צוין"})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),y.jsxs("span",{style:{fontWeight:"bold"},children:[r(n.pickupDate)," → ",r(n.returnDate)]})]})]})]}),y.jsxs("div",{children:[y.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים (",((o=n.items)==null?void 0:o.length)||0,")"]}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(s=n.items)==null?void 0:s.map((c,f)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsx("img",{src:c.imageUrl||"/no-image-available.png",alt:c.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),y.jsxs("div",{style:{flex:1},children:[y.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:c.name}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["מזהה: ",c.ItemId]})]}),y.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",c.quantity]})]},f))})]}),n.status==="rejected"&&n.rejectionReason&&y.jsxs("div",{style:{marginTop:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"1rem"},children:[y.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",color:"#991b1b",margin:"0 0 0.5rem 0"},children:"סיבת דחייה:"}),y.jsx("p",{style:{fontSize:"0.875rem",color:"#7f1d1d",margin:0},children:n.rejectionReason})]})]}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center"},children:y.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"סגור"})})]})})},MU=["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],jU=["א","ב","ג","ד","ה","ו","ש"],BU=n=>new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),FU=n=>{const e=new Date(n.getFullYear(),n.getMonth(),1).getDay();return e===0?6:e-1},UU=({currentDate:n,events:e=[],setCurrentDate:t,setSelectedEvents:r,setSelectedDate:i,setShowReport:a,fetchItemsAndOrders:o})=>{const{user:s}=cc(),[c,f]=de.useState([]),[d,p]=de.useState(!1),[g,m]=de.useState(new Set),[b,_]=de.useState(!1),[I,C]=de.useState(new Set);de.useEffect(()=>{D()},[]);const D=async()=>{try{const oe=await Hc.getClosedDates();console.log("📅 ימים סגורים נטענו:",oe.map(W=>({id:W.id,date:W.date}))),f(oe)}catch(oe){console.error("❌ שגיאה בטעינת ימים סגורים:",oe)}},B=()=>{if(!s)return console.log("❌ אין משתמש מחובר"),!1;const oe=s.role==="MainAdmin";return console.log("✅ יש הרשאות מנהל:",oe,"תפקיד:",s.role),oe},q=(oe,W,K)=>{const J=new Date(oe,W,K),re=J.getFullYear(),he=String(J.getMonth()+1).padStart(2,"0"),we=String(J.getDate()).padStart(2,"0");return`${re}-${he}-${we}`},Y=oe=>{if(!Array.isArray(e))return[];const W=q(n.getFullYear(),n.getMonth(),oe);return e.filter(K=>K.date?Hc.formatDateToString(K.date)===W:!1)},H=oe=>{const W=q(n.getFullYear(),n.getMonth(),oe);return Hc.isDateClosed(W,c)},P=oe=>{const W=new Date(n.getFullYear(),n.getMonth(),oe),K=new Date;return K.setHours(0,0,0,0),W.setHours(0,0,0,0),W<K?!1:!Y(oe).some(he=>he.type!=="השאלה פעילה")},S=oe=>{const W=new Date(n.getFullYear(),n.getMonth(),oe),K=new Date;return K.setHours(0,0,0,0),W.setHours(0,0,0,0),W<K},R=oe=>{const W=new Date(n.getFullYear(),n.getMonth(),oe),K=new Date;return W.getDate()===K.getDate()&&W.getMonth()===K.getMonth()&&W.getFullYear()===K.getFullYear()},M=()=>{if(g.size>0)return!0;const oe=new Set(c.map(W=>W.date||W.id));if(oe.size!==I.size)return!0;for(const W of oe)if(!I.has(W))return!0;return!1},T=oe=>{if(d){N(oe);return}const W=Y(oe);W.length>0&&W.every(J=>J.type==="השאלה פעילה")||W.length>0&&(r(W),i(new Date(n.getFullYear(),n.getMonth(),oe)),a(!0))},N=async oe=>{console.log(`🎯 לחיצה על יום ${oe} במצב עריכה`);const W=H(oe);if(console.log(`🔍 היום סגור: ${W}, מצב עריכה: ${d}`),W){const re=q(n.getFullYear(),n.getMonth(),oe);console.log(`🔓 מבטל סגירה של ${re} - עדכון מיידי + נשאר במצב עריכה`),f(he=>{const we=he.filter(xe=>xe.date!==re&&xe.id!==re);return console.log(`📋 עדכון מיידי: הוסרו ${he.length-we.length} ימים`),we}),await L(re),console.log(`✅ סיום טיפול ביום ${oe} - מצב עריכה: ${d}`);return}if(!P(oe)){S(oe)?alert("לא ניתן לסגור תאריכים שכבר עברו"):alert("ניתן לסגור רק ימים ללא אירועים קיימים");return}const K=q(n.getFullYear(),n.getMonth(),oe);console.log(`⭕ מסמן יום לבן ${K} לסגירה`);const J=new Set(g);J.has(K)?(J.delete(K),console.log(`❌ הוסר מהבחירה: ${K}`)):(J.add(K),console.log(`✅ נוסף לבחירה: ${K}`)),m(J),console.log(`📊 סה"כ נבחרו לסגירה: ${J.size} ימים`)},L=async oe=>{try{console.log(`🔓 מבטל סגירה במצב עריכה: ${oe}`),await Hc.removeClosedDate(oe)?(console.log(`✅ הסגירה של ${oe} בוטלה - נשאר במצב עריכה`),await D(),console.log("🔓 יום בוטל מהסגירה - נשאר במצב עריכה")):(await D(),alert("שגיאה בביטול הסגירה"))}catch(W){console.error("❌ שגיאה בביטול סגירת יום:",W),await D(),alert("שגיאה בביטול הסגירה")}},F=()=>{console.log("🔧 מפעיל מצב עריכה"),p(!0),m(new Set);const oe=new Set(c.map(W=>W.date||W.id));C(oe),console.log("✅ מצב עריכה פעיל, נשמר מצב מקורי:",oe)},X=()=>{console.log("❌ מבטל מצב עריכה"),p(!1),m(new Set),C(new Set),console.log("✅ יצאנו ממצב עריכה")},V=async()=>{_(!0);try{if(g.size>0){const oe=Array.from(g);console.log("📅 שומר ימים סגורים:",oe);const W=await Hc.addMultipleClosedDates(oe,s.uid,"יום סגור - נקבע על ידי המנהל");W.success.length>0&&(alert(`✅ ${W.success.length} ימים נסגרו בהצלחה`),await D(),o&&await o()),W.failed.length>0&&alert(`⚠️ ${W.failed.length} ימים לא הצליחו להיסגר`)}else console.log("✅ שינויים כבר בוצעו (ביטול ימים סגורים), מסיים מצב עריכה"),alert("✅ השינויים נשמרו בהצלחה!"),o&&await o();p(!1),m(new Set),C(new Set)}catch(oe){console.error("❌ שגיאה בשמירת שינויים:",oe),alert("שגיאה בשמירת השינויים")}finally{_(!1)}},z=oe=>{const W=Y(oe),K=new Map;return W.forEach(J=>{K.has(J.orderId)||K.set(J.orderId,{...J,allEventsForOrder:W.filter(re=>re.orderId===J.orderId)})}),Array.from(K.values())},ne=BU(n),se=FU(n),Q=[];for(let oe=0;oe<se;oe++)Q.push(y.jsx("div",{className:"day-cell empty"},`empty-${oe}`));for(let oe=1;oe<=ne;oe++){const W=Y(oe),K=z(oe),J=W.filter(Pe=>Pe.type==="השאלה"),re=W.filter(Pe=>Pe.type==="החזרה"),he=W.length>0,we=K.length,xe=H(oe),Ce=P(oe),We=S(oe),qe=R(oe),it=q(n.getFullYear(),n.getMonth(),oe),lt=g.has(it);let vt="day-cell";he&&(vt+=" has-events"),J.length>0&&(vt+=" pickup-day"),re.length>0&&(vt+=" return-day"),xe&&(vt+=" closed-day"),We&&(vt+=" past-day"),qe&&(vt+=" today"),d&&(Ce||xe)&&(vt+=" can-manage"),lt&&(vt+=" selected-for-closure"),Q.push(y.jsxs("div",{className:vt,onClick:()=>T(oe),style:{cursor:d?Ce||xe?"pointer":"not-allowed":W.some(Pe=>Pe.type!=="השאלה פעילה")?"pointer":"default"},children:[y.jsx("span",{className:"day-number",children:oe}),qe&&y.jsx("div",{className:"today-indicator",title:"היום",children:"📅"}),xe&&y.jsx("div",{className:"closed-indicator",title:"יום סגור - במצב עריכה: לחץ לביטול מיידי",children:"🔒"}),d&&(Ce||xe)&&y.jsx("div",{className:"closure-selector",title:xe?"לחץ לביטול מיידי":"לחץ לבחירה לסגירה",children:xe?"🔓":lt?"✅":"⭕"}),!xe&&y.jsxs("div",{className:"event-icons",children:[J.length>0&&y.jsxs("div",{className:"event-tag pickup-tag",title:"איסוף מוצרים",children:["📦 ",J.length>1&&J.length]}),re.length>0&&y.jsxs("div",{className:"event-tag return-tag",title:"החזרת מוצרים",children:["🔄 ",re.length>1&&re.length]})]}),!xe&&we>0&&y.jsx("div",{className:"event-count",title:`${we} הזמנות`,children:we})]},oe))}return y.jsxs("div",{className:"calendar-container",children:[y.jsxs("div",{className:"calendar-header",children:[y.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()-1,1)),children:y.jsx(k1,{size:20})}),y.jsxs("h2",{className:"calendar-title",children:[y.jsx(fd,{size:24})," ",MU[n.getMonth()]," ",n.getFullYear()]}),y.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()+1,1)),children:y.jsx(O1,{size:20})})]}),B()&&y.jsx("div",{className:"calendar-controls",children:d?y.jsxs("div",{className:"edit-controls",children:[y.jsxs("span",{className:"edit-mode-indicator",children:["📝 מצב עריכה: בחר ימים לבנים לסגירה או ימים סגורים לביטול (",g.size," נבחרו)"]}),y.jsxs("div",{className:"edit-buttons",children:[y.jsxs("button",{className:"btn-save",onClick:V,disabled:b||!M(),children:[y.jsx(wx,{size:16}),b?"שומר...":"שמור"]}),y.jsxs("button",{className:"btn-cancel",onClick:X,disabled:b,children:[y.jsx(Fm,{size:16}),"ביטול"]})]})]}):y.jsx("div",{className:"control-buttons",children:y.jsxs("button",{className:"btn-edit-dates",onClick:F,title:"בטל תאריכים",children:[y.jsx(GF,{size:18}),"בטל תאריכים"]})})}),y.jsx("div",{className:"day-names",children:jU.map(oe=>y.jsx("div",{className:"day-name",children:oe},oe))}),y.jsx("div",{className:"calendar-grid",children:Q}),y.jsxs("div",{className:"calendar-footer",children:[y.jsxs("div",{className:"calendar-legend",children:[y.jsx("span",{className:"legend-item",children:"📦 איסוף מוצרים"}),y.jsx("span",{className:"legend-item",children:"🔄 החזרת מוצרים"}),c.length>0&&y.jsxs("span",{className:"legend-item",children:["🔒 ימים סגורים (",c.length,")"]}),d&&y.jsx("span",{className:"legend-item",children:"⭕ זמין לסגירה • 🔓 זמין לביטול"}),y.jsx("span",{className:"legend-item",children:"📅 היום"})]}),y.jsxs("div",{className:"calendar-stats",children:['לחץ על יום עם אירועים כדי לראות פרטים • סה"כ אירועים: ',Array.isArray(e)?e.length:0,c.length>0&&` • ימים סגורים: ${c.length}`]}),(!Array.isArray(e)||e.length===0)&&y.jsx("div",{className:"warning",children:"אין אירועים נטענים - בדוק את החיבור למסד הנתונים"})]})]})},zU=({show:n,selectedDate:e,selectedEvents:t,allItems:r,setShowReport:i,setShowItemsModal:a,setEditItemModal:o,fetchItemsAndOrders:s,onStartReturnInspection:c})=>{if(de.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const f=async b=>{try{return await N1(wr(Ot,"orders",b)),!0}catch(_){throw console.error("Error deleting order:",_),_}},p=(b=>{const _=new Map;return b.forEach(I=>{_.has(I.orderId)||_.set(I.orderId,{orderId:I.orderId,clientName:I.clientName,phone:I.phone,items:I.items,pickupDate:I.pickupDate,returnDate:I.returnDate,events:[]}),_.get(I.orderId).events.push(I)}),Array.from(_.values())})(t),g=async b=>{if(b&&window.confirm("האם אתה בטוח שברצונך למחוק את ההזמנה?"))try{await f(b),await s(),i(!1),alert("ההזמנה נמחקה בהצלחה.")}catch(_){console.error(_),alert("מחיקה נכשלה. נסה שוב.")}},m=b=>{b.target===b.currentTarget&&i(!1)};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,global:!0,children:`
        .modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 32rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
        
        @media (min-width: 768px) {
          .modal-content {
            max-width: 42rem !important;
          }
        }
      `}),y.jsx("div",{className:"modal-overlay",onClick:m,children:y.jsxs("div",{className:"modal-content",dir:"rtl",onClick:b=>b.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx(fd,{size:24}),y.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:["אירועים ליום ",e==null?void 0:e.toLocaleDateString("he-IL")]})]}),y.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),y.jsxs("div",{style:{marginTop:"0.5rem",color:"#bfdbfe"},children:[p.length," הזמנ",p.length!==1?"ות":"ה"]})]}),y.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 200px)"},children:y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:p.map((b,_)=>y.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",background:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[y.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #f3f4f6"},children:[y.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:y.jsxs("div",{style:{flex:1},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[y.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",margin:0},children:b.clientName}),y.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",background:"#3b82f6",color:"white"},children:["הזמנה #",_+1]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#4b5563",marginBottom:"0.5rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[y.jsx(nd,{size:16}),y.jsx("span",{children:b.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[y.jsx(fd,{size:16}),y.jsxs("span",{children:[new Date(b.pickupDate).toLocaleDateString("he-IL")," - ",new Date(b.returnDate).toLocaleDateString("he-IL")]})]})]}),y.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:b.events.map((I,C)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:I.type==="השאלה"?"#10b981":I.type==="החזרה"?"#f59e0b":"#3b82f6",color:"white"},children:[y.jsx("span",{children:I.icon}),y.jsx("span",{children:I.description}),I.isMultiDay&&y.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:["(יום ",I.dayNumber,"/",I.totalDays,")"]})]},C))})]})}),b.items&&b.items.length>0&&y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[y.jsx(Ss,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:["פריטים (",b.items.reduce((I,C)=>I+(C.quantity||1),0),")"]})]}),y.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[b.items.slice(0,3).map((I,C)=>y.jsxs("div",{style:{background:"#f9fafb",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:"#4b5563",border:"1px solid #e5e7eb"},children:[I.name," ",I.quantity>1?`(×${I.quantity})`:""]},C)),b.items.length>3&&y.jsxs("div",{style:{background:"#eff6ff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:"#2563eb",border:"1px solid #dbeafe"},children:["+",b.items.length-3," נוספים"]})]})]})]}),y.jsx("div",{style:{padding:"1rem",background:"#f9fafb"},children:y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",flexWrap:"wrap"},children:[b.events.some(I=>I.icon==="📦")&&y.jsxs("button",{onClick:()=>o({open:!0,eventId:`${b.orderId}-edit`,items:b.items.map(I=>({...I}))}),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[y.jsx(US,{size:16}),"ערוך הזמנה"]}),y.jsxs("button",{onClick:()=>{const I=t.filter(C=>C.orderId===b.orderId);a(I)},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[y.jsx(bx,{size:16}),"הצג פרטים"]}),b.events.some(I=>I.icon==="📦")&&y.jsxs("button",{onClick:()=>g(b.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[y.jsx(zS,{size:16}),"מחק"]}),c&&b.events.some(I=>I.type==="החזרה")&&y.jsxs("button",{onClick:()=>c(b.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f59e0b",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[y.jsx(iU,{size:16}),"בדיקת החזרה"]})]})})]},b.orderId))})}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ ',p.reduce((b,_)=>{var I;return b+(((I=_.items)==null?void 0:I.reduce((C,D)=>C+(D.quantity||1),0))||0)},0)," פריטים"]}),y.jsx("button",{onClick:()=>i(!1),style:{background:"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer"},children:"סגור"})]})})]})})]})},VU=({show:n,setShow:e,selectedEvents:t,allItems:r})=>{var o;if(de.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const i=((o=t==null?void 0:t[0])==null?void 0:o.items)||[],a=s=>{s.target===s.currentTarget&&e(!1)};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,global:!0,children:`
        .items-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .items-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 28rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
      `}),y.jsx("div",{className:"items-modal-overlay",onClick:a,children:y.jsxs("div",{className:"items-modal-content",dir:"rtl",onClick:s=>s.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #047857)",color:"white",padding:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx(Ss,{size:24}),y.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"רשימת מוצרים"})]}),y.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:y.jsx(Fm,{size:20})})]}),y.jsxs("div",{style:{marginTop:"0.5rem",color:"#a7f3d0"},children:[i.length," פריט",i.length!==1?"ים":""," בהזמנה"]})]}),y.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:i.length>0?y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map((s,c)=>(r.find(f=>f.name===s.name),y.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[s.imageUrl&&y.jsx("img",{src:s.imageUrl,alt:s.name,style:{width:"4rem",height:"4rem",objectFit:"cover",borderRadius:"8px",border:"2px solid #e5e7eb"}}),y.jsxs("div",{style:{flex:1},children:[y.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:s.name}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[y.jsxs("span",{children:[y.jsx("strong",{children:"כמות:"})," ",s.quantity]}),y.jsxs("span",{children:[y.jsx("strong",{children:"מזהה מוצר:"}),y.jsx("code",{style:{background:"#f3f4f6",padding:"0.125rem 0.375rem",borderRadius:"4px",marginRight:"0.25rem"},children:s.itemId||"לא נמצא"})]})]})]}),y.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",s.quantity]})]})},c)))}):y.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[y.jsx(Ss,{size:48,style:{color:"#d1d5db",marginBottom:"1rem"}}),y.jsx("p",{children:"אין פריטים בהזמנה זו"})]})}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ כמות: ',i.reduce((s,c)=>s+(c.quantity||1),0)]}),y.jsx("button",{onClick:()=>e(!1),style:{background:"#059669",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"500"},children:"סגור"})]})})]})})]})},qU=({show:n,data:e,setData:t,allItems:r,setShowReport:i,fetchItemsAndOrders:a,allEvents:o})=>{const[s,c]=de.useState({items:[]}),[f,d]=de.useState(!1),[p,g]=de.useState(""),[m,b]=de.useState({pickupDate:null,returnDate:null});if(de.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),de.useEffect(()=>{if(n&&e.eventId&&o.length>0){console.log("🚀 Initializing edit modal");const P=e.eventId.split("-")[0],S=o.filter(R=>R.orderId===P);if(S.length>0){const R=S[0];b({pickupDate:new Date(R.pickupDate),returnDate:new Date(R.returnDate)}),console.log("📅 Order dates:",{pickup:R.pickupDate,return:R.returnDate})}c({items:[...e.items||[]]})}},[n,e,o]),!n)return null;const _=P=>{var X,V;const S=r.find(z=>z.name===P);if(!S)return console.warn(`❌ Stock not found for ${P}`),0;const R=S.quantity||0,M=(X=e.eventId)==null?void 0:X.split("-")[0];if(!m.pickupDate||!m.returnDate)return console.warn("⚠️ Missing pickup/return dates for current order."),R;console.log(`🔎 Checking "${P}" availability from ${m.pickupDate.toDateString()} to ${m.returnDate.toDateString()}`),console.log(`📦 Total stock from database: ${R}`);let T=0;const N=new Set;o.forEach(z=>{if(z.orderId===M||N.has(`${z.orderId}-${P}`))return;const ne=new Date(z.pickupDate),se=new Date(z.returnDate);if(ne<=m.returnDate&&se>=m.pickupDate&&z.items){const oe=z.items.find(W=>W.name===P);oe&&(console.log(`➡️ Overlapping Order ID: ${z.orderId}`),console.log(`    Dates: ${ne.toDateString()} - ${se.toDateString()}`),console.log(`    Reserved: ${oe.quantity}`),T+=oe.quantity||0,N.add(`${z.orderId}-${P}`))}});const L=((V=s.items.find(z=>z.name===P))==null?void 0:V.quantity)||0,F=R-T-L;return console.log(`✅ Available: ${F} = ${R} - ${T} - ${L} (already in order)`),Math.max(0,F)},I=P=>{console.log("➕ Trying to add item:",P.name);const S=_(P.name);if(S<=0){alert(`❌ לא ניתן להוסיף מ-${P.name}. זמין: ${S}`);return}const R=s.items.findIndex(M=>M.name===P.name);if(R>=0){const M=[...s.items];M[R]={...M[R],quantity:M[R].quantity+1},c({...s,items:M})}else{const M={name:P.name,quantity:1,ItemId:P.ItemId||P.itemId||P.id,itemId:P.ItemId||P.itemId||P.id,id:P.id,imageUrl:P.imageUrl||""};c({...s,items:[...s.items,M]})}},C=(P,S)=>{var N;if(console.log(`🔄 Updating ${P} to quantity: ${S}`),S<=0){c({...s,items:s.items.filter(L=>L.name!==P)});return}const R=((N=s.items.find(L=>L.name===P))==null?void 0:N.quantity)||0,M=_(P)+R;if(S>M){alert(`❌ לא ניתן להזמין ${S} מ-${P}. זמין: ${M}`);return}const T=s.items.map(L=>L.name===P?{...L,quantity:S}:L);c({...s,items:T})},D=P=>{console.log("🗑️ Removing item:",P),c({...s,items:s.items.filter(S=>S.name!==P)})},B=async()=>{var P;try{d(!0);const S=(P=e.eventId)==null?void 0:P.split("-")[0];if(!S)throw new Error("שגיאה: לא נמצא מזהה הזמנה");console.log("💾 Saving items:",s.items);const R=s.items.map(M=>({...M,ItemId:M.ItemId||M.itemId||M.id,itemId:M.ItemId||M.itemId||M.id}));await Za(wr(Ot,"orders",S),{items:R}),await a(),t({open:!1,eventId:null,items:[]}),i(!1),alert("🎉 השינויים נשמרו בהצלחה!")}catch(S){console.error("❌ שגיאה בשמירה:",S),alert(S.message||"שמירה נכשלה. נסה שוב.")}finally{d(!1)}},q=()=>{t({open:!1,eventId:null,items:[]})},Y=r.filter(P=>P.name.toLowerCase().includes(p.toLowerCase())),H=P=>{P.target===P.currentTarget&&q()};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,global:!0,children:`
        .edit-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .edit-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        @media (max-width: 768px) {
          .edit-modal-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .edit-modal-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .modal-footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
          }
          
          .modal-footer-mobile button {
            width: 100% !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),y.jsx("div",{className:"edit-modal-overlay",onClick:H,children:y.jsxs("div",{className:"edit-modal-content",dir:"rtl",onClick:P=>P.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1rem",flexShrink:0},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(US,{size:24}),y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"עריכת הזמנה"})]}),y.jsx("button",{onClick:q,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),m.pickupDate&&m.returnDate&&y.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"#bfdbfe"},children:["📅 תאריכי ההזמנה: ",m.pickupDate.toLocaleDateString("he-IL")," - ",m.returnDate.toLocaleDateString("he-IL")]})]}),y.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים נוכחיים בהזמנה (",s.items.length,")"]}),s.items.length>0?y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.items.map((P,S)=>{const R=r.find(N=>N.name===P.name),T=_(P.name)+P.quantity;return y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#f9fafb",padding:"0.75rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[(R==null?void 0:R.imageUrl)&&y.jsx("img",{src:R.imageUrl,alt:P.name,style:{width:"2.5rem",height:"2.5rem",objectFit:"cover",borderRadius:"6px",flexShrink:0}}),y.jsxs("div",{style:{minWidth:0,flex:1},children:[y.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"0.9rem"},children:P.name}),y.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["מזהה: ",(R==null?void 0:R.ItemId)||(R==null?void 0:R.itemId)||"לא נמצא"]}),y.jsxs("div",{style:{fontSize:"0.7rem",color:"#059669",fontWeight:"500"},children:["מקסימום: ",T]})]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},children:[y.jsx("button",{onClick:()=>C(P.name,P.quantity-1),style:{background:"#ef4444",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f,children:y.jsx(mU,{size:12})}),y.jsx("span",{style:{width:"1.5rem",textAlign:"center",fontWeight:"500",fontSize:"0.9rem"},children:P.quantity}),y.jsx("button",{onClick:()=>C(P.name,P.quantity+1),style:{background:P.quantity>=T?"#9ca3af":"#10b981",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:P.quantity>=T?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f||P.quantity>=T,children:y.jsx(bU,{size:12})}),y.jsx("button",{onClick:()=>D(P.name),style:{background:"#ef4444",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",border:"none",cursor:"pointer",marginRight:"0.3rem",fontSize:"0.75rem"},disabled:f,children:"הסר"})]})]},S)})}):y.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"#6b7280"},children:"אין פריטים בהזמנה"})]}),y.jsxs("div",{children:[y.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"הוסף פריטים מהמלאי"}),y.jsx("div",{style:{marginBottom:"1rem"},children:y.jsxs("div",{style:{position:"relative"},children:[y.jsx(FS,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),y.jsx("input",{type:"text",placeholder:"חפש פריט...",value:p,onChange:P=>g(P.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:f})]})}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"0.75rem",maxHeight:"10rem",overflowY:"auto",overflowX:"hidden"},children:Y.map((P,S)=>{var L;const R=s.items.some(F=>F.name===P.name),M=R?(L=s.items.find(F=>F.name===P.name))==null?void 0:L.quantity:0,T=_(P.name),N=M<T+M;return y.jsx("div",{onClick:()=>!f&&N&&I(P),style:{padding:"0.6rem",borderRadius:"8px",border:R?"2px solid #3b82f6":"1px solid #e5e7eb",background:R?"#eff6ff":"white",cursor:f||!N?"not-allowed":"pointer",transition:"all 0.2s",opacity:f||!N?.6:1},children:y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[P.imageUrl&&y.jsx("img",{src:P.imageUrl,alt:P.name,style:{width:"2rem",height:"2rem",objectFit:"cover",borderRadius:"6px",flexShrink:0}}),y.jsxs("div",{style:{flex:1,minWidth:0},children:[y.jsx("div",{style:{fontWeight:"500",fontSize:"0.8rem",color:"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:P.name}),y.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["מזהה: ",P.itemId||P.ItemId]}),y.jsxs("div",{style:{fontSize:"0.65rem",color:T>0?"#059669":"#dc2626",fontWeight:"500"},children:["זמין: ",T]}),R&&y.jsxs("div",{style:{fontSize:"0.65rem",color:"#2563eb",fontWeight:"500"},children:["בהזמנה: ",M]})]})]})},S)})})]})]}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"modal-footer-mobile",children:[y.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ פריטים: ',s.items.reduce((P,S)=>P+S.quantity,0)]}),y.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"modal-footer-mobile",children:[y.jsx("button",{onClick:q,disabled:f,style:{background:"#6b7280",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:f?"not-allowed":"pointer",fontSize:"0.875rem",opacity:f?.6:1},children:"ביטול"}),y.jsx("button",{onClick:B,disabled:f||s.items.length===0,style:{background:s.items.length===0?"#9ca3af":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:s.items.length===0||f?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:f?y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"שומר..."]}):y.jsxs(y.Fragment,{children:[y.jsx(wx,{size:16}),"שמור שינויים"]})})]})]})})]})})]})},HU=({show:n,order:e,onClose:t,onCompleteInspection:r,allItems:i=[],updateItemQuantities:a})=>{const[o,s]=de.useState([]),[c,f]=de.useState(new Set),[d,p]=de.useState(""),[g,m]=de.useState(!1);if(de.useEffect(()=>{if(n&&(e!=null&&e.items)){const B=e.items.map(q=>({itemId:q.id||q.itemId,name:q.name,quantityExpected:q.quantity||1,quantityReturned:q.quantity||1,isFullyReturned:!0,condition:"good",damageDescription:"",repairCost:0,notes:""}));s(B),f(new Set),p("")}},[n,e]),de.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n||!e)return null;const b=(B,q,Y)=>{s(H=>H.map((P,S)=>{if(S===B){const R={...P,[q]:Y};return R.isFullyReturned=Y>=P.quantityExpected,Y<P.quantityExpected?R.condition="lost":R.condition==="lost"&&(R.condition="good"),R}return P})),f(H=>{const P=new Set(H);return P.delete(B),P})},_=B=>{f(q=>new Set([...q,B]))},I=()=>o.length>0&&c.size===o.length,C=async()=>{if(!I()){alert("יש לאשר את כל הפריטים לפני השלמת הבדיקה");return}const B=o.reduce((P,S)=>P+S.quantityExpected,0),q=o.reduce((P,S)=>P+S.quantityReturned,0),Y=Math.round(q/B*100),H=`האם אתה בטוח שברצונך לסיים את בדיקת ההחזרה?

סיכום:
• פריטים שהושאלו: ${B}/${B}
• פריטים שחזרו: ${q}/${B}
• אחוז החזרה: ${Y}%

ההזמנה תעבור לאיסוף ההזמנות הסגורות.`;if(window.confirm(H))try{m(!0);const P=o.reduce((N,L)=>N+L.quantityExpected,0),S=o.reduce((N,L)=>N+L.quantityReturned,0),R=o.filter(N=>N.condition==="damaged").length,M=o.reduce((N,L)=>N+(L.repairCost||0),0),T={totalItemsExpected:P,totalItemsReturned:S,totalDamages:R,totalRepairCost:M,managerNotes:d,customerNotified:!1,customerAgreedToCharges:!1};for(const N of o){const L=i.find(F=>F.id===N.itemId||F.name===N.name);if(L){let F=0;const X=N.quantityExpected-N.quantityReturned,V=N.condition==="damaged"?N.quantityReturned:0;F=X+V;const z=L.quantity-F,ne=Math.max(0,z);F>0&&await Za(wr(Ot,"items",L.id),{quantity:ne,lastUpdated:pi()})}}await r(e.id,o,T),a&&await a(),t()}catch(P){console.error("Error completing return inspection:",P),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}finally{m(!1)}},D=B=>{B.target===B.currentTarget&&window.confirm("האם אתה בטוח שברצונך לסגור את חלון בדיקת החזרה?")&&t()};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,global:!0,children:`
        .return-inspection-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.7) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .return-inspection-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .item-container {
          border: 1px solid #e5e7eb;
          borderRadius: 12px;
          padding: 1rem;
          background: #ffffff;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        @media (max-width: 768px) {
          .return-inspection-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .return-inspection-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
            align-items: stretch !important;
          }
          
          .footer-mobile button {
            width: 100% !important;
          }
          
          .footer-mobile .summary-text {
            text-align: center !important;
            margin-bottom: 0.5rem !important;
          }

          .item-container {
            padding: 1rem !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes slideDown {
          0% { transform: translateY(-10px); opacity: 0; }
          100% { transform: translateY(0); opacity: 1; }
        }
      `}),y.jsx("div",{className:"return-inspection-overlay",onClick:D,children:y.jsxs("div",{className:"return-inspection-content",dir:"rtl",onClick:B=>B.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #fb923c, #f97316)",color:"white",padding:"1rem",flexShrink:0},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx(dd,{size:24}),y.jsxs("div",{children:[y.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"בדיקת החזרת מוצרים"}),y.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:["לקוח: ",e.clientName," • ",e.phone]})]})]}),y.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),y.jsxs("div",{style:{marginTop:"1rem",background:"rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"0.75rem"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.875rem"},children:[y.jsx("span",{children:"התקדמות הבדיקה"}),y.jsxs("span",{style:{fontWeight:"bold"},children:[c.size,"/",o.length," פריטים אושרו"]})]}),y.jsx("div",{style:{marginTop:"0.5rem",background:"rgba(255, 255, 255, 0.3)",borderRadius:"4px",height:"6px",overflow:"hidden"},children:y.jsx("div",{style:{background:"#10b981",height:"100%",width:`${o.length>0?c.size/o.length*100:0}%`,transition:"width 0.3s ease"}})})]})]}),y.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:o.map((B,q)=>{var H,P;return c.has(q)?null:y.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1rem",background:"#ffffff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx("img",{src:((H=e.items.find(S=>S.id===B.itemId))==null?void 0:H.imageUrl)||"/no-image-available.png",alt:B.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb",flexShrink:0}}),y.jsxs("div",{style:{minWidth:0,flex:1},children:[y.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:B.name}),y.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["מזהה: ",B.ItemId||((P=e.items.find(S=>S.id===B.itemId))==null?void 0:P.ItemId)||B.itemId]}),y.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["כמות מוזמנת: ",B.quantityExpected]})]})]}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[y.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"כמות שחזרה:"}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx("button",{onClick:()=>{const S=Math.max(0,B.quantityReturned-1);b(q,"quantityReturned",S)},disabled:B.quantityReturned<=0,style:{background:B.quantityReturned<=0?"#d1d5db":"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:B.quantityReturned<=0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:B.quantityReturned<=0?.6:1},children:"-"}),y.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"40px",textAlign:"center",color:"#1f2937"},children:B.quantityReturned}),y.jsx("button",{onClick:()=>{const S=Math.min(B.quantityExpected,B.quantityReturned+1);b(q,"quantityReturned",S)},disabled:B.quantityReturned>=B.quantityExpected,style:{background:B.quantityReturned>=B.quantityExpected?"#d1d5db":"#10b981",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:B.quantityReturned>=B.quantityExpected?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:B.quantityReturned>=B.quantityExpected?.6:1},children:"+"}),y.jsxs("button",{onClick:()=>_(q),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",marginRight:"1rem"},children:[y.jsx(jS,{size:16}),"בוצע"]})]})]}),B.quantityReturned<B.quantityExpected&&y.jsx("div",{style:{padding:"0.5rem",background:"#fef3c7",borderRadius:"6px",textAlign:"center"},children:y.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"500"},children:["⚠️ חסרים ",B.quantityExpected-B.quantityReturned," פריטים"]})})]})},q)})}),c.size>0&&y.jsxs("div",{style:{marginTop:"2rem",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"12px",padding:"1rem"},children:[y.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"bold",color:"#0369a1",margin:"0 0 1rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(dd,{size:20}),"פריטים שאושרו (",c.size,"/",o.length,")"]}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Array.from(c).map(B=>{const q=o[B];return y.jsxs("div",{style:{background:"white",border:"1px solid #bae6fd",borderRadius:"8px",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#1f2937"},children:q.name}),y.jsxs("span",{style:{fontSize:"0.875rem",color:"#059669",fontWeight:"500"},children:["כמות שחזרה: ",q.quantityReturned]})]},B)})})]})]}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"footer-mobile",children:[y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"summary-text",children:I()?"כל הפריטים אושרו - ניתן להשלים את הבדיקה":`יש לאשר את כל הפריטים (${c.size}/${o.length})`}),y.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"footer-mobile",children:[y.jsx("button",{onClick:t,disabled:g,style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:g?"not-allowed":"pointer",fontSize:"0.875rem",opacity:g?.6:1},children:"ביטול"}),y.jsx("button",{onClick:C,disabled:g||!I(),style:{background:I()?"#f59e0b":"#9ca3af",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:g||!I()?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:g||!I()?.6:1,justifyContent:"center"},children:g?y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"מעבד..."]}):y.jsxs(y.Fragment,{children:[y.jsx(wx,{size:16}),"השלם בדיקת החזרה"]})})]})]})})]})})]})},WU=({allItems:n,itemsMap:e,events:t,setAllItems:r,setItemsMap:i,setEvents:a,fetchItemsAndOrders:o})=>{const[s,c]=de.useState(new Date),[f,d]=de.useState([]),[p,g]=de.useState(!1),[m,b]=de.useState(null),[_,I]=de.useState(!1),[C,D]=de.useState({open:!1,eventId:null,items:[]}),[B,q]=de.useState({show:!1,order:null}),Y=async S=>{try{const R=t.filter(M=>M.orderId===S);if(R.length>0){const M={id:S,clientName:R[0].clientName,phone:R[0].phone,items:R[0].items,pickupDate:R[0].pickupDate,returnDate:R[0].returnDate};q({show:!0,order:M}),g(!1)}}catch(R){console.error("Error initializing return inspection:",R),alert("שגיאה בהתחלת בדיקת החזרה. נסה שוב.")}},H=async S=>{try{const R={status:"closed","returnInspection.inspectionStatus":"completed","returnInspection.inspectedBy":"סגירה ידנית","returnInspection.inspectionDate":pi(),"returnInspection.managerNotes":"הזמנה נסגרה ידנית על ידי המנהל","returnInspection.totalItemsReturned":0,"returnInspection.totalDamages":0,"returnInspection.totalRepairCost":0,closedAt:pi(),manuallyClosedAt:pi()};await Za(wr(Ot,"orders",S),R),await o(),g(!1),alert("ההזמנה נסגרה ידנית והועברה להיסטוריה!")}catch(R){console.error("Error manually closing order:",R),alert("שגיאה בסגירת ההזמנה. נסה שוב.")}},P=async(S,R,M)=>{try{const T={status:"closed",returnInspection:{inspectionStatus:"completed",inspectedBy:"מנהל המערכת",inspectionDate:pi(),itemInspections:R.map(N=>({itemId:N.itemId,name:N.name,quantityExpected:N.quantityExpected,quantityReturned:N.quantityReturned,condition:N.condition,damageDescription:N.damageDescription||"",repairCost:N.repairCost||0,notes:N.notes||"",inspectedAt:new Date().toISOString()})),totalItemsReturned:M.totalItemsReturned,totalItemsExpected:M.totalItemsExpected,totalDamages:M.totalDamages,totalRepairCost:M.totalRepairCost,managerNotes:M.managerNotes,customerNotified:M.customerNotified,customerAgreedToCharges:M.customerAgreedToCharges},closedAt:pi()};await Za(wr(Ot,"orders",S),T),await o(),q({show:!1,order:null}),alert("בדיקת החזרה הושלמה בהצלחה! ההזמנה הועברה להיסטוריה.")}catch(T){console.error("Error completing return inspection:",T),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}};return y.jsxs("div",{className:"mt-6",children:[y.jsx(UU,{currentDate:s,events:t,setCurrentDate:c,setSelectedEvents:d,setSelectedDate:b,setShowReport:g,fetchItemsAndOrders:o}),y.jsx(zU,{show:p,selectedDate:m,selectedEvents:f,allItems:n,setShowReport:g,setShowItemsModal:I,setEditItemModal:D,fetchItemsAndOrders:o,onStartReturnInspection:Y,onCloseOrderManually:H}),y.jsx(VU,{show:!!_,setShow:()=>I(!1),selectedEvents:_,allItems:n}),y.jsx(qU,{show:C.open,data:C,setData:D,allItems:n,setShowReport:g,fetchItemsAndOrders:o,allEvents:t}),y.jsx(HU,{show:B.show,order:B.order,onClose:()=>q({show:!1,order:null}),onCompleteInspection:P,allItems:n,updateItemQuantities:o})]})},p4=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},GU=async(n,e)=>{const t=p4(new Date);for(const r of n.docs){const i=r.data();!i.pickupDate||i.stockUpdated||p4(new Date(i.pickupDate))>t||await Za(wr(e,"orders",r.id),{stockUpdated:!0})}},$U=(n,e)=>n.docs.flatMap(t=>{const r=t.data();if(r.status==="closed")return[];const i=(o=[])=>o.map(s=>{const c=e.find(f=>f.id===s.id);return{...s,imageUrl:(c==null?void 0:c.imageUrl)||null,itemId:(c==null?void 0:c.itemId)||"לא נמצא"}}),a=[];if(r.pickupDate&&r.returnDate){const o=new Date(r.pickupDate),s=new Date(r.returnDate);o.setHours(0,0,0,0),s.setHours(0,0,0,0);const c=Math.ceil((s-o)/(1e3*60*60*24));for(let f=0;f<=c;f++){if(f!==0&&f!==c)continue;const d=new Date(o);d.setDate(o.getDate()+f);let p,g,m;f===0?(p="השאלה",g="📦",m="איסוף מוצרים"):f===c&&(p="החזרה",g="🔄",m="החזרת מוצרים"),a.push({id:`${t.id}-${d.toISOString().slice(0,10)}`,orderId:t.id,date:new Date(d),clientName:r.clientName,phone:r.phone,type:p,icon:g,description:m,items:i(r.items),pickupDate:r.pickupDate,returnDate:r.returnDate,dayNumber:f+1,totalDays:c+1,isMultiDay:c>0})}}return a}),YU=async(n,e,t,r)=>{try{const a=(await er(vn(n,"items"))).docs.map(f=>{const d=f.data();return{id:f.id,itemId:d.ItemId,name:d.name,imageUrl:d.imageUrl,quantity:d.quantity||0,isDeleted:d.isDeleted||!1}}).filter(f=>!f.isDeleted);console.log("📊 Items loaded with quantities:",a.map(f=>({name:f.name,quantity:f.quantity}))),e(a);const o={};a.forEach(f=>{o[f.name]=f.imageUrl||null}),t(o);const s=await er(vn(n,"orders"));await GU(s,n);const c=$U(s,a);r(c)}catch(i){console.error("שגיאה בטעינת ההזמנות והפריטים:",i)}},XU=()=>{const[n,e]=de.useState([]),[t,r]=de.useState({}),[i,a]=de.useState([]),[o,s]=de.useState(!0),[c,f]=de.useState(null),d=async()=>{try{s(!0),f(null),await YU(Ot,e,r,a)}catch(p){console.error("Error fetching calendar data:",p),f("שגיאה בטעינת נתוני היומן. אנא נסה שוב.")}finally{s(!1)}};return de.useEffect(()=>{d()},[]),o?y.jsx("div",{className:"flex justify-center items-center min-h-screen",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full border-blue-600 border-t-transparent"}),y.jsx("p",{className:"mt-4 text-gray-600",children:"טוען נתוני יומן..."})]})}):c?y.jsx("div",{className:"flex justify-center items-center min-h-screen",children:y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-red-600 mb-4",children:c}),y.jsx("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"נסה שוב"})]})}):y.jsx("div",{className:"container mx-auto px-4",children:y.jsx(WU,{allItems:n,itemsMap:t,events:i,setAllItems:e,setItemsMap:r,setEvents:a,fetchItemsAndOrders:d})})};function WS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=WS(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function rd(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=WS(n))&&(r&&(r+=" "),r+=e);return r}function KU(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}KU(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L1=n=>typeof n=="number"&&!isNaN(n),hd=n=>typeof n=="string",ru=n=>typeof n=="function",QU=n=>hd(n)||L1(n),jy=n=>hd(n)||ru(n)?n:null,ZU=(n,e)=>n===!1||L1(n)&&n>0?n:e,By=n=>de.isValidElement(n)||hd(n)||ru(n)||L1(n);function JU(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function ez({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:s,done:c,nodeRef:f,isIn:d,playToast:p}){let g=t?`${n}--${o}`:n,m=t?`${e}--${o}`:e,b=de.useRef(0);return de.useLayoutEffect(()=>{let _=f.current,I=g.split(" "),C=D=>{D.target===f.current&&(p(),_.removeEventListener("animationend",C),_.removeEventListener("animationcancel",C),b.current===0&&D.type!=="animationcancel"&&_.classList.remove(...I))};_.classList.add(...I),_.addEventListener("animationend",C),_.addEventListener("animationcancel",C)},[]),de.useEffect(()=>{let _=f.current,I=()=>{_.removeEventListener("animationend",I),r?JU(_,c,i):c()};d||(s?I():(b.current=1,_.className+=` ${m}`,_.addEventListener("animationend",I)))},[d]),Pn.createElement(Pn.Fragment,null,a)}}function g4(n,e){return{content:GS(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function GS(n,e,t=!1){return de.isValidElement(n)&&!hd(n.type)?de.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):ru(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function tz({closeToast:n,theme:e,ariaLabel:t="close"}){return Pn.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},Pn.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Pn.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function nz({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:a,controlledProgress:o,progress:s,rtl:c,isIn:f,theme:d}){let p=i||o&&s===0,g={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};o&&(g.transform=`scaleX(${s})`);let m=rd("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),b=ru(a)?a({rtl:c,type:r,defaultClassName:m}):rd(m,a),_={[o&&s>=1?"onTransitionEnd":"onAnimationEnd"]:o&&s<1?null:()=>{f&&t()}};return Pn.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},Pn.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${r}`}),Pn.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:b,style:g,..._}))}var rz=1,$S=()=>`${rz++}`;function iz(n,e,t){let r=1,i=0,a=[],o=[],s=e,c=new Map,f=new Set,d=D=>(f.add(D),()=>f.delete(D)),p=()=>{o=Array.from(c.values()),f.forEach(D=>D())},g=({containerId:D,toastId:B,updateId:q})=>{let Y=D?D!==n:n!==1,H=c.has(B)&&q==null;return Y||H},m=(D,B)=>{c.forEach(q=>{var Y;(B==null||B===q.props.toastId)&&((Y=q.toggle)==null||Y.call(q,D))})},b=D=>{var B,q;(q=(B=D.props)==null?void 0:B.onClose)==null||q.call(B,D.removalReason),D.isActive=!1},_=D=>{if(D==null)c.forEach(b);else{let B=c.get(D);B&&b(B)}p()},I=()=>{i-=a.length,a=[]},C=D=>{var B,q;let{toastId:Y,updateId:H}=D.props,P=H==null;D.staleId&&c.delete(D.staleId),D.isActive=!0,c.set(Y,D),p(),t(g4(D,P?"added":"updated")),P&&((q=(B=D.props).onOpen)==null||q.call(B))};return{id:n,props:s,observe:d,toggle:m,removeToast:_,toasts:c,clearQueue:I,buildToast:(D,B)=>{if(g(B))return;let{toastId:q,updateId:Y,data:H,staleId:P,delay:S}=B,R=Y==null;R&&i++;let M={...s,style:s.toastStyle,key:r++,...Object.fromEntries(Object.entries(B).filter(([N,L])=>L!=null)),toastId:q,updateId:Y,data:H,isIn:!1,className:jy(B.className||s.toastClassName),progressClassName:jy(B.progressClassName||s.progressClassName),autoClose:B.isLoading?!1:ZU(B.autoClose,s.autoClose),closeToast(N){c.get(q).removalReason=N,_(q)},deleteToast(){let N=c.get(q);if(N!=null){if(t(g4(N,"removed")),c.delete(q),i--,i<0&&(i=0),a.length>0){C(a.shift());return}p()}}};M.closeButton=s.closeButton,B.closeButton===!1||By(B.closeButton)?M.closeButton=B.closeButton:B.closeButton===!0&&(M.closeButton=By(s.closeButton)?s.closeButton:!0);let T={content:D,props:M,staleId:P};s.limit&&s.limit>0&&i>s.limit&&R?a.push(T):L1(S)?setTimeout(()=>{C(T)},S):C(T)},setProps(D){s=D},setToggle:(D,B)=>{let q=c.get(D);q&&(q.toggle=B)},isToastActive:D=>{var B;return(B=c.get(D))==null?void 0:B.isActive},getSnapshot:()=>o}}var Qa=new Map,f1=[],Fy=new Set,az=n=>Fy.forEach(e=>e(n)),YS=()=>Qa.size>0;function oz(){f1.forEach(n=>KS(n.content,n.options)),f1=[]}var sz=(n,{containerId:e})=>{var t;return(t=Qa.get(e||1))==null?void 0:t.toasts.get(n)};function XS(n,e){var t;if(e)return!!((t=Qa.get(e))!=null&&t.isToastActive(n));let r=!1;return Qa.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function lz(n){if(!YS()){f1=f1.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||QU(n))Qa.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Qa.get(n.containerId);e?e.removeToast(n.id):Qa.forEach(t=>{t.removeToast(n.id)})}}var cz=(n={})=>{Qa.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function KS(n,e){By(n)&&(YS()||f1.push({content:n,options:e}),Qa.forEach(t=>{t.buildToast(n,e)}))}function uz(n){var e;(e=Qa.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function QS(n,e){Qa.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function fz(n){let e=n.containerId||1;return{subscribe(t){let r=iz(e,n,az);Qa.set(e,r);let i=r.observe(t);return oz(),()=>{i(),Qa.delete(e)}},setProps(t){var r;(r=Qa.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Qa.get(e))==null?void 0:t.getSnapshot()}}}function dz(n){return Fy.add(n),()=>{Fy.delete(n)}}function hz(n){return n&&(hd(n.toastId)||L1(n.toastId))?n.toastId:$S()}function M1(n,e){return KS(n,e),e.toastId}function Um(n,e){return{...e,type:e&&e.type||n,toastId:hz(e)}}function zm(n){return(e,t)=>M1(e,Um(n,t))}function mn(n,e){return M1(n,Um("default",e))}mn.loading=(n,e)=>M1(n,Um("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function pz(n,{pending:e,error:t,success:r},i){let a;e&&(a=hd(e)?mn.loading(e,i):mn.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(f,d,p)=>{if(d==null){mn.dismiss(a);return}let g={type:f,...o,...i,data:p},m=hd(d)?{render:d}:d;return a?mn.update(a,{...g,...m}):mn(m.render,{...g,...m}),p},c=ru(n)?n():n;return c.then(f=>s("success",r,f)).catch(f=>s("error",t,f)),c}mn.promise=pz;mn.success=zm("success");mn.info=zm("info");mn.error=zm("error");mn.warning=zm("warning");mn.warn=mn.warning;mn.dark=(n,e)=>M1(n,Um("default",{theme:"dark",...e}));function gz(n){lz(n)}mn.dismiss=gz;mn.clearWaitingQueue=cz;mn.isActive=XS;mn.update=(n,e={})=>{let t=sz(n,e);if(t){let{props:r,content:i}=t,a={delay:100,...r,...e,toastId:e.toastId||n,updateId:$S()};a.toastId!==n&&(a.staleId=n);let o=a.render||i;delete a.render,M1(o,a)}};mn.done=n=>{mn.update(n,{progress:1})};mn.onChange=dz;mn.play=n=>QS(!0,n);mn.pause=n=>QS(!1,n);function mz(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=de.useRef(fz(n)).current;i(n);let a=(e=de.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function o(s){if(!a)return[];let c=new Map;return n.newestOnTop&&a.reverse(),a.forEach(f=>{let{position:d}=f.props;c.has(d)||c.set(d,[]),c.get(d).push(f)}),Array.from(c,f=>s(f[0],f[1]))}return{getToastToRender:o,isToastActive:XS,count:a==null?void 0:a.length}}function vz(n){let[e,t]=de.useState(!1),[r,i]=de.useState(!1),a=de.useRef(null),o=de.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:c,closeToast:f,onClick:d,closeOnClick:p}=n;uz({id:n.toastId,containerId:n.containerId,fn:t}),de.useEffect(()=>{if(n.pauseOnFocusLoss)return g(),()=>{m()}},[n.pauseOnFocusLoss]);function g(){document.hasFocus()||C(),window.addEventListener("focus",I),window.addEventListener("blur",C)}function m(){window.removeEventListener("focus",I),window.removeEventListener("blur",C)}function b(P){if(n.draggable===!0||n.draggable===P.pointerType){D();let S=a.current;o.canCloseOnClick=!0,o.canDrag=!0,S.style.transition="none",n.draggableDirection==="x"?(o.start=P.clientX,o.removalDistance=S.offsetWidth*(n.draggablePercent/100)):(o.start=P.clientY,o.removalDistance=S.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function _(P){let{top:S,bottom:R,left:M,right:T}=a.current.getBoundingClientRect();P.nativeEvent.type!=="touchend"&&n.pauseOnHover&&P.clientX>=M&&P.clientX<=T&&P.clientY>=S&&P.clientY<=R?C():I()}function I(){t(!0)}function C(){t(!1)}function D(){o.didMove=!1,document.addEventListener("pointermove",q),document.addEventListener("pointerup",Y)}function B(){document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",Y)}function q(P){let S=a.current;if(o.canDrag&&S){o.didMove=!0,e&&C(),n.draggableDirection==="x"?o.delta=P.clientX-o.start:o.delta=P.clientY-o.start,o.start!==P.clientX&&(o.canCloseOnClick=!1);let R=n.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;S.style.transform=`translate3d(${R},0)`,S.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function Y(){B();let P=a.current;if(o.canDrag&&o.didMove&&P){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}P.style.transition="transform 0.2s, opacity 0.2s",P.style.removeProperty("transform"),P.style.removeProperty("opacity")}}let H={onPointerDown:b,onPointerUp:_};return s&&c&&(H.onMouseEnter=C,n.stacked||(H.onMouseLeave=I)),p&&(H.onClick=P=>{d&&d(P),o.canCloseOnClick&&f(!0)}),{playToast:I,pauseToast:C,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:H}}var yz=typeof window<"u"?de.useLayoutEffect:de.useEffect,Vm=({theme:n,type:e,isLoading:t,...r})=>Pn.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function xz(n){return Pn.createElement(Vm,{...n},Pn.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function bz(n){return Pn.createElement(Vm,{...n},Pn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function wz(n){return Pn.createElement(Vm,{...n},Pn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function _z(n){return Pn.createElement(Vm,{...n},Pn.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Az(){return Pn.createElement("div",{className:"Toastify__spinner"})}var Uy={info:bz,warning:xz,success:wz,error:_z,spinner:Az},Sz=n=>n in Uy;function Ez({theme:n,type:e,isLoading:t,icon:r}){let i=null,a={theme:n,type:e};return r===!1||(ru(r)?i=r({...a,isLoading:t}):de.isValidElement(r)?i=de.cloneElement(r,a):t?i=Uy.spinner():Sz(e)&&(i=Uy[e](a))),i}var Cz=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:a}=vz(n),{closeButton:o,children:s,autoClose:c,onClick:f,type:d,hideProgressBar:p,closeToast:g,transition:m,position:b,className:_,style:I,progressClassName:C,updateId:D,role:B,progress:q,rtl:Y,toastId:H,deleteToast:P,isIn:S,isLoading:R,closeOnClick:M,theme:T,ariaLabel:N}=n,L=rd("Toastify__toast",`Toastify__toast-theme--${T}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":Y},{"Toastify__toast--close-on-click":M}),F=ru(_)?_({rtl:Y,position:b,type:d,defaultClassName:L}):rd(L,_),X=Ez(n),V=!!q||!c,z={closeToast:g,type:d,theme:T},ne=null;return o===!1||(ru(o)?ne=o(z):de.isValidElement(o)?ne=de.cloneElement(o,z):ne=tz(z)),Pn.createElement(m,{isIn:S,done:P,position:b,preventExitTransition:t,nodeRef:r,playToast:a},Pn.createElement("div",{id:H,tabIndex:0,onClick:f,"data-in":S,className:F,...i,style:I,ref:r,...S&&{role:B,"aria-label":N}},X!=null&&Pn.createElement("div",{className:rd("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},X),GS(s,n,!e),ne,!n.customProgressBar&&Pn.createElement(nz,{...D&&!V?{key:`p-${D}`}:{},rtl:Y,theme:T,delay:c,isRunning:e,isIn:S,closeToast:g,hide:p,type:d,className:C,controlledProgress:V,progress:q||0})))},Iz=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),Tz=ez(Iz("bounce",!0)),Rz={position:"top-right",transition:Tz,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function Nz(n){let e={...Rz,...n},t=n.stacked,[r,i]=de.useState(!0),a=de.useRef(null),{getToastToRender:o,isToastActive:s,count:c}=mz(e),{className:f,style:d,rtl:p,containerId:g,hotKeys:m}=e;function b(I){let C=rd("Toastify__toast-container",`Toastify__toast-container--${I}`,{"Toastify__toast-container--rtl":p});return ru(f)?f({position:I,rtl:p,defaultClassName:C}):rd(C,jy(f))}function _(){t&&(i(!0),mn.play())}return yz(()=>{var I;if(t){let C=a.current.querySelectorAll('[data-in="true"]'),D=12,B=(I=e.position)==null?void 0:I.includes("top"),q=0,Y=0;Array.from(C).reverse().forEach((H,P)=>{let S=H;S.classList.add("Toastify__toast--stacked"),P>0&&(S.dataset.collapsed=`${r}`),S.dataset.pos||(S.dataset.pos=B?"top":"bot");let R=q*(r?.2:1)+(r?0:D*P);S.style.setProperty("--y",`${B?R:R*-1}px`),S.style.setProperty("--g",`${D}`),S.style.setProperty("--s",`${1-(r?Y:0)}`),q+=S.offsetHeight,Y+=.025})}},[r,c,t]),de.useEffect(()=>{function I(C){var D;let B=a.current;m(C)&&((D=B.querySelector('[tabIndex="0"]'))==null||D.focus(),i(!1),mn.pause()),C.key==="Escape"&&(document.activeElement===B||B!=null&&B.contains(document.activeElement))&&(i(!0),mn.play())}return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[m]),Pn.createElement("section",{ref:a,className:"Toastify",id:g,onMouseEnter:()=>{t&&(i(!1),mn.pause())},onMouseLeave:_,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((I,C)=>{let D=C.length?{...d}:{...d,pointerEvents:"none"};return Pn.createElement("div",{tabIndex:-1,className:b(I),"data-stacked":t,style:D,key:`c-${I}`},C.map(({content:B,props:q})=>Pn.createElement(Cz,{...q,stacked:t,collapseAll:_,isIn:s(q.toastId,q.containerId),key:`t-${q.key}`},B)))}))}var Kd={},Dv={exports:{}},Ov,m4;function Dz(){if(m4)return Ov;m4=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ov=n,Ov}var kv,v4;function Oz(){if(v4)return kv;v4=1;var n=Dz();function e(){}function t(){}return t.resetWarningCache=e,kv=function(){function r(o,s,c,f,d,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},kv}var y4;function kz(){return y4||(y4=1,Dv.exports=Oz()()),Dv.exports}var x4;function Pz(){if(x4)return Kd;x4=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.default=void 0;var n=Object.assign||function(P){for(var S=1;S<arguments.length;S++){var R=arguments[S];for(var M in R)Object.prototype.hasOwnProperty.call(R,M)&&(P[M]=R[M])}return P},e=function(){function P(S,R){for(var M=0;M<R.length;M++){var T=R[M];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(S,T.key,T)}}return function(S,R,M){return R&&P(S.prototype,R),M&&P(S,M),S}}(),t,r;Kd.confirmAlert=H;var i=rm(),a=f(i),o=kz(),s=f(o),c=tA();function f(P){return P&&P.__esModule?P:{default:P}}function d(P,S){if(!(P instanceof S))throw new TypeError("Cannot call a class as a function")}function p(P,S){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:P}function g(P,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);P.prototype=Object.create(S&&S.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(P,S):P.__proto__=S)}var m=(r=t=function(P){g(S,P);function S(){var R,M,T,N;d(this,S);for(var L=arguments.length,F=Array(L),X=0;X<L;X++)F[X]=arguments[X];return N=(M=(T=p(this,(R=S.__proto__||Object.getPrototypeOf(S)).call.apply(R,[this].concat(F))),T),T.handleClickButton=function(V){V.onClick&&V.onClick(),T.close()},T.handleClickOverlay=function(V){var z=T.props,ne=z.closeOnClickOutside,se=z.onClickOutside,Q=V.target===T.overlay;ne&&Q&&(se(),T.close()),V.stopPropagation()},T.close=function(){var V=T.props.afterClose;Y(),B(T.props),C(V)},T.keyboard=function(V){var z=T.props,ne=z.closeOnEscape,se=z.onKeypressEscape,Q=z.onkeyPress,oe=z.keyCodeForClose,W=V.keyCode,K=W===27;oe.includes(W)&&T.close(),ne&&K&&(se(V),T.close()),Q&&Q()},T.componentDidMount=function(){document.addEventListener("keydown",T.keyboard,!1)},T.componentWillUnmount=function(){document.removeEventListener("keydown",T.keyboard,!1),T.props.willUnmount()},T.renderCustomUI=function(){var V=T.props,z=V.title,ne=V.message,se=V.buttons,Q=V.customUI,oe={title:z,message:ne,buttons:se,onClose:T.close};return Q(oe)},M),p(T,N)}return e(S,[{key:"render",value:function(){var M=this,T=this.props,N=T.title,L=T.message,F=T.buttons,X=T.childrenElement,V=T.customUI,z=T.overlayClassName;return a.default.createElement("div",{className:"react-confirm-alert-overlay "+z,ref:function(se){return M.overlay=se},onClick:this.handleClickOverlay},a.default.createElement("div",{className:"react-confirm-alert"},V?this.renderCustomUI():a.default.createElement("div",{className:"react-confirm-alert-body"},N&&a.default.createElement("h1",null,N),L,X(),a.default.createElement("div",{className:"react-confirm-alert-button-group"},F.map(function(ne,se){return a.default.createElement("button",n({key:se,className:ne.className},ne,{onClick:function(oe){return M.handleClickButton(ne)}}),ne.label)})))))}}]),S}(i.Component),t.propTypes={title:s.default.string,message:s.default.string,buttons:s.default.array.isRequired,childrenElement:s.default.func,customUI:s.default.func,closeOnClickOutside:s.default.bool,closeOnEscape:s.default.bool,keyCodeForClose:s.default.arrayOf(s.default.number),willUnmount:s.default.func,afterClose:s.default.func,onClickOutside:s.default.func,onKeypressEscape:s.default.func,onkeyPress:s.default.func,overlayClassName:s.default.string},t.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},r);Kd.default=m;var b=null,_="react-confirm-alert";function I(){var P=document.getElementById("react-confirm-alert-firm-svg");if(!P){var S="http://www.w3.org/2000/svg",R=document.createElementNS(S,"feGaussianBlur");R.setAttribute("stdDeviation","0.3");var M=document.createElementNS(S,"filter");M.setAttribute("id","gaussian-blur"),M.appendChild(R);var T=document.createElementNS(S,"svg");T.setAttribute("id","react-confirm-alert-firm-svg"),T.setAttribute("class","react-confirm-alert-svg"),T.appendChild(M),document.body.appendChild(T)}}function C(P){var S=document.getElementById("react-confirm-alert-firm-svg");S&&S.parentNode.removeChild(S),document.body.children[0].classList.remove("react-confirm-alert-blur"),P()}function D(P){var S=document.getElementById(P.targetId||_);P.targetId&&!S&&console.error("React Confirm Alert:","Can not get element id (#"+P.targetId+")"),S?(b=(0,c.createRoot)(S),b.render(a.default.createElement(m,P))):(document.body.children[0].classList.add("react-confirm-alert-blur"),S=document.createElement("div"),S.id=_,document.body.appendChild(S),b=(0,c.createRoot)(S),b.render(a.default.createElement(m,P)))}function B(P){var S=document.getElementById(P.targetId||_);S&&b.unmount(S)}function q(){document.body.classList.add("react-confirm-alert-body-element")}function Y(){document.body.classList.remove("react-confirm-alert-body-element")}function H(P){q(),I(),D(P)}return Kd}var Lz=Pz();function Mz(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}function ZS(n,e){return new Promise(function(t,r){let i;return jz(n).then(function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const jz=n=>new Promise((e,t)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let o=0;if(a.getUint16(o)!==65496)return t("not a valid JPEG");for(o+=2;;){const s=a.getUint16(o);if(s===65498)break;const c=a.getUint16(o+2);if(s===65505&&a.getUint32(o+4)===1165519206){const f=o+10;let d;switch(a.getUint16(f)){case 18761:d=!0;break;case 19789:d=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(f+2,d)!==42)return t("TIFF header contains invalid version");const p=a.getUint32(f+4,d),g=f+p+2+12*a.getUint16(f+p,d);for(let m=f+p+2;m<g;m+=12)if(a.getUint16(m,d)==274){if(a.getUint16(m+2,d)!==3)return t("Orientation data type is invalid");if(a.getUint32(m+4,d)!==1)return t("Orientation data count is invalid");a.setUint16(m+8,1,d);break}return e(i.slice(o,o+2+c))}o+=2+c}return e(new Blob)}),r.readAsArrayBuffer(n)});var Gg={},Bz={get exports(){return Gg},set exports(n){Gg=n}};(function(n){var e,t,r={};Bz.exports=r,r.parse=function(i,a){for(var o=r.bin.readUshort,s=r.bin.readUint,c=0,f={},d=new Uint8Array(i),p=d.length-4;s(d,p)!=101010256;)p--;c=p,c+=4;var g=o(d,c+=4);o(d,c+=2);var m=s(d,c+=2),b=s(d,c+=4);c+=4,c=b;for(var _=0;_<g;_++){s(d,c),c+=4,c+=4,c+=4,s(d,c+=4),m=s(d,c+=4);var I=s(d,c+=4),C=o(d,c+=4),D=o(d,c+2),B=o(d,c+4);c+=6;var q=s(d,c+=8);c+=4,c+=C+D+B,r._readLocal(d,q,f,m,I,a)}return f},r._readLocal=function(i,a,o,s,c,f){var d=r.bin.readUshort,p=r.bin.readUint;p(i,a),d(i,a+=4),d(i,a+=2);var g=d(i,a+=2);p(i,a+=2),p(i,a+=4),a+=4;var m=d(i,a+=8),b=d(i,a+=2);a+=2;var _=r.bin.readUTF8(i,a,m);if(a+=m,a+=b,f)o[_]={size:c,csize:s};else{var I=new Uint8Array(i.buffer,a);if(g==0)o[_]=new Uint8Array(I.buffer.slice(a,a+s));else{if(g!=8)throw"unknown compression method: "+g;var C=new Uint8Array(c);r.inflateRaw(I,C),o[_]=C}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var o=0,s=new Uint8Array(50+Math.floor(1.1*i.length));s[o]=120,s[o+1]=156,o+=2,o=r.F.deflateRaw(i,s,o,a.level);var c=r.adler(i,0,i.length);return s[o+0]=c>>>24&255,s[o+1]=c>>>16&255,s[o+2]=c>>>8&255,s[o+3]=c>>>0&255,new Uint8Array(s.buffer,0,o+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),s=r.F.deflateRaw(i,o,s,a.level);return new Uint8Array(o.buffer,0,s)},r.encode=function(i,a){a==null&&(a=!1);var o=0,s=r.bin.writeUint,c=r.bin.writeUshort,f={};for(var d in i){var p=!r._noNeed(d)&&!a,g=i[d],m=r.crc.crc(g,0,g.length);f[d]={cpr:p,usize:g.length,crc:m,file:p?r.deflateRaw(g):g}}for(var d in f)o+=f[d].file.length+30+46+2*r.bin.sizeUTF8(d);o+=22;var b=new Uint8Array(o),_=0,I=[];for(var d in f){var C=f[d];I.push(_),_=r._writeHeader(b,_,d,C,0)}var D=0,B=_;for(var d in f)C=f[d],I.push(_),_=r._writeHeader(b,_,d,C,1,I[D++]);var q=_-B;return s(b,_,101010256),_+=4,c(b,_+=4,D),c(b,_+=2,D),s(b,_+=2,q),s(b,_+=4,B),_+=4,_+=2,b.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,o,s,c,f){var d=r.bin.writeUint,p=r.bin.writeUshort,g=s.file;return d(i,a,c==0?67324752:33639248),a+=4,c==1&&(a+=2),p(i,a,20),p(i,a+=2,0),p(i,a+=2,s.cpr?8:0),d(i,a+=2,0),d(i,a+=4,s.crc),d(i,a+=4,g.length),d(i,a+=4,s.usize),p(i,a+=4,r.bin.sizeUTF8(o)),p(i,a+=2,0),a+=2,c==1&&(a+=2,a+=2,d(i,a+=6,f),a+=4),a+=r.bin.writeUTF8(i,a,o),c==0&&(i.set(g,a),a+=g.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var o=a,s=0;s<8;s++)1&o?o=3988292384^o>>>1:o>>>=1;i[a]=o}return i}(),update:function(i,a,o,s){for(var c=0;c<s;c++)i=r.crc.table[255&(i^a[o+c])]^i>>>8;return i},crc:function(i,a,o){return 4294967295^r.crc.update(4294967295,i,a,o)}},r.adler=function(i,a,o){for(var s=1,c=0,f=a,d=a+o;f<d;){for(var p=Math.min(f+5552,d);f<p;)c+=s+=i[f++];s%=65521,c%=65521}return c<<16|s},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255,i[a+2]=o>>16&255,i[a+3]=o>>24&255},readASCII:function(i,a,o){for(var s="",c=0;c<o;c++)s+=String.fromCharCode(i[a+c]);return s},writeASCII:function(i,a,o){for(var s=0;s<o.length;s++)i[a+s]=o.charCodeAt(s)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,o){for(var s,c="",f=0;f<o;f++)c+="%"+r.bin.pad(i[a+f].toString(16));try{s=decodeURIComponent(c)}catch{return r.bin.readASCII(i,a,o)}return s},writeUTF8:function(i,a,o){for(var s=o.length,c=0,f=0;f<s;f++){var d=o.charCodeAt(f);if((4294967168&d)==0)i[a+c]=d,c++;else if((4294965248&d)==0)i[a+c]=192|d>>6,i[a+c+1]=128|d>>0&63,c+=2;else if((4294901760&d)==0)i[a+c]=224|d>>12,i[a+c+1]=128|d>>6&63,i[a+c+2]=128|d>>0&63,c+=3;else{if((4292870144&d)!=0)throw"e";i[a+c]=240|d>>18,i[a+c+1]=128|d>>12&63,i[a+c+2]=128|d>>6&63,i[a+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var a=i.length,o=0,s=0;s<a;s++){var c=i.charCodeAt(s);if((4294967168&c)==0)o++;else if((4294965248&c)==0)o+=2;else if((4294901760&c)==0)o+=3;else{if((4292870144&c)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,a,o,s){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],f=r.F.U,d=r.F._goodIndex;r.F._hash;var p=r.F._putsE,g=0,m=o<<3,b=0,_=i.length;if(s==0){for(;g<_;)p(a,m,g+(T=Math.min(65535,_-g))==_?1:0),m=r.F._copyExact(i,g,T,a,m+8),g+=T;return m>>>3}var I=f.lits,C=f.strt,D=f.prev,B=0,q=0,Y=0,H=0,P=0,S=0;for(_>2&&(C[S=r.F._hash(i,0)]=0),g=0;g<_;g++){if(P=S,g+1<_-2){S=r.F._hash(i,g+1);var R=g+1&32767;D[R]=C[S],C[S]=R}if(b<=g){(B>14e3||q>26697)&&_-g>100&&(b<g&&(I[B]=g-b,B+=2,b=g),m=r.F._writeBlock(g==_-1||b==_?1:0,I,B,H,i,Y,g-Y,a,m),B=q=H=0,Y=g);var M=0;g<_-2&&(M=r.F._bestMatch(i,g,D,P,Math.min(c[2],_-g),c[3]));var T=M>>>16,N=65535&M;if(M!=0){N=65535&M;var L=d(T=M>>>16,f.of0);f.lhst[257+L]++;var F=d(N,f.df0);f.dhst[F]++,H+=f.exb[L]+f.dxb[F],I[B]=T<<23|g-b,I[B+1]=N<<16|L<<8|F,B+=2,b=g+T}else f.lhst[i[g]]++;q++}}for(Y==g&&i.length!=0||(b<g&&(I[B]=g-b,B+=2,b=g),m=r.F._writeBlock(1,I,B,H,i,Y,g-Y,a,m),B=0,q=0,B=q=H=0,Y=g);(7&m)!=0;)m++;return m>>>3},r.F._bestMatch=function(i,a,o,s,c,f){var d=32767&a,p=o[d],g=d-p+32768&32767;if(p==d||s!=r.F._hash(i,a-g))return 0;for(var m=0,b=0,_=Math.min(32767,a);g<=_&&--f!=0&&p!=d;){if(m==0||i[a+m]==i[a+m-g]){var I=r.F._howLong(i,a,g);if(I>m){if(b=g,(m=I)>=c)break;g+2<I&&(I=g+2);for(var C=0,D=0;D<I-2;D++){var B=a-g+D+32768&32767,q=B-o[B]+32768&32767;q>C&&(C=q,p=B)}}}g+=(d=p)-(p=o[d])+32768&32767}return m<<16|b},r.F._howLong=function(i,a,o){if(i[a]!=i[a-o]||i[a+1]!=i[a+1-o]||i[a+2]!=i[a+2-o])return 0;var s=a,c=Math.min(i.length,a+258);for(a+=3;a<c&&i[a]==i[a-o];)a++;return a-s},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,o,s,c,f,d,p,g){var m,b,_,I,C,D,B,q,Y,H=r.F.U,P=r.F._putsF,S=r.F._putsE;H.lhst[256]++,b=(m=r.F.getTrees())[0],_=m[1],I=m[2],C=m[3],D=m[4],B=m[5],q=m[6],Y=m[7];var R=32+((g+3&7)==0?0:8-(g+3&7))+(d<<3),M=s+r.F.contSize(H.fltree,H.lhst)+r.F.contSize(H.fdtree,H.dhst),T=s+r.F.contSize(H.ltree,H.lhst)+r.F.contSize(H.dtree,H.dhst);T+=14+3*B+r.F.contSize(H.itree,H.ihst)+(2*H.ihst[16]+3*H.ihst[17]+7*H.ihst[18]);for(var N=0;N<286;N++)H.lhst[N]=0;for(N=0;N<30;N++)H.dhst[N]=0;for(N=0;N<19;N++)H.ihst[N]=0;var L=R<M&&R<T?0:M<T?1:2;if(P(p,g,i),P(p,g+1,L),g+=3,L==0){for(;(7&g)!=0;)g++;g=r.F._copyExact(c,f,d,p,g)}else{var F,X;if(L==1&&(F=H.fltree,X=H.fdtree),L==2){r.F.makeCodes(H.ltree,b),r.F.revCodes(H.ltree,b),r.F.makeCodes(H.dtree,_),r.F.revCodes(H.dtree,_),r.F.makeCodes(H.itree,I),r.F.revCodes(H.itree,I),F=H.ltree,X=H.dtree,S(p,g,C-257),S(p,g+=5,D-1),S(p,g+=5,B-4),g+=4;for(var V=0;V<B;V++)S(p,g+3*V,H.itree[1+(H.ordr[V]<<1)]);g+=3*B,g=r.F._codeTiny(q,H.itree,p,g),g=r.F._codeTiny(Y,H.itree,p,g)}for(var z=f,ne=0;ne<o;ne+=2){for(var se=a[ne],Q=se>>>23,oe=z+(8388607&se);z<oe;)g=r.F._writeLit(c[z++],F,p,g);if(Q!=0){var W=a[ne+1],K=W>>16,J=W>>8&255,re=255&W;S(p,g=r.F._writeLit(257+J,F,p,g),Q-H.of0[J]),g+=H.exb[J],P(p,g=r.F._writeLit(re,X,p,g),K-H.df0[re]),g+=H.dxb[re],z+=Q}}g=r.F._writeLit(256,F,p,g)}return g},r.F._copyExact=function(i,a,o,s,c){var f=c>>>3;return s[f]=o,s[f+1]=o>>>8,s[f+2]=255-s[f],s[f+3]=255-s[f+1],f+=4,s.set(new Uint8Array(i.buffer,a,o),f),c+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),s=[],c=r.F._lenCodes(i.ltree,s),f=[],d=r.F._lenCodes(i.dtree,f),p=0;p<s.length;p+=2)i.ihst[s[p]]++;for(p=0;p<f.length;p+=2)i.ihst[f[p]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,o,g,c,d,m,s,f]},r.F.getSecond=function(i){for(var a=[],o=0;o<i.length;o+=2)a.push(i[o+1]);return a},r.F.nonZero=function(i){for(var a="",o=0;o<i.length;o+=2)i[o+1]!=0&&(a+=(o>>1)+",");return a},r.F.contSize=function(i,a){for(var o=0,s=0;s<a.length;s++)o+=a[s]*i[1+(s<<1)];return o},r.F._codeTiny=function(i,a,o,s){for(var c=0;c<i.length;c+=2){var f=i[c],d=i[c+1];s=r.F._writeLit(f,a,o,s);var p=f==16?2:f==17?3:7;f>15&&(r.F._putsE(o,s,d,p),s+=p)}return s},r.F._lenCodes=function(i,a){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var s=0;s<o;s+=2){var c=i[s+1],f=s+3<o?i[s+3]:-1,d=s+5<o?i[s+5]:-1,p=s==0?-1:i[s-1];if(c==0&&f==c&&d==c){for(var g=s+5;g+2<o&&i[g+2]==c;)g+=2;(m=Math.min(g+1-s>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),s+=2*m-2}else if(c==p&&f==c&&d==c){for(g=s+5;g+2<o&&i[g+2]==c;)g+=2;var m=Math.min(g+1-s>>>1,6);a.push(16,m-3),s+=2*m-2}else a.push(c,0)}return o>>>1},r.F._hufTree=function(i,a,o){var s=[],c=i.length,f=a.length,d=0;for(d=0;d<f;d+=2)a[d]=0,a[d+1]=0;for(d=0;d<c;d++)i[d]!=0&&s.push({lit:d,f:i[d]});var p=s.length,g=s.slice(0);if(p==0)return 0;if(p==1){var m=s[0].lit;return g=m==0?1:0,a[1+(m<<1)]=1,a[1+(g<<1)]=1,1}s.sort(function(q,Y){return q.f-Y.f});var b=s[0],_=s[1],I=0,C=1,D=2;for(s[0]={lit:-1,f:b.f+_.f,l:b,r:_,d:0};C!=p-1;)b=I!=C&&(D==p||s[I].f<s[D].f)?s[I++]:s[D++],_=I!=C&&(D==p||s[I].f<s[D].f)?s[I++]:s[D++],s[C++]={lit:-1,f:b.f+_.f,l:b,r:_};var B=r.F.setDepth(s[C-1],0);for(B>o&&(r.F.restrictDepth(g,o,B),B=o),d=0;d<p;d++)a[1+(g[d].lit<<1)]=g[d].d;return B},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,o){var s=0,c=1<<o-a,f=0;for(i.sort(function(p,g){return g.d==p.d?p.f-g.f:g.d-p.d}),s=0;s<i.length&&i[s].d>a;s++){var d=i[s].d;i[s].d=a,f+=c-(1<<o-d)}for(f>>>=o-a;f>0;)(d=i[s].d)<a?(i[s].d++,f-=1<<a-d-1):s++;for(;s>=0;s--)i[s].d==a&&f<0&&(i[s].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var o=0;return a[16|o]<=i&&(o|=16),a[8|o]<=i&&(o|=8),a[4|o]<=i&&(o|=4),a[2|o]<=i&&(o|=2),a[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,a,o,s){return r.F._putsF(o,s,a[i<<1]),s+a[1+(i<<1)]},r.F.inflate=function(i,a){var o=Uint8Array;if(i[0]==3&&i[1]==0)return a||new o(0);var s=r.F,c=s._bitsF,f=s._bitsE,d=s._decodeTiny,p=s.makeCodes,g=s.codes2map,m=s._get17,b=s.U,_=a==null;_&&(a=new o(i.length>>>2<<3));for(var I,C,D=0,B=0,q=0,Y=0,H=0,P=0,S=0,R=0,M=0;D==0;)if(D=c(i,M,1),B=c(i,M+1,2),M+=3,B!=0){if(_&&(a=r.F._check(a,R+(1<<17))),B==1&&(I=b.flmap,C=b.fdmap,P=511,S=31),B==2){q=f(i,M,5)+257,Y=f(i,M+5,5)+1,H=f(i,M+10,4)+4,M+=14;for(var T=0;T<38;T+=2)b.itree[T]=0,b.itree[T+1]=0;var N=1;for(T=0;T<H;T++){var L=f(i,M+3*T,3);b.itree[1+(b.ordr[T]<<1)]=L,L>N&&(N=L)}M+=3*H,p(b.itree,N),g(b.itree,N,b.imap),I=b.lmap,C=b.dmap,M=d(b.imap,(1<<N)-1,q+Y,i,M,b.ttree);var F=s._copyOut(b.ttree,0,q,b.ltree);P=(1<<F)-1;var X=s._copyOut(b.ttree,q,Y,b.dtree);S=(1<<X)-1,p(b.ltree,F),g(b.ltree,F,I),p(b.dtree,X),g(b.dtree,X,C)}for(;;){var V=I[m(i,M)&P];M+=15&V;var z=V>>>4;if(!(z>>>8))a[R++]=z;else{if(z==256)break;var ne=R+z-254;if(z>264){var se=b.ldef[z-257];ne=R+(se>>>3)+f(i,M,7&se),M+=7&se}var Q=C[m(i,M)&S];M+=15&Q;var oe=Q>>>4,W=b.ddef[oe],K=(W>>>4)+c(i,M,15&W);for(M+=15&W,_&&(a=r.F._check(a,R+(1<<17)));R<ne;)a[R]=a[R++-K],a[R]=a[R++-K],a[R]=a[R++-K],a[R]=a[R++-K];R=ne}}}else{(7&M)!=0&&(M+=8-(7&M));var J=4+(M>>>3),re=i[J-4]|i[J-3]<<8;_&&(a=r.F._check(a,R+re)),a.set(new o(i.buffer,i.byteOffset+J,re),R),M=J+re<<3,R+=re}return a.length==R?a:a.slice(0,R)},r.F._check=function(i,a){var o=i.length;if(a<=o)return i;var s=new Uint8Array(Math.max(o<<1,a));return s.set(i,0),s},r.F._decodeTiny=function(i,a,o,s,c,f){for(var d=r.F._bitsE,p=r.F._get17,g=0;g<o;){var m=i[p(s,c)&a];c+=15&m;var b=m>>>4;if(b<=15)f[g]=b,g++;else{var _=0,I=0;b==16?(I=3+d(s,c,2),c+=2,_=f[g-1]):b==17?(I=3+d(s,c,3),c+=3):b==18&&(I=11+d(s,c,7),c+=7);for(var C=g+I;g<C;)f[g]=_,g++}}return c},r.F._copyOut=function(i,a,o,s){for(var c=0,f=0,d=s.length>>>1;f<o;){var p=i[f+a];s[f<<1]=0,s[1+(f<<1)]=p,p>c&&(c=p),f++}for(;f<d;)s[f<<1]=0,s[1+(f<<1)]=0,f++;return c},r.F.makeCodes=function(i,a){for(var o,s,c,f,d=r.F.U,p=i.length,g=d.bl_count,m=0;m<=a;m++)g[m]=0;for(m=1;m<p;m+=2)g[i[m]]++;var b=d.next_code;for(o=0,g[0]=0,s=1;s<=a;s++)o=o+g[s-1]<<1,b[s]=o;for(c=0;c<p;c+=2)(f=i[c+1])!=0&&(i[c]=b[f],b[f]++)},r.F.codes2map=function(i,a,o){for(var s=i.length,c=r.F.U.rev15,f=0;f<s;f+=2)if(i[f+1]!=0)for(var d=f>>1,p=i[f+1],g=d<<4|p,m=a-p,b=i[f]<<m,_=b+(1<<m);b!=_;)o[c[b]>>>15-a]=g,b++},r.F.revCodes=function(i,a){for(var o=r.F.U.rev15,s=15-a,c=0;c<i.length;c+=2){var f=i[c]<<a-i[c+1];i[c]=o[f]>>>s}},r.F._putsE=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8},r.F._putsF=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8,i[s+2]|=o>>>16},r.F._bitsE=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},r.F._bitsF=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[a]=(o>>>16|o<<16)>>>17}function s(c,f,d){for(;f--!=0;)c.push(0,d)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];s(i.fltree,144,8),s(i.fltree,112,9),s(i.fltree,24,7),s(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),s(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),s(i.itree,19,0),s(i.ltree,286,0),s(i.dtree,30,0),s(i.ttree,320,0)}()})();var Fz=Mz({__proto__:null,default:Gg},[Gg]);const rl=function(){var n={nextZero(d,p){for(;d[p]!=0;)p++;return p},readUshort:(d,p)=>d[p]<<8|d[p+1],writeUshort(d,p,g){d[p]=g>>8&255,d[p+1]=255&g},readUint:(d,p)=>16777216*d[p]+(d[p+1]<<16|d[p+2]<<8|d[p+3]),writeUint(d,p,g){d[p]=g>>24&255,d[p+1]=g>>16&255,d[p+2]=g>>8&255,d[p+3]=255&g},readASCII(d,p,g){let m="";for(let b=0;b<g;b++)m+=String.fromCharCode(d[p+b]);return m},writeASCII(d,p,g){for(let m=0;m<g.length;m++)d[p+m]=g.charCodeAt(m)},readBytes(d,p,g){const m=[];for(let b=0;b<g;b++)m.push(d[p+b]);return m},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,p,g){let m,b="";for(let _=0;_<g;_++)b+=`%${n.pad(d[p+_].toString(16))}`;try{m=decodeURIComponent(b)}catch{return n.readASCII(d,p,g)}return m}};function e(d,p,g,m){const b=p*g,_=a(m),I=Math.ceil(p*_/8),C=new Uint8Array(4*b),D=new Uint32Array(C.buffer),{ctype:B}=m,{depth:q}=m,Y=n.readUshort;if(B==6){const se=b<<2;if(q==8)for(var H=0;H<se;H+=4)C[H]=d[H],C[H+1]=d[H+1],C[H+2]=d[H+2],C[H+3]=d[H+3];if(q==16)for(H=0;H<se;H++)C[H]=d[H<<1]}else if(B==2){const se=m.tabs.tRNS;if(se==null){if(q==8)for(H=0;H<b;H++){var P=3*H;D[H]=255<<24|d[P+2]<<16|d[P+1]<<8|d[P]}if(q==16)for(H=0;H<b;H++)P=6*H,D[H]=255<<24|d[P+4]<<16|d[P+2]<<8|d[P]}else{var S=se[0];const Q=se[1],oe=se[2];if(q==8)for(H=0;H<b;H++){var R=H<<2;P=3*H,D[H]=255<<24|d[P+2]<<16|d[P+1]<<8|d[P],d[P]==S&&d[P+1]==Q&&d[P+2]==oe&&(C[R+3]=0)}if(q==16)for(H=0;H<b;H++)R=H<<2,P=6*H,D[H]=255<<24|d[P+4]<<16|d[P+2]<<8|d[P],Y(d,P)==S&&Y(d,P+2)==Q&&Y(d,P+4)==oe&&(C[R+3]=0)}}else if(B==3){const se=m.tabs.PLTE,Q=m.tabs.tRNS,oe=Q?Q.length:0;if(q==1)for(var M=0;M<g;M++){var T=M*I,N=M*p;for(H=0;H<p;H++){R=N+H<<2;var L=3*(F=d[T+(H>>3)]>>7-((7&H)<<0)&1);C[R]=se[L],C[R+1]=se[L+1],C[R+2]=se[L+2],C[R+3]=F<oe?Q[F]:255}}if(q==2)for(M=0;M<g;M++)for(T=M*I,N=M*p,H=0;H<p;H++)R=N+H<<2,L=3*(F=d[T+(H>>2)]>>6-((3&H)<<1)&3),C[R]=se[L],C[R+1]=se[L+1],C[R+2]=se[L+2],C[R+3]=F<oe?Q[F]:255;if(q==4)for(M=0;M<g;M++)for(T=M*I,N=M*p,H=0;H<p;H++)R=N+H<<2,L=3*(F=d[T+(H>>1)]>>4-((1&H)<<2)&15),C[R]=se[L],C[R+1]=se[L+1],C[R+2]=se[L+2],C[R+3]=F<oe?Q[F]:255;if(q==8)for(H=0;H<b;H++){var F;R=H<<2,L=3*(F=d[H]),C[R]=se[L],C[R+1]=se[L+1],C[R+2]=se[L+2],C[R+3]=F<oe?Q[F]:255}}else if(B==4){if(q==8)for(H=0;H<b;H++){R=H<<2;var X=d[V=H<<1];C[R]=X,C[R+1]=X,C[R+2]=X,C[R+3]=d[V+1]}if(q==16)for(H=0;H<b;H++){var V;R=H<<2,X=d[V=H<<2],C[R]=X,C[R+1]=X,C[R+2]=X,C[R+3]=d[V+2]}}else if(B==0)for(S=m.tabs.tRNS?m.tabs.tRNS:-1,M=0;M<g;M++){const se=M*I,Q=M*p;if(q==1)for(var z=0;z<p;z++){var ne=(X=255*(d[se+(z>>>3)]>>>7-(7&z)&1))==255*S?0:255;D[Q+z]=ne<<24|X<<16|X<<8|X}else if(q==2)for(z=0;z<p;z++)ne=(X=85*(d[se+(z>>>2)]>>>6-((3&z)<<1)&3))==85*S?0:255,D[Q+z]=ne<<24|X<<16|X<<8|X;else if(q==4)for(z=0;z<p;z++)ne=(X=17*(d[se+(z>>>1)]>>>4-((1&z)<<2)&15))==17*S?0:255,D[Q+z]=ne<<24|X<<16|X<<8|X;else if(q==8)for(z=0;z<p;z++)ne=(X=d[se+z])==S?0:255,D[Q+z]=ne<<24|X<<16|X<<8|X;else if(q==16)for(z=0;z<p;z++)X=d[se+(z<<1)],ne=Y(d,se+(z<<1))==S?0:255,D[Q+z]=ne<<24|X<<16|X<<8|X}return C}function t(d,p,g,m){const b=a(d),_=Math.ceil(g*b/8),I=new Uint8Array((_+1+d.interlace)*m);return p=d.tabs.CgBI?i(p,I):r(p,I),d.interlace==0?p=o(p,d,0,g,m):d.interlace==1&&(p=function(D,B){const q=B.width,Y=B.height,H=a(B),P=H>>3,S=Math.ceil(q*H/8),R=new Uint8Array(Y*S);let M=0;const T=[0,0,4,0,2,0,1],N=[0,4,0,2,0,1,0],L=[8,8,8,4,4,2,2],F=[8,8,4,4,2,2,1];let X=0;for(;X<7;){const z=L[X],ne=F[X];let se=0,Q=0,oe=T[X];for(;oe<Y;)oe+=z,Q++;let W=N[X];for(;W<q;)W+=ne,se++;const K=Math.ceil(se*H/8);o(D,B,M,se,Q);let J=0,re=T[X];for(;re<Y;){let he=N[X],we=M+J*K<<3;for(;he<q;){var V;if(H==1&&(V=(V=D[we>>3])>>7-(7&we)&1,R[re*S+(he>>3)]|=V<<7-((7&he)<<0)),H==2&&(V=(V=D[we>>3])>>6-(7&we)&3,R[re*S+(he>>2)]|=V<<6-((3&he)<<1)),H==4&&(V=(V=D[we>>3])>>4-(7&we)&15,R[re*S+(he>>1)]|=V<<4-((1&he)<<2)),H>=8){const xe=re*S+he*P;for(let Ce=0;Ce<P;Ce++)R[xe+Ce]=D[(we>>3)+Ce]}we+=H,he+=ne}J++,re+=z}se*Q!=0&&(M+=Q*(1+K)),X+=1}return R}(p,d)),p}function r(d,p){return i(new Uint8Array(d.buffer,2,d.length-6),p)}var i=function(){const d={H:{}};return d.H.N=function(p,g){const m=Uint8Array;let b,_,I=0,C=0,D=0,B=0,q=0,Y=0,H=0,P=0,S=0;if(p[0]==3&&p[1]==0)return g||new m(0);const R=d.H,M=R.b,T=R.e,N=R.R,L=R.n,F=R.A,X=R.Z,V=R.m,z=g==null;for(z&&(g=new m(p.length>>>2<<5));I==0;)if(I=M(p,S,1),C=M(p,S+1,2),S+=3,C!=0){if(z&&(g=d.H.W(g,P+(1<<17))),C==1&&(b=V.J,_=V.h,Y=511,H=31),C==2){D=T(p,S,5)+257,B=T(p,S+5,5)+1,q=T(p,S+10,4)+4,S+=14;let se=1;for(var ne=0;ne<38;ne+=2)V.Q[ne]=0,V.Q[ne+1]=0;for(ne=0;ne<q;ne++){const W=T(p,S+3*ne,3);V.Q[1+(V.X[ne]<<1)]=W,W>se&&(se=W)}S+=3*q,L(V.Q,se),F(V.Q,se,V.u),b=V.w,_=V.d,S=N(V.u,(1<<se)-1,D+B,p,S,V.v);const Q=R.V(V.v,0,D,V.C);Y=(1<<Q)-1;const oe=R.V(V.v,D,B,V.D);H=(1<<oe)-1,L(V.C,Q),F(V.C,Q,b),L(V.D,oe),F(V.D,oe,_)}for(;;){const se=b[X(p,S)&Y];S+=15&se;const Q=se>>>4;if(!(Q>>>8))g[P++]=Q;else{if(Q==256)break;{let oe=P+Q-254;if(Q>264){const he=V.q[Q-257];oe=P+(he>>>3)+T(p,S,7&he),S+=7&he}const W=_[X(p,S)&H];S+=15&W;const K=W>>>4,J=V.c[K],re=(J>>>4)+M(p,S,15&J);for(S+=15&J;P<oe;)g[P]=g[P++-re],g[P]=g[P++-re],g[P]=g[P++-re],g[P]=g[P++-re];P=oe}}}}else{(7&S)!=0&&(S+=8-(7&S));const se=4+(S>>>3),Q=p[se-4]|p[se-3]<<8;z&&(g=d.H.W(g,P+Q)),g.set(new m(p.buffer,p.byteOffset+se,Q),P),S=se+Q<<3,P+=Q}return g.length==P?g:g.slice(0,P)},d.H.W=function(p,g){const m=p.length;if(g<=m)return p;const b=new Uint8Array(m<<1);return b.set(p,0),b},d.H.R=function(p,g,m,b,_,I){const C=d.H.e,D=d.H.Z;let B=0;for(;B<m;){const q=p[D(b,_)&g];_+=15&q;const Y=q>>>4;if(Y<=15)I[B]=Y,B++;else{let H=0,P=0;Y==16?(P=3+C(b,_,2),_+=2,H=I[B-1]):Y==17?(P=3+C(b,_,3),_+=3):Y==18&&(P=11+C(b,_,7),_+=7);const S=B+P;for(;B<S;)I[B]=H,B++}}return _},d.H.V=function(p,g,m,b){let _=0,I=0;const C=b.length>>>1;for(;I<m;){const D=p[I+g];b[I<<1]=0,b[1+(I<<1)]=D,D>_&&(_=D),I++}for(;I<C;)b[I<<1]=0,b[1+(I<<1)]=0,I++;return _},d.H.n=function(p,g){const m=d.H.m,b=p.length;let _,I,C,D;const B=m.j;for(var q=0;q<=g;q++)B[q]=0;for(q=1;q<b;q+=2)B[p[q]]++;const Y=m.K;for(_=0,B[0]=0,I=1;I<=g;I++)_=_+B[I-1]<<1,Y[I]=_;for(C=0;C<b;C+=2)D=p[C+1],D!=0&&(p[C]=Y[D],Y[D]++)},d.H.A=function(p,g,m){const b=p.length,_=d.H.m.r;for(let I=0;I<b;I+=2)if(p[I+1]!=0){const C=I>>1,D=p[I+1],B=C<<4|D,q=g-D;let Y=p[I]<<q;const H=Y+(1<<q);for(;Y!=H;)m[_[Y]>>>15-g]=B,Y++}},d.H.l=function(p,g){const m=d.H.m.r,b=15-g;for(let _=0;_<p.length;_+=2){const I=p[_]<<g-p[_+1];p[_]=m[I]>>>b}},d.H.M=function(p,g,m){m<<=7&g;const b=g>>>3;p[b]|=m,p[b+1]|=m>>>8},d.H.I=function(p,g,m){m<<=7&g;const b=g>>>3;p[b]|=m,p[b+1]|=m>>>8,p[b+2]|=m>>>16},d.H.e=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8)>>>(7&g)&(1<<m)-1},d.H.b=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)&(1<<m)-1},d.H.Z=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)},d.H.i=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16|p[3+(g>>>3)]<<24)>>>(7&g)},d.H.m=function(){const p=Uint16Array,g=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=d.H.m;for(var g=0;g<32768;g++){let b=g;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,p.r[g]=(b>>>16|b<<16)>>>17}function m(b,_,I){for(;_--!=0;)b.push(0,I)}for(g=0;g<32;g++)p.q[g]=p.S[g]<<3|p.T[g],p.c[g]=p.p[g]<<4|p.z[g];m(p._,144,8),m(p._,112,9),m(p._,24,7),m(p._,8,8),d.H.n(p._,9),d.H.A(p._,9,p.J),d.H.l(p._,9),m(p.$,32,5),d.H.n(p.$,5),d.H.A(p.$,5,p.h),d.H.l(p.$,5),m(p.Q,19,0),m(p.C,286,0),m(p.D,30,0),m(p.v,320,0)}(),d.H.N}();function a(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,p,g,m,b){let _=a(p);const I=Math.ceil(m*_/8);let C,D;_=Math.ceil(_/8);let B=d[g],q=0;if(B>1&&(d[g]=[0,0,1][B-2]),B==3)for(q=_;q<I;q++)d[q+1]=d[q+1]+(d[q+1-_]>>>1)&255;for(let Y=0;Y<b;Y++)if(C=g+Y*I,D=C+Y+1,B=d[D-1],q=0,B==0)for(;q<I;q++)d[C+q]=d[D+q];else if(B==1){for(;q<_;q++)d[C+q]=d[D+q];for(;q<I;q++)d[C+q]=d[D+q]+d[C+q-_]}else if(B==2)for(;q<I;q++)d[C+q]=d[D+q]+d[C+q-I];else if(B==3){for(;q<_;q++)d[C+q]=d[D+q]+(d[C+q-I]>>>1);for(;q<I;q++)d[C+q]=d[D+q]+(d[C+q-I]+d[C+q-_]>>>1)}else{for(;q<_;q++)d[C+q]=d[D+q]+s(0,d[C+q-I],0);for(;q<I;q++)d[C+q]=d[D+q]+s(d[C+q-_],d[C+q-I],d[C+q-_-I])}return d}function s(d,p,g){const m=d+p-g,b=m-d,_=m-p,I=m-g;return b*b<=_*_&&b*b<=I*I?d:_*_<=I*I?p:g}function c(d,p,g){g.width=n.readUint(d,p),p+=4,g.height=n.readUint(d,p),p+=4,g.depth=d[p],p++,g.ctype=d[p],p++,g.compress=d[p],p++,g.filter=d[p],p++,g.interlace=d[p],p++}function f(d,p,g,m,b,_,I,C,D){const B=Math.min(p,b),q=Math.min(g,_);let Y=0,H=0;for(let X=0;X<q;X++)for(let V=0;V<B;V++)if(I>=0&&C>=0?(Y=X*p+V<<2,H=(C+X)*b+I+V<<2):(Y=(-C+X)*p-I+V<<2,H=X*b+V<<2),D==0)m[H]=d[Y],m[H+1]=d[Y+1],m[H+2]=d[Y+2],m[H+3]=d[Y+3];else if(D==1){var P=d[Y+3]*.00392156862745098,S=d[Y]*P,R=d[Y+1]*P,M=d[Y+2]*P,T=m[H+3]*(1/255),N=m[H]*T,L=m[H+1]*T,F=m[H+2]*T;const z=1-P,ne=P+T*z,se=ne==0?0:1/ne;m[H+3]=255*ne,m[H+0]=(S+N*z)*se,m[H+1]=(R+L*z)*se,m[H+2]=(M+F*z)*se}else if(D==2)P=d[Y+3],S=d[Y],R=d[Y+1],M=d[Y+2],T=m[H+3],N=m[H],L=m[H+1],F=m[H+2],P==T&&S==N&&R==L&&M==F?(m[H]=0,m[H+1]=0,m[H+2]=0,m[H+3]=0):(m[H]=S,m[H+1]=R,m[H+2]=M,m[H+3]=P);else if(D==3){if(P=d[Y+3],S=d[Y],R=d[Y+1],M=d[Y+2],T=m[H+3],N=m[H],L=m[H+1],F=m[H+2],P==T&&S==N&&R==L&&M==F)continue;if(P<220&&T>20)return!1}return!0}return{decode:function(p){const g=new Uint8Array(p);let m=8;const b=n,_=b.readUshort,I=b.readUint,C={tabs:{},frames:[]},D=new Uint8Array(g.length);let B,q=0,Y=0;const H=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(g[P]!=H[P])throw"The input is not a PNG file!";for(;m<g.length;){const X=b.readUint(g,m);m+=4;const V=b.readASCII(g,m,4);if(m+=4,V=="IHDR")c(g,m,C);else if(V=="iCCP"){for(var S=m;g[S]!=0;)S++;b.readASCII(g,m,S-m),g[S+1];const z=g.slice(S+2,m+X);let ne=null;try{ne=r(z)}catch{ne=i(z)}C.tabs[V]=ne}else if(V=="CgBI")C.tabs[V]=g.slice(m,m+4);else if(V=="IDAT"){for(P=0;P<X;P++)D[q+P]=g[m+P];q+=X}else if(V=="acTL")C.tabs[V]={num_frames:I(g,m),num_plays:I(g,m+4)},B=new Uint8Array(g.length);else if(V=="fcTL"){Y!=0&&((F=C.frames[C.frames.length-1]).data=t(C,B.slice(0,Y),F.rect.width,F.rect.height),Y=0);const z={x:I(g,m+12),y:I(g,m+16),width:I(g,m+4),height:I(g,m+8)};let ne=_(g,m+22);ne=_(g,m+20)/(ne==0?100:ne);const se={rect:z,delay:Math.round(1e3*ne),dispose:g[m+24],blend:g[m+25]};C.frames.push(se)}else if(V=="fdAT"){for(P=0;P<X-4;P++)B[Y+P]=g[m+P+4];Y+=X-4}else if(V=="pHYs")C.tabs[V]=[b.readUint(g,m),b.readUint(g,m+4),g[m+8]];else if(V=="cHRM")for(C.tabs[V]=[],P=0;P<8;P++)C.tabs[V].push(b.readUint(g,m+4*P));else if(V=="tEXt"||V=="zTXt"){C.tabs[V]==null&&(C.tabs[V]={});var R=b.nextZero(g,m),M=b.readASCII(g,m,R-m),T=m+X-R-1;if(V=="tEXt")L=b.readASCII(g,R+1,T);else{var N=r(g.slice(R+2,R+2+T));L=b.readUTF8(N,0,N.length)}C.tabs[V][M]=L}else if(V=="iTXt"){C.tabs[V]==null&&(C.tabs[V]={}),R=0,S=m,R=b.nextZero(g,S),M=b.readASCII(g,S,R-S);const z=g[S=R+1];var L;g[S+1],S+=2,R=b.nextZero(g,S),b.readASCII(g,S,R-S),S=R+1,R=b.nextZero(g,S),b.readUTF8(g,S,R-S),T=X-((S=R+1)-m),z==0?L=b.readUTF8(g,S,T):(N=r(g.slice(S,S+T)),L=b.readUTF8(N,0,N.length)),C.tabs[V][M]=L}else if(V=="PLTE")C.tabs[V]=b.readBytes(g,m,X);else if(V=="hIST"){const z=C.tabs.PLTE.length/3;for(C.tabs[V]=[],P=0;P<z;P++)C.tabs[V].push(_(g,m+2*P))}else if(V=="tRNS")C.ctype==3?C.tabs[V]=b.readBytes(g,m,X):C.ctype==0?C.tabs[V]=_(g,m):C.ctype==2&&(C.tabs[V]=[_(g,m),_(g,m+2),_(g,m+4)]);else if(V=="gAMA")C.tabs[V]=b.readUint(g,m)/1e5;else if(V=="sRGB")C.tabs[V]=g[m];else if(V=="bKGD")C.ctype==0||C.ctype==4?C.tabs[V]=[_(g,m)]:C.ctype==2||C.ctype==6?C.tabs[V]=[_(g,m),_(g,m+2),_(g,m+4)]:C.ctype==3&&(C.tabs[V]=g[m]);else if(V=="IEND")break;m+=X,b.readUint(g,m),m+=4}var F;return Y!=0&&((F=C.frames[C.frames.length-1]).data=t(C,B.slice(0,Y),F.rect.width,F.rect.height)),C.data=t(C,D,C.width,C.height),delete C.compress,delete C.interlace,delete C.filter,C},toRGBA8:function(p){const g=p.width,m=p.height;if(p.tabs.acTL==null)return[e(p.data,g,m,p).buffer];const b=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const _=g*m*4,I=new Uint8Array(_),C=new Uint8Array(_),D=new Uint8Array(_);for(let q=0;q<p.frames.length;q++){const Y=p.frames[q],H=Y.rect.x,P=Y.rect.y,S=Y.rect.width,R=Y.rect.height,M=e(Y.data,S,R,p);if(q!=0)for(var B=0;B<_;B++)D[B]=I[B];if(Y.blend==0?f(M,S,R,I,g,m,H,P,0):Y.blend==1&&f(M,S,R,I,g,m,H,P,1),b.push(I.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(C,S,R,I,g,m,H,P,0);else if(Y.dispose==2)for(B=0;B<_;B++)I[B]=D[B]}}return b},_paeth:s,_copyTile:f,_bin:n}}();(function(){const{_copyTile:n}=rl,{_bin:e}=rl,t=rl._paeth;var r={table:function(){const S=new Uint32Array(256);for(let R=0;R<256;R++){let M=R;for(let T=0;T<8;T++)1&M?M=3988292384^M>>>1:M>>>=1;S[R]=M}return S}(),update(S,R,M,T){for(let N=0;N<T;N++)S=r.table[255&(S^R[M+N])]^S>>>8;return S},crc:(S,R,M)=>4294967295^r.update(4294967295,S,R,M)};function i(S,R,M,T){R[M]+=S[0]*T>>4,R[M+1]+=S[1]*T>>4,R[M+2]+=S[2]*T>>4,R[M+3]+=S[3]*T>>4}function a(S){return Math.max(0,Math.min(255,S))}function o(S,R){const M=S[0]-R[0],T=S[1]-R[1],N=S[2]-R[2],L=S[3]-R[3];return M*M+T*T+N*N+L*L}function s(S,R,M,T,N,L,F){F==null&&(F=1);const X=T.length,V=[];for(var z=0;z<X;z++){const re=T[z];V.push([re>>>0&255,re>>>8&255,re>>>16&255,re>>>24&255])}for(z=0;z<X;z++){let re=4294967295;for(var ne=0,se=0;se<X;se++){var Q=o(V[z],V[se]);se!=z&&Q<re&&(re=Q,ne=se)}}const oe=new Uint32Array(N.buffer),W=new Int16Array(R*M*4),K=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(z=0;z<K.length;z++)K[z]=255*((K[z]+.5)/16-.5);for(let re=0;re<M;re++)for(let he=0;he<R;he++){var J;z=4*(re*R+he),F!=2?J=[a(S[z]+W[z]),a(S[z+1]+W[z+1]),a(S[z+2]+W[z+2]),a(S[z+3]+W[z+3])]:(Q=K[4*(3&re)+(3&he)],J=[a(S[z]+Q),a(S[z+1]+Q),a(S[z+2]+Q),a(S[z+3]+Q)]),ne=0;let we=16777215;for(se=0;se<X;se++){const We=o(J,V[se]);We<we&&(we=We,ne=se)}const xe=V[ne],Ce=[J[0]-xe[0],J[1]-xe[1],J[2]-xe[2],J[3]-xe[3]];F==1&&(he!=R-1&&i(Ce,W,z+4,7),re!=M-1&&(he!=0&&i(Ce,W,z+4*R-4,3),i(Ce,W,z+4*R,5),he!=R-1&&i(Ce,W,z+4*R+4,1))),L[z>>2]=ne,oe[z>>2]=T[ne]}}function c(S,R,M,T,N){N==null&&(N={});const{crc:L}=r,F=e.writeUint,X=e.writeUshort,V=e.writeASCII;let z=8;const ne=S.frames.length>1;let se,Q=!1,oe=33+(ne?20:0);if(N.sRGB!=null&&(oe+=13),N.pHYs!=null&&(oe+=21),N.iCCP!=null&&(se=pako.deflate(N.iCCP),oe+=21+se.length+4),S.ctype==3){for(var W=S.plte.length,K=0;K<W;K++)S.plte[K]>>>24!=255&&(Q=!0);oe+=8+3*W+4+(Q?8+1*W+4:0)}for(var J=0;J<S.frames.length;J++)ne&&(oe+=38),oe+=(xe=S.frames[J]).cimg.length+12,J!=0&&(oe+=4);oe+=12;const re=new Uint8Array(oe),he=[137,80,78,71,13,10,26,10];for(K=0;K<8;K++)re[K]=he[K];if(F(re,z,13),z+=4,V(re,z,"IHDR"),z+=4,F(re,z,R),z+=4,F(re,z,M),z+=4,re[z]=S.depth,z++,re[z]=S.ctype,z++,re[z]=0,z++,re[z]=0,z++,re[z]=0,z++,F(re,z,L(re,z-17,17)),z+=4,N.sRGB!=null&&(F(re,z,1),z+=4,V(re,z,"sRGB"),z+=4,re[z]=N.sRGB,z++,F(re,z,L(re,z-5,5)),z+=4),N.iCCP!=null){const Ce=13+se.length;F(re,z,Ce),z+=4,V(re,z,"iCCP"),z+=4,V(re,z,"ICC profile"),z+=11,z+=2,re.set(se,z),z+=se.length,F(re,z,L(re,z-(Ce+4),Ce+4)),z+=4}if(N.pHYs!=null&&(F(re,z,9),z+=4,V(re,z,"pHYs"),z+=4,F(re,z,N.pHYs[0]),z+=4,F(re,z,N.pHYs[1]),z+=4,re[z]=N.pHYs[2],z++,F(re,z,L(re,z-13,13)),z+=4),ne&&(F(re,z,8),z+=4,V(re,z,"acTL"),z+=4,F(re,z,S.frames.length),z+=4,F(re,z,N.loop!=null?N.loop:0),z+=4,F(re,z,L(re,z-12,12)),z+=4),S.ctype==3){for(F(re,z,3*(W=S.plte.length)),z+=4,V(re,z,"PLTE"),z+=4,K=0;K<W;K++){const Ce=3*K,We=S.plte[K],qe=255&We,it=We>>>8&255,lt=We>>>16&255;re[z+Ce+0]=qe,re[z+Ce+1]=it,re[z+Ce+2]=lt}if(z+=3*W,F(re,z,L(re,z-3*W-4,3*W+4)),z+=4,Q){for(F(re,z,W),z+=4,V(re,z,"tRNS"),z+=4,K=0;K<W;K++)re[z+K]=S.plte[K]>>>24&255;z+=W,F(re,z,L(re,z-W-4,W+4)),z+=4}}let we=0;for(J=0;J<S.frames.length;J++){var xe=S.frames[J];ne&&(F(re,z,26),z+=4,V(re,z,"fcTL"),z+=4,F(re,z,we++),z+=4,F(re,z,xe.rect.width),z+=4,F(re,z,xe.rect.height),z+=4,F(re,z,xe.rect.x),z+=4,F(re,z,xe.rect.y),z+=4,X(re,z,T[J]),z+=2,X(re,z,1e3),z+=2,re[z]=xe.dispose,z++,re[z]=xe.blend,z++,F(re,z,L(re,z-30,30)),z+=4);const Ce=xe.cimg;F(re,z,(W=Ce.length)+(J==0?0:4)),z+=4;const We=z;V(re,z,J==0?"IDAT":"fdAT"),z+=4,J!=0&&(F(re,z,we++),z+=4),re.set(Ce,z),z+=W,F(re,z,L(re,We,z-We)),z+=4}return F(re,z,0),z+=4,V(re,z,"IEND"),z+=4,F(re,z,L(re,z-4,4)),z+=4,re.buffer}function f(S,R,M){for(let T=0;T<S.frames.length;T++){const N=S.frames[T];N.rect.width;const L=N.rect.height,F=new Uint8Array(L*N.bpl+L);N.cimg=m(N.img,L,N.bpp,N.bpl,F,R,M)}}function d(S,R,M,T,N){const L=N[0],F=N[1],X=N[2],V=N[3],z=N[4],ne=N[5];let se=6,Q=8,oe=255;for(var W=0;W<S.length;W++){const ve=new Uint8Array(S[W]);for(var K=ve.length,J=0;J<K;J+=4)oe&=ve[J+3]}const re=oe!=255,he=function(dt,ut,Ne,Ke,Ge,st){const ft=[];for(var et=0;et<dt.length;et++){const Et=new Uint8Array(dt[et]),ct=new Uint32Array(Et.buffer);var St;let yn=0,Vt=0,Kn=ut,Kt=Ne,Sn=Ke?1:0;if(et!=0){const mi=st||Ke||et==1||ft[et-2].dispose!=0?1:2;let on=0,pa=1e9;for(let In=0;In<mi;In++){var yt=new Uint8Array(dt[et-1-In]);const jr=new Uint32Array(dt[et-1-In]);let ur=ut,xn=Ne,Nt=-1,nn=-1;for(let jn=0;jn<Ne;jn++)for(let vr=0;vr<ut;vr++)ct[Rt=jn*ut+vr]!=jr[Rt]&&(vr<ur&&(ur=vr),vr>Nt&&(Nt=vr),jn<xn&&(xn=jn),jn>nn&&(nn=jn));Nt==-1&&(ur=xn=Nt=nn=0),Ge&&((1&ur)==1&&ur--,(1&xn)==1&&xn--);const Ei=(Nt-ur+1)*(nn-xn+1);Ei<pa&&(pa=Ei,on=In,yn=ur,Vt=xn,Kn=Nt-ur+1,Kt=nn-xn+1)}yt=new Uint8Array(dt[et-1-on]),on==1&&(ft[et-1].dispose=2),St=new Uint8Array(Kn*Kt*4),n(yt,ut,Ne,St,Kn,Kt,-yn,-Vt,0),Sn=n(Et,ut,Ne,St,Kn,Kt,-yn,-Vt,3)?1:0,Sn==1?g(Et,ut,Ne,St,{x:yn,y:Vt,width:Kn,height:Kt}):n(Et,ut,Ne,St,Kn,Kt,-yn,-Vt,0)}else St=Et.slice(0);ft.push({rect:{x:yn,y:Vt,width:Kn,height:Kt},img:St,blend:Sn,dispose:0})}if(Ke)for(et=0;et<ft.length;et++){if((xt=ft[et]).blend==1)continue;const Et=xt.rect,ct=ft[et-1].rect,yn=Math.min(Et.x,ct.x),Vt=Math.min(Et.y,ct.y),Kn={x:yn,y:Vt,width:Math.max(Et.x+Et.width,ct.x+ct.width)-yn,height:Math.max(Et.y+Et.height,ct.y+ct.height)-Vt};ft[et-1].dispose=1,et-1!=0&&p(dt,ut,Ne,ft,et-1,Kn,Ge),p(dt,ut,Ne,ft,et,Kn,Ge)}let _t=0;if(dt.length!=1)for(var Rt=0;Rt<ft.length;Rt++){var xt;_t+=(xt=ft[Rt]).rect.width*xt.rect.height}return ft}(S,R,M,L,F,X),we={},xe=[],Ce=[];if(T!=0){const ve=[];for(J=0;J<he.length;J++)ve.push(he[J].img.buffer);const dt=function(Ge){let st=0;for(var ft=0;ft<Ge.length;ft++)st+=Ge[ft].byteLength;const et=new Uint8Array(st);let St=0;for(ft=0;ft<Ge.length;ft++){const yt=new Uint8Array(Ge[ft]),_t=yt.length;for(let Rt=0;Rt<_t;Rt+=4){let xt=yt[Rt],Et=yt[Rt+1],ct=yt[Rt+2];const yn=yt[Rt+3];yn==0&&(xt=Et=ct=0),et[St+Rt]=xt,et[St+Rt+1]=Et,et[St+Rt+2]=ct,et[St+Rt+3]=yn}St+=_t}return et.buffer}(ve),ut=_(dt,T);for(J=0;J<ut.plte.length;J++)xe.push(ut.plte[J].est.rgba);let Ne=0;for(J=0;J<he.length;J++){const Ke=(qe=he[J]).img.length;var We=new Uint8Array(ut.inds.buffer,Ne>>2,Ke>>2);Ce.push(We);const Ge=new Uint8Array(ut.abuf,Ne,Ke);ne&&s(qe.img,qe.rect.width,qe.rect.height,xe,Ge,We),qe.img.set(Ge),Ne+=Ke}}else for(W=0;W<he.length;W++){var qe=he[W];const ve=new Uint32Array(qe.img.buffer);var it=qe.rect.width;for(K=ve.length,We=new Uint8Array(K),Ce.push(We),J=0;J<K;J++){const dt=ve[J];if(J!=0&&dt==ve[J-1])We[J]=We[J-1];else if(J>it&&dt==ve[J-it])We[J]=We[J-it];else{let ut=we[dt];if(ut==null&&(we[dt]=ut=xe.length,xe.push(dt),xe.length>=300))break;We[J]=ut}}}const lt=xe.length;for(lt<=256&&z==0&&(Q=lt<=2?1:lt<=4?2:lt<=16?4:8,Q=Math.max(Q,V)),W=0;W<he.length;W++){(qe=he[W]).rect.x,qe.rect.y,it=qe.rect.width;const ve=qe.rect.height;let dt=qe.img;new Uint32Array(dt.buffer);let ut=4*it,Ne=4;if(lt<=256&&z==0){ut=Math.ceil(Q*it/8);var vt=new Uint8Array(ut*ve);const Ke=Ce[W];for(let Ge=0;Ge<ve;Ge++){J=Ge*ut;const st=Ge*it;if(Q==8)for(var Pe=0;Pe<it;Pe++)vt[J+Pe]=Ke[st+Pe];else if(Q==4)for(Pe=0;Pe<it;Pe++)vt[J+(Pe>>1)]|=Ke[st+Pe]<<4-4*(1&Pe);else if(Q==2)for(Pe=0;Pe<it;Pe++)vt[J+(Pe>>2)]|=Ke[st+Pe]<<6-2*(3&Pe);else if(Q==1)for(Pe=0;Pe<it;Pe++)vt[J+(Pe>>3)]|=Ke[st+Pe]<<7-1*(7&Pe)}dt=vt,se=3,Ne=1}else if(re==0&&he.length==1){vt=new Uint8Array(it*ve*3);const Ke=it*ve;for(J=0;J<Ke;J++){const Ge=3*J,st=4*J;vt[Ge]=dt[st],vt[Ge+1]=dt[st+1],vt[Ge+2]=dt[st+2]}dt=vt,se=2,Ne=3,ut=3*it}qe.img=dt,qe.bpl=ut,qe.bpp=Ne}return{ctype:se,depth:Q,plte:xe,frames:he}}function p(S,R,M,T,N,L,F){const X=Uint8Array,V=Uint32Array,z=new X(S[N-1]),ne=new V(S[N-1]),se=N+1<S.length?new X(S[N+1]):null,Q=new X(S[N]),oe=new V(Q.buffer);let W=R,K=M,J=-1,re=-1;for(let we=0;we<L.height;we++)for(let xe=0;xe<L.width;xe++){const Ce=L.x+xe,We=L.y+we,qe=We*R+Ce,it=oe[qe];it==0||T[N-1].dispose==0&&ne[qe]==it&&(se==null||se[4*qe+3]!=0)||(Ce<W&&(W=Ce),Ce>J&&(J=Ce),We<K&&(K=We),We>re&&(re=We))}J==-1&&(W=K=J=re=0),F&&((1&W)==1&&W--,(1&K)==1&&K--),L={x:W,y:K,width:J-W+1,height:re-K+1};const he=T[N];he.rect=L,he.blend=1,he.img=new Uint8Array(L.width*L.height*4),T[N-1].dispose==0?(n(z,R,M,he.img,L.width,L.height,-L.x,-L.y,0),g(Q,R,M,he.img,L)):n(Q,R,M,he.img,L.width,L.height,-L.x,-L.y,0)}function g(S,R,M,T,N){n(S,R,M,T,N.width,N.height,-N.x,-N.y,2)}function m(S,R,M,T,N,L,F){const X=[];let V,z=[0,1,2,3,4];L!=-1?z=[L]:(R*T>5e5||M==1)&&(z=[0]),F&&(V={level:0});const ne=Fz;for(var se=0;se<z.length;se++){for(let W=0;W<R;W++)b(N,S,W,T,M,z[se]);X.push(ne.deflate(N,V))}let Q,oe=1e9;for(se=0;se<X.length;se++)X[se].length<oe&&(Q=se,oe=X[se].length);return X[Q]}function b(S,R,M,T,N,L){const F=M*T;let X=F+M;if(S[X]=L,X++,L==0)if(T<500)for(var V=0;V<T;V++)S[X+V]=R[F+V];else S.set(new Uint8Array(R.buffer,F,T),X);else if(L==1){for(V=0;V<N;V++)S[X+V]=R[F+V];for(V=N;V<T;V++)S[X+V]=R[F+V]-R[F+V-N]+256&255}else if(M==0){for(V=0;V<N;V++)S[X+V]=R[F+V];if(L==2)for(V=N;V<T;V++)S[X+V]=R[F+V];if(L==3)for(V=N;V<T;V++)S[X+V]=R[F+V]-(R[F+V-N]>>1)+256&255;if(L==4)for(V=N;V<T;V++)S[X+V]=R[F+V]-t(R[F+V-N],0,0)+256&255}else{if(L==2)for(V=0;V<T;V++)S[X+V]=R[F+V]+256-R[F+V-T]&255;if(L==3){for(V=0;V<N;V++)S[X+V]=R[F+V]+256-(R[F+V-T]>>1)&255;for(V=N;V<T;V++)S[X+V]=R[F+V]+256-(R[F+V-T]+R[F+V-N]>>1)&255}if(L==4){for(V=0;V<N;V++)S[X+V]=R[F+V]+256-t(0,R[F+V-T],0)&255;for(V=N;V<T;V++)S[X+V]=R[F+V]+256-t(R[F+V-N],R[F+V-T],R[F+V-N-T])&255}}}function _(S,R){const M=new Uint8Array(S),T=M.slice(0),N=new Uint32Array(T.buffer),L=I(T,R),F=L[0],X=L[1],V=M.length,z=new Uint8Array(V>>2);let ne;if(M.length<2e7)for(var se=0;se<V;se+=4)ne=C(F,Q=M[se]*(1/255),oe=M[se+1]*(1/255),W=M[se+2]*(1/255),K=M[se+3]*(1/255)),z[se>>2]=ne.ind,N[se>>2]=ne.est.rgba;else for(se=0;se<V;se+=4){var Q=M[se]*.00392156862745098,oe=M[se+1]*(1/255),W=M[se+2]*(1/255),K=M[se+3]*(1/255);for(ne=F;ne.left;)ne=D(ne.est,Q,oe,W,K)<=0?ne.left:ne.right;z[se>>2]=ne.ind,N[se>>2]=ne.est.rgba}return{abuf:T.buffer,inds:z,plte:X}}function I(S,R,M){M==null&&(M=1e-4);const T=new Uint32Array(S.buffer),N={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};N.bst=Y(S,N.i0,N.i1),N.est=H(N.bst);const L=[N];for(;L.length<R;){let X=0,V=0;for(var F=0;F<L.length;F++)L[F].est.L>X&&(X=L[F].est.L,V=F);if(X<M)break;const z=L[V],ne=B(S,T,z.i0,z.i1,z.est.e,z.est.eMq255);if(z.i0>=ne||z.i1<=ne){z.est.L=0;continue}const se={i0:z.i0,i1:ne,bst:null,est:null,tdst:0,left:null,right:null};se.bst=Y(S,se.i0,se.i1),se.est=H(se.bst);const Q={i0:ne,i1:z.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Q.bst={R:[],m:[],N:z.bst.N-se.bst.N},F=0;F<16;F++)Q.bst.R[F]=z.bst.R[F]-se.bst.R[F];for(F=0;F<4;F++)Q.bst.m[F]=z.bst.m[F]-se.bst.m[F];Q.est=H(Q.bst),z.left=se,z.right=Q,L[V]=se,L.push(Q)}for(L.sort((X,V)=>V.bst.N-X.bst.N),F=0;F<L.length;F++)L[F].ind=F;return[N,L]}function C(S,R,M,T,N){if(S.left==null)return S.tdst=function(se,Q,oe,W,K){const J=Q-se[0],re=oe-se[1],he=W-se[2],we=K-se[3];return J*J+re*re+he*he+we*we}(S.est.q,R,M,T,N),S;const L=D(S.est,R,M,T,N);let F=S.left,X=S.right;L>0&&(F=S.right,X=S.left);const V=C(F,R,M,T,N);if(V.tdst<=L*L)return V;const z=C(X,R,M,T,N);return z.tdst<V.tdst?z:V}function D(S,R,M,T,N){const{e:L}=S;return L[0]*R+L[1]*M+L[2]*T+L[3]*N-S.eMq}function B(S,R,M,T,N,L){for(T-=4;M<T;){for(;q(S,M,N)<=L;)M+=4;for(;q(S,T,N)>L;)T-=4;if(M>=T)break;const F=R[M>>2];R[M>>2]=R[T>>2],R[T>>2]=F,M+=4,T-=4}for(;q(S,M,N)>L;)M-=4;return M+4}function q(S,R,M){return S[R]*M[0]+S[R+1]*M[1]+S[R+2]*M[2]+S[R+3]*M[3]}function Y(S,R,M){const T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N=[0,0,0,0],L=M-R>>2;for(let F=R;F<M;F+=4){const X=S[F]*.00392156862745098,V=S[F+1]*(1/255),z=S[F+2]*(1/255),ne=S[F+3]*(1/255);N[0]+=X,N[1]+=V,N[2]+=z,N[3]+=ne,T[0]+=X*X,T[1]+=X*V,T[2]+=X*z,T[3]+=X*ne,T[5]+=V*V,T[6]+=V*z,T[7]+=V*ne,T[10]+=z*z,T[11]+=z*ne,T[15]+=ne*ne}return T[4]=T[1],T[8]=T[2],T[9]=T[6],T[12]=T[3],T[13]=T[7],T[14]=T[11],{R:T,m:N,N:L}}function H(S){const{R}=S,{m:M}=S,{N:T}=S,N=M[0],L=M[1],F=M[2],X=M[3],V=T==0?0:1/T,z=[R[0]-N*N*V,R[1]-N*L*V,R[2]-N*F*V,R[3]-N*X*V,R[4]-L*N*V,R[5]-L*L*V,R[6]-L*F*V,R[7]-L*X*V,R[8]-F*N*V,R[9]-F*L*V,R[10]-F*F*V,R[11]-F*X*V,R[12]-X*N*V,R[13]-X*L*V,R[14]-X*F*V,R[15]-X*X*V],ne=z,se=P;let Q=[Math.random(),Math.random(),Math.random(),Math.random()],oe=0,W=0;if(T!=0)for(let J=0;J<16&&(Q=se.multVec(ne,Q),W=Math.sqrt(se.dot(Q,Q)),Q=se.sml(1/W,Q),!(J!=0&&Math.abs(W-oe)<1e-9));J++)oe=W;const K=[N*V,L*V,F*V,X*V];return{Cov:z,q:K,e:Q,L:oe,eMq255:se.dot(se.sml(255,K),Q),eMq:se.dot(Q,K),rgba:(Math.round(255*K[3])<<24|Math.round(255*K[2])<<16|Math.round(255*K[1])<<8|Math.round(255*K[0])<<0)>>>0}}var P={multVec:(S,R)=>[S[0]*R[0]+S[1]*R[1]+S[2]*R[2]+S[3]*R[3],S[4]*R[0]+S[5]*R[1]+S[6]*R[2]+S[7]*R[3],S[8]*R[0]+S[9]*R[1]+S[10]*R[2]+S[11]*R[3],S[12]*R[0]+S[13]*R[1]+S[14]*R[2]+S[15]*R[3]],dot:(S,R)=>S[0]*R[0]+S[1]*R[1]+S[2]*R[2]+S[3]*R[3],sml:(S,R)=>[S*R[0],S*R[1],S*R[2],S*R[3]]};rl.encode=function(R,M,T,N,L,F,X){N==null&&(N=0),X==null&&(X=!1);const V=d(R,M,T,N,[!1,!1,!1,0,X,!1]);return f(V,-1),c(V,M,T,L,F)},rl.encodeLL=function(R,M,T,N,L,F,X,V){const z={ctype:0+(N==1?0:2)+(L==0?0:4),depth:F,frames:[]},ne=(N+L)*F,se=ne*M;for(let Q=0;Q<R.length;Q++)z.frames.push({rect:{x:0,y:0,width:M,height:T},img:new Uint8Array(R[Q]),blend:0,dispose:1,bpp:Math.ceil(ne/8),bpl:Math.ceil(se/8)});return f(z,0,!0),c(z,M,T,X,V)},rl.encode.compress=d,rl.encode.dither=s,rl.quantize=_,rl.quantize.getKDtree=I,rl.quantize.getNearest=C})();const JS={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,a=n.getContext("2d").getImageData(0,0,t,r),o=new Uint32Array(a.data.buffer),s=(32*t+31)/32<<2,c=s*r,f=122+c,d=new ArrayBuffer(f),p=new DataView(d),g=1<<20;let m,b,_,I,C=g,D=0,B=0,q=0;function Y(S){p.setUint16(B,S,!0),B+=2}function H(S){p.setUint32(B,S,!0),B+=4}function P(S){B+=S}Y(19778),H(f),P(4),H(122),H(108),H(t),H(-r>>>0),Y(1),Y(32),H(3),H(c),H(2835),H(2835),P(8),H(16711680),H(65280),H(255),H(4278190080),H(1466527264),function S(){for(;D<r&&C>0;){for(I=122+D*s,m=0;m<i;)C--,b=o[q++],_=b>>>24,p.setUint32(I+m,b<<8|_),m+=4;D++}q<o.length?(C=g,setTimeout(S,JS._dly)):e(d)}()},toBlob(n,e){this.toArrayBuffer(n,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var yo={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Uz={[yo.CHROME]:16384,[yo.FIREFOX]:11180,[yo.DESKTOP_SAFARI]:16384,[yo.IE]:8192,[yo.IOS]:4096,[yo.ETC]:8192};const _x=typeof window<"u",eE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,$g=_x&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),zz=(_x||eE)&&($g&&$g.getOriginalSymbol(window,"File")||typeof File<"u"&&File),tE=(_x||eE)&&($g&&$g.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ax(n,e,t=Date.now()){return new Promise(r=>{const i=n.split(","),a=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let s=o.length;const c=new Uint8Array(s);for(;s--;)c[s]=o.charCodeAt(s);const f=new Blob([c],{type:a});f.name=e,f.lastModified=t,r(f)})}function nE(n){return new Promise((e,t)=>{const r=new tE;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)})}function rE(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n})}function ed(){if(ed.cachedResult!==void 0)return ed.cachedResult;let n=yo.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=yo.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=yo.IOS:/Safari/i.test(e)?n=yo.DESKTOP_SAFARI:/Firefox/i.test(e)?n=yo.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=yo.IE),ed.cachedResult=n,ed.cachedResult}function iE(n,e){const t=ed(),r=Uz[t];let i=n,a=e,o=i*a;const s=i>a?a/i:i/a;for(;o>r*r;){const c=(r+i)/2,f=(r+a)/2;c<f?(a=f,i=f*s):(a=c*s,i=c),o=i*a}return{width:i,height:a}}function qm(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function aE(n,e){const{width:t,height:r}=iE(n.width,n.height),[i,a]=qm(t,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(n,0,0,i.width,i.height),i}function hg(){return hg.cachedResult!==void 0||(hg.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),hg.cachedResult}function Yg(n,e={}){return new Promise(function(t,r){let i,a;var o=function(){try{return a=aE(i,e.fileType||n.type),t([i,a])}catch(c){return r(c)}},s=function(c){try{var f=function(d){try{throw d}catch(p){return r(p)}};try{let d;return nE(n).then(function(p){try{return d=p,rE(d).then(function(g){try{return i=g,function(){try{return o()}catch(m){return r(m)}}()}catch(m){return f(m)}},f)}catch(g){return f(g)}},f)}catch(d){f(d)}}catch(d){return r(d)}};try{if(hg()||[yo.DESKTOP_SAFARI,yo.MOBILE_SAFARI].includes(ed()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(c){try{return i=c,o()}catch{return s()}},s)}catch{s()}})}function Xg(n,e,t,r,i=1){return new Promise(function(a,o){let s;if(e==="image/png"){let f,d,p;return f=n.getContext("2d"),{data:d}=f.getImageData(0,0,n.width,n.height),p=rl.encode([d.buffer],n.width,n.height,4096*i),s=new Blob([p],{type:e}),s.name=t,s.lastModified=r,c.call(this)}{let f=function(){return c.call(this)};if(e==="image/bmp")return new Promise(d=>JS.toBlob(n,d)).then((function(d){try{return s=d,s.name=t,s.lastModified=r,f.call(this)}catch(p){return o(p)}}).bind(this),o);{let d=function(){return f.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(p){try{return s=p,s.name=t,s.lastModified=r,d.call(this)}catch(g){return o(g)}}).bind(this),o);{let p;return p=n.toDataURL(e,i),Ax(p,t,r).then((function(g){try{return s=g,d.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function c(){return a(s)}})}function Yl(n){n.width=0,n.height=0}function ch(){return new Promise(function(n,e){let t,r,i,a;return ch.cachedResult!==void 0?n(ch.cachedResult):Ax("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return t=o,Yg(t).then(function(s){try{return r=s[1],Xg(r,t.type,t.name,t.lastModified).then(function(c){try{return i=c,Yl(r),Yg(i).then(function(f){try{return a=f[0],ch.cachedResult=a.width===1&&a.height===2,n(ch.cachedResult)}catch(d){return e(d)}},e)}catch(f){return e(f)}},e)}catch(c){return e(c)}},e)}catch(s){return e(s)}},e)})}function oE(n){return new Promise((e,t)=>{const r=new tE;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let s=2;for(;s<o;){if(a.getUint16(s+2,!1)<=8)return e(-1);const c=a.getUint16(s,!1);if(s+=2,c==65505){if(a.getUint32(s+=2,!1)!=1165519206)return e(-1);const f=a.getUint16(s+=6,!1)==18761;s+=a.getUint32(s+4,f);const d=a.getUint16(s,f);s+=2;for(let p=0;p<d;p++)if(a.getUint16(s+12*p,f)==274)return e(a.getUint16(s+12*p+8,f))}else{if((65280&c)!=65280)break;s+=a.getUint16(s,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)})}function sE(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let a,o=n;return isFinite(i)&&(t>i||r>i)&&([o,a]=qm(t,r),t>r?(o.width=i,o.height=r/t*i):(o.width=t/r*i,o.height=i),a.drawImage(n,0,0,o.width,o.height),Yl(n)),o}function lE(n,e){const{width:t}=n,{height:r}=n,[i,a]=qm(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,r),Yl(n),i}function b4(n,e,t=0){return new Promise(function(r,i){let a,o,s,c,f,d,p,g,m,b,_,I,C,D,B,q,Y,H,P,S;function R(T=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=T,e.onProgress(Math.min(a,100))}function M(T){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(T,a),100),e.onProgress(a)}return a=t,o=e.maxIteration||10,s=1024*e.maxSizeMB*1024,R(),Yg(n,e).then((function(T){try{return[,c]=T,R(),f=sE(c,e),R(),new Promise(function(N,L){var F;if(!(F=e.exifOrientation))return oE(n).then((function(V){try{return F=V,X.call(this)}catch(z){return L(z)}}).bind(this),L);function X(){return N(F)}return X.call(this)}).then((function(N){try{return d=N,R(),ch().then((function(L){try{return p=L?f:lE(f,d),R(),g=e.initialQuality||1,m=e.fileType||n.type,Xg(p,m,n.name,n.lastModified,g).then((function(F){try{{let V=function(){if(o--&&(B>s||B>C)){let ne,se;return ne=S?.95*P.width:P.width,se=S?.95*P.height:P.height,[Y,H]=qm(ne,se),H.drawImage(P,0,0,ne,se),g*=m==="image/png"?.85:.95,Xg(Y,m,n.name,n.lastModified,g).then(function(Q){try{return q=Q,Yl(P),P=Y,B=q.size,M(Math.min(99,Math.floor((D-B)/(D-s)*100))),V}catch(oe){return i(oe)}},i)}return[1]},z=function(){return Yl(P),Yl(Y),Yl(f),Yl(p),Yl(c),M(100),r(q)};if(b=F,R(),_=b.size>s,I=b.size>n.size,!_&&!I)return M(100),r(b);var X;return C=n.size,D=b.size,B=D,P=p,S=!e.alwaysKeepResolution&&_,(X=(function(ne){for(;ne;){if(ne.then)return void ne.then(X,i);try{if(ne.pop){if(ne.length)return ne.pop()?z.call(this):ne;ne=V}else ne=ne.call(this)}catch(se){return i(se)}}}).bind(this))(V)}}catch(V){return i(V)}}).bind(this),i)}catch(F){return i(F)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)}catch(N){return i(N)}}).bind(this),i)})}const Vz=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Pv;function qz(n,e){return new Promise((t,r)=>{Pv||(Pv=function(o){const s=[];return s.push(o),URL.createObjectURL(new Blob(s))}(Vz));const i=new Worker(Pv);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();t(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Oa(n,e){return new Promise(function(t,r){let i,a,o,s,c,f;if(i={...e},o=0,{onProgress:s}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{o=m,typeof s=="function"&&s(o)},!(n instanceof Blob||n instanceof zz))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return b4(n,i).then((function(m){try{return a=m,g.call(this)}catch(b){return r(b)}}).bind(this),r);var d=(function(){try{return g.call(this)}catch(m){return r(m)}}).bind(this),p=function(m){try{return b4(n,i).then(function(b){try{return a=b,d()}catch(_){return r(_)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",qz(n,i).then(function(m){try{return a=m,d()}catch{return p()}},p)}catch{p()}function g(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(a=ZS(n,a))}catch{}return t(a)}})}Oa.getDataUrlFromFile=nE,Oa.getFilefromDataUrl=Ax,Oa.loadImage=rE,Oa.drawImageInCanvas=aE,Oa.drawFileInCanvas=Yg,Oa.canvasToFile=Xg,Oa.getExifOrientation=oE,Oa.handleMaxWidthOrHeight=sE,Oa.followExifOrientation=lE,Oa.cleanupCanvasMemory=Yl,Oa.isAutoOrientationInBrowser=ch,Oa.approximateBelowMaximumCanvasSizeOfBrowser=iE,Oa.copyExifWithoutOrientation=ZS,Oa.getBrowserName=ed,Oa.version="2.0.2";const d1=n=>n.images&&Array.isArray(n.images)?{...n,images:n.images.filter(e=>e&&e.trim()),primaryImage:n.images[0]||null}:n.imageUrl&&n.imageUrl.trim()?{...n,images:[n.imageUrl],primaryImage:n.imageUrl}:{...n,images:[],primaryImage:null},Hz=n=>d1(n).primaryImage,cE=n=>d1(n).images,Wz=async(n,e,t,r,i)=>{try{console.log("🔄 מתחיל migration של מוצרים קיימים...");const a=await r(i(n,"items")),o=[];a.docs.forEach(s=>{const c=s.data();c.images&&Array.isArray(c.images)||c.imageUrl&&c.imageUrl.trim()&&o.push({id:s.id,images:[c.imageUrl]})}),console.log(`📊 נמצאו ${o.length} מוצרים לעדכון`);for(const s of o)await e(t(n,"items",s.id),{images:s.images}),console.log(`✅ עודכן מוצר: ${s.id}`);return console.log("🎉 Migration הושלם בהצלחה!"),{success:!0,updatedCount:o.length}}catch(a){return console.error("❌ שגיאה ב-migration:",a),{success:!1,error:a.message}}},h1=({item:n,width:e="100%",height:t="200px",showNavigation:r=!0,className:i="",style:a={},borderRadius:o="8px"})=>{const s=cE(n),[c,f]=de.useState(0),[d,p]=de.useState(!1),[g,m]=de.useState(!1);if(de.useEffect(()=>{const C=()=>{const D=window.innerWidth<=768,B=window.location.pathname.includes("/management")||document.querySelector(".product-card-mobile")!==null||i.includes("management")||a.managementMode===!0;p(D),m(B)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[i,a]),s.length===0)return y.jsx("div",{style:{width:e,height:t,borderRadius:o,border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",...a},className:i,children:y.jsx("img",{src:"/no-image-available.png",alt:"אין תמונה זמינה",style:{maxWidth:"80%",maxHeight:"80%",objectFit:"contain",opacity:.5}})});if(s.length===1)return y.jsx("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",...a},className:i,children:y.jsx("img",{src:s[0],alt:n.name||"תמונת מוצר",style:{width:"100%",height:"100%",objectFit:"contain",background:"white"}})});const b=()=>{f(C=>(C+1)%s.length)},_=()=>{f(C=>(C-1+s.length)%s.length)},I=C=>{f(C)};return y.jsxs("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",background:"#f3f4f6",...a},className:i,children:[y.jsx("img",{src:s[c],alt:`${n.name||"מוצר"} - תמונה ${c+1}`,style:{width:"100%",height:"100%",objectFit:"contain",transition:"opacity 0.3s ease",background:"white"}}),s.length>1&&y.jsx(y.Fragment,{children:d&&g?y.jsx("button",{onClick:b,style:{position:"absolute",right:"8px",bottom:"8px",background:"rgba(255, 255, 255, 0.9)",color:"#333",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},"aria-label":"תמונה הבאה",children:"›"}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:_,style:{position:"absolute",left:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.9)",C.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.7)",C.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"תמונה קודמת",children:y.jsx(O1,{size:20})}),y.jsx("button",{onClick:b,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.9)",C.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.7)",C.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"תמונה הבאה",children:y.jsx(k1,{size:20})})]})}),!(d&&g)&&s.length>1&&s.length<=5&&y.jsx("div",{style:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"6px",zIndex:10},children:s.map((C,D)=>y.jsx("button",{onClick:()=>I(D),style:{width:"8px",height:"8px",borderRadius:"50%",border:"none",background:D===c?"white":"rgba(255, 255, 255, 0.5)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":`תמונה ${D+1}`},D))}),!(d&&g)&&s.length>5&&y.jsxs("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"bold",zIndex:10},children:[c+1," / ",s.length]}),d&&g&&s.length>1&&y.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5},onTouchStart:C=>{const D=C.touches[0];C.currentTarget.startX=D.clientX},onTouchEnd:C=>{const D=C.changedTouches[0];if(!C.currentTarget.startX)return;const B=C.currentTarget.startX-D.clientX;Math.abs(B)>50&&(B>0?b():_())}}),d&&g&&s.length>1&&y.jsxs("div",{style:{position:"absolute",bottom:"2px",right:"2px",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"1px 4px",borderRadius:"4px",fontSize:"8px",zIndex:10},children:[c+1,"/",s.length]}),y.jsx("div",{tabIndex:0,onKeyDown:C=>{C.key==="ArrowRight"&&b(),C.key==="ArrowLeft"&&_()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",outline:"none"},"aria-label":"גלריית תמונות - השתמש בחצים לניווט"})]})},Gz=async n=>{const e="https://api.cloudinary.com/v1_1/dpegnxew7/image/upload",t=new FormData;return t.append("file",n),t.append("upload_preset","GmachSystem"),(await(await fetch(e,{method:"POST",body:t})).json()).secure_url},$z=({editingItem:n,name:e,quantity:t,imageUrl:r,imageFile:i,onNameChange:a,onQuantityChange:o,onImageUrlChange:s,onImageFileChange:c,onCancel:f,onSubmit:d,publicComment:p,internalComment:g,onPublicCommentChange:m,onInternalCommentChange:b})=>{const _=de.useRef(null),[I,C]=de.useState([]),[D,B]=de.useState(!1);de.useEffect(()=>{if(n){const M=cE(n);C(M.map((T,N)=>({id:Date.now()+N,url:T,isUploaded:!0})))}else C([])},[n]),de.useEffect(()=>{const M=N=>{_.current&&!_.current.contains(N.target)&&f()},T=N=>{N.key==="Escape"&&f()};return document.addEventListener("mousedown",M),document.addEventListener("keydown",T),()=>{document.removeEventListener("mousedown",M),document.removeEventListener("keydown",T)}},[f]);const q=()=>{if(r&&r.trim()){const M={id:Date.now(),url:r.trim(),isUploaded:!0};C(T=>[...T,M]),s({target:{value:""}})}},Y=async M=>{if(M){B(!0);try{const T=await Oa(M,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0}),N=await Gz(T),L={id:Date.now(),url:N,isUploaded:!0};C(F=>[...F,L]),mn.success("התמונה הועלתה בהצלחה!")}catch(T){mn.error("שגיאה בהעלאת התמונה: "+T.message)}finally{B(!1)}}},H=M=>{C(T=>T.filter(N=>N.id!==M))},P=M=>{M!==0&&C(T=>{const N=[...T];return[N[M-1],N[M]]=[N[M],N[M-1]],N})},S=M=>{M!==I.length-1&&C(T=>{const N=[...T];return[N[M],N[M+1]]=[N[M+1],N[M]],N})},R=async M=>{M.preventDefault();const T=I.map(L=>L.url);T[0];const N={name:e,quantity:t,publicComment:p,internalComment:g,images:T,imageUrl:T[0]||null};await d(M,N)};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,direction:"ltr",padding:"1rem"},children:y.jsxs("div",{ref:_,style:{position:"relative",background:"white",padding:"2rem",borderRadius:"12px",width:"95%",maxWidth:"600px",direction:"rtl",textAlign:"initial",maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[y.jsx("button",{onClick:f,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",lineHeight:1,color:"#666",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"סגור",children:"×"}),y.jsx("h3",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",color:"#333"},children:n?"עריכת מוצר":"הוספת מוצר חדש"}),y.jsxs("form",{onSubmit:R,children:[y.jsxs("div",{style:N0,children:[y.jsx("label",{style:D0,children:"שם המוצר:"}),y.jsx("input",{dir:"rtl",type:"text",value:e,onChange:a,required:!0,style:Qd})]}),y.jsxs("div",{style:N0,children:[y.jsx("label",{style:D0,children:"כמות:"}),y.jsx("input",{dir:"rtl",type:"number",value:t,onChange:o,required:!0,style:Qd})]}),y.jsxs("div",{style:N0,children:[y.jsx("label",{style:D0,children:"הערה לפרסום (חיצונית):"}),y.jsx("input",{dir:"rtl",type:"text",value:p,onChange:m,style:Qd})]}),y.jsxs("div",{style:N0,children:[y.jsx("label",{style:D0,children:"הערה פנימית:"}),y.jsx("input",{dir:"rtl",type:"text",value:g,onChange:b,style:Qd})]}),y.jsxs("div",{style:N0,children:[y.jsx("label",{style:D0,children:"תמונות המוצר:"}),y.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[y.jsx("input",{dir:"rtl",type:"text",value:r,onChange:s,placeholder:"הדבק כתובת תמונה (URL)",style:{...Qd,flex:1,margin:0}}),y.jsx("button",{type:"button",onClick:q,disabled:!r.trim(),style:{padding:"8px 12px",backgroundColor:r.trim()?"#1976d2":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.trim()?"pointer":"not-allowed",whiteSpace:"nowrap"},children:"הוסף"})]}),y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("input",{type:"file",accept:"image/*",onChange:M=>{const T=M.target.files[0];T&&(Y(T),M.target.value="")},style:{...Qd,padding:"8px"},disabled:D}),D&&y.jsx("div",{style:{fontSize:"0.875rem",color:"#1976d2",marginTop:"0.5rem"},children:"מעלה תמונה..."})]}),I.length>0&&y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsxs("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:["תמונות (",I.length,")"]}),y.jsx("div",{style:{marginBottom:"1rem"},children:y.jsx(h1,{item:{images:I.map(M=>M.url)},width:"100%",height:"200px",showNavigation:!0})}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:I.map((M,T)=>y.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"0.5rem",background:"#f9fafb",position:"relative"},children:[y.jsx("img",{src:M.url,alt:`תמונה ${T+1}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"4px",marginBottom:"0.5rem"}}),y.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:T+1}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.25rem"},children:[y.jsx("button",{type:"button",onClick:()=>P(T),disabled:T===0,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:T===0?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:T===0?"not-allowed":"pointer",flex:1},children:"↑"}),y.jsx("button",{type:"button",onClick:()=>S(T),disabled:T===I.length-1,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:T===I.length-1?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:T===I.length-1?"not-allowed":"pointer",flex:1},children:"↓"}),y.jsx("button",{type:"button",onClick:()=>H(M.id),style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",flex:1},children:"✕"})]})]},M.id))})]})]}),y.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem",flexWrap:"wrap"},children:[y.jsx("button",{type:"submit",disabled:D,style:{...Yz,minWidth:"120px",opacity:D?.6:1,cursor:D?"not-allowed":"pointer"},children:D?"מעלה...":n?"שמור שינויים":"הוסף מוצר"}),y.jsx("button",{type:"button",onClick:f,disabled:D,style:{...Xz,minWidth:"120px",opacity:D?.6:1,cursor:D?"not-allowed":"pointer"},children:"ביטול"})]})]})]})})},N0={marginBottom:"1.5rem",width:"100%"},D0={display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"1rem"},Qd={width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"16px",boxSizing:"border-box",transition:"border-color 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none"},Yz={padding:"12px 20px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},Xz={padding:"12px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"};var uE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},w4=Pn.createContext&&Pn.createContext(uE),Kz=["attr","size","title"];function Qz(n,e){if(n==null)return{};var t=Zz(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Zz(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Kg(){return Kg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kg.apply(this,arguments)}function _4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_4(Object(t),!0).forEach(function(r){Jz(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Jz(n,e,t){return e=eV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eV(n){var e=tV(n,"string");return typeof e=="symbol"?e:e+""}function tV(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fE(n){return n&&n.map((e,t)=>Pn.createElement(e.tag,Qg({key:t},e.attr),fE(e.child)))}function uc(n){return e=>Pn.createElement(nV,Kg({attr:Qg({},n.attr)},e),fE(n.child))}function nV(n){var e=t=>{var{attr:r,size:i,title:a}=n,o=Qz(n,Kz),s=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),Pn.createElement("svg",Kg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:c,style:Qg(Qg({color:n.color||t.color},t.style),n.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Pn.createElement("title",null,a),n.children)};return w4!==void 0?Pn.createElement(w4.Consumer,null,t=>e(t)):e(uE)}function rV(n){return uc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function iV(n){return uc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function aV(n){return uc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(n)}function oV(n){return uc({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(n)}function sV(n){return uc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}function lV(n){return uc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function cV(n){return uc({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function A4(n){return uc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function uV(n){return uc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(n)}function S4(n){return uc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const fV=({item:n,onClose:e})=>{const[t,r]=de.useState([]),[i,a]=de.useState(!0);de.useEffect(()=>{if(!n)return;(async()=>{a(!0);try{console.log("🔍 מחפש הזמנות פעילות עבור מוצר:",n.name,"ID:",n.id);const f=(await er(vn(Ot,"orders"))).docs.map(g=>({id:g.id,...g.data()})).filter(g=>g.status==="open");console.log("📋 כל ההזמנות הפעילות:",f.length);const d=f.filter(g=>{var b;return(b=g.items)==null?void 0:b.some(_=>_.id===n.id||_.ItemId===n.ItemId)});console.log("🎯 הזמנות שמכילות את המוצר:",d.length);const p=d.map(g=>{const m=g.items.find(b=>b.id===n.id||b.ItemId===n.ItemId);return{...g,itemQuantity:(m==null?void 0:m.quantity)||0}});p.sort((g,m)=>{var I,C;const b=((I=g.createdAt)==null?void 0:I.seconds)||0;return(((C=m.createdAt)==null?void 0:C.seconds)||0)-b}),r(p)}catch(c){console.error("❌ שגיאה בשליפת הזמנות פעילות:",c)}finally{a(!1)}})()},[n]);const o=s=>{if(!s)return"לא צוין";let c;return s.seconds?c=new Date(s.seconds*1e3):typeof s=="string"?c=new Date(s):c=s,isNaN(c.getTime())?"תאריך לא תקין":c.toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"})};return n?y.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1500,padding:"1rem"},onClick:s=>{s.target===s.currentTarget&&e()},children:[y.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"12px",width:"95%",maxWidth:"800px",maxHeight:"85vh",overflowY:"auto",padding:"0",direction:"rtl",boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},onClick:s=>s.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1.5rem",borderRadius:"12px 12px 0 0",position:"relative"},children:[y.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",left:"1rem",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",color:"white",fontSize:"1.2rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.background="rgba(255,255,255,0.3)"},onMouseLeave:s=>{s.target.style.background="rgba(255,255,255,0.2)"},children:y.jsx(cV,{})}),y.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",textAlign:"center",paddingRight:"3rem"},children:['📋 הזמנות פעילות עבור "',n.name,'"']}),y.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,textAlign:"center",fontSize:"0.95rem"},children:["מזהה מוצר: ",n.ItemId]})]}),y.jsx("div",{style:{padding:"1.5rem"},children:i?y.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #f3f3f3",borderTop:"3px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"טוען הזמנות פעילות..."]}):t.length===0?y.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[y.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",color:"#ddd"},children:"📄"}),y.jsx("h3",{style:{color:"#666",marginBottom:"0.5rem"},children:"לא נמצאו הזמנות פעילות"}),y.jsx("p",{style:{color:"#999",margin:0},children:"המוצר הזה כרגע לא נמצא באף הזמנה פעילה"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center",border:"1px solid #e9ecef"},children:y.jsxs("p",{style:{margin:0,color:"#495057",fontSize:"1rem",fontWeight:"500"},children:["📊 נמצא ב-",t.length," הזמנ",t.length===1?"ה":"ות"," פעיל",t.length===1?"ה":"ות",y.jsx("br",{}),y.jsxs("span",{style:{fontSize:"0.9rem",color:"#6c757d"},children:['סה"כ כמות מושאלת: ',t.reduce((s,c)=>s+c.itemQuantity,0)]})]})}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:window.innerWidth<=768?"0 0.5rem":"0"},children:t.map((s,c)=>y.jsxs("div",{style:{border:"1px solid #e9ecef",borderRadius:"10px",padding:"1.25rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:f=>{f.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)",f.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:f=>{f.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",f.currentTarget.style.transform="translateY(0)"},children:[y.jsxs("div",{style:{position:"absolute",top:"0.75rem",left:"0.75rem",background:"#667eea",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold"},children:["#",s.simpleId||s.id.slice(0,6)]}),y.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem",marginBottom:"1rem"},children:y.jsx("div",{style:{background:"#28a745",color:"white",padding:window.innerWidth<=768?"0.3rem 0.6rem":"0.4rem 0.8rem",borderRadius:"15px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold",textAlign:"center",lineHeight:"1.2",wordBreak:"break-word",maxWidth:window.innerWidth<=768?"180px":"220px",margin:"0 auto",display:"inline-block"},children:window.innerWidth<=768?y.jsxs(y.Fragment,{children:["כמות: ",s.itemQuantity]}):y.jsxs(y.Fragment,{children:["מוצר: ",n.name,y.jsx("br",{}),"כמות: ",s.itemQuantity]})})}),y.jsxs("div",{style:{marginBottom:"1rem",textAlign:"center"},children:[y.jsxs("h4",{style:{margin:"0 0 0.75rem 0",color:"#333",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y.jsx(S4,{color:"#667eea"}),s.clientName]}),y.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"#555"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(sV,{color:"#28a745",size:14}),y.jsx("span",{children:s.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(oV,{color:"#dc3545",size:14}),y.jsx("span",{children:s.address})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(S4,{color:"#6c757d",size:14}),y.jsxs("span",{children:["מתנדבת: ",s.volunteerName]})]})]})]}),y.jsxs("div",{style:{background:"#f8f9fa",padding:"0.75rem",borderRadius:"6px",border:"1px solid #e9ecef",textAlign:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500",color:"#495057"},children:[y.jsx(rV,{color:"#667eea",size:14}),"תאריכי השאלה"]}),y.jsxs("div",{style:{fontSize:"0.85rem",color:"#6c757d",lineHeight:"1.4"},children:[y.jsxs("div",{children:["📤 לקיחה: ",o(s.pickupDate)]}),y.jsxs("div",{children:["🎉 אירוע: ",o(s.eventDate)]}),y.jsxs("div",{children:["📥 החזרה: ",o(s.returnDate)]}),s.eventType&&y.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:"500",color:"#495057"},children:["🎊 סוג אירוע: ",s.eventType]})]})]})]},s.id))})]})}),y.jsx("div",{style:{background:"#f8f9fa",padding:"1rem 1.5rem",borderRadius:"0 0 12px 12px",borderTop:"1px solid #e9ecef",textAlign:"center"},children:y.jsx("button",{onClick:e,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"25px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.transform="translateY(-1px)",s.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)"},onMouseLeave:s=>{s.target.style.transform="translateY(0)",s.target.style.boxShadow="none"},children:"סגור"})})]}),y.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):null},E4=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),b=Math.min(a,m+p-1);b-m+1<p&&(m=Math.max(1,b-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let I=m;I<=b;I++)_.push(I);return b<a&&(b<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return y.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[y.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",d," מתוך ",e," מוצרים"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[y.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(k1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return y.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:y.jsx(xx,{size:o?16:20})},`dots-${g}`);const m=p===n;return y.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),y.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(O1,{size:o?16:20})})]})]})},dV=()=>{const[n,e]=de.useState(""),[t,r]=de.useState(""),[i,a]=de.useState([]),[o,s]=de.useState([]),[c,f]=de.useState(""),[d,p]=de.useState(""),[g,m]=de.useState(null),[b,_]=de.useState(""),[I,C]=de.useState(!1),[D,B]=de.useState(!1),[q,Y]=de.useState(null),[H,P]=de.useState(""),[S,R]=de.useState(""),[M,T]=de.useState(1),[N,L]=de.useState(1),[F,X]=de.useState(window.innerWidth<=768),[V,z]=de.useState(!1),[ne,se]=de.useState(null),{user:Q}=cc(),oe=(Q==null?void 0:Q.username)||"משתמש לא ידוע",W=de.useRef(null),K=F?12:20,J=F?12:20;de.useEffect(()=>{const Ne=()=>{const Ke=window.innerWidth<=768;Ke!==F&&(X(Ke),T(1),L(1))};return window.addEventListener("resize",Ne),()=>window.removeEventListener("resize",Ne)},[F]),de.useEffect(()=>{T(1)},[c]),de.useEffect(()=>{L(1)},[d]),de.useEffect(()=>{const Ne=document.createElement("style");return Ne.innerHTML=`
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] { -moz-appearance: textfield; }
      
      /* רספונסיביות משופרת */
      .products-grid-mobile {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.2rem;
        padding: 0;
      }
      
      .product-card-mobile {
        min-height: 380px;
        padding: 1rem;
      }
      
      .product-card-mobile img {
        height: 140px;
      }
      
      .product-card-mobile h3 {
        font-size: 1rem;
        margin: 0.5rem 0;
      }
      
      .product-card-mobile p {
        font-size: 0.875rem;
        margin: 0.25rem 0;
      }
      
      .product-card-mobile .button-group {
        flex-direction: row;
        gap: 0.5rem;
        width: 100%;
      }
      
      .product-card-mobile button {
        font-size: 0.8rem;
        padding: 6px 10px;
        flex: 1;
      }
      
      /* מובייל בלבד */
      @media (max-width: 768px) {
        .products-grid-mobile {
          grid-template-columns: 1fr 1fr !important;
          gap: 0.75rem !important;
          padding: 0 0.5rem;
        }
        
        .product-card-mobile {
          min-height: 320px !important;
          padding: 0.75rem !important;
        }
        
        .product-card-mobile img {
          height: 100px !important;
        }
        
        .product-card-mobile h3 {
          font-size: 0.9rem !important;
          margin: 0.5rem 0 !important;
        }
        
        .product-card-mobile p {
          font-size: 0.8rem !important;
          margin: 0.25rem 0 !important;
        }
        
        .product-card-mobile .button-group {
          flex-direction: column !important;
          gap: 0.3rem !important;
        }
        
        .product-card-mobile button {
          font-size: 0.75rem !important;
          padding: 4px 8px !important;
          width: 100% !important;
        }
      }
    `,document.head.appendChild(Ne),()=>document.head.removeChild(Ne)},[]);const re=async()=>{const Ke=(await er(vn(Ot,"orders"))).docs.map(et=>et.data()).filter(et=>et.status==="open"),Ge=new Set;Ke.forEach(et=>{var St;(St=et.items)==null||St.forEach(yt=>{Ge.add(yt.id)})});const ft=(await er(vn(Ot,"items"))).docs.filter(et=>et.data().isDeleted!==!0).map(et=>{const St=et.data(),yt=d1(St);return{id:et.id,...yt,inUse:Ge.has(et.id)}});a(ft)},he=async()=>{const Ke=(await er(vn(Ot,"deletedItems"))).docs.map(Ge=>{const st=Ge.data();return{id:Ge.id,...d1(st)}});s(Ke)};de.useEffect(()=>{const Ne=async()=>{try{console.log("🔄 בדיקת migration למבנה תמונות חדש...");const Ge=await Wz(Ot,Za,wr,er,vn);console.log("📊 תוצאות migration:",Ge)}catch{console.log("⚠️ Migration כבר רץ או שאין צורך בו")}};localStorage.getItem("imagesMigrationComplete")?(re(),he()):Ne().then(()=>{localStorage.setItem("imagesMigrationComplete","true"),re(),he()})},[]),de.useEffect(()=>{const Ne=Ge=>{D&&W.current&&!W.current.contains(Ge.target)&&B(!1)},Ke=Ge=>{Ge.key==="Escape"&&B(!1)};return document.addEventListener("mousedown",Ne),document.addEventListener("keydown",Ke),()=>{document.removeEventListener("mousedown",Ne),document.removeEventListener("keydown",Ke)}},[D]);const we=i.filter(Ne=>Ne.name.toLowerCase().includes(c.toLowerCase())),xe=o.filter(Ne=>Ne.name.toLowerCase().includes(d.toLowerCase())),Ce=(M-1)*K,We=Ce+K,qe=we.slice(Ce,We),it=(N-1)*J,lt=it+J,vt=xe.slice(it,lt),Pe=Ne=>{console.log("🔍 פותח מודל הזמנות פעילות עבור:",Ne.name),se(Ne),z(!0)},ve=async Ne=>{if(window.confirm("האם את/ה בטוח/ה שברצונך למחוק את המוצר?"))try{await PF(Ne,oe),mn.success("המוצר הוסר מהרשימה."),re(),he();const Ke=we.length-1,Ge=Math.ceil(Ke/K);M>Ge&&Ge>0&&T(Ge)}catch{mn.error("שגיאה במחיקת המוצר")}},dt=async Ne=>{if(window.confirm("האם ברצונך להשיב את המוצר למלאי?"))try{await LF(Ne,oe),mn.success("המוצר הושב למלאי בהצלחה."),re(),he();const Ke=xe.length-1,Ge=Math.ceil(Ke/J);N>Ge&&Ge>0&&L(Ge)}catch{mn.error("שגיאה בהחזרת המוצר")}},ut=async(Ne,Ke=null)=>{var Ge,st,ft;Ne.preventDefault();try{const et=Ke||{name:n,quantity:parseInt(t),images:b?[b]:[],imageUrl:b,publicComment:H,internalComment:S},St=tc(vn(Ot,"items"),ll("name","==",et.name.trim())),yt=await er(St),Rt=(await er(vn(Ot,"items"))).docs.map(Et=>Et.data().ItemId).filter(Et=>typeof Et=="number").sort((Et,ct)=>ct-Et),xt=Rt.length>0?Rt[0]+1:1;if(q)await Za(wr(Ot,"items",q.id),{name:et.name,quantity:parseInt(et.quantity),images:et.images||[],imageUrl:((Ge=et.images)==null?void 0:Ge[0])||null,publicComment:et.publicComment||"",internalComment:et.internalComment||"",updatedBy:oe,updatedAt:pi()}),mn.success("המוצר עודכן בהצלחה");else if(yt.empty)await Th(vn(Ot,"items"),{name:et.name,quantity:parseInt(et.quantity),images:et.images||[],imageUrl:((st=et.images)==null?void 0:st[0])||null,publicComment:et.publicComment||"",internalComment:et.internalComment||"",createdBy:oe,updatedBy:oe,createdAt:pi(),updatedAt:pi(),ItemId:xt}),mn.success(`המוצר "${et.name}" נוסף בהצלחה עם ${((ft=et.images)==null?void 0:ft.length)||0} תמונות`);else{const Et=yt.docs[0].data();Lz.confirmAlert({title:"המוצר כבר קיים",message:`המוצר "${et.name}" כבר קיים בכמות ${Et.quantity}.
האם להוסיף ${et.quantity}?`,buttons:[{label:"כן",onClick:async()=>{var ct;await Th(vn(Ot,"items"),{name:et.name,quantity:parseInt(et.quantity),images:et.images||[],imageUrl:((ct=et.images)==null?void 0:ct[0])||null,publicComment:et.publicComment||"",internalComment:et.internalComment||"",createdBy:oe,updatedBy:oe,createdAt:pi(),updatedAt:pi(),ItemId:xt}),mn.success("הכמות עודכנה בהצלחה"),re(),he()}},{label:"לא",onClick:()=>mn.info("בוטל")}]});return}e(""),r(""),m(null),_(""),P(""),R(""),C(!1),Y(null),re(),he()}catch(et){console.error("שגיאה בהוספת המוצר:",et),mn.error("הוספת המוצר נכשלה")}};return y.jsxs("div",{className:"page-container",style:{padding:"1rem",direction:"rtl"},children:[y.jsxs("div",{style:{width:"100%"},children:[y.jsx("h2",{children:"ניהול מוצרים"}),y.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[y.jsxs("button",{onClick:()=>{Y(null),e(""),r(""),_(""),m(null),C(!0),P(""),R("")},className:"btn-primary",style:{backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[y.jsx(lV,{size:14})," הוספת מוצר"]}),y.jsxs("button",{onClick:()=>B(!0),className:"btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[y.jsx(A4,{size:14})," מוצרים שנמחקו"]})]}),y.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצר...",value:c,onChange:Ne=>f(Ne.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",marginBottom:"1rem",boxSizing:"border-box"}}),c&&y.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9"},children:y.jsxs("p",{style:{margin:0,color:"#0369a1"},children:["🔍 נמצאו ",we.length,' מוצרים עבור "',c,'"']})}),y.jsx("div",{className:"products-grid-mobile",children:qe.length===0?y.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:c?`לא נמצאו מוצרים לחיפוש "${c}"`:"לא נמצא מוצרים במלאי."}):qe.map(Ne=>y.jsxs("div",{className:"product-card product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",transition:"transform 0.2s",boxSizing:"border-box"},children:[y.jsx(h1,{item:Ne,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),y.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1rem"},children:Ne.name}),y.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",Ne.quantity]}),Ne.internalComment&&y.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"0.25rem",margin:"0.25rem 0"},children:["📌 ",Ne.internalComment]}),y.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",margin:"0.25rem 0"},children:["מזהה מוצר: ",Ne.ItemId]}),Ne.inUse&&y.jsx("p",{style:{color:"#d97706",fontWeight:"bold",fontSize:"0.85rem",margin:"0.25rem 0"},children:"🕐 מוצר זה נמצא בהזמנות פעילות"}),y.jsxs("div",{className:"button-group",style:{display:"flex",gap:"0.4rem",marginTop:"auto",width:"100%",flexDirection:"column"},children:[Ne.inUse&&y.jsxs("button",{onClick:()=>Pe(Ne),style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:F?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:F?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",width:"100%",minHeight:F?"28px":"32px"},children:[y.jsx(aV,{size:F?12:14})," ראה הזמנות"]}),y.jsxs("div",{style:{display:"flex",gap:"0.4rem",width:"100%"},children:[y.jsxs("button",{onClick:()=>{Y(Ne),e(Ne.name),r(Ne.quantity.toString()),_(Hz(Ne)||""),m(null),C(!0),P(Ne.publicComment||""),R(Ne.internalComment||"")},style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:F?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:F?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:F?"28px":"32px"},children:[y.jsx(iV,{size:F?12:14})," עריכה"]}),y.jsxs("button",{onClick:()=>ve(Ne.id),style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:F?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:F?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:F?"28px":"32px"},children:[y.jsx(A4,{size:F?12:14})," מחיקה"]})]})]})]},Ne.id))}),y.jsx(E4,{currentPage:M,totalItems:we.length,itemsPerPage:K,onPageChange:T})]}),D&&y.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},children:y.jsxs("div",{className:"modal-content",ref:W,style:{position:"relative",backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80%",overflowY:"auto",padding:"2rem",direction:"rtl"},children:[y.jsx("h2",{children:"מוצרים שנמחקו"}),y.jsx("button",{onClick:()=>B(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"×"}),y.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצרים שנמחקו...",value:d,onChange:Ne=>p(Ne.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",margin:"1rem 0",boxSizing:"border-box"}}),d&&y.jsx("div",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fca5a5"},children:y.jsxs("p",{style:{margin:0,color:"#dc2626"},children:["🔍 נמצאו ",xe.length,' מוצרים שנמחקו עבור "',d,'"']})}),y.jsx("div",{className:"products-grid-mobile",children:vt.length===0?y.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:d?`לא נמצאו מוצרים שנמחקו לחיפוש "${d}"`:"אין פריטים שנמחקו."}):vt.map(Ne=>y.jsxs("div",{className:"product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",boxSizing:"border-box"},children:[y.jsx(h1,{item:Ne,width:"100%",height:"120px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),y.jsx("h3",{style:{margin:"0.5rem 0"},children:Ne.name}),y.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",Ne.quantity]}),y.jsxs("button",{onClick:()=>dt(Ne.id),style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",marginTop:"auto"},children:[y.jsx(uV,{size:14})," השבה"]})]},Ne.id))}),y.jsx(E4,{currentPage:N,totalItems:xe.length,itemsPerPage:J,onPageChange:L})]})}),I&&y.jsx($z,{editingItem:q,name:n,quantity:t,imageUrl:b,imageFile:g,publicComment:H,internalComment:S,onNameChange:Ne=>e(Ne.target.value.trimStart()),onQuantityChange:Ne=>r(Ne.target.value.trimStart()),onImageUrlChange:Ne=>_(Ne.target.value),onImageFileChange:Ne=>m(Ne.target.files[0]),onPublicCommentChange:Ne=>P(Ne.target.value),onInternalCommentChange:Ne=>R(Ne.target.value),onCancel:()=>C(!1),onSubmit:ut}),V&&y.jsx(fV,{item:ne,onClose:()=>{z(!1),se(null)}}),y.jsx(Nz,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},hV=()=>{const{user:n}=cc(),[e,t]=de.useState([]),[r,i]=de.useState(""),[a,o]=de.useState(null);de.useEffect(()=>{(async()=>{const m=vn(Ot,"users"),_=(await er(m)).docs.map(I=>({id:I.id,...I.data()}));t(_)})()},[]),de.useEffect(()=>{(async()=>{try{const m=wr(Ot,"settings","onlineOrdering"),b=await Ih(m);b.exists()&&o(b.data().enabled)}catch(m){console.error("שגיאה בטעינת ההגדרה:",m)}})()},[]);const s=async(g,m)=>{const b=wr(Ot,"users",g);await Za(b,{role:m}),t(e.map(_=>_.id===g?{..._,role:m}:_))},c=async()=>{try{const g=!a;await Za(wr(Ot,"settings","onlineOrdering"),{enabled:g}),o(g)}catch(g){alert("שגיאה בעדכון ההגדרה: "+g.message)}},f={container:{padding:"1rem",direction:"rtl",maxWidth:"100%",overflow:"hidden"},header:{fontSize:"1.8rem",marginBottom:"2rem",textAlign:"center",color:"#333",fontWeight:"600"},toggleBox:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"2rem",backgroundColor:"#f8f9fa",padding:"16px 24px",borderRadius:"15px",border:"2px solid #e9ecef",maxWidth:"400px",margin:"0 auto 2rem auto",boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},toggleSwitch:{width:"50px",height:"28px",borderRadius:"50px",backgroundColor:a?"#4caf50":"#e74c3c",position:"relative",cursor:"pointer",transition:"0.3s",flexShrink:0},toggleCircle:{position:"absolute",top:"3px",left:a?"25px":"3px",width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"white",transition:"0.3s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},searchBox:{padding:"12px 16px",width:"100%",maxWidth:"500px",borderRadius:"10px",border:"2px solid #ddd",fontSize:"16px",marginBottom:"2rem",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s ease",display:"block",margin:"0 auto 2rem auto"},tableContainer:{overflowX:"auto",marginTop:"1rem",borderRadius:"12px",border:"1px solid #ddd",maxWidth:"1200px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},table:{width:"100%",borderCollapse:"collapse",minWidth:"600px",backgroundColor:"white"},th:{border:"1px solid #ddd",padding:"12px 8px",backgroundColor:"#f8f9fa",fontWeight:"600",fontSize:"0.9rem",textAlign:"center",whiteSpace:"nowrap"},td:{border:"1px solid #ddd",padding:"12px 8px",textAlign:"center",fontSize:"0.85rem",verticalAlign:"middle"},button:{padding:"8px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"100px",transition:"opacity 0.2s ease"},promoteBtn:{backgroundColor:"#28a745",color:"white"},demoteBtn:{backgroundColor:"#dc3545",color:"white"}};if(!n||n.role!=="MainAdmin")return y.jsx("div",{style:{padding:"2rem",textAlign:"center",direction:"rtl"},children:y.jsx("p",{children:"אין לך גישה לעמוד זה"})});const d=e.filter(g=>g.username&&g.username.toLowerCase().includes(r.toLowerCase())),p=({user:g})=>y.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[y.jsx("h4",{style:{margin:0,color:"#333",fontSize:"1.1rem"},children:g.username}),y.jsx("span",{style:{backgroundColor:g.role==="MainAdmin"?"#6f42c1":g.role==="GmachAdmin"?"#17a2b8":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"500"},children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role})]}),y.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"0.9rem",wordBreak:"break-all"},children:["📧 ",g.email]}),g.role!=="MainAdmin"&&y.jsx("div",{style:{marginTop:"1rem"},children:g.role==="User"?y.jsx("button",{style:{...f.button,...f.promoteBtn,width:"100%"},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):y.jsx("button",{style:{...f.button,...f.demoteBtn,width:"100%"},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})})]});return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-table {
              display: none !important;
            }
            .mobile-cards {
              display: block !important;
            }
            .container-mobile {
              padding: 1rem !important;
            }
            .header-mobile {
              font-size: 1.5rem !important;
              margin-bottom: 1.5rem !important;
            }
            .toggle-mobile {
              max-width: 100% !important;
              margin: 0 0 1.5rem 0 !important;
              padding: 12px 16px !important;
            }
            .search-mobile {
              margin: 0 0 1.5rem 0 !important;
              max-width: 100% !important;
            }
          }
          
          @media (min-width: 769px) {
            .desktop-table {
              display: table !important;
            }
            .mobile-cards {
              display: none !important;
            }
            .container-desktop {
              padding: 2rem !important;
              max-width: 1400px !important;
              margin: 0 auto !important;
            }
          }
          
          input:focus {
            border-color: #1976d2 !important;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
          }
          
          button:hover {
            opacity: 0.9;
          }
          
          button:active {
            transform: translateY(1px);
          }
        `}),y.jsxs("div",{style:f.container,className:"container-mobile container-desktop",children:[y.jsx("h2",{style:f.header,className:"header-mobile",children:"ניהול משתמשים"}),a!==null&&y.jsxs("div",{style:f.toggleBox,className:"toggle-mobile",children:[y.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"הזמנות דרך האתר:"}),y.jsx("div",{style:f.toggleSwitch,onClick:c,children:y.jsx("div",{style:f.toggleCircle})})]}),y.jsx("input",{type:"text",placeholder:"חיפוש משתמש...",value:r,onChange:g=>i(g.target.value),style:f.searchBox,className:"search-mobile",dir:"rtl"}),y.jsx("div",{style:f.tableContainer,className:"desktop-table",children:y.jsxs("table",{style:f.table,children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{style:f.th,children:"שם משתמש"}),y.jsx("th",{style:f.th,children:"אימייל"}),y.jsx("th",{style:f.th,children:"הרשאה"}),y.jsx("th",{style:f.th,children:"פעולה"})]})}),y.jsx("tbody",{children:d.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"לא נמצאו משתמשים תואמים"})}):d.map(g=>y.jsxs("tr",{children:[y.jsx("td",{style:f.td,children:g.username}),y.jsx("td",{style:f.td,children:g.email}),y.jsx("td",{style:f.td,children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role}),y.jsxs("td",{style:f.td,children:[g.role!=="MainAdmin"&&(g.role==="User"?y.jsx("button",{style:{...f.button,...f.promoteBtn},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):y.jsx("button",{style:{...f.button,...f.demoteBtn},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})),g.role==="MainAdmin"&&y.jsx("span",{style:{color:"#999",fontSize:"0.8rem"},children:"---"})]})]},g.id))})]})}),y.jsx("div",{className:"mobile-cards",style:{display:"none"},children:d.length===0?y.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",backgroundColor:"white",borderRadius:"12px",border:"1px solid #ddd"},children:"לא נמצאו משתמשים תואמים"}):d.map(g=>y.jsx(p,{user:g},g.id))})]})]})},pV=({item:n,isOpen:e,onClose:t})=>!e||!n?null:y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",direction:"rtl"},onClick:t,children:y.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative",padding:"1.5rem",boxShadow:"0 20px 40px rgba(0,0,0,0.3)"},onClick:r=>r.stopPropagation(),children:[y.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",left:"1rem",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1001,transition:"background 0.2s ease"},onMouseEnter:r=>r.target.style.background="#e5e7eb",onMouseLeave:r=>r.target.style.background="#f3f4f6",children:y.jsx(Fm,{size:20})}),y.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"2rem",alignItems:"flex-start"},children:[y.jsx("div",{style:{flex:window.innerWidth<=768?"none":"1",width:window.innerWidth<=768?"100%":"400px"},children:y.jsx(h1,{item:n,width:"100%",height:window.innerWidth<=768?"300px":"400px",showNavigation:!0,style:{borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})}),y.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[y.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",textAlign:"center"},children:n.name}),y.jsx("div",{style:{backgroundColor:"#f8fafc",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:y.jsxs("p",{style:{fontSize:"1.1rem",color:"#4b5563",margin:0,textAlign:"center"},children:[y.jsx("strong",{children:"מזהה מוצר:"})," ",n.ItemId]})}),n.publicComment&&y.jsxs("div",{style:{backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[y.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#1e40af",fontSize:"1rem"},children:"📝 הערות"}),y.jsx("p",{style:{margin:0,color:"#1e3a8a",fontSize:"1rem"},children:n.publicComment})]})]})]})]})}),gV=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),b=Math.min(a,m+p-1);b-m+1<p&&(m=Math.max(1,b-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let I=m;I<=b;I++)_.push(I);return b<a&&(b<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return y.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[y.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",d," מתוך ",e," מוצרים"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[y.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(k1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return y.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:y.jsx(xx,{size:o?16:20})},`dots-${g}`);const m=p===n;return y.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),y.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(O1,{size:o?16:20})})]})]})},mV=()=>{const[n,e]=de.useState([]),[t,r]=de.useState(""),[i,a]=de.useState(!0),[o,s]=de.useState(null),[c,f]=de.useState(!1),[d,p]=de.useState(1),[g,m]=de.useState(window.innerWidth<=768),b=g?12:20;de.useEffect(()=>{const Y=()=>{const H=window.innerWidth<=768;H!==g&&(m(H),p(1))};return window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[g]),de.useEffect(()=>{p(1)},[t]),de.useEffect(()=>{const Y=vn(Ot,"items"),H=$8(Y,P=>{const S=P.docs.map(R=>{const M=R.data(),T=d1(M);return{id:R.id,...T}}).filter(R=>R.isDeleted!==!0);e(S),a(!1)});return()=>H()},[]);const _=(Y,H)=>{H.target.closest("button")||H.target.closest("[data-navigation]")||(s(Y),f(!0))},I=()=>{f(!1),s(null)};if(i)return y.jsxs("div",{style:{padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),y.jsx("h2",{children:"טוען קטלוג"}),y.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]});const C=n.filter(Y=>Y.name.toLowerCase().includes(t.toLowerCase())),D=(d-1)*b,B=D+b,q=C.slice(D,B);return y.jsxs("div",{style:{padding:"2rem",direction:"rtl",textAlign:"right",paddingLeft:"1rem",paddingRight:"1rem"},children:[y.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"2rem",color:"#1f2937"},children:"📋 קטלוג מוצרים"}),y.jsx("input",{type:"text",placeholder:"חיפוש פריט",value:t,onChange:Y=>r(Y.target.value),dir:"rtl",style:{padding:"12px 16px",width:"100%",marginBottom:"1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:Y=>Y.target.style.borderColor="#3b82f6",onBlur:Y=>Y.target.style.borderColor="#e5e7eb"}),t&&y.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #0ea5e9",textAlign:"center"},children:y.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"1rem"},children:["🔍 נמצאו ",C.length,' מוצרים עבור "',t,'"']})}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:q.length===0?y.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",marginTop:"3rem",padding:"2rem"},children:t?y.jsxs(y.Fragment,{children:[y.jsxs("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:['לא נמצאו פריטים עבור "',t,'"']}),y.jsx("p",{style:{color:"#9ca3af"},children:"נסה לחפש במילות מפתח אחרות"})]}):y.jsxs(y.Fragment,{children:[y.jsx("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:"לא נמצאו פריטים"}),y.jsx("p",{style:{color:"#9ca3af"},children:"אנא נסה לחפש שוב או צור קשר עם המנהלים"})]})}):q.map(Y=>y.jsxs("div",{style:{border:"1px solid #e5e7eb",padding:"0.8rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"all 0.3s ease-in-out",minHeight:"250px",maxWidth:"100%",cursor:"pointer"},onMouseEnter:H=>{H.currentTarget.style.transform="scale(1.05) translateY(-8px)",H.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.2)",H.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:H=>{H.currentTarget.style.transform="scale(1) translateY(0)",H.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",H.currentTarget.style.borderColor="#e5e7eb"},onClick:H=>_(Y,H),children:[y.jsx(h1,{item:Y,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem",borderRadius:"4px"}}),y.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[y.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"1.1rem",lineHeight:"1.3",textAlign:"center",color:"#1f2937",fontWeight:"700"},children:Y.name}),Y.publicComment&&y.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",margin:"0.3rem 0",fontStyle:"italic",background:"#f9fafb",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:["📝 ",Y.publicComment]}),y.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",textAlign:"center",marginTop:"auto",paddingTop:"0.5rem"},children:["מזהה: ",Y.ItemId]})]})]},Y.ItemId))}),y.jsx(gV,{currentPage:d,totalItems:C.length,itemsPerPage:b,onPageChange:p}),y.jsx(pV,{item:o,isOpen:c,onClose:I}),y.jsx("style",{jsx:!0,children:`
        @media (max-width: 768px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.8rem !important;
          }
        }
        
        @media (max-width: 480px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
          }
        }
      `})]})},vV="modulepreload",yV=function(n){return"/"+n},C4={},zy=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(f=>{if(f=yV(f),f in C4)return;C4[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":vV,d||(g.as="script"),g.crossOrigin="",g.href=f,c&&g.setAttribute("nonce",c),document.head.appendChild(g),d)return new Promise((m,b)=>{g.addEventListener("load",m),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function lr(n){"@babel/helpers - typeof";return lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(n)}var Ma=Uint8Array,Xo=Uint16Array,Sx=Int32Array,Hm=new Ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wm=new Ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Vy=new Ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dE=function(n,e){for(var t=new Xo(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Sx(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},hE=dE(Hm,2),pE=hE.b,qy=hE.r;pE[28]=258,qy[258]=28;var gE=dE(Wm,0),xV=gE.b,I4=gE.r,Hy=new Xo(32768);for(var Nr=0;Nr<32768;++Nr){var $u=(Nr&43690)>>1|(Nr&21845)<<1;$u=($u&52428)>>2|($u&13107)<<2,$u=($u&61680)>>4|($u&3855)<<4,Hy[Nr]=(($u&65280)>>8|($u&255)<<8)>>1}var nc=function(n,e,t){for(var r=n.length,i=0,a=new Xo(e);i<r;++i)n[i]&&++a[n[i]-1];var o=new Xo(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(t){s=new Xo(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],d=e-n[i],p=o[n[i]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)s[Hy[p]>>c]=f}else for(s=new Xo(r),i=0;i<r;++i)n[i]&&(s[i]=Hy[o[n[i]-1]++]>>15-n[i]);return s},mf=new Ma(288);for(var Nr=0;Nr<144;++Nr)mf[Nr]=8;for(var Nr=144;Nr<256;++Nr)mf[Nr]=9;for(var Nr=256;Nr<280;++Nr)mf[Nr]=7;for(var Nr=280;Nr<288;++Nr)mf[Nr]=8;var p1=new Ma(32);for(var Nr=0;Nr<32;++Nr)p1[Nr]=5;var bV=nc(mf,9,0),wV=nc(mf,9,1),_V=nc(p1,5,0),AV=nc(p1,5,1),Lv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},el=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Mv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Ex=function(n){return(n+7)/8|0},mE=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ma(n.subarray(e,t))},SV=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],il=function(n,e,t){var r=new Error(e||SV[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,il),!t)throw r;return r},EV=function(n,e,t,r){var i=n.length,a=0;if(!i||e.f&&!e.l)return t||new Ma(0);var o=!t,s=o||e.i!=2,c=e.i;o&&(t=new Ma(i*3));var f=function(qe){var it=t.length;if(qe>it){var lt=new Ma(Math.max(it*2,qe));lt.set(t),t=lt}},d=e.f||0,p=e.p||0,g=e.b||0,m=e.l,b=e.d,_=e.m,I=e.n,C=i*8;do{if(!m){d=el(n,p,1);var D=el(n,p+1,3);if(p+=3,D)if(D==1)m=wV,b=AV,_=9,I=5;else if(D==2){var H=el(n,p,31)+257,P=el(n,p+10,15)+4,S=H+el(n,p+5,31)+1;p+=14;for(var R=new Ma(S),M=new Ma(19),T=0;T<P;++T)M[Vy[T]]=el(n,p+T*3,7);p+=P*3;for(var N=Lv(M),L=(1<<N)-1,F=nc(M,N,1),T=0;T<S;){var X=F[el(n,p,L)];p+=X&15;var B=X>>4;if(B<16)R[T++]=B;else{var V=0,z=0;for(B==16?(z=3+el(n,p,3),p+=2,V=R[T-1]):B==17?(z=3+el(n,p,7),p+=3):B==18&&(z=11+el(n,p,127),p+=7);z--;)R[T++]=V}}var ne=R.subarray(0,H),se=R.subarray(H);_=Lv(ne),I=Lv(se),m=nc(ne,_,1),b=nc(se,I,1)}else il(1);else{var B=Ex(p)+4,q=n[B-4]|n[B-3]<<8,Y=B+q;if(Y>i){c&&il(0);break}s&&f(g+q),t.set(n.subarray(B,Y),g),e.b=g+=q,e.p=p=Y*8,e.f=d;continue}if(p>C){c&&il(0);break}}s&&f(g+131072);for(var Q=(1<<_)-1,oe=(1<<I)-1,W=p;;W=p){var V=m[Mv(n,p)&Q],K=V>>4;if(p+=V&15,p>C){c&&il(0);break}if(V||il(2),K<256)t[g++]=K;else if(K==256){W=p,m=null;break}else{var J=K-254;if(K>264){var T=K-257,re=Hm[T];J=el(n,p,(1<<re)-1)+pE[T],p+=re}var he=b[Mv(n,p)&oe],we=he>>4;he||il(3),p+=he&15;var se=xV[we];if(we>3){var re=Wm[we];se+=Mv(n,p)&(1<<re)-1,p+=re}if(p>C){c&&il(0);break}s&&f(g+131072);var xe=g+J;if(g<se){var Ce=a-se,We=Math.min(se,xe);for(Ce+g<0&&il(3);g<We;++g)t[g]=r[Ce+g]}for(;g<xe;++g)t[g]=t[g-se]}}e.l=m,e.p=W,e.b=g,e.f=d,m&&(d=1,e.m=_,e.d=b,e.n=I)}while(!d);return g!=t.length&&o?mE(t,0,g):t.subarray(0,g)},qc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},O0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},jv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:yE,l:0};if(i==1){var o=new Ma(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(Y,H){return Y.f-H.f}),t.push({s:-1,f:25001});var s=t[0],c=t[1],f=0,d=1,p=2;for(t[0]={s:-1,f:s.f+c.f,l:s,r:c};d!=i-1;)s=t[t[f].f<t[p].f?f++:p++],c=t[f!=d&&t[f].f<t[p].f?f++:p++],t[d++]={s:-1,f:s.f+c.f,l:s,r:c};for(var g=a[0].s,r=1;r<i;++r)a[r].s>g&&(g=a[r].s);var m=new Xo(g+1),b=Wy(t[d-1],m,0);if(b>e){var r=0,_=0,I=b-e,C=1<<I;for(a.sort(function(H,P){return m[P.s]-m[H.s]||H.f-P.f});r<i;++r){var D=a[r].s;if(m[D]>e)_+=C-(1<<b-m[D]),m[D]=e;else break}for(_>>=I;_>0;){var B=a[r].s;m[B]<e?_-=1<<e-m[B]++-1:++r}for(;r>=0&&_;--r){var q=a[r].s;m[q]==e&&(--m[q],++_)}b=e}return{t:new Ma(m),l:b}},Wy=function(n,e,t){return n.s==-1?Math.max(Wy(n.l,e,t+1),Wy(n.r,e,t+1)):e[n.s]=t},T4=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Xo(++e),r=0,i=n[0],a=1,o=function(c){t[r++]=c},s=1;s<=e;++s)if(n[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=n[s]}return{c:t.subarray(0,r),n:e}},k0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},vE=function(n,e,t){var r=t.length,i=Ex(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},R4=function(n,e,t,r,i,a,o,s,c,f,d){qc(e,d++,t),++i[256];for(var p=jv(i,15),g=p.t,m=p.l,b=jv(a,15),_=b.t,I=b.l,C=T4(g),D=C.c,B=C.n,q=T4(_),Y=q.c,H=q.n,P=new Xo(19),S=0;S<D.length;++S)++P[D[S]&31];for(var S=0;S<Y.length;++S)++P[Y[S]&31];for(var R=jv(P,7),M=R.t,T=R.l,N=19;N>4&&!M[Vy[N-1]];--N);var L=f+5<<3,F=k0(i,mf)+k0(a,p1)+o,X=k0(i,g)+k0(a,_)+o+14+3*N+k0(P,M)+2*P[16]+3*P[17]+7*P[18];if(c>=0&&L<=F&&L<=X)return vE(e,d,n.subarray(c,c+f));var V,z,ne,se;if(qc(e,d,1+(X<F)),d+=2,X<F){V=nc(g,m,0),z=g,ne=nc(_,I,0),se=_;var Q=nc(M,T,0);qc(e,d,B-257),qc(e,d+5,H-1),qc(e,d+10,N-4),d+=14;for(var S=0;S<N;++S)qc(e,d+3*S,M[Vy[S]]);d+=3*N;for(var oe=[D,Y],W=0;W<2;++W)for(var K=oe[W],S=0;S<K.length;++S){var J=K[S]&31;qc(e,d,Q[J]),d+=M[J],J>15&&(qc(e,d,K[S]>>5&127),d+=K[S]>>12)}}else V=bV,z=mf,ne=_V,se=p1;for(var S=0;S<s;++S){var re=r[S];if(re>255){var J=re>>18&31;O0(e,d,V[J+257]),d+=z[J+257],J>7&&(qc(e,d,re>>23&31),d+=Hm[J]);var he=re&31;O0(e,d,ne[he]),d+=se[he],he>3&&(O0(e,d,re>>5&8191),d+=Wm[he])}else O0(e,d,V[re]),d+=z[re]}return O0(e,d,V[256]),d+z[256]},CV=new Sx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yE=new Ma(0),IV=function(n,e,t,r,i,a){var o=a.z||n.length,s=new Ma(r+o+5*(1+Math.ceil(o/7e3))+i),c=s.subarray(r,s.length-i),f=a.l,d=(a.r||0)&7;if(e){d&&(c[0]=a.r>>3);for(var p=CV[e-1],g=p>>13,m=p&8191,b=(1<<t)-1,_=a.p||new Xo(32768),I=a.h||new Xo(b+1),C=Math.ceil(t/3),D=2*C,B=function(vt){return(n[vt]^n[vt+1]<<C^n[vt+2]<<D)&b},q=new Sx(25e3),Y=new Xo(288),H=new Xo(32),P=0,S=0,R=a.i||0,M=0,T=a.w||0,N=0;R+2<o;++R){var L=B(R),F=R&32767,X=I[L];if(_[F]=X,I[L]=F,T<=R){var V=o-R;if((P>7e3||M>24576)&&(V>423||!f)){d=R4(n,c,0,q,Y,H,S,M,N,R-N,d),M=P=S=0,N=R;for(var z=0;z<286;++z)Y[z]=0;for(var z=0;z<30;++z)H[z]=0}var ne=2,se=0,Q=m,oe=F-X&32767;if(V>2&&L==B(R-oe))for(var W=Math.min(g,V)-1,K=Math.min(32767,R),J=Math.min(258,V);oe<=K&&--Q&&F!=X;){if(n[R+ne]==n[R+ne-oe]){for(var re=0;re<J&&n[R+re]==n[R+re-oe];++re);if(re>ne){if(ne=re,se=oe,re>W)break;for(var he=Math.min(oe,re-2),we=0,z=0;z<he;++z){var xe=R-oe+z&32767,Ce=_[xe],We=xe-Ce&32767;We>we&&(we=We,X=xe)}}}F=X,X=_[F],oe+=F-X&32767}if(se){q[M++]=268435456|qy[ne]<<18|I4[se];var qe=qy[ne]&31,it=I4[se]&31;S+=Hm[qe]+Wm[it],++Y[257+qe],++H[it],T=R+ne,++P}else q[M++]=n[R],++Y[n[R]]}}for(R=Math.max(R,T);R<o;++R)q[M++]=n[R],++Y[n[R]];d=R4(n,c,f,q,Y,H,S,M,N,R-N,d),f||(a.r=d&7|c[d/8|0]<<3,d-=7,a.h=I,a.p=_,a.i=R,a.w=T)}else{for(var R=a.w||0;R<o+f;R+=65535){var lt=R+65535;lt>=o&&(c[d/8|0]=f,lt=o),d=vE(c,d+1,n.subarray(R,lt))}a.i=o}return mE(s,0,r+Ex(d)+i)},xE=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},TV=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new Ma(a.length+n.length);o.set(a),o.set(n,a.length),n=o,i.w=a.length}return IV(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},bE=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},RV=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=xE();i.p(e.dictionary),bE(n,2,i.d())}},NV=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&il(6,"invalid zlib data"),(n[1]>>5&1)==1&&il(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Gy(n,e){e||(e={});var t=xE();t.p(n);var r=TV(n,e,e.dictionary?6:2,4);return RV(r,e),bE(r,r.length-4,t.d()),r}function DV(n,e){return EV(n.subarray(NV(n),-4),{i:2},e,e)}var OV=typeof TextDecoder<"u"&&new TextDecoder,kV=0;try{OV.decode(yE,{stream:!0}),kV=1}catch{}var Gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Bv(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var br={log:Bv,warn:function(n){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):Bv.call(null,arguments))},error:function(n){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):Bv(n))}};function Fv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Xf(r.response,e,t)},r.onerror=function(){br.error("could not download file")},r.send()}function N4(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Yp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Q0,$y,Xf=Gt.saveAs||((typeof window>"u"?"undefined":lr(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Gt.URL||Gt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?N4(i.href)?Fv(n,e,t):Yp(i,i.target="_blank"):Yp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Yp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(N4(n))Fv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Yp(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:lr(a)!=="object"&&(br.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Fv(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(Gt.HTMLElement)||Gt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":lr(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var d=s.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},s.readAsDataURL(n)}else{var c=Gt.URL||Gt.webkitURL,f=c.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function wE(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,o=i.exec(n);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return s.length==1&&(s="0"+s),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+s+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Uv(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Ta(t,r,i,a,e[0],7,-680876936),a=Ta(a,t,r,i,e[1],12,-389564586),i=Ta(i,a,t,r,e[2],17,606105819),r=Ta(r,i,a,t,e[3],22,-1044525330),t=Ta(t,r,i,a,e[4],7,-176418897),a=Ta(a,t,r,i,e[5],12,1200080426),i=Ta(i,a,t,r,e[6],17,-1473231341),r=Ta(r,i,a,t,e[7],22,-45705983),t=Ta(t,r,i,a,e[8],7,1770035416),a=Ta(a,t,r,i,e[9],12,-1958414417),i=Ta(i,a,t,r,e[10],17,-42063),r=Ta(r,i,a,t,e[11],22,-1990404162),t=Ta(t,r,i,a,e[12],7,1804603682),a=Ta(a,t,r,i,e[13],12,-40341101),i=Ta(i,a,t,r,e[14],17,-1502002290),t=Ra(t,r=Ta(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Ra(a,t,r,i,e[6],9,-1069501632),i=Ra(i,a,t,r,e[11],14,643717713),r=Ra(r,i,a,t,e[0],20,-373897302),t=Ra(t,r,i,a,e[5],5,-701558691),a=Ra(a,t,r,i,e[10],9,38016083),i=Ra(i,a,t,r,e[15],14,-660478335),r=Ra(r,i,a,t,e[4],20,-405537848),t=Ra(t,r,i,a,e[9],5,568446438),a=Ra(a,t,r,i,e[14],9,-1019803690),i=Ra(i,a,t,r,e[3],14,-187363961),r=Ra(r,i,a,t,e[8],20,1163531501),t=Ra(t,r,i,a,e[13],5,-1444681467),a=Ra(a,t,r,i,e[2],9,-51403784),i=Ra(i,a,t,r,e[7],14,1735328473),t=Na(t,r=Ra(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Na(a,t,r,i,e[8],11,-2022574463),i=Na(i,a,t,r,e[11],16,1839030562),r=Na(r,i,a,t,e[14],23,-35309556),t=Na(t,r,i,a,e[1],4,-1530992060),a=Na(a,t,r,i,e[4],11,1272893353),i=Na(i,a,t,r,e[7],16,-155497632),r=Na(r,i,a,t,e[10],23,-1094730640),t=Na(t,r,i,a,e[13],4,681279174),a=Na(a,t,r,i,e[0],11,-358537222),i=Na(i,a,t,r,e[3],16,-722521979),r=Na(r,i,a,t,e[6],23,76029189),t=Na(t,r,i,a,e[9],4,-640364487),a=Na(a,t,r,i,e[12],11,-421815835),i=Na(i,a,t,r,e[15],16,530742520),t=Da(t,r=Na(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Da(a,t,r,i,e[7],10,1126891415),i=Da(i,a,t,r,e[14],15,-1416354905),r=Da(r,i,a,t,e[5],21,-57434055),t=Da(t,r,i,a,e[12],6,1700485571),a=Da(a,t,r,i,e[3],10,-1894986606),i=Da(i,a,t,r,e[10],15,-1051523),r=Da(r,i,a,t,e[1],21,-2054922799),t=Da(t,r,i,a,e[8],6,1873313359),a=Da(a,t,r,i,e[15],10,-30611744),i=Da(i,a,t,r,e[6],15,-1560198380),r=Da(r,i,a,t,e[13],21,1309151649),t=Da(t,r,i,a,e[4],6,-145523070),a=Da(a,t,r,i,e[11],10,-1120210379),i=Da(i,a,t,r,e[2],15,718787259),r=Da(r,i,a,t,e[9],21,-343485551),n[0]=tf(t,n[0]),n[1]=tf(r,n[1]),n[2]=tf(i,n[2]),n[3]=tf(a,n[3])}function Gm(n,e,t,r,i,a){return e=tf(tf(e,n),tf(r,a)),tf(e<<i|e>>>32-i,t)}function Ta(n,e,t,r,i,a,o){return Gm(e&t|~e&r,n,e,i,a,o)}function Ra(n,e,t,r,i,a,o){return Gm(e&r|t&~r,n,e,i,a,o)}function Na(n,e,t,r,i,a,o){return Gm(e^t^r,n,e,i,a,o)}function Da(n,e,t,r,i,a,o){return Gm(t^(e|~r),n,e,i,a,o)}function _E(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Uv(r,PV(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Uv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Uv(r,i),r}function PV(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Q0=Gt.atob.bind(Gt),$y=Gt.btoa.bind(Gt);var D4="0123456789abcdef".split("");function LV(n){for(var e="",t=0;t<4;t++)e+=D4[n>>8*t+4&15]+D4[n>>8*t&15];return e}function MV(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Yy(n){return _E(n).map(MV).join("")}var jV=function(n){for(var e=0;e<n.length;e++)n[e]=LV(n[e]);return n.join("")}(_E("hello"))!="5d41402abc4b2a76b9719d911017c592";function tf(n,e){if(jV){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Xy(n,e){var t,r,i,a;if(n!==t){for(var o=(i=n,a=1+(256/n.length>>0),new Array(a+1).join(i)),s=[],c=0;c<256;c++)s[c]=c;var f=0;for(c=0;c<256;c++){var d=s[c];f=(f+d+o.charCodeAt(c))%256,s[c]=s[f],s[f]=d}t=n,r=s}else s=r;var p=e.length,g=0,m=0,b="";for(c=0;c<p;c++)m=(m+(d=s[g=(g+1)%256]))%256,s[g]=s[m],s[m]=d,o=s[(s[g]+s[m])%256],b+=String.fromCharCode(e.charCodeAt(c)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var O4={print:4,modify:8,copy:16,"annot-forms":32};function ih(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(s){if(O4.perm!==void 0)throw new Error("Invalid permission: "+s);i+=O4[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=Yy(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Xy(this.encryptionKey,this.padding)}function ah(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function k4(n){if(lr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var o=e[t][a];try{o[0].apply(n,r)}catch(s){Gt.console&&br.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Zg(n){if(!(this instanceof Zg))return new Zg(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function AE(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Kf(n,e,t,r,i){if(!(this instanceof Kf))return new Kf(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,AE.call(this,r,i)}function uh(n,e,t,r,i){if(!(this instanceof uh))return new uh(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,AE.call(this,r,i)}function Wt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,c=16,f="S",d=null;lr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),s=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),f=n.defaultPathOperation||"S"),o=n.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=k4;var b="1.3",_=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(k){b=k};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return I};var C=m.__private__.getPageFormat=function(k){return I[k]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},B=D.COMPAT;function q(){this.saveGraphicsState(),ve(new bt(ct,0,0,-ct,0,Vi()*ct).toString()+" cm"),this.setFontSize(this.getFontSize()/ct),f="n",B=D.ADVANCED}function Y(){this.restoreGraphicsState(),f="S",B=D.COMPAT}var H=m.__private__.combineFontStyleAndFontWeight=function(k,te){if(k=="bold"&&te=="normal"||k=="bold"&&te==400||k=="normal"&&te=="italic"||k=="bold"&&te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return te&&(k=te==400||te==="normal"?k==="italic"?"italic":"normal":te!=700&&te!=="bold"||k!=="normal"?(te==700?"bold":te)+""+k:"bold"),k};m.advancedAPI=function(k){var te=B===D.COMPAT;return te&&q.call(this),typeof k!="function"||(k(this),te&&Y.call(this)),this},m.compatAPI=function(k){var te=B===D.ADVANCED;return te&&Y.call(this),typeof k!="function"||(k(this),te&&q.call(this)),this},m.isAdvancedAPI=function(){return B===D.ADVANCED};var P,S=function(k){if(B!==D.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(k,te){var me=e||te;if(isNaN(k)||isNaN(me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(me).replace(/0+$/,"")};P=m.hpf=m.__private__.hpf=typeof c=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return R(k,c)}:c==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return R(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return R(k,16)};var M=m.f2=m.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return R(k,2)},T=m.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return R(k,3)},N=m.scale=m.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return B===D.COMPAT?k*ct:B===D.ADVANCED?k:void 0},L=function(k){return B===D.COMPAT?Vi()-k:B===D.ADVANCED?k:void 0},F=function(k){return N(L(k))};m.__private__.setPrecision=m.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var X,V="00000000000000000000000000000000",z=m.__private__.getFileId=function(){return V},ne=m.__private__.setFileId=function(k){return V=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(nr=new ih(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};m.setFileId=function(k){return ne(k),this},m.getFileId=function(){return z()};var se=m.__private__.convertDateToPDFDate=function(k){var te=k.getTimezoneOffset(),me=te<0?"+":"-",be=Math.floor(Math.abs(te/60)),Te=Math.abs(te%60),Ve=[me,J(be),"'",J(Te),"'"].join("");return["D:",k.getFullYear(),J(k.getMonth()+1),J(k.getDate()),J(k.getHours()),J(k.getMinutes()),J(k.getSeconds()),Ve].join("")},Q=m.__private__.convertPDFDateToDate=function(k){var te=parseInt(k.substr(2,4),10),me=parseInt(k.substr(6,2),10)-1,be=parseInt(k.substr(8,2),10),Te=parseInt(k.substr(10,2),10),Ve=parseInt(k.substr(12,2),10),at=parseInt(k.substr(14,2),10);return new Date(te,me,be,Te,Ve,at,0)},oe=m.__private__.setCreationDate=function(k){var te;if(k===void 0&&(k=new Date),k instanceof Date)te=se(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");te=k}return X=te},W=m.__private__.getCreationDate=function(k){var te=X;return k==="jsDate"&&(te=Q(X)),te};m.setCreationDate=function(k){return oe(k),this},m.getCreationDate=function(k){return W(k)};var K,J=m.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},re=m.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},he=0,we=[],xe=[],Ce=0,We=[],qe=[],it=!1,lt=xe,vt=function(){he=0,Ce=0,xe=[],we=[],We=[],Ji=Dr(),vi=Dr()};m.__private__.setCustomOutputDestination=function(k){it=!0,lt=k};var Pe=function(k){it||(lt=k)};m.__private__.resetCustomOutputDestination=function(){it=!1,lt=xe};var ve=m.__private__.out=function(k){return k=k.toString(),Ce+=k.length+1,lt.push(k),lt},dt=m.__private__.write=function(k){return ve(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},ut=m.__private__.getArrayBuffer=function(k){for(var te=k.length,me=new ArrayBuffer(te),be=new Uint8Array(me);te--;)be[te]=k.charCodeAt(te);return me},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ne};var Ke=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(k){return Ke=B===D.ADVANCED?k/ct:k,this};var Ge,st=m.__private__.getFontSize=m.getFontSize=function(){return B===D.COMPAT?Ke:Ke*ct},ft=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(k){return ft=k,this},m.__private__.getR2L=m.getR2L=function(){return ft};var et,St=m.__private__.setZoomMode=function(k){var te=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))Ge=k;else if(isNaN(k)){if(te.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');Ge=k}else Ge=parseInt(k,10)};m.__private__.getZoomMode=function(){return Ge};var yt,_t=m.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');et=k};m.__private__.getPageMode=function(){return et};var Rt=m.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');yt=k};m.__private__.getLayoutMode=function(){return yt},m.__private__.setDisplayMode=m.setDisplayMode=function(k,te,me){return St(k),Rt(te),_t(me),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(k){if(Object.keys(xt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[k]},m.__private__.getDocumentProperties=function(){return xt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(k){for(var te in xt)xt.hasOwnProperty(te)&&k[te]&&(xt[te]=k[te]);return this},m.__private__.setDocumentProperty=function(k,te){if(Object.keys(xt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[k]=te};var Et,ct,yn,Vt,Kn,Kt={},Sn={},mi=[],on={},pa={},In={},jr={},ur=null,xn=0,Nt=[],nn=new k4(m),Ei=n.hotfixes||[],jn={},vr={},Ua=[],bt=function k(te,me,be,Te,Ve,at){if(!(this instanceof k))return new k(te,me,be,Te,Ve,at);isNaN(te)&&(te=1),isNaN(me)&&(me=0),isNaN(be)&&(be=0),isNaN(Te)&&(Te=1),isNaN(Ve)&&(Ve=0),isNaN(at)&&(at=0),this._matrix=[te,me,be,Te,Ve,at]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(k)},bt.prototype.multiply=function(k){var te=k.sx*this.sx+k.shy*this.shx,me=k.sx*this.shy+k.shy*this.sy,be=k.shx*this.sx+k.sy*this.shx,Te=k.shx*this.shy+k.sy*this.sy,Ve=k.tx*this.sx+k.ty*this.shx+this.tx,at=k.tx*this.shy+k.ty*this.sy+this.ty;return new bt(te,me,be,Te,Ve,at)},bt.prototype.decompose=function(){var k=this.sx,te=this.shy,me=this.shx,be=this.sy,Te=this.tx,Ve=this.ty,at=Math.sqrt(k*k+te*te),pt=(k/=at)*me+(te/=at)*be;me-=k*pt,be-=te*pt;var w=Math.sqrt(me*me+be*be);return pt/=w,k*(be/=w)<te*(me/=w)&&(k=-k,te=-te,pt=-pt,at=-at),{scale:new bt(at,0,0,w,0,0),translate:new bt(1,0,0,1,Te,Ve),rotate:new bt(k,te,-te,k,0,0),skew:new bt(1,0,pt,1,0,0)}},bt.prototype.toString=function(k){return this.join(" ")},bt.prototype.inversed=function(){var k=this.sx,te=this.shy,me=this.shx,be=this.sy,Te=this.tx,Ve=this.ty,at=1/(k*be-te*me),pt=be*at,w=-te*at,U=-me*at,$=k*at;return new bt(pt,w,U,$,-pt*Te-U*Ve,-w*Te-$*Ve)},bt.prototype.applyToPoint=function(k){var te=k.x*this.sx+k.y*this.shx+this.tx,me=k.x*this.shy+k.y*this.sy+this.ty;return new Ps(te,me)},bt.prototype.applyToRectangle=function(k){var te=this.applyToPoint(k),me=this.applyToPoint(new Ps(k.x+k.w,k.y+k.h));return new wl(te.x,te.y,me.x-te.x,me.y-te.y)},bt.prototype.clone=function(){var k=this.sx,te=this.shy,me=this.shx,be=this.sy,Te=this.tx,Ve=this.ty;return new bt(k,te,me,be,Te,Ve)},m.Matrix=bt;var Gn=m.matrixMult=function(k,te){return te.multiply(k)},$n=new bt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=$n;var yr=function(k,te){if(!pa[k]){var me=(te instanceof Kf?"Sh":"P")+(Object.keys(on).length+1).toString(10);te.id=me,pa[k]=me,on[me]=te,nn.publish("addPattern",te)}};m.ShadingPattern=Kf,m.TilingPattern=uh,m.addShadingPattern=function(k,te){return S("addShadingPattern()"),yr(k,te),this},m.beginTilingPattern=function(k){S("beginTilingPattern()"),os(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},m.endTilingPattern=function(k,te){S("endTilingPattern()"),te.stream=qe[K].join(`
`),yr(k,te),nn.publish("endTilingPattern",te),Ua.pop().restore()};var Er=m.__private__.newObject=function(){var k=Dr();return Gr(k,!0),k},Dr=m.__private__.newObjectDeferred=function(){return he++,we[he]=function(){return Ce},he},Gr=function(k,te){return te=typeof te=="boolean"&&te,we[k]=Ce,te&&ve(k+" 0 obj"),k},Is=m.__private__.newAdditionalObject=function(){var k={objId:Dr(),content:""};return We.push(k),k},Ji=Dr(),vi=Dr(),ti=m.__private__.decodeColorString=function(k){var te=k.split(" ");if(te.length!==2||te[1]!=="g"&&te[1]!=="G")te.length===5&&(te[4]==="k"||te[4]==="K")&&(te=[(1-te[0])*(1-te[3]),(1-te[1])*(1-te[3]),(1-te[2])*(1-te[3]),"r"]);else{var me=parseFloat(te[0]);te=[me,me,me,"r"]}for(var be="#",Te=0;Te<3;Te++)be+=("0"+Math.floor(255*parseFloat(te[Te])).toString(16)).slice(-2);return be},$r=m.__private__.encodeColorString=function(k){var te;typeof k=="string"&&(k={ch1:k});var me=k.ch1,be=k.ch2,Te=k.ch3,Ve=k.ch4,at=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof me=="string"&&me.charAt(0)!=="#"){var pt=new wE(me);if(pt.ok)me=pt.toHex();else if(!/^\d*\.?\d*$/.test(me))throw new Error('Invalid color "'+me+'" passed to jsPDF.encodeColorString.')}if(typeof me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(me)&&(me="#"+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]),typeof me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(me)){var w=parseInt(me.substr(1),16);me=w>>16&255,be=w>>8&255,Te=255&w}if(be===void 0||Ve===void 0&&me===be&&be===Te)if(typeof me=="string")te=me+" "+at[0];else switch(k.precision){case 2:te=M(me/255)+" "+at[0];break;case 3:default:te=T(me/255)+" "+at[0]}else if(Ve===void 0||lr(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return te=["1.","1.","1.",at[1]].join(" ");if(typeof me=="string")te=[me,be,Te,at[1]].join(" ");else switch(k.precision){case 2:te=[M(me/255),M(be/255),M(Te/255),at[1]].join(" ");break;default:case 3:te=[T(me/255),T(be/255),T(Te/255),at[1]].join(" ")}}else if(typeof me=="string")te=[me,be,Te,Ve,at[2]].join(" ");else switch(k.precision){case 2:te=[M(me),M(be),M(Te),M(Ve),at[2]].join(" ");break;case 3:default:te=[T(me),T(be),T(Te),T(Ve),at[2]].join(" ")}return te},ni=m.__private__.getFilters=function(){return o},fr=m.__private__.putStream=function(k){var te=(k=k||{}).data||"",me=k.filters||ni(),be=k.alreadyAppliedFilters||[],Te=k.addLength1||!1,Ve=te.length,at=k.objectId,pt=function(Ut){return Ut};if(d!==null&&at===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(pt=nr.encryptor(at,0));var w={};me===!0&&(me=["FlateEncode"]);var U=k.additionalKeyValues||[],$=(w=Wt.API.processDataByFilters!==void 0?Wt.API.processDataByFilters(te,me):{data:te,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(w.data.length!==0&&(U.push({key:"Length",value:w.data.length}),Te===!0&&U.push({key:"Length1",value:Ve})),$.length!=0)if($.split("/").length-1==1)U.push({key:"Filter",value:$});else{U.push({key:"Filter",value:"["+$+"]"});for(var ce=0;ce<U.length;ce+=1)if(U[ce].key==="DecodeParms"){for(var Ie=[],Me=0;Me<w.reverseChain.split("/").length-1;Me+=1)Ie.push("null");Ie.push(U[ce].value),U[ce].value="["+Ie.join(" ")+"]"}}ve("<<");for(var ot=0;ot<U.length;ot++)ve("/"+U[ot].key+" "+U[ot].value);ve(">>"),w.data.length!==0&&(ve("stream"),ve(pt(w.data)),ve("endstream"))},Bn=m.__private__.putPage=function(k){var te=k.number,me=k.data,be=k.objId,Te=k.contentsObjId;Gr(be,!0),ve("<</Type /Page"),ve("/Parent "+k.rootDictionaryObjId+" 0 R"),ve("/Resources "+k.resourceDictionaryObjId+" 0 R"),ve("/MediaBox ["+parseFloat(P(k.mediaBox.bottomLeftX))+" "+parseFloat(P(k.mediaBox.bottomLeftY))+" "+P(k.mediaBox.topRightX)+" "+P(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&ve("/CropBox ["+P(k.cropBox.bottomLeftX)+" "+P(k.cropBox.bottomLeftY)+" "+P(k.cropBox.topRightX)+" "+P(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&ve("/BleedBox ["+P(k.bleedBox.bottomLeftX)+" "+P(k.bleedBox.bottomLeftY)+" "+P(k.bleedBox.topRightX)+" "+P(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&ve("/TrimBox ["+P(k.trimBox.bottomLeftX)+" "+P(k.trimBox.bottomLeftY)+" "+P(k.trimBox.topRightX)+" "+P(k.trimBox.topRightY)+"]"),k.artBox!==null&&ve("/ArtBox ["+P(k.artBox.bottomLeftX)+" "+P(k.artBox.bottomLeftY)+" "+P(k.artBox.topRightX)+" "+P(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&ve("/UserUnit "+k.userUnit),nn.publish("putPage",{objId:be,pageContext:Nt[te],pageNumber:te,page:me}),ve("/Contents "+Te+" 0 R"),ve(">>"),ve("endobj");var Ve=me.join(`
`);return B===D.ADVANCED&&(Ve+=`
Q`),Gr(Te,!0),fr({data:Ve,filters:ni(),objectId:Te}),ve("endobj"),be},Co=m.__private__.putPages=function(){var k,te,me=[];for(k=1;k<=xn;k++)Nt[k].objId=Dr(),Nt[k].contentsObjId=Dr();for(k=1;k<=xn;k++)me.push(Bn({number:k,data:qe[k],objId:Nt[k].objId,contentsObjId:Nt[k].contentsObjId,mediaBox:Nt[k].mediaBox,cropBox:Nt[k].cropBox,bleedBox:Nt[k].bleedBox,trimBox:Nt[k].trimBox,artBox:Nt[k].artBox,userUnit:Nt[k].userUnit,rootDictionaryObjId:Ji,resourceDictionaryObjId:vi}));Gr(Ji,!0),ve("<</Type /Pages");var be="/Kids [";for(te=0;te<xn;te++)be+=me[te]+" 0 R ";ve(be+"]"),ve("/Count "+xn),ve(">>"),ve("endobj"),nn.publish("postPutPages")},Io=function(k){nn.publish("putFont",{font:k,out:ve,newObject:Er,putStream:fr}),k.isAlreadyPutted!==!0&&(k.objectNumber=Er(),ve("<<"),ve("/Type /Font"),ve("/BaseFont /"+ah(k.postScriptName)),ve("/Subtype /Type1"),typeof k.encoding=="string"&&ve("/Encoding /"+k.encoding),ve("/FirstChar 32"),ve("/LastChar 255"),ve(">>"),ve("endobj"))},Bi=function(){for(var k in Kt)Kt.hasOwnProperty(k)&&(p===!1||p===!0&&g.hasOwnProperty(k))&&Io(Kt[k])},ga=function(k){k.objectNumber=Er();var te=[];te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Form"}),te.push({key:"BBox",value:"["+[P(k.x),P(k.y),P(k.x+k.width),P(k.y+k.height)].join(" ")+"]"}),te.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var me=k.pages[1].join(`
`);fr({data:me,additionalKeyValues:te,objectId:k.objectNumber}),ve("endobj")},Ts=function(){for(var k in jn)jn.hasOwnProperty(k)&&ga(jn[k])},dc=function(k,te){var me,be=[],Te=1/(te-1);for(me=0;me<1;me+=Te)be.push(me);if(be.push(1),k[0].offset!=0){var Ve={offset:0,color:k[0].color};k.unshift(Ve)}if(k[k.length-1].offset!=1){var at={offset:1,color:k[k.length-1].color};k.push(at)}for(var pt="",w=0,U=0;U<be.length;U++){for(me=be[U];me>k[w+1].offset;)w++;var $=k[w].offset,ce=(me-$)/(k[w+1].offset-$),Ie=k[w].color,Me=k[w+1].color;pt+=re(Math.round((1-ce)*Ie[0]+ce*Me[0]).toString(16))+re(Math.round((1-ce)*Ie[1]+ce*Me[1]).toString(16))+re(Math.round((1-ce)*Ie[2]+ce*Me[2]).toString(16))}return pt.trim()},Rs=function(k,te){te||(te=21);var me=Er(),be=dc(k.colors,te),Te=[];Te.push({key:"FunctionType",value:"0"}),Te.push({key:"Domain",value:"[0.0 1.0]"}),Te.push({key:"Size",value:"["+te+"]"}),Te.push({key:"BitsPerSample",value:"8"}),Te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fr({data:be,additionalKeyValues:Te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:me}),ve("endobj"),k.objectNumber=Er(),ve("<< /ShadingType "+k.type),ve("/ColorSpace /DeviceRGB");var Ve="/Coords ["+P(parseFloat(k.coords[0]))+" "+P(parseFloat(k.coords[1]))+" ";k.type===2?Ve+=P(parseFloat(k.coords[2]))+" "+P(parseFloat(k.coords[3])):Ve+=P(parseFloat(k.coords[2]))+" "+P(parseFloat(k.coords[3]))+" "+P(parseFloat(k.coords[4]))+" "+P(parseFloat(k.coords[5])),ve(Ve+="]"),k.matrix&&ve("/Matrix ["+k.matrix.toString()+"]"),ve("/Function "+me+" 0 R"),ve("/Extend [true true]"),ve(">>"),ve("endobj")},lu=function(k,te){var me=Dr(),be=Er();te.push({resourcesOid:me,objectOid:be}),k.objectNumber=be;var Te=[];Te.push({key:"Type",value:"/Pattern"}),Te.push({key:"PatternType",value:"1"}),Te.push({key:"PaintType",value:"1"}),Te.push({key:"TilingType",value:"1"}),Te.push({key:"BBox",value:"["+k.boundingBox.map(P).join(" ")+"]"}),Te.push({key:"XStep",value:P(k.xStep)}),Te.push({key:"YStep",value:P(k.yStep)}),Te.push({key:"Resources",value:me+" 0 R"}),k.matrix&&Te.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),fr({data:k.stream,additionalKeyValues:Te,objectId:k.objectNumber}),ve("endobj")},za=function(k){var te;for(te in on)on.hasOwnProperty(te)&&(on[te]instanceof Kf?Rs(on[te]):on[te]instanceof uh&&lu(on[te],k))},Va=function(k){for(var te in k.objectNumber=Er(),ve("<<"),k)switch(te){case"opacity":ve("/ca "+M(k[te]));break;case"stroke-opacity":ve("/CA "+M(k[te]))}ve(">>"),ve("endobj")},ri=function(){var k;for(k in In)In.hasOwnProperty(k)&&Va(In[k])},To=function(){for(var k in ve("/XObject <<"),jn)jn.hasOwnProperty(k)&&jn[k].objectNumber>=0&&ve("/"+k+" "+jn[k].objectNumber+" 0 R");nn.publish("putXobjectDict"),ve(">>")},cu=function(){nr.oid=Er(),ve("<<"),ve("/Filter /Standard"),ve("/V "+nr.v),ve("/R "+nr.r),ve("/U <"+nr.toHexString(nr.U)+">"),ve("/O <"+nr.toHexString(nr.O)+">"),ve("/P "+nr.P),ve(">>"),ve("endobj")},Ja=function(){for(var k in ve("/Font <<"),Kt)Kt.hasOwnProperty(k)&&(p===!1||p===!0&&g.hasOwnProperty(k))&&ve("/"+k+" "+Kt[k].objectNumber+" 0 R");ve(">>")},gl=function(){if(Object.keys(on).length>0){for(var k in ve("/Shading <<"),on)on.hasOwnProperty(k)&&on[k]instanceof Kf&&on[k].objectNumber>=0&&ve("/"+k+" "+on[k].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),ve(">>")}},Ro=function(k){if(Object.keys(on).length>0){for(var te in ve("/Pattern <<"),on)on.hasOwnProperty(te)&&on[te]instanceof m.TilingPattern&&on[te].objectNumber>=0&&on[te].objectNumber<k&&ve("/"+te+" "+on[te].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),ve(">>")}},hc=function(){if(Object.keys(In).length>0){var k;for(k in ve("/ExtGState <<"),In)In.hasOwnProperty(k)&&In[k].objectNumber>=0&&ve("/"+k+" "+In[k].objectNumber+" 0 R");nn.publish("putGStateDict"),ve(">>")}},dr=function(k){Gr(k.resourcesOid,!0),ve("<<"),ve("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ja(),gl(),Ro(k.objectOid),hc(),To(),ve(">>"),ve("endobj")},yi=function(){var k=[];Bi(),ri(),Ts(),za(k),nn.publish("putResources"),k.forEach(dr),dr({resourcesOid:vi,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources")},ml=function(){nn.publish("putAdditionalObjects");for(var k=0;k<We.length;k++){var te=We[k];Gr(te.objId,!0),ve(te.content),ve("endobj")}nn.publish("postPutAdditionalObjects")},uu=function(k){Sn[k.fontName]=Sn[k.fontName]||{},Sn[k.fontName][k.fontStyle]=k.id},Qo=function(k,te,me,be,Te){var Ve={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:k,fontName:te,fontStyle:me,encoding:be,isStandardFont:Te||!1,metadata:{}};return nn.publish("addFont",{font:Ve,instance:this}),Kt[Ve.id]=Ve,uu(Ve),Ve.id},pc=function(k){for(var te=0,me=Ne.length;te<me;te++){var be=Qo.call(this,k[te][0],k[te][1],k[te][2],Ne[te][3],!0);p===!1&&(g[be]=!0);var Te=k[te][0].split("-");uu({id:be,fontName:Te[0],fontStyle:Te[1]||""})}nn.publish("addFonts",{fonts:Kt,dictionary:Sn})},Ci=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(be){var te=be.stack||"";~te.indexOf(" at ")&&(te=te.split(" at ")[1]);var me="Error in function "+te.split(`
`)[0].split("<")[0]+": "+be.message;if(!Gt.console)throw new Error(me);Gt.console.error(me,be),Gt.alert&&alert(me)}},k.foo.bar=k,k.foo},vl=function(k,te){var me,be,Te,Ve,at,pt,w,U,$;if(Te=(te=te||{}).sourceEncoding||"Unicode",at=te.outputEncoding,(te.autoencode||at)&&Kt[Et].metadata&&Kt[Et].metadata[Te]&&Kt[Et].metadata[Te].encoding&&(Ve=Kt[Et].metadata[Te].encoding,!at&&Kt[Et].encoding&&(at=Kt[Et].encoding),!at&&Ve.codePages&&(at=Ve.codePages[0]),typeof at=="string"&&(at=Ve[at]),at)){for(w=!1,pt=[],me=0,be=k.length;me<be;me++)(U=at[k.charCodeAt(me)])?pt.push(String.fromCharCode(U)):pt.push(k[me]),pt[me].charCodeAt(0)>>8&&(w=!0);k=pt.join("")}for(me=k.length;w===void 0&&me!==0;)k.charCodeAt(me-1)>>8&&(w=!0),me--;if(!w)return k;for(pt=te.noBOM?[]:[254,255],me=0,be=k.length;me<be;me++){if(($=(U=k.charCodeAt(me))>>8)>>8)throw new Error("Character at position "+me+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push($),pt.push(U-($<<8))}return String.fromCharCode.apply(void 0,pt)},En=m.__private__.pdfEscape=m.pdfEscape=function(k,te){return vl(k,te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ii=m.__private__.beginPage=function(k){qe[++xn]=[],Nt[xn]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},eo(xn),Pe(qe[K])},Zo=function(k,te){var me,be,Te;switch(t=te||t,typeof k=="string"&&(me=C(k.toLowerCase()),Array.isArray(me)&&(be=me[0],Te=me[1])),Array.isArray(k)&&(be=k[0]*ct,Te=k[1]*ct),isNaN(be)&&(be=i[0],Te=i[1]),(be>14400||Te>14400)&&(br.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Te=Math.min(14400,Te)),i=[be,Te],t.substr(0,1)){case"l":Te>be&&(i=[Te,be]);break;case"p":be>Te&&(i=[Te,be])}Ii(i),yc(ns),ve(Ti),xc!==0&&ve(xc+" J"),ks!==0&&ve(ks+" j"),nn.publish("addPage",{pageNumber:xn})},Jo=function(k){k>0&&k<=xn&&(qe.splice(k,1),Nt.splice(k,1),xn--,K>xn&&(K=xn),this.setPage(K))},eo=function(k){k>0&&k<=xn&&(K=k)},Fn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return qe.length-1},es=function(k,te,me){var be,Te=void 0;return me=me||{},k=k!==void 0?k:Kt[Et].fontName,te=te!==void 0?te:Kt[Et].fontStyle,be=k.toLowerCase(),Sn[be]!==void 0&&Sn[be][te]!==void 0?Te=Sn[be][te]:Sn[k]!==void 0&&Sn[k][te]!==void 0?Te=Sn[k][te]:me.disableWarning===!1&&br.warn("Unable to look up font label for font '"+k+"', '"+te+"'. Refer to getFontList() for available fonts."),Te||me.noFallback||(Te=Sn.times[te])==null&&(Te=Sn.times.normal),Te},ma=m.__private__.putInfo=function(){var k=Er(),te=function(be){return be};for(var me in d!==null&&(te=nr.encryptor(k,0)),ve("<<"),ve("/Producer ("+En(te("jsPDF "+Wt.version))+")"),xt)xt.hasOwnProperty(me)&&xt[me]&&ve("/"+me.substr(0,1).toUpperCase()+me.substr(1)+" ("+En(te(xt[me]))+")");ve("/CreationDate ("+En(te(X))+")"),ve(">>"),ve("endobj")},No=m.__private__.putCatalog=function(k){var te=(k=k||{}).rootDictionaryObjId||Ji;switch(Er(),ve("<<"),ve("/Type /Catalog"),ve("/Pages "+te+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":ve("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ve("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ve("/OpenAction [3 0 R /Fit]");break;case"original":ve("/OpenAction [3 0 R /XYZ null null 1]");break;default:var me=""+Ge;me.substr(me.length-1)==="%"&&(Ge=parseInt(Ge)/100),typeof Ge=="number"&&ve("/OpenAction [3 0 R /XYZ null null "+M(Ge)+"]")}switch(yt||(yt="continuous"),yt){case"continuous":ve("/PageLayout /OneColumn");break;case"single":ve("/PageLayout /SinglePage");break;case"two":case"twoleft":ve("/PageLayout /TwoColumnLeft");break;case"tworight":ve("/PageLayout /TwoColumnRight")}et&&ve("/PageMode /"+et),nn.publish("putCatalog"),ve(">>"),ve("endobj")},fu=m.__private__.putTrailer=function(){ve("trailer"),ve("<<"),ve("/Size "+(he+1)),ve("/Root "+he+" 0 R"),ve("/Info "+(he-1)+" 0 R"),d!==null&&ve("/Encrypt "+nr.oid+" 0 R"),ve("/ID [ <"+V+"> <"+V+"> ]"),ve(">>")},gc=m.__private__.putHeader=function(){ve("%PDF-"+b),ve("%ºß¬à")},mc=m.__private__.putXRef=function(){var k="0000000000";ve("xref"),ve("0 "+(he+1)),ve("0000000000 65535 f ");for(var te=1;te<=he;te++)typeof we[te]=="function"?ve((k+we[te]()).slice(-10)+" 00000 n "):we[te]!==void 0?ve((k+we[te]).slice(-10)+" 00000 n "):ve("0000000000 00000 n ")},Do=m.__private__.buildDocument=function(){vt(),Pe(xe),nn.publish("buildDocument"),gc(),Co(),ml(),yi(),d!==null&&cu(),ma(),No();var k=Ce;return mc(),fu(),ve("startxref"),ve(""+k),ve("%%EOF"),Pe(qe[K]),xe.join(`
`)},yl=m.__private__.getBlob=function(k){return new Blob([ut(k)],{type:"application/pdf"})},Oo=m.output=m.__private__.output=Ci(function(k,te){switch(typeof(te=te||{})=="string"?te={filename:te}:te.filename=te.filename||"generated.pdf",k){case void 0:return Do();case"save":m.save(te.filename);break;case"arraybuffer":return ut(Do());case"blob":return yl(Do());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(yl(Do()))||void 0;br.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var me="",be=Do();try{me=$y(be)}catch{me=$y(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+te.filename+";base64,"+me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var Te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';te.pdfObjectUrl&&(Te=te.pdfObjectUrl,Ve="");var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Te+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(te)+");<\/script></body></html>",pt=Gt.open();return pt!==null&&pt.document.write(at),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var w='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+te.filename+'" width="500px" height="400px" /></body></html>',U=Gt.open();if(U!==null){U.document.write(w);var $=this;U.document.documentElement.querySelector("#pdfViewer").onload=function(){U.document.title=te.filename,U.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($.output("bloburl"))}}return U}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ce='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",te)+'"></iframe></body></html>',Ie=Gt.open();if(Ie!==null&&(Ie.document.write(ce),Ie.document.title=te.filename),Ie||typeof safari>"u")return Ie;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",te);default:return null}}),to=function(k){return Array.isArray(Ei)===!0&&Ei.indexOf(k)>-1};switch(r){case"pt":ct=1;break;case"mm":ct=72/25.4;break;case"cm":ct=72/2.54;break;case"in":ct=72;break;case"px":ct=to("px_scaling")==1?.75:96/72;break;case"pc":case"em":ct=12;break;case"ex":ct=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ct=r}var nr=null;oe(),ne();var ko=function(k){return d!==null?nr.encryptor(k,0):function(te){return te}},no=m.__private__.getPageInfo=m.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[k].objId,pageNumber:k,pageContext:Nt[k]}},Ft=m.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var te in Nt)if(Nt[te].objId===k)break;return no(te)},ro=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Nt[K].objId,pageNumber:K,pageContext:Nt[K]}};m.addPage=function(){return Zo.apply(this,arguments),this},m.setPage=function(){return eo.apply(this,arguments),Pe.call(this,qe[K]),this},m.insertPage=function(k){return this.addPage(),this.movePage(K,k),this},m.movePage=function(k,te){var me,be;if(k>te){me=qe[k],be=Nt[k];for(var Te=k;Te>te;Te--)qe[Te]=qe[Te-1],Nt[Te]=Nt[Te-1];qe[te]=me,Nt[te]=be,this.setPage(te)}else if(k<te){me=qe[k],be=Nt[k];for(var Ve=k;Ve<te;Ve++)qe[Ve]=qe[Ve+1],Nt[Ve]=Nt[Ve+1];qe[te]=me,Nt[te]=be,this.setPage(te)}return this},m.deletePage=function(){return Jo.apply(this,arguments),this},m.__private__.text=m.text=function(k,te,me,be,Te){var Ve,at,pt,w,U,$,ce,Ie,Me,ot=(be=be||{}).scope||this;if(typeof k=="number"&&typeof te=="number"&&(typeof me=="string"||Array.isArray(me))){var Ut=me;me=te,te=k,k=Ut}if(arguments[3]instanceof bt?(S("The transform parameter of text() with a Matrix value"),Me=Te):(pt=arguments[4],w=arguments[5],lr(ce=arguments[3])==="object"&&ce!==null||(typeof pt=="string"&&(w=pt,pt=null),typeof ce=="string"&&(w=ce,ce=null),typeof ce=="number"&&(pt=ce,ce=null),be={flags:ce,angle:pt,align:w})),isNaN(te)||isNaN(me)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return ot;var hn="",Qt=!1,Un=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:dn,Qn=ot.internal.scaleFactor;function so(ln){return ln=ln.split("	").join(Array(be.TabLen||9).join(" ")),En(ln,ce)}function Br(ln){for(var cn,hr=ln.concat(),Fr=[],co=hr.length;co--;)typeof(cn=hr.shift())=="string"?Fr.push(cn):Array.isArray(ln)&&(cn.length===1||cn[1]===void 0&&cn[2]===void 0)?Fr.push(cn[0]):Fr.push([cn[0],cn[1],cn[2]]);return Fr}function ba(ln,cn){var hr;if(typeof ln=="string")hr=cn(ln)[0];else if(Array.isArray(ln)){for(var Fr,co,Ol=ln.concat(),kl=[],Fs=Ol.length;Fs--;)typeof(Fr=Ol.shift())=="string"?kl.push(cn(Fr)[0]):Array.isArray(Fr)&&typeof Fr[0]=="string"&&(co=cn(Fr[0],Fr[1],Fr[2]),kl.push([co[0],co[1],co[2]]));hr=kl}return hr}var ls=!1,Al=!0;if(typeof k=="string")ls=!0;else if(Array.isArray(k)){var gu=k.concat();at=[];for(var bc,ii=gu.length;ii--;)(typeof(bc=gu.shift())!="string"||Array.isArray(bc)&&typeof bc[0]!="string")&&(Al=!1);ls=Al}if(ls===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var Sl=Ke/ot.internal.scaleFactor,wc=Sl*(Un-1);switch(be.baseline){case"bottom":me-=wc;break;case"top":me+=Sl-wc;break;case"hanging":me+=Sl-2*wc;break;case"middle":me+=Sl/2-wc}if(($=be.maxWidth||0)>0&&(typeof k=="string"?k=ot.splitTextToSize(k,$):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(ln,cn){return ln.concat(ot.splitTextToSize(cn,$))},[]))),Ve={text:k,x:te,y:me,options:be,mutex:{pdfEscape:En,activeFontKey:Et,fonts:Kt,activeFontSize:Ke}},nn.publish("preProcessText",Ve),k=Ve.text,pt=(be=Ve.options).angle,!(Me instanceof bt)&&pt&&typeof pt=="number"){pt*=Math.PI/180,be.rotationDirection===0&&(pt=-pt),B===D.ADVANCED&&(pt=-pt);var _c=Math.cos(pt),mu=Math.sin(pt);Me=new bt(_c,mu,-mu,_c,0,0)}else pt&&pt instanceof bt&&(Me=pt);B!==D.ADVANCED||Me||(Me=$n),(U=be.charSpace||Os)!==void 0&&(hn+=P(N(U))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ie=be.horizontalScale)!==void 0&&(hn+=P(100*Ie)+` Tz
`),be.lang;var wa=-1,Fh=be.renderingMode!==void 0?be.renderingMode:be.stroke,Af=ot.internal.getCurrentPageInfo().pageContext;switch(Fh){case 0:case!1:case"fill":wa=0;break;case 1:case!0:case"stroke":wa=1;break;case 2:case"fillThenStroke":wa=2;break;case 3:case"invisible":wa=3;break;case 4:case"fillAndAddForClipping":wa=4;break;case 5:case"strokeAndAddPathForClipping":wa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":wa=6;break;case 7:case"addToPathForClipping":wa=7}var bd=Af.usedRenderingMode!==void 0?Af.usedRenderingMode:-1;wa!==-1?hn+=wa+` Tr
`:bd!==-1&&(hn+=`0 Tr
`),wa!==-1&&(Af.usedRenderingMode=wa),w=be.align||"left";var lo,xi=Ke*Un,El=ot.internal.pageSize.getWidth(),Sf=Kt[Et];U=be.charSpace||Os,$=be.maxWidth||0,ce=Object.assign({autoencode:!0,noBOM:!0},be.flags);var js=[],Cl=function(ln){return ot.getStringUnitWidth(ln,{font:Sf,charSpace:U,fontSize:Ke,doKerning:!1})*Ke/Qn};if(Object.prototype.toString.call(k)==="[object Array]"){var ta;at=Br(k),w!=="left"&&(lo=at.map(Cl));var Ri,Il=0;if(w==="right"){te-=lo[0],k=[],ii=at.length;for(var _a=0;_a<ii;_a++)_a===0?(Ri=zi(te),ta=Xr(me)):(Ri=N(Il-lo[_a]),ta=-xi),k.push([at[_a],Ri,ta]),Il=lo[_a]}else if(w==="center"){te-=lo[0]/2,k=[],ii=at.length;for(var jo=0;jo<ii;jo++)jo===0?(Ri=zi(te),ta=Xr(me)):(Ri=N((Il-lo[jo])/2),ta=-xi),k.push([at[jo],Ri,ta]),Il=lo[jo]}else if(w==="left"){k=[],ii=at.length;for(var cs=0;cs<ii;cs++)k.push(at[cs])}else if(w==="justify"&&Sf.encoding==="Identity-H"){k=[],ii=at.length,$=$!==0?$:El;for(var Bo=0,Or=0;Or<ii;Or++)if(ta=Or===0?Xr(me):-xi,Ri=Or===0?zi(te):Bo,Or<ii-1){var Fo=N(($-lo[Or])/(at[Or].split(" ").length-1)),Kr=at[Or].split(" ");k.push([Kr[0]+" ",Ri,ta]),Bo=0;for(var Aa=1;Aa<Kr.length;Aa++){var Ac=(Cl(Kr[Aa-1]+" "+Kr[Aa])-Cl(Kr[Aa]))*Qn+Fo;Aa==Kr.length-1?k.push([Kr[Aa],Ac,0]):k.push([Kr[Aa]+" ",Ac,0]),Bo-=Ac}}else k.push([at[Or],Ri,ta]);k.push(["",Bo,0])}else{if(w!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],ii=at.length,$=$!==0?$:El,Or=0;Or<ii;Or++)ta=Or===0?Xr(me):-xi,Ri=Or===0?zi(te):0,Or<ii-1?js.push(P(N(($-lo[Or])/(at[Or].split(" ").length-1)))):js.push(0),k.push([at[Or],Ri,ta])}}var us=typeof be.R2L=="boolean"?be.R2L:ft;us===!0&&(k=ba(k,function(ln,cn,hr){return[ln.split("").reverse().join(""),cn,hr]})),Ve={text:k,x:te,y:me,options:be,mutex:{pdfEscape:En,activeFontKey:Et,fonts:Kt,activeFontSize:Ke}},nn.publish("postProcessText",Ve),k=Ve.text,Qt=Ve.mutex.isHex||!1;var vu=Kt[Et].encoding;vu!=="WinAnsiEncoding"&&vu!=="StandardEncoding"||(k=ba(k,function(ln,cn,hr){return[so(ln),cn,hr]})),at=Br(k),k=[];for(var Tl,Rl,Nl,Sc=0,yu=1,Dl=Array.isArray(at[0])?yu:Sc,Bs="",Ec=function(ln,cn,hr){var Fr="";return hr instanceof bt?(hr=typeof be.angle=="number"?Gn(hr,new bt(1,0,0,1,ln,cn)):Gn(new bt(1,0,0,1,ln,cn),hr),B===D.ADVANCED&&(hr=Gn(new bt(1,0,0,-1,0,0),hr)),Fr=hr.join(" ")+` Tm
`):Fr=P(ln)+" "+P(cn)+` Td
`,Fr},kr=0;kr<at.length;kr++){switch(Bs="",Dl){case yu:Nl=(Qt?"<":"(")+at[kr][0]+(Qt?">":")"),Tl=parseFloat(at[kr][1]),Rl=parseFloat(at[kr][2]);break;case Sc:Nl=(Qt?"<":"(")+at[kr]+(Qt?">":")"),Tl=zi(te),Rl=Xr(me)}js!==void 0&&js[kr]!==void 0&&(Bs=js[kr]+` Tw
`),kr===0?k.push(Bs+Ec(Tl,Rl,Me)+Nl):Dl===Sc?k.push(Bs+Nl):Dl===yu&&k.push(Bs+Ec(Tl,Rl,Me)+Nl)}k=Dl===Sc?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var Ha=`BT
/`;return Ha+=Et+" "+Ke+` Tf
`,Ha+=P(Ke*Un)+` TL
`,Ha+=Lo+`
`,Ha+=hn,Ha+=k,ve(Ha+="ET"),g[Et]=!0,ot};var du=m.__private__.clip=m.clip=function(k){return ve(k==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return du("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ve("n"),this};var Fi=m.__private__.isValidStyle=function(k){var te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(te=!0),te};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(k){return Fi(k)&&(f=k),this};var va=m.__private__.getStyle=m.getStyle=function(k){var te=f;switch(k){case"D":case"S":te="S";break;case"F":te="f";break;case"FD":case"DF":te="B";break;case"f":case"f*":case"B":case"B*":te=k}return te},ea=m.close=function(){return ve("h"),this};m.stroke=function(){return ve("S"),this},m.fill=function(k){return io("f",k),this},m.fillEvenOdd=function(k){return io("f*",k),this},m.fillStroke=function(k){return io("B",k),this},m.fillStrokeEvenOdd=function(k){return io("B*",k),this};var io=function(k,te){lr(te)==="object"?Po(te,k):ve(k)},ya=function(k){k===null||B===D.ADVANCED&&k===void 0||(k=va(k),ve(k))};function ts(k,te,me,be,Te){var Ve=new uh(te||this.boundingBox,me||this.xStep,be||this.yStep,this.gState,Te||this.matrix);Ve.stream=this.stream;var at=k+"$$"+this.cloneIndex+++"$$";return yr(at,Ve),Ve}var Po=function(k,te){var me=pa[k.key],be=on[me];if(be instanceof Kf)ve("q"),ve(vc(te)),be.gState&&m.setGState(be.gState),ve(k.matrix.toString()+" cm"),ve("/"+me+" sh"),ve("Q");else if(be instanceof uh){var Te=new bt(1,0,0,-1,0,Vi());k.matrix&&(Te=Te.multiply(k.matrix||$n),me=ts.call(be,k.key,k.boundingBox,k.xStep,k.yStep,Te).id),ve("q"),ve("/Pattern cs"),ve("/"+me+" scn"),be.gState&&m.setGState(be.gState),ve(te),ve("Q")}},vc=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xa=m.moveTo=function(k,te){return ve(P(N(k))+" "+P(F(te))+" m"),this},Ui=m.lineTo=function(k,te){return ve(P(N(k))+" "+P(F(te))+" l"),this},ao=m.curveTo=function(k,te,me,be,Te,Ve){return ve([P(N(k)),P(F(te)),P(N(me)),P(F(be)),P(N(Te)),P(F(Ve)),"c"].join(" ")),this};m.__private__.line=m.line=function(k,te,me,be,Te){if(isNaN(k)||isNaN(te)||isNaN(me)||isNaN(be)||!Fi(Te))throw new Error("Invalid arguments passed to jsPDF.line");return B===D.COMPAT?this.lines([[me-k,be-te]],k,te,[1,1],Te||"S"):this.lines([[me-k,be-te]],k,te,[1,1]).stroke()},m.__private__.lines=m.lines=function(k,te,me,be,Te,Ve){var at,pt,w,U,$,ce,Ie,Me,ot,Ut,hn,Qt;if(typeof k=="number"&&(Qt=me,me=te,te=k,k=Qt),be=be||[1,1],Ve=Ve||!1,isNaN(te)||isNaN(me)||!Array.isArray(k)||!Array.isArray(be)||!Fi(Te)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xa(te,me),at=be[0],pt=be[1],U=k.length,Ut=te,hn=me,w=0;w<U;w++)($=k[w]).length===2?(Ut=$[0]*at+Ut,hn=$[1]*pt+hn,Ui(Ut,hn)):(ce=$[0]*at+Ut,Ie=$[1]*pt+hn,Me=$[2]*at+Ut,ot=$[3]*pt+hn,Ut=$[4]*at+Ut,hn=$[5]*pt+hn,ao(ce,Ie,Me,ot,Ut,hn));return Ve&&ea(),ya(Te),this},m.path=function(k){for(var te=0;te<k.length;te++){var me=k[te],be=me.c;switch(me.op){case"m":xa(be[0],be[1]);break;case"l":Ui(be[0],be[1]);break;case"c":ao.apply(this,be);break;case"h":ea()}}return this},m.__private__.rect=m.rect=function(k,te,me,be,Te){if(isNaN(k)||isNaN(te)||isNaN(me)||isNaN(be)||!Fi(Te))throw new Error("Invalid arguments passed to jsPDF.rect");return B===D.COMPAT&&(be=-be),ve([P(N(k)),P(F(te)),P(N(me)),P(N(be)),"re"].join(" ")),ya(Te),this},m.__private__.triangle=m.triangle=function(k,te,me,be,Te,Ve,at){if(isNaN(k)||isNaN(te)||isNaN(me)||isNaN(be)||isNaN(Te)||isNaN(Ve)||!Fi(at))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[me-k,be-te],[Te-me,Ve-be],[k-Te,te-Ve]],k,te,[1,1],at,!0),this},m.__private__.roundedRect=m.roundedRect=function(k,te,me,be,Te,Ve,at){if(isNaN(k)||isNaN(te)||isNaN(me)||isNaN(be)||isNaN(Te)||isNaN(Ve)||!Fi(at))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return Te=Math.min(Te,.5*me),Ve=Math.min(Ve,.5*be),this.lines([[me-2*Te,0],[Te*pt,0,Te,Ve-Ve*pt,Te,Ve],[0,be-2*Ve],[0,Ve*pt,-Te*pt,Ve,-Te,Ve],[2*Te-me,0],[-Te*pt,0,-Te,-Ve*pt,-Te,-Ve],[0,2*Ve-be],[0,-Ve*pt,Te*pt,-Ve,Te,-Ve]],k+Te,te,[1,1],at,!0),this},m.__private__.ellipse=m.ellipse=function(k,te,me,be,Te){if(isNaN(k)||isNaN(te)||isNaN(me)||isNaN(be)||!Fi(Te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*me,at=4/3*(Math.SQRT2-1)*be;return xa(k+me,te),ao(k+me,te-at,k+Ve,te-be,k,te-be),ao(k-Ve,te-be,k-me,te-at,k-me,te),ao(k-me,te+at,k-Ve,te+be,k,te+be),ao(k+Ve,te+be,k+me,te+at,k+me,te),ya(Te),this},m.__private__.circle=m.circle=function(k,te,me,be){if(isNaN(k)||isNaN(te)||isNaN(me)||!Fi(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,te,me,me,be)},m.setFont=function(k,te,me){return me&&(te=H(te,me)),Et=es(k,te,{disableWarning:!1}),this};var Yr=m.__private__.getFont=m.getFont=function(){return Kt[es.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var k,te,me={};for(k in Sn)if(Sn.hasOwnProperty(k))for(te in me[k]=[],Sn[k])Sn[k].hasOwnProperty(te)&&me[k].push(te);return me},m.addFont=function(k,te,me,be,Te){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?Te=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(me=H(me,be)),Te=Te||"Identity-H",Qo.call(this,k,te,me,Te)};var dn,ns=n.lineWidth||.200025,oo=m.__private__.getLineWidth=m.getLineWidth=function(){return ns},yc=m.__private__.setLineWidth=m.setLineWidth=function(k){return ns=k,ve(P(N(k))+" w"),this};m.__private__.setLineDash=Wt.API.setLineDash=Wt.API.setLineDashPattern=function(k,te){if(k=k||[],te=te||0,isNaN(te)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(me){return P(N(me))}).join(" "),te=P(N(te)),ve("["+k+"] "+te+" d"),this};var Ns=m.__private__.getLineHeight=m.getLineHeight=function(){return Ke*dn};m.__private__.getLineHeight=m.getLineHeight=function(){return Ke*dn};var Ds=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(dn=k),this},qa=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return dn};Ds(n.lineHeight);var zi=m.__private__.getHorizontalCoordinate=function(k){return N(k)},Xr=m.__private__.getVerticalCoordinate=function(k){return B===D.ADVANCED?k:Nt[K].mediaBox.topRightY-Nt[K].mediaBox.bottomLeftY-N(k)},hu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(k){return P(zi(k))},rs=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(k){return P(Xr(k))},Ti=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ti(Ti)},m.__private__.setStrokeColor=m.setDrawColor=function(k,te,me,be){return Ti=$r({ch1:k,ch2:te,ch3:me,ch4:be,pdfColorType:"draw",precision:2}),ve(Ti),this};var is=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ti(is)},m.__private__.setFillColor=m.setFillColor=function(k,te,me,be){return is=$r({ch1:k,ch2:te,ch3:me,ch4:be,pdfColorType:"fill",precision:2}),ve(is),this};var Lo=n.textColor||"0 g",xl=m.__private__.getTextColor=m.getTextColor=function(){return ti(Lo)};m.__private__.setTextColor=m.setTextColor=function(k,te,me,be){return Lo=$r({ch1:k,ch2:te,ch3:me,ch4:be,pdfColorType:"text",precision:3}),this};var Os=n.charSpace,bl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Os||0)};m.__private__.setCharSpace=m.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Os=k,this};var xc=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(k){var te=m.CapJoinStyles[k];if(te===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xc=te,ve(te+" J"),this};var ks=0;m.__private__.setLineJoin=m.setLineJoin=function(k){var te=m.CapJoinStyles[k];if(te===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ks=te,ve(te+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ve(P(N(k))+" M"),this},m.GState=Zg,m.setGState=function(k){(k=typeof k=="string"?In[jr[k]]:as(null,k)).equals(ur)||(ve("/"+k.id+" gs"),ur=k)};var as=function(k,te){if(!k||!jr[k]){var me=!1;for(var be in In)if(In.hasOwnProperty(be)&&In[be].equals(te)){me=!0;break}if(me)te=In[be];else{var Te="GS"+(Object.keys(In).length+1).toString(10);In[Te]=te,te.id=Te}return k&&(jr[k]=te.id),nn.publish("addGState",te),te}};m.addGState=function(k,te){return as(k,te),this},m.saveGraphicsState=function(){return ve("q"),mi.push({key:Et,size:Ke,color:Lo}),this},m.restoreGraphicsState=function(){ve("Q");var k=mi.pop();return Et=k.key,Ke=k.size,Lo=k.color,ur=null,this},m.setCurrentTransformationMatrix=function(k){return ve(k.toString()+" cm"),this},m.comment=function(k){return ve("#"+k),this};var Ps=function(k,te){var me=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(Ve){isNaN(Ve)||(me=parseFloat(Ve))}});var be=te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Ve){isNaN(Ve)||(be=parseFloat(Ve))}});var Te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Te},set:function(Ve){Te=Ve.toString()}}),this},wl=function(k,te,me,be){Ps.call(this,k,te),this.type="rect";var Te=me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Te},set:function(at){isNaN(at)||(Te=parseFloat(at))}});var Ve=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function(at){isNaN(at)||(Ve=parseFloat(at))}}),this},Ls=function(){this.page=xn,this.currentPage=K,this.pages=qe.slice(0),this.pagesContext=Nt.slice(0),this.x=yn,this.y=Vt,this.matrix=Kn,this.width=ss(K),this.height=Vi(K),this.outputDestination=lt,this.id="",this.objectNumber=-1};Ls.prototype.restore=function(){xn=this.page,K=this.currentPage,Nt=this.pagesContext,qe=this.pages,yn=this.x,Vt=this.y,Kn=this.matrix,Ms(K,this.width),_l(K,this.height),lt=this.outputDestination};var os=function(k,te,me,be,Te){Ua.push(new Ls),xn=K=0,qe=[],yn=k,Vt=te,Kn=Te,Ii([me,be])},pu=function(k){if(vr[k])Ua.pop().restore();else{var te=new Ls,me="Xo"+(Object.keys(jn).length+1).toString(10);te.id=me,vr[k]=me,jn[me]=te,nn.publish("addFormObject",te),Ua.pop().restore()}};for(var Mo in m.beginFormObject=function(k,te,me,be,Te){return os(k,te,me,be,Te),this},m.endFormObject=function(k){return pu(k),this},m.doFormObject=function(k,te){var me=jn[vr[k]];return ve("q"),ve(te.toString()+" cm"),ve("/"+me.id+" Do"),ve("Q"),this},m.getFormObject=function(k){var te=jn[vr[k]];return{x:te.x,y:te.y,width:te.width,height:te.height,matrix:te.matrix}},m.save=function(k,te){return k=k||"generated.pdf",(te=te||{}).returnPromise=te.returnPromise||!1,te.returnPromise===!1?(Xf(yl(Do()),k),typeof Xf.unload=="function"&&Gt.setTimeout&&setTimeout(Xf.unload,911),this):new Promise(function(me,be){try{var Te=Xf(yl(Do()),k);typeof Xf.unload=="function"&&Gt.setTimeout&&setTimeout(Xf.unload,911),me(Te)}catch(Ve){be(Ve.message)}})},Wt.API)Wt.API.hasOwnProperty(Mo)&&(Mo==="events"&&Wt.API.events.length?function(k,te){var me,be,Te;for(Te=te.length-1;Te!==-1;Te--)me=te[Te][0],be=te[Te][1],k.subscribe.apply(k,[me].concat(typeof be=="function"?[be]:be))}(nn,Wt.API.events):m[Mo]=Wt.API[Mo]);var ss=m.getPageWidth=function(k){return(Nt[k=k||K].mediaBox.topRightX-Nt[k].mediaBox.bottomLeftX)/ct},Ms=m.setPageWidth=function(k,te){Nt[k].mediaBox.topRightX=te*ct+Nt[k].mediaBox.bottomLeftX},Vi=m.getPageHeight=function(k){return(Nt[k=k||K].mediaBox.topRightY-Nt[k].mediaBox.bottomLeftY)/ct},_l=m.setPageHeight=function(k,te){Nt[k].mediaBox.topRightY=te*ct+Nt[k].mediaBox.bottomLeftY};return m.internal={pdfEscape:En,getStyle:va,getFont:Yr,getFontSize:st,getCharSpace:bl,getTextColor:xl,getLineHeight:Ns,getLineHeightFactor:qa,getLineWidth:oo,write:dt,getHorizontalCoordinate:zi,getVerticalCoordinate:Xr,getCoordinateString:hu,getVerticalCoordinateString:rs,collections:{},newObject:Er,newAdditionalObject:Is,newObjectDeferred:Dr,newObjectDeferredBegin:Gr,getFilters:ni,putStream:fr,events:nn,scaleFactor:ct,pageSize:{getWidth:function(){return ss(K)},setWidth:function(k){Ms(K,k)},getHeight:function(){return Vi(K)},setHeight:function(k){_l(K,k)}},encryptionOptions:d,encryption:nr,getEncryptor:ko,output:Oo,getNumberOfPages:Fn,pages:qe,out:ve,f2:M,f3:T,getPageInfo:no,getPageInfoByObjId:Ft,getCurrentPageInfo:ro,getPDFVersion:_,Point:Ps,Rectangle:wl,Matrix:bt,hasHotfix:to},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ss(K)},set:function(k){Ms(K,k)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Vi(K)},set:function(k){_l(K,k)},enumerable:!0,configurable:!0}),pc.call(m,Ne),Et="F1",Zo(i,t),nn.publish("initialized"),m}ih.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},ih.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ih.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},ih.prototype.processOwnerPassword=function(n,e){return Xy(Yy(e).substr(0,5),n)},ih.prototype.encryptor=function(n,e){var t=Yy(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Xy(t,r)}},Zg.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||lr(n)!==lr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Wt.API={events:[]},Wt.version="3.0.1";var ei=Wt.API,Cx=1,xd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(n){return n.toFixed(2)},Yu=function(n){return n.toFixed(5)};ei.__acroform__={};var Eo=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},P4=function(n){return n*Cx},Gl=function(n){var e=new EE,t=Tt.internal.getHeight(n)||0,r=Tt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(en(r)),Number(en(t))],e},BV=ei.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},FV=ei.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},UV=ei.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},fi=ei.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return UV(n,e-1)},di=ei.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return BV(n,e-1)},hi=ei.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return FV(n,e-1)},zV=ei.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],o=n[2],s=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(a+s)||0,c.upperRight_X=t(i+o)||0,c.upperRight_Y=r(a)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},VV=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Ky(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+en(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Gl(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},Ky=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var a=t,o=Tt.internal.getHeight(n)||0;o=o<0?-o:o;var s=Tt.internal.getWidth(n)||0;s=s<0?-s:s;var c=function(T,N,L){if(T+1<i.length){var F=N+" "+i[T+1][0];return Xp(F,n,L).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var f,d,p=Xp("3",n,a).height,g=n.multiline?o-a:(o-p)/2,m=g+=2,b=0,_=0,I=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Xp(e,n,a=12).width+", FieldWidth:"+s+`
`;break}for(var C="",D=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var q=!1;if(i[B].length!==1&&I!==i[B].length-1){if((p+2)*(D+2)+2>o)continue e;C+=i[B][I],q=!0,_=B,B--}else{C=(C+=i[B][I]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var Y=parseInt(B),H=c(Y,C,a),P=B>=i.length-1;if(H&&!P){C+=" ",I=0;continue}if(H||P){if(P)_=Y;else if(n.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(D+2)+2>o)continue e;_=Y}}for(var S="",R=b;R<=_;R++){var M=i[R];if(n.multiline){if(R===_){S+=M[I]+" ",I=(I+1)%M.length;continue}if(R===b){S+=M[M.length-1]+" ";continue}}S+=M[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=Xp(S,n,a).width,n.textAlign){case"right":f=s-d-2;break;case"center":f=(s-d)/2;break;case"left":default:f=2}e+=en(f)+" "+en(m)+` Td
`,e+="("+xd(S)+`) Tj
`,e+=-en(f)+` 0 Td
`,m=-(a+2),d=0,b=q?_:_+1,D++,C=""}break}return r.text=e,r.fontSize=a,r},Xp=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},qV={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},HV=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},WV=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),lr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},GV=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(hl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(qV)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Cx=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new CE,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&HV(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var s=r[o],c=[],f=s.Rect;if(s.Rect&&(s.Rect=zV(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Tt.createDefaultAppearanceStream(s),lr(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(c=s.getKeyValueListForStream()),s.Rect=f,s.hasAppearanceStream&&!s.appearanceStreamContent){var d=VV(s);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(s.appearanceStreamContent){var p="";for(var g in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(g)){var m=s.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var b=m[o];typeof b=="function"&&(b=b.call(i,s)),p+="/"+o+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(i,s)),p+="/"+o+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:s.objId}),i.internal.out("endobj")}a&&WV(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},SE=ei.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),lr(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+xd(r(n[a].toString()))+")"):i+=n[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},zv=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+xd(r(n))+")"},Kl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Kl.prototype.toString=function(){return this.objId+" 0 R"},Kl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Kl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:SE(i,this.objId,this.scope)}):i instanceof Kl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var EE=function(){Kl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Eo(EE,Kl);var CE=function(){Kl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+xd(t(n))+")"}},set:function(t){n=t}})};Eo(CE,Kl);var hl=function n(){Kl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fi(e,3)},set:function(C){C?this.F=di(e,3):this.F=hi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');t=C}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(C){r=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(C){r[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(C){r[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(C){r[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(C){r[3]=C}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Jg)return;a="FieldObject"+n.FieldNum++}var C=function(D){return D};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+xd(C(a))+")"},set:function(C){a=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(C){a=C}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(C){o=C}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(C){s=C}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Cx:f},set:function(C){f=C}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(C){d=C}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Jg||this instanceof id))return zv(p,this.objId,this.scope)},set:function(C){C=C.toString(),p=C}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ki?g:zv(g,this.objId,this.scope)},set:function(C){C=C.toString(),g=this instanceof Ki?C:C.substr(0,1)==="("?Zd(C.substr(1,C.length-2)):Zd(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Zd(g.substr(1,g.length-1)):g},set:function(C){C=C.toString(),g=this instanceof Ki?"/"+C:C}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ki?m:zv(m,this.objId,this.scope)},set:function(C){C=C.toString(),m=this instanceof Ki?C:C.substr(0,1)==="("?Zd(C.substr(1,C.length-2)):Zd(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Zd(m.substr(1,m.length-1)):m},set:function(C){C=C.toString(),m=this instanceof Ki?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(C){C=!!C,_=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(C){b=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,1)},set:function(C){C?this.Ff=di(this.Ff,1):this.Ff=hi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,2)},set:function(C){C?this.Ff=di(this.Ff,2):this.Ff=hi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,3)},set:function(C){C?this.Ff=di(this.Ff,3):this.Ff=hi(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');I=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(I){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:I=2;break;case"center":case 1:I=1;break;case"left":case 0:default:I=0}}})};Eo(hl,Kl);var gh=function(){hl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return SE(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(a,o,s){s||(s=1);for(var c,f=[];c=o.exec(a);)f.push(c[s]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,18)},set:function(t){t?this.Ff=di(this.Ff,18):this.Ff=hi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=di(this.Ff,19):this.Ff=hi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,20)},set:function(t){t?(this.Ff=di(this.Ff,20),e.sort()):this.Ff=hi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,22)},set:function(t){t?this.Ff=di(this.Ff,22):this.Ff=hi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(t){t?this.Ff=di(this.Ff,23):this.Ff=hi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,27)},set:function(t){t?this.Ff=di(this.Ff,27):this.Ff=hi(this.Ff,27)}}),this.hasAppearanceStream=!1};Eo(gh,hl);var mh=function(){gh.call(this),this.fontName="helvetica",this.combo=!1};Eo(mh,gh);var vh=function(){mh.call(this),this.combo=!0};Eo(vh,mh);var pg=function(){vh.call(this),this.edit=!0};Eo(pg,vh);var Ki=function(){hl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,15)},set:function(t){t?this.Ff=di(this.Ff,15):this.Ff=hi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,16)},set:function(t){t?this.Ff=di(this.Ff,16):this.Ff=hi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,17)},set:function(t){t?this.Ff=di(this.Ff,17):this.Ff=hi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(t){t?this.Ff=di(this.Ff,26):this.Ff=hi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+xd(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){lr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Eo(Ki,hl);var gg=function(){Ki.call(this),this.pushButton=!0};Eo(gg,Ki);var yh=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Eo(yh,Ki);var Jg=function(){var n,e;hl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+xd(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){lr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Eo(Jg,hl),yh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},yh.prototype.createOption=function(n){var e=new Jg;return e.Parent=this,e.optionName=n,this.Kids.push(e),$V.call(this.scope,e),e};var mg=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};Eo(mg,Ki);var id=function(){hl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,13)},set:function(e){e?this.Ff=di(this.Ff,13):this.Ff=hi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,21)},set:function(e){e?this.Ff=di(this.Ff,21):this.Ff=hi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(e){e?this.Ff=di(this.Ff,23):this.Ff=hi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,24)},set:function(e){e?this.Ff=di(this.Ff,24):this.Ff=hi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,25)},set:function(e){e?this.Ff=di(this.Ff,25):this.Ff=hi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(e){e?this.Ff=di(this.Ff,26):this.Ff=hi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Eo(id,hl);var vg=function(){id.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,14)},set:function(n){n?this.Ff=di(this.Ff,14):this.Ff=hi(this.Ff,14)}}),this.password=!0};Eo(vg,id);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Gl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=Ky(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+en(Tt.internal.getWidth(n))+" "+en(Tt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+en(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Gl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=Tt.internal.getHeight(n),o=Tt.internal.getWidth(n),s=Ky(n,n.caption);return i.push("1 g"),i.push("0 0 "+en(o)+" "+en(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+en(o-1)+" "+en(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+en(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Gl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(Tt.internal.getWidth(n))+" "+en(Tt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Tt.RadioButton.Circle.YesNormal,e.D[n]=Tt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Gl(n);e.scope=n.scope;var t=[],r=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Tt.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Yu(Tt.internal.getWidth(n)/2)+" "+Yu(Tt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Gl(n);e.scope=n.scope;var t=[],r=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Tt.internal.Bezier_C).toFixed(5)),o=Number((r*Tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Yu(Tt.internal.getWidth(n)/2)+" "+Yu(Tt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Yu(Tt.internal.getWidth(n)/2)+" "+Yu(Tt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Gl(n);e.scope=n.scope;var t=[],r=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Yu(Tt.internal.getWidth(n)/2)+" "+Yu(Tt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Tt.RadioButton.Cross.YesNormal,e.D[n]=Tt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Gl(n);e.scope=n.scope;var t=[],r=Tt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+en(Tt.internal.getWidth(n)-2)+" "+en(Tt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),t.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),t.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),t.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Gl(n);e.scope=n.scope;var t=Tt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+en(Tt.internal.getWidth(n))+" "+en(Tt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+en(Tt.internal.getWidth(n)-2)+" "+en(Tt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(en(t.x1.x)+" "+en(t.x1.y)+" m"),r.push(en(t.x2.x)+" "+en(t.x2.y)+" l"),r.push(en(t.x4.x)+" "+en(t.x4.y)+" m"),r.push(en(t.x3.x)+" "+en(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Gl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(Tt.internal.getWidth(n))+" "+en(Tt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Tt.internal.getWidth(n),t=Tt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Tt.internal.getWidth=function(n){var e=0;return lr(n)==="object"&&(e=P4(n.Rect[2])),e},Tt.internal.getHeight=function(n){var e=0;return lr(n)==="object"&&(e=P4(n.Rect[3])),e};var $V=ei.addField=function(n){if(GV(this,n),!(n instanceof hl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ei.AcroFormChoiceField=gh,ei.AcroFormListBox=mh,ei.AcroFormComboBox=vh,ei.AcroFormEditBox=pg,ei.AcroFormButton=Ki,ei.AcroFormPushButton=gg,ei.AcroFormRadioButton=yh,ei.AcroFormCheckBox=mg,ei.AcroFormTextField=id,ei.AcroFormPasswordField=vg,ei.AcroFormAppearance=Tt,ei.AcroForm={ChoiceField:gh,ListBox:mh,ComboBox:vh,EditBox:pg,Button:Ki,PushButton:gg,RadioButton:yh,CheckBox:mg,TextField:id,PasswordField:vg,Appearance:Tt},Wt.AcroForm={ChoiceField:gh,ListBox:mh,ComboBox:vh,EditBox:pg,Button:Ki,PushButton:gg,RadioButton:yh,CheckBox:mg,TextField:id,PasswordField:vg,Appearance:Tt};Wt.AcroForm;function IE(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(T,N){var L,F,X,V,z,ne=e;if((N=N||e)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(H(T))for(z in t)for(X=t[z],L=0;L<X.length;L+=1){for(V=!0,F=0;F<X[L].length;F+=1)if(X[L][F]!==void 0&&X[L][F]!==T[F]){V=!1;break}if(V===!0){ne=z;break}}else for(z in t)for(X=t[z],L=0;L<X.length;L+=1){for(V=!0,F=0;F<X[L].length;F+=1)if(X[L][F]!==void 0&&X[L][F]!==T.charCodeAt(F)){V=!1;break}if(V===!0){ne=z;break}}return ne===e&&N!==e&&(ne=N),ne},i=function T(N){for(var L=this.internal.write,F=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:N.width}),V.push({key:"Height",value:N.height}),N.colorSpace===I.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===I.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var z="",ne=0,se=N.transparency.length;ne<se;ne++)z+=N.transparency[ne]+" "+N.transparency[ne]+" ";V.push({key:"Mask",value:"["+z+"]"})}N.sMask!==void 0&&V.push({key:"SMask",value:N.objectId+1+" 0 R"});var Q=N.filter!==void 0?["/"+N.filter]:void 0;if(F({data:N.data,additionalKeyValues:V,alreadyAppliedFilters:Q,objectId:N.objectId}),L("endobj"),"sMask"in N&&N.sMask!==void 0){var oe="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,W={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:oe,data:N.sMask};"filter"in N&&(W.filter=N.filter),T.call(this,W)}if(N.colorSpace===I.INDEXED){var K=this.internal.newObject();F({data:S(new Uint8Array(N.palette)),objectId:K}),L("endobj")}},a=function(){var T=this.internal.collections.addImage_images;for(var N in T)i.call(this,T[N])},o=function(){var T,N=this.internal.collections.addImage_images,L=this.internal.write;for(var F in N)L("/I"+(T=N[F]).index,T.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var T=this.internal.collections.addImage_images;return s.call(this),T},f=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(T){return typeof n["process"+T.toUpperCase()]=="function"},p=function(T){return lr(T)==="object"&&T.nodeType===1},g=function(T,N){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var L=""+T.getAttribute("src");if(L.indexOf("data:image/")===0)return Q0(unescape(L).split("base64,").pop());var F=n.loadFile(L,!0);if(F!==void 0)return F}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var X;switch(N){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return Q0(T.toDataURL(X,1).split("base64,").pop())}},m=function(T){var N=this.internal.collections.addImage_images;if(N){for(var L in N)if(T===N[L].alias)return N[L]}},b=function(T,N,L){return T||N||(T=-96,N=-96),T<0&&(T=-1*L.width*72/T/this.internal.scaleFactor),N<0&&(N=-1*L.height*72/N/this.internal.scaleFactor),T===0&&(T=N*L.width/L.height),N===0&&(N=T*L.height/L.width),[T,N]},_=function(T,N,L,F,X,V){var z=b.call(this,L,F,X),ne=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,Q=c.call(this);if(L=z[0],F=z[1],Q[X.index]=X,V){V*=Math.PI/180;var oe=Math.cos(V),W=Math.sin(V),K=function(re){return re.toFixed(4)},J=[K(oe),K(W),K(-1*W),K(oe),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,ne(T),se(N+F),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([ne(L),"0","0",ne(F),"0","0","cm"].join(" "))):this.internal.write([ne(L),"0","0",ne(F),ne(T),se(N+F),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},I=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(T){var N,L,F=0;if(typeof T=="string")for(L=T.length,N=0;N<L;N++)F=(F<<5)-F+T.charCodeAt(N),F|=0;else if(H(T))for(L=T.byteLength/2,N=0;N<L;N++)F=(F<<5)-F+T[N],F|=0;return F},B=n.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var N=!0;return T.length===0&&(N=!1),T.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(N=!1),N},q=n.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var N=T.indexOf(",");return N<0?null:T.substring(0,N).trim().endsWith("base64")?T.substring(N+1):null},Y=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(T){return Y()&&T instanceof ArrayBuffer};var H=n.__addimage__.isArrayBufferView=function(T){return Y()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},P=n.__addimage__.binaryStringToUint8Array=function(T){for(var N=T.length,L=new Uint8Array(N),F=0;F<N;F++)L[F]=T.charCodeAt(F);return L},S=n.__addimage__.arrayBufferToBinaryString=function(T){for(var N="",L=H(T)?T:new Uint8Array(T),F=0;F<L.length;F+=8192)N+=String.fromCharCode.apply(null,L.subarray(F,F+8192));return N};n.addImage=function(){var T,N,L,F,X,V,z,ne,se;if(typeof arguments[1]=="number"?(N=e,L=arguments[1],F=arguments[2],X=arguments[3],V=arguments[4],z=arguments[5],ne=arguments[6],se=arguments[7]):(N=arguments[1],L=arguments[2],F=arguments[3],X=arguments[4],V=arguments[5],z=arguments[6],ne=arguments[7],se=arguments[8]),lr(T=arguments[0])==="object"&&!p(T)&&"imageData"in T){var Q=T;T=Q.imageData,N=Q.format||N||e,L=Q.x||L||0,F=Q.y||F||0,X=Q.w||Q.width||X,V=Q.h||Q.height||V,z=Q.alias||z,ne=Q.compression||ne,se=Q.rotation||Q.angle||se}var oe=this.internal.getFilters();if(ne===void 0&&oe.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(L)||isNaN(F))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var W=R.call(this,T,N,z,ne);return _.call(this,L,F,X,V,W,se),this};var R=function(T,N,L,F){var X,V,z;if(typeof T=="string"&&r(T)===e){T=unescape(T);var ne=M(T,!1);(ne!==""||(ne=n.loadFile(T,!0))!==void 0)&&(T=ne)}if(p(T)&&(T=g(T,N)),N=r(T,N),!d(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((z=L)==null||z.length===0)&&(L=function(se){return typeof se=="string"||H(se)?D(se):H(se.data)?D(se.data):null}(T)),(X=m.call(this,L))||(Y()&&(T instanceof Uint8Array||N==="RGBA"||(V=T,T=P(T))),X=this["process"+N.toUpperCase()](T,f.call(this),L,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in n.image_compression?se:C.NONE}(F),V)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},M=n.__addimage__.convertBase64ToBinaryString=function(T,N){N=typeof N!="boolean"||N;var L,F="";if(typeof T=="string"){var X;L=(X=q(T))!==null&&X!==void 0?X:T;try{F=Q0(L)}catch(V){if(N)throw B(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return F};n.getImageProperties=function(T){var N,L,F="";if(p(T)&&(T=g(T)),typeof T=="string"&&r(T)===e&&((F=M(T,!1))===""&&(F=n.loadFile(T)||""),T=F),L=r(T),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(!Y()||T instanceof Uint8Array||(T=P(T)),!(N=this["process"+L.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=L,N}})(Wt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Wt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,d=!1,p=0;p<f.length&&!d;p++)switch((r=f[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<f.length;g++){r=f[g];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(_.objId),D=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+m(C(r.contents))+")",a+=" /Popup "+I.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(C(D))+") >>",_.content=a;var B=_.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(a+=" /Open true"),a+=" >>",I.content=a,this.internal.write(_.objId,"0 R",I.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var q=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(b(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var H=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+H+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,o){var s=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:c(t),y:f(r),w:c(t+i),h:f(r+a)},options:o,type:"link"})},n.textWithLink=function(t,r,i,a){var o,s,c=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var d=this.splitTextToSize(t,s).length;o=Math.ceil(f*d)}else s=c,o=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=c/2),a.align==="right"&&(r-=c),this.link(r,i-f,s,o,a),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Wt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},s=n.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&i.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(_){var I=0,C=t,D="",B=0;for(I=0;I<_.length;I+=1)C[_.charCodeAt(I)]!==void 0?(B++,typeof(C=C[_.charCodeAt(I)])=="number"&&(D+=String.fromCharCode(C),C=t,B=0),I===_.length-1&&(C=t,D+=_.charAt(I-(B-1)),I-=B-1,B=0)):(C=t,D+=_.charAt(I-B),I-=B,B=0);return D};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(_,I,C){return o(_)?a(_)===!1?-1:!f(_)||!o(I)&&!o(C)||!o(C)&&s(I)||s(_)&&!o(I)||s(_)&&c(I)||s(_)&&s(I)?0:d(_)&&o(I)&&!s(I)&&o(C)&&f(C)?3:s(_)||!o(C)?1:2:-1},m=function(_){var I=0,C=0,D=0,B="",q="",Y="",H=(_=_||"").split("\\s+"),P=[];for(I=0;I<H.length;I+=1){for(P.push(""),C=0;C<H[I].length;C+=1)B=H[I][C],q=H[I][C-1],Y=H[I][C+1],o(B)?(D=g(B,q,Y),P[I]+=D!==-1?String.fromCharCode(e[B.charCodeAt(0)][D]):B):P[I]+=B;P[I]=p(P[I])}return P.join(" ")},b=n.__arabicParser__.processArabic=n.processArabic=function(){var _,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(I)){var D=0;for(C=[],D=0;D<I.length;D+=1)Array.isArray(I[D])?C.push([m(I[D][0]),I[D][1],I[D][2]]):C.push([m(I[D])]);_=C}else _=m(I);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",b])}(Wt.API),Wt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(s){t=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Wt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(_){b=_}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,f){r.call(this);var d=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),g=f.scaleFactor||this.internal.scaleFactor,m=0,b=0,_=0,I=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var C=f.maxWidth;C>0?typeof c=="string"?c=this.splitTextToSize(c,C):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(B,q){return B.concat(I.splitTextToSize(q,C))},[])):c=Array.isArray(c)?c:[c];for(var D=0;D<c.length;D++)m<(_=this.getStringUnitWidth(c[D],{font:p})*d)&&(m=_);return m!==0&&(b=c.length),{w:m/=g,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,m&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};n.table=function(c,f,d,p,g){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,b,_,I,C=[],D=[],B=[],q={},Y={},H=[],P=[],S=(g=g||{}).autoSize||!1,R=g.printHeaders!==!1,M=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,T=g.margins||Object.assign({width:this.getPageWidth()},e),N=typeof g.padding=="number"?g.padding:3,L=g.headerBackgroundColor||"#c8c8c8",F=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=F,this.setFontSize(M),p==null)D=C=Object.keys(d[0]),B=C.map(function(){return"left"});else if(Array.isArray(p)&&lr(p[0])==="object")for(C=p.map(function(Q){return Q.name}),D=p.map(function(Q){return Q.prompt||Q.name||""}),B=p.map(function(Q){return Q.align||"left"}),m=0;m<p.length;m+=1)Y[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=C=p,B=C.map(function(){return"left"}));if(S||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<C.length;m+=1){for(q[I=C[m]]=d.map(function(Q){return Q[I]}),this.setFont(void 0,"bold"),H.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=q[I],this.setFont(void 0,"normal"),_=0;_<b.length;_+=1)H.push(this.getTextDimensions(b[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[I]=Math.max.apply(null,H)+N+N,H=[]}if(R){var X={};for(m=0;m<C.length;m+=1)X[C[m]]={},X[C[m]].text=D[m],X[C[m]].align=B[m];var V=s.call(this,X,Y);P=C.map(function(Q){return new a(c,f,Y[Q],V,X[Q].text,void 0,X[Q].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var z=p.reduce(function(Q,oe){return Q[oe.name]=oe.align,Q},{});for(m=0;m<d.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:d[m]},this);var ne=s.call(this,d[m],Y);for(_=0;_<C.length;_+=1){var se=d[m][C[_]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:_,data:se},this),o.call(this,new a(c,f,Y[C[_]],ne,se,m+2,z[C[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var s=function(c,f){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(m){var b=c[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,f[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+d+d},this).reduce(function(m,b){return Math.max(m,b)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(b)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Wt.API);var TE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},RE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Qy=IE(RE),NE=[100,200,300,400,500,600,700,800,900],YV=IE(NE);function Zy(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return TE[a=a||"normal"]?a:"normal"}(n.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(a){return typeof Qy[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function L4(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var XV={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},M4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function j4(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function KV(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},XV,t.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=Zy(e[s])).family]&&(a.family=i[a.family]),n.hasOwnProperty(a.family)){o=n[a.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+j4(a)+"' and default family '"+r+"'.");if(o=function(c,f){if(f[c])return f[c];var d=Qy[c],p=d<=Qy.normal?-1:1,g=L4(f,RE,d,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(a.stretch,o),o=function(c,f){if(f[c])return f[c];for(var d=TE[c],p=0;p<d.length;++p)if(f[d[p]])return f[d[p]];throw new Error("Could not find a matching font-style for "+c)}(a.style,o),!(o=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var d=YV[c],p=L4(f,NE,d,c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+j4(a)+"'.");return o}function B4(n){return n.trimLeft()}function QV(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function ZV(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Kp,F4,U4,Vv=["times"];(function(n){var e,t,r,i,a,o,s,c,f,d=function(W){return W=W||{},this.isStrokeTransparent=W.isStrokeTransparent||!1,this.strokeOpacity=W.strokeOpacity||1,this.strokeStyle=W.strokeStyle||"#000000",this.fillStyle=W.fillStyle||"#000000",this.isFillTransparent=W.isFillTransparent||!1,this.fillOpacity=W.fillOpacity||1,this.font=W.font||"10px sans-serif",this.textBaseline=W.textBaseline||"alphabetic",this.textAlign=W.textAlign||"left",this.lineWidth=W.lineWidth||1,this.lineJoin=W.lineJoin||"miter",this.lineCap=W.lineCap||"butt",this.path=W.path||[],this.transform=W.transform!==void 0?W.transform.clone():new c,this.globalCompositeOperation=W.globalCompositeOperation||"normal",this.globalAlpha=W.globalAlpha||1,this.clip_path=W.clip_path||[],this.currentPoint=W.currentPoint||new o,this.miterLimit=W.miterLimit||10,this.lastPoint=W.lastPoint||new o,this.lineDashOffset=W.lineDashOffset||0,this.lineDash=W.lineDash||[],this.margin=W.margin||[0,0,0,0],this.prevPageLastElemOffset=W.prevPageLastElemOffset||0,this.ignoreClearRect=typeof W.ignoreClearRect!="boolean"||W.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,c=this.internal.Matrix,f=new d}]);var p=function(W){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=W;Object.defineProperty(this,"pdf",{get:function(){return K}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(Pe){J=!!Pe}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Pe){re=!!Pe}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(Pe){isNaN(Pe)||(he=Pe)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(Pe){isNaN(Pe)||(we=Pe)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Pe){var ve;typeof Pe=="number"?ve=[Pe,Pe,Pe,Pe]:((ve=new Array(4))[0]=Pe[0],ve[1]=Pe.length>=2?Pe[1]:ve[0],ve[2]=Pe.length>=3?Pe[2]:ve[0],ve[3]=Pe.length>=4?Pe[3]:ve[1]),f.margin=ve}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Pe){xe=Pe}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(Pe){Ce=Pe}});var We=[];Object.defineProperty(this,"pageBreaks",{get:function(){return We},set:function(Pe){We=Pe}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Pe){Pe instanceof d&&(f=Pe)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Pe){f.path=Pe}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(Pe){qe=Pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pe){var ve;ve=g(Pe),this.ctx.fillStyle=ve.style,this.ctx.isFillTransparent=ve.a===0,this.ctx.fillOpacity=ve.a,this.pdf.setFillColor(ve.r,ve.g,ve.b,{a:ve.a}),this.pdf.setTextColor(ve.r,ve.g,ve.b,{a:ve.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pe){var ve=g(Pe);this.ctx.strokeStyle=ve.style,this.ctx.isStrokeTransparent=ve.a===0,this.ctx.strokeOpacity=ve.a,ve.a===0?this.pdf.setDrawColor(255,255,255):(ve.a,this.pdf.setDrawColor(ve.r,ve.g,ve.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pe){["butt","round","square"].indexOf(Pe)!==-1&&(this.ctx.lineCap=Pe,this.pdf.setLineCap(Pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pe){isNaN(Pe)||(this.ctx.lineWidth=Pe,this.pdf.setLineWidth(Pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pe){["bevel","round","miter"].indexOf(Pe)!==-1&&(this.ctx.lineJoin=Pe,this.pdf.setLineJoin(Pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pe){isNaN(Pe)||(this.ctx.miterLimit=Pe,this.pdf.setMiterLimit(Pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pe){this.ctx.textBaseline=Pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pe){["right","end","center","left","start"].indexOf(Pe)!==-1&&(this.ctx.textAlign=Pe)}});var it=null;function lt(Pe,ve){if(it===null){var dt=function(ut){var Ne=[];return Object.keys(ut).forEach(function(Ke){ut[Ke].forEach(function(Ge){var st=null;switch(Ge){case"bold":st={family:Ke,weight:"bold"};break;case"italic":st={family:Ke,style:"italic"};break;case"bolditalic":st={family:Ke,weight:"bold",style:"italic"};break;case"":case"normal":st={family:Ke}}st!==null&&(st.ref={name:Ke,style:Ge},Ne.push(st))})}),Ne}(Pe.getFontList());it=function(ut){for(var Ne={},Ke=0;Ke<ut.length;++Ke){var Ge=Zy(ut[Ke]),st=Ge.family,ft=Ge.stretch,et=Ge.style,St=Ge.weight;Ne[st]=Ne[st]||{},Ne[st][ft]=Ne[st][ft]||{},Ne[st][ft][et]=Ne[st][ft][et]||{},Ne[st][ft][et][St]=Ge}return Ne}(dt.concat(ve))}return it}var vt=null;Object.defineProperty(this,"fontFaces",{get:function(){return vt},set:function(Pe){it=null,vt=Pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pe){var ve;if(this.ctx.font=Pe,(ve=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pe))!==null){var dt=ve[1];ve[2];var ut=ve[3],Ne=ve[4];ve[5];var Ke=ve[6],Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(Ge==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var st=function(xt){var Et,ct,yn=[],Vt=xt.trim();if(Vt==="")return Vv;if(Vt in M4)return[M4[Vt]];for(;Vt!=="";){switch(ct=null,Et=(Vt=B4(Vt)).charAt(0)){case'"':case"'":ct=QV(Vt.substring(1),Et);break;default:ct=ZV(Vt)}if(ct===null||(yn.push(ct[0]),(Vt=B4(ct[1]))!==""&&Vt.charAt(0)!==","))return Vv;Vt=Vt.replace(/^,/,"")}return yn}(Ke);if(this.fontFaces){var ft=KV(lt(this.pdf,this.fontFaces),st.map(function(xt){return{family:xt,stretch:"normal",weight:ut,style:dt}}));this.pdf.setFont(ft.ref.name,ft.ref.style)}else{var et="";(ut==="bold"||parseInt(ut,10)>=700||dt==="bold")&&(et="bold"),dt==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var St="",yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<st.length;_t++){if(this.pdf.internal.getFont(st[_t],et,{noFallback:!0,disableWarning:!0})!==void 0){St=st[_t];break}if(et==="bolditalic"&&this.pdf.internal.getFont(st[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)St=st[_t],et="bold";else if(this.pdf.internal.getFont(st[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){St=st[_t],et="normal";break}}if(St===""){for(var Rt=0;Rt<st.length;Rt++)if(yt[st[Rt]]){St=yt[st[Rt]];break}}St=St===""?"Times":St,this.pdf.setFont(St,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pe){this.ctx.globalCompositeOperation=Pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pe){this.ctx.globalAlpha=Pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pe){this.ctx.lineDashOffset=Pe,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pe){this.ctx.lineDash=Pe,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pe){this.ctx.ignoreClearRect=!!Pe}})};p.prototype.setLineDash=function(W){this.lineDash=W},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){q.call(this,"fill",!1)},p.prototype.stroke=function(){q.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(W,K){if(isNaN(W)||isNaN(K))throw br.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(W,K));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(W,K)},p.prototype.closePath=function(){var W=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&lr(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){W=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(W.x,W.y)},p.prototype.lineTo=function(W,K){if(isNaN(W)||isNaN(K))throw br.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(W,K));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),q.call(this,null,!0)},p.prototype.quadraticCurveTo=function(W,K,J,re){if(isNaN(J)||isNaN(re)||isNaN(W)||isNaN(K))throw br.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(J,re)),we=this.ctx.transform.applyToPoint(new o(W,K));this.path.push({type:"qct",x1:we.x,y1:we.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},p.prototype.bezierCurveTo=function(W,K,J,re,he,we){if(isNaN(he)||isNaN(we)||isNaN(W)||isNaN(K)||isNaN(J)||isNaN(re))throw br.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new o(he,we)),Ce=this.ctx.transform.applyToPoint(new o(W,K)),We=this.ctx.transform.applyToPoint(new o(J,re));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:We.x,y2:We.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},p.prototype.arc=function(W,K,J,re,he,we){if(isNaN(W)||isNaN(K)||isNaN(J)||isNaN(re)||isNaN(he))throw br.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new o(W,K));W=xe.x,K=xe.y;var Ce=this.ctx.transform.applyToPoint(new o(0,J)),We=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(Ce.x-We.x,2)+Math.pow(Ce.y-We.y,2))}Math.abs(he-re)>=2*Math.PI&&(re=0,he=2*Math.PI),this.path.push({type:"arc",x:W,y:K,radius:J,startAngle:re,endAngle:he,counterclockwise:we})},p.prototype.arcTo=function(W,K,J,re,he){throw new Error("arcTo not implemented.")},p.prototype.rect=function(W,K,J,re){if(isNaN(W)||isNaN(K)||isNaN(J)||isNaN(re))throw br.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(W,K),this.lineTo(W+J,K),this.lineTo(W+J,K+re),this.lineTo(W,K+re),this.lineTo(W,K),this.lineTo(W+J,K),this.lineTo(W,K)},p.prototype.fillRect=function(W,K,J,re){if(isNaN(W)||isNaN(K)||isNaN(J)||isNaN(re))throw br.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(W,K,J,re),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},p.prototype.strokeRect=function(W,K,J,re){if(isNaN(W)||isNaN(K)||isNaN(J)||isNaN(re))throw br.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(W,K,J,re),this.stroke())},p.prototype.clearRect=function(W,K,J,re){if(isNaN(W)||isNaN(K)||isNaN(J)||isNaN(re))throw br.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(W,K,J,re))},p.prototype.save=function(W){W=typeof W!="boolean"||W;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),W){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},p.prototype.restore=function(W){W=typeof W!="boolean"||W;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(K),W&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(W){var K,J,re,he;if(W.isCanvasGradient===!0&&(W=W.getColor()),!W)return{r:0,g:0,b:0,a:0,style:W};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(W))K=0,J=0,re=0,he=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(W);if(we!==null)K=parseInt(we[1]),J=parseInt(we[2]),re=parseInt(we[3]),he=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(W))!==null)K=parseInt(we[1]),J=parseInt(we[2]),re=parseInt(we[3]),he=parseFloat(we[4]);else{if(he=1,typeof W=="string"&&W.charAt(0)!=="#"){var xe=new wE(W);W=xe.ok?xe.toHex():"#000000"}W.length===4?(K=W.substring(1,2),K+=K,J=W.substring(2,3),J+=J,re=W.substring(3,4),re+=re):(K=W.substring(1,3),J=W.substring(3,5),re=W.substring(5,7)),K=parseInt(K,16),J=parseInt(J,16),re=parseInt(re,16)}}return{r:K,g:J,b:re,a:he,style:W}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(W,K,J,re){if(isNaN(K)||isNaN(J)||typeof W!="string")throw br.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!m.call(this)){var he=ne(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;N.call(this,{text:W,x:K,y:J,scale:we,angle:he,align:this.textAlign,maxWidth:re})}},p.prototype.strokeText=function(W,K,J,re){if(isNaN(K)||isNaN(J)||typeof W!="string")throw br.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){re=isNaN(re)?void 0:re;var he=ne(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;N.call(this,{text:W,x:K,y:J,scale:we,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:re})}},p.prototype.measureText=function(W){if(typeof W!="string")throw br.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,J=this.pdf.internal.scaleFactor,re=K.internal.getFontSize(),he=K.getStringUnitWidth(W)*re/K.internal.scaleFactor,we=function(xe){var Ce=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this};return new we({width:he*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(W,K){if(isNaN(W)||isNaN(K))throw br.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(W,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(W){if(isNaN(W))throw br.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new c(Math.cos(W),Math.sin(W),-Math.sin(W),Math.cos(W),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.translate=function(W,K){if(isNaN(W)||isNaN(K))throw br.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,W,K);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(W,K,J,re,he,we){if(isNaN(W)||isNaN(K)||isNaN(J)||isNaN(re)||isNaN(he)||isNaN(we))throw br.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new c(W,K,J,re,he,we);this.ctx.transform=this.ctx.transform.multiply(xe)},p.prototype.setTransform=function(W,K,J,re,he,we){W=isNaN(W)?1:W,K=isNaN(K)?0:K,J=isNaN(J)?0:J,re=isNaN(re)?1:re,he=isNaN(he)?0:he,we=isNaN(we)?0:we,this.ctx.transform=new c(W,K,J,re,he,we)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(W,K,J,re,he,we,xe,Ce,We){var qe=this.pdf.getImageProperties(W),it=1,lt=1,vt=1,Pe=1;re!==void 0&&Ce!==void 0&&(vt=Ce/re,Pe=We/he,it=qe.width/re*Ce/re,lt=qe.height/he*We/he),we===void 0&&(we=K,xe=J,K=0,J=0),re!==void 0&&Ce===void 0&&(Ce=re,We=he),re===void 0&&Ce===void 0&&(Ce=qe.width,We=qe.height);for(var ve,dt=this.ctx.transform.decompose(),ut=ne(dt.rotate.shx),Ne=new c,Ke=(Ne=(Ne=(Ne=Ne.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale)).applyToRectangle(new s(we-K*vt,xe-J*Pe,re*it,he*lt)),Ge=I.call(this,Ke),st=[],ft=0;ft<Ge.length;ft+=1)st.indexOf(Ge[ft])===-1&&st.push(Ge[ft]);if(B(st),this.autoPaging)for(var et=st[0],St=st[st.length-1],yt=et;yt<St+1;yt++){this.pdf.setPage(yt);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=yt===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=yt===1?0:xt+(yt-2)*Et;if(this.ctx.clip_path.length!==0){var yn=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ve,this.posX+this.margin[3],-ct+Rt+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=yn}var Vt=JSON.parse(JSON.stringify(Ke));Vt=D([Vt],this.posX+this.margin[3],-ct+Rt+this.ctx.prevPageLastElemOffset)[0];var Kn=(yt>et||yt<St)&&_.call(this);Kn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Et,null).clip().discardPath()),this.pdf.addImage(W,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,ut),Kn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(W,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,ut)};var I=function(W,K,J){var re=[];K=K||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(W.type){default:case"mt":case"lt":re.push(Math.floor((W.y+he)/J)+1);break;case"arc":re.push(Math.floor((W.y+he-W.radius)/J)+1),re.push(Math.floor((W.y+he+W.radius)/J)+1);break;case"qct":var we=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x,W.y);re.push(Math.floor((we.y+he)/J)+1),re.push(Math.floor((we.y+we.h+he)/J)+1);break;case"bct":var xe=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x2,W.y2,W.x,W.y);re.push(Math.floor((xe.y+he)/J)+1),re.push(Math.floor((xe.y+xe.h+he)/J)+1);break;case"rect":re.push(Math.floor((W.y+he)/J)+1),re.push(Math.floor((W.y+W.h+he)/J)+1)}for(var Ce=0;Ce<re.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<re[Ce];)C.call(this);return re},C=function(){var W=this.fillStyle,K=this.strokeStyle,J=this.font,re=this.lineCap,he=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=W,this.strokeStyle=K,this.font=J,this.lineCap=re,this.lineWidth=he,this.lineJoin=we},D=function(W,K,J){for(var re=0;re<W.length;re++)switch(W[re].type){case"bct":W[re].x2+=K,W[re].y2+=J;case"qct":W[re].x1+=K,W[re].y1+=J;case"mt":case"lt":case"arc":default:W[re].x+=K,W[re].y+=J}return W},B=function(W){return W.sort(function(K,J){return K-J})},q=function(W,K){for(var J,re,he=this.fillStyle,we=this.strokeStyle,xe=this.lineCap,Ce=this.lineWidth,We=Math.abs(Ce*this.ctx.transform.scaleX),qe=this.lineJoin,it=JSON.parse(JSON.stringify(this.path)),lt=JSON.parse(JSON.stringify(this.path)),vt=[],Pe=0;Pe<lt.length;Pe++)if(lt[Pe].x!==void 0)for(var ve=I.call(this,lt[Pe]),dt=0;dt<ve.length;dt+=1)vt.indexOf(ve[dt])===-1&&vt.push(ve[dt]);for(var ut=0;ut<vt.length;ut++)for(;this.pdf.internal.getNumberOfPages()<vt[ut];)C.call(this);if(B(vt),this.autoPaging)for(var Ne=vt[0],Ke=vt[vt.length-1],Ge=Ne;Ge<Ke+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=he,this.strokeStyle=we,this.lineCap=xe,this.lineWidth=We,this.lineJoin=qe;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ft=Ge===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=Ge===1?0:et+(Ge-2)*St;if(this.ctx.clip_path.length!==0){var _t=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(J,this.posX+this.margin[3],-yt+ft+this.ctx.prevPageLastElemOffset),Y.call(this,W,!0),this.path=_t}if(re=JSON.parse(JSON.stringify(it)),this.path=D(re,this.posX+this.margin[3],-yt+ft+this.ctx.prevPageLastElemOffset),K===!1||Ge===0){var Rt=(Ge>Ne||Ge<Ke)&&_.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,St,null).clip().discardPath()),Y.call(this,W,K),Rt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=We,Y.call(this,W,K),this.lineWidth=Ce;this.path=it},Y=function(W,K){if((W!=="stroke"||K||!b.call(this))&&(W==="stroke"||K||!m.call(this))){for(var J,re,he=[],we=this.path,xe=0;xe<we.length;xe++){var Ce=we[xe];switch(Ce.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:Ce,deltas:[],abs:[]});break;case"lt":var We=he.length;if(we[xe-1]&&!isNaN(we[xe-1].x)&&(J=[Ce.x-we[xe-1].x,Ce.y-we[xe-1].y],We>0)){for(;We>=0;We--)if(he[We-1].close!==!0&&he[We-1].begin!==!0){he[We-1].deltas.push(J),he[We-1].abs.push(Ce);break}}break;case"bct":J=[Ce.x1-we[xe-1].x,Ce.y1-we[xe-1].y,Ce.x2-we[xe-1].x,Ce.y2-we[xe-1].y,Ce.x-we[xe-1].x,Ce.y-we[xe-1].y],he[he.length-1].deltas.push(J);break;case"qct":var qe=we[xe-1].x+2/3*(Ce.x1-we[xe-1].x),it=we[xe-1].y+2/3*(Ce.y1-we[xe-1].y),lt=Ce.x+2/3*(Ce.x1-Ce.x),vt=Ce.y+2/3*(Ce.y1-Ce.y),Pe=Ce.x,ve=Ce.y;J=[qe-we[xe-1].x,it-we[xe-1].y,lt-we[xe-1].x,vt-we[xe-1].y,Pe-we[xe-1].x,ve-we[xe-1].y],he[he.length-1].deltas.push(J);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(Ce)}}re=K?null:W==="stroke"?"stroke":"fill";for(var dt=!1,ut=0;ut<he.length;ut++)if(he[ut].arc)for(var Ne=he[ut].abs,Ke=0;Ke<Ne.length;Ke++){var Ge=Ne[Ke];Ge.type==="arc"?S.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,K,!dt):L.call(this,Ge.x,Ge.y),dt=!0}else if(he[ut].close===!0)this.pdf.internal.out("h"),dt=!1;else if(he[ut].begin!==!0){var st=he[ut].start.x,ft=he[ut].start.y;F.call(this,he[ut].deltas,st,ft),dt=!0}re&&R.call(this,re),K&&M.call(this)}},H=function(W){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return W-J;case"top":return W+K-J;case"hanging":return W+K-2*J;case"middle":return W+K/2-J;case"ideographic":return W;case"alphabetic":default:return W}},P=function(W){return W+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var W=function(){};return W.colorStops=[],W.addColorStop=function(K,J){this.colorStops.push([K,J])},W.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},W.isCanvasGradient=!0,W},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(W,K,J,re,he,we,xe,Ce,We){for(var qe=V.call(this,J,re,he,we),it=0;it<qe.length;it++){var lt=qe[it];it===0&&(We?T.call(this,lt.x1+W,lt.y1+K):L.call(this,lt.x1+W,lt.y1+K)),X.call(this,W,K,lt.x2,lt.y2,lt.x3,lt.y3,lt.x4,lt.y4)}Ce?M.call(this):R.call(this,xe)},R=function(W){switch(W){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(W,K){this.pdf.internal.out(t(W)+" "+r(K)+" m")},N=function(W){var K;switch(W.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var J=this.pdf.getTextDimensions(W.text),re=H.call(this,W.y),he=P.call(this,re)-J.h,we=this.ctx.transform.applyToPoint(new o(W.x,re)),xe=this.ctx.transform.decompose(),Ce=new c;Ce=(Ce=(Ce=Ce.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var We,qe,it,lt=this.ctx.transform.applyToRectangle(new s(W.x,re,J.w,J.h)),vt=Ce.applyToRectangle(new s(W.x,he,J.w,J.h)),Pe=I.call(this,vt),ve=[],dt=0;dt<Pe.length;dt+=1)ve.indexOf(Pe[dt])===-1&&ve.push(Pe[dt]);if(B(ve),this.autoPaging)for(var ut=ve[0],Ne=ve[ve.length-1],Ke=ut;Ke<Ne+1;Ke++){this.pdf.setPage(Ke);var Ge=Ke===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[2],et=ft-this.margin[0],St=this.pdf.internal.pageSize.width-this.margin[1],yt=St-this.margin[3],_t=Ke===1?0:st+(Ke-2)*et;if(this.ctx.clip_path.length!==0){var Rt=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(We,this.posX+this.margin[3],-1*_t+Ge),Y.call(this,"fill",!0),this.path=Rt}var xt=D([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-_t+Ge+this.ctx.prevPageLastElemOffset)[0];W.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*W.scale),it=this.lineWidth,this.lineWidth=it*W.scale);var Et=this.autoPaging!=="text";if(Et||xt.y+xt.h<=ft){if(Et||xt.y>=Ge&&xt.x<=St){var ct=Et?W.text:this.pdf.splitTextToSize(W.text,W.maxWidth||St-xt.x)[0],yn=D([JSON.parse(JSON.stringify(lt))],this.posX+this.margin[3],-_t+Ge+this.ctx.prevPageLastElemOffset)[0],Vt=Et&&(Ke>ut||Ke<Ne)&&_.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,et,null).clip().discardPath()),this.pdf.text(ct,yn.x,yn.y,{angle:W.angle,align:K,renderingMode:W.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else xt.y<ft&&(this.ctx.prevPageLastElemOffset+=ft-xt.y);W.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=it)}else W.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*W.scale),it=this.lineWidth,this.lineWidth=it*W.scale),this.pdf.text(W.text,we.x+this.posX,we.y+this.posY,{angle:W.angle,align:K,renderingMode:W.renderingMode,maxWidth:W.maxWidth}),W.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=it)},L=function(W,K,J,re){J=J||0,re=re||0,this.pdf.internal.out(t(W+J)+" "+r(K+re)+" l")},F=function(W,K,J){return this.pdf.lines(W,K,J,null,null)},X=function(W,K,J,re,he,we,xe,Ce){this.pdf.internal.out([e(i(J+W)),e(a(re+K)),e(i(he+W)),e(a(we+K)),e(i(xe+W)),e(a(Ce+K)),"c"].join(" "))},V=function(W,K,J,re){for(var he=2*Math.PI,we=Math.PI/2;K>J;)K-=he;var xe=Math.abs(J-K);xe<he&&re&&(xe=he-xe);for(var Ce=[],We=re?-1:1,qe=K;xe>1e-5;){var it=qe+We*Math.min(xe,we);Ce.push(z.call(this,W,qe,it)),xe-=Math.abs(it-qe),qe=it}return Ce},z=function(W,K,J){var re=(J-K)/2,he=W*Math.cos(re),we=W*Math.sin(re),xe=he,Ce=-we,We=xe*xe+Ce*Ce,qe=We+xe*he+Ce*we,it=4/3*(Math.sqrt(2*We*qe)-qe)/(xe*we-Ce*he),lt=xe-it*Ce,vt=Ce+it*xe,Pe=lt,ve=-vt,dt=re+K,ut=Math.cos(dt),Ne=Math.sin(dt);return{x1:W*Math.cos(K),y1:W*Math.sin(K),x2:lt*ut-vt*Ne,y2:lt*Ne+vt*ut,x3:Pe*ut-ve*Ne,y3:Pe*Ne+ve*ut,x4:W*Math.cos(J),y4:W*Math.sin(J)}},ne=function(W){return 180*W/Math.PI},se=function(W,K,J,re,he,we){var xe=W+.5*(J-W),Ce=K+.5*(re-K),We=he+.5*(J-he),qe=we+.5*(re-we),it=Math.min(W,he,xe,We),lt=Math.max(W,he,xe,We),vt=Math.min(K,we,Ce,qe),Pe=Math.max(K,we,Ce,qe);return new s(it,vt,lt-it,Pe-vt)},Q=function(W,K,J,re,he,we,xe,Ce){var We,qe,it,lt,vt,Pe,ve,dt,ut,Ne,Ke,Ge,st,ft,et=J-W,St=re-K,yt=he-J,_t=we-re,Rt=xe-he,xt=Ce-we;for(qe=0;qe<41;qe++)ut=(ve=(it=W+(We=qe/40)*et)+We*((vt=J+We*yt)-it))+We*(vt+We*(he+We*Rt-vt)-ve),Ne=(dt=(lt=K+We*St)+We*((Pe=re+We*_t)-lt))+We*(Pe+We*(we+We*xt-Pe)-dt),qe==0?(Ke=ut,Ge=Ne,st=ut,ft=Ne):(Ke=Math.min(Ke,ut),Ge=Math.min(Ge,Ne),st=Math.max(st,ut),ft=Math.max(ft,Ne));return new s(Math.round(Ke),Math.round(Ge),Math.round(st-Ke),Math.round(ft-Ge))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var W,K,J=(W=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:W,lineDashOffset:K}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Wt.API),function(n){var e=function(a){var o,s,c,f,d,p,g,m,b,_;for(s=[],c=0,f=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;f>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(p=(d=((d=((d=((d=(d-(_=d%85))/85)-(b=d%85))/85)-(m=d%85))/85)-(g=d%85))/85)%85,s.push(p+33,g+33,m+33,b+33,_+33)):s.push(122);return function(I,C){for(var D=C;D>0;D--)I.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},t=function(a){var o,s,c,f,d,p=String,g="length",m=255,b="charCodeAt",_="slice",I="replace";for(a[_](-2),a=a[_](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),c=[],f=0,d=(a+=o="uuuuu"[_](a[g]%5||5))[g];d>f;f+=5)s=52200625*(a[b](f)-33)+614125*(a[b](f+1)-33)+7225*(a[b](f+2)-33)+85*(a[b](f+3)-33)+(a[b](f+4)-33),c.push(m&s>>24,m&s>>16,m&s>>8,m&s);return function(C,D){for(var B=D;B>0;B--)C.pop()}(c,o[g]),p.fromCharCode.apply(p,c)},r=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",c=0;c<a.length;c+=2)s+=String.fromCharCode("0x"+(a[c]+a[c+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=Gy(o)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};n.processDataByFilters=function(a,o){var s=0,c=a||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(Wt.API),function(n){n.loadFile=function(e,t,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(c,f,d){var p=new XMLHttpRequest,g=0,m=function(b){var _=b.length,I=[],C=String.fromCharCode;for(g=0;g<_;g+=1)I.push(C(255&b.charCodeAt(g)));return I.join("")};if(p.open("GET",c,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)}(i,a,o)}catch{}return s}(e,t,r)},n.loadImageFile=n.loadFile}(Wt.API),function(n){function e(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):zy(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):zy(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var s=lr(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var c=document.createElement(o);for(var f in s.className&&(c.className=s.className),s.innerHTML&&s.dompurify&&(c.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)c.style[f]=s.style[f];return c},a=function o(s){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function c(f,d){for(var p=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),g=f.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(c(g,d));return f.nodeType===1&&(f.nodeName==="CANVAS"?(p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(p.value=f.value),p.addEventListener("load",function(){p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,s(this.prop.container,c)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var c=this.opt.jsPDF,f=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var m=f[g],b=m.src.find(function(_){return _.format==="truetype"});b&&c.addFont(b.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),s(this.prop.container,p)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var s=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(o=o||Wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,c,f){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,c,f){return this.setProgress(o?this.progress.val+o:null,s||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(o,s){var c=this;return this.thenCore(o,s,function(f,d){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,f),p}).then(f,d).then(function(p){return c.updateProgress(1),p})})},a.prototype.thenCore=function(o,s,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=c.call(f,o,s);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(c){s=s.thenCore(c)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Wt.getPageSize=function(o,s,c){if(lr(o)==="object"){var f=o;o=f.orientation,s=f.unit||s,c=f.format||c}s=s||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+s}var m,b=0,_=0;if(g.hasOwnProperty(p))b=g[p][1]/d,_=g[p][0]/d;else try{b=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",_>b&&(m=_,_=b,b=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>_&&(m=_,_=b,b=m)}return{width:_,height:b,unit:s,k:d,orientation:o}},n.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(Zy):null;var c=new a(s);return s.worker?c:c.from(o).doCallback()}}(Wt.API),Wt.API.addJS=function(n){return U4=n,this.internal.events.subscribe("postPutResources",function(){Kp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Kp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),F4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+U4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Kp!==void 0&&F4!==void 0&&this.internal.out("/Names <</JavaScript "+Kp+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=r.exec(o);if(s!=null){var c=s[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,d=[];for(a=0;a<f;a++){var p=t.internal.newObject();d.push(p);var g=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<d.length;a++)t.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var c=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(Wt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,o,s){var c,f=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),b=p.length,_={width:0,height:0,numcomponents:1},I=4;I<b;I+=2){if(I+=m,e.indexOf(p.charCodeAt(I+1))!==-1){g=256*p.charCodeAt(I+5)+p.charCodeAt(I+6),_={width:256*p.charCodeAt(I+7)+p.charCodeAt(I+8),height:g,numcomponents:p.charCodeAt(I+9)};break}m=256*p.charCodeAt(I+2)+p.charCodeAt(I+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}d={data:t,width:c.width,height:c.height,colorSpace:s,bitsPerComponent:8,filter:f,index:r,alias:i}}return d}}(Wt.API);var Jd,Qp,z4,V4,q4,JV=function(){var n,e,t;function r(a){var o,s,c,f,d,p,g,m,b,_,I,C,D,B;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),b=(function(){var q,Y;for(Y=[],q=0;q<4;++q)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),f=this.readUInt16()||100,p.delay=1e3*d/f,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),a=(p!=null?p.data:void 0)||this.imgData,C=0;0<=o?C<o:C>o;0<=o?++C:--C)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(D=0;0<=_?D<_:D>_;0<=_?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(I=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,I.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,I.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),c=0,f=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(p,g,m,b){var _,I,C,D,B,q,Y,H,P,S,R,M,T,N,L,F,X,V,z,ne,se,Q=Math.ceil((f.width-p)/m),oe=Math.ceil((f.height-g)/b),W=f.width==Q&&f.height==oe;for(N=o*Q,M=W?s:new Uint8Array(N*oe),q=a.length,T=0,I=0;T<oe&&c<q;){switch(a[c++]){case 0:for(D=X=0;X<N;D=X+=1)M[I++]=a[c++];break;case 1:for(D=V=0;V<N;D=V+=1)_=a[c++],B=D<o?0:M[I-o],M[I++]=(_+B)%256;break;case 2:for(D=z=0;z<N;D=z+=1)_=a[c++],C=(D-D%o)/o,L=T&&M[(T-1)*N+C*o+D%o],M[I++]=(L+_)%256;break;case 3:for(D=ne=0;ne<N;D=ne+=1)_=a[c++],C=(D-D%o)/o,B=D<o?0:M[I-o],L=T&&M[(T-1)*N+C*o+D%o],M[I++]=(_+Math.floor((B+L)/2))%256;break;case 4:for(D=se=0;se<N;D=se+=1)_=a[c++],C=(D-D%o)/o,B=D<o?0:M[I-o],T===0?L=F=0:(L=M[(T-1)*N+C*o+D%o],F=C&&M[(T-1)*N+(C-1)*o+D%o]),Y=B+L-F,H=Math.abs(Y-B),S=Math.abs(Y-L),R=Math.abs(Y-F),P=H<=S&&H<=R?B:S<=R?L:F,M[I++]=(_+P)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!W){var K=((g+T*b)*f.width+p)*o,J=T*N;for(D=0;D<Q;D+=1){for(var re=0;re<o;re+=1)s[K++]=M[J++];K+=(m-1)*o}}T++}}return a=DV(a),f.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),s},r.prototype.decodePalette=function(){var a,o,s,c,f,d,p,g,m;for(s=this.palette,d=this.transparency.indexed||[],f=new Uint8Array((d.length||0)+s.length),c=0,a=0,o=p=0,g=s.length;p<g;o=p+=3)f[c++]=s[o],f[c++]=s[o+1],f[c++]=s[o+2],f[c++]=(m=d[a++])!=null?m:255;return f},r.prototype.copyToImageData=function(a,o){var s,c,f,d,p,g,m,b,_,I,C;if(c=this.colors,_=null,s=this.hasAlphaChannel,this.palette.length&&(_=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),c=4,s=!0),b=(f=a.data||a).length,p=_||o,d=g=0,c===1)for(;d<b;)m=_?4*o[d/4]:g,I=p[m++],f[d++]=I,f[d++]=I,f[d++]=I,f[d++]=s?p[m++]:255,g=m;else for(;d<b;)m=_?4*o[d/4]:g,f[d++]=p[m++],f[d++]=p[m++],f[d++]=p[m++],f[d++]=s?p[m++]:255,g=m},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Gt)==="[object Window]"){try{e=Gt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(a){var o;if(i()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var o,s,c,f,d,p,g,m;if(this.animation){for(m=[],s=d=0,p=(g=this.animation.frames).length;d<p;s=++d)o=g[s],c=a.createImageData(o.width,o.height),f=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,f),o.imageData=c,m.push(o.image=n(c));return m}},r.prototype.renderFrame=function(a,o){var s,c,f;return s=(c=this.animation.frames)[o],f=c[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?a.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&a.putImageData(f.imageData,f.xOffset,f.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(a){var o,s,c,f,d,p,g=this;return s=0,p=this.animation,f=p.numFrames,c=p.frames,d=p.numPlays,(o=function(){var m,b;if(m=s++%f,b=c[m],g.renderFrame(a,m),f>1&&s/f<d)return g.animation._timeout=setTimeout(o,b.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function eq(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var s=null,c=null;a&&(s=e,c=o,e+=3*o);var f=!0,d=[],p=0,g=null,m=0,b=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,b=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];p=n[e++]|n[e++]<<8,g=n[e++],(1&_)==0&&(g=null),m=_>>2&7,e++;break;case 254:for(;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var I=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,q=n[e++],Y=q>>6&1,H=1<<(7&q)+1,P=s,S=c,R=!1;q>>7&&(R=!0,P=e,S=H,e+=3*H);var M=e;for(e++;;){var T;if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}d.push({x:I,y:C,width:D,height:B,has_local_palette:R,palette_offset:P,palette_size:S,data_offset:M,data_length:e-M,transparent_index:g,interlaced:!!Y,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(N){if(N<0||N>=d.length)throw new Error("Frame index out of range.");return d[N]},this.decodeAndBlitFrameBGRA=function(N,L){var F=this.frameInfo(N),X=F.width*F.height,V=new Uint8Array(X);H4(n,F.data_offset,V,X);var z=F.palette_offset,ne=F.transparent_index;ne===null&&(ne=256);var se=F.width,Q=t-se,oe=se,W=4*(F.y*t+F.x),K=4*((F.y+F.height)*t+F.x),J=W,re=4*Q;F.interlaced===!0&&(re+=4*t*7);for(var he=8,we=0,xe=V.length;we<xe;++we){var Ce=V[we];if(oe===0&&(oe=se,(J+=re)>=K&&(re=4*Q+4*t*(he-1),J=W+(se+Q)*(he<<1),he>>=1)),Ce===ne)J+=4;else{var We=n[z+3*Ce],qe=n[z+3*Ce+1],it=n[z+3*Ce+2];L[J++]=it,L[J++]=qe,L[J++]=We,L[J++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(N,L){var F=this.frameInfo(N),X=F.width*F.height,V=new Uint8Array(X);H4(n,F.data_offset,V,X);var z=F.palette_offset,ne=F.transparent_index;ne===null&&(ne=256);var se=F.width,Q=t-se,oe=se,W=4*(F.y*t+F.x),K=4*((F.y+F.height)*t+F.x),J=W,re=4*Q;F.interlaced===!0&&(re+=4*t*7);for(var he=8,we=0,xe=V.length;we<xe;++we){var Ce=V[we];if(oe===0&&(oe=se,(J+=re)>=K&&(re=4*Q+4*t*(he-1),J=W+(se+Q)*(he<<1),he>>=1)),Ce===ne)J+=4;else{var We=n[z+3*Ce],qe=n[z+3*Ce+1],it=n[z+3*Ce+2];L[J++]=We,L[J++]=qe,L[J++]=it,L[J++]=255}--oe}}}function H4(n,e,t,r){for(var i=n[e++],a=1<<i,o=a+1,s=o+1,c=i+1,f=(1<<c)-1,d=0,p=0,g=0,m=n[e++],b=new Int32Array(4096),_=null;;){for(;d<16&&m!==0;)p|=n[e++]<<d,d+=8,m===1?m=n[e++]:--m;if(d<c)break;var I=p&f;if(p>>=c,d-=c,I!==a){if(I===o)break;for(var C=I<s?I:_,D=0,B=C;B>a;)B=b[B]>>8,++D;var q=B;if(g+D+(C!==I?1:0)>r)return void br.log("Warning, gif stream longer than expected.");t[g++]=q;var Y=g+=D;for(C!==I&&(t[g++]=q),B=C;D--;)B=b[B],t[--Y]=255&B,B>>=8;_!==null&&s<4096&&(b[s++]=_<<8|q,s>=f+1&&c<12&&(++c,f=f<<1|1)),_=I}else s=o+1,f=(1<<(c=i+1))-1,_=null}return g!==r&&br.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function qv(n){var e,t,r,i,a,o=Math.floor,s=new Array(64),c=new Array(64),f=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),b=new Array(64),_=[],I=0,C=7,D=new Array(64),B=new Array(64),q=new Array(64),Y=new Array(256),H=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(W,K){for(var J=0,re=0,he=new Array,we=1;we<=16;we++){for(var xe=1;xe<=W[we];xe++)he[K[re]]=[],he[K[re]][0]=J,he[K[re]][1]=we,re++,J++;J*=2}return he}function z(W){for(var K=W[0],J=W[1]-1;J>=0;)K&1<<J&&(I|=1<<C),J--,--C<0&&(I==255?(ne(255),ne(0)):ne(I),C=7,I=0)}function ne(W){_.push(W)}function se(W){ne(W>>8&255),ne(255&W)}function Q(W,K,J,re,he){for(var we,xe=he[0],Ce=he[240],We=function(Ne,Ke){var Ge,st,ft,et,St,yt,_t,Rt,xt,Et,ct=0;for(xt=0;xt<8;++xt){Ge=Ne[ct],st=Ne[ct+1],ft=Ne[ct+2],et=Ne[ct+3],St=Ne[ct+4],yt=Ne[ct+5],_t=Ne[ct+6];var yn=Ge+(Rt=Ne[ct+7]),Vt=Ge-Rt,Kn=st+_t,Kt=st-_t,Sn=ft+yt,mi=ft-yt,on=et+St,pa=et-St,In=yn+on,jr=yn-on,ur=Kn+Sn,xn=Kn-Sn;Ne[ct]=In+ur,Ne[ct+4]=In-ur;var Nt=.707106781*(xn+jr);Ne[ct+2]=jr+Nt,Ne[ct+6]=jr-Nt;var nn=.382683433*((In=pa+mi)-(xn=Kt+Vt)),Ei=.5411961*In+nn,jn=1.306562965*xn+nn,vr=.707106781*(ur=mi+Kt),Ua=Vt+vr,bt=Vt-vr;Ne[ct+5]=bt+Ei,Ne[ct+3]=bt-Ei,Ne[ct+1]=Ua+jn,Ne[ct+7]=Ua-jn,ct+=8}for(ct=0,xt=0;xt<8;++xt){Ge=Ne[ct],st=Ne[ct+8],ft=Ne[ct+16],et=Ne[ct+24],St=Ne[ct+32],yt=Ne[ct+40],_t=Ne[ct+48];var Gn=Ge+(Rt=Ne[ct+56]),$n=Ge-Rt,yr=st+_t,Er=st-_t,Dr=ft+yt,Gr=ft-yt,Is=et+St,Ji=et-St,vi=Gn+Is,ti=Gn-Is,$r=yr+Dr,ni=yr-Dr;Ne[ct]=vi+$r,Ne[ct+32]=vi-$r;var fr=.707106781*(ni+ti);Ne[ct+16]=ti+fr,Ne[ct+48]=ti-fr;var Bn=.382683433*((vi=Ji+Gr)-(ni=Er+$n)),Co=.5411961*vi+Bn,Io=1.306562965*ni+Bn,Bi=.707106781*($r=Gr+Er),ga=$n+Bi,Ts=$n-Bi;Ne[ct+40]=Ts+Co,Ne[ct+24]=Ts-Co,Ne[ct+8]=ga+Io,Ne[ct+56]=ga-Io,ct++}for(xt=0;xt<64;++xt)Et=Ne[xt]*Ke[xt],m[xt]=Et>0?Et+.5|0:Et-.5|0;return m}(W,K),qe=0;qe<64;++qe)b[P[qe]]=We[qe];var it=b[0]-J;J=b[0],it==0?z(re[0]):(z(re[g[we=32767+it]]),z(p[we]));for(var lt=63;lt>0&&b[lt]==0;)lt--;if(lt==0)return z(xe),J;for(var vt,Pe=1;Pe<=lt;){for(var ve=Pe;b[Pe]==0&&Pe<=lt;)++Pe;var dt=Pe-ve;if(dt>=16){vt=dt>>4;for(var ut=1;ut<=vt;++ut)z(Ce);dt&=15}we=32767+b[Pe],z(he[(dt<<4)+g[we]]),z(p[we]),Pe++}return lt!=63&&z(xe),J}function oe(W){W=Math.min(Math.max(W,1),100),a!=W&&(function(K){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var he=o((J[re]*K+50)/100);he=Math.min(Math.max(he,1),255),s[P[re]]=he}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var Ce=o((we[xe]*K+50)/100);Ce=Math.min(Math.max(Ce,1),255),c[P[xe]]=Ce}for(var We=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,it=0;it<8;it++)for(var lt=0;lt<8;lt++)f[qe]=1/(s[P[qe]]*We[it]*We[lt]*8),d[qe]=1/(c[P[qe]]*We[it]*We[lt]*8),qe++}(W<50?Math.floor(5e3/W):Math.floor(200-2*W)),a=W)}this.encode=function(W,K){K&&oe(K),_=new Array,I=0,C=7,se(65496),se(65504),se(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),se(1),se(1),ne(0),ne(0),function(){se(65499),se(132),ne(0);for(var st=0;st<64;st++)ne(s[st]);ne(1);for(var ft=0;ft<64;ft++)ne(c[ft])}(),function(st,ft){se(65472),se(17),ne(8),se(ft),se(st),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(W.width,W.height),function(){se(65476),se(418),ne(0);for(var st=0;st<16;st++)ne(S[st+1]);for(var ft=0;ft<=11;ft++)ne(R[ft]);ne(16);for(var et=0;et<16;et++)ne(M[et+1]);for(var St=0;St<=161;St++)ne(T[St]);ne(1);for(var yt=0;yt<16;yt++)ne(N[yt+1]);for(var _t=0;_t<=11;_t++)ne(L[_t]);ne(17);for(var Rt=0;Rt<16;Rt++)ne(F[Rt+1]);for(var xt=0;xt<=161;xt++)ne(X[xt])}(),se(65498),se(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var J=0,re=0,he=0;I=0,C=7,this.encode.displayName="_encode_";for(var we,xe,Ce,We,qe,it,lt,vt,Pe,ve=W.data,dt=W.width,ut=W.height,Ne=4*dt,Ke=0;Ke<ut;){for(we=0;we<Ne;){for(qe=Ne*Ke+we,lt=-1,vt=0,Pe=0;Pe<64;Pe++)it=qe+(vt=Pe>>3)*Ne+(lt=4*(7&Pe)),Ke+vt>=ut&&(it-=Ne*(Ke+1+vt-ut)),we+lt>=Ne&&(it-=we+lt-Ne+4),xe=ve[it++],Ce=ve[it++],We=ve[it++],D[Pe]=(H[xe]+H[Ce+256>>0]+H[We+512>>0]>>16)-128,B[Pe]=(H[xe+768>>0]+H[Ce+1024>>0]+H[We+1280>>0]>>16)-128,q[Pe]=(H[xe+1280>>0]+H[Ce+1536>>0]+H[We+1792>>0]>>16)-128;J=Q(D,f,J,e,r),re=Q(B,d,re,t,i),he=Q(q,d,he,t,i),we+=32}Ke+=8}if(C>=0){var Ge=[];Ge[1]=C+1,Ge[0]=(1<<C+1)-1,z(Ge)}return se(65497),new Uint8Array(_)},n=n||50,function(){for(var W=String.fromCharCode,K=0;K<256;K++)Y[K]=W(K)}(),e=V(S,R),t=V(N,L),r=V(M,T),i=V(F,X),function(){for(var W=1,K=2,J=1;J<=15;J++){for(var re=W;re<K;re++)g[32767+re]=J,p[32767+re]=[],p[32767+re][1]=J,p[32767+re][0]=re;for(var he=-(K-1);he<=-W;he++)g[32767+he]=J,p[32767+he]=[],p[32767+he][1]=J,p[32767+he][0]=K-1+he;W<<=1,K<<=1}}(),function(){for(var W=0;W<256;W++)H[W]=19595*W,H[W+256>>0]=38470*W,H[W+512>>0]=7471*W+32768,H[W+768>>0]=-11059*W,H[W+1024>>0]=-21709*W,H[W+1280>>0]=32768*W+8421375,H[W+1536>>0]=-27439*W,H[W+1792>>0]=-5329*W}(),oe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function tl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function W4(n){function e(S){if(!S)throw Error("assert :P")}function t(S,R,M){for(var T=0;4>T;T++)if(S[R+T]!=M.charCodeAt(T))return!0;return!1}function r(S,R,M,T,N){for(var L=0;L<N;L++)S[R+L]=M[T+L]}function i(S,R,M,T){for(var N=0;N<T;N++)S[R+N]=M}function a(S){return new Int32Array(S)}function o(S,R){for(var M=[],T=0;T<S;T++)M.push(new R);return M}function s(S,R){var M=[];return function T(N,L,F){for(var X=F[L],V=0;V<X&&(N.push(F.length>L+1?[]:new R),!(F.length<L+1));V++)T(N[V],L+1,F)}(M,0,S),M}var c=function(){var S=this;function R(x,E){for(var j=1<<E-1>>>0;x&j;)j>>>=1;return j?(x&j-1)+j:x}function M(x,E,j,G,ee){e(!(G%j));do x[E+(G-=j)]=ee;while(0<G)}function T(x,E,j,G,ee){if(e(2328>=ee),512>=ee)var ie=a(512);else if((ie=a(ee))==null)return 0;return function(ae,le,fe,ge,_e,Le){var Oe,Re,Ze=le,ze=1<<fe,Ae=a(16),Ee=a(16);for(e(_e!=0),e(ge!=null),e(ae!=null),e(0<fe),Re=0;Re<_e;++Re){if(15<ge[Re])return 0;++Ae[ge[Re]]}if(Ae[0]==_e)return 0;for(Ee[1]=0,Oe=1;15>Oe;++Oe){if(Ae[Oe]>1<<Oe)return 0;Ee[Oe+1]=Ee[Oe]+Ae[Oe]}for(Re=0;Re<_e;++Re)Oe=ge[Re],0<ge[Re]&&(Le[Ee[Oe]++]=Re);if(Ee[15]==1)return(ge=new N).g=0,ge.value=Le[0],M(ae,Ze,1,ze,ge),ze;var $e,Je=-1,Xe=ze-1,wt=0,ht=1,kt=1,gt=1<<fe;for(Re=0,Oe=1,_e=2;Oe<=fe;++Oe,_e<<=1){if(ht+=kt<<=1,0>(kt-=Ae[Oe]))return 0;for(;0<Ae[Oe];--Ae[Oe])(ge=new N).g=Oe,ge.value=Le[Re++],M(ae,Ze+wt,_e,gt,ge),wt=R(wt,Oe)}for(Oe=fe+1,_e=2;15>=Oe;++Oe,_e<<=1){if(ht+=kt<<=1,0>(kt-=Ae[Oe]))return 0;for(;0<Ae[Oe];--Ae[Oe]){if(ge=new N,(wt&Xe)!=Je){for(Ze+=gt,$e=1<<(Je=Oe)-fe;15>Je&&!(0>=($e-=Ae[Je]));)++Je,$e<<=1;ze+=gt=1<<($e=Je-fe),ae[le+(Je=wt&Xe)].g=$e+fe,ae[le+Je].value=Ze-le-Je}ge.g=Oe-fe,ge.value=Le[Re++],M(ae,Ze+(wt>>fe),_e,gt,ge),wt=R(wt,Oe)}}return ht!=2*Ee[15]-1?0:ze}(x,E,j,G,ee,ie)}function N(){this.value=this.g=0}function L(){this.value=this.g=0}function F(){this.G=o(5,N),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ii,L)}function X(x,E,j,G){e(x!=null),e(E!=null),e(2147483648>G),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=E,x.pa=j,x.Jd=E,x.Yc=j+G,x.Zc=4<=G?j+G-4+1:j,we(x)}function V(x,E){for(var j=0;0<E--;)j|=Ce(x,128)<<E;return j}function z(x,E){var j=V(x,E);return xe(x)?-j:j}function ne(x,E,j,G){var ee,ie=0;for(e(x!=null),e(E!=null),e(4294967288>G),x.Sb=G,x.Ra=0,x.u=0,x.h=0,4<G&&(G=4),ee=0;ee<G;++ee)ie+=E[j+ee]<<8*ee;x.Ra=ie,x.bb=G,x.oa=E,x.pa=j}function se(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<_c-8>>>0,++x.bb,x.u-=8;J(x)&&(x.h=1,x.u=0)}function Q(x,E){if(e(0<=E),!x.h&&E<=wc){var j=K(x)&Sl[E];return x.u+=E,se(x),j}return x.h=1,x.u=0}function oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(x){return x.Ra>>>(x.u&_c-1)>>>0}function J(x){return e(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>_c}function re(x,E){x.u=E,x.h=J(x)}function he(x){x.u>=mu&&(e(x.u>=mu),se(x))}function we(x){e(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(e(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function xe(x){return V(x,1)}function Ce(x,E){var j=x.Ca;0>x.b&&we(x);var G=x.b,ee=j*E>>>8,ie=(x.I>>>G>ee)+0;for(ie?(j-=ee,x.I-=ee+1<<G>>>0):j=ee+1,G=j,ee=0;256<=G;)ee+=8,G>>=8;return G=7^ee+wa[G],x.b-=G,x.Ca=(j<<G)-1,ie}function We(x,E,j){x[E+0]=j>>24&255,x[E+1]=j>>16&255,x[E+2]=j>>8&255,x[E+3]=j>>0&255}function qe(x,E){return x[E+0]<<0|x[E+1]<<8}function it(x,E){return qe(x,E)|x[E+2]<<16}function lt(x,E){return qe(x,E)|qe(x,E+2)<<16}function vt(x,E){var j=1<<E;return e(x!=null),e(0<E),x.X=a(j),x.X==null?0:(x.Mb=32-E,x.Xa=E,1)}function Pe(x,E){e(x!=null),e(E!=null),e(x.Xa==E.Xa),r(E.X,0,x.X,0,1<<E.Xa)}function ve(){this.X=[],this.Xa=this.Mb=0}function dt(x,E,j,G){e(j!=null),e(G!=null);var ee=j[0],ie=G[0];return ee==0&&(ee=(x*ie+E/2)/E),ie==0&&(ie=(E*ee+x/2)/x),0>=ee||0>=ie?0:(j[0]=ee,G[0]=ie,1)}function ut(x,E){return x+(1<<E)-1>>>E}function Ne(x,E){return((4278255360&x)+(4278255360&E)>>>0&4278255360)+((16711935&x)+(16711935&E)>>>0&16711935)>>>0}function Ke(x,E){S[E]=function(j,G,ee,ie,ae,le,fe){var ge;for(ge=0;ge<ae;++ge){var _e=S[x](le[fe+ge-1],ee,ie+ge);le[fe+ge]=Ne(j[G+ge],_e)}}}function Ge(){this.ud=this.hd=this.jd=0}function st(x,E){return((4278124286&(x^E))>>>1)+(x&E)>>>0}function ft(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function et(x,E){return ft(x+(x-E+.5>>1))}function St(x,E,j){return Math.abs(E-j)-Math.abs(x-j)}function yt(x,E,j,G,ee,ie,ae){for(G=ie[ae-1],j=0;j<ee;++j)ie[ae+j]=G=Ne(x[E+j],G)}function _t(x,E,j,G,ee){var ie;for(ie=0;ie<j;++ie){var ae=x[E+ie],le=ae>>8&255,fe=16711935&(fe=(fe=16711935&ae)+((le<<16)+le));G[ee+ie]=(4278255360&ae)+fe>>>0}}function Rt(x,E){E.jd=x>>0&255,E.hd=x>>8&255,E.ud=x>>16&255}function xt(x,E,j,G,ee,ie){var ae;for(ae=0;ae<G;++ae){var le=E[j+ae],fe=le>>>8,ge=le,_e=255&(_e=(_e=le>>>16)+((x.jd<<24>>24)*(fe<<24>>24)>>>5));ge=255&(ge=(ge=ge+((x.hd<<24>>24)*(fe<<24>>24)>>>5))+((x.ud<<24>>24)*(_e<<24>>24)>>>5)),ee[ie+ae]=(4278255360&le)+(_e<<16)+ge}}function Et(x,E,j,G,ee){S[E]=function(ie,ae,le,fe,ge,_e,Le,Oe,Re){for(fe=Le;fe<Oe;++fe)for(Le=0;Le<Re;++Le)ge[_e++]=ee(le[G(ie[ae++])])},S[x]=function(ie,ae,le,fe,ge,_e,Le){var Oe=8>>ie.b,Re=ie.Ea,Ze=ie.K[0],ze=ie.w;if(8>Oe)for(ie=(1<<ie.b)-1,ze=(1<<Oe)-1;ae<le;++ae){var Ae,Ee=0;for(Ae=0;Ae<Re;++Ae)Ae&ie||(Ee=G(fe[ge++])),_e[Le++]=ee(Ze[Ee&ze]),Ee>>=Oe}else S["VP8LMapColor"+j](fe,ge,Ze,ze,_e,Le,ae,le,Re)}}function ct(x,E,j,G,ee){for(j=E+j;E<j;){var ie=x[E++];G[ee++]=ie>>16&255,G[ee++]=ie>>8&255,G[ee++]=ie>>0&255}}function yn(x,E,j,G,ee){for(j=E+j;E<j;){var ie=x[E++];G[ee++]=ie>>16&255,G[ee++]=ie>>8&255,G[ee++]=ie>>0&255,G[ee++]=ie>>24&255}}function Vt(x,E,j,G,ee){for(j=E+j;E<j;){var ie=(ae=x[E++])>>16&240|ae>>12&15,ae=ae>>0&240|ae>>28&15;G[ee++]=ie,G[ee++]=ae}}function Kn(x,E,j,G,ee){for(j=E+j;E<j;){var ie=(ae=x[E++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;G[ee++]=ie,G[ee++]=ae}}function Kt(x,E,j,G,ee){for(j=E+j;E<j;){var ie=x[E++];G[ee++]=ie>>0&255,G[ee++]=ie>>8&255,G[ee++]=ie>>16&255}}function Sn(x,E,j,G,ee,ie){if(ie==0)for(j=E+j;E<j;)We(G,((ie=x[E++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),ee+=32;else r(G,ee,x,E,j)}function mi(x,E){S[E][0]=S[x+"0"],S[E][1]=S[x+"1"],S[E][2]=S[x+"2"],S[E][3]=S[x+"3"],S[E][4]=S[x+"4"],S[E][5]=S[x+"5"],S[E][6]=S[x+"6"],S[E][7]=S[x+"7"],S[E][8]=S[x+"8"],S[E][9]=S[x+"9"],S[E][10]=S[x+"10"],S[E][11]=S[x+"11"],S[E][12]=S[x+"12"],S[E][13]=S[x+"13"],S[E][14]=S[x+"0"],S[E][15]=S[x+"0"]}function on(x){return x==Cf||x==Pl||x==zs||x==bu}function pa(){this.eb=[],this.size=this.A=this.fb=0}function In(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function jr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pa,this.f.kb=new In,this.sd=null}function ur(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nt(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function nn(x,E){var j=x.T,G=E.ba.f.RGBA,ee=G.eb,ie=G.fb+x.ka*G.A,ae=wi[E.ba.S],le=x.y,fe=x.O,ge=x.f,_e=x.N,Le=x.ea,Oe=x.W,Re=E.cc,Ze=E.dc,ze=E.Mc,Ae=E.Nc,Ee=x.ka,$e=x.ka+x.T,Je=x.U,Xe=Je+1>>1;for(Ee==0?ae(le,fe,null,null,ge,_e,Le,Oe,ge,_e,Le,Oe,ee,ie,null,null,Je):(ae(E.ec,E.fc,le,fe,Re,Ze,ze,Ae,ge,_e,Le,Oe,ee,ie-G.A,ee,ie,Je),++j);Ee+2<$e;Ee+=2)Re=ge,Ze=_e,ze=Le,Ae=Oe,_e+=x.Rc,Oe+=x.Rc,ie+=2*G.A,ae(le,(fe+=2*x.fa)-x.fa,le,fe,Re,Ze,ze,Ae,ge,_e,Le,Oe,ee,ie-G.A,ee,ie,Je);return fe+=x.fa,x.j+$e<x.o?(r(E.ec,E.fc,le,fe,Je),r(E.cc,E.dc,ge,_e,Xe),r(E.Mc,E.Nc,Le,Oe,Xe),j--):1&$e||ae(le,fe,null,null,ge,_e,Le,Oe,ge,_e,Le,Oe,ee,ie+G.A,null,null,Je),j}function Ei(x,E,j){var G=x.F,ee=[x.J];if(G!=null){var ie=x.U,ae=E.ba.S,le=ae==Ic||ae==zs;E=E.ba.f.RGBA;var fe=[0],ge=x.ka;fe[0]=x.T,x.Kb&&(ge==0?--fe[0]:(--ge,ee[0]-=x.width),x.j+x.ka+x.T==x.o&&(fe[0]=x.o-x.j-ge));var _e=E.eb;ge=E.fb+ge*E.A,x=cn(G,ee[0],x.width,ie,fe,_e,ge+(le?0:3),E.A),e(j==fe),x&&on(ae)&&Ha(_e,ge,le,ie,fe,E.A)}return 0}function jn(x){var E=x.ma,j=E.ba.S,G=11>j,ee=j==xu||j==Ef||j==Ic||j==Us||j==12||on(j);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Al(E.Oa,x,ee?11:12))return 0;if(ee&&on(j)&&at(),x.da)alert("todo:use_scaling");else{if(G){if(E.Ib=Nt,x.Kb){if(j=x.U+1>>1,E.memory=a(x.U+2*j),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+x.U,E.Mc=E.cc,E.Nc=E.dc+j,E.Ib=nn,at()}}else alert("todo:EmitYUV");ee&&(E.Jb=Ei,G&&Te())}if(G&&!z1){for(x=0;256>x;++x)Xm[x]=89858*(x-128)+oi>>gs,Rf[x]=-22014*(x-128)+oi,zh[x]=-45773*(x-128),si[x]=113618*(x-128)+oi>>gs;for(x=jl;x<Id;++x)E=76283*(x-16)+oi>>gs,Nf[x-jl]=Un(E,255),Vh[x-jl]=Un(E+8>>4,15);z1=1}return 1}function vr(x){var E=x.ma,j=x.U,G=x.T;return e(!(1&x.ka)),0>=j||0>=G?0:(j=E.Ib(x,E),E.Jb!=null&&E.Jb(x,E,j),E.Dc+=j,1)}function Ua(x){x.ma.memory=null}function bt(x,E,j,G){return Q(x,8)!=47?0:(E[0]=Q(x,14)+1,j[0]=Q(x,14)+1,G[0]=Q(x,1),Q(x,3)!=0?0:!x.h)}function Gn(x,E){if(4>x)return x+1;var j=x-2>>1;return(2+(1&x)<<j)+Q(E,j)+1}function $n(x,E){return 120<E?E-120:1<=(j=((j=qs[E-1])>>4)*x+(8-(15&j)))?j:1;var j}function yr(x,E,j){var G=K(j),ee=x[E+=255&G].g-8;return 0<ee&&(re(j,j.u+8),G=K(j),E+=x[E].value,E+=G&(1<<ee)-1),re(j,j.u+x[E].g),x[E].value}function Er(x,E,j){return j.g+=x.g,j.value+=x.value<<E>>>0,e(8>=j.g),x.g}function Dr(x,E,j){var G=x.xc;return e((E=G==0?0:x.vc[x.md*(j>>G)+(E>>G)])<x.Wb),x.Ya[E]}function Gr(x,E,j,G){var ee=x.ab,ie=x.c*E,ae=x.C;E=ae+E;var le=j,fe=G;for(G=x.Ta,j=x.Ua;0<ee--;){var ge=x.gc[ee],_e=ae,Le=E,Oe=le,Re=fe,Ze=(fe=G,le=j,ge.Ea);switch(e(_e<Le),e(Le<=ge.nc),ge.hc){case 2:bd(Oe,Re,(Le-_e)*Ze,fe,le);break;case 0:var ze=_e,Ae=Le,Ee=fe,$e=le,Je=(gt=ge).Ea;ze==0&&(Fh(Oe,Re,null,null,1,Ee,$e),yt(Oe,Re+1,0,0,Je-1,Ee,$e+1),Re+=Je,$e+=Je,++ze);for(var Xe=1<<gt.b,wt=Xe-1,ht=ut(Je,gt.b),kt=gt.K,gt=gt.w+(ze>>gt.b)*ht;ze<Ae;){var Tn=kt,zn=gt,sn=1;for(Af(Oe,Re,Ee,$e-Je,1,Ee,$e);sn<Je;){var rn=(sn&~wt)+Xe;rn>Je&&(rn=Je),(0,js[Tn[zn++]>>8&15])(Oe,Re+ +sn,Ee,$e+sn-Je,rn-sn,Ee,$e+sn),sn=rn}Re+=Je,$e+=Je,++ze&wt||(gt+=ht)}Le!=ge.nc&&r(fe,le-Ze,fe,le+(Le-_e-1)*Ze,Ze);break;case 1:for(Ze=Oe,Ae=Re,Je=(Oe=ge.Ea)-($e=Oe&~(Ee=(Re=1<<ge.b)-1)),ze=ut(Oe,ge.b),Xe=ge.K,ge=ge.w+(_e>>ge.b)*ze;_e<Le;){for(wt=Xe,ht=ge,kt=new Ge,gt=Ae+$e,Tn=Ae+Oe;Ae<gt;)Rt(wt[ht++],kt),Cl(kt,Ze,Ae,Re,fe,le),Ae+=Re,le+=Re;Ae<Tn&&(Rt(wt[ht++],kt),Cl(kt,Ze,Ae,Je,fe,le),Ae+=Je,le+=Je),++_e&Ee||(ge+=ze)}break;case 3:if(Oe==fe&&Re==le&&0<ge.b){for(Ae=fe,Oe=Ze=le+(Le-_e)*Ze-($e=(Le-_e)*ut(ge.Ea,ge.b)),Re=fe,Ee=le,ze=[],$e=(Je=$e)-1;0<=$e;--$e)ze[$e]=Re[Ee+$e];for($e=Je-1;0<=$e;--$e)Ae[Oe+$e]=ze[$e];lo(ge,_e,Le,fe,Ze,fe,le)}else lo(ge,_e,Le,Oe,Re,fe,le)}le=G,fe=j}fe!=j&&r(G,j,le,fe,ie)}function Is(x,E){var j=x.V,G=x.Ba+x.c*x.C,ee=E-x.C;if(e(E<=x.l.o),e(16>=ee),0<ee){var ie=x.l,ae=x.Ta,le=x.Ua,fe=ie.width;if(Gr(x,ee,j,G),ee=le=[le],e((j=x.C)<(G=E)),e(ie.v<ie.va),G>ie.o&&(G=ie.o),j<ie.j){var ge=ie.j-j;j=ie.j,ee[0]+=ge*fe}if(j>=G?j=0:(ee[0]+=4*ie.v,ie.ka=j-ie.j,ie.U=ie.va-ie.v,ie.T=G-j,j=1),j){if(le=le[0],11>(j=x.ca).S){var _e=j.f.RGBA,Le=(G=j.S,ee=ie.U,ie=ie.T,ge=_e.eb,_e.A),Oe=ie;for(_e=_e.fb+x.Ma*_e.A;0<Oe--;){var Re=ae,Ze=le,ze=ee,Ae=ge,Ee=_e;switch(G){case qi:ta(Re,Ze,ze,Ae,Ee);break;case xu:Ri(Re,Ze,ze,Ae,Ee);break;case Cf:Ri(Re,Ze,ze,Ae,Ee),Ha(Ae,Ee,0,ze,1,0);break;case fs:jo(Re,Ze,ze,Ae,Ee);break;case Ef:Sn(Re,Ze,ze,Ae,Ee,1);break;case Pl:Sn(Re,Ze,ze,Ae,Ee,1),Ha(Ae,Ee,0,ze,1,0);break;case Ic:Sn(Re,Ze,ze,Ae,Ee,0);break;case zs:Sn(Re,Ze,ze,Ae,Ee,0),Ha(Ae,Ee,1,ze,1,0);break;case Us:Il(Re,Ze,ze,Ae,Ee);break;case bu:Il(Re,Ze,ze,Ae,Ee),ln(Ae,Ee,ze,1,0);break;case _d:_a(Re,Ze,ze,Ae,Ee);break;default:e(0)}le+=fe,_e+=Le}x.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");e(x.Ma<=j.height)}}x.C=E,e(x.C<=x.i)}function Ji(x){var E;if(0<x.ua)return 0;for(E=0;E<x.Wb;++E){var j=x.Ya[E].G,G=x.Ya[E].H;if(0<j[1][G[1]+0].g||0<j[2][G[2]+0].g||0<j[3][G[3]+0].g)return 0}return 1}function vi(x,E,j,G,ee,ie){if(x.Z!=0){var ae=x.qd,le=x.rd;for(e(hs[x.Z]!=null);E<j;++E)hs[x.Z](ae,le,G,ee,G,ee,ie),ae=G,le=ee,ee+=ie;x.qd=ae,x.rd=le}}function ti(x,E){var j=x.l.ma,G=j.Z==0||j.Z==1?x.l.j:x.C;if(G=x.C<G?G:x.C,e(E<=x.l.o),E>G){var ee=x.l.width,ie=j.ca,ae=j.tb+ee*G,le=x.V,fe=x.Ba+x.c*G,ge=x.gc;e(x.ab==1),e(ge[0].hc==3),El(ge[0],G,E,le,fe,ie,ae),vi(j,G,E,ie,ae,ee)}x.C=x.Ma=E}function $r(x,E,j,G,ee,ie,ae){var le=x.$/G,fe=x.$%G,ge=x.m,_e=x.s,Le=j+x.$,Oe=Le;ee=j+G*ee;var Re=j+G*ie,Ze=280+_e.ua,ze=x.Pb?le:16777216,Ae=0<_e.ua?_e.Wa:null,Ee=_e.wc,$e=Le<Re?Dr(_e,fe,le):null;e(x.C<ie),e(Re<=ee);var Je=!1;e:for(;;){for(;Je||Le<Re;){var Xe=0;if(le>=ze){var wt=Le-j;e((ze=x).Pb),ze.wd=ze.m,ze.xd=wt,0<ze.s.ua&&Pe(ze.s.Wa,ze.s.vb),ze=le+B1}if(fe&Ee||($e=Dr(_e,fe,le)),e($e!=null),$e.Qb&&(E[Le]=$e.qb,Je=!0),!Je)if(he(ge),$e.jc){Xe=ge,wt=E;var ht=Le,kt=$e.pd[K(Xe)&ii-1];e($e.jc),256>kt.g?(re(Xe,Xe.u+kt.g),wt[ht]=kt.value,Xe=0):(re(Xe,Xe.u+kt.g-256),e(256<=kt.value),Xe=kt.value),Xe==0&&(Je=!0)}else Xe=yr($e.G[0],$e.H[0],ge);if(ge.h)break;if(Je||256>Xe){if(!Je)if($e.nd)E[Le]=($e.qb|Xe<<8)>>>0;else{if(he(ge),Je=yr($e.G[1],$e.H[1],ge),he(ge),wt=yr($e.G[2],$e.H[2],ge),ht=yr($e.G[3],$e.H[3],ge),ge.h)break;E[Le]=(ht<<24|Je<<16|Xe<<8|wt)>>>0}if(Je=!1,++Le,++fe>=G&&(fe=0,++le,ae!=null&&le<=ie&&!(le%16)&&ae(x,le),Ae!=null))for(;Oe<Le;)Xe=E[Oe++],Ae.X[(506832829*Xe&4294967295)>>>Ae.Mb]=Xe}else if(280>Xe){if(Xe=Gn(Xe-256,ge),wt=yr($e.G[4],$e.H[4],ge),he(ge),wt=$n(G,wt=Gn(wt,ge)),ge.h)break;if(Le-j<wt||ee-Le<Xe)break e;for(ht=0;ht<Xe;++ht)E[Le+ht]=E[Le+ht-wt];for(Le+=Xe,fe+=Xe;fe>=G;)fe-=G,++le,ae!=null&&le<=ie&&!(le%16)&&ae(x,le);if(e(Le<=ee),fe&Ee&&($e=Dr(_e,fe,le)),Ae!=null)for(;Oe<Le;)Xe=E[Oe++],Ae.X[(506832829*Xe&4294967295)>>>Ae.Mb]=Xe}else{if(!(Xe<Ze))break e;for(Je=Xe-280,e(Ae!=null);Oe<Le;)Xe=E[Oe++],Ae.X[(506832829*Xe&4294967295)>>>Ae.Mb]=Xe;Xe=Le,e(!(Je>>>(wt=Ae).Xa)),E[Xe]=wt.X[Je],Je=!0}Je||e(ge.h==J(ge))}if(x.Pb&&ge.h&&Le<ee)e(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&Pe(x.s.vb,x.s.Wa);else{if(ge.h)break e;ae!=null&&ae(x,le>ie?ie:le),x.a=0,x.$=Le-j}return 1}return x.a=3,0}function ni(x){e(x!=null),x.vc=null,x.yc=null,x.Ya=null;var E=x.Wa;E!=null&&(E.X=null),x.vb=null,e(x!=null)}function fr(){var x=new pu;return x==null?null:(x.a=0,x.xb=wu,mi("Predictor","VP8LPredictors"),mi("Predictor","VP8LPredictors_C"),mi("PredictorAdd","VP8LPredictorsAdd"),mi("PredictorAdd","VP8LPredictorsAdd_C"),bd=_t,Cl=xt,ta=ct,Ri=yn,Il=Vt,_a=Kn,jo=Kt,S.VP8LMapColor32b=xi,S.VP8LMapColor8b=Sf,x)}function Bn(x,E,j,G,ee){var ie=1,ae=[x],le=[E],fe=G.m,ge=G.s,_e=null,Le=0;e:for(;;){if(j)for(;ie&&Q(fe,1);){var Oe=ae,Re=le,Ze=G,ze=1,Ae=Ze.m,Ee=Ze.gc[Ze.ab],$e=Q(Ae,2);if(Ze.Oc&1<<$e)ie=0;else{switch(Ze.Oc|=1<<$e,Ee.hc=$e,Ee.Ea=Oe[0],Ee.nc=Re[0],Ee.K=[null],++Ze.ab,e(4>=Ze.ab),$e){case 0:case 1:Ee.b=Q(Ae,3)+2,ze=Bn(ut(Ee.Ea,Ee.b),ut(Ee.nc,Ee.b),0,Ze,Ee.K),Ee.K=Ee.K[0];break;case 3:var Je,Xe=Q(Ae,8)+1,wt=16<Xe?0:4<Xe?1:2<Xe?2:3;if(Oe[0]=ut(Ee.Ea,wt),Ee.b=wt,Je=ze=Bn(Xe,1,0,Ze,Ee.K)){var ht,kt=Xe,gt=Ee,Tn=1<<(8>>gt.b),zn=a(Tn);if(zn==null)Je=0;else{var sn=gt.K[0],rn=gt.w;for(zn[0]=gt.K[0][0],ht=1;ht<1*kt;++ht)zn[ht]=Ne(sn[rn+ht],zn[ht-1]);for(;ht<4*Tn;++ht)zn[ht]=0;gt.K[0]=null,gt.K[0]=zn,Je=1}}ze=Je;break;case 2:break;default:e(0)}ie=ze}}if(ae=ae[0],le=le[0],ie&&Q(fe,1)&&!(ie=1<=(Le=Q(fe,4))&&11>=Le)){G.a=3;break e}var Zn;if(Zn=ie)t:{var Vn,Zt,rr,Lt=G,Ht=ae,Cn=le,Rn=Le,_i=j,li=Lt.m,Ur=Lt.s,zr=[null],Qr=1,ho=0,qn=Rc[Rn];n:for(;;){if(_i&&Q(li,1)){var Zr=Q(li,3)+2,Uo=ut(Ht,Zr),Bl=ut(Cn,Zr),Oc=Uo*Bl;if(!Bn(Uo,Bl,0,Lt,zr))break n;for(zr=zr[0],Ur.xc=Zr,Vn=0;Vn<Oc;++Vn){var Fl=zr[Vn]>>8&65535;zr[Vn]=Fl,Fl>=Qr&&(Qr=Fl+1)}}if(li.h)break n;for(Zt=0;5>Zt;++Zt){var _r=Wa[Zt];!Zt&&0<Rn&&(_r+=1<<Rn),ho<_r&&(ho=_r)}var Df=o(Qr*qn,N),Td=Qr,ra=o(Td,F);if(ra==null)var Cr=null;else e(65536>=Td),Cr=ra;var kc=a(ho);if(Cr==null||kc==null||Df==null){Lt.a=1;break n}var Ul=Df;for(Vn=rr=0;Vn<Qr;++Vn){var Sa=Cr[Vn],zl=Sa.G,Ea=Sa.H,Of=0,Au=1,Rd=0;for(Zt=0;5>Zt;++Zt){_r=Wa[Zt],zl[Zt]=Ul,Ea[Zt]=rr,!Zt&&0<Rn&&(_r+=1<<Rn);i:{var kf,Nd=_r,Pf=Lt,Su=kc,H1=Ul,W1=rr,Lf=0,$s=Pf.m,Qm=Q($s,1);if(i(Su,0,0,Nd),Qm){var G1=Q($s,1)+1,$1=Q($s,1),qh=Q($s,$1==0?1:8);Su[qh]=1,G1==2&&(Su[qh=Q($s,8)]=1);var Eu=1}else{var Hh=a(19),Wh=Q($s,4)+4;if(19<Wh){Pf.a=3;var Mf=0;break i}for(kf=0;kf<Wh;++kf)Hh[Vs[kf]]=Q($s,3);var Dd=void 0,Cu=void 0,Y1=Pf,X1=Hh,Ys=Nd,jf=Su,Od=0,zo=Y1.m,Iu=8,Gh=o(128,N);r:for(;T(Gh,0,7,X1,19);){if(Q(zo,1)){var K1=2+2*Q(zo,3);if((Dd=2+Q(zo,K1))>Ys)break r}else Dd=Ys;for(Cu=0;Cu<Ys&&Dd--;){he(zo);var $h=Gh[0+(127&K(zo))];re(zo,zo.u+$h.g);var Pc=$h.value;if(16>Pc)jf[Cu++]=Pc,Pc!=0&&(Iu=Pc);else{var Q1=Pc==16,Yh=Pc-16,Xh=fo[Yh],Kh=Q(zo,Ad[Yh])+Xh;if(Cu+Kh>Ys)break r;for(var Z1=Q1?Iu:0;0<Kh--;)jf[Cu++]=Z1}}Od=1;break r}Od||(Y1.a=3),Eu=Od}(Eu=Eu&&!$s.h)&&(Lf=T(H1,W1,8,Su,Nd)),Eu&&Lf!=0?Mf=Lf:(Pf.a=3,Mf=0)}if(Mf==0)break n;if(Au&&Tc[Zt]==1&&(Au=Ul[rr].g==0),Of+=Ul[rr].g,rr+=Mf,3>=Zt){var Lc,kd=kc[0];for(Lc=1;Lc<_r;++Lc)kc[Lc]>kd&&(kd=kc[Lc]);Rd+=kd}}if(Sa.nd=Au,Sa.Qb=0,Au&&(Sa.qb=(zl[3][Ea[3]+0].value<<24|zl[1][Ea[1]+0].value<<16|zl[2][Ea[2]+0].value)>>>0,Of==0&&256>zl[0][Ea[0]+0].value&&(Sa.Qb=1,Sa.qb+=zl[0][Ea[0]+0].value<<8)),Sa.jc=!Sa.Qb&&6>Rd,Sa.jc){var Bf,Xs=Sa;for(Bf=0;Bf<ii;++Bf){var ms=Bf,Ks=Xs.pd[ms],Ff=Xs.G[0][Xs.H[0]+ms];256<=Ff.value?(Ks.g=Ff.g+256,Ks.value=Ff.value):(Ks.g=0,Ks.value=0,ms>>=Er(Ff,8,Ks),ms>>=Er(Xs.G[1][Xs.H[1]+ms],16,Ks),ms>>=Er(Xs.G[2][Xs.H[2]+ms],0,Ks),Er(Xs.G[3][Xs.H[3]+ms],24,Ks))}}}Ur.vc=zr,Ur.Wb=Qr,Ur.Ya=Cr,Ur.yc=Df,Zn=1;break t}Zn=0}if(!(ie=Zn)){G.a=3;break e}if(0<Le){if(ge.ua=1<<Le,!vt(ge.Wa,Le)){G.a=1,ie=0;break e}}else ge.ua=0;var Uf=G,Qh=ae,J1=le,Zh=Uf.s,Jh=Zh.xc;if(Uf.c=Qh,Uf.i=J1,Zh.md=ut(Qh,Jh),Zh.wc=Jh==0?-1:(1<<Jh)-1,j){G.xb=U1;break e}if((_e=a(ae*le))==null){G.a=1,ie=0;break e}ie=(ie=$r(G,_e,0,ae,le,le,null))&&!fe.h;break e}return ie?(ee!=null?ee[0]=_e:(e(_e==null),e(j)),G.$=0,j||ni(ge)):ni(ge),ie}function Co(x,E){var j=x.c*x.i,G=j+E+16*E;return e(x.c<=E),x.V=a(G),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+j+E,1)}function Io(x,E){var j=x.C,G=E-j,ee=x.V,ie=x.Ba+x.c*j;for(e(E<=x.l.o);0<G;){var ae=16<G?16:G,le=x.l.ma,fe=x.l.width,ge=fe*ae,_e=le.ca,Le=le.tb+fe*j,Oe=x.Ta,Re=x.Ua;Gr(x,ae,ee,ie),hr(Oe,Re,_e,Le,ge),vi(le,j,j+ae,_e,Le,fe),G-=ae,ee+=ae*x.c,j+=ae}e(j==E),x.C=x.Ma=E}function Bi(){this.ub=this.yd=this.td=this.Rb=0}function ga(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ts(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function dc(){this.Yb=function(){var x=[];return function E(j,G,ee){for(var ie=ee[G],ae=0;ae<ie&&(j.push(ee.length>G+1?[]:0),!(ee.length<G+1));ae++)E(j[ae],G+1,ee)}(x,0,[3,11]),x}()}function Rs(){this.jb=a(3),this.Wc=s([4,8],dc),this.Xc=s([4,17],dc)}function lu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function za(){this.ld=this.La=this.dd=this.tc=0}function Va(){this.Na=this.la=0}function ri(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function To(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cu(){this.uc=this.M=this.Nb=0,this.wa=Array(new za),this.Y=0,this.ya=Array(new To),this.aa=0,this.l=new Ro}function Ja(){this.y=a(16),this.f=a(8),this.ea=a(8)}function gl(){this.cb=this.a=0,this.sc="",this.m=new oe,this.Od=new Bi,this.Kc=new ga,this.ed=new lu,this.Qa=new Ts,this.Ic=this.$c=this.Aa=0,this.D=new cu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,oe),this.ia=0,this.pb=o(4,ri),this.Pa=new Rs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ja),this.Hd=0,this.rb=Array(new Va),this.sb=0,this.wa=Array(new za),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new To),this.L=this.aa=0,this.gd=s([4,2],za),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ro(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function hc(){var x=new gl;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,ai||(ai=uu)),x}function dr(x,E,j){return x.a==0&&(x.a=E,x.sc=j,x.cb=0),0}function yi(x,E,j){return 3<=j&&x[E+0]==157&&x[E+1]==1&&x[E+2]==42}function ml(x,E){if(x==null)return 0;if(x.a=0,x.sc="OK",E==null)return dr(x,2,"null VP8Io passed to VP8GetHeaders()");var j=E.data,G=E.w,ee=E.ha;if(4>ee)return dr(x,7,"Truncated header.");var ie=j[G+0]|j[G+1]<<8|j[G+2]<<16,ae=x.Od;if(ae.Rb=!(1&ie),ae.td=ie>>1&7,ae.yd=ie>>4&1,ae.ub=ie>>5,3<ae.td)return dr(x,3,"Incorrect keyframe parameters.");if(!ae.yd)return dr(x,4,"Frame not displayable.");G+=3,ee-=3;var le=x.Kc;if(ae.Rb){if(7>ee)return dr(x,7,"cannot parse picture header");if(!yi(j,G,ee))return dr(x,3,"Bad code word");le.c=16383&(j[G+4]<<8|j[G+3]),le.Td=j[G+4]>>6,le.i=16383&(j[G+6]<<8|j[G+5]),le.Ud=j[G+6]>>6,G+=7,ee-=7,x.za=le.c+15>>4,x.Ub=le.i+15>>4,E.width=le.c,E.height=le.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,i((ie=x.Pa).jb,0,255,ie.jb.length),e((ie=x.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,i(ie.Zb,0,0,ie.Zb.length),i(ie.Lb,0,0,ie.Lb)}if(ae.ub>ee)return dr(x,7,"bad partition length");X(ie=x.m,j,G,ae.ub),G+=ae.ub,ee-=ae.ub,ae.Rb&&(le.Ld=xe(ie),le.Kd=xe(ie)),le=x.Qa;var fe,ge=x.Pa;if(e(ie!=null),e(le!=null),le.Cb=xe(ie),le.Cb){if(le.Bb=xe(ie),xe(ie)){for(le.Fb=xe(ie),fe=0;4>fe;++fe)le.Zb[fe]=xe(ie)?z(ie,7):0;for(fe=0;4>fe;++fe)le.Lb[fe]=xe(ie)?z(ie,6):0}if(le.Bb)for(fe=0;3>fe;++fe)ge.jb[fe]=xe(ie)?V(ie,8):255}else le.Bb=0;if(ie.Ka)return dr(x,3,"cannot parse segment header");if((le=x.ed).zd=xe(ie),le.Tb=V(ie,6),le.wb=V(ie,3),le.Pc=xe(ie),le.Pc&&xe(ie)){for(ge=0;4>ge;++ge)xe(ie)&&(le.vd[ge]=z(ie,6));for(ge=0;4>ge;++ge)xe(ie)&&(le.od[ge]=z(ie,6))}if(x.L=le.Tb==0?0:le.zd?1:2,ie.Ka)return dr(x,3,"cannot parse filter header");var _e=ee;if(ee=fe=G,G=fe+_e,le=_e,x.Xb=(1<<V(x.m,2))-1,_e<3*(ge=x.Xb))j=7;else{for(fe+=3*ge,le-=3*ge,_e=0;_e<ge;++_e){var Le=j[ee+0]|j[ee+1]<<8|j[ee+2]<<16;Le>le&&(Le=le),X(x.Jc[+_e],j,fe,Le),fe+=Le,le-=Le,ee+=3}X(x.Jc[+ge],j,fe,le),j=fe<G?0:5}if(j!=0)return dr(x,j,"cannot parse partitions");for(j=V(fe=x.m,7),ee=xe(fe)?z(fe,4):0,G=xe(fe)?z(fe,4):0,le=xe(fe)?z(fe,4):0,ge=xe(fe)?z(fe,4):0,fe=xe(fe)?z(fe,4):0,_e=x.Qa,Le=0;4>Le;++Le){if(_e.Cb){var Oe=_e.Zb[Le];_e.Fb||(Oe+=j)}else{if(0<Le){x.pb[Le]=x.pb[0];continue}Oe=j}var Re=x.pb[Le];Re.Sc[0]=If[Un(Oe+ee,127)],Re.Sc[1]=Tf[Un(Oe+0,127)],Re.Eb[0]=2*If[Un(Oe+G,127)],Re.Eb[1]=101581*Tf[Un(Oe+le,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=If[Un(Oe+ge,117)],Re.Qc[1]=Tf[Un(Oe+fe,127)],Re.lc=Oe+fe}if(!ae.Rb)return dr(x,4,"Not a key frame.");for(xe(ie),ae=x.Pa,j=0;4>j;++j){for(ee=0;8>ee;++ee)for(G=0;3>G;++G)for(le=0;11>le;++le)ge=Ce(ie,Nc[j][ee][G][le])?V(ie,8):ds[j][ee][G][le],ae.Wc[j][ee].Yb[G][le]=ge;for(ee=0;17>ee;++ee)ae.Xc[j][ee]=ae.Wc[j][F1[ee]]}return x.kc=xe(ie),x.kc&&(x.Bd=V(ie,8)),x.cb=1}function uu(x,E,j,G,ee,ie,ae){var le=E[ee].Yb[j];for(j=0;16>ee;++ee){if(!Ce(x,le[j+0]))return ee;for(;!Ce(x,le[j+1]);)if(le=E[++ee].Yb[0],j=0,ee==16)return 16;var fe=E[ee+1].Yb;if(Ce(x,le[j+2])){var ge=x,_e=0;if(Ce(ge,(Oe=le)[(Le=j)+3]))if(Ce(ge,Oe[Le+6])){for(le=0,Le=2*(_e=Ce(ge,Oe[Le+8]))+(Oe=Ce(ge,Oe[Le+9+_e])),_e=0,Oe=Pr[Le];Oe[le];++le)_e+=_e+Ce(ge,Oe[le]);_e+=3+(8<<Le)}else Ce(ge,Oe[Le+7])?(_e=7+2*Ce(ge,165),_e+=Ce(ge,145)):_e=5+Ce(ge,159);else _e=Ce(ge,Oe[Le+4])?3+Ce(ge,Oe[Le+5]):2;le=fe[2]}else _e=1,le=fe[1];fe=ae+Ln[ee],0>(ge=x).b&&we(ge);var Le,Oe=ge.b,Re=(Le=ge.Ca>>1)-(ge.I>>Oe)>>31;--ge.b,ge.Ca+=Re,ge.Ca|=1,ge.I-=(Le+1&Re)<<Oe,ie[fe]=((_e^Re)-Re)*G[(0<ee)+0]}return 16}function Qo(x){var E=x.rb[x.sb-1];E.la=0,E.Na=0,i(x.zc,0,0,x.zc.length),x.ja=0}function pc(x,E){if(x==null)return 0;if(E==null)return dr(x,2,"NULL VP8Io parameter in VP8Decode().");if(!x.cb&&!ml(x,E))return 0;if(e(x.cb),E.ac==null||E.ac(E)){E.ob&&(x.L=0);var j=Gs[x.L];if(x.L==2?(x.yb=0,x.zb=0):(x.yb=E.v-j>>4,x.zb=E.j-j>>4,0>x.yb&&(x.yb=0),0>x.zb&&(x.zb=0)),x.Va=E.o+15+j>>4,x.Hb=E.va+15+j>>4,x.Hb>x.za&&(x.Hb=x.za),x.Va>x.Ub&&(x.Va=x.Ub),0<x.L){var G=x.ed;for(j=0;4>j;++j){var ee;if(x.Qa.Cb){var ie=x.Qa.Lb[j];x.Qa.Fb||(ie+=G.Tb)}else ie=G.Tb;for(ee=0;1>=ee;++ee){var ae=x.gd[j][ee],le=ie;if(G.Pc&&(le+=G.vd[0],ee&&(le+=G.od[0])),0<(le=0>le?0:63<le?63:le)){var fe=le;0<G.wb&&(fe=4<G.wb?fe>>2:fe>>1)>9-G.wb&&(fe=9-G.wb),1>fe&&(fe=1),ae.dd=fe,ae.tc=2*le+fe,ae.ld=40<=le?2:15<=le?1:0}else ae.tc=0;ae.La=ee}}}j=0}else dr(x,6,"Frame setup failed"),j=x.a;if(j=j==0){if(j){x.$c=0,0<x.Aa||(x.Ic=V1);e:{j=x.Ic,G=4*(fe=x.za);var ge=32*fe,_e=fe+1,Le=0<x.L?fe*(0<x.Aa?2:1):0,Oe=(x.Aa==2?2:1)*fe;if((ae=G+832+(ee=3*(16*j+Gs[x.L])/2*ge)+(ie=x.Fa!=null&&0<x.Fa.length?x.Kc.c*x.Kc.i:0))!=ae)j=0;else{if(ae>x.Vb){if(x.Vb=0,x.Ec=a(ae),x.Fc=0,x.Ec==null){j=dr(x,1,"no memory during frame initialization.");break e}x.Vb=ae}ae=x.Ec,le=x.Fc,x.Ac=ae,x.Bc=le,le+=G,x.Gd=o(ge,Ja),x.Hd=0,x.rb=o(_e+1,Va),x.sb=1,x.wa=Le?o(Le,za):null,x.Y=0,x.D.Nb=0,x.D.wa=x.wa,x.D.Y=x.Y,0<x.Aa&&(x.D.Y+=fe),e(!0),x.oc=ae,x.pc=le,le+=832,x.ya=o(Oe,To),x.aa=0,x.D.ya=x.ya,x.D.aa=x.aa,x.Aa==2&&(x.D.aa+=fe),x.R=16*fe,x.B=8*fe,fe=(ge=Gs[x.L])*x.R,ge=ge/2*x.B,x.sa=ae,x.ta=le+fe,x.qa=x.sa,x.ra=x.ta+16*j*x.R+ge,x.Ha=x.qa,x.Ia=x.ra+8*j*x.B+ge,x.$c=0,le+=ee,x.mb=ie?ae:null,x.nb=ie?le:null,e(le+ie<=x.Fc+x.Vb),Qo(x),i(x.Ac,x.Bc,0,G),j=1}}if(j){if(E.ka=0,E.y=x.sa,E.O=x.ta,E.f=x.qa,E.N=x.ra,E.ea=x.Ha,E.Vd=x.Ia,E.fa=x.R,E.Rc=x.B,E.F=null,E.J=0,!Fs){for(j=-255;255>=j;++j)Fr[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)co[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)Ol[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)kl[255+j]=0>j?0:255<j?255:j;Fs=1}cs=ma,Bo=Jo,Fo=eo,Kr=Fn,Aa=es,Or=Zo,Ac=is,us=Lo,vu=bl,Tl=xc,Rl=xl,Nl=Os,Sc=ks,yu=as,Dl=qa,Bs=zi,Ec=Xr,kr=hu,na[0]=Fi,na[1]=fu,na[2]=ro,na[3]=du,na[4]=va,na[5]=io,na[6]=ea,na[7]=ya,na[8]=Po,na[9]=ts,Hs[0]=to,Hs[1]=mc,Hs[2]=Do,Hs[3]=yl,Hs[4]=nr,Hs[5]=ko,Hs[6]=no,Ga[0]=ao,Ga[1]=gc,Ga[2]=vc,Ga[3]=xa,Ga[4]=dn,Ga[5]=Yr,Ga[6]=ns,j=1}else j=0}j&&(j=function(Re,Ze){for(Re.M=0;Re.M<Re.Va;++Re.M){var ze,Ae=Re.Jc[Re.M&Re.Xb],Ee=Re.m,$e=Re;for(ze=0;ze<$e.za;++ze){var Je=Ee,Xe=$e,wt=Xe.Ac,ht=Xe.Bc+4*ze,kt=Xe.zc,gt=Xe.ya[Xe.aa+ze];if(Xe.Qa.Bb?gt.$b=Ce(Je,Xe.Pa.jb[0])?2+Ce(Je,Xe.Pa.jb[2]):Ce(Je,Xe.Pa.jb[1]):gt.$b=0,Xe.kc&&(gt.Ad=Ce(Je,Xe.Bd)),gt.Za=!Ce(Je,145)+0,gt.Za){var Tn=gt.Ob,zn=0;for(Xe=0;4>Xe;++Xe){var sn,rn=kt[0+Xe];for(sn=0;4>sn;++sn){rn=Uh[wt[ht+sn]][rn];for(var Zn=Ll[Ce(Je,rn[0])];0<Zn;)Zn=Ll[2*Zn+Ce(Je,rn[Zn])];rn=-Zn,wt[ht+sn]=rn}r(Tn,zn,wt,ht,4),zn+=4,kt[0+Xe]=rn}}else rn=Ce(Je,156)?Ce(Je,128)?1:3:Ce(Je,163)?2:0,gt.Ob[0]=rn,i(wt,ht,rn,4),i(kt,0,rn,4);gt.Dd=Ce(Je,142)?Ce(Je,114)?Ce(Je,183)?1:3:2:0}if($e.m.Ka)return dr(Re,7,"Premature end-of-partition0 encountered.");for(;Re.ja<Re.za;++Re.ja){if($e=Ae,Je=(Ee=Re).rb[Ee.sb-1],wt=Ee.rb[Ee.sb+Ee.ja],ze=Ee.ya[Ee.aa+Ee.ja],ht=Ee.kc?ze.Ad:0)Je.la=wt.la=0,ze.Za||(Je.Na=wt.Na=0),ze.Hc=0,ze.Gc=0,ze.ia=0;else{var Vn,Zt;if(Je=wt,wt=$e,ht=Ee.Pa.Xc,kt=Ee.ya[Ee.aa+Ee.ja],gt=Ee.pb[kt.$b],Xe=kt.ad,Tn=0,zn=Ee.rb[Ee.sb-1],rn=sn=0,i(Xe,Tn,0,384),kt.Za)var rr=0,Lt=ht[3];else{Zn=a(16);var Ht=Je.Na+zn.Na;if(Ht=ai(wt,ht[1],Ht,gt.Eb,0,Zn,0),Je.Na=zn.Na=(0<Ht)+0,1<Ht)cs(Zn,0,Xe,Tn);else{var Cn=Zn[0]+3>>3;for(Zn=0;256>Zn;Zn+=16)Xe[Tn+Zn]=Cn}rr=1,Lt=ht[0]}var Rn=15&Je.la,_i=15&zn.la;for(Zn=0;4>Zn;++Zn){var li=1&_i;for(Cn=Zt=0;4>Cn;++Cn)Rn=Rn>>1|(li=(Ht=ai(wt,Lt,Ht=li+(1&Rn),gt.Sc,rr,Xe,Tn))>rr)<<7,Zt=Zt<<2|(3<Ht?3:1<Ht?2:Xe[Tn+0]!=0),Tn+=16;Rn>>=4,_i=_i>>1|li<<7,sn=(sn<<8|Zt)>>>0}for(Lt=Rn,rr=_i>>4,Vn=0;4>Vn;Vn+=2){for(Zt=0,Rn=Je.la>>4+Vn,_i=zn.la>>4+Vn,Zn=0;2>Zn;++Zn){for(li=1&_i,Cn=0;2>Cn;++Cn)Ht=li+(1&Rn),Rn=Rn>>1|(li=0<(Ht=ai(wt,ht[2],Ht,gt.Qc,0,Xe,Tn)))<<3,Zt=Zt<<2|(3<Ht?3:1<Ht?2:Xe[Tn+0]!=0),Tn+=16;Rn>>=2,_i=_i>>1|li<<5}rn|=Zt<<4*Vn,Lt|=Rn<<4<<Vn,rr|=(240&_i)<<Vn}Je.la=Lt,zn.la=rr,kt.Hc=sn,kt.Gc=rn,kt.ia=43690&rn?0:gt.ia,ht=!(sn|rn)}if(0<Ee.L&&(Ee.wa[Ee.Y+Ee.ja]=Ee.gd[ze.$b][ze.Za],Ee.wa[Ee.Y+Ee.ja].La|=!ht),$e.Ka)return dr(Re,7,"Premature end-of-file encountered.")}if(Qo(Re),Ee=Ze,$e=1,ze=(Ae=Re).D,Je=0<Ae.L&&Ae.M>=Ae.zb&&Ae.M<=Ae.Va,Ae.Aa==0)e:{if(ze.M=Ae.M,ze.uc=Je,ba(Ae,ze),$e=1,ze=(Zt=Ae.D).Nb,Je=(rn=Gs[Ae.L])*Ae.R,wt=rn/2*Ae.B,Zn=16*ze*Ae.R,Cn=8*ze*Ae.B,ht=Ae.sa,kt=Ae.ta-Je+Zn,gt=Ae.qa,Xe=Ae.ra-wt+Cn,Tn=Ae.Ha,zn=Ae.Ia-wt+Cn,_i=(Rn=Zt.M)==0,sn=Rn>=Ae.Va-1,Ae.Aa==2&&ba(Ae,Zt),Zt.uc)for(li=(Ht=Ae).D.M,e(Ht.D.uc),Zt=Ht.yb;Zt<Ht.Hb;++Zt){rr=Zt,Lt=li;var Ur=(zr=(_r=Ht).D).Nb;Vn=_r.R;var zr=zr.wa[zr.Y+rr],Qr=_r.sa,ho=_r.ta+16*Ur*Vn+16*rr,qn=zr.dd,Zr=zr.tc;if(Zr!=0)if(e(3<=Zr),_r.L==1)0<rr&&Bs(Qr,ho,Vn,Zr+4),zr.La&&kr(Qr,ho,Vn,Zr),0<Lt&&Dl(Qr,ho,Vn,Zr+4),zr.La&&Ec(Qr,ho,Vn,Zr);else{var Uo=_r.B,Bl=_r.qa,Oc=_r.ra+8*Ur*Uo+8*rr,Fl=_r.Ha,_r=_r.Ia+8*Ur*Uo+8*rr;Ur=zr.ld,0<rr&&(us(Qr,ho,Vn,Zr+4,qn,Ur),Tl(Bl,Oc,Fl,_r,Uo,Zr+4,qn,Ur)),zr.La&&(Nl(Qr,ho,Vn,Zr,qn,Ur),yu(Bl,Oc,Fl,_r,Uo,Zr,qn,Ur)),0<Lt&&(Ac(Qr,ho,Vn,Zr+4,qn,Ur),vu(Bl,Oc,Fl,_r,Uo,Zr+4,qn,Ur)),zr.La&&(Rl(Qr,ho,Vn,Zr,qn,Ur),Sc(Bl,Oc,Fl,_r,Uo,Zr,qn,Ur))}}if(Ae.ia&&alert("todo:DitherRow"),Ee.put!=null){if(Zt=16*Rn,Rn=16*(Rn+1),_i?(Ee.y=Ae.sa,Ee.O=Ae.ta+Zn,Ee.f=Ae.qa,Ee.N=Ae.ra+Cn,Ee.ea=Ae.Ha,Ee.W=Ae.Ia+Cn):(Zt-=rn,Ee.y=ht,Ee.O=kt,Ee.f=gt,Ee.N=Xe,Ee.ea=Tn,Ee.W=zn),sn||(Rn-=rn),Rn>Ee.o&&(Rn=Ee.o),Ee.F=null,Ee.J=null,Ae.Fa!=null&&0<Ae.Fa.length&&Zt<Rn&&(Ee.J=_l(Ae,Ee,Zt,Rn-Zt),Ee.F=Ae.mb,Ee.F==null&&Ee.F.length==0)){$e=dr(Ae,3,"Could not decode alpha data.");break e}Zt<Ee.j&&(rn=Ee.j-Zt,Zt=Ee.j,e(!(1&rn)),Ee.O+=Ae.R*rn,Ee.N+=Ae.B*(rn>>1),Ee.W+=Ae.B*(rn>>1),Ee.F!=null&&(Ee.J+=Ee.width*rn)),Zt<Rn&&(Ee.O+=Ee.v,Ee.N+=Ee.v>>1,Ee.W+=Ee.v>>1,Ee.F!=null&&(Ee.J+=Ee.v),Ee.ka=Zt-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=Rn-Zt,$e=Ee.put(Ee))}ze+1!=Ae.Ic||sn||(r(Ae.sa,Ae.ta-Je,ht,kt+16*Ae.R,Je),r(Ae.qa,Ae.ra-wt,gt,Xe+8*Ae.B,wt),r(Ae.Ha,Ae.Ia-wt,Tn,zn+8*Ae.B,wt))}if(!$e)return dr(Re,6,"Output aborted.")}return 1}(x,E)),E.bc!=null&&E.bc(E),j&=1}return j?(x.cb=0,j):0}function Ci(x,E,j,G,ee){ee=x[E+j+32*G]+(ee>>3),x[E+j+32*G]=-256&ee?0>ee?0:255:ee}function vl(x,E,j,G,ee,ie){Ci(x,E,0,j,G+ee),Ci(x,E,1,j,G+ie),Ci(x,E,2,j,G-ie),Ci(x,E,3,j,G-ee)}function En(x){return(20091*x>>16)+x}function Ii(x,E,j,G){var ee,ie=0,ae=a(16);for(ee=0;4>ee;++ee){var le=x[E+0]+x[E+8],fe=x[E+0]-x[E+8],ge=(35468*x[E+4]>>16)-En(x[E+12]),_e=En(x[E+4])+(35468*x[E+12]>>16);ae[ie+0]=le+_e,ae[ie+1]=fe+ge,ae[ie+2]=fe-ge,ae[ie+3]=le-_e,ie+=4,E++}for(ee=ie=0;4>ee;++ee)le=(x=ae[ie+0]+4)+ae[ie+8],fe=x-ae[ie+8],ge=(35468*ae[ie+4]>>16)-En(ae[ie+12]),Ci(j,G,0,0,le+(_e=En(ae[ie+4])+(35468*ae[ie+12]>>16))),Ci(j,G,1,0,fe+ge),Ci(j,G,2,0,fe-ge),Ci(j,G,3,0,le-_e),ie++,G+=32}function Zo(x,E,j,G){var ee=x[E+0]+4,ie=35468*x[E+4]>>16,ae=En(x[E+4]),le=35468*x[E+1]>>16;vl(j,G,0,ee+ae,x=En(x[E+1]),le),vl(j,G,1,ee+ie,x,le),vl(j,G,2,ee-ie,x,le),vl(j,G,3,ee-ae,x,le)}function Jo(x,E,j,G,ee){Ii(x,E,j,G),ee&&Ii(x,E+16,j,G+4)}function eo(x,E,j,G){Bo(x,E+0,j,G,1),Bo(x,E+32,j,G+128,1)}function Fn(x,E,j,G){var ee;for(x=x[E+0]+4,ee=0;4>ee;++ee)for(E=0;4>E;++E)Ci(j,G,E,ee,x)}function es(x,E,j,G){x[E+0]&&Kr(x,E+0,j,G),x[E+16]&&Kr(x,E+16,j,G+4),x[E+32]&&Kr(x,E+32,j,G+128),x[E+48]&&Kr(x,E+48,j,G+128+4)}function ma(x,E,j,G){var ee,ie=a(16);for(ee=0;4>ee;++ee){var ae=x[E+0+ee]+x[E+12+ee],le=x[E+4+ee]+x[E+8+ee],fe=x[E+4+ee]-x[E+8+ee],ge=x[E+0+ee]-x[E+12+ee];ie[0+ee]=ae+le,ie[8+ee]=ae-le,ie[4+ee]=ge+fe,ie[12+ee]=ge-fe}for(ee=0;4>ee;++ee)ae=(x=ie[0+4*ee]+3)+ie[3+4*ee],le=ie[1+4*ee]+ie[2+4*ee],fe=ie[1+4*ee]-ie[2+4*ee],ge=x-ie[3+4*ee],j[G+0]=ae+le>>3,j[G+16]=ge+fe>>3,j[G+32]=ae-le>>3,j[G+48]=ge-fe>>3,G+=64}function No(x,E,j){var G,ee=E-32,ie=bi,ae=255-x[ee-1];for(G=0;G<j;++G){var le,fe=ie,ge=ae+x[E-1];for(le=0;le<j;++le)x[E+le]=fe[ge+x[ee+le]];E+=32}}function fu(x,E){No(x,E,4)}function gc(x,E){No(x,E,8)}function mc(x,E){No(x,E,16)}function Do(x,E){var j;for(j=0;16>j;++j)r(x,E+32*j,x,E-32,16)}function yl(x,E){var j;for(j=16;0<j;--j)i(x,E,x[E-1],16),E+=32}function Oo(x,E,j){var G;for(G=0;16>G;++G)i(E,j+32*G,x,16)}function to(x,E){var j,G=16;for(j=0;16>j;++j)G+=x[E-1+32*j]+x[E+j-32];Oo(G>>5,x,E)}function nr(x,E){var j,G=8;for(j=0;16>j;++j)G+=x[E-1+32*j];Oo(G>>4,x,E)}function ko(x,E){var j,G=8;for(j=0;16>j;++j)G+=x[E+j-32];Oo(G>>4,x,E)}function no(x,E){Oo(128,x,E)}function Ft(x,E,j){return x+2*E+j+2>>2}function ro(x,E){var j,G=E-32;for(G=new Uint8Array([Ft(x[G-1],x[G+0],x[G+1]),Ft(x[G+0],x[G+1],x[G+2]),Ft(x[G+1],x[G+2],x[G+3]),Ft(x[G+2],x[G+3],x[G+4])]),j=0;4>j;++j)r(x,E+32*j,G,0,G.length)}function du(x,E){var j=x[E-1],G=x[E-1+32],ee=x[E-1+64],ie=x[E-1+96];We(x,E+0,16843009*Ft(x[E-1-32],j,G)),We(x,E+32,16843009*Ft(j,G,ee)),We(x,E+64,16843009*Ft(G,ee,ie)),We(x,E+96,16843009*Ft(ee,ie,ie))}function Fi(x,E){var j,G=4;for(j=0;4>j;++j)G+=x[E+j-32]+x[E-1+32*j];for(G>>=3,j=0;4>j;++j)i(x,E+32*j,G,4)}function va(x,E){var j=x[E-1+0],G=x[E-1+32],ee=x[E-1+64],ie=x[E-1-32],ae=x[E+0-32],le=x[E+1-32],fe=x[E+2-32],ge=x[E+3-32];x[E+0+96]=Ft(G,ee,x[E-1+96]),x[E+1+96]=x[E+0+64]=Ft(j,G,ee),x[E+2+96]=x[E+1+64]=x[E+0+32]=Ft(ie,j,G),x[E+3+96]=x[E+2+64]=x[E+1+32]=x[E+0+0]=Ft(ae,ie,j),x[E+3+64]=x[E+2+32]=x[E+1+0]=Ft(le,ae,ie),x[E+3+32]=x[E+2+0]=Ft(fe,le,ae),x[E+3+0]=Ft(ge,fe,le)}function ea(x,E){var j=x[E+1-32],G=x[E+2-32],ee=x[E+3-32],ie=x[E+4-32],ae=x[E+5-32],le=x[E+6-32],fe=x[E+7-32];x[E+0+0]=Ft(x[E+0-32],j,G),x[E+1+0]=x[E+0+32]=Ft(j,G,ee),x[E+2+0]=x[E+1+32]=x[E+0+64]=Ft(G,ee,ie),x[E+3+0]=x[E+2+32]=x[E+1+64]=x[E+0+96]=Ft(ee,ie,ae),x[E+3+32]=x[E+2+64]=x[E+1+96]=Ft(ie,ae,le),x[E+3+64]=x[E+2+96]=Ft(ae,le,fe),x[E+3+96]=Ft(le,fe,fe)}function io(x,E){var j=x[E-1+0],G=x[E-1+32],ee=x[E-1+64],ie=x[E-1-32],ae=x[E+0-32],le=x[E+1-32],fe=x[E+2-32],ge=x[E+3-32];x[E+0+0]=x[E+1+64]=ie+ae+1>>1,x[E+1+0]=x[E+2+64]=ae+le+1>>1,x[E+2+0]=x[E+3+64]=le+fe+1>>1,x[E+3+0]=fe+ge+1>>1,x[E+0+96]=Ft(ee,G,j),x[E+0+64]=Ft(G,j,ie),x[E+0+32]=x[E+1+96]=Ft(j,ie,ae),x[E+1+32]=x[E+2+96]=Ft(ie,ae,le),x[E+2+32]=x[E+3+96]=Ft(ae,le,fe),x[E+3+32]=Ft(le,fe,ge)}function ya(x,E){var j=x[E+0-32],G=x[E+1-32],ee=x[E+2-32],ie=x[E+3-32],ae=x[E+4-32],le=x[E+5-32],fe=x[E+6-32],ge=x[E+7-32];x[E+0+0]=j+G+1>>1,x[E+1+0]=x[E+0+64]=G+ee+1>>1,x[E+2+0]=x[E+1+64]=ee+ie+1>>1,x[E+3+0]=x[E+2+64]=ie+ae+1>>1,x[E+0+32]=Ft(j,G,ee),x[E+1+32]=x[E+0+96]=Ft(G,ee,ie),x[E+2+32]=x[E+1+96]=Ft(ee,ie,ae),x[E+3+32]=x[E+2+96]=Ft(ie,ae,le),x[E+3+64]=Ft(ae,le,fe),x[E+3+96]=Ft(le,fe,ge)}function ts(x,E){var j=x[E-1+0],G=x[E-1+32],ee=x[E-1+64],ie=x[E-1+96];x[E+0+0]=j+G+1>>1,x[E+2+0]=x[E+0+32]=G+ee+1>>1,x[E+2+32]=x[E+0+64]=ee+ie+1>>1,x[E+1+0]=Ft(j,G,ee),x[E+3+0]=x[E+1+32]=Ft(G,ee,ie),x[E+3+32]=x[E+1+64]=Ft(ee,ie,ie),x[E+3+64]=x[E+2+64]=x[E+0+96]=x[E+1+96]=x[E+2+96]=x[E+3+96]=ie}function Po(x,E){var j=x[E-1+0],G=x[E-1+32],ee=x[E-1+64],ie=x[E-1+96],ae=x[E-1-32],le=x[E+0-32],fe=x[E+1-32],ge=x[E+2-32];x[E+0+0]=x[E+2+32]=j+ae+1>>1,x[E+0+32]=x[E+2+64]=G+j+1>>1,x[E+0+64]=x[E+2+96]=ee+G+1>>1,x[E+0+96]=ie+ee+1>>1,x[E+3+0]=Ft(le,fe,ge),x[E+2+0]=Ft(ae,le,fe),x[E+1+0]=x[E+3+32]=Ft(j,ae,le),x[E+1+32]=x[E+3+64]=Ft(G,j,ae),x[E+1+64]=x[E+3+96]=Ft(ee,G,j),x[E+1+96]=Ft(ie,ee,G)}function vc(x,E){var j;for(j=0;8>j;++j)r(x,E+32*j,x,E-32,8)}function xa(x,E){var j;for(j=0;8>j;++j)i(x,E,x[E-1],8),E+=32}function Ui(x,E,j){var G;for(G=0;8>G;++G)i(E,j+32*G,x,8)}function ao(x,E){var j,G=8;for(j=0;8>j;++j)G+=x[E+j-32]+x[E-1+32*j];Ui(G>>4,x,E)}function Yr(x,E){var j,G=4;for(j=0;8>j;++j)G+=x[E+j-32];Ui(G>>3,x,E)}function dn(x,E){var j,G=4;for(j=0;8>j;++j)G+=x[E-1+32*j];Ui(G>>3,x,E)}function ns(x,E){Ui(128,x,E)}function oo(x,E,j){var G=x[E-j],ee=x[E+0],ie=3*(ee-G)+wd[1020+x[E-2*j]-x[E+j]],ae=Cc[112+(ie+4>>3)];x[E-j]=bi[255+G+Cc[112+(ie+3>>3)]],x[E+0]=bi[255+ee-ae]}function yc(x,E,j,G){var ee=x[E+0],ie=x[E+j];return uo[255+x[E-2*j]-x[E-j]]>G||uo[255+ie-ee]>G}function Ns(x,E,j,G){return 4*uo[255+x[E-j]-x[E+0]]+uo[255+x[E-2*j]-x[E+j]]<=G}function Ds(x,E,j,G,ee){var ie=x[E-3*j],ae=x[E-2*j],le=x[E-j],fe=x[E+0],ge=x[E+j],_e=x[E+2*j],Le=x[E+3*j];return 4*uo[255+le-fe]+uo[255+ae-ge]>G?0:uo[255+x[E-4*j]-ie]<=ee&&uo[255+ie-ae]<=ee&&uo[255+ae-le]<=ee&&uo[255+Le-_e]<=ee&&uo[255+_e-ge]<=ee&&uo[255+ge-fe]<=ee}function qa(x,E,j,G){var ee=2*G+1;for(G=0;16>G;++G)Ns(x,E+G,j,ee)&&oo(x,E+G,j)}function zi(x,E,j,G){var ee=2*G+1;for(G=0;16>G;++G)Ns(x,E+G*j,1,ee)&&oo(x,E+G*j,1)}function Xr(x,E,j,G){var ee;for(ee=3;0<ee;--ee)qa(x,E+=4*j,j,G)}function hu(x,E,j,G){var ee;for(ee=3;0<ee;--ee)zi(x,E+=4,j,G)}function rs(x,E,j,G,ee,ie,ae,le){for(ie=2*ie+1;0<ee--;){if(Ds(x,E,j,ie,ae))if(yc(x,E,j,le))oo(x,E,j);else{var fe=x,ge=E,_e=j,Le=fe[ge-2*_e],Oe=fe[ge-_e],Re=fe[ge+0],Ze=fe[ge+_e],ze=fe[ge+2*_e],Ae=27*($e=wd[1020+3*(Re-Oe)+wd[1020+Le-Ze]])+63>>7,Ee=18*$e+63>>7,$e=9*$e+63>>7;fe[ge-3*_e]=bi[255+fe[ge-3*_e]+$e],fe[ge-2*_e]=bi[255+Le+Ee],fe[ge-_e]=bi[255+Oe+Ae],fe[ge+0]=bi[255+Re-Ae],fe[ge+_e]=bi[255+Ze-Ee],fe[ge+2*_e]=bi[255+ze-$e]}E+=G}}function Ti(x,E,j,G,ee,ie,ae,le){for(ie=2*ie+1;0<ee--;){if(Ds(x,E,j,ie,ae))if(yc(x,E,j,le))oo(x,E,j);else{var fe=x,ge=E,_e=j,Le=fe[ge-_e],Oe=fe[ge+0],Re=fe[ge+_e],Ze=Cc[112+((ze=3*(Oe-Le))+4>>3)],ze=Cc[112+(ze+3>>3)],Ae=Ze+1>>1;fe[ge-2*_e]=bi[255+fe[ge-2*_e]+Ae],fe[ge-_e]=bi[255+Le+ze],fe[ge+0]=bi[255+Oe-Ze],fe[ge+_e]=bi[255+Re-Ae]}E+=G}}function is(x,E,j,G,ee,ie){rs(x,E,j,1,16,G,ee,ie)}function Lo(x,E,j,G,ee,ie){rs(x,E,1,j,16,G,ee,ie)}function xl(x,E,j,G,ee,ie){var ae;for(ae=3;0<ae;--ae)Ti(x,E+=4*j,j,1,16,G,ee,ie)}function Os(x,E,j,G,ee,ie){var ae;for(ae=3;0<ae;--ae)Ti(x,E+=4,1,j,16,G,ee,ie)}function bl(x,E,j,G,ee,ie,ae,le){rs(x,E,ee,1,8,ie,ae,le),rs(j,G,ee,1,8,ie,ae,le)}function xc(x,E,j,G,ee,ie,ae,le){rs(x,E,1,ee,8,ie,ae,le),rs(j,G,1,ee,8,ie,ae,le)}function ks(x,E,j,G,ee,ie,ae,le){Ti(x,E+4*ee,ee,1,8,ie,ae,le),Ti(j,G+4*ee,ee,1,8,ie,ae,le)}function as(x,E,j,G,ee,ie,ae,le){Ti(x,E+4,1,ee,8,ie,ae,le),Ti(j,G+4,1,ee,8,ie,ae,le)}function Ps(){this.ba=new jr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ls(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function os(){this.ua=0,this.Wa=new ve,this.vb=new ve,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new F,this.yc=new N}function pu(){this.xb=this.a=0,this.l=new Ro,this.ca=new jr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new os,this.ab=0,this.gc=o(4,Ls),this.Oc=0}function Mo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ro,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ss(x,E,j,G,ee,ie,ae){for(x=x==null?0:x[E+0],E=0;E<ae;++E)ee[ie+E]=x+j[G+E]&255,x=ee[ie+E]}function Ms(x,E,j,G,ee,ie,ae){var le;if(x==null)ss(null,null,j,G,ee,ie,ae);else for(le=0;le<ae;++le)ee[ie+le]=x[E+le]+j[G+le]&255}function Vi(x,E,j,G,ee,ie,ae){if(x==null)ss(null,null,j,G,ee,ie,ae);else{var le,fe=x[E+0],ge=fe,_e=fe;for(le=0;le<ae;++le)ge=_e+(fe=x[E+le])-ge,_e=j[G+le]+(-256&ge?0>ge?0:255:ge)&255,ge=fe,ee[ie+le]=_e}}function _l(x,E,j,G){var ee=E.width,ie=E.o;if(e(x!=null&&E!=null),0>j||0>=G||j+G>ie)return null;if(!x.Cc){if(x.ga==null){var ae;if(x.ga=new Mo,(ae=x.ga==null)||(ae=E.width*E.o,e(x.Gb.length==0),x.Gb=a(ae),x.Uc=0,x.Gb==null?ae=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,ae=1),ae=!ae),!ae){ae=x.ga;var le=x.Fa,fe=x.P,ge=x.qc,_e=x.mb,Le=x.nb,Oe=fe+1,Re=ge-1,Ze=ae.l;if(e(le!=null&&_e!=null&&E!=null),hs[0]=null,hs[1]=ss,hs[2]=Ms,hs[3]=Vi,ae.ca=_e,ae.tb=Le,ae.c=E.width,ae.i=E.height,e(0<ae.c&&0<ae.i),1>=ge)E=0;else if(ae.$a=le[fe+0]>>0&3,ae.Z=le[fe+0]>>2&3,ae.Lc=le[fe+0]>>4&3,fe=le[fe+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||fe)E=0;else if(Ze.put=vr,Ze.ac=jn,Ze.bc=Ua,Ze.ma=ae,Ze.width=E.width,Ze.height=E.height,Ze.Da=E.Da,Ze.v=E.v,Ze.va=E.va,Ze.j=E.j,Ze.o=E.o,ae.$a)e:{e(ae.$a==1),E=fr();t:for(;;){if(E==null){E=0;break e}if(e(ae!=null),ae.mc=E,E.c=ae.c,E.i=ae.i,E.l=ae.l,E.l.ma=ae,E.l.width=ae.c,E.l.height=ae.i,E.a=0,ne(E.m,le,Oe,Re),!Bn(ae.c,ae.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&Ji(E.s)?(ae.ic=1,le=E.c*E.i,E.Ta=null,E.Ua=0,E.V=a(le),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(ae.ic=0,E=Co(E,ae.c)),!E))break t;E=1;break e}ae.mc=null,E=0}else E=Re>=ae.c*ae.i;ae=!E}if(ae)return null;x.ga.Lc!=1?x.Ga=0:G=ie-j}e(x.ga!=null),e(j+G<=ie);e:{if(E=(le=x.ga).c,ie=le.l.o,le.$a==0){if(Oe=x.rc,Re=x.Vc,Ze=x.Fa,fe=x.P+1+j*E,ge=x.mb,_e=x.nb+j*E,e(fe<=x.P+x.qc),le.Z!=0)for(e(hs[le.Z]!=null),ae=0;ae<G;++ae)hs[le.Z](Oe,Re,Ze,fe,ge,_e,E),Oe=ge,Re=_e,_e+=E,fe+=E;else for(ae=0;ae<G;++ae)r(ge,_e,Ze,fe,E),Oe=ge,Re=_e,_e+=E,fe+=E;x.rc=Oe,x.Vc=Re}else{if(e(le.mc!=null),E=j+G,e((ae=le.mc)!=null),e(E<=ae.i),ae.C>=E)E=1;else if(le.ic||Te(),le.ic){le=ae.V,Oe=ae.Ba,Re=ae.c;var ze=ae.i,Ae=(Ze=1,fe=ae.$/Re,ge=ae.$%Re,_e=ae.m,Le=ae.s,ae.$),Ee=Re*ze,$e=Re*E,Je=Le.wc,Xe=Ae<$e?Dr(Le,ge,fe):null;e(Ae<=Ee),e(E<=ze),e(Ji(Le));t:for(;;){for(;!_e.h&&Ae<$e;){if(ge&Je||(Xe=Dr(Le,ge,fe)),e(Xe!=null),he(_e),256>(ze=yr(Xe.G[0],Xe.H[0],_e)))le[Oe+Ae]=ze,++Ae,++ge>=Re&&(ge=0,++fe<=E&&!(fe%16)&&ti(ae,fe));else{if(!(280>ze)){Ze=0;break t}ze=Gn(ze-256,_e);var wt,ht=yr(Xe.G[4],Xe.H[4],_e);if(he(_e),!(Ae>=(ht=$n(Re,ht=Gn(ht,_e)))&&Ee-Ae>=ze)){Ze=0;break t}for(wt=0;wt<ze;++wt)le[Oe+Ae+wt]=le[Oe+Ae+wt-ht];for(Ae+=ze,ge+=ze;ge>=Re;)ge-=Re,++fe<=E&&!(fe%16)&&ti(ae,fe);Ae<$e&&ge&Je&&(Xe=Dr(Le,ge,fe))}e(_e.h==J(_e))}ti(ae,fe>E?E:fe);break t}!Ze||_e.h&&Ae<Ee?(Ze=0,ae.a=_e.h?5:3):ae.$=Ae,E=Ze}else E=$r(ae,ae.V,ae.Ba,ae.c,ae.i,E,Io);if(!E){G=0;break e}}j+G>=ie&&(x.Cc=1),G=1}if(!G)return null;if(x.Cc&&((G=x.ga)!=null&&(G.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+j*ee}function k(x,E,j,G,ee,ie){for(;0<ee--;){var ae,le=x,fe=E+(j?1:0),ge=x,_e=E+(j?0:3);for(ae=0;ae<G;++ae){var Le=ge[_e+4*ae];Le!=255&&(Le*=32897,le[fe+4*ae+0]=le[fe+4*ae+0]*Le>>23,le[fe+4*ae+1]=le[fe+4*ae+1]*Le>>23,le[fe+4*ae+2]=le[fe+4*ae+2]*Le>>23)}E+=ie}}function te(x,E,j,G,ee){for(;0<G--;){var ie;for(ie=0;ie<j;++ie){var ae=x[E+2*ie+0],le=15&(ge=x[E+2*ie+1]),fe=4369*le,ge=(240&ge|ge>>4)*fe>>16;x[E+2*ie+0]=(240&ae|ae>>4)*fe>>16&240|(15&ae|ae<<4)*fe>>16>>4&15,x[E+2*ie+1]=240&ge|le}E+=ee}}function me(x,E,j,G,ee,ie,ae,le){var fe,ge,_e=255;for(ge=0;ge<ee;++ge){for(fe=0;fe<G;++fe){var Le=x[E+fe];ie[ae+4*fe]=Le,_e&=Le}E+=j,ae+=le}return _e!=255}function be(x,E,j,G,ee){var ie;for(ie=0;ie<ee;++ie)j[G+ie]=x[E+ie]>>8}function Te(){Ha=k,ln=te,cn=me,hr=be}function Ve(x,E,j){S[x]=function(G,ee,ie,ae,le,fe,ge,_e,Le,Oe,Re,Ze,ze,Ae,Ee,$e,Je){var Xe,wt=Je-1>>1,ht=le[fe+0]|ge[_e+0]<<16,kt=Le[Oe+0]|Re[Ze+0]<<16;e(G!=null);var gt=3*ht+kt+131074>>2;for(E(G[ee+0],255&gt,gt>>16,ze,Ae),ie!=null&&(gt=3*kt+ht+131074>>2,E(ie[ae+0],255&gt,gt>>16,Ee,$e)),Xe=1;Xe<=wt;++Xe){var Tn=le[fe+Xe]|ge[_e+Xe]<<16,zn=Le[Oe+Xe]|Re[Ze+Xe]<<16,sn=ht+Tn+kt+zn+524296,rn=sn+2*(Tn+kt)>>3;gt=rn+ht>>1,ht=(sn=sn+2*(ht+zn)>>3)+Tn>>1,E(G[ee+2*Xe-1],255&gt,gt>>16,ze,Ae+(2*Xe-1)*j),E(G[ee+2*Xe-0],255&ht,ht>>16,ze,Ae+(2*Xe-0)*j),ie!=null&&(gt=sn+kt>>1,ht=rn+zn>>1,E(ie[ae+2*Xe-1],255&gt,gt>>16,Ee,$e+(2*Xe-1)*j),E(ie[ae+2*Xe+0],255&ht,ht>>16,Ee,$e+(2*Xe+0)*j)),ht=Tn,kt=zn}1&Je||(gt=3*ht+kt+131074>>2,E(G[ee+Je-1],255&gt,gt>>16,ze,Ae+(Je-1)*j),ie!=null&&(gt=3*kt+ht+131074>>2,E(ie[ae+Je-1],255&gt,gt>>16,Ee,$e+(Je-1)*j)))}}function at(){wi[qi]=Ws,wi[xu]=ps,wi[fs]=Ml,wi[Ef]=Sd,wi[Ic]=Ed,wi[Us]=_u,wi[_d]=Cd,wi[Cf]=ps,wi[Pl]=Sd,wi[zs]=Ed,wi[bu]=_u}function pt(x){return x&-16384?0>x?0:255:x>>Ym}function w(x,E){return pt((19077*x>>8)+(26149*E>>8)-14234)}function U(x,E,j){return pt((19077*x>>8)-(6419*E>>8)-(13320*j>>8)+8708)}function $(x,E){return pt((19077*x>>8)+(33050*E>>8)-17685)}function ce(x,E,j,G,ee){G[ee+0]=w(x,j),G[ee+1]=U(x,E,j),G[ee+2]=$(x,E)}function Ie(x,E,j,G,ee){G[ee+0]=$(x,E),G[ee+1]=U(x,E,j),G[ee+2]=w(x,j)}function Me(x,E,j,G,ee){var ie=U(x,E,j);E=ie<<3&224|$(x,E)>>3,G[ee+0]=248&w(x,j)|ie>>5,G[ee+1]=E}function ot(x,E,j,G,ee){var ie=240&$(x,E)|15;G[ee+0]=240&w(x,j)|U(x,E,j)>>4,G[ee+1]=ie}function Ut(x,E,j,G,ee){G[ee+0]=255,ce(x,E,j,G,ee+1)}function hn(x,E,j,G,ee){Ie(x,E,j,G,ee),G[ee+3]=255}function Qt(x,E,j,G,ee){ce(x,E,j,G,ee),G[ee+3]=255}function Un(x,E){return 0>x?0:x>E?E:x}function Qn(x,E,j){S[x]=function(G,ee,ie,ae,le,fe,ge,_e,Le){for(var Oe=_e+(-2&Le)*j;_e!=Oe;)E(G[ee+0],ie[ae+0],le[fe+0],ge,_e),E(G[ee+1],ie[ae+0],le[fe+0],ge,_e+j),ee+=2,++ae,++fe,_e+=2*j;1&Le&&E(G[ee+0],ie[ae+0],le[fe+0],ge,_e)}}function so(x,E,j){return j==0?x==0?E==0?6:5:E==0?4:0:j}function Br(x,E,j,G,ee){switch(x>>>30){case 3:Bo(E,j,G,ee,0);break;case 2:Or(E,j,G,ee);break;case 1:Kr(E,j,G,ee)}}function ba(x,E){var j,G,ee=E.M,ie=E.Nb,ae=x.oc,le=x.pc+40,fe=x.oc,ge=x.pc+584,_e=x.oc,Le=x.pc+600;for(j=0;16>j;++j)ae[le+32*j-1]=129;for(j=0;8>j;++j)fe[ge+32*j-1]=129,_e[Le+32*j-1]=129;for(0<ee?ae[le-1-32]=fe[ge-1-32]=_e[Le-1-32]=129:(i(ae,le-32-1,127,21),i(fe,ge-32-1,127,9),i(_e,Le-32-1,127,9)),G=0;G<x.za;++G){var Oe=E.ya[E.aa+G];if(0<G){for(j=-1;16>j;++j)r(ae,le+32*j-4,ae,le+32*j+12,4);for(j=-1;8>j;++j)r(fe,ge+32*j-4,fe,ge+32*j+4,4),r(_e,Le+32*j-4,_e,Le+32*j+4,4)}var Re=x.Gd,Ze=x.Hd+G,ze=Oe.ad,Ae=Oe.Hc;if(0<ee&&(r(ae,le-32,Re[Ze].y,0,16),r(fe,ge-32,Re[Ze].f,0,8),r(_e,Le-32,Re[Ze].ea,0,8)),Oe.Za){var Ee=ae,$e=le-32+16;for(0<ee&&(G>=x.za-1?i(Ee,$e,Re[Ze].y[15],4):r(Ee,$e,Re[Ze+1].y,0,4)),j=0;4>j;j++)Ee[$e+128+j]=Ee[$e+256+j]=Ee[$e+384+j]=Ee[$e+0+j];for(j=0;16>j;++j,Ae<<=2)Ee=ae,$e=le+Dc[j],na[Oe.Ob[j]](Ee,$e),Br(Ae,ze,16*+j,Ee,$e)}else if(Ee=so(G,ee,Oe.Ob[0]),Hs[Ee](ae,le),Ae!=0)for(j=0;16>j;++j,Ae<<=2)Br(Ae,ze,16*+j,ae,le+Dc[j]);for(j=Oe.Gc,Ee=so(G,ee,Oe.Dd),Ga[Ee](fe,ge),Ga[Ee](_e,Le),Ae=ze,Ee=fe,$e=ge,255&(Oe=j>>0)&&(170&Oe?Fo(Ae,256,Ee,$e):Aa(Ae,256,Ee,$e)),Oe=_e,Ae=Le,255&(j>>=8)&&(170&j?Fo(ze,320,Oe,Ae):Aa(ze,320,Oe,Ae)),ee<x.Ub-1&&(r(Re[Ze].y,0,ae,le+480,16),r(Re[Ze].f,0,fe,ge+224,8),r(Re[Ze].ea,0,_e,Le+224,8)),j=8*ie*x.B,Re=x.sa,Ze=x.ta+16*G+16*ie*x.R,ze=x.qa,Oe=x.ra+8*G+j,Ae=x.Ha,Ee=x.Ia+8*G+j,j=0;16>j;++j)r(Re,Ze+j*x.R,ae,le+32*j,16);for(j=0;8>j;++j)r(ze,Oe+j*x.B,fe,ge+32*j,8),r(Ae,Ee+j*x.B,_e,Le+32*j,8)}}function ls(x,E,j,G,ee,ie,ae,le,fe){var ge=[0],_e=[0],Le=0,Oe=fe!=null?fe.kd:0,Re=fe??new wl;if(x==null||12>j)return 7;Re.data=x,Re.w=E,Re.ha=j,E=[E],j=[j],Re.gb=[Re.gb];e:{var Ze=E,ze=j,Ae=Re.gb;if(e(x!=null),e(ze!=null),e(Ae!=null),Ae[0]=0,12<=ze[0]&&!t(x,Ze[0],"RIFF")){if(t(x,Ze[0]+8,"WEBP")){Ae=3;break e}var Ee=lt(x,Ze[0]+4);if(12>Ee||4294967286<Ee){Ae=3;break e}if(Oe&&Ee>ze[0]-8){Ae=7;break e}Ae[0]=Ee,Ze[0]+=12,ze[0]-=12}Ae=0}if(Ae!=0)return Ae;for(Ee=0<Re.gb[0],j=j[0];;){e:{var $e=x;ze=E,Ae=j;var Je=ge,Xe=_e,wt=Ze=[0];if((gt=Le=[Le])[0]=0,8>Ae[0])Ae=7;else{if(!t($e,ze[0],"VP8X")){if(lt($e,ze[0]+4)!=10){Ae=3;break e}if(18>Ae[0]){Ae=7;break e}var ht=lt($e,ze[0]+8),kt=1+it($e,ze[0]+12);if(2147483648<=kt*($e=1+it($e,ze[0]+15))){Ae=3;break e}wt!=null&&(wt[0]=ht),Je!=null&&(Je[0]=kt),Xe!=null&&(Xe[0]=$e),ze[0]+=18,Ae[0]-=18,gt[0]=1}Ae=0}}if(Le=Le[0],Ze=Ze[0],Ae!=0)return Ae;if(ze=!!(2&Ze),!Ee&&Le)return 3;if(ie!=null&&(ie[0]=!!(16&Ze)),ae!=null&&(ae[0]=ze),le!=null&&(le[0]=0),ae=ge[0],Ze=_e[0],Le&&ze&&fe==null){Ae=0;break}if(4>j){Ae=7;break}if(Ee&&Le||!Ee&&!Le&&!t(x,E[0],"ALPH")){j=[j],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{ht=x,Ae=E,Ee=j;var gt=Re.gb;Je=Re.na,Xe=Re.P,wt=Re.Sa,kt=22,e(ht!=null),e(Ee!=null),$e=Ae[0];var Tn=Ee[0];for(e(Je!=null),e(wt!=null),Je[0]=null,Xe[0]=null,wt[0]=0;;){if(Ae[0]=$e,Ee[0]=Tn,8>Tn){Ae=7;break e}var zn=lt(ht,$e+4);if(4294967286<zn){Ae=3;break e}var sn=8+zn+1&-2;if(kt+=sn,0<gt&&kt>gt){Ae=3;break e}if(!t(ht,$e,"VP8 ")||!t(ht,$e,"VP8L")){Ae=0;break e}if(Tn[0]<sn){Ae=7;break e}t(ht,$e,"ALPH")||(Je[0]=ht,Xe[0]=$e+8,wt[0]=zn),$e+=sn,Tn-=sn}}if(j=j[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],Ae!=0)break}j=[j],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(gt=x,Ae=E,Ee=j,Je=Re.gb[0],Xe=Re.Ja,wt=Re.xa,ht=Ae[0],$e=!t(gt,ht,"VP8 "),kt=!t(gt,ht,"VP8L"),e(gt!=null),e(Ee!=null),e(Xe!=null),e(wt!=null),8>Ee[0])Ae=7;else{if($e||kt){if(gt=lt(gt,ht+4),12<=Je&&gt>Je-12){Ae=3;break e}if(Oe&&gt>Ee[0]-8){Ae=7;break e}Xe[0]=gt,Ae[0]+=8,Ee[0]-=8,wt[0]=kt}else wt[0]=5<=Ee[0]&&gt[ht+0]==47&&!(gt[ht+4]>>5),Xe[0]=Ee[0];Ae=0}if(j=j[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],E=E[0],Ae!=0)break;if(4294967286<Re.Ja)return 3;if(le==null||ze||(le[0]=Re.xa?2:1),ae=[ae],Ze=[Ze],Re.xa){if(5>j){Ae=7;break}le=ae,Oe=Ze,ze=ie,x==null||5>j?x=0:5<=j&&x[E+0]==47&&!(x[E+4]>>5)?(Ee=[0],gt=[0],Je=[0],ne(Xe=new W,x,E,j),bt(Xe,Ee,gt,Je)?(le!=null&&(le[0]=Ee[0]),Oe!=null&&(Oe[0]=gt[0]),ze!=null&&(ze[0]=Je[0]),x=1):x=0):x=0}else{if(10>j){Ae=7;break}le=Ze,x==null||10>j||!yi(x,E+3,j-3)?x=0:(Oe=x[E+0]|x[E+1]<<8|x[E+2]<<16,ze=16383&(x[E+7]<<8|x[E+6]),x=16383&(x[E+9]<<8|x[E+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Re.Ja||!ze||!x?x=0:(ae&&(ae[0]=ze),le&&(le[0]=x),x=1))}if(!x||(ae=ae[0],Ze=Ze[0],Le&&(ge[0]!=ae||_e[0]!=Ze)))return 3;fe!=null&&(fe[0]=Re,fe.offset=E-fe.w,e(4294967286>E-fe.w),e(fe.offset==fe.ha-j));break}return Ae==0||Ae==7&&Le&&fe==null?(ie!=null&&(ie[0]|=Re.na!=null&&0<Re.na.length),G!=null&&(G[0]=ae),ee!=null&&(ee[0]=Ze),0):Ae}function Al(x,E,j){var G=E.width,ee=E.height,ie=0,ae=0,le=G,fe=ee;if(E.Da=x!=null&&0<x.Da,E.Da&&(le=x.cd,fe=x.bd,ie=x.v,ae=x.j,11>j||(ie&=-2,ae&=-2),0>ie||0>ae||0>=le||0>=fe||ie+le>G||ae+fe>ee))return 0;if(E.v=ie,E.j=ae,E.va=ie+le,E.o=ae+fe,E.U=le,E.T=fe,E.da=x!=null&&0<x.da,E.da){if(!dt(le,fe,j=[x.ib],ie=[x.hb]))return 0;E.ib=j[0],E.hb=ie[0]}return E.ob=x!=null&&x.ob,E.Kb=x==null||!x.Sd,E.da&&(E.ob=E.ib<3*G/4&&E.hb<3*ee/4,E.Kb=0),1}function gu(x){if(x==null)return 2;if(11>x.S){var E=x.f.RGBA;E.fb+=(x.height-1)*E.A,E.A=-E.A}else E=x.f.kb,x=x.height,E.O+=(x-1)*E.fa,E.fa=-E.fa,E.N+=(x-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(x-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(x-1)*E.lb,E.lb=-E.lb);return 0}function bc(x,E,j,G){if(G==null||0>=x||0>=E)return 2;if(j!=null){if(j.Da){var ee=j.cd,ie=j.bd,ae=-2&j.v,le=-2&j.j;if(0>ae||0>le||0>=ee||0>=ie||ae+ee>x||le+ie>E)return 2;x=ee,E=ie}if(j.da){if(!dt(x,E,ee=[j.ib],ie=[j.hb]))return 2;x=ee[0],E=ie[0]}}G.width=x,G.height=E;e:{var fe=G.width,ge=G.height;if(x=G.S,0>=fe||0>=ge||!(x>=qi&&13>x))x=2;else{if(0>=G.Rd&&G.sd==null){ae=ie=ee=E=0;var _e=(le=fe*q1[x])*ge;if(11>x||(ie=(ge+1)/2*(E=(fe+1)/2),x==12&&(ae=(ee=fe)*ge)),(ge=a(_e+2*ie+ae))==null){x=1;break e}G.sd=ge,11>x?((fe=G.f.RGBA).eb=ge,fe.fb=0,fe.A=le,fe.size=_e):((fe=G.f.kb).y=ge,fe.O=0,fe.fa=le,fe.Fd=_e,fe.f=ge,fe.N=0+_e,fe.Ab=E,fe.Cd=ie,fe.ea=ge,fe.W=0+_e+ie,fe.Db=E,fe.Ed=ie,x==12&&(fe.F=ge,fe.J=0+_e+2*ie),fe.Tc=ae,fe.lb=ee)}if(E=1,ee=G.S,ie=G.width,ae=G.height,ee>=qi&&13>ee)if(11>ee)x=G.f.RGBA,E&=(le=Math.abs(x.A))*(ae-1)+ie<=x.size,E&=le>=ie*q1[ee],E&=x.eb!=null;else{x=G.f.kb,le=(ie+1)/2,_e=(ae+1)/2,fe=Math.abs(x.fa),ge=Math.abs(x.Ab);var Le=Math.abs(x.Db),Oe=Math.abs(x.lb),Re=Oe*(ae-1)+ie;E&=fe*(ae-1)+ie<=x.Fd,E&=ge*(_e-1)+le<=x.Cd,E=(E&=Le*(_e-1)+le<=x.Ed)&fe>=ie&ge>=le&Le>=le,E&=x.y!=null,E&=x.f!=null,E&=x.ea!=null,ee==12&&(E&=Oe>=ie,E&=Re<=x.Tc,E&=x.F!=null)}else E=0;x=E?0:2}}return x!=0||j!=null&&j.fd&&(x=gu(G)),x}var ii=64,Sl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wc=24,_c=32,mu=8,wa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(x){return x},S.Predictor2=function(x,E,j){return E[j+0]},S.Predictor3=function(x,E,j){return E[j+1]},S.Predictor4=function(x,E,j){return E[j-1]},S.Predictor5=function(x,E,j){return st(st(x,E[j+1]),E[j+0])},S.Predictor6=function(x,E,j){return st(x,E[j-1])},S.Predictor7=function(x,E,j){return st(x,E[j+0])},S.Predictor8=function(x,E,j){return st(E[j-1],E[j+0])},S.Predictor9=function(x,E,j){return st(E[j+0],E[j+1])},S.Predictor10=function(x,E,j){return st(st(x,E[j-1]),st(E[j+0],E[j+1]))},S.Predictor11=function(x,E,j){var G=E[j+0];return 0>=St(G>>24&255,x>>24&255,(E=E[j-1])>>24&255)+St(G>>16&255,x>>16&255,E>>16&255)+St(G>>8&255,x>>8&255,E>>8&255)+St(255&G,255&x,255&E)?G:x},S.Predictor12=function(x,E,j){var G=E[j+0];return(ft((x>>24&255)+(G>>24&255)-((E=E[j-1])>>24&255))<<24|ft((x>>16&255)+(G>>16&255)-(E>>16&255))<<16|ft((x>>8&255)+(G>>8&255)-(E>>8&255))<<8|ft((255&x)+(255&G)-(255&E)))>>>0},S.Predictor13=function(x,E,j){var G=E[j-1];return(et((x=st(x,E[j+0]))>>24&255,G>>24&255)<<24|et(x>>16&255,G>>16&255)<<16|et(x>>8&255,G>>8&255)<<8|et(x>>0&255,G>>0&255))>>>0};var Fh=S.PredictorAdd0;S.PredictorAdd1=yt,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var Af=S.PredictorAdd2;Et("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),Et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var bd,lo=S.ColorIndexInverseTransform,xi=S.MapARGB,El=S.VP8LColorIndexInverseTransformAlpha,Sf=S.MapAlpha,js=S.VP8LPredictorsAdd=[];js.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var Cl,ta,Ri,Il,_a,jo,cs,Bo,Or,Fo,Kr,Aa,Ac,us,vu,Tl,Rl,Nl,Sc,yu,Dl,Bs,Ec,kr,Ha,ln,cn,hr,Fr=a(511),co=a(2041),Ol=a(225),kl=a(767),Fs=0,wd=co,Cc=Ol,bi=kl,uo=Fr,qi=0,xu=1,fs=2,Ef=3,Ic=4,Us=5,_d=6,Cf=7,Pl=8,zs=9,bu=10,Ad=[2,3,7],fo=[3,3,11],Wa=[280,256,256,256,40],Tc=[0,1,1,1,0],Vs=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qs=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Rc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],B1=8,If=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Tf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ai=null,Pr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ln=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ll=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ds=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Uh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],F1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hs=[],na=[],Ga=[],U1=1,wu=2,hs=[],wi=[];Ve("UpsampleRgbLinePair",ce,3),Ve("UpsampleBgrLinePair",Ie,3),Ve("UpsampleRgbaLinePair",Qt,4),Ve("UpsampleBgraLinePair",hn,4),Ve("UpsampleArgbLinePair",Ut,4),Ve("UpsampleRgba4444LinePair",ot,2),Ve("UpsampleRgb565LinePair",Me,2);var Ws=S.UpsampleRgbLinePair,Ml=S.UpsampleBgrLinePair,ps=S.UpsampleRgbaLinePair,Sd=S.UpsampleBgraLinePair,Ed=S.UpsampleArgbLinePair,_u=S.UpsampleRgba4444LinePair,Cd=S.UpsampleRgb565LinePair,gs=16,oi=1<<gs-1,jl=-227,Id=482,Ym=6,z1=0,Xm=a(256),si=a(256),zh=a(256),Rf=a(256),Nf=a(Id-jl),Vh=a(Id-jl);Qn("YuvToRgbRow",ce,3),Qn("YuvToBgrRow",Ie,3),Qn("YuvToRgbaRow",Qt,4),Qn("YuvToBgraRow",hn,4),Qn("YuvToArgbRow",Ut,4),Qn("YuvToRgba4444Row",ot,2),Qn("YuvToRgb565Row",Me,2);var Dc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Gs=[0,2,8],Km=[8,7,6,4,4,2,2,2,1,1,1,1],V1=1;this.WebPDecodeRGBA=function(x,E,j,G,ee){var ie=xu,ae=new Ps,le=new jr;ae.ba=le,le.S=ie,le.width=[le.width],le.height=[le.height];var fe=le.width,ge=le.height,_e=new ur;if(_e==null||x==null)var Le=2;else e(_e!=null),Le=ls(x,E,j,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Le!=0?fe=0:(fe!=null&&(fe[0]=_e.width[0]),ge!=null&&(ge[0]=_e.height[0]),fe=1),fe){le.width=le.width[0],le.height=le.height[0],G!=null&&(G[0]=le.width),ee!=null&&(ee[0]=le.height);e:{if(G=new Ro,(ee=new wl).data=x,ee.w=E,ee.ha=j,ee.kd=1,E=[0],e(ee!=null),((x=ls(ee.data,ee.w,ee.ha,null,null,null,E,null,ee))==0||x==7)&&E[0]&&(x=4),(E=x)==0){if(e(ae!=null),G.data=ee.data,G.w=ee.w+ee.offset,G.ha=ee.ha-ee.offset,G.put=vr,G.ac=jn,G.bc=Ua,G.ma=ae,ee.xa){if((x=fr())==null){ae=1;break e}if(function(Oe,Re){var Ze=[0],ze=[0],Ae=[0];t:for(;;){if(Oe==null)return 0;if(Re==null)return Oe.a=2,0;if(Oe.l=Re,Oe.a=0,ne(Oe.m,Re.data,Re.w,Re.ha),!bt(Oe.m,Ze,ze,Ae)){Oe.a=3;break t}if(Oe.xb=wu,Re.width=Ze[0],Re.height=ze[0],!Bn(Ze[0],ze[0],1,Oe,null))break t;return 1}return e(Oe.a!=0),0}(x,G)){if(G=(E=bc(G.width,G.height,ae.Oa,ae.ba))==0){t:{G=x;n:for(;;){if(G==null){G=0;break t}if(e(G.s.yc!=null),e(G.s.Ya!=null),e(0<G.s.Wb),e((j=G.l)!=null),e((ee=j.ma)!=null),G.xb!=0){if(G.ca=ee.ba,G.tb=ee.tb,e(G.ca!=null),!Al(ee.Oa,j,Ef)){G.a=2;break n}if(!Co(G,j.width)||j.da)break n;if((j.da||on(G.ca.S))&&Te(),11>G.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),G.ca.f.kb.F!=null&&Te()),G.Pb&&0<G.s.ua&&G.s.vb.X==null&&!vt(G.s.vb,G.s.Wa.Xa)){G.a=1;break n}G.xb=0}if(!$r(G,G.V,G.Ba,G.c,G.i,j.o,Is))break n;ee.Dc=G.Ma,G=1;break t}e(G.a!=0),G=0}G=!G}G&&(E=x.a)}else E=x.a}else{if((x=new hc)==null){ae=1;break e}if(x.Fa=ee.na,x.P=ee.P,x.qc=ee.Sa,ml(x,G)){if((E=bc(G.width,G.height,ae.Oa,ae.ba))==0){if(x.Aa=0,j=ae.Oa,e((ee=x)!=null),j!=null){if(0<(fe=0>(fe=j.Md)?0:100<fe?255:255*fe/100)){for(ge=_e=0;4>ge;++ge)12>(Le=ee.pb[ge]).lc&&(Le.ia=fe*Km[0>Le.lc?0:Le.lc]>>3),_e|=Le.ia;_e&&(alert("todo:VP8InitRandom"),ee.ia=1)}ee.Ga=j.Id,100<ee.Ga?ee.Ga=100:0>ee.Ga&&(ee.Ga=0)}pc(x,G)||(E=x.a)}}else E=x.a}E==0&&ae.Oa!=null&&ae.Oa.fd&&(E=gu(ae.ba))}ae=E}ie=ae!=0?null:11>ie?le.f.RGBA.eb:le.f.kb.y}else ie=null;return ie};var q1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(S,R){for(var M="",T=0;T<4;T++)M+=String.fromCharCode(S[R++]);return M}function d(S,R){return(S[R+0]<<0|S[R+1]<<8|S[R+2]<<16)>>>0}function p(S,R){return(S[R+0]<<0|S[R+1]<<8|S[R+2]<<16|S[R+3]<<24)>>>0}new c;var g=[0],m=[0],b=[],_=new c,I=n,C=function(S,R){var M={},T=0,N=!1,L=0,F=0;if(M.frames=[],!function(K,J,re,he){for(var we=0;we<he;we++)if(K[J+we]!=re.charCodeAt(we))return!0;return!1}(S,R,"RIFF",4)){for(p(S,R+=4),R+=8;R<S.length;){var X=f(S,R),V=p(S,R+=4);R+=4;var z=V+(1&V);switch(X){case"VP8 ":case"VP8L":M.frames[T]===void 0&&(M.frames[T]={}),(Q=M.frames[T]).src_off=N?F:R-8,Q.src_size=L+V+8,T++,N&&(N=!1,L=0,F=0);break;case"VP8X":(Q=M.header={}).feature_flags=S[R];var ne=R+4;Q.canvas_width=1+d(S,ne),ne+=3,Q.canvas_height=1+d(S,ne),ne+=3;break;case"ALPH":N=!0,L=z+8,F=R-8;break;case"ANIM":(Q=M.header).bgcolor=p(S,R),ne=R+4,Q.loop_count=(oe=S)[(W=ne)+0]<<0|oe[W+1]<<8,ne+=2;break;case"ANMF":var se,Q;(Q=M.frames[T]={}).offset_x=2*d(S,R),R+=3,Q.offset_y=2*d(S,R),R+=3,Q.width=1+d(S,R),R+=3,Q.height=1+d(S,R),R+=3,Q.duration=d(S,R),R+=3,se=S[R++],Q.dispose=1&se,Q.blend=se>>1&1}X!="ANMF"&&(R+=z)}var oe,W;return M}}(I,0);C.response=I,C.rgbaoutput=!0,C.dataurl=!1;var D=C.header?C.header:null,B=C.frames?C.frames:null;if(D){D.loop_counter=D.loop_count,g=[D.canvas_height],m=[D.canvas_width];for(var q=0;q<B.length&&B[q].blend!=0;q++);}var Y=B[0],H=_.WebPDecodeRGBA(I,Y.src_off,Y.src_size,m,g);Y.rgba=H,Y.imgwidth=m[0],Y.imgheight=g[0];for(var P=0;P<m[0]*g[0]*4;P++)b[P]=H[P];return this.width=m,this.height=g,this.data=b,this}(function(n){var e=function(){return typeof Gy=="function"},t=function(g,m,b,_){var I=4,C=o;switch(_){case n.image_compression.FAST:I=1,C=a;break;case n.image_compression.MEDIUM:I=6,C=s;break;case n.image_compression.SLOW:I=9,C=c}g=r(g,m,b,C);var D=Gy(g,{level:I});return n.__addimage__.arrayBufferToBinaryString(D)},r=function(g,m,b,_){for(var I,C,D,B=g.length/m,q=new Uint8Array(g.length+B),Y=d(),H=0;H<B;H+=1){if(D=H*m,I=g.subarray(D,D+m),_)q.set(_(I,b,C),D+H);else{for(var P,S=Y.length,R=[];P<S;P+=1)R[P]=Y[P](I,b,C);var M=p(R.concat());q.set(R[M],D+H)}C=I}return q},i=function(g){var m=Array.apply([],g);return m.unshift(0),m},a=function(g,m){var b,_=[],I=g.length;_[0]=1;for(var C=0;C<I;C+=1)b=g[C-m]||0,_[C+1]=g[C]-b+256&255;return _},o=function(g,m,b){var _,I=[],C=g.length;I[0]=2;for(var D=0;D<C;D+=1)_=b&&b[D]||0,I[D+1]=g[D]-_+256&255;return I},s=function(g,m,b){var _,I,C=[],D=g.length;C[0]=3;for(var B=0;B<D;B+=1)_=g[B-m]||0,I=b&&b[B]||0,C[B+1]=g[B]+256-(_+I>>>1)&255;return C},c=function(g,m,b){var _,I,C,D,B=[],q=g.length;B[0]=4;for(var Y=0;Y<q;Y+=1)_=g[Y-m]||0,I=b&&b[Y]||0,C=b&&b[Y-m]||0,D=f(_,I,C),B[Y+1]=g[Y]-D+256&255;return B},f=function(g,m,b){if(g===m&&m===b)return g;var _=Math.abs(m-b),I=Math.abs(g-b),C=Math.abs(g+m-b-b);return _<=I&&_<=C?g:I<=C?m:b},d=function(){return[i,a,o,s,c]},p=function(g){var m=g.map(function(b){return b.reduce(function(_,I){return _+Math.abs(I)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(g,m,b,_){var I,C,D,B,q,Y,H,P,S,R,M,T,N,L,F,X=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(D=new JV(g)).imgData,C=D.bits,I=D.colorSpace,q=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){S=(P=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,M=new Uint8Array(S*D.colors),R=new Uint8Array(S);var z,ne=D.pixelBitlength-D.bits;for(L=0,F=0;L<S;L++){for(N=P[L],z=0;z<ne;)M[F++]=N>>>z&255,z+=D.bits;R[L]=N>>>z&255}}if(D.bits===16){S=(P=new Uint32Array(D.decodePixels().buffer)).length,M=new Uint8Array(S*(32/D.pixelBitlength)*D.colors),R=new Uint8Array(S*(32/D.pixelBitlength)),T=D.colors>1,L=0,F=0;for(var se=0;L<S;)N=P[L++],M[F++]=N>>>0&255,T&&(M[F++]=N>>>16&255,N=P[L++],M[F++]=N>>>0&255),R[se++]=N>>>16&255;C=8}_!==n.image_compression.NONE&&e()?(g=t(M,D.width*D.colors,D.colors,_),H=t(R,D.width,1,_)):(g=M,H=R,X=void 0)}if(D.colorType===3&&(I=this.color_spaces.INDEXED,Y=D.palette,D.transparency.indexed)){var Q=D.transparency.indexed,oe=0;for(L=0,S=Q.length;L<S;++L)oe+=Q[L];if((oe/=255)===S-1&&Q.indexOf(0)!==-1)B=[Q.indexOf(0)];else if(oe!==S){for(P=D.decodePixels(),R=new Uint8Array(P.length),L=0,S=P.length;L<S;L++)R[L]=Q[P[L]];H=t(R,D.width,1)}}var W=function(K){var J;switch(K){case n.image_compression.FAST:J=11;break;case n.image_compression.MEDIUM:J=13;break;case n.image_compression.SLOW:J=14;break;default:J=12}return J}(_);return X===this.decode.FLATE_DECODE&&(V="/Predictor "+W+" "),V+="/Colors "+q+" /BitsPerComponent "+C+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(H&&this.__addimage__.isArrayBuffer(H)||this.__addimage__.isArrayBufferView(H))&&(H=this.__addimage__.arrayBufferToBinaryString(H)),{alias:b,data:g,index:m,filter:X,decodeParameters:V,transparency:B,palette:Y,sMask:H,predictor:W,width:D.width,height:D.height,bitsPerComponent:C,colorSpace:I}}}})(Wt.API),function(n){n.processGIF89A=function(e,t,r,i){var a=new eq(e),o=a.width,s=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:o,height:s},d=new qv(100).encode(f,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A}(Wt.API),tl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},tl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){br.log("bit decode error:"+t)}},tl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var c=this.palette[a>>7-s&1];this.data[o+4*s]=c.blue,this.data[o+4*s+1]=c.green,this.data[o+4*s+2]=c.red,this.data[o+4*s+3]=255}t!==0&&(this.pos+=4-t)}},tl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,s=a>>4,c=15&a,f=this.palette[s];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},tl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},tl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,c=(a>>10&e)/e*255|0,f=a>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=s,this.data[d+2]=o,this.data[d+3]=f}this.pos+=n}},tl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,c=(o>>5&t)/t*255|0,f=(o>>11)/e*255|0,d=i*this.width*4+4*a;this.data[d]=f,this.data[d+1]=c,this.data[d+2]=s,this.data[d+3]=255}this.pos+=n}},tl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},tl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=o}},tl.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var a=new tl(e,!1),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},f=new qv(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(Wt.API),W4.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var a=new W4(e),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},f=new qv(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(Wt.API),Wt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,c=0,f=0;f<i;f+=4){var d=r[f],p=r[f+1],g=r[f+2],m=r[f+3];a[s++]=d,a[s++]=p,a[s++]=g,o[c++]=m}var b=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Wt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Jd=Wt.API,Qp=Jd.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,c=s.fof?s.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=f.fof?f.fof:1,p=e.doKerning!==!1,g=0,m=n.length,b=0,_=s[0]||c,I=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?I.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(g=p&&lr(f[r])==="object"&&!isNaN(parseInt(f[r][b],10))?f[r][b]/d:0,I.push((s[r]||_)/c+g)),b=r;return I},z4=Jd.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Jd.processArabic&&(n=Jd.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Qp.apply(this,arguments).reduce(function(a,o){return a+o},0)},V4=function(n,e,t,r){for(var i=[],a=0,o=n.length,s=0;a!==o&&s+e[a]<t;)s+=e[a],a++;i.push(n.slice(0,a));var c=a;for(s=0;a!==o;)s+e[a]>r&&(i.push(n.slice(c,a)),s=0,c=a),s+=e[a],a++;return c!==a&&i.push(n.slice(c,a)),i},q4=function(n,e,t){t||(t={});var r,i,a,o,s,c,f,d=[],p=[d],g=t.textIndent||0,m=0,b=0,_=n.split(" "),I=Qp.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var C=Array(c).join(" "),D=[];_.map(function(q){(q=q.split(/\s*\n/)).length>1?D=D.concat(q.map(function(Y,H){return(H&&Y.length?`
`:"")+Y})):D.push(q[0])}),_=D,c=z4.apply(this,[C,t])}for(a=0,o=_.length;a<o;a++){var B=0;if(r=_[a],c&&r[0]==`
`&&(r=r.substr(1),B=1),g+m+(b=(i=Qp.apply(this,[r,t])).reduce(function(q,Y){return q+Y},0))>e||B){if(b>e){for(s=V4.apply(this,[r,i,e-(g+m),e]),d.push(s.shift()),d=[s.pop()];s.length;)p.push([s.shift()]);b=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(q,Y){return q+Y},0)}else d=[r];p.push(d),g=b+c,m=I}else d.push(r),g+=m+b,m=I}return f=c?function(q,Y){return(Y?C:"")+q.join(" ")}:function(q){return q.join(" ")},p.map(f)},Jd.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var s,c,f=[];for(s=0,c=r.length;s<c;s++)f=f.concat(q4.apply(this,[r[s],o,a]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var g,m,b,_,I=["{"];for(var C in p){if(g=p[C],isNaN(parseInt(C,10))?m="'"+C+"'":(C=parseInt(C,10),m=(m=a(C).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof g=="number")g<0?(b=a(g).slice(3),_="-"):(b=a(g).slice(2),_=""),b=_+b.slice(0,-1)+r[b.slice(-1)];else{if(lr(g)!=="object")throw new Error("Don't know what to do with value type "+lr(g)+".");b=o(g)}I.push(m+b)}return I.push("}"),I.join("")},s=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,b,_,I={},C=1,D=I,B=[],q="",Y="",H=p.length-1,P=1;P<H;P+=1)(_=p[P])=="'"?g?(b=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(B.push([D,b]),D={},b=void 0):_=="}"?((m=B.pop())[0][m[1]]=D,b=void 0,D=m[0]):_=="-"?C=-1:b===void 0?t.hasOwnProperty(_)?(q+=t[_],b=parseInt(q,16)*C,C=1,q=""):q+=_:t.hasOwnProperty(_)?(Y+=t[_],D[b]=parseInt(Y,16)*C,C=1,b=void 0,Y=""):Y+=_;return I},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var g=p.font,m=d.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var b=f.Unicode[g.postScriptName];b&&(g.metadata.Unicode.encoding=b,g.encoding=b.codePages[0])}])}(Wt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(Q0(s)),o.metadata=n.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Wt),function(n){function e(){return(Gt.canvg?Promise.resolve(Gt.canvg):zy(()=>import("./index.es-Cy9qQ1Zg.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Wt.API.addSvgAsImage=function(t,r,i,a,o,s,c,f){if(isNaN(r)||isNaN(i))throw br.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw br.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(b){return b.fromString(p,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(g)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),r,i,a,o,c,f)})}}(),Wt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Wt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),c=[],f=0,d=0,p=0;function g(b,_){var I,C=!1;for(I=0;I<b.length;I+=1)b[I]===_&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=s.length;for(p=0;p<m;p+=1)t[s[p]].value=t[s[p]].defaultValue,t[s[p]].explicitSet=!1}if(lr(n)==="object"){for(i in n)if(a=n[i],g(s,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&g(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")c.push(String(a[f]-1));else if(a[f].length>1){for(d=0;d<a[f].length;d+=1)typeof a[f][d]!="number"&&(r=!1);r===!0&&c.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,_=[];for(b in t)t[b].explicitSet===!0&&(t[b].type==="name"?_.push("/"+b+" /"+t[b].value):_.push("/"+b+" "+t[b].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+o.length+s.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Wt.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,o){for(var s,c=o.metadata.Unicode.widths,f=["","0","00","000","0000"],d=[""],p=0,g=a.length;p<g;++p){if(s=o.metadata.characterToGlyph(a.charCodeAt(p)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(p),c.indexOf(s)==-1&&(c.push(s),c.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return d.join("");s=s.toString(16),d.push(f[4-s.length],s)}return d.join("")},r=function(a){var o,s,c,f,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,g=(s=Object.keys(a).sort(function(m,b){return m-b})).length;p<g;p++)o=s[p],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(f=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+f+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,f=o.newObject,d=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="Identity-H"){for(var p=s.metadata.Unicode.widths,g=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),m="",b=0;b<g.length;b++)m+=String.fromCharCode(g[b]);var _=f();d({data:m,addLength1:!0,objectId:_}),c("endobj");var I=f();d({data:r(s.metadata.toUnicode),addLength1:!0,objectId:I}),c("endobj");var C=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ah(s.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),c("/Flags "+s.metadata.flags),c("/StemV "+s.metadata.stemV),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c(">>"),c("endobj");var D=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+ah(s.fontName)),c("/FontDescriptor "+C+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+s.encoding+")"),c(">>"),c(">>"),c("endobj"),s.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+I+" 0 R"),c("/BaseFont /"+ah(s.fontName)),c("/Encoding /"+s.encoding),c("/DescendantFonts ["+D+" 0 R]"),c(">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,f=o.newObject,d=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var p=s.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var b=f();d({data:g,addLength1:!0,objectId:b}),c("endobj");var _=f();d({data:r(s.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var I=f();c("<<"),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c("/StemV "+s.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),c("/FontName /"+ah(s.fontName)),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c(">>"),c("endobj"),s.objectNumber=f();for(var C=0;C<s.metadata.hmtx.widths.length;C++)s.metadata.hmtx.widths[C]=parseInt(s.metadata.hmtx.widths[C]*(1e3/s.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+ah(s.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",c=a.x,f=a.y,d=a.options||{},p=a.mutex||{},g=p.pdfEscape,m=p.activeFontKey,b=p.fonts,_=m,I="",C=0,D="",B=b[_].encoding;if(b[_].encoding!=="Identity-H")return{text:s,x:c,y:f,options:d,mutex:p};for(D=s,_=m,Array.isArray(s)&&(D=s[0]),C=0;C<D.length;C+=1)b[_].metadata.hasOwnProperty("cmap")&&(o=b[_].metadata.cmap.unicode.codeMap[D[C].charCodeAt(0)]),o||D[C].charCodeAt(0)<256&&b[_].metadata.hasOwnProperty("Unicode")?I+=D[C]:I+="";var q="";return parseInt(_.slice(1))<14||B==="WinAnsiEncoding"?q=g(I,_).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(q=t(I,b[_])),p.isHex=!0,{text:q,x:c,y:f,options:d,mutex:p}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?s.push([i(Object.assign({},c,{text:o[f][0]})).text,o[f][1],o[f][2]]):s.push(i(Object.assign({},c,{text:o[f]})).text);a.text=s}else a.text=i(Object.assign({},c,{text:o})).text}])}(Wt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Wt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,o,s,c,f,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,B=0;this.__bidiEngine__={};var q=function(T){var N=T.charCodeAt(),L=N>>8,F=_[L];return F!==void 0?p[256*F+(255&N)]:L===252||L===253?"AL":C.test(L)?"L":L===8?"R":"N"},Y=function(T){for(var N,L=0;L<T.length;L++){if((N=q(T.charAt(L)))==="L")return!1;if(N==="R")return!0}return!1},H=function(T,N,L,F){var X,V,z,ne,se=N[F];switch(se){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(se="AN");break;case"AL":D=!0,se="R";break;case"WS":se="N";break;case"CS":F<1||F+1>=N.length||(X=L[F-1])!=="EN"&&X!=="AN"||(V=N[F+1])!=="EN"&&V!=="AN"?se="N":D&&(V="AN"),se=V===X?V:"N";break;case"ES":se=(X=F>0?L[F-1]:"B")==="EN"&&F+1<N.length&&N[F+1]==="EN"?"EN":"N";break;case"ET":if(F>0&&L[F-1]==="EN"){se="EN";break}if(D){se="N";break}for(z=F+1,ne=N.length;z<ne&&N[z]==="ET";)z++;se=z<ne&&N[z]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(ne=N.length,z=F+1;z<ne&&N[z]==="NSM";)z++;if(z<ne){var Q=T[F],oe=Q>=1425&&Q<=2303||Q===64286;if(X=N[z],oe&&(X==="R"||X==="AL")){se="R";break}}}se=F<1||(X=N[F-1])==="B"?"N":L[F-1];break;case"B":D=!1,i=!0,se=B;break;case"S":a=!0,se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":se="N"}return se},P=function(T,N,L){var F=T.split("");return L&&S(F,L,{hiLevel:B}),F.reverse(),N&&N.reverse(),F.join("")},S=function(T,N,L){var F,X,V,z,ne,se=-1,Q=T.length,oe=0,W=[],K=B?m:g,J=[];for(D=!1,i=!1,a=!1,X=0;X<Q;X++)J[X]=q(T[X]);for(V=0;V<Q;V++){if(ne=oe,W[V]=H(T,J,W,V),F=240&(oe=K[ne][b[W[V]]]),oe&=15,N[V]=z=K[oe][5],F>0)if(F===16){for(X=se;X<V;X++)N[X]=1;se=-1}else se=-1;if(K[oe][6])se===-1&&(se=V);else if(se>-1){for(X=se;X<V;X++)N[X]=z;se=-1}J[V]==="B"&&(N[V]=0),L.hiLevel|=z}a&&function(re,he,we){for(var xe=0;xe<we;xe++)if(re[xe]==="S"){he[xe]=B;for(var Ce=xe-1;Ce>=0&&re[Ce]==="WS";Ce--)he[Ce]=B}}(J,N,Q)},R=function(T,N,L,F,X){if(!(X.hiLevel<T)){if(T===1&&B===1&&!i)return N.reverse(),void(L&&L.reverse());for(var V,z,ne,se,Q=N.length,oe=0;oe<Q;){if(F[oe]>=T){for(ne=oe+1;ne<Q&&F[ne]>=T;)ne++;for(se=oe,z=ne-1;se<z;se++,z--)V=N[se],N[se]=N[z],N[z]=V,L&&(V=L[se],L[se]=L[z],L[z]=V);oe=ne}oe++}}},M=function(T,N,L){var F=T.split(""),X={hiLevel:B};return L||(L=[]),S(F,L,X),function(V,z,ne){if(ne.hiLevel!==0&&d)for(var se,Q=0;Q<V.length;Q++)z[Q]===1&&(se=I.indexOf(V[Q]))>=0&&(V[Q]=I[se+1])}(F,L,X),R(2,F,N,L,X),R(1,F,N,L,X),F.join("")};return this.__bidiEngine__.doBidiReorder=function(T,N,L){if(function(X,V){if(V)for(var z=0;z<X.length;z++)V[z]=z;s===void 0&&(s=Y(X)),f===void 0&&(f=Y(X))}(T,N),o||!c||f)if(o&&c&&s^f)B=s?1:0,T=P(T,N,L);else if(!o&&c&&f)B=s?1:0,T=M(T,N,L),T=P(T,N);else if(!o||s||c||f){if(o&&!c&&s^f)T=P(T,N),s?(B=0,T=M(T,N,L)):(B=1,T=M(T,N,L),T=P(T,N));else if(o&&s&&!c&&f)B=1,T=M(T,N,L),T=P(T,N);else if(!o&&!c&&s^f){var F=d;s?(B=1,T=M(T,N,L),B=0,d=!1,T=M(T,N,L),d=F):(B=0,T=M(T,N,L),T=P(T,N),B=1,d=!1,T=M(T,N,L),d=F,T=P(T,N))}}else B=0,T=M(T,N,L);else B=s?1:0,T=M(T,N,L);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,s=T.isInputRtl,f=T.isOutputRtl,d=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([t.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([t.doBidiReorder(i[s])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Wt),Wt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new vf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new gq(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new tq(this.contents),this.head=new rq(this),this.name=new lq(this),this.cmap=new DE(this),this.toUnicode={},this.hhea=new iq(this),this.maxp=new cq(this),this.hmtx=new uq(this),this.post=new oq(this),this.os2=new aq(this),this.loca=new pq(this),this.glyf=new fq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,c,f;for(f=[],o=0,s=(c=this.bbox).length;o<s;o++)e=c[o],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var pl,vf=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,o,s,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*o+256*s+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n}(),tq=function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,o,s,c,f,d,p,g,m,b,_;for(_ in m=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(m)/c),o=Math.floor(p/c),d=16*m-p,(i=new vf).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(d),a=16*m,f=i.pos+a,s=null,b=[],t)for(g=t[_],i.writeString(_),i.writeInt(n(g)),i.writeInt(f),i.writeInt(g.length),b=b.concat(g),_==="head"&&(s=f),f+=g.length;f%4;)b.push(0),f++;return i.write(b),r=2981146554-n(i.data),i.pos=s+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,o;for(t=OE.call(t);t.length%4;)t.push(0);for(a=new vf(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),nq={}.hasOwnProperty,fc=function(n,e){for(var t in e)nq.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};pl=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var rq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new vf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),G4=function(){function n(e,t){var r,i,a,o,s,c,f,d,p,g,m,b,_,I,C,D,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,a=function(){var q,Y;for(Y=[],c=q=0;0<=g?q<g:q>g;c=0<=g?++q:--q)Y.push(e.readUInt16());return Y}(),e.pos+=2,_=function(){var q,Y;for(Y=[],c=q=0;0<=g?q<g:q>g;c=0<=g?++q:--q)Y.push(e.readUInt16());return Y}(),f=function(){var q,Y;for(Y=[],c=q=0;0<=g?q<g:q>g;c=0<=g?++q:--q)Y.push(e.readUInt16());return Y}(),d=function(){var q,Y;for(Y=[],c=q=0;0<=g?q<g:q>g;c=0<=g?++q:--q)Y.push(e.readUInt16());return Y}(),i=(this.length-e.pos+this.offset)/2,s=function(){var q,Y;for(Y=[],c=q=0;0<=i?q<i:q>i;c=0<=i?++q:--q)Y.push(e.readUInt16());return Y}(),c=C=0,B=a.length;C<B;c=++C)for(I=a[c],r=D=b=_[c];b<=I?D<=I:D>=I;r=b<=I?++D:--D)d[c]===0?o=r+f[c]:(o=s[d[c]/2+(r-b)-(g-c)]||0)!==0&&(o+=f[c]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,a,o,s,c,f,d,p,g,m,b,_,I,C,D,B,q,Y,H,P,S,R,M,T,N,L,F,X,V,z,ne,se,Q,oe,W,K,J,re,he,we,xe,Ce,We,qe,it;switch(F=new vf,o=Object.keys(e).sort(function(lt,vt){return lt-vt}),t){case"macroman":for(_=0,I=function(){var lt=[];for(b=0;b<256;++b)lt.push(0);return lt}(),D={0:0},a={},X=0,se=o.length;X<se;X++)D[Ce=e[i=o[X]]]==null&&(D[Ce]=++_),a[i]={old:e[i],new:D[e[i]]},I[i]=D[e[i]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(I),{charMap:a,subtable:F.data,maxGlyphID:_+1};case"unicode":for(N=[],p=[],B=0,D={},r={},C=f=null,V=0,Q=o.length;V<Q;V++)D[Y=e[i=o[V]]]==null&&(D[Y]=++B),r[i]={old:Y,new:D[Y]},s=D[Y]-i,C!=null&&s===f||(C&&p.push(C),N.push(i),f=s),C=i;for(C&&p.push(C),p.push(65535),N.push(65535),M=2*(R=N.length),S=2*Math.pow(Math.log(R)/Math.LN2,2),g=Math.log(S/2)/Math.LN2,P=2*R-S,c=[],H=[],m=[],b=z=0,oe=N.length;z<oe;b=++z){if(T=N[b],d=p[b],T===65535){c.push(0),H.push(0);break}if(T-(L=r[T].new)>=32768)for(c.push(0),H.push(2*(m.length+R-b)),i=ne=T;T<=d?ne<=d:ne>=d;i=T<=d?++ne:--ne)m.push(r[i].new);else c.push(L-T),H.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*R+2*m.length),F.writeUInt16(0),F.writeUInt16(M),F.writeUInt16(S),F.writeUInt16(g),F.writeUInt16(P),we=0,W=p.length;we<W;we++)i=p[we],F.writeUInt16(i);for(F.writeUInt16(0),xe=0,K=N.length;xe<K;xe++)i=N[xe],F.writeUInt16(i);for(We=0,J=c.length;We<J;We++)s=c[We],F.writeUInt16(s);for(qe=0,re=H.length;qe<re;qe++)q=H[qe],F.writeUInt16(q);for(it=0,he=m.length;it<he;it++)_=m[it],F.writeUInt16(_);return{charMap:r,subtable:F.data,maxGlyphID:B+1}}},n}(),DE=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new G4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,a;return r==null&&(r="macroman"),i=G4.encode(t,r),(a=new vf).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),iq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),aq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),oq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var s,c,f;for(f=[],o=s=0,c=this.file.maxp.numGlyphs;0<=c?s<c:s>c;o=0<=c?++s:--s)f.push(t.readUInt32());return f}).call(this)}},e}(),sq=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},lq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,a,o,s,c,f,d,p,g,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(f={},o=p=0,g=i.length;p<g;o=++p)a=i[o],t.pos=a.offset,d=t.readString(a.length),s=new sq(d,a),f[m=a.nameID]==null&&(f[m]=[]),f[a.nameID].push(s);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),cq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),uq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,a,o,s,c,f;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)p.push(t.readInt16());return p}(),this.widths=(function(){var d,p,g,m;for(m=[],d=0,p=(g=this.metrics).length;d<p;d++)o=g[d],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],f=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),OE=[].slice,fq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,a,o,s,c,f,d,p,g;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(a=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,s=(c=new vf(r.read(a))).readShort(),d=c.readShort(),g=c.readShort(),f=c.readShort(),p=c.readShort(),this.cache[t]=s===-1?new hq(c,d,g,f,p):new dq(c,s,d,g,f,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var a,o,s,c,f;for(s=[],o=[],c=0,f=r.length;c<f;c++)a=t[r[c]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),dq=function(){function n(e,t,r,i,a,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),hq=function(){function n(e,t,r,i,a){var o,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new vf(OE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),pq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return fc(e,pl),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<r.length&&r[o]==s){++o,i[s]=a;var c=this.offsets[s],f=this.offsets[s+1]-c;f>0&&(a+=f)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),gq=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,o,s,c;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in c=this.glyphsFor(t))r=c[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,o,s,c,f,d,p,g,m,b,_,I,C;for(i in r=DE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},C=r.charMap)m[(c=C[i]).old]=c.new;for(b in g=r.maxGlyphID,o)b in m||(m[b]=g++);return d=function(D){var B,q;for(B in q={},D)q[D[B]]=B;return q}(m),p=Object.keys(d).sort(function(D,B){return D-B}),_=function(){var D,B,q;for(q=[],D=0,B=p.length;D<B;D++)s=p[D],q.push(d[s]);return q}(),a=this.font.glyf.encode(o,_,m),f=this.font.loca.encode(a.offsets,_),I={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},n}();Wt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,o;if(Array.isArray(t))return"["+function(){var s,c,f;for(f=[],s=0,c=t.length;s<c;s++)r=t[s],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)o=t[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+t},e}();function kE(n,e,t,r,i){r=r||{};var a=1.15,o=i.internal.scaleFactor,s=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():a,f=s*c,d=/\r\n|\r|\n/g,p="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(d):n,g=p.length||1),t+=s*(2-a),r.valign==="middle"?t-=g/2*f:r.valign==="bottom"&&(t-=g*f),r.halign==="center"||r.halign==="right"){var m=s;if(r.halign==="center"&&(m*=.5),p&&g>=1){for(var b=0;b<p.length;b++)i.text(p[b],e-i.getStringUnitWidth(p[b])*m,t),t+=f;return i}e-=i.getStringUnitWidth(n)*m}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var $4={},xh=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:$4=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){s=e.fontStyle;var f=this.getFontList()[c];f&&f.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),s=f[0])}if(this.jsPDFDocument.setFont(c,s),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=n.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=n.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=n.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return $4||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),Jy=function(n,e){return Jy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Jy(n,e)};function PE(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jy(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var LE=function(n){PE(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function mq(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function vq(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function em(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function ME(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var o=jE(i,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,o)}function jE(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function $m(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function BE(n,e){var t=$m(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function yq(n,e,t,r,i){var a={},o=1.3333333333333333,s=Hv(e,function(B){return i.getComputedStyle(B).backgroundColor});s!=null&&(a.fillColor=s);var c=Hv(e,function(B){return i.getComputedStyle(B).color});c!=null&&(a.textColor=c);var f=bq(r,t);f&&(a.cellPadding=f);var d="borderTopColor",p=o*t,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var b=Hv(e,function(B){return i.getComputedStyle(B)[d]});b!=null&&(a.lineColor=b);var _=["left","right","center","justify"];_.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),_=["middle","bottom","top"],_.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var I=parseInt(r.fontSize||"");isNaN(I)||(a.fontSize=I/o);var C=xq(r);C&&(a.fontStyle=C);var D=(r.fontFamily||"").toLowerCase();return n.indexOf(D)!==-1&&(a.font=D),a}function xq(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Hv(n,e){var t=FE(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function FE(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:FE(n.parentElement,e):t}function bq(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(s){return parseInt(s||"0")/r}),o=$m(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function UE(n,e,t,r,i){var a,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var s;typeof e=="string"?s=t.document.querySelector(e):s=e;var c=Object.keys(n.getFontList()),f=n.scaleFactor(),d=[],p=[],g=[];if(!s)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:g};for(var m=0;m<s.rows.length;m++){var b=s.rows[m],_=(o=(a=b==null?void 0:b.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),I=wq(c,f,t,b,r,i);I&&(_==="thead"?d.push(I):_==="tfoot"?g.push(I):p.push(I))}return{head:d,body:p,foot:g}}function wq(n,e,t,r,i,a){for(var o=new LE(r),s=0;s<r.cells.length;s++){var c=r.cells[s],f=t.getComputedStyle(c);if(i||f.display!=="none"){var d=void 0;a&&(d=yq(n,c,e,f,t)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:_q(c)})}}var p=t.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function _q(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function Aq(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function $c(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c])}return a}function Sq(n,e){var t=new xh(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();Aq(i,r,e);var a=$c({},i,r,e),o;typeof window<"u"&&(o=window);var s=Eq(i,r,e),c=Cq(i,r,e),f=Iq(t,a),d=Rq(t,a,o);return{id:e.tableId,content:d,hooks:c,styles:s,settings:f}}function Eq(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var f=n[c],d=e[c],p=t[c];r.columnStyles=$c({},f,d,p)}else{var g=[n,e,t],m=g.map(function(b){return b[c]||{}});r[c]=$c({},m[0],m[1],m[2])}},a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];i(s)}return r}function Cq(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=r;a<o.length;a++){var s=o[a];s.didParseCell&&i.didParseCell.push(s.didParseCell),s.willDrawCell&&i.willDrawCell.push(s.willDrawCell),s.didDrawCell&&i.didDrawCell.push(s.didDrawCell),s.willDrawPage&&i.willDrawPage.push(s.willDrawPage),s.didDrawPage&&i.didDrawPage.push(s.didDrawPage)}return i}function Iq(n,e){var t,r,i,a,o,s,c,f,d,p,g,m,b=$m(e.margin,40/n.scaleFactor()),_=(t=Tq(n,e.startY))!==null&&t!==void 0?t:b.top,I;e.showFoot===!0?I="everyPage":e.showFoot===!1?I="never":I=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var C;e.showHead===!0?C="everyPage":e.showHead===!1?C="never":C=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var D=(a=e.useCss)!==null&&a!==void 0?a:!1,B=e.theme||(D?"plain":"striped"),q=!!e.horizontalPageBreak,Y=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(s=e.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:D,theme:B,startY:_,margin:b,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:C,showFoot:I,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:q,horizontalPageBreakRepeat:Y,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Tq(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;a=o===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function Rq(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var s=UE(n,e.html,t,o,e.useCss)||{};r=s.head||r,i=s.body||r,a=s.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||Nq(r,i,a);return{columns:c,head:r,body:i,foot:a}}function Nq(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,s;Array.isArray(r)?s=r[parseInt(a)]:s=r[a],typeof s=="object"&&!Array.isArray(s)&&(o=(s==null?void 0:s.colSpan)||1);for(var c=0;c<o;c++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(c>0?"_".concat(c):"");var d={dataKey:f};i.push(d)}}),i}var e5=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),Dq=function(n){PE(e,n);function e(t,r,i,a,o,s){var c=n.call(this,t,r,s)||this;return c.cell=i,c.row=a,c.column=o,c.section=a.section,c}return e}(e5),Oq=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,o){for(var s=0,c=t;s<c.length;s++){var f=c[s],d=new Dq(e,this,r,i,a,o),p=f(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new e5(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new e5(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),zE=function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof LE&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var o=r.cells[a.index];if(!o)return 0;var s=t.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),f=c+s;return f>i?f:i},0)},n}(),VE=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=o.split(s)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=$m(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),kq=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n}();function Pq(n,e){Lq(n,e);var t=[],r=0;e.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(e);o?a.width=o:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=t5(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=t5(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),jq(e),Bq(e,n),Mq(e)}function Lq(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=BE(n,e);e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f){var d=e.hooks.didParseCell;e.callCellHooks(n,d,f,a,c,null);var p=f.padding("horizontal");f.contentWidth=em(f.text,f.styles,n)+p;var g=em(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=g+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var m=10/t;f.minWidth=f.styles.minCellWidth||m,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f&&f.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,f.wrappedWidth),c.minWidth=Math.max(c.minWidth,f.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,f.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(c.minWidth=p,c.wrappedWidth=p)}f&&(f.colSpan>1&&!c.minWidth&&(c.minWidth=f.minWidth),f.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=f.minWidth))}})}function t5(n,e,t){for(var r=e,i=n.reduce(function(m,b){return m+b.wrappedWidth},0),a=0;a<n.length;a++){var o=n[a],s=o.wrappedWidth/i,c=r*s,f=o.width+c,d=t(o),p=f<d?d:f;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=n.filter(function(m){return e<0?m.width>t(m):!0});g.length&&(e=t5(g,e,t))}return e}function Mq(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],o=0,s=n.columns;o<s.length;o++){var c=s[o],f=e[c.index];if(t>1)t--,delete a.cells[c.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[c.index],f.left--,f.left<=1&&delete e[c.index];else{var d=a.cells[c.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var p=r.length-i,g=d.rowSpan>p?p:d.rowSpan;e[c.index]={cell:d,left:g,row:a}}}}}function jq(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,o=0,s=0;s<n.columns.length;s++){var c=n.columns[s];if(o-=1,o>1&&n.columns[s+1])a+=c.width,delete r.cells[c.index];else if(i){var f=i;delete r.cells[c.index],i=null,f.width=c.width+a}else{var f=r.cells[c.index];if(!f)continue;if(o=f.colSpan,a=0,f.colSpan>1){i=f,a+=c.width;continue}f.width=c.width+a}}}function Bq(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],o=0,s=n.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f){e.applyStyles(f.styles,!0);var d=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,d+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=Y4(f.text,d,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=Y4(f.text,d,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var p=f.styles.overflow(f.text,d);typeof p=="string"?f.text=[p]:f.text=p}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<g*f.rowSpan?t={height:g,count:f.rowSpan}:t&&t.count>0&&t.height>g&&(g=t.height),g>a.height&&(a.height=g)}}t.count--}}function Y4(n,e,t,r,i){return n.map(function(a){return Fq(a,e,t,r,i)})}function Fq(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=em(n,t,r))return n;for(;e<em(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function Uq(n,e){var t=new xh(n),r=zq(e,t.scaleFactor()),i=new Oq(e,r);return Pq(t,i),t.applyStyles(t.userStyles),i}function zq(n,e){var t=n.content,r=qq(t.columns);if(t.head.length===0){var i=X4(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=X4(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,o=n.styles;return{columns:r,head:Wv("head",t.head,r,o,a,e),body:Wv("body",t.body,r,o,a,e),foot:Wv("foot",t.foot,r,o,a,e)}}function Wv(n,e,t,r,i,a){var o={},s=e.map(function(c,f){for(var d=0,p={},g=0,m=0,b=0,_=t;b<_.length;b++){var I=_[b];if(o[I.index]==null||o[I.index].left===0)if(m===0){var C=void 0;Array.isArray(c)?C=c[I.index-g-d]:C=c[I.dataKey];var D={};typeof C=="object"&&!Array.isArray(C)&&(D=(C==null?void 0:C.styles)||{});var B=Hq(n,I,f,i,r,a,D),q=new VE(C,B,n);p[I.dataKey]=q,p[I.index]=q,m=q.colSpan-1,o[I.index]={left:q.rowSpan-1,times:m}}else m--,g++;else o[I.index].left--,m=o[I.index].times,d++}return new zE(c,f,n,p)});return s}function X4(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=Vq(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function Vq(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function qq(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new kq(i,e,t)})}function Hq(n,e,t,r,i,a,o){var s=vq(r),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var f=$c({},s.table,s[n],i.styles,c),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?d:{},g=n==="body"&&t%2===0?$c({},s.alternateRow,i.alternateRowStyles):{},m=mq(a),b=$c({},m,f,g,p);return $c(b,o)}function Wq(n,e,t){var r;t===void 0&&(t={});var i=BE(n,e),a=new Map,o=[],s=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var m=e.columns.find(function(b){return b.dataKey===g||b.index===g});m&&!a.has(m.index)&&(a.set(m.index,!0),o.push(m.index),s.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var f=!0,d=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(f||i>=p)f=!1,o.push(d),s.push(e.columns[d]),i-=p;else break;d++}return{colIndexes:o,columns:s,lastIndex:d-1}}function Gq(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=Wq(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function $q(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),s=r+i.bottom+o;if(t.pageBreak==="avoid"){var c=e.body,f=c.reduce(function(g,m){return g+m.height},0);s+=f}var d=new xh(n);(t.pageBreak==="always"||t.startY!=null&&s>d.pageSize().height)&&(HE(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var p=$c({},a);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?Yq(d,e,p,a):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(g){return iu(d,e,g,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(g,m){var b=m===e.body.length-1;tm(d,e,g,b,p,a,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(g){return iu(d,e,g,a,e.columns)})),ME(d,e,p,a),e.callEndPageHooks(d,a),e.finalY=a.y,n.lastAutoTable=e,d.applyStyles(d.userStyles)}function Yq(n,e,t,r){var i=Gq(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,d){n.applyStyles(n.userStyles),d>0?Z0(n,e,t,r,f.columns,!0):K4(n,e,r,f.columns),Xq(n,e,t,r,f.columns),Gv(n,e,r,f.columns)});else for(var o=-1,s=i[0],c=function(){var f=o;if(s){n.applyStyles(n.userStyles);var d=s.columns;o>=0?Z0(n,e,t,r,d,!0):K4(n,e,r,d),f=Q4(n,e,o+1,r,d),Gv(n,e,r,d)}var p=f-o;i.slice(1).forEach(function(g){n.applyStyles(n.userStyles),Z0(n,e,t,r,g.columns,!0),Q4(n,e,o+1,r,g.columns,p),Gv(n,e,r,g.columns)}),o=f};o<e.body.length-1;)c()}function K4(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return iu(n,e,a,t,r)})}function Xq(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,o){var s=o===e.body.length-1;tm(n,e,a,s,t,r,i)})}function Q4(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var o=Math.min(t+a,e.body.length),s=-1;return e.body.slice(t,o).forEach(function(c,f){var d=t+f===e.body.length-1,p=qE(n,e,d,r);c.canEntireRowFit(p,i)&&(iu(n,e,c,r,i),s=t+f)}),s}function Gv(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return iu(n,e,a,t,r)})}function Kq(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function Qq(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,o=0,s=t.columns;o<s.length;o++){var c=s[o],f=n.cells[c.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var d=new VE(f.raw,f.styles,f.section);d=$c(d,f),d.text=[];var p=Kq(f,e,r);f.text.length>p&&(d.text=f.text.splice(p,f.text.length));var g=r.scaleFactor(),m=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(g,m),f.contentHeight>=e&&(f.contentHeight=e,d.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),d.contentHeight=d.getContentHeight(g,m),d.contentHeight>a&&(a=d.contentHeight),i[c.index]=d}}var b=new zE(n.raw,-1,n.section,i,!0);b.height=a;for(var _=0,I=t.columns;_<I.length;_++){var c=I[_],d=b.cells[c.index];d&&(d.height=b.height);var f=n.cells[c.index];f&&(f.height=n.height)}return b}function Zq(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,o=a.top+a.bottom,s=i-o;e.section==="body"&&(s-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,n),f=c<t;if(c>s)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var d=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>s;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function tm(n,e,t,r,i,a,o){var s=qE(n,e,r,a);if(t.canEntireRowFit(s,o))iu(n,e,t,a,o);else if(Zq(n,t,s,e)){var c=Qq(t,s,e,n);iu(n,e,t,a,o),Z0(n,e,i,a,o),tm(n,e,c,r,i,a,o)}else Z0(n,e,i,a,o),tm(n,e,t,r,i,a,o)}function iu(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var s=o[a],c=t.cells[s.index];if(!c){r.x+=s.width;continue}n.applyStyles(c.styles),c.x=r.x,c.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,c,t,s,r);if(f===!1){r.x+=s.width;continue}Jq(n,c,r);var d=c.getTextPos();kE(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,s,r),r.x+=s.width}r.y+=t.height}function Jq(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=jE(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),eH(n,e,t,r.lineWidth))}function eH(n,e,t,r){var i,a,o,s;r.top&&(i=t.x,a=t.y,o=t.x+e.width,s=t.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.top,i,a,o,s)),r.bottom&&(i=t.x,a=t.y+e.height,o=t.x+e.width,s=t.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.bottom,i,a,o,s)),r.left&&(i=t.x,a=t.y,o=t.x,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.left,i,a,o,s)),r.right&&(i=t.x+e.width,a=t.y,o=t.x+e.width,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.right,i,a,o,s));function c(f,d,p,g,m){n.getDocument().setLineWidth(f),n.getDocument().line(d,p,g,m,"S")}}function qE(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function Z0(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(s){return iu(n,e,s,r,i)}),e.callEndPageHooks(n,r);var o=e.settings.margin;ME(n,e,t,r),HE(n),e.pageNumber++,r.x=o.left,r.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(s){return iu(n,e,s,r,i)}),n.applyStyles(n.userStyles))}function HE(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function tH(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=Sq(this,r),a=Uq(this,i);return $q(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){kE(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return xh.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){xh.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new xh(this),a=UE(i,e,window,t,!1),o=a.head,s=a.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:c,rows:s,data:s}}}var $v;try{if(typeof window<"u"&&window){var Z4=window,J4=Z4.jsPDF||(($v=Z4.jspdf)===null||$v===void 0?void 0:$v.jsPDF);J4&&tH(J4)}}catch(n){console.error("Could not apply autoTable plugin",n)}const nH=({showStatsModal:n,setShowStatsModal:e,loanHistory:t})=>{const r=de.useMemo(()=>{if(!t||t.length===0)return null;const i=F=>F?F.seconds?new Date(F.seconds*1e3):new Date(F):null,a=t.length,o=a,s=0,c=t.flatMap(F=>F.items||[]),f=c.reduce((F,X)=>F+(X.quantity||1),0),d={};c.forEach(F=>{const X=F.name;d[X]=(d[X]||0)+(F.quantity||1)});const p=Object.entries(d).sort(([,F],[,X])=>X-F).slice(0,5).map(([F,X])=>({name:F,count:X})),g={};t.forEach(F=>{const X=F.clientName||"לא צוין";g[X]=(g[X]||0)+1});const m=Object.entries(g).sort(([,F],[,X])=>X-F).slice(0,5).map(([F,X])=>({name:F,count:X})),b={};t.forEach(F=>{const X=F.volunteerName||"לא צוין";b[X]=(b[X]||0)+1});const _=Object.entries(b).sort(([,F],[,X])=>X-F).slice(0,5).map(([F,X])=>({name:F,count:X})),I=new Date().getMonth(),C=new Date().getFullYear(),D=t.filter(F=>{const X=i(F.pickupDate);return X?X.getMonth()===I&&X.getFullYear()===C:!1}).length,B=I===0?11:I-1,q=I===0?C-1:C,Y=t.filter(F=>{const X=i(F.pickupDate);return X?X.getMonth()===B&&X.getFullYear()===q:!1}).length,H=t.filter(F=>F.pickupDate&&F.returnDate);let P=0;if(H.length>0){const F=H.reduce((X,V)=>{const z=i(V.pickupDate),ne=i(V.returnDate);if(!z||!ne)return X;const se=Math.ceil((ne-z)/(1e3*60*60*24));return X+Math.max(0,se)},0);P=Math.round(F/H.length)}const S=t.filter(F=>F.returnInspection),R=S.reduce((F,X)=>{var V;return(V=X.returnInspection)!=null&&V.itemInspections?F+X.returnInspection.itemInspections.reduce((z,ne)=>z+(ne.quantityReturned||0),0):F},0),M=S.reduce((F,X)=>{var V;return(V=X.returnInspection)!=null&&V.itemInspections?F+X.returnInspection.itemInspections.filter(z=>z.condition==="damaged").reduce((z,ne)=>z+(ne.quantityReturned||0),0):F},0),T=S.reduce((F,X)=>{var V;return(V=X.returnInspection)!=null&&V.itemInspections?F+X.returnInspection.itemInspections.filter(z=>z.condition==="lost").reduce((z,ne)=>z+Math.max(0,(ne.quantityExpected||0)-(ne.quantityReturned||0)),0):F},0),N={};t.forEach(F=>{const X=F.eventType||"לא צוין";N[X]=(N[X]||0)+1});const L=Object.entries(N).sort(([,F],[,X])=>X-F).slice(0,5).map(([F,X])=>({name:F,count:X}));return{totalLoans:a,activeLoans:s,completedLoans:o,totalItemsLoaned:f,totalItemsReturned:R,damagedItems:M,lostItems:T,mostPopularItems:p,topBorrowers:m,topVolunteers:_,topEventTypes:L,thisMonthLoans:D,lastMonthLoans:Y,averageDuration:P,loansWithInspection:S.length}},[t]);return n?r?y.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:y.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[y.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2196F3"},children:"📊 סטטיסטיקות השאלות"}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📈 נתונים כלליים"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[y.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1976d2"},children:r.totalLoans}),y.jsx("div",{children:'סה"כ השאלות'})]}),y.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#388e3c"},children:r.completedLoans}),y.jsx("div",{children:"השאלות שהושלמו"})]}),y.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f57c00"},children:r.totalItemsLoaned}),y.jsx("div",{children:"פריטים הושאלו"})]}),y.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),y.jsx("div",{children:"פריטים הוחזרו"})]})]})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📅 השוואה חודשית"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[y.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.thisMonthLoans}),y.jsx("div",{children:"השאלות החודש"})]}),y.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#666"},children:r.lastMonthLoans}),y.jsx("div",{children:"השאלות החודש שעבר"})]})]}),r.lastMonthLoans>0&&y.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.9rem"},children:r.thisMonthLoans>r.lastMonthLoans?y.jsxs("span",{style:{color:"#388e3c"},children:["⬆️ עלייה של ",((r.thisMonthLoans-r.lastMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):r.thisMonthLoans<r.lastMonthLoans?y.jsxs("span",{style:{color:"#d32f2f"},children:["⬇️ ירידה של ",((r.lastMonthLoans-r.thisMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):y.jsx("span",{style:{color:"#666"},children:"➡️ ללא שינוי"})})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📦 סטטיסטיקות פריטים"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[y.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.totalItemsLoaned}),y.jsx("div",{children:'סה"כ פריטים הושאלו'})]}),y.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),y.jsx("div",{children:"פריטים הוחזרו"})]}),r.damagedItems>0&&y.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:r.damagedItems}),y.jsx("div",{children:"פריטים פגומים"})]}),r.lostItems>0&&y.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:r.lostItems}),y.jsx("div",{children:"פריטים אבודים"})]})]}),r.mostPopularItems.length>0&&y.jsxs("div",{children:[y.jsx("h4",{style:{marginBottom:"0.5rem"},children:"🏆 הפריטים הפופולריים ביותר:"}),r.mostPopularItems.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#fff3e0":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[y.jsxs("span",{children:[a+1,". ",i.name]}),y.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," פעמים"]})]},a))]})]}),r.topBorrowers.length>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"👥 הלקוחות הפעילים ביותר"}),r.topBorrowers.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e8f5e8":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[y.jsxs("span",{children:[a+1,". ",i.name]}),y.jsxs("span",{style:{fontWeight:"bold",color:"#388e3c"},children:[i.count," השאלות"]})]},a))]}),r.topVolunteers.length>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🌟 המתנדבות הפעילות ביותר"}),r.topVolunteers.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e3f2fd":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[y.jsxs("span",{children:[a+1,". ",i.name]}),y.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," השאלות"]})]},a))]}),r.topEventTypes.length>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🎉 סוגי האירועים הפופולריים"}),r.topEventTypes.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#f0fdf4":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[y.jsxs("span",{children:[a+1,". ",i.name]}),y.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[i.count," פעמים"]})]},a))]}),r.averageDuration>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"⏱️ משך השאלה ממוצע"}),y.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[r.averageDuration," ימים"]}),y.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["(מבוסס על ",t.filter(i=>i.pickupDate&&i.returnDate).length," השאלות)"]})]})]}),r.loansWithInspection>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🔍 סיכום בדיקות החזרה"}),y.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.loansWithInspection}),y.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["השאלות עם בדיקת החזרה מתוך ",r.totalLoans,' סה"כ']}),y.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:["(",(r.loansWithInspection/r.totalLoans*100).toFixed(1),"% מהשאלות נבדקו)"]})]})]}),y.jsx("div",{className:"modal-actions",children:y.jsx("button",{className:"btn btn-blue",onClick:()=>e(!1),children:"✔️ סגור"})})]})}):y.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:y.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),children:[y.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"📊 סטטיסטיקות השאלות"}),y.jsx("p",{style:{textAlign:"center"},children:"אין נתונים זמינים"}),y.jsx("div",{className:"modal-actions",children:y.jsx("button",{className:"btn btn-gray",onClick:()=>e(!1),children:"סגור"})})]})}):null};class j1{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const rH=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ua={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:rH()},Ix=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},iH=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=Ix(n);ua.publicKey=t.publicKey,ua.blockHeadless=t.blockHeadless,ua.storageProvider=t.storageProvider,ua.blockList=t.blockList,ua.limitRate=t.limitRate,ua.origin=t.origin||e},WE=async(n,e,t={})=>{const r=await fetch(ua.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),a=new j1(r.status,i);if(r.ok)return a;throw a},GE=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},aH=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},$E=n=>n.webdriver||!n.languages||n.languages.length===0,YE=()=>new j1(451,"Unavailable For Headless Browser"),oH=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},sH=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},lH=(n,e)=>n instanceof FormData?n.get(e):n[e],XE=(n,e)=>{if(sH(n))return!1;oH(n.list,n.watchVariable);const t=lH(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},KE=()=>new j1(403,"Forbidden"),cH=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},uH=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},QE=async(n,e,t)=>{if(!e.throttle||!t)return!1;cH(e.throttle,e.id);const r=e.id||n;return await uH(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},ZE=()=>new j1(429,"Too Many Requests"),fH=async(n,e,t,r)=>{const i=Ix(r),a=i.publicKey||ua.publicKey,o=i.blockHeadless||ua.blockHeadless,s=i.storageProvider||ua.storageProvider,c={...ua.blockList,...i.blockList},f={...ua.limitRate,...i.limitRate};return o&&$E(navigator)?Promise.reject(YE()):(GE(a,n,e),aH(t),t&&XE(c,t)?Promise.reject(KE()):await QE(location.pathname,f,s)?Promise.reject(ZE()):WE("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},dH=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},hH=n=>typeof n=="string"?document.querySelector(n):n,pH=async(n,e,t,r)=>{const i=Ix(r),a=i.publicKey||ua.publicKey,o=i.blockHeadless||ua.blockHeadless,s=ua.storageProvider||i.storageProvider,c={...ua.blockList,...i.blockList},f={...ua.limitRate,...i.limitRate};if(o&&$E(navigator))return Promise.reject(YE());const d=hH(t);GE(a,n,e),dH(d);const p=new FormData(d);return XE(c,p)?Promise.reject(KE()):await QE(location.pathname,f,s)?Promise.reject(ZE()):(p.append("lib_version","4.4.1"),p.append("service_id",n),p.append("template_id",e),p.append("user_id",a),WE("/api/v1.0/email/send-form",p))},Tx={init:iH,send:fH,sendForm:pH,EmailJSResponseStatus:j1},g1={serviceId:"service_zbzqfa3",reminderTemplateId:"template_02cqfdn",confirmationTemplateId:"template_lv2sc1p",publicKey:"gJHtAe_l22dY8tKju"};Tx.init(g1.publicKey);const nm=n=>n?new Date(n).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):"",gH=async(n,e)=>{var t,r;try{console.log(`📧 Sending pickup confirmation for order ${e}`);const i={to_email:n.email,to_name:n.clientName,client_name:n.clientName,pickup_date:nm(n.pickupDate),return_date:nm(n.returnDate),volunteer_name:n.volunteerName||"צוות הארגון",volunteer_phone:"054-2575886",organization_name:"גמח שמחת זקנתי",items_list:((t=n.items)==null?void 0:t.map(o=>`• ${o.name} - כמות: ${o.quantity}`).join(`
`))||"לא צוינו פריטים",total_items:((r=n.items)==null?void 0:r.reduce((o,s)=>o+s.quantity,0))||0,event_type:n.eventType||"כללי",order_id:e,pickup_location:n.pickupLocation||"מיקום לפי תיאום",special_instructions:n.specialInstructions||"אין הוראות מיוחדות"},a=await Tx.send(g1.serviceId,g1.confirmationTemplateId,i);return console.log("✅ Pickup confirmation email sent successfully:",a),await Za(wr(Ot,"orders",e),{confirmationEmailSent:!0,confirmationEmailSentAt:gi.now(),confirmationEmailResult:{status:a.status,text:a.text,sentAt:new Date().toISOString()}}),{success:!0,result:a}}catch(i){return console.error(`❌ Failed to send pickup confirmation for order ${e}:`,i),{success:!1,error:i.message}}},mH=async(n,e)=>{var t,r;try{console.log(`📧 Sending reminder email for order ${e}`);const i={to_email:n.email,to_name:n.clientName,client_name:n.clientName,return_date:nm(n.returnDate),volunteer_name:n.volunteerName||"צוות הארגון",volunteer_phone:"054-2575886",organization_name:"גמח שמחת זקנתי",items_list:((t=n.items)==null?void 0:t.map(o=>`• ${o.name} - כמות: ${o.quantity}`).join(`
`))||"לא צוינו פריטים",total_items:((r=n.items)==null?void 0:r.reduce((o,s)=>o+s.quantity,0))||0,event_type:n.eventType||"כללי",pickup_date:nm(n.pickupDate),order_id:e},a=await Tx.send(g1.serviceId,g1.reminderTemplateId,i);return console.log("✅ Reminder email sent successfully:",a),await Za(wr(Ot,"orders",e),{reminderSent:!0,reminderSentAt:gi.now(),emailSentResult:{status:a.status,text:a.text,sentAt:new Date().toISOString()}}),{success:!0,result:a}}catch(i){return console.error(`❌ Failed to send reminder for order ${e}:`,i),{success:!1,error:i.message}}},vH=async()=>{const n=new Date,e=n.toISOString().split("T")[0],t=new Date(n);t.setDate(n.getDate()+2);const r=t.toISOString().split("T")[0];console.log(`📅 Checking emails for pickup date: ${e} and reminder date: ${r}`);const i={pickupConfirmations:{sent:0,alreadySent:0,errors:[]},reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0};try{console.log("🔍 Checking for pickup confirmations...");const a=tc(vn(Ot,"orders"),ll("status","in",["open","confirmed","approved","active"]),ll("pickupDate","==",e)),o=await er(a);i.totalFound+=o.size;for(const p of o.docs){const g=p.data(),m=p.id;if(g.confirmationEmailSent)i.pickupConfirmations.alreadySent++;else{const b=await gH(g,m);b.success?i.pickupConfirmations.sent++:i.pickupConfirmations.errors.push({orderId:m,email:g.email,clientName:g.clientName,error:b.error})}}console.log("🔍 Checking for reminders...");const s=tc(vn(Ot,"orders"),ll("status","in",["active","confirmed","picked_up","open"]),ll("returnDate","==",r)),c=await er(s);i.totalFound+=c.size;for(const p of c.docs){const g=p.data(),m=p.id;if(g.reminderSent)i.reminders.alreadySent++;else{const b=await mH(g,m);b.success?i.reminders.sent++:i.reminders.errors.push({orderId:m,email:g.email,clientName:g.clientName,error:b.error})}}const f=i.pickupConfirmations.sent+i.reminders.sent,d=i.pickupConfirmations.errors.length+i.reminders.errors.length;return console.log("📊 Email check results:",{pickupConfirmations:i.pickupConfirmations,reminders:i.reminders,totalSent:f,totalErrors:d}),{...i,totalSent:f,totalErrors:d,message:f>0?`בדיקה הושלמה: ${f} אימיילים נשלחו`:"לא נמצאו אימיילים לשליחה היום"}}catch(a){return console.error("❌ Error in email check:",a),{pickupConfirmations:{sent:0,alreadySent:0,errors:[]},reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:a.message}],message:"שגיאה בבדיקת אימיילים"}}},yH=()=>{var c,f,d,p,g,m,b,_,I,C,D,B,q,Y;const[n,e]=de.useState(!1),[t,r]=de.useState(null),[i,a]=de.useState(null);de.useEffect(()=>{o();const H=setInterval(()=>{new Date().getHours()===9&&o()},60*60*1e3);return()=>clearInterval(H)},[]);const o=async()=>{e(!0),a(null);try{console.log("📧 Starting email check for pickup confirmations and reminders...");const H=await vH();a(H)}catch(H){console.error("❌ Error in email check:",H),a({pickupConfirmations:{sent:0,alreadySent:0,errors:[]},reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:H.message}],message:"שגיאה בבדיקת אימיילים"})}finally{e(!1),r(new Date)}},s=()=>{o()};return y.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[y.jsx("h1",{style:{margin:0,fontSize:"1.8rem"},children:"📧 מערכת אימיילים אוטומטית"}),y.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"אישורי איסוף (יום האיסוף) • תזכורות החזרה (2 ימים לפני)"})]}),y.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[y.jsx("h2",{style:{margin:0,color:"#1f2937"},children:"סטטוס המערכת"}),y.jsx("button",{onClick:s,disabled:n,style:{background:n?"#9ca3af":"#10b981",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:n?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"},children:n?"🔄 בודק...":"🔍 בדוק אימיילים"})]}),t&&y.jsxs("div",{style:{background:"#f3f4f6",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#6b7280"},children:[y.jsx("strong",{children:"בדיקה אחרונה:"})," ",t.toLocaleString("he-IL")]}),i&&y.jsxs("div",{style:{background:i.totalErrors>0?"#fef2f2":i.weekend?"#f0f9ff":"#f0fdf4",border:`1px solid ${i.totalErrors>0?"#fecaca":i.weekend?"#7dd3fc":"#bbf7d0"}`,borderRadius:"8px",padding:"1.5rem"},children:[y.jsx("h3",{style:{margin:"0 0 1rem 0",color:i.totalErrors>0?"#dc2626":i.weekend?"#0369a1":"#059669"},children:i.message}),i.weekend&&y.jsxs("div",{style:{background:"#e0f2fe",border:"1px solid #0284c7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[y.jsx("p",{style:{margin:0,color:"#0369a1",fontWeight:"bold"},children:"🕊️ המערכת לא שולחת אימיילים בימי שישי ושבת מטעמים דתיים"}),y.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0369a1",fontSize:"0.9rem"},children:"אימיילים שאמורים להישלח היום יישלחו ביום ראשון"})]}),!i.weekend&&y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[y.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#059669"},children:"📦 אישורי איסוף (יום האיסוף)"}),y.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["נשלחו: ",y.jsx("strong",{children:((c=i.pickupConfirmations)==null?void 0:c.sent)||0}),y.jsx("br",{}),"כבר נשלחו: ",y.jsx("strong",{children:((f=i.pickupConfirmations)==null?void 0:f.alreadySent)||0}),y.jsx("br",{}),"שגיאות: ",y.jsx("strong",{style:{color:((p=(d=i.pickupConfirmations)==null?void 0:d.errors)==null?void 0:p.length)>0?"#dc2626":"inherit"},children:((m=(g=i.pickupConfirmations)==null?void 0:g.errors)==null?void 0:m.length)||0})]})]}),y.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#f59e0b"},children:"⏰ תזכורות החזרה (2 ימים לפני)"}),y.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["נשלחו: ",y.jsx("strong",{children:((b=i.reminders)==null?void 0:b.sent)||0}),y.jsx("br",{}),"כבר נשלחו: ",y.jsx("strong",{children:((_=i.reminders)==null?void 0:_.alreadySent)||0}),y.jsx("br",{}),"שגיאות: ",y.jsx("strong",{style:{color:((C=(I=i.reminders)==null?void 0:I.errors)==null?void 0:C.length)>0?"#dc2626":"inherit"},children:((B=(D=i.reminders)==null?void 0:D.errors)==null?void 0:B.length)||0})]})]})]}),!i.weekend&&y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#3b82f6"},children:i.totalFound||0}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נמצאו"})]}),y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:i.totalSent||0}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נשלחו"})]}),y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:i.totalErrors||0}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"שגיאות"})]})]}),!i.weekend&&i.totalErrors>0&&y.jsxs("div",{style:{background:"white",border:"1px solid #fecaca",borderRadius:"6px",padding:"1rem"},children:[y.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc2626"},children:"שגיאות:"}),[...(((q=i.pickupConfirmations)==null?void 0:q.errors)||[]).map(H=>({...H,type:"אישור איסוף"})),...(((Y=i.reminders)==null?void 0:Y.errors)||[]).map(H=>({...H,type:"תזכורת"}))].map((H,P)=>y.jsxs("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",marginBottom:"0.25rem"},children:[y.jsxs("strong",{children:["[",H.type,"]"]})," ",H.clientName?`${H.clientName} (${H.email})`:"שגיאה כללית",": ",H.error]},P))]})]})]}),y.jsxs("div",{style:{background:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"12px",padding:"2rem"},children:[y.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#92400e"},children:"🔧 איך המערכת עובדת"}),y.jsxs("ul",{style:{color:"#92400e",paddingRight:"1.5rem"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"אישורי איסוף:"})," נשלחים אוטומטית ביום האיסוף (היום הירוק בלוח השנה)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"תזכורות החזרה:"})," נשלחים אוטומטית 2 ימים לפני תאריך ההחזרה"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"בדיקה יומית:"})," המערכת בודקת אוטומטית כל יום ב-9:00 בבוקר (מלבד שישי ושבת)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"מטעמים דתיים:"})," לא נשלחים אימיילים בימי שישי ושבת"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"מניעת כפילויות:"})," כל אימייל נשלח רק פעם אחת לכל הזמנה"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"בדיקה ידנית:"})," ניתן להפעיל בדיקה ידנית בכל עת באמצעות הכפתור למעלה"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"מעקב מלא:"})," כל האימיילים נרשמים במסד הנתונים למעקב"]})]})]})]})},xH=({item:n,size:e=60})=>{const t=n.imageUrl||(n.images&&n.images.length>0?n.images[0]:null);return t?y.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",overflow:"hidden",flexShrink:0,background:"#f9fafb"},children:y.jsx("img",{src:t,alt:n.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{r.target.parentNode.innerHTML=`
            <div style="
              width: 100%; 
              height: 100%; 
              display: flex; 
              align-items: center; 
              justify-content: center;
              background: #f9fafb;
            ">
              <svg width="${e*.4}" height="${e*.4}" viewBox="0 0 24 24" fill="#9ca3af">
                <path d="M20 7h-3V6a4 4 0 0 0-4-4h-2a4 4 0 0 0-4 4v1H4a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM9 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1H9V6zm8 15H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v11a1 1 0 0 1-1 1z"/>
              </svg>
            </div>
          `}})}):y.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",flexShrink:0},children:y.jsx(Ss,{size:e*.4,style:{color:"#9ca3af"}})})},bH=()=>{var q,Y;const[n,e]=de.useState([]),[t,r]=de.useState([]),[i,a]=de.useState(null),[o,s]=de.useState(""),[c,f]=de.useState(""),[d,p]=de.useState(""),[g,m]=de.useState(!0),[b,_]=de.useState(!1);de.useEffect(()=>{(async()=>{try{m(!0),console.log("🔍 מחפש את כל ההזמנות...");const P=tc(vn(Ot,"orders")),R=(await er(P)).docs.map(V=>({id:V.id,...V.data()}));console.log("📋 כל ההזמנות:",R),console.log("📊 סטטוסים:",R.map(V=>({id:V.id,client:V.clientName,status:V.status}))),console.log("🔍 מחפש הזמנות סגורות...");const M=tc(vn(Ot,"orders"),ll("status","==","closed")),N=(await er(M)).docs.map(V=>({id:V.id,...V.data()}));console.log("✅ הזמנות סגורות:",N),e(N),console.log("🔍 מחפש הזמנות שהוחזרו...");const L=tc(vn(Ot,"orders"),ll("status","==","returned")),X=(await er(L)).docs.map(V=>({id:V.id,...V.data()}));console.log("🔄 הזמנות שהוחזרו:",X)}catch(P){console.error("❌ שגיאה בטעינת ההזמנות:",P)}finally{m(!1)}})()},[]);const I=H=>H?(H.seconds?new Date(H.seconds*1e3):new Date(H)).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"}):"",C=H=>H?(H.seconds?new Date(H.seconds*1e3):new Date(H)).toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",D=H=>{var L;if(!((L=H.returnInspection)!=null&&L.itemInspections))return{totalItemsExpected:0,totalItemsReturned:0,totalItemsNotReturned:0,totalDamagedItems:0,totalLostItems:0};const P=H.returnInspection.itemInspections,S=P.reduce((F,X)=>F+(X.quantityExpected||0),0),R=P.reduce((F,X)=>F+(X.quantityReturned||0),0),M=P.reduce((F,X)=>F+Math.max(0,(X.quantityExpected||0)-(X.quantityReturned||0)),0),T=P.filter(F=>F.condition==="damaged").reduce((F,X)=>F+(X.quantityReturned||0),0),N=P.filter(F=>F.condition==="lost").reduce((F,X)=>F+Math.max(0,(X.quantityExpected||0)-(X.quantityReturned||0)),0);return{totalItemsExpected:S,totalItemsReturned:R,totalItemsNotReturned:M,totalDamagedItems:T,totalLostItems:N}};de.useEffect(()=>{const H=c?new Date(c):null,P=d?new Date(d):null,S=n.filter(R=>{var X,V,z;const M=((X=R.clientName)==null?void 0:X.toLowerCase().includes(o.toLowerCase()))||"",T=((V=R.phone)==null?void 0:V.includes(o))||"",N=M||T,L=(z=R.pickupDate)!=null&&z.seconds?new Date(R.pickupDate.seconds*1e3):new Date(R.pickupDate),F=(!H||L>=H)&&(!P||L<=P);return N&&F});r(S)},[o,c,d,n]);const B=H=>{var M,T;const P=D(H),S=`
      <!DOCTYPE html>
      <html dir="rtl" lang="he">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>דוח השאלה - ${H.clientName}</title>
          <style>
              body { 
                  font-family: Arial, sans-serif; 
                  direction: rtl; 
                  text-align: right;
                  margin: 20px;
                  line-height: 1.6;
                  padding-bottom: 100px;
              }
              .header { 
                  text-align: center; 
                  margin-bottom: 30px;
                  border-bottom: 2px solid #333;
                  padding-bottom: 15px;
              }
              .header h1 {
                  font-size: 24px;
                  color: #2c5aa0;
                  margin: 0 0 5px 0;
              }
              .header h2 {
                  font-size: 20px;
                  color: #333;
                  margin: 0 0 10px 0;
              }
              .info-grid { 
                  display: grid; 
                  grid-template-columns: 1fr 1fr; 
                  gap: 20px; 
                  margin-bottom: 30px;
              }
              .info-item { 
                  margin-bottom: 10px; 
              }
              .label { 
                  font-weight: bold; 
                  color: #333;
              }
              table { 
                  width: 100%; 
                  border-collapse: collapse; 
                  margin-bottom: 30px;
              }
              th, td { 
                  border: 1px solid #ddd; 
                  padding: 8px; 
                  text-align: center;
              }
              th { 
                  background-color: #f5f5f5; 
                  font-weight: bold;
              }
              .summary { 
                  background-color: #f9f9f9; 
                  padding: 20px; 
                  border-radius: 5px;
                  margin-top: 20px;
              }
              .summary h3 {
                  margin-top: 0;
                  color: #2c5aa0;
              }
              
              .download-btn {
                  position: fixed;
                  bottom: 20px;
                  right: 20px;
                  background: linear-gradient(45deg, #2196F3, #21CBF3);
                  color: white;
                  border: none;
                  padding: 15px 25px;
                  border-radius: 50px;
                  cursor: pointer;
                  font-size: 16px;
                  font-weight: bold;
                  box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
                  transition: all 0.3s ease;
                  z-index: 1000;
                  display: flex;
                  align-items: center;
                  gap: 8px;
              }
              
              .download-btn:hover {
                  transform: translateY(-2px);
                  box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
              }
              
              .download-btn:active {
                  transform: translateY(0);
              }
              
              @media print {
                  body { margin: 0; font-size: 14px; }
                  .header { page-break-after: avoid; }
                  .download-btn { display: none !important; }
              }
          </style>
      </head>
      <body>
          <button class="download-btn" onclick="window.print(); return false;">
              📥 הורדת דוח
          </button>
          
          <div class="header">
              <h1>גמ"ח שמחת זקנתי</h1>
              <h2>דוח השאלה - ${H.clientName}</h2>
              <p>נוצר בתאריך: ${new Date().toLocaleDateString("he-IL")}</p>
          </div>
          
          <div class="info-grid">
              <div>
                  <div class="info-item">
                      <span class="label">מתנדבת:</span> ${H.volunteerName}
                  </div>
                  <div class="info-item">
                      <span class="label">טלפון:</span> ${H.phone}
                  </div>
                  <div class="info-item">
                      <span class="label">כתובת:</span> ${H.address}
                  </div>
              </div>
              <div>
                  <div class="info-item">
                      <span class="label">תאריך איסוף:</span> ${I(H.pickupDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">תאריך החזרה:</span> ${I(H.returnDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">סוג אירוע:</span> ${H.eventType}
                  </div>
              </div>
          </div>

          <h3>פריטים בהזמנה</h3>
          <table>
              <thead>
                  <tr>
                      <th>#</th>
                      <th>שם פריט</th>
                      <th>כמות שהושאלה</th>
                      <th>תקין</th>
                      <th>אבד/לא הוחזר</th>
                  </tr>
              </thead>
              <tbody>
                  ${((M=H.items)==null?void 0:M.map((N,L)=>{var Q,oe;const F=(oe=(Q=H.returnInspection)==null?void 0:Q.itemInspections)==null?void 0:oe.find(W=>W.itemId===N.id||W.name===N.name),X=N.quantity,V=(F==null?void 0:F.quantityReturned)||0,z=Math.max(0,X-V);let ne=0,se=z;return F&&V>0&&(F.condition==="good"?ne=V:F.condition==="damaged"?se+=V:ne=V),`
                      <tr>
                          <td>${L+1}</td>
                          <td>${N.name}</td>
                          <td>${X}</td>
                          <td>${ne}</td>
                          <td>${se}</td>
                      </tr>
                    `}).join(""))||'<tr><td colspan="5">אין פריטים</td></tr>'}
              </tbody>
          </table>

          ${H.returnInspection?`
          <div class="summary">
              <h3 style="text-align: center;">סיכום בדיקת החזרה</h3>
              <div style="text-align: center;">
                  <div class="info-item">
                      <span class="label">סה"כ פריטים שהושאלו:</span> ${P.totalItemsExpected}
                  </div>
                  <div class="info-item">
                      <span class="label">סה"כ פריטים שהוחזרו:</span> ${P.totalItemsReturned}
                  </div>
                  <div class="info-item">
                      <span class="label">פריטים שלא הוחזרו:</span> ${P.totalItemsNotReturned}
                  </div>
              </div>
              
              ${(T=H.returnInspection.summary)!=null&&T.managerNotes?`
              <div class="info-item" style="margin-top: 20px; text-align: center;">
                  <span class="label">הערות מנהל:</span><br>
                  ${H.returnInspection.summary.managerNotes}
              </div>
              `:""}
          </div>
          `:""}
      </body>
      </html>
    `,R=window.open("","_blank","width=800,height=900,scrollbars=yes,resizable=yes");R.document.write(S),R.document.close(),R.focus()};return g?y.jsx("div",{className:"flex items-center justify-center min-h-screen",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-600",children:"טוען היסטוריית השאלות..."})]})}):y.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[y.jsx("style",{children:`
        @media (max-width: 768px) {
          .date-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            background: white !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            text-align: center !important;
            direction: ltr !important;
            width: 100% !important;
            box-sizing: border-box !important;
            cursor: pointer !important;
            letter-spacing: 1px !important;
          }
          
          .date-input::-webkit-calendar-picker-indicator {
            opacity: 0 !important;
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            height: 100% !important;
            cursor: pointer !important;
            background: transparent !important;
          }
          
          .date-input::-webkit-inner-spin-button,
          .date-input::-webkit-outer-spin-button {
            opacity: 0 !important;
            -webkit-appearance: none !important;
            margin: 0 !important;
          }
        }
      `}),y.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"1.5rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[y.jsxs("div",{style:{textAlign:window.innerWidth<768?"center":"right",flex:"1"},children:[y.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",margin:0,marginBottom:"0.5rem"},children:"📚 היסטוריית השאלות"}),y.jsx("p",{style:{fontSize:"0.95rem",opacity:.9,margin:0},children:"כל ההזמנות שהושלמו עם פרטי בדיקת החזרה"})]}),y.jsxs("button",{onClick:()=>_(!0),style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",backdropFilter:"blur(10px)",whiteSpace:"nowrap"},onMouseEnter:H=>{H.currentTarget.style.background="rgba(255, 255, 255, 0.3)",H.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:H=>{H.currentTarget.style.background="rgba(255, 255, 255, 0.2)",H.currentTarget.style.transform="translateY(0)"},children:[y.jsx(QF,{size:20}),"📊 סטטיסטיקות"]})]}),!i&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[y.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem",alignItems:window.innerWidth<768?"stretch":"end"},children:[y.jsxs("div",{style:{flex:window.innerWidth<768?"none":"2"},children:[y.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[y.jsx(FS,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"חיפוש לפי שם לקוח או טלפון"]}),y.jsx("input",{type:"text",value:o,onChange:H=>s(H.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"},placeholder:"הקלד שם או טלפון..."})]}),y.jsxs("div",{style:{flex:"1"},children:[y.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[y.jsx(fd,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"מתאריך"]}),y.jsx("input",{type:"date",value:c,onChange:H=>f(H.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]}),y.jsxs("div",{style:{flex:"1"},children:[y.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[y.jsx(fd,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"עד תאריך"]}),y.jsx("input",{type:"date",value:d,onChange:H=>p(H.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]})]}),y.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem",color:"#374151"},children:["נמצאו ",t.length," השאלות מתוך ",n.length,' סה"כ']})]}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":window.innerWidth<1024?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:window.innerWidth<768?"1rem":"1.5rem"},children:t.length===0?y.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[y.jsx(Ss,{size:48,style:{color:"#9ca3af",marginBottom:"1rem"}}),y.jsx("h3",{style:{fontSize:"1.25rem",color:"#6b7280",margin:0},children:"לא נמצאו השאלות"}),y.jsx("p",{style:{color:"#9ca3af",margin:"0.5rem 0 0 0"},children:"נסה לשנות את פרמטרי החיפוש"})]}):t.map(H=>{var P;return y.jsxs("div",{onClick:()=>a(H),style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box"},onMouseEnter:S=>{S.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",S.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:S=>{S.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",S.currentTarget.style.transform="translateY(0)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[y.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[y.jsx("h3",{style:{fontSize:window.innerWidth<768?"1rem":"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937",wordBreak:"break-word"},children:H.clientName}),y.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0",display:"flex",alignItems:"center",gap:"0.25rem"},children:[y.jsx(VS,{size:window.innerWidth<768?12:14}),H.volunteerName]})]}),y.jsx("div",{style:{background:"#10b981",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:window.innerWidth<768?"0.6rem":"0.75rem",fontWeight:"bold",whiteSpace:"nowrap"},children:"הושלם"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem",fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(nd,{size:window.innerWidth<768?12:14}),y.jsx("span",{style:{wordBreak:"break-all"},children:H.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(yx,{size:window.innerWidth<768?12:14}),y.jsxs("span",{style:{fontSize:window.innerWidth<768?"0.7rem":"0.875rem"},children:[I(H.pickupDate)," ← ",I(H.returnDate)]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(Ss,{size:window.innerWidth<768?12:14}),(P=H.items)==null?void 0:P.reduce((S,R)=>S+R.quantity,0)," פריטים"]})]})]},H.id)})})]}),i&&y.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e5e7eb",flexWrap:"wrap",gap:"1rem"},children:[y.jsxs("div",{children:[y.jsxs("h2",{style:{fontSize:window.innerWidth<768?"1.25rem":"2rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:["השאלה - ",i.clientName]}),y.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:["הושלמה ב-",C((q=i.returnInspection)==null?void 0:q.completedAt)]})]}),y.jsxs("button",{onClick:()=>a(null),style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:window.innerWidth<768?"0.875rem":"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(HF,{size:16}),"חזרה לרשימה"]})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"לקוח"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.clientName})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"מתנדבת"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.volunteerName})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.phone})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.address})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),y.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:[I(i.pickupDate)," ← ",I(i.returnDate)]})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.eventType})]})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#1f2937"},children:"📦 פריטים וסטטוס החזרה"}),y.jsx("div",{style:{display:"grid",gap:"1rem"},children:(Y=i.items)==null?void 0:Y.map((H,P)=>{var R,M;const S=(M=(R=i.returnInspection)==null?void 0:R.itemInspections)==null?void 0:M.find(T=>T.itemId===H.id||T.name===H.name);return y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",flexWrap:window.innerWidth<768?"wrap":"nowrap",gap:"0.5rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:"1",minWidth:"200px"},children:[y.jsx(xH,{item:H,size:window.innerWidth<768?50:60}),y.jsxs("div",{children:[y.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:H.name}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["הושאל: ",H.quantity," | תקין: ",(()=>{const T=(S==null?void 0:S.quantityReturned)||0;return S&&T>0&&S.condition==="good"||S&&T>0&&S.condition!=="damaged"?T:0})()," | אבד/פגום: ",(()=>{const T=H.quantity,N=(S==null?void 0:S.quantityReturned)||0;let F=Math.max(0,T-N);return S&&N>0&&S.condition==="damaged"&&(F+=N),F})()]})]})]}),y.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const T=H.quantity,N=(S==null?void 0:S.quantityReturned)||0;let F=Math.max(0,T-N);return S&&N>0&&S.condition==="damaged"&&(F+=N),F===0?y.jsxs(y.Fragment,{children:[y.jsx(dd,{size:16,style:{color:"#10b981"}}),y.jsx("span",{style:{color:"#10b981",fontWeight:"bold",fontSize:"0.875rem"},children:"הכל תקין"})]}):y.jsxs(y.Fragment,{children:[y.jsx(P1,{size:16,style:{color:"#ef4444"}}),y.jsxs("span",{style:{color:"#ef4444",fontWeight:"bold",fontSize:"0.875rem"},children:[F," חסר/פגום"]})]})})()})]},P)})})]}),y.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:y.jsxs("button",{onClick:()=>B(i),style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"1rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",fontSize:"1.2rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",minWidth:window.innerWidth<768?"100%":"250px",justifyContent:"center"},onMouseEnter:H=>{H.currentTarget.style.transform="translateY(-2px)",H.currentTarget.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.4)"},onMouseLeave:H=>{H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:[y.jsx(cU,{size:20}),"🖨️ הדפס דוח עברית"]})})]}),y.jsx(nH,{showStatsModal:b,setShowStatsModal:_,loanHistory:n}),y.jsx(yH,{})]})},wH=()=>{const{user:n}=cc(),[e,t]=de.useState(!1),[r,i]=de.useState(!1),[a,o]=de.useState("phone"),[s,c]=de.useState("fade-in"),f=de.useRef(null),d="054-257-5886",p="0542575886",g="054-4473-388",m="0544473388",b="972542575886";if(de.useEffect(()=>{const q=Y=>{f.current&&!f.current.contains(Y.target)&&e&&D()};return e&&document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[e]),n&&n.role!=="User")return null;const _=()=>{window.open(`tel:${p}`,"_self")},I=()=>{window.open(`tel:${m}`,"_self")},C=()=>{const q=encodeURIComponent("שלום, אני מעוניין לקבל מידע נוסף על השירות"),Y=`https://wa.me/${b}?text=${q}`;window.open(Y,"_blank")},D=()=>{i(!0),c("fade-out"),setTimeout(()=>{o("phone"),c("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},B=()=>{e?D():(t(!0),c("fade-out"),setTimeout(()=>{o("close"),c("fade-in")},150))};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,children:`
        .contact-bubble {
          position: fixed;
          bottom: 20px;
          right: 20px;
          z-index: 9999;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .bubble-main {
          background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
          color: white;
          border-radius: 50px;
          box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          cursor: pointer;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          border: none;
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 12px 20px;
          font-weight: 500;
          font-size: 14px;
          overflow: hidden;
          position: relative;
        }

        .bubble-main:hover {
          transform: translateY(-2px);
          box-shadow: 0 12px 35px rgba(37, 99, 235, 0.4);
          background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
        }

        .bubble-main.collapsed {
          width: 56px;
          height: 56px;
          padding: 0;
          justify-content: center;
          border-radius: 50%;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .bubble-content {
          display: flex;
          align-items: center;
          gap: 8px;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .bubble-content.fade-out {
          opacity: 0;
          transform: scale(0.8);
        }

        .bubble-content.fade-in {
          opacity: 1;
          transform: scale(1);
        }

        .expanded-menu {
          position: absolute;
          bottom: 70px;
          right: 0;
          background: white;
          border-radius: 12px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
          padding: 16px;
          min-width: 260px;
          border: 1px solid #e5e7eb;
          animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(10px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        @keyframes slideDown {
          from {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
          to {
            opacity: 0;
            transform: translateY(10px) scale(0.95);
          }
        }

        .expanded-menu.closing {
          animation: slideDown 0.25s ease forwards;
        }

        .menu-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px;
          border-radius: 8px;
          cursor: pointer;
          transition: background-color 0.2s;
          border: none;
          width: 100%;
          text-align: right;
          background: none;
          color: #374151;
          font-size: 14px;
          margin-bottom: 4px;
        }

        .menu-item:hover {
          background-color: #f3f4f6;
        }

        .menu-item.phone {
          color: #2563eb;
        }

        .menu-item.phone2 {
          color: #7c3aed;
        }

        .menu-item.whatsapp {
          color: #10b981;
        }

        .menu-header {
          text-align: center;
          margin-bottom: 12px;
          color: #1f2937;
          font-weight: 600;
          font-size: 16px;
        }

        .pulse {
          animation: pulse 2s infinite;
        }

        @keyframes pulse {
          0% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          }
          50% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.5);
          }
          100% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          }
        }

        @media (max-width: 768px) {
          .contact-bubble {
            bottom: 80px;
            right: 15px;
          }
          
          .expanded-menu {
            width: 240px;
            right: 10px;
            bottom: 65px;
            padding: 14px;
            border-radius: 10px;
          }
          
          .bubble-main {
            padding: 12px 18px;
            font-size: 14px;
            min-height: 48px;
          }
          
          .bubble-main.collapsed {
            width: 56px;
            height: 56px;
            padding: 0;
          }
          
          .menu-item {
            padding: 12px;
            font-size: 14px;
            min-height: 50px;
          }
          
          .menu-header {
            font-size: 16px;
            margin-bottom: 12px;
          }
        }
      `}),y.jsxs("div",{className:"contact-bubble",ref:f,children:[(e||r)&&y.jsxs("div",{className:`expanded-menu ${r?"closing":""}`,dir:"rtl",children:[y.jsx("div",{className:"menu-header",children:"צור קשר"}),y.jsxs("button",{onClick:_,className:"menu-item phone",children:[y.jsx(nd,{size:20}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:"500"},children:"לתיאום והגעה"}),y.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:d})]})]}),y.jsxs("button",{onClick:I,className:"menu-item phone2",children:[y.jsx(nd,{size:20}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:"500"},children:'למנהלת הגמ"ח'}),y.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:g})]})]}),y.jsxs("button",{onClick:C,className:"menu-item whatsapp",children:[y.jsx(pU,{size:20}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:"500"},children:"WhatsApp"}),y.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"שלח הודעה מהירה"})]})]})]}),y.jsx("button",{onClick:B,className:`bubble-main ${e?"":"collapsed pulse"}`,"aria-label":"צור קשר",children:y.jsx("div",{className:`bubble-content ${s}`,children:a==="close"?y.jsxs(y.Fragment,{children:[y.jsx(Fm,{size:20}),y.jsx("span",{children:"סגור"})]}):y.jsx(nd,{size:24})})})]})]})},_H=()=>{const[n,e]=de.useState(""),t="054-4773388",r=async(o,s)=>{try{await navigator.clipboard.writeText(o),e(s),setTimeout(()=>e(""),2e3)}catch(c){console.error("Failed to copy text: ",c)}},i=()=>{const o=t.replace(/-/g,"");r(o,"bit-app"),setTimeout(()=>{if(confirm(`המספר הועתק! 📋

📱 הנחיות לתרומה בביט:
1. פתח את אפליקציית ביט
2. לחץ על "העבר כסף"
3. בחר "למספר טלפון"
4. הדבק את המספר (או הקלד: `+t+`)
5. הכנס סכום לתרומה
6. אשר את התרומה 💚

לחץ "אישור" כדי לפתוח את ביט עכשיו`))try{window.location.href="bit://"}catch{window.open("https://bit.co.il/","_blank")}},500)},a=()=>{const o=t.replace(/-/g,"");r(o,"paybox-app"),setTimeout(()=>{alert(`המספר הועתק! 📋

📱 הנחיות לתרומה בפייבוקס:
1. פתח את אפליקציית פייבוקס
2. לחץ על "שלח כסף"
3. בחר "למספר טלפון"
4. הדבק את המספר (או הקלד: `+t+`)
5. הכנס סכום לתרומה
6. אשר את התרומה 💜

המספר כבר הועתק ומוכן להדבקה!`)},500)};return y.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",padding:"2rem 1rem",direction:"rtl"},children:[y.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",backgroundColor:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{background:"linear-gradient(135deg, #d97706 0%, #c2410c 100%)",padding:"3rem 2rem",textAlign:"center",color:"white"},children:[y.jsx("div",{style:{fontSize:"4rem"},children:"❤️"}),y.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",margin:"0 0 1rem 0",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:'תרומות לגמ"ח'}),y.jsx("p",{style:{fontSize:"1.2rem",opacity:"0.95",margin:0,fontWeight:"700"},children:"עזרו לנו להמשיך לעזור לכם"})]}),y.jsxs("div",{style:{padding:"3rem 2rem"},children:[y.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"2rem",borderRadius:"15px",marginBottom:"3rem",border:"2px solid #e9ecef"},children:[y.jsx("h2",{style:{fontSize:"1.5rem",color:"#2c3e50",marginBottom:"1rem",textAlign:"center"},children:'🏠 הגמ"ח נשען על תרומות בלבד'}),y.jsx("p",{style:{fontSize:"1.1rem",lineHeight:"1.6",color:"#495057",textAlign:"center",margin:0},children:'עם החזרת הציוד נשמח לתרומתכם על מנת שנוכל להמשיך להחזיק ולחדש את הציוד בגמ"ח לטובת כולנו.'})]}),y.jsx("h3",{style:{fontSize:"2rem",textAlign:"center",marginBottom:"2rem",color:"#2c3e50"},children:"🎯 אפשרויות לתרומה"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[y.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #1d4ed8",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(29, 78, 216, 0.2)"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 8px 25px rgba(29, 78, 216, 0.3)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(29, 78, 216, 0.2)"},children:[y.jsx(SU,{size:48,color:"#1d4ed8",style:{marginBottom:"1rem"}}),y.jsx("h4",{style:{fontSize:"1.3rem",color:"#1d4ed8",marginBottom:"1rem",fontWeight:"700"},children:"ביט / פייבוקס"}),y.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",marginBottom:"1rem"},children:[y.jsx("p",{style:{fontSize:"1.2rem",fontWeight:"800",color:"#1d4ed8",margin:"0 0 0.5rem 0"},children:t}),y.jsxs("button",{onClick:()=>r(t,"bit"),style:{background:"#1d4ed8",border:"2px solid #1d4ed8",color:"white",padding:"8px 15px",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",margin:"0 auto 10px auto",fontWeight:"600"},children:[n==="bit"?y.jsx(jS,{size:16}):y.jsx(sU,{size:16}),n==="bit"?"הועתק!":"העתק מספר"]})]}),y.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[y.jsx("button",{style:{background:"linear-gradient(135deg, #4a90e2 0%, #357abd 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:o=>o.target.style.transform="scale(1.05)",onMouseLeave:o=>o.target.style.transform="scale(1)",onClick:i,children:"🤍 ביט"}),y.jsx("button",{style:{background:"linear-gradient(135deg, #0a84ff 0%, #005cbf 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:o=>o.target.style.transform="scale(1.05)",onMouseLeave:o=>o.target.style.transform="scale(1)",onClick:a,children:"🤍 פייבוקס"})]})]}),y.jsxs("div",{style:{backgroundColor:"#fff",border:"2px solid #27ae60",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(39, 174, 96, 0.1)"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 8px 25px rgba(39, 174, 96, 0.2)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(39, 174, 96, 0.1)"},children:[y.jsx(YF,{size:48,color:"#27ae60",style:{marginBottom:"1rem"}}),y.jsx("h4",{style:{fontSize:"1.3rem",color:"#27ae60",marginBottom:"1rem",fontWeight:"600"},children:"תרומה במזומן"}),y.jsx("p",{style:{color:"#7f8c8d",marginBottom:"1.5rem",fontSize:"1rem",fontWeight:"600",lineHeight:"1.4"},children:'למתנדבות הגמ"ח בעת החזרת הציוד'}),y.jsx("div",{style:{display:"flex",justifyContent:"center"},children:y.jsx("div",{style:{background:"linear-gradient(135deg, #27ae60 0%, #229954 100%)",color:"white",padding:"12px 24px",borderRadius:"25px",fontSize:"1rem",fontWeight:"600"},children:"💰 בעת החזרה"})})]})]}),y.jsxs("div",{style:{background:"linear-gradient(135deg, #d97706 0%, #c2410c 100%)",padding:"2.5rem",borderRadius:"20px",textAlign:"center",color:"white",boxShadow:"0 10px 30px rgba(217, 119, 6, 0.3)"},children:[y.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"1rem",fontWeight:"600"},children:"🙏 תודה מראש"}),y.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"1rem",opacity:"0.95"},children:"התרומה שלכם עוזרת לנו להמשיך לספק שירות איכותי לקהילה"}),y.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"🎉 נתראה בשמחות!"})]})]})]}),y.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        
        @media (max-width: 768px) {
          h1 {
            font-size: 2rem !important;
          }
          
          h3 {
            font-size: 1.5rem !important;
          }
          
          .donation-cards {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})},AH=()=>{const n=window.innerWidth<=768,e={maxWidth:n?"100%":"900px",width:"100%",margin:n?"0":"20px auto",padding:n?"10px":"40px",backgroundColor:"#ffffff",borderRadius:n?"0":"8px",boxShadow:n?"none":"0 2px 8px rgba(0, 0, 0, 0.08)",fontFamily:"system-ui, -apple-system, sans-serif",direction:"rtl",lineHeight:n?"1.6":"1.7",boxSizing:"border-box"},t={textAlign:"center",marginBottom:n?"30px":"50px",padding:n?"20px 15px":"30px 20px",backgroundColor:"#fafbfc",borderRadius:"6px",border:"3px solid #718096",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.1)":"0 4px 12px rgba(0, 0, 0, 0.12)"},r={fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"600",color:"#1a202c",marginBottom:"8px",lineHeight:"1.2"},i={fontSize:"clamp(14px, 3.5vw, 18px)",color:"#4a5568",fontWeight:"400",margin:"0"},a={marginBottom:n?"25px":"40px",padding:n?"20px 15px":"32px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"2px solid #a0aec0":"3px solid #a0aec0",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 4px 12px rgba(0, 0, 0, 0.12)"},o={fontSize:"clamp(18px, 4vw, 24px)",fontWeight:"600",color:"#2d3748",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},s={display:"flex",alignItems:"flex-start",marginBottom:n?"20px":"24px",padding:n?"15px":"24px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:n?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",gap:n?"12px":"20px"},c={backgroundColor:"#4299e1",color:"white",borderRadius:"50%",width:n?"32px":"36px",height:n?"32px":"36px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:n?"14px":"16px",flexShrink:0,minWidth:n?"32px":"36px"},f={flex:1,fontSize:"clamp(14px, 3.5vw, 16px)",color:"#4a5568",lineHeight:"1.5",minWidth:0},d={backgroundColor:"#f7fafc",border:n?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:n?"15px":"24px",marginBottom:n?"15px":"20px",textAlign:"center",boxShadow:n?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},p={backgroundColor:"#fffaf0",border:n?"2px solid #b7791f":"3px solid #b7791f",borderRadius:"8px",padding:n?"15px":"24px",marginBottom:n?"15px":"20px",boxShadow:n?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},g={padding:n?"15px":"20px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:n?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",marginBottom:n?"15px":"0"},m={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"15px",width:"100%"},b={display:"flex",flexDirection:"column",gap:"15px",width:"100%"},_={fontSize:"clamp(16px, 4vw, 20px)",marginLeft:"4px"};return y.jsxs("div",{style:e,children:[y.jsxs("div",{style:t,children:[y.jsxs("h1",{style:r,children:[y.jsx("span",{style:_,children:"📋"}),"נוהל השאלה"]}),y.jsx("p",{style:i,children:'שואלים יקרים - אנא קראו בעיון את נוהל הגמ"ח'})]}),y.jsxs("div",{style:{...a,backgroundColor:"#f8fafc",border:n?"1px solid #e2e8f0":"4px solid #2d3748",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 6px 16px rgba(45, 55, 72, 0.15)"},children:[y.jsxs("h2",{style:o,children:[y.jsx("span",{style:_,children:"🔄"}),"התהליך המלא - איך זה עובד?"]}),y.jsxs("div",{style:s,children:[y.jsx("div",{style:c,children:"1"}),y.jsxs("div",{style:f,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"הזמנה ורישום בלוח:"}),y.jsx("br",{}),'מתקשרים/מגיעים לגמ"ח בזמני הפתיחה ומשריינים תאריך לארוע. רושמים אתכם ביומן השמחות לפי סדר הרישום.',y.jsx("br",{}),y.jsx("strong",{children:"הזמנת רשימת ציוד:"})," משריינים עם המתנדבות רשימה של הציוד הנדרש ומסכמים מתי לקחת."]})]}),y.jsxs("div",{style:s,children:[y.jsx("div",{style:c,children:"2"}),y.jsxs("div",{style:f,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"איסוף הציוד:"}),y.jsx("br",{}),"מגיעים לקחת את הציוד שהוזמן מראש.",y.jsx("strong",{style:{color:"#e53e3e"},children:" חשוב להיצמד לרשימה"})," - זה מקל על המתנדבות לתת שירות לכולם."]})]}),y.jsxs("div",{style:s,children:[y.jsx("div",{style:c,children:"3"}),y.jsxs("div",{style:f,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"החזרת הציוד:"}),y.jsx("br",{}),"לאחר הארוע מחזירים את הציוד. המתנדבות יבדקו את ההחזרה וידריכו איך להחזיר הכל למקומו."]})]}),y.jsx("div",{style:d,children:y.jsxs("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",margin:0,fontWeight:"500",color:"#2d3748"},children:["🏆 ",y.jsx("strong",{children:"עדיפויות:"})," ההשאלה היא לפי סדר הרישום - מי שנרשם ראשון לתאריך מסוים, משאיל ראשון!"]})})]}),y.jsxs("div",{style:a,children:[y.jsxs("h2",{style:o,children:[y.jsx("span",{style:_,children:"📝"}),"כללים חשובים לזכור"]}),y.jsxs("div",{style:n?b:m,children:[y.jsxs("div",{style:g,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"⏰ זמני פתיחה:"}),y.jsx("br",{}),'הגמ"ח פתוח רק בשעות המפורסמות. הטלפון זמין בשעות הפתיחה.',y.jsx("br",{}),y.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"המתנדבות עסוקות בנתינת שירות - הן עונות כשהן פנויות, אנא האזרו בסבלנות."})]}),y.jsxs("div",{style:g,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"📅 החזרה בזמן:"}),y.jsx("br",{}),"הקפידו להחזיר את הציוד ביום שנקבע מראש."]}),y.jsxs("div",{style:g,children:[y.jsx("strong",{style:{color:"#e53e3e",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"🚗 איסור חמור:"}),y.jsx("br",{}),"אין לשמור חפצים ברכב לפני ואחרי האירוע!"]}),y.jsxs("div",{style:g,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"📸 המלצה:"}),y.jsx("br",{}),"צלמו את החפצים שלוקחים כדי לזכור מה להחזיר.",y.jsx("br",{}),y.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"החפצים יקרים ומאוד עדינים - אנא שימרו עליהם כשלכם."})]})]})]}),y.jsxs("div",{style:n?b:m,children:[y.jsxs("div",{style:d,children:[y.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[y.jsx("span",{style:_,children:"💝"}),"תרומות"]}),y.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:'הגמ"ח מאפשר השאלה ללא תשלום. בכדי שנוכל להרחיב ולהעשיר אותו נשמח מאוד לתרומתכם.'})]}),y.jsxs("div",{style:p,children:[y.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[y.jsx("span",{style:_,children:"🔧"}),"במקרה של נזק"]}),y.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:"אם נגרם נזק בטעות - הפנו את תשומת ליבנו ונאמר כמה לשלם בכדי שנוכל לקנות חדש."})]})]}),y.jsxs("div",{style:a,children:[y.jsxs("h2",{style:o,children:[y.jsx("span",{style:_,children:"🧽"}),"הוראות ניקוי והחזרה"]}),y.jsxs("div",{style:n?b:m,children:[y.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[y.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"🧺"}),y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"מפות"}),y.jsx("br",{}),y.jsxs("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:["נקיות, מקופלות ויבשות",y.jsx("br",{}),"(מסיר כתמים לפני כביסה)",y.jsx("br",{}),y.jsx("em",{children:"עדיף לייבש בשמש, אם לא - במייבש"})]})]}),y.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[y.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"🕯️"}),y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"מעמדי נרות"}),y.jsx("br",{}),y.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"נקיים משעווה"})]}),y.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[y.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:"☕"}),y.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"ערכת קפה ומגשים"}),y.jsx("br",{}),y.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"חובה לשטוף ולנגב"})]})]})]}),y.jsxs("div",{style:{...d,marginTop:n?"30px":"40px"},children:[y.jsx("h3",{style:{color:"#2d3748",fontSize:"clamp(18px, 4vw, 20px)",marginBottom:"8px",fontWeight:"600"},children:"מזל טוב, שפע ברכה ושמחה"}),y.jsx("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",fontStyle:"italic",margin:0,color:"#4a5568"},children:"תודה על שיתוף הפעולה ועל שמירת הכללים"})]})]})},SH=()=>y.jsxs(wS,{children:[y.jsx(zL,{}),y.jsxs(tT,{children:[y.jsx(Xa,{path:"/",element:y.jsx(qL,{})}),y.jsx(Xa,{path:"/login",element:y.jsx(HL,{})}),y.jsx(Xa,{path:"/register",element:y.jsx(WL,{})}),y.jsx(Xa,{path:"/catalog",element:y.jsx(mV,{})}),y.jsx(Xa,{path:"/donations",element:y.jsx(_H,{})}),y.jsx(Xa,{path:"/borrowing-guidelines",element:y.jsx(AH,{})}),y.jsx(Xa,{path:"/request",element:y.jsx(DU,{})}),y.jsx(Xa,{path:"/my-orders",element:y.jsx(PU,{})}),y.jsx(Xa,{path:"/requests",element:y.jsx(OU,{})}),y.jsx(Xa,{path:"/new-loan",element:y.jsx(NU,{})}),y.jsx(Xa,{path:"/calendar",element:y.jsx(XU,{})}),y.jsx(Xa,{path:"/manage-product",element:y.jsx(dV,{})}),y.jsx(Xa,{path:"/manage-users",element:y.jsx(hV,{})}),y.jsx(Xa,{path:"/history",element:y.jsx(bH,{})})]}),y.jsx(wH,{})]});uI.createRoot(document.getElementById("root")).render(y.jsx(Pn.StrictMode,{children:y.jsx(wS,{children:y.jsx(ET,{children:y.jsx(SH,{})})})}));export{lr as _,EH as c,eA as g};
