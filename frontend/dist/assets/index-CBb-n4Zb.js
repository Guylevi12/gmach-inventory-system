(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var xH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var X2={exports:{}},w0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function eI(){if(ww)return w0;ww=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return w0.Fragment=e,w0.jsx=t,w0.jsxs=t,w0}var _w;function tI(){return _w||(_w=1,X2.exports=eI()),X2.exports}var y=tI(),K2={exports:{}},an={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function nI(){if(Aw)return an;Aw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(X){return X===null||typeof X!="object"?null:(X=p&&X[p]||X["@@iterator"],typeof X=="function"?X:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function I(X,ge,G){this.props=X,this.context=ge,this.refs=_,this.updater=G||m}I.prototype.isReactComponent={},I.prototype.setState=function(X,ge){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ge,"setState")},I.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function C(){}C.prototype=I.prototype;function N(X,ge,G){this.props=X,this.context=ge,this.refs=_,this.updater=G||m}var j=N.prototype=new C;j.constructor=N,b(j,I.prototype),j.isPureReactComponent=!0;var q=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function P(X,ge,G,Z,ne,ae){return G=ae.ref,{$$typeof:n,type:X,key:ge,ref:G!==void 0?G:null,props:ae}}function E(X,ge){return P(X.type,ge,void 0,void 0,void 0,X.props)}function R(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function L(X){var ge={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(G){return ge[G]})}var T=/\/+/g;function k(X,ge){return typeof X=="object"&&X!==null&&X.key!=null?L(""+X.key):ge.toString(36)}function B(){}function V(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(B,B):(X.status="pending",X.then(function(ge){X.status==="pending"&&(X.status="fulfilled",X.value=ge)},function(ge){X.status==="pending"&&(X.status="rejected",X.reason=ge)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function Q(X,ge,G,Z,ne){var ae=typeof X;(ae==="undefined"||ae==="boolean")&&(X=null);var pe=!1;if(X===null)pe=!0;else switch(ae){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(X.$$typeof){case n:case e:pe=!0;break;case h:return pe=X._init,Q(pe(X._payload),ge,G,Z,ne)}}if(pe)return ne=ne(X),pe=Z===""?"."+k(X,0):Z,q(ne)?(G="",pe!=null&&(G=pe.replace(T,"$&/")+"/"),Q(ne,ge,G,"",function(Ie){return Ie})):ne!=null&&(R(ne)&&(ne=E(ne,G+(ne.key==null||X&&X.key===ne.key?"":(""+ne.key).replace(T,"$&/")+"/")+pe)),ge.push(ne)),1;pe=0;var Ae=Z===""?".":Z+":";if(q(X))for(var _e=0;_e<X.length;_e++)Z=X[_e],ae=Ae+k(Z,_e),pe+=Q(Z,ge,G,ae,ne);else if(_e=g(X),typeof _e=="function")for(X=_e.call(X),_e=0;!(Z=X.next()).done;)Z=Z.value,ae=Ae+k(Z,_e++),pe+=Q(Z,ge,G,ae,ne);else if(ae==="object"){if(typeof X.then=="function")return Q(V(X),ge,G,Z,ne);throw ge=String(X),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.")}return pe}function z(X,ge,G){if(X==null)return X;var Z=[],ne=0;return Q(X,Z,"","",function(ae){return ge.call(G,ae,ne++)}),Z}function U(X){if(X._status===-1){var ge=X._result;ge=ge(),ge.then(function(G){(X._status===0||X._status===-1)&&(X._status=1,X._result=G)},function(G){(X._status===0||X._status===-1)&&(X._status=2,X._result=G)}),X._status===-1&&(X._status=0,X._result=ge)}if(X._status===1)return X._result.default;throw X._result}var te=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function oe(){}return an.Children={map:z,forEach:function(X,ge,G){z(X,function(){ge.apply(this,arguments)},G)},count:function(X){var ge=0;return z(X,function(){ge++}),ge},toArray:function(X){return z(X,function(ge){return ge})||[]},only:function(X){if(!R(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},an.Component=I,an.Fragment=t,an.Profiler=i,an.PureComponent=N,an.StrictMode=r,an.Suspense=c,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,an.__COMPILER_RUNTIME={__proto__:null,c:function(X){return Y.H.useMemoCache(X)}},an.cache=function(X){return function(){return X.apply(null,arguments)}},an.cloneElement=function(X,ge,G){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Z=b({},X.props),ne=X.key,ae=void 0;if(ge!=null)for(pe in ge.ref!==void 0&&(ae=void 0),ge.key!==void 0&&(ne=""+ge.key),ge)!H.call(ge,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&ge.ref===void 0||(Z[pe]=ge[pe]);var pe=arguments.length-2;if(pe===1)Z.children=G;else if(1<pe){for(var Ae=Array(pe),_e=0;_e<pe;_e++)Ae[_e]=arguments[_e+2];Z.children=Ae}return P(X.type,ne,void 0,void 0,ae,Z)},an.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},an.createElement=function(X,ge,G){var Z,ne={},ae=null;if(ge!=null)for(Z in ge.key!==void 0&&(ae=""+ge.key),ge)H.call(ge,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ne[Z]=ge[Z]);var pe=arguments.length-2;if(pe===1)ne.children=G;else if(1<pe){for(var Ae=Array(pe),_e=0;_e<pe;_e++)Ae[_e]=arguments[_e+2];ne.children=Ae}if(X&&X.defaultProps)for(Z in pe=X.defaultProps,pe)ne[Z]===void 0&&(ne[Z]=pe[Z]);return P(X,ae,void 0,void 0,null,ne)},an.createRef=function(){return{current:null}},an.forwardRef=function(X){return{$$typeof:s,render:X}},an.isValidElement=R,an.lazy=function(X){return{$$typeof:h,_payload:{_status:-1,_result:X},_init:U}},an.memo=function(X,ge){return{$$typeof:f,type:X,compare:ge===void 0?null:ge}},an.startTransition=function(X){var ge=Y.T,G={};Y.T=G;try{var Z=X(),ne=Y.S;ne!==null&&ne(G,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(oe,te)}catch(ae){te(ae)}finally{Y.T=ge}},an.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},an.use=function(X){return Y.H.use(X)},an.useActionState=function(X,ge,G){return Y.H.useActionState(X,ge,G)},an.useCallback=function(X,ge){return Y.H.useCallback(X,ge)},an.useContext=function(X){return Y.H.useContext(X)},an.useDebugValue=function(){},an.useDeferredValue=function(X,ge){return Y.H.useDeferredValue(X,ge)},an.useEffect=function(X,ge,G){var Z=Y.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(X,ge)},an.useId=function(){return Y.H.useId()},an.useImperativeHandle=function(X,ge,G){return Y.H.useImperativeHandle(X,ge,G)},an.useInsertionEffect=function(X,ge){return Y.H.useInsertionEffect(X,ge)},an.useLayoutEffect=function(X,ge){return Y.H.useLayoutEffect(X,ge)},an.useMemo=function(X,ge){return Y.H.useMemo(X,ge)},an.useOptimistic=function(X,ge){return Y.H.useOptimistic(X,ge)},an.useReducer=function(X,ge,G){return Y.H.useReducer(X,ge,G)},an.useRef=function(X){return Y.H.useRef(X)},an.useState=function(X){return Y.H.useState(X)},an.useSyncExternalStore=function(X,ge,G){return Y.H.useSyncExternalStore(X,ge,G)},an.useTransition=function(){return Y.H.useTransition()},an.version="19.1.0",an}var Ew;function Zg(){return Ew||(Ew=1,K2.exports=nI()),K2.exports}var fe=Zg();const Mn=Z4(fe);var Q2={exports:{}},_0={},Z2={exports:{}},J2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function rI(){return Sw||(Sw=1,function(n){function e(z,U){var te=z.length;z.push(U);e:for(;0<te;){var oe=te-1>>>1,X=z[oe];if(0<i(X,U))z[oe]=U,z[te]=X,te=oe;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var U=z[0],te=z.pop();if(te!==U){z[0]=te;e:for(var oe=0,X=z.length,ge=X>>>1;oe<ge;){var G=2*(oe+1)-1,Z=z[G],ne=G+1,ae=z[ne];if(0>i(Z,te))ne<X&&0>i(ae,Z)?(z[oe]=ae,z[ne]=te,oe=ne):(z[oe]=Z,z[G]=te,oe=G);else if(ne<X&&0>i(ae,te))z[oe]=ae,z[ne]=te,oe=ne;else break e}}return U}function i(z,U){var te=z.sortIndex-U.sortIndex;return te!==0?te:z.id-U.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var c=[],f=[],h=1,p=null,g=3,m=!1,b=!1,_=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function q(z){for(var U=t(f);U!==null;){if(U.callback===null)r(f);else if(U.startTime<=z)r(f),U.sortIndex=U.expirationTime,e(c,U);else break;U=t(f)}}function Y(z){if(_=!1,q(z),!b)if(t(c)!==null)b=!0,H||(H=!0,k());else{var U=t(f);U!==null&&Q(Y,U.startTime-z)}}var H=!1,P=-1,E=5,R=-1;function L(){return I?!0:!(n.unstable_now()-R<E)}function T(){if(I=!1,H){var z=n.unstable_now();R=z;var U=!0;try{e:{b=!1,_&&(_=!1,N(P),P=-1),m=!0;var te=g;try{t:{for(q(z),p=t(c);p!==null&&!(p.expirationTime>z&&L());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,g=p.priorityLevel;var X=oe(p.expirationTime<=z);if(z=n.unstable_now(),typeof X=="function"){p.callback=X,q(z),U=!0;break t}p===t(c)&&r(c),q(z)}else r(c);p=t(c)}if(p!==null)U=!0;else{var ge=t(f);ge!==null&&Q(Y,ge.startTime-z),U=!1}}break e}finally{p=null,g=te,m=!1}U=void 0}}finally{U?k():H=!1}}}var k;if(typeof j=="function")k=function(){j(T)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,V=B.port2;B.port1.onmessage=T,k=function(){V.postMessage(null)}}else k=function(){C(T,0)};function Q(z,U){P=C(function(){z(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(z){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var te=g;g=U;try{return z()}finally{g=te}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=g;g=z;try{return U()}finally{g=te}},n.unstable_scheduleCallback=function(z,U,te){var oe=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?oe+te:oe):te=oe,z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=te+X,z={id:h++,callback:U,priorityLevel:z,startTime:te,expirationTime:X,sortIndex:-1},te>oe?(z.sortIndex=te,e(f,z),t(c)===null&&z===t(f)&&(_?(N(P),P=-1):_=!0,Q(Y,te-oe))):(z.sortIndex=X,e(c,z),b||m||(b=!0,H||(H=!0,k()))),z},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(z){var U=g;return function(){var te=g;g=U;try{return z.apply(this,arguments)}finally{g=te}}}}(J2)),J2}var Cw;function iI(){return Cw||(Cw=1,Z2.exports=rI()),Z2.exports}var ev={exports:{}},Ca={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw;function aI(){if(Iw)return Ca;Iw=1;var n=Zg();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,f,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:h}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ca.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ca.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,h)},Ca.flushSync=function(c){var f=o.T,h=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=h,r.d.f()}},Ca.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Ca.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ca.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,p=s(h,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):h==="script"&&r.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ca.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=s(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Ca.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,p=s(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ca.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=s(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Ca.requestFormReset=function(c){r.d.r(c)},Ca.unstable_batchedUpdates=function(c,f){return c(f)},Ca.useFormState=function(c,f,h){return o.H.useFormState(c,f,h)},Ca.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ca.version="19.1.0",Ca}var Tw;function oI(){if(Tw)return ev.exports;Tw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ev.exports=aI(),ev.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function sI(){if(Rw)return _0;Rw=1;var n=iI(),e=Zg(),t=oI();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,d=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(d=u.return),l=u.return;while(l)}return u.tag===3?d:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function s(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var d=l,v=u;;){var A=d.return;if(A===null)break;var D=A.alternate;if(D===null){if(v=A.return,v!==null){d=v;continue}break}if(A.child===D.child){for(D=A.child;D;){if(D===d)return s(A),l;if(D===v)return s(A),u;D=D.sibling}throw Error(r(188))}if(d.return!==v.return)d=A,v=D;else{for(var K=!1,ce=A.child;ce;){if(ce===d){K=!0,d=A,v=D;break}if(ce===v){K=!0,v=A,d=D;break}ce=ce.sibling}if(!K){for(ce=D.child;ce;){if(ce===d){K=!0,d=D,v=A;break}if(ce===v){K=!0,v=D,d=A;break}ce=ce.sibling}if(!K)throw Error(r(189))}}if(d.alternate!==v)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?l:u}function f(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=f(l),u!==null)return u;l=l.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),j=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function k(l){return l===null||typeof l!="object"?null:(l=T&&l[T]||l["@@iterator"],typeof l=="function"?l:null)}var B=Symbol.for("react.client.reference");function V(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===B?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case I:return"Profiler";case _:return"StrictMode";case Y:return"Suspense";case H:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case m:return"Portal";case j:return(l.displayName||"Context")+".Provider";case N:return(l._context.displayName||"Context")+".Consumer";case q:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return u=l.displayName||null,u!==null?u:V(l.type)||"Memo";case E:u=l._payload,l=l._init;try{return V(l(u))}catch{}}return null}var Q=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},oe=[],X=-1;function ge(l){return{current:l}}function G(l){0>X||(l.current=oe[X],oe[X]=null,X--)}function Z(l,u){X++,oe[X]=l.current,l.current=u}var ne=ge(null),ae=ge(null),pe=ge(null),Ae=ge(null);function _e(l,u){switch(Z(pe,u),Z(ae,l),Z(ne,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?Xb(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=Xb(u),l=Kb(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}G(ne),Z(ne,l)}function Ie(){G(ne),G(ae),G(pe)}function $e(l){l.memoizedState!==null&&Z(Ae,l);var u=ne.current,d=Kb(u,l.type);u!==d&&(Z(ae,l),Z(ne,d))}function qe(l){ae.current===l&&(G(ne),G(ae)),Ae.current===l&&(G(Ae),m0._currentValue=te)}var at=Object.prototype.hasOwnProperty,lt=n.unstable_scheduleCallback,wt=n.unstable_cancelCallback,Be=n.unstable_shouldYield,ve=n.unstable_requestPaint,ht=n.unstable_now,ct=n.unstable_getCurrentPriorityLevel,Ne=n.unstable_ImmediatePriority,Ke=n.unstable_UserBlockingPriority,We=n.unstable_NormalPriority,st=n.unstable_LowPriority,nt=n.unstable_IdlePriority,ut=n.log,At=n.unstable_setDisableYieldValue,vt=null,_t=null;function Nt(l){if(typeof ut=="function"&&At(l),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(vt,l)}catch{}}var bt=Math.clz32?Math.clz32:vn,Dt=Math.log,ft=Math.LN2;function vn(l){return l>>>=0,l===0?32:31-(Dt(l)/ft|0)|0}var Vt=256,Kn=4194304;function Kt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function En(l,u,d){var v=l.pendingLanes;if(v===0)return 0;var A=0,D=l.suspendedLanes,K=l.pingedLanes;l=l.warmLanes;var ce=v&134217727;return ce!==0?(v=ce&~D,v!==0?A=Kt(v):(K&=ce,K!==0?A=Kt(K):d||(d=ce&~l,d!==0&&(A=Kt(d))))):(ce=v&~D,ce!==0?A=Kt(ce):K!==0?A=Kt(K):d||(d=v&~l,d!==0&&(A=Kt(d)))),A===0?0:u!==0&&u!==A&&(u&D)===0&&(D=A&-A,d=u&-u,D>=d||D===32&&(d&4194048)!==0)?u:A}function pi(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function on(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pa(){var l=Vt;return Vt<<=1,(Vt&4194048)===0&&(Vt=256),l}function In(){var l=Kn;return Kn<<=1,(Kn&62914560)===0&&(Kn=4194304),l}function jr(l){for(var u=[],d=0;31>d;d++)u.push(l);return u}function cr(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function yn(l,u,d,v,A,D){var K=l.pendingLanes;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=d,l.entangledLanes&=d,l.errorRecoveryDisabledLanes&=d,l.shellSuspendCounter=0;var ce=l.entanglements,ye=l.expirationTimes,Me=l.hiddenUpdates;for(d=K&~d;0<d;){var Ye=31-bt(d),et=1<<Ye;ce[Ye]=0,ye[Ye]=-1;var Fe=Me[Ye];if(Fe!==null)for(Me[Ye]=null,Ye=0;Ye<Fe.length;Ye++){var Ue=Fe[Ye];Ue!==null&&(Ue.lane&=-536870913)}d&=~et}v!==0&&Tt(l,v,0),D!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=D&~(K&~u))}function Tt(l,u,d){l.pendingLanes|=u,l.suspendedLanes&=~u;var v=31-bt(u);l.entangledLanes|=u,l.entanglements[v]=l.entanglements[v]|1073741824|d&4194090}function nn(l,u){var d=l.entangledLanes|=u;for(l=l.entanglements;d;){var v=31-bt(d),A=1<<v;A&u|l[v]&u&&(l[v]|=u),d&=~A}}function Si(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function jn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function vr(){var l=U.p;return l!==0?l:(l=window.event,l===void 0?32:gw(l.type))}function Ua(l,u){var d=U.p;try{return U.p=l,u()}finally{U.p=d}}var yt=Math.random().toString(36).slice(2),Gn="__reactFiber$"+yt,$n="__reactProps$"+yt,yr="__reactContainer$"+yt,Sr="__reactEvents$"+yt,Dr="__reactListeners$"+yt,Gr="__reactHandles$"+yt,Is="__reactResources$"+yt,Ji="__reactMarker$"+yt;function gi(l){delete l[Gn],delete l[$n],delete l[Sr],delete l[Dr],delete l[Gr]}function ti(l){var u=l[Gn];if(u)return u;for(var d=l.parentNode;d;){if(u=d[yr]||d[Gn]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(l=ew(l);l!==null;){if(d=l[Gn])return d;l=ew(l)}return u}l=d,d=l.parentNode}return null}function $r(l){if(l=l[Gn]||l[yr]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function ni(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function ur(l){var u=l[Is];return u||(u=l[Is]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Bn(l){l[Ji]=!0}var Co=new Set,Io={};function Bi(l,u){ga(l,u),ga(l+"Capture",u)}function ga(l,u){for(Io[l]=u,l=0;l<u.length;l++)Co.add(u[l])}var Ts=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fc={},Rs={};function su(l){return at.call(Rs,l)?!0:at.call(fc,l)?!1:Ts.test(l)?Rs[l]=!0:(fc[l]=!0,!1)}function za(l,u,d){if(su(u))if(d===null)l.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+d)}}function Va(l,u,d){if(d===null)l.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+d)}}function ri(l,u,d,v){if(v===null)l.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttributeNS(u,d,""+v)}}var To,lu;function Ja(l){if(To===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);To=u&&u[1]||"",lu=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+To+l+lu}var pl=!1;function Ro(l,u){if(!l||pl)return"";pl=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(Ue){var Fe=Ue}Reflect.construct(l,[],et)}else{try{et.call()}catch(Ue){Fe=Ue}l.call(et.prototype)}}else{try{throw Error()}catch(Ue){Fe=Ue}(et=l())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(Ue){if(Ue&&Fe&&typeof Ue.stack=="string")return[Ue.stack,Fe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=v.DetermineComponentFrameRoot(),K=D[0],ce=D[1];if(K&&ce){var ye=K.split(`
`),Me=ce.split(`
`);for(A=v=0;v<ye.length&&!ye[v].includes("DetermineComponentFrameRoot");)v++;for(;A<Me.length&&!Me[A].includes("DetermineComponentFrameRoot");)A++;if(v===ye.length||A===Me.length)for(v=ye.length-1,A=Me.length-1;1<=v&&0<=A&&ye[v]!==Me[A];)A--;for(;1<=v&&0<=A;v--,A--)if(ye[v]!==Me[A]){if(v!==1||A!==1)do if(v--,A--,0>A||ye[v]!==Me[A]){var Ye=`
`+ye[v].replace(" at new "," at ");return l.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",l.displayName)),Ye}while(1<=v&&0<=A);break}}}finally{pl=!1,Error.prepareStackTrace=d}return(d=l?l.displayName||l.name:"")?Ja(d):""}function hc(l){switch(l.tag){case 26:case 27:case 5:return Ja(l.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 15:return Ro(l.type,!1);case 11:return Ro(l.type.render,!1);case 1:return Ro(l.type,!0);case 31:return Ja("Activity");default:return""}}function fr(l){try{var u="";do u+=hc(l),l=l.return;while(l);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function mi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function gl(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function cu(l){var u=gl(l)?"checked":"value",d=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),v=""+l[u];if(!l.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var A=d.get,D=d.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return A.call(this)},set:function(K){v=""+K,D.call(this,K)}}),Object.defineProperty(l,u,{enumerable:d.enumerable}),{getValue:function(){return v},setValue:function(K){v=""+K},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Qo(l){l._valueTracker||(l._valueTracker=cu(l))}function dc(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var d=u.getValue(),v="";return l&&(v=gl(l)?l.checked?"true":"false":l.value),l=v,l!==d?(u.setValue(l),!0):!1}function Ci(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var ml=/[\n"\\]/g;function Sn(l){return l.replace(ml,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ii(l,u,d,v,A,D,K,ce){l.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?l.type=K:l.removeAttribute("type"),u!=null?K==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+mi(u)):l.value!==""+mi(u)&&(l.value=""+mi(u)):K!=="submit"&&K!=="reset"||l.removeAttribute("value"),u!=null?Jo(l,K,mi(u)):d!=null?Jo(l,K,mi(d)):v!=null&&l.removeAttribute("value"),A==null&&D!=null&&(l.defaultChecked=!!D),A!=null&&(l.checked=A&&typeof A!="function"&&typeof A!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?l.name=""+mi(ce):l.removeAttribute("name")}function Zo(l,u,d,v,A,D,K,ce){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(l.type=D),u!=null||d!=null){if(!(D!=="submit"&&D!=="reset"||u!=null))return;d=d!=null?""+mi(d):"",u=u!=null?""+mi(u):d,ce||u===l.value||(l.value=u),l.defaultValue=u}v=v??A,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=ce?l.checked:!!v,l.defaultChecked=!!v,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(l.name=K)}function Jo(l,u,d){u==="number"&&Ci(l.ownerDocument)===l||l.defaultValue===""+d||(l.defaultValue=""+d)}function eo(l,u,d,v){if(l=l.options,u){u={};for(var A=0;A<d.length;A++)u["$"+d[A]]=!0;for(d=0;d<l.length;d++)A=u.hasOwnProperty("$"+l[d].value),l[d].selected!==A&&(l[d].selected=A),A&&v&&(l[d].defaultSelected=!0)}else{for(d=""+mi(d),u=null,A=0;A<l.length;A++){if(l[A].value===d){l[A].selected=!0,v&&(l[A].defaultSelected=!0);return}u!==null||l[A].disabled||(u=l[A])}u!==null&&(u.selected=!0)}}function Fn(l,u,d){if(u!=null&&(u=""+mi(u),u!==l.value&&(l.value=u),d==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=d!=null?""+mi(d):""}function es(l,u,d,v){if(u==null){if(v!=null){if(d!=null)throw Error(r(92));if(Q(v)){if(1<v.length)throw Error(r(93));v=v[0]}d=v}d==null&&(d=""),u=d}d=mi(u),l.defaultValue=d,v=l.textContent,v===d&&v!==""&&v!==null&&(l.value=v)}function ma(l,u){if(u){var d=l.firstChild;if(d&&d===l.lastChild&&d.nodeType===3){d.nodeValue=u;return}}l.textContent=u}var No=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uu(l,u,d){var v=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":v?l.setProperty(u,d):typeof d!="number"||d===0||No.has(u)?u==="float"?l.cssFloat=d:l[u]=(""+d).trim():l[u]=d+"px"}function pc(l,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var A in u)v=u[A],u.hasOwnProperty(A)&&d[A]!==v&&uu(l,A,v)}else for(var D in u)u.hasOwnProperty(D)&&uu(l,D,u[D])}function gc(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Do=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(l){return vl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var to=null;function tr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ko=null,no=null;function Ft(l){var u=$r(l);if(u&&(l=u.stateNode)){var d=l[$n]||null;e:switch(l=u.stateNode,u.type){case"input":if(Ii(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=l;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Sn(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var v=d[u];if(v!==l&&v.form===l.form){var A=v[$n]||null;if(!A)throw Error(r(90));Ii(v,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(u=0;u<d.length;u++)v=d[u],v.form===l.form&&dc(v)}break e;case"textarea":Fn(l,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&eo(l,!!d.multiple,u,!1)}}}var ro=!1;function fu(l,u,d){if(ro)return l(u,d);ro=!0;try{var v=l(u);return v}finally{if(ro=!1,(ko!==null||no!==null)&&(up(),ko&&(u=ko,l=no,no=ko=null,Ft(u),l)))for(u=0;u<l.length;u++)Ft(l[u])}}function Fi(l,u){var d=l.stateNode;if(d===null)return null;var v=d[$n]||null;if(v===null)return null;d=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=!1;if(va)try{var io={};Object.defineProperty(io,"passive",{get:function(){ea=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{ea=!1}var ya=null,ts=null,Po=null;function mc(){if(Po)return Po;var l,u=ts,d=u.length,v,A="value"in ya?ya.value:ya.textContent,D=A.length;for(l=0;l<d&&u[l]===A[l];l++);var K=d-l;for(v=1;v<=K&&u[d-v]===A[D-v];v++);return Po=A.slice(l,1<v?1-v:void 0)}function xa(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Ui(){return!0}function ao(){return!1}function Yr(l){function u(d,v,A,D,K){this._reactName=d,this._targetInst=A,this.type=v,this.nativeEvent=D,this.target=K,this.currentTarget=null;for(var ce in l)l.hasOwnProperty(ce)&&(d=l[ce],this[ce]=d?d(D):D[ce]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Ui:ao,this.isPropagationStopped=ao,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),u}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ns=Yr(hn),oo=h({},hn,{view:0,detail:0}),vc=Yr(oo),Ns,Ds,qa,zi=h({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==qa&&(qa&&l.type==="mousemove"?(Ns=l.screenX-qa.screenX,Ds=l.screenY-qa.screenY):Ds=Ns=0,qa=l),Ns)},movementY:function(l){return"movementY"in l?l.movementY:Ds}}),Xr=Yr(zi),hu=h({},zi,{dataTransfer:0}),rs=Yr(hu),Ti=h({},oo,{relatedTarget:0}),is=Yr(Ti),Lo=h({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),yl=Yr(Lo),Os=h({},hn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),xl=Yr(Os),yc=h({},hn,{data:0}),ks=Yr(yc),as={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ls(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=bl[l])?!!u[l]:!1}function os(){return Ls}var du=h({},oo,{key:function(l){if(l.key){var u=as[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=xa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ps[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(l){return l.type==="keypress"?xa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?xa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Mo=Yr(du),ss=h({},zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ms=Yr(ss),Vi=h({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),wl=Yr(Vi),O=h({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ee=Yr(O),me=h({},zi,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Yr(me),Te=h({},hn,{newState:0,oldState:0}),Ve=Yr(Te),it=[9,13,27,32],pt=va&&"CompositionEvent"in window,w=null;va&&"documentMode"in document&&(w=document.documentMode);var F=va&&"TextEvent"in window&&!w,$=va&&(!pt||w&&8<w&&11>=w),le=" ",Ce=!1;function Le(l,u){switch(l){case"keyup":return it.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ot(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ut=!1;function dn(l,u){switch(l){case"compositionend":return ot(u);case"keypress":return u.which!==32?null:(Ce=!0,le);case"textInput":return l=u.data,l===le&&Ce?null:l;default:return null}}function Qt(l,u){if(Ut)return l==="compositionend"||!pt&&Le(l,u)?(l=mc(),Po=ts=ya=null,Ut=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return $&&u.locale!=="ko"?null:u.data;default:return null}}var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Un[l.type]:u==="textarea"}function so(l,u,d,v){ko?no?no.push(v):no=[v]:ko=v,u=mp(u,"onChange"),0<u.length&&(d=new ns("onChange","change",null,d,v),l.push({event:d,listeners:u}))}var Br=null,ba=null;function ls(l){Hb(l,0)}function _l(l){var u=ni(l);if(dc(u))return l}function pu(l,u){if(l==="change")return u}var xc=!1;if(va){var ii;if(va){var Al="oninput"in document;if(!Al){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),Al=typeof bc.oninput=="function"}ii=Al}else ii=!1;xc=ii&&(!document.documentMode||9<document.documentMode)}function wc(){Br&&(Br.detachEvent("onpropertychange",gu),ba=Br=null)}function gu(l){if(l.propertyName==="value"&&_l(ba)){var u=[];so(u,ba,l,tr(l)),fu(ls,u)}}function wa(l,u,d){l==="focusin"?(wc(),Br=u,ba=d,Br.attachEvent("onpropertychange",gu)):l==="focusout"&&wc()}function jd(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return _l(ba)}function _f(l,u){if(l==="click")return _l(u)}function yh(l,u){if(l==="input"||l==="change")return _l(u)}function lo(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var vi=typeof Object.is=="function"?Object.is:lo;function El(l,u){if(vi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var d=Object.keys(l),v=Object.keys(u);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var A=d[v];if(!at.call(u,A)||!vi(l[A],u[A]))return!1}return!0}function Af(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function js(l,u){var d=Af(l);l=0;for(var v;d;){if(d.nodeType===3){if(v=l+d.textContent.length,l<=u&&v>=u)return{node:d,offset:u-l};l=v}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Af(d)}}function Sl(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Sl(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function ta(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Ci(l.document);u instanceof l.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)l=u.contentWindow;else break;u=Ci(l.document)}return u}function Ri(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var Cl=va&&"documentMode"in document&&11>=document.documentMode,_a=null,jo=null,cs=null,Bo=!1;function Or(l,u,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Bo||_a==null||_a!==Ci(v)||(v=_a,"selectionStart"in v&&Ri(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),cs&&El(cs,v)||(cs=v,v=mp(jo,"onSelect"),0<v.length&&(u=new ns("onSelect","select",null,u,d),l.push({event:u,listeners:v}),u.target=_a)))}function Fo(l,u){var d={};return d[l.toLowerCase()]=u.toLowerCase(),d["Webkit"+l]="webkit"+u,d["Moz"+l]="moz"+u,d}var Kr={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},Aa={},_c={};va&&(_c=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function us(l){if(Aa[l])return Aa[l];if(!Kr[l])return l;var u=Kr[l],d;for(d in u)if(u.hasOwnProperty(d)&&d in _c)return Aa[l]=u[d];return l}var mu=us("animationend"),Il=us("animationiteration"),Tl=us("animationstart"),Rl=us("transitionrun"),Ac=us("transitionstart"),vu=us("transitioncancel"),Nl=us("transitionend"),Bs=new Map,Ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ec.push("scrollEnd");function kr(l,u){Bs.set(l,u),Bi(u,[l])}var Ha=new WeakMap;function ln(l,u){if(typeof l=="object"&&l!==null){var d=Ha.get(l);return d!==void 0?d:(u={value:l,source:u,stack:fr(u)},Ha.set(l,u),u)}return{value:l,source:u,stack:fr(u)}}var cn=[],hr=0,Fr=0;function co(){for(var l=hr,u=Fr=hr=0;u<l;){var d=cn[u];cn[u++]=null;var v=cn[u];cn[u++]=null;var A=cn[u];cn[u++]=null;var D=cn[u];if(cn[u++]=null,v!==null&&A!==null){var K=v.pending;K===null?A.next=A:(A.next=K.next,K.next=A),v.pending=A}D!==0&&xh(d,A,D)}}function Dl(l,u,d,v){cn[hr++]=l,cn[hr++]=u,cn[hr++]=d,cn[hr++]=v,Fr|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function Ol(l,u,d,v){return Dl(l,u,d,v),Sc(l)}function Fs(l,u){return Dl(l,null,null,u),Sc(l)}function xh(l,u,d){l.lanes|=d;var v=l.alternate;v!==null&&(v.lanes|=d);for(var A=!1,D=l.return;D!==null;)D.childLanes|=d,v=D.alternate,v!==null&&(v.childLanes|=d),D.tag===22&&(l=D.stateNode,l===null||l._visibility&1||(A=!0)),l=D,D=D.return;return l.tag===3?(D=l.stateNode,A&&u!==null&&(A=31-bt(d),l=D.hiddenUpdates,v=l[A],v===null?l[A]=[u]:v.push(u),u.lane=d|536870912),D):null}function Sc(l){if(50<l0)throw l0=0,x2=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var yi={};function uo(l,u,d,v){this.tag=l,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(l,u,d,v){return new uo(l,u,d,v)}function yu(l){return l=l.prototype,!(!l||!l.isReactComponent)}function fs(l,u){var d=l.alternate;return d===null?(d=qi(l.tag,u,l.key,l.mode),d.elementType=l.elementType,d.type=l.type,d.stateNode=l.stateNode,d.alternate=l,l.alternate=d):(d.pendingProps=u,d.type=l.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=l.flags&65011712,d.childLanes=l.childLanes,d.lanes=l.lanes,d.child=l.child,d.memoizedProps=l.memoizedProps,d.memoizedState=l.memoizedState,d.updateQueue=l.updateQueue,u=l.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=l.sibling,d.index=l.index,d.ref=l.ref,d.refCleanup=l.refCleanup,d}function Ef(l,u){l.flags&=65011714;var d=l.alternate;return d===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,u=d.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Cc(l,u,d,v,A,D){var K=0;if(v=l,typeof l=="function")yu(l)&&(K=1);else if(typeof l=="string")K=zC(l,d,ne.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=qi(31,d,u,A),l.elementType=R,l.lanes=D,l;case b:return Us(d.children,A,D,u);case _:K=8,A|=24;break;case I:return l=qi(12,d,u,A|2),l.elementType=I,l.lanes=D,l;case Y:return l=qi(13,d,u,A),l.elementType=Y,l.lanes=D,l;case H:return l=qi(19,d,u,A),l.elementType=H,l.lanes=D,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case C:case j:K=10;break e;case N:K=9;break e;case q:K=11;break e;case P:K=14;break e;case E:K=16,v=null;break e}K=29,d=Error(r(130,l===null?"null":typeof l,"")),v=null}return u=qi(K,d,u,A),u.elementType=l,u.type=v,u.lanes=D,u}function Us(l,u,d,v){return l=qi(7,l,v,u),l.lanes=d,l}function bh(l,u,d){return l=qi(6,l,null,u),l.lanes=d,l}function Sf(l,u,d){return u=qi(4,l.children!==null?l.children:[],l.key,u),u.lanes=d,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var kl=[],zs=0,xu=null,wh=0,fo=[],Wa=0,Ic=null,Vs=1,qs="";function Tc(l,u){kl[zs++]=wh,kl[zs++]=xu,xu=l,wh=u}function P1(l,u,d){fo[Wa++]=Vs,fo[Wa++]=qs,fo[Wa++]=Ic,Ic=l;var v=Vs;l=qs;var A=32-bt(v)-1;v&=~(1<<A),d+=1;var D=32-bt(u)+A;if(30<D){var K=A-A%5;D=(v&(1<<K)-1).toString(32),v>>=K,A-=K,Vs=1<<32-bt(u)+A|d<<A|v,qs=D+l}else Vs=1<<D|d<<A|v,qs=l}function Cf(l){l.return!==null&&(Tc(l,1),P1(l,1,0))}function If(l){for(;l===xu;)xu=kl[--zs],kl[zs]=null,wh=kl[--zs],kl[zs]=null;for(;l===Ic;)Ic=fo[--Wa],fo[Wa]=null,qs=fo[--Wa],fo[Wa]=null,Vs=fo[--Wa],fo[Wa]=null}var ai=null,Pr=null,Pn=!1,Pl=null,hs=!1,Bd=Error(r(519));function Rc(l){var u=Error(r(418,""));throw bu(ln(u,l)),Bd}function L1(l){var u=l.stateNode,d=l.type,v=l.memoizedProps;switch(u[Gn]=l,u[$n]=v,d){case"dialog":bn("cancel",u),bn("close",u);break;case"iframe":case"object":case"embed":bn("load",u);break;case"video":case"audio":for(d=0;d<u0.length;d++)bn(u0[d],u);break;case"source":bn("error",u);break;case"img":case"image":case"link":bn("error",u),bn("load",u);break;case"details":bn("toggle",u);break;case"input":bn("invalid",u),Zo(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Qo(u);break;case"select":bn("invalid",u);break;case"textarea":bn("invalid",u),es(u,v.value,v.defaultValue,v.children),Qo(u)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||v.suppressHydrationWarning===!0||Yb(u.textContent,d)?(v.popover!=null&&(bn("beforetoggle",u),bn("toggle",u)),v.onScroll!=null&&bn("scroll",u),v.onScrollEnd!=null&&bn("scrollend",u),v.onClick!=null&&(u.onclick=vp),u=!0):u=!1,u||Rc(l)}function Hs(l){for(ai=l.return;ai;)switch(ai.tag){case 5:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:ai=ai.return}}function na(l){if(l!==ai)return!1;if(!Pn)return Hs(l),Pn=!0,!1;var u=l.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=l.type,d=!(d!=="form"&&d!=="button")||L2(l.type,l.memoizedProps)),d=!d),d&&Pr&&Rc(l),Hs(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(d=l.data,d==="/$"){if(u===0){Pr=Zs(l.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;l=l.nextSibling}Pr=null}}else u===27?(u=Pr,ju(l.type)?(l=F2,F2=null,Pr=l):Pr=u):Pr=ai?Zs(l.stateNode.nextSibling):null;return!0}function Ga(){Pr=ai=null,Pn=!1}function M1(){var l=Pl;return l!==null&&(go===null?go=l:go.push.apply(go,l),Pl=null),l}function bu(l){Pl===null?Pl=[l]:Pl.push(l)}var ds=ge(null),xi=null,Ws=null;function Ll(l,u,d){Z(ds,u._currentValue),u._currentValue=d}function ps(l){l._currentValue=ds.current,G(ds)}function _h(l,u,d){for(;l!==null;){var v=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),l===d)break;l=l.return}}function Ah(l,u,d,v){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var D=A.dependencies;if(D!==null){var K=A.child;D=D.firstContext;e:for(;D!==null;){var ce=D;D=A;for(var ye=0;ye<u.length;ye++)if(ce.context===u[ye]){D.lanes|=d,ce=D.alternate,ce!==null&&(ce.lanes|=d),_h(D.return,d,l),v||(K=null);break e}D=ce.next}}else if(A.tag===18){if(K=A.return,K===null)throw Error(r(341));K.lanes|=d,D=K.alternate,D!==null&&(D.lanes|=d),_h(K,d,l),K=null}else K=A.child;if(K!==null)K.return=A;else for(K=A;K!==null;){if(K===l){K=null;break}if(A=K.sibling,A!==null){A.return=K.return,K=A;break}K=K.return}A=K}}function wu(l,u,d,v){l=null;for(var A=u,D=!1;A!==null;){if(!D){if((A.flags&524288)!==0)D=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var K=A.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var ce=A.type;vi(A.pendingProps.value,K.value)||(l!==null?l.push(ce):l=[ce])}}else if(A===Ae.current){if(K=A.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(m0):l=[m0])}A=A.return}l!==null&&Ah(u,l,d,v),u.flags|=262144}function Eh(l){for(l=l.firstContext;l!==null;){if(!vi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function gs(l){xi=l,Ws=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function oi(l){return Sh(xi,l)}function Ml(l,u){return xi===null&&gs(l),Sh(l,u)}function Sh(l,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},Ws===null){if(l===null)throw Error(r(308));Ws=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Ws=Ws.next=u;return d}var Hm=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(d,v){l.push(v)}};this.abort=function(){u.aborted=!0,l.forEach(function(d){return d()})}},j1=n.unstable_scheduleCallback,Wm=n.unstable_NormalPriority,si={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fd(){return{controller:new Hm,data:new Map,refCount:0}}function Tf(l){l.refCount--,l.refCount===0&&j1(Wm,function(){l.controller.abort()})}var Rf=null,Ud=0,Nc=0,Gs=null;function Gm(l,u){if(Rf===null){var d=Rf=[];Ud=0,Nc=C2(),Gs={status:"pending",value:void 0,then:function(v){d.push(v)}}}return Ud++,u.then(B1,B1),u}function B1(){if(--Ud===0&&Rf!==null){Gs!==null&&(Gs.status="fulfilled");var l=Rf;Rf=null,Nc=0,Gs=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function F1(l,u){var d=[],v={status:"pending",value:null,reason:null,then:function(A){d.push(A)}};return l.then(function(){v.status="fulfilled",v.value=u;for(var A=0;A<d.length;A++)(0,d[A])(u)},function(A){for(v.status="rejected",v.reason=A,A=0;A<d.length;A++)(0,d[A])(void 0)}),v}var x=z.S;z.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Gm(l,u),x!==null&&x(l,u)};var S=ge(null);function M(){var l=S.current;return l!==null?l:_r.pooledCache}function W(l,u){u===null?Z(S,S.current):Z(S,u.pool)}function J(){var l=M();return l===null?null:{parent:si._currentValue,pool:l}}var re=Error(r(460)),ie=Error(r(474)),se=Error(r(542)),ue={then:function(){}};function de(l){return l=l.status,l==="fulfilled"||l==="rejected"}function be(){}function Pe(l,u,d){switch(d=l[d],d===void 0?l.push(u):d!==u&&(u.then(be,be),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Ze(l),l;default:if(typeof u.status=="string")u.then(be,be);else{if(l=_r,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(v){if(u.status==="pending"){var A=u;A.status="fulfilled",A.value=v}},function(v){if(u.status==="pending"){var A=u;A.status="rejected",A.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Ze(l),l}throw Oe=u,re}}var Oe=null;function Re(){if(Oe===null)throw Error(r(459));var l=Oe;return Oe=null,l}function Ze(l){if(l===re||l===se)throw Error(r(483))}var ze=!1;function we(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Se(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ge(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Je(l,u,d){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(rr&2)!==0){var A=v.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),v.pending=u,u=Sc(l),xh(l,null,d),u}return Dl(l,v,u,d),Sc(l)}function Xe(l,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var v=u.lanes;v&=l.pendingLanes,d|=v,u.lanes=d,nn(l,d)}}function xt(l,u){var d=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var A=null,D=null;if(d=d.firstBaseUpdate,d!==null){do{var K={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};D===null?A=D=K:D=D.next=K,d=d.next}while(d!==null);D===null?A=D=u:D=D.next=u}else A=D=u;d={baseState:v.baseState,firstBaseUpdate:A,lastBaseUpdate:D,shared:v.shared,callbacks:v.callbacks},l.updateQueue=d;return}l=d.lastBaseUpdate,l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=u}var dt=!1;function Ot(){if(dt){var l=Gs;if(l!==null)throw l}}function gt(l,u,d,v){dt=!1;var A=l.updateQueue;ze=!1;var D=A.firstBaseUpdate,K=A.lastBaseUpdate,ce=A.shared.pending;if(ce!==null){A.shared.pending=null;var ye=ce,Me=ye.next;ye.next=null,K===null?D=Me:K.next=Me,K=ye;var Ye=l.alternate;Ye!==null&&(Ye=Ye.updateQueue,ce=Ye.lastBaseUpdate,ce!==K&&(ce===null?Ye.firstBaseUpdate=Me:ce.next=Me,Ye.lastBaseUpdate=ye))}if(D!==null){var et=A.baseState;K=0,Ye=Me=ye=null,ce=D;do{var Fe=ce.lane&-536870913,Ue=Fe!==ce.lane;if(Ue?(Nn&Fe)===Fe:(v&Fe)===Fe){Fe!==0&&Fe===Nc&&(dt=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var Xt=l,zt=ce;Fe=u;var pr=d;switch(zt.tag){case 1:if(Xt=zt.payload,typeof Xt=="function"){et=Xt.call(pr,et,Fe);break e}et=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=zt.payload,Fe=typeof Xt=="function"?Xt.call(pr,et,Fe):Xt,Fe==null)break e;et=h({},et,Fe);break e;case 2:ze=!0}}Fe=ce.callback,Fe!==null&&(l.flags|=64,Ue&&(l.flags|=8192),Ue=A.callbacks,Ue===null?A.callbacks=[Fe]:Ue.push(Fe))}else Ue={lane:Fe,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ye===null?(Me=Ye=Ue,ye=et):Ye=Ye.next=Ue,K|=Fe;if(ce=ce.next,ce===null){if(ce=A.shared.pending,ce===null)break;Ue=ce,ce=Ue.next,Ue.next=null,A.lastBaseUpdate=Ue,A.shared.pending=null}}while(!0);Ye===null&&(ye=et),A.baseState=ye,A.firstBaseUpdate=Me,A.lastBaseUpdate=Ye,D===null&&(A.shared.lanes=0),ku|=K,l.lanes=K,l.memoizedState=et}}function Tn(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function zn(l,u){var d=l.callbacks;if(d!==null)for(l.callbacks=null,l=0;l<d.length;l++)Tn(d[l],u)}var sn=ge(null),rn=ge(0);function Zn(l,u){l=Uc,Z(rn,l),Z(sn,u),Uc=l|u.baseLanes}function Vn(){Z(rn,Uc),Z(sn,sn.current)}function Zt(){Uc=rn.current,G(sn),G(rn)}var nr=0,Lt=null,Ht=null,Cn=null,Rn=!1,bi=!1,li=!1,Ur=0,zr=0,Qr=null,ho=0;function qn(){throw Error(r(321))}function Zr(l,u){if(u===null)return!1;for(var d=0;d<u.length&&d<l.length;d++)if(!vi(l[d],u[d]))return!1;return!0}function Uo(l,u,d,v,A,D){return nr=D,Lt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,z.H=l===null||l.memoizedState===null?Tx:Rx,li=!1,D=d(v,A),li=!1,bi&&(D=Dc(u,d,v,A)),jl(l),D}function jl(l){z.H=Q1;var u=Ht!==null&&Ht.next!==null;if(nr=0,Cn=Ht=Lt=null,Rn=!1,zr=0,Qr=null,u)throw Error(r(300));l===null||Hi||(l=l.dependencies,l!==null&&Eh(l)&&(Hi=!0))}function Dc(l,u,d,v){Lt=l;var A=0;do{if(bi&&(Qr=null),zr=0,bi=!1,25<=A)throw Error(r(301));if(A+=1,Cn=Ht=null,l.updateQueue!=null){var D=l.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}z.H=ZS,D=u(d,v)}while(bi);return D}function Bl(){var l=z.H,u=l.useState()[0];return u=typeof u.then=="function"?Fl(u):u,l=l.useState()[0],(Ht!==null?Ht.memoizedState:null)!==l&&(Lt.flags|=1024),u}function wr(){var l=Ur!==0;return Ur=0,l}function Nf(l,u,d){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~d}function Ch(l){if(Rn){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Rn=!1}nr=0,Cn=Ht=Lt=null,bi=!1,zr=Ur=0,Qr=null}function ra(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Lt.memoizedState=Cn=l:Cn=Cn.next=l,Cn}function Cr(){if(Ht===null){var l=Lt.alternate;l=l!==null?l.memoizedState:null}else l=Ht.next;var u=Cn===null?Lt.memoizedState:Cn.next;if(u!==null)Cn=u,Ht=l;else{if(l===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));Ht=l,l={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Cn===null?Lt.memoizedState=Cn=l:Cn=Cn.next=l}return Cn}function Oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(l){var u=zr;return zr+=1,Qr===null&&(Qr=[]),l=Pe(Qr,l,u),u=Lt,(Cn===null?u.memoizedState:Cn.next)===null&&(u=u.alternate,z.H=u===null||u.memoizedState===null?Tx:Rx),l}function Ea(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Fl(l);if(l.$$typeof===j)return oi(l)}throw Error(r(438,String(l)))}function Ul(l){var u=null,d=Lt.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var v=Lt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(A){return A.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=Oc(),Lt.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(l),v=0;v<l;v++)d[v]=L;return u.index++,d}function Sa(l,u){return typeof u=="function"?u(l):u}function Df(l){var u=Cr();return _u(u,Ht,l)}function _u(l,u,d){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=d;var A=l.baseQueue,D=v.pending;if(D!==null){if(A!==null){var K=A.next;A.next=D.next,D.next=K}u.baseQueue=A=D,v.pending=null}if(D=l.baseState,A===null)l.memoizedState=D;else{u=A.next;var ce=K=null,ye=null,Me=u,Ye=!1;do{var et=Me.lane&-536870913;if(et!==Me.lane?(Nn&et)===et:(nr&et)===et){var Fe=Me.revertLane;if(Fe===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),et===Nc&&(Ye=!0);else if((nr&Fe)===Fe){Me=Me.next,Fe===Nc&&(Ye=!0);continue}else et={lane:0,revertLane:Me.revertLane,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},ye===null?(ce=ye=et,K=D):ye=ye.next=et,Lt.lanes|=Fe,ku|=Fe;et=Me.action,li&&d(D,et),D=Me.hasEagerState?Me.eagerState:d(D,et)}else Fe={lane:et,revertLane:Me.revertLane,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},ye===null?(ce=ye=Fe,K=D):ye=ye.next=Fe,Lt.lanes|=et,ku|=et;Me=Me.next}while(Me!==null&&Me!==u);if(ye===null?K=D:ye.next=ce,!vi(D,l.memoizedState)&&(Hi=!0,Ye&&(d=Gs,d!==null)))throw d;l.memoizedState=D,l.baseState=K,l.baseQueue=ye,v.lastRenderedState=D}return A===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function Ih(l){var u=Cr(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var v=d.dispatch,A=d.pending,D=u.memoizedState;if(A!==null){d.pending=null;var K=A=A.next;do D=l(D,K.action),K=K.next;while(K!==A);vi(D,u.memoizedState)||(Hi=!0),u.memoizedState=D,u.baseQueue===null&&(u.baseState=D),d.lastRenderedState=D}return[D,v]}function Of(l,u,d){var v=Lt,A=Cr(),D=Pn;if(D){if(d===void 0)throw Error(r(407));d=d()}else d=u();var K=!vi((Ht||A).memoizedState,d);K&&(A.memoizedState=d,Hi=!0),A=A.queue;var ce=Au.bind(null,v,A,l);if(Cu(2048,8,ce,[l]),A.getSnapshot!==u||K||Cn!==null&&Cn.memoizedState.tag&1){if(v.flags|=2048,Ys(9,Mf(),kf.bind(null,v,A,d,u),null),_r===null)throw Error(r(349));D||(nr&124)!==0||Th(v,u,d)}return d}function Th(l,u,d){l.flags|=16384,l={getSnapshot:u,value:d},u=Lt.updateQueue,u===null?(u=Oc(),Lt.updateQueue=u,u.stores=[l]):(d=u.stores,d===null?u.stores=[l]:d.push(l))}function kf(l,u,d,v){u.value=d,u.getSnapshot=v,U1(u)&&z1(l)}function Au(l,u,d){return d(function(){U1(u)&&z1(l)})}function U1(l){var u=l.getSnapshot;l=l.value;try{var d=u();return!vi(l,d)}catch{return!0}}function z1(l){var u=Fs(l,2);u!==null&&Go(u,l,2)}function Pf(l){var u=ra();if(typeof l=="function"){var d=l;if(l=d(),li){Nt(!0);try{d()}finally{Nt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:l},u}function $s(l,u,d,v){return l.baseState=d,_u(l,Ht,typeof v=="function"?v:Sa)}function $m(l,u,d,v,A){if(K1(l))throw Error(r(485));if(l=u.action,l!==null){var D={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){D.listeners.push(K)}};z.T!==null?d(!0):D.isTransition=!1,v(D),d=u.pending,d===null?(D.next=u.pending=D,V1(u,D)):(D.next=d.next,u.pending=d.next=D)}}function V1(l,u){var d=u.action,v=u.payload,A=l.state;if(u.isTransition){var D=z.T,K={};z.T=K;try{var ce=d(A,v),ye=z.S;ye!==null&&ye(K,ce),q1(l,u,ce)}catch(Me){Eu(l,u,Me)}finally{z.T=D}}else try{D=d(A,v),q1(l,u,D)}catch(Me){Eu(l,u,Me)}}function q1(l,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){zd(l,u,v)},function(v){return Eu(l,u,v)}):zd(l,u,d)}function zd(l,u,d){u.status="fulfilled",u.value=d,Vd(u),l.state=d,u=l.pending,u!==null&&(d=u.next,d===u?l.pending=null:(d=d.next,u.next=d,V1(l,d)))}function Eu(l,u,d){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=d,Vd(u),u=u.next;while(u!==v)}l.action=null}function Vd(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function qd(l,u){return u}function Lf(l,u){if(Pn){var d=_r.formState;if(d!==null){e:{var v=Lt;if(Pn){if(Pr){t:{for(var A=Pr,D=hs;A.nodeType!==8;){if(!D){A=null;break t}if(A=Zs(A.nextSibling),A===null){A=null;break t}}D=A.data,A=D==="F!"||D==="F"?A:null}if(A){Pr=Zs(A.nextSibling),v=A.data==="F!";break e}}Rc(v)}v=!1}v&&(u=d[0])}}return d=ra(),d.memoizedState=d.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qd,lastRenderedState:u},d.queue=v,d=Sx.bind(null,Lt,v),v.dispatch=d,v=Pf(!1),D=Ym.bind(null,Lt,!1,v.queue),v=ra(),A={state:u,dispatch:null,action:l,pending:null},v.queue=A,d=$m.bind(null,Lt,A,D,d),A.dispatch=d,v.memoizedState=l,[u,d,!1]}function Rh(l){var u=Cr();return Su(u,Ht,l)}function Su(l,u,d){if(u=_u(l,u,qd)[0],l=Df(Sa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=Fl(u)}catch(K){throw K===re?se:K}else v=u;u=Cr();var A=u.queue,D=A.dispatch;return d!==u.memoizedState&&(Lt.flags|=2048,Ys(9,Mf(),H1.bind(null,A,d),null)),[v,D,l]}function H1(l,u){l.action=u}function W1(l){var u=Cr(),d=Ht;if(d!==null)return Su(u,d,l);Cr(),u=u.memoizedState,d=Cr();var v=d.queue.dispatch;return d.memoizedState=l,[u,v,!1]}function Ys(l,u,d,v){return l={tag:l,create:d,deps:v,inst:u,next:null},u=Lt.updateQueue,u===null&&(u=Oc(),Lt.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=l.next=l:(v=d.next,d.next=l,l.next=v,u.lastEffect=l),l}function Mf(){return{destroy:void 0,resource:void 0}}function Nh(){return Cr().memoizedState}function zo(l,u,d,v){var A=ra();v=v===void 0?null:v,Lt.flags|=l,A.memoizedState=Ys(1|u,Mf(),d,v)}function Cu(l,u,d,v){var A=Cr();v=v===void 0?null:v;var D=A.memoizedState.inst;Ht!==null&&v!==null&&Zr(v,Ht.memoizedState.deps)?A.memoizedState=Ys(u,D,d,v):(Lt.flags|=l,A.memoizedState=Ys(1|u,D,d,v))}function Hd(l,u){zo(8390656,8,l,u)}function G1(l,u){Cu(2048,8,l,u)}function Wd(l,u){return Cu(4,2,l,u)}function kc(l,u){return Cu(4,4,l,u)}function $1(l,u){if(typeof u=="function"){l=l();var d=u(l);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Gd(l,u,d){d=d!=null?d.concat([l]):null,Cu(4,4,$1.bind(null,u,l),d)}function $d(){}function Yd(l,u){var d=Cr();u=u===void 0?null:u;var v=d.memoizedState;return u!==null&&Zr(u,v[1])?v[0]:(d.memoizedState=[l,u],l)}function Y1(l,u){var d=Cr();u=u===void 0?null:u;var v=d.memoizedState;if(u!==null&&Zr(u,v[1]))return v[0];if(v=l(),li){Nt(!0);try{l()}finally{Nt(!1)}}return d.memoizedState=[v,u],v}function Pc(l,u,d){return d===void 0||(nr&1073741824)!==0?l.memoizedState=u:(l.memoizedState=d,l=wb(),Lt.lanes|=l,ku|=l,d)}function Dh(l,u,d,v){return vi(d,u)?d:sn.current!==null?(l=Pc(l,d,v),vi(l,u)||(Hi=!0),l):(nr&42)===0?(Hi=!0,l.memoizedState=d):(l=wb(),Lt.lanes|=l,ku|=l,u)}function jf(l,u,d,v,A){var D=U.p;U.p=D!==0&&8>D?D:8;var K=z.T,ce={};z.T=ce,Ym(l,!1,u,d);try{var ye=A(),Me=z.S;if(Me!==null&&Me(ce,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ye=F1(ye,v);Zd(l,u,Ye,Wo(l))}else Zd(l,u,v,Wo(l))}catch(et){Zd(l,u,{then:function(){},status:"rejected",reason:et},Wo())}finally{U.p=D,z.T=K}}function Xs(){}function ms(l,u,d,v){if(l.tag!==5)throw Error(r(476));var A=Ks(l).queue;jf(l,A,u,te,d===null?Xs:function(){return Bf(l),d(v)})}function Ks(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:te},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:d},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Bf(l){var u=Ks(l).next.queue;Zd(l,u,{},Wo())}function Ff(){return oi(m0)}function Xd(){return Cr().memoizedState}function X1(){return Cr().memoizedState}function Kd(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var d=Wo();l=Ge(d);var v=Je(u,l,d);v!==null&&(Go(v,u,d),Xe(v,u,d)),u={cache:Fd()},l.payload=u;return}u=u.return}}function Qd(l,u,d){var v=Wo();d={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},K1(l)?Cx(u,d):(d=Ol(l,u,d,v),d!==null&&(Go(d,l,v),Ix(d,u,v)))}function Sx(l,u,d){var v=Wo();Zd(l,u,d,v)}function Zd(l,u,d,v){var A={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(K1(l))Cx(u,A);else{var D=l.alternate;if(l.lanes===0&&(D===null||D.lanes===0)&&(D=u.lastRenderedReducer,D!==null))try{var K=u.lastRenderedState,ce=D(K,d);if(A.hasEagerState=!0,A.eagerState=ce,vi(ce,K))return Dl(l,u,A,0),_r===null&&co(),!1}catch{}finally{}if(d=Ol(l,u,A,v),d!==null)return Go(d,l,v),Ix(d,u,v),!0}return!1}function Ym(l,u,d,v){if(v={lane:2,revertLane:C2(),action:v,hasEagerState:!1,eagerState:null,next:null},K1(l)){if(u)throw Error(r(479))}else u=Ol(l,d,v,2),u!==null&&Go(u,l,2)}function K1(l){var u=l.alternate;return l===Lt||u!==null&&u===Lt}function Cx(l,u){bi=Rn=!0;var d=l.pending;d===null?u.next=u:(u.next=d.next,d.next=u),l.pending=u}function Ix(l,u,d){if((d&4194048)!==0){var v=u.lanes;v&=l.pendingLanes,d|=v,u.lanes=d,nn(l,d)}}var Q1={readContext:oi,use:Ea,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn},Tx={readContext:oi,use:Ea,useCallback:function(l,u){return ra().memoizedState=[l,u===void 0?null:u],l},useContext:oi,useEffect:Hd,useImperativeHandle:function(l,u,d){d=d!=null?d.concat([l]):null,zo(4194308,4,$1.bind(null,u,l),d)},useLayoutEffect:function(l,u){return zo(4194308,4,l,u)},useInsertionEffect:function(l,u){zo(4,2,l,u)},useMemo:function(l,u){var d=ra();u=u===void 0?null:u;var v=l();if(li){Nt(!0);try{l()}finally{Nt(!1)}}return d.memoizedState=[v,u],v},useReducer:function(l,u,d){var v=ra();if(d!==void 0){var A=d(u);if(li){Nt(!0);try{d(u)}finally{Nt(!1)}}}else A=u;return v.memoizedState=v.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},v.queue=l,l=l.dispatch=Qd.bind(null,Lt,l),[v.memoizedState,l]},useRef:function(l){var u=ra();return l={current:l},u.memoizedState=l},useState:function(l){l=Pf(l);var u=l.queue,d=Sx.bind(null,Lt,u);return u.dispatch=d,[l.memoizedState,d]},useDebugValue:$d,useDeferredValue:function(l,u){var d=ra();return Pc(d,l,u)},useTransition:function(){var l=Pf(!1);return l=jf.bind(null,Lt,l.queue,!0,!1),ra().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,d){var v=Lt,A=ra();if(Pn){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),_r===null)throw Error(r(349));(Nn&124)!==0||Th(v,u,d)}A.memoizedState=d;var D={value:d,getSnapshot:u};return A.queue=D,Hd(Au.bind(null,v,D,l),[l]),v.flags|=2048,Ys(9,Mf(),kf.bind(null,v,D,d,u),null),d},useId:function(){var l=ra(),u=_r.identifierPrefix;if(Pn){var d=qs,v=Vs;d=(v&~(1<<32-bt(v)-1)).toString(32)+d,u="«"+u+"R"+d,d=Ur++,0<d&&(u+="H"+d.toString(32)),u+="»"}else d=ho++,u="«"+u+"r"+d.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:Ff,useFormState:Lf,useActionState:Lf,useOptimistic:function(l){var u=ra();u.memoizedState=u.baseState=l;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=Ym.bind(null,Lt,!0,d),d.dispatch=u,[l,u]},useMemoCache:Ul,useCacheRefresh:function(){return ra().memoizedState=Kd.bind(null,Lt)}},Rx={readContext:oi,use:Ea,useCallback:Yd,useContext:oi,useEffect:G1,useImperativeHandle:Gd,useInsertionEffect:Wd,useLayoutEffect:kc,useMemo:Y1,useReducer:Df,useRef:Nh,useState:function(){return Df(Sa)},useDebugValue:$d,useDeferredValue:function(l,u){var d=Cr();return Dh(d,Ht.memoizedState,l,u)},useTransition:function(){var l=Df(Sa)[0],u=Cr().memoizedState;return[typeof l=="boolean"?l:Fl(l),u]},useSyncExternalStore:Of,useId:Xd,useHostTransitionStatus:Ff,useFormState:Rh,useActionState:Rh,useOptimistic:function(l,u){var d=Cr();return $s(d,Ht,l,u)},useMemoCache:Ul,useCacheRefresh:X1},ZS={readContext:oi,use:Ea,useCallback:Yd,useContext:oi,useEffect:G1,useImperativeHandle:Gd,useInsertionEffect:Wd,useLayoutEffect:kc,useMemo:Y1,useReducer:Ih,useRef:Nh,useState:function(){return Ih(Sa)},useDebugValue:$d,useDeferredValue:function(l,u){var d=Cr();return Ht===null?Pc(d,l,u):Dh(d,Ht.memoizedState,l,u)},useTransition:function(){var l=Ih(Sa)[0],u=Cr().memoizedState;return[typeof l=="boolean"?l:Fl(l),u]},useSyncExternalStore:Of,useId:Xd,useHostTransitionStatus:Ff,useFormState:W1,useActionState:W1,useOptimistic:function(l,u){var d=Cr();return Ht!==null?$s(d,Ht,l,u):(d.baseState=l,[l,d.queue.dispatch])},useMemoCache:Ul,useCacheRefresh:X1},Oh=null,Jd=0;function Z1(l){var u=Jd;return Jd+=1,Oh===null&&(Oh=[]),Pe(Oh,l,u)}function e0(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function J1(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Nx(l){var u=l._init;return u(l._payload)}function Dx(l){function u(De,Ee){if(l){var ke=De.deletions;ke===null?(De.deletions=[Ee],De.flags|=16):ke.push(Ee)}}function d(De,Ee){if(!l)return null;for(;Ee!==null;)u(De,Ee),Ee=Ee.sibling;return null}function v(De){for(var Ee=new Map;De!==null;)De.key!==null?Ee.set(De.key,De):Ee.set(De.index,De),De=De.sibling;return Ee}function A(De,Ee){return De=fs(De,Ee),De.index=0,De.sibling=null,De}function D(De,Ee,ke){return De.index=ke,l?(ke=De.alternate,ke!==null?(ke=ke.index,ke<Ee?(De.flags|=67108866,Ee):ke):(De.flags|=67108866,Ee)):(De.flags|=1048576,Ee)}function K(De){return l&&De.alternate===null&&(De.flags|=67108866),De}function ce(De,Ee,ke,Qe){return Ee===null||Ee.tag!==6?(Ee=bh(ke,De.mode,Qe),Ee.return=De,Ee):(Ee=A(Ee,ke),Ee.return=De,Ee)}function ye(De,Ee,ke,Qe){var Ct=ke.type;return Ct===b?Ye(De,Ee,ke.props.children,Qe,ke.key):Ee!==null&&(Ee.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===E&&Nx(Ct)===Ee.type)?(Ee=A(Ee,ke.props),e0(Ee,ke),Ee.return=De,Ee):(Ee=Cc(ke.type,ke.key,ke.props,null,De.mode,Qe),e0(Ee,ke),Ee.return=De,Ee)}function Me(De,Ee,ke,Qe){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==ke.containerInfo||Ee.stateNode.implementation!==ke.implementation?(Ee=Sf(ke,De.mode,Qe),Ee.return=De,Ee):(Ee=A(Ee,ke.children||[]),Ee.return=De,Ee)}function Ye(De,Ee,ke,Qe,Ct){return Ee===null||Ee.tag!==7?(Ee=Us(ke,De.mode,Qe,Ct),Ee.return=De,Ee):(Ee=A(Ee,ke),Ee.return=De,Ee)}function et(De,Ee,ke){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ee=bh(""+Ee,De.mode,ke),Ee.return=De,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case g:return ke=Cc(Ee.type,Ee.key,Ee.props,null,De.mode,ke),e0(ke,Ee),ke.return=De,ke;case m:return Ee=Sf(Ee,De.mode,ke),Ee.return=De,Ee;case E:var Qe=Ee._init;return Ee=Qe(Ee._payload),et(De,Ee,ke)}if(Q(Ee)||k(Ee))return Ee=Us(Ee,De.mode,ke,null),Ee.return=De,Ee;if(typeof Ee.then=="function")return et(De,Z1(Ee),ke);if(Ee.$$typeof===j)return et(De,Ml(De,Ee),ke);J1(De,Ee)}return null}function Fe(De,Ee,ke,Qe){var Ct=Ee!==null?Ee.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Ct!==null?null:ce(De,Ee,""+ke,Qe);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case g:return ke.key===Ct?ye(De,Ee,ke,Qe):null;case m:return ke.key===Ct?Me(De,Ee,ke,Qe):null;case E:return Ct=ke._init,ke=Ct(ke._payload),Fe(De,Ee,ke,Qe)}if(Q(ke)||k(ke))return Ct!==null?null:Ye(De,Ee,ke,Qe,null);if(typeof ke.then=="function")return Fe(De,Ee,Z1(ke),Qe);if(ke.$$typeof===j)return Fe(De,Ee,Ml(De,ke),Qe);J1(De,ke)}return null}function Ue(De,Ee,ke,Qe,Ct){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return De=De.get(ke)||null,ce(Ee,De,""+Qe,Ct);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:return De=De.get(Qe.key===null?ke:Qe.key)||null,ye(Ee,De,Qe,Ct);case m:return De=De.get(Qe.key===null?ke:Qe.key)||null,Me(Ee,De,Qe,Ct);case E:var pn=Qe._init;return Qe=pn(Qe._payload),Ue(De,Ee,ke,Qe,Ct)}if(Q(Qe)||k(Qe))return De=De.get(ke)||null,Ye(Ee,De,Qe,Ct,null);if(typeof Qe.then=="function")return Ue(De,Ee,ke,Z1(Qe),Ct);if(Qe.$$typeof===j)return Ue(De,Ee,ke,Ml(Ee,Qe),Ct);J1(Ee,Qe)}return null}function Xt(De,Ee,ke,Qe){for(var Ct=null,pn=null,kt=Ee,qt=Ee=0,Gi=null;kt!==null&&qt<ke.length;qt++){kt.index>qt?(Gi=kt,kt=null):Gi=kt.sibling;var Hn=Fe(De,kt,ke[qt],Qe);if(Hn===null){kt===null&&(kt=Gi);break}l&&kt&&Hn.alternate===null&&u(De,kt),Ee=D(Hn,Ee,qt),pn===null?Ct=Hn:pn.sibling=Hn,pn=Hn,kt=Gi}if(qt===ke.length)return d(De,kt),Pn&&Tc(De,qt),Ct;if(kt===null){for(;qt<ke.length;qt++)kt=et(De,ke[qt],Qe),kt!==null&&(Ee=D(kt,Ee,qt),pn===null?Ct=kt:pn.sibling=kt,pn=kt);return Pn&&Tc(De,qt),Ct}for(kt=v(kt);qt<ke.length;qt++)Gi=Ue(kt,De,qt,ke[qt],Qe),Gi!==null&&(l&&Gi.alternate!==null&&kt.delete(Gi.key===null?qt:Gi.key),Ee=D(Gi,Ee,qt),pn===null?Ct=Gi:pn.sibling=Gi,pn=Gi);return l&&kt.forEach(function(Vu){return u(De,Vu)}),Pn&&Tc(De,qt),Ct}function zt(De,Ee,ke,Qe){if(ke==null)throw Error(r(151));for(var Ct=null,pn=null,kt=Ee,qt=Ee=0,Gi=null,Hn=ke.next();kt!==null&&!Hn.done;qt++,Hn=ke.next()){kt.index>qt?(Gi=kt,kt=null):Gi=kt.sibling;var Vu=Fe(De,kt,Hn.value,Qe);if(Vu===null){kt===null&&(kt=Gi);break}l&&kt&&Vu.alternate===null&&u(De,kt),Ee=D(Vu,Ee,qt),pn===null?Ct=Vu:pn.sibling=Vu,pn=Vu,kt=Gi}if(Hn.done)return d(De,kt),Pn&&Tc(De,qt),Ct;if(kt===null){for(;!Hn.done;qt++,Hn=ke.next())Hn=et(De,Hn.value,Qe),Hn!==null&&(Ee=D(Hn,Ee,qt),pn===null?Ct=Hn:pn.sibling=Hn,pn=Hn);return Pn&&Tc(De,qt),Ct}for(kt=v(kt);!Hn.done;qt++,Hn=ke.next())Hn=Ue(kt,De,qt,Hn.value,Qe),Hn!==null&&(l&&Hn.alternate!==null&&kt.delete(Hn.key===null?qt:Hn.key),Ee=D(Hn,Ee,qt),pn===null?Ct=Hn:pn.sibling=Hn,pn=Hn);return l&&kt.forEach(function(JC){return u(De,JC)}),Pn&&Tc(De,qt),Ct}function pr(De,Ee,ke,Qe){if(typeof ke=="object"&&ke!==null&&ke.type===b&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case g:e:{for(var Ct=ke.key;Ee!==null;){if(Ee.key===Ct){if(Ct=ke.type,Ct===b){if(Ee.tag===7){d(De,Ee.sibling),Qe=A(Ee,ke.props.children),Qe.return=De,De=Qe;break e}}else if(Ee.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===E&&Nx(Ct)===Ee.type){d(De,Ee.sibling),Qe=A(Ee,ke.props),e0(Qe,ke),Qe.return=De,De=Qe;break e}d(De,Ee);break}else u(De,Ee);Ee=Ee.sibling}ke.type===b?(Qe=Us(ke.props.children,De.mode,Qe,ke.key),Qe.return=De,De=Qe):(Qe=Cc(ke.type,ke.key,ke.props,null,De.mode,Qe),e0(Qe,ke),Qe.return=De,De=Qe)}return K(De);case m:e:{for(Ct=ke.key;Ee!==null;){if(Ee.key===Ct)if(Ee.tag===4&&Ee.stateNode.containerInfo===ke.containerInfo&&Ee.stateNode.implementation===ke.implementation){d(De,Ee.sibling),Qe=A(Ee,ke.children||[]),Qe.return=De,De=Qe;break e}else{d(De,Ee);break}else u(De,Ee);Ee=Ee.sibling}Qe=Sf(ke,De.mode,Qe),Qe.return=De,De=Qe}return K(De);case E:return Ct=ke._init,ke=Ct(ke._payload),pr(De,Ee,ke,Qe)}if(Q(ke))return Xt(De,Ee,ke,Qe);if(k(ke)){if(Ct=k(ke),typeof Ct!="function")throw Error(r(150));return ke=Ct.call(ke),zt(De,Ee,ke,Qe)}if(typeof ke.then=="function")return pr(De,Ee,Z1(ke),Qe);if(ke.$$typeof===j)return pr(De,Ee,Ml(De,ke),Qe);J1(De,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,Ee!==null&&Ee.tag===6?(d(De,Ee.sibling),Qe=A(Ee,ke),Qe.return=De,De=Qe):(d(De,Ee),Qe=bh(ke,De.mode,Qe),Qe.return=De,De=Qe),K(De)):d(De,Ee)}return function(De,Ee,ke,Qe){try{Jd=0;var Ct=pr(De,Ee,ke,Qe);return Oh=null,Ct}catch(kt){if(kt===re||kt===se)throw kt;var pn=qi(29,kt,null,De.mode);return pn.lanes=Qe,pn.return=De,pn}finally{}}}var kh=Dx(!0),Ox=Dx(!1),vs=ge(null),zl=null;function Iu(l){var u=l.alternate;Z(Ni,Ni.current&1),Z(vs,l),zl===null&&(u===null||sn.current!==null||u.memoizedState!==null)&&(zl=l)}function kx(l){if(l.tag===22){if(Z(Ni,Ni.current),Z(vs,l),zl===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(zl=l)}}else Tu()}function Tu(){Z(Ni,Ni.current),Z(vs,vs.current)}function Lc(l){G(vs),zl===l&&(zl=null),G(Ni)}var Ni=ge(0);function ep(l){for(var u=l;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||B2(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Xm(l,u,d,v){u=l.memoizedState,d=d(v,u),d=d==null?u:h({},u,d),l.memoizedState=d,l.lanes===0&&(l.updateQueue.baseState=d)}var Km={enqueueSetState:function(l,u,d){l=l._reactInternals;var v=Wo(),A=Ge(v);A.payload=u,d!=null&&(A.callback=d),u=Je(l,A,v),u!==null&&(Go(u,l,v),Xe(u,l,v))},enqueueReplaceState:function(l,u,d){l=l._reactInternals;var v=Wo(),A=Ge(v);A.tag=1,A.payload=u,d!=null&&(A.callback=d),u=Je(l,A,v),u!==null&&(Go(u,l,v),Xe(u,l,v))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var d=Wo(),v=Ge(d);v.tag=2,u!=null&&(v.callback=u),u=Je(l,v,d),u!==null&&(Go(u,l,d),Xe(u,l,d))}};function Px(l,u,d,v,A,D,K){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,D,K):u.prototype&&u.prototype.isPureReactComponent?!El(d,v)||!El(A,D):!0}function Lx(l,u,d,v){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,v),u.state!==l&&Km.enqueueReplaceState(u,u.state,null)}function Uf(l,u){var d=u;if("ref"in u){d={};for(var v in u)v!=="ref"&&(d[v]=u[v])}if(l=l.defaultProps){d===u&&(d=h({},d));for(var A in l)d[A]===void 0&&(d[A]=l[A])}return d}var tp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Mx(l){tp(l)}function jx(l){console.error(l)}function Bx(l){tp(l)}function np(l,u){try{var d=l.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function Fx(l,u,d){try{var v=l.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Qm(l,u,d){return d=Ge(d),d.tag=3,d.payload={element:null},d.callback=function(){np(l,u)},d}function Ux(l){return l=Ge(l),l.tag=3,l}function zx(l,u,d,v){var A=d.type.getDerivedStateFromError;if(typeof A=="function"){var D=v.value;l.payload=function(){return A(D)},l.callback=function(){Fx(u,d,v)}}var K=d.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(l.callback=function(){Fx(u,d,v),typeof A!="function"&&(Pu===null?Pu=new Set([this]):Pu.add(this));var ce=v.stack;this.componentDidCatch(v.value,{componentStack:ce!==null?ce:""})})}function JS(l,u,d,v,A){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=d.alternate,u!==null&&wu(u,d,A,!0),d=vs.current,d!==null){switch(d.tag){case 13:return zl===null?w2():d.alternate===null&&Jr===0&&(Jr=3),d.flags&=-257,d.flags|=65536,d.lanes=A,v===ue?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([v]):u.add(v),A2(l,v,A)),!1;case 22:return d.flags|=65536,v===ue?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([v]):d.add(v)),A2(l,v,A)),!1}throw Error(r(435,d.tag))}return A2(l,v,A),w2(),!1}if(Pn)return u=vs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=A,v!==Bd&&(l=Error(r(422),{cause:v}),bu(ln(l,d)))):(v!==Bd&&(u=Error(r(423),{cause:v}),bu(ln(u,d))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,v=ln(v,d),A=Qm(l.stateNode,v,A),xt(l,A),Jr!==4&&(Jr=2)),!1;var D=Error(r(520),{cause:v});if(D=ln(D,d),s0===null?s0=[D]:s0.push(D),Jr!==4&&(Jr=2),u===null)return!0;v=ln(v,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,l=A&-A,d.lanes|=l,l=Qm(d.stateNode,v,l),xt(d,l),!1;case 1:if(u=d.type,D=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Pu===null||!Pu.has(D))))return d.flags|=65536,A&=-A,d.lanes|=A,A=Ux(A),zx(A,l,d,v),xt(d,A),!1}d=d.return}while(d!==null);return!1}var Vx=Error(r(461)),Hi=!1;function ia(l,u,d,v){u.child=l===null?Ox(u,null,d,v):kh(u,l.child,d,v)}function qx(l,u,d,v,A){d=d.render;var D=u.ref;if("ref"in v){var K={};for(var ce in v)ce!=="ref"&&(K[ce]=v[ce])}else K=v;return gs(u),v=Uo(l,u,d,K,D,A),ce=wr(),l!==null&&!Hi?(Nf(l,u,A),Mc(l,u,A)):(Pn&&ce&&Cf(u),u.flags|=1,ia(l,u,v,A),u.child)}function Hx(l,u,d,v,A){if(l===null){var D=d.type;return typeof D=="function"&&!yu(D)&&D.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=D,Wx(l,u,D,v,A)):(l=Cc(d.type,null,v,u,u.mode,A),l.ref=u.ref,l.return=u,u.child=l)}if(D=l.child,!a2(l,A)){var K=D.memoizedProps;if(d=d.compare,d=d!==null?d:El,d(K,v)&&l.ref===u.ref)return Mc(l,u,A)}return u.flags|=1,l=fs(D,v),l.ref=u.ref,l.return=u,u.child=l}function Wx(l,u,d,v,A){if(l!==null){var D=l.memoizedProps;if(El(D,v)&&l.ref===u.ref)if(Hi=!1,u.pendingProps=v=D,a2(l,A))(l.flags&131072)!==0&&(Hi=!0);else return u.lanes=l.lanes,Mc(l,u,A)}return Zm(l,u,d,v,A)}function Gx(l,u,d){var v=u.pendingProps,A=v.children,D=l!==null?l.memoizedState:null;if(v.mode==="hidden"){if((u.flags&128)!==0){if(v=D!==null?D.baseLanes|d:d,l!==null){for(A=u.child=l.child,D=0;A!==null;)D=D|A.lanes|A.childLanes,A=A.sibling;u.childLanes=D&~v}else u.childLanes=0,u.child=null;return $x(l,u,v,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&W(u,D!==null?D.cachePool:null),D!==null?Zn(u,D):Vn(),kx(u);else return u.lanes=u.childLanes=536870912,$x(l,u,D!==null?D.baseLanes|d:d,d)}else D!==null?(W(u,D.cachePool),Zn(u,D),Tu(),u.memoizedState=null):(l!==null&&W(u,null),Vn(),Tu());return ia(l,u,A,d),u.child}function $x(l,u,d,v){var A=M();return A=A===null?null:{parent:si._currentValue,pool:A},u.memoizedState={baseLanes:d,cachePool:A},l!==null&&W(u,null),Vn(),kx(u),l!==null&&wu(l,u,v,!0),null}function rp(l,u){var d=u.ref;if(d===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(l===null||l.ref!==d)&&(u.flags|=4194816)}}function Zm(l,u,d,v,A){return gs(u),d=Uo(l,u,d,v,void 0,A),v=wr(),l!==null&&!Hi?(Nf(l,u,A),Mc(l,u,A)):(Pn&&v&&Cf(u),u.flags|=1,ia(l,u,d,A),u.child)}function Yx(l,u,d,v,A,D){return gs(u),u.updateQueue=null,d=Dc(u,v,d,A),jl(l),v=wr(),l!==null&&!Hi?(Nf(l,u,D),Mc(l,u,D)):(Pn&&v&&Cf(u),u.flags|=1,ia(l,u,d,D),u.child)}function Xx(l,u,d,v,A){if(gs(u),u.stateNode===null){var D=yi,K=d.contextType;typeof K=="object"&&K!==null&&(D=oi(K)),D=new d(v,D),u.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=Km,u.stateNode=D,D._reactInternals=u,D=u.stateNode,D.props=v,D.state=u.memoizedState,D.refs={},we(u),K=d.contextType,D.context=typeof K=="object"&&K!==null?oi(K):yi,D.state=u.memoizedState,K=d.getDerivedStateFromProps,typeof K=="function"&&(Xm(u,d,K,v),D.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(K=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),K!==D.state&&Km.enqueueReplaceState(D,D.state,null),gt(u,v,D,A),Ot(),D.state=u.memoizedState),typeof D.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(l===null){D=u.stateNode;var ce=u.memoizedProps,ye=Uf(d,ce);D.props=ye;var Me=D.context,Ye=d.contextType;K=yi,typeof Ye=="object"&&Ye!==null&&(K=oi(Ye));var et=d.getDerivedStateFromProps;Ye=typeof et=="function"||typeof D.getSnapshotBeforeUpdate=="function",ce=u.pendingProps!==ce,Ye||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ce||Me!==K)&&Lx(u,D,v,K),ze=!1;var Fe=u.memoizedState;D.state=Fe,gt(u,v,D,A),Ot(),Me=u.memoizedState,ce||Fe!==Me||ze?(typeof et=="function"&&(Xm(u,d,et,v),Me=u.memoizedState),(ye=ze||Px(u,d,ye,v,Fe,Me,K))?(Ye||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(u.flags|=4194308)):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=Me),D.props=v,D.state=Me,D.context=K,v=ye):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{D=u.stateNode,Se(l,u),K=u.memoizedProps,Ye=Uf(d,K),D.props=Ye,et=u.pendingProps,Fe=D.context,Me=d.contextType,ye=yi,typeof Me=="object"&&Me!==null&&(ye=oi(Me)),ce=d.getDerivedStateFromProps,(Me=typeof ce=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(K!==et||Fe!==ye)&&Lx(u,D,v,ye),ze=!1,Fe=u.memoizedState,D.state=Fe,gt(u,v,D,A),Ot();var Ue=u.memoizedState;K!==et||Fe!==Ue||ze||l!==null&&l.dependencies!==null&&Eh(l.dependencies)?(typeof ce=="function"&&(Xm(u,d,ce,v),Ue=u.memoizedState),(Ye=ze||Px(u,d,Ye,v,Fe,Ue,ye)||l!==null&&l.dependencies!==null&&Eh(l.dependencies))?(Me||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(v,Ue,ye),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(v,Ue,ye)),typeof D.componentDidUpdate=="function"&&(u.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof D.componentDidUpdate!="function"||K===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||K===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=Ue),D.props=v,D.state=Ue,D.context=ye,v=Ye):(typeof D.componentDidUpdate!="function"||K===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||K===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=1024),v=!1)}return D=v,rp(l,u),v=(u.flags&128)!==0,D||v?(D=u.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:D.render(),u.flags|=1,l!==null&&v?(u.child=kh(u,l.child,null,A),u.child=kh(u,null,d,A)):ia(l,u,d,A),u.memoizedState=D.state,l=u.child):l=Mc(l,u,A),l}function Kx(l,u,d,v){return Ga(),u.flags|=256,ia(l,u,d,v),u.child}var Jm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function e2(l){return{baseLanes:l,cachePool:J()}}function t2(l,u,d){return l=l!==null?l.childLanes&~d:0,u&&(l|=ys),l}function Qx(l,u,d){var v=u.pendingProps,A=!1,D=(u.flags&128)!==0,K;if((K=D)||(K=l!==null&&l.memoizedState===null?!1:(Ni.current&2)!==0),K&&(A=!0,u.flags&=-129),K=(u.flags&32)!==0,u.flags&=-33,l===null){if(Pn){if(A?Iu(u):Tu(),Pn){var ce=Pr,ye;if(ye=ce){e:{for(ye=ce,ce=hs;ye.nodeType!==8;){if(!ce){ce=null;break e}if(ye=Zs(ye.nextSibling),ye===null){ce=null;break e}}ce=ye}ce!==null?(u.memoizedState={dehydrated:ce,treeContext:Ic!==null?{id:Vs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},ye=qi(18,null,null,0),ye.stateNode=ce,ye.return=u,u.child=ye,ai=u,Pr=null,ye=!0):ye=!1}ye||Rc(u)}if(ce=u.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return B2(ce)?u.lanes=32:u.lanes=536870912,null;Lc(u)}return ce=v.children,v=v.fallback,A?(Tu(),A=u.mode,ce=ip({mode:"hidden",children:ce},A),v=Us(v,A,d,null),ce.return=u,v.return=u,ce.sibling=v,u.child=ce,A=u.child,A.memoizedState=e2(d),A.childLanes=t2(l,K,d),u.memoizedState=Jm,v):(Iu(u),n2(u,ce))}if(ye=l.memoizedState,ye!==null&&(ce=ye.dehydrated,ce!==null)){if(D)u.flags&256?(Iu(u),u.flags&=-257,u=r2(l,u,d)):u.memoizedState!==null?(Tu(),u.child=l.child,u.flags|=128,u=null):(Tu(),A=v.fallback,ce=u.mode,v=ip({mode:"visible",children:v.children},ce),A=Us(A,ce,d,null),A.flags|=2,v.return=u,A.return=u,v.sibling=A,u.child=v,kh(u,l.child,null,d),v=u.child,v.memoizedState=e2(d),v.childLanes=t2(l,K,d),u.memoizedState=Jm,u=A);else if(Iu(u),B2(ce)){if(K=ce.nextSibling&&ce.nextSibling.dataset,K)var Me=K.dgst;K=Me,v=Error(r(419)),v.stack="",v.digest=K,bu({value:v,source:null,stack:null}),u=r2(l,u,d)}else if(Hi||wu(l,u,d,!1),K=(d&l.childLanes)!==0,Hi||K){if(K=_r,K!==null&&(v=d&-d,v=(v&42)!==0?1:Si(v),v=(v&(K.suspendedLanes|d))!==0?0:v,v!==0&&v!==ye.retryLane))throw ye.retryLane=v,Fs(l,v),Go(K,l,v),Vx;ce.data==="$?"||w2(),u=r2(l,u,d)}else ce.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=ye.treeContext,Pr=Zs(ce.nextSibling),ai=u,Pn=!0,Pl=null,hs=!1,l!==null&&(fo[Wa++]=Vs,fo[Wa++]=qs,fo[Wa++]=Ic,Vs=l.id,qs=l.overflow,Ic=u),u=n2(u,v.children),u.flags|=4096);return u}return A?(Tu(),A=v.fallback,ce=u.mode,ye=l.child,Me=ye.sibling,v=fs(ye,{mode:"hidden",children:v.children}),v.subtreeFlags=ye.subtreeFlags&65011712,Me!==null?A=fs(Me,A):(A=Us(A,ce,d,null),A.flags|=2),A.return=u,v.return=u,v.sibling=A,u.child=v,v=A,A=u.child,ce=l.child.memoizedState,ce===null?ce=e2(d):(ye=ce.cachePool,ye!==null?(Me=si._currentValue,ye=ye.parent!==Me?{parent:Me,pool:Me}:ye):ye=J(),ce={baseLanes:ce.baseLanes|d,cachePool:ye}),A.memoizedState=ce,A.childLanes=t2(l,K,d),u.memoizedState=Jm,v):(Iu(u),d=l.child,l=d.sibling,d=fs(d,{mode:"visible",children:v.children}),d.return=u,d.sibling=null,l!==null&&(K=u.deletions,K===null?(u.deletions=[l],u.flags|=16):K.push(l)),u.child=d,u.memoizedState=null,d)}function n2(l,u){return u=ip({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function ip(l,u){return l=qi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function r2(l,u,d){return kh(u,l.child,null,d),l=n2(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function Zx(l,u,d){l.lanes|=u;var v=l.alternate;v!==null&&(v.lanes|=u),_h(l.return,u,d)}function i2(l,u,d,v,A){var D=l.memoizedState;D===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:A}:(D.isBackwards=u,D.rendering=null,D.renderingStartTime=0,D.last=v,D.tail=d,D.tailMode=A)}function Jx(l,u,d){var v=u.pendingProps,A=v.revealOrder,D=v.tail;if(ia(l,u,v.children,d),v=Ni.current,(v&2)!==0)v=v&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Zx(l,d,u);else if(l.tag===19)Zx(l,d,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}switch(Z(Ni,v),A){case"forwards":for(d=u.child,A=null;d!==null;)l=d.alternate,l!==null&&ep(l)===null&&(A=d),d=d.sibling;d=A,d===null?(A=u.child,u.child=null):(A=d.sibling,d.sibling=null),i2(u,!1,A,d,D);break;case"backwards":for(d=null,A=u.child,u.child=null;A!==null;){if(l=A.alternate,l!==null&&ep(l)===null){u.child=A;break}l=A.sibling,A.sibling=d,d=A,A=l}i2(u,!0,d,null,D);break;case"together":i2(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Mc(l,u,d){if(l!==null&&(u.dependencies=l.dependencies),ku|=u.lanes,(d&u.childLanes)===0)if(l!==null){if(wu(l,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,d=fs(l,l.pendingProps),u.child=d,d.return=u;l.sibling!==null;)l=l.sibling,d=d.sibling=fs(l,l.pendingProps),d.return=u;d.sibling=null}return u.child}function a2(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Eh(l)))}function eC(l,u,d){switch(u.tag){case 3:_e(u,u.stateNode.containerInfo),Ll(u,si,l.memoizedState.cache),Ga();break;case 27:case 5:$e(u);break;case 4:_e(u,u.stateNode.containerInfo);break;case 10:Ll(u,u.type,u.memoizedProps.value);break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(Iu(u),u.flags|=128,null):(d&u.child.childLanes)!==0?Qx(l,u,d):(Iu(u),l=Mc(l,u,d),l!==null?l.sibling:null);Iu(u);break;case 19:var A=(l.flags&128)!==0;if(v=(d&u.childLanes)!==0,v||(wu(l,u,d,!1),v=(d&u.childLanes)!==0),A){if(v)return Jx(l,u,d);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Z(Ni,Ni.current),v)break;return null;case 22:case 23:return u.lanes=0,Gx(l,u,d);case 24:Ll(u,si,l.memoizedState.cache)}return Mc(l,u,d)}function eb(l,u,d){if(l!==null)if(l.memoizedProps!==u.pendingProps)Hi=!0;else{if(!a2(l,d)&&(u.flags&128)===0)return Hi=!1,eC(l,u,d);Hi=(l.flags&131072)!==0}else Hi=!1,Pn&&(u.flags&1048576)!==0&&P1(u,wh,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var v=u.elementType,A=v._init;if(v=A(v._payload),u.type=v,typeof v=="function")yu(v)?(l=Uf(v,l),u.tag=1,u=Xx(null,u,v,l,d)):(u.tag=0,u=Zm(null,u,v,l,d));else{if(v!=null){if(A=v.$$typeof,A===q){u.tag=11,u=qx(null,u,v,l,d);break e}else if(A===P){u.tag=14,u=Hx(null,u,v,l,d);break e}}throw u=V(v)||v,Error(r(306,u,""))}}return u;case 0:return Zm(l,u,u.type,u.pendingProps,d);case 1:return v=u.type,A=Uf(v,u.pendingProps),Xx(l,u,v,A,d);case 3:e:{if(_e(u,u.stateNode.containerInfo),l===null)throw Error(r(387));v=u.pendingProps;var D=u.memoizedState;A=D.element,Se(l,u),gt(u,v,null,d);var K=u.memoizedState;if(v=K.cache,Ll(u,si,v),v!==D.cache&&Ah(u,[si],d,!0),Ot(),v=K.element,D.isDehydrated)if(D={element:v,isDehydrated:!1,cache:K.cache},u.updateQueue.baseState=D,u.memoizedState=D,u.flags&256){u=Kx(l,u,v,d);break e}else if(v!==A){A=ln(Error(r(424)),u),bu(A),u=Kx(l,u,v,d);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Pr=Zs(l.firstChild),ai=u,Pn=!0,Pl=null,hs=!0,d=Ox(u,null,v,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Ga(),v===A){u=Mc(l,u,d);break e}ia(l,u,v,d)}u=u.child}return u;case 26:return rp(l,u),l===null?(d=iw(u.type,null,u.pendingProps,null))?u.memoizedState=d:Pn||(d=u.type,l=u.pendingProps,v=yp(pe.current).createElement(d),v[Gn]=u,v[$n]=l,oa(v,d,l),Bn(v),u.stateNode=v):u.memoizedState=iw(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return $e(u),l===null&&Pn&&(v=u.stateNode=tw(u.type,u.pendingProps,pe.current),ai=u,hs=!0,A=Pr,ju(u.type)?(F2=A,Pr=Zs(v.firstChild)):Pr=A),ia(l,u,u.pendingProps.children,d),rp(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Pn&&((A=v=Pr)&&(v=TC(v,u.type,u.pendingProps,hs),v!==null?(u.stateNode=v,ai=u,Pr=Zs(v.firstChild),hs=!1,A=!0):A=!1),A||Rc(u)),$e(u),A=u.type,D=u.pendingProps,K=l!==null?l.memoizedProps:null,v=D.children,L2(A,D)?v=null:K!==null&&L2(A,K)&&(u.flags|=32),u.memoizedState!==null&&(A=Uo(l,u,Bl,null,null,d),m0._currentValue=A),rp(l,u),ia(l,u,v,d),u.child;case 6:return l===null&&Pn&&((l=d=Pr)&&(d=RC(d,u.pendingProps,hs),d!==null?(u.stateNode=d,ai=u,Pr=null,l=!0):l=!1),l||Rc(u)),null;case 13:return Qx(l,u,d);case 4:return _e(u,u.stateNode.containerInfo),v=u.pendingProps,l===null?u.child=kh(u,null,v,d):ia(l,u,v,d),u.child;case 11:return qx(l,u,u.type,u.pendingProps,d);case 7:return ia(l,u,u.pendingProps,d),u.child;case 8:return ia(l,u,u.pendingProps.children,d),u.child;case 12:return ia(l,u,u.pendingProps.children,d),u.child;case 10:return v=u.pendingProps,Ll(u,u.type,v.value),ia(l,u,v.children,d),u.child;case 9:return A=u.type._context,v=u.pendingProps.children,gs(u),A=oi(A),v=v(A),u.flags|=1,ia(l,u,v,d),u.child;case 14:return Hx(l,u,u.type,u.pendingProps,d);case 15:return Wx(l,u,u.type,u.pendingProps,d);case 19:return Jx(l,u,d);case 31:return v=u.pendingProps,d=u.mode,v={mode:v.mode,children:v.children},l===null?(d=ip(v,d),d.ref=u.ref,u.child=d,d.return=u,u=d):(d=fs(l.child,v),d.ref=u.ref,u.child=d,d.return=u,u=d),u;case 22:return Gx(l,u,d);case 24:return gs(u),v=oi(si),l===null?(A=M(),A===null&&(A=_r,D=Fd(),A.pooledCache=D,D.refCount++,D!==null&&(A.pooledCacheLanes|=d),A=D),u.memoizedState={parent:v,cache:A},we(u),Ll(u,si,A)):((l.lanes&d)!==0&&(Se(l,u),gt(u,null,null,d),Ot()),A=l.memoizedState,D=u.memoizedState,A.parent!==v?(A={parent:v,cache:v},u.memoizedState=A,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=A),Ll(u,si,v)):(v=D.cache,Ll(u,si,v),v!==A.cache&&Ah(u,[si],d,!0))),ia(l,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function jc(l){l.flags|=4}function tb(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!cw(u)){if(u=vs.current,u!==null&&((Nn&4194048)===Nn?zl!==null:(Nn&62914560)!==Nn&&(Nn&536870912)===0||u!==zl))throw Oe=ue,ie;l.flags|=8192}}function ap(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?In():536870912,l.lanes|=u,jh|=u)}function t0(l,u){if(!Pn)switch(l.tailMode){case"hidden":u=l.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?l.tail=null:d.sibling=null;break;case"collapsed":d=l.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Vr(l){var u=l.alternate!==null&&l.alternate.child===l.child,d=0,v=0;if(u)for(var A=l.child;A!==null;)d|=A.lanes|A.childLanes,v|=A.subtreeFlags&65011712,v|=A.flags&65011712,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)d|=A.lanes|A.childLanes,v|=A.subtreeFlags,v|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=v,l.childLanes=d,u}function tC(l,u,d){var v=u.pendingProps;switch(If(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(u),null;case 1:return Vr(u),null;case 3:return d=u.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),ps(si),Ie(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(l===null||l.child===null)&&(na(u)?jc(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,M1())),Vr(u),null;case 26:return d=u.memoizedState,l===null?(jc(u),d!==null?(Vr(u),tb(u,d)):(Vr(u),u.flags&=-16777217)):d?d!==l.memoizedState?(jc(u),Vr(u),tb(u,d)):(Vr(u),u.flags&=-16777217):(l.memoizedProps!==v&&jc(u),Vr(u),u.flags&=-16777217),null;case 27:qe(u),d=pe.current;var A=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==v&&jc(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}l=ne.current,na(u)?L1(u):(l=tw(A,v,d),u.stateNode=l,jc(u))}return Vr(u),null;case 5:if(qe(u),d=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==v&&jc(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}if(l=ne.current,na(u))L1(u);else{switch(A=yp(pe.current),l){case 1:l=A.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:l=A.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":l=A.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":l=A.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":l=A.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof v.is=="string"?A.createElement("select",{is:v.is}):A.createElement("select"),v.multiple?l.multiple=!0:v.size&&(l.size=v.size);break;default:l=typeof v.is=="string"?A.createElement(d,{is:v.is}):A.createElement(d)}}l[Gn]=u,l[$n]=v;e:for(A=u.child;A!==null;){if(A.tag===5||A.tag===6)l.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===u)break e;for(;A.sibling===null;){if(A.return===null||A.return===u)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}u.stateNode=l;e:switch(oa(l,d,v),d){case"button":case"input":case"select":case"textarea":l=!!v.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&jc(u)}}return Vr(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==v&&jc(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(r(166));if(l=pe.current,na(u)){if(l=u.stateNode,d=u.memoizedProps,v=null,A=ai,A!==null)switch(A.tag){case 27:case 5:v=A.memoizedProps}l[Gn]=u,l=!!(l.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||Yb(l.nodeValue,d)),l||Rc(u)}else l=yp(l).createTextNode(v),l[Gn]=u,u.stateNode=l}return Vr(u),null;case 13:if(v=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=na(u),v!==null&&v.dehydrated!==null){if(l===null){if(!A)throw Error(r(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[Gn]=u}else Ga(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vr(u),A=!1}else A=M1(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=A),A=!0;if(!A)return u.flags&256?(Lc(u),u):(Lc(u),null)}if(Lc(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=v!==null,l=l!==null&&l.memoizedState!==null,d){v=u.child,A=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(A=v.alternate.memoizedState.cachePool.pool);var D=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(D=v.memoizedState.cachePool.pool),D!==A&&(v.flags|=2048)}return d!==l&&d&&(u.child.flags|=8192),ap(u,u.updateQueue),Vr(u),null;case 4:return Ie(),l===null&&N2(u.stateNode.containerInfo),Vr(u),null;case 10:return ps(u.type),Vr(u),null;case 19:if(G(Ni),A=u.memoizedState,A===null)return Vr(u),null;if(v=(u.flags&128)!==0,D=A.rendering,D===null)if(v)t0(A,!1);else{if(Jr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(D=ep(l),D!==null){for(u.flags|=128,t0(A,!1),l=D.updateQueue,u.updateQueue=l,ap(u,l),u.subtreeFlags=0,l=d,d=u.child;d!==null;)Ef(d,l),d=d.sibling;return Z(Ni,Ni.current&1|2),u.child}l=l.sibling}A.tail!==null&&ht()>lp&&(u.flags|=128,v=!0,t0(A,!1),u.lanes=4194304)}else{if(!v)if(l=ep(D),l!==null){if(u.flags|=128,v=!0,l=l.updateQueue,u.updateQueue=l,ap(u,l),t0(A,!0),A.tail===null&&A.tailMode==="hidden"&&!D.alternate&&!Pn)return Vr(u),null}else 2*ht()-A.renderingStartTime>lp&&d!==536870912&&(u.flags|=128,v=!0,t0(A,!1),u.lanes=4194304);A.isBackwards?(D.sibling=u.child,u.child=D):(l=A.last,l!==null?l.sibling=D:u.child=D,A.last=D)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=ht(),u.sibling=null,l=Ni.current,Z(Ni,v?l&1|2:l&1),u):(Vr(u),null);case 22:case 23:return Lc(u),Zt(),v=u.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(d&536870912)!==0&&(u.flags&128)===0&&(Vr(u),u.subtreeFlags&6&&(u.flags|=8192)):Vr(u),d=u.updateQueue,d!==null&&ap(u,d.retryQueue),d=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==d&&(u.flags|=2048),l!==null&&G(S),null;case 24:return d=null,l!==null&&(d=l.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),ps(si),Vr(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function nC(l,u){switch(If(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return ps(si),Ie(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return qe(u),null;case 13:if(Lc(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ga()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return G(Ni),null;case 4:return Ie(),null;case 10:return ps(u.type),null;case 22:case 23:return Lc(u),Zt(),l!==null&&G(S),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return ps(si),null;case 25:return null;default:return null}}function nb(l,u){switch(If(u),u.tag){case 3:ps(si),Ie();break;case 26:case 27:case 5:qe(u);break;case 4:Ie();break;case 13:Lc(u);break;case 19:G(Ni);break;case 10:ps(u.type);break;case 22:case 23:Lc(u),Zt(),l!==null&&G(S);break;case 24:ps(si)}}function n0(l,u){try{var d=u.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var A=v.next;d=A;do{if((d.tag&l)===l){v=void 0;var D=d.create,K=d.inst;v=D(),K.destroy=v}d=d.next}while(d!==A)}}catch(ce){xr(u,u.return,ce)}}function Ru(l,u,d){try{var v=u.updateQueue,A=v!==null?v.lastEffect:null;if(A!==null){var D=A.next;v=D;do{if((v.tag&l)===l){var K=v.inst,ce=K.destroy;if(ce!==void 0){K.destroy=void 0,A=u;var ye=d,Me=ce;try{Me()}catch(Ye){xr(A,ye,Ye)}}}v=v.next}while(v!==D)}}catch(Ye){xr(u,u.return,Ye)}}function rb(l){var u=l.updateQueue;if(u!==null){var d=l.stateNode;try{zn(u,d)}catch(v){xr(l,l.return,v)}}}function ib(l,u,d){d.props=Uf(l.type,l.memoizedProps),d.state=l.memoizedState;try{d.componentWillUnmount()}catch(v){xr(l,u,v)}}function r0(l,u){try{var d=l.ref;if(d!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof d=="function"?l.refCleanup=d(v):d.current=v}}catch(A){xr(l,u,A)}}function Vl(l,u){var d=l.ref,v=l.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(A){xr(l,u,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(A){xr(l,u,A)}else d.current=null}function ab(l){var u=l.type,d=l.memoizedProps,v=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break e;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(A){xr(l,l.return,A)}}function o2(l,u,d){try{var v=l.stateNode;AC(v,l.type,d,u),v[$n]=u}catch(A){xr(l,l.return,A)}}function ob(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&ju(l.type)||l.tag===4}function s2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||ob(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&ju(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function l2(l,u,d){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(l,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(l),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=vp));else if(v!==4&&(v===27&&ju(l.type)&&(d=l.stateNode,u=null),l=l.child,l!==null))for(l2(l,u,d),l=l.sibling;l!==null;)l2(l,u,d),l=l.sibling}function op(l,u,d){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?d.insertBefore(l,u):d.appendChild(l);else if(v!==4&&(v===27&&ju(l.type)&&(d=l.stateNode),l=l.child,l!==null))for(op(l,u,d),l=l.sibling;l!==null;)op(l,u,d),l=l.sibling}function sb(l){var u=l.stateNode,d=l.memoizedProps;try{for(var v=l.type,A=u.attributes;A.length;)u.removeAttributeNode(A[0]);oa(u,v,d),u[Gn]=l,u[$n]=d}catch(D){xr(l,l.return,D)}}var Bc=!1,ci=!1,c2=!1,lb=typeof WeakSet=="function"?WeakSet:Set,Wi=null;function rC(l,u){if(l=l.containerInfo,k2=Ep,l=ta(l),Ri(l)){if("selectionStart"in l)var d={start:l.selectionStart,end:l.selectionEnd};else e:{d=(d=l.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var A=v.anchorOffset,D=v.focusNode;v=v.focusOffset;try{d.nodeType,D.nodeType}catch{d=null;break e}var K=0,ce=-1,ye=-1,Me=0,Ye=0,et=l,Fe=null;t:for(;;){for(var Ue;et!==d||A!==0&&et.nodeType!==3||(ce=K+A),et!==D||v!==0&&et.nodeType!==3||(ye=K+v),et.nodeType===3&&(K+=et.nodeValue.length),(Ue=et.firstChild)!==null;)Fe=et,et=Ue;for(;;){if(et===l)break t;if(Fe===d&&++Me===A&&(ce=K),Fe===D&&++Ye===v&&(ye=K),(Ue=et.nextSibling)!==null)break;et=Fe,Fe=et.parentNode}et=Ue}d=ce===-1||ye===-1?null:{start:ce,end:ye}}else d=null}d=d||{start:0,end:0}}else d=null;for(P2={focusedElem:l,selectionRange:d},Ep=!1,Wi=u;Wi!==null;)if(u=Wi,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Wi=l;else for(;Wi!==null;){switch(u=Wi,D=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&D!==null){l=void 0,d=u,A=D.memoizedProps,D=D.memoizedState,v=d.stateNode;try{var Xt=Uf(d.type,A,d.elementType===d.type);l=v.getSnapshotBeforeUpdate(Xt,D),v.__reactInternalSnapshotBeforeUpdate=l}catch(zt){xr(d,d.return,zt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,d=l.nodeType,d===9)j2(l);else if(d===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":j2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Wi=l;break}Wi=u.return}}function cb(l,u,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:Nu(l,d),v&4&&n0(5,d);break;case 1:if(Nu(l,d),v&4)if(l=d.stateNode,u===null)try{l.componentDidMount()}catch(K){xr(d,d.return,K)}else{var A=Uf(d.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(A,u,l.__reactInternalSnapshotBeforeUpdate)}catch(K){xr(d,d.return,K)}}v&64&&rb(d),v&512&&r0(d,d.return);break;case 3:if(Nu(l,d),v&64&&(l=d.updateQueue,l!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{zn(l,u)}catch(K){xr(d,d.return,K)}}break;case 27:u===null&&v&4&&sb(d);case 26:case 5:Nu(l,d),u===null&&v&4&&ab(d),v&512&&r0(d,d.return);break;case 12:Nu(l,d);break;case 13:Nu(l,d),v&4&&hb(l,d),v&64&&(l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(d=hC.bind(null,d),NC(l,d))));break;case 22:if(v=d.memoizedState!==null||Bc,!v){u=u!==null&&u.memoizedState!==null||ci,A=Bc;var D=ci;Bc=v,(ci=u)&&!D?Du(l,d,(d.subtreeFlags&8772)!==0):Nu(l,d),Bc=A,ci=D}break;case 30:break;default:Nu(l,d)}}function ub(l){var u=l.alternate;u!==null&&(l.alternate=null,ub(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&gi(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Lr=null,po=!1;function Fc(l,u,d){for(d=d.child;d!==null;)fb(l,u,d),d=d.sibling}function fb(l,u,d){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(vt,d)}catch{}switch(d.tag){case 26:ci||Vl(d,u),Fc(l,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:ci||Vl(d,u);var v=Lr,A=po;ju(d.type)&&(Lr=d.stateNode,po=!1),Fc(l,u,d),h0(d.stateNode),Lr=v,po=A;break;case 5:ci||Vl(d,u);case 6:if(v=Lr,A=po,Lr=null,Fc(l,u,d),Lr=v,po=A,Lr!==null)if(po)try{(Lr.nodeType===9?Lr.body:Lr.nodeName==="HTML"?Lr.ownerDocument.body:Lr).removeChild(d.stateNode)}catch(D){xr(d,u,D)}else try{Lr.removeChild(d.stateNode)}catch(D){xr(d,u,D)}break;case 18:Lr!==null&&(po?(l=Lr,Jb(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,d.stateNode),b0(l)):Jb(Lr,d.stateNode));break;case 4:v=Lr,A=po,Lr=d.stateNode.containerInfo,po=!0,Fc(l,u,d),Lr=v,po=A;break;case 0:case 11:case 14:case 15:ci||Ru(2,d,u),ci||Ru(4,d,u),Fc(l,u,d);break;case 1:ci||(Vl(d,u),v=d.stateNode,typeof v.componentWillUnmount=="function"&&ib(d,u,v)),Fc(l,u,d);break;case 21:Fc(l,u,d);break;case 22:ci=(v=ci)||d.memoizedState!==null,Fc(l,u,d),ci=v;break;default:Fc(l,u,d)}}function hb(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{b0(l)}catch(d){xr(u,u.return,d)}}function iC(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new lb),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new lb),u;default:throw Error(r(435,l.tag))}}function u2(l,u){var d=iC(l);u.forEach(function(v){var A=dC.bind(null,l,v);d.has(v)||(d.add(v),v.then(A,A))})}function Vo(l,u){var d=u.deletions;if(d!==null)for(var v=0;v<d.length;v++){var A=d[v],D=l,K=u,ce=K;e:for(;ce!==null;){switch(ce.tag){case 27:if(ju(ce.type)){Lr=ce.stateNode,po=!1;break e}break;case 5:Lr=ce.stateNode,po=!1;break e;case 3:case 4:Lr=ce.stateNode.containerInfo,po=!0;break e}ce=ce.return}if(Lr===null)throw Error(r(160));fb(D,K,A),Lr=null,po=!1,D=A.alternate,D!==null&&(D.return=null),A.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)db(u,l),u=u.sibling}var Qs=null;function db(l,u){var d=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Vo(u,l),qo(l),v&4&&(Ru(3,l,l.return),n0(3,l),Ru(5,l,l.return));break;case 1:Vo(u,l),qo(l),v&512&&(ci||d===null||Vl(d,d.return)),v&64&&Bc&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(d=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var A=Qs;if(Vo(u,l),qo(l),v&512&&(ci||d===null||Vl(d,d.return)),v&4){var D=d!==null?d.memoizedState:null;if(v=l.memoizedState,d===null)if(v===null)if(l.stateNode===null){e:{v=l.type,d=l.memoizedProps,A=A.ownerDocument||A;t:switch(v){case"title":D=A.getElementsByTagName("title")[0],(!D||D[Ji]||D[Gn]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=A.createElement(v),A.head.insertBefore(D,A.querySelector("head > title"))),oa(D,v,d),D[Gn]=l,Bn(D),v=D;break e;case"link":var K=sw("link","href",A).get(v+(d.href||""));if(K){for(var ce=0;ce<K.length;ce++)if(D=K[ce],D.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&D.getAttribute("rel")===(d.rel==null?null:d.rel)&&D.getAttribute("title")===(d.title==null?null:d.title)&&D.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){K.splice(ce,1);break t}}D=A.createElement(v),oa(D,v,d),A.head.appendChild(D);break;case"meta":if(K=sw("meta","content",A).get(v+(d.content||""))){for(ce=0;ce<K.length;ce++)if(D=K[ce],D.getAttribute("content")===(d.content==null?null:""+d.content)&&D.getAttribute("name")===(d.name==null?null:d.name)&&D.getAttribute("property")===(d.property==null?null:d.property)&&D.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&D.getAttribute("charset")===(d.charSet==null?null:d.charSet)){K.splice(ce,1);break t}}D=A.createElement(v),oa(D,v,d),A.head.appendChild(D);break;default:throw Error(r(468,v))}D[Gn]=l,Bn(D),v=D}l.stateNode=v}else lw(A,l.type,l.stateNode);else l.stateNode=ow(A,v,l.memoizedProps);else D!==v?(D===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):D.count--,v===null?lw(A,l.type,l.stateNode):ow(A,v,l.memoizedProps)):v===null&&l.stateNode!==null&&o2(l,l.memoizedProps,d.memoizedProps)}break;case 27:Vo(u,l),qo(l),v&512&&(ci||d===null||Vl(d,d.return)),d!==null&&v&4&&o2(l,l.memoizedProps,d.memoizedProps);break;case 5:if(Vo(u,l),qo(l),v&512&&(ci||d===null||Vl(d,d.return)),l.flags&32){A=l.stateNode;try{ma(A,"")}catch(Ue){xr(l,l.return,Ue)}}v&4&&l.stateNode!=null&&(A=l.memoizedProps,o2(l,A,d!==null?d.memoizedProps:A)),v&1024&&(c2=!0);break;case 6:if(Vo(u,l),qo(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,d=l.stateNode;try{d.nodeValue=v}catch(Ue){xr(l,l.return,Ue)}}break;case 3:if(wp=null,A=Qs,Qs=xp(u.containerInfo),Vo(u,l),Qs=A,qo(l),v&4&&d!==null&&d.memoizedState.isDehydrated)try{b0(u.containerInfo)}catch(Ue){xr(l,l.return,Ue)}c2&&(c2=!1,pb(l));break;case 4:v=Qs,Qs=xp(l.stateNode.containerInfo),Vo(u,l),qo(l),Qs=v;break;case 12:Vo(u,l),qo(l);break;case 13:Vo(u,l),qo(l),l.child.flags&8192&&l.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(m2=ht()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,u2(l,v)));break;case 22:A=l.memoizedState!==null;var ye=d!==null&&d.memoizedState!==null,Me=Bc,Ye=ci;if(Bc=Me||A,ci=Ye||ye,Vo(u,l),ci=Ye,Bc=Me,qo(l),v&8192)e:for(u=l.stateNode,u._visibility=A?u._visibility&-2:u._visibility|1,A&&(d===null||ye||Bc||ci||zf(l)),d=null,u=l;;){if(u.tag===5||u.tag===26){if(d===null){ye=d=u;try{if(D=ye.stateNode,A)K=D.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{ce=ye.stateNode;var et=ye.memoizedProps.style,Fe=et!=null&&et.hasOwnProperty("display")?et.display:null;ce.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(Ue){xr(ye,ye.return,Ue)}}}else if(u.tag===6){if(d===null){ye=u;try{ye.stateNode.nodeValue=A?"":ye.memoizedProps}catch(Ue){xr(ye,ye.return,Ue)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=l.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,u2(l,d))));break;case 19:Vo(u,l),qo(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,u2(l,v)));break;case 30:break;case 21:break;default:Vo(u,l),qo(l)}}function qo(l){var u=l.flags;if(u&2){try{for(var d,v=l.return;v!==null;){if(ob(v)){d=v;break}v=v.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var A=d.stateNode,D=s2(l);op(l,D,A);break;case 5:var K=d.stateNode;d.flags&32&&(ma(K,""),d.flags&=-33);var ce=s2(l);op(l,ce,K);break;case 3:case 4:var ye=d.stateNode.containerInfo,Me=s2(l);l2(l,Me,ye);break;default:throw Error(r(161))}}catch(Ye){xr(l,l.return,Ye)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function pb(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;pb(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Nu(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)cb(l,u.alternate,u),u=u.sibling}function zf(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Ru(4,u,u.return),zf(u);break;case 1:Vl(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&ib(u,u.return,d),zf(u);break;case 27:h0(u.stateNode);case 26:case 5:Vl(u,u.return),zf(u);break;case 22:u.memoizedState===null&&zf(u);break;case 30:zf(u);break;default:zf(u)}l=l.sibling}}function Du(l,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,A=l,D=u,K=D.flags;switch(D.tag){case 0:case 11:case 15:Du(A,D,d),n0(4,D);break;case 1:if(Du(A,D,d),v=D,A=v.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Me){xr(v,v.return,Me)}if(v=D,A=v.updateQueue,A!==null){var ce=v.stateNode;try{var ye=A.shared.hiddenCallbacks;if(ye!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ye.length;A++)Tn(ye[A],ce)}catch(Me){xr(v,v.return,Me)}}d&&K&64&&rb(D),r0(D,D.return);break;case 27:sb(D);case 26:case 5:Du(A,D,d),d&&v===null&&K&4&&ab(D),r0(D,D.return);break;case 12:Du(A,D,d);break;case 13:Du(A,D,d),d&&K&4&&hb(A,D);break;case 22:D.memoizedState===null&&Du(A,D,d),r0(D,D.return);break;case 30:break;default:Du(A,D,d)}u=u.sibling}}function f2(l,u){var d=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==d&&(l!=null&&l.refCount++,d!=null&&Tf(d))}function h2(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Tf(l))}function ql(l,u,d,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)gb(l,u,d,v),u=u.sibling}function gb(l,u,d,v){var A=u.flags;switch(u.tag){case 0:case 11:case 15:ql(l,u,d,v),A&2048&&n0(9,u);break;case 1:ql(l,u,d,v);break;case 3:ql(l,u,d,v),A&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Tf(l)));break;case 12:if(A&2048){ql(l,u,d,v),l=u.stateNode;try{var D=u.memoizedProps,K=D.id,ce=D.onPostCommit;typeof ce=="function"&&ce(K,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ye){xr(u,u.return,ye)}}else ql(l,u,d,v);break;case 13:ql(l,u,d,v);break;case 23:break;case 22:D=u.stateNode,K=u.alternate,u.memoizedState!==null?D._visibility&2?ql(l,u,d,v):i0(l,u):D._visibility&2?ql(l,u,d,v):(D._visibility|=2,Ph(l,u,d,v,(u.subtreeFlags&10256)!==0)),A&2048&&f2(K,u);break;case 24:ql(l,u,d,v),A&2048&&h2(u.alternate,u);break;default:ql(l,u,d,v)}}function Ph(l,u,d,v,A){for(A=A&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var D=l,K=u,ce=d,ye=v,Me=K.flags;switch(K.tag){case 0:case 11:case 15:Ph(D,K,ce,ye,A),n0(8,K);break;case 23:break;case 22:var Ye=K.stateNode;K.memoizedState!==null?Ye._visibility&2?Ph(D,K,ce,ye,A):i0(D,K):(Ye._visibility|=2,Ph(D,K,ce,ye,A)),A&&Me&2048&&f2(K.alternate,K);break;case 24:Ph(D,K,ce,ye,A),A&&Me&2048&&h2(K.alternate,K);break;default:Ph(D,K,ce,ye,A)}u=u.sibling}}function i0(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=l,v=u,A=v.flags;switch(v.tag){case 22:i0(d,v),A&2048&&f2(v.alternate,v);break;case 24:i0(d,v),A&2048&&h2(v.alternate,v);break;default:i0(d,v)}u=u.sibling}}var a0=8192;function Lh(l){if(l.subtreeFlags&a0)for(l=l.child;l!==null;)mb(l),l=l.sibling}function mb(l){switch(l.tag){case 26:Lh(l),l.flags&a0&&l.memoizedState!==null&&qC(Qs,l.memoizedState,l.memoizedProps);break;case 5:Lh(l);break;case 3:case 4:var u=Qs;Qs=xp(l.stateNode.containerInfo),Lh(l),Qs=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=a0,a0=16777216,Lh(l),a0=u):Lh(l));break;default:Lh(l)}}function vb(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function o0(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var v=u[d];Wi=v,xb(v,l)}vb(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)yb(l),l=l.sibling}function yb(l){switch(l.tag){case 0:case 11:case 15:o0(l),l.flags&2048&&Ru(9,l,l.return);break;case 3:o0(l);break;case 12:o0(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,sp(l)):o0(l);break;default:o0(l)}}function sp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var v=u[d];Wi=v,xb(v,l)}vb(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Ru(8,u,u.return),sp(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,sp(u));break;default:sp(u)}l=l.sibling}}function xb(l,u){for(;Wi!==null;){var d=Wi;switch(d.tag){case 0:case 11:case 15:Ru(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Tf(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,Wi=v;else e:for(d=l;Wi!==null;){v=Wi;var A=v.sibling,D=v.return;if(ub(v),v===d){Wi=null;break e}if(A!==null){A.return=D,Wi=A;break e}Wi=D}}}var aC={getCacheForType:function(l){var u=oi(si),d=u.data.get(l);return d===void 0&&(d=l(),u.data.set(l,d)),d}},oC=typeof WeakMap=="function"?WeakMap:Map,rr=0,_r=null,xn=null,Nn=0,ir=0,Ho=null,Ou=!1,Mh=!1,d2=!1,Uc=0,Jr=0,ku=0,Vf=0,p2=0,ys=0,jh=0,s0=null,go=null,g2=!1,m2=0,lp=1/0,cp=null,Pu=null,aa=0,Lu=null,Bh=null,Fh=0,v2=0,y2=null,bb=null,l0=0,x2=null;function Wo(){if((rr&2)!==0&&Nn!==0)return Nn&-Nn;if(z.T!==null){var l=Nc;return l!==0?l:C2()}return vr()}function wb(){ys===0&&(ys=(Nn&536870912)===0||Pn?pa():536870912);var l=vs.current;return l!==null&&(l.flags|=32),ys}function Go(l,u,d){(l===_r&&(ir===2||ir===9)||l.cancelPendingCommit!==null)&&(Uh(l,0),Mu(l,Nn,ys,!1)),cr(l,d),((rr&2)===0||l!==_r)&&(l===_r&&((rr&2)===0&&(Vf|=d),Jr===4&&Mu(l,Nn,ys,!1)),Hl(l))}function _b(l,u,d){if((rr&6)!==0)throw Error(r(327));var v=!d&&(u&124)===0&&(u&l.expiredLanes)===0||pi(l,u),A=v?cC(l,u):_2(l,u,!0),D=v;do{if(A===0){Mh&&!v&&Mu(l,u,0,!1);break}else{if(d=l.current.alternate,D&&!sC(d)){A=_2(l,u,!1),D=!1;continue}if(A===2){if(D=u,l.errorRecoveryDisabledLanes&D)var K=0;else K=l.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){u=K;e:{var ce=l;A=s0;var ye=ce.current.memoizedState.isDehydrated;if(ye&&(Uh(ce,K).flags|=256),K=_2(ce,K,!1),K!==2){if(d2&&!ye){ce.errorRecoveryDisabledLanes|=D,Vf|=D,A=4;break e}D=go,go=A,D!==null&&(go===null?go=D:go.push.apply(go,D))}A=K}if(D=!1,A!==2)continue}}if(A===1){Uh(l,0),Mu(l,u,0,!0);break}e:{switch(v=l,D=A,D){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Mu(v,u,ys,!Ou);break e;case 2:go=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(A=m2+300-ht(),10<A)){if(Mu(v,u,ys,!Ou),En(v,0,!0)!==0)break e;v.timeoutHandle=Qb(Ab.bind(null,v,d,go,cp,g2,u,ys,Vf,jh,Ou,D,2,-0,0),A);break e}Ab(v,d,go,cp,g2,u,ys,Vf,jh,Ou,D,0,-0,0)}}break}while(!0);Hl(l)}function Ab(l,u,d,v,A,D,K,ce,ye,Me,Ye,et,Fe,Ue){if(l.timeoutHandle=-1,et=u.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(g0={stylesheets:null,count:0,unsuspend:VC},mb(u),et=HC(),et!==null)){l.cancelPendingCommit=et(Nb.bind(null,l,u,D,d,v,A,K,ce,ye,Ye,1,Fe,Ue)),Mu(l,D,K,!Me);return}Nb(l,u,D,d,v,A,K,ce,ye)}function sC(l){for(var u=l;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var A=d[v],D=A.getSnapshot;A=A.value;try{if(!vi(D(),A))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Mu(l,u,d,v){u&=~p2,u&=~Vf,l.suspendedLanes|=u,l.pingedLanes&=~u,v&&(l.warmLanes|=u),v=l.expirationTimes;for(var A=u;0<A;){var D=31-bt(A),K=1<<D;v[D]=-1,A&=~K}d!==0&&Tt(l,d,u)}function up(){return(rr&6)===0?(c0(0),!1):!0}function b2(){if(xn!==null){if(ir===0)var l=xn.return;else l=xn,Ws=xi=null,Ch(l),Oh=null,Jd=0,l=xn;for(;l!==null;)nb(l.alternate,l),l=l.return;xn=null}}function Uh(l,u){var d=l.timeoutHandle;d!==-1&&(l.timeoutHandle=-1,SC(d)),d=l.cancelPendingCommit,d!==null&&(l.cancelPendingCommit=null,d()),b2(),_r=l,xn=d=fs(l.current,null),Nn=u,ir=0,Ho=null,Ou=!1,Mh=pi(l,u),d2=!1,jh=ys=p2=Vf=ku=Jr=0,go=s0=null,g2=!1,(u&8)!==0&&(u|=u&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=u;0<v;){var A=31-bt(v),D=1<<A;u|=l[A],v&=~D}return Uc=u,co(),d}function Eb(l,u){Lt=null,z.H=Q1,u===re||u===se?(u=Re(),ir=3):u===ie?(u=Re(),ir=4):ir=u===Vx?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ho=u,xn===null&&(Jr=1,np(l,ln(u,l.current)))}function Sb(){var l=z.H;return z.H=Q1,l===null?Q1:l}function Cb(){var l=z.A;return z.A=aC,l}function w2(){Jr=4,Ou||(Nn&4194048)!==Nn&&vs.current!==null||(Mh=!0),(ku&134217727)===0&&(Vf&134217727)===0||_r===null||Mu(_r,Nn,ys,!1)}function _2(l,u,d){var v=rr;rr|=2;var A=Sb(),D=Cb();(_r!==l||Nn!==u)&&(cp=null,Uh(l,u)),u=!1;var K=Jr;e:do try{if(ir!==0&&xn!==null){var ce=xn,ye=Ho;switch(ir){case 8:b2(),K=6;break e;case 3:case 2:case 9:case 6:vs.current===null&&(u=!0);var Me=ir;if(ir=0,Ho=null,zh(l,ce,ye,Me),d&&Mh){K=0;break e}break;default:Me=ir,ir=0,Ho=null,zh(l,ce,ye,Me)}}lC(),K=Jr;break}catch(Ye){Eb(l,Ye)}while(!0);return u&&l.shellSuspendCounter++,Ws=xi=null,rr=v,z.H=A,z.A=D,xn===null&&(_r=null,Nn=0,co()),K}function lC(){for(;xn!==null;)Ib(xn)}function cC(l,u){var d=rr;rr|=2;var v=Sb(),A=Cb();_r!==l||Nn!==u?(cp=null,lp=ht()+500,Uh(l,u)):Mh=pi(l,u);e:do try{if(ir!==0&&xn!==null){u=xn;var D=Ho;t:switch(ir){case 1:ir=0,Ho=null,zh(l,u,D,1);break;case 2:case 9:if(de(D)){ir=0,Ho=null,Tb(u);break}u=function(){ir!==2&&ir!==9||_r!==l||(ir=7),Hl(l)},D.then(u,u);break e;case 3:ir=7;break e;case 4:ir=5;break e;case 7:de(D)?(ir=0,Ho=null,Tb(u)):(ir=0,Ho=null,zh(l,u,D,7));break;case 5:var K=null;switch(xn.tag){case 26:K=xn.memoizedState;case 5:case 27:var ce=xn;if(!K||cw(K)){ir=0,Ho=null;var ye=ce.sibling;if(ye!==null)xn=ye;else{var Me=ce.return;Me!==null?(xn=Me,fp(Me)):xn=null}break t}}ir=0,Ho=null,zh(l,u,D,5);break;case 6:ir=0,Ho=null,zh(l,u,D,6);break;case 8:b2(),Jr=6;break e;default:throw Error(r(462))}}uC();break}catch(Ye){Eb(l,Ye)}while(!0);return Ws=xi=null,z.H=v,z.A=A,rr=d,xn!==null?0:(_r=null,Nn=0,co(),Jr)}function uC(){for(;xn!==null&&!Be();)Ib(xn)}function Ib(l){var u=eb(l.alternate,l,Uc);l.memoizedProps=l.pendingProps,u===null?fp(l):xn=u}function Tb(l){var u=l,d=u.alternate;switch(u.tag){case 15:case 0:u=Yx(d,u,u.pendingProps,u.type,void 0,Nn);break;case 11:u=Yx(d,u,u.pendingProps,u.type.render,u.ref,Nn);break;case 5:Ch(u);default:nb(d,u),u=xn=Ef(u,Uc),u=eb(d,u,Uc)}l.memoizedProps=l.pendingProps,u===null?fp(l):xn=u}function zh(l,u,d,v){Ws=xi=null,Ch(u),Oh=null,Jd=0;var A=u.return;try{if(JS(l,A,u,d,Nn)){Jr=1,np(l,ln(d,l.current)),xn=null;return}}catch(D){if(A!==null)throw xn=A,D;Jr=1,np(l,ln(d,l.current)),xn=null;return}u.flags&32768?(Pn||v===1?l=!0:Mh||(Nn&536870912)!==0?l=!1:(Ou=l=!0,(v===2||v===9||v===3||v===6)&&(v=vs.current,v!==null&&v.tag===13&&(v.flags|=16384))),Rb(u,l)):fp(u)}function fp(l){var u=l;do{if((u.flags&32768)!==0){Rb(u,Ou);return}l=u.return;var d=tC(u.alternate,u,Uc);if(d!==null){xn=d;return}if(u=u.sibling,u!==null){xn=u;return}xn=u=l}while(u!==null);Jr===0&&(Jr=5)}function Rb(l,u){do{var d=nC(l.alternate,l);if(d!==null){d.flags&=32767,xn=d;return}if(d=l.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(l=l.sibling,l!==null)){xn=l;return}xn=l=d}while(l!==null);Jr=6,xn=null}function Nb(l,u,d,v,A,D,K,ce,ye){l.cancelPendingCommit=null;do hp();while(aa!==0);if((rr&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(D=u.lanes|u.childLanes,D|=Fr,yn(l,d,D,K,ce,ye),l===_r&&(xn=_r=null,Nn=0),Bh=u,Lu=l,Fh=d,v2=D,y2=A,bb=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,pC(We,function(){return Lb(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=z.T,z.T=null,A=U.p,U.p=2,K=rr,rr|=4;try{rC(l,u,d)}finally{rr=K,U.p=A,z.T=v}}aa=1,Db(),Ob(),kb()}}function Db(){if(aa===1){aa=0;var l=Lu,u=Bh,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=z.T,z.T=null;var v=U.p;U.p=2;var A=rr;rr|=4;try{db(u,l);var D=P2,K=ta(l.containerInfo),ce=D.focusedElem,ye=D.selectionRange;if(K!==ce&&ce&&ce.ownerDocument&&Sl(ce.ownerDocument.documentElement,ce)){if(ye!==null&&Ri(ce)){var Me=ye.start,Ye=ye.end;if(Ye===void 0&&(Ye=Me),"selectionStart"in ce)ce.selectionStart=Me,ce.selectionEnd=Math.min(Ye,ce.value.length);else{var et=ce.ownerDocument||document,Fe=et&&et.defaultView||window;if(Fe.getSelection){var Ue=Fe.getSelection(),Xt=ce.textContent.length,zt=Math.min(ye.start,Xt),pr=ye.end===void 0?zt:Math.min(ye.end,Xt);!Ue.extend&&zt>pr&&(K=pr,pr=zt,zt=K);var De=js(ce,zt),Ee=js(ce,pr);if(De&&Ee&&(Ue.rangeCount!==1||Ue.anchorNode!==De.node||Ue.anchorOffset!==De.offset||Ue.focusNode!==Ee.node||Ue.focusOffset!==Ee.offset)){var ke=et.createRange();ke.setStart(De.node,De.offset),Ue.removeAllRanges(),zt>pr?(Ue.addRange(ke),Ue.extend(Ee.node,Ee.offset)):(ke.setEnd(Ee.node,Ee.offset),Ue.addRange(ke))}}}}for(et=[],Ue=ce;Ue=Ue.parentNode;)Ue.nodeType===1&&et.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<et.length;ce++){var Qe=et[ce];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}Ep=!!k2,P2=k2=null}finally{rr=A,U.p=v,z.T=d}}l.current=u,aa=2}}function Ob(){if(aa===2){aa=0;var l=Lu,u=Bh,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=z.T,z.T=null;var v=U.p;U.p=2;var A=rr;rr|=4;try{cb(l,u.alternate,u)}finally{rr=A,U.p=v,z.T=d}}aa=3}}function kb(){if(aa===4||aa===3){aa=0,ve();var l=Lu,u=Bh,d=Fh,v=bb;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?aa=5:(aa=0,Bh=Lu=null,Pb(l,l.pendingLanes));var A=l.pendingLanes;if(A===0&&(Pu=null),jn(d),u=u.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(vt,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=z.T,A=U.p,U.p=2,z.T=null;try{for(var D=l.onRecoverableError,K=0;K<v.length;K++){var ce=v[K];D(ce.value,{componentStack:ce.stack})}}finally{z.T=u,U.p=A}}(Fh&3)!==0&&hp(),Hl(l),A=l.pendingLanes,(d&4194090)!==0&&(A&42)!==0?l===x2?l0++:(l0=0,x2=l):l0=0,c0(0)}}function Pb(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Tf(u)))}function hp(l){return Db(),Ob(),kb(),Lb()}function Lb(){if(aa!==5)return!1;var l=Lu,u=v2;v2=0;var d=jn(Fh),v=z.T,A=U.p;try{U.p=32>d?32:d,z.T=null,d=y2,y2=null;var D=Lu,K=Fh;if(aa=0,Bh=Lu=null,Fh=0,(rr&6)!==0)throw Error(r(331));var ce=rr;if(rr|=4,yb(D.current),gb(D,D.current,K,d),rr=ce,c0(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(vt,D)}catch{}return!0}finally{U.p=A,z.T=v,Pb(l,u)}}function Mb(l,u,d){u=ln(d,u),u=Qm(l.stateNode,u,2),l=Je(l,u,2),l!==null&&(cr(l,2),Hl(l))}function xr(l,u,d){if(l.tag===3)Mb(l,l,d);else for(;u!==null;){if(u.tag===3){Mb(u,l,d);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Pu===null||!Pu.has(v))){l=ln(d,l),d=Ux(2),v=Je(u,d,2),v!==null&&(zx(d,v,u,l),cr(v,2),Hl(v));break}}u=u.return}}function A2(l,u,d){var v=l.pingCache;if(v===null){v=l.pingCache=new oC;var A=new Set;v.set(u,A)}else A=v.get(u),A===void 0&&(A=new Set,v.set(u,A));A.has(d)||(d2=!0,A.add(d),l=fC.bind(null,l,u,d),u.then(l,l))}function fC(l,u,d){var v=l.pingCache;v!==null&&v.delete(u),l.pingedLanes|=l.suspendedLanes&d,l.warmLanes&=~d,_r===l&&(Nn&d)===d&&(Jr===4||Jr===3&&(Nn&62914560)===Nn&&300>ht()-m2?(rr&2)===0&&Uh(l,0):p2|=d,jh===Nn&&(jh=0)),Hl(l)}function jb(l,u){u===0&&(u=In()),l=Fs(l,u),l!==null&&(cr(l,u),Hl(l))}function hC(l){var u=l.memoizedState,d=0;u!==null&&(d=u.retryLane),jb(l,d)}function dC(l,u){var d=0;switch(l.tag){case 13:var v=l.stateNode,A=l.memoizedState;A!==null&&(d=A.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(u),jb(l,d)}function pC(l,u){return lt(l,u)}var dp=null,Vh=null,E2=!1,pp=!1,S2=!1,qf=0;function Hl(l){l!==Vh&&l.next===null&&(Vh===null?dp=Vh=l:Vh=Vh.next=l),pp=!0,E2||(E2=!0,mC())}function c0(l,u){if(!S2&&pp){S2=!0;do for(var d=!1,v=dp;v!==null;){if(l!==0){var A=v.pendingLanes;if(A===0)var D=0;else{var K=v.suspendedLanes,ce=v.pingedLanes;D=(1<<31-bt(42|l)+1)-1,D&=A&~(K&~ce),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(d=!0,zb(v,D))}else D=Nn,D=En(v,v===_r?D:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(D&3)===0||pi(v,D)||(d=!0,zb(v,D));v=v.next}while(d);S2=!1}}function gC(){Bb()}function Bb(){pp=E2=!1;var l=0;qf!==0&&(EC()&&(l=qf),qf=0);for(var u=ht(),d=null,v=dp;v!==null;){var A=v.next,D=Fb(v,u);D===0?(v.next=null,d===null?dp=A:d.next=A,A===null&&(Vh=d)):(d=v,(l!==0||(D&3)!==0)&&(pp=!0)),v=A}c0(l)}function Fb(l,u){for(var d=l.suspendedLanes,v=l.pingedLanes,A=l.expirationTimes,D=l.pendingLanes&-62914561;0<D;){var K=31-bt(D),ce=1<<K,ye=A[K];ye===-1?((ce&d)===0||(ce&v)!==0)&&(A[K]=on(ce,u)):ye<=u&&(l.expiredLanes|=ce),D&=~ce}if(u=_r,d=Nn,d=En(l,l===u?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,d===0||l===u&&(ir===2||ir===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&wt(v),l.callbackNode=null,l.callbackPriority=0;if((d&3)===0||pi(l,d)){if(u=d&-d,u===l.callbackPriority)return u;switch(v!==null&&wt(v),jn(d)){case 2:case 8:d=Ke;break;case 32:d=We;break;case 268435456:d=nt;break;default:d=We}return v=Ub.bind(null,l),d=lt(d,v),l.callbackPriority=u,l.callbackNode=d,u}return v!==null&&v!==null&&wt(v),l.callbackPriority=2,l.callbackNode=null,2}function Ub(l,u){if(aa!==0&&aa!==5)return l.callbackNode=null,l.callbackPriority=0,null;var d=l.callbackNode;if(hp()&&l.callbackNode!==d)return null;var v=Nn;return v=En(l,l===_r?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(_b(l,v,u),Fb(l,ht()),l.callbackNode!=null&&l.callbackNode===d?Ub.bind(null,l):null)}function zb(l,u){if(hp())return null;_b(l,u,!0)}function mC(){CC(function(){(rr&6)!==0?lt(Ne,gC):Bb()})}function C2(){return qf===0&&(qf=pa()),qf}function Vb(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Oo(""+l)}function qb(l,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,l.id&&d.setAttribute("form",l.id),u.parentNode.insertBefore(d,u),l=new FormData(l),d.parentNode.removeChild(d),l}function vC(l,u,d,v,A){if(u==="submit"&&d&&d.stateNode===A){var D=Vb((A[$n]||null).action),K=v.submitter;K&&(u=(u=K[$n]||null)?Vb(u.formAction):K.getAttribute("formAction"),u!==null&&(D=u,K=null));var ce=new ns("action","action",null,v,A);l.push({event:ce,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(qf!==0){var ye=K?qb(A,K):new FormData(A);ms(d,{pending:!0,data:ye,method:A.method,action:D},null,ye)}}else typeof D=="function"&&(ce.preventDefault(),ye=K?qb(A,K):new FormData(A),ms(d,{pending:!0,data:ye,method:A.method,action:D},D,ye))},currentTarget:A}]})}}for(var I2=0;I2<Ec.length;I2++){var T2=Ec[I2],yC=T2.toLowerCase(),xC=T2[0].toUpperCase()+T2.slice(1);kr(yC,"on"+xC)}kr(mu,"onAnimationEnd"),kr(Il,"onAnimationIteration"),kr(Tl,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Rl,"onTransitionRun"),kr(Ac,"onTransitionStart"),kr(vu,"onTransitionCancel"),kr(Nl,"onTransitionEnd"),ga("onMouseEnter",["mouseout","mouseover"]),ga("onMouseLeave",["mouseout","mouseover"]),ga("onPointerEnter",["pointerout","pointerover"]),ga("onPointerLeave",["pointerout","pointerover"]),Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var u0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(u0));function Hb(l,u){u=(u&4)!==0;for(var d=0;d<l.length;d++){var v=l[d],A=v.event;v=v.listeners;e:{var D=void 0;if(u)for(var K=v.length-1;0<=K;K--){var ce=v[K],ye=ce.instance,Me=ce.currentTarget;if(ce=ce.listener,ye!==D&&A.isPropagationStopped())break e;D=ce,A.currentTarget=Me;try{D(A)}catch(Ye){tp(Ye)}A.currentTarget=null,D=ye}else for(K=0;K<v.length;K++){if(ce=v[K],ye=ce.instance,Me=ce.currentTarget,ce=ce.listener,ye!==D&&A.isPropagationStopped())break e;D=ce,A.currentTarget=Me;try{D(A)}catch(Ye){tp(Ye)}A.currentTarget=null,D=ye}}}}function bn(l,u){var d=u[Sr];d===void 0&&(d=u[Sr]=new Set);var v=l+"__bubble";d.has(v)||(Wb(u,l,2,!1),d.add(v))}function R2(l,u,d){var v=0;u&&(v|=4),Wb(d,l,v,u)}var gp="_reactListening"+Math.random().toString(36).slice(2);function N2(l){if(!l[gp]){l[gp]=!0,Co.forEach(function(d){d!=="selectionchange"&&(bC.has(d)||R2(d,!1,l),R2(d,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[gp]||(u[gp]=!0,R2("selectionchange",!1,u))}}function Wb(l,u,d,v){switch(gw(u)){case 2:var A=$C;break;case 8:A=YC;break;default:A=H2}d=A.bind(null,u,d,l),A=void 0,!ea||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),v?A!==void 0?l.addEventListener(u,d,{capture:!0,passive:A}):l.addEventListener(u,d,!0):A!==void 0?l.addEventListener(u,d,{passive:A}):l.addEventListener(u,d,!1)}function D2(l,u,d,v,A){var D=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var K=v.tag;if(K===3||K===4){var ce=v.stateNode.containerInfo;if(ce===A)break;if(K===4)for(K=v.return;K!==null;){var ye=K.tag;if((ye===3||ye===4)&&K.stateNode.containerInfo===A)return;K=K.return}for(;ce!==null;){if(K=ti(ce),K===null)return;if(ye=K.tag,ye===5||ye===6||ye===26||ye===27){v=D=K;continue e}ce=ce.parentNode}}v=v.return}fu(function(){var Me=D,Ye=tr(d),et=[];e:{var Fe=Bs.get(l);if(Fe!==void 0){var Ue=ns,Xt=l;switch(l){case"keypress":if(xa(d)===0)break e;case"keydown":case"keyup":Ue=Mo;break;case"focusin":Xt="focus",Ue=is;break;case"focusout":Xt="blur",Ue=is;break;case"beforeblur":case"afterblur":Ue=is;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=Xr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=rs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=wl;break;case mu:case Il:case Tl:Ue=yl;break;case Nl:Ue=ee;break;case"scroll":case"scrollend":Ue=vc;break;case"wheel":Ue=xe;break;case"copy":case"cut":case"paste":Ue=xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=Ms;break;case"toggle":case"beforetoggle":Ue=Ve}var zt=(u&4)!==0,pr=!zt&&(l==="scroll"||l==="scrollend"),De=zt?Fe!==null?Fe+"Capture":null:Fe;zt=[];for(var Ee=Me,ke;Ee!==null;){var Qe=Ee;if(ke=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||ke===null||De===null||(Qe=Fi(Ee,De),Qe!=null&&zt.push(f0(Ee,Qe,ke))),pr)break;Ee=Ee.return}0<zt.length&&(Fe=new Ue(Fe,Xt,null,d,Ye),et.push({event:Fe,listeners:zt}))}}if((u&7)===0){e:{if(Fe=l==="mouseover"||l==="pointerover",Ue=l==="mouseout"||l==="pointerout",Fe&&d!==to&&(Xt=d.relatedTarget||d.fromElement)&&(ti(Xt)||Xt[yr]))break e;if((Ue||Fe)&&(Fe=Ye.window===Ye?Ye:(Fe=Ye.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,Ue?(Xt=d.relatedTarget||d.toElement,Ue=Me,Xt=Xt?ti(Xt):null,Xt!==null&&(pr=a(Xt),zt=Xt.tag,Xt!==pr||zt!==5&&zt!==27&&zt!==6)&&(Xt=null)):(Ue=null,Xt=Me),Ue!==Xt)){if(zt=Xr,Qe="onMouseLeave",De="onMouseEnter",Ee="mouse",(l==="pointerout"||l==="pointerover")&&(zt=Ms,Qe="onPointerLeave",De="onPointerEnter",Ee="pointer"),pr=Ue==null?Fe:ni(Ue),ke=Xt==null?Fe:ni(Xt),Fe=new zt(Qe,Ee+"leave",Ue,d,Ye),Fe.target=pr,Fe.relatedTarget=ke,Qe=null,ti(Ye)===Me&&(zt=new zt(De,Ee+"enter",Xt,d,Ye),zt.target=ke,zt.relatedTarget=pr,Qe=zt),pr=Qe,Ue&&Xt)t:{for(zt=Ue,De=Xt,Ee=0,ke=zt;ke;ke=qh(ke))Ee++;for(ke=0,Qe=De;Qe;Qe=qh(Qe))ke++;for(;0<Ee-ke;)zt=qh(zt),Ee--;for(;0<ke-Ee;)De=qh(De),ke--;for(;Ee--;){if(zt===De||De!==null&&zt===De.alternate)break t;zt=qh(zt),De=qh(De)}zt=null}else zt=null;Ue!==null&&Gb(et,Fe,Ue,zt,!1),Xt!==null&&pr!==null&&Gb(et,pr,Xt,zt,!0)}}e:{if(Fe=Me?ni(Me):window,Ue=Fe.nodeName&&Fe.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Fe.type==="file")var Ct=pu;else if(Qn(Fe))if(xc)Ct=yh;else{Ct=jd;var pn=wa}else Ue=Fe.nodeName,!Ue||Ue.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?Me&&gc(Me.elementType)&&(Ct=pu):Ct=_f;if(Ct&&(Ct=Ct(l,Me))){so(et,Ct,d,Ye);break e}pn&&pn(l,Fe,Me),l==="focusout"&&Me&&Fe.type==="number"&&Me.memoizedProps.value!=null&&Jo(Fe,"number",Fe.value)}switch(pn=Me?ni(Me):window,l){case"focusin":(Qn(pn)||pn.contentEditable==="true")&&(_a=pn,jo=Me,cs=null);break;case"focusout":cs=jo=_a=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,Or(et,d,Ye);break;case"selectionchange":if(Cl)break;case"keydown":case"keyup":Or(et,d,Ye)}var kt;if(pt)e:{switch(l){case"compositionstart":var qt="onCompositionStart";break e;case"compositionend":qt="onCompositionEnd";break e;case"compositionupdate":qt="onCompositionUpdate";break e}qt=void 0}else Ut?Le(l,d)&&(qt="onCompositionEnd"):l==="keydown"&&d.keyCode===229&&(qt="onCompositionStart");qt&&($&&d.locale!=="ko"&&(Ut||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&Ut&&(kt=mc()):(ya=Ye,ts="value"in ya?ya.value:ya.textContent,Ut=!0)),pn=mp(Me,qt),0<pn.length&&(qt=new ks(qt,l,null,d,Ye),et.push({event:qt,listeners:pn}),kt?qt.data=kt:(kt=ot(d),kt!==null&&(qt.data=kt)))),(kt=F?dn(l,d):Qt(l,d))&&(qt=mp(Me,"onBeforeInput"),0<qt.length&&(pn=new ks("onBeforeInput","beforeinput",null,d,Ye),et.push({event:pn,listeners:qt}),pn.data=kt)),vC(et,l,Me,d,Ye)}Hb(et,u)})}function f0(l,u,d){return{instance:l,listener:u,currentTarget:d}}function mp(l,u){for(var d=u+"Capture",v=[];l!==null;){var A=l,D=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||D===null||(A=Fi(l,d),A!=null&&v.unshift(f0(l,A,D)),A=Fi(l,u),A!=null&&v.push(f0(l,A,D))),l.tag===3)return v;l=l.return}return[]}function qh(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Gb(l,u,d,v,A){for(var D=u._reactName,K=[];d!==null&&d!==v;){var ce=d,ye=ce.alternate,Me=ce.stateNode;if(ce=ce.tag,ye!==null&&ye===v)break;ce!==5&&ce!==26&&ce!==27||Me===null||(ye=Me,A?(Me=Fi(d,D),Me!=null&&K.unshift(f0(d,Me,ye))):A||(Me=Fi(d,D),Me!=null&&K.push(f0(d,Me,ye)))),d=d.return}K.length!==0&&l.push({event:u,listeners:K})}var wC=/\r\n?/g,_C=/\u0000|\uFFFD/g;function $b(l){return(typeof l=="string"?l:""+l).replace(wC,`
`).replace(_C,"")}function Yb(l,u){return u=$b(u),$b(l)===u}function vp(){}function dr(l,u,d,v,A,D){switch(d){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||ma(l,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&ma(l,""+v);break;case"className":Va(l,"class",v);break;case"tabIndex":Va(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(l,d,v);break;case"style":pc(l,v,D);break;case"data":if(u!=="object"){Va(l,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||d!=="href")){l.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(d);break}v=Oo(""+v),l.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(d==="formAction"?(u!=="input"&&dr(l,u,"name",A.name,A,null),dr(l,u,"formEncType",A.formEncType,A,null),dr(l,u,"formMethod",A.formMethod,A,null),dr(l,u,"formTarget",A.formTarget,A,null)):(dr(l,u,"encType",A.encType,A,null),dr(l,u,"method",A.method,A,null),dr(l,u,"target",A.target,A,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(d);break}v=Oo(""+v),l.setAttribute(d,v);break;case"onClick":v!=null&&(l.onclick=vp);break;case"onScroll":v!=null&&bn("scroll",l);break;case"onScrollEnd":v!=null&&bn("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(A.children!=null)throw Error(r(60));l.innerHTML=d}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}d=Oo(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,""+v):l.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,""):l.removeAttribute(d);break;case"capture":case"download":v===!0?l.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,v):l.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(d,v):l.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(d):l.setAttribute(d,v);break;case"popover":bn("beforetoggle",l),bn("toggle",l),za(l,"popover",v);break;case"xlinkActuate":ri(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ri(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ri(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ri(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ri(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ri(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ri(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ri(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ri(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":za(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Do.get(d)||d,za(l,d,v))}}function O2(l,u,d,v,A,D){switch(d){case"style":pc(l,v,D);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(A.children!=null)throw Error(r(60));l.innerHTML=d}}break;case"children":typeof v=="string"?ma(l,v):(typeof v=="number"||typeof v=="bigint")&&ma(l,""+v);break;case"onScroll":v!=null&&bn("scroll",l);break;case"onScrollEnd":v!=null&&bn("scrollend",l);break;case"onClick":v!=null&&(l.onclick=vp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(A=d.endsWith("Capture"),u=d.slice(2,A?d.length-7:void 0),D=l[$n]||null,D=D!=null?D[d]:null,typeof D=="function"&&l.removeEventListener(u,D,A),typeof v=="function")){typeof D!="function"&&D!==null&&(d in l?l[d]=null:l.hasAttribute(d)&&l.removeAttribute(d)),l.addEventListener(u,v,A);break e}d in l?l[d]=v:v===!0?l.setAttribute(d,""):za(l,d,v)}}}function oa(l,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bn("error",l),bn("load",l);var v=!1,A=!1,D;for(D in d)if(d.hasOwnProperty(D)){var K=d[D];if(K!=null)switch(D){case"src":v=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dr(l,u,D,K,d,null)}}A&&dr(l,u,"srcSet",d.srcSet,d,null),v&&dr(l,u,"src",d.src,d,null);return;case"input":bn("invalid",l);var ce=D=K=A=null,ye=null,Me=null;for(v in d)if(d.hasOwnProperty(v)){var Ye=d[v];if(Ye!=null)switch(v){case"name":A=Ye;break;case"type":K=Ye;break;case"checked":ye=Ye;break;case"defaultChecked":Me=Ye;break;case"value":D=Ye;break;case"defaultValue":ce=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,u));break;default:dr(l,u,v,Ye,d,null)}}Zo(l,D,ce,ye,Me,K,A,!1),Qo(l);return;case"select":bn("invalid",l),v=K=D=null;for(A in d)if(d.hasOwnProperty(A)&&(ce=d[A],ce!=null))switch(A){case"value":D=ce;break;case"defaultValue":K=ce;break;case"multiple":v=ce;default:dr(l,u,A,ce,d,null)}u=D,d=K,l.multiple=!!v,u!=null?eo(l,!!v,u,!1):d!=null&&eo(l,!!v,d,!0);return;case"textarea":bn("invalid",l),D=A=v=null;for(K in d)if(d.hasOwnProperty(K)&&(ce=d[K],ce!=null))switch(K){case"value":v=ce;break;case"defaultValue":A=ce;break;case"children":D=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(91));break;default:dr(l,u,K,ce,d,null)}es(l,v,A,D),Qo(l);return;case"option":for(ye in d)if(d.hasOwnProperty(ye)&&(v=d[ye],v!=null))switch(ye){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:dr(l,u,ye,v,d,null)}return;case"dialog":bn("beforetoggle",l),bn("toggle",l),bn("cancel",l),bn("close",l);break;case"iframe":case"object":bn("load",l);break;case"video":case"audio":for(v=0;v<u0.length;v++)bn(u0[v],l);break;case"image":bn("error",l),bn("load",l);break;case"details":bn("toggle",l);break;case"embed":case"source":case"link":bn("error",l),bn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Me in d)if(d.hasOwnProperty(Me)&&(v=d[Me],v!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dr(l,u,Me,v,d,null)}return;default:if(gc(u)){for(Ye in d)d.hasOwnProperty(Ye)&&(v=d[Ye],v!==void 0&&O2(l,u,Ye,v,d,void 0));return}}for(ce in d)d.hasOwnProperty(ce)&&(v=d[ce],v!=null&&dr(l,u,ce,v,d,null))}function AC(l,u,d,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,D=null,K=null,ce=null,ye=null,Me=null,Ye=null;for(Ue in d){var et=d[Ue];if(d.hasOwnProperty(Ue)&&et!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":ye=et;default:v.hasOwnProperty(Ue)||dr(l,u,Ue,null,v,et)}}for(var Fe in v){var Ue=v[Fe];if(et=d[Fe],v.hasOwnProperty(Fe)&&(Ue!=null||et!=null))switch(Fe){case"type":D=Ue;break;case"name":A=Ue;break;case"checked":Me=Ue;break;case"defaultChecked":Ye=Ue;break;case"value":K=Ue;break;case"defaultValue":ce=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,u));break;default:Ue!==et&&dr(l,u,Fe,Ue,v,et)}}Ii(l,K,ce,ye,Me,Ye,D,A);return;case"select":Ue=K=ce=Fe=null;for(D in d)if(ye=d[D],d.hasOwnProperty(D)&&ye!=null)switch(D){case"value":break;case"multiple":Ue=ye;default:v.hasOwnProperty(D)||dr(l,u,D,null,v,ye)}for(A in v)if(D=v[A],ye=d[A],v.hasOwnProperty(A)&&(D!=null||ye!=null))switch(A){case"value":Fe=D;break;case"defaultValue":ce=D;break;case"multiple":K=D;default:D!==ye&&dr(l,u,A,D,v,ye)}u=ce,d=K,v=Ue,Fe!=null?eo(l,!!d,Fe,!1):!!v!=!!d&&(u!=null?eo(l,!!d,u,!0):eo(l,!!d,d?[]:"",!1));return;case"textarea":Ue=Fe=null;for(ce in d)if(A=d[ce],d.hasOwnProperty(ce)&&A!=null&&!v.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:dr(l,u,ce,null,v,A)}for(K in v)if(A=v[K],D=d[K],v.hasOwnProperty(K)&&(A!=null||D!=null))switch(K){case"value":Fe=A;break;case"defaultValue":Ue=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==D&&dr(l,u,K,A,v,D)}Fn(l,Fe,Ue);return;case"option":for(var Xt in d)if(Fe=d[Xt],d.hasOwnProperty(Xt)&&Fe!=null&&!v.hasOwnProperty(Xt))switch(Xt){case"selected":l.selected=!1;break;default:dr(l,u,Xt,null,v,Fe)}for(ye in v)if(Fe=v[ye],Ue=d[ye],v.hasOwnProperty(ye)&&Fe!==Ue&&(Fe!=null||Ue!=null))switch(ye){case"selected":l.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:dr(l,u,ye,Fe,v,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zt in d)Fe=d[zt],d.hasOwnProperty(zt)&&Fe!=null&&!v.hasOwnProperty(zt)&&dr(l,u,zt,null,v,Fe);for(Me in v)if(Fe=v[Me],Ue=d[Me],v.hasOwnProperty(Me)&&Fe!==Ue&&(Fe!=null||Ue!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,u));break;default:dr(l,u,Me,Fe,v,Ue)}return;default:if(gc(u)){for(var pr in d)Fe=d[pr],d.hasOwnProperty(pr)&&Fe!==void 0&&!v.hasOwnProperty(pr)&&O2(l,u,pr,void 0,v,Fe);for(Ye in v)Fe=v[Ye],Ue=d[Ye],!v.hasOwnProperty(Ye)||Fe===Ue||Fe===void 0&&Ue===void 0||O2(l,u,Ye,Fe,v,Ue);return}}for(var De in d)Fe=d[De],d.hasOwnProperty(De)&&Fe!=null&&!v.hasOwnProperty(De)&&dr(l,u,De,null,v,Fe);for(et in v)Fe=v[et],Ue=d[et],!v.hasOwnProperty(et)||Fe===Ue||Fe==null&&Ue==null||dr(l,u,et,Fe,v,Ue)}var k2=null,P2=null;function yp(l){return l.nodeType===9?l:l.ownerDocument}function Xb(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kb(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function L2(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var M2=null;function EC(){var l=window.event;return l&&l.type==="popstate"?l===M2?!1:(M2=l,!0):(M2=null,!1)}var Qb=typeof setTimeout=="function"?setTimeout:void 0,SC=typeof clearTimeout=="function"?clearTimeout:void 0,Zb=typeof Promise=="function"?Promise:void 0,CC=typeof queueMicrotask=="function"?queueMicrotask:typeof Zb<"u"?function(l){return Zb.resolve(null).then(l).catch(IC)}:Qb;function IC(l){setTimeout(function(){throw l})}function ju(l){return l==="head"}function Jb(l,u){var d=u,v=0,A=0;do{var D=d.nextSibling;if(l.removeChild(d),D&&D.nodeType===8)if(d=D.data,d==="/$"){if(0<v&&8>v){d=v;var K=l.ownerDocument;if(d&1&&h0(K.documentElement),d&2&&h0(K.body),d&4)for(d=K.head,h0(d),K=d.firstChild;K;){var ce=K.nextSibling,ye=K.nodeName;K[Ji]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&K.rel.toLowerCase()==="stylesheet"||d.removeChild(K),K=ce}}if(A===0){l.removeChild(D),b0(u);return}A--}else d==="$"||d==="$?"||d==="$!"?A++:v=d.charCodeAt(0)-48;else v=0;d=D}while(d);b0(u)}function j2(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":j2(d),gi(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}l.removeChild(d)}}function TC(l,u,d,v){for(;l.nodeType===1;){var A=d;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Ji])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(D=l.getAttribute("rel"),D==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(D!==A.rel||l.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||l.getAttribute("title")!==(A.title==null?null:A.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(D=l.getAttribute("src"),(D!==(A.src==null?null:A.src)||l.getAttribute("type")!==(A.type==null?null:A.type)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&D&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var D=A.name==null?null:""+A.name;if(A.type==="hidden"&&l.getAttribute("name")===D)return l}else return l;if(l=Zs(l.nextSibling),l===null)break}return null}function RC(l,u,d){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Zs(l.nextSibling),l===null))return null;return l}function B2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function NC(l,u){var d=l.ownerDocument;if(l.data!=="$?"||d.readyState==="complete")u();else{var v=function(){u(),d.removeEventListener("DOMContentLoaded",v)};d.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Zs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var F2=null;function ew(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var d=l.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return l;u--}else d==="/$"&&u++}l=l.previousSibling}return null}function tw(l,u,d){switch(u=yp(d),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function h0(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);gi(l)}var xs=new Map,nw=new Set;function xp(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var zc=U.d;U.d={f:DC,r:OC,D:kC,C:PC,L:LC,m:MC,X:BC,S:jC,M:FC};function DC(){var l=zc.f(),u=up();return l||u}function OC(l){var u=$r(l);u!==null&&u.tag===5&&u.type==="form"?Bf(u):zc.r(l)}var Hh=typeof document>"u"?null:document;function rw(l,u,d){var v=Hh;if(v&&typeof u=="string"&&u){var A=Sn(u);A='link[rel="'+l+'"][href="'+A+'"]',typeof d=="string"&&(A+='[crossorigin="'+d+'"]'),nw.has(A)||(nw.add(A),l={rel:l,crossOrigin:d,href:u},v.querySelector(A)===null&&(u=v.createElement("link"),oa(u,"link",l),Bn(u),v.head.appendChild(u)))}}function kC(l){zc.D(l),rw("dns-prefetch",l,null)}function PC(l,u){zc.C(l,u),rw("preconnect",l,u)}function LC(l,u,d){zc.L(l,u,d);var v=Hh;if(v&&l&&u){var A='link[rel="preload"][as="'+Sn(u)+'"]';u==="image"&&d&&d.imageSrcSet?(A+='[imagesrcset="'+Sn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(A+='[imagesizes="'+Sn(d.imageSizes)+'"]')):A+='[href="'+Sn(l)+'"]';var D=A;switch(u){case"style":D=Wh(l);break;case"script":D=Gh(l)}xs.has(D)||(l=h({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:l,as:u},d),xs.set(D,l),v.querySelector(A)!==null||u==="style"&&v.querySelector(d0(D))||u==="script"&&v.querySelector(p0(D))||(u=v.createElement("link"),oa(u,"link",l),Bn(u),v.head.appendChild(u)))}}function MC(l,u){zc.m(l,u);var d=Hh;if(d&&l){var v=u&&typeof u.as=="string"?u.as:"script",A='link[rel="modulepreload"][as="'+Sn(v)+'"][href="'+Sn(l)+'"]',D=A;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Gh(l)}if(!xs.has(D)&&(l=h({rel:"modulepreload",href:l},u),xs.set(D,l),d.querySelector(A)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(p0(D)))return}v=d.createElement("link"),oa(v,"link",l),Bn(v),d.head.appendChild(v)}}}function jC(l,u,d){zc.S(l,u,d);var v=Hh;if(v&&l){var A=ur(v).hoistableStyles,D=Wh(l);u=u||"default";var K=A.get(D);if(!K){var ce={loading:0,preload:null};if(K=v.querySelector(d0(D)))ce.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":u},d),(d=xs.get(D))&&U2(l,d);var ye=K=v.createElement("link");Bn(ye),oa(ye,"link",l),ye._p=new Promise(function(Me,Ye){ye.onload=Me,ye.onerror=Ye}),ye.addEventListener("load",function(){ce.loading|=1}),ye.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,bp(K,u,v)}K={type:"stylesheet",instance:K,count:1,state:ce},A.set(D,K)}}}function BC(l,u){zc.X(l,u);var d=Hh;if(d&&l){var v=ur(d).hoistableScripts,A=Gh(l),D=v.get(A);D||(D=d.querySelector(p0(A)),D||(l=h({src:l,async:!0},u),(u=xs.get(A))&&z2(l,u),D=d.createElement("script"),Bn(D),oa(D,"link",l),d.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},v.set(A,D))}}function FC(l,u){zc.M(l,u);var d=Hh;if(d&&l){var v=ur(d).hoistableScripts,A=Gh(l),D=v.get(A);D||(D=d.querySelector(p0(A)),D||(l=h({src:l,async:!0,type:"module"},u),(u=xs.get(A))&&z2(l,u),D=d.createElement("script"),Bn(D),oa(D,"link",l),d.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},v.set(A,D))}}function iw(l,u,d,v){var A=(A=pe.current)?xp(A):null;if(!A)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=Wh(d.href),d=ur(A).hoistableStyles,v=d.get(u),v||(v={type:"style",instance:null,count:0,state:null},d.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){l=Wh(d.href);var D=ur(A).hoistableStyles,K=D.get(l);if(K||(A=A.ownerDocument||A,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(l,K),(D=A.querySelector(d0(l)))&&!D._p&&(K.instance=D,K.state.loading=5),xs.has(l)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},xs.set(l,d),D||UC(A,l,d,K.state))),u&&v===null)throw Error(r(528,""));return K}if(u&&v!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Gh(d),d=ur(A).hoistableScripts,v=d.get(u),v||(v={type:"script",instance:null,count:0,state:null},d.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Wh(l){return'href="'+Sn(l)+'"'}function d0(l){return'link[rel="stylesheet"]['+l+"]"}function aw(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function UC(l,u,d,v){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=l.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),oa(u,"link",d),Bn(u),l.head.appendChild(u))}function Gh(l){return'[src="'+Sn(l)+'"]'}function p0(l){return"script[async]"+l}function ow(l,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var v=l.querySelector('style[data-href~="'+Sn(d.href)+'"]');if(v)return u.instance=v,Bn(v),v;var A=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Bn(v),oa(v,"style",A),bp(v,d.precedence,l),u.instance=v;case"stylesheet":A=Wh(d.href);var D=l.querySelector(d0(A));if(D)return u.state.loading|=4,u.instance=D,Bn(D),D;v=aw(d),(A=xs.get(A))&&U2(v,A),D=(l.ownerDocument||l).createElement("link"),Bn(D);var K=D;return K._p=new Promise(function(ce,ye){K.onload=ce,K.onerror=ye}),oa(D,"link",v),u.state.loading|=4,bp(D,d.precedence,l),u.instance=D;case"script":return D=Gh(d.src),(A=l.querySelector(p0(D)))?(u.instance=A,Bn(A),A):(v=d,(A=xs.get(D))&&(v=h({},d),z2(v,A)),l=l.ownerDocument||l,A=l.createElement("script"),Bn(A),oa(A,"link",v),l.head.appendChild(A),u.instance=A);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,bp(v,d.precedence,l));return u.instance}function bp(l,u,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=v.length?v[v.length-1]:null,D=A,K=0;K<v.length;K++){var ce=v[K];if(ce.dataset.precedence===u)D=ce;else if(D!==A)break}D?D.parentNode.insertBefore(l,D.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(l,u.firstChild))}function U2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function z2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var wp=null;function sw(l,u,d){if(wp===null){var v=new Map,A=wp=new Map;A.set(d,v)}else A=wp,v=A.get(d),v||(v=new Map,A.set(d,v));if(v.has(l))return v;for(v.set(l,null),d=d.getElementsByTagName(l),A=0;A<d.length;A++){var D=d[A];if(!(D[Ji]||D[Gn]||l==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var K=D.getAttribute(u)||"";K=l+K;var ce=v.get(K);ce?ce.push(D):v.set(K,[D])}}return v}function lw(l,u,d){l=l.ownerDocument||l,l.head.insertBefore(d,u==="title"?l.querySelector("head > title"):null)}function zC(l,u,d){if(d===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function cw(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var g0=null;function VC(){}function qC(l,u,d){if(g0===null)throw Error(r(475));var v=g0;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var A=Wh(d.href),D=l.querySelector(d0(A));if(D){l=D._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(v.count++,v=_p.bind(v),l.then(v,v)),u.state.loading|=4,u.instance=D,Bn(D);return}D=l.ownerDocument||l,d=aw(d),(A=xs.get(A))&&U2(d,A),D=D.createElement("link"),Bn(D);var K=D;K._p=new Promise(function(ce,ye){K.onload=ce,K.onerror=ye}),oa(D,"link",d),u.instance=D}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(v.count++,u=_p.bind(v),l.addEventListener("load",u),l.addEventListener("error",u))}}function HC(){if(g0===null)throw Error(r(475));var l=g0;return l.stylesheets&&l.count===0&&V2(l,l.stylesheets),0<l.count?function(u){var d=setTimeout(function(){if(l.stylesheets&&V2(l,l.stylesheets),l.unsuspend){var v=l.unsuspend;l.unsuspend=null,v()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(d)}}:null}function _p(){if(this.count--,this.count===0){if(this.stylesheets)V2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ap=null;function V2(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ap=new Map,u.forEach(WC,l),Ap=null,_p.call(l))}function WC(l,u){if(!(u.state.loading&4)){var d=Ap.get(l);if(d)var v=d.get(null);else{d=new Map,Ap.set(l,d);for(var A=l.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<A.length;D++){var K=A[D];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(d.set(K.dataset.precedence,K),v=K)}v&&d.set(null,v)}A=u.instance,K=A.getAttribute("data-precedence"),D=d.get(K)||v,D===v&&d.set(null,A),d.set(K,A),this.count++,v=_p.bind(this),A.addEventListener("load",v),A.addEventListener("error",v),D?D.parentNode.insertBefore(A,D.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(A,l.firstChild)),u.state.loading|=4}}var m0={$$typeof:j,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function GC(l,u,d,v,A,D,K,ce){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=v,this.onUncaughtError=A,this.onCaughtError=D,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function uw(l,u,d,v,A,D,K,ce,ye,Me,Ye,et){return l=new GC(l,u,d,K,ce,ye,Me,et),u=1,D===!0&&(u|=24),D=qi(3,null,null,u),l.current=D,D.stateNode=l,u=Fd(),u.refCount++,l.pooledCache=u,u.refCount++,D.memoizedState={element:v,isDehydrated:d,cache:u},we(D),l}function fw(l){return l?(l=yi,l):yi}function hw(l,u,d,v,A,D){A=fw(A),v.context===null?v.context=A:v.pendingContext=A,v=Ge(u),v.payload={element:d},D=D===void 0?null:D,D!==null&&(v.callback=D),d=Je(l,v,u),d!==null&&(Go(d,l,u),Xe(d,l,u))}function dw(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var d=l.retryLane;l.retryLane=d!==0&&d<u?d:u}}function q2(l,u){dw(l,u),(l=l.alternate)&&dw(l,u)}function pw(l){if(l.tag===13){var u=Fs(l,67108864);u!==null&&Go(u,l,67108864),q2(l,67108864)}}var Ep=!0;function $C(l,u,d,v){var A=z.T;z.T=null;var D=U.p;try{U.p=2,H2(l,u,d,v)}finally{U.p=D,z.T=A}}function YC(l,u,d,v){var A=z.T;z.T=null;var D=U.p;try{U.p=8,H2(l,u,d,v)}finally{U.p=D,z.T=A}}function H2(l,u,d,v){if(Ep){var A=W2(v);if(A===null)D2(l,u,v,Sp,d),mw(l,v);else if(KC(A,l,u,d,v))v.stopPropagation();else if(mw(l,v),u&4&&-1<XC.indexOf(l)){for(;A!==null;){var D=$r(A);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var K=Kt(D.pendingLanes);if(K!==0){var ce=D;for(ce.pendingLanes|=2,ce.entangledLanes|=2;K;){var ye=1<<31-bt(K);ce.entanglements[1]|=ye,K&=~ye}Hl(D),(rr&6)===0&&(lp=ht()+500,c0(0))}}break;case 13:ce=Fs(D,2),ce!==null&&Go(ce,D,2),up(),q2(D,2)}if(D=W2(v),D===null&&D2(l,u,v,Sp,d),D===A)break;A=D}A!==null&&v.stopPropagation()}else D2(l,u,v,null,d)}}function W2(l){return l=tr(l),G2(l)}var Sp=null;function G2(l){if(Sp=null,l=ti(l),l!==null){var u=a(l);if(u===null)l=null;else{var d=u.tag;if(d===13){if(l=o(u),l!==null)return l;l=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Sp=l,null}function gw(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ct()){case Ne:return 2;case Ke:return 8;case We:case st:return 32;case nt:return 268435456;default:return 32}default:return 32}}var $2=!1,Bu=null,Fu=null,Uu=null,v0=new Map,y0=new Map,zu=[],XC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mw(l,u){switch(l){case"focusin":case"focusout":Bu=null;break;case"dragenter":case"dragleave":Fu=null;break;case"mouseover":case"mouseout":Uu=null;break;case"pointerover":case"pointerout":v0.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":y0.delete(u.pointerId)}}function x0(l,u,d,v,A,D){return l===null||l.nativeEvent!==D?(l={blockedOn:u,domEventName:d,eventSystemFlags:v,nativeEvent:D,targetContainers:[A]},u!==null&&(u=$r(u),u!==null&&pw(u)),l):(l.eventSystemFlags|=v,u=l.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),l)}function KC(l,u,d,v,A){switch(u){case"focusin":return Bu=x0(Bu,l,u,d,v,A),!0;case"dragenter":return Fu=x0(Fu,l,u,d,v,A),!0;case"mouseover":return Uu=x0(Uu,l,u,d,v,A),!0;case"pointerover":var D=A.pointerId;return v0.set(D,x0(v0.get(D)||null,l,u,d,v,A)),!0;case"gotpointercapture":return D=A.pointerId,y0.set(D,x0(y0.get(D)||null,l,u,d,v,A)),!0}return!1}function vw(l){var u=ti(l.target);if(u!==null){var d=a(u);if(d!==null){if(u=d.tag,u===13){if(u=o(d),u!==null){l.blockedOn=u,Ua(l.priority,function(){if(d.tag===13){var v=Wo();v=Si(v);var A=Fs(d,v);A!==null&&Go(A,d,v),q2(d,v)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){l.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Cp(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var d=W2(l.nativeEvent);if(d===null){d=l.nativeEvent;var v=new d.constructor(d.type,d);to=v,d.target.dispatchEvent(v),to=null}else return u=$r(d),u!==null&&pw(u),l.blockedOn=d,!1;u.shift()}return!0}function yw(l,u,d){Cp(l)&&d.delete(u)}function QC(){$2=!1,Bu!==null&&Cp(Bu)&&(Bu=null),Fu!==null&&Cp(Fu)&&(Fu=null),Uu!==null&&Cp(Uu)&&(Uu=null),v0.forEach(yw),y0.forEach(yw)}function Ip(l,u){l.blockedOn===u&&(l.blockedOn=null,$2||($2=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,QC)))}var Tp=null;function xw(l){Tp!==l&&(Tp=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Tp===l&&(Tp=null);for(var u=0;u<l.length;u+=3){var d=l[u],v=l[u+1],A=l[u+2];if(typeof v!="function"){if(G2(v||d)===null)continue;break}var D=$r(d);D!==null&&(l.splice(u,3),u-=3,ms(D,{pending:!0,data:A,method:d.method,action:v},v,A))}}))}function b0(l){function u(ye){return Ip(ye,l)}Bu!==null&&Ip(Bu,l),Fu!==null&&Ip(Fu,l),Uu!==null&&Ip(Uu,l),v0.forEach(u),y0.forEach(u);for(var d=0;d<zu.length;d++){var v=zu[d];v.blockedOn===l&&(v.blockedOn=null)}for(;0<zu.length&&(d=zu[0],d.blockedOn===null);)vw(d),d.blockedOn===null&&zu.shift();if(d=(l.ownerDocument||l).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var A=d[v],D=d[v+1],K=A[$n]||null;if(typeof D=="function")K||xw(d);else if(K){var ce=null;if(D&&D.hasAttribute("formAction")){if(A=D,K=D[$n]||null)ce=K.formAction;else if(G2(A)!==null)continue}else ce=K.action;typeof ce=="function"?d[v+1]=ce:(d.splice(v,3),v-=3),xw(d)}}}function Y2(l){this._internalRoot=l}Rp.prototype.render=Y2.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,v=Wo();hw(d,v,l,u,null,null)},Rp.prototype.unmount=Y2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;hw(l.current,2,null,l,null,null),up(),u[yr]=null}};function Rp(l){this._internalRoot=l}Rp.prototype.unstable_scheduleHydration=function(l){if(l){var u=vr();l={blockedOn:null,target:l,priority:u};for(var d=0;d<zu.length&&u!==0&&u<zu[d].priority;d++);zu.splice(d,0,l),d===0&&vw(l)}};var bw=e.version;if(bw!=="19.1.0")throw Error(r(527,bw,"19.1.0"));U.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var ZC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Np=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Np.isDisabled&&Np.supportsFiber)try{vt=Np.inject(ZC),_t=Np}catch{}}return _0.createRoot=function(l,u){if(!i(l))throw Error(r(299));var d=!1,v="",A=Mx,D=jx,K=Bx,ce=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(K=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ce=u.unstable_transitionCallbacks)),u=uw(l,1,!1,null,null,d,v,A,D,K,ce,null),l[yr]=u.current,N2(l),new Y2(u)},_0.hydrateRoot=function(l,u,d){if(!i(l))throw Error(r(299));var v=!1,A="",D=Mx,K=jx,ce=Bx,ye=null,Me=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onUncaughtError!==void 0&&(D=d.onUncaughtError),d.onCaughtError!==void 0&&(K=d.onCaughtError),d.onRecoverableError!==void 0&&(ce=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ye=d.unstable_transitionCallbacks),d.formState!==void 0&&(Me=d.formState)),u=uw(l,1,!0,u,d??null,v,A,D,K,ce,ye,Me),u.context=fw(null),d=u.current,v=Wo(),v=Si(v),A=Ge(v),A.callback=null,Je(d,A,v),d=v,u.current.lanes=d,cr(u,d),Hl(u),l[yr]=u.current,N2(l),new Rp(u)},_0.version="19.1.0",_0}var Nw;function J4(){if(Nw)return Q2.exports;Nw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Q2.exports=sI(),Q2.exports}var lI=J4();const cI=Z4(lI);var A0={},Dw;function uI(){if(Dw)return A0;Dw=1,Object.defineProperty(A0,"__esModule",{value:!0}),A0.parse=o,A0.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,m){const b=new a,_=g.length;if(_<2)return b;const I=(m==null?void 0:m.decode)||h;let C=0;do{const N=g.indexOf("=",C);if(N===-1)break;const j=g.indexOf(";",C),q=j===-1?_:j;if(N>q){C=g.lastIndexOf(";",N-1)+1;continue}const Y=s(g,C,N),H=c(g,N,Y),P=g.slice(Y,H);if(b[P]===void 0){let E=s(g,N+1,q),R=c(g,q,E);const L=I(g.slice(E,R));b[P]=L}C=q+1}while(C<_);return b}function s(g,m,b){do{const _=g.charCodeAt(m);if(_!==32&&_!==9)return m}while(++m<b);return b}function c(g,m,b){for(;m>b;){const _=g.charCodeAt(--m);if(_!==32&&_!==9)return m+1}return b}function f(g,m,b){const _=(b==null?void 0:b.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const I=_(m);if(!e.test(I))throw new TypeError(`argument val is invalid: ${m}`);let C=g+"="+I;if(!b)return C;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);C+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);C+="; Domain="+b.domain}if(b.path){if(!r.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);C+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);C+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(C+="; HttpOnly"),b.secure&&(C+="; Secure"),b.partitioned&&(C+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return C}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return A0}uI();var Ow="popstate";function fI(n={}){function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return Wv("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Q0(i)}return dI(e,t,null,n)}function qr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hI(){return Math.random().toString(36).substring(2,10)}function kw(n,e){return{usr:n.state,key:n.key,idx:e}}function Wv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Id(e):e,state:t,key:e&&e.key||r||hI()}}function Q0({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Id(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function dI(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",c=null,f=h();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function h(){return(o.state||{idx:null}).idx}function p(){s="POP";let I=h(),C=I==null?null:I-f;f=I,c&&c({action:s,location:_.location,delta:C})}function g(I,C){s="PUSH";let N=Wv(_.location,I,C);f=h()+1;let j=kw(N,f),q=_.createHref(N);try{o.pushState(j,"",q)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(q)}a&&c&&c({action:s,location:_.location,delta:1})}function m(I,C){s="REPLACE";let N=Wv(_.location,I,C);f=h();let j=kw(N,f),q=_.createHref(N);o.replaceState(j,"",q),a&&c&&c({action:s,location:_.location,delta:0})}function b(I){return pI(I)}let _={get action(){return s},get location(){return n(i,o)},listen(I){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Ow,p),c=I,()=>{i.removeEventListener(Ow,p),c=null}},createHref(I){return e(i,I)},createURL:b,encodeLocation(I){let C=b(I);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:m,go(I){return o.go(I)}};return _}function pI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),qr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Q0(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function eA(n,e,t="/"){return gI(n,e,t,!1)}function gI(n,e,t,r){let i=typeof e=="string"?Id(e):e,a=Xc(i.pathname||"/",t);if(a==null)return null;let o=tA(n);mI(o);let s=null;for(let c=0;s==null&&c<o.length;++c){let f=II(a);s=SI(o[c],f,r)}return s}function tA(n,e=[],t=[],r=""){let i=(a,o,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(qr(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=Gc([r,c.relativePath]),h=t.concat(c);a.children&&a.children.length>0&&(qr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),tA(a.children,e,h,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:AI(f,a.index),routesMeta:h})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let c of nA(a.path))i(a,o,c)}),e}function nA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=nA(r.join("/")),s=[];return s.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&s.push(...o),s.map(c=>n.startsWith("/")&&c===""?"/":c)}function mI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var vI=/^:[\w-]+$/,yI=3,xI=2,bI=1,wI=10,_I=-2,Pw=n=>n==="*";function AI(n,e){let t=n.split("/"),r=t.length;return t.some(Pw)&&(r+=_I),e&&(r+=xI),t.filter(i=>!Pw(i)).reduce((i,a)=>i+(vI.test(a)?yI:a===""?bI:wI),r)}function EI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function SI(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let c=r[s],f=s===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=pg({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),g=c.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=pg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Gc([a,p.pathname]),pathnameBase:DI(Gc([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=Gc([a,p.pathnameBase]))}return o}function pg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=CI(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:p},g)=>{if(h==="*"){let b=s[g]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const m=s[g];return p&&!m?f[h]=void 0:f[h]=(m||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:n}}function CI(n,e=!1,t=!0){nc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function II(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nc(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Xc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function TI(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Id(n):n;return{pathname:t?t.startsWith("/")?t:RI(t,e):e,search:OI(r),hash:kI(i)}}function RI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function tv(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rA(n){let e=NI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function iA(n,e,t,r=!1){let i;typeof n=="string"?i=Id(n):(i={...n},qr(!i.pathname||!i.pathname.includes("?"),tv("?","pathname","search",i)),qr(!i.pathname||!i.pathname.includes("#"),tv("#","pathname","hash",i)),qr(!i.search||!i.search.includes("#"),tv("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}s=p>=0?e[p]:"/"}let c=TI(i,s),f=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var Gc=n=>n.join("/").replace(/\/\/+/g,"/"),DI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),OI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function PI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var aA=["POST","PUT","PATCH","DELETE"];new Set(aA);var LI=["GET",...aA];new Set(LI);var Td=fe.createContext(null);Td.displayName="DataRouter";var Jg=fe.createContext(null);Jg.displayName="DataRouterState";var oA=fe.createContext({isTransitioning:!1});oA.displayName="ViewTransition";var MI=fe.createContext(new Map);MI.displayName="Fetchers";var jI=fe.createContext(null);jI.displayName="Await";var sc=fe.createContext(null);sc.displayName="Navigation";var d1=fe.createContext(null);d1.displayName="Location";var ru=fe.createContext({outlet:null,matches:[],isDataRoute:!1});ru.displayName="Route";var Jy=fe.createContext(null);Jy.displayName="RouteError";function BI(n,{relative:e}={}){qr(p1(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=fe.useContext(sc),{hash:i,pathname:a,search:o}=g1(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:Gc([t,a])),r.createHref({pathname:s,search:o,hash:i})}function p1(){return fe.useContext(d1)!=null}function vf(){return qr(p1(),"useLocation() may be used only in the context of a <Router> component."),fe.useContext(d1).location}var sA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lA(n){fe.useContext(sc).static||fe.useLayoutEffect(n)}function e5(){let{isDataRoute:n}=fe.useContext(ru);return n?QI():FI()}function FI(){qr(p1(),"useNavigate() may be used only in the context of a <Router> component.");let n=fe.useContext(Td),{basename:e,navigator:t}=fe.useContext(sc),{matches:r}=fe.useContext(ru),{pathname:i}=vf(),a=JSON.stringify(rA(r)),o=fe.useRef(!1);return lA(()=>{o.current=!0}),fe.useCallback((c,f={})=>{if(nc(o.current,sA),!o.current)return;if(typeof c=="number"){t.go(c);return}let h=iA(c,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Gc([e,h.pathname])),(f.replace?t.replace:t.push)(h,f.state,f)},[e,t,a,i,n])}fe.createContext(null);function g1(n,{relative:e}={}){let{matches:t}=fe.useContext(ru),{pathname:r}=vf(),i=JSON.stringify(rA(t));return fe.useMemo(()=>iA(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function UI(n,e){return cA(n,e)}function cA(n,e,t,r){var C;qr(p1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=fe.useContext(sc),{matches:a}=fe.useContext(ru),o=a[a.length-1],s=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let N=h&&h.path||"";uA(c,!h||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let p=vf(),g;if(e){let N=typeof e=="string"?Id(e):e;qr(f==="/"||((C=N.pathname)==null?void 0:C.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),g=N}else g=p;let m=g.pathname||"/",b=m;if(f!=="/"){let N=f.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let _=eA(n,{pathname:b});nc(h||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),nc(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=WI(_&&_.map(N=>Object.assign({},N,{params:Object.assign({},s,N.params),pathname:Gc([f,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Gc([f,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,t,r);return e&&I?fe.createElement(d1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},I):I}function zI(){let n=KI(),e=PI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=fe.createElement(fe.Fragment,null,fe.createElement("p",null,"💿 Hey developer 👋"),fe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",fe.createElement("code",{style:a},"ErrorBoundary")," or"," ",fe.createElement("code",{style:a},"errorElement")," prop on your route.")),fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},e),t?fe.createElement("pre",{style:i},t):null,o)}var VI=fe.createElement(zI,null),qI=class extends fe.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?fe.createElement(ru.Provider,{value:this.props.routeContext},fe.createElement(Jy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HI({routeContext:n,match:e,children:t}){let r=fe.useContext(Td);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),fe.createElement(ru.Provider,{value:n},t)}function WI(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let c=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);qr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,s=-1;if(t)for(let c=0;c<i.length;c++){let f=i[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(s=c),f.route.id){let{loaderData:h,errors:p}=t,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((c,f,h)=>{let p,g=!1,m=null,b=null;t&&(p=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||VI,o&&(s<0&&h===0?(uA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):s===h&&(g=!0,b=f.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,h+1)),I=()=>{let C;return p?C=m:g?C=b:f.route.Component?C=fe.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=c,fe.createElement(HI,{match:f,routeContext:{outlet:c,matches:_,isDataRoute:t!=null},children:C})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?fe.createElement(qI,{location:t.location,revalidation:t.revalidation,component:m,error:p,children:I(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):I()},null)}function t5(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GI(n){let e=fe.useContext(Td);return qr(e,t5(n)),e}function $I(n){let e=fe.useContext(Jg);return qr(e,t5(n)),e}function YI(n){let e=fe.useContext(ru);return qr(e,t5(n)),e}function n5(n){let e=YI(n),t=e.matches[e.matches.length-1];return qr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function XI(){return n5("useRouteId")}function KI(){var r;let n=fe.useContext(Jy),e=$I("useRouteError"),t=n5("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function QI(){let{router:n}=GI("useNavigate"),e=n5("useNavigate"),t=fe.useRef(!1);return lA(()=>{t.current=!0}),fe.useCallback(async(i,a={})=>{nc(t.current,sA),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Lw={};function uA(n,e,t){!e&&!Lw[n]&&(Lw[n]=!0,nc(!1,t))}fe.memo(ZI);function ZI({routes:n,future:e,state:t}){return cA(n,void 0,t,e)}function Xa(n){qr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JI({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){qr(!p1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=fe.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Id(t));let{pathname:c="/",search:f="",hash:h="",state:p=null,key:g="default"}=t,m=fe.useMemo(()=>{let b=Xc(c,o);return b==null?null:{location:{pathname:b,search:f,hash:h,state:p,key:g},navigationType:r}},[o,c,f,h,p,g,r]);return nc(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:fe.createElement(sc.Provider,{value:s},fe.createElement(d1.Provider,{children:e,value:m}))}function eT({children:n,location:e}){return UI(Gv(n),e)}function Gv(n,e=[]){let t=[];return fe.Children.forEach(n,(r,i)=>{if(!fe.isValidElement(r))return;let a=[...e,i];if(r.type===fe.Fragment){t.push.apply(t,Gv(r.props.children,a));return}qr(r.type===Xa,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Gv(r.props.children,a)),t.push(o)}),t}var Yp="get",Xp="application/x-www-form-urlencoded";function em(n){return n!=null&&typeof n.tagName=="string"}function tT(n){return em(n)&&n.tagName.toLowerCase()==="button"}function nT(n){return em(n)&&n.tagName.toLowerCase()==="form"}function rT(n){return em(n)&&n.tagName.toLowerCase()==="input"}function iT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aT(n,e){return n.button===0&&(!e||e==="_self")&&!iT(n)}var Dp=null;function oT(){if(Dp===null)try{new FormData(document.createElement("form"),0),Dp=!1}catch{Dp=!0}return Dp}var sT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nv(n){return n!=null&&!sT.has(n)?(nc(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xp}"`),null):n}function lT(n,e){let t,r,i,a,o;if(nT(n)){let s=n.getAttribute("action");r=s?Xc(s,e):null,t=n.getAttribute("method")||Yp,i=nv(n.getAttribute("enctype"))||Xp,a=new FormData(n)}else if(tT(n)||rT(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||s.getAttribute("action");if(r=c?Xc(c,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||Yp,i=nv(n.getAttribute("formenctype"))||nv(s.getAttribute("enctype"))||Xp,a=new FormData(s,n),!oT()){let{name:f,type:h,value:p}=n;if(h==="image"){let g=f?`${f}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else f&&a.append(f,p)}}else{if(em(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yp,r=null,i=Xp,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function r5(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function cT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function fT(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await cT(a,t);return o.links?o.links():[]}return[]}));return gT(r.flat(1).filter(uT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Mw(n,e,t,r,i,a){let o=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,s=(c,f)=>{var h;return t[f].pathname!==c.pathname||((h=t[f].route.path)==null?void 0:h.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,f)=>o(c,f)||s(c,f)):a==="data"?e.filter((c,f)=>{var p;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,f)||s(c,f))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function hT(n,e,{includeHydrateFallback:t}={}){return dT(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function dT(n){return[...new Set(n)]}function pT(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function gT(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(pT(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mT=new Set([100,101,204,205]);function vT(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Xc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function fA(){let n=fe.useContext(Td);return r5(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yT(){let n=fe.useContext(Jg);return r5(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var i5=fe.createContext(void 0);i5.displayName="FrameworkContext";function hA(){let n=fe.useContext(i5);return r5(n,"You must render this element inside a <HydratedRouter> element"),n}function xT(n,e){let t=fe.useContext(i5),[r,i]=fe.useState(!1),[a,o]=fe.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:p}=e,g=fe.useRef(null);fe.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let _=C=>{C.forEach(N=>{o(N.isIntersecting)})},I=new IntersectionObserver(_,{threshold:.5});return g.current&&I.observe(g.current),()=>{I.disconnect()}}},[n]),fe.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let m=()=>{i(!0)},b=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,g,{}]:[a,g,{onFocus:E0(s,m),onBlur:E0(c,b),onMouseEnter:E0(f,m),onMouseLeave:E0(h,b),onTouchStart:E0(p,m)}]:[!1,g,{}]}function E0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function bT({page:n,...e}){let{router:t}=fA(),r=fe.useMemo(()=>eA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?fe.createElement(_T,{page:n,matches:r,...e}):null}function wT(n){let{manifest:e,routeModules:t}=hA(),[r,i]=fe.useState([]);return fe.useEffect(()=>{let a=!1;return fT(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function _T({page:n,matches:e,...t}){let r=vf(),{manifest:i,routeModules:a}=hA(),{basename:o}=fA(),{loaderData:s,matches:c}=yT(),f=fe.useMemo(()=>Mw(n,e,c,i,r,"data"),[n,e,c,i,r]),h=fe.useMemo(()=>Mw(n,e,c,i,r,"assets"),[n,e,c,i,r]),p=fe.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let b=new Set,_=!1;if(e.forEach(C=>{var j;let N=i.routes[C.route.id];!N||!N.hasLoader||(!f.some(q=>q.route.id===C.route.id)&&C.route.id in s&&((j=a[C.route.id])!=null&&j.shouldRevalidate)||N.hasClientLoader?_=!0:b.add(C.route.id))}),b.size===0)return[];let I=vT(n,o);return _&&b.size>0&&I.searchParams.set("_routes",e.filter(C=>b.has(C.route.id)).map(C=>C.route.id).join(",")),[I.pathname+I.search]},[o,s,r,i,f,e,n,a]),g=fe.useMemo(()=>hT(h,i),[h,i]),m=wT(h);return fe.createElement(fe.Fragment,null,p.map(b=>fe.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),g.map(b=>fe.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),m.map(({key:b,link:_})=>fe.createElement("link",{key:b,..._})))}function AT(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var dA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dA&&(window.__reactRouterVersion="7.6.2")}catch{}function ET({basename:n,children:e,window:t}){let r=fe.useRef();r.current==null&&(r.current=fI({window:t,v5Compat:!0}));let i=r.current,[a,o]=fe.useState({action:i.action,location:i.location}),s=fe.useCallback(c=>{fe.startTransition(()=>o(c))},[o]);return fe.useLayoutEffect(()=>i.listen(s),[i,s]),fe.createElement(JI,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var pA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,On=fe.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:c,to:f,preventScrollReset:h,viewTransition:p,...g},m){let{basename:b}=fe.useContext(sc),_=typeof f=="string"&&pA.test(f),I,C=!1;if(typeof f=="string"&&_&&(I=f,dA))try{let R=new URL(window.location.href),L=f.startsWith("//")?new URL(R.protocol+f):new URL(f),T=Xc(L.pathname,b);L.origin===R.origin&&T!=null?f=T+L.search+L.hash:C=!0}catch{nc(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=BI(f,{relative:i}),[j,q,Y]=xT(r,g),H=TT(f,{replace:o,state:s,target:c,preventScrollReset:h,relative:i,viewTransition:p});function P(R){e&&e(R),R.defaultPrevented||H(R)}let E=fe.createElement("a",{...g,...Y,href:I||N,onClick:C||a?e:P,ref:AT(m,q),target:c,"data-discover":!_&&t==="render"?"true":void 0});return j&&!_?fe.createElement(fe.Fragment,null,E,fe.createElement(bT,{page:N})):E});On.displayName="Link";var ST=fe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:c,...f},h){let p=g1(o,{relative:f.relative}),g=vf(),m=fe.useContext(Jg),{navigator:b,basename:_}=fe.useContext(sc),I=m!=null&&kT(p)&&s===!0,C=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,N=g.pathname,j=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(N=N.toLowerCase(),j=j?j.toLowerCase():null,C=C.toLowerCase()),j&&_&&(j=Xc(j,_)||j);const q=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let Y=N===C||!i&&N.startsWith(C)&&N.charAt(q)==="/",H=j!=null&&(j===C||!i&&j.startsWith(C)&&j.charAt(C.length)==="/"),P={isActive:Y,isPending:H,isTransitioning:I},E=Y?e:void 0,R;typeof r=="function"?R=r(P):R=[r,Y?"active":null,H?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(P):a;return fe.createElement(On,{...f,"aria-current":E,className:R,ref:h,style:L,to:o,viewTransition:s},typeof c=="function"?c(P):c)});ST.displayName="NavLink";var CT=fe.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Yp,action:s,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:p,...g},m)=>{let b=DT(),_=OT(s,{relative:f}),I=o.toLowerCase()==="get"?"get":"post",C=typeof s=="string"&&pA.test(s),N=j=>{if(c&&c(j),j.defaultPrevented)return;j.preventDefault();let q=j.nativeEvent.submitter,Y=(q==null?void 0:q.getAttribute("formmethod"))||o;b(q||j.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:i,state:a,relative:f,preventScrollReset:h,viewTransition:p})};return fe.createElement("form",{ref:m,method:I,action:_,onSubmit:r?c:N,...g,"data-discover":!C&&n==="render"?"true":void 0})});CT.displayName="Form";function IT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gA(n){let e=fe.useContext(Td);return qr(e,IT(n)),e}function TT(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=e5(),c=vf(),f=g1(n,{relative:a});return fe.useCallback(h=>{if(aT(h,e)){h.preventDefault();let p=t!==void 0?t:Q0(c)===Q0(f);s(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[c,s,f,t,r,e,n,i,a,o])}var RT=0,NT=()=>`__${String(++RT)}__`;function DT(){let{router:n}=gA("useSubmit"),{basename:e}=fe.useContext(sc),t=XI();return fe.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:c,body:f}=lT(r,e);if(i.navigate===!1){let h=i.fetcherKey||NT();await n.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function OT(n,{relative:e}={}){let{basename:t}=fe.useContext(sc),r=fe.useContext(ru);qr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...g1(n||".",{relative:e})},o=vf();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(h=>h==="")){s.delete("index"),c.filter(p=>p).forEach(p=>s.append("index",p));let h=s.toString();a.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Gc([t,a.pathname])),Q0(a)}function kT(n,e={}){let t=fe.useContext(oA);qr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gA("useViewTransitionState"),i=g1(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Xc(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Xc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return pg(i.pathname,o)!=null||pg(i.pathname,a)!=null}[...mT];const PT=()=>{};var jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},LT=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},vA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,h=a>>2,p=(a&3)<<4|s>>4;let g=(s&15)<<2|f>>6,m=f&63;c||(m=64,o||(g=64)),r.push(t[h],t[p],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||f==null||p==null)throw new MT;const g=a<<2|s>>4;if(r.push(g),f!==64){const m=s<<4&240|f>>2;if(r.push(m),p!==64){const b=f<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jT=function(n){const e=mA(n);return vA.encodeByteArray(e,!0)},gg=function(n){return jT(n).replace(/\./g,"")},yA=function(n){try{return vA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=()=>BT().__FIREBASE_DEFAULTS__,UT=()=>{if(typeof process>"u"||typeof jw>"u")return;const n=jw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yA(n[1]);return e&&JSON.parse(e)},tm=()=>{try{return PT()||FT()||UT()||zT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xA=n=>{var e,t;return(t=(e=tm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},bA=n=>{const e=xA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wA=()=>{var n;return(n=tm())===null||n===void 0?void 0:n.config},_A=n=>{var e;return(e=tm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(n){return n.endsWith(".cloudworkstations.dev")}async function a5(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gg(JSON.stringify(t)),gg(JSON.stringify(o)),""].join(".")}const V0={};function qT(){const n={prod:[],emulator:[]};for(const e of Object.keys(V0))V0[e]?n.emulator.push(e):n.prod.push(e);return n}function HT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Bw=!1;function o5(n,e){if(typeof window>"u"||typeof document>"u"||!Rd(window.location.host)||V0[n]===e||V0[n]||Bw)return;V0[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=qT().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function s(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Bw=!0,o()},g}function h(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=HT(r),m=t("text"),b=document.getElementById(m)||document.createElement("span"),_=t("learnmore"),I=document.getElementById(_)||document.createElement("a"),C=t("preprendIcon"),N=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const j=g.element;s(j),h(I,_);const q=f();c(N,C),j.append(N,b,I,q),document.body.appendChild(j)}a?(b.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ba())}function GT(){var n;const e=(n=tm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $T(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function YT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XT(){const n=Ba();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KT(){return!GT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SA(){try{return typeof indexedDB=="object"}catch{return!1}}function CA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function QT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="FirebaseError";class Cs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ZT,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hh.prototype.create)}}class hh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?JT(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new Cs(i,s,r)}}function JT(n,e){return n.replace(e7,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const e7=/\{\$([^}]+)}/g;function t7(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function lf(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(Fw(a)&&Fw(o)){if(!lf(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Fw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function O0(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function k0(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function n7(n,e){const t=new r7(n,e);return t.subscribe.bind(t)}class r7{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");i7(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=rv),i.error===void 0&&(i.error=rv),i.complete===void 0&&(i.complete=rv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i7(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=1e3,o7=2,s7=4*60*60*1e3,l7=.5;function Uw(n,e=a7,t=o7){const r=e*Math.pow(t,n),i=Math.round(l7*r*(Math.random()-.5)*2);return Math.min(s7,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(n){return n&&n._delegate?n._delegate:n}class Ss{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new VT;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f7(e))try{this.getOrInitializeService({instanceIdentifier:Gf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Gf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gf){return this.instances.has(e)}getOptions(e=Gf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u7(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gf){return this.component?this.component.multipleInstances?e:Gf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u7(n){return n===Gf?void 0:n}function f7(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new c7(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(wn||(wn={}));const d7={debug:wn.DEBUG,verbose:wn.VERBOSE,info:wn.INFO,warn:wn.WARN,error:wn.ERROR,silent:wn.SILENT},p7=wn.INFO,g7={[wn.DEBUG]:"log",[wn.VERBOSE]:"log",[wn.INFO]:"info",[wn.WARN]:"warn",[wn.ERROR]:"error"},m7=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=g7[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nm{constructor(e){this.name=e,this._logLevel=p7,this._logHandler=m7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wn.DEBUG,...e),this._logHandler(this,wn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wn.VERBOSE,...e),this._logHandler(this,wn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wn.INFO,...e),this._logHandler(this,wn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wn.WARN,...e),this._logHandler(this,wn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wn.ERROR,...e),this._logHandler(this,wn.ERROR,...e)}}const v7=(n,e)=>e.some(t=>n instanceof t);let zw,Vw;function y7(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x7(){return Vw||(Vw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IA=new WeakMap,$v=new WeakMap,TA=new WeakMap,iv=new WeakMap,s5=new WeakMap;function b7(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(tf(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&IA.set(t,n)}).catch(()=>{}),s5.set(e,n),e}function w7(n){if($v.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});$v.set(n,e)}let Yv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $v.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return tf(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _7(n){Yv=n(Yv)}function A7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(av(this),e,...t);return TA.set(r,e.sort?e.sort():[e]),tf(r)}:x7().includes(n)?function(...e){return n.apply(av(this),e),tf(IA.get(this))}:function(...e){return tf(n.apply(av(this),e))}}function E7(n){return typeof n=="function"?A7(n):(n instanceof IDBTransaction&&w7(n),v7(n,y7())?new Proxy(n,Yv):n)}function tf(n){if(n instanceof IDBRequest)return b7(n);if(iv.has(n))return iv.get(n);const e=E7(n);return e!==n&&(iv.set(n,e),s5.set(e,n)),e}const av=n=>s5.get(n);function RA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=tf(o);return r&&o.addEventListener("upgradeneeded",c=>{r(tf(o.result),c.oldVersion,c.newVersion,tf(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),s.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),s}const S7=["get","getKey","getAll","getAllKeys","count"],C7=["put","add","delete","clear"],ov=new Map;function qw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ov.get(e))return ov.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=C7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||S7.includes(t)))return;const a=async function(o,...s){const c=this.transaction(o,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(s.shift())),(await Promise.all([f[t](...s),i&&c.done]))[0]};return ov.set(e,a),a}_7(n=>({...n,get:(e,t,r)=>qw(e,t)||n.get(e,t,r),has:(e,t)=>!!qw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(T7(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function T7(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xv="@firebase/app",Hw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new nm("@firebase/app"),R7="@firebase/app-compat",N7="@firebase/analytics-compat",D7="@firebase/analytics",O7="@firebase/app-check-compat",k7="@firebase/app-check",P7="@firebase/auth",L7="@firebase/auth-compat",M7="@firebase/database",j7="@firebase/data-connect",B7="@firebase/database-compat",F7="@firebase/functions",U7="@firebase/functions-compat",z7="@firebase/installations",V7="@firebase/installations-compat",q7="@firebase/messaging",H7="@firebase/messaging-compat",W7="@firebase/performance",G7="@firebase/performance-compat",$7="@firebase/remote-config",Y7="@firebase/remote-config-compat",X7="@firebase/storage",K7="@firebase/storage-compat",Q7="@firebase/firestore",Z7="@firebase/ai",J7="@firebase/firestore-compat",eR="firebase",tR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="[DEFAULT]",nR={[Xv]:"fire-core",[R7]:"fire-core-compat",[D7]:"fire-analytics",[N7]:"fire-analytics-compat",[k7]:"fire-app-check",[O7]:"fire-app-check-compat",[P7]:"fire-auth",[L7]:"fire-auth-compat",[M7]:"fire-rtdb",[j7]:"fire-data-connect",[B7]:"fire-rtdb-compat",[F7]:"fire-fn",[U7]:"fire-fn-compat",[z7]:"fire-iid",[V7]:"fire-iid-compat",[q7]:"fire-fcm",[H7]:"fire-fcm-compat",[W7]:"fire-perf",[G7]:"fire-perf-compat",[$7]:"fire-rc",[Y7]:"fire-rc-compat",[X7]:"fire-gcs",[K7]:"fire-gcs-compat",[Q7]:"fire-fst",[J7]:"fire-fst-compat",[Z7]:"fire-vertex","fire-js":"fire-js",[eR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new Map,rR=new Map,Qv=new Map;function Ww(n,e){try{n.container.addComponent(e)}catch(t){Kc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function cl(n){const e=n.name;if(Qv.has(e))return Kc.debug(`There were multiple attempts to register component ${e}.`),!1;Qv.set(e,n);for(const t of mg.values())Ww(t,n);for(const t of rR.values())Ww(t,n);return!0}function yf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $o(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nf=new hh("app","Firebase",iR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=tR;function NA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw nf.create("bad-app-name",{appName:String(i)});if(t||(t=wA()),!t)throw nf.create("no-options");const a=mg.get(i);if(a){if(lf(t,a.options)&&lf(r,a.config))return a;throw nf.create("duplicate-app",{appName:i})}const o=new h7(i);for(const c of Qv.values())o.addComponent(c);const s=new aR(t,r,o);return mg.set(i,s),s}function rm(n=Kv){const e=mg.get(n);if(!e&&n===Kv&&wA())return NA();if(!e)throw nf.create("no-app",{appName:n});return e}function wo(n,e,t){var r;let i=(r=nR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kc.warn(s.join(" "));return}cl(new Ss(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="firebase-heartbeat-database",sR=1,Z0="firebase-heartbeat-store";let sv=null;function DA(){return sv||(sv=RA(oR,sR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Z0)}catch(t){console.warn(t)}}}}).catch(n=>{throw nf.create("idb-open",{originalErrorMessage:n.message})})),sv}async function lR(n){try{const t=(await DA()).transaction(Z0),r=await t.objectStore(Z0).get(OA(n));return await t.done,r}catch(e){if(e instanceof Cs)Kc.warn(e.message);else{const t=nf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kc.warn(t.message)}}}async function Gw(n,e){try{const r=(await DA()).transaction(Z0,"readwrite");await r.objectStore(Z0).put(e,OA(n)),await r.done}catch(t){if(t instanceof Cs)Kc.warn(t.message);else{const r=nf.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Kc.warn(r.message)}}}function OA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=1024,uR=30;class fR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=$w();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>uR){const o=pR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Kc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$w(),{heartbeatsToSend:r,unsentEntries:i}=hR(this._heartbeatsCache.heartbeats),a=gg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Kc.warn(t),""}}}function $w(){return new Date().toISOString().substring(0,10)}function hR(n,e=cR){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),Yw(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Yw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class dR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SA()?CA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yw(n){return gg(JSON.stringify({version:2,heartbeats:n})).length}function pR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n){cl(new Ss("platform-logger",e=>new I7(e),"PRIVATE")),cl(new Ss("heartbeat",e=>new fR(e),"PRIVATE")),wo(Xv,Hw,n),wo(Xv,Hw,"esm2017"),wo("fire-js","")}gR("");function l5(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function kA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mR=kA,PA=new hh("auth","Firebase",kA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new nm("@firebase/auth");function vR(n,...e){vg.logLevel<=wn.WARN&&vg.warn(`Auth (${dh}): ${n}`,...e)}function Kp(n,...e){vg.logLevel<=wn.ERROR&&vg.error(`Auth (${dh}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(n,...e){throw c5(n,...e)}function Kl(n,...e){return c5(n,...e)}function LA(n,e,t){const r=Object.assign(Object.assign({},mR()),{[e]:t});return new hh("auth","Firebase",r).create(e,{appName:n.name})}function $c(n){return LA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function c5(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return PA.create(n,...e)}function $t(n,e,...t){if(!n)throw c5(e,...t)}function qc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Kp(e),new Error(e)}function Qc(n,e){n||qc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function yR(){return Xw()==="http:"||Xw()==="https:"}function Xw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yR()||EA()||"connection"in navigator)?navigator.onLine:!0}function bR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qc(t>e,"Short delay should be less than long delay!"),this.isMobile=WT()||YT()}get(){return xR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n,e){Qc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AR=new v1(3e4,6e4);function iu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function au(n,e,t,r,i={}){return jA(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=m1(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:c},a);return $T()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Rd(n.emulatorConfig.host)&&(f.credentials="include"),MA.fetch()(await BA(n,n.config.apiHost,t,s),f)})}async function jA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},wR),e);try{const i=new SR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Op(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[c,f]=s.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Op(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Op(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Op(n,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw LA(n,h,f);ul(n,h)}}catch(i){if(i instanceof Cs)throw i;ul(n,"network-request-failed",{message:String(i)})}}async function y1(n,e,t,r,i={}){const a=await au(n,e,t,r,i);return"mfaPendingCredential"in a&&ul(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function BA(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?u5(n.config,i):`${n.config.apiScheme}://${i}`;return _R.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function ER(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kl(this.auth,"network-request-failed")),AR.get())})}}function Op(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Kl(n,e,r);return i.customData._tokenResponse=t,i}function Kw(n){return n!==void 0&&n.enterprise!==void 0}class CR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ER(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IR(n,e){return au(n,"GET","/v2/recaptchaConfig",iu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(n,e){return au(n,"POST","/v1/accounts:delete",e)}async function yg(n,e){return au(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RR(n,e=!1){const t=Hr(n),r=await t.getIdToken(e),i=f5(r);$t(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:q0(lv(i.auth_time)),issuedAtTime:q0(lv(i.iat)),expirationTime:q0(lv(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function lv(n){return Number(n)*1e3}function f5(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kp("JWT malformed, contained fewer than 3 sections"),null;try{const i=yA(t);return i?JSON.parse(i):(Kp("Failed to decode base64 JWT payload"),null)}catch(i){return Kp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Qw(n){const e=f5(n);return $t(e,"internal-error"),$t(typeof e.exp<"u","internal-error"),$t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J0(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Cs&&NR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function NR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=q0(this.lastLoginAt),this.creationTime=q0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xg(n){var e;const t=n.auth,r=await n.getIdToken(),i=await J0(n,yg(t,{idToken:r}));$t(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?FA(a.providerUserInfo):[],s=kR(n.providerData,o),c=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),h=c?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Jv(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function OR(n){const e=Hr(n);await xg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FA(n){return n.map(e=>{var{providerId:t}=e,r=l5(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(n,e){const t=await jA(n,{},async()=>{const r=m1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await BA(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",MA.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LR(n,e){return au(n,"POST","/v2/accounts:revokeToken",iu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$t(e.idToken,"internal-error"),$t(typeof e.idToken<"u","internal-error"),$t(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$t(e.length!==0,"internal-error");const t=Qw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await PR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new cd;return r&&($t(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($t(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&($t(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cd,this.toJSON())}_performRefresh(){return qc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n,e){$t(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sl{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=l5(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Jv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await J0(this,this.stsTokenManager.getToken(this.auth,e));return $t(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RR(this,e)}reload(){return OR(this)}_assign(e){this!==e&&($t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($o(this.auth.app))return Promise.reject($c(this.auth));const e=await this.getIdToken();return await J0(this,TR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,c,f,h;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,b=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(s=t.tenantId)!==null&&s!==void 0?s:void 0,I=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,C=(f=t.createdAt)!==null&&f!==void 0?f:void 0,N=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:j,emailVerified:q,isAnonymous:Y,providerData:H,stsTokenManager:P}=t;$t(j&&P,e,"internal-error");const E=cd.fromJSON(this.name,P);$t(typeof j=="string",e,"internal-error"),qu(p,e.name),qu(g,e.name),$t(typeof q=="boolean",e,"internal-error"),$t(typeof Y=="boolean",e,"internal-error"),qu(m,e.name),qu(b,e.name),qu(_,e.name),qu(I,e.name),qu(C,e.name),qu(N,e.name);const R=new sl({uid:j,auth:e,email:g,emailVerified:q,displayName:p,isAnonymous:Y,photoURL:b,phoneNumber:m,tenantId:_,stsTokenManager:E,createdAt:C,lastLoginAt:N});return H&&Array.isArray(H)&&(R.providerData=H.map(L=>Object.assign({},L))),I&&(R._redirectEventId=I),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new cd;i.updateFromServerResponse(t);const a=new sl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xg(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];$t(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?FA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new cd;s.updateFromIdToken(r);const c=new sl({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Jv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=new Map;function Hc(n){Qc(n instanceof Function,"Expected a class definition");let e=Zw.get(n);return e?(Qc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Zw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}UA.type="NONE";const Jw=UA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n,e,t){return`firebase:${n}:${e}:${t}`}class ud{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Qp(this.userKey,i.apiKey,a),this.fullPersistenceKey=Qp("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yg(this.auth,{idToken:e}).catch(()=>{});return t?sl._fromGetAccountInfoResponse(this.auth,t,e):null}return sl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ud(Hc(Jw),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||Hc(Jw);const o=Qp(r,e.config.apiKey,e.name);let s=null;for(const f of t)try{const h=await f._get(o);if(h){let p;if(typeof h=="string"){const g=await yg(e,{idToken:h}).catch(()=>{});if(!g)break;p=await sl._fromGetAccountInfoResponse(e,g,h)}else p=sl._fromJSON(e,h);f!==a&&(s=p),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new ud(a,e,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new ud(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GA(e))return"Blackberry";if($A(e))return"Webos";if(VA(e))return"Safari";if((e.includes("chrome/")||qA(e))&&!e.includes("edge/"))return"Chrome";if(WA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zA(n=Ba()){return/firefox\//i.test(n)}function VA(n=Ba()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qA(n=Ba()){return/crios\//i.test(n)}function HA(n=Ba()){return/iemobile/i.test(n)}function WA(n=Ba()){return/android/i.test(n)}function GA(n=Ba()){return/blackberry/i.test(n)}function $A(n=Ba()){return/webos/i.test(n)}function h5(n=Ba()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function MR(n=Ba()){var e;return h5(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jR(){return XT()&&document.documentMode===10}function YA(n=Ba()){return h5(n)||WA(n)||$A(n)||GA(n)||/windows phone/i.test(n)||HA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n,e=[]){let t;switch(n){case"Browser":t=e3(Ba());break;case"Worker":t=`${e3(Ba())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const c=e(a);o(c)}catch(c){s(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e={}){return au(n,"GET","/v2/passwordPolicy",iu(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=6;class zR{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:UR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t3(this),this.idTokenSubscription=new t3(this),this.beforeStateQueue=new BR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hc(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await ud.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yg(this,{idToken:e}),r=await sl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($o(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xg(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($o(this.app))return Promise.reject($c(this));const t=e?Hr(e):null;return t&&$t(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $o(this.app)?Promise.reject($c(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $o(this.app)?Promise.reject($c(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FR(this),t=new zR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await LR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hc(e)||this._popupRedirectResolver;$t(t,this,"argument-error"),this.redirectPersistenceManager=await ud.create(this,[Hc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if($t(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if($o(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&vR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xf(n){return Hr(n)}class t3{constructor(e){this.auth=e,this.observer=null,this.addObserver=n7(t=>this.observer=t)}get next(){return $t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qR(n){im=n}function KA(n){return im.loadJS(n)}function HR(){return im.recaptchaEnterpriseScript}function WR(){return im.gapiScript}function GR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class $R{constructor(){this.enterprise=new YR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class YR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const XR="recaptcha-enterprise",QA="NO_RECAPTCHA";class KR{constructor(e){this.type=XR,this.auth=xf(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{IR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const f=new CR(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(c=>{s(c)})})}function i(a,o,s){const c=window.grecaptcha;Kw(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(QA)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $R().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&Kw(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=HR();c.length!==0&&(c+=s),KA(c).then(()=>{i(s,a,o)}).catch(f=>{o(f)})}}).catch(s=>{o(s)})})}}async function n3(n,e,t,r=!1,i=!1){const a=new KR(n);let o;if(i)o=QA;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const s=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const c=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const c=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function bg(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await n3(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await n3(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n,e){const t=yf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(lf(a,e??{}))return i;ul(i,"already-initialized")}return t.initialize({options:e})}function ZR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Hc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JR(n,e,t){const r=xf(n);$t(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=ZA(e),{host:o,port:s}=eN(e),c=s===null?"":`:${s}`,f={url:`${a}//${o}${c}/`},h=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$t(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$t(lf(f,r.config.emulator)&&lf(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Rd(o)?(a5(`${a}//${o}${c}`),o5("Auth",!0)):tN()}function ZA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function eN(n){const e=ZA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:r3(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:r3(o)}}}function r3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function tN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qc("not implemented")}_getIdTokenResponse(e){return qc("not implemented")}_linkToIdToken(e,t){return qc("not implemented")}_getReauthenticationResolver(e){return qc("not implemented")}}async function nN(n,e){return au(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(n,e){return y1(n,"POST","/v1/accounts:signInWithPassword",iu(n,e))}async function JA(n,e){return au(n,"POST","/v1/accounts:sendOobCode",iu(n,e))}async function iN(n,e){return JA(n,e)}async function aN(n,e){return JA(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(n,e){return y1(n,"POST","/v1/accounts:signInWithEmailLink",iu(n,e))}async function sN(n,e){return y1(n,"POST","/v1/accounts:signInWithEmailLink",iu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1 extends d5{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new e1(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new e1(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bg(e,t,"signInWithPassword",rN);case"emailLink":return oN(e,{email:this._email,oobCode:this._password});default:ul(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bg(e,r,"signUpPassword",nN);case"emailLink":return sN(e,{idToken:t,email:this._email,oobCode:this._password});default:ul(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(n,e){return y1(n,"POST","/v1/accounts:signInWithIdp",iu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="http://localhost";class ih extends d5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ih(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ul("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=l5(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ih(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return fd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,fd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fd(e,t)}buildRequest(){const e={requestUri:lN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=m1(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uN(n){const e=O0(k0(n)).link,t=e?O0(k0(e)).deep_link_id:null,r=O0(k0(n)).deep_link_id;return(r?O0(k0(r)).link:null)||r||t||e||n}class p5{constructor(e){var t,r,i,a,o,s;const c=O0(k0(e)),f=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=cN((i=c.mode)!==null&&i!==void 0?i:null);$t(f&&h&&p,"argument-error"),this.apiKey=f,this.operation=p,this.code=h,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(s=c.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=uN(e);try{return new p5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this.providerId=Nd.PROVIDER_ID}static credential(e,t){return e1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=p5.parseLink(t);return $t(r,"argument-error"),e1._fromEmailAndCode(e,r.code,r.tenantId)}}Nd.PROVIDER_ID="password";Nd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends e6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends x1{constructor(){super("facebook.com")}static credential(e){return ih._fromParams({providerId:Xu.PROVIDER_ID,signInMethod:Xu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xu.credentialFromTaggedObject(e)}static credentialFromError(e){return Xu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xu.credential(e.oauthAccessToken)}catch{return null}}}Xu.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends x1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ih._fromParams({providerId:Ku.PROVIDER_ID,signInMethod:Ku.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ku.credentialFromTaggedObject(e)}static credentialFromError(e){return Ku.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ku.credential(t,r)}catch{return null}}}Ku.GOOGLE_SIGN_IN_METHOD="google.com";Ku.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends x1{constructor(){super("github.com")}static credential(e){return ih._fromParams({providerId:Qu.PROVIDER_ID,signInMethod:Qu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qu.credentialFromTaggedObject(e)}static credentialFromError(e){return Qu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qu.credential(e.oauthAccessToken)}catch{return null}}}Qu.GITHUB_SIGN_IN_METHOD="github.com";Qu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends x1{constructor(){super("twitter.com")}static credential(e,t){return ih._fromParams({providerId:Zu.PROVIDER_ID,signInMethod:Zu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zu.credentialFromTaggedObject(e)}static credentialFromError(e){return Zu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Zu.credential(t,r)}catch{return null}}}Zu.TWITTER_SIGN_IN_METHOD="twitter.com";Zu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(n,e){return y1(n,"POST","/v1/accounts:signUp",iu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await sl._fromIdTokenResponse(e,r,i),o=i3(r);return new ah({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=i3(r);return new ah({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function i3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends Cs{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new wg(e,t,r,i)}}function t6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?wg._fromErrorAndOperation(n,a,e,r):a})}async function hN(n,e,t=!1){const r=await J0(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ah._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(n,e,t=!1){const{auth:r}=n;if($o(r.app))return Promise.reject($c(r));const i="reauthenticate";try{const a=await J0(n,t6(r,i,e,n),t);$t(a.idToken,r,"internal-error");const o=f5(a.idToken);$t(o,r,"internal-error");const{sub:s}=o;return $t(n.uid===s,r,"user-mismatch"),ah._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ul(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(n,e,t=!1){if($o(n.app))return Promise.reject($c(n));const r="signIn",i=await t6(n,r,e),a=await ah._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function pN(n,e){return n6(xf(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6(n){const e=xf(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gN(n,e,t){const r=xf(n);await bg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",aN)}async function mN(n,e,t){if($o(n.app))return Promise.reject($c(n));const r=xf(n),o=await bg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&r6(n),c}),s=await ah._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function vN(n,e,t){return $o(n.app)?Promise.reject($c(n)):pN(Hr(n),Nd.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&r6(n),r})}async function yN(n,e){const t=Hr(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await iN(t.auth,i);a!==n.email&&await n.reload()}function xN(n,e,t,r){return Hr(n).onIdTokenChanged(e,t,r)}function bN(n,e,t){return Hr(n).beforeAuthStateChanged(e,t)}function wN(n,e,t,r){return Hr(n).onAuthStateChanged(e,t,r)}function _N(n){return Hr(n).signOut()}const _g="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_g,"1"),this.storage.removeItem(_g),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=1e3,EN=10;class a6 extends i6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);jR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,EN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},AN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}a6.type="LOCAL";const SN=a6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6 extends i6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}o6.type="SESSION";const s6=o6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new am(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async f=>f(t.origin,a)),c=await CN(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}am.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,c)=>{const f=g5("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(g.data.response);break;default:clearTimeout(h),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(){return window}function TN(n){Ql().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(){return typeof Ql().WorkerGlobalScope<"u"&&typeof Ql().importScripts=="function"}async function RN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DN(){return l6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="firebaseLocalStorageDb",ON=1,Ag="firebaseLocalStorage",u6="fbase_key";class b1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function om(n,e){return n.transaction([Ag],e?"readwrite":"readonly").objectStore(Ag)}function kN(){const n=indexedDB.deleteDatabase(c6);return new b1(n).toPromise()}function ey(){const n=indexedDB.open(c6,ON);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ag,{keyPath:u6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ag)?e(r):(r.close(),await kN(),e(await ey()))})})}async function a3(n,e,t){const r=om(n,!0).put({[u6]:e,value:t});return new b1(r).toPromise()}async function PN(n,e){const t=om(n,!1).get(e),r=await new b1(t).toPromise();return r===void 0?null:r.value}function o3(n,e){const t=om(n,!0).delete(e);return new b1(t).toPromise()}const LN=800,MN=3;class f6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ey(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>MN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=am._getInstance(DN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await RN(),!this.activeServiceWorker)return;this.sender=new IN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ey();return await a3(e,_g,"1"),await o3(e,_g),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>a3(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>PN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>o3(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=om(i,!1).getAll();return new b1(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}f6.type="LOCAL";const jN=f6;new v1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(n,e){return e?Hc(e):($t(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5 extends d5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function FN(n){return n6(n.auth,new m5(n),n.bypassAuthState)}function UN(n){const{auth:e,user:t}=n;return $t(t,e,"internal-error"),dN(t,new m5(n),n.bypassAuthState)}async function zN(n){const{auth:e,user:t}=n;return $t(t,e,"internal-error"),hN(t,new m5(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FN;case"linkViaPopup":case"linkViaRedirect":return zN;case"reauthViaPopup":case"reauthViaRedirect":return UN;default:ul(this.auth,"internal-error")}}resolve(e){Qc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new v1(2e3,1e4);class id extends h6{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,id.currentPopupAction&&id.currentPopupAction.cancel(),id.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $t(e,this.auth,"internal-error"),e}async onExecution(){Qc(this.filter.length===1,"Popup operations only handle one event");const e=g5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,id.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VN.get())};e()}}id.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="pendingRedirect",Zp=new Map;class HN extends h6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zp.get(this.auth._key());if(!e){try{const r=await WN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zp.set(this.auth._key(),e)}return this.bypassAuthState||Zp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WN(n,e){const t=YN(e),r=$N(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function GN(n,e){Zp.set(n._key(),e)}function $N(n){return Hc(n._redirectPersistence)}function YN(n){return Qp(qN,n.config.apiKey,n.name)}async function XN(n,e,t=!1){if($o(n.app))return Promise.reject($c(n));const r=xf(n),i=BN(r,e),o=await new HN(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=10*60*1e3;class QN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!d6(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Kl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KN&&this.cachedEventUids.clear(),this.cachedEventUids.has(s3(e))}saveEventToCache(e){this.cachedEventUids.add(s3(e)),this.lastProcessedEventTime=Date.now()}}function s3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function d6({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d6(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(n,e={}){return au(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t9=/^https?/;async function n9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await JN(n);for(const t of e)try{if(r9(t))return}catch{}ul(n,"unauthorized-domain")}function r9(n){const e=Zv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!t9.test(t))return!1;if(e9.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=new v1(3e4,6e4);function l3(){const n=Ql().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function a9(n){return new Promise((e,t)=>{var r,i,a;function o(){l3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{l3(),t(Kl(n,"network-request-failed"))},timeout:i9.get()})}if(!((i=(r=Ql().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ql().gapi)===null||a===void 0)&&a.load)o();else{const s=GR("iframefcb");return Ql()[s]=()=>{gapi.load?o():t(Kl(n,"network-request-failed"))},KA(`${WR()}?onload=${s}`).catch(c=>t(c))}}).catch(e=>{throw Jp=null,e})}let Jp=null;function o9(n){return Jp=Jp||a9(n),Jp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9=new v1(5e3,15e3),l9="__/auth/iframe",c9="emulator/auth/iframe",u9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h9(n){const e=n.config;$t(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?u5(e,c9):`https://${n.config.authDomain}/${l9}`,r={apiKey:e.apiKey,appName:n.name,v:dh},i=f9.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${m1(r).slice(1)}`}async function d9(n){const e=await o9(n),t=Ql().gapi;return $t(t,n,"internal-error"),e.open({where:document.body,url:h9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u9,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Kl(n,"network-request-failed"),s=Ql().setTimeout(()=>{a(o)},s9.get());function c(){Ql().clearTimeout(s),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g9=500,m9=600,v9="_blank",y9="http://localhost";class c3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x9(n,e,t,r=g9,i=m9){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const c=Object.assign(Object.assign({},p9),{width:r.toString(),height:i.toString(),top:a,left:o}),f=Ba().toLowerCase();t&&(s=qA(f)?v9:t),zA(f)&&(e=e||y9,c.scrollbars="yes");const h=Object.entries(c).reduce((g,[m,b])=>`${g}${m}=${b},`,"");if(MR(f)&&s!=="_self")return b9(e||"",s),new c3(null);const p=window.open(e||"",s,h);$t(p,n,"popup-blocked");try{p.focus()}catch{}return new c3(p)}function b9(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9="__/auth/handler",_9="emulator/auth/handler",A9=encodeURIComponent("fac");async function u3(n,e,t,r,i,a){$t(n.config.authDomain,n,"auth-domain-config-required"),$t(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:dh,eventId:i};if(e instanceof e6){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",t7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof x1){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const h of Object.keys(s))s[h]===void 0&&delete s[h];const c=await n._getAppCheckToken(),f=c?`#${A9}=${encodeURIComponent(c)}`:"";return`${E9(n)}?${m1(s).slice(1)}${f}`}function E9({config:n}){return n.emulator?u5(n,_9):`https://${n.authDomain}/${w9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="webStorageSupport";class S9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s6,this._completeRedirectFn=XN,this._overrideRedirectResult=GN}async _openPopup(e,t,r,i){var a;Qc((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await u3(e,t,r,Zv(),i);return x9(e,o,g5())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await u3(e,t,r,Zv(),i);return TN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Qc(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await d9(e),r=new QN(e);return t.register("authEvent",i=>($t(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cv,{type:cv},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[cv];o!==void 0&&t(!!o),ul(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=n9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YA()||VA()||h5()}}const C9=S9;var f3="@firebase/auth",h3="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R9(n){cl(new Ss("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;$t(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XA(n)},f=new VR(r,i,a,c);return ZR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),cl(new Ss("auth-internal",e=>{const t=xf(e.getProvider("auth").getImmediate());return(r=>new I9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wo(f3,h3,T9(n)),wo(f3,h3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=5*60,D9=_A("authIdTokenMaxAge")||N9;let d3=null;const O9=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>D9)return;const i=t==null?void 0:t.token;d3!==i&&(d3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function k9(n=rm()){const e=yf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QR(n,{popupRedirectResolver:C9,persistence:[jN,SN,s6]}),r=_A("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=O9(a.toString());bN(t,o,()=>o(t.currentUser)),xN(t,s=>o(s))}}const i=xA("auth");return i&&JR(t,`http://${i}`),t}function P9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}qR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Kl("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",P9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R9("Browser");var p3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rf,p6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,E){function R(){}R.prototype=E.prototype,P.D=E.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(L,T,k){for(var B=Array(arguments.length-2),V=2;V<arguments.length;V++)B[V-2]=arguments[V];return E.prototype[T].apply(L,B)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,E,R){R||(R=0);var L=Array(16);if(typeof E=="string")for(var T=0;16>T;++T)L[T]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(T=0;16>T;++T)L[T]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=P.g[0],R=P.g[1],T=P.g[2];var k=P.g[3],B=E+(k^R&(T^k))+L[0]+3614090360&4294967295;E=R+(B<<7&4294967295|B>>>25),B=k+(T^E&(R^T))+L[1]+3905402710&4294967295,k=E+(B<<12&4294967295|B>>>20),B=T+(R^k&(E^R))+L[2]+606105819&4294967295,T=k+(B<<17&4294967295|B>>>15),B=R+(E^T&(k^E))+L[3]+3250441966&4294967295,R=T+(B<<22&4294967295|B>>>10),B=E+(k^R&(T^k))+L[4]+4118548399&4294967295,E=R+(B<<7&4294967295|B>>>25),B=k+(T^E&(R^T))+L[5]+1200080426&4294967295,k=E+(B<<12&4294967295|B>>>20),B=T+(R^k&(E^R))+L[6]+2821735955&4294967295,T=k+(B<<17&4294967295|B>>>15),B=R+(E^T&(k^E))+L[7]+4249261313&4294967295,R=T+(B<<22&4294967295|B>>>10),B=E+(k^R&(T^k))+L[8]+1770035416&4294967295,E=R+(B<<7&4294967295|B>>>25),B=k+(T^E&(R^T))+L[9]+2336552879&4294967295,k=E+(B<<12&4294967295|B>>>20),B=T+(R^k&(E^R))+L[10]+4294925233&4294967295,T=k+(B<<17&4294967295|B>>>15),B=R+(E^T&(k^E))+L[11]+2304563134&4294967295,R=T+(B<<22&4294967295|B>>>10),B=E+(k^R&(T^k))+L[12]+1804603682&4294967295,E=R+(B<<7&4294967295|B>>>25),B=k+(T^E&(R^T))+L[13]+4254626195&4294967295,k=E+(B<<12&4294967295|B>>>20),B=T+(R^k&(E^R))+L[14]+2792965006&4294967295,T=k+(B<<17&4294967295|B>>>15),B=R+(E^T&(k^E))+L[15]+1236535329&4294967295,R=T+(B<<22&4294967295|B>>>10),B=E+(T^k&(R^T))+L[1]+4129170786&4294967295,E=R+(B<<5&4294967295|B>>>27),B=k+(R^T&(E^R))+L[6]+3225465664&4294967295,k=E+(B<<9&4294967295|B>>>23),B=T+(E^R&(k^E))+L[11]+643717713&4294967295,T=k+(B<<14&4294967295|B>>>18),B=R+(k^E&(T^k))+L[0]+3921069994&4294967295,R=T+(B<<20&4294967295|B>>>12),B=E+(T^k&(R^T))+L[5]+3593408605&4294967295,E=R+(B<<5&4294967295|B>>>27),B=k+(R^T&(E^R))+L[10]+38016083&4294967295,k=E+(B<<9&4294967295|B>>>23),B=T+(E^R&(k^E))+L[15]+3634488961&4294967295,T=k+(B<<14&4294967295|B>>>18),B=R+(k^E&(T^k))+L[4]+3889429448&4294967295,R=T+(B<<20&4294967295|B>>>12),B=E+(T^k&(R^T))+L[9]+568446438&4294967295,E=R+(B<<5&4294967295|B>>>27),B=k+(R^T&(E^R))+L[14]+3275163606&4294967295,k=E+(B<<9&4294967295|B>>>23),B=T+(E^R&(k^E))+L[3]+4107603335&4294967295,T=k+(B<<14&4294967295|B>>>18),B=R+(k^E&(T^k))+L[8]+1163531501&4294967295,R=T+(B<<20&4294967295|B>>>12),B=E+(T^k&(R^T))+L[13]+2850285829&4294967295,E=R+(B<<5&4294967295|B>>>27),B=k+(R^T&(E^R))+L[2]+4243563512&4294967295,k=E+(B<<9&4294967295|B>>>23),B=T+(E^R&(k^E))+L[7]+1735328473&4294967295,T=k+(B<<14&4294967295|B>>>18),B=R+(k^E&(T^k))+L[12]+2368359562&4294967295,R=T+(B<<20&4294967295|B>>>12),B=E+(R^T^k)+L[5]+4294588738&4294967295,E=R+(B<<4&4294967295|B>>>28),B=k+(E^R^T)+L[8]+2272392833&4294967295,k=E+(B<<11&4294967295|B>>>21),B=T+(k^E^R)+L[11]+1839030562&4294967295,T=k+(B<<16&4294967295|B>>>16),B=R+(T^k^E)+L[14]+4259657740&4294967295,R=T+(B<<23&4294967295|B>>>9),B=E+(R^T^k)+L[1]+2763975236&4294967295,E=R+(B<<4&4294967295|B>>>28),B=k+(E^R^T)+L[4]+1272893353&4294967295,k=E+(B<<11&4294967295|B>>>21),B=T+(k^E^R)+L[7]+4139469664&4294967295,T=k+(B<<16&4294967295|B>>>16),B=R+(T^k^E)+L[10]+3200236656&4294967295,R=T+(B<<23&4294967295|B>>>9),B=E+(R^T^k)+L[13]+681279174&4294967295,E=R+(B<<4&4294967295|B>>>28),B=k+(E^R^T)+L[0]+3936430074&4294967295,k=E+(B<<11&4294967295|B>>>21),B=T+(k^E^R)+L[3]+3572445317&4294967295,T=k+(B<<16&4294967295|B>>>16),B=R+(T^k^E)+L[6]+76029189&4294967295,R=T+(B<<23&4294967295|B>>>9),B=E+(R^T^k)+L[9]+3654602809&4294967295,E=R+(B<<4&4294967295|B>>>28),B=k+(E^R^T)+L[12]+3873151461&4294967295,k=E+(B<<11&4294967295|B>>>21),B=T+(k^E^R)+L[15]+530742520&4294967295,T=k+(B<<16&4294967295|B>>>16),B=R+(T^k^E)+L[2]+3299628645&4294967295,R=T+(B<<23&4294967295|B>>>9),B=E+(T^(R|~k))+L[0]+4096336452&4294967295,E=R+(B<<6&4294967295|B>>>26),B=k+(R^(E|~T))+L[7]+1126891415&4294967295,k=E+(B<<10&4294967295|B>>>22),B=T+(E^(k|~R))+L[14]+2878612391&4294967295,T=k+(B<<15&4294967295|B>>>17),B=R+(k^(T|~E))+L[5]+4237533241&4294967295,R=T+(B<<21&4294967295|B>>>11),B=E+(T^(R|~k))+L[12]+1700485571&4294967295,E=R+(B<<6&4294967295|B>>>26),B=k+(R^(E|~T))+L[3]+2399980690&4294967295,k=E+(B<<10&4294967295|B>>>22),B=T+(E^(k|~R))+L[10]+4293915773&4294967295,T=k+(B<<15&4294967295|B>>>17),B=R+(k^(T|~E))+L[1]+2240044497&4294967295,R=T+(B<<21&4294967295|B>>>11),B=E+(T^(R|~k))+L[8]+1873313359&4294967295,E=R+(B<<6&4294967295|B>>>26),B=k+(R^(E|~T))+L[15]+4264355552&4294967295,k=E+(B<<10&4294967295|B>>>22),B=T+(E^(k|~R))+L[6]+2734768916&4294967295,T=k+(B<<15&4294967295|B>>>17),B=R+(k^(T|~E))+L[13]+1309151649&4294967295,R=T+(B<<21&4294967295|B>>>11),B=E+(T^(R|~k))+L[4]+4149444226&4294967295,E=R+(B<<6&4294967295|B>>>26),B=k+(R^(E|~T))+L[11]+3174756917&4294967295,k=E+(B<<10&4294967295|B>>>22),B=T+(E^(k|~R))+L[2]+718787259&4294967295,T=k+(B<<15&4294967295|B>>>17),B=R+(k^(T|~E))+L[9]+3951481745&4294967295,P.g[0]=P.g[0]+E&4294967295,P.g[1]=P.g[1]+(T+(B<<21&4294967295|B>>>11))&4294967295,P.g[2]=P.g[2]+T&4294967295,P.g[3]=P.g[3]+k&4294967295}r.prototype.u=function(P,E){E===void 0&&(E=P.length);for(var R=E-this.blockSize,L=this.B,T=this.h,k=0;k<E;){if(T==0)for(;k<=R;)i(this,P,k),k+=this.blockSize;if(typeof P=="string"){for(;k<E;)if(L[T++]=P.charCodeAt(k++),T==this.blockSize){i(this,L),T=0;break}}else for(;k<E;)if(L[T++]=P[k++],T==this.blockSize){i(this,L),T=0;break}}this.h=T,this.o+=E},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var E=1;E<P.length-8;++E)P[E]=0;var R=8*this.o;for(E=P.length-8;E<P.length;++E)P[E]=R&255,R/=256;for(this.u(P),P=Array(16),E=R=0;4>E;++E)for(var L=0;32>L;L+=8)P[R++]=this.g[E]>>>L&255;return P};function a(P,E){var R=s;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=E(P)}function o(P,E){this.h=E;for(var R=[],L=!0,T=P.length-1;0<=T;T--){var k=P[T]|0;L&&k==E||(R[T]=k,L=!1)}this.g=R}var s={};function c(P){return-128<=P&&128>P?a(P,function(E){return new o([E|0],0>E?-1:0)}):new o([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return I(f(-P));for(var E=[],R=1,L=0;P>=R;L++)E[L]=P/R|0,R*=4294967296;return new o(E,0)}function h(P,E){if(P.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P.charAt(0)=="-")return I(h(P.substring(1),E));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=f(Math.pow(E,8)),L=p,T=0;T<P.length;T+=8){var k=Math.min(8,P.length-T),B=parseInt(P.substring(T,T+k),E);8>k?(k=f(Math.pow(E,k)),L=L.j(k).add(f(B))):(L=L.j(R),L=L.add(f(B)))}return L}var p=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(_(this))return-I(this).m();for(var P=0,E=1,R=0;R<this.g.length;R++){var L=this.i(R);P+=(0<=L?L:4294967296+L)*E,E*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(_(this))return"-"+I(this).toString(P);for(var E=f(Math.pow(P,6)),R=this,L="";;){var T=q(R,E).g;R=C(R,T.j(E));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=T,b(R))return k+L;for(;6>k.length;)k="0"+k;L=k+L}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(var E=0;E<P.g.length;E++)if(P.g[E]!=0)return!1;return!0}function _(P){return P.h==-1}n.l=function(P){return P=C(this,P),_(P)?-1:b(P)?0:1};function I(P){for(var E=P.g.length,R=[],L=0;L<E;L++)R[L]=~P.g[L];return new o(R,~P.h).add(g)}n.abs=function(){return _(this)?I(this):this},n.add=function(P){for(var E=Math.max(this.g.length,P.g.length),R=[],L=0,T=0;T<=E;T++){var k=L+(this.i(T)&65535)+(P.i(T)&65535),B=(k>>>16)+(this.i(T)>>>16)+(P.i(T)>>>16);L=B>>>16,k&=65535,B&=65535,R[T]=B<<16|k}return new o(R,R[R.length-1]&-2147483648?-1:0)};function C(P,E){return P.add(I(E))}n.j=function(P){if(b(this)||b(P))return p;if(_(this))return _(P)?I(this).j(I(P)):I(I(this).j(P));if(_(P))return I(this.j(I(P)));if(0>this.l(m)&&0>P.l(m))return f(this.m()*P.m());for(var E=this.g.length+P.g.length,R=[],L=0;L<2*E;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(var T=0;T<P.g.length;T++){var k=this.i(L)>>>16,B=this.i(L)&65535,V=P.i(T)>>>16,Q=P.i(T)&65535;R[2*L+2*T]+=B*Q,N(R,2*L+2*T),R[2*L+2*T+1]+=k*Q,N(R,2*L+2*T+1),R[2*L+2*T+1]+=B*V,N(R,2*L+2*T+1),R[2*L+2*T+2]+=k*V,N(R,2*L+2*T+2)}for(L=0;L<E;L++)R[L]=R[2*L+1]<<16|R[2*L];for(L=E;L<2*E;L++)R[L]=0;return new o(R,0)};function N(P,E){for(;(P[E]&65535)!=P[E];)P[E+1]+=P[E]>>>16,P[E]&=65535,E++}function j(P,E){this.g=P,this.h=E}function q(P,E){if(b(E))throw Error("division by zero");if(b(P))return new j(p,p);if(_(P))return E=q(I(P),E),new j(I(E.g),I(E.h));if(_(E))return E=q(P,I(E)),new j(I(E.g),E.h);if(30<P.g.length){if(_(P)||_(E))throw Error("slowDivide_ only works with positive integers.");for(var R=g,L=E;0>=L.l(P);)R=Y(R),L=Y(L);var T=H(R,1),k=H(L,1);for(L=H(L,2),R=H(R,2);!b(L);){var B=k.add(L);0>=B.l(P)&&(T=T.add(R),k=B),L=H(L,1),R=H(R,1)}return E=C(P,T.j(E)),new j(T,E)}for(T=p;0<=P.l(E);){for(R=Math.max(1,Math.floor(P.m()/E.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),k=f(R),B=k.j(E);_(B)||0<B.l(P);)R-=L,k=f(R),B=k.j(E);b(k)&&(k=g),T=T.add(k),P=C(P,B)}return new j(T,P)}n.A=function(P){return q(this,P).h},n.and=function(P){for(var E=Math.max(this.g.length,P.g.length),R=[],L=0;L<E;L++)R[L]=this.i(L)&P.i(L);return new o(R,this.h&P.h)},n.or=function(P){for(var E=Math.max(this.g.length,P.g.length),R=[],L=0;L<E;L++)R[L]=this.i(L)|P.i(L);return new o(R,this.h|P.h)},n.xor=function(P){for(var E=Math.max(this.g.length,P.g.length),R=[],L=0;L<E;L++)R[L]=this.i(L)^P.i(L);return new o(R,this.h^P.h)};function Y(P){for(var E=P.g.length+1,R=[],L=0;L<E;L++)R[L]=P.i(L)<<1|P.i(L-1)>>>31;return new o(R,P.h)}function H(P,E){var R=E>>5;E%=32;for(var L=P.g.length-R,T=[],k=0;k<L;k++)T[k]=0<E?P.i(k+R)>>>E|P.i(k+R+1)<<32-E:P.i(k+R);return new o(T,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=h,rf=o}).apply(typeof p3<"u"?p3:typeof self<"u"?self:typeof window<"u"?window:{});var kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g6,P0,m6,eg,ty,v6,y6,x6;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,F,$){return w==Array.prototype||w==Object.prototype||(w[F]=$.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof kp=="object"&&kp];for(var F=0;F<w.length;++F){var $=w[F];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var r=t(this);function i(w,F){if(F)e:{var $=r;w=w.split(".");for(var le=0;le<w.length-1;le++){var Ce=w[le];if(!(Ce in $))break e;$=$[Ce]}w=w[w.length-1],le=$[w],F=F(le),F!=le&&F!=null&&e($,w,{configurable:!0,writable:!0,value:F})}}function a(w,F){w instanceof String&&(w+="");var $=0,le=!1,Ce={next:function(){if(!le&&$<w.length){var Le=$++;return{value:F(Le,w[Le]),done:!1}}return le=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}i("Array.prototype.values",function(w){return w||function(){return a(this,function(F,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function c(w){var F=typeof w;return F=F!="object"?F:w?Array.isArray(w)?"array":F:"null",F=="array"||F=="object"&&typeof w.length=="number"}function f(w){var F=typeof w;return F=="object"&&w!=null||F=="function"}function h(w,F,$){return w.call.apply(w.bind,arguments)}function p(w,F,$){if(!w)throw Error();if(2<arguments.length){var le=Array.prototype.slice.call(arguments,2);return function(){var Ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ce,le),w.apply(F,Ce)}}return function(){return w.apply(F,arguments)}}function g(w,F,$){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function m(w,F){var $=Array.prototype.slice.call(arguments,1);return function(){var le=$.slice();return le.push.apply(le,arguments),w.apply(this,le)}}function b(w,F){function $(){}$.prototype=F.prototype,w.aa=F.prototype,w.prototype=new $,w.prototype.constructor=w,w.Qb=function(le,Ce,Le){for(var ot=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)ot[Ut-2]=arguments[Ut];return F.prototype[Ce].apply(le,ot)}}function _(w){const F=w.length;if(0<F){const $=Array(F);for(let le=0;le<F;le++)$[le]=w[le];return $}return[]}function I(w,F){for(let $=1;$<arguments.length;$++){const le=arguments[$];if(c(le)){const Ce=w.length||0,Le=le.length||0;w.length=Ce+Le;for(let ot=0;ot<Le;ot++)w[Ce+ot]=le[ot]}else w.push(le)}}class C{constructor(F,$){this.i=F,this.j=$,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function N(w){return/^[\s\xa0]*$/.test(w)}function j(){var w=s.navigator;return w&&(w=w.userAgent)?w:""}function q(w){return q[" "](w),w}q[" "]=function(){};var Y=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function H(w,F,$){for(const le in w)F.call($,w[le],le,w)}function P(w,F){for(const $ in w)F.call(void 0,w[$],$,w)}function E(w){const F={};for(const $ in w)F[$]=w[$];return F}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(w,F){let $,le;for(let Ce=1;Ce<arguments.length;Ce++){le=arguments[Ce];for($ in le)w[$]=le[$];for(let Le=0;Le<R.length;Le++)$=R[Le],Object.prototype.hasOwnProperty.call(le,$)&&(w[$]=le[$])}}function T(w){var F=1;w=w.split(":");const $=[];for(;0<F&&w.length;)$.push(w.shift()),F--;return w.length&&$.push(w.join(":")),$}function k(w){s.setTimeout(()=>{throw w},0)}function B(){var w=oe;let F=null;return w.g&&(F=w.g,w.g=w.g.next,w.g||(w.h=null),F.next=null),F}class V{constructor(){this.h=this.g=null}add(F,$){const le=Q.get();le.set(F,$),this.h?this.h.next=le:this.g=le,this.h=le}}var Q=new C(()=>new z,w=>w.reset());class z{constructor(){this.next=this.g=this.h=null}set(F,$){this.h=F,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let U,te=!1,oe=new V,X=()=>{const w=s.Promise.resolve(void 0);U=()=>{w.then(ge)}};var ge=()=>{for(var w;w=B();){try{w.h.call(w.g)}catch($){k($)}var F=Q;F.j(w),100>F.h&&(F.h++,w.next=F.g,F.g=w)}te=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(w,F){this.type=w,this.g=this.target=F,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var w=!1,F=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const $=()=>{};s.addEventListener("test",$,F),s.removeEventListener("test",$,F)}catch{}return w}();function ae(w,F){if(Z.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var $=this.type=w.type,le=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=F,F=w.relatedTarget){if(Y){e:{try{q(F.nodeName);var Ce=!0;break e}catch{}Ce=!1}Ce||(F=null)}}else $=="mouseover"?F=w.fromElement:$=="mouseout"&&(F=w.toElement);this.relatedTarget=F,le?(this.clientX=le.clientX!==void 0?le.clientX:le.pageX,this.clientY=le.clientY!==void 0?le.clientY:le.pageY,this.screenX=le.screenX||0,this.screenY=le.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:pe[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&ae.aa.h.call(this)}}b(ae,Z);var pe={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ie(w,F,$,le,Ce){this.listener=w,this.proxy=null,this.src=F,this.type=$,this.capture=!!le,this.ha=Ce,this.key=++_e,this.da=this.fa=!1}function $e(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function qe(w){this.src=w,this.g={},this.h=0}qe.prototype.add=function(w,F,$,le,Ce){var Le=w.toString();w=this.g[Le],w||(w=this.g[Le]=[],this.h++);var ot=lt(w,F,le,Ce);return-1<ot?(F=w[ot],$||(F.fa=!1)):(F=new Ie(F,this.src,Le,!!le,Ce),F.fa=$,w.push(F)),F};function at(w,F){var $=F.type;if($ in w.g){var le=w.g[$],Ce=Array.prototype.indexOf.call(le,F,void 0),Le;(Le=0<=Ce)&&Array.prototype.splice.call(le,Ce,1),Le&&($e(F),w.g[$].length==0&&(delete w.g[$],w.h--))}}function lt(w,F,$,le){for(var Ce=0;Ce<w.length;++Ce){var Le=w[Ce];if(!Le.da&&Le.listener==F&&Le.capture==!!$&&Le.ha==le)return Ce}return-1}var wt="closure_lm_"+(1e6*Math.random()|0),Be={};function ve(w,F,$,le,Ce){if(Array.isArray(F)){for(var Le=0;Le<F.length;Le++)ve(w,F[Le],$,le,Ce);return null}return $=At($),w&&w[Ae]?w.K(F,$,f(le)?!!le.capture:!1,Ce):ht(w,F,$,!1,le,Ce)}function ht(w,F,$,le,Ce,Le){if(!F)throw Error("Invalid event type");var ot=f(Ce)?!!Ce.capture:!!Ce,Ut=nt(w);if(Ut||(w[wt]=Ut=new qe(w)),$=Ut.add(F,$,le,ot,Le),$.proxy)return $;if(le=ct(),$.proxy=le,le.src=w,le.listener=$,w.addEventListener)ne||(Ce=ot),Ce===void 0&&(Ce=!1),w.addEventListener(F.toString(),le,Ce);else if(w.attachEvent)w.attachEvent(We(F.toString()),le);else if(w.addListener&&w.removeListener)w.addListener(le);else throw Error("addEventListener and attachEvent are unavailable.");return $}function ct(){function w($){return F.call(w.src,w.listener,$)}const F=st;return w}function Ne(w,F,$,le,Ce){if(Array.isArray(F))for(var Le=0;Le<F.length;Le++)Ne(w,F[Le],$,le,Ce);else le=f(le)?!!le.capture:!!le,$=At($),w&&w[Ae]?(w=w.i,F=String(F).toString(),F in w.g&&(Le=w.g[F],$=lt(Le,$,le,Ce),-1<$&&($e(Le[$]),Array.prototype.splice.call(Le,$,1),Le.length==0&&(delete w.g[F],w.h--)))):w&&(w=nt(w))&&(F=w.g[F.toString()],w=-1,F&&(w=lt(F,$,le,Ce)),($=-1<w?F[w]:null)&&Ke($))}function Ke(w){if(typeof w!="number"&&w&&!w.da){var F=w.src;if(F&&F[Ae])at(F.i,w);else{var $=w.type,le=w.proxy;F.removeEventListener?F.removeEventListener($,le,w.capture):F.detachEvent?F.detachEvent(We($),le):F.addListener&&F.removeListener&&F.removeListener(le),($=nt(F))?(at($,w),$.h==0&&($.src=null,F[wt]=null)):$e(w)}}}function We(w){return w in Be?Be[w]:Be[w]="on"+w}function st(w,F){if(w.da)w=!0;else{F=new ae(F,this);var $=w.listener,le=w.ha||w.src;w.fa&&Ke(w),w=$.call(le,F)}return w}function nt(w){return w=w[wt],w instanceof qe?w:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(w){return typeof w=="function"?w:(w[ut]||(w[ut]=function(F){return w.handleEvent(F)}),w[ut])}function vt(){G.call(this),this.i=new qe(this),this.M=this,this.F=null}b(vt,G),vt.prototype[Ae]=!0,vt.prototype.removeEventListener=function(w,F,$,le){Ne(this,w,F,$,le)};function _t(w,F){var $,le=w.F;if(le)for($=[];le;le=le.F)$.push(le);if(w=w.M,le=F.type||F,typeof F=="string")F=new Z(F,w);else if(F instanceof Z)F.target=F.target||w;else{var Ce=F;F=new Z(le,w),L(F,Ce)}if(Ce=!0,$)for(var Le=$.length-1;0<=Le;Le--){var ot=F.g=$[Le];Ce=Nt(ot,le,!0,F)&&Ce}if(ot=F.g=w,Ce=Nt(ot,le,!0,F)&&Ce,Ce=Nt(ot,le,!1,F)&&Ce,$)for(Le=0;Le<$.length;Le++)ot=F.g=$[Le],Ce=Nt(ot,le,!1,F)&&Ce}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var w=this.i,F;for(F in w.g){for(var $=w.g[F],le=0;le<$.length;le++)$e($[le]);delete w.g[F],w.h--}}this.F=null},vt.prototype.K=function(w,F,$,le){return this.i.add(String(w),F,!1,$,le)},vt.prototype.L=function(w,F,$,le){return this.i.add(String(w),F,!0,$,le)};function Nt(w,F,$,le){if(F=w.i.g[String(F)],!F)return!0;F=F.concat();for(var Ce=!0,Le=0;Le<F.length;++Le){var ot=F[Le];if(ot&&!ot.da&&ot.capture==$){var Ut=ot.listener,dn=ot.ha||ot.src;ot.fa&&at(w.i,ot),Ce=Ut.call(dn,le)!==!1&&Ce}}return Ce&&!le.defaultPrevented}function bt(w,F,$){if(typeof w=="function")$&&(w=g(w,$));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:s.setTimeout(w,F||0)}function Dt(w){w.g=bt(()=>{w.g=null,w.i&&(w.i=!1,Dt(w))},w.l);const F=w.h;w.h=null,w.m.apply(null,F)}class ft extends G{constructor(F,$){super(),this.m=F,this.l=$,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(w){G.call(this),this.h=w,this.g={}}b(vn,G);var Vt=[];function Kn(w){H(w.g,function(F,$){this.g.hasOwnProperty($)&&Ke(F)},w),w.g={}}vn.prototype.N=function(){vn.aa.N.call(this),Kn(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=s.JSON.stringify,En=s.JSON.parse,pi=class{stringify(w){return s.JSON.stringify(w,void 0)}parse(w){return s.JSON.parse(w,void 0)}};function on(){}on.prototype.h=null;function pa(w){return w.h||(w.h=w.i())}function In(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){Z.call(this,"d")}b(cr,Z);function yn(){Z.call(this,"c")}b(yn,Z);var Tt={},nn=null;function Si(){return nn=nn||new vt}Tt.La="serverreachability";function jn(w){Z.call(this,Tt.La,w)}b(jn,Z);function vr(w){const F=Si();_t(F,new jn(F))}Tt.STAT_EVENT="statevent";function Ua(w,F){Z.call(this,Tt.STAT_EVENT,w),this.stat=F}b(Ua,Z);function yt(w){const F=Si();_t(F,new Ua(F,w))}Tt.Ma="timingevent";function Gn(w,F){Z.call(this,Tt.Ma,w),this.size=F}b(Gn,Z);function $n(w,F){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){w()},F)}function yr(){this.g=!0}yr.prototype.xa=function(){this.g=!1};function Sr(w,F,$,le,Ce,Le){w.info(function(){if(w.g)if(Le)for(var ot="",Ut=Le.split("&"),dn=0;dn<Ut.length;dn++){var Qt=Ut[dn].split("=");if(1<Qt.length){var Un=Qt[0];Qt=Qt[1];var Qn=Un.split("_");ot=2<=Qn.length&&Qn[1]=="type"?ot+(Un+"="+Qt+"&"):ot+(Un+"=redacted&")}}else ot=null;else ot=Le;return"XMLHTTP REQ ("+le+") [attempt "+Ce+"]: "+F+`
`+$+`
`+ot})}function Dr(w,F,$,le,Ce,Le,ot){w.info(function(){return"XMLHTTP RESP ("+le+") [ attempt "+Ce+"]: "+F+`
`+$+`
`+Le+" "+ot})}function Gr(w,F,$,le){w.info(function(){return"XMLHTTP TEXT ("+F+"): "+Ji(w,$)+(le?" "+le:"")})}function Is(w,F){w.info(function(){return"TIMEOUT: "+F})}yr.prototype.info=function(){};function Ji(w,F){if(!w.g)return F;if(!F)return null;try{var $=JSON.parse(F);if($){for(w=0;w<$.length;w++)if(Array.isArray($[w])){var le=$[w];if(!(2>le.length)){var Ce=le[1];if(Array.isArray(Ce)&&!(1>Ce.length)){var Le=Ce[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var ot=1;ot<Ce.length;ot++)Ce[ot]=""}}}}return Kt($)}catch{return F}}var gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$r;function ni(){}b(ni,on),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},$r=new ni;function ur(w,F,$,le){this.j=w,this.i=F,this.l=$,this.R=le||1,this.U=new vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var Co={},Io={};function Bi(w,F,$){w.L=1,w.v=es(Ii(F)),w.m=$,w.P=!0,ga(w,null)}function ga(w,F){w.F=Date.now(),Rs(w),w.A=Ii(w.v);var $=w.A,le=w.R;Array.isArray(le)||(le=[String(le)]),Ft($.i,"t",le),w.C=0,$=w.j.J,w.h=new Bn,w.g=ee(w.j,$?F:null,!w.m),0<w.O&&(w.M=new ft(g(w.Y,w,w.g),w.O)),F=w.U,$=w.g,le=w.ca;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(Vt[0]=Ce.toString()),Ce=Vt);for(var Le=0;Le<Ce.length;Le++){var ot=ve($,Ce[Le],le||F.handleEvent,!1,F.h||F);if(!ot)break;F.g[ot.key]=ot}F=w.H?E(w.H):{},w.m?(w.u||(w.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,F)):(w.u="GET",w.g.ea(w.A,w.u,null,F)),vr(),Sr(w.i,w.u,w.A,w.l,w.R,w.m)}ur.prototype.ca=function(w){w=w.target;const F=this.M;F&&Xr(w)==3?F.j():this.Y(w)},ur.prototype.Y=function(w){try{if(w==this.g)e:{const Qn=Xr(this.g);var F=this.g.Ba();const so=this.g.Z();if(!(3>Qn)&&(Qn!=3||this.g&&(this.h.h||this.g.oa()||hu(this.g)))){this.J||Qn!=4||F==7||(F==8||0>=so?vr(3):vr(2)),za(this);var $=this.g.Z();this.X=$;t:if(Ts(this)){var le=hu(this.g);w="";var Ce=le.length,Le=Xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),Va(this);var ot="";break t}this.h.i=new s.TextDecoder}for(F=0;F<Ce;F++)this.h.h=!0,w+=this.h.i.decode(le[F],{stream:!(Le&&F==Ce-1)});le.length=0,this.h.g+=w,this.C=0,ot=this.h.g}else ot=this.g.oa();if(this.o=$==200,Dr(this.i,this.u,this.A,this.l,this.R,Qn,$),this.o){if(this.T&&!this.K){t:{if(this.g){var Ut,dn=this.g;if((Ut=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Ut)){var Qt=Ut;break t}}Qt=null}if($=Qt)Gr(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,To(this,$);else{this.o=!1,this.s=3,yt(12),ri(this),Va(this);break e}}if(this.P){$=!0;let Br;for(;!this.J&&this.C<ot.length;)if(Br=fc(this,ot),Br==Io){Qn==4&&(this.s=4,yt(14),$=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Br==Co){this.s=4,yt(15),Gr(this.i,this.l,ot,"[Invalid Chunk]"),$=!1;break}else Gr(this.i,this.l,Br,null),To(this,Br);if(Ts(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qn!=4||ot.length!=0||this.h.h||(this.s=1,yt(16),$=!1),this.o=this.o&&$,!$)Gr(this.i,this.l,ot,"[Invalid Chunked Response]"),ri(this),Va(this);else if(0<ot.length&&!this.W){this.W=!0;var Un=this.j;Un.g==this&&Un.ba&&!Un.M&&(Un.j.info("Great, no buffering proxy detected. Bytes received: "+ot.length),os(Un),Un.M=!0,yt(11))}}else Gr(this.i,this.l,ot,null),To(this,ot);Qn==4&&ri(this),this.o&&!this.J&&(Qn==4?ss(this.j,this):(this.o=!1,Rs(this)))}else rs(this.g),$==400&&0<ot.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),ri(this),Va(this)}}}catch{}finally{}};function Ts(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function fc(w,F){var $=w.C,le=F.indexOf(`
`,$);return le==-1?Io:($=Number(F.substring($,le)),isNaN($)?Co:(le+=1,le+$>F.length?Io:(F=F.slice(le,le+$),w.C=le+$,F)))}ur.prototype.cancel=function(){this.J=!0,ri(this)};function Rs(w){w.S=Date.now()+w.I,su(w,w.I)}function su(w,F){if(w.B!=null)throw Error("WatchDog timer not null");w.B=$n(g(w.ba,w),F)}function za(w){w.B&&(s.clearTimeout(w.B),w.B=null)}ur.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(Is(this.i,this.A),this.L!=2&&(vr(),yt(17)),ri(this),this.s=2,Va(this)):su(this,this.S-w)};function Va(w){w.j.G==0||w.J||ss(w.j,w)}function ri(w){za(w);var F=w.M;F&&typeof F.ma=="function"&&F.ma(),w.M=null,Kn(w.U),w.g&&(F=w.g,w.g=null,F.abort(),F.ma())}function To(w,F){try{var $=w.j;if($.G!=0&&($.g==w||hc($.h,w))){if(!w.K&&hc($.h,w)&&$.G==3){try{var le=$.Da.g.parse(F)}catch{le=null}if(Array.isArray(le)&&le.length==3){var Ce=le;if(Ce[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<w.F)Mo($),yl($);else break e;Ls($),yt(18)}}else $.za=Ce[1],0<$.za-$.T&&37500>Ce[2]&&$.F&&$.v==0&&!$.C&&($.C=$n(g($.Za,$),6e3));if(1>=Ro($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else Vi($,11)}else if((w.K||$.g==w)&&Mo($),!N(F))for(Ce=$.Da.g.parse(F),F=0;F<Ce.length;F++){let Qt=Ce[F];if($.T=Qt[0],Qt=Qt[1],$.G==2)if(Qt[0]=="c"){$.K=Qt[1],$.ia=Qt[2];const Un=Qt[3];Un!=null&&($.la=Un,$.j.info("VER="+$.la));const Qn=Qt[4];Qn!=null&&($.Aa=Qn,$.j.info("SVER="+$.Aa));const so=Qt[5];so!=null&&typeof so=="number"&&0<so&&(le=1.5*so,$.L=le,$.j.info("backChannelRequestTimeoutMs_="+le)),le=$;const Br=w.g;if(Br){const ba=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var Le=le.h;Le.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(fr(Le,Le.h),Le.h=null))}if(le.D){const ls=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;ls&&(le.ya=ls,Fn(le.I,le.D,ls))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-w.F,$.j.info("Handshake RTT: "+$.R+"ms")),le=$;var ot=w;if(le.qa=O(le,le.J?le.ia:null,le.W),ot.K){mi(le.h,ot);var Ut=ot,dn=le.L;dn&&(Ut.I=dn),Ut.B&&(za(Ut),Rs(Ut)),le.g=ot}else bl(le);0<$.i.length&&xl($)}else Qt[0]!="stop"&&Qt[0]!="close"||Vi($,7);else $.G==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Vi($,7):Lo($):Qt[0]!="noop"&&$.l&&$.l.ta(Qt),$.v=0)}}vr(4)}catch{}}var lu=class{constructor(w,F){this.g=w,this.map=F}};function Ja(w){this.l=w||10,s.PerformanceNavigationTiming?(w=s.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pl(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function Ro(w){return w.h?1:w.g?w.g.size:0}function hc(w,F){return w.h?w.h==F:w.g?w.g.has(F):!1}function fr(w,F){w.g?w.g.add(F):w.h=F}function mi(w,F){w.h&&w.h==F?w.h=null:w.g&&w.g.has(F)&&w.g.delete(F)}Ja.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function gl(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let F=w.i;for(const $ of w.g.values())F=F.concat($.D);return F}return _(w.i)}function cu(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var F=[],$=w.length,le=0;le<$;le++)F.push(w[le]);return F}F=[],$=0;for(le in w)F[$++]=w[le];return F}function Qo(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var F=[];w=w.length;for(var $=0;$<w;$++)F.push($);return F}F=[],$=0;for(const le in w)F[$++]=le;return F}}}function dc(w,F){if(w.forEach&&typeof w.forEach=="function")w.forEach(F,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,F,void 0);else for(var $=Qo(w),le=cu(w),Ce=le.length,Le=0;Le<Ce;Le++)F.call(void 0,le[Le],$&&$[Le],w)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ml(w,F){if(w){w=w.split("&");for(var $=0;$<w.length;$++){var le=w[$].indexOf("="),Ce=null;if(0<=le){var Le=w[$].substring(0,le);Ce=w[$].substring(le+1)}else Le=w[$];F(Le,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function Sn(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof Sn){this.h=w.h,Zo(this,w.j),this.o=w.o,this.g=w.g,Jo(this,w.s),this.l=w.l;var F=w.i,$=new to;$.i=F.i,F.g&&($.g=new Map(F.g),$.h=F.h),eo(this,$),this.m=w.m}else w&&(F=String(w).match(Ci))?(this.h=!1,Zo(this,F[1]||"",!0),this.o=ma(F[2]||""),this.g=ma(F[3]||"",!0),Jo(this,F[4]),this.l=ma(F[5]||"",!0),eo(this,F[6]||"",!0),this.m=ma(F[7]||"")):(this.h=!1,this.i=new to(null,this.h))}Sn.prototype.toString=function(){var w=[],F=this.j;F&&w.push(No(F,pc,!0),":");var $=this.g;return($||F=="file")&&(w.push("//"),(F=this.o)&&w.push(No(F,pc,!0),"@"),w.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&w.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&w.push("/"),w.push(No($,$.charAt(0)=="/"?Do:gc,!0))),($=this.i.toString())&&w.push("?",$),($=this.m)&&w.push("#",No($,Oo)),w.join("")};function Ii(w){return new Sn(w)}function Zo(w,F,$){w.j=$?ma(F,!0):F,w.j&&(w.j=w.j.replace(/:$/,""))}function Jo(w,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);w.s=F}else w.s=null}function eo(w,F,$){F instanceof to?(w.i=F,fu(w.i,w.h)):($||(F=No(F,vl)),w.i=new to(F,w.h))}function Fn(w,F,$){w.i.set(F,$)}function es(w){return Fn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function ma(w,F){return w?F?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function No(w,F,$){return typeof w=="string"?(w=encodeURI(w).replace(F,uu),$&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function uu(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var pc=/[#\/\?@]/g,gc=/[#\?:]/g,Do=/[#\?]/g,vl=/[#\?@]/g,Oo=/#/g;function to(w,F){this.h=this.g=null,this.i=w||null,this.j=!!F}function tr(w){w.g||(w.g=new Map,w.h=0,w.i&&ml(w.i,function(F,$){w.add(decodeURIComponent(F.replace(/\+/g," ")),$)}))}n=to.prototype,n.add=function(w,F){tr(this),this.i=null,w=ro(this,w);var $=this.g.get(w);return $||this.g.set(w,$=[]),$.push(F),this.h+=1,this};function ko(w,F){tr(w),F=ro(w,F),w.g.has(F)&&(w.i=null,w.h-=w.g.get(F).length,w.g.delete(F))}function no(w,F){return tr(w),F=ro(w,F),w.g.has(F)}n.forEach=function(w,F){tr(this),this.g.forEach(function($,le){$.forEach(function(Ce){w.call(F,Ce,le,this)},this)},this)},n.na=function(){tr(this);const w=Array.from(this.g.values()),F=Array.from(this.g.keys()),$=[];for(let le=0;le<F.length;le++){const Ce=w[le];for(let Le=0;Le<Ce.length;Le++)$.push(F[le])}return $},n.V=function(w){tr(this);let F=[];if(typeof w=="string")no(this,w)&&(F=F.concat(this.g.get(ro(this,w))));else{w=Array.from(this.g.values());for(let $=0;$<w.length;$++)F=F.concat(w[$])}return F},n.set=function(w,F){return tr(this),this.i=null,w=ro(this,w),no(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[F]),this.h+=1,this},n.get=function(w,F){return w?(w=this.V(w),0<w.length?String(w[0]):F):F};function Ft(w,F,$){ko(w,F),0<$.length&&(w.i=null,w.g.set(ro(w,F),_($)),w.h+=$.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],F=Array.from(this.g.keys());for(var $=0;$<F.length;$++){var le=F[$];const Le=encodeURIComponent(String(le)),ot=this.V(le);for(le=0;le<ot.length;le++){var Ce=Le;ot[le]!==""&&(Ce+="="+encodeURIComponent(String(ot[le]))),w.push(Ce)}}return this.i=w.join("&")};function ro(w,F){return F=String(F),w.j&&(F=F.toLowerCase()),F}function fu(w,F){F&&!w.j&&(tr(w),w.i=null,w.g.forEach(function($,le){var Ce=le.toLowerCase();le!=Ce&&(ko(this,le),Ft(this,Ce,$))},w)),w.j=F}function Fi(w,F){const $=new yr;if(s.Image){const le=new Image;le.onload=m(ea,$,"TestLoadImage: loaded",!0,F,le),le.onerror=m(ea,$,"TestLoadImage: error",!1,F,le),le.onabort=m(ea,$,"TestLoadImage: abort",!1,F,le),le.ontimeout=m(ea,$,"TestLoadImage: timeout",!1,F,le),s.setTimeout(function(){le.ontimeout&&le.ontimeout()},1e4),le.src=w}else F(!1)}function va(w,F){const $=new yr,le=new AbortController,Ce=setTimeout(()=>{le.abort(),ea($,"TestPingServer: timeout",!1,F)},1e4);fetch(w,{signal:le.signal}).then(Le=>{clearTimeout(Ce),Le.ok?ea($,"TestPingServer: ok",!0,F):ea($,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Ce),ea($,"TestPingServer: error",!1,F)})}function ea(w,F,$,le,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),le($)}catch{}}function io(){this.g=new pi}function ya(w,F,$){const le=$||"";try{dc(w,function(Ce,Le){let ot=Ce;f(Ce)&&(ot=Kt(Ce)),F.push(le+Le+"="+encodeURIComponent(ot))})}catch(Ce){throw F.push(le+"type="+encodeURIComponent("_badmap")),Ce}}function ts(w){this.l=w.Ub||null,this.j=w.eb||!1}b(ts,on),ts.prototype.g=function(){return new Po(this.l,this.j)},ts.prototype.i=function(w){return function(){return w}}({});function Po(w,F){vt.call(this),this.D=w,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Po,vt),n=Po.prototype,n.open=function(w,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=F,this.readyState=1,Ui(this)},n.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(F.body=w),(this.D||s).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},n.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mc(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function mc(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}n.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var F=w.value?w.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!w.done}))&&(this.response=this.responseText+=F)}w.done?xa(this):Ui(this),this.readyState==3&&mc(this)}},n.Ra=function(w){this.g&&(this.response=this.responseText=w,xa(this))},n.Qa=function(w){this.g&&(this.response=w,xa(this))},n.ga=function(){this.g&&xa(this)};function xa(w){w.readyState=4,w.l=null,w.j=null,w.v=null,Ui(w)}n.setRequestHeader=function(w,F){this.u.append(w,F)},n.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],F=this.h.entries();for(var $=F.next();!$.done;)$=$.value,w.push($[0]+": "+$[1]),$=F.next();return w.join(`\r
`)};function Ui(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function ao(w){let F="";return H(w,function($,le){F+=le,F+=":",F+=$,F+=`\r
`}),F}function Yr(w,F,$){e:{for(le in $){var le=!1;break e}le=!0}le||($=ao($),typeof w=="string"?$!=null&&encodeURIComponent(String($)):Fn(w,F,$))}function hn(w){vt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(hn,vt);var ns=/^https?$/i,oo=["POST","PUT"];n=hn.prototype,n.Ha=function(w){this.J=w},n.ea=function(w,F,$,le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);F=F?F.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$r.g(),this.v=this.o?pa(this.o):pa($r),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(F,String(w),!0),this.B=!1}catch(Le){vc(this,Le);return}if(w=$||"",$=new Map(this.headers),le)if(Object.getPrototypeOf(le)===Object.prototype)for(var Ce in le)$.set(Ce,le[Ce]);else if(typeof le.keys=="function"&&typeof le.get=="function")for(const Le of le.keys())$.set(Le,le.get(Le));else throw Error("Unknown input type for opt_headers: "+String(le));le=Array.from($.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ce=s.FormData&&w instanceof s.FormData,!(0<=Array.prototype.indexOf.call(oo,F,void 0))||le||Ce||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,ot]of $)this.g.setRequestHeader(Le,ot);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zi(this),this.u=!0,this.g.send(w),this.u=!1}catch(Le){vc(this,Le)}};function vc(w,F){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=F,w.m=5,Ns(w),qa(w)}function Ns(w){w.A||(w.A=!0,_t(w,"complete"),_t(w,"error"))}n.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,_t(this,"complete"),_t(this,"abort"),qa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),hn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ds(this):this.bb())},n.bb=function(){Ds(this)};function Ds(w){if(w.h&&typeof o<"u"&&(!w.v[1]||Xr(w)!=4||w.Z()!=2)){if(w.u&&Xr(w)==4)bt(w.Ea,0,w);else if(_t(w,"readystatechange"),Xr(w)==4){w.h=!1;try{const ot=w.Z();e:switch(ot){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var $;if(!($=F)){var le;if(le=ot===0){var Ce=String(w.D).match(Ci)[1]||null;!Ce&&s.self&&s.self.location&&(Ce=s.self.location.protocol.slice(0,-1)),le=!ns.test(Ce?Ce.toLowerCase():"")}$=le}if($)_t(w,"complete"),_t(w,"success");else{w.m=6;try{var Le=2<Xr(w)?w.g.statusText:""}catch{Le=""}w.l=Le+" ["+w.Z()+"]",Ns(w)}}finally{qa(w)}}}}function qa(w,F){if(w.g){zi(w);const $=w.g,le=w.v[0]?()=>{}:null;w.g=null,w.v=null,F||_t(w,"ready");try{$.onreadystatechange=le}catch{}}}function zi(w){w.I&&(s.clearTimeout(w.I),w.I=null)}n.isActive=function(){return!!this.g};function Xr(w){return w.g?w.g.readyState:0}n.Z=function(){try{return 2<Xr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(w){if(this.g){var F=this.g.responseText;return w&&F.indexOf(w)==0&&(F=F.substring(w.length)),En(F)}};function hu(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(w){const F={};w=(w.g&&2<=Xr(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let le=0;le<w.length;le++){if(N(w[le]))continue;var $=T(w[le]);const Ce=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const Le=F[Ce]||[];F[Ce]=Le,Le.push($)}P(F,function(le){return le.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(w,F,$){return $&&$.internalChannelParams&&$.internalChannelParams[w]||F}function is(w){this.Aa=0,this.i=[],this.j=new yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ti("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ti("baseRetryDelayMs",5e3,w),this.cb=Ti("retryDelaySeedMs",1e4,w),this.Wa=Ti("forwardChannelMaxRetries",2,w),this.wa=Ti("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Ja(w&&w.concurrentRequestLimit),this.Da=new io,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=is.prototype,n.la=8,n.G=1,n.connect=function(w,F,$,le){yt(0),this.W=w,this.H=F||{},$&&le!==void 0&&(this.H.OSID=$,this.H.OAID=le),this.F=this.X,this.I=O(this,null,this.W),xl(this)};function Lo(w){if(Os(w),w.G==3){var F=w.U++,$=Ii(w.I);if(Fn($,"SID",w.K),Fn($,"RID",F),Fn($,"TYPE","terminate"),as(w,$),F=new ur(w,w.j,F),F.L=2,F.v=es(Ii($)),$=!1,s.navigator&&s.navigator.sendBeacon)try{$=s.navigator.sendBeacon(F.v.toString(),"")}catch{}!$&&s.Image&&(new Image().src=F.v,$=!0),$||(F.g=ee(F.j,null),F.g.ea(F.v)),F.F=Date.now(),Rs(F)}wl(w)}function yl(w){w.g&&(os(w),w.g.cancel(),w.g=null)}function Os(w){yl(w),w.u&&(s.clearTimeout(w.u),w.u=null),Mo(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&s.clearTimeout(w.s),w.s=null)}function xl(w){if(!pl(w.h)&&!w.s){w.s=!0;var F=w.Ga;U||X(),te||(U(),te=!0),oe.add(F,w),w.B=0}}function yc(w,F){return Ro(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=F.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=$n(g(w.Ga,w,F),Ms(w,w.B)),w.B++,!0)}n.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const Ce=new ur(this,this.j,w);let Le=this.o;if(this.S&&(Le?(Le=E(Le),L(Le,this.S)):Le=this.S),this.m!==null||this.O||(Ce.H=Le,Le=null),this.P)e:{for(var F=0,$=0;$<this.i.length;$++){t:{var le=this.i[$];if("__data__"in le.map&&(le=le.map.__data__,typeof le=="string")){le=le.length;break t}le=void 0}if(le===void 0)break;if(F+=le,4096<F){F=$;break e}if(F===4096||$===this.i.length-1){F=$+1;break e}}F=1e3}else F=1e3;F=Ps(this,Ce,F),$=Ii(this.I),Fn($,"RID",w),Fn($,"CVER",22),this.D&&Fn($,"X-HTTP-Session-Id",this.D),as(this,$),Le&&(this.O?F="headers="+encodeURIComponent(String(ao(Le)))+"&"+F:this.m&&Yr($,this.m,Le)),fr(this.h,Ce),this.Ua&&Fn($,"TYPE","init"),this.P?(Fn($,"$req",F),Fn($,"SID","null"),Ce.T=!0,Bi(Ce,$,null)):Bi(Ce,$,F),this.G=2}}else this.G==3&&(w?ks(this,w):this.i.length==0||pl(this.h)||ks(this))};function ks(w,F){var $;F?$=F.l:$=w.U++;const le=Ii(w.I);Fn(le,"SID",w.K),Fn(le,"RID",$),Fn(le,"AID",w.T),as(w,le),w.m&&w.o&&Yr(le,w.m,w.o),$=new ur(w,w.j,$,w.B+1),w.m===null&&($.H=w.o),F&&(w.i=F.D.concat(w.i)),F=Ps(w,$,1e3),$.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),fr(w.h,$),Bi($,le,F)}function as(w,F){w.H&&H(w.H,function($,le){Fn(F,le,$)}),w.l&&dc({},function($,le){Fn(F,le,$)})}function Ps(w,F,$){$=Math.min(w.i.length,$);var le=w.l?g(w.l.Na,w.l,w):null;e:{var Ce=w.i;let Le=-1;for(;;){const ot=["count="+$];Le==-1?0<$?(Le=Ce[0].g,ot.push("ofs="+Le)):Le=0:ot.push("ofs="+Le);let Ut=!0;for(let dn=0;dn<$;dn++){let Qt=Ce[dn].g;const Un=Ce[dn].map;if(Qt-=Le,0>Qt)Le=Math.max(0,Ce[dn].g-100),Ut=!1;else try{ya(Un,ot,"req"+Qt+"_")}catch{le&&le(Un)}}if(Ut){le=ot.join("&");break e}}}return w=w.i.splice(0,$),F.D=w,le}function bl(w){if(!w.g&&!w.u){w.Y=1;var F=w.Fa;U||X(),te||(U(),te=!0),oe.add(F,w),w.v=0}}function Ls(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=$n(g(w.Fa,w),Ms(w,w.v)),w.v++,!0)}n.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=$n(g(this.ab,this),w)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),yl(this),du(this))};function os(w){w.A!=null&&(s.clearTimeout(w.A),w.A=null)}function du(w){w.g=new ur(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var F=Ii(w.qa);Fn(F,"RID","rpc"),Fn(F,"SID",w.K),Fn(F,"AID",w.T),Fn(F,"CI",w.F?"0":"1"),!w.F&&w.ja&&Fn(F,"TO",w.ja),Fn(F,"TYPE","xmlhttp"),as(w,F),w.m&&w.o&&Yr(F,w.m,w.o),w.L&&(w.g.I=w.L);var $=w.g;w=w.ia,$.L=1,$.v=es(Ii(F)),$.m=null,$.P=!0,ga($,w)}n.Za=function(){this.C!=null&&(this.C=null,yl(this),Ls(this),yt(19))};function Mo(w){w.C!=null&&(s.clearTimeout(w.C),w.C=null)}function ss(w,F){var $=null;if(w.g==F){Mo(w),os(w),w.g=null;var le=2}else if(hc(w.h,F))$=F.D,mi(w.h,F),le=1;else return;if(w.G!=0){if(F.o)if(le==1){$=F.m?F.m.length:0,F=Date.now()-F.F;var Ce=w.B;le=Si(),_t(le,new Gn(le,$)),xl(w)}else bl(w);else if(Ce=F.s,Ce==3||Ce==0&&0<F.X||!(le==1&&yc(w,F)||le==2&&Ls(w)))switch($&&0<$.length&&(F=w.h,F.i=F.i.concat($)),Ce){case 1:Vi(w,5);break;case 4:Vi(w,10);break;case 3:Vi(w,6);break;default:Vi(w,2)}}}function Ms(w,F){let $=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||($*=2),$*F}function Vi(w,F){if(w.j.info("Error code "+F),F==2){var $=g(w.fb,w),le=w.Xa;const Ce=!le;le=new Sn(le||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Zo(le,"https"),es(le),Ce?Fi(le.toString(),$):va(le.toString(),$)}else yt(2);w.G=0,w.l&&w.l.sa(F),wl(w),Os(w)}n.fb=function(w){w?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function wl(w){if(w.G=0,w.ka=[],w.l){const F=gl(w.h);(F.length!=0||w.i.length!=0)&&(I(w.ka,F),I(w.ka,w.i),w.h.i.length=0,_(w.i),w.i.length=0),w.l.ra()}}function O(w,F,$){var le=$ instanceof Sn?Ii($):new Sn($);if(le.g!="")F&&(le.g=F+"."+le.g),Jo(le,le.s);else{var Ce=s.location;le=Ce.protocol,F=F?F+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;var Le=new Sn(null);le&&Zo(Le,le),F&&(Le.g=F),Ce&&Jo(Le,Ce),$&&(Le.l=$),le=Le}return $=w.D,F=w.ya,$&&F&&Fn(le,$,F),Fn(le,"VER",w.la),as(w,le),le}function ee(w,F,$){if(F&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=w.Ca&&!w.pa?new hn(new ts({eb:$})):new hn(w.pa),F.Ha(w.J),F}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function me(){}n=me.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xe(){}xe.prototype.g=function(w,F){return new Te(w,F)};function Te(w,F){vt.call(this),this.g=new is(F),this.l=w,this.h=F&&F.messageUrlParams||null,w=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(w?w["X-WebChannel-Content-Type"]=F.messageContentType:w={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(w?w["X-WebChannel-Client-Profile"]=F.va:w={"X-WebChannel-Client-Profile":F.va}),this.g.S=w,(w=F&&F.Sb)&&!N(w)&&(this.g.m=w),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!N(F)&&(this.g.D=F,w=this.h,w!==null&&F in w&&(w=this.h,F in w&&delete w[F])),this.j=new pt(this)}b(Te,vt),Te.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Te.prototype.close=function(){Lo(this.g)},Te.prototype.o=function(w){var F=this.g;if(typeof w=="string"){var $={};$.__data__=w,w=$}else this.u&&($={},$.__data__=Kt(w),w=$);F.i.push(new lu(F.Ya++,w)),F.G==3&&xl(F)},Te.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,Te.aa.N.call(this)};function Ve(w){cr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var F=w.__sm__;if(F){e:{for(const $ in F){w=$;break e}w=void 0}(this.i=w)&&(w=this.i,F=F!==null&&w in F?F[w]:void 0),this.data=F}else this.data=w}b(Ve,cr);function it(){yn.call(this),this.status=1}b(it,yn);function pt(w){this.g=w}b(pt,me),pt.prototype.ua=function(){_t(this.g,"a")},pt.prototype.ta=function(w){_t(this.g,new Ve(w))},pt.prototype.sa=function(w){_t(this.g,new it)},pt.prototype.ra=function(){_t(this.g,"b")},xe.prototype.createWebChannel=xe.prototype.g,Te.prototype.send=Te.prototype.o,Te.prototype.open=Te.prototype.m,Te.prototype.close=Te.prototype.close,x6=function(){return new xe},y6=function(){return Si()},v6=Tt,ty={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,eg=gi,ti.COMPLETE="complete",m6=ti,In.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",vt.prototype.listen=vt.prototype.K,P0=In,hn.prototype.listenOnce=hn.prototype.L,hn.prototype.getLastError=hn.prototype.Ka,hn.prototype.getLastErrorCode=hn.prototype.Ba,hn.prototype.getStatus=hn.prototype.Z,hn.prototype.getResponseJson=hn.prototype.Oa,hn.prototype.getResponseText=hn.prototype.oa,hn.prototype.send=hn.prototype.ea,hn.prototype.setWithCredentials=hn.prototype.Ha,g6=hn}).apply(typeof kp<"u"?kp:typeof self<"u"?self:typeof window<"u"?window:{});const g3="@firebase/firestore",m3="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pa.UNAUTHENTICATED=new Pa(null),Pa.GOOGLE_CREDENTIALS=new Pa("google-credentials-uid"),Pa.FIRST_PARTY=new Pa("first-party-uid"),Pa.MOCK_USER=new Pa("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dd="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new nm("@firebase/firestore");function Zh(){return oh.logLevel}function Et(n,...e){if(oh.logLevel<=wn.DEBUG){const t=e.map(v5);oh.debug(`Firestore (${Dd}): ${n}`,...t)}}function Zc(n,...e){if(oh.logLevel<=wn.ERROR){const t=e.map(v5);oh.error(`Firestore (${Dd}): ${n}`,...t)}}function yd(n,...e){if(oh.logLevel<=wn.WARN){const t=e.map(v5);oh.warn(`Firestore (${Dd}): ${n}`,...t)}}function v5(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,b6(n,r,t)}function b6(n,e,t){let r=`FIRESTORE (${Dd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zc(r),new Error(r)}function er(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||b6(e,i,r)}function tn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends Cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pa.UNAUTHENTICATED))}shutdown(){}}class M9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class j9{constructor(e){this.t=e,this.currentUser=Pa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){er(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new Yc;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Yc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},s=c=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>s(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?s(c):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Yc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(er(typeof r.accessToken=="string",31837,{l:r}),new w6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return er(e===null||typeof e=="string",2055,{h:e}),new Pa(e)}}class B9{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Pa.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F9{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new B9(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Pa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U9{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$o(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){er(this.o===void 0,3512);const r=a=>{a.error!=null&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new v3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(er(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new v3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=z9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function fn(n,e){return n<e?-1:n>e?1:0}function ny(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return fn(r,i);{const a=_6(),o=V9(a.encode(y3(n,t)),a.encode(y3(e,t)));return o!==0?o:fn(r,i)}}t+=r>65535?2:1}return fn(n.length,e.length)}function y3(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function V9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return fn(n[t],e[t]);return fn(n.length,e.length)}function xd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=-62135596800,b3=1e6;class Ei{static now(){return Ei.fromMillis(Date.now())}static fromDate(e){return Ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*b3);return new Ei(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new St(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new St(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<x3)throw new St(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new St(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b3}_compareTo(e){return this.seconds===e.seconds?fn(this.nanoseconds,e.nanoseconds):fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-x3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{static fromTimestamp(e){return new Jt(e)}static min(){return new Jt(new Ei(0,0))}static max(){return new Jt(new Ei(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="__name__";class Gl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Yt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Yt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Gl.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return fn(e.length,t.length)}static compareSegments(e,t){const r=Gl.isNumericId(e),i=Gl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Gl.extractNumericId(e).compare(Gl.extractNumericId(t)):ny(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rf.fromString(e.substring(4,e.length-2))}}class Rr extends Gl{construct(e,t,r){return new Rr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new St(rt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rr(t)}static emptyPath(){return new Rr([])}}const q9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fa extends Gl{construct(e,t,r){return new fa(e,t,r)}static isValidIdentifier(e){return q9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===w3}static keyField(){return new fa([w3])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new St(rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new St(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new St(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new St(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fa(t)}static emptyPath(){return new fa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(Rr.fromString(e))}static fromName(e){return new Mt(Rr.fromString(e).popFirst(5))}static empty(){return new Mt(Rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new Rr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=-1;function H9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Jt.fromTimestamp(r===1e9?new Ei(t+1,0):new Ei(t,r));return new cf(i,Mt.empty(),e)}function W9(n){return new cf(n.readTime,n.key,t1)}class cf{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new cf(Jt.min(),Mt.empty(),t1)}static max(){return new cf(Jt.max(),Mt.empty(),t1)}}function G9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Mt.comparator(n.documentKey,e.documentKey),t!==0?t:fn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(n){if(n.code!==rt.FAILED_PRECONDITION||n.message!==$9)throw n;Et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tt((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof tt?t:tt.resolve(t)}catch(t){return tt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.reject(t)}static resolve(e){return new tt((t,r)=>{t(e)})}static reject(e){return new tt((t,r)=>{r(e)})}static waitFor(e){return new tt((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},c=>r(c))}),o=!0,a===i&&t()})}static or(e){let t=tt.resolve(!1);for(const r of e)t=t.next(i=>i?tt.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new tt((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let c=0;c<a;c++){const f=c;t(e[f]).next(h=>{o[f]=h,++s,s===a&&r(o)},h=>i(h))}})}static doWhile(e,t){return new tt((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function X9(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function kd(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}sm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=-1;function lm(n){return n==null}function Eg(n){return n===0&&1/n==-1/0}function K9(n){return typeof n=="number"&&Number.isInteger(n)&&!Eg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="";function Q9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_3(e)),e=Z9(n.get(t),e);return _3(e)}function Z9(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case E6:t+="";break;default:t+=a}}return t}function _3(n){return n+E6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function S6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t){this.comparator=e,this.root=t||ca.EMPTY}insert(e,t){return new Wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ca.BLACK,null,null))}remove(e){return new Wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ca.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pp(this.root,e,this.comparator,!0)}}class Pp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ca{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ca.RED,this.left=i??ca.EMPTY,this.right=a??ca.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ca(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ca.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ca.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ca.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ca.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Yt(27949);return e+(this.isRed()?0:1)}}ca.EMPTY=null,ca.RED=!0,ca.BLACK=!1;ca.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt(57766)}get value(){throw Yt(16141)}get color(){throw Yt(16727)}get left(){throw Yt(29726)}get right(){throw Yt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new ca(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.comparator=e,this.data=new Wr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new E3(this.data.getIterator())}getIteratorFrom(e){return new E3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ji(this.comparator);return t.data=e,t}}class E3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.fields=e,e.sort(fa.comparator)}static empty(){return new Yo([])}unionWith(e){let t=new ji(fa.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new C6("Invalid base64 string: "+a):a}}(e);return new da(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new da(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}da.EMPTY_BYTE_STRING=new da("");const J9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uf(n){if(er(!!n,39018),typeof n=="string"){let e=0;const t=J9.exec(n);if(er(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ui(n.seconds),nanos:ui(n.nanos)}}function ui(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ff(n){return typeof n=="string"?da.fromBase64String(n):da.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="server_timestamp",T6="__type__",R6="__previous_value__",N6="__local_write_time__";function x5(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[T6])===null||t===void 0?void 0:t.stringValue)===I6}function cm(n){const e=n.mapValue.fields[R6];return x5(e)?cm(e):e}function n1(n){const e=uf(n.mapValue.fields[N6].timestampValue);return new Ei(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t,r,i,a,o,s,c,f,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const Sg="(default)";class r1{constructor(e,t){this.projectId=e,this.database=t||Sg}static empty(){return new r1("","")}get isDefaultDatabase(){return this.database===Sg}isEqual(e){return e instanceof r1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6="__type__",tD="__max__",Lp={mapValue:{}},O6="__vector__",Cg="value";function hf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?x5(n)?4:rD(n)?9007199254740991:nD(n)?10:11:Yt(28295,{value:n})}function rc(n,e){if(n===e)return!0;const t=hf(n);if(t!==hf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return n1(n).isEqual(n1(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=uf(i.timestampValue),s=uf(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return ff(i.bytesValue).isEqual(ff(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return ui(i.geoPointValue.latitude)===ui(a.geoPointValue.latitude)&&ui(i.geoPointValue.longitude)===ui(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ui(i.integerValue)===ui(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=ui(i.doubleValue),s=ui(a.doubleValue);return o===s?Eg(o)===Eg(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return xd(n.arrayValue.values||[],e.arrayValue.values||[],rc);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(A3(o)!==A3(s))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(s[c]===void 0||!rc(o[c],s[c])))return!1;return!0}(n,e);default:return Yt(52216,{left:n})}}function i1(n,e){return(n.values||[]).find(t=>rc(t,e))!==void 0}function bd(n,e){if(n===e)return 0;const t=hf(n),r=hf(e);if(t!==r)return fn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fn(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=ui(a.integerValue||a.doubleValue),c=ui(o.integerValue||o.doubleValue);return s<c?-1:s>c?1:s===c?0:isNaN(s)?isNaN(c)?0:-1:1}(n,e);case 3:return S3(n.timestampValue,e.timestampValue);case 4:return S3(n1(n),n1(e));case 5:return ny(n.stringValue,e.stringValue);case 6:return function(a,o){const s=ff(a),c=ff(o);return s.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),c=o.split("/");for(let f=0;f<s.length&&f<c.length;f++){const h=fn(s[f],c[f]);if(h!==0)return h}return fn(s.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=fn(ui(a.latitude),ui(o.latitude));return s!==0?s:fn(ui(a.longitude),ui(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return C3(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,c,f,h;const p=a.fields||{},g=o.fields||{},m=(s=p[Cg])===null||s===void 0?void 0:s.arrayValue,b=(c=g[Cg])===null||c===void 0?void 0:c.arrayValue,_=fn(((f=m==null?void 0:m.values)===null||f===void 0?void 0:f.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:C3(m,b)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===Lp.mapValue&&o===Lp.mapValue)return 0;if(a===Lp.mapValue)return 1;if(o===Lp.mapValue)return-1;const s=a.fields||{},c=Object.keys(s),f=o.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const g=ny(c[p],h[p]);if(g!==0)return g;const m=bd(s[c[p]],f[h[p]]);if(m!==0)return m}return fn(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Yt(23264,{Pe:t})}}function S3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fn(n,e);const t=uf(n),r=uf(e),i=fn(t.seconds,r.seconds);return i!==0?i:fn(t.nanos,r.nanos)}function C3(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=bd(t[i],r[i]);if(a)return a}return fn(t.length,r.length)}function wd(n){return ry(n)}function ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=uf(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ff(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Mt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=ry(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${ry(t.fields[o])}`;return i+"}"}(n.mapValue):Yt(61005,{value:n})}function tg(n){switch(hf(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cm(n);return e?16+tg(e):16;case 5:return 2*n.stringValue.length;case 6:return ff(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+tg(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return bf(r.fields,(a,o)=>{i+=a.length+tg(o)}),i}(n.mapValue);default:throw Yt(13486,{value:n})}}function I3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iy(n){return!!n&&"integerValue"in n}function b5(n){return!!n&&"arrayValue"in n}function T3(n){return!!n&&"nullValue"in n}function R3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ng(n){return!!n&&"mapValue"in n}function nD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[D6])===null||t===void 0?void 0:t.stringValue)===O6}function H0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=H0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=H0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.value=e}static empty(){return new xo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ng(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=H0(t)}setAll(e){let t=fa.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=H0(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ng(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ng(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new xo(H0(this.value))}}function k6(n){const e=[];return bf(n.fields,(t,r)=>{const i=new fa([t]);if(ng(r)){const a=k6(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Yo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new La(e,0,Jt.min(),Jt.min(),Jt.min(),xo.empty(),0)}static newFoundDocument(e,t,r,i){return new La(e,1,t,Jt.min(),r,i,0)}static newNoDocument(e,t){return new La(e,2,t,Jt.min(),Jt.min(),xo.empty(),0)}static newUnknownDocument(e,t){return new La(e,3,t,Jt.min(),Jt.min(),xo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof La&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new La(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t){this.position=e,this.inclusive=t}}function N3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Mt.comparator(Mt.fromName(o.referenceValue),t.key):r=bd(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function D3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rc(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t="asc"){this.field=e,this.dir=t}}function iD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{}class _i extends P6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oD(e,t,r):t==="array-contains"?new cD(e,r):t==="in"?new uD(e,r):t==="not-in"?new fD(e,r):t==="array-contains-any"?new hD(e,r):new _i(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sD(e,r):new lD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bd(t,this.value)):t!==null&&hf(this.value)===hf(t)&&this.matchesComparison(bd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fl extends P6{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new fl(e,t)}matches(e){return L6(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function L6(n){return n.op==="and"}function M6(n){return aD(n)&&L6(n)}function aD(n){for(const e of n.filters)if(e instanceof fl)return!1;return!0}function ay(n){if(n instanceof _i)return n.field.canonicalString()+n.op.toString()+wd(n.value);if(M6(n))return n.filters.map(e=>ay(e)).join(",");{const e=n.filters.map(t=>ay(t)).join(",");return`${n.op}(${e})`}}function j6(n,e){return n instanceof _i?function(r,i){return i instanceof _i&&r.op===i.op&&r.field.isEqual(i.field)&&rc(r.value,i.value)}(n,e):n instanceof fl?function(r,i){return i instanceof fl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&j6(o,i.filters[s]),!0):!1}(n,e):void Yt(19439)}function B6(n){return n instanceof _i?function(t){return`${t.field.canonicalString()} ${t.op} ${wd(t.value)}`}(n):n instanceof fl?function(t){return t.op.toString()+" {"+t.getFilters().map(B6).join(" ,")+"}"}(n):"Filter"}class oD extends _i{constructor(e,t,r){super(e,t,r),this.key=Mt.fromName(r.referenceValue)}matches(e){const t=Mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class sD extends _i{constructor(e,t){super(e,"in",t),this.keys=F6("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lD extends _i{constructor(e,t){super(e,"not-in",t),this.keys=F6("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function F6(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Mt.fromName(r.referenceValue))}class cD extends _i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return b5(t)&&i1(t.arrayValue,this.value)}}class uD extends _i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&i1(this.value.arrayValue,t)}}class fD extends _i{constructor(e,t){super(e,"not-in",t)}matches(e){if(i1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!i1(this.value.arrayValue,t)}}class hD extends _i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!b5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>i1(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Ie=null}}function O3(n,e=null,t=[],r=[],i=null,a=null,o=null){return new dD(n,e,t,r,i,a,o)}function w5(n){const e=tn(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ay(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),lm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wd(r)).join(",")),e.Ie=t}return e.Ie}function _5(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!j6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!D3(n.startAt,e.startAt)&&D3(n.endAt,e.endAt)}function oy(n){return Mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function pD(n,e,t,r,i,a,o,s){return new w1(n,e,t,r,i,a,o,s)}function um(n){return new w1(n)}function k3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function U6(n){return n.collectionGroup!==null}function W0(n){const e=tn(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new ji(fa.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(s=s.add(f.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Tg(a,r))}),t.has(fa.keyField().canonicalString())||e.Ee.push(new Tg(fa.keyField(),r))}return e.Ee}function Zl(n){const e=tn(n);return e.de||(e.de=gD(e,W0(n))),e.de}function gD(n,e){if(n.limitType==="F")return O3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Tg(i.field,a)});const t=n.endAt?new Ig(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ig(n.startAt.position,n.startAt.inclusive):null;return O3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function sy(n,e){const t=n.filters.concat([e]);return new w1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ly(n,e,t){return new w1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fm(n,e){return _5(Zl(n),Zl(e))&&n.limitType===e.limitType}function z6(n){return`${w5(Zl(n))}|lt:${n.limitType}`}function Jh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>B6(i)).join(", ")}]`),lm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>wd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>wd(i)).join(",")),`Target(${r})`}(Zl(n))}; limitType=${n.limitType})`}function hm(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Mt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of W0(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,c){const f=N3(o,s,c);return o.inclusive?f<=0:f<0}(r.startAt,W0(r),i)||r.endAt&&!function(o,s,c){const f=N3(o,s,c);return o.inclusive?f>=0:f>0}(r.endAt,W0(r),i))}(n,e)}function mD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function V6(n){return(e,t)=>{let r=!1;for(const i of W0(n)){const a=vD(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function vD(n,e,t){const r=n.field.isKeyField()?Mt.comparator(e.key,t.key):function(a,o,s){const c=o.data.field(a),f=s.data.field(a);return c!==null&&f!==null?bd(c,f):Yt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Yt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return S6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Wr(Mt.comparator);function Jc(){return yD}const q6=new Wr(Mt.comparator);function L0(...n){let e=q6;for(const t of n)e=e.insert(t.key,t);return e}function H6(n){let e=q6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Kf(){return G0()}function W6(){return G0()}function G0(){return new ph(n=>n.toString(),(n,e)=>n.isEqual(e))}const xD=new Wr(Mt.comparator),bD=new ji(Mt.comparator);function _n(...n){let e=bD;for(const t of n)e=e.add(t);return e}const wD=new ji(fn);function _D(){return wD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eg(e)?"-0":e}}function G6(n){return{integerValue:""+n}}function AD(n,e){return K9(e)?G6(e):A5(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this._=void 0}}function ED(n,e,t){return n instanceof a1?function(i,a){const o={fields:{[T6]:{stringValue:I6},[N6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&x5(a)&&(a=cm(a)),a&&(o.fields[R6]=a),{mapValue:o}}(t,e):n instanceof o1?Y6(n,e):n instanceof s1?X6(n,e):function(i,a){const o=$6(i,a),s=P3(o)+P3(i.Re);return iy(o)&&iy(i.Re)?G6(s):A5(i.serializer,s)}(n,e)}function SD(n,e,t){return n instanceof o1?Y6(n,e):n instanceof s1?X6(n,e):t}function $6(n,e){return n instanceof Rg?function(r){return iy(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class a1 extends dm{}class o1 extends dm{constructor(e){super(),this.elements=e}}function Y6(n,e){const t=K6(e);for(const r of n.elements)t.some(i=>rc(i,r))||t.push(r);return{arrayValue:{values:t}}}class s1 extends dm{constructor(e){super(),this.elements=e}}function X6(n,e){let t=K6(e);for(const r of n.elements)t=t.filter(i=>!rc(i,r));return{arrayValue:{values:t}}}class Rg extends dm{constructor(e,t){super(),this.serializer=e,this.Re=t}}function P3(n){return ui(n.integerValue||n.doubleValue)}function K6(n){return b5(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t){this.field=e,this.transform=t}}function ID(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof o1&&i instanceof o1||r instanceof s1&&i instanceof s1?xd(r.elements,i.elements,rc):r instanceof Rg&&i instanceof Rg?rc(r.Re,i.Re):r instanceof a1&&i instanceof a1}(n.transform,e.transform)}class TD{constructor(e,t){this.version=e,this.transformResults=t}}class _s{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _s}static exists(e){return new _s(void 0,e)}static updateTime(e){return new _s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class pm{}function Q6(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new E5(n.key,_s.none()):new _1(n.key,n.data,_s.none());{const t=n.data,r=xo.empty();let i=new ji(fa.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new wf(n.key,r,new Yo(i.toArray()),_s.none())}}function RD(n,e,t){n instanceof _1?function(i,a,o){const s=i.value.clone(),c=M3(i.fieldTransforms,a,o.transformResults);s.setAll(c),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof wf?function(i,a,o){if(!rg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=M3(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(Z6(i)),c.setAll(s),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function $0(n,e,t,r){return n instanceof _1?function(a,o,s,c){if(!rg(a.precondition,o))return s;const f=a.value.clone(),h=j3(a.fieldTransforms,c,o);return f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof wf?function(a,o,s,c){if(!rg(a.precondition,o))return s;const f=j3(a.fieldTransforms,c,o),h=o.data;return h.setAll(Z6(a)),h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,o,s){return rg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function ND(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=$6(r.transform,i||null);a!=null&&(t===null&&(t=xo.empty()),t.set(r.field,a))}return t||null}function L3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xd(r,i,(a,o)=>ID(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _1 extends pm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wf extends pm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Z6(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function M3(n,e,t){const r=new Map;er(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,SD(o,s,t[i]))}return r}function j3(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,ED(a,o,e))}return r}class E5 extends pm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DD extends pm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&RD(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=W6();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const c=Q6(o,s);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Jt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_n())}isEqual(e){return this.batchId===e.batchId&&xd(this.mutations,e.mutations,(t,r)=>L3(t,r))&&xd(this.baseMutations,e.baseMutations,(t,r)=>L3(t,r))}}class S5{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){er(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return xD}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new S5(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wi,Dn;function LD(n){switch(n){case rt.OK:return Yt(64938);case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0;default:return Yt(15467,{code:n})}}function J6(n){if(n===void 0)return Zc("GRPC error has no .code"),rt.UNKNOWN;switch(n){case wi.OK:return rt.OK;case wi.CANCELLED:return rt.CANCELLED;case wi.UNKNOWN:return rt.UNKNOWN;case wi.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case wi.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case wi.INTERNAL:return rt.INTERNAL;case wi.UNAVAILABLE:return rt.UNAVAILABLE;case wi.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case wi.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case wi.NOT_FOUND:return rt.NOT_FOUND;case wi.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case wi.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case wi.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case wi.ABORTED:return rt.ABORTED;case wi.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case wi.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case wi.DATA_LOSS:return rt.DATA_LOSS;default:return Yt(39323,{code:n})}}(Dn=wi||(wi={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=new rf([4294967295,4294967295],0);function B3(n){const e=_6().encode(n),t=new p6;return t.update(e),new Uint8Array(t.digest())}function F3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new rf([t,r],0),new rf([i,a],0)]}class C5{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new M0(`Invalid padding: ${t}`);if(r<0)throw new M0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new M0(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new M0(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=rf.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(rf.fromNumber(r)));return i.compare(MD)===1&&(i=new rf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=B3(e),[r,i]=F3(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new C5(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.pe===0)return;const t=B3(e),[r,i]=F3(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class M0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,A1.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gm(Jt.min(),i,new Wr(fn),Jc(),_n())}}class A1{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new A1(r,t,_n(),_n(),_n())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class e8{constructor(e,t){this.targetId=e,this.Ce=t}}class t8{constructor(e,t,r=da.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class U3{constructor(){this.Fe=0,this.Me=z3(),this.xe=da.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=_n(),t=_n(),r=_n();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Yt(38017,{changeType:a})}}),new A1(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=z3()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,er(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class jD{constructor(e){this.ze=e,this.je=new Map,this.He=Jc(),this.Je=Mp(),this.Ye=Mp(),this.Ze=new Wr(fn)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Yt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(oy(a))if(r===0){const o=new Mt(a.path);this.tt(t,o,La.newNoDocument(o,Jt.min()))}else er(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const s=this.ct(e),c=s?this.lt(s,e,o):1;if(c!==0){this.st(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=ff(r).toUint8Array()}catch(c){if(c instanceof C6)return yd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{s=new C5(o,i,a)}catch(c){return yd(c instanceof M0?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return s.pe===0?null:s}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.ze.Pt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,o)=>{const s=this._t(o);if(s){if(a.current&&oy(s.target)){const c=new Mt(s.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,La.newNoDocument(c,e))}a.Le&&(t.set(o,a.qe()),a.Qe())}});let r=_n();this.Ye.forEach((a,o)=>{let s=!0;o.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.He.forEach((a,o)=>o.setReadTime(e));const i=new gm(e,t,this.Ze,this.He,r);return this.He=Jc(),this.Je=Mp(),this.Ye=Mp(),this.Ze=new Wr(fn),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new U3,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ji(fn),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ji(fn),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Et("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new U3),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Mp(){return new Wr(Mt.comparator)}function z3(){return new Wr(Mt.comparator)}const BD={asc:"ASCENDING",desc:"DESCENDING"},FD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UD={and:"AND",or:"OR"};class zD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cy(n,e){return n.useProto3Json||lm(e)?e:{value:e}}function Ng(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VD(n,e){return Ng(n,e.toTimestamp())}function Jl(n){return er(!!n,49232),Jt.fromTimestamp(function(t){const r=uf(t);return new Ei(r.seconds,r.nanos)}(n))}function I5(n,e){return uy(n,e).canonicalString()}function uy(n,e){const t=function(i){return new Rr(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function r8(n){const e=Rr.fromString(n);return er(l8(e),10190,{key:e.toString()}),e}function fy(n,e){return I5(n.databaseId,e.path)}function uv(n,e){const t=r8(e);if(t.get(1)!==n.databaseId.projectId)throw new St(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new St(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Mt(a8(t))}function i8(n,e){return I5(n.databaseId,e)}function qD(n){const e=r8(n);return e.length===4?Rr.emptyPath():a8(e)}function hy(n){return new Rr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function a8(n){return er(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function V3(n,e,t){return{name:fy(n,e),fields:t.value.mapValue.fields}}function HD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Yt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,h){return f.useProto3Json?(er(h===void 0||typeof h=="string",58123),da.fromBase64String(h||"")):(er(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),da.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(f){const h=f.code===void 0?rt.UNKNOWN:J6(f.code);return new St(h,f.message||"")}(o);t=new t8(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=uv(n,r.document.name),a=Jl(r.document.updateTime),o=r.document.createTime?Jl(r.document.createTime):Jt.min(),s=new xo({mapValue:{fields:r.document.fields}}),c=La.newFoundDocument(i,a,o,s),f=r.targetIds||[],h=r.removedTargetIds||[];t=new ig(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=uv(n,r.document),a=r.readTime?Jl(r.readTime):Jt.min(),o=La.newNoDocument(i,a),s=r.removedTargetIds||[];t=new ig([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=uv(n,r.document),a=r.removedTargetIds||[];t=new ig([],a,i,null)}else{if(!("filter"in e))return Yt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new PD(i,a),s=r.targetId;t=new e8(s,o)}}return t}function WD(n,e){let t;if(e instanceof _1)t={update:V3(n,e.key,e.value)};else if(e instanceof E5)t={delete:fy(n,e.key)};else if(e instanceof wf)t={update:V3(n,e.key,e.data),updateMask:eO(e.fieldMask)};else{if(!(e instanceof DD))return Yt(16599,{ft:e.type});t={verify:fy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof a1)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof o1)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof s1)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Rg)return{fieldPath:o.field.canonicalString(),increment:s.Re};throw Yt(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:VD(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Yt(27497)}(n,e.precondition)),t}function GD(n,e){return n&&n.length>0?(er(e!==void 0,14353),n.map(t=>function(i,a){let o=i.updateTime?Jl(i.updateTime):Jl(a);return o.isEqual(Jt.min())&&(o=Jl(a)),new TD(o,i.transformResults||[])}(t,e))):[]}function $D(n,e){return{documents:[i8(n,e.path)]}}function YD(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=i8(n,i);const a=function(f){if(f.length!==0)return s8(fl.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(f){if(f.length!==0)return f.map(h=>function(g){return{field:ed(g.field),direction:QD(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=cy(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function XD(n){let e=qD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){er(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];t.where&&(a=function(p){const g=o8(p);return g instanceof fl&&M6(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(b){return new Tg(td(b.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(t.orderBy));let s=null;t.limit&&(s=function(p){let g;return g=typeof p=="object"?p.value:p,lm(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,m=p.values||[];return new Ig(m,g)}(t.startAt));let f=null;return t.endAt&&(f=function(p){const g=!p.before,m=p.values||[];return new Ig(m,g)}(t.endAt)),pD(e,i,o,a,s,"F",c,f)}function KD(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function o8(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=td(t.unaryFilter.field);return _i.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=td(t.unaryFilter.field);return _i.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=td(t.unaryFilter.field);return _i.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=td(t.unaryFilter.field);return _i.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Yt(61313);default:return Yt(60726)}}(n):n.fieldFilter!==void 0?function(t){return _i.create(td(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Yt(58110);default:return Yt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fl.create(t.compositeFilter.filters.map(r=>o8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yt(1026)}}(t.compositeFilter.op))}(n):Yt(30097,{filter:n})}function QD(n){return BD[n]}function ZD(n){return FD[n]}function JD(n){return UD[n]}function ed(n){return{fieldPath:n.canonicalString()}}function td(n){return fa.fromServerFormat(n.fieldPath)}function s8(n){return n instanceof _i?function(t){if(t.op==="=="){if(R3(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NAN"}};if(T3(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R3(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NOT_NAN"}};if(T3(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ed(t.field),op:ZD(t.op),value:t.value}}}(n):n instanceof fl?function(t){const r=t.getFilters().map(i=>s8(i));return r.length===1?r[0]:{compositeFilter:{op:JD(t.op),filters:r}}}(n):Yt(54877,{filter:n})}function eO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function l8(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t,r,i,a=Jt.min(),o=Jt.min(),s=da.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=c}withSequenceNumber(e){return new Ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.wt=e}}function nO(n){const e=XD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ly(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.Cn=new iO}addToCollectionParentIndex(e,t){return this.Cn.add(t),tt.resolve()}getCollectionParents(e,t){return tt.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return tt.resolve()}deleteFieldIndex(e,t){return tt.resolve()}deleteAllFieldIndexes(e){return tt.resolve()}createTargetIndexes(e,t){return tt.resolve()}getDocumentsMatchingTarget(e,t){return tt.resolve(null)}getIndexType(e,t){return tt.resolve(0)}getFieldIndexes(e,t){return tt.resolve([])}getNextCollectionGroupToUpdate(e){return tt.resolve(null)}getMinOffset(e,t){return tt.resolve(cf.min())}getMinOffsetFromCollectionGroup(e,t){return tt.resolve(cf.min())}updateCollectionGroup(e,t,r){return tt.resolve()}updateIndexEntries(e,t){return tt.resolve()}}class iO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ji(Rr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ji(Rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c8=41943040;class vo{static withCacheSize(e){return new vo(e,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo.DEFAULT_COLLECTION_PERCENTILE=10,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vo.DEFAULT=new vo(c8,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vo.DISABLED=new vo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new _d(0)}static lr(){return new _d(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="LruGarbageCollector",aO=1048576;function W3([n,e],[t,r]){const i=fn(n,t);return i===0?fn(e,r):i}class oO{constructor(e){this.Er=e,this.buffer=new ji(W3),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();W3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Et(H3,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){kd(t)?Et(H3,"Ignoring IndexedDB error during garbage collection: ",t):await Od(t)}await this.mr(3e5)})}}class lO{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return tt.resolve(sm.le);const r=new oO(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(q3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q3):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,o,s,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,s=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),Zh()<=wn.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(c-s)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function cO(n,e){return new lO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.changes=new ph(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,La.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?tt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$0(r.mutation,i,Yo.empty(),Ei.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_n()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_n()){const i=Kf();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=L0();return a.forEach((s,c)=>{o=o.insert(s,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Kf();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_n()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=Jc();const o=G0(),s=function(){return G0()}();return t.forEach((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof wf)?a=a.insert(f.key,f):h!==void 0?(o.set(f.key,h.mutation.getFieldMask()),$0(h.mutation,f,h.mutation.getFieldMask(),Ei.now())):o.set(f.key,Yo.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((f,h)=>o.set(f,h)),t.forEach((f,h)=>{var p;return s.set(f,new fO(h,(p=o.get(f))!==null&&p!==void 0?p:null))}),s))}recalculateAndSaveOverlays(e,t){const r=G0();let i=new Wr((o,s)=>o-s),a=_n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(c=>{const f=t.get(c);if(f===null)return;let h=r.get(c)||Yo.empty();h=s.applyToLocalView(f,h),r.set(c,h);const p=(i.get(s.batchId)||_n()).add(c);i=i.insert(s.batchId,p)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const c=s.getNext(),f=c.key,h=c.value,p=W6();h.forEach(g=>{if(!a.has(g)){const m=Q6(t.get(g),r.get(g));m!==null&&p.set(g,m),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return tt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Mt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):U6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):tt.resolve(Kf());let s=t1,c=a;return o.next(f=>tt.forEach(f,(h,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),a.get(h)?tt.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,c,f,_n())).next(h=>({batchId:s,changes:H6(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mt(t)).next(r=>{let i=L0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=L0();return this.indexManager.getCollectionParents(e,a).next(s=>tt.forEach(s,c=>{const f=function(p,g){return new w1(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((c,f)=>{const h=f.getKey();o.get(h)===null&&(o=o.insert(h,La.newInvalidDocument(h)))});let s=L0();return o.forEach((c,f)=>{const h=a.get(c);h!==void 0&&$0(h.mutation,f,Yo.empty(),Ei.now()),hm(t,f)&&(s=s.insert(c,f))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return tt.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Jl(i.createTime)}}(t)),tt.resolve()}getNamedQuery(e,t){return tt.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:nO(i.bundledQuery),readTime:Jl(i.readTime)}}(t)),tt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.overlays=new Wr(Mt.comparator),this.Qr=new Map}getOverlay(e,t){return tt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Kf();return tt.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.St(e,t,a)}),tt.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),tt.resolve()}getOverlaysForCollection(e,t,r){const i=Kf(),a=t.length+1,o=new Mt(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const c=s.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return tt.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Wr((f,h)=>f-h);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let h=a.get(f.largestBatchId);h===null&&(h=Kf(),a=a.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const s=Kf(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,h)=>s.set(f,h)),!(s.size()>=i)););return tt.resolve(s)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kD(t,r));let a=this.Qr.get(t);a===void 0&&(a=_n(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.sessionToken=da.EMPTY_BYTE_STRING}getSessionToken(e){return tt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,tt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this.$r=new ji(Xi.Ur),this.Kr=new ji(Xi.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Xi(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Xi(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new Mt(new Rr([])),r=new Xi(t,e),i=new Xi(t,e+1),a=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),a.push(o.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Mt(new Rr([])),r=new Xi(t,e),i=new Xi(t,e+1);let a=_n();return this.Kr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Xi(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xi{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Mt.comparator(e.key,t.key)||fn(e.Zr,t.Zr)}static Wr(e,t){return fn(e.Zr,t.Zr)||Mt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ji(Xi.Ur)}checkEmpty(e){return tt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OD(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.Xr=this.Xr.add(new Xi(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return tt.resolve(o)}lookupMutationBatch(e,t){return tt.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return tt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(this.mutationQueue.length===0?y5:this.nr-1)}getAllMutationBatches(e){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xi(t,0),i=new Xi(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],o=>{const s=this.ei(o.Zr);a.push(s)}),tt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ji(fn);return t.forEach(i=>{const a=new Xi(i,0),o=new Xi(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,o],s=>{r=r.add(s.Zr)})}),tt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Mt.isDocumentKey(a)||(a=a.child(""));const o=new Xi(new Mt(a),0);let s=new ji(fn);return this.Xr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(s=s.add(c.Zr)),!0)},o),tt.resolve(this.ni(s))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){er(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return tt.forEach(t.mutations,i=>{const a=new Xi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Xi(t,0),i=this.Xr.firstAfterOrEqual(r);return tt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,tt.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.ii=e,this.docs=function(){return new Wr(Mt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return tt.resolve(r?r.document.mutableCopy():La.newInvalidDocument(t))}getEntries(e,t){let r=Jc();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():La.newInvalidDocument(i))}),tt.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Jc();const o=t.path,s=new Mt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||G9(W9(h),r)<=0||(i.has(h.key)||hm(t,h))&&(a=a.insert(h.key,h.mutableCopy()))}return tt.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Yt(9500)}si(e,t){return tt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yO(this)}getSize(e){return tt.resolve(this.size)}}class yO extends uO{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),tt.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.persistence=e,this.oi=new ph(t=>w5(t),_5),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this._i=0,this.ai=new T5,this.targetCount=0,this.ui=_d.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),tt.resolve()}getLastRemoteSnapshotVersion(e){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tt.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),tt.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new _d(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,tt.resolve()}updateTargetData(e,t){return this.Tr(t),tt.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,tt.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.oi.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),tt.waitFor(a).next(()=>i)}getTargetCount(e){return tt.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return tt.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),tt.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),tt.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),tt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return tt.resolve(r)}containsKey(e,t){return tt.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,t){this.ci={},this.overlays={},this.li=new sm(0),this.hi=!1,this.hi=!0,this.Pi=new gO,this.referenceDelegate=e(this),this.Ti=new xO(this),this.indexManager=new rO,this.remoteDocumentCache=function(i){return new vO(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new tO(t),this.Ei=new dO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new mO(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){Et("MemoryPersistence","Starting transaction:",e);const i=new bO(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return tt.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class bO extends Y9{constructor(e){super(),this.currentSequenceNumber=e}}class R5{constructor(e){this.persistence=e,this.Vi=new T5,this.mi=null}static fi(e){return new R5(e)}get gi(){if(this.mi)return this.mi;throw Yt(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),tt.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),tt.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),tt.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.gi,r=>{const i=Mt.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,Jt.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return tt.or([()=>tt.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Dg{constructor(e,t){this.persistence=e,this.yi=new ph(r=>Q9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=cO(this,t)}static fi(e,t){return new Dg(e,t)}di(){}Ai(e){return tt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return tt.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?tt.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(s=>{s||(r++,a.removeEntry(o,Jt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),tt.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),tt.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),tt.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),tt.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tg(e.data.value)),t}Dr(e,t,r){return tt.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return tt.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=_n(),i=_n();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new N5(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return KT()?8:X9(Ba())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.bs(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new wO;return this.Ss(e,t,o).next(s=>{if(a.result=s,this.fs)return this.Ds(e,t,o,s.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Zh()<=wn.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",Jh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),tt.resolve()):(Zh()<=wn.DEBUG&&Et("QueryEngine","Query:",Jh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Zh()<=wn.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",Jh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zl(t))):tt.resolve())}ws(e,t){if(k3(t))return tt.resolve(null);let r=Zl(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ly(t,null,"F"),r=Zl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=_n(...a);return this.ys.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.vs(t,s);return this.Cs(t,f,o,c.readTime)?this.ws(e,ly(t,null,"F")):this.Fs(e,f,t,c)}))})))}bs(e,t,r,i){return k3(t)||i.isEqual(Jt.min())?tt.resolve(null):this.ys.getDocuments(e,r).next(a=>{const o=this.vs(t,a);return this.Cs(t,o,r,i)?tt.resolve(null):(Zh()<=wn.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jh(t)),this.Fs(e,o,t,H9(i,t1)).next(s=>s))})}vs(e,t){let r=new ji(V6(e));return t.forEach((i,a)=>{hm(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Zh()<=wn.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",Jh(t)),this.ys.getDocumentsMatchingQuery(e,t,cf.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5="LocalStore",AO=3e8;class EO{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Wr(fn),this.Os=new ph(a=>w5(a),_5),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hO(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function SO(n,e,t,r){return new EO(n,e,t,r)}async function f8(n,e){const t=tn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let c=_n();for(const f of i){o.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of a){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(f=>({ks:f,removedBatchIds:o,addedBatchIds:s}))})})}function CO(n,e){const t=tn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(s,c,f,h){const p=f.batch,g=p.keys();let m=tt.resolve();return g.forEach(b=>{m=m.next(()=>h.getEntry(c,b)).next(_=>{const I=f.docVersions.get(b);er(I!==null,48541),_.version.compareTo(I)<0&&(p.applyToRemoteDocument(_,f),_.isValidDocument()&&(_.setReadTime(f.commitVersion),h.addEntry(_)))})}),m.next(()=>s.mutationQueue.removeMutationBatch(c,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let c=_n();for(let f=0;f<s.mutationResults.length;++f)s.mutationResults[f].transformResults.length>0&&(c=c.add(s.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function h8(n){const e=tn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function IO(n,e){const t=tn(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const s=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;s.push(t.Ti.removeMatchingKeys(a,h.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(a,h.addedDocuments,p)));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(da.EMPTY_BYTE_STRING,Jt.min()).withLastLimboFreeSnapshotVersion(Jt.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(_,I,C){return _.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=AO?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,m,h)&&s.push(t.Ti.updateTargetData(a,m))});let c=Jc(),f=_n();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,h))}),s.push(TO(a,o,e.documentUpdates).next(h=>{c=h.qs,f=h.Qs})),!r.isEqual(Jt.min())){const h=t.Ti.getLastRemoteSnapshotVersion(a).next(p=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(h)}return tt.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,f)).next(()=>c)}).then(a=>(t.xs=i,a))}function TO(n,e,t){let r=_n(),i=_n();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=Jc();return t.forEach((s,c)=>{const f=a.get(s);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(s)),c.isNoDocument()&&c.version.isEqual(Jt.min())?(e.removeEntry(s,c.readTime),o=o.insert(s,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),o=o.insert(s,c)):Et(D5,"Ignoring outdated watch update for ",s,". Current version:",f.version," Watch version:",c.version)}),{qs:o,Qs:i}})}function RO(n,e){const t=tn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=y5),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NO(n,e){const t=tn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,tt.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new Ju(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function dy(n,e,t){const r=tn(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!kd(o))throw o;Et(D5,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function G3(n,e,t){const r=tn(n);let i=Jt.min(),a=_n();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,f,h){const p=tn(c),g=p.Os.get(h);return g!==void 0?tt.resolve(p.xs.get(g)):p.Ti.getTargetData(f,h)}(r,o,Zl(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,s.targetId).next(c=>{a=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Jt.min(),t?a:_n())).next(s=>(DO(r,mD(e),s),{documents:s,$s:a})))}function DO(n,e,t){let r=n.Ns.get(e)||Jt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class $3{constructor(){this.activeTargetIds=_D()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OO{constructor(){this.xo=new $3,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new $3,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="ConnectivityMonitor";class X3{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Et(Y3,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Et(Y3,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp=null;function py(){return jp===null?jp=function(){return 268435456+Math.round(2147483648*Math.random())}():jp++,"0x"+jp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="RestConnection",PO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Sg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const o=py(),s=this.jo(e,t.toUriEncodedString());Et(fv,`Sending RPC '${e}' ${o}:`,s,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,a);const{host:f}=new URL(s),h=Rd(f);return this.Jo(e,s,c,r,h).then(p=>(Et(fv,`Received RPC '${e}' ${o}: `,p),p),p=>{throw yd(fv,`RPC '${e}' ${o} failed with error: `,p,"url: ",s,"request:",r),p})}Yo(e,t,r,i,a,o){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Dd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=PO[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="WebChannelConnection";class jO extends LO{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=py();return new Promise((s,c)=>{const f=new g6;f.setWithCredentials(!0),f.listenOnce(m6.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case eg.NO_ERROR:const p=f.getResponseJson();Et(Ia,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case eg.TIMEOUT:Et(Ia,`RPC '${e}' ${o} timed out`),c(new St(rt.DEADLINE_EXCEEDED,"Request time out"));break;case eg.HTTP_ERROR:const g=f.getStatus();if(Et(Ia,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let m=f.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m==null?void 0:m.error;if(b&&b.status&&b.message){const _=function(C){const N=C.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(N)>=0?N:rt.UNKNOWN}(b.status);c(new St(_,b.message))}else c(new St(rt.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new St(rt.UNAVAILABLE,"Connection failed."));break;default:Yt(9055,{h_:e,streamId:o,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{Et(Ia,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);Et(Ia,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",h,r,15)})}I_(e,t,r){const i=py(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=x6(),s=y6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=a.join("");Et(Ia,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=o.createWebChannel(h,c);this.E_(p);let g=!1,m=!1;const b=new MO({Zo:I=>{m?Et(Ia,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(g||(Et(Ia,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Et(Ia,`RPC '${e}' stream ${i} sending:`,I),p.send(I))},Xo:()=>p.close()}),_=(I,C,N)=>{I.listen(C,j=>{try{N(j)}catch(q){setTimeout(()=>{throw q},0)}})};return _(p,P0.EventType.OPEN,()=>{m||(Et(Ia,`RPC '${e}' stream ${i} transport opened.`),b.__())}),_(p,P0.EventType.CLOSE,()=>{m||(m=!0,Et(Ia,`RPC '${e}' stream ${i} transport closed`),b.u_(),this.d_(p))}),_(p,P0.EventType.ERROR,I=>{m||(m=!0,yd(Ia,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),b.u_(new St(rt.UNAVAILABLE,"The operation could not be completed")))}),_(p,P0.EventType.MESSAGE,I=>{var C;if(!m){const N=I.data[0];er(!!N,16349);const j=N,q=(j==null?void 0:j.error)||((C=j[0])===null||C===void 0?void 0:C.error);if(q){Et(Ia,`RPC '${e}' stream ${i} received error:`,q);const Y=q.status;let H=function(R){const L=wi[R];if(L!==void 0)return J6(L)}(Y),P=q.message;H===void 0&&(H=rt.INTERNAL,P="Unknown error status: "+Y+" with message "+q.message),m=!0,b.u_(new St(H,P)),p.close()}else Et(Ia,`RPC '${e}' stream ${i} received:`,N),b.c_(N)}}),_(s,v6.STAT_EVENT,I=>{I.stat===ty.PROXY?Et(Ia,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===ty.NOPROXY&&Et(Ia,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.a_()},0),b}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function hv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(n){return new zD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&Et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="PersistentStream";class p8{constructor(e,t,r,i,a,o,s,c){this.xi=e,this.S_=r,this.D_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new d8(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===rt.RESOURCE_EXHAUSTED?(Zc(t.toString()),Zc("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{const i=new St(rt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Et(K3,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(Et(K3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BO extends p8{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=HD(this.serializer,e),r=function(a){if(!("targetChange"in a))return Jt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Jt.min():o.readTime?Jl(o.readTime):Jt.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=hy(this.serializer),t.addTarget=function(a,o){let s;const c=o.target;if(s=oy(c)?{documents:$D(a,c)}:{query:YD(a,c).gt},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=n8(a,o.resumeToken);const f=cy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}else if(o.snapshotVersion.compareTo(Jt.min())>0){s.readTime=Ng(a,o.snapshotVersion.toTimestamp());const f=cy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}return s}(this.serializer,e);const r=KD(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=hy(this.serializer),t.removeTarget=e,this.Q_(t)}}class FO extends p8{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return er(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,er(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){er(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=GD(e.writeResults,e.commitTime),r=Jl(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=hy(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>WD(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{}class zO extends UO{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new St(rt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.zo(e,uy(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new St(rt.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Yo(e,uy(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new St(rt.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class VO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Zc(t),this.ua=!1):Et("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="RemoteStore";class qO{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(o=>{r.enqueueAndForget(async()=>{gh(this)&&(Et(sh,"Restarting streams for network reachability change."),await async function(c){const f=tn(c);f.da.add(4),await E1(f),f.Va.set("Unknown"),f.da.delete(4),await vm(f)}(this))})}),this.Va=new VO(r,i)}}async function vm(n){if(gh(n))for(const e of n.Aa)await e(!0)}async function E1(n){for(const e of n.Aa)await e(!1)}function g8(n,e){const t=tn(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),L5(t)?P5(t):Pd(t).N_()&&k5(t,e))}function O5(n,e){const t=tn(n),r=Pd(t);t.Ea.delete(e),r.N_()&&m8(t,e),t.Ea.size===0&&(r.N_()?r.k_():gh(t)&&t.Va.set("Unknown"))}function k5(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Jt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pd(n).Z_(e)}function m8(n,e){n.ma.Ke(e),Pd(n).X_(e)}function P5(n){n.ma=new jD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Pd(n).start(),n.Va.ca()}function L5(n){return gh(n)&&!Pd(n).O_()&&n.Ea.size>0}function gh(n){return tn(n).da.size===0}function v8(n){n.ma=void 0}async function HO(n){n.Va.set("Online")}async function WO(n){n.Ea.forEach((e,t)=>{k5(n,e)})}async function GO(n,e){v8(n),L5(n)?(n.Va.Pa(e),P5(n)):n.Va.set("Unknown")}async function $O(n,e,t){if(n.Va.set("Online"),e instanceof t8&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ea.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ea.delete(s),i.ma.removeTarget(s))}(n,e)}catch(r){Et(sh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Og(n,r)}else if(e instanceof ig?n.ma.Xe(e):e instanceof e8?n.ma.ot(e):n.ma.nt(e),!t.isEqual(Jt.min()))try{const r=await h8(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.ma.It(o);return s.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ea.get(f);h&&a.Ea.set(f,h.withResumeToken(c.resumeToken,o))}}),s.targetMismatches.forEach((c,f)=>{const h=a.Ea.get(c);if(!h)return;a.Ea.set(c,h.withResumeToken(da.EMPTY_BYTE_STRING,h.snapshotVersion)),m8(a,c);const p=new Ju(h.target,c,f,h.sequenceNumber);k5(a,p)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){Et(sh,"Failed to raise snapshot:",r),await Og(n,r)}}async function Og(n,e,t){if(!kd(e))throw e;n.da.add(1),await E1(n),n.Va.set("Offline"),t||(t=()=>h8(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Et(sh,"Retrying IndexedDB access"),await t(),n.da.delete(1),await vm(n)})}function y8(n,e){return e().catch(t=>Og(n,t,e))}async function ym(n){const e=tn(n),t=df(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:y5;for(;YO(e);)try{const i=await RO(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,XO(e,i)}catch(i){await Og(e,i)}x8(e)&&b8(e)}function YO(n){return gh(n)&&n.Ia.length<10}function XO(n,e){n.Ia.push(e);const t=df(n);t.N_()&&t.ea&&t.ta(e.mutations)}function x8(n){return gh(n)&&!df(n).O_()&&n.Ia.length>0}function b8(n){df(n).start()}async function KO(n){df(n).ia()}async function QO(n){const e=df(n);for(const t of n.Ia)e.ta(t.mutations)}async function ZO(n,e,t){const r=n.Ia.shift(),i=S5.from(r,e,t);await y8(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await ym(n)}async function JO(n,e){e&&df(n).ea&&await async function(r,i){if(function(o){return LD(o)&&o!==rt.ABORTED}(i.code)){const a=r.Ia.shift();df(r).L_(),await y8(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await ym(r)}}(n,e),x8(n)&&b8(n)}async function Q3(n,e){const t=tn(n);t.asyncQueue.verifyOperationInProgress(),Et(sh,"RemoteStore received new credentials");const r=gh(t);t.da.add(3),await E1(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await vm(t)}async function ek(n,e){const t=tn(n);e?(t.da.delete(2),await vm(t)):e||(t.da.add(2),await E1(t),t.Va.set("Unknown"))}function Pd(n){return n.fa||(n.fa=function(t,r,i){const a=tn(t);return a.oa(),new BO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:HO.bind(null,n),n_:WO.bind(null,n),i_:GO.bind(null,n),Y_:$O.bind(null,n)}),n.Aa.push(async e=>{e?(n.fa.L_(),L5(n)?P5(n):n.Va.set("Unknown")):(await n.fa.stop(),v8(n))})),n.fa}function df(n){return n.ga||(n.ga=function(t,r,i){const a=tn(t);return a.oa(),new FO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:KO.bind(null,n),i_:JO.bind(null,n),na:QO.bind(null,n),ra:ZO.bind(null,n)}),n.Aa.push(async e=>{e?(n.ga.L_(),await ym(n)):(await n.ga.stop(),n.Ia.length>0&&(Et(sh,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Yc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new M5(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j5(n,e){if(Zc("AsyncQueue",`${e}: ${n}`),kd(n))return new St(rt.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{static emptySet(e){return new hd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Mt.comparator(t.key,r.key):(t,r)=>Mt.comparator(t.key,r.key),this.keyedMap=L0(),this.sortedSet=new Wr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new hd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.pa=new Wr(Mt.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Yt(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ad{constructor(e,t,r,i,a,o,s,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new Ad(e,t,hd.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class nk{constructor(){this.queries=J3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=tn(t),a=i.queries;i.queries=J3(),a.forEach((o,s)=>{for(const c of s.Sa)c.onError(r)})})(this,new St(rt.ABORTED,"Firestore shutting down"))}}function J3(){return new ph(n=>z6(n),fm)}async function B5(n,e){const t=tn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Da()&&e.va()&&(r=2):(a=new tk,r=e.va()?0:1);try{switch(r){case 0:a.ba=await t.onListen(i,!0);break;case 1:a.ba=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=j5(o,`Initialization of query '${Jh(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.Sa.push(e),e.Fa(t.onlineState),a.ba&&e.Ma(a.ba)&&U5(t)}async function F5(n,e){const t=tn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.va()?0:1:!a.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function rk(n,e){const t=tn(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.Sa)s.Ma(i)&&(r=!0);o.ba=i}}r&&U5(t)}function ik(n,e,t){const r=tn(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function U5(n){n.Ca.forEach(e=>{e.next()})}var gy,e_;(e_=gy||(gy={})).xa="default",e_.Cache="cache";class z5{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ad(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Ad.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e){this.key=e}}class _8{constructor(e){this.key=e}}class ak{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_n(),this.mutatedKeys=_n(),this.Za=V6(e),this.Xa=new hd(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new Z3,i=t?t.Xa:this.Xa;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),m=hm(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;g&&m?g.data.isEqual(m.data)?b!==_&&(r.track({type:3,doc:m}),I=!0):this.ru(g,m)||(r.track({type:2,doc:m}),I=!0,(c&&this.Za(m,c)>0||f&&this.Za(m,f)<0)&&(s=!0)):!g&&m?(r.track({type:0,doc:m}),I=!0):g&&!m&&(r.track({type:1,doc:g}),I=!0,(c||f)&&(s=!0)),I&&(m?(o=o.add(m),a=_?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:s,mutatedKeys:a}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,p)=>function(m,b){const _=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt(20277,{Vt:I})}};return _(m)-_(b)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;const s=t&&!i?this.su():[],c=this.Ya.size===0&&this.current&&!i?1:0,f=c!==this.Ja;return this.Ja=c,o.length!==0||f?{snapshot:new Ad(this.query,e.Xa,a,o,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:s}:{ou:s}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Z3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=_n(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new _8(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new w8(r))}),t}au(e){this.Ha=e.$s,this.Ya=_n();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Ad.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const V5="SyncEngine";class ok{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sk{constructor(e){this.key=e,this.cu=!1}}class lk{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new ph(s=>z6(s),fm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Wr(Mt.comparator),this.Eu=new Map,this.du=new T5,this.Au={},this.Ru=new Map,this.Vu=_d.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function ck(n,e,t=!0){const r=T8(n);let i;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.uu()):i=await A8(r,e,t,!0),i}async function uk(n,e){const t=T8(n);await A8(t,e,!0,!1)}async function A8(n,e,t,r){const i=await NO(n.localStore,Zl(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await fk(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&g8(n.remoteStore,i),s}async function fk(n,e,t,r,i){n.fu=(p,g,m)=>async function(_,I,C,N){let j=I.view.tu(C);j.Cs&&(j=await G3(_.localStore,I.query,!1).then(({documents:P})=>I.view.tu(P,j)));const q=N&&N.targetChanges.get(I.targetId),Y=N&&N.targetMismatches.get(I.targetId)!=null,H=I.view.applyChanges(j,_.isPrimaryClient,q,Y);return n_(_,I.targetId,H.ou),H.snapshot}(n,p,g,m);const a=await G3(n.localStore,e,!0),o=new ak(e,a.$s),s=o.tu(a.documents),c=A1.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(s,n.isPrimaryClient,c);n_(n,t,f.ou);const h=new ok(e,t,o);return n.hu.set(e,h),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot}async function hk(n,e,t){const r=tn(n),i=r.hu.get(e),a=r.Pu.get(i.targetId);if(a.length>1)return r.Pu.set(i.targetId,a.filter(o=>!fm(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&O5(r.remoteStore,i.targetId),my(r,i.targetId)}).catch(Od)):(my(r,i.targetId),await dy(r.localStore,i.targetId,!0))}async function dk(n,e){const t=tn(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),O5(t.remoteStore,r.targetId))}async function pk(n,e,t){const r=wk(n);try{const i=await function(o,s){const c=tn(o),f=Ei.now(),h=s.reduce((m,b)=>m.add(b.key),_n());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=Jc(),_=_n();return c.Bs.getEntries(m,h).next(I=>{b=I,b.forEach((C,N)=>{N.isValidDocument()||(_=_.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,b)).next(I=>{p=I;const C=[];for(const N of s){const j=ND(N,p.get(N.key).overlayedDocument);j!=null&&C.push(new wf(N.key,j,k6(j.value.mapValue),_s.exists(!0)))}return c.mutationQueue.addMutationBatch(m,f,C,s)}).next(I=>{g=I;const C=I.applyToLocalDocumentSet(p,_);return c.documentOverlayCache.saveOverlays(m,I.batchId,C)})}).then(()=>({batchId:g.batchId,changes:H6(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,c){let f=o.Au[o.currentUser.toKey()];f||(f=new Wr(fn)),f=f.insert(s,c),o.Au[o.currentUser.toKey()]=f}(r,i.batchId,t),await S1(r,i.changes),await ym(r.remoteStore)}catch(i){const a=j5(i,"Failed to persist write");t.reject(a)}}async function E8(n,e){const t=tn(n);try{const r=await IO(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Eu.get(a);o&&(er(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?er(o.cu,14607):i.removedDocuments.size>0&&(er(o.cu,42227),o.cu=!1))}),await S1(t,r,e)}catch(r){await Od(r)}}function t_(n,e,t){const r=tn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.hu.forEach((a,o)=>{const s=o.view.Fa(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const c=tn(o);c.onlineState=s;let f=!1;c.queries.forEach((h,p)=>{for(const g of p.Sa)g.Fa(s)&&(f=!0)}),f&&U5(c)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gk(n,e,t){const r=tn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let o=new Wr(Mt.comparator);o=o.insert(a,La.newNoDocument(a,Jt.min()));const s=_n().add(a),c=new gm(Jt.min(),new Map,new Wr(fn),o,s);await E8(r,c),r.Iu=r.Iu.remove(a),r.Eu.delete(e),q5(r)}else await dy(r.localStore,e,!1).then(()=>my(r,e,t)).catch(Od)}async function mk(n,e){const t=tn(n),r=e.batch.batchId;try{const i=await CO(t.localStore,e);C8(t,r,null),S8(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await S1(t,i)}catch(i){await Od(i)}}async function vk(n,e,t){const r=tn(n);try{const i=await function(o,s){const c=tn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return c.mutationQueue.lookupMutationBatch(f,s).next(p=>(er(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(f,p))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,s)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>c.localDocuments.getDocuments(f,h))})}(r.localStore,e);C8(r,e,t),S8(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await S1(r,i)}catch(i){await Od(i)}}function S8(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function C8(n,e,t){const r=tn(n);let i=r.Au[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function my(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||I8(n,r)})}function I8(n,e){n.Tu.delete(e.path.canonicalString());const t=n.Iu.get(e);t!==null&&(O5(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),q5(n))}function n_(n,e,t){for(const r of t)r instanceof w8?(n.du.addReference(r.key,e),yk(n,r)):r instanceof _8?(Et(V5,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||I8(n,r.key)):Yt(19791,{pu:r})}function yk(n,e){const t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(Et(V5,"New document in limbo: "+t),n.Tu.add(r),q5(n))}function q5(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const e=n.Tu.values().next().value;n.Tu.delete(e);const t=new Mt(Rr.fromString(e)),r=n.Vu.next();n.Eu.set(r,new sk(t)),n.Iu=n.Iu.insert(t,r),g8(n.remoteStore,new Ju(Zl(um(t.path)),r,"TargetPurposeLimboResolution",sm.le))}}async function S1(n,e,t){const r=tn(n),i=[],a=[],o=[];r.hu.isEmpty()||(r.hu.forEach((s,c)=>{o.push(r.fu(c,e,t).then(f=>{var h;if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:(h=t==null?void 0:t.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){i.push(f);const p=N5.Rs(c.targetId,f);a.push(p)}}))}),await Promise.all(o),r.lu.Y_(i),await async function(c,f){const h=tn(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>tt.forEach(f,g=>tt.forEach(g.ds,m=>h.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>tt.forEach(g.As,m=>h.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!kd(p))throw p;Et(D5,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const m=h.xs.get(g),b=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(b);h.xs=h.xs.insert(g,_)}}}(r.localStore,a))}async function xk(n,e){const t=tn(n);if(!t.currentUser.isEqual(e)){Et(V5,"User change. New user:",e.toKey());const r=await f8(t.localStore,e);t.currentUser=e,function(a,o){a.Ru.forEach(s=>{s.forEach(c=>{c.reject(new St(rt.CANCELLED,o))})}),a.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await S1(t,r.ks)}}function bk(n,e){const t=tn(n),r=t.Eu.get(e);if(r&&r.cu)return _n().add(r.key);{let i=_n();const a=t.Pu.get(e);if(!a)return i;for(const o of a){const s=t.hu.get(o);i=i.unionWith(s.view.eu)}return i}}function T8(n){const e=tn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=E8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gk.bind(null,e),e.lu.Y_=rk.bind(null,e.eventManager),e.lu.gu=ik.bind(null,e.eventManager),e}function wk(n){const e=tn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vk.bind(null,e),e}class kg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return SO(this.persistence,new _O,e.initialUser,this.serializer)}Su(e){return new u8(R5.fi,this.serializer)}bu(e){return new OO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kg.provider={build:()=>new kg};class _k extends kg{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){er(this.persistence.referenceDelegate instanceof Dg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sO(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?vo.withCacheSize(this.cacheSizeBytes):vo.DEFAULT;return new u8(r=>Dg.fi(r,t),this.serializer)}}class vy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>t_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xk.bind(null,this.syncEngine),await ek(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nk}()}createDatastore(e){const t=mm(e.databaseInfo.databaseId),r=function(a){return new jO(a)}(e.databaseInfo);return function(a,o,s,c){return new zO(a,o,s,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new qO(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>t_(this.syncEngine,t,0),function(){return X3.C()?new X3:new kO}())}createSyncEngine(e,t){return function(i,a,o,s,c,f,h){const p=new lk(i,a,o,s,c,f);return h&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=tn(i);Et(sh,"RemoteStore shutting down."),a.da.add(5),await E1(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}vy.provider={build:()=>new vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Zc("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="FirestoreClient";class Ak{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pa.UNAUTHENTICATED,this.clientId=A6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Et(pf,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Et(pf,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=j5(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dv(n,e){n.asyncQueue.verifyOperationInProgress(),Et(pf,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await f8(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function r_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ek(n);Et(pf,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Q3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Q3(e.remoteStore,i)),n._onlineComponents=e}async function Ek(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Et(pf,"Using user provided OfflineComponentProvider");try{await dv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===rt.FAILED_PRECONDITION||i.code===rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;yd("Error using user provided cache. Falling back to memory cache: "+t),await dv(n,new kg)}}else Et(pf,"Using default OfflineComponentProvider"),await dv(n,new _k(void 0));return n._offlineComponents}async function R8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Et(pf,"Using user provided OnlineComponentProvider"),await r_(n,n._uninitializedComponentsProvider._online)):(Et(pf,"Using default OnlineComponentProvider"),await r_(n,new vy))),n._onlineComponents}function Sk(n){return R8(n).then(e=>e.syncEngine)}async function Pg(n){const e=await R8(n),t=e.eventManager;return t.onListen=ck.bind(null,e.syncEngine),t.onUnlisten=hk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dk.bind(null,e.syncEngine),t}function Ck(n,e,t={}){const r=new Yc;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,c,f){const h=new H5({next:g=>{h.xu(),o.enqueueAndForget(()=>F5(a,p));const m=g.docs.has(s);!m&&g.fromCache?f.reject(new St(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?f.reject(new St(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new z5(um(s.path),h,{includeMetadataChanges:!0,Qa:!0});return B5(a,p)}(await Pg(n),n.asyncQueue,e,t,r)),r.promise}function Ik(n,e,t={}){const r=new Yc;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,c,f){const h=new H5({next:g=>{h.xu(),o.enqueueAndForget(()=>F5(a,p)),g.fromCache&&c.source==="server"?f.reject(new St(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new z5(s,h,{includeMetadataChanges:!0,Qa:!0});return B5(a,p)}(await Pg(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(n,e,t){if(!t)throw new St(rt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Tk(n,e,t,r){if(e===!0&&r===!0)throw new St(rt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function a_(n){if(!Mt.isDocumentKey(n))throw new St(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o_(n){if(Mt.isDocumentKey(n))throw new St(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Yt(12329,{type:typeof n})}function _o(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new St(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xm(n);throw new St(rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8="firestore.googleapis.com",s_=!0;class l_{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new St(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=O8,this.ssl=s_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:s_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aO)throw new St(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Tk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N8((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new St(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new St(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new St(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new St(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L9;switch(r.type){case"firstParty":return new F9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new St(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=i_.get(t);r&&(Et("ComponentProvider","Removing Datastore"),i_.delete(t),r.terminate())}(this),Promise.resolve()}}function Rk(n,e,t,r={}){var i;n=_o(n,bm);const a=Rd(e),o=n._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(a5(`https://${c}`),o5("Firestore",!0)),o.host!==O8&&o.host!==c&&yd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},o),{host:c,ssl:a,emulatorOptions:r});if(!lf(f,s)&&(n._setSettings(f),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Pa.MOCK_USER;else{h=AA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new St(rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Pa(g)}n._authCredentials=new M9(new w6(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mh(this.firestore,e,this._query)}}class ja{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new af(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ja(this.firestore,e,this._key)}}class af extends mh{constructor(e,t,r){super(e,t,um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ja(this.firestore,null,new Mt(e))}withConverter(e){return new af(this.firestore,e,this._path)}}function An(n,e,...t){if(n=Hr(n),D8("collection","path",e),n instanceof bm){const r=Rr.fromString(e,...t);return o_(r),new af(n,null,r)}{if(!(n instanceof ja||n instanceof af))throw new St(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rr.fromString(e,...t));return o_(r),new af(n.firestore,null,r)}}function Er(n,e,...t){if(n=Hr(n),arguments.length===1&&(e=A6.newId()),D8("doc","path",e),n instanceof bm){const r=Rr.fromString(e,...t);return a_(r),new ja(n,null,new Mt(r))}{if(!(n instanceof ja||n instanceof af))throw new St(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rr.fromString(e,...t));return a_(r),new ja(n.firestore,n instanceof af?n.converter:null,new Mt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="AsyncQueue";class u_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new d8(this,"async_queue_retry"),this.rc=()=>{const r=hv();r&&Et(c_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=hv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=hv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Yc;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!kd(e))throw e;Et(c_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Zc("INTERNAL UNHANDLED ERROR: ",f_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=M5.createAndSchedule(this,e,t,r,a=>this.uc(a));return this.Zu.push(i),i}oc(){this.Xu&&Yt(47125,{cc:f_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function f_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class eu extends bm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new u_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u_(e),this._firestoreClient=void 0,await e}}}function Nk(n,e){const t=typeof n=="object"?n:rm(),r=typeof n=="string"?n:Sg,i=yf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=bA("firestore");a&&Rk(i,...a)}return i}function wm(n){if(n._terminated)throw new St(rt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Dk(n),n._firestoreClient}function Dk(n){var e,t,r;const i=n._freezeSettings(),a=function(s,c,f,h){return new eD(s,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,N8(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Ak(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const c=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ed(da.fromBase64String(e))}catch(t){throw new St(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ed(da.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new St(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new St(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new St(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fn(this._lat,e._lat)||fn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=/^__.*__$/;class kk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wf(e,this.data,this.fieldMask,t,this.fieldTransforms):new _1(e,this.data,t,this.fieldTransforms)}}class k8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function P8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt(40011,{Ic:n})}}class $5{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new $5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Lg(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(P8(this.Ic)&&Ok.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Pk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mm(e)}bc(e,t,r,i=!1){return new $5({Ic:e,methodName:t,wc:r,path:fa.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Em(n){const e=n._freezeSettings(),t=mm(n._databaseId);return new Pk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function L8(n,e,t,r,i,a={}){const o=n.bc(a.merge||a.mergeFields?2:0,e,t,i);X5("Data must be an object, but it was:",o,r);const s=M8(r,o);let c,f;if(a.merge)c=new Yo(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const g=yy(e,p,t);if(!o.contains(g))throw new St(rt.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);B8(h,g)||h.push(g)}c=new Yo(h),f=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,f=o.fieldTransforms;return new kk(new xo(s),c,f)}class Sm extends Am{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sm}}class Y5 extends Am{_toFieldTransform(e){return new CD(e.path,new a1)}isEqual(e){return e instanceof Y5}}function Lk(n,e,t,r){const i=n.bc(1,e,t);X5("Data must be an object, but it was:",i,r);const a=[],o=xo.empty();bf(r,(c,f)=>{const h=K5(e,c,t);f=Hr(f);const p=i.mc(h);if(f instanceof Sm)a.push(h);else{const g=C1(f,p);g!=null&&(a.push(h),o.set(h,g))}});const s=new Yo(a);return new k8(o,s,i.fieldTransforms)}function Mk(n,e,t,r,i,a){const o=n.bc(1,e,t),s=[yy(e,r,t)],c=[i];if(a.length%2!=0)throw new St(rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)s.push(yy(e,a[g])),c.push(a[g+1]);const f=[],h=xo.empty();for(let g=s.length-1;g>=0;--g)if(!B8(f,s[g])){const m=s[g];let b=c[g];b=Hr(b);const _=o.mc(m);if(b instanceof Sm)f.push(m);else{const I=C1(b,_);I!=null&&(f.push(m),h.set(m,I))}}const p=new Yo(f);return new k8(h,p,o.fieldTransforms)}function jk(n,e,t,r=!1){return C1(t,n.bc(r?4:3,e))}function C1(n,e){if(j8(n=Hr(n)))return X5("Unsupported field value:",e,n),M8(n,e);if(n instanceof Am)return function(r,i){if(!P8(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let c=C1(s,i.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=Hr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ei.fromDate(r);return{timestampValue:Ng(i.serializer,a)}}if(r instanceof Ei){const a=new Ei(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ng(i.serializer,a)}}if(r instanceof W5)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ed)return{bytesValue:n8(i.serializer,r._byteString)};if(r instanceof ja){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:I5(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof G5)return function(o,s){return{mapValue:{fields:{[D6]:{stringValue:O6},[Cg]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw s.gc("VectorValues must only contain numeric values.");return A5(s.serializer,f)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${xm(r)}`)}(n,e)}function M8(n,e){const t={};return S6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bf(n,(r,i)=>{const a=C1(i,e.Ac(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function j8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ei||n instanceof W5||n instanceof Ed||n instanceof ja||n instanceof Am||n instanceof G5)}function X5(n,e,t){if(!j8(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=xm(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function yy(n,e,t){if((e=Hr(e))instanceof _m)return e._internalPath;if(typeof e=="string")return K5(n,e);throw Lg("Field path arguments must be of type string or ",n,!1,void 0,t)}const Bk=new RegExp("[~\\*/\\[\\]]");function K5(n,e,t){if(e.search(Bk)>=0)throw Lg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _m(...e.split("."))._internalPath}catch{throw Lg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lg(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new St(rt.INVALID_ARGUMENT,s+n+c)}function B8(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ja(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Q5("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Fk extends F8{data(){return super.data()}}function Q5(n,e){return typeof e=="string"?K5(n,e):e instanceof _m?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new St(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z5{}class Uk extends Z5{}function ec(n,e,...t){let r=[];e instanceof Z5&&r.push(e),r=r.concat(t),function(a){const o=a.filter(c=>c instanceof J5).length,s=a.filter(c=>c instanceof Cm).length;if(o>1||o>0&&s>0)throw new St(rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Cm extends Uk{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Cm(e,t,r)}_apply(e){const t=this._parse(e);return z8(e._query,t),new mh(e.firestore,e.converter,sy(e._query,t))}_parse(e){const t=Em(e.firestore);return function(a,o,s,c,f,h,p){let g;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new St(rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){p_(p,h);const b=[];for(const _ of p)b.push(d_(c,a,_));g={arrayValue:{values:b}}}else g=d_(c,a,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||p_(p,h),g=jk(s,o,p,h==="in"||h==="not-in");return _i.create(f,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ic(n,e,t){const r=e,i=Q5("where",n);return Cm._create(i,r,t)}class J5 extends Z5{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new J5(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:fl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const c of s)z8(o,c),o=sy(o,c)}(e._query,t),new mh(e.firestore,e.converter,sy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function d_(n,e,t){if(typeof(t=Hr(t))=="string"){if(t==="")throw new St(rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U6(e)&&t.indexOf("/")!==-1)throw new St(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rr.fromString(t));if(!Mt.isDocumentKey(r))throw new St(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return I3(n,new Mt(r))}if(t instanceof ja)return I3(n,t._key);throw new St(rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xm(t)}.`)}function p_(n,e){if(!Array.isArray(n)||n.length===0)throw new St(rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z8(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new St(rt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new St(rt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class zk{convertValue(e,t="none"){switch(hf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ff(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Yt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bf(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Cg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ui(o.doubleValue));return new G5(a)}convertGeoPoint(e){return new W5(ui(e.latitude),ui(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(n1(e));default:return null}}convertTimestamp(e){const t=uf(e);return new Ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rr.fromString(e);er(l8(r),9688,{name:e});const i=new r1(r.get(1),r.get(3)),a=new Mt(r.popFirst(5));return i.isEqual(t)||Zc(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class q8 extends F8{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ag(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Q5("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ag extends q8{data(e={}){return super.data(e)}}class H8{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new j0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ag(this._firestore,this._userDataWriter,r.key,r,new j0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new St(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const c=new ag(i._firestore,i._userDataWriter,s.doc.key,s.doc,new j0(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const c=new ag(i._firestore,i._userDataWriter,s.doc.key,s.doc,new j0(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return s.type!==0&&(f=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),h=o.indexOf(s.doc.key)),{type:Vk(s.type),doc:c,oldIndex:f,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n){n=_o(n,ja);const e=_o(n.firestore,eu);return Ck(wm(e),n._key).then(t=>G8(e,n,t))}class ex extends zk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ed(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ja(this.firestore,null,t)}}function sr(n){n=_o(n,mh);const e=_o(n.firestore,eu),t=wm(e),r=new ex(e);return U8(n._query),Ik(t,n._query).then(i=>new H8(e,r,n,i))}function tx(n,e,t){n=_o(n,ja);const r=_o(n.firestore,eu),i=V8(n.converter,e);return Rm(r,[L8(Em(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,_s.none())])}function Za(n,e,t,...r){n=_o(n,ja);const i=_o(n.firestore,eu),a=Em(i);let o;return o=typeof(e=Hr(e))=="string"||e instanceof _m?Mk(a,"updateDoc",n._key,e,t,r):Lk(a,"updateDoc",n._key,e),Rm(i,[o.toMutation(n._key,_s.exists(!0))])}function Im(n){return Rm(_o(n.firestore,eu),[new E5(n._key,_s.none())])}function Tm(n,e){const t=_o(n.firestore,eu),r=Er(n),i=V8(n.converter,e);return Rm(t,[L8(Em(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,_s.exists(!1))]).then(()=>r)}function W8(n,...e){var t,r,i;n=Hr(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||h_(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(h_(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,f,h;if(n instanceof ja)f=_o(n.firestore,eu),h=um(n._key.path),c={next:p=>{e[o]&&e[o](G8(f,n,p))},error:e[o+1],complete:e[o+2]};else{const p=_o(n,mh);f=_o(p.firestore,eu),h=p._query;const g=new ex(f);c={next:m=>{e[o]&&e[o](new H8(f,g,p,m))},error:e[o+1],complete:e[o+2]},U8(n._query)}return function(g,m,b,_){const I=new H5(_),C=new z5(m,I,b);return g.asyncQueue.enqueueAndForget(async()=>B5(await Pg(g),C)),()=>{I.xu(),g.asyncQueue.enqueueAndForget(async()=>F5(await Pg(g),C))}}(wm(f),h,s,c)}function Rm(n,e){return function(r,i){const a=new Yc;return r.asyncQueue.enqueueAndForget(async()=>pk(await Sk(r),i,a)),a.promise}(wm(n),e)}function G8(n,e,t){const r=t.docs.get(e._key),i=new ex(n);return new q8(n,i,e._key,r,new j0(t.hasPendingWrites,t.fromCache),e.converter)}function Ai(){return new Y5("serverTimestamp")}(function(e,t=!0){(function(i){Dd=i})(dh),cl(new Ss("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new eu(new j9(r.getProvider("auth-internal")),new U9(o,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new St(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new r1(f.options.projectId,h)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),wo(g3,m3,e),wo(g3,m3,"esm2017")})();var qk="firebase",Hk="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo(qk,Hk,"app");const $8="@firebase/installations",nx="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=1e4,X8=`w:${nx}`,K8="FIS_v2",Wk="https://firebaseinstallations.googleapis.com/v1",Gk=60*60*1e3,$k="installations",Yk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},lh=new hh($k,Yk,Xk);function Q8(n){return n instanceof Cs&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8({projectId:n}){return`${Wk}/projects/${n}/installations`}function J8(n){return{token:n.token,requestStatus:2,expiresIn:Qk(n.expiresIn),creationTime:Date.now()}}async function eE(n,e){const r=(await e.json()).error;return lh.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function tE({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Kk(n,{refreshToken:e}){const t=tE(n);return t.append("Authorization",Zk(e)),t}async function nE(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Qk(n){return Number(n.replace("s","000"))}function Zk(n){return`${K8} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Z8(n),i=tE(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={fid:t,authVersion:K8,appId:n.appId,sdkVersion:X8},s={method:"POST",headers:i,body:JSON.stringify(o)},c=await nE(()=>fetch(r,s));if(c.ok){const f=await c.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:J8(f.authToken)}}else throw await eE("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=/^[cdef][\w-]{21}$/,xy="";function nP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=rP(n);return tP.test(t)?t:xy}catch{return xy}}function rP(n){return eP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function aE(n,e){const t=Nm(n);oE(t,e),iP(t,e)}function oE(n,e){const t=iE.get(n);if(t)for(const r of t)r(e)}function iP(n,e){const t=aP();t&&t.postMessage({key:n,fid:e}),oP()}let Qf=null;function aP(){return!Qf&&"BroadcastChannel"in self&&(Qf=new BroadcastChannel("[Firebase] FID Change"),Qf.onmessage=n=>{oE(n.data.key,n.data.fid)}),Qf}function oP(){iE.size===0&&Qf&&(Qf.close(),Qf=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="firebase-installations-database",lP=1,ch="firebase-installations-store";let pv=null;function rx(){return pv||(pv=RA(sP,lP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ch)}}})),pv}async function Mg(n,e){const t=Nm(n),i=(await rx()).transaction(ch,"readwrite"),a=i.objectStore(ch),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&aE(n,e.fid),e}async function sE(n){const e=Nm(n),r=(await rx()).transaction(ch,"readwrite");await r.objectStore(ch).delete(e),await r.done}async function Dm(n,e){const t=Nm(n),i=(await rx()).transaction(ch,"readwrite"),a=i.objectStore(ch),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&aE(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(n){let e;const t=await Dm(n.appConfig,r=>{const i=cP(r),a=uP(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===xy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function cP(n){const e=n||{fid:nP(),registrationStatus:0};return lE(e)}function uP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(lh.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=fP(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:hP(n)}:{installationEntry:e}}async function fP(n,e){try{const t=await Jk(n,e);return Mg(n.appConfig,t)}catch(t){throw Q8(t)&&t.customData.serverCode===409?await sE(n.appConfig):await Mg(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function hP(n){let e=await g_(n.appConfig);for(;e.registrationStatus===1;)await rE(100),e=await g_(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await ix(n);return r||t}return e}function g_(n){return Dm(n,e=>{if(!e)throw lh.create("installation-not-found");return lE(e)})}function lE(n){return dP(n)?{fid:n.fid,registrationStatus:0}:n}function dP(n){return n.registrationStatus===1&&n.registrationTime+Y8<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP({appConfig:n,heartbeatServiceProvider:e},t){const r=gP(n,t),i=Kk(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={installation:{sdkVersion:X8,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},c=await nE(()=>fetch(r,s));if(c.ok){const f=await c.json();return J8(f)}else throw await eE("Generate Auth Token",c)}function gP(n,{fid:e}){return`${Z8(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(n,e=!1){let t;const r=await Dm(n.appConfig,a=>{if(!cE(a))throw lh.create("not-registered");const o=a.authToken;if(!e&&yP(o))return a;if(o.requestStatus===1)return t=mP(n,e),a;{if(!navigator.onLine)throw lh.create("app-offline");const s=bP(a);return t=vP(n,s),s}});return t?await t:r.authToken}async function mP(n,e){let t=await m_(n.appConfig);for(;t.authToken.requestStatus===1;)await rE(100),t=await m_(n.appConfig);const r=t.authToken;return r.requestStatus===0?ax(n,e):r}function m_(n){return Dm(n,e=>{if(!cE(e))throw lh.create("not-registered");const t=e.authToken;return wP(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function vP(n,e){try{const t=await pP(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Mg(n.appConfig,r),t}catch(t){if(Q8(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await sE(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mg(n.appConfig,r)}throw t}}function cE(n){return n!==void 0&&n.registrationStatus===2}function yP(n){return n.requestStatus===2&&!xP(n)}function xP(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Gk}function bP(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function wP(n){return n.requestStatus===1&&n.requestTime+Y8<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(n){const e=n,{installationEntry:t,registrationPromise:r}=await ix(e);return r?r.catch(console.error):ax(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(n,e=!1){const t=n;return await EP(t),(await ax(t,e)).token}async function EP(n){const{registrationPromise:e}=await ix(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n){if(!n||!n.options)throw gv("App Configuration");if(!n.name)throw gv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw gv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function gv(n){return lh.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="installations",CP="installations-internal",IP=n=>{const e=n.getProvider("app").getImmediate(),t=SP(e),r=yf(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},TP=n=>{const e=n.getProvider("app").getImmediate(),t=yf(e,uE).getImmediate();return{getId:()=>_P(t),getToken:i=>AP(t,i)}};function RP(){cl(new Ss(uE,IP,"PUBLIC")),cl(new Ss(CP,TP,"PRIVATE"))}RP();wo($8,nx);wo($8,nx,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="analytics",NP="firebase_id",DP="origin",OP=60*1e3,kP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ox="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new nm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ko=new hh("analytics","Analytics",PP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(n){if(!n.startsWith(ox)){const e=Ko.create("invalid-gtag-resource",{gtagURL:n});return Ao.warn(e.message),""}return n}function fE(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function MP(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function jP(n,e){const t=MP("firebase-js-sdk-policy",{createScriptURL:LP}),r=document.createElement("script"),i=`${ox}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function BP(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function FP(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const c=(await fE(t)).find(f=>f.measurementId===i);c&&await e[c.appId]}}catch(s){Ao.error(s)}n("config",i,a)}async function UP(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await fE(t);for(const c of o){const f=s.find(p=>p.measurementId===c),h=f&&e[f.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){Ao.error(a)}}function zP(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,c]=o;await UP(n,e,t,s,c)}else if(a==="config"){const[s,c]=o;await FP(n,e,t,r,s,c)}else if(a==="consent"){const[s,c]=o;n("consent",s,c)}else if(a==="get"){const[s,c,f]=o;n("get",s,c,f)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){Ao.error(s)}}return i}function VP(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=zP(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function qP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ox)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=30,WP=1e3;class GP{constructor(e={},t=WP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const hE=new GP;function $P(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function YP(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:$P(r)},a=kP.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(s=c.error.message)}catch{}throw Ko.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function XP(n,e=hE,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Ko.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Ko.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new ZP;return setTimeout(async()=>{s.abort()},OP),dE({appId:r,apiKey:i,measurementId:a},o,s,e)}async function dE(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=hE){var a;const{appId:o,measurementId:s}=n;try{await KP(r,e)}catch(c){if(s)return Ao.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:s};throw c}try{const c=await YP(n);return i.deleteThrottleMetadata(o),c}catch(c){const f=c;if(!QP(f)){if(i.deleteThrottleMetadata(o),s)return Ao.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:s};throw c}const h=Number((a=f==null?void 0:f.customData)===null||a===void 0?void 0:a.httpStatus)===503?Uw(t,i.intervalMillis,HP):Uw(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return i.setThrottleMetadata(o,p),Ao.debug(`Calling attemptFetch again in ${h} millis`),dE(n,p,r,i)}}function KP(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ko.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QP(n){if(!(n instanceof Cs)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class ZP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function JP(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(){if(SA())try{await CA()}catch(n){return Ao.warn(Ko.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Ao.warn(Ko.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function tL(n,e,t,r,i,a,o){var s;const c=XP(n);c.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Ao.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ao.error(m)),e.push(c);const f=eL().then(m=>{if(m)return r.getId()}),[h,p]=await Promise.all([c,f]);qP(a)||jP(a,h.measurementId),i("js",new Date);const g=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return g[DP]="firebase",g.update=!0,p!=null&&(g[NP]=p),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.app=e}_delete(){return delete Y0[this.app.options.appId],Promise.resolve()}}let Y0={},v_=[];const y_={};let mv="dataLayer",rL="gtag",x_,pE,b_=!1;function iL(){const n=[];if(EA()&&n.push("This is a browser extension environment."),QT()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ko.create("invalid-analytics-context",{errorInfo:e});Ao.warn(t.message)}}function aL(n,e,t){iL();const r=n.options.appId;if(!r)throw Ko.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ao.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ko.create("no-api-key");if(Y0[r]!=null)throw Ko.create("already-exists",{id:r});if(!b_){BP(mv);const{wrappedGtag:a,gtagCore:o}=VP(Y0,v_,y_,mv,rL);pE=a,x_=o,b_=!0}return Y0[r]=tL(n,v_,y_,e,x_,mv,t),new nL(n)}function oL(n=rm()){n=Hr(n);const e=yf(n,jg);return e.isInitialized()?e.getImmediate():sL(n)}function sL(n,e={}){const t=yf(n,jg);if(t.isInitialized()){const i=t.getImmediate();if(lf(e,t.getOptions()))return i;throw Ko.create("already-initialized")}return t.initialize({options:e})}function lL(n,e,t,r){n=Hr(n),JP(pE,Y0[n.app.options.appId],e,t,r).catch(i=>Ao.error(i))}const w_="@firebase/analytics",__="0.10.16";function cL(){cl(new Ss(jg,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return aL(r,i,t)},"PUBLIC")),cl(new Ss("analytics-internal",n,"PRIVATE")),wo(w_,__),wo(w_,__,"esm2017");function n(e){try{const t=e.getProvider(jg).getImmediate();return{logEvent:(r,i,a)=>lL(t,r,i,a)}}catch(t){throw Ko.create("interop-component-reg-failed",{reason:t})}}}cL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="firebasestorage.googleapis.com",uL="storageBucket",fL=2*60*1e3,hL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends Cs{constructor(e,t,r=0){super(vv(e),`Firebase Storage: ${t} (${vv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lc.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ac;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ac||(ac={}));function vv(n){return"storage/"+n}function dL(){const n="An unknown error occurred, please check the error payload for server response.";return new lc(ac.UNKNOWN,n)}function pL(){return new lc(ac.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gL(){return new lc(ac.CANCELED,"User canceled the upload/download.")}function mL(n){return new lc(ac.INVALID_URL,"Invalid URL '"+n+"'.")}function vL(n){return new lc(ac.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function A_(n){return new lc(ac.INVALID_ARGUMENT,n)}function mE(){return new lc(ac.APP_DELETED,"The Firebase app was deleted.")}function yL(n){return new lc(ac.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ll.makeFromUrl(e,t)}catch{return new ll(e,"")}if(r.path==="")return r;throw vL(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${h}/b/${i}/o${g}`,"i"),b={bucket:1,path:3},_=t===gE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",C=new RegExp(`^https?://${_}/${i}/${I}`,"i"),j=[{regex:s,indices:c,postModify:a},{regex:m,indices:b,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<j.length;q++){const Y=j[q],H=Y.regex.exec(e);if(H){const P=H[Y.indices.bucket];let E=H[Y.indices.path];E||(E=""),r=new ll(P,E),Y.postModify(r);break}}if(r==null)throw mL(e);return r}}class xL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n,e,t){let r=1,i=null,a=null,o=!1,s=0;function c(){return s===2}let f=!1;function h(...I){f||(f=!0,e.apply(null,I))}function p(I){i=setTimeout(()=>{i=null,n(m,c())},I)}function g(){a&&clearTimeout(a)}function m(I,...C){if(f){g();return}if(I){g(),h.call(null,I,...C);return}if(c()||o){g(),h.call(null,I,...C);return}r<64&&(r*=2);let j;s===1?(s=2,j=0):j=(r+Math.random())*1e3,p(j)}let b=!1;function _(I){b||(b=!0,g(),!f&&(i!==null?(I||(s=2),clearTimeout(i),p(0)):I||(s=1)))}return p(0),a=setTimeout(()=>{o=!0,_(!0)},t),_}function wL(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(n){return n!==void 0}function E_(n,e,t,r){if(r<e)throw A_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw A_(`Invalid value for '${n}'. Expected ${t} or less.`)}function AL(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Bg;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Bg||(Bg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,t,r,i,a,o,s,c,f,h,p,g=!0,m=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,_)=>{this.resolve_=b,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Bp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const c=s.loaded,f=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===Bg.NO_ERROR,c=a.getStatus();if(!s||EL(c,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Bg.ABORT;r(!1,new Bp(!1,null,h));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Bp(f,a))})},t=(r,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(s,s.getResponse());_L(c)?a(c):a()}catch(c){o(c)}else if(s!==null){const c=dL();c.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,c)):o(c)}else if(i.canceled){const c=this.appDelete_?mE():gL();o(c)}else{const c=pL();o(c)}};this.canceled_?t(!1,new Bp(!1,null,!0)):this.backoffId_=bL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bp{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function CL(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function IL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TL(n,e){e&&(n["X-Firebase-GMPID"]=e)}function RL(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function NL(n,e,t,r,i,a,o=!0,s=!1){const c=AL(n.urlParams),f=n.url+c,h=Object.assign({},n.headers);return TL(h,e),CL(h,t),IL(h,a),RL(h,r),new SL(f,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function OL(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t){this._service=e,t instanceof ll?this._location=t:this._location=ll.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fg(e,t)}get root(){const e=new ll(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OL(this._location.path)}get storage(){return this._service}get parent(){const e=DL(this._location.path);if(e===null)return null;const t=new ll(this._location.bucket,e);return new Fg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw yL(e)}}function S_(n,e){const t=e==null?void 0:e[uL];return t==null?null:ll.makeFromBucketSpec(t,n)}function kL(n,e,t,r={}){n.host=`${e}:${t}`;const i=Rd(e);i&&(a5(`https://${n.host}`),o5("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:AA(a,n.app.options.projectId))}class PL{constructor(e,t,r,i,a,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=gE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fL,this._maxUploadRetryTime=hL,this._requests=new Set,i!=null?this._bucket=ll.makeFromBucketSpec(i,this._host):this._bucket=S_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ll.makeFromBucketSpec(this._url,e):this._bucket=S_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if($o(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new xL(mE());{const o=NL(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const C_="@firebase/storage",I_="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="storage";function LL(n=rm(),e){n=Hr(n);const r=yf(n,vE).getImmediate({identifier:e}),i=bA("storage");return i&&ML(r,...i),r}function ML(n,e,t,r={}){kL(n,e,t,r)}function jL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new PL(t,r,i,e,dh)}function BL(){cl(new Ss(vE,jL,"PUBLIC").setMultipleInstances(!0)),wo(C_,I_,""),wo(C_,I_,"esm2017")}BL();const FL={apiKey:"AIzaSyD2okbjcvN3V4Qpd4deo59qZZNNRBIWX58",authDomain:"gmach-inventory-system.firebaseapp.com",projectId:"gmach-inventory-system",storageBucket:"gmach-inventory-system.appspot.com",messagingSenderId:"687472851540",appId:"1:687472851540:web:f846506cccaaefc1e74bc1",measurementId:"G-ZM8S3K7E2V"},Om=NA(FL);oL(Om);const l1=k9(Om),Pt=Nk(Om);LL(Om);const yE=fe.createContext(),xE=({children:n})=>{const[e,t]=fe.useState(null),[r,i]=fe.useState(!0);return fe.useEffect(()=>{const a=wN(l1,async s=>{if(s&&s.emailVerified){const c=await Sd(Er(Pt,"users",s.uid));if(c.exists()){const f=c.data();t({uid:s.uid,email:s.email,username:f.username,role:f.role})}}else t(null)});return(async()=>{const s=await Sd(Er(Pt,"settings","onlineOrdering"));if(s.exists()){const c=s.data();i(c.enabled===!0)}})(),()=>a()},[]),y.jsx(yE.Provider,{value:{user:e,setUser:t,onlineOrderingEnabled:r,setOnlineOrderingEnabled:i},children:n})},ou=()=>fe.useContext(yE),UL=()=>{const{user:n,setUser:e}=ou(),t=e5(),r=vf(),[i,a]=fe.useState(!1),[o,s]=fe.useState(null),[c,f]=fe.useState(null),[h,p]=fe.useState(!1);fe.useEffect(()=>{const Q=Er(Pt,"settings","onlineOrdering"),z=W8(Q,U=>{U.exists()&&s(U.data().enabled)},U=>{console.error("שגיאה בקבלת עדכונים בזמן אמת:",U)});return()=>z()},[]),fe.useEffect(()=>{const Q=()=>{f(window.innerWidth<=768)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]);const g=()=>{p(!0)},m=async()=>{try{await _N(l1),e(null),p(!1),t("/login")}catch(Q){alert("שגיאה בהתנתקות: "+Q.message)}},b=()=>{p(!1)},_=()=>{a(!1)},I=Q=>{switch(Q){case"MainAdmin":return"מנהל ראשי";case"GmachAdmin":return"מנהל גמח";default:return"משתמש"}},C=Q=>r.pathname===Q,N=Q=>({...Y,backgroundColor:C(Q)?"#0056b3":"transparent",color:C(Q)?"white":"#0056b3",borderRadius:C(Q)?"6px":"0",fontWeight:C(Q)?"600":"500",transition:"all 0.3s ease"}),j=()=>!n||n.role==="User";if(c===null)return null;const q={backgroundColor:"#f2f2f2",padding:"10px 0",direction:"rtl",borderBottom:"1px solid #ccc",position:"relative",zIndex:1e3},Y={padding:"12px 16px",textDecoration:"none",color:"#0056b3",fontWeight:"500",fontSize:"16px",display:"block"},H={position:"absolute",top:"10px",left:c?"20px":"auto",right:c?"auto":"20px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold",color:"#333"},P={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},E={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},R={position:"fixed",top:0,right:i?0:"-70%",height:"100%",width:"70%",backgroundColor:"#fff",boxShadow:"0 0 12px rgba(0,0,0,0.25)",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",transition:"right 0.3s ease",zIndex:1e3},L={display:"flex",justifyContent:"center",gap:"10px",padding:"10px 0"},T={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},k={backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",textAlign:"center",maxWidth:"300px",width:"90%"},B={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"},V={backgroundColor:"#6c757d",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"};return y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:q,children:[c&&y.jsx("button",{onClick:()=>a(!0),style:{fontSize:"24px",background:"none",border:"none",cursor:"pointer",padding:"0 1rem"},children:"☰"}),!c&&y.jsxs("div",{style:L,children:[y.jsx(On,{to:"/",style:N("/"),children:"דף הבית"}),y.jsx(On,{to:"/catalog",style:N("/catalog"),children:"קטלוג מוצרים"}),!n&&y.jsx(On,{to:"/borrowing-guidelines",style:N("/borrowing-guidelines"),children:"נוהל השאלה"}),(n==null?void 0:n.role)==="User"&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/my-orders",style:N("/my-orders"),children:"ההזמנות שלי"}),o&&y.jsx(On,{to:"/request",style:N("/request"),children:"בקשת השאלה"}),y.jsx(On,{to:"/borrowing-guidelines",style:N("/borrowing-guidelines"),children:"נוהל השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/new-loan",style:N("/new-loan"),children:"הזמנה חדשה"}),o&&y.jsx(On,{to:"/requests",style:N("/requests"),children:"בקשות להזמנה"}),y.jsx(On,{to:"/Calendar",style:N("/Calendar"),children:"השאלות פתוחות"}),y.jsx(On,{to:"/history",style:N("/history"),children:"היסטוריית השאלות"})]}),(n==null?void 0:n.role)==="MainAdmin"&&y.jsx(On,{to:"/manage-product",style:N("/manage-product"),children:"ניהול מוצרים"}),(n==null?void 0:n.role)==="MainAdmin"&&y.jsx(On,{to:"/manage-users",style:N("/manage-users"),children:"ניהול משתמשים"}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&y.jsx(On,{to:"/borrowing-guidelines",style:N("/borrowing-guidelines"),children:"נוהל השאלה"}),j()&&y.jsx(On,{to:"/donations",style:N("/donations"),children:"לתרומות"}),!n&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/login",style:{...N("/login"),marginRight:"20px",backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600"},children:"התחברות"}),y.jsx(On,{to:"/register",style:{...N("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600"},children:"הרשמה"})]})]}),i&&c&&y.jsxs(y.Fragment,{children:[y.jsx("div",{style:E,onClick:_}),y.jsxs("div",{style:R,children:[y.jsx(On,{to:"/",style:N("/"),onClick:_,children:"דף הבית"}),y.jsx(On,{to:"/catalog",style:N("/catalog"),onClick:_,children:"קטלוג מוצרים"}),!n&&y.jsx(On,{to:"/borrowing-guidelines",style:N("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"}),(n==null?void 0:n.role)==="User"&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/my-orders",style:N("/my-orders"),onClick:_,children:"ההזמנות שלי"}),o&&y.jsx(On,{to:"/request",style:N("/request"),onClick:_,children:"בקשת השאלה"}),y.jsx(On,{to:"/borrowing-guidelines",style:N("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&y.jsxs(y.Fragment,{children:[y.jsx(On,{to:"/new-loan",style:N("/new-loan"),onClick:_,children:"הזמנה חדשה"}),o&&y.jsx(On,{to:"/requests",style:N("/requests"),onClick:_,children:"בקשות להזמנה"}),y.jsx(On,{to:"/Calendar",style:N("/Calendar"),onClick:_,children:"השאלות פתוחות"}),y.jsx(On,{to:"/history",style:N("/history"),onClick:_,children:"היסטוריית השאלות"})]}),(n==null?void 0:n.role)==="MainAdmin"&&y.jsx(On,{to:"/manage-product",style:N("/manage-product"),onClick:_,children:"ניהול מוצרים"}),(n==null?void 0:n.role)==="MainAdmin"&&y.jsx(On,{to:"/manage-users",style:N("/manage-users"),onClick:_,children:"ניהול משתמשים"}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&y.jsx(On,{to:"/borrowing-guidelines",style:N("/borrowing-guidelines"),onClick:_,children:"נוהל השאלה"}),j()&&y.jsx(On,{to:"/donations",style:N("/donations"),onClick:_,children:"לתרומות"}),!n&&y.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:[y.jsx(On,{to:"/login",style:{...N("/login"),backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600",textAlign:"center",marginBottom:"10px"},onClick:_,children:"התחברות"}),y.jsx(On,{to:"/register",style:{...N("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600",textAlign:"center"},onClick:_,children:"הרשמה"})]})]})]}),n&&y.jsxs("div",{style:H,children:["שלום ",n.username," (",I(n.role),")",y.jsx("button",{style:P,onClick:g,children:"התנתק"})]})]}),h&&y.jsx("div",{style:T,children:y.jsxs("div",{style:k,children:[y.jsx("h3",{style:{marginBottom:"15px",color:"#333"},children:"אישור התנתקות"}),y.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"האם אתה בטוח שברצונך להתנתק?"}),y.jsxs("div",{children:[y.jsx("button",{style:B,onClick:m,children:"כן, התנתק"}),y.jsx("button",{style:V,onClick:b,children:"ביטול"})]})]})})]})},zL="/assets/GmachPic-D1t0vS9u.jpeg",VL=()=>{const{user:n}=ou(),e={position:"relative",padding:"2rem",textAlign:"center",direction:"rtl",maxWidth:"1000px",margin:"0 auto",fontFamily:'"Assistant", "Heebo", "Segoe UI", "Helvetica Neue", Arial, sans-serif',zIndex:1},t={fontSize:"clamp(28px, 4vw, 40px)",fontWeight:"800",marginBottom:"1.5rem",color:"#1a365d",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',textShadow:"0 2px 4px rgba(0,0,0,0.1)",letterSpacing:"0.5px"},r={maxWidth:"800px",margin:"0 auto",fontSize:"clamp(17px, 2.5vw, 22px)",lineHeight:"1.6",color:"#2d3748",textAlign:"justify",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontWeight:"500",textShadow:"0 1px 2px rgba(0,0,0,0.05)"},i={display:"flex",justifyContent:"center",marginTop:"2rem",padding:"0 1rem"},a={width:"100%",maxWidth:"600px",minHeight:"250px",aspectRatio:"16/10",border:"3px solid #e2e8f0",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},o={marginTop:"2.5rem",fontSize:"clamp(20px, 3vw, 26px)",fontWeight:"700",color:"#1a365d",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif'},s={marginTop:"0.8rem",fontSize:"clamp(16px, 2vw, 20px)",fontWeight:"600"},c={position:"fixed",bottom:"20px",left:"20px",backgroundColor:"white",color:"#1f2937",padding:"24px",borderRadius:"16px",fontWeight:"600",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",border:"3px solid #e5e7eb",zIndex:1e3,fontSize:"16px",maxWidth:"calc(50% - 40px)",minWidth:"300px",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif'};return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;500;600;700;800&family=Heebo:wght@400;500;600;700;800&display=swap');
      `}),y.jsxs("div",{style:e,children:[y.jsx("h2",{style:t,children:'ברוכים הבאים לגמ"ח שמחת זקנתי'}),y.jsx("img",{src:zL,alt:'תמונה של גמ"ח',style:{width:"65%",height:"auto",borderRadius:"16px",marginBottom:"2rem",maxWidth:"600px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)",border:"3px solid #e2e8f0"}}),y.jsxs("div",{style:r,children:['גמ"ח שמחת זקנתי הוא גמ"ח ארועים הפועל משנת 2013.',y.jsx("br",{}),'הגמ"ח מציע השאלת ציוד לאירועים, כולל מפות קטיפה במגוון צבעים, עיצובי שולחן, עיצובים למזנונים ועוד.',y.jsx("br",{}),'הגמ"ח הוקם לעילוי נשמת סבה וסבתה של ענבר, יוזמת ומנהלת הגמ"ח, אברהם ואסתר ליבן ז"ל, ממקימי קיבוץ חפץ חיים.',y.jsx("br",{}),'הגמ"ח משרת את תושבי המועצה האזורית נחל שורק כמו גם יישובים מרוחקים יותר כמו אלומה, אשדוד, ניצן, מזכרת בתיה, יבנה ועוד.',y.jsx("br",{}),'הגמ"ח זוכה לתמיכה קבועה של הנהלת קיבוץ חפץ חיים והמועצה האזורית נחל שורק שרואים בגמ"ח יוזמה ברוכה של חסד ועזרה לזולת ובעלת חשיבות קהילתית מרובה.',y.jsx("br",{}),'הגמ"ח מופעל ע"י צוות מתנדבות מסור, דורש תחזוקה שוטפת- ניקוי, סידור, רכישת ציוד וחידוש המלאי באופן קבוע.',y.jsx("br",{}),'הגמ"ח משרת עשרות ארועים מידי חודש, ונשען על תרומות המשתמשים בלבד. נשמח אם תהיו שותפים.',y.jsx("br",{}),"פרטים בדף התרומות.",y.jsx("br",{}),y.jsx("strong",{style:{fontSize:"1.1em"},children:"נתראה בשמחות!"})]}),y.jsxs("div",{style:o,children:[y.jsx("h3",{children:"📍 מיקום והגעה"}),y.jsx("div",{style:{fontSize:"clamp(18px, 2.8vw, 24px)",fontWeight:"600",color:"#4a5568",marginTop:"0.5rem",marginBottom:"0.5rem"},children:"קיבוץ חפץ חיים"}),y.jsxs("div",{style:s,children:[y.jsx("a",{href:"https://maps.app.goo.gl/zHkUGZDnGVsUrBCB6",target:"_blank",rel:"noopener noreferrer",style:{color:"#2b6cb0",textDecoration:"none",borderBottom:"2px solid transparent",transition:"border-bottom 0.3s ease"},children:"Google Maps"})," |"," ",y.jsx("a",{href:"https://waze.com/ul?ll=31.775887,34.703164",target:"_blank",rel:"noopener noreferrer",style:{color:"#2b6cb0",textDecoration:"none",borderBottom:"2px solid transparent",transition:"border-bottom 0.3s ease"},children:"Waze"})]})]}),y.jsx("div",{style:i,children:y.jsx("iframe",{src:"https://www.google.com/maps?q=31.7889462,34.79986&output=embed",width:"100%",height:"100%",style:a,allowFullScreen:"",loading:"lazy",title:'מיקום גמ"ח'})}),y.jsxs("div",{style:c,children:[y.jsx("div",{style:{fontSize:"18px",fontWeight:"800",marginBottom:"14px",color:"#1f2937",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:"🕐 שעות פתיחה"}),y.jsxs("div",{style:{lineHeight:"1.7"},children:[y.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:[y.jsx("div",{style:{fontWeight:"700",color:"#374151",marginBottom:"6px",fontSize:"16px"},children:"ימים רגילים"}),y.jsx("div",{style:{color:"#6b7280",fontSize:"15px",marginBottom:"4px"},children:"ראשון, רביעי, חמישי"}),y.jsx("div",{style:{fontWeight:"700",color:"#059669",fontSize:"16px"},children:"21:00 - 20:30"})]}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:"700",color:"#374151",marginBottom:"6px",fontSize:"16px"},children:"מוצאי שבת"}),y.jsxs("div",{style:{fontSize:"15px",marginBottom:"4px"},children:[y.jsx("span",{style:{color:"#dc2626",fontWeight:"700"},children:"קיץ:"}),y.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"21:30 - 21:00"})]}),y.jsxs("div",{style:{fontSize:"15px"},children:[y.jsx("span",{style:{color:"#2563eb",fontWeight:"700"},children:"חורף:"}),y.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"20:30 - 20:00"})]})]})]})]})]}),y.jsx("style",{children:`
        @media (max-width: 768px) {
          [style*="position: fixed"][style*="bottom: 20px"] {
            position: static !important;
            margin: 1rem auto !important;
            maxWidth: 100% !important;
            minWidth: auto !important;
            display: block !important;
          }
        }
      `})]})},qL=()=>{const[n,e]=fe.useState(""),[t,r]=fe.useState(""),[i,a]=fe.useState(""),{setUser:o}=ou(),s=e5(),c=async()=>{if(!n||!n.includes("@")){a("יש להזין אימייל תקין לשחזור סיסמה");return}try{await gN(l1,n),a("קישור לאיפוס סיסמה נשלח לאימייל")}catch(p){a("שגיאה בשליחת קישור לאיפוס סיסמה: "+p.message)}},f=async p=>{p.preventDefault(),a("");let g=n;if(!n.includes("@"))try{const m=ec(An(Pt,"users"),ic("username","==",n)),b=await sr(m);if(!b.empty)g=b.docs[0].data().email;else{a("שם משתמש לא נמצא");return}}catch{a("שגיאה באחזור אימייל לפי שם משתמש");return}try{const b=(await vN(l1,g,t)).user;if(!b.emailVerified){a("נא לאמת את כתובת האימייל לפני ההתחברות");return}const _=Er(Pt,"users",b.uid),I=await Sd(_);if(I.exists()){const C=I.data();o({uid:b.uid,email:b.email,username:C.username,role:C.role}),s("/")}else a("לא נמצאו נתוני משתמש במסד הנתונים")}catch(m){switch(m.code){case"auth/invalid-credential":case"auth/wrong-password":a("סיסמה שגויה");break;case"auth/user-not-found":a("המשתמש לא נמצא");break;default:a("שגיאה: "+m.message)}}},h={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"#f2f2f2"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return y.jsx("div",{style:h.container,children:y.jsxs("form",{onSubmit:f,style:h.form,children:[y.jsx("h2",{style:h.title,children:"התחברות"}),y.jsx("input",{type:"text",placeholder:"שם משתמש או אימייל",value:n,onChange:p=>e(p.target.value),style:h.input,required:!0}),y.jsx("input",{type:"password",placeholder:"סיסמה",value:t,onChange:p=>r(p.target.value),style:h.input,required:!0}),i&&y.jsx("div",{style:h.error,children:i}),y.jsx("button",{type:"submit",style:h.button,children:"התחבר"}),y.jsx("button",{type:"button",onClick:c,style:{marginTop:"0.5rem",backgroundColor:"transparent",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"שכחת סיסמה?"})]})})},HL=()=>{const[n,e]=fe.useState(""),[t,r]=fe.useState(""),[i,a]=fe.useState(""),[o,s]=fe.useState(""),c=p=>p.length>=8&&/[a-zA-Z]/.test(p),f=async p=>{if(p.preventDefault(),!c(i)){s("הסיסמה חייבת להכיל לפחות 8 תווים ולפחות אות אחת באנגלית A-Z / a-z");return}try{const m=(await mN(l1,n,i)).user;await tx(Er(Pt,"users",m.uid),{email:n,username:t,role:"User"}),await yN(m),alert("נרשמת בהצלחה! נשלח אליך מייל לאימות.")}catch(g){s(g.message)}},h={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"#f2f2f2"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return y.jsx("div",{style:h.container,children:y.jsxs("form",{onSubmit:f,style:h.form,children:[y.jsx("h2",{style:h.title,children:"הרשמה"}),y.jsx("input",{type:"text",placeholder:"שם משתמש",value:t,onChange:p=>r(p.target.value),style:h.input,required:!0}),y.jsx("input",{type:"email",placeholder:"אימייל",value:n,onChange:p=>e(p.target.value),style:h.input,required:!0}),y.jsx("input",{type:"password",placeholder:"סיסמה",value:i,onChange:p=>a(p.target.value),style:h.input,required:!0}),o&&y.jsx("div",{style:h.error,children:o}),y.jsx("button",{type:"submit",style:h.button,children:"הרשם"})]})})},WL=({form:n,errors:e,handleChange:t,handleConfirm:r,handleClear:i,setShowCatalogPopup:a,saving:o,isLoadingClientData:s=!1})=>{const c=[{label:"מספר פלאפון",name:"phone",required:!0},{label:"שם מתנדבת",name:"volunteerName",required:!0},{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return y.jsxs("div",{className:"loan-form-box",children:[y.jsx("h2",{style:{textAlign:"center"},children:"הזמנה חדשה"}),c.map(({label:f,name:h,type:p="text",required:g})=>y.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[y.jsxs("label",{htmlFor:h,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[f,g&&" *",s&&(h==="clientName"||h==="address"||h==="email")&&y.jsx("span",{style:{marginRight:"0.5rem",color:"#2196f3"},children:"⏳"})]}),y.jsxs("div",{style:{position:"relative"},children:[y.jsx("input",{id:h,type:p,name:h,value:n[h],onChange:t,disabled:s&&(h==="clientName"||h==="address"||h==="email"),min:p==="date"?h==="pickupDate"?new Date().toISOString().split("T")[0]:h==="eventDate"||h==="returnDate"?n.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:e[h]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:s&&(h==="clientName"||h==="address"||h==="email")?"#f5f5f5":"white",opacity:s&&(h==="clientName"||h==="address"||h==="email")?.7:1},placeholder:s&&(h==="clientName"||h==="address"||h==="email")?"טוען...":""}),s&&h==="phone"&&y.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#2196f3"},children:y.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e3f2fd",borderTop:"2px solid #2196f3",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),e[h]&&y.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:e[h]})]},h)),y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:y.jsx("button",{className:"btn btn-blue",onClick:()=>a(!0),children:"בחירת מוצרים"})}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[y.jsx("button",{className:"btn btn-green",onClick:r,disabled:o||s,children:o?"שומר...":"אישור הזמנה"}),y.jsx("button",{className:"btn btn-red",onClick:i,disabled:o||s,children:"ביטול הזמנה"})]}),y.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: translateY(-50%) rotate(0deg); }
          100% { transform: translateY(-50%) rotate(360deg); }
        }
      `})]})};function GL(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function $L(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var YL=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XL=function(n){YL(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),GL(a,i.prototype),$L(a),a}return e}(Error),KL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Eo=function(n){KL(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(XL),QL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nl=function(n){QL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Eo),ZL=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bt=function(n){ZL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Eo),JL=function(){function n(e){if(this.binarizer=e,e===null)throw new Bt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),eM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qi=function(n){eM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Eo),tM=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Ar=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),nM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sx=function(n){nM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Eo),rM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),T_=function(n){rM(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(sx),iM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Li=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Bt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new T_(t);if(r>e)throw new T_(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=iM(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Ar.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=r(t,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),gn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Zi=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Ar.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var s=i*32+gn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var s=i*32+gn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Bt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var s=o>r?0:e&31,c=o<i?31:t&31,f=(2<<c)-(1<<s);a[o]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Bt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,s=i;s<=a;s++){var c=s>i?0:e&31,f=s<a?31:t&31,h=(2<<f)-(1<<c)&4294967295;if((o[s]&h)!==(r?h:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Bt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Bt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var s=r*32-this.size,c=e[0]>>>s,a=1;a<r;a++){var f=e[a];c|=f<<32-s,e[a-1]=c,c=f>>>s}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Li.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Li.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),by;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(by||(by={}));const Mr=by;var aM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mt=function(n){aM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Eo),oM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ar;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(ar||(ar={}));var Pi=function(){function n(e,t,r){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,h=c.length;f!==h;f++){var p=c[f];n.VALUES_TO_ECI.set(p,this)}try{for(var g=oM(o),m=g.next();!m.done;m=g.next()){var b=m.value;n.NAME_TO_ECI.set(b,this)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new mt("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new mt("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new mt("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(ar.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(ar.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(ar.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(ar.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(ar.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(ar.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(ar.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(ar.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(ar.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(ar.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(ar.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(ar.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(ar.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(ar.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(ar.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(ar.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(ar.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(ar.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(ar.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(ar.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(ar.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(ar.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(ar.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(ar.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(ar.Big5,28,"Big5"),n.GB18030=new n(ar.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(ar.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),sM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),og=function(n){sM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Eo),As=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Pi?e:Pi.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(r.equals(Pi.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new og("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Pi.UTF8)||e.equals(Pi.ISO8859_1)||e.equals(Pi.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),kn=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return As.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Mr.CHARACTER_SET)!==void 0)return t.get(Mr.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,s=0,c=0,f=0,h=0,p=0,g=0,m=0,b=0,_=0,I=0,C=0,N=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,j=0;j<r&&(i||a||o);j++){var q=e[j]&255;o&&(s>0?(q&128)===0?o=!1:s--:(q&128)!==0&&((q&64)===0?o=!1:(s++,(q&32)===0?c++:(s++,(q&16)===0?f++:(s++,(q&8)===0?h++:o=!1))))),i&&(q>127&&q<160?i=!1:q>159&&(q<192||q===215||q===247)&&C++),a&&(p>0?q<64||q===127||q>252?a=!1:p--:q===128||q===160||q>239?a=!1:q>160&&q<224?(g++,b=0,m++,m>_&&(_=m)):q>127?(p++,m=0,b++,b>I&&(I=b)):(m=0,b=0))}return o&&s>0&&(o=!1),a&&p>0&&(a=!1),o&&(N||c+f+h>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||_>=3||I>=3)?n.SHIFT_JIS:i&&a?_===2&&g===2||C*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(s,c,f,h,p,g){if(s==="%%")return"%";if(t[++i]!==void 0){s=h?parseInt(h.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,b;switch(g){case"s":b=t[i];break;case"c":b=t[i][0];break;case"f":b=parseFloat(t[i]).toFixed(s);break;case"p":b=parseFloat(t[i]).toPrecision(s);break;case"e":b=parseFloat(t[i]).toExponential(s);break;case"x":b=parseInt(t[i]).toString(m||16);break;case"d":b=parseFloat(parseInt(t[i],m||10).toPrecision(s)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(m);for(var _=parseInt(f),I=f&&f[0]+""=="0"?"0":" ";b.length<_;)b=c!==void 0?b+I:I+b;return b}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return As.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Pi.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Pi.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Pi.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),un=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=kn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),oc=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Bt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],s=0;s<r;s++)o[s]&&i.set(s,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Bt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Bt("row lengths do not match");o=a,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new Bt("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Bt("row lengths do not match");c++}for(var h=new n(s,c),p=0;p<a;p++)i[p]&&h.set(Math.floor(p%s),Math.floor(p/s));return h},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Bt("input matrix dimensions do not match");for(var t=new Zi(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*r,c=e.getRow(a,t).getBitArray(),f=0;f<r;f++)i[s+f]^=c[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Bt("Left and top must be nonnegative");if(i<1||r<1)throw new Bt("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Bt("The region must fit inside the matrix");for(var s=this.rowSize,c=this.bits,f=t;f<o;f++)for(var h=f*s,p=e;p<a;p++)c[h+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Zi(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Ar.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Zi(e),i=new Zi(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,s=-1,c=-1,f=0;f<t;f++)for(var h=0;h<r;h++){var p=i[f*r+h];if(p!==0){if(f<o&&(o=f),f>c&&(c=f),h*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;h*32+g<a&&(a=h*32+g)}if(h*32+31>s){for(var g=31;!(p>>>g);)g--;h*32+g>s&&(s=h*32+g)}}}return s<a||c<o?null:Int32Array.from([a,o,s-a+1,c-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],s=0;(o<<31-s&4294967295)===0;)s++;return a+=s,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Li.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Li.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new un,a=0,o=this.height;a<o;a++){for(var s=0,c=this.width;s<c;s++)i.append(this.get(s,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),lM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),He=function(n){lM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Eo),cM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uM=function(n){cM(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Zi(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),s=this.buckets,c=0;c<a;c++)s[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<f&&r.set(c);else for(var h=o[0]&255,p=o[1]&255,c=1;c<a-1;c++){var g=o[c+1]&255;(p*4-h-g)/2<f&&r.set(c),h=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new oc(r,i);this.initArrays(r);for(var o=this.buckets,s=1;s<5;s++)for(var c=Math.floor(i*s/5),f=t.getRow(c,this.luminances),h=Math.floor(r*4/5),p=Math.floor(r/5);p<h;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(o),b=t.getMatrix(),s=0;s<i;s++)for(var _=s*r,p=0;p<r;p++){var g=b[_+p]&255;g<m&&a.set(p,s)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,s=0;s<r;s++)t[s]>o&&(a=s,o=t[s]),t[s]>i&&(i=t[s]);for(var c=0,f=0,s=0;s<r;s++){var h=s-a,p=t[s]*h*h;p>f&&(c=s,f=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new He;for(var m=c-1,b=-1,s=c-1;s>a;s--){var _=s-a,p=_*_*(c-s)*(i-t[s]);p>b&&(m=s,b=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(tM),fM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hM=function(n){fM(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var c=e.calculateBlackPoints(a,o,s,r,i),f=new oc(r,i);e.calculateThresholdForBlock(a,o,s,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,s,c){for(var f=o-e.BLOCK_SIZE,h=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var m=e.cap(p,2,i-3),b=0;b<r;b++){var _=b<<e.BLOCK_SIZE_POWER;_>h&&(_=h);for(var I=e.cap(b,2,r-3),C=0,N=-2;N<=2;N++){var j=s[m+N];C+=j[I-2]+j[I-1]+j[I]+j[I+1]+j[I+2]}var q=C/25;e.thresholdBlock(t,_,g,q,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,s){for(var c=0,f=i*o+r;c<e.BLOCK_SIZE;c++,f+=o)for(var h=0;h<e.BLOCK_SIZE;h++)(t[f+h]&255)<=a&&s.set(r+h,i+c)},e.calculateBlackPoints=function(t,r,i,a,o){for(var s=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=new Array(i),h=0;h<i;h++){f[h]=new Int32Array(r);var p=h<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var b=0,_=255,I=0,C=0,N=p*a+m;C<e.BLOCK_SIZE;C++,N+=a){for(var j=0;j<e.BLOCK_SIZE;j++){var q=t[N+j]&255;b+=q,q<_&&(_=q),q>I&&(I=q)}if(I-_>e.MIN_DYNAMIC_RANGE)for(C++,N+=a;C<e.BLOCK_SIZE;C++,N+=a)for(var j=0;j<e.BLOCK_SIZE;j++)b+=t[N+j]&255}var Y=b>>e.BLOCK_SIZE_POWER*2;if(I-_<=e.MIN_DYNAMIC_RANGE&&(Y=_/2,h>0&&g>0)){var H=(f[h-1][g]+2*f[h][g-1]+f[h-1][g-1])/4;_<H&&(Y=H)}f[h][g]=Y}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(uM),km=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new og("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new og("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new og("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new un,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},n}(),dM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lx=function(n){dM(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(km),pM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gM=function(n){pM(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,c=0,f=t.length;s<f;s+=4,c++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var g=t[s],m=t[s+1],b=t[s+2];h=306*g+601*m+117*b+512>>10}o[c]=h}else for(var s=0,c=0,_=t.length;s<_;s+=4,c++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var g=t[s],m=t[s+1],b=t[s+2];h=306*g+601*m+117*b+512>>10}o[c]=255-h}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new lx(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(km),mM=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),$a=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(h){try{f(r.next(h))}catch(p){o(p)}}function c(h){try{f(r.throw(h))}catch(p){o(p)}}function f(h){h.done?a(h.value):i(h.value).then(s,c)}f((r=r.apply(n,e||[])).next())})},Ya=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},vM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ld=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return $a(this,void 0,void 0,function(){var e,t,r,i,a,o,s,c,f,h,p,g;return Ya(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=vM(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),f=a.groupId,h={deviceId:s,label:c,kind:o,groupId:f},t.push(h))}catch(b){p={error:b}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return $a(this,void 0,void 0,function(){var e;return Ya(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new mM(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return $a(this,void 0,void 0,function(){var t;return Ya(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return $a(this,void 0,void 0,function(){return Ya(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return $a(this,void 0,void 0,function(){var r,i;return Ya(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return $a(this,void 0,void 0,function(){var r;return Ya(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return $a(this,void 0,void 0,function(){var r,i;return Ya(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return $a(this,void 0,void 0,function(){return Ya(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return $a(this,void 0,void 0,function(){var i,a;return Ya(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return $a(this,void 0,void 0,function(){var i;return Ya(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return $a(this,void 0,void 0,function(){var i;return Ya(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return $a(this,void 0,void 0,function(){var r;return Ya(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return $a(this,void 0,void 0,function(){return Ya(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new nl("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new nl("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new nl("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new nl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new nl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new nl("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new nl("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new nl("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new nl("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new nl("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return $a(this,void 0,void 0,function(){return Ya(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return $a(this,void 0,void 0,function(){return Ya(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new He("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(g){var f=t&&g instanceof He,h=g instanceof Qi||g instanceof mt,p=h&&r;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(g)}};return new Promise(function(o,s){return a(o,s)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var o=c instanceof Qi||c instanceof mt,s=c instanceof He;(o||s)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new gM(r,t),a=new hM(i);return new JL(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),Fa=function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Ar.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Ar.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Ar.arraycopy(t,0,r,0,t.length),Ar.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),wy;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(wy||(wy={}));const jt=wy;var _y;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_y||(_y={}));const ha=_y;var Pm=function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),B0=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Bt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),of=function(){function n(e,t){if(t.length===0)throw new Bt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ar.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=B0.addOrSubtract(r,o)}return r}r=t[0];for(var s=t.length,c=this.field,i=1;i<s;i++)r=B0.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Ar.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=B0.addOrSubtract(t[s-o],r[s]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=this.field,c=0;c<r;c++)for(var f=t[c],h=0;h<a;h++)o[c+h]=B0.addOrSubtract(o[c+h],s.multiply(f,i[h]));return new n(s,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Bt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(r[s],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Bt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,c),h=t.buildMonomial(s,c);r=r.addOrSubtract(h),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),yM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bE=function(n){yM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Eo),xM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bo=function(n){xM(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),s=1,c=0;c<r;c++)o[c]=s,s*=2,s>=r&&(s^=t,s&=r-1);a.expTable=o;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[o[c]]=c;return a.logTable=f,a.zero=new of(a,Int32Array.from([0])),a.one=new of(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Bt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new of(this,i)},e.prototype.inverse=function(t){if(t===0)throw new bE;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+gn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(B0),bM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fp=function(n){bM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Eo),wM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),I1=function(n){wM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Eo),Lm=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new of(r,e),a=new Int32Array(t),o=!0,s=0;s<t;s++){var c=i.evaluateAt(r.exp(s+r.getGeneratorBase()));a[a.length-1-s]=c,c!==0&&(o=!1)}if(!o)for(var f=new of(r,a),h=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=h[0],g=h[1],m=this.findErrorLocations(p),b=this.findErrorMagnitudes(g,m),s=0;s<m.length;s++){var _=e.length-1-r.log(m[s]);if(_<0)throw new Fp("Bad error location");e[_]=bo.addOrSubtract(e[_],b[s])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,s=t,c=a.getZero(),f=a.getOne();s.getDegree()>=(r/2|0);){var h=o,p=c;if(o=s,c=f,o.isZero())throw new Fp("r_{i-1} was zero");s=h;for(var g=a.getZero(),m=o.getCoefficient(o.getDegree()),b=a.inverse(m);s.getDegree()>=o.getDegree()&&!s.isZero();){var _=s.getDegree()-o.getDegree(),I=a.multiply(s.getCoefficient(s.getDegree()),b);g=g.addOrSubtract(a.buildMonomial(_,I)),s=s.addOrSubtract(o.multiplyByMonomial(_,I))}if(f=g.multiply(c).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new I1("Division algorithm failed to reduce polynomial?")}var C=f.getCoefficient(0);if(C===0)throw new Fp("sigmaTilde(0) was zero");var N=a.inverse(C),j=f.multiplyScalar(N),q=s.multiplyScalar(N);return[j,q]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new Fp("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var s=a.inverse(t[o]),c=1,f=0;f<r;f++)if(o!==f){var h=a.multiply(t[f],s),p=(h&1)===0?h|1:h&-2;c=a.multiply(c,p)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},n}(),sa;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(sa||(sa={}));var R_=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),s=new Pm(a,o,null,null);return s.setNumBits(i.length),s},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=sa.UPPER,i=sa.UPPER,a="",o=0;o<t;)if(i===sa.BINARY){if(t-o<5)break;var s=n.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=n.readCode(e,o,11)+31,o+=11}for(var c=0;c<s;c++){if(t-o<8){o=t;break}var f=n.readCode(e,o,8);a+=kn.castAsNonUtf8Char(f),o+=8}i=r}else{var h=i===sa.DIGIT?4:5;if(t-o<h)break;var f=n.readCode(e,o,h);o+=h;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return sa.LOWER;case"P":return sa.PUNCT;case"M":return sa.MIXED;case"D":return sa.DIGIT;case"B":return sa.BINARY;case"U":default:return sa.UPPER}},n.getCharacter=function(e,t){switch(e){case sa.UPPER:return n.UPPER_TABLE[t];case sa.LOWER:return n.LOWER_TABLE[t];case sa.MIXED:return n.MIXED_TABLE[t];case sa.PUNCT:return n.PUNCT_TABLE[t];case sa.DIGIT:return n.DIGIT_TABLE[t];default:throw new I1("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=bo.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=bo.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=bo.AZTEC_DATA_10):(r=12,t=bo.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new mt;for(var o=e.length%r,s=new Int32Array(a),c=0;c<a;c++,o+=r)s[c]=n.readCode(e,o,r);try{var f=new Lm(t);f.decode(s,a-i)}catch(I){throw new mt(I)}for(var h=(1<<r)-1,p=0,c=0;c<i;c++){var g=s[c];if(g===0||g===h)throw new mt;(g===1||g===h-1)&&p++}for(var m=new Array(i*r-p),b=0,c=0;c<i;c++){var g=s[c];if(g===1||g===h-1)m.fill(g>1,b,b+r-1),b+=r-1;else for(var _=r-1;_>=0;--_)m[b++]=(g&1<<_)!==0}return m},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var s=0;s<a.length;s++)a[s]=s;else for(var c=i+1+2*gn.truncDivision(gn.truncDivision(i,2)-1,15),f=i/2,h=gn.truncDivision(c,2),s=0;s<f;s++){var p=s+gn.truncDivision(s,15);a[f-s-1]=h-p-1,a[f+s]=h+p+1}for(var s=0,g=0;s<r;s++){for(var m=(r-s)*4+(t?9:12),b=s*2,_=i-1-b,I=0;I<m;I++)for(var C=I*2,N=0;N<2;N++)o[g+C+N]=e.get(a[b+N],a[b+I]),o[g+2*m+C+N]=e.get(a[b+I],a[_-N]),o[g+4*m+C+N]=e.get(a[_-N],a[_-I]),o[g+6*m+C+N]=e.get(a[_-I],a[b+N]);g+=m*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Wn=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),Ay=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Rt=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*Ay.floatToIntBits(this.x)+Ay.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(r>=t&&r>=i?(o=e[0],a=e[1],s=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var c=a;a=s,s=c}e[0]=a,e[1]=o,e[2]=s},n.distance=function(e,t){return Wn.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),cx=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),_M=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AM=function(n){_M(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(cx),Ey=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new He}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,c=!1,f=!1,h=!1,p=!1,g=this.width,m=this.height;o;){o=!1;for(var b=!0;(b||!c)&&t<g;)b=this.containsBlackPoint(r,i,t,!1),b?(t++,o=!0,c=!0):c||t++;if(t>=g){a=!0;break}for(var _=!0;(_||!f)&&i<m;)_=this.containsBlackPoint(e,t,i,!0),_?(i++,o=!0,f=!0):f||i++;if(i>=m){a=!0;break}for(var I=!0;(I||!h)&&e>=0;)I=this.containsBlackPoint(r,i,e,!1),I?(e--,o=!0,h=!0):h||e--;if(e<0){a=!0;break}for(var C=!0;(C||!p)&&r>=0;)C=this.containsBlackPoint(e,t,r,!0),C?(r--,o=!0,p=!0):p||r--;if(r<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var N=t-e,j=null,q=1;j===null&&q<N;q++)j=this.getBlackPointOnSegment(e,i-q,e+q,i);if(j==null)throw new He;for(var Y=null,q=1;Y===null&&q<N;q++)Y=this.getBlackPointOnSegment(e,r+q,e+q,r);if(Y==null)throw new He;for(var H=null,q=1;H===null&&q<N;q++)H=this.getBlackPointOnSegment(t,r+q,t-q,r);if(H==null)throw new He;for(var P=null,q=1;P===null&&q<N;q++)P=this.getBlackPointOnSegment(t,i-q,t-q,i);if(P==null)throw new He;return this.centerEdges(P,j,H,Y)}else throw new He},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=Wn.round(Wn.distance(e,t,r,i)),o=(r-e)/a,s=(i-t)/a,c=this.image,f=0;f<a;f++){var h=Wn.round(e+f*o),p=Wn.round(t+f*s);if(c.get(h,p))return new Rt(h,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),s=t.getX(),c=t.getY(),f=r.getX(),h=r.getY(),p=i.getX(),g=i.getY(),m=n.CORR;return a<this.width/2?[new Rt(p-m,g+m),new Rt(s+m,c+m),new Rt(f-m,h-m),new Rt(a+m,o-m)]:[new Rt(p+m,g+m),new Rt(s+m,c-m),new Rt(f-m,h+m),new Rt(a-m,o-m)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var s=e;s<=t;s++)if(a.get(r,s))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),N_=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>r||c<-1||c>i)throw new He;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>r||c<-1||c>i)throw new He;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}},n}(),wE=function(){function n(e,t,r,i,a,o,s,c,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,s,c,f,h,p,g,m,b,_,I){var C=n.quadrilateralToSquare(e,t,r,i,a,o,s,c),N=n.squareToQuadrilateral(f,h,p,g,m,b,_,I);return N.times(C)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,h=this.a32,p=this.a33,g=0;g<t;g+=2){var m=e[g],b=e[g+1],_=a*m+c*b+p;e[g]=(r*m+o*b+f)/_,e[g+1]=(i*m+s*b+h)/_}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,h=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var b=e[m],_=t[m],I=a*b+c*_+p;e[m]=(r*b+o*_+f)/I,t[m]=(i*b+s*_+h)/I}},n.squareToQuadrilateral=function(e,t,r,i,a,o,s,c){var f=e-r+a-s,h=t-i+o-c;if(f===0&&h===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var p=r-a,g=s-a,m=i-o,b=c-o,_=p*b-g*m,I=(f*b-g*h)/_,C=(p*h-f*m)/_;return new n(r-e+I*r,s-e+C*s,e,i-t+I*i,c-t+C*c,t,I,C,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,s,c){return n.squareToQuadrilateral(e,t,r,i,a,o,s,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),EM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SM=function(n){EM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,s,c,f,h,p,g,m,b,_,I,C,N,j,q){var Y=wE.quadrilateralToQuadrilateral(a,o,s,c,f,h,p,g,m,b,_,I,C,N,j,q);return this.sampleGridWithTransform(t,r,i,Y)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new He;for(var o=new oc(r,i),s=new Float32Array(2*r),c=0;c<i;c++){for(var f=s.length,h=c+.5,p=0;p<f;p+=2)s[p]=p/2+.5,s[p+1]=h;a.transformPoints(s),N_.checkAndNudgePoints(t,s);try{for(var p=0;p<f;p+=2)t.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,c)}catch{throw new He}}return o},e}(N_),ux=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new SM,n}(),mo=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Rt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),CM=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new AM(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new He;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,s){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(gn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new He},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),s=r-1;s>=0;--s)o[s]=e&15,e>>=4;try{var c=new Lm(bo.AZTEC_PARAM);c.decode(o,a)}catch{throw new He}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),c=this.getFirstDifferent(r,o,1,1),f=this.getFirstDifferent(i,o,-1,1),h=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(h,s)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,c,f,h))break}t=s,r=c,i=f,a=h,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new He;this.compact=this.nbCenterLayers===5;var g=new Rt(t.getX()+.5,t.getY()-.5),m=new Rt(r.getX()+.5,r.getY()+.5),b=new Rt(i.getX()-.5,i.getY()+.5),_=new Rt(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,b,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new Ey(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new mo(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new mo(o+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new mo(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new mo(o-7,s-7),!1,-1,-1).toResultPoint()}var c=Wn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Wn.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new Ey(this.image,15,c,f).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new mo(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new mo(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new mo(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new mo(c-7,f-7),!1,-1,-1).toResultPoint()}return c=Wn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Wn.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new mo(c,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=ux.getInstance(),s=this.getDimension(),c=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,c,c,f,c,f,f,c,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,s=e.getX(),c=e.getY(),f=o*(t.getX()-e.getX())/a,h=o*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(Wn.round(s+p*f),Wn.round(c+p*h))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new mo(e.getX()-a,e.getY()+a),t=new mo(t.getX()-a,t.getY()-a),r=new mo(r.getX()+a,r.getY()-a),i=new mo(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,r),s!==o)?!1:(s=this.getColor(r,i),s===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,s=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),h=Math.ceil(r),p=0;p<h;p++)s+=i,c+=a,this.image.get(Wn.round(s),Wn.round(c))!==f&&o++;var g=o/r;return g>.1&&g<.9?0:g<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new mo(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Rt(s+i*a,c+i*o),h=new Rt(s-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Rt(s+i*a,c+i*o),g=new Rt(s-i*a,c-i*o),m=[f,p,h,g];return m},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Wn.round(e.getX()),r=Wn.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Wn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Wn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(gn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),Sy=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new CM(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new R_().decode(s)}catch(p){r=p}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new R_().decode(s)}catch(p){throw r??p}var c=new Fa(o.getText(),o.getRawBytes(),o.getNumBits(),a,jt.AZTEC,Ar.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(ha.BYTE_SEGMENTS,f);var h=o.getECLevel();return h!=null&&c.putMetadata(ha.ERROR_CORRECTION_LEVEL,h),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Mr.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),IM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){IM(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Sy,t)||this}return e})(Ld);var Mi=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Mr.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),s=270;o!==null&&o.get(ha.ORIENTATION)===!0&&(s=s+o.get(ha.ORIENTATION)%360),a.putMetadata(ha.ORIENTATION,s);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),h=0;h<c.length;h++)c[h]=new Rt(f-c[h].getY()-1,c[h].getX());return a}else throw new He}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Zi(r),o=t&&t.get(Mr.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var f=Math.trunc(i/2),h=0;h<c;h++){var p=Math.trunc((h+1)/2),g=(h&1)===0,m=f+s*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var b=function(N){if(N===1&&(a.reverse(),t&&t.get(Mr.NEED_RESULT_POINT_CALLBACK)===!0)){var j=new Map;t.forEach(function(H,P){return j.set(P,H)}),j.delete(Mr.NEED_RESULT_POINT_CALLBACK),t=j}try{var q=_.decodeRow(m,a,t);if(N===1){q.putMetadata(ha.ORIENTATION,180);var Y=q.getResultPoints();Y!==null&&(Y[0]=new Rt(r-Y[0].getX()-1,Y[0].getY()),Y[1]=new Rt(r-Y[1].getX()-1,Y[1].getY()))}return{value:q}}catch{}},_=this,I=0;I<2;I++){var C=b(I);if(typeof C=="object")return C.value}}throw new He},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new He;for(var s=!e.get(t),c=0,f=t;f<o;){if(e.get(f)!==s)r[c]++;else{if(++c===i)break;r[c]=1,s=!s}f++}if(!(c===i||c===i-1&&f===o))throw new He},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new He;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;r*=c;for(var f=0,h=0;h<i;h++){var p=e[h],g=t[h]*c,m=p>g?p-g:g-p;if(m>r)return Number.POSITIVE_INFINITY;f+=m}return f/a},n}(),TM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),D_=function(n){TM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,c=!1,f=6,h=i;h<r;h++)if(t.get(h)!==c)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var b=Mi.patternMatchVariance(o,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);b<p&&(p=b,g=m)}if(g>=0&&t.isRange(Math.max(0,s-(h-s)/2),s,!1))return Int32Array.from([s,h,g]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new He},e.decodeCode=function(t,r,i){Mi.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var c=e.CODE_PATTERNS[s],f=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new He},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Mr.ASSUME_GS1)===!0,o=e.findStartPattern(r),s=o[2],c=0,f=new Uint8Array(20);f[c++]=s;var h;switch(s){case e.CODE_START_A:h=e.CODE_CODE_A;break;case e.CODE_START_B:h=e.CODE_CODE_B;break;case e.CODE_START_C:h=e.CODE_CODE_C;break;default:throw new mt}for(var p=!1,g=!1,m="",b=o[0],_=o[1],I=Int32Array.from([0,0,0,0,0,0]),C=0,N=0,j=s,q=0,Y=!0,H=!1,P=!1;!p;){var E=g;switch(g=!1,C=N,N=e.decodeCode(r,I,_),f[c++]=N,N!==e.CODE_STOP&&(Y=!0),N!==e.CODE_STOP&&(q++,j+=q*N),b=_,_+=I.reduce(function(U,te){return U+te},0),N){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new mt}switch(h){case e.CODE_CODE_A:if(N<64)P===H?m+=String.fromCharCode(32+N):m+=String.fromCharCode(32+N+128),P=!1;else if(N<96)P===H?m+=String.fromCharCode(N-64):m+=String.fromCharCode(N+64),P=!1;else switch(N!==e.CODE_STOP&&(Y=!1),N){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!H&&P?(H=!0,P=!1):H&&P?(H=!1,P=!1):P=!0;break;case e.CODE_SHIFT:g=!0,h=e.CODE_CODE_B;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(N<96)P===H?m+=String.fromCharCode(32+N):m+=String.fromCharCode(32+N+128),P=!1;else switch(N!==e.CODE_STOP&&(Y=!1),N){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!H&&P?(H=!0,P=!1):H&&P?(H=!1,P=!1):P=!0;break;case e.CODE_SHIFT:g=!0,h=e.CODE_CODE_A;break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(N<100)N<10&&(m+="0"),m+=N;else switch(N!==e.CODE_STOP&&(Y=!1),N){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}E&&(h=h===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=_-b;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-b)/2),!1))throw new He;if(j-=q*C,j%103!==C)throw new Qi;var L=m.length;if(L===0)throw new He;L>0&&Y&&(h===e.CODE_CODE_C?m=m.substring(0,L-2):m=m.substring(0,L-1));for(var T=(o[1]+o[0])/2,k=b+R/2,B=f.length,V=new Uint8Array(B),Q=0;Q<B;Q++)V[Q]=f[Q];var z=[new Rt(T,t),new Rt(k,t)];return new Fa(m,V,0,z,jt.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Mi),RM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O_=function(n){RM(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.counters;f.fill(0),this.decodeRowResult="";var h=e.findAsteriskPattern(r,f),p=r.getNextSet(h[1]),g=r.getSize(),m,b;do{e.recordPattern(r,p,f);var _=e.toNarrowWidePattern(f);if(_<0)throw new He;m=e.patternToChar(_),this.decodeRowResult+=m,b=p;try{for(var I=(a=void 0,yv(f)),C=I.next();!C.done;C=I.next()){var N=C.value;p+=N}}catch(B){a={error:B}}finally{try{C&&!C.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var j=0;try{for(var q=yv(f),Y=q.next();!Y.done;Y=q.next()){var N=Y.value;j+=N}}catch(B){s={error:B}}finally{try{Y&&!Y.done&&(c=q.return)&&c.call(q)}finally{if(s)throw s.error}}var H=p-b-j;if(p!==g&&H*2<j)throw new He;if(this.usingCheckDigit){for(var P=this.decodeRowResult.length-1,E=0,R=0;R<P;R++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(P)!==e.ALPHABET_STRING.charAt(E%43))throw new Qi;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new He;var L;this.extendedMode?L=e.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;var T=(h[1]+h[0])/2,k=b+j/2;return new Fa(L,null,0,[new Rt(T,t),new Rt(k,t)],jt.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,s=a,c=!1,f=r.length,h=a;h<i;h++)if(t.get(h)!==c)r[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((h-s)/2)),s,!1))return[s,h];s+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,c=!c}throw new He},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,s;do{var c=2147483647;try{for(var f=(r=void 0,yv(t)),h=f.next();!h.done;h=f.next()){var p=h.value;p<c&&p>o&&(c=p)}}catch(_){r={error:_}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}o=c,s=0;for(var g=0,m=0,b=0;b<a;b++){var p=t[b];p>o&&(m|=1<<a-1-b,s++,g+=p)}if(s===3){for(var b=0;b<a&&s>0;b++){var p=t[b];if(p>o&&(s--,p*2>=g))return-1}return m}}while(s>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new He},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(a+1),c="\0";switch(o){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new mt;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new mt;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new mt;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new mt;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Mi),NM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k_=function(n){NM(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.findAsteriskPattern(r),h=r.getNextSet(f[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,b;do{e.recordPattern(r,h,g);var _=this.toPattern(g);if(_<0)throw new He;m=this.patternToChar(_),this.decodeRowResult+=m,b=h;try{for(var I=(a=void 0,xv(g)),C=I.next();!C.done;C=I.next()){var N=C.value;h+=N}}catch(R){a={error:R}}finally{try{C&&!C.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}h=r.getNextSet(h)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var j=0;try{for(var q=xv(g),Y=q.next();!Y.done;Y=q.next()){var N=Y.value;j+=N}}catch(R){s={error:R}}finally{try{Y&&!Y.done&&(c=q.return)&&c.call(q)}finally{if(s)throw s.error}}if(h===p||!r.get(h))throw new He;if(this.decodeRowResult.length<2)throw new He;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var H=this.decodeExtended(this.decodeRowResult),P=(f[1]+f[0])/2,E=b+j/2;return new Fa(H,null,0,[new Rt(P,t),new Rt(E,t)],jt.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,c=a.length,f=0,h=i;h<r;h++)if(t.get(h)!==s)a[f]++;else{if(f===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,h]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new He},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=xv(t),s=o.next();!s.done;s=o.next()){var c=s.value;a+=c}}catch(b){r={error:b}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var f=0,h=t.length,p=0;p<h;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new He},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new mt;var s=t.charAt(a+1),c="\0";switch(o){case"d":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new mt;break;case"a":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new mt;break;case"b":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s>="X"&&s<="Z")c="";else throw new mt;break;case"c":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new mt;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,s=r-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(s)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Qi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Mi),DM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P_=function(n){DM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,s=this.decodeStart(r),c=this.decodeEnd(r),f=new un;e.decodeMiddle(r,s[1],c[0],f);var h=f.toString(),p=null;i!=null&&(p=i.get(Mr.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=h.length,m=!1,b=0;try{for(var _=OM(p),I=_.next();!I.done;I=_.next()){var C=I.value;if(g===C){m=!0;break}C>b&&(b=C)}}catch(q){a={error:q}}finally{try{I&&!I.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}if(!m&&g>b&&(m=!0),!m)throw new mt;var N=[new Rt(s[1],t),new Rt(c[0],t)],j=new Fa(h,null,0,N,jt.ITF,new Date().getTime());return j},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),s.fill(0),c.fill(0);r<i;){Mi.recordPattern(t,r,o);for(var f=0;f<5;f++){var h=2*f;s[f]=o[h],c[f]=o[h+1]}var p=e.decodeDigit(s);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),o.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new He},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new He;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof He&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),s=t.getSize(),c=!1,f=0,h=r;o.fill(0);for(var p=r;p<s;p++)if(t.get(p)!==c)o[f]++;else{if(f===a-1){if(Mi.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[h,p];h+=o[0]+o[1],Ar.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new He},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],c=Mi.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=o):c===r&&(i=-1)}if(i>=0)return i%10;throw new He},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Mi),kM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cd=function(n){kM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var c=s-(a-s);c>=0&&(r=t.isRange(c,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var s=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,f=r,h=a.length,p=i,g=r;g<s;g++)if(t.get(g)!==p)o[c]++;else{if(c===h-1){if(Mi.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var m=o.slice(2,o.length),b=0;b<c-1;b++)o[b]=m[b];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,p=!p}throw new He},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,s=-1,c=a.length,f=0;f<c;f++){var h=a[f],p=Mi.patternMatchVariance(r,h,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=f)}if(s>=0)return s;throw new He},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Mi),PM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LM=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),c=[new Rt((r[0]+r[1])/2,e),new Rt(a,e)],f=new Fa(o,null,0,c,jt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,h=0;h<5&&c<s;h++){var p=Cd.decodeDigit(e,o,c,Cd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,PM(o)),m=g.next();!m.done;m=g.next()){var b=m.value;c+=b}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-h),h!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new He;var _=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==_)throw new He;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new He},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[ha.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n}(),MM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jM=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),c=[new Rt((r[0]+r[1])/2,e),new Rt(a,e)],f=new Fa(o,null,0,c,jt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,h=0;h<2&&c<s;h++){var p=Cd.decodeDigit(e,o,c,Cd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,MM(o)),m=g.next();!m.done;m=g.next()){var b=m.value;c+=b}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-h),h!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new He;if(parseInt(r.toString())%4!==f)throw new He;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[ha.ISSUE_NUMBER,parseInt(e)]])},n}(),BM=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Cd.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new LM;return a.decodeRow(e,t,i)}catch{var o=new jM;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),FM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ki=function(n){FM(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(Mr.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new Rt((a[0]+a[1])/2,t);o.foundPossibleResultPoint(s)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=c.rowOffset,h=c.resultString;if(o!=null){var p=new Rt(f,t);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,f);if(o!=null){var m=new Rt((g[0]+g[1])/2,t);o.foundPossibleResultPoint(m)}var b=g[1],_=b+(b-g[0]);if(_>=r.getSize()||!r.isRange(b,_,!1))throw new He;var I=h.toString();if(I.length<8)throw new mt;if(!e.checkChecksum(I))throw new Qi;var C=(a[1]+a[0])/2,N=(g[1]+g[0])/2,j=this.getBarcodeFormat(),q=[new Rt(C,t),new Rt(N,t)],Y=new Fa(I,null,0,q,j,new Date().getTime()),H=0;try{var P=BM.decodeRow(t,r,g[1]);Y.putMetadata(ha.UPC_EAN_EXTENSION,P.getText()),Y.putAllMetadata(P.getResultMetadata()),Y.addResultPoints(P.getResultPoints()),H=P.getText().length}catch{}var E=i==null?null:i.get(Mr.ALLOWED_EAN_EXTENSIONS);if(E!=null){var R=!1;for(var L in E)if(H.toString()===L){R=!0;break}if(!R)throw new He}return j===jt.EAN_13||jt.UPC_A,Y},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new mt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Cd),UM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),L_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cy=function(n){UM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],g=0,m=0;m<6&&p<h;m++){var b=ki.decodeDigit(t,f,p,ki.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);try{for(var _=(a=void 0,L_(f)),I=_.next();!I.done;I=_.next()){var C=I.value;p+=C}}catch(Y){a={error:Y}}finally{try{I&&!I.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}b>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var N=ki.findGuardPattern(t,p,!0,ki.MIDDLE_PATTERN,new Int32Array(ki.MIDDLE_PATTERN.length).fill(0));p=N[1];for(var m=0;m<6&&p<h;m++){var b=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+b);try{for(var j=(s=void 0,L_(f)),q=j.next();!q.done;q=j.next()){var C=q.value;p+=C}}catch(P){s={error:P}}finally{try{q&&!q.done&&(c=j.return)&&c.call(j)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return jt.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new He},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ki),zM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),M_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j_=function(n){zM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],g=0;g<4&&p<h;g++){var m=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var b=(a=void 0,M_(f)),_=b.next();!_.done;_=b.next()){var I=_.value;p+=I}}catch(q){a={error:q}}finally{try{_&&!_.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}}var C=ki.findGuardPattern(t,p,!0,ki.MIDDLE_PATTERN,new Int32Array(ki.MIDDLE_PATTERN.length).fill(0));p=C[1];for(var g=0;g<4&&p<h;g++){var m=ki.decodeDigit(t,f,p,ki.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var N=(s=void 0,M_(f)),j=N.next();!j.done;j=N.next()){var I=j.value;p+=I}}catch(H){s={error:H}}finally{try{j&&!j.done&&(c=N.return)&&c.call(N)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return jt.EAN_8},e}(ki),VM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),B_=function(n){VM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new Cy,t}return e.prototype.getBarcodeFormat=function(){return jt.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Fa(r.substring(1),null,null,t.getResultPoints(),jt.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new He},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ki),qM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F_=function(n){qM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s=this.decodeMiddleCounters.map(function(I){return I});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=t.getSize(),f=r[1],h=0,p=0;p<6&&f<c;p++){var g=e.decodeDigit(t,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,HM(s)),b=m.next();!b.done;b=m.next()){var _=b.value;f+=_}}catch(I){a={error:I}}finally{try{b&&!b.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}g>=10&&(h|=1<<5-p)}return e.determineNumSysAndCheckDigit(new un(i),h),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return ki.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw He.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return jt.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new un;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ki),WM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),U_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bv=function(n){WM(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Mr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(jt.EAN_13)>-1&&a.push(new Cy),i.indexOf(jt.UPC_A)>-1&&a.push(new B_),i.indexOf(jt.EAN_8)>-1&&a.push(new j_),i.indexOf(jt.UPC_E)>-1&&a.push(new F_)),a.length===0&&(a.push(new Cy),a.push(new B_),a.push(new j_),a.push(new F_)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var s=U_(this.readers),c=s.next();!c.done;c=s.next()){var f=c.value;try{var h=f.decodeRow(t,r,i),p=h.getBarcodeFormat()===jt.EAN_13&&h.getText().charAt(0)==="0",g=i==null?null:i.get(Mr.POSSIBLE_FORMATS),m=g==null||g.includes(jt.UPC_A);if(p&&m){var b=h.getRawBytes(),_=new Fa(h.getText().substring(1),b,b?b.length:null,h.getResultPoints(),jt.UPC_A);return _.putAllMetadata(h.getResultMetadata()),_}return h}catch{}}}catch(I){a={error:I}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new He},e.prototype.reset=function(){var t,r;try{for(var i=U_(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Mi),GM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$M=function(n){GM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new He;var o=this.codaBarDecodeRow(a.row);if(!o)throw new He;return new Fa(o,null,0,[new Rt(a.left,t),new Rt(a.right,t)],jt.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],s=r[0],c=1,f=1;f<r.length;f++)r[f]===s?c++:(s=r[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Mi),YM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$f=function(n){YM(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Mi.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new He},e.count=function(t){return Wn.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var h=XM(t),p=h.next();!p.done;p=h.next()){var g=p.value;g>f&&(f=g),g<c&&(c=g)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Mi),Ug=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),_E=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Rt(r,a)),this.resultPoints.push(new Rt(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),KM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ad=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var s=KM(e),c=s.next();!c.done;c=s.next()){var f=c.value;o+=f}}catch(N){i={error:N}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var h=0,p=0,g=e.length,m=0;m<g-1;m++){var b=void 0;for(b=1,p|=1<<m;b<e[m];b++,p&=~(1<<m)){var _=n.combins(o-b-1,g-m-2);if(r&&p===0&&o-b-(g-m-1)>=g-m-1&&(_-=n.combins(o-b-(g-m),g-m-2)),g-m-1>1){for(var I=0,C=o-b-(g-m-2);C>t;C--)I+=n.combins(o-b-C-1,g-m-3);_-=I*(g-1-m)}else o-b>t&&_--;h+=_}o-=b}return h},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,s=e;s>r;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n}(),QM=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Zi(r),a=0,o=e[0],s=o.getRightChar().getValue(),c=11;c>=0;--c)(s&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var f=e[c],h=f.getLeftChar().getValue(),p=11;p>=0;--p)(h&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),Hf=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),fx=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),ZM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Js=function(n){ZM(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(fx),JM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wf=function(n){JM(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(fx),ej=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$h=function(n){ej(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new mt;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(fx),Up=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tj=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,s,c,f;if(!e)return null;if(e.length<2)throw new He;var h=e.substring(0,2);try{for(var p=Up(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===h)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,m[2],e):n.processFixedAI(2,m[1],e)}}catch(H){t={error:H}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new He;var b=e.substring(0,3);try{for(var _=Up(n.THREE_DIGIT_DATA_LENGTH),I=_.next();!I.done;I=_.next()){var m=I.value;if(m[0]===b)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,m[2],e):n.processFixedAI(3,m[1],e)}}catch(H){i={error:H}}finally{try{I&&!I.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var C=Up(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),N=C.next();!N.done;N=C.next()){var m=N.value;if(m[0]===b)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(H){o={error:H}}finally{try{N&&!N.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}if(e.length<4)throw new He;var j=e.substring(0,4);try{for(var q=Up(n.FOUR_DIGIT_DATA_LENGTH),Y=q.next();!Y.done;Y=q.next()){var m=Y.value;if(m[0]===j)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(H){c={error:H}}finally{try{Y&&!Y.done&&(f=q.return)&&f.call(q)}finally{if(c)throw c.error}}throw new He},n.processFixedAI=function(e,t,r){if(r.length<e)throw new He;var i=r.substring(0,e);if(r.length<e+t)throw new He;var a=r.substring(e,e+t),o=r.substring(e+t),s="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(o);return c==null?s:s+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),s=r.substring(a),c="("+i+")"+o,f=n.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),sg=function(){function n(e){this.buffer=new un,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=tj.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new $h(this.information.getSize(),$h.FNC1,$h.FNC1):new $h(this.information.getSize(),t-1,$h.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new $h(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Wf(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Wf(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Wf(this.current.getPosition(),this.buffer.toString()):t=new Wf(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Hf(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Wf(this.current.getPosition(),this.buffer.toString());return new Hf(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Hf(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Wf(this.current.getPosition(),this.buffer.toString());return new Hf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Hf(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Wf(this.current.getPosition(),this.buffer.toString());return new Hf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Hf(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Js(e+5,Js.FNC1);if(t>=5&&t<15)return new Js(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Js(e+7,""+(r+1));if(r>=90&&r<116)return new Js(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new mt}return new Js(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Js(e+5,Js.FNC1);if(t>=5&&t<15)return new Js(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Js(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new I1("Decoding invalid alphanumeric value: "+r)}return new Js(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),AE=function(){function n(e){this.information=e,this.generalDecoder=new sg(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),nj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),al=function(n){nj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(AE),rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ij=function(n){rj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new un;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(al),aj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oj=function(n){aj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new un;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(AE),sj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lg=function(n){sj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),s=1e5,c=0;c<5;++c)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(al),lj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EE=function(n){lj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+lg.GTIN_SIZE+e.WEIGHT_SIZE)throw new He;var t=new un;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+lg.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(lg),cj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uj=function(n){cj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(EE),fj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hj=function(n){fj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(EE),dj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pj=function(n){dj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+al.GTIN_SIZE)throw new He;var t=new un;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(al),gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mj=function(n){gj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+al.GTIN_SIZE)throw new He;var t=new un;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(al),vj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hu=function(n){vj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new He;var t=new un;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(lg);function yj(n){try{if(n.get(1))return new ij(n);if(!n.get(2))return new oj(n);var e=sg.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new uj(n);case 5:return new hj(n)}var t=sg.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new pj(n);case 13:return new mj(n)}var r=sg.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Hu(n,"310","11");case 57:return new Hu(n,"320","11");case 58:return new Hu(n,"310","13");case 59:return new Hu(n,"320","13");case 60:return new Hu(n,"310","15");case 61:return new Hu(n,"320","15");case 62:return new Hu(n,"310","17");case 63:return new Hu(n,"320","17")}}catch(i){throw console.log(i),new I1("unknown decoder: "+n)}}var z_=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),xj=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),bj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wj=function(n){bj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(s){if(s instanceof He){if(!this.pairs.length)throw new He;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new He},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,Wu(t)),f=c.next();!f.done;f=c.next()){var h=f.value;this.pairs.push(h.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(s);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new He},e.isValidSequence=function(t){var r,i;try{for(var a=Wu(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(t.length>s.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==s[f]){c=!1;break}if(c)return!0}}}catch(h){r={error:h}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new xj(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,s,c,f;try{for(var h=Wu(r),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.getPairs().length!==t.length){var m=!0;try{for(var b=(o=void 0,Wu(g.getPairs())),_=b.next();!_.done;_=b.next()){var I=_.value,C=!1;try{for(var N=(c=void 0,Wu(t)),j=N.next();!j.done;j=N.next()){var q=j.value;if(z_.equals(I,q)){C=!0;break}}}catch(Y){c={error:Y}}finally{try{j&&!j.done&&(f=N.return)&&f.call(N)}finally{if(c)throw c.error}}C||(m=!1)}}catch(Y){o={error:Y}}finally{try{_&&!_.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}}}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,s,c,f;try{for(var h=Wu(r),p=h.next();!p.done;p=h.next()){var g=p.value,m=!0;try{for(var b=(o=void 0,Wu(t)),_=b.next();!_.done;_=b.next()){var I=_.value,C=!1;try{for(var N=(c=void 0,Wu(g.getPairs())),j=N.next();!j.done;j=N.next()){var q=j.value;if(I.equals(q)){C=!0;break}}}catch(Y){c={error:Y}}finally{try{j&&!j.done&&(f=N.return)&&f.call(N)}finally{if(c)throw c.error}}if(!C){m=!1;break}}}catch(Y){o={error:Y}}finally{try{_&&!_.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}if(m)return!0}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=QM.buildBitArray(t),i=yj(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],s[0],s[1]];return new Fa(a,null,null,c,jt.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var c=this.pairs.get(s);a+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var h=211*(o-4)+a;return h===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,c=-1;do this.findNextPair(t,r,c),o=this.parseFoundFinderPattern(t,i,a),o===null?c=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new He;var h;try{h=this.decodeDataCharacter(t,o,a,!1)}catch(p){h=null,console.log(p)}return new z_(f,h,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(r))s=0;else{var c=r[r.length-1];s=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var h=!1;s<o&&(h=!t.get(s),!!h);)s++;for(var p=0,g=s,m=s;m<o;m++)if(t.get(m)!==h)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,h=!h}throw new He},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,s;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();Ar.arraycopy(f,0,f,1,f.length-1),f[0]=a;var h;try{h=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new _E(h,[o,s],o,s,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var h=o[c];o[c]=o[f],o[f]=h}}var p=17,g=Wn.sum(new Int32Array(o))/p,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new He;for(var b=this.getOddCounts(),_=this.getEvenCounts(),I=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var N=1*o[c]/g,j=N+.5;if(j<1){if(N<.3)throw new He;j=1}else if(j>8){if(N>8.7)throw new He;j=8}var q=c/2;(c&1)===0?(b[q]=j,I[q]=N-j):(_[q]=j,C[q]=N-j)}this.adjustOddEvenCounts(p);for(var Y=4*r.getValue()+(i?0:2)+(a?0:1)-1,H=0,P=0,c=b.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var E=e.WEIGHTS[Y][2*c];P+=b[c]*E}H+=b[c]}for(var R=0,c=_.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var E=e.WEIGHTS[Y][2*c+1];R+=_[c]*E}var L=P+R;if((H&1)!==0||H>13||H<4)throw new He;var T=(13-H)/2,k=e.SYMBOL_WIDEST[T],B=9-k,V=ad.getRSSvalue(b,k,!0),Q=ad.getRSSvalue(_,B,!1),z=e.EVEN_TOTAL_SUBSET[T],U=e.GSUM[T],te=V*z+Q+U;return new Ug(te,L)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Wn.sum(new Int32Array(this.getOddCounts())),i=Wn.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var s=!1,c=!1;i>13?c=!0:i<4&&(s=!0);var f=r+i-t,h=(r&1)===1,p=(i&1)===0;if(f===1)if(h){if(p)throw new He;o=!0}else{if(!p)throw new He;c=!0}else if(f===-1)if(h){if(p)throw new He;a=!0}else{if(!p)throw new He;s=!0}else if(f===0){if(h){if(!p)throw new He;r<i?(a=!0,c=!0):(o=!0,s=!0)}else if(p)throw new He}else throw new He;if(a){if(o)throw new He;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new He;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}($f),_j=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Aj=function(n){_j(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Ug),Ej=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V_=function(n){Ej(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var h=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,h),r.reverse();try{for(var p=wv(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var b=(s=void 0,wv(this.possibleRightPairs)),_=b.next();!_.done;_=b.next()){var I=_.value;if(I.getCount()>1&&e.checkChecksum(m,I))return e.constructResult(m,I)}}catch(C){s={error:C}}finally{try{_&&!_.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}}}catch(C){a={error:C}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new He},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var s=wv(t),c=s.next();!c.done;c=s.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),o=!0;break}}}catch(h){i={error:h}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new un,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var c=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;c+=(s&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var h=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Fa(o.toString(),null,0,[h[0],h[1],p[0],p[1]],jt.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),s=this.parseFoundFinderPattern(t,i,r,o),c=a==null?null:a.get(Mr.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;r&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new Rt(f,i))}var h=this.decodeDataCharacter(t,s,!0),p=this.decodeDataCharacter(t,s,!1);return new Aj(1597*h.getValue()+p.getValue(),h.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Mi.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Mi.recordPattern(t,r.getStartEnd()[1]+1,a);for(var s=0,c=a.length-1;s<c;s++,c--){var f=a[s];a[s]=a[c],a[c]=f}}for(var h=i?16:15,p=Wn.sum(new Int32Array(a))/h,g=this.getOddCounts(),m=this.getEvenCounts(),b=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var I=a[s]/p,C=Math.floor(I+.5);C<1?C=1:C>8&&(C=8);var N=Math.floor(s/2);(s&1)===0?(g[N]=C,b[N]=I-C):(m[N]=C,_[N]=I-C)}this.adjustOddEvenCounts(i,h);for(var j=0,q=0,s=g.length-1;s>=0;s--)q*=9,q+=g[s],j+=g[s];for(var Y=0,H=0,s=m.length-1;s>=0;s--)Y*=9,Y+=m[s],H+=m[s];var P=q+3*Y;if(i){if((j&1)!==0||j>12||j<4)throw new He;var E=(12-j)/2,R=e.OUTSIDE_ODD_WIDEST[E],L=9-R,T=ad.getRSSvalue(g,R,!1),k=ad.getRSSvalue(m,L,!0),B=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],V=e.OUTSIDE_GSUM[E];return new Ug(T*B+k+V,P)}else{if((H&1)!==0||H>10||H<4)throw new He;var E=(10-H)/2,R=e.INSIDE_ODD_WIDEST[E],L=9-R,T=ad.getRSSvalue(g,R,!0),k=ad.getRSSvalue(m,L,!1),Q=e.INSIDE_ODD_TOTAL_SUBSET[E],V=e.INSIDE_GSUM[E];return new Ug(k*Q+T+V,P)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,s=0;s<a&&(o=!t.get(s),r!==o);)s++;for(var c=0,f=s,h=s;h<a;h++)if(t.get(h)!==o)i[c]++;else{if(c===3){if($f.isFinderPattern(i))return[f,h];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new He},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),s=a[0]-1;s>=0&&o!==t.get(s);)s--;s++;var c=a[0]-s,f=this.getDecodeFinderCounters(),h=new Int32Array(f.length);Ar.arraycopy(f,0,h,1,f.length-1),h[0]=c;var p=this.parseFinderValue(h,e.FINDER_PATTERNS),g=s,m=a[1];return i&&(g=t.getSize()-1-g,m=t.getSize()-1-m),new _E(p,[s,a[1]],g,m,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Wn.sum(new Int32Array(this.getOddCounts())),a=Wn.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,c=!1,f=!1;t?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(c=!0));var h=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(h===1)if(p){if(g)throw new He;s=!0}else{if(!g)throw new He;f=!0}else if(h===-1)if(p){if(g)throw new He;o=!0}else{if(!g)throw new He;c=!0}else if(h===0){if(p){if(!g)throw new He;i<a?(o=!0,f=!0):(s=!0,c=!0)}else if(g)throw new He}else throw new He;if(o){if(s)throw new He;$f.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&$f.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new He;$f.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&$f.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}($f),Sj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),F0=function(n){Sj(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Mr.POSSIBLE_FORMATS):null,a=t&&t.get(Mr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Mr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(jt.EAN_13)||i.includes(jt.UPC_A)||i.includes(jt.EAN_8)||i.includes(jt.UPC_E))&&r.readers.push(new bv(t)),i.includes(jt.CODE_39)&&r.readers.push(new O_(a,o)),i.includes(jt.CODE_93)&&r.readers.push(new k_),i.includes(jt.CODE_128)&&r.readers.push(new D_),i.includes(jt.ITF)&&r.readers.push(new P_),i.includes(jt.CODABAR)&&r.readers.push(new $M),i.includes(jt.RSS_14)&&r.readers.push(new V_),i.includes(jt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new wj))),r.readers.length===0&&(r.readers.push(new bv(t)),r.readers.push(new O_),r.readers.push(new k_),r.readers.push(new bv(t)),r.readers.push(new D_),r.readers.push(new P_),r.readers.push(new V_)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new He},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Mi),Cj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Cj(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new F0(r),t,r)||this}return e})(Ld);var q_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jn=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Yn=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Ij=function(){function n(e,t,r,i,a,o){var s,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,h=o.getECCodewords(),p=o.getECBlocks();try{for(var g=q_(p),m=g.next();!m.done;m=g.next()){var b=m.value;f+=b.getCount()*(b.getDataCodewords()+h)}}catch(_){s={error:_}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new mt;try{for(var a=q_(n.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new mt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Jn(5,new Yn(1,3))),new n(2,12,12,10,10,new Jn(7,new Yn(1,5))),new n(3,14,14,12,12,new Jn(10,new Yn(1,8))),new n(4,16,16,14,14,new Jn(12,new Yn(1,12))),new n(5,18,18,16,16,new Jn(14,new Yn(1,18))),new n(6,20,20,18,18,new Jn(18,new Yn(1,22))),new n(7,22,22,20,20,new Jn(20,new Yn(1,30))),new n(8,24,24,22,22,new Jn(24,new Yn(1,36))),new n(9,26,26,24,24,new Jn(28,new Yn(1,44))),new n(10,32,32,14,14,new Jn(36,new Yn(1,62))),new n(11,36,36,16,16,new Jn(42,new Yn(1,86))),new n(12,40,40,18,18,new Jn(48,new Yn(1,114))),new n(13,44,44,20,20,new Jn(56,new Yn(1,144))),new n(14,48,48,22,22,new Jn(68,new Yn(1,174))),new n(15,52,52,24,24,new Jn(42,new Yn(2,102))),new n(16,64,64,14,14,new Jn(56,new Yn(2,140))),new n(17,72,72,16,16,new Jn(36,new Yn(4,92))),new n(18,80,80,18,18,new Jn(48,new Yn(4,114))),new n(19,88,88,20,20,new Jn(56,new Yn(4,144))),new n(20,96,96,22,22,new Jn(68,new Yn(4,174))),new n(21,104,104,24,24,new Jn(56,new Yn(6,136))),new n(22,120,120,18,18,new Jn(68,new Yn(6,175))),new n(23,132,132,20,20,new Jn(62,new Yn(8,163))),new n(24,144,144,22,22,new Jn(62,new Yn(8,156),new Yn(2,155))),new n(25,8,18,6,16,new Jn(7,new Yn(1,5))),new n(26,8,32,6,14,new Jn(11,new Yn(1,10))),new n(27,12,26,10,24,new Jn(14,new Yn(1,16))),new n(28,12,36,10,16,new Jn(18,new Yn(1,22))),new n(29,16,36,14,16,new Jn(24,new Yn(1,32))),new n(30,16,48,14,22,new Jn(28,new Yn(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),Tj=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new mt;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new oc(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return Ij.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,c=!1,f=!1,h=!1;do if(r===a&&i===0&&!s)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,s=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!c)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(o&7)===0&&!f)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(o&7)===4&&!h)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,h=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new mt;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Bt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,s=r/a|0,c=o*i,f=s*a,h=new oc(f,c),p=0;p<o;++p)for(var g=p*i,m=0;m<s;++m)for(var b=m*a,_=0;_<i;++_)for(var I=p*(i+2)+1+_,C=g+_,N=0;N<a;++N){var j=m*(a+2)+1+N;if(e.get(j,I)){var q=b+N;h.set(q,C)}}return h},n}(),H_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,s=t.getECBlocks(),c=0,f=s.getECBlocks();try{for(var h=H_(f),p=h.next();!p.done;p=h.next()){var g=p.value;c+=g.getCount()}}catch(V){r={error:V}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var m=new Array(c),b=0;try{for(var _=H_(f),I=_.next();!I.done;I=_.next())for(var g=I.value,C=0;C<g.getCount();C++){var N=g.getDataCodewords(),j=s.getECCodewords()+N;m[b++]=new n(N,new Uint8Array(j))}}catch(V){a={error:V}}finally{try{I&&!I.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}for(var q=m[0].codewords.length,Y=q-s.getECCodewords(),H=Y-1,P=0,C=0;C<H;C++)for(var E=0;E<b;E++)m[E].codewords[C]=e[P++];for(var R=t.getVersionNumber()===24,L=R?8:b,E=0;E<L;E++)m[E].codewords[Y-1]=e[P++];for(var T=m[0].codewords.length,C=Y;C<T;C++)for(var E=0;E<b;E++){var k=R?(E+8)%b:E,B=R&&k>7?C-1:C;m[k].codewords[B]=e[P++]}if(P!==e.length)throw new Bt;return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),SE=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Bt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,s=e<o?e:o,c=o-s,f=255>>8-s<<c;t=(a[i]&f)>>c,e-=s,r+=s,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(a[i]&f)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Di;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Di||(Di={}));var Nj=function(){function n(){}return n.decode=function(e){var t=new SE(e),r=new un,i=new un,a=new Array,o=Di.ASCII_ENCODE;do if(o===Di.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Di.C40_ENCODE:this.decodeC40Segment(t,r);break;case Di.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Di.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Di.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Di.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new mt}o=Di.ASCII_ENCODE}while(o!==Di.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Pm(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new mt;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Di.ASCII_ENCODE;if(a===129)return Di.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Di.C40_ENCODE;case 231:return Di.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Di.ANSIX12_ENCODE;case 239:return Di.TEXT_ENCODE;case 240:return Di.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new mt;break}}while(e.available()>0);return Di.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new mt;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new mt}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new mt}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new mt;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new mt}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),a=0}else throw new mt;break;default:throw new mt}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new mt;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new mt;for(var s=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new mt;s[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(s);try{t.append(As.decode(s,kn.ISO88591))}catch(f){throw new I1("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),Dj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oj=function(){function n(){this.rsDecoder=new Lm(bo.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new Tj(e),a=i.getVersion(),o=i.readCodewords(),s=Rj.getDataBlocks(o,a),c=0;try{for(var f=Dj(s),h=f.next();!h.done;h=f.next()){var p=h.value;c+=p.getNumDataCodewords()}}catch(j){t={error:j}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var g=new Uint8Array(c),m=s.length,b=0;b<m;b++){var _=s[b],I=_.getCodewords(),C=_.getNumDataCodewords();this.correctErrors(I,C);for(var N=0;N<C;N++)g[N*m+b]=I[N]}return Nj.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Qi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),kj=function(){function n(e){this.image=e,this.rectangleDetector=new Ey(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new He;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],s=this.transitionsBetween(r,o)+1,c=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(c&1)===1&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var f=n.sampleGrid(this.image,r,i,a,o,s,c);return new cx(f,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Rt(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Rt(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),s=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),h=o,p=[a,t,r,i];return h>s&&(h=s,p[0]=t,p[1]=r,p[2]=i,p[3]=a),h>c&&(h=c,p[0]=r,p[1]=i,p[2]=a,p[3]=t),h>f&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=n.shiftPoint(r,i,(o+1)*4),c=n.shiftPoint(i,r,(o+1)*4),f=this.transitionsBetween(s,t),h=this.transitionsBetween(c,a);return f<h?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(s+1)*4),f=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(c,a),s=this.transitionsBetween(f,a);var h=new Rt(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),p=new Rt(a.getX()+(t.getX()-r.getX())/(s+1),a.getY()+(t.getY()-r.getY())/(s+1));if(!this.isValid(h))return this.isValid(p)?p:null;if(!this.isValid(p))return h;var g=this.transitionsBetween(c,h)+this.transitionsBetween(f,h),m=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return g>m?h:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,s=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,s*4),f=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(c,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var h=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,h,p),r=n.moveAway(r,h,p),i=n.moveAway(i,h,p),a=n.moveAway(a,h,p);var g,m;return c=n.shiftPoint(t,r,s*4),c=n.shiftPoint(c,a,o*4),g=n.shiftPoint(r,t,s*4),g=n.shiftPoint(g,i,o*4),f=n.shiftPoint(i,a,s*4),f=n.shiftPoint(f,r,o*4),m=n.shiftPoint(a,i,s*4),m=n.shiftPoint(m,t,o*4),[c,g,f,m]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,s){var c=ux.getInstance();return c.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-i)>Math.abs(a-r);if(s){var c=r;r=i,i=c,c=a,a=o,o=c}for(var f=Math.abs(a-r),h=Math.abs(o-i),p=-f/2,g=i<o?1:-1,m=r<a?1:-1,b=0,_=this.image.get(s?i:r,s?r:i),I=r,C=i;I!==a;I+=m){var N=this.image.get(s?C:I,s?I:C);if(N!==_&&(b++,_=N),p+=h,p>0){if(C===o)break;C+=g,p-=f}}return b},n}(),Iy=function(){function n(){this.decoder=new Oj}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Mr.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new kj(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=r.getRawBytes(),c=new Fa(r.getText(),s,8*s.length,i,jt.DATA_MATRIX,Ar.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(ha.BYTE_SEGMENTS,f);var h=r.getECLevel();return h!=null&&c.putMetadata(ha.ERROR_CORRECTION_LEVEL,h),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new He;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],c=r[0],f=(c-s+1)/i,h=(o-a+1)/i;if(f<=0||h<=0)throw new He;var p=i/2;a+=p,s+=p;for(var g=new oc(f,h),m=0;m<h;m++)for(var b=a+m*i,_=0;_<f;_++)e.get(s+_*i,b)&&g.set(_,m);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new He;var o=i-e[0];if(o===0)throw new He;return o},n.NO_POINTS=[],n}(),Pj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Pj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Iy,t)||this}return e})(Ld);var od;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(od||(od={}));var Lj=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new nl(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Bt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(od.L,"L",1),n.M=new n(od.M,"M",0),n.Q=new n(od.Q,"Q",3),n.H=new n(od.H,"H",2),n}(),Mj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CE=function(){function n(e){this.errorCorrectionLevel=Lj.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return gn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=Mj(n.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var f=c.value,h=f[0];if(h===e||h===t)return new n(f[1]);var p=n.numBitsDiffering(e,h);p<a&&(o=f[1],a=p),e!==t&&(p=n.numBitsDiffering(t,h),p<a&&(o=f[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),jj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},je=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=jj(i),o=a.next();!o.done;o=a.next()){var s=o.value;r+=s.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),he=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Bj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eh=function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var s=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var h=Bj(f),p=h.next();!p.done;p=h.next()){var g=p.value;s+=g.getCount()*(g.getDataCodewords()+c)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}this.totalCodewords=s}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new mt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new mt}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Bt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=CE.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new oc(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new je(7,new he(1,19)),new je(10,new he(1,16)),new je(13,new he(1,13)),new je(17,new he(1,9))),new n(2,Int32Array.from([6,18]),new je(10,new he(1,34)),new je(16,new he(1,28)),new je(22,new he(1,22)),new je(28,new he(1,16))),new n(3,Int32Array.from([6,22]),new je(15,new he(1,55)),new je(26,new he(1,44)),new je(18,new he(2,17)),new je(22,new he(2,13))),new n(4,Int32Array.from([6,26]),new je(20,new he(1,80)),new je(18,new he(2,32)),new je(26,new he(2,24)),new je(16,new he(4,9))),new n(5,Int32Array.from([6,30]),new je(26,new he(1,108)),new je(24,new he(2,43)),new je(18,new he(2,15),new he(2,16)),new je(22,new he(2,11),new he(2,12))),new n(6,Int32Array.from([6,34]),new je(18,new he(2,68)),new je(16,new he(4,27)),new je(24,new he(4,19)),new je(28,new he(4,15))),new n(7,Int32Array.from([6,22,38]),new je(20,new he(2,78)),new je(18,new he(4,31)),new je(18,new he(2,14),new he(4,15)),new je(26,new he(4,13),new he(1,14))),new n(8,Int32Array.from([6,24,42]),new je(24,new he(2,97)),new je(22,new he(2,38),new he(2,39)),new je(22,new he(4,18),new he(2,19)),new je(26,new he(4,14),new he(2,15))),new n(9,Int32Array.from([6,26,46]),new je(30,new he(2,116)),new je(22,new he(3,36),new he(2,37)),new je(20,new he(4,16),new he(4,17)),new je(24,new he(4,12),new he(4,13))),new n(10,Int32Array.from([6,28,50]),new je(18,new he(2,68),new he(2,69)),new je(26,new he(4,43),new he(1,44)),new je(24,new he(6,19),new he(2,20)),new je(28,new he(6,15),new he(2,16))),new n(11,Int32Array.from([6,30,54]),new je(20,new he(4,81)),new je(30,new he(1,50),new he(4,51)),new je(28,new he(4,22),new he(4,23)),new je(24,new he(3,12),new he(8,13))),new n(12,Int32Array.from([6,32,58]),new je(24,new he(2,92),new he(2,93)),new je(22,new he(6,36),new he(2,37)),new je(26,new he(4,20),new he(6,21)),new je(28,new he(7,14),new he(4,15))),new n(13,Int32Array.from([6,34,62]),new je(26,new he(4,107)),new je(22,new he(8,37),new he(1,38)),new je(24,new he(8,20),new he(4,21)),new je(22,new he(12,11),new he(4,12))),new n(14,Int32Array.from([6,26,46,66]),new je(30,new he(3,115),new he(1,116)),new je(24,new he(4,40),new he(5,41)),new je(20,new he(11,16),new he(5,17)),new je(24,new he(11,12),new he(5,13))),new n(15,Int32Array.from([6,26,48,70]),new je(22,new he(5,87),new he(1,88)),new je(24,new he(5,41),new he(5,42)),new je(30,new he(5,24),new he(7,25)),new je(24,new he(11,12),new he(7,13))),new n(16,Int32Array.from([6,26,50,74]),new je(24,new he(5,98),new he(1,99)),new je(28,new he(7,45),new he(3,46)),new je(24,new he(15,19),new he(2,20)),new je(30,new he(3,15),new he(13,16))),new n(17,Int32Array.from([6,30,54,78]),new je(28,new he(1,107),new he(5,108)),new je(28,new he(10,46),new he(1,47)),new je(28,new he(1,22),new he(15,23)),new je(28,new he(2,14),new he(17,15))),new n(18,Int32Array.from([6,30,56,82]),new je(30,new he(5,120),new he(1,121)),new je(26,new he(9,43),new he(4,44)),new je(28,new he(17,22),new he(1,23)),new je(28,new he(2,14),new he(19,15))),new n(19,Int32Array.from([6,30,58,86]),new je(28,new he(3,113),new he(4,114)),new je(26,new he(3,44),new he(11,45)),new je(26,new he(17,21),new he(4,22)),new je(26,new he(9,13),new he(16,14))),new n(20,Int32Array.from([6,34,62,90]),new je(28,new he(3,107),new he(5,108)),new je(26,new he(3,41),new he(13,42)),new je(30,new he(15,24),new he(5,25)),new je(28,new he(15,15),new he(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new je(28,new he(4,116),new he(4,117)),new je(26,new he(17,42)),new je(28,new he(17,22),new he(6,23)),new je(30,new he(19,16),new he(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new je(28,new he(2,111),new he(7,112)),new je(28,new he(17,46)),new je(30,new he(7,24),new he(16,25)),new je(24,new he(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new je(30,new he(4,121),new he(5,122)),new je(28,new he(4,47),new he(14,48)),new je(30,new he(11,24),new he(14,25)),new je(30,new he(16,15),new he(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new je(30,new he(6,117),new he(4,118)),new je(28,new he(6,45),new he(14,46)),new je(30,new he(11,24),new he(16,25)),new je(30,new he(30,16),new he(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new je(26,new he(8,106),new he(4,107)),new je(28,new he(8,47),new he(13,48)),new je(30,new he(7,24),new he(22,25)),new je(30,new he(22,15),new he(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new je(28,new he(10,114),new he(2,115)),new je(28,new he(19,46),new he(4,47)),new je(28,new he(28,22),new he(6,23)),new je(30,new he(33,16),new he(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new je(30,new he(8,122),new he(4,123)),new je(28,new he(22,45),new he(3,46)),new je(30,new he(8,23),new he(26,24)),new je(30,new he(12,15),new he(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new je(30,new he(3,117),new he(10,118)),new je(28,new he(3,45),new he(23,46)),new je(30,new he(4,24),new he(31,25)),new je(30,new he(11,15),new he(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new je(30,new he(7,116),new he(7,117)),new je(28,new he(21,45),new he(7,46)),new je(30,new he(1,23),new he(37,24)),new je(30,new he(19,15),new he(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new je(30,new he(5,115),new he(10,116)),new je(28,new he(19,47),new he(10,48)),new je(30,new he(15,24),new he(25,25)),new je(30,new he(23,15),new he(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new je(30,new he(13,115),new he(3,116)),new je(28,new he(2,46),new he(29,47)),new je(30,new he(42,24),new he(1,25)),new je(30,new he(23,15),new he(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new je(30,new he(17,115)),new je(28,new he(10,46),new he(23,47)),new je(30,new he(10,24),new he(35,25)),new je(30,new he(19,15),new he(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new je(30,new he(17,115),new he(1,116)),new je(28,new he(14,46),new he(21,47)),new je(30,new he(29,24),new he(19,25)),new je(30,new he(11,15),new he(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new je(30,new he(13,115),new he(6,116)),new je(28,new he(14,46),new he(23,47)),new je(30,new he(44,24),new he(7,25)),new je(30,new he(59,16),new he(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new je(30,new he(12,121),new he(7,122)),new je(28,new he(12,47),new he(26,48)),new je(30,new he(39,24),new he(14,25)),new je(30,new he(22,15),new he(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new je(30,new he(6,121),new he(14,122)),new je(28,new he(6,47),new he(34,48)),new je(30,new he(46,24),new he(10,25)),new je(30,new he(2,15),new he(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new je(30,new he(17,122),new he(4,123)),new je(28,new he(29,46),new he(14,47)),new je(30,new he(49,24),new he(10,25)),new je(30,new he(24,15),new he(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new je(30,new he(4,122),new he(18,123)),new je(28,new he(13,46),new he(32,47)),new je(30,new he(48,24),new he(14,25)),new je(30,new he(42,15),new he(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new je(30,new he(20,117),new he(4,118)),new je(28,new he(40,47),new he(7,48)),new je(30,new he(43,24),new he(22,25)),new je(30,new he(10,15),new he(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new je(30,new he(19,118),new he(6,119)),new je(28,new he(18,47),new he(31,48)),new je(30,new he(34,24),new he(34,25)),new je(30,new he(20,15),new he(61,16)))],n}(),$i;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})($i||($i={}));var W_=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[$i.DATA_MASK_000,new n($i.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[$i.DATA_MASK_001,new n($i.DATA_MASK_001,function(e,t){return(e&1)===0})],[$i.DATA_MASK_010,new n($i.DATA_MASK_010,function(e,t){return t%3===0})],[$i.DATA_MASK_011,new n($i.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[$i.DATA_MASK_100,new n($i.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[$i.DATA_MASK_101,new n($i.DATA_MASK_101,function(e,t){return e*t%6===0})],[$i.DATA_MASK_110,new n($i.DATA_MASK_110,function(e,t){return e*t%6<3})],[$i.DATA_MASK_111,new n($i.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),Fj=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new mt;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=CE.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new mt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return eh.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var s=eh.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(s=eh.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new mt},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=W_.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),c=0,f=0,h=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=o?i-1-g:g,b=0;b<2;b++)a.get(p-b,m)||(h++,f<<=1,this.bitMatrix.get(p-b,m)&&(f|=1),h===8&&(s[c++]=f,h=0,f=0));o=!o}if(c!==t.getTotalCodewords())throw new mt;return s},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=W_.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),G_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,s;if(e.length!==t.getTotalCodewords())throw new Bt;var c=t.getECBlocksForLevel(r),f=0,h=c.getECBlocks();try{for(var p=G_(h),g=p.next();!g.done;g=p.next()){var m=g.value;f+=m.getCount()}}catch(B){i={error:B}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var b=new Array(f),_=0;try{for(var I=G_(h),C=I.next();!C.done;C=I.next())for(var m=C.value,N=0;N<m.getCount();N++){var j=m.getDataCodewords(),q=c.getECCodewordsPerBlock()+j;b[_++]=new n(j,new Uint8Array(q))}}catch(B){o={error:B}}finally{try{C&&!C.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}for(var Y=b[0].codewords.length,H=b.length-1;H>=0;){var P=b[H].codewords.length;if(P===Y)break;H--}H++;for(var E=Y-c.getECCodewordsPerBlock(),R=0,N=0;N<E;N++)for(var L=0;L<_;L++)b[L].codewords[N]=e[R++];for(var L=H;L<_;L++)b[L].codewords[E]=e[R++];for(var T=b[0].codewords.length,N=E;N<T;N++)for(var L=0;L<_;L++){var k=L<H?N:N+1;b[L].codewords[k]=e[R++]}return b},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),bs;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(bs||(bs={}));var Tr=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Bt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(bs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(bs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(bs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(bs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(bs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(bs.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(bs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(bs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(bs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(bs.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),zj=function(){function n(){}return n.decode=function(e,t,r,i){var a=new SE(e),o=new un,s=new Array,c=-1,f=-1;try{var h=null,p=!1,g=void 0;do{if(a.available()<4)g=Tr.TERMINATOR;else{var m=a.readBits(4);g=Tr.forBits(m)}switch(g){case Tr.TERMINATOR:break;case Tr.FNC1_FIRST_POSITION:case Tr.FNC1_SECOND_POSITION:p=!0;break;case Tr.STRUCTURED_APPEND:if(a.available()<16)throw new mt;c=a.readBits(8),f=a.readBits(8);break;case Tr.ECI:var b=n.parseECIValue(a);if(h=Pi.getCharacterSetECIByValue(b),h===null)throw new mt;break;case Tr.HANZI:var _=a.readBits(4),I=a.readBits(g.getCharacterCountBits(t));_===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,I);break;default:var C=a.readBits(g.getCharacterCountBits(t));switch(g){case Tr.NUMERIC:n.decodeNumericSegment(a,o,C);break;case Tr.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,C,p);break;case Tr.BYTE:n.decodeByteSegment(a,o,C,h,s,i);break;case Tr.KANJI:n.decodeKanjiSegment(a,o,C);break;default:throw new mt}break}}while(g!==Tr.TERMINATOR)}catch{throw new mt}return new Pm(e,o.toString(),s.length===0?null:s,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new mt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,r--}try{t.append(As.decode(i,kn.GB2312))}catch(c){throw new mt(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new mt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,r--}try{t.append(As.decode(i,kn.SHIFT_JIS))}catch(c){throw new mt(c)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new mt;for(var s=new Uint8Array(r),c=0;c<r;c++)s[c]=e.readBits(8);var f;i===null?f=kn.guessEncoding(s,o):f=i.getName();try{t.append(As.decode(s,f))}catch(h){throw new mt(h)}a.push(s)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new mt;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new mt;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new mt;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new mt;var i=e.readBits(10);if(i>=1e3)throw new mt;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new mt;var a=e.readBits(7);if(a>=100)throw new mt;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new mt;var o=e.readBits(4);if(o>=10)throw new mt;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new mt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),IE=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),$_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vj=function(){function n(){this.rsDecoder=new Lm(bo.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(oc.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new Fj(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new IE(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,s=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),h=Uj.getDataBlocks(f,s,c),p=0;try{for(var g=$_(h),m=g.next();!m.done;m=g.next()){var b=m.value;p+=b.getNumDataCodewords()}}catch(H){r={error:H}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var _=new Uint8Array(p),I=0;try{for(var C=$_(h),N=C.next();!N.done;N=C.next()){var b=N.value,j=b.getCodewords(),q=b.getNumDataCodewords();this.correctErrors(j,q);for(var Y=0;Y<q;Y++)_[I++]=j[Y]}}catch(H){a={error:H}}finally{try{N&&!N.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}return zj.decode(_,s,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Qi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),qj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hj=function(n){qj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(Rt),Wj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gj=function(){function n(e,t,r,i,a,o,s){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),s=this.image,c=0;c<t;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var h=e;h<i&&!s.get(h,f);)h++;for(var p=0;h<i;){if(s.get(h,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,h);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;h++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new He},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=e;c>=0&&a.get(t,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c)&&s[1]<=r;)s[1]++,c++;if(c===o||s[1]>r)return NaN;for(;c<o&&!a.get(t,c)&&s[2]<=r;)s[2]++,c++;if(s[2]>r)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],s=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var h=Wj(this.possibleCenters),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.aboutEquals(f,c,s))return g.combineEstimate(c,s,f)}}catch(b){i={error:b}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}var m=new Hj(s,c,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},n}(),$j=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yj=function(n){$j(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,s=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,c,a)},e}(Rt),Xj=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),S0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kj=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Mr.TRY_HARDER)!==void 0,r=e!=null&&e.get(Mr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*n.MAX_MODULES));(s<n.MIN_SKIP||t)&&(s=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),h=s-1;h<a&&!c;h+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,h))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,h,g,r);if(m===!0)if(s=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var b=this.findRowSkip();b>f[2]&&(h+=b-f[2]-s,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,h,o,r);m===!0&&(s=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return Rt.orderBestPatterns(_),new Xj(_)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var c=s.getHeight(),f=s.getWidth();for(o=1;e+o<c&&t+o<f&&s.get(t+o,e+o);)a[2]++,o++;if(e+o>=c||t+o>=f)return!1;for(;e+o<c&&t+o<f&&!s.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=c||t+o>=f||a[3]>=r)return!1;for(;e+o<c&&t+o<f&&s.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var h=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(h-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(t,c)&&s[3]<r;)s[3]++,c++;if(c===o||s[3]>=r)return NaN;for(;c<o&&a.get(t,c)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(c,t);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,t)&&s[3]<r;)s[3]++,c++;if(c===o||s[3]>=r)return NaN;for(;c<o&&a.get(c,t)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),s=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var c=a/7,f=!1,h=this.possibleCenters,p=0,g=h.length;p<g;p++){var m=h[p];if(m.aboutEquals(c,s,o)){h[p]=m.combineEstimate(s,o,c),f=!0;break}}if(!f){var b=new Yj(o,s,c);h.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=S0(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=n.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,s=this.possibleCenters.length;try{for(var c=S0(this.possibleCenters),f=c.next();!f.done;f=c.next()){var h=f.value;h.getCount()>=n.CENTER_QUORUM&&(a++,o+=h.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/s,g=0;try{for(var m=S0(this.possibleCenters),b=m.next();!b.done;b=m.next()){var h=b.value;g+=Math.abs(h.getEstimatedModuleSize()-p)}}catch(_){r={error:_}}finally{try{b&&!b.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return g<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new He;var o=this.possibleCenters,s;if(a>3){var c=0,f=0;try{for(var h=S0(this.possibleCenters),p=h.next();!p.done;p=h.next()){var g=p.value,m=g.getEstimatedModuleSize();c+=m,f+=m*m}}catch(Y){e={error:Y}}finally{try{p&&!p.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}s=c/a;var b=Math.sqrt(f/a-s*s);o.sort(function(Y,H){var P=Math.abs(H.getEstimatedModuleSize()-s),E=Math.abs(Y.getEstimatedModuleSize()-s);return P<E?-1:P>E?1:0});for(var _=Math.max(.2*s,b),I=0;I<o.length&&o.length>3;I++){var C=o[I];Math.abs(C.getEstimatedModuleSize()-s)>_&&(o.splice(I,1),I--)}}if(o.length>3){var c=0;try{for(var N=S0(o),j=N.next();!j.done;j=N.next()){var q=j.value;c+=q.getEstimatedModuleSize()}}catch(H){r={error:H}}finally{try{j&&!j.done&&(i=N.return)&&i.call(N)}finally{if(r)throw r.error}}s=c/o.length,o.sort(function(H,P){if(P.getCount()===H.getCount()){var E=Math.abs(P.getEstimatedModuleSize()-s),R=Math.abs(H.getEstimatedModuleSize()-s);return E<R?1:E>R?-1:0}else return P.getCount()-H.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Qj=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Mr.NEED_RESULT_POINT_CALLBACK);var t=new Kj(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new He("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),s=eh.getProvisionalVersionForDimension(o),c=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var h=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/c,m=Math.floor(t.getX()+g*(h-t.getX())),b=Math.floor(t.getY()+g*(p-t.getY())),_=4;_<=16;_<<=1)try{f=this.findAlignmentInRegion(a,m,b,_);break}catch(j){if(!(j instanceof He))throw j}var I=n.createTransform(t,r,i,f,o),C=n.sampleGrid(this.image,I,o),N;return f===null?N=[i,t,r]:N=[i,t,r,f],new cx(C,N)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,s,c,f,h;return i!==null?(s=i.getX(),c=i.getY(),f=o-3,h=f):(s=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),f=o,h=o),wE.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,h,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=ux.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=Wn.round(Rt.distance(e,t)/i),o=Wn.round(Rt.distance(e,r)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new He("Dimensions could be not found.")}return s},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,s=e-(r-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*o);return o=1,c<0?(o=t/(t-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,s,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var s=Math.abs(r-e),c=Math.abs(i-t),f=-s/2,h=e<r?1:-1,p=t<i?1:-1,g=0,m=r+h,b=e,_=t;b!==m;b+=h){var I=a?_:b,C=a?b:_;if(g===1===this.image.get(I,C)){if(g===2)return Wn.distance(b,_,e,t);g++}if(f+=c,f>0){if(_===i)break;_+=p,f-=s}}return g===2?Wn.distance(r+h,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),s=Math.min(this.image.getWidth()-1,t+a);if(s-o<e*3)throw new He("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-c<e*3)throw new He("Alignment bottom exceeds estimated module size.");var h=new Gj(this.image,o,c,s-o,f-c,e,this.resultPointCallback);return h.find()},n}(),Ty=function(){function n(){this.decoder=new Vj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Mr.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new Qj(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof IE&&r.getOther().applyMirroredCorrection(i);var s=new Fa(r.getText(),r.getRawBytes(),void 0,i,jt.QR_CODE,void 0),c=r.getByteSegments();c!==null&&s.putMetadata(ha.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&s.putMetadata(ha.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(s.putMetadata(ha.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(ha.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new He;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],c=r[0];if(s>=c||a>=o)throw new He;if(o-a!==c-s&&(c=s+(o-a),c>=e.getWidth()))throw new He;var f=Math.round((c-s+1)/i),h=Math.round((o-a+1)/i);if(f<=0||h<=0)throw new He;if(h!==f)throw new He;var p=Math.floor(i/2);a+=p,s+=p;var g=s+Math.floor((f-1)*i)-c;if(g>0){if(g>p)throw new He;s-=g}var m=a+Math.floor((h-1)*i)-o;if(m>0){if(m>p)throw new He;a-=m}for(var b=new oc(f,h),_=0;_<h;_++)for(var I=a+Math.floor(_*i),C=0;C<f;C++)e.get(s+Math.floor(C*i),I)&&b.set(C,_);return b},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],s=!0,c=0;a<i&&o<r;){if(s!==t.get(a,o)){if(++c===5)break;s=!s}a++,o++}if(a===i||o===r)throw new He;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),Zj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ln=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Wn.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=Zj(e),s=o.next();!s.done;s=o.next()){var c=s.value;i[a++]=c}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Li.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),Jj=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),eB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tB=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new Jj(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,s=0,c=!1;o<t.getHeight();){var f=n.findVertices(t,o,s);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,s=0;try{for(var h=(r=void 0,eB(a)),p=h.next();!p.done;p=h.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(c=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var s=new Array(4),c=!1,f=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var h=n.findGuardPattern(e,a,i,r,!1,o,f);if(h!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,o,f);if(p!=null)h=p;else{i++;break}}s[0]=new Rt(h[0],i),s[1]=new Rt(h[1],i),c=!0;break}}var g=i+1;if(c){for(var m=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);g<t;g++){var h=n.findGuardPattern(e,p[0],g,r,!1,o,f);if(h!=null&&Math.abs(p[0]-h[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-h[1])<n.MAX_PATTERN_DRIFT)p=h,m=0;else{if(m>n.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,s[2]=new Rt(p[0],g),s[3]=new Rt(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&Li.fill(s,null),s},n.findGuardPattern=function(e,t,r,i,a,o,s){Li.fillWithin(s,0,s.length,0);for(var c=t,f=0;e.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var h=c,p=0,g=o.length,m=a;h<i;h++){var b=e.get(h,r);if(b!==m)s[p]++;else{if(p===g-1){if(n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,h]);c+=s[0]+s[1],Ar.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,m=!m}}return p===g-1&&n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,h-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return 1/0;var c=a/o;r*=c;for(var f=0,h=0;h<i;h++){var p=e[h],g=t[h]*c,m=p>g?p-g:g-p;if(m>r)return 1/0;f+=m}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),nB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zf=function(){function n(e,t){if(t.length===0)throw new Bt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ar.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=nB(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(p){t={error:p}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,h=1;h<f;h++)c=this.field.add(this.field.multiply(e,c),this.coefficients[h]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Ar.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=this.field.add(t[s-o],r[s]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=0;s<r;s++)for(var c=t[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(c,i[f]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Bt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new un,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),rB=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Bt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new bE;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),iB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aB=function(n){iB(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Zf(i,new Int32Array([0])),i.one=new Zf(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Bt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Zf(this,i)},e.PDF417_GF=new e(Ln.NUMBER_OF_CODEWORDS,3),e}(rB),oB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sB=function(){function n(){this.field=aB.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Zf(this.field,e),s=new Int32Array(t),c=!1,f=t;f>0;f--){var h=o.evaluateAt(this.field.exp(f));s[t-f]=h,h!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=oB(r),m=g.next();!m.done;m=g.next()){var b=m.value,_=this.field.exp(e.length-1-b),I=new Zf(this.field,new Int32Array([this.field.subtract(0,_),1]));p=p.multiply(I)}}catch(E){i={error:E}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var C=new Zf(this.field,s),N=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),C,t),j=N[0],q=N[1],Y=this.findErrorLocations(j),H=this.findErrorMagnitudes(q,j,Y),f=0;f<Y.length;f++){var P=e.length-1-this.field.log(Y[f]);if(P<0)throw Qi.getChecksumInstance();e[P]=this.field.subtract(e[P],H[f])}return Y.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,s=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(r/2);){var f=a,h=s;if(a=o,s=c,a.isZero())throw Qi.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var b=o.getDegree()-a.getDegree(),_=this.field.multiply(o.getCoefficient(o.getDegree()),m);p=p.add(this.field.buildMonomial(b,_)),o=o.subtract(a.multiplyByMonomial(b,_))}c=p.multiply(s).subtract(h).negative()}var I=c.getCoefficient(0);if(I===0)throw Qi.getChecksumInstance();var C=this.field.inverse(I),N=c.multiply(C),j=o.multiply(C);return[N,j]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Qi.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new Zf(this.field,a),c=r.length,f=new Int32Array(c),o=0;o<c;o++){var h=this.field.inverse(r[o]),p=this.field.subtract(0,e.evaluateAt(h)),g=this.field.inverse(s.evaluateAt(h));f[o]=this.field.multiply(p,g)}return f},n}(),Ry=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,s=i==null||a==null;if(o&&s)throw new He;o?(t=new Rt(0,i.getY()),r=new Rt(0,a.getY())):s&&(i=new Rt(e.getWidth()-1,t.getY()),a=new Rt(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var h=new Rt(c.getX(),f);r?i=h:o=h}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new Rt(p.getX(),g);r?a=m:s=m}return new n(this.image,i,a,o,s)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),lB=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),hx=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,s,c,f,h,p){if(o==="%%")return"%";if(t[++r]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=h?parseInt(h.substr(1)):void 0,m;switch(p){case"s":m=t[r];break;case"c":m=t[r][0];break;case"f":m=parseFloat(t[r]).toFixed(o);break;case"p":m=parseFloat(t[r]).toPrecision(o);break;case"e":m=parseFloat(t[r]).toExponential(o);break;case"x":m=parseInt(t[r]).toString(g||16);break;case"d":m=parseFloat(parseInt(t[r],g||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var b=parseInt(c),_=c&&c[0]+""=="0"?"0":" ";m.length<b;)m=s!==void 0?m+_:_+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),cB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TE=function(){function n(e){this.boundingBox=new Ry(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new hx,i=0;try{for(var a=cB(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),uB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fB=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},U0=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var o=uB(this.values.entries()),s=o.next();!s.done;s=o.next()){var c=fB(s.value,2),f=c[0],h=c[1];a(f,h)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return Ln.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),hB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_v=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y_=function(n){hB(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=_v(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,h=1,p=0,g=s;g<c;g++)if(r[g]!=null){var m=r[g],b=m.getRowNumber()-f;if(b===0)p++;else if(b===1)h=Math.max(h,p),p=1,f=m.getRowNumber();else if(b<0||m.getRowNumber()>=t.getRowCount()||b>g)r[g]=null;else{var _=void 0;h>2?_=(h-2)*b:_=b;for(var I=_>=g,C=1;C<=_&&!I;C++)I=r[g-C]!=null;I?r[g]=null:(f=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=_v(this.getCodewords()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,h=o;h<s;h++)if(c[h]!=null){var p=c[h];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[h]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new U0,o=new U0,s=new U0,c=new U0;try{for(var f=_v(i),h=f.next();!h.done;h=f.next()){var p=h.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:o.setValue(g*3+1);break;case 1:c.setValue(g/3),s.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(_){t={error:_}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<Ln.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>Ln.MAX_ROWS_IN_BARCODE)return null;var b=new lB(a.getValue()[0],o.getValue()[0],s.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,b),b},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(TE),dB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pB=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ln.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],s=this.detectionResultColumns[e-1].getCodewords(),c=s;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[t],f[3]=c[t],t>0&&(f[0]=r[t-1],f[4]=s[t-1],f[5]=c[t-1]),t>1&&(f[8]=r[t-2],f[10]=s[t-2],f[11]=c[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=s[t+1],f[7]=c[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=s[t+2],f[13]=c[t+2]);try{for(var h=dB(f),p=h.next();!p.done;p=h.next()){var g=p.value;if(n.adjustRowNumber(o,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new hx,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),gB=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),mB=function(){function n(){}return n.initialize=function(){for(var e=0;e<Ln.SYMBOL_TABLE.length;e++)for(var t=Ln.SYMBOL_TABLE[e],r=t&1,i=0;i<Ln.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Ln.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Ln.BARS_IN_MODULE-i-1]=Math.fround(a/Ln.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Wn.sum(e),r=new Int32Array(Ln.BARS_IN_MODULE),i=0,a=0,o=0;o<Ln.MODULES_IN_CODEWORD;o++){var s=t/(2*Ln.MODULES_IN_CODEWORD)+o*t/Ln.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Ln.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Wn.sum(e),r=new Array(Ln.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=Ay.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var s=0;s<n.RATIOS_TABLE.length;s++){for(var c=0,f=n.RATIOS_TABLE[s],h=0;h<Ln.BARS_IN_MODULE;h++){var p=Math.fround(f[h]-r[h]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,o=Ln.SYMBOL_TABLE[s])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Ln.SYMBOL_TABLE.length).map(function(e){return new Array(Ln.BARS_IN_MODULE)}),n}(),vB=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),X_=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),yB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xB=function(n){yB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Eo),bB=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new xB;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new sx;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),wB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_B=function(n){wB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Eo),AB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EB=function(n){AB(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Bt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new _B;i=gn.MAX_VALUE}this.buf=Li.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new sx;this.ensureCapacity(this.count+i),Ar.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Li.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(bB),gr;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(gr||(gr={}));function RE(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var zp;function Yu(n){if(typeof zp>"u"&&(zp=RE()),zp===null)throw new Error("BigInt is not supported!");return zp(n)}function SB(){var n=[];n[0]=Yu(1);var e=Yu(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var CB=function(){function n(){}return n.decode=function(e,t){var r=new un(""),i=Pi.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],s=new vB;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Pi.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,s);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new mt;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw mt.getFormatInstance()}if(r.length()===0)throw mt.getFormatInstance();var c=new Pm(null,r.toString(),null,t);return c.setOther(s),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw mt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(gn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new un;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var s=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new un;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new un;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new un;t=n.textCompaction(e,t+1,h),r.setAddressee(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new un;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(gn.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new un;t=n.numericCompaction(e,t+1,g),r.setTimestamp(X_.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new un;t=n.numericCompaction(e,t+1,m),r.setChecksum(gn.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var b=new un;t=n.numericCompaction(e,t+1,b),r.setFileSize(X_.parseLong(b.toString()));break;default:throw mt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw mt.getFormatInstance()}if(s!==-1){var _=t-s;r.isLastSegment()&&_--,r.setOptionalData(Li.copyOfRange(e,s,s+_))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[o]=c,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=gr.ALPHA,o=gr.ALPHA,s=0;s<r;){var c=e[s],f="";switch(a){case gr.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:a=gr.LOWER;break;case n.ML:a=gr.MIXED;break;case n.PS:o=a,a=gr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=gr.ALPHA;break}break;case gr.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:o=a,a=gr.ALPHA_SHIFT;break;case n.ML:a=gr.MIXED;break;case n.PS:o=a,a=gr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=gr.ALPHA;break}break;case gr.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:a=gr.PUNCT;break;case 26:f=" ";break;case n.LL:a=gr.LOWER;break;case n.AL:a=gr.ALPHA;break;case n.PS:o=a,a=gr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=gr.ALPHA;break}break;case gr.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=gr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=gr.ALPHA;break}break;case gr.ALPHA_SHIFT:if(a=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=gr.ALPHA;break}break;case gr.PUNCT_SHIFT:if(a=o,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=gr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=gr.ALPHA;break}break}f!==""&&i.append(f),s++}},n.byteCompaction=function(e,t,r,i,a){var o=new EB,s=0,c=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(h[s++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Yu(c)>>Yu(8*(5-g))));c=0,s=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(h[s++]=p);for(var m=0;m<s;m++)o.write(h[m]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var b=t[i++];if(b<n.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+b;else switch(b){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Yu(c)>>Yu(8*(5-g))));c=0,s=0}}break}return a.append(As.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var s=e[t++];if(t===e[0]&&(a=!0),s<n.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||s===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Yu(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Yu(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new mt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=RE()?SB():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),C0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IB=function(){function n(){}return n.decode=function(e,t,r,i,a,o,s){for(var c=new Ry(e,t,r,i,a),f=null,h=null,p,g=!0;;g=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,c,t,!0,o,s)),i!=null&&(h=n.getRowIndicatorColumn(e,c,i,!1,o,s)),p=n.merge(f,h),p==null)throw He.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<c.getMinY()||m.getMaxY()>c.getMaxY()))c=m;else break}p.setBoundingBox(c);var b=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(b,h);for(var _=f!=null,I=1;I<=b;I++){var C=_?I:b-I;if(p.getDetectionResultColumn(C)===void 0){var N=void 0;C===0||C===b?N=new Y_(c,C===0):N=new TE(c),p.setDetectionResultColumn(C,N);for(var j=-1,q=j,Y=c.getMinY();Y<=c.getMaxY();Y++){if(j=n.getStartColumn(p,C,Y,_),j<0||j>c.getMaxX()){if(q===-1)continue;j=q}var H=n.detectCodeword(e,c.getMinX(),c.getMaxX(),_,j,Y,o,s);H!=null&&(N.setCodeword(Y,H),q=j,o=Math.min(o,H.getWidth()),s=Math.max(s,H.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Ry.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new pB(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var s=C0(i),c=s.next();!c.done;c=s.next()){var f=c.value;if(o+=a-f,f>0)break}}catch(m){t={error:m}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}for(var h=e.getCodewords(),p=0;o>0&&h[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=h.length-1;g>0&&h[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=C0(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var s=new Y_(t,i),c=0;c<2;c++)for(var f=c===0?1:-1,h=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var g=n.detectCodeword(e,0,e.getWidth(),i,h,p,a,o);g!=null&&(s.setCodeword(p,g),i?h=g.getStartX():h=g.getEndX())}return s},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Ln.MAX_CODEWORDS_IN_BARCODE)throw He.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[s][c+1].getValue(),h=s*e.getBarcodeColumnCount()+c;f.length===0?r.push(h):f.length===1?i[h]=f[0]:(o.push(h),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ln.toIntArray(r),Ln.toIntArray(o),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var c=0;c<o.length;c++)t[i[c]]=a[c][o[c]];try{return n.decodeCodewords(t,e,r)}catch(h){var f=h instanceof Qi;if(!f)throw h}if(o.length===0)throw Qi.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Qi.getChecksumInstance()}throw Qi.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++)o[s][c]=new U0;var f=0;try{for(var h=C0(e.getDetectionResultColumns()),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,C0(g.getCodewords())),b=m.next();!b.done;b=m.next()){var _=b.value;if(_!=null){var I=_.getRowNumber();if(I>=0){if(I>=o.length)continue;o[I][f].setValue(_.getValue())}}}}catch(C){i={error:C}}finally{try{b&&!b.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}f++}}catch(C){t={error:C}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,s=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var h=(a=void 0,C0(e.getDetectionResultColumn(t).getCodewords())),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+s*f*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,s,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var f=n.getModuleBitCount(e,t,r,i,a,o);if(f==null)return null;var h,p=Wn.sum(f);if(i)h=a+p;else{for(var g=0;g<f.length/2;g++){var m=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=m}h=a,a=h-p}if(!n.checkCodewordSkew(p,s,c))return null;var b=mB.getDecodedValue(f),_=Ln.getCodeword(b);return _===-1?null:new gB(a,h,n.getCodewordBucketNumber(b),_)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var s=a,c=new Int32Array(8),f=0,h=i?1:-1,p=i;(i?s<r:s>=t)&&f<c.length;)e.get(s,o)===p?(c[f]++,s+=h):(f++,p=!p);return f===c.length||s===(i?r:t)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var s=a,c=i?-1:1,f=0;f<2;f++){for(;(i?s>=t:s<r)&&i===e.get(s,o);){if(Math.abs(a-s)>n.CODEWORD_SKEW_SIZE)return a;s+=c}c=-c,i=!i}return s},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw mt.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=CB.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Qi.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw mt.getFormatInstance();var r=e[0];if(r>e.length)throw mt.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw mt.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new hx,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new sB,n}(),TB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ny=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw He.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof mt||r instanceof Qi?He.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,s=tB.detectMultiple(e,t,r);try{for(var c=TB(s.getPoints()),f=c.next();!f.done;f=c.next()){var h=f.value,p=IB.decode(s.getBits(),h[4],h[5],h[6],h[7],n.getMinCodewordWidth(h),n.getMaxCodewordWidth(h)),g=new Fa(p.getText(),p.getRawBytes(),void 0,h,jt.PDF_417);g.putMetadata(ha.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(ha.PDF417_EXTRA_METADATA,m),o.push(g)}}catch(b){i={error:b}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(b){return b})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?gn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Ln.MODULES_IN_CODEWORD/Ln.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Ln.MODULES_IN_CODEWORD/Ln.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Ln.MODULES_IN_CODEWORD/Ln.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Ln.MODULES_IN_CODEWORD/Ln.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),RB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),K_=function(n){RB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Eo),Q_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NB=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Mr.TRY_HARDER)!==void 0,r=e==null?null:e.get(Mr.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===jt.UPC_A||o===jt.UPC_E||o===jt.EAN_13||o===jt.EAN_8||o===jt.CODABAR||o===jt.CODE_39||o===jt.CODE_93||o===jt.CODE_128||o===jt.ITF||o===jt.RSS_14||o===jt.RSS_EXPANDED});a&&!t&&i.push(new F0(e)),r.includes(jt.QR_CODE)&&i.push(new Ty),r.includes(jt.DATA_MATRIX)&&i.push(new Iy),r.includes(jt.AZTEC)&&i.push(new Sy),r.includes(jt.PDF_417)&&i.push(new Ny),a&&t&&i.push(new F0(e))}i.length===0&&(t||i.push(new F0(e)),i.push(new Ty),i.push(new Iy),i.push(new Sy),i.push(new Ny),t&&i.push(new F0(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=Q_(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new K_("No readers where selected, nothing can be read.");try{for(var i=Q_(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof K_)continue}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new He("No MultiFormat Readers were able to detect the code.")},n}(),DB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OB=function(n){DB(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new NB;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Ld),kB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){kB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ny,t)||this}return e})(Ld);var PB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){PB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ty,t)||this}return e})(Ld);var Dy;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Dy||(Dy={}));const Vp=Dy;var NE=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new of(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new of(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Bt("No error correction bytes");var r=e.length-t;if(r<=0)throw new Bt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Ar.arraycopy(e,0,a,0,r);var o=new of(this.field,a);o=o.multiplyByMonomial(t,1);for(var s=o.divide(i)[1],c=s.getCoefficients(),f=t-c.length,h=0;h<f;h++)e[r+h]=0;Ar.arraycopy(c,0,e,r+f,c.length)},n}(),z0=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=r[o],c=0;c<i-1;c++){var f=s[c];f===s[c+1]&&f===r[o+1][c]&&f===r[o+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var c=r[o];s+6<i&&c[s]===1&&c[s+1]===0&&c[s+2]===1&&c[s+3]===1&&c[s+4]===1&&c[s+5]===0&&c[s+6]===1&&(n.isWhiteHorizontal(c,s-4,s)||n.isWhiteHorizontal(c,s+7,s+11))&&t++,o+6<a&&r[o][s]===1&&r[o+1][s]===0&&r[o+2][s]===1&&r[o+3][s]===1&&r[o+4][s]===1&&r[o+5][s]===0&&r[o+6][s]===1&&(n.isWhiteVertical(r,s,o-4,o)||n.isWhiteVertical(r,s,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=r[o],c=0;c<i;c++)s[c]===1&&t++;var f=e.getHeight()*e.getWidth(),h=Math.floor(Math.abs(t*2-f)*10/f);return h*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Bt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var c=0,f=-1,h=0;h<a;h++){var p=t?o[s][h]:o[h][s];p===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),LB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MB=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=LB(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Li.fill(o,e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],s=0,c=this.width;s<c;++s)if(a[s]!==o[s])return!1;return!0},n.prototype.toString=function(){for(var e=new un,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Oy=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new un;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),jB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ir=function(n){jB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Eo),Z_=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Zi;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],f=c[0],h=c[1];if(r.setBoolean(f,h,s),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,s)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,s)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Zi;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,a,s)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,s=r.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<r.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(n.isEmpty(r.get(f,s))){var h=void 0;i<e.getSize()?(h=e.get(i),++i):h=!1,t!==255&&z0.getDataMaskBit(t,f,s)&&(h=!h),r.setBoolean(f,s,h)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new Ir("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-gn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Bt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Oy.isValidMaskPattern(t))throw new Ir("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Zi;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Ir("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Ir("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ir;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Ir;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Ir;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var c=0;c!==o;c++){var f=i[c];f>=0&&n.isEmpty(t.get(f,s))&&n.embedPositionAdjustmentPattern(f-2,s-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),BB=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),J_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return z0.applyMaskPenaltyRule1(e)+z0.applyMaskPenaltyRule2(e)+z0.applyMaskPenaltyRule3(e)+z0.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Vp.CHARACTER_SET)!==void 0;a&&(i=r.get(Vp.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new Zi;if(o===Tr.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Pi.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,s)}this.appendModeInfo(o,s);var f=new Zi;this.appendBytes(e,o,f,i);var h;if(r!==null&&r.get(Vp.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Vp.QR_VERSION).toString(),10);h=eh.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,s,f,h);if(!this.willFit(g,h,t))throw new Ir("Data too big for requested version")}else h=this.recommendVersion(t,o,s,f);var m=new Zi;m.appendBitArray(s);var b=o===Tr.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(b,h,o,m),m.appendBitArray(f);var _=h.getECBlocksForLevel(t),I=h.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(I,m);var C=this.interleaveWithECBytes(m,h.getTotalCodewords(),I,_.getNumBlocks()),N=new Oy;N.setECLevel(t),N.setMode(o),N.setVersion(h);var j=h.getDimensionForVersion(),q=new MB(j,j),Y=this.chooseMaskPattern(C,t,h,q);return N.setMaskPattern(Y),Z_.buildMatrix(C,t,h,Y,q),N.setMatrix(q),N},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,eh.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(s,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Pi.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Tr.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(n.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Tr.BYTE}return i?Tr.ALPHANUMERIC:r?Tr.NUMERIC:Tr.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=As.encode(e,Pi.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Oy.NUM_MASK_PATTERNS;s++){Z_.buildMatrix(e,t,r,s,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=s)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=eh.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Ir("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),s=i-o,c=(e+7)/8;return s>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Ir("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Ir("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Ir("Block ID too large");var s=e%r,c=r-s,f=Math.floor(e/r),h=f+1,p=Math.floor(t/r),g=p+1,m=f-p,b=h-g;if(m!==b)throw new Ir("EC bytes mismatch");if(r!==c+s)throw new Ir("RS blocks mismatch");if(e!==(p+m)*c+(g+b)*s)throw new Ir("Total bytes mismatch");i<c?(a[0]=p,o[0]=m):(a[0]=g,o[0]=b)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,s,c;if(e.getSizeInBytes()!==r)throw new Ir("Number of bits and data bytes does not match");for(var f=0,h=0,p=0,g=new Array,m=0;m<i;++m){var b=new Int32Array(1),_=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,m,b,_);var I=b[0],C=new Uint8Array(I);e.toBytes(8*f,C,0,I);var N=n.generateECBytes(C,_[0]);g.push(new BB(C,N)),h=Math.max(h,I),p=Math.max(p,N.length),f+=b[0]}if(r!==f)throw new Ir("Data bytes does not match offset");for(var j=new Zi,m=0;m<h;++m)try{for(var q=(a=void 0,J_(g)),Y=q.next();!Y.done;Y=q.next()){var H=Y.value,C=H.getDataBytes();m<C.length&&j.appendBits(C[m],8)}}catch(L){a={error:L}}finally{try{Y&&!Y.done&&(o=q.return)&&o.call(q)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var P=(s=void 0,J_(g)),E=P.next();!E.done;E=P.next()){var H=E.value,N=H.getErrorCorrectionBytes();m<N.length&&j.appendBits(N[m],8)}}catch(L){s={error:L}}finally{try{E&&!E.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}if(t!==j.getSizeInBytes())throw new Ir("Interleaving error: "+t+" and "+j.getSizeInBytes()+" differ.");return j},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new NE(bo.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Ir(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Tr.NUMERIC:n.appendNumericBytes(e,r);break;case Tr.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Tr.BYTE:n.append8BitBytes(e,r,i);break;case Tr.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Ir("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),s=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Ir;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Ir;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=As.encode(e,r)}catch(c){throw new Ir(c)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];t.appendBits(s,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=As.encode(e,Pi.SJIS)}catch(p){throw new Ir(p)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,s=r[a+1]&255,c=o<<8&4294967295|s,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Ir("Invalid byte sequence");var h=(f>>8)*192+(f&255);t.appendBits(h,13)}},n.appendECI=function(e,t){t.appendBits(Tr.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Pi.UTF8.getName(),n})();var FB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){FB(e,n);function e(t,r,i,a,o,s,c,f){var h=n.call(this,s,c)||this;if(h.yuvData=t,h.dataWidth=r,h.dataHeight=i,h.left=a,h.top=o,a+s>r||o+c>i)throw new Bt("Crop rectangle does not fit within image data.");return f&&h.reverseHorizontal(s,c),h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Ar.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ar.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<r;s++){var c=s*t;Ar.arraycopy(this.yuvData,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var c=s*t,f=0;f<t;f++){var h=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|h*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var s=o+t/2,c=o,f=o+t-1;c<s;c++,f--){var h=i[c];i[c]=i[f],i[f]=h}},e.prototype.invert=function(){return new lx(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(km);var UB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){UB(e,n);function e(t,r,i,a,o,s,c){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=c,t.BYTES_PER_ELEMENT===4){for(var h=r*i,p=new Uint8ClampedArray(h),g=0;g<h;g++){var m=t[g],b=m>>16&255,_=m>>7&510,I=m&255;p[g]=(b+_+I)/4&255}f.luminances=p}else f.luminances=t;if(a===void 0&&(f.dataWidth=r),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Bt("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Ar.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ar.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<r;s++){var c=s*t;Ar.arraycopy(this.luminances,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new lx(this)},e})(km);var zB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VB=function(n){zB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Pi),qB=function(){function n(){}return n.ISO_8859_1=Pi.ISO8859_1,n}(),ky,HB=301,WB=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=HB);return{LOG:n,ALOG:e}};ky=WB([],[]),ky.LOG;ky.ALOG;var e4;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(e4||(e4={}));var t4=129,DE=230,GB=231,$B=235,YB=236,XB=237,KB=238,QB=239,ZB=240,Av=254,JB=254,n4="[)>05",r4="[)>06",i4="",or=0,la=1,Ka=2,Oi=3,Yi=4,ka=5,eF=function(){function n(){}return n.prototype.getEncodingMode=function(){return or},n.prototype.encode=function(e){var t=ol.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case ka:e.writeCodeword(GB),e.signalEncoderChange(ka);return;case la:e.writeCodeword(DE),e.signalEncoderChange(la);return;case Oi:e.writeCodeword(KB),e.signalEncoderChange(Oi);break;case Ka:e.writeCodeword(QB),e.signalEncoderChange(Ka);break;case Yi:e.writeCodeword(ZB),e.signalEncoderChange(Yi);break;default:throw new Error("Illegal mode: "+i)}else ol.isExtendedASCII(r)?(e.writeCodeword($B),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(ol.isDigit(e)&&ol.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),tF=function(){function n(){}return n.prototype.getEncodingMode=function(){return ka},n.prototype.encode=function(e){var t=new un;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(or);break}}var a=t.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,kn.getCharAt(a));else if(a<=1555)t.setCharAt(0,kn.getCharAt(Math.floor(a/250)+249)),t.insert(1,kn.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),dx=function(){function n(){}return n.prototype.getEncodingMode=function(){return la},n.prototype.encodeMaximal=function(e){for(var t=new un,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var s=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,h=Math.floor(t.length()%3);(h===2&&f!==2||h===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(DE),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new un;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new un;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var f=t.length();if(f%3===0){var h=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(h!==this.getEncodingMode()){e.signalEncoderChange(or);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Av)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Av),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Av)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(or)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new un;return a.append(r),a.append(i),a.toString()},n}(),nF=function(){function n(){}return n.prototype.getEncodingMode=function(){return Yi},n.prototype.encode=function(e){for(var t=new un;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(or);break}}}t.append(kn.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,s=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(or)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(kn.getCharAt(e-64)):ol.illegalCharacter(kn.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(r<<18)+(i<<12)+(a<<6)+o,c=s>>16&255,f=s>>8&255,h=s&255,p=new un;return p.append(c),t>=2&&p.append(f),t>=3&&p.append(h),p.toString()},n}(),rF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=function(){function n(e,t,r,i,a,o,s,c){s===void 0&&(s=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var o,s;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=iF(oF),f=c.next();!f.done;f=c.next()){var h=f.value;if(!(t===1&&h.rectangular)&&!(t===2&&!h.rectangular)&&!(r!=null&&(h.getSymbolWidth()<r.getWidth()||h.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(h.getSymbolWidth()>i.getWidth()||h.getSymbolHeight()>i.getHeight()))&&e<=h.dataCapacity)return h}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),aF=function(n){rF(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Xn),oF=[new Xn(!1,3,5,8,8,1),new Xn(!1,5,7,10,10,1),new Xn(!0,5,7,16,6,1),new Xn(!1,8,10,12,12,1),new Xn(!0,10,11,14,6,2),new Xn(!1,12,12,14,14,1),new Xn(!0,16,14,24,10,1),new Xn(!1,18,14,16,16,1),new Xn(!1,22,18,18,18,1),new Xn(!0,22,18,16,10,2),new Xn(!1,30,20,20,20,1),new Xn(!0,32,24,16,14,2),new Xn(!1,36,24,22,22,1),new Xn(!1,44,28,24,24,1),new Xn(!0,49,28,22,14,2),new Xn(!1,62,36,14,14,4),new Xn(!1,86,42,16,16,4),new Xn(!1,114,48,18,18,4),new Xn(!1,144,56,20,20,4),new Xn(!1,174,68,22,22,4),new Xn(!1,204,84,24,24,4,102,42),new Xn(!1,280,112,14,14,16,140,56),new Xn(!1,368,144,16,16,16,92,36),new Xn(!1,456,192,18,18,16,114,48),new Xn(!1,576,224,20,20,16,144,56),new Xn(!1,696,272,22,22,16,174,68),new Xn(!1,816,336,24,24,16,136,56),new Xn(!1,1050,408,18,18,36,175,68),new Xn(!1,1304,496,20,20,36,163,62),new aF],sF=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),r=new un,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new un,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Xn.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),lF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cF=function(n){lF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Oi},e.prototype.encode=function(t){for(var r=new un;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=ol.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(or);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):ol.illegalCharacter(kn.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(JB),t.getNewEncoding()<0&&t.signalEncoderChange(or)},e}(dx),uF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fF=function(n){uF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ka},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(dx),ol=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=t4+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new dx,s=[new eF,o,new fF,new cF,new nF,new tF],c=new sF(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(n4)&&e.endsWith(i4)?(c.writeCodeword(YB),c.setSkipAtEnd(2),c.pos+=n4.length):e.startsWith(r4)&&e.endsWith(i4)&&(c.writeCodeword(XB),c.setSkipAtEnd(2),c.pos+=r4.length);var f=or;for(a&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)s[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var h=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();h<p&&f!==or&&f!==ka&&f!==Yi&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append(t4);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Oi&&i===Oi){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return or}else if(r===Yi&&i===Yi){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return or}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===or?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(t+a===e.length){Li.fill(o,0),Li.fill(s,0);var c=this.findMinimums(i,s,gn.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[or]===c)return or;if(f===1){if(o[ka]>0)return ka;if(o[Yi]>0)return Yi;if(o[Ka]>0)return Ka;if(o[Oi]>0)return Oi}return la}var h=e.charCodeAt(t+a);if(a++,this.isDigit(h)?i[or]+=.5:this.isExtendedASCII(h)?(i[or]=Math.ceil(i[or]),i[or]+=2):(i[or]=Math.ceil(i[or]),i[or]++),this.isNativeC40(h)?i[la]+=2/3:this.isExtendedASCII(h)?i[la]+=8/3:i[la]+=4/3,this.isNativeText(h)?i[Ka]+=2/3:this.isExtendedASCII(h)?i[Ka]+=8/3:i[Ka]+=4/3,this.isNativeX12(h)?i[Oi]+=2/3:this.isExtendedASCII(h)?i[Oi]+=13/3:i[Oi]+=10/3,this.isNativeEDIFACT(h)?i[Yi]+=3/4:this.isExtendedASCII(h)?i[Yi]+=17/4:i[Yi]+=13/4,this.isSpecialB256(h)?i[ka]+=4:i[ka]++,a>=4){if(Li.fill(o,0),Li.fill(s,0),this.findMinimums(i,s,gn.MAX_VALUE,o),s[or]<this.min(s[ka],s[la],s[Ka],s[Oi],s[Yi]))return or;if(s[ka]<s[or]||s[ka]+1<this.min(s[la],s[Ka],s[Oi],s[Yi]))return ka;if(s[Yi]+1<this.min(s[ka],s[la],s[Ka],s[Oi],s[or]))return Yi;if(s[Ka]+1<this.min(s[ka],s[la],s[Yi],s[Oi],s[or]))return Ka;if(s[Oi]+1<this.min(s[ka],s[la],s[Yi],s[Ka],s[or]))return Oi;if(s[la]+1<this.min(s[or],s[ka],s[Yi],s[Ka])){if(s[la]<s[Oi])return la;if(s[la]===s[Oi]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Oi;if(!this.isNativeX12(g))break;p++}return la}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Li.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=gn.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Ev=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a4=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return As.encode(e,this.charset)!=null}catch{return!1}},n}(),hF=function(){function n(e,t,r){var i,a,o,s,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(R){return new a4(VB.forName(R))}),this.encoders=[];var h=[];h.push(new a4(qB.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var b=(i=void 0,Ev(h)),_=b.next();!_.done;_=b.next()){var I=_.value,C=e.charAt(g),N=C.charCodeAt(0);if(N===r||I.canEncode(C)){m=!0;break}}}catch(R){i={error:R}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}if(!m)try{for(var j=(o=void 0,Ev(this.ENCODERS)),q=j.next();!q.done;q=j.next()){var I=q.value;if(I.canEncode(e.charAt(g))){h.push(I),m=!0;break}}}catch(R){o={error:R}}finally{try{q&&!q.done&&(s=j.return)&&s.call(j)}finally{if(o)throw o.error}}m||(p=!0)}if(h.length===1&&!p)this.encoders=[h[0]];else{this.encoders=[];var Y=0;try{for(var H=Ev(h),P=H.next();!P.done;P=H.next()){var I=P.value;this.encoders[Y++]=I}}catch(R){c={error:R}}finally{try{P&&!P.done&&(f=H.return)&&f.call(H)}finally{if(c)throw c.error}}}var E=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){E=g;break}}this.priorityEncoderIndex=E}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return As.encode(kn.getCharAt(e),this.encoders[t].name)},n}(),dF=3,pF=function(){function n(e,t,r){this.fnc1=r;var i=new hF(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new un,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var s=e.charAt(i).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var h=c;h<f;h++)(s===o||t.canEncode(s,h))&&this.addEdge(r,i+1,new o4(s,t,h,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new o4[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var s=0;s<t.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][s],r);for(var s=0;s<t.length();s++)a[o-1][s]=null}for(var c=-1,f=gn.MAX_VALUE,s=0;s<t.length();s++)if(a[i][s]!=null){var h=a[i][s];h.cachedTotalSize<f&&(f=h.cachedTotalSize,c=s)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=t.encode(g.c,g.encoderIndex),o=m.length-1;o>=0;o--)p.unshift(m[o]&255);var b=g.previous===null?0:g.previous.encoderIndex;b!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var _=[],o=0;o<_.length;o++)_[o]=p[o];return _},n}(),o4=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,s=i===null?0:i.encoderIndex;s!==r&&(o+=dF),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),gF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var s4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(s4||(s4={}));(function(n){gF(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(pF);var mF=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),l4=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),vF=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),yF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),px=function(n){yF(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+gn.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(vF),xF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bF=function(n){xF(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(px);function wF(n,e,t){return new bF(n,e,t)}function I0(n,e,t){return new px(n,e,t)}var _F=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],sf=0,zg=1,ws=2,OE=3,Yl=4,AF=new px(null,0,0),Sv=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],EF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function SF(n){var e,t;try{for(var r=EF(n),i=r.next();!i.done;i=r.next()){var a=i.value;Li.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[sf][Yl]=0,n[zg][Yl]=0,n[zg][sf]=28,n[OE][Yl]=0,n[ws][Yl]=0,n[ws][sf]=15,n}var kE=SF(Li.createInt32Array(6,6)),CF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IF=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Sv[this.mode][e];i=I0(i,a&65535,a>>16),r+=a>>16}var o=e===ws?4:5;return i=I0(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===ws?4:5;return r=I0(r,kE[this.mode][e],i),r=I0(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Yl||this.mode===ws){var a=Sv[r][sf];t=I0(t,a&65535,a>>16),i+=a>>16,r=sf}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new n(t,r,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=wF(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Sv[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Zi;try{for(var s=CF(i),c=s.next();!c.done;c=s.next()){var f=c.value;f.appendTo(o,e)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return kn.format("%s bits=%d bytes=%d",_F[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(AF,sf,0,0),n}();function TF(n){var e=kn.getCharCode(" "),t=kn.getCharCode("."),r=kn.getCharCode(",");n[sf][e]=1;for(var i=kn.getCharCode("Z"),a=kn.getCharCode("A"),o=a;o<=i;o++)n[sf][o]=o-a+2;n[zg][e]=1;for(var s=kn.getCharCode("z"),c=kn.getCharCode("a"),o=c;o<=s;o++)n[zg][o]=o-c+2;n[ws][e]=1;for(var f=kn.getCharCode("9"),h=kn.getCharCode("0"),o=h;o<=f;o++)n[ws][o]=o-h+2;n[ws][r]=12,n[ws][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[OE][kn.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)kn.getCharCode(m[g])>0&&(n[Yl][kn.getCharCode(m[g])]=g);return n}var Cv=TF(Li.createInt32Array(5,256)),qp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RF=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=kn.getCharCode(" "),t=kn.getCharCode(`
`),r=l4.singletonList(IF.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case kn.getCharCode("\r"):a=o===t?2:0;break;case kn.getCharCode("."):a=o===e?3:0;break;case kn.getCharCode(","):a=o===e?4:0;break;case kn.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var s=l4.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=qp(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.updateStateForChar(c,t,a)}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Cv[e.getMode()][i]>0,o=null,s=0;s<=Yl;s++){var c=Cv[s][i];if(c>0){if(o==null&&(o=e.endBinaryShift(t)),!a||s===e.getMode()||s===ws){var f=o.latchAndAppend(s,c);r.push(f)}if(!a&&kE[e.getMode()][s]>=0){var h=o.shiftAndAppend(s,c);r.push(h)}}}if(e.getBinaryShiftByteCount()>0||Cv[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var s=qp(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForPair(f,t,r,o)}}catch(h){i={error:h}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Yl,r)),e.getMode()!==Yl&&i.push(a.shiftAndAppend(Yl,r)),r===3||r===4){var o=a.latchAndAppend(ws,16-r).latchAndAppend(ws,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var s=qp(e),c=s.next();!c.done;c=s.next()){var f=c.value,h=!0,p=function(I){if(I.isBetterThanOrEqualTo(f))return h=!1,"break";f.isBetterThanOrEqualTo(I)&&(o=o.filter(function(C){return C!==I}))};try{for(var g=(i=void 0,qp(o)),m=g.next();!m.done;m=g.next()){var b=m.value,_=p(b);if(_==="break")break}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}h&&o.push(f)}}catch(I){t={error:I}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n}(),NF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new RF(e).encode(),a=gn.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,s,c,f,h,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(s=r<0,c=Math.abs(r),c>(s?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Bt(kn.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,s),h=n.WORD_SIZE[c];var g=f-f%h;if(p=n.stuffBits(i,h),p.getSize()+a>g)throw new Bt("Data to large for user specified layer");if(s&&p.getSize()>h*64)throw new Bt("Data to large for user specified layer")}else{h=0,p=null;for(var m=0;;m++){if(m>n.MAX_NB_BITS)throw new Bt("Data too large for an Aztec code");if(s=m<=3,c=s?m+1:m,f=n.totalBitsInLayer(c,s),!(o>f)){(p==null||h!==n.WORD_SIZE[c])&&(h=n.WORD_SIZE[c],p=n.stuffBits(i,h));var g=f-f%h;if(!(s&&p.getSize()>h*64)&&p.getSize()+a<=g)break}}}var b=n.generateCheckWords(p,f,h),_=p.getSize()/h,I=n.generateModeMessage(s,c,_),C=(s?11:14)+c*4,N=new Int32Array(C),j;if(s){j=C;for(var m=0;m<N.length;m++)N[m]=m}else{j=C+1+2*gn.truncDivision(gn.truncDivision(C,2)-1,15);for(var q=gn.truncDivision(C,2),Y=gn.truncDivision(j,2),m=0;m<q;m++){var H=m+gn.truncDivision(m,15);N[q-m-1]=Y-H-1,N[q+m]=Y+H+1}}for(var P=new oc(j),m=0,E=0;m<c;m++){for(var R=(c-m)*4+(s?9:12),L=0;L<R;L++)for(var T=L*2,k=0;k<2;k++)b.get(E+T+k)&&P.set(N[m*2+k],N[m*2+L]),b.get(E+R*2+T+k)&&P.set(N[m*2+L],N[C-1-m*2-k]),b.get(E+R*4+T+k)&&P.set(N[C-1-m*2-k],N[C-1-m*2-L]),b.get(E+R*6+T+k)&&P.set(N[C-1-m*2-L],N[m*2+k]);E+=R*8}if(n.drawModeMessage(P,s,j,I),s)n.drawBullsEye(P,gn.truncDivision(j,2),5);else{n.drawBullsEye(P,gn.truncDivision(j,2),7);for(var m=0,L=0;m<gn.truncDivision(C,2)-1;m+=15,L+=16)for(var k=gn.truncDivision(j,2)&1;k<j;k+=2)P.set(gn.truncDivision(j,2)-L,k),P.set(gn.truncDivision(j,2)+L,k),P.set(k,gn.truncDivision(j,2)-L),P.set(k,gn.truncDivision(j,2)+L)}var B=new mF;return B.setCompact(s),B.setSize(j),B.setLayers(c),B.setCodeWords(_),B.setMatrix(P),B},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Zi;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=gn.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+gn.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,s=new NE(n.getGF(r)),c=gn.truncDivision(t,r),f=n.bitsToWords(e,r,c);s.encode(f,c-o);var h=t%r,p=new Zi;p.appendBits(0,h);try{for(var g=NF(Array.from(f)),m=g.next();!m.done;m=g.next()){var b=m.value;p.appendBits(b,r)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var s=0,c=0;c<t;c++)s|=e.get(a*t+c)?1<<t-c-1:0;i[a]=s}return i},n.getGF=function(e){switch(e){case 4:return bo.AZTEC_PARAM;case 6:return bo.AZTEC_DATA_6;case 8:return bo.AZTEC_DATA_8;case 10:return bo.AZTEC_DATA_10;case 12:return bo.AZTEC_DATA_12;default:throw new Bt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Zi,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var s=0,c=0;c<t;c++)(o+c>=i||e.get(o+c))&&(s|=1<<t-1-c);(s&a)===a?(r.appendBits(s&a,t),o--):(s&a)===0?(r.appendBits(s|1,t),o--):r.appendBits(s,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const DF=({onScanSuccess:n,onClose:e})=>{const t=fe.useRef(null),r=fe.useRef(null);return fe.useEffect(()=>{const i=new OB;return r.current=i,i.decodeFromVideoDevice(null,t.current,a=>{a&&(i.reset(),n(a.getText()))}),()=>{try{i.reset()}catch{}}},[n]),y.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000e6",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[y.jsx("video",{ref:t,style:{width:"90%",maxWidth:"500px",borderRadius:"12px",border:"3px solid white"},muted:!0,autoPlay:!0,playsInline:!0}),y.jsx("button",{onClick:()=>{var i;(i=r.current)==null||i.reset(),e()},style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"סגור סורק"})]})};function PE(n){const e=[...new Set(n)].sort((t,r)=>t-r);for(let t=1;t<=e.length+1;t++)if(!e.includes(t))return t}async function c4({name:n,quantity:e,allowMerge:t=!1,existingItemId:r=null,imageUrl:i=null,publicComment:a="",internalComment:o="",createdBy:s="",updatedBy:c="",createdAt:f=null,updatedAt:h=null}){if(n=n.trim(),t&&r){const I=Er(Pt,"items",r),j=(await sr(ec(An(Pt,"items"),ic("__name__","==",r)))).docs[0].data().quantity+e,q={quantity:j};return i&&(q.imageUrl=i),await Za(I,q),{merged:!0,newQuantity:j}}const g=(await sr(An(Pt,"items"))).docs.map(I=>I.data().ItemId).filter(I=>typeof I=="number"),m=PE(g),b=An(Pt,"items"),_=Er(b);return await tx(_,{name:n,quantity:e,imageUrl:i,ItemId:m,isActive:!0,createdAt:f,updatedAt:h,createdBy:s,updatedBy:c,publicComment:a,internalComment:o}),{added:!0,ItemId:m}}async function OF(n,e=""){const t=Er(Pt,"items",n),r=await Sd(t);if(!r.exists())throw new Error("Item not found");const{ItemId:i,...a}=r.data();await Tm(An(Pt,"deletedItems"),{...a,deletedAt:Ai(),deletedBy:e}),await Im(t)}async function kF(n,e=""){const t=Er(Pt,"deletedItems",n),r=await Sd(t);if(!r.exists())throw new Error("Deleted item not found");const i=r.data(),o=(await sr(An(Pt,"items"))).docs.map(c=>c.data().ItemId).filter(c=>typeof c=="number"),s=PE(o);await tx(Er(An(Pt,"items")),{...i,ItemId:s,createdAt:Ai(),updatedAt:Ai(),createdBy:e,updatedBy:e,isActive:!0}),await Im(t)}async function PF(n){const e=ec(An(Pt,"items"),ic("ItemId","==",Number(n))),t=await sr(e);if(!t.empty){const r=t.docs[0];return{id:r.id,...r.data()}}throw new Error("לא נמצא מוצר עם ברקוד זה")}const LF=({item:n,onConfirm:e,onCancel:t})=>{const[r,i]=fe.useState(1),a=r>=1&&r<=n.quantity;return y.jsx("div",{className:"modal-overlay",children:y.jsxs("div",{className:"modal-box",dir:"rtl",children:[y.jsx("h3",{style:{textAlign:"center"},children:n.name}),y.jsx("img",{src:n.imageUrl,alt:n.name,style:{width:"100%",maxHeight:"200px",objectFit:"cover"}}),y.jsxs("p",{children:["מזהה מוצר: ",n.ItemId]}),y.jsxs("p",{children:["כמות זמינה: ",n.quantity]}),y.jsxs("div",{style:{marginTop:"1rem"},children:[y.jsx("label",{children:"בחר כמות:"}),y.jsx("input",{type:"number",value:r,min:1,max:n.quantity,onChange:o=>i(+o.target.value),style:{width:"100%",padding:"10px",marginTop:"0.5rem",border:a?"1px solid #ccc":"2px solid red"}}),!a&&y.jsxs("p",{style:{color:"red",marginTop:"0.5rem"},children:["כמות לא תקינה. יש לבחור בין 1 ל־",n.quantity]})]}),y.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between"},children:[y.jsx("button",{className:"btn btn-red",onClick:t,children:"ביטול"}),y.jsx("button",{className:"btn btn-green",onClick:()=>e(r),disabled:!a,children:"אישור"})]})]})})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jF=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),u4=n=>{const e=jF(n);return e.charAt(0).toUpperCase()+e.slice(1)},LE=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),BF=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=fe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},c)=>fe.createElement("svg",{ref:c,...FF,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:LE("lucide",i),...!a&&!BF(s)&&{"aria-hidden":"true"},...s},[...o.map(([f,h])=>fe.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=(n,e)=>{const t=fe.forwardRef(({className:r,...i},a)=>fe.createElement(UF,{ref:a,iconNode:e,className:LE(`lucide-${MF(u4(n))}`,`lucide-${n}`,r),...i}));return t.displayName=u4(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],VF=mr("arrow-right",zF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],HF=mr("banknote",qF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],uh=mr("calendar",WF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$F=mr("chart-column",GF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],XF=mr("check",YF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],T1=mr("chevron-left",KF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],R1=mr("chevron-right",QF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Md=mr("circle-check-big",ZF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],N1=mr("circle-x",JF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],tU=mr("clipboard-check",eU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],gx=mr("clock",nU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iU=mr("copy",rU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],oU=mr("download",aU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],mx=mr("ellipsis",sU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vx=mr("eye",lU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ME=mr("map-pin",cU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],fU=mr("message-circle",uU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M5 12h14",key:"1ays0h"}]],dU=mr("minus",hU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Es=mr("package",pU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],th=mr("phone",gU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vU=mr("plus",mU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jE=mr("save",yU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],BE=mr("search",xU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],wU=mr("smartphone",bU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],FE=mr("square-pen",_U);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],UE=mr("trash-2",AU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zE=mr("user",EU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yx=mr("x",SU),CU=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),b=Math.min(a,m+p-1);b-m+1<p&&(m=Math.max(1,b-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let I=m;I<=b;I++)_.push(I);return b<a&&(b<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,h=Math.min(n*t,e);return y.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"1.5rem 0",direction:"rtl"},children:[y.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",h," מתוך ",e," מוצרים"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[y.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(R1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return y.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:y.jsx(mx,{size:o?16:20})},`dots-${g}`);const m=p===n;return y.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),y.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(T1,{size:o?16:20})})]})]})},VE=({showCatalogPopup:n,setShowCatalogPopup:e,searchTerm:t,setSearchTerm:r,availableItems:i,toggleSelectItem:a,changeQty:o,form:s,loadingItems:c,setAvailableItems:f,hideBarcodeScanner:h=!1})=>{const[p,g]=fe.useState(!1),[m,b]=fe.useState(null),[_,I]=fe.useState([]),[C,N]=fe.useState(1),[j,q]=fe.useState(window.innerWidth<=768),Y=j?6:8;if(fe.useEffect(()=>{const U=()=>{const te=window.innerWidth<=768;te!==j&&(q(te),N(1))};return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[j]),fe.useEffect(()=>{N(1)},[t]),fe.useEffect(()=>{n&&(console.log("🔍 Modal נפתח, מאתחל local state עם פריטים:",i.length),I([...i]))},[n,i]),!n)return null;const H=async U=>{console.log("📱 ברקוד נסרק:",U);try{const te=await PF(U);console.log("🔍 פריט נמצא במאגר:",te);const oe=i.find(ge=>ge.ItemId===te.ItemId||ge.id===te.id);if(console.log("🔍 מחפש פריט ברשימה זמינה:",oe),!oe){console.log("❌ הפריט לא נמצא ברשימת הפריטים הזמינים לתקופה זו"),alert("הפריט לא זמין לתקופת ההזמנה שלך"),g(!1);return}if(_.some(ge=>(ge.ItemId===te.ItemId||ge.id===te.id)&&ge.selected)){console.log("⚠️ המוצר כבר נבחר ברשימה"),alert("המוצר כבר נבחר ברשימה"),g(!1);return}oe.quantity>0?(console.log("✅ המוצר זמין, פותח מודל אישור"),b(oe),g(!1)):(console.log("❌ המוצר לא זמין במלאי לתקופה זו"),alert("המוצר לא זמין במלאי לתקופה זו"),g(!1))}catch(te){console.error("❌ שגיאה באיתור הפריט:",te),alert(te.message),g(!1)}},P=U=>{console.log("🔄 משנה בחירה עבור פריט:",U),I(te=>te.map(oe=>oe.id===U?{...oe,selected:!oe.selected,selectedQty:oe.selected?0:1}:oe))},E=(U,te)=>{let oe=parseInt(te)||0;oe>U.quantity&&(oe=U.quantity),oe<0&&(oe=0),console.log("🔢 משנה כמות עבור",U.name,"לכמות:",oe),I(X=>X.map(ge=>ge.id===U.id?{...ge,selectedQty:oe,selected:oe>0}:ge))},R=()=>{console.log("💾 מחיל שינויים על state הראשי..."),_.forEach(U=>{const te=i.find(oe=>oe.id===U.id);te&&(U.selected!==te.selected&&a(U.id),U.selectedQty!==te.selectedQty&&o(U.id,U.selectedQty))})},L=()=>{console.log("✅ מאשר בחירות ומחיל שינויים..."),R(),e(!1)},T=(U="unknown")=>{console.log("❌ מבטל בחירות וסוגר מודל - מקור:",U),e(!1)},k=U=>{U.target===U.currentTarget?(console.log("🖱️ קליק על overlay - סוגר מודל"),T("overlay-click")):console.log("🖱️ קליק בתוך המודל - לא סוגר")},B=_.filter(U=>U.name.toLowerCase().includes(t.toLowerCase())),V=(C-1)*Y,Q=V+Y,z=B.slice(V,Q);return console.log("📊 סטטיסטיקות פריטים:",{totalItems:_.length,filteredItems:B.length,currentPageItems:z.length,currentPage:C,itemsPerPage:Y}),y.jsxs("div",{className:"modal-overlay",onClick:k,children:[y.jsxs("div",{className:"modal-box",dir:"rtl",onClick:U=>U.stopPropagation(),children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[!h&&y.jsx("button",{style:{width:"180px"},className:"btn btn-gray",onClick:()=>{console.log("📱 פותח סורק ברקוד..."),g(!0)},children:"סריקת ברקוד"}),y.jsx("input",{type:"text",placeholder:"חיפוש מוצר...",value:t,onChange:U=>{console.log("🔍 חיפוש משתנה ל:",U.target.value),r(U.target.value)},style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px",width:h?"100%":"60%"}})]}),y.jsxs("h3",{style:{textAlign:"center",marginBottom:"1rem"},children:["מוצרים זמינים (",s.pickupDate," → ",s.returnDate,")"]}),t&&y.jsx("div",{style:{background:"#f0f9ff",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9",textAlign:"center"},children:y.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"0.9rem"},children:["🔍 נמצאו ",B.length,' מוצרים עבור "',t,'"']})}),c?y.jsx("p",{style:{textAlign:"center"},children:"טוען מוצרים…"}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"modal-grid",children:z.length===0?y.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:t?`לא נמצאו מוצרים לחיפוש "${t}"`:"לא נמצאו מוצרים זמינים"}):z.map(U=>y.jsxs("div",{className:`item-card ${U.selected?"selected":""}`,children:[y.jsx("img",{src:U.imageUrl||"/no-image-available.png",alt:U.name,className:"item-image"}),y.jsx("h4",{children:U.name}),y.jsxs("p",{children:["זמין: ",U.quantity]}),y.jsxs("p",{children:["מזהה מוצר: ",U.ItemId]}),y.jsxs("div",{style:{margin:"0.5rem 0"},children:[y.jsx("label",{style:{marginBottom:"0.3rem",display:"block"},children:"כמות:"}),y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[y.jsx("button",{onClick:()=>E(U,Math.max(0,U.selectedQty-1)),disabled:U.selectedQty<=0,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:U.selectedQty<=0?"#f5f5f5":"#fff",cursor:U.selectedQty<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:U.selectedQty<=0?"#ccc":"#333"},children:"-"}),y.jsx("input",{type:"number",min:0,max:U.quantity,value:U.selectedQty,onChange:te=>E(U,te.target.value),onBlur:te=>{(parseInt(te.target.value)||0)>U.quantity&&E(U,U.quantity)},style:{width:"50px",height:"30px",padding:"5px",textAlign:"center",borderRadius:"6px",border:U.selectedQty>U.quantity?"2px solid red":"1px solid #ccc",backgroundColor:U.selectedQty>0?"#e3f2fd":"#fff",fontSize:"14px",fontWeight:"bold",appearance:"textfield",MozAppearance:"textfield"}}),y.jsx("button",{onClick:()=>E(U,Math.min(U.quantity,U.selectedQty+1)),disabled:U.selectedQty>=U.quantity,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:U.selectedQty>=U.quantity?"#f5f5f5":"#fff",cursor:U.selectedQty>=U.quantity?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:U.selectedQty>=U.quantity?"#ccc":"#333"},children:"+"})]}),U.selectedQty>U.quantity&&y.jsxs("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"0.2rem"},children:["מקסימום: ",U.quantity]})]}),y.jsx("button",{onClick:()=>P(U.id),className:`btn ${U.selected?"btn-red":"btn-blue"}`,style:{width:"100%",marginTop:"0.5rem"},children:U.selected?"❌ הסר מוצר":"🛒 בחר מוצר"})]},U.id))}),y.jsx(CU,{currentPage:C,totalItems:B.length,itemsPerPage:Y,onPageChange:N})]}),y.jsxs("div",{className:"modal-actions",children:[y.jsx("button",{className:"btn btn-blue",onClick:()=>{console.log("✅ לחיצה על כפתור אישור"),L()},children:"✔️ אישור"}),y.jsx("button",{className:"btn btn-gray",onClick:()=>{console.log("❌ לחיצה על כפתור ביטול"),T("cancel-button")},children:"❌ ביטול"})]})]}),!h&&p&&y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:U=>{console.log("📱 קליק על רקע הסורק"),U.stopPropagation()},children:y.jsx(DF,{onScanSuccess:H,onClose:()=>{console.log("📱 סורק ברקוד נסגר"),g(!1)}})}),!h&&m&&y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10001,backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:U=>{console.log("📦 קליק על רקע מודל תוצאת סריקה"),U.stopPropagation()},children:y.jsx(LF,{item:m,onCancel:()=>{console.log("❌ מבטל תוצאת סריקה"),b(null),g(!1)},onConfirm:U=>{console.log("✅ מאשר הוספת פריט מסריקה:",m.name,"כמות:",U),I(oe=>{const X=oe.map(ge=>ge.id===m.id||ge.ItemId===m.ItemId?(console.log("📝 מעדכן פריט ב-localItems:",ge.name,"כמות חדשה:",U),{...ge,selected:!0,selectedQty:U}):ge);return console.log("📊 localItems אחרי עדכון:",X.filter(ge=>ge.selected)),X}),b(null),console.log("🎯 פריט נוסף בהצלחה מסריקה, המודל נשאר פתוח להמשך בחירה");const te=_.findIndex(oe=>oe.id===m.id||oe.ItemId===m.ItemId);if(te>=0){const oe=Math.ceil((te+1)/Y);console.log("📄 מעבר לעמוד",oe,"כדי להציג את הפריט שנוסף"),N(oe)}}})})]})},qE={async findClientByPhone(n){try{if(console.log("🔍 מחפש פרטי לקוח למספר טלפון:",n),!n||n.length<10)return{found:!1};const e=n.replace(/[\s\-]/g,""),t=ec(An(Pt,"orders"),ic("phone","==",e)),r=await sr(t);if(r.empty)return console.log("❌ לא נמצאו הזמנות עבור מספר זה"),{found:!1};const i=r.docs.map(o=>({id:o.id,...o.data()}));i.sort((o,s)=>{var h,p;const c=((h=o.createdAt)==null?void 0:h.seconds)||0;return(((p=s.createdAt)==null?void 0:p.seconds)||0)-c});const a=i[0];return console.log("✅ נמצאה הזמנה:",{clientName:a.clientName,address:a.address,email:a.email}),{found:!0,clientData:{clientName:a.clientName||"",address:a.address||"",email:a.email||""}}}catch(e){return console.error("❌ שגיאה בחיפוש פרטי לקוח:",e),{found:!1}}}},IU=({onOrderCreated:n})=>{const[e,t]=fe.useState({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[r,i]=fe.useState({}),[a,o]=fe.useState(!1),[s,c]=fe.useState([]),[f,h]=fe.useState(!1),[p,g]=fe.useState(""),[m,b]=fe.useState(!1),[_,I]=fe.useState(!1),C=async P=>{const{name:E,value:R}=P.target;if(t(L=>({...L,[E]:R})),E==="phone"&&R.length===10&&/^\d{10}$/.test(R)){I(!0);try{const L=await qE.findClientByPhone(R);L.found&&(t(T=>({...T,phone:R,clientName:L.clientData.clientName,address:L.clientData.address,email:L.clientData.email})),alert(`נמצא לקוח קיים! הפרטים מולאו אוטומטית:
שם: ${L.clientData.clientName}
כתובת: ${L.clientData.address}`))}catch(L){console.error("שגיאה בחיפוש פרטי לקוח:",L)}finally{I(!1)}}},N=()=>{const P={},E=new Date().toISOString().split("T")[0],{pickupDate:R,eventDate:L,returnDate:T}=e;return e.volunteerName.trim()||(P.volunteerName="שדה חובה"),e.clientName.trim()||(P.clientName="שדה חובה"),e.address.trim()||(P.address="שדה חובה"),e.phone.trim()?/^\d{10}$/.test(e.phone)||(P.phone="מספר טלפון לא תקין"):P.phone="שדה חובה",e.eventType.trim()||(P.eventType="שדה חובה"),R||(P.pickupDate="שדה חובה"),L||(P.eventDate="שדה חובה"),T||(P.returnDate="שדה חובה"),R&&R<E&&(P.pickupDate="תאריך לא יכול להיות בעבר"),L&&R&&L<R&&(P.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),T&&R&&T<=R&&(P.returnDate="החזרה אחרי לקיחה"),i(P),Object.keys(P).length===0},j=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את ההזמנה?")&&(t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),i({}),c([]),g(""),o(!1))},q=async()=>{if(!N())return;const E=(await sr(An(Pt,"orders"))).docs.map(T=>T.data().simpleId).filter(T=>typeof T=="number"),R=E.length>0?Math.max(...E)+1:1,L=s.filter(T=>T.selected).map(T=>({id:T.id,ItemId:T.ItemId,name:T.name,quantity:T.selectedQty,imageUrl:T.imageUrl}));b(!0);try{const T=await Tm(An(Pt,"orders"),{...e,items:L,status:"open",simpleId:R,createdAt:Ai()});await Za(T,{orderId:T.id}),t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),c([]),g(""),o(!1),alert(`ההזמנה נשמרה! מס' הזמנה: ${R}`),n&&await n()}catch(T){console.error("שגיאה בשמירה:",T),alert("שגיאה בשמירת ההזמנה")}b(!1)};fe.useEffect(()=>{if(!a)return;(async()=>{h(!0);const E=R=>R?R.toDate?R.toDate():typeof R=="string"?new Date(R):R:null;try{const L=(await sr(An(Pt,"items"))).docs.map(te=>({id:te.id,...te.data()})).filter(te=>te.isDeleted!==!0),T=await sr(An(Pt,"orders")),k=E(e.pickupDate),B=E(e.returnDate),V=T.docs.map(te=>te.data()).filter(te=>{const oe=E(te.pickupDate),X=E(te.returnDate);return te.status==="open"&&oe&&X&&k&&B&&X>=k&&oe<=B}),Q={};V.forEach(te=>{var oe;(oe=te.items)==null||oe.forEach(X=>{Q[X.id]=(Q[X.id]||0)+X.quantity})});const z={};s.forEach(te=>{te.selected&&te.selectedQty>0&&(z[te.id]={selected:te.selected,selectedQty:te.selectedQty})});const U=L.map(te=>{const oe=(te.quantity||0)-(Q[te.id]||0),X=z[te.id];return{...te,quantity:oe,selected:X?X.selected:!1,selectedQty:X?X.selectedQty:0}}).filter(te=>te.quantity>0);c(U)}catch(R){console.error("שגיאה בחישוב זמינות:",R),c([])}h(!1)})()},[a,e.pickupDate,e.returnDate]);const Y=P=>{c(E=>E.map(R=>R.id===P?{...R,selected:!R.selected,selectedQty:R.selected?0:1}:R))},H=(P,E)=>{c(R=>R.map(L=>L.id===P?{...L,selected:E>0,selectedQty:E}:L))};return y.jsxs("div",{className:"new-loan-container",children:[y.jsx(WL,{form:e,errors:r,handleChange:C,handleConfirm:q,handleClear:j,setShowCatalogPopup:o,saving:m,isLoadingClientData:_}),y.jsx(VE,{showCatalogPopup:a,setShowCatalogPopup:o,searchTerm:p,setSearchTerm:g,setAvailableItems:c,availableItems:s,toggleSelectItem:Y,changeQty:H,form:e,loadingItems:f})]})},TU=({onRequestSubmitted:n})=>{const{user:e}=ou(),[t,r]=fe.useState({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[i,a]=fe.useState({}),[o,s]=fe.useState(!1),[c,f]=fe.useState([]),[h,p]=fe.useState(!1),[g,m]=fe.useState(""),[b,_]=fe.useState(!1),[I,C]=fe.useState(!1),N=fe.useCallback(async R=>{const{name:L,value:T}=R.target;if(r(k=>({...k,[L]:T})),L==="phone"&&T.length===10&&/^\d{10}$/.test(T)){C(!0);try{const k=await qE.findClientByPhone(T);k.found&&(r(B=>({...B,phone:T,clientName:k.clientData.clientName,address:k.clientData.address,email:k.clientData.email})),alert(`נמצא לקוח קיים! הפרטים מולאו אוטומטית:
שם: ${k.clientData.clientName}
כתובת: ${k.clientData.address}`))}catch(k){console.error("שגיאה בחיפוש פרטי לקוח:",k)}finally{C(!1)}}},[]),j=()=>{const R={},L=new Date().toISOString().split("T")[0],{pickupDate:T,eventDate:k,returnDate:B}=t;return t.clientName.trim()||(R.clientName="שדה חובה"),t.address.trim()||(R.address="שדה חובה"),t.phone.trim()?/^\d{10}$/.test(t.phone)||(R.phone="מספר טלפון לא תקין"):R.phone="שדה חובה",t.eventType.trim()||(R.eventType="שדה חובה"),T||(R.pickupDate="שדה חובה"),k||(R.eventDate="שדה חובה"),B||(R.returnDate="שדה חובה"),T&&T<L&&(R.pickupDate="תאריך לא יכול להיות בעבר"),k&&T&&k<T&&(R.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),B&&T&&B<=T&&(R.returnDate="החזרה אחרי לקיחה"),a(R),Object.keys(R).length===0},q=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את הבקשה?")&&(r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),a({}),f([]),m(""),s(!1))},Y=async()=>{if(!j())return;const R=c.filter(L=>L.selected).map(L=>({id:L.id,ItemId:L.ItemId,name:L.name,quantity:L.selectedQty,imageUrl:L.imageUrl}));if(R.length===0){alert("יש לבחור לפחות פריט אחד");return}_(!0);try{await Tm(An(Pt,"orderRequests"),{...t,items:R,status:"pending",requestedBy:e.uid,requestedByUsername:e.username,requestedByEmail:e.email,requestedAt:Ai(),approvedBy:null,approvedAt:null}),r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),f([]),m(""),s(!1),alert("🎉 הבקשה נשלחה בהצלחה! תקבל עדכון כאשר הבקשה תאושר."),n&&await n()}catch(L){console.error("שגיאה בשליחת הבקשה:",L),alert("שגיאה בשליחת הבקשה. אנא נסה שוב.")}_(!1)};fe.useEffect(()=>{if(!o)return;(async()=>{p(!0);const L=T=>T?T.toDate?T.toDate():typeof T=="string"?new Date(T):T:null;try{const k=(await sr(An(Pt,"items"))).docs.map(X=>({id:X.id,...X.data()})).filter(X=>X.isDeleted!==!0),B=await sr(An(Pt,"orders")),V=L(t.pickupDate),Q=L(t.returnDate),z=B.docs.map(X=>X.data()).filter(X=>{const ge=L(X.pickupDate),G=L(X.returnDate);return X.status==="open"&&ge&&G&&V&&Q&&G>=V&&ge<=Q}),U={};z.forEach(X=>{var ge;(ge=X.items)==null||ge.forEach(G=>{U[G.id]=(U[G.id]||0)+G.quantity})});const te={};c.forEach(X=>{X.selected&&X.selectedQty>0&&(te[X.id]={selected:X.selected,selectedQty:X.selectedQty})});const oe=k.map(X=>{const ge=(X.quantity||0)-(U[X.id]||0),G=te[X.id];return{...X,quantity:ge,selected:G?G.selected:!1,selectedQty:G?G.selectedQty:0}}).filter(X=>X.quantity>0);f(oe)}catch(T){console.error("שגיאה בחישוב זמינות:",T),f([])}p(!1)})()},[o,t.pickupDate,t.returnDate,c]);const H=R=>{f(L=>L.map(T=>T.id===R?{...T,selected:!T.selected,selectedQty:T.selected?0:1}:T))},P=(R,L)=>{f(T=>T.map(k=>k.id===R?{...k,selected:L>0,selectedQty:L}:k))},E=[{label:"מספר פלאפון",name:"phone",required:!0},{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return y.jsxs("div",{className:"new-loan-container",children:[y.jsxs("div",{className:"loan-form-box",children:[y.jsx("h2",{style:{textAlign:"center"},children:"🙏 בקשת השאלה"}),y.jsx("p",{style:{textAlign:"center",color:"#666",marginBottom:"2rem"},children:"מלא את הפרטים והבקשה תישלח לאישור המנהלים"}),E.map(({label:R,name:L,type:T="text",required:k})=>y.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[y.jsxs("label",{htmlFor:L,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[R,k&&" *",I&&(L==="clientName"||L==="address"||L==="email")&&y.jsx("span",{style:{marginRight:"0.5rem",color:"#4caf50"},children:"⏳"})]}),y.jsxs("div",{style:{position:"relative"},children:[y.jsx("input",{id:L,type:T,name:L,value:t[L]||"",onChange:N,autoComplete:"off",disabled:I&&(L==="clientName"||L==="address"||L==="email"),min:T==="date"?L==="pickupDate"?new Date().toISOString().split("T")[0]:L==="eventDate"||L==="returnDate"?t.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:i[L]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:I&&(L==="clientName"||L==="address"||L==="email")?"#f5f5f5":"white",opacity:I&&(L==="clientName"||L==="address"||L==="email")?.7:1},placeholder:I&&(L==="clientName"||L==="address"||L==="email")?"טוען...":""}),I&&L==="phone"&&y.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#4caf50"},children:y.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e8f5e8",borderTop:"2px solid #4caf50",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),i[L]&&y.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:i[L]})]},L)),y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:y.jsx("button",{className:"btn btn-blue",onClick:()=>s(!0),disabled:I,children:"בחירת מוצרים"})}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[y.jsx("button",{className:"btn btn-green",onClick:Y,disabled:b||I,children:b?"שולח בקשה...":"📨 שלח בקשה לאישור"}),y.jsx("button",{className:"btn btn-red",onClick:q,disabled:b||I,children:"ביטול"})]}),y.jsx("style",{jsx:!0,children:`
          @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
          }
        `})]}),y.jsx(VE,{showCatalogPopup:o,setShowCatalogPopup:s,searchTerm:g,setSearchTerm:m,setAvailableItems:f,availableItems:c,toggleSelectItem:H,changeQty:P,form:t,loadingItems:h,hideBarcodeScanner:!0})]})},RU=()=>{const{user:n}=ou(),[e,t]=fe.useState([]),[r,i]=fe.useState(!0),[a,o]=fe.useState(null),[s,c]=fe.useState(null),f=async()=>{try{i(!0);const _=(await sr(An(Pt,"orderRequests"))).docs.map(I=>({id:I.id,...I.data()})).filter(I=>I.status==="pending").sort((I,C)=>{var q,Y;const N=((q=I.requestedAt)==null?void 0:q.seconds)||0;return(((Y=C.requestedAt)==null?void 0:Y.seconds)||0)-N});t(_)}catch(b){console.error("שגיאה בטעינת בקשות:",b)}finally{i(!1)}};fe.useEffect(()=>{f()},[]);const h=async b=>{if(window.confirm(`האם אתה בטוח שברצונך לאשר את הבקשה של ${b.clientName}?`)){c(b.id),console.log("🚀 מתחיל אישור בקשה:",b);try{console.log("📦 טוען נתוני מלאי והזמנות...");const _=await sr(An(Pt,"items")),I=await sr(An(Pt,"orders")),C=V=>V?V.toDate?V.toDate():typeof V=="string"?new Date(V):V:null,N=C(b.pickupDate),j=C(b.returnDate),q=I.docs.map(V=>V.data()).filter(V=>{const Q=C(V.pickupDate),z=C(V.returnDate);return V.status==="open"&&Q&&z&&N&&j&&z>=N&&Q<=j}),Y={};q.forEach(V=>{var Q;(Q=V.items)==null||Q.forEach(z=>{Y[z.id]=(Y[z.id]||0)+z.quantity})});const H=_.docs.map(V=>({id:V.id,...V.data()}));console.log("🔍 בודק זמינות פריטים...",b.items);let P=!0,E=[];for(const V of b.items){console.log(`🔎 בודק פריט: ${V.name}`,V);const Q=H.find(U=>U.id===V.id);if(!Q){console.log(`❌ פריט לא נמצא במלאי: ${V.name}`),P=!1,E.push(`${V.name} (לא נמצא במלאי)`);continue}const z=(Q.quantity||0)-(Y[V.id]||0);console.log(`📊 ${V.name}: מלאי=${Q.quantity}, שמור=${Y[V.id]||0}, זמין=${z}, נדרש=${V.quantity}`),V.quantity>z&&(P=!1,E.push(`${V.name} (זמין: ${z}, נדרש: ${V.quantity})`))}if(!P){console.log("❌ לא כל הפריטים זמינים:",E),alert(`לא ניתן לאשר את הבקשה - פריטים לא זמינים:
${E.join(`
`)}`),c(null);return}console.log("✅ כל הפריטים זמינים, ממשיך ליצירת הזמנה..."),console.log("🔢 יוצר מזהה הזמנה חדש...");const L=(await sr(An(Pt,"orders"))).docs.map(V=>V.data().simpleId).filter(V=>typeof V=="number"),T=L.length>0?Math.max(...L)+1:1;console.log("🎯 מזהה הזמנה חדש:",T),console.log("📝 יוצר הזמנה חדשה..."),console.log("👤 פרטי משתמש:",n);const k={clientName:b.clientName,address:b.address,phone:b.phone,email:b.email,eventType:b.eventType,pickupDate:b.pickupDate,eventDate:b.eventDate,returnDate:b.returnDate,items:b.items,simpleId:T,status:"open",volunteerName:`מאושר ע"י ${(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל"}`,createdAt:Ai(),approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",approvedAt:Ai(),orderId:null};console.log("💾 שומר הזמנה חדשה:",k);const B=await Tm(An(Pt,"orders"),k);console.log("✅ הזמנה נשמרה עם ID:",B.id),await Za(B,{orderId:B.id}),console.log("🔄 עדכון orderId הושלם"),console.log("📋 מעדכן סטטוס בקשה לאושרה..."),await Za(Er(Pt,"orderRequests",b.id),{status:"approved",approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",approvedAt:Ai(),orderId:B.id}),console.log("🎉 תהליך האישור הושלם בהצלחה!"),alert(`✅ הבקשה אושרה בהצלחה! מספר הזמנה: ${T}`),await f()}catch(_){console.error("❌ שגיאה באישור הבקשה:",_),console.error("Stack trace:",_.stack),alert(`שגיאה באישור הבקשה: ${_.message}`)}finally{c(null)}}},p=async b=>{const _=prompt(`מדוע אתה דוחה את הבקשה של ${b.clientName}?
(ההודעה הזו תישלח ללקוח)`);if(_!==null){c(b.id),console.log("🚫 מתחיל דחיית בקשה:",b.id,"סיבה:",_);try{console.log("📝 מעדכן סטטוס בקשה לנדחתה..."),console.log("👤 פרטי משתמש:",n),await Za(Er(Pt,"orderRequests",b.id),{status:"rejected",rejectedBy:(n==null?void 0:n.uid)||"unknown",rejectedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",rejectedAt:Ai(),rejectionReason:_}),console.log("✅ בקשה נדחתה בהצלחה"),alert("❌ הבקשה נדחתה. הלקוח יקבל הודעה."),await f()}catch(I){console.error("❌ שגיאה בדחיית הבקשה:",I),console.error("Stack trace:",I.stack),alert(`שגיאה בדחיית הבקשה: ${I.message}`)}finally{c(null)}}},g=b=>new Date(b).toLocaleDateString("he-IL"),m=b=>b?(b.seconds?new Date(b.seconds*1e3):new Date(b)).toLocaleString("he-IL"):"";return r?y.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),y.jsx("p",{children:"טוען בקשות..."})]})}):y.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #f59e0b, #d97706)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[y.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"📋 בקשות להזמנה"}),y.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"בקשות ממתינות לאישור מנהלים"})]}),e.length===0?y.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsx(Es,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),y.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"אין בקשות ממתינות"}),y.jsx("p",{style:{color:"#9ca3af"},children:"כל הבקשות עובדו או שאין בקשות חדשות"})]}):y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(b=>{var _;return y.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-2px)",I.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[y.jsxs("div",{children:[y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:b.clientName}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["נשלח: ",m(b.requestedAt)]})]}),y.jsx("div",{style:{background:"#fef3c7",color:"#92400e",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:"ממתין"})]}),y.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(zE,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:["מבקש: ",b.requestedByUsername]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(th,{size:16,style:{color:"#6b7280"}}),y.jsx("span",{style:{fontSize:"0.875rem"},children:b.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(ME,{size:16,style:{color:"#6b7280"}}),y.jsx("span",{style:{fontSize:"0.875rem"},children:b.address})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(uh,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(b.pickupDate)," → ",g(b.returnDate)]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(Es,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:[(_=b.items)==null?void 0:_.reduce((I,C)=>I+C.quantity,0)," פריטים"]})]})]}),y.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[y.jsxs("button",{onClick:()=>o(b),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[y.jsx(vx,{size:16}),"הצג פרטים"]}),y.jsxs("button",{onClick:()=>h(b),disabled:s===b.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===b.id?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:s===b.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[y.jsx(Md,{size:16}),s===b.id?"מעבד...":"אשר"]}),y.jsxs("button",{onClick:()=>p(b),disabled:s===b.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===b.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===b.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[y.jsx(N1,{size:16}),"דחה"]})]})]},b.id)})}),a&&y.jsx(NU,{request:a,onClose:()=>o(null),onApprove:()=>{o(null),h(a)},onReject:()=>{o(null),p(a)},processing:s===a.id}),y.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},NU=({request:n,onClose:e,onApprove:t,onReject:r,processing:i})=>{var s,c;const a=f=>new Date(f).toLocaleDateString("he-IL"),o=f=>{f.target===f.currentTarget&&e()};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:o,children:y.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:f=>f.stopPropagation(),children:[y.jsxs("div",{style:{background:"#1f2937",color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["פרטי בקשה - ",n.clientName]}),y.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"×"})]}),y.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"פרטי הלקוח"}),y.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"שם לקוח"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"אימייל"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.email||"לא צוין"})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),y.jsxs("span",{style:{fontWeight:"bold"},children:[a(n.pickupDate)," → ",a(n.returnDate)]})]})]})]}),y.jsxs("div",{children:[y.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים מבוקשים (",((s=n.items)==null?void 0:s.length)||0,")"]}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(c=n.items)==null?void 0:c.map((f,h)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsx("img",{src:f.imageUrl||"/no-image-available.png",alt:f.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),y.jsxs("div",{style:{flex:1},children:[y.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:f.name}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["מזהה: ",f.ItemId]})]}),y.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",f.quantity]})]},h))})]})]}),y.jsxs("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center",gap:"1rem"},children:[y.jsxs("button",{onClick:t,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[y.jsx(Md,{size:20}),i?"מעבד...":"אשר בקשה"]}),y.jsxs("button",{onClick:r,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[y.jsx(N1,{size:20}),"דחה בקשה"]}),y.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"סגור"})]})]})})},DU=()=>{const{user:n}=ou(),[e,t]=fe.useState([]),[r,i]=fe.useState(!0),[a,o]=fe.useState(null),[s,c]=fe.useState(null),f=async()=>{if(!(n!=null&&n.uid)){console.log("❌ אין משתמש מחובר:",n),i(!1);return}try{i(!0),console.log("🔍 מחפש הזמנות עבור משתמש:",n.uid);const b=ec(An(Pt,"orderRequests"),ic("requestedBy","==",n.uid));console.log("📋 מבצע שאילתה ל-orderRequests...");const _=await sr(b);console.log("📊 נמצאו",_.size,"בקשות");const I=_.docs.map(N=>{const j={id:N.id,type:"request",...N.data()};return console.log("📝 בקשה נמצאה:",j),j});console.log('✅ סה"כ בקשות שנמצאו:',I.length);const C=[...I].sort((N,j)=>{var H,P,E,R;const q=((H=N.requestedAt)==null?void 0:H.seconds)||((P=N.createdAt)==null?void 0:P.seconds)||0;return(((E=j.requestedAt)==null?void 0:E.seconds)||((R=j.createdAt)==null?void 0:R.seconds)||0)-q});console.log("🎯 הזמנות סופיות:",C),t(C)}catch(b){console.error("❌ שגיאה בטעינת ההזמנות:",b),console.error("Stack trace:",b.stack)}finally{i(!1)}},h=async b=>{const _=p(b).text;if(window.confirm(`האם אתה בטוח שברצונך למחוק את ההזמנה?

פרטים:
• לקוח: ${b.clientName}
• סטטוס: ${_}
• תאריך: ${g(b.pickupDate)}

פעולה זו אינה ניתנת לביטול.`)){c(b.id),console.log("🗑️ מוחק הזמנה:",b.id);try{await Im(Er(Pt,"orderRequests",b.id)),console.log("✅ הזמנה נמחקה בהצלחה"),t(I=>I.filter(C=>C.id!==b.id)),alert("🗑️ ההזמנה נמחקה בהצלחה מהרשימה שלך")}catch(I){console.error("❌ שגיאה במחיקת הזמנה:",I),alert(`שגיאה במחיקת ההזמנה: ${I.message}`)}finally{c(null)}}};fe.useEffect(()=>{console.log("👤 משתמש השתנה:",n),n!=null&&n.uid?(console.log("🚀 קורא לטעינת הזמנות..."),f()):(console.log("⏳ מחכה למשתמש להיטען..."),i(!1))},[n]);const p=b=>{switch(b.status){case"pending":return{text:"מחכה לאישור",color:"#f59e0b",bgColor:"#fef3c7",icon:y.jsx(gx,{size:16})};case"approved":return{text:"מאושר",color:"#10b981",bgColor:"#d1fae5",icon:y.jsx(Md,{size:16})};case"rejected":return{text:"נדחה",color:"#ef4444",bgColor:"#fee2e2",icon:y.jsx(N1,{size:16})};default:return{text:"לא ידוע",color:"#6b7280",bgColor:"#f3f4f6",icon:y.jsx(Es,{size:16})}}},g=b=>new Date(b).toLocaleDateString("he-IL"),m=b=>b?(b.seconds?new Date(b.seconds*1e3):new Date(b)).toLocaleString("he-IL"):"";return r?y.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),y.jsx("p",{children:"טוען הזמנות..."})]})}):y.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[y.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"📋 ההזמנות שלי"}),y.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"כל הבקשות וההזמנות שלך במקום אחד"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[y.jsxs("div",{style:{background:"#fef3c7",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fde68a"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#92400e"},children:e.filter(b=>b.status==="pending").length}),y.jsx("div",{style:{color:"#92400e",fontSize:"0.875rem"},children:"מחכות לאישור"})]}),y.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #a7f3d0"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#065f46"},children:e.filter(b=>b.status==="approved").length}),y.jsx("div",{style:{color:"#065f46",fontSize:"0.875rem"},children:"מאושרות"})]}),y.jsxs("div",{style:{background:"#fee2e2",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fecaca"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#991b1b"},children:e.filter(b=>b.status==="rejected").length}),y.jsx("div",{style:{color:"#991b1b",fontSize:"0.875rem"},children:"נדחו"})]}),y.jsxs("div",{style:{background:"#eff6ff",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #dbeafe"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1e40af"},children:e.length}),y.jsx("div",{style:{color:"#1e40af",fontSize:"0.875rem"},children:'סה"כ הזמנות'})]})]}),e.length===0?y.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsx(Es,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),y.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"אין הזמנות עדיין"}),y.jsx("p",{style:{color:"#9ca3af",marginBottom:"1.5rem"},children:"עדיין לא שלחת בקשות השאלה"}),y.jsx("a",{href:"/request",style:{display:"inline-block",background:"#3b82f6",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",textDecoration:"none",fontWeight:"500"},children:"📝 צור בקשת השאלה ראשונה"})]}):y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(b=>{var I;const _=p(b);return y.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:C=>{C.currentTarget.style.transform="translateY(-2px)",C.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:C=>{C.currentTarget.style.transform="translateY(0)",C.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[y.jsxs("div",{children:[y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:b.clientName}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["נשלח: ",m(b.requestedAt)]})]}),y.jsxs("div",{style:{background:_.bgColor,color:_.color,padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.25rem"},children:[_.icon,_.text]})]}),y.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(th,{size:16,style:{color:"#6b7280"}}),y.jsx("span",{style:{fontSize:"0.875rem"},children:b.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(ME,{size:16,style:{color:"#6b7280"}}),y.jsx("span",{style:{fontSize:"0.875rem"},children:b.address})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(uh,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(b.pickupDate)," → ",g(b.returnDate)]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(Es,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem"},children:[(I=b.items)==null?void 0:I.reduce((C,N)=>C+N.quantity,0)," פריטים"]})]}),b.status==="rejected"&&b.rejectionReason&&y.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",padding:"0.75rem",marginTop:"0.5rem"},children:[y.jsx("div",{style:{fontSize:"0.75rem",color:"#991b1b",fontWeight:"bold",marginBottom:"0.25rem"},children:"סיבת דחייה:"}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d"},children:b.rejectionReason})]})]}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[y.jsxs("button",{onClick:()=>o(b),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[y.jsx(vx,{size:16}),"הצג פרטים"]}),y.jsxs("button",{onClick:()=>h(b),disabled:s===b.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===b.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===b.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",opacity:s===b.id?.6:1},children:[y.jsx(UE,{size:16}),s===b.id?"מוחק...":"מחק"]})]})]},b.id)})}),a&&y.jsx(OU,{order:a,onClose:()=>o(null)}),y.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},OU=({order:n,onClose:e})=>{var o,s;const t=c=>{switch(c.status){case"pending":return{text:"מחכה לאישור",color:"#f59e0b",bgColor:"#fef3c7",icon:y.jsx(gx,{size:20})};case"approved":return{text:"מאושר",color:"#10b981",bgColor:"#d1fae5",icon:y.jsx(Md,{size:20})};case"rejected":return{text:"נדחה",color:"#ef4444",bgColor:"#fee2e2",icon:y.jsx(N1,{size:20})};default:return{text:"לא ידוע",color:"#6b7280",bgColor:"#f3f4f6",icon:y.jsx(Es,{size:20})}}},r=c=>new Date(c).toLocaleDateString("he-IL"),i=t(n),a=c=>{c.target===c.currentTarget&&e()};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:a,children:y.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:c=>c.stopPropagation(),children:[y.jsxs("div",{style:{background:i.color,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.icon,y.jsxs("div",{children:[y.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["הזמנה - ",n.clientName]}),y.jsx("p",{style:{fontSize:"0.875rem",margin:"0.25rem 0 0 0",opacity:.9},children:i.text})]})]}),y.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"×"})]}),y.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"פרטי ההזמנה"}),y.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"שם לקוח"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"אימייל"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.email||"לא צוין"})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),y.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),y.jsxs("span",{style:{fontWeight:"bold"},children:[r(n.pickupDate)," → ",r(n.returnDate)]})]})]})]}),y.jsxs("div",{children:[y.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים (",((o=n.items)==null?void 0:o.length)||0,")"]}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(s=n.items)==null?void 0:s.map((c,f)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsx("img",{src:c.imageUrl||"/no-image-available.png",alt:c.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),y.jsxs("div",{style:{flex:1},children:[y.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:c.name}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["מזהה: ",c.ItemId]})]}),y.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",c.quantity]})]},f))})]}),n.status==="rejected"&&n.rejectionReason&&y.jsxs("div",{style:{marginTop:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"1rem"},children:[y.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",color:"#991b1b",margin:"0 0 0.5rem 0"},children:"סיבת דחייה:"}),y.jsx("p",{style:{fontSize:"0.875rem",color:"#7f1d1d",margin:0},children:n.rejectionReason})]})]}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center"},children:y.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"סגור"})})]})})},kU=["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],PU=["א","ב","ג","ד","ה","ו","ש"],LU=n=>new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),MU=n=>{const e=new Date(n.getFullYear(),n.getMonth(),1).getDay();return e===0?6:e-1},jU=({currentDate:n,events:e=[],setCurrentDate:t,setSelectedEvents:r,setSelectedDate:i,setShowReport:a})=>{const o=g=>{if(!Array.isArray(e))return[];const m=new Date(n.getFullYear(),n.getMonth(),g);return e.filter(b=>{if(!b.date)return!1;const _=new Date(b.date);return _.getDate()===m.getDate()&&_.getMonth()===m.getMonth()&&_.getFullYear()===m.getFullYear()})},s=g=>{const m=o(g),b=new Map;return m.forEach(_=>{b.has(_.orderId)||b.set(_.orderId,{..._,allEventsForOrder:m.filter(I=>I.orderId===_.orderId)})}),Array.from(b.values())},c=g=>{const m=o(g);m.length>0&&m.every(_=>_.type==="השאלה פעילה")||m.length>0&&(r(m),i(new Date(n.getFullYear(),n.getMonth(),g)),a(!0))},f=LU(n),h=MU(n),p=[];for(let g=0;g<h;g++)p.push(y.jsx("div",{className:"day-cell empty"},`empty-${g}`));for(let g=1;g<=f;g++){const m=o(g),b=s(g),_=m.filter(q=>q.type==="השאלה"),I=m.filter(q=>q.type==="החזרה");m.filter(q=>q.type==="השאלה פעילה");const C=m.length>0,N=b.length;let j="day-cell";C&&(j+=" has-events"),_.length>0&&(j+=" pickup-day"),I.length>0&&(j+=" return-day"),p.push(y.jsxs("div",{className:j,onClick:()=>c(g),style:{cursor:m.some(q=>q.type!=="השאלה פעילה")?"pointer":"default"},children:[y.jsx("span",{className:"day-number",children:g}),y.jsxs("div",{className:"event-icons",children:[_.length>0&&y.jsxs("div",{className:"event-tag pickup-tag",title:"איסוף מוצרים",children:["📦 ",_.length>1&&_.length]}),I.length>0&&y.jsxs("div",{className:"event-tag return-tag",title:"החזרת מוצרים",children:["🔄 ",I.length>1&&I.length]})]}),N>0&&y.jsx("div",{className:"event-count",title:`${N} הזמנות`,children:N})]},g))}return y.jsxs("div",{className:"calendar-container",children:[y.jsxs("div",{className:"calendar-header",children:[y.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()-1,1)),children:y.jsx(R1,{size:20})}),y.jsxs("h2",{className:"calendar-title",children:[y.jsx(uh,{size:24})," ",kU[n.getMonth()]," ",n.getFullYear()]}),y.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()+1,1)),children:y.jsx(T1,{size:20})})]}),y.jsx("div",{className:"day-names",children:PU.map(g=>y.jsx("div",{className:"day-name",children:g},g))}),y.jsx("div",{className:"calendar-grid",children:p}),y.jsxs("div",{className:"calendar-footer",children:[y.jsxs("div",{className:"calendar-legend",children:[y.jsx("span",{className:"legend-item",children:"📦 איסוף מוצרים"}),y.jsx("span",{className:"legend-item",children:"🔄 החזרת מוצרים"})]}),y.jsxs("div",{className:"calendar-stats",children:['לחץ על יום עם אירועים כדי לראות פרטים • סה"כ אירועים: ',Array.isArray(e)?e.length:0]}),(!Array.isArray(e)||e.length===0)&&y.jsx("div",{className:"warning",children:"אין אירועים נטענים - בדוק את החיבור למסד הנתונים"})]})]})},BU=({show:n,selectedDate:e,selectedEvents:t,allItems:r,setShowReport:i,setShowItemsModal:a,setEditItemModal:o,fetchItemsAndOrders:s,onStartReturnInspection:c})=>{if(fe.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const f=async b=>{try{return await Im(Er(Pt,"orders",b)),!0}catch(_){throw console.error("Error deleting order:",_),_}},p=(b=>{const _=new Map;return b.forEach(I=>{_.has(I.orderId)||_.set(I.orderId,{orderId:I.orderId,clientName:I.clientName,phone:I.phone,items:I.items,pickupDate:I.pickupDate,returnDate:I.returnDate,events:[]}),_.get(I.orderId).events.push(I)}),Array.from(_.values())})(t),g=async b=>{if(b&&window.confirm("האם אתה בטוח שברצונך למחוק את ההזמנה?"))try{await f(b),await s(),i(!1),alert("ההזמנה נמחקה בהצלחה.")}catch(_){console.error(_),alert("מחיקה נכשלה. נסה שוב.")}},m=b=>{b.target===b.currentTarget&&i(!1)};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,global:!0,children:`
        .modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 32rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
        
        @media (min-width: 768px) {
          .modal-content {
            max-width: 42rem !important;
          }
        }
      `}),y.jsx("div",{className:"modal-overlay",onClick:m,children:y.jsxs("div",{className:"modal-content",dir:"rtl",onClick:b=>b.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx(uh,{size:24}),y.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:["אירועים ליום ",e==null?void 0:e.toLocaleDateString("he-IL")]})]}),y.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),y.jsxs("div",{style:{marginTop:"0.5rem",color:"#bfdbfe"},children:[p.length," הזמנ",p.length!==1?"ות":"ה"]})]}),y.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 200px)"},children:y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:p.map((b,_)=>y.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",background:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[y.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #f3f4f6"},children:[y.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:y.jsxs("div",{style:{flex:1},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[y.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",margin:0},children:b.clientName}),y.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",background:"#3b82f6",color:"white"},children:["הזמנה #",_+1]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#4b5563",marginBottom:"0.5rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[y.jsx(th,{size:16}),y.jsx("span",{children:b.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[y.jsx(uh,{size:16}),y.jsxs("span",{children:[new Date(b.pickupDate).toLocaleDateString("he-IL")," - ",new Date(b.returnDate).toLocaleDateString("he-IL")]})]})]}),y.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:b.events.map((I,C)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:I.type==="השאלה"?"#10b981":I.type==="החזרה"?"#f59e0b":"#3b82f6",color:"white"},children:[y.jsx("span",{children:I.icon}),y.jsx("span",{children:I.description}),I.isMultiDay&&y.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:["(יום ",I.dayNumber,"/",I.totalDays,")"]})]},C))})]})}),b.items&&b.items.length>0&&y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[y.jsx(Es,{size:16,style:{color:"#6b7280"}}),y.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:["פריטים (",b.items.reduce((I,C)=>I+(C.quantity||1),0),")"]})]}),y.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[b.items.slice(0,3).map((I,C)=>y.jsxs("div",{style:{background:"#f9fafb",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:"#4b5563",border:"1px solid #e5e7eb"},children:[I.name," ",I.quantity>1?`(×${I.quantity})`:""]},C)),b.items.length>3&&y.jsxs("div",{style:{background:"#eff6ff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:"#2563eb",border:"1px solid #dbeafe"},children:["+",b.items.length-3," נוספים"]})]})]})]}),y.jsx("div",{style:{padding:"1rem",background:"#f9fafb"},children:y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",flexWrap:"wrap"},children:[b.events.some(I=>I.icon==="📦")&&y.jsxs("button",{onClick:()=>o({open:!0,eventId:`${b.orderId}-edit`,items:b.items.map(I=>({...I}))}),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[y.jsx(FE,{size:16}),"ערוך הזמנה"]}),y.jsxs("button",{onClick:()=>{const I=t.filter(C=>C.orderId===b.orderId);a(I)},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[y.jsx(vx,{size:16}),"הצג פרטים"]}),b.events.some(I=>I.icon==="📦")&&y.jsxs("button",{onClick:()=>g(b.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[y.jsx(UE,{size:16}),"מחק"]}),c&&b.events.some(I=>I.type==="החזרה")&&y.jsxs("button",{onClick:()=>c(b.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f59e0b",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[y.jsx(tU,{size:16}),"בדיקת החזרה"]})]})})]},b.orderId))})}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ ',p.reduce((b,_)=>{var I;return b+(((I=_.items)==null?void 0:I.reduce((C,N)=>C+(N.quantity||1),0))||0)},0)," פריטים"]}),y.jsx("button",{onClick:()=>i(!1),style:{background:"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer"},children:"סגור"})]})})]})})]})},FU=({show:n,setShow:e,selectedEvents:t,allItems:r})=>{var o;if(fe.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const i=((o=t==null?void 0:t[0])==null?void 0:o.items)||[],a=s=>{s.target===s.currentTarget&&e(!1)};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,global:!0,children:`
        .items-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .items-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 28rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
      `}),y.jsx("div",{className:"items-modal-overlay",onClick:a,children:y.jsxs("div",{className:"items-modal-content",dir:"rtl",onClick:s=>s.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #047857)",color:"white",padding:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx(Es,{size:24}),y.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"רשימת מוצרים"})]}),y.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:y.jsx(yx,{size:20})})]}),y.jsxs("div",{style:{marginTop:"0.5rem",color:"#a7f3d0"},children:[i.length," פריט",i.length!==1?"ים":""," בהזמנה"]})]}),y.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:i.length>0?y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map((s,c)=>(r.find(f=>f.name===s.name),y.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[s.imageUrl&&y.jsx("img",{src:s.imageUrl,alt:s.name,style:{width:"4rem",height:"4rem",objectFit:"cover",borderRadius:"8px",border:"2px solid #e5e7eb"}}),y.jsxs("div",{style:{flex:1},children:[y.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:s.name}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[y.jsxs("span",{children:[y.jsx("strong",{children:"כמות:"})," ",s.quantity]}),y.jsxs("span",{children:[y.jsx("strong",{children:"מזהה מוצר:"}),y.jsx("code",{style:{background:"#f3f4f6",padding:"0.125rem 0.375rem",borderRadius:"4px",marginRight:"0.25rem"},children:s.itemId||"לא נמצא"})]})]})]}),y.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",s.quantity]})]})},c)))}):y.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[y.jsx(Es,{size:48,style:{color:"#d1d5db",marginBottom:"1rem"}}),y.jsx("p",{children:"אין פריטים בהזמנה זו"})]})}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ כמות: ',i.reduce((s,c)=>s+(c.quantity||1),0)]}),y.jsx("button",{onClick:()=>e(!1),style:{background:"#059669",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"500"},children:"סגור"})]})})]})})]})},UU=({show:n,data:e,setData:t,allItems:r,setShowReport:i,fetchItemsAndOrders:a,allEvents:o})=>{const[s,c]=fe.useState({items:[]}),[f,h]=fe.useState(!1),[p,g]=fe.useState(""),[m,b]=fe.useState({pickupDate:null,returnDate:null});if(fe.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),fe.useEffect(()=>{if(n&&e.eventId&&o.length>0){console.log("🚀 Initializing edit modal");const P=e.eventId.split("-")[0],E=o.filter(R=>R.orderId===P);if(E.length>0){const R=E[0];b({pickupDate:new Date(R.pickupDate),returnDate:new Date(R.returnDate)}),console.log("📅 Order dates:",{pickup:R.pickupDate,return:R.returnDate})}c({items:[...e.items||[]]})}},[n,e,o]),!n)return null;const _=P=>{var Q,z;const E=r.find(U=>U.name===P);if(!E)return console.warn(`❌ Stock not found for ${P}`),0;const R=E.quantity||0,L=(Q=e.eventId)==null?void 0:Q.split("-")[0];if(!m.pickupDate||!m.returnDate)return console.warn("⚠️ Missing pickup/return dates for current order."),R;console.log(`🔎 Checking "${P}" availability from ${m.pickupDate.toDateString()} to ${m.returnDate.toDateString()}`),console.log(`📦 Total stock from database: ${R}`);let T=0;const k=new Set;o.forEach(U=>{if(U.orderId===L||k.has(`${U.orderId}-${P}`))return;const te=new Date(U.pickupDate),oe=new Date(U.returnDate);if(te<=m.returnDate&&oe>=m.pickupDate&&U.items){const ge=U.items.find(G=>G.name===P);ge&&(console.log(`➡️ Overlapping Order ID: ${U.orderId}`),console.log(`    Dates: ${te.toDateString()} - ${oe.toDateString()}`),console.log(`    Reserved: ${ge.quantity}`),T+=ge.quantity||0,k.add(`${U.orderId}-${P}`))}});const B=((z=s.items.find(U=>U.name===P))==null?void 0:z.quantity)||0,V=R-T-B;return console.log(`✅ Available: ${V} = ${R} - ${T} - ${B} (already in order)`),Math.max(0,V)},I=P=>{console.log("➕ Trying to add item:",P.name);const E=_(P.name);if(E<=0){alert(`❌ לא ניתן להוסיף מ-${P.name}. זמין: ${E}`);return}const R=s.items.findIndex(L=>L.name===P.name);if(R>=0){const L=[...s.items];L[R]={...L[R],quantity:L[R].quantity+1},c({...s,items:L})}else{const L={name:P.name,quantity:1,ItemId:P.ItemId||P.itemId||P.id,itemId:P.ItemId||P.itemId||P.id,id:P.id,imageUrl:P.imageUrl||""};c({...s,items:[...s.items,L]})}},C=(P,E)=>{var k;if(console.log(`🔄 Updating ${P} to quantity: ${E}`),E<=0){c({...s,items:s.items.filter(B=>B.name!==P)});return}const R=((k=s.items.find(B=>B.name===P))==null?void 0:k.quantity)||0,L=_(P)+R;if(E>L){alert(`❌ לא ניתן להזמין ${E} מ-${P}. זמין: ${L}`);return}const T=s.items.map(B=>B.name===P?{...B,quantity:E}:B);c({...s,items:T})},N=P=>{console.log("🗑️ Removing item:",P),c({...s,items:s.items.filter(E=>E.name!==P)})},j=async()=>{var P;try{h(!0);const E=(P=e.eventId)==null?void 0:P.split("-")[0];if(!E)throw new Error("שגיאה: לא נמצא מזהה הזמנה");console.log("💾 Saving items:",s.items);const R=s.items.map(L=>({...L,ItemId:L.ItemId||L.itemId||L.id,itemId:L.ItemId||L.itemId||L.id}));await Za(Er(Pt,"orders",E),{items:R}),await a(),t({open:!1,eventId:null,items:[]}),i(!1),alert("🎉 השינויים נשמרו בהצלחה!")}catch(E){console.error("❌ שגיאה בשמירה:",E),alert(E.message||"שמירה נכשלה. נסה שוב.")}finally{h(!1)}},q=()=>{t({open:!1,eventId:null,items:[]})},Y=r.filter(P=>P.name.toLowerCase().includes(p.toLowerCase())),H=P=>{P.target===P.currentTarget&&q()};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,global:!0,children:`
        .edit-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .edit-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        @media (max-width: 768px) {
          .edit-modal-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .edit-modal-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .modal-footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
          }
          
          .modal-footer-mobile button {
            width: 100% !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),y.jsx("div",{className:"edit-modal-overlay",onClick:H,children:y.jsxs("div",{className:"edit-modal-content",dir:"rtl",onClick:P=>P.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1rem",flexShrink:0},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(FE,{size:24}),y.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"עריכת הזמנה"})]}),y.jsx("button",{onClick:q,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),m.pickupDate&&m.returnDate&&y.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"#bfdbfe"},children:["📅 תאריכי ההזמנה: ",m.pickupDate.toLocaleDateString("he-IL")," - ",m.returnDate.toLocaleDateString("he-IL")]})]}),y.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[y.jsxs("div",{style:{marginBottom:"1.5rem"},children:[y.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים נוכחיים בהזמנה (",s.items.length,")"]}),s.items.length>0?y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.items.map((P,E)=>{const R=r.find(k=>k.name===P.name),T=_(P.name)+P.quantity;return y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#f9fafb",padding:"0.75rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[(R==null?void 0:R.imageUrl)&&y.jsx("img",{src:R.imageUrl,alt:P.name,style:{width:"2.5rem",height:"2.5rem",objectFit:"cover",borderRadius:"6px",flexShrink:0}}),y.jsxs("div",{style:{minWidth:0,flex:1},children:[y.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"0.9rem"},children:P.name}),y.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["מזהה: ",(R==null?void 0:R.ItemId)||(R==null?void 0:R.itemId)||"לא נמצא"]}),y.jsxs("div",{style:{fontSize:"0.7rem",color:"#059669",fontWeight:"500"},children:["מקסימום: ",T]})]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},children:[y.jsx("button",{onClick:()=>C(P.name,P.quantity-1),style:{background:"#ef4444",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f,children:y.jsx(dU,{size:12})}),y.jsx("span",{style:{width:"1.5rem",textAlign:"center",fontWeight:"500",fontSize:"0.9rem"},children:P.quantity}),y.jsx("button",{onClick:()=>C(P.name,P.quantity+1),style:{background:P.quantity>=T?"#9ca3af":"#10b981",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:P.quantity>=T?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f||P.quantity>=T,children:y.jsx(vU,{size:12})}),y.jsx("button",{onClick:()=>N(P.name),style:{background:"#ef4444",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",border:"none",cursor:"pointer",marginRight:"0.3rem",fontSize:"0.75rem"},disabled:f,children:"הסר"})]})]},E)})}):y.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"#6b7280"},children:"אין פריטים בהזמנה"})]}),y.jsxs("div",{children:[y.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"הוסף פריטים מהמלאי"}),y.jsx("div",{style:{marginBottom:"1rem"},children:y.jsxs("div",{style:{position:"relative"},children:[y.jsx(BE,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),y.jsx("input",{type:"text",placeholder:"חפש פריט...",value:p,onChange:P=>g(P.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:f})]})}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"0.75rem",maxHeight:"10rem",overflowY:"auto",overflowX:"hidden"},children:Y.map((P,E)=>{var B;const R=s.items.some(V=>V.name===P.name),L=R?(B=s.items.find(V=>V.name===P.name))==null?void 0:B.quantity:0,T=_(P.name),k=L<T+L;return y.jsx("div",{onClick:()=>!f&&k&&I(P),style:{padding:"0.6rem",borderRadius:"8px",border:R?"2px solid #3b82f6":"1px solid #e5e7eb",background:R?"#eff6ff":"white",cursor:f||!k?"not-allowed":"pointer",transition:"all 0.2s",opacity:f||!k?.6:1},children:y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[P.imageUrl&&y.jsx("img",{src:P.imageUrl,alt:P.name,style:{width:"2rem",height:"2rem",objectFit:"cover",borderRadius:"6px",flexShrink:0}}),y.jsxs("div",{style:{flex:1,minWidth:0},children:[y.jsx("div",{style:{fontWeight:"500",fontSize:"0.8rem",color:"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:P.name}),y.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["מזהה: ",P.itemId||P.ItemId]}),y.jsxs("div",{style:{fontSize:"0.65rem",color:T>0?"#059669":"#dc2626",fontWeight:"500"},children:["זמין: ",T]}),R&&y.jsxs("div",{style:{fontSize:"0.65rem",color:"#2563eb",fontWeight:"500"},children:["בהזמנה: ",L]})]})]})},E)})})]})]}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"modal-footer-mobile",children:[y.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ פריטים: ',s.items.reduce((P,E)=>P+E.quantity,0)]}),y.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"modal-footer-mobile",children:[y.jsx("button",{onClick:q,disabled:f,style:{background:"#6b7280",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:f?"not-allowed":"pointer",fontSize:"0.875rem",opacity:f?.6:1},children:"ביטול"}),y.jsx("button",{onClick:j,disabled:f||s.items.length===0,style:{background:s.items.length===0?"#9ca3af":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:s.items.length===0||f?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:f?y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"שומר..."]}):y.jsxs(y.Fragment,{children:[y.jsx(jE,{size:16}),"שמור שינויים"]})})]})]})})]})})]})},zU=({show:n,order:e,onClose:t,onCompleteInspection:r,allItems:i=[],updateItemQuantities:a})=>{const[o,s]=fe.useState([]),[c,f]=fe.useState(""),[h,p]=fe.useState(!1);if(fe.useEffect(()=>{if(n&&(e!=null&&e.items)){const _=e.items.map(I=>({itemId:I.id||I.itemId,name:I.name,quantityExpected:I.quantity||1,quantityReturned:I.quantity||1,isFullyReturned:!0,condition:"good",damageDescription:"",repairCost:0,notes:""}));s(_),f("")}},[n,e]),fe.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n||!e)return null;const g=(_,I,C)=>{s(N=>N.map((j,q)=>{if(q===_){const Y={...j,[I]:C};return Y.isFullyReturned=C>=j.quantityExpected,C<j.quantityExpected?Y.condition="lost":Y.condition==="lost"&&(Y.condition="good"),Y}return j}))},m=async()=>{const _=o.reduce((j,q)=>j+q.quantityExpected,0),I=o.reduce((j,q)=>j+q.quantityReturned,0);o.filter(j=>j.condition==="damaged").length,o.filter(j=>j.condition==="lost").length;const C=Math.round(I/_*100),N=`האם אתה בטוח שברצונך לסיים את בדיקת ההחזרה?

סיכום:
• פריטים שהושאלו: ${_}/${_}
• פריטים שחזרו: ${I}/${_}
• אחוז החזרה: ${C}%

ההזמנה תעבור לאיסוף ההזמנות הסגורות.`;if(window.confirm(N))try{p(!0);const j=o.reduce((E,R)=>E+R.quantityExpected,0),q=o.reduce((E,R)=>E+R.quantityReturned,0),Y=o.filter(E=>E.condition==="damaged").length,H=o.reduce((E,R)=>E+(R.repairCost||0),0),P={totalItemsExpected:j,totalItemsReturned:q,totalDamages:Y,totalRepairCost:H,managerNotes:c,customerNotified:!1,customerAgreedToCharges:!1};for(const E of o){const R=i.find(L=>L.id===E.itemId||L.name===E.name);if(R){let L=0;const T=E.quantityExpected-E.quantityReturned,k=E.condition==="damaged"?E.quantityReturned:0;L=T+k;const B=R.quantity-L,V=Math.max(0,B);console.log(`עדכון מלאי - ${R.name}:`,{originalStock:R.quantity,expectedReturn:E.quantityExpected,quantityReturned:E.quantityReturned,condition:E.condition,itemsNotReturned:T,damagedItems:k,totalToRemove:L,newStock:V}),L>0&&await Za(Er(Pt,"items",R.id),{quantity:V,lastUpdated:Ai()})}}await r(e.id,o,P),a&&await a(),t()}catch(j){console.error("Error completing return inspection:",j),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}finally{p(!1)}},b=_=>{_.target===_.currentTarget&&window.confirm("האם אתה בטוח שברצונך לסגור את חלון בדיקת החזרה?")&&t()};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,global:!0,children:`
        .return-inspection-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.7) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .return-inspection-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        @media (max-width: 768px) {
          .return-inspection-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .return-inspection-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
            align-items: stretch !important;
          }
          
          .footer-mobile button {
            width: 100% !important;
          }
          
          .footer-mobile .summary-text {
            text-align: center !important;
            margin-bottom: 0.5rem !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),y.jsx("div",{className:"return-inspection-overlay",onClick:b,children:y.jsxs("div",{className:"return-inspection-content",dir:"rtl",onClick:_=>_.stopPropagation(),children:[y.jsx("div",{style:{background:"linear-gradient(to right, #fb923c, #f97316)",color:"white",padding:"1rem",flexShrink:0},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx(Md,{size:24}),y.jsxs("div",{children:[y.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"בדיקת החזרת מוצרים"}),y.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:["לקוח: ",e.clientName," • ",e.phone]})]})]}),y.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]})}),y.jsx("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:o.map((_,I)=>{var C,N;return y.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1rem",background:"#ffffff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx("img",{src:((C=e.items.find(j=>j.id===_.itemId))==null?void 0:C.imageUrl)||"/no-image-available.png",alt:_.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb",flexShrink:0}}),y.jsxs("div",{style:{minWidth:0,flex:1},children:[y.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:_.name}),y.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["מזהה: ",_.ItemId||((N=e.items.find(j=>j.id===_.itemId))==null?void 0:N.ItemId)||_.itemId]}),y.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["כמות מוזמנת: ",_.quantityExpected]})]})]})}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[y.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"כמות שחזרה:"}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[y.jsx("button",{onClick:()=>{const j=Math.max(0,_.quantityReturned-1);g(I,"quantityReturned",j)},disabled:_.quantityReturned<=0,style:{background:_.quantityReturned<=0?"#d1d5db":"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:_.quantityReturned<=0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:_.quantityReturned<=0?.6:1},children:"-"}),y.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"40px",textAlign:"center",color:"#1f2937"},children:_.quantityReturned}),y.jsx("button",{onClick:()=>{const j=Math.min(_.quantityExpected,_.quantityReturned+1);g(I,"quantityReturned",j)},disabled:_.quantityReturned>=_.quantityExpected,style:{background:_.quantityReturned>=_.quantityExpected?"#d1d5db":"#10b981",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:_.quantityReturned>=_.quantityExpected?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:_.quantityReturned>=_.quantityExpected?.6:1},children:"+"})]})]}),_.quantityReturned<_.quantityExpected&&y.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:"#fef3c7",borderRadius:"6px",textAlign:"center"},children:y.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"500"},children:["⚠️ חסרים ",_.quantityExpected-_.quantityReturned," פריטים"]})})]},I)})})}),y.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"footer-mobile",children:[y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"summary-text",children:"בדיקת החזרה תעביר את ההזמנה להיסטוריה"}),y.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"footer-mobile",children:[y.jsx("button",{onClick:t,disabled:h,style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:h?"not-allowed":"pointer",fontSize:"0.875rem",opacity:h?.6:1},children:"ביטול"}),y.jsx("button",{onClick:m,disabled:h,style:{background:"#f59e0b",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:h?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:h?.6:1,justifyContent:"center"},children:h?y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"מעבד..."]}):y.jsxs(y.Fragment,{children:[y.jsx(jE,{size:16}),"השלם בדיקת החזרה"]})})]})]})})]})})]})},VU=({allItems:n,itemsMap:e,events:t,setAllItems:r,setItemsMap:i,setEvents:a,fetchItemsAndOrders:o})=>{const[s,c]=fe.useState(new Date),[f,h]=fe.useState([]),[p,g]=fe.useState(!1),[m,b]=fe.useState(null),[_,I]=fe.useState(!1),[C,N]=fe.useState({open:!1,eventId:null,items:[]}),[j,q]=fe.useState({show:!1,order:null}),Y=async E=>{try{const R=t.filter(L=>L.orderId===E);if(R.length>0){const L={id:E,clientName:R[0].clientName,phone:R[0].phone,items:R[0].items,pickupDate:R[0].pickupDate,returnDate:R[0].returnDate};q({show:!0,order:L}),g(!1)}}catch(R){console.error("Error initializing return inspection:",R),alert("שגיאה בהתחלת בדיקת החזרה. נסה שוב.")}},H=async E=>{try{const R={status:"closed","returnInspection.inspectionStatus":"completed","returnInspection.inspectedBy":"סגירה ידנית","returnInspection.inspectionDate":Ai(),"returnInspection.managerNotes":"הזמנה נסגרה ידנית על ידי המנהל","returnInspection.totalItemsReturned":0,"returnInspection.totalDamages":0,"returnInspection.totalRepairCost":0,closedAt:Ai(),manuallyClosedAt:Ai()};await Za(Er(Pt,"orders",E),R),await o(),g(!1),alert("ההזמנה נסגרה ידנית והועברה להיסטוריה!")}catch(R){console.error("Error manually closing order:",R),alert("שגיאה בסגירת ההזמנה. נסה שוב.")}},P=async(E,R,L)=>{try{const T={status:"closed",returnInspection:{inspectionStatus:"completed",inspectedBy:"מנהל המערכת",inspectionDate:Ai(),itemInspections:R.map(k=>({itemId:k.itemId,name:k.name,quantityExpected:k.quantityExpected,quantityReturned:k.quantityReturned,condition:k.condition,damageDescription:k.damageDescription||"",repairCost:k.repairCost||0,notes:k.notes||"",inspectedAt:new Date().toISOString()})),totalItemsReturned:L.totalItemsReturned,totalItemsExpected:L.totalItemsExpected,totalDamages:L.totalDamages,totalRepairCost:L.totalRepairCost,managerNotes:L.managerNotes,customerNotified:L.customerNotified,customerAgreedToCharges:L.customerAgreedToCharges},closedAt:Ai()};await Za(Er(Pt,"orders",E),T),await o(),q({show:!1,order:null}),alert("בדיקת החזרה הושלמה בהצלחה! ההזמנה הועברה להיסטוריה.")}catch(T){console.error("Error completing return inspection:",T),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}};return y.jsxs("div",{className:"mt-6",children:[y.jsx(jU,{currentDate:s,events:t,setCurrentDate:c,setSelectedEvents:h,setSelectedDate:b,setShowReport:g}),y.jsx(BU,{show:p,selectedDate:m,selectedEvents:f,allItems:n,setShowReport:g,setShowItemsModal:I,setEditItemModal:N,fetchItemsAndOrders:o,onStartReturnInspection:Y,onCloseOrderManually:H}),y.jsx(FU,{show:!!_,setShow:()=>I(!1),selectedEvents:_,allItems:n}),y.jsx(UU,{show:C.open,data:C,setData:N,allItems:n,setShowReport:g,fetchItemsAndOrders:o,allEvents:t}),y.jsx(zU,{show:j.show,order:j.order,onClose:()=>q({show:!1,order:null}),onCompleteInspection:P,allItems:n,updateItemQuantities:o})]})},f4=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},qU=async(n,e)=>{const t=f4(new Date);for(const r of n.docs){const i=r.data();!i.pickupDate||i.stockUpdated||f4(new Date(i.pickupDate))>t||await Za(Er(e,"orders",r.id),{stockUpdated:!0})}},HU=(n,e)=>n.docs.flatMap(t=>{const r=t.data();if(r.status==="closed")return[];const i=(o=[])=>o.map(s=>{const c=e.find(f=>f.id===s.id);return{...s,imageUrl:(c==null?void 0:c.imageUrl)||null,itemId:(c==null?void 0:c.itemId)||"לא נמצא"}}),a=[];if(r.pickupDate&&r.returnDate){const o=new Date(r.pickupDate),s=new Date(r.returnDate);o.setHours(0,0,0,0),s.setHours(0,0,0,0);const c=Math.ceil((s-o)/(1e3*60*60*24));for(let f=0;f<=c;f++){if(f!==0&&f!==c)continue;const h=new Date(o);h.setDate(o.getDate()+f);let p,g,m;f===0?(p="השאלה",g="📦",m="איסוף מוצרים"):f===c&&(p="החזרה",g="🔄",m="החזרת מוצרים"),a.push({id:`${t.id}-${h.toISOString().slice(0,10)}`,orderId:t.id,date:new Date(h),clientName:r.clientName,phone:r.phone,type:p,icon:g,description:m,items:i(r.items),pickupDate:r.pickupDate,returnDate:r.returnDate,dayNumber:f+1,totalDays:c+1,isMultiDay:c>0})}}return a}),WU=async(n,e,t,r)=>{try{const a=(await sr(An(n,"items"))).docs.map(f=>{const h=f.data();return{id:f.id,itemId:h.ItemId,name:h.name,imageUrl:h.imageUrl,quantity:h.quantity||0,isDeleted:h.isDeleted||!1}}).filter(f=>!f.isDeleted);console.log("📊 Items loaded with quantities:",a.map(f=>({name:f.name,quantity:f.quantity}))),e(a);const o={};a.forEach(f=>{o[f.name]=f.imageUrl||null}),t(o);const s=await sr(An(n,"orders"));await qU(s,n);const c=HU(s,a);r(c)}catch(i){console.error("שגיאה בטעינת ההזמנות והפריטים:",i)}},GU=()=>{const[n,e]=fe.useState([]),[t,r]=fe.useState({}),[i,a]=fe.useState([]),[o,s]=fe.useState(!0),[c,f]=fe.useState(null),h=async()=>{try{s(!0),f(null),await WU(Pt,e,r,a)}catch(p){console.error("Error fetching calendar data:",p),f("שגיאה בטעינת נתוני היומן. אנא נסה שוב.")}finally{s(!1)}};return fe.useEffect(()=>{h()},[]),o?y.jsx("div",{className:"flex justify-center items-center min-h-screen",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full border-blue-600 border-t-transparent"}),y.jsx("p",{className:"mt-4 text-gray-600",children:"טוען נתוני יומן..."})]})}):c?y.jsx("div",{className:"flex justify-center items-center min-h-screen",children:y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-red-600 mb-4",children:c}),y.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"נסה שוב"})]})}):y.jsx("div",{className:"container mx-auto px-4",children:y.jsx(VU,{allItems:n,itemsMap:t,events:i,setAllItems:e,setItemsMap:r,setEvents:a,fetchItemsAndOrders:h})})};function HE(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=HE(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function nh(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=HE(n))&&(r&&(r+=" "),r+=e);return r}function $U(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}$U(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var D1=n=>typeof n=="number"&&!isNaN(n),fh=n=>typeof n=="string",tu=n=>typeof n=="function",YU=n=>fh(n)||D1(n),Py=n=>fh(n)||tu(n)?n:null,XU=(n,e)=>n===!1||D1(n)&&n>0?n:e,Ly=n=>fe.isValidElement(n)||fh(n)||tu(n)||D1(n);function KU(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function QU({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:s,done:c,nodeRef:f,isIn:h,playToast:p}){let g=t?`${n}--${o}`:n,m=t?`${e}--${o}`:e,b=fe.useRef(0);return fe.useLayoutEffect(()=>{let _=f.current,I=g.split(" "),C=N=>{N.target===f.current&&(p(),_.removeEventListener("animationend",C),_.removeEventListener("animationcancel",C),b.current===0&&N.type!=="animationcancel"&&_.classList.remove(...I))};_.classList.add(...I),_.addEventListener("animationend",C),_.addEventListener("animationcancel",C)},[]),fe.useEffect(()=>{let _=f.current,I=()=>{_.removeEventListener("animationend",I),r?KU(_,c,i):c()};h||(s?I():(b.current=1,_.className+=` ${m}`,_.addEventListener("animationend",I)))},[h]),Mn.createElement(Mn.Fragment,null,a)}}function h4(n,e){return{content:WE(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function WE(n,e,t=!1){return fe.isValidElement(n)&&!fh(n.type)?fe.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):tu(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function ZU({closeToast:n,theme:e,ariaLabel:t="close"}){return Mn.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},Mn.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Mn.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function JU({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:a,controlledProgress:o,progress:s,rtl:c,isIn:f,theme:h}){let p=i||o&&s===0,g={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};o&&(g.transform=`scaleX(${s})`);let m=nh("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),b=tu(a)?a({rtl:c,type:r,defaultClassName:m}):nh(m,a),_={[o&&s>=1?"onTransitionEnd":"onAnimationEnd"]:o&&s<1?null:()=>{f&&t()}};return Mn.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},Mn.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${r}`}),Mn.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:b,style:g,..._}))}var ez=1,GE=()=>`${ez++}`;function tz(n,e,t){let r=1,i=0,a=[],o=[],s=e,c=new Map,f=new Set,h=N=>(f.add(N),()=>f.delete(N)),p=()=>{o=Array.from(c.values()),f.forEach(N=>N())},g=({containerId:N,toastId:j,updateId:q})=>{let Y=N?N!==n:n!==1,H=c.has(j)&&q==null;return Y||H},m=(N,j)=>{c.forEach(q=>{var Y;(j==null||j===q.props.toastId)&&((Y=q.toggle)==null||Y.call(q,N))})},b=N=>{var j,q;(q=(j=N.props)==null?void 0:j.onClose)==null||q.call(j,N.removalReason),N.isActive=!1},_=N=>{if(N==null)c.forEach(b);else{let j=c.get(N);j&&b(j)}p()},I=()=>{i-=a.length,a=[]},C=N=>{var j,q;let{toastId:Y,updateId:H}=N.props,P=H==null;N.staleId&&c.delete(N.staleId),N.isActive=!0,c.set(Y,N),p(),t(h4(N,P?"added":"updated")),P&&((q=(j=N.props).onOpen)==null||q.call(j))};return{id:n,props:s,observe:h,toggle:m,removeToast:_,toasts:c,clearQueue:I,buildToast:(N,j)=>{if(g(j))return;let{toastId:q,updateId:Y,data:H,staleId:P,delay:E}=j,R=Y==null;R&&i++;let L={...s,style:s.toastStyle,key:r++,...Object.fromEntries(Object.entries(j).filter(([k,B])=>B!=null)),toastId:q,updateId:Y,data:H,isIn:!1,className:Py(j.className||s.toastClassName),progressClassName:Py(j.progressClassName||s.progressClassName),autoClose:j.isLoading?!1:XU(j.autoClose,s.autoClose),closeToast(k){c.get(q).removalReason=k,_(q)},deleteToast(){let k=c.get(q);if(k!=null){if(t(h4(k,"removed")),c.delete(q),i--,i<0&&(i=0),a.length>0){C(a.shift());return}p()}}};L.closeButton=s.closeButton,j.closeButton===!1||Ly(j.closeButton)?L.closeButton=j.closeButton:j.closeButton===!0&&(L.closeButton=Ly(s.closeButton)?s.closeButton:!0);let T={content:N,props:L,staleId:P};s.limit&&s.limit>0&&i>s.limit&&R?a.push(T):D1(E)?setTimeout(()=>{C(T)},E):C(T)},setProps(N){s=N},setToggle:(N,j)=>{let q=c.get(N);q&&(q.toggle=j)},isToastActive:N=>{var j;return(j=c.get(N))==null?void 0:j.isActive},getSnapshot:()=>o}}var Qa=new Map,c1=[],My=new Set,nz=n=>My.forEach(e=>e(n)),$E=()=>Qa.size>0;function rz(){c1.forEach(n=>XE(n.content,n.options)),c1=[]}var iz=(n,{containerId:e})=>{var t;return(t=Qa.get(e||1))==null?void 0:t.toasts.get(n)};function YE(n,e){var t;if(e)return!!((t=Qa.get(e))!=null&&t.isToastActive(n));let r=!1;return Qa.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function az(n){if(!$E()){c1=c1.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||YU(n))Qa.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Qa.get(n.containerId);e?e.removeToast(n.id):Qa.forEach(t=>{t.removeToast(n.id)})}}var oz=(n={})=>{Qa.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function XE(n,e){Ly(n)&&($E()||c1.push({content:n,options:e}),Qa.forEach(t=>{t.buildToast(n,e)}))}function sz(n){var e;(e=Qa.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function KE(n,e){Qa.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function lz(n){let e=n.containerId||1;return{subscribe(t){let r=tz(e,n,nz);Qa.set(e,r);let i=r.observe(t);return rz(),()=>{i(),Qa.delete(e)}},setProps(t){var r;(r=Qa.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Qa.get(e))==null?void 0:t.getSnapshot()}}}function cz(n){return My.add(n),()=>{My.delete(n)}}function uz(n){return n&&(fh(n.toastId)||D1(n.toastId))?n.toastId:GE()}function O1(n,e){return XE(n,e),e.toastId}function Mm(n,e){return{...e,type:e&&e.type||n,toastId:uz(e)}}function jm(n){return(e,t)=>O1(e,Mm(n,t))}function mn(n,e){return O1(n,Mm("default",e))}mn.loading=(n,e)=>O1(n,Mm("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function fz(n,{pending:e,error:t,success:r},i){let a;e&&(a=fh(e)?mn.loading(e,i):mn.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(f,h,p)=>{if(h==null){mn.dismiss(a);return}let g={type:f,...o,...i,data:p},m=fh(h)?{render:h}:h;return a?mn.update(a,{...g,...m}):mn(m.render,{...g,...m}),p},c=tu(n)?n():n;return c.then(f=>s("success",r,f)).catch(f=>s("error",t,f)),c}mn.promise=fz;mn.success=jm("success");mn.info=jm("info");mn.error=jm("error");mn.warning=jm("warning");mn.warn=mn.warning;mn.dark=(n,e)=>O1(n,Mm("default",{theme:"dark",...e}));function hz(n){az(n)}mn.dismiss=hz;mn.clearWaitingQueue=oz;mn.isActive=YE;mn.update=(n,e={})=>{let t=iz(n,e);if(t){let{props:r,content:i}=t,a={delay:100,...r,...e,toastId:e.toastId||n,updateId:GE()};a.toastId!==n&&(a.staleId=n);let o=a.render||i;delete a.render,O1(o,a)}};mn.done=n=>{mn.update(n,{progress:1})};mn.onChange=cz;mn.play=n=>KE(!0,n);mn.pause=n=>KE(!1,n);function dz(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=fe.useRef(lz(n)).current;i(n);let a=(e=fe.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function o(s){if(!a)return[];let c=new Map;return n.newestOnTop&&a.reverse(),a.forEach(f=>{let{position:h}=f.props;c.has(h)||c.set(h,[]),c.get(h).push(f)}),Array.from(c,f=>s(f[0],f[1]))}return{getToastToRender:o,isToastActive:YE,count:a==null?void 0:a.length}}function pz(n){let[e,t]=fe.useState(!1),[r,i]=fe.useState(!1),a=fe.useRef(null),o=fe.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:c,closeToast:f,onClick:h,closeOnClick:p}=n;sz({id:n.toastId,containerId:n.containerId,fn:t}),fe.useEffect(()=>{if(n.pauseOnFocusLoss)return g(),()=>{m()}},[n.pauseOnFocusLoss]);function g(){document.hasFocus()||C(),window.addEventListener("focus",I),window.addEventListener("blur",C)}function m(){window.removeEventListener("focus",I),window.removeEventListener("blur",C)}function b(P){if(n.draggable===!0||n.draggable===P.pointerType){N();let E=a.current;o.canCloseOnClick=!0,o.canDrag=!0,E.style.transition="none",n.draggableDirection==="x"?(o.start=P.clientX,o.removalDistance=E.offsetWidth*(n.draggablePercent/100)):(o.start=P.clientY,o.removalDistance=E.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function _(P){let{top:E,bottom:R,left:L,right:T}=a.current.getBoundingClientRect();P.nativeEvent.type!=="touchend"&&n.pauseOnHover&&P.clientX>=L&&P.clientX<=T&&P.clientY>=E&&P.clientY<=R?C():I()}function I(){t(!0)}function C(){t(!1)}function N(){o.didMove=!1,document.addEventListener("pointermove",q),document.addEventListener("pointerup",Y)}function j(){document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",Y)}function q(P){let E=a.current;if(o.canDrag&&E){o.didMove=!0,e&&C(),n.draggableDirection==="x"?o.delta=P.clientX-o.start:o.delta=P.clientY-o.start,o.start!==P.clientX&&(o.canCloseOnClick=!1);let R=n.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;E.style.transform=`translate3d(${R},0)`,E.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function Y(){j();let P=a.current;if(o.canDrag&&o.didMove&&P){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}P.style.transition="transform 0.2s, opacity 0.2s",P.style.removeProperty("transform"),P.style.removeProperty("opacity")}}let H={onPointerDown:b,onPointerUp:_};return s&&c&&(H.onMouseEnter=C,n.stacked||(H.onMouseLeave=I)),p&&(H.onClick=P=>{h&&h(P),o.canCloseOnClick&&f(!0)}),{playToast:I,pauseToast:C,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:H}}var gz=typeof window<"u"?fe.useLayoutEffect:fe.useEffect,Bm=({theme:n,type:e,isLoading:t,...r})=>Mn.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function mz(n){return Mn.createElement(Bm,{...n},Mn.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function vz(n){return Mn.createElement(Bm,{...n},Mn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function yz(n){return Mn.createElement(Bm,{...n},Mn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function xz(n){return Mn.createElement(Bm,{...n},Mn.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function bz(){return Mn.createElement("div",{className:"Toastify__spinner"})}var jy={info:vz,warning:mz,success:yz,error:xz,spinner:bz},wz=n=>n in jy;function _z({theme:n,type:e,isLoading:t,icon:r}){let i=null,a={theme:n,type:e};return r===!1||(tu(r)?i=r({...a,isLoading:t}):fe.isValidElement(r)?i=fe.cloneElement(r,a):t?i=jy.spinner():wz(e)&&(i=jy[e](a))),i}var Az=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:a}=pz(n),{closeButton:o,children:s,autoClose:c,onClick:f,type:h,hideProgressBar:p,closeToast:g,transition:m,position:b,className:_,style:I,progressClassName:C,updateId:N,role:j,progress:q,rtl:Y,toastId:H,deleteToast:P,isIn:E,isLoading:R,closeOnClick:L,theme:T,ariaLabel:k}=n,B=nh("Toastify__toast",`Toastify__toast-theme--${T}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":Y},{"Toastify__toast--close-on-click":L}),V=tu(_)?_({rtl:Y,position:b,type:h,defaultClassName:B}):nh(B,_),Q=_z(n),z=!!q||!c,U={closeToast:g,type:h,theme:T},te=null;return o===!1||(tu(o)?te=o(U):fe.isValidElement(o)?te=fe.cloneElement(o,U):te=ZU(U)),Mn.createElement(m,{isIn:E,done:P,position:b,preventExitTransition:t,nodeRef:r,playToast:a},Mn.createElement("div",{id:H,tabIndex:0,onClick:f,"data-in":E,className:V,...i,style:I,ref:r,...E&&{role:j,"aria-label":k}},Q!=null&&Mn.createElement("div",{className:nh("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},Q),WE(s,n,!e),te,!n.customProgressBar&&Mn.createElement(JU,{...N&&!z?{key:`p-${N}`}:{},rtl:Y,theme:T,delay:c,isRunning:e,isIn:E,closeToast:g,hide:p,type:h,className:C,controlledProgress:z,progress:q||0})))},Ez=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),Sz=QU(Ez("bounce",!0)),Cz={position:"top-right",transition:Sz,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function Iz(n){let e={...Cz,...n},t=n.stacked,[r,i]=fe.useState(!0),a=fe.useRef(null),{getToastToRender:o,isToastActive:s,count:c}=dz(e),{className:f,style:h,rtl:p,containerId:g,hotKeys:m}=e;function b(I){let C=nh("Toastify__toast-container",`Toastify__toast-container--${I}`,{"Toastify__toast-container--rtl":p});return tu(f)?f({position:I,rtl:p,defaultClassName:C}):nh(C,Py(f))}function _(){t&&(i(!0),mn.play())}return gz(()=>{var I;if(t){let C=a.current.querySelectorAll('[data-in="true"]'),N=12,j=(I=e.position)==null?void 0:I.includes("top"),q=0,Y=0;Array.from(C).reverse().forEach((H,P)=>{let E=H;E.classList.add("Toastify__toast--stacked"),P>0&&(E.dataset.collapsed=`${r}`),E.dataset.pos||(E.dataset.pos=j?"top":"bot");let R=q*(r?.2:1)+(r?0:N*P);E.style.setProperty("--y",`${j?R:R*-1}px`),E.style.setProperty("--g",`${N}`),E.style.setProperty("--s",`${1-(r?Y:0)}`),q+=E.offsetHeight,Y+=.025})}},[r,c,t]),fe.useEffect(()=>{function I(C){var N;let j=a.current;m(C)&&((N=j.querySelector('[tabIndex="0"]'))==null||N.focus(),i(!1),mn.pause()),C.key==="Escape"&&(document.activeElement===j||j!=null&&j.contains(document.activeElement))&&(i(!0),mn.play())}return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[m]),Mn.createElement("section",{ref:a,className:"Toastify",id:g,onMouseEnter:()=>{t&&(i(!1),mn.pause())},onMouseLeave:_,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((I,C)=>{let N=C.length?{...h}:{...h,pointerEvents:"none"};return Mn.createElement("div",{tabIndex:-1,className:b(I),"data-stacked":t,style:N,key:`c-${I}`},C.map(({content:j,props:q})=>Mn.createElement(Az,{...q,stacked:t,collapseAll:_,isIn:s(q.toastId,q.containerId),key:`t-${q.key}`},j)))}))}var Yh={},Iv={exports:{}},Tv,d4;function Tz(){if(d4)return Tv;d4=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Tv=n,Tv}var Rv,p4;function Rz(){if(p4)return Rv;p4=1;var n=Tz();function e(){}function t(){}return t.resetWarningCache=e,Rv=function(){function r(o,s,c,f,h,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Rv}var g4;function Nz(){return g4||(g4=1,Iv.exports=Rz()()),Iv.exports}var m4;function Dz(){if(m4)return Yh;m4=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.default=void 0;var n=Object.assign||function(P){for(var E=1;E<arguments.length;E++){var R=arguments[E];for(var L in R)Object.prototype.hasOwnProperty.call(R,L)&&(P[L]=R[L])}return P},e=function(){function P(E,R){for(var L=0;L<R.length;L++){var T=R[L];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,R,L){return R&&P(E.prototype,R),L&&P(E,L),E}}(),t,r;Yh.confirmAlert=H;var i=Zg(),a=f(i),o=Nz(),s=f(o),c=J4();function f(P){return P&&P.__esModule?P:{default:P}}function h(P,E){if(!(P instanceof E))throw new TypeError("Cannot call a class as a function")}function p(P,E){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:P}function g(P,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);P.prototype=Object.create(E&&E.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(P,E):P.__proto__=E)}var m=(r=t=function(P){g(E,P);function E(){var R,L,T,k;h(this,E);for(var B=arguments.length,V=Array(B),Q=0;Q<B;Q++)V[Q]=arguments[Q];return k=(L=(T=p(this,(R=E.__proto__||Object.getPrototypeOf(E)).call.apply(R,[this].concat(V))),T),T.handleClickButton=function(z){z.onClick&&z.onClick(),T.close()},T.handleClickOverlay=function(z){var U=T.props,te=U.closeOnClickOutside,oe=U.onClickOutside,X=z.target===T.overlay;te&&X&&(oe(),T.close()),z.stopPropagation()},T.close=function(){var z=T.props.afterClose;Y(),j(T.props),C(z)},T.keyboard=function(z){var U=T.props,te=U.closeOnEscape,oe=U.onKeypressEscape,X=U.onkeyPress,ge=U.keyCodeForClose,G=z.keyCode,Z=G===27;ge.includes(G)&&T.close(),te&&Z&&(oe(z),T.close()),X&&X()},T.componentDidMount=function(){document.addEventListener("keydown",T.keyboard,!1)},T.componentWillUnmount=function(){document.removeEventListener("keydown",T.keyboard,!1),T.props.willUnmount()},T.renderCustomUI=function(){var z=T.props,U=z.title,te=z.message,oe=z.buttons,X=z.customUI,ge={title:U,message:te,buttons:oe,onClose:T.close};return X(ge)},L),p(T,k)}return e(E,[{key:"render",value:function(){var L=this,T=this.props,k=T.title,B=T.message,V=T.buttons,Q=T.childrenElement,z=T.customUI,U=T.overlayClassName;return a.default.createElement("div",{className:"react-confirm-alert-overlay "+U,ref:function(oe){return L.overlay=oe},onClick:this.handleClickOverlay},a.default.createElement("div",{className:"react-confirm-alert"},z?this.renderCustomUI():a.default.createElement("div",{className:"react-confirm-alert-body"},k&&a.default.createElement("h1",null,k),B,Q(),a.default.createElement("div",{className:"react-confirm-alert-button-group"},V.map(function(te,oe){return a.default.createElement("button",n({key:oe,className:te.className},te,{onClick:function(ge){return L.handleClickButton(te)}}),te.label)})))))}}]),E}(i.Component),t.propTypes={title:s.default.string,message:s.default.string,buttons:s.default.array.isRequired,childrenElement:s.default.func,customUI:s.default.func,closeOnClickOutside:s.default.bool,closeOnEscape:s.default.bool,keyCodeForClose:s.default.arrayOf(s.default.number),willUnmount:s.default.func,afterClose:s.default.func,onClickOutside:s.default.func,onKeypressEscape:s.default.func,onkeyPress:s.default.func,overlayClassName:s.default.string},t.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},r);Yh.default=m;var b=null,_="react-confirm-alert";function I(){var P=document.getElementById("react-confirm-alert-firm-svg");if(!P){var E="http://www.w3.org/2000/svg",R=document.createElementNS(E,"feGaussianBlur");R.setAttribute("stdDeviation","0.3");var L=document.createElementNS(E,"filter");L.setAttribute("id","gaussian-blur"),L.appendChild(R);var T=document.createElementNS(E,"svg");T.setAttribute("id","react-confirm-alert-firm-svg"),T.setAttribute("class","react-confirm-alert-svg"),T.appendChild(L),document.body.appendChild(T)}}function C(P){var E=document.getElementById("react-confirm-alert-firm-svg");E&&E.parentNode.removeChild(E),document.body.children[0].classList.remove("react-confirm-alert-blur"),P()}function N(P){var E=document.getElementById(P.targetId||_);P.targetId&&!E&&console.error("React Confirm Alert:","Can not get element id (#"+P.targetId+")"),E?(b=(0,c.createRoot)(E),b.render(a.default.createElement(m,P))):(document.body.children[0].classList.add("react-confirm-alert-blur"),E=document.createElement("div"),E.id=_,document.body.appendChild(E),b=(0,c.createRoot)(E),b.render(a.default.createElement(m,P)))}function j(P){var E=document.getElementById(P.targetId||_);E&&b.unmount(E)}function q(){document.body.classList.add("react-confirm-alert-body-element")}function Y(){document.body.classList.remove("react-confirm-alert-body-element")}function H(P){q(),I(),N(P)}return Yh}var Oz=Dz();function kz(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}function QE(n,e){return new Promise(function(t,r){let i;return Pz(n).then(function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const Pz=n=>new Promise((e,t)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let o=0;if(a.getUint16(o)!==65496)return t("not a valid JPEG");for(o+=2;;){const s=a.getUint16(o);if(s===65498)break;const c=a.getUint16(o+2);if(s===65505&&a.getUint32(o+4)===1165519206){const f=o+10;let h;switch(a.getUint16(f)){case 18761:h=!0;break;case 19789:h=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(f+2,h)!==42)return t("TIFF header contains invalid version");const p=a.getUint32(f+4,h),g=f+p+2+12*a.getUint16(f+p,h);for(let m=f+p+2;m<g;m+=12)if(a.getUint16(m,h)==274){if(a.getUint16(m+2,h)!==3)return t("Orientation data type is invalid");if(a.getUint32(m+4,h)!==1)return t("Orientation data count is invalid");a.setUint16(m+8,1,h);break}return e(i.slice(o,o+2+c))}o+=2+c}return e(new Blob)}),r.readAsArrayBuffer(n)});var Vg={},Lz={get exports(){return Vg},set exports(n){Vg=n}};(function(n){var e,t,r={};Lz.exports=r,r.parse=function(i,a){for(var o=r.bin.readUshort,s=r.bin.readUint,c=0,f={},h=new Uint8Array(i),p=h.length-4;s(h,p)!=101010256;)p--;c=p,c+=4;var g=o(h,c+=4);o(h,c+=2);var m=s(h,c+=2),b=s(h,c+=4);c+=4,c=b;for(var _=0;_<g;_++){s(h,c),c+=4,c+=4,c+=4,s(h,c+=4),m=s(h,c+=4);var I=s(h,c+=4),C=o(h,c+=4),N=o(h,c+2),j=o(h,c+4);c+=6;var q=s(h,c+=8);c+=4,c+=C+N+j,r._readLocal(h,q,f,m,I,a)}return f},r._readLocal=function(i,a,o,s,c,f){var h=r.bin.readUshort,p=r.bin.readUint;p(i,a),h(i,a+=4),h(i,a+=2);var g=h(i,a+=2);p(i,a+=2),p(i,a+=4),a+=4;var m=h(i,a+=8),b=h(i,a+=2);a+=2;var _=r.bin.readUTF8(i,a,m);if(a+=m,a+=b,f)o[_]={size:c,csize:s};else{var I=new Uint8Array(i.buffer,a);if(g==0)o[_]=new Uint8Array(I.buffer.slice(a,a+s));else{if(g!=8)throw"unknown compression method: "+g;var C=new Uint8Array(c);r.inflateRaw(I,C),o[_]=C}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var o=0,s=new Uint8Array(50+Math.floor(1.1*i.length));s[o]=120,s[o+1]=156,o+=2,o=r.F.deflateRaw(i,s,o,a.level);var c=r.adler(i,0,i.length);return s[o+0]=c>>>24&255,s[o+1]=c>>>16&255,s[o+2]=c>>>8&255,s[o+3]=c>>>0&255,new Uint8Array(s.buffer,0,o+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),s=r.F.deflateRaw(i,o,s,a.level);return new Uint8Array(o.buffer,0,s)},r.encode=function(i,a){a==null&&(a=!1);var o=0,s=r.bin.writeUint,c=r.bin.writeUshort,f={};for(var h in i){var p=!r._noNeed(h)&&!a,g=i[h],m=r.crc.crc(g,0,g.length);f[h]={cpr:p,usize:g.length,crc:m,file:p?r.deflateRaw(g):g}}for(var h in f)o+=f[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var b=new Uint8Array(o),_=0,I=[];for(var h in f){var C=f[h];I.push(_),_=r._writeHeader(b,_,h,C,0)}var N=0,j=_;for(var h in f)C=f[h],I.push(_),_=r._writeHeader(b,_,h,C,1,I[N++]);var q=_-j;return s(b,_,101010256),_+=4,c(b,_+=4,N),c(b,_+=2,N),s(b,_+=2,q),s(b,_+=4,j),_+=4,_+=2,b.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,o,s,c,f){var h=r.bin.writeUint,p=r.bin.writeUshort,g=s.file;return h(i,a,c==0?67324752:33639248),a+=4,c==1&&(a+=2),p(i,a,20),p(i,a+=2,0),p(i,a+=2,s.cpr?8:0),h(i,a+=2,0),h(i,a+=4,s.crc),h(i,a+=4,g.length),h(i,a+=4,s.usize),p(i,a+=4,r.bin.sizeUTF8(o)),p(i,a+=2,0),a+=2,c==1&&(a+=2,a+=2,h(i,a+=6,f),a+=4),a+=r.bin.writeUTF8(i,a,o),c==0&&(i.set(g,a),a+=g.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var o=a,s=0;s<8;s++)1&o?o=3988292384^o>>>1:o>>>=1;i[a]=o}return i}(),update:function(i,a,o,s){for(var c=0;c<s;c++)i=r.crc.table[255&(i^a[o+c])]^i>>>8;return i},crc:function(i,a,o){return 4294967295^r.crc.update(4294967295,i,a,o)}},r.adler=function(i,a,o){for(var s=1,c=0,f=a,h=a+o;f<h;){for(var p=Math.min(f+5552,h);f<p;)c+=s+=i[f++];s%=65521,c%=65521}return c<<16|s},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255,i[a+2]=o>>16&255,i[a+3]=o>>24&255},readASCII:function(i,a,o){for(var s="",c=0;c<o;c++)s+=String.fromCharCode(i[a+c]);return s},writeASCII:function(i,a,o){for(var s=0;s<o.length;s++)i[a+s]=o.charCodeAt(s)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,o){for(var s,c="",f=0;f<o;f++)c+="%"+r.bin.pad(i[a+f].toString(16));try{s=decodeURIComponent(c)}catch{return r.bin.readASCII(i,a,o)}return s},writeUTF8:function(i,a,o){for(var s=o.length,c=0,f=0;f<s;f++){var h=o.charCodeAt(f);if((4294967168&h)==0)i[a+c]=h,c++;else if((4294965248&h)==0)i[a+c]=192|h>>6,i[a+c+1]=128|h>>0&63,c+=2;else if((4294901760&h)==0)i[a+c]=224|h>>12,i[a+c+1]=128|h>>6&63,i[a+c+2]=128|h>>0&63,c+=3;else{if((4292870144&h)!=0)throw"e";i[a+c]=240|h>>18,i[a+c+1]=128|h>>12&63,i[a+c+2]=128|h>>6&63,i[a+c+3]=128|h>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var a=i.length,o=0,s=0;s<a;s++){var c=i.charCodeAt(s);if((4294967168&c)==0)o++;else if((4294965248&c)==0)o+=2;else if((4294901760&c)==0)o+=3;else{if((4292870144&c)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,a,o,s){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],f=r.F.U,h=r.F._goodIndex;r.F._hash;var p=r.F._putsE,g=0,m=o<<3,b=0,_=i.length;if(s==0){for(;g<_;)p(a,m,g+(T=Math.min(65535,_-g))==_?1:0),m=r.F._copyExact(i,g,T,a,m+8),g+=T;return m>>>3}var I=f.lits,C=f.strt,N=f.prev,j=0,q=0,Y=0,H=0,P=0,E=0;for(_>2&&(C[E=r.F._hash(i,0)]=0),g=0;g<_;g++){if(P=E,g+1<_-2){E=r.F._hash(i,g+1);var R=g+1&32767;N[R]=C[E],C[E]=R}if(b<=g){(j>14e3||q>26697)&&_-g>100&&(b<g&&(I[j]=g-b,j+=2,b=g),m=r.F._writeBlock(g==_-1||b==_?1:0,I,j,H,i,Y,g-Y,a,m),j=q=H=0,Y=g);var L=0;g<_-2&&(L=r.F._bestMatch(i,g,N,P,Math.min(c[2],_-g),c[3]));var T=L>>>16,k=65535&L;if(L!=0){k=65535&L;var B=h(T=L>>>16,f.of0);f.lhst[257+B]++;var V=h(k,f.df0);f.dhst[V]++,H+=f.exb[B]+f.dxb[V],I[j]=T<<23|g-b,I[j+1]=k<<16|B<<8|V,j+=2,b=g+T}else f.lhst[i[g]]++;q++}}for(Y==g&&i.length!=0||(b<g&&(I[j]=g-b,j+=2,b=g),m=r.F._writeBlock(1,I,j,H,i,Y,g-Y,a,m),j=0,q=0,j=q=H=0,Y=g);(7&m)!=0;)m++;return m>>>3},r.F._bestMatch=function(i,a,o,s,c,f){var h=32767&a,p=o[h],g=h-p+32768&32767;if(p==h||s!=r.F._hash(i,a-g))return 0;for(var m=0,b=0,_=Math.min(32767,a);g<=_&&--f!=0&&p!=h;){if(m==0||i[a+m]==i[a+m-g]){var I=r.F._howLong(i,a,g);if(I>m){if(b=g,(m=I)>=c)break;g+2<I&&(I=g+2);for(var C=0,N=0;N<I-2;N++){var j=a-g+N+32768&32767,q=j-o[j]+32768&32767;q>C&&(C=q,p=j)}}}g+=(h=p)-(p=o[h])+32768&32767}return m<<16|b},r.F._howLong=function(i,a,o){if(i[a]!=i[a-o]||i[a+1]!=i[a+1-o]||i[a+2]!=i[a+2-o])return 0;var s=a,c=Math.min(i.length,a+258);for(a+=3;a<c&&i[a]==i[a-o];)a++;return a-s},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,o,s,c,f,h,p,g){var m,b,_,I,C,N,j,q,Y,H=r.F.U,P=r.F._putsF,E=r.F._putsE;H.lhst[256]++,b=(m=r.F.getTrees())[0],_=m[1],I=m[2],C=m[3],N=m[4],j=m[5],q=m[6],Y=m[7];var R=32+((g+3&7)==0?0:8-(g+3&7))+(h<<3),L=s+r.F.contSize(H.fltree,H.lhst)+r.F.contSize(H.fdtree,H.dhst),T=s+r.F.contSize(H.ltree,H.lhst)+r.F.contSize(H.dtree,H.dhst);T+=14+3*j+r.F.contSize(H.itree,H.ihst)+(2*H.ihst[16]+3*H.ihst[17]+7*H.ihst[18]);for(var k=0;k<286;k++)H.lhst[k]=0;for(k=0;k<30;k++)H.dhst[k]=0;for(k=0;k<19;k++)H.ihst[k]=0;var B=R<L&&R<T?0:L<T?1:2;if(P(p,g,i),P(p,g+1,B),g+=3,B==0){for(;(7&g)!=0;)g++;g=r.F._copyExact(c,f,h,p,g)}else{var V,Q;if(B==1&&(V=H.fltree,Q=H.fdtree),B==2){r.F.makeCodes(H.ltree,b),r.F.revCodes(H.ltree,b),r.F.makeCodes(H.dtree,_),r.F.revCodes(H.dtree,_),r.F.makeCodes(H.itree,I),r.F.revCodes(H.itree,I),V=H.ltree,Q=H.dtree,E(p,g,C-257),E(p,g+=5,N-1),E(p,g+=5,j-4),g+=4;for(var z=0;z<j;z++)E(p,g+3*z,H.itree[1+(H.ordr[z]<<1)]);g+=3*j,g=r.F._codeTiny(q,H.itree,p,g),g=r.F._codeTiny(Y,H.itree,p,g)}for(var U=f,te=0;te<o;te+=2){for(var oe=a[te],X=oe>>>23,ge=U+(8388607&oe);U<ge;)g=r.F._writeLit(c[U++],V,p,g);if(X!=0){var G=a[te+1],Z=G>>16,ne=G>>8&255,ae=255&G;E(p,g=r.F._writeLit(257+ne,V,p,g),X-H.of0[ne]),g+=H.exb[ne],P(p,g=r.F._writeLit(ae,Q,p,g),Z-H.df0[ae]),g+=H.dxb[ae],U+=X}}g=r.F._writeLit(256,V,p,g)}return g},r.F._copyExact=function(i,a,o,s,c){var f=c>>>3;return s[f]=o,s[f+1]=o>>>8,s[f+2]=255-s[f],s[f+3]=255-s[f+1],f+=4,s.set(new Uint8Array(i.buffer,a,o),f),c+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),s=[],c=r.F._lenCodes(i.ltree,s),f=[],h=r.F._lenCodes(i.dtree,f),p=0;p<s.length;p+=2)i.ihst[s[p]]++;for(p=0;p<f.length;p+=2)i.ihst[f[p]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,o,g,c,h,m,s,f]},r.F.getSecond=function(i){for(var a=[],o=0;o<i.length;o+=2)a.push(i[o+1]);return a},r.F.nonZero=function(i){for(var a="",o=0;o<i.length;o+=2)i[o+1]!=0&&(a+=(o>>1)+",");return a},r.F.contSize=function(i,a){for(var o=0,s=0;s<a.length;s++)o+=a[s]*i[1+(s<<1)];return o},r.F._codeTiny=function(i,a,o,s){for(var c=0;c<i.length;c+=2){var f=i[c],h=i[c+1];s=r.F._writeLit(f,a,o,s);var p=f==16?2:f==17?3:7;f>15&&(r.F._putsE(o,s,h,p),s+=p)}return s},r.F._lenCodes=function(i,a){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var s=0;s<o;s+=2){var c=i[s+1],f=s+3<o?i[s+3]:-1,h=s+5<o?i[s+5]:-1,p=s==0?-1:i[s-1];if(c==0&&f==c&&h==c){for(var g=s+5;g+2<o&&i[g+2]==c;)g+=2;(m=Math.min(g+1-s>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),s+=2*m-2}else if(c==p&&f==c&&h==c){for(g=s+5;g+2<o&&i[g+2]==c;)g+=2;var m=Math.min(g+1-s>>>1,6);a.push(16,m-3),s+=2*m-2}else a.push(c,0)}return o>>>1},r.F._hufTree=function(i,a,o){var s=[],c=i.length,f=a.length,h=0;for(h=0;h<f;h+=2)a[h]=0,a[h+1]=0;for(h=0;h<c;h++)i[h]!=0&&s.push({lit:h,f:i[h]});var p=s.length,g=s.slice(0);if(p==0)return 0;if(p==1){var m=s[0].lit;return g=m==0?1:0,a[1+(m<<1)]=1,a[1+(g<<1)]=1,1}s.sort(function(q,Y){return q.f-Y.f});var b=s[0],_=s[1],I=0,C=1,N=2;for(s[0]={lit:-1,f:b.f+_.f,l:b,r:_,d:0};C!=p-1;)b=I!=C&&(N==p||s[I].f<s[N].f)?s[I++]:s[N++],_=I!=C&&(N==p||s[I].f<s[N].f)?s[I++]:s[N++],s[C++]={lit:-1,f:b.f+_.f,l:b,r:_};var j=r.F.setDepth(s[C-1],0);for(j>o&&(r.F.restrictDepth(g,o,j),j=o),h=0;h<p;h++)a[1+(g[h].lit<<1)]=g[h].d;return j},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,o){var s=0,c=1<<o-a,f=0;for(i.sort(function(p,g){return g.d==p.d?p.f-g.f:g.d-p.d}),s=0;s<i.length&&i[s].d>a;s++){var h=i[s].d;i[s].d=a,f+=c-(1<<o-h)}for(f>>>=o-a;f>0;)(h=i[s].d)<a?(i[s].d++,f-=1<<a-h-1):s++;for(;s>=0;s--)i[s].d==a&&f<0&&(i[s].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var o=0;return a[16|o]<=i&&(o|=16),a[8|o]<=i&&(o|=8),a[4|o]<=i&&(o|=4),a[2|o]<=i&&(o|=2),a[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,a,o,s){return r.F._putsF(o,s,a[i<<1]),s+a[1+(i<<1)]},r.F.inflate=function(i,a){var o=Uint8Array;if(i[0]==3&&i[1]==0)return a||new o(0);var s=r.F,c=s._bitsF,f=s._bitsE,h=s._decodeTiny,p=s.makeCodes,g=s.codes2map,m=s._get17,b=s.U,_=a==null;_&&(a=new o(i.length>>>2<<3));for(var I,C,N=0,j=0,q=0,Y=0,H=0,P=0,E=0,R=0,L=0;N==0;)if(N=c(i,L,1),j=c(i,L+1,2),L+=3,j!=0){if(_&&(a=r.F._check(a,R+(1<<17))),j==1&&(I=b.flmap,C=b.fdmap,P=511,E=31),j==2){q=f(i,L,5)+257,Y=f(i,L+5,5)+1,H=f(i,L+10,4)+4,L+=14;for(var T=0;T<38;T+=2)b.itree[T]=0,b.itree[T+1]=0;var k=1;for(T=0;T<H;T++){var B=f(i,L+3*T,3);b.itree[1+(b.ordr[T]<<1)]=B,B>k&&(k=B)}L+=3*H,p(b.itree,k),g(b.itree,k,b.imap),I=b.lmap,C=b.dmap,L=h(b.imap,(1<<k)-1,q+Y,i,L,b.ttree);var V=s._copyOut(b.ttree,0,q,b.ltree);P=(1<<V)-1;var Q=s._copyOut(b.ttree,q,Y,b.dtree);E=(1<<Q)-1,p(b.ltree,V),g(b.ltree,V,I),p(b.dtree,Q),g(b.dtree,Q,C)}for(;;){var z=I[m(i,L)&P];L+=15&z;var U=z>>>4;if(!(U>>>8))a[R++]=U;else{if(U==256)break;var te=R+U-254;if(U>264){var oe=b.ldef[U-257];te=R+(oe>>>3)+f(i,L,7&oe),L+=7&oe}var X=C[m(i,L)&E];L+=15&X;var ge=X>>>4,G=b.ddef[ge],Z=(G>>>4)+c(i,L,15&G);for(L+=15&G,_&&(a=r.F._check(a,R+(1<<17)));R<te;)a[R]=a[R++-Z],a[R]=a[R++-Z],a[R]=a[R++-Z],a[R]=a[R++-Z];R=te}}}else{(7&L)!=0&&(L+=8-(7&L));var ne=4+(L>>>3),ae=i[ne-4]|i[ne-3]<<8;_&&(a=r.F._check(a,R+ae)),a.set(new o(i.buffer,i.byteOffset+ne,ae),R),L=ne+ae<<3,R+=ae}return a.length==R?a:a.slice(0,R)},r.F._check=function(i,a){var o=i.length;if(a<=o)return i;var s=new Uint8Array(Math.max(o<<1,a));return s.set(i,0),s},r.F._decodeTiny=function(i,a,o,s,c,f){for(var h=r.F._bitsE,p=r.F._get17,g=0;g<o;){var m=i[p(s,c)&a];c+=15&m;var b=m>>>4;if(b<=15)f[g]=b,g++;else{var _=0,I=0;b==16?(I=3+h(s,c,2),c+=2,_=f[g-1]):b==17?(I=3+h(s,c,3),c+=3):b==18&&(I=11+h(s,c,7),c+=7);for(var C=g+I;g<C;)f[g]=_,g++}}return c},r.F._copyOut=function(i,a,o,s){for(var c=0,f=0,h=s.length>>>1;f<o;){var p=i[f+a];s[f<<1]=0,s[1+(f<<1)]=p,p>c&&(c=p),f++}for(;f<h;)s[f<<1]=0,s[1+(f<<1)]=0,f++;return c},r.F.makeCodes=function(i,a){for(var o,s,c,f,h=r.F.U,p=i.length,g=h.bl_count,m=0;m<=a;m++)g[m]=0;for(m=1;m<p;m+=2)g[i[m]]++;var b=h.next_code;for(o=0,g[0]=0,s=1;s<=a;s++)o=o+g[s-1]<<1,b[s]=o;for(c=0;c<p;c+=2)(f=i[c+1])!=0&&(i[c]=b[f],b[f]++)},r.F.codes2map=function(i,a,o){for(var s=i.length,c=r.F.U.rev15,f=0;f<s;f+=2)if(i[f+1]!=0)for(var h=f>>1,p=i[f+1],g=h<<4|p,m=a-p,b=i[f]<<m,_=b+(1<<m);b!=_;)o[c[b]>>>15-a]=g,b++},r.F.revCodes=function(i,a){for(var o=r.F.U.rev15,s=15-a,c=0;c<i.length;c+=2){var f=i[c]<<a-i[c+1];i[c]=o[f]>>>s}},r.F._putsE=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8},r.F._putsF=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8,i[s+2]|=o>>>16},r.F._bitsE=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},r.F._bitsF=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[a]=(o>>>16|o<<16)>>>17}function s(c,f,h){for(;f--!=0;)c.push(0,h)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];s(i.fltree,144,8),s(i.fltree,112,9),s(i.fltree,24,7),s(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),s(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),s(i.itree,19,0),s(i.ltree,286,0),s(i.dtree,30,0),s(i.ttree,320,0)}()})();var Mz=kz({__proto__:null,default:Vg},[Vg]);const rl=function(){var n={nextZero(h,p){for(;h[p]!=0;)p++;return p},readUshort:(h,p)=>h[p]<<8|h[p+1],writeUshort(h,p,g){h[p]=g>>8&255,h[p+1]=255&g},readUint:(h,p)=>16777216*h[p]+(h[p+1]<<16|h[p+2]<<8|h[p+3]),writeUint(h,p,g){h[p]=g>>24&255,h[p+1]=g>>16&255,h[p+2]=g>>8&255,h[p+3]=255&g},readASCII(h,p,g){let m="";for(let b=0;b<g;b++)m+=String.fromCharCode(h[p+b]);return m},writeASCII(h,p,g){for(let m=0;m<g.length;m++)h[p+m]=g.charCodeAt(m)},readBytes(h,p,g){const m=[];for(let b=0;b<g;b++)m.push(h[p+b]);return m},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,p,g){let m,b="";for(let _=0;_<g;_++)b+=`%${n.pad(h[p+_].toString(16))}`;try{m=decodeURIComponent(b)}catch{return n.readASCII(h,p,g)}return m}};function e(h,p,g,m){const b=p*g,_=a(m),I=Math.ceil(p*_/8),C=new Uint8Array(4*b),N=new Uint32Array(C.buffer),{ctype:j}=m,{depth:q}=m,Y=n.readUshort;if(j==6){const oe=b<<2;if(q==8)for(var H=0;H<oe;H+=4)C[H]=h[H],C[H+1]=h[H+1],C[H+2]=h[H+2],C[H+3]=h[H+3];if(q==16)for(H=0;H<oe;H++)C[H]=h[H<<1]}else if(j==2){const oe=m.tabs.tRNS;if(oe==null){if(q==8)for(H=0;H<b;H++){var P=3*H;N[H]=255<<24|h[P+2]<<16|h[P+1]<<8|h[P]}if(q==16)for(H=0;H<b;H++)P=6*H,N[H]=255<<24|h[P+4]<<16|h[P+2]<<8|h[P]}else{var E=oe[0];const X=oe[1],ge=oe[2];if(q==8)for(H=0;H<b;H++){var R=H<<2;P=3*H,N[H]=255<<24|h[P+2]<<16|h[P+1]<<8|h[P],h[P]==E&&h[P+1]==X&&h[P+2]==ge&&(C[R+3]=0)}if(q==16)for(H=0;H<b;H++)R=H<<2,P=6*H,N[H]=255<<24|h[P+4]<<16|h[P+2]<<8|h[P],Y(h,P)==E&&Y(h,P+2)==X&&Y(h,P+4)==ge&&(C[R+3]=0)}}else if(j==3){const oe=m.tabs.PLTE,X=m.tabs.tRNS,ge=X?X.length:0;if(q==1)for(var L=0;L<g;L++){var T=L*I,k=L*p;for(H=0;H<p;H++){R=k+H<<2;var B=3*(V=h[T+(H>>3)]>>7-((7&H)<<0)&1);C[R]=oe[B],C[R+1]=oe[B+1],C[R+2]=oe[B+2],C[R+3]=V<ge?X[V]:255}}if(q==2)for(L=0;L<g;L++)for(T=L*I,k=L*p,H=0;H<p;H++)R=k+H<<2,B=3*(V=h[T+(H>>2)]>>6-((3&H)<<1)&3),C[R]=oe[B],C[R+1]=oe[B+1],C[R+2]=oe[B+2],C[R+3]=V<ge?X[V]:255;if(q==4)for(L=0;L<g;L++)for(T=L*I,k=L*p,H=0;H<p;H++)R=k+H<<2,B=3*(V=h[T+(H>>1)]>>4-((1&H)<<2)&15),C[R]=oe[B],C[R+1]=oe[B+1],C[R+2]=oe[B+2],C[R+3]=V<ge?X[V]:255;if(q==8)for(H=0;H<b;H++){var V;R=H<<2,B=3*(V=h[H]),C[R]=oe[B],C[R+1]=oe[B+1],C[R+2]=oe[B+2],C[R+3]=V<ge?X[V]:255}}else if(j==4){if(q==8)for(H=0;H<b;H++){R=H<<2;var Q=h[z=H<<1];C[R]=Q,C[R+1]=Q,C[R+2]=Q,C[R+3]=h[z+1]}if(q==16)for(H=0;H<b;H++){var z;R=H<<2,Q=h[z=H<<2],C[R]=Q,C[R+1]=Q,C[R+2]=Q,C[R+3]=h[z+2]}}else if(j==0)for(E=m.tabs.tRNS?m.tabs.tRNS:-1,L=0;L<g;L++){const oe=L*I,X=L*p;if(q==1)for(var U=0;U<p;U++){var te=(Q=255*(h[oe+(U>>>3)]>>>7-(7&U)&1))==255*E?0:255;N[X+U]=te<<24|Q<<16|Q<<8|Q}else if(q==2)for(U=0;U<p;U++)te=(Q=85*(h[oe+(U>>>2)]>>>6-((3&U)<<1)&3))==85*E?0:255,N[X+U]=te<<24|Q<<16|Q<<8|Q;else if(q==4)for(U=0;U<p;U++)te=(Q=17*(h[oe+(U>>>1)]>>>4-((1&U)<<2)&15))==17*E?0:255,N[X+U]=te<<24|Q<<16|Q<<8|Q;else if(q==8)for(U=0;U<p;U++)te=(Q=h[oe+U])==E?0:255,N[X+U]=te<<24|Q<<16|Q<<8|Q;else if(q==16)for(U=0;U<p;U++)Q=h[oe+(U<<1)],te=Y(h,oe+(U<<1))==E?0:255,N[X+U]=te<<24|Q<<16|Q<<8|Q}return C}function t(h,p,g,m){const b=a(h),_=Math.ceil(g*b/8),I=new Uint8Array((_+1+h.interlace)*m);return p=h.tabs.CgBI?i(p,I):r(p,I),h.interlace==0?p=o(p,h,0,g,m):h.interlace==1&&(p=function(N,j){const q=j.width,Y=j.height,H=a(j),P=H>>3,E=Math.ceil(q*H/8),R=new Uint8Array(Y*E);let L=0;const T=[0,0,4,0,2,0,1],k=[0,4,0,2,0,1,0],B=[8,8,8,4,4,2,2],V=[8,8,4,4,2,2,1];let Q=0;for(;Q<7;){const U=B[Q],te=V[Q];let oe=0,X=0,ge=T[Q];for(;ge<Y;)ge+=U,X++;let G=k[Q];for(;G<q;)G+=te,oe++;const Z=Math.ceil(oe*H/8);o(N,j,L,oe,X);let ne=0,ae=T[Q];for(;ae<Y;){let pe=k[Q],Ae=L+ne*Z<<3;for(;pe<q;){var z;if(H==1&&(z=(z=N[Ae>>3])>>7-(7&Ae)&1,R[ae*E+(pe>>3)]|=z<<7-((7&pe)<<0)),H==2&&(z=(z=N[Ae>>3])>>6-(7&Ae)&3,R[ae*E+(pe>>2)]|=z<<6-((3&pe)<<1)),H==4&&(z=(z=N[Ae>>3])>>4-(7&Ae)&15,R[ae*E+(pe>>1)]|=z<<4-((1&pe)<<2)),H>=8){const _e=ae*E+pe*P;for(let Ie=0;Ie<P;Ie++)R[_e+Ie]=N[(Ae>>3)+Ie]}Ae+=H,pe+=te}ne++,ae+=U}oe*X!=0&&(L+=X*(1+Z)),Q+=1}return R}(p,h)),p}function r(h,p){return i(new Uint8Array(h.buffer,2,h.length-6),p)}var i=function(){const h={H:{}};return h.H.N=function(p,g){const m=Uint8Array;let b,_,I=0,C=0,N=0,j=0,q=0,Y=0,H=0,P=0,E=0;if(p[0]==3&&p[1]==0)return g||new m(0);const R=h.H,L=R.b,T=R.e,k=R.R,B=R.n,V=R.A,Q=R.Z,z=R.m,U=g==null;for(U&&(g=new m(p.length>>>2<<5));I==0;)if(I=L(p,E,1),C=L(p,E+1,2),E+=3,C!=0){if(U&&(g=h.H.W(g,P+(1<<17))),C==1&&(b=z.J,_=z.h,Y=511,H=31),C==2){N=T(p,E,5)+257,j=T(p,E+5,5)+1,q=T(p,E+10,4)+4,E+=14;let oe=1;for(var te=0;te<38;te+=2)z.Q[te]=0,z.Q[te+1]=0;for(te=0;te<q;te++){const G=T(p,E+3*te,3);z.Q[1+(z.X[te]<<1)]=G,G>oe&&(oe=G)}E+=3*q,B(z.Q,oe),V(z.Q,oe,z.u),b=z.w,_=z.d,E=k(z.u,(1<<oe)-1,N+j,p,E,z.v);const X=R.V(z.v,0,N,z.C);Y=(1<<X)-1;const ge=R.V(z.v,N,j,z.D);H=(1<<ge)-1,B(z.C,X),V(z.C,X,b),B(z.D,ge),V(z.D,ge,_)}for(;;){const oe=b[Q(p,E)&Y];E+=15&oe;const X=oe>>>4;if(!(X>>>8))g[P++]=X;else{if(X==256)break;{let ge=P+X-254;if(X>264){const pe=z.q[X-257];ge=P+(pe>>>3)+T(p,E,7&pe),E+=7&pe}const G=_[Q(p,E)&H];E+=15&G;const Z=G>>>4,ne=z.c[Z],ae=(ne>>>4)+L(p,E,15&ne);for(E+=15&ne;P<ge;)g[P]=g[P++-ae],g[P]=g[P++-ae],g[P]=g[P++-ae],g[P]=g[P++-ae];P=ge}}}}else{(7&E)!=0&&(E+=8-(7&E));const oe=4+(E>>>3),X=p[oe-4]|p[oe-3]<<8;U&&(g=h.H.W(g,P+X)),g.set(new m(p.buffer,p.byteOffset+oe,X),P),E=oe+X<<3,P+=X}return g.length==P?g:g.slice(0,P)},h.H.W=function(p,g){const m=p.length;if(g<=m)return p;const b=new Uint8Array(m<<1);return b.set(p,0),b},h.H.R=function(p,g,m,b,_,I){const C=h.H.e,N=h.H.Z;let j=0;for(;j<m;){const q=p[N(b,_)&g];_+=15&q;const Y=q>>>4;if(Y<=15)I[j]=Y,j++;else{let H=0,P=0;Y==16?(P=3+C(b,_,2),_+=2,H=I[j-1]):Y==17?(P=3+C(b,_,3),_+=3):Y==18&&(P=11+C(b,_,7),_+=7);const E=j+P;for(;j<E;)I[j]=H,j++}}return _},h.H.V=function(p,g,m,b){let _=0,I=0;const C=b.length>>>1;for(;I<m;){const N=p[I+g];b[I<<1]=0,b[1+(I<<1)]=N,N>_&&(_=N),I++}for(;I<C;)b[I<<1]=0,b[1+(I<<1)]=0,I++;return _},h.H.n=function(p,g){const m=h.H.m,b=p.length;let _,I,C,N;const j=m.j;for(var q=0;q<=g;q++)j[q]=0;for(q=1;q<b;q+=2)j[p[q]]++;const Y=m.K;for(_=0,j[0]=0,I=1;I<=g;I++)_=_+j[I-1]<<1,Y[I]=_;for(C=0;C<b;C+=2)N=p[C+1],N!=0&&(p[C]=Y[N],Y[N]++)},h.H.A=function(p,g,m){const b=p.length,_=h.H.m.r;for(let I=0;I<b;I+=2)if(p[I+1]!=0){const C=I>>1,N=p[I+1],j=C<<4|N,q=g-N;let Y=p[I]<<q;const H=Y+(1<<q);for(;Y!=H;)m[_[Y]>>>15-g]=j,Y++}},h.H.l=function(p,g){const m=h.H.m.r,b=15-g;for(let _=0;_<p.length;_+=2){const I=p[_]<<g-p[_+1];p[_]=m[I]>>>b}},h.H.M=function(p,g,m){m<<=7&g;const b=g>>>3;p[b]|=m,p[b+1]|=m>>>8},h.H.I=function(p,g,m){m<<=7&g;const b=g>>>3;p[b]|=m,p[b+1]|=m>>>8,p[b+2]|=m>>>16},h.H.e=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8)>>>(7&g)&(1<<m)-1},h.H.b=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)&(1<<m)-1},h.H.Z=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)},h.H.i=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16|p[3+(g>>>3)]<<24)>>>(7&g)},h.H.m=function(){const p=Uint16Array,g=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=h.H.m;for(var g=0;g<32768;g++){let b=g;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,p.r[g]=(b>>>16|b<<16)>>>17}function m(b,_,I){for(;_--!=0;)b.push(0,I)}for(g=0;g<32;g++)p.q[g]=p.S[g]<<3|p.T[g],p.c[g]=p.p[g]<<4|p.z[g];m(p._,144,8),m(p._,112,9),m(p._,24,7),m(p._,8,8),h.H.n(p._,9),h.H.A(p._,9,p.J),h.H.l(p._,9),m(p.$,32,5),h.H.n(p.$,5),h.H.A(p.$,5,p.h),h.H.l(p.$,5),m(p.Q,19,0),m(p.C,286,0),m(p.D,30,0),m(p.v,320,0)}(),h.H.N}();function a(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,p,g,m,b){let _=a(p);const I=Math.ceil(m*_/8);let C,N;_=Math.ceil(_/8);let j=h[g],q=0;if(j>1&&(h[g]=[0,0,1][j-2]),j==3)for(q=_;q<I;q++)h[q+1]=h[q+1]+(h[q+1-_]>>>1)&255;for(let Y=0;Y<b;Y++)if(C=g+Y*I,N=C+Y+1,j=h[N-1],q=0,j==0)for(;q<I;q++)h[C+q]=h[N+q];else if(j==1){for(;q<_;q++)h[C+q]=h[N+q];for(;q<I;q++)h[C+q]=h[N+q]+h[C+q-_]}else if(j==2)for(;q<I;q++)h[C+q]=h[N+q]+h[C+q-I];else if(j==3){for(;q<_;q++)h[C+q]=h[N+q]+(h[C+q-I]>>>1);for(;q<I;q++)h[C+q]=h[N+q]+(h[C+q-I]+h[C+q-_]>>>1)}else{for(;q<_;q++)h[C+q]=h[N+q]+s(0,h[C+q-I],0);for(;q<I;q++)h[C+q]=h[N+q]+s(h[C+q-_],h[C+q-I],h[C+q-_-I])}return h}function s(h,p,g){const m=h+p-g,b=m-h,_=m-p,I=m-g;return b*b<=_*_&&b*b<=I*I?h:_*_<=I*I?p:g}function c(h,p,g){g.width=n.readUint(h,p),p+=4,g.height=n.readUint(h,p),p+=4,g.depth=h[p],p++,g.ctype=h[p],p++,g.compress=h[p],p++,g.filter=h[p],p++,g.interlace=h[p],p++}function f(h,p,g,m,b,_,I,C,N){const j=Math.min(p,b),q=Math.min(g,_);let Y=0,H=0;for(let Q=0;Q<q;Q++)for(let z=0;z<j;z++)if(I>=0&&C>=0?(Y=Q*p+z<<2,H=(C+Q)*b+I+z<<2):(Y=(-C+Q)*p-I+z<<2,H=Q*b+z<<2),N==0)m[H]=h[Y],m[H+1]=h[Y+1],m[H+2]=h[Y+2],m[H+3]=h[Y+3];else if(N==1){var P=h[Y+3]*.00392156862745098,E=h[Y]*P,R=h[Y+1]*P,L=h[Y+2]*P,T=m[H+3]*(1/255),k=m[H]*T,B=m[H+1]*T,V=m[H+2]*T;const U=1-P,te=P+T*U,oe=te==0?0:1/te;m[H+3]=255*te,m[H+0]=(E+k*U)*oe,m[H+1]=(R+B*U)*oe,m[H+2]=(L+V*U)*oe}else if(N==2)P=h[Y+3],E=h[Y],R=h[Y+1],L=h[Y+2],T=m[H+3],k=m[H],B=m[H+1],V=m[H+2],P==T&&E==k&&R==B&&L==V?(m[H]=0,m[H+1]=0,m[H+2]=0,m[H+3]=0):(m[H]=E,m[H+1]=R,m[H+2]=L,m[H+3]=P);else if(N==3){if(P=h[Y+3],E=h[Y],R=h[Y+1],L=h[Y+2],T=m[H+3],k=m[H],B=m[H+1],V=m[H+2],P==T&&E==k&&R==B&&L==V)continue;if(P<220&&T>20)return!1}return!0}return{decode:function(p){const g=new Uint8Array(p);let m=8;const b=n,_=b.readUshort,I=b.readUint,C={tabs:{},frames:[]},N=new Uint8Array(g.length);let j,q=0,Y=0;const H=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(g[P]!=H[P])throw"The input is not a PNG file!";for(;m<g.length;){const Q=b.readUint(g,m);m+=4;const z=b.readASCII(g,m,4);if(m+=4,z=="IHDR")c(g,m,C);else if(z=="iCCP"){for(var E=m;g[E]!=0;)E++;b.readASCII(g,m,E-m),g[E+1];const U=g.slice(E+2,m+Q);let te=null;try{te=r(U)}catch{te=i(U)}C.tabs[z]=te}else if(z=="CgBI")C.tabs[z]=g.slice(m,m+4);else if(z=="IDAT"){for(P=0;P<Q;P++)N[q+P]=g[m+P];q+=Q}else if(z=="acTL")C.tabs[z]={num_frames:I(g,m),num_plays:I(g,m+4)},j=new Uint8Array(g.length);else if(z=="fcTL"){Y!=0&&((V=C.frames[C.frames.length-1]).data=t(C,j.slice(0,Y),V.rect.width,V.rect.height),Y=0);const U={x:I(g,m+12),y:I(g,m+16),width:I(g,m+4),height:I(g,m+8)};let te=_(g,m+22);te=_(g,m+20)/(te==0?100:te);const oe={rect:U,delay:Math.round(1e3*te),dispose:g[m+24],blend:g[m+25]};C.frames.push(oe)}else if(z=="fdAT"){for(P=0;P<Q-4;P++)j[Y+P]=g[m+P+4];Y+=Q-4}else if(z=="pHYs")C.tabs[z]=[b.readUint(g,m),b.readUint(g,m+4),g[m+8]];else if(z=="cHRM")for(C.tabs[z]=[],P=0;P<8;P++)C.tabs[z].push(b.readUint(g,m+4*P));else if(z=="tEXt"||z=="zTXt"){C.tabs[z]==null&&(C.tabs[z]={});var R=b.nextZero(g,m),L=b.readASCII(g,m,R-m),T=m+Q-R-1;if(z=="tEXt")B=b.readASCII(g,R+1,T);else{var k=r(g.slice(R+2,R+2+T));B=b.readUTF8(k,0,k.length)}C.tabs[z][L]=B}else if(z=="iTXt"){C.tabs[z]==null&&(C.tabs[z]={}),R=0,E=m,R=b.nextZero(g,E),L=b.readASCII(g,E,R-E);const U=g[E=R+1];var B;g[E+1],E+=2,R=b.nextZero(g,E),b.readASCII(g,E,R-E),E=R+1,R=b.nextZero(g,E),b.readUTF8(g,E,R-E),T=Q-((E=R+1)-m),U==0?B=b.readUTF8(g,E,T):(k=r(g.slice(E,E+T)),B=b.readUTF8(k,0,k.length)),C.tabs[z][L]=B}else if(z=="PLTE")C.tabs[z]=b.readBytes(g,m,Q);else if(z=="hIST"){const U=C.tabs.PLTE.length/3;for(C.tabs[z]=[],P=0;P<U;P++)C.tabs[z].push(_(g,m+2*P))}else if(z=="tRNS")C.ctype==3?C.tabs[z]=b.readBytes(g,m,Q):C.ctype==0?C.tabs[z]=_(g,m):C.ctype==2&&(C.tabs[z]=[_(g,m),_(g,m+2),_(g,m+4)]);else if(z=="gAMA")C.tabs[z]=b.readUint(g,m)/1e5;else if(z=="sRGB")C.tabs[z]=g[m];else if(z=="bKGD")C.ctype==0||C.ctype==4?C.tabs[z]=[_(g,m)]:C.ctype==2||C.ctype==6?C.tabs[z]=[_(g,m),_(g,m+2),_(g,m+4)]:C.ctype==3&&(C.tabs[z]=g[m]);else if(z=="IEND")break;m+=Q,b.readUint(g,m),m+=4}var V;return Y!=0&&((V=C.frames[C.frames.length-1]).data=t(C,j.slice(0,Y),V.rect.width,V.rect.height)),C.data=t(C,N,C.width,C.height),delete C.compress,delete C.interlace,delete C.filter,C},toRGBA8:function(p){const g=p.width,m=p.height;if(p.tabs.acTL==null)return[e(p.data,g,m,p).buffer];const b=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const _=g*m*4,I=new Uint8Array(_),C=new Uint8Array(_),N=new Uint8Array(_);for(let q=0;q<p.frames.length;q++){const Y=p.frames[q],H=Y.rect.x,P=Y.rect.y,E=Y.rect.width,R=Y.rect.height,L=e(Y.data,E,R,p);if(q!=0)for(var j=0;j<_;j++)N[j]=I[j];if(Y.blend==0?f(L,E,R,I,g,m,H,P,0):Y.blend==1&&f(L,E,R,I,g,m,H,P,1),b.push(I.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(C,E,R,I,g,m,H,P,0);else if(Y.dispose==2)for(j=0;j<_;j++)I[j]=N[j]}}return b},_paeth:s,_copyTile:f,_bin:n}}();(function(){const{_copyTile:n}=rl,{_bin:e}=rl,t=rl._paeth;var r={table:function(){const E=new Uint32Array(256);for(let R=0;R<256;R++){let L=R;for(let T=0;T<8;T++)1&L?L=3988292384^L>>>1:L>>>=1;E[R]=L}return E}(),update(E,R,L,T){for(let k=0;k<T;k++)E=r.table[255&(E^R[L+k])]^E>>>8;return E},crc:(E,R,L)=>4294967295^r.update(4294967295,E,R,L)};function i(E,R,L,T){R[L]+=E[0]*T>>4,R[L+1]+=E[1]*T>>4,R[L+2]+=E[2]*T>>4,R[L+3]+=E[3]*T>>4}function a(E){return Math.max(0,Math.min(255,E))}function o(E,R){const L=E[0]-R[0],T=E[1]-R[1],k=E[2]-R[2],B=E[3]-R[3];return L*L+T*T+k*k+B*B}function s(E,R,L,T,k,B,V){V==null&&(V=1);const Q=T.length,z=[];for(var U=0;U<Q;U++){const ae=T[U];z.push([ae>>>0&255,ae>>>8&255,ae>>>16&255,ae>>>24&255])}for(U=0;U<Q;U++){let ae=4294967295;for(var te=0,oe=0;oe<Q;oe++){var X=o(z[U],z[oe]);oe!=U&&X<ae&&(ae=X,te=oe)}}const ge=new Uint32Array(k.buffer),G=new Int16Array(R*L*4),Z=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(U=0;U<Z.length;U++)Z[U]=255*((Z[U]+.5)/16-.5);for(let ae=0;ae<L;ae++)for(let pe=0;pe<R;pe++){var ne;U=4*(ae*R+pe),V!=2?ne=[a(E[U]+G[U]),a(E[U+1]+G[U+1]),a(E[U+2]+G[U+2]),a(E[U+3]+G[U+3])]:(X=Z[4*(3&ae)+(3&pe)],ne=[a(E[U]+X),a(E[U+1]+X),a(E[U+2]+X),a(E[U+3]+X)]),te=0;let Ae=16777215;for(oe=0;oe<Q;oe++){const $e=o(ne,z[oe]);$e<Ae&&(Ae=$e,te=oe)}const _e=z[te],Ie=[ne[0]-_e[0],ne[1]-_e[1],ne[2]-_e[2],ne[3]-_e[3]];V==1&&(pe!=R-1&&i(Ie,G,U+4,7),ae!=L-1&&(pe!=0&&i(Ie,G,U+4*R-4,3),i(Ie,G,U+4*R,5),pe!=R-1&&i(Ie,G,U+4*R+4,1))),B[U>>2]=te,ge[U>>2]=T[te]}}function c(E,R,L,T,k){k==null&&(k={});const{crc:B}=r,V=e.writeUint,Q=e.writeUshort,z=e.writeASCII;let U=8;const te=E.frames.length>1;let oe,X=!1,ge=33+(te?20:0);if(k.sRGB!=null&&(ge+=13),k.pHYs!=null&&(ge+=21),k.iCCP!=null&&(oe=pako.deflate(k.iCCP),ge+=21+oe.length+4),E.ctype==3){for(var G=E.plte.length,Z=0;Z<G;Z++)E.plte[Z]>>>24!=255&&(X=!0);ge+=8+3*G+4+(X?8+1*G+4:0)}for(var ne=0;ne<E.frames.length;ne++)te&&(ge+=38),ge+=(_e=E.frames[ne]).cimg.length+12,ne!=0&&(ge+=4);ge+=12;const ae=new Uint8Array(ge),pe=[137,80,78,71,13,10,26,10];for(Z=0;Z<8;Z++)ae[Z]=pe[Z];if(V(ae,U,13),U+=4,z(ae,U,"IHDR"),U+=4,V(ae,U,R),U+=4,V(ae,U,L),U+=4,ae[U]=E.depth,U++,ae[U]=E.ctype,U++,ae[U]=0,U++,ae[U]=0,U++,ae[U]=0,U++,V(ae,U,B(ae,U-17,17)),U+=4,k.sRGB!=null&&(V(ae,U,1),U+=4,z(ae,U,"sRGB"),U+=4,ae[U]=k.sRGB,U++,V(ae,U,B(ae,U-5,5)),U+=4),k.iCCP!=null){const Ie=13+oe.length;V(ae,U,Ie),U+=4,z(ae,U,"iCCP"),U+=4,z(ae,U,"ICC profile"),U+=11,U+=2,ae.set(oe,U),U+=oe.length,V(ae,U,B(ae,U-(Ie+4),Ie+4)),U+=4}if(k.pHYs!=null&&(V(ae,U,9),U+=4,z(ae,U,"pHYs"),U+=4,V(ae,U,k.pHYs[0]),U+=4,V(ae,U,k.pHYs[1]),U+=4,ae[U]=k.pHYs[2],U++,V(ae,U,B(ae,U-13,13)),U+=4),te&&(V(ae,U,8),U+=4,z(ae,U,"acTL"),U+=4,V(ae,U,E.frames.length),U+=4,V(ae,U,k.loop!=null?k.loop:0),U+=4,V(ae,U,B(ae,U-12,12)),U+=4),E.ctype==3){for(V(ae,U,3*(G=E.plte.length)),U+=4,z(ae,U,"PLTE"),U+=4,Z=0;Z<G;Z++){const Ie=3*Z,$e=E.plte[Z],qe=255&$e,at=$e>>>8&255,lt=$e>>>16&255;ae[U+Ie+0]=qe,ae[U+Ie+1]=at,ae[U+Ie+2]=lt}if(U+=3*G,V(ae,U,B(ae,U-3*G-4,3*G+4)),U+=4,X){for(V(ae,U,G),U+=4,z(ae,U,"tRNS"),U+=4,Z=0;Z<G;Z++)ae[U+Z]=E.plte[Z]>>>24&255;U+=G,V(ae,U,B(ae,U-G-4,G+4)),U+=4}}let Ae=0;for(ne=0;ne<E.frames.length;ne++){var _e=E.frames[ne];te&&(V(ae,U,26),U+=4,z(ae,U,"fcTL"),U+=4,V(ae,U,Ae++),U+=4,V(ae,U,_e.rect.width),U+=4,V(ae,U,_e.rect.height),U+=4,V(ae,U,_e.rect.x),U+=4,V(ae,U,_e.rect.y),U+=4,Q(ae,U,T[ne]),U+=2,Q(ae,U,1e3),U+=2,ae[U]=_e.dispose,U++,ae[U]=_e.blend,U++,V(ae,U,B(ae,U-30,30)),U+=4);const Ie=_e.cimg;V(ae,U,(G=Ie.length)+(ne==0?0:4)),U+=4;const $e=U;z(ae,U,ne==0?"IDAT":"fdAT"),U+=4,ne!=0&&(V(ae,U,Ae++),U+=4),ae.set(Ie,U),U+=G,V(ae,U,B(ae,$e,U-$e)),U+=4}return V(ae,U,0),U+=4,z(ae,U,"IEND"),U+=4,V(ae,U,B(ae,U-4,4)),U+=4,ae.buffer}function f(E,R,L){for(let T=0;T<E.frames.length;T++){const k=E.frames[T];k.rect.width;const B=k.rect.height,V=new Uint8Array(B*k.bpl+B);k.cimg=m(k.img,B,k.bpp,k.bpl,V,R,L)}}function h(E,R,L,T,k){const B=k[0],V=k[1],Q=k[2],z=k[3],U=k[4],te=k[5];let oe=6,X=8,ge=255;for(var G=0;G<E.length;G++){const ve=new Uint8Array(E[G]);for(var Z=ve.length,ne=0;ne<Z;ne+=4)ge&=ve[ne+3]}const ae=ge!=255,pe=function(ht,ct,Ne,Ke,We,st){const nt=[];for(var ut=0;ut<ht.length;ut++){const Dt=new Uint8Array(ht[ut]),ft=new Uint32Array(Dt.buffer);var At;let vn=0,Vt=0,Kn=ct,Kt=Ne,En=Ke?1:0;if(ut!=0){const pi=st||Ke||ut==1||nt[ut-2].dispose!=0?1:2;let on=0,pa=1e9;for(let In=0;In<pi;In++){var vt=new Uint8Array(ht[ut-1-In]);const jr=new Uint32Array(ht[ut-1-In]);let cr=ct,yn=Ne,Tt=-1,nn=-1;for(let jn=0;jn<Ne;jn++)for(let vr=0;vr<ct;vr++)ft[Nt=jn*ct+vr]!=jr[Nt]&&(vr<cr&&(cr=vr),vr>Tt&&(Tt=vr),jn<yn&&(yn=jn),jn>nn&&(nn=jn));Tt==-1&&(cr=yn=Tt=nn=0),We&&((1&cr)==1&&cr--,(1&yn)==1&&yn--);const Si=(Tt-cr+1)*(nn-yn+1);Si<pa&&(pa=Si,on=In,vn=cr,Vt=yn,Kn=Tt-cr+1,Kt=nn-yn+1)}vt=new Uint8Array(ht[ut-1-on]),on==1&&(nt[ut-1].dispose=2),At=new Uint8Array(Kn*Kt*4),n(vt,ct,Ne,At,Kn,Kt,-vn,-Vt,0),En=n(Dt,ct,Ne,At,Kn,Kt,-vn,-Vt,3)?1:0,En==1?g(Dt,ct,Ne,At,{x:vn,y:Vt,width:Kn,height:Kt}):n(Dt,ct,Ne,At,Kn,Kt,-vn,-Vt,0)}else At=Dt.slice(0);nt.push({rect:{x:vn,y:Vt,width:Kn,height:Kt},img:At,blend:En,dispose:0})}if(Ke)for(ut=0;ut<nt.length;ut++){if((bt=nt[ut]).blend==1)continue;const Dt=bt.rect,ft=nt[ut-1].rect,vn=Math.min(Dt.x,ft.x),Vt=Math.min(Dt.y,ft.y),Kn={x:vn,y:Vt,width:Math.max(Dt.x+Dt.width,ft.x+ft.width)-vn,height:Math.max(Dt.y+Dt.height,ft.y+ft.height)-Vt};nt[ut-1].dispose=1,ut-1!=0&&p(ht,ct,Ne,nt,ut-1,Kn,We),p(ht,ct,Ne,nt,ut,Kn,We)}let _t=0;if(ht.length!=1)for(var Nt=0;Nt<nt.length;Nt++){var bt;_t+=(bt=nt[Nt]).rect.width*bt.rect.height}return nt}(E,R,L,B,V,Q),Ae={},_e=[],Ie=[];if(T!=0){const ve=[];for(ne=0;ne<pe.length;ne++)ve.push(pe[ne].img.buffer);const ht=function(We){let st=0;for(var nt=0;nt<We.length;nt++)st+=We[nt].byteLength;const ut=new Uint8Array(st);let At=0;for(nt=0;nt<We.length;nt++){const vt=new Uint8Array(We[nt]),_t=vt.length;for(let Nt=0;Nt<_t;Nt+=4){let bt=vt[Nt],Dt=vt[Nt+1],ft=vt[Nt+2];const vn=vt[Nt+3];vn==0&&(bt=Dt=ft=0),ut[At+Nt]=bt,ut[At+Nt+1]=Dt,ut[At+Nt+2]=ft,ut[At+Nt+3]=vn}At+=_t}return ut.buffer}(ve),ct=_(ht,T);for(ne=0;ne<ct.plte.length;ne++)_e.push(ct.plte[ne].est.rgba);let Ne=0;for(ne=0;ne<pe.length;ne++){const Ke=(qe=pe[ne]).img.length;var $e=new Uint8Array(ct.inds.buffer,Ne>>2,Ke>>2);Ie.push($e);const We=new Uint8Array(ct.abuf,Ne,Ke);te&&s(qe.img,qe.rect.width,qe.rect.height,_e,We,$e),qe.img.set(We),Ne+=Ke}}else for(G=0;G<pe.length;G++){var qe=pe[G];const ve=new Uint32Array(qe.img.buffer);var at=qe.rect.width;for(Z=ve.length,$e=new Uint8Array(Z),Ie.push($e),ne=0;ne<Z;ne++){const ht=ve[ne];if(ne!=0&&ht==ve[ne-1])$e[ne]=$e[ne-1];else if(ne>at&&ht==ve[ne-at])$e[ne]=$e[ne-at];else{let ct=Ae[ht];if(ct==null&&(Ae[ht]=ct=_e.length,_e.push(ht),_e.length>=300))break;$e[ne]=ct}}}const lt=_e.length;for(lt<=256&&U==0&&(X=lt<=2?1:lt<=4?2:lt<=16?4:8,X=Math.max(X,z)),G=0;G<pe.length;G++){(qe=pe[G]).rect.x,qe.rect.y,at=qe.rect.width;const ve=qe.rect.height;let ht=qe.img;new Uint32Array(ht.buffer);let ct=4*at,Ne=4;if(lt<=256&&U==0){ct=Math.ceil(X*at/8);var wt=new Uint8Array(ct*ve);const Ke=Ie[G];for(let We=0;We<ve;We++){ne=We*ct;const st=We*at;if(X==8)for(var Be=0;Be<at;Be++)wt[ne+Be]=Ke[st+Be];else if(X==4)for(Be=0;Be<at;Be++)wt[ne+(Be>>1)]|=Ke[st+Be]<<4-4*(1&Be);else if(X==2)for(Be=0;Be<at;Be++)wt[ne+(Be>>2)]|=Ke[st+Be]<<6-2*(3&Be);else if(X==1)for(Be=0;Be<at;Be++)wt[ne+(Be>>3)]|=Ke[st+Be]<<7-1*(7&Be)}ht=wt,oe=3,Ne=1}else if(ae==0&&pe.length==1){wt=new Uint8Array(at*ve*3);const Ke=at*ve;for(ne=0;ne<Ke;ne++){const We=3*ne,st=4*ne;wt[We]=ht[st],wt[We+1]=ht[st+1],wt[We+2]=ht[st+2]}ht=wt,oe=2,Ne=3,ct=3*at}qe.img=ht,qe.bpl=ct,qe.bpp=Ne}return{ctype:oe,depth:X,plte:_e,frames:pe}}function p(E,R,L,T,k,B,V){const Q=Uint8Array,z=Uint32Array,U=new Q(E[k-1]),te=new z(E[k-1]),oe=k+1<E.length?new Q(E[k+1]):null,X=new Q(E[k]),ge=new z(X.buffer);let G=R,Z=L,ne=-1,ae=-1;for(let Ae=0;Ae<B.height;Ae++)for(let _e=0;_e<B.width;_e++){const Ie=B.x+_e,$e=B.y+Ae,qe=$e*R+Ie,at=ge[qe];at==0||T[k-1].dispose==0&&te[qe]==at&&(oe==null||oe[4*qe+3]!=0)||(Ie<G&&(G=Ie),Ie>ne&&(ne=Ie),$e<Z&&(Z=$e),$e>ae&&(ae=$e))}ne==-1&&(G=Z=ne=ae=0),V&&((1&G)==1&&G--,(1&Z)==1&&Z--),B={x:G,y:Z,width:ne-G+1,height:ae-Z+1};const pe=T[k];pe.rect=B,pe.blend=1,pe.img=new Uint8Array(B.width*B.height*4),T[k-1].dispose==0?(n(U,R,L,pe.img,B.width,B.height,-B.x,-B.y,0),g(X,R,L,pe.img,B)):n(X,R,L,pe.img,B.width,B.height,-B.x,-B.y,0)}function g(E,R,L,T,k){n(E,R,L,T,k.width,k.height,-k.x,-k.y,2)}function m(E,R,L,T,k,B,V){const Q=[];let z,U=[0,1,2,3,4];B!=-1?U=[B]:(R*T>5e5||L==1)&&(U=[0]),V&&(z={level:0});const te=Mz;for(var oe=0;oe<U.length;oe++){for(let G=0;G<R;G++)b(k,E,G,T,L,U[oe]);Q.push(te.deflate(k,z))}let X,ge=1e9;for(oe=0;oe<Q.length;oe++)Q[oe].length<ge&&(X=oe,ge=Q[oe].length);return Q[X]}function b(E,R,L,T,k,B){const V=L*T;let Q=V+L;if(E[Q]=B,Q++,B==0)if(T<500)for(var z=0;z<T;z++)E[Q+z]=R[V+z];else E.set(new Uint8Array(R.buffer,V,T),Q);else if(B==1){for(z=0;z<k;z++)E[Q+z]=R[V+z];for(z=k;z<T;z++)E[Q+z]=R[V+z]-R[V+z-k]+256&255}else if(L==0){for(z=0;z<k;z++)E[Q+z]=R[V+z];if(B==2)for(z=k;z<T;z++)E[Q+z]=R[V+z];if(B==3)for(z=k;z<T;z++)E[Q+z]=R[V+z]-(R[V+z-k]>>1)+256&255;if(B==4)for(z=k;z<T;z++)E[Q+z]=R[V+z]-t(R[V+z-k],0,0)+256&255}else{if(B==2)for(z=0;z<T;z++)E[Q+z]=R[V+z]+256-R[V+z-T]&255;if(B==3){for(z=0;z<k;z++)E[Q+z]=R[V+z]+256-(R[V+z-T]>>1)&255;for(z=k;z<T;z++)E[Q+z]=R[V+z]+256-(R[V+z-T]+R[V+z-k]>>1)&255}if(B==4){for(z=0;z<k;z++)E[Q+z]=R[V+z]+256-t(0,R[V+z-T],0)&255;for(z=k;z<T;z++)E[Q+z]=R[V+z]+256-t(R[V+z-k],R[V+z-T],R[V+z-k-T])&255}}}function _(E,R){const L=new Uint8Array(E),T=L.slice(0),k=new Uint32Array(T.buffer),B=I(T,R),V=B[0],Q=B[1],z=L.length,U=new Uint8Array(z>>2);let te;if(L.length<2e7)for(var oe=0;oe<z;oe+=4)te=C(V,X=L[oe]*(1/255),ge=L[oe+1]*(1/255),G=L[oe+2]*(1/255),Z=L[oe+3]*(1/255)),U[oe>>2]=te.ind,k[oe>>2]=te.est.rgba;else for(oe=0;oe<z;oe+=4){var X=L[oe]*.00392156862745098,ge=L[oe+1]*(1/255),G=L[oe+2]*(1/255),Z=L[oe+3]*(1/255);for(te=V;te.left;)te=N(te.est,X,ge,G,Z)<=0?te.left:te.right;U[oe>>2]=te.ind,k[oe>>2]=te.est.rgba}return{abuf:T.buffer,inds:U,plte:Q}}function I(E,R,L){L==null&&(L=1e-4);const T=new Uint32Array(E.buffer),k={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};k.bst=Y(E,k.i0,k.i1),k.est=H(k.bst);const B=[k];for(;B.length<R;){let Q=0,z=0;for(var V=0;V<B.length;V++)B[V].est.L>Q&&(Q=B[V].est.L,z=V);if(Q<L)break;const U=B[z],te=j(E,T,U.i0,U.i1,U.est.e,U.est.eMq255);if(U.i0>=te||U.i1<=te){U.est.L=0;continue}const oe={i0:U.i0,i1:te,bst:null,est:null,tdst:0,left:null,right:null};oe.bst=Y(E,oe.i0,oe.i1),oe.est=H(oe.bst);const X={i0:te,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};for(X.bst={R:[],m:[],N:U.bst.N-oe.bst.N},V=0;V<16;V++)X.bst.R[V]=U.bst.R[V]-oe.bst.R[V];for(V=0;V<4;V++)X.bst.m[V]=U.bst.m[V]-oe.bst.m[V];X.est=H(X.bst),U.left=oe,U.right=X,B[z]=oe,B.push(X)}for(B.sort((Q,z)=>z.bst.N-Q.bst.N),V=0;V<B.length;V++)B[V].ind=V;return[k,B]}function C(E,R,L,T,k){if(E.left==null)return E.tdst=function(oe,X,ge,G,Z){const ne=X-oe[0],ae=ge-oe[1],pe=G-oe[2],Ae=Z-oe[3];return ne*ne+ae*ae+pe*pe+Ae*Ae}(E.est.q,R,L,T,k),E;const B=N(E.est,R,L,T,k);let V=E.left,Q=E.right;B>0&&(V=E.right,Q=E.left);const z=C(V,R,L,T,k);if(z.tdst<=B*B)return z;const U=C(Q,R,L,T,k);return U.tdst<z.tdst?U:z}function N(E,R,L,T,k){const{e:B}=E;return B[0]*R+B[1]*L+B[2]*T+B[3]*k-E.eMq}function j(E,R,L,T,k,B){for(T-=4;L<T;){for(;q(E,L,k)<=B;)L+=4;for(;q(E,T,k)>B;)T-=4;if(L>=T)break;const V=R[L>>2];R[L>>2]=R[T>>2],R[T>>2]=V,L+=4,T-=4}for(;q(E,L,k)>B;)L-=4;return L+4}function q(E,R,L){return E[R]*L[0]+E[R+1]*L[1]+E[R+2]*L[2]+E[R+3]*L[3]}function Y(E,R,L){const T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0],B=L-R>>2;for(let V=R;V<L;V+=4){const Q=E[V]*.00392156862745098,z=E[V+1]*(1/255),U=E[V+2]*(1/255),te=E[V+3]*(1/255);k[0]+=Q,k[1]+=z,k[2]+=U,k[3]+=te,T[0]+=Q*Q,T[1]+=Q*z,T[2]+=Q*U,T[3]+=Q*te,T[5]+=z*z,T[6]+=z*U,T[7]+=z*te,T[10]+=U*U,T[11]+=U*te,T[15]+=te*te}return T[4]=T[1],T[8]=T[2],T[9]=T[6],T[12]=T[3],T[13]=T[7],T[14]=T[11],{R:T,m:k,N:B}}function H(E){const{R}=E,{m:L}=E,{N:T}=E,k=L[0],B=L[1],V=L[2],Q=L[3],z=T==0?0:1/T,U=[R[0]-k*k*z,R[1]-k*B*z,R[2]-k*V*z,R[3]-k*Q*z,R[4]-B*k*z,R[5]-B*B*z,R[6]-B*V*z,R[7]-B*Q*z,R[8]-V*k*z,R[9]-V*B*z,R[10]-V*V*z,R[11]-V*Q*z,R[12]-Q*k*z,R[13]-Q*B*z,R[14]-Q*V*z,R[15]-Q*Q*z],te=U,oe=P;let X=[Math.random(),Math.random(),Math.random(),Math.random()],ge=0,G=0;if(T!=0)for(let ne=0;ne<16&&(X=oe.multVec(te,X),G=Math.sqrt(oe.dot(X,X)),X=oe.sml(1/G,X),!(ne!=0&&Math.abs(G-ge)<1e-9));ne++)ge=G;const Z=[k*z,B*z,V*z,Q*z];return{Cov:U,q:Z,e:X,L:ge,eMq255:oe.dot(oe.sml(255,Z),X),eMq:oe.dot(X,Z),rgba:(Math.round(255*Z[3])<<24|Math.round(255*Z[2])<<16|Math.round(255*Z[1])<<8|Math.round(255*Z[0])<<0)>>>0}}var P={multVec:(E,R)=>[E[0]*R[0]+E[1]*R[1]+E[2]*R[2]+E[3]*R[3],E[4]*R[0]+E[5]*R[1]+E[6]*R[2]+E[7]*R[3],E[8]*R[0]+E[9]*R[1]+E[10]*R[2]+E[11]*R[3],E[12]*R[0]+E[13]*R[1]+E[14]*R[2]+E[15]*R[3]],dot:(E,R)=>E[0]*R[0]+E[1]*R[1]+E[2]*R[2]+E[3]*R[3],sml:(E,R)=>[E*R[0],E*R[1],E*R[2],E*R[3]]};rl.encode=function(R,L,T,k,B,V,Q){k==null&&(k=0),Q==null&&(Q=!1);const z=h(R,L,T,k,[!1,!1,!1,0,Q,!1]);return f(z,-1),c(z,L,T,B,V)},rl.encodeLL=function(R,L,T,k,B,V,Q,z){const U={ctype:0+(k==1?0:2)+(B==0?0:4),depth:V,frames:[]},te=(k+B)*V,oe=te*L;for(let X=0;X<R.length;X++)U.frames.push({rect:{x:0,y:0,width:L,height:T},img:new Uint8Array(R[X]),blend:0,dispose:1,bpp:Math.ceil(te/8),bpl:Math.ceil(oe/8)});return f(U,0,!0),c(U,L,T,Q,z)},rl.encode.compress=h,rl.encode.dither=s,rl.quantize=_,rl.quantize.getKDtree=I,rl.quantize.getNearest=C})();const ZE={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,a=n.getContext("2d").getImageData(0,0,t,r),o=new Uint32Array(a.data.buffer),s=(32*t+31)/32<<2,c=s*r,f=122+c,h=new ArrayBuffer(f),p=new DataView(h),g=1<<20;let m,b,_,I,C=g,N=0,j=0,q=0;function Y(E){p.setUint16(j,E,!0),j+=2}function H(E){p.setUint32(j,E,!0),j+=4}function P(E){j+=E}Y(19778),H(f),P(4),H(122),H(108),H(t),H(-r>>>0),Y(1),Y(32),H(3),H(c),H(2835),H(2835),P(8),H(16711680),H(65280),H(255),H(4278190080),H(1466527264),function E(){for(;N<r&&C>0;){for(I=122+N*s,m=0;m<i;)C--,b=o[q++],_=b>>>24,p.setUint32(I+m,b<<8|_),m+=4;N++}q<o.length?(C=g,setTimeout(E,ZE._dly)):e(h)}()},toBlob(n,e){this.toArrayBuffer(n,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var yo={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},jz={[yo.CHROME]:16384,[yo.FIREFOX]:11180,[yo.DESKTOP_SAFARI]:16384,[yo.IE]:8192,[yo.IOS]:4096,[yo.ETC]:8192};const xx=typeof window<"u",JE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,qg=xx&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Bz=(xx||JE)&&(qg&&qg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),eS=(xx||JE)&&(qg&&qg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function bx(n,e,t=Date.now()){return new Promise(r=>{const i=n.split(","),a=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let s=o.length;const c=new Uint8Array(s);for(;s--;)c[s]=o.charCodeAt(s);const f=new Blob([c],{type:a});f.name=e,f.lastModified=t,r(f)})}function tS(n){return new Promise((e,t)=>{const r=new eS;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)})}function nS(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n})}function Jf(){if(Jf.cachedResult!==void 0)return Jf.cachedResult;let n=yo.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=yo.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=yo.IOS:/Safari/i.test(e)?n=yo.DESKTOP_SAFARI:/Firefox/i.test(e)?n=yo.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=yo.IE),Jf.cachedResult=n,Jf.cachedResult}function rS(n,e){const t=Jf(),r=jz[t];let i=n,a=e,o=i*a;const s=i>a?a/i:i/a;for(;o>r*r;){const c=(r+i)/2,f=(r+a)/2;c<f?(a=f,i=f*s):(a=c*s,i=c),o=i*a}return{width:i,height:a}}function Fm(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function iS(n,e){const{width:t,height:r}=rS(n.width,n.height),[i,a]=Fm(t,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(n,0,0,i.width,i.height),i}function cg(){return cg.cachedResult!==void 0||(cg.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),cg.cachedResult}function Hg(n,e={}){return new Promise(function(t,r){let i,a;var o=function(){try{return a=iS(i,e.fileType||n.type),t([i,a])}catch(c){return r(c)}},s=function(c){try{var f=function(h){try{throw h}catch(p){return r(p)}};try{let h;return tS(n).then(function(p){try{return h=p,nS(h).then(function(g){try{return i=g,function(){try{return o()}catch(m){return r(m)}}()}catch(m){return f(m)}},f)}catch(g){return f(g)}},f)}catch(h){f(h)}}catch(h){return r(h)}};try{if(cg()||[yo.DESKTOP_SAFARI,yo.MOBILE_SAFARI].includes(Jf()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(c){try{return i=c,o()}catch{return s()}},s)}catch{s()}})}function Wg(n,e,t,r,i=1){return new Promise(function(a,o){let s;if(e==="image/png"){let f,h,p;return f=n.getContext("2d"),{data:h}=f.getImageData(0,0,n.width,n.height),p=rl.encode([h.buffer],n.width,n.height,4096*i),s=new Blob([p],{type:e}),s.name=t,s.lastModified=r,c.call(this)}{let f=function(){return c.call(this)};if(e==="image/bmp")return new Promise(h=>ZE.toBlob(n,h)).then((function(h){try{return s=h,s.name=t,s.lastModified=r,f.call(this)}catch(p){return o(p)}}).bind(this),o);{let h=function(){return f.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(p){try{return s=p,s.name=t,s.lastModified=r,h.call(this)}catch(g){return o(g)}}).bind(this),o);{let p;return p=n.toDataURL(e,i),bx(p,t,r).then((function(g){try{return s=g,h.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function c(){return a(s)}})}function $l(n){n.width=0,n.height=0}function sd(){return new Promise(function(n,e){let t,r,i,a;return sd.cachedResult!==void 0?n(sd.cachedResult):bx("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return t=o,Hg(t).then(function(s){try{return r=s[1],Wg(r,t.type,t.name,t.lastModified).then(function(c){try{return i=c,$l(r),Hg(i).then(function(f){try{return a=f[0],sd.cachedResult=a.width===1&&a.height===2,n(sd.cachedResult)}catch(h){return e(h)}},e)}catch(f){return e(f)}},e)}catch(c){return e(c)}},e)}catch(s){return e(s)}},e)})}function aS(n){return new Promise((e,t)=>{const r=new eS;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let s=2;for(;s<o;){if(a.getUint16(s+2,!1)<=8)return e(-1);const c=a.getUint16(s,!1);if(s+=2,c==65505){if(a.getUint32(s+=2,!1)!=1165519206)return e(-1);const f=a.getUint16(s+=6,!1)==18761;s+=a.getUint32(s+4,f);const h=a.getUint16(s,f);s+=2;for(let p=0;p<h;p++)if(a.getUint16(s+12*p,f)==274)return e(a.getUint16(s+12*p+8,f))}else{if((65280&c)!=65280)break;s+=a.getUint16(s,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)})}function oS(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let a,o=n;return isFinite(i)&&(t>i||r>i)&&([o,a]=Fm(t,r),t>r?(o.width=i,o.height=r/t*i):(o.width=t/r*i,o.height=i),a.drawImage(n,0,0,o.width,o.height),$l(n)),o}function sS(n,e){const{width:t}=n,{height:r}=n,[i,a]=Fm(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,r),$l(n),i}function v4(n,e,t=0){return new Promise(function(r,i){let a,o,s,c,f,h,p,g,m,b,_,I,C,N,j,q,Y,H,P,E;function R(T=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=T,e.onProgress(Math.min(a,100))}function L(T){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(T,a),100),e.onProgress(a)}return a=t,o=e.maxIteration||10,s=1024*e.maxSizeMB*1024,R(),Hg(n,e).then((function(T){try{return[,c]=T,R(),f=oS(c,e),R(),new Promise(function(k,B){var V;if(!(V=e.exifOrientation))return aS(n).then((function(z){try{return V=z,Q.call(this)}catch(U){return B(U)}}).bind(this),B);function Q(){return k(V)}return Q.call(this)}).then((function(k){try{return h=k,R(),sd().then((function(B){try{return p=B?f:sS(f,h),R(),g=e.initialQuality||1,m=e.fileType||n.type,Wg(p,m,n.name,n.lastModified,g).then((function(V){try{{let z=function(){if(o--&&(j>s||j>C)){let te,oe;return te=E?.95*P.width:P.width,oe=E?.95*P.height:P.height,[Y,H]=Fm(te,oe),H.drawImage(P,0,0,te,oe),g*=m==="image/png"?.85:.95,Wg(Y,m,n.name,n.lastModified,g).then(function(X){try{return q=X,$l(P),P=Y,j=q.size,L(Math.min(99,Math.floor((N-j)/(N-s)*100))),z}catch(ge){return i(ge)}},i)}return[1]},U=function(){return $l(P),$l(Y),$l(f),$l(p),$l(c),L(100),r(q)};if(b=V,R(),_=b.size>s,I=b.size>n.size,!_&&!I)return L(100),r(b);var Q;return C=n.size,N=b.size,j=N,P=p,E=!e.alwaysKeepResolution&&_,(Q=(function(te){for(;te;){if(te.then)return void te.then(Q,i);try{if(te.pop){if(te.length)return te.pop()?U.call(this):te;te=z}else te=te.call(this)}catch(oe){return i(oe)}}}).bind(this))(z)}}catch(z){return i(z)}}).bind(this),i)}catch(V){return i(V)}}).bind(this),i)}catch(B){return i(B)}}).bind(this),i)}catch(k){return i(k)}}).bind(this),i)})}const Fz=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Nv;function Uz(n,e){return new Promise((t,r)=>{Nv||(Nv=function(o){const s=[];return s.push(o),URL.createObjectURL(new Blob(s))}(Fz));const i=new Worker(Nv);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();t(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Oa(n,e){return new Promise(function(t,r){let i,a,o,s,c,f;if(i={...e},o=0,{onProgress:s}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{o=m,typeof s=="function"&&s(o)},!(n instanceof Blob||n instanceof Bz))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return v4(n,i).then((function(m){try{return a=m,g.call(this)}catch(b){return r(b)}}).bind(this),r);var h=(function(){try{return g.call(this)}catch(m){return r(m)}}).bind(this),p=function(m){try{return v4(n,i).then(function(b){try{return a=b,h()}catch(_){return r(_)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Uz(n,i).then(function(m){try{return a=m,h()}catch{return p()}},p)}catch{p()}function g(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(a=QE(n,a))}catch{}return t(a)}})}Oa.getDataUrlFromFile=tS,Oa.getFilefromDataUrl=bx,Oa.loadImage=nS,Oa.drawImageInCanvas=iS,Oa.drawFileInCanvas=Hg,Oa.canvasToFile=Wg,Oa.getExifOrientation=aS,Oa.handleMaxWidthOrHeight=oS,Oa.followExifOrientation=sS,Oa.cleanupCanvasMemory=$l,Oa.isAutoOrientationInBrowser=sd,Oa.approximateBelowMaximumCanvasSizeOfBrowser=rS,Oa.copyExifWithoutOrientation=QE,Oa.getBrowserName=Jf,Oa.version="2.0.2";const u1=n=>n.images&&Array.isArray(n.images)?{...n,images:n.images.filter(e=>e&&e.trim()),primaryImage:n.images[0]||null}:n.imageUrl&&n.imageUrl.trim()?{...n,images:[n.imageUrl],primaryImage:n.imageUrl}:{...n,images:[],primaryImage:null},zz=n=>u1(n).primaryImage,lS=n=>u1(n).images,Vz=async(n,e,t,r,i)=>{try{console.log("🔄 מתחיל migration של מוצרים קיימים...");const a=await r(i(n,"items")),o=[];a.docs.forEach(s=>{const c=s.data();c.images&&Array.isArray(c.images)||c.imageUrl&&c.imageUrl.trim()&&o.push({id:s.id,images:[c.imageUrl]})}),console.log(`📊 נמצאו ${o.length} מוצרים לעדכון`);for(const s of o)await e(t(n,"items",s.id),{images:s.images}),console.log(`✅ עודכן מוצר: ${s.id}`);return console.log("🎉 Migration הושלם בהצלחה!"),{success:!0,updatedCount:o.length}}catch(a){return console.error("❌ שגיאה ב-migration:",a),{success:!1,error:a.message}}},f1=({item:n,width:e="100%",height:t="200px",showNavigation:r=!0,className:i="",style:a={},borderRadius:o="8px"})=>{const s=lS(n),[c,f]=fe.useState(0),[h,p]=fe.useState(!1),[g,m]=fe.useState(!1);if(fe.useEffect(()=>{const C=()=>{const N=window.innerWidth<=768,j=window.location.pathname.includes("/management")||document.querySelector(".product-card-mobile")!==null||i.includes("management")||a.managementMode===!0;p(N),m(j)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[i,a]),s.length===0)return y.jsx("div",{style:{width:e,height:t,borderRadius:o,border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",...a},className:i,children:y.jsx("img",{src:"/no-image-available.png",alt:"אין תמונה זמינה",style:{maxWidth:"80%",maxHeight:"80%",objectFit:"contain",opacity:.5}})});if(s.length===1)return y.jsx("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",...a},className:i,children:y.jsx("img",{src:s[0],alt:n.name||"תמונת מוצר",style:{width:"100%",height:"100%",objectFit:"contain",background:"white"}})});const b=()=>{f(C=>(C+1)%s.length)},_=()=>{f(C=>(C-1+s.length)%s.length)},I=C=>{f(C)};return y.jsxs("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",background:"#f3f4f6",...a},className:i,children:[y.jsx("img",{src:s[c],alt:`${n.name||"מוצר"} - תמונה ${c+1}`,style:{width:"100%",height:"100%",objectFit:"contain",transition:"opacity 0.3s ease",background:"white"}}),s.length>1&&y.jsx(y.Fragment,{children:h&&g?y.jsx("button",{onClick:b,style:{position:"absolute",right:"8px",bottom:"8px",background:"rgba(255, 255, 255, 0.9)",color:"#333",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},"aria-label":"תמונה הבאה",children:"›"}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:_,style:{position:"absolute",left:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.9)",C.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.7)",C.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"תמונה קודמת",children:y.jsx(T1,{size:20})}),y.jsx("button",{onClick:b,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.9)",C.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.7)",C.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"תמונה הבאה",children:y.jsx(R1,{size:20})})]})}),!(h&&g)&&s.length>1&&s.length<=5&&y.jsx("div",{style:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"6px",zIndex:10},children:s.map((C,N)=>y.jsx("button",{onClick:()=>I(N),style:{width:"8px",height:"8px",borderRadius:"50%",border:"none",background:N===c?"white":"rgba(255, 255, 255, 0.5)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":`תמונה ${N+1}`},N))}),!(h&&g)&&s.length>5&&y.jsxs("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"bold",zIndex:10},children:[c+1," / ",s.length]}),h&&g&&s.length>1&&y.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5},onTouchStart:C=>{const N=C.touches[0];C.currentTarget.startX=N.clientX},onTouchEnd:C=>{const N=C.changedTouches[0];if(!C.currentTarget.startX)return;const j=C.currentTarget.startX-N.clientX;Math.abs(j)>50&&(j>0?b():_())}}),h&&g&&s.length>1&&y.jsxs("div",{style:{position:"absolute",bottom:"2px",right:"2px",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"1px 4px",borderRadius:"4px",fontSize:"8px",zIndex:10},children:[c+1,"/",s.length]}),y.jsx("div",{tabIndex:0,onKeyDown:C=>{C.key==="ArrowRight"&&b(),C.key==="ArrowLeft"&&_()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",outline:"none"},"aria-label":"גלריית תמונות - השתמש בחצים לניווט"})]})},qz=async n=>{const e="https://api.cloudinary.com/v1_1/dpegnxew7/image/upload",t=new FormData;return t.append("file",n),t.append("upload_preset","GmachSystem"),(await(await fetch(e,{method:"POST",body:t})).json()).secure_url},Hz=({editingItem:n,name:e,quantity:t,imageUrl:r,imageFile:i,onNameChange:a,onQuantityChange:o,onImageUrlChange:s,onImageFileChange:c,onCancel:f,onSubmit:h,publicComment:p,internalComment:g,onPublicCommentChange:m,onInternalCommentChange:b})=>{const _=fe.useRef(null),[I,C]=fe.useState([]),[N,j]=fe.useState(!1);fe.useEffect(()=>{if(n){const L=lS(n);C(L.map((T,k)=>({id:Date.now()+k,url:T,isUploaded:!0})))}else C([])},[n]),fe.useEffect(()=>{const L=k=>{_.current&&!_.current.contains(k.target)&&f()},T=k=>{k.key==="Escape"&&f()};return document.addEventListener("mousedown",L),document.addEventListener("keydown",T),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("keydown",T)}},[f]);const q=()=>{if(r&&r.trim()){const L={id:Date.now(),url:r.trim(),isUploaded:!0};C(T=>[...T,L]),s({target:{value:""}})}},Y=async L=>{if(L){j(!0);try{const T=await Oa(L,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0}),k=await qz(T),B={id:Date.now(),url:k,isUploaded:!0};C(V=>[...V,B]),mn.success("התמונה הועלתה בהצלחה!")}catch(T){mn.error("שגיאה בהעלאת התמונה: "+T.message)}finally{j(!1)}}},H=L=>{C(T=>T.filter(k=>k.id!==L))},P=L=>{L!==0&&C(T=>{const k=[...T];return[k[L-1],k[L]]=[k[L],k[L-1]],k})},E=L=>{L!==I.length-1&&C(T=>{const k=[...T];return[k[L],k[L+1]]=[k[L+1],k[L]],k})},R=async L=>{L.preventDefault();const T=I.map(B=>B.url);T[0];const k={name:e,quantity:t,publicComment:p,internalComment:g,images:T,imageUrl:T[0]||null};await h(L,k)};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,direction:"ltr",padding:"1rem"},children:y.jsxs("div",{ref:_,style:{position:"relative",background:"white",padding:"2rem",borderRadius:"12px",width:"95%",maxWidth:"600px",direction:"rtl",textAlign:"initial",maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[y.jsx("button",{onClick:f,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",lineHeight:1,color:"#666",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"סגור",children:"×"}),y.jsx("h3",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",color:"#333"},children:n?"עריכת מוצר":"הוספת מוצר חדש"}),y.jsxs("form",{onSubmit:R,children:[y.jsxs("div",{style:T0,children:[y.jsx("label",{style:R0,children:"שם המוצר:"}),y.jsx("input",{dir:"rtl",type:"text",value:e,onChange:a,required:!0,style:Xh})]}),y.jsxs("div",{style:T0,children:[y.jsx("label",{style:R0,children:"כמות:"}),y.jsx("input",{dir:"rtl",type:"number",value:t,onChange:o,required:!0,style:Xh})]}),y.jsxs("div",{style:T0,children:[y.jsx("label",{style:R0,children:"הערה לפרסום (חיצונית):"}),y.jsx("input",{dir:"rtl",type:"text",value:p,onChange:m,style:Xh})]}),y.jsxs("div",{style:T0,children:[y.jsx("label",{style:R0,children:"הערה פנימית:"}),y.jsx("input",{dir:"rtl",type:"text",value:g,onChange:b,style:Xh})]}),y.jsxs("div",{style:T0,children:[y.jsx("label",{style:R0,children:"תמונות המוצר:"}),y.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[y.jsx("input",{dir:"rtl",type:"text",value:r,onChange:s,placeholder:"הדבק כתובת תמונה (URL)",style:{...Xh,flex:1,margin:0}}),y.jsx("button",{type:"button",onClick:q,disabled:!r.trim(),style:{padding:"8px 12px",backgroundColor:r.trim()?"#1976d2":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.trim()?"pointer":"not-allowed",whiteSpace:"nowrap"},children:"הוסף"})]}),y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsx("input",{type:"file",accept:"image/*",onChange:L=>{const T=L.target.files[0];T&&(Y(T),L.target.value="")},style:{...Xh,padding:"8px"},disabled:N}),N&&y.jsx("div",{style:{fontSize:"0.875rem",color:"#1976d2",marginTop:"0.5rem"},children:"מעלה תמונה..."})]}),I.length>0&&y.jsxs("div",{style:{marginBottom:"1rem"},children:[y.jsxs("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:["תמונות (",I.length,")"]}),y.jsx("div",{style:{marginBottom:"1rem"},children:y.jsx(f1,{item:{images:I.map(L=>L.url)},width:"100%",height:"200px",showNavigation:!0})}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:I.map((L,T)=>y.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"0.5rem",background:"#f9fafb",position:"relative"},children:[y.jsx("img",{src:L.url,alt:`תמונה ${T+1}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"4px",marginBottom:"0.5rem"}}),y.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:T+1}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.25rem"},children:[y.jsx("button",{type:"button",onClick:()=>P(T),disabled:T===0,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:T===0?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:T===0?"not-allowed":"pointer",flex:1},children:"↑"}),y.jsx("button",{type:"button",onClick:()=>E(T),disabled:T===I.length-1,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:T===I.length-1?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:T===I.length-1?"not-allowed":"pointer",flex:1},children:"↓"}),y.jsx("button",{type:"button",onClick:()=>H(L.id),style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",flex:1},children:"✕"})]})]},L.id))})]})]}),y.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem",flexWrap:"wrap"},children:[y.jsx("button",{type:"submit",disabled:N,style:{...Wz,minWidth:"120px",opacity:N?.6:1,cursor:N?"not-allowed":"pointer"},children:N?"מעלה...":n?"שמור שינויים":"הוסף מוצר"}),y.jsx("button",{type:"button",onClick:f,disabled:N,style:{...Gz,minWidth:"120px",opacity:N?.6:1,cursor:N?"not-allowed":"pointer"},children:"ביטול"})]})]})]})})},T0={marginBottom:"1.5rem",width:"100%"},R0={display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"1rem"},Xh={width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"16px",boxSizing:"border-box",transition:"border-color 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none"},Wz={padding:"12px 20px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},Gz={padding:"12px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"};var cS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y4=Mn.createContext&&Mn.createContext(cS),$z=["attr","size","title"];function Yz(n,e){if(n==null)return{};var t=Xz(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Xz(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Gg(){return Gg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gg.apply(this,arguments)}function x4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $g(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(t),!0).forEach(function(r){Kz(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Kz(n,e,t){return e=Qz(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qz(n){var e=Zz(n,"string");return typeof e=="symbol"?e:e+""}function Zz(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function uS(n){return n&&n.map((e,t)=>Mn.createElement(e.tag,$g({key:t},e.attr),uS(e.child)))}function cc(n){return e=>Mn.createElement(Jz,Gg({attr:$g({},n.attr)},e),uS(n.child))}function Jz(n){var e=t=>{var{attr:r,size:i,title:a}=n,o=Yz(n,$z),s=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),Mn.createElement("svg",Gg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:c,style:$g($g({color:n.color||t.color},t.style),n.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Mn.createElement("title",null,a),n.children)};return y4!==void 0?Mn.createElement(y4.Consumer,null,t=>e(t)):e(cS)}function eV(n){return cc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function tV(n){return cc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function nV(n){return cc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(n)}function rV(n){return cc({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(n)}function iV(n){return cc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}function aV(n){return cc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function oV(n){return cc({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function b4(n){return cc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function sV(n){return cc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(n)}function w4(n){return cc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const lV=({item:n,onClose:e})=>{const[t,r]=fe.useState([]),[i,a]=fe.useState(!0);fe.useEffect(()=>{if(!n)return;(async()=>{a(!0);try{console.log("🔍 מחפש הזמנות פעילות עבור מוצר:",n.name,"ID:",n.id);const f=(await sr(An(Pt,"orders"))).docs.map(g=>({id:g.id,...g.data()})).filter(g=>g.status==="open");console.log("📋 כל ההזמנות הפעילות:",f.length);const h=f.filter(g=>{var b;return(b=g.items)==null?void 0:b.some(_=>_.id===n.id||_.ItemId===n.ItemId)});console.log("🎯 הזמנות שמכילות את המוצר:",h.length);const p=h.map(g=>{const m=g.items.find(b=>b.id===n.id||b.ItemId===n.ItemId);return{...g,itemQuantity:(m==null?void 0:m.quantity)||0}});p.sort((g,m)=>{var I,C;const b=((I=g.createdAt)==null?void 0:I.seconds)||0;return(((C=m.createdAt)==null?void 0:C.seconds)||0)-b}),r(p)}catch(c){console.error("❌ שגיאה בשליפת הזמנות פעילות:",c)}finally{a(!1)}})()},[n]);const o=s=>{if(!s)return"לא צוין";let c;return s.seconds?c=new Date(s.seconds*1e3):typeof s=="string"?c=new Date(s):c=s,isNaN(c.getTime())?"תאריך לא תקין":c.toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"})};return n?y.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1500,padding:"1rem"},onClick:s=>{s.target===s.currentTarget&&e()},children:[y.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"12px",width:"95%",maxWidth:"800px",maxHeight:"85vh",overflowY:"auto",padding:"0",direction:"rtl",boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},onClick:s=>s.stopPropagation(),children:[y.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1.5rem",borderRadius:"12px 12px 0 0",position:"relative"},children:[y.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",left:"1rem",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",color:"white",fontSize:"1.2rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.background="rgba(255,255,255,0.3)"},onMouseLeave:s=>{s.target.style.background="rgba(255,255,255,0.2)"},children:y.jsx(oV,{})}),y.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",textAlign:"center",paddingRight:"3rem"},children:['📋 הזמנות פעילות עבור "',n.name,'"']}),y.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,textAlign:"center",fontSize:"0.95rem"},children:["מזהה מוצר: ",n.ItemId]})]}),y.jsx("div",{style:{padding:"1.5rem"},children:i?y.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #f3f3f3",borderTop:"3px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"טוען הזמנות פעילות..."]}):t.length===0?y.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[y.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",color:"#ddd"},children:"📄"}),y.jsx("h3",{style:{color:"#666",marginBottom:"0.5rem"},children:"לא נמצאו הזמנות פעילות"}),y.jsx("p",{style:{color:"#999",margin:0},children:"המוצר הזה כרגע לא נמצא באף הזמנה פעילה"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center",border:"1px solid #e9ecef"},children:y.jsxs("p",{style:{margin:0,color:"#495057",fontSize:"1rem",fontWeight:"500"},children:["📊 נמצא ב-",t.length," הזמנ",t.length===1?"ה":"ות"," פעיל",t.length===1?"ה":"ות",y.jsx("br",{}),y.jsxs("span",{style:{fontSize:"0.9rem",color:"#6c757d"},children:['סה"כ כמות מושאלת: ',t.reduce((s,c)=>s+c.itemQuantity,0)]})]})}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:window.innerWidth<=768?"0 0.5rem":"0"},children:t.map((s,c)=>y.jsxs("div",{style:{border:"1px solid #e9ecef",borderRadius:"10px",padding:"1.25rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:f=>{f.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)",f.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:f=>{f.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",f.currentTarget.style.transform="translateY(0)"},children:[y.jsxs("div",{style:{position:"absolute",top:"0.75rem",left:"0.75rem",background:"#667eea",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold"},children:["#",s.simpleId||s.id.slice(0,6)]}),y.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem",marginBottom:"1rem"},children:y.jsx("div",{style:{background:"#28a745",color:"white",padding:window.innerWidth<=768?"0.3rem 0.6rem":"0.4rem 0.8rem",borderRadius:"15px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold",textAlign:"center",lineHeight:"1.2",wordBreak:"break-word",maxWidth:window.innerWidth<=768?"180px":"220px",margin:"0 auto",display:"inline-block"},children:window.innerWidth<=768?y.jsxs(y.Fragment,{children:["כמות: ",s.itemQuantity]}):y.jsxs(y.Fragment,{children:["מוצר: ",n.name,y.jsx("br",{}),"כמות: ",s.itemQuantity]})})}),y.jsxs("div",{style:{marginBottom:"1rem",textAlign:"center"},children:[y.jsxs("h4",{style:{margin:"0 0 0.75rem 0",color:"#333",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y.jsx(w4,{color:"#667eea"}),s.clientName]}),y.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"#555"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(iV,{color:"#28a745",size:14}),y.jsx("span",{children:s.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(rV,{color:"#dc3545",size:14}),y.jsx("span",{children:s.address})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(w4,{color:"#6c757d",size:14}),y.jsxs("span",{children:["מתנדבת: ",s.volunteerName]})]})]})]}),y.jsxs("div",{style:{background:"#f8f9fa",padding:"0.75rem",borderRadius:"6px",border:"1px solid #e9ecef",textAlign:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500",color:"#495057"},children:[y.jsx(eV,{color:"#667eea",size:14}),"תאריכי השאלה"]}),y.jsxs("div",{style:{fontSize:"0.85rem",color:"#6c757d",lineHeight:"1.4"},children:[y.jsxs("div",{children:["📤 לקיחה: ",o(s.pickupDate)]}),y.jsxs("div",{children:["🎉 אירוע: ",o(s.eventDate)]}),y.jsxs("div",{children:["📥 החזרה: ",o(s.returnDate)]}),s.eventType&&y.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:"500",color:"#495057"},children:["🎊 סוג אירוע: ",s.eventType]})]})]})]},s.id))})]})}),y.jsx("div",{style:{background:"#f8f9fa",padding:"1rem 1.5rem",borderRadius:"0 0 12px 12px",borderTop:"1px solid #e9ecef",textAlign:"center"},children:y.jsx("button",{onClick:e,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"25px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.transform="translateY(-1px)",s.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)"},onMouseLeave:s=>{s.target.style.transform="translateY(0)",s.target.style.boxShadow="none"},children:"סגור"})})]}),y.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):null},_4=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),b=Math.min(a,m+p-1);b-m+1<p&&(m=Math.max(1,b-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let I=m;I<=b;I++)_.push(I);return b<a&&(b<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,h=Math.min(n*t,e);return y.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[y.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",h," מתוך ",e," מוצרים"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[y.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(R1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return y.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:y.jsx(mx,{size:o?16:20})},`dots-${g}`);const m=p===n;return y.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),y.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(T1,{size:o?16:20})})]})]})},cV=()=>{const[n,e]=fe.useState(""),[t,r]=fe.useState(""),[i,a]=fe.useState([]),[o,s]=fe.useState([]),[c,f]=fe.useState(""),[h,p]=fe.useState(""),[g,m]=fe.useState(null),[b,_]=fe.useState(""),[I,C]=fe.useState(!1),[N,j]=fe.useState(!1),[q,Y]=fe.useState(null),[H,P]=fe.useState(""),[E,R]=fe.useState(""),[L,T]=fe.useState(1),[k,B]=fe.useState(1),[V,Q]=fe.useState(window.innerWidth<=768),[z,U]=fe.useState(!1),[te,oe]=fe.useState(null),{user:X}=ou(),ge=(X==null?void 0:X.username)||"משתמש לא ידוע",G=fe.useRef(null),Z=V?12:20,ne=V?12:20;fe.useEffect(()=>{const Ne=()=>{const Ke=window.innerWidth<=768;Ke!==V&&(Q(Ke),T(1),B(1))};return window.addEventListener("resize",Ne),()=>window.removeEventListener("resize",Ne)},[V]),fe.useEffect(()=>{T(1)},[c]),fe.useEffect(()=>{B(1)},[h]),fe.useEffect(()=>{const Ne=document.createElement("style");return Ne.innerHTML=`
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] { -moz-appearance: textfield; }
      
      /* רספונסיביות משופרת */
      .products-grid-mobile {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.2rem;
        padding: 0;
      }
      
      .product-card-mobile {
        min-height: 380px;
        padding: 1rem;
      }
      
      .product-card-mobile img {
        height: 140px;
      }
      
      .product-card-mobile h3 {
        font-size: 1rem;
        margin: 0.5rem 0;
      }
      
      .product-card-mobile p {
        font-size: 0.875rem;
        margin: 0.25rem 0;
      }
      
      .product-card-mobile .button-group {
        flex-direction: row;
        gap: 0.5rem;
        width: 100%;
      }
      
      .product-card-mobile button {
        font-size: 0.8rem;
        padding: 6px 10px;
        flex: 1;
      }
      
      /* מובייל בלבד */
      @media (max-width: 768px) {
        .products-grid-mobile {
          grid-template-columns: 1fr 1fr !important;
          gap: 0.75rem !important;
          padding: 0 0.5rem;
        }
        
        .product-card-mobile {
          min-height: 320px !important;
          padding: 0.75rem !important;
        }
        
        .product-card-mobile img {
          height: 100px !important;
        }
        
        .product-card-mobile h3 {
          font-size: 0.9rem !important;
          margin: 0.5rem 0 !important;
        }
        
        .product-card-mobile p {
          font-size: 0.8rem !important;
          margin: 0.25rem 0 !important;
        }
        
        .product-card-mobile .button-group {
          flex-direction: column !important;
          gap: 0.3rem !important;
        }
        
        .product-card-mobile button {
          font-size: 0.75rem !important;
          padding: 4px 8px !important;
          width: 100% !important;
        }
      }
    `,document.head.appendChild(Ne),()=>document.head.removeChild(Ne)},[]);const ae=async()=>{const Ke=(await sr(An(Pt,"orders"))).docs.map(ut=>ut.data()).filter(ut=>ut.status==="open"),We=new Set;Ke.forEach(ut=>{var At;(At=ut.items)==null||At.forEach(vt=>{We.add(vt.id)})});const nt=(await sr(An(Pt,"items"))).docs.filter(ut=>ut.data().isDeleted!==!0).map(ut=>{const At=ut.data(),vt=u1(At);return{id:ut.id,...vt,inUse:We.has(ut.id)}});a(nt)},pe=async()=>{const Ke=(await sr(An(Pt,"deletedItems"))).docs.map(We=>{const st=We.data();return{id:We.id,...u1(st)}});s(Ke)};fe.useEffect(()=>{const Ne=async()=>{try{console.log("🔄 בדיקת migration למבנה תמונות חדש...");const We=await Vz(Pt,Za,Er,sr,An);console.log("📊 תוצאות migration:",We)}catch{console.log("⚠️ Migration כבר רץ או שאין צורך בו")}};localStorage.getItem("imagesMigrationComplete")?(ae(),pe()):Ne().then(()=>{localStorage.setItem("imagesMigrationComplete","true"),ae(),pe()})},[]),fe.useEffect(()=>{const Ne=We=>{N&&G.current&&!G.current.contains(We.target)&&j(!1)},Ke=We=>{We.key==="Escape"&&j(!1)};return document.addEventListener("mousedown",Ne),document.addEventListener("keydown",Ke),()=>{document.removeEventListener("mousedown",Ne),document.removeEventListener("keydown",Ke)}},[N]);const Ae=i.filter(Ne=>Ne.name.toLowerCase().includes(c.toLowerCase())),_e=o.filter(Ne=>Ne.name.toLowerCase().includes(h.toLowerCase())),Ie=(L-1)*Z,$e=Ie+Z,qe=Ae.slice(Ie,$e),at=(k-1)*ne,lt=at+ne,wt=_e.slice(at,lt),Be=Ne=>{console.log("🔍 פותח מודל הזמנות פעילות עבור:",Ne.name),oe(Ne),U(!0)},ve=async Ne=>{if(window.confirm("האם את/ה בטוח/ה שברצונך למחוק את המוצר?"))try{await OF(Ne,ge),mn.success("המוצר הוסר מהרשימה."),ae(),pe();const Ke=Ae.length-1,We=Math.ceil(Ke/Z);L>We&&We>0&&T(We)}catch{mn.error("שגיאה במחיקת המוצר")}},ht=async Ne=>{if(window.confirm("האם ברצונך להשיב את המוצר למלאי?"))try{await kF(Ne,ge),mn.success("המוצר הושב למלאי בהצלחה."),ae(),pe();const Ke=_e.length-1,We=Math.ceil(Ke/ne);k>We&&We>0&&B(We)}catch{mn.error("שגיאה בהחזרת המוצר")}},ct=async(Ne,Ke=null)=>{var We,st;Ne.preventDefault();try{const nt=Ke||{name:n,quantity:parseInt(t),images:b?[b]:[],imageUrl:b,publicComment:H,internalComment:E},ut=ec(An(Pt,"items"),ic("name","==",nt.name.trim())),At=await sr(ut);if(q)await Za(Er(Pt,"items",q.id),{name:nt.name,quantity:parseInt(nt.quantity),images:nt.images||[],imageUrl:((We=nt.images)==null?void 0:We[0])||null,publicComment:nt.publicComment,internalComment:nt.internalComment,updatedBy:ge,updatedAt:Ai()}),mn.success("המוצר עודכן בהצלחה");else if(At.empty)await c4({name:nt.name,quantity:parseInt(nt.quantity),images:nt.images||[],imageUrl:((st=nt.images)==null?void 0:st[0])||null,publicComment:nt.publicComment,internalComment:nt.internalComment,createdBy:ge,updatedBy:ge,createdAt:Ai(),updatedAt:Ai()}),mn.success(`המוצר "${nt.name}" נוסף בהצלחה`);else{const vt=At.docs[0].data();Oz.confirmAlert({title:"המוצר כבר קיים",message:`המוצר "${nt.name}" כבר קיים בכמות ${vt.quantity}.
האם להוסיף ${nt.quantity}?`,buttons:[{label:"כן",onClick:async()=>{var _t;await c4({name:nt.name,quantity:parseInt(nt.quantity),images:nt.images||[],imageUrl:((_t=nt.images)==null?void 0:_t[0])||null,publicComment:nt.publicComment,internalComment:nt.internalComment,createdBy:ge,updatedBy:ge,createdAt:Ai(),updatedAt:Ai()}),mn.success("הכמות עודכנה בהצלחה"),ae(),pe()}},{label:"לא",onClick:()=>mn.info("בוטל")}]});return}e(""),r(""),m(null),_(""),P(""),R(""),C(!1),Y(null),ae(),pe()}catch(nt){console.error("שגיאה בהוספת המוצר:",nt),mn.error("הוספת המוצר נכשלה")}};return y.jsxs("div",{className:"page-container",style:{padding:"1rem",direction:"rtl"},children:[y.jsxs("div",{style:{width:"100%"},children:[y.jsx("h2",{children:"ניהול מוצרים"}),y.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[y.jsxs("button",{onClick:()=>{Y(null),e(""),r(""),_(""),m(null),C(!0),P(""),R("")},className:"btn-primary",style:{backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[y.jsx(aV,{size:14})," הוספת מוצר"]}),y.jsxs("button",{onClick:()=>j(!0),className:"btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[y.jsx(b4,{size:14})," מוצרים שנמחקו"]})]}),y.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצר...",value:c,onChange:Ne=>f(Ne.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",marginBottom:"1rem",boxSizing:"border-box"}}),c&&y.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9"},children:y.jsxs("p",{style:{margin:0,color:"#0369a1"},children:["🔍 נמצאו ",Ae.length,' מוצרים עבור "',c,'"']})}),y.jsx("div",{className:"products-grid-mobile",children:qe.length===0?y.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:c?`לא נמצאו מוצרים לחיפוש "${c}"`:"לא נמצא מוצרים במלאי."}):qe.map(Ne=>y.jsxs("div",{className:"product-card product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",transition:"transform 0.2s",boxSizing:"border-box"},children:[y.jsx(f1,{item:Ne,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),y.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1rem"},children:Ne.name}),y.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",Ne.quantity]}),Ne.internalComment&&y.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"0.25rem",margin:"0.25rem 0"},children:["📌 ",Ne.internalComment]}),y.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",margin:"0.25rem 0"},children:["מזהה מוצר: ",Ne.ItemId]}),Ne.inUse&&y.jsx("p",{style:{color:"#d97706",fontWeight:"bold",fontSize:"0.85rem",margin:"0.25rem 0"},children:"🕐 מוצר זה נמצא בהזמנות פעילות"}),y.jsxs("div",{className:"button-group",style:{display:"flex",gap:"0.4rem",marginTop:"auto",width:"100%",flexDirection:"column"},children:[Ne.inUse&&y.jsxs("button",{onClick:()=>Be(Ne),style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:V?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:V?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",width:"100%",minHeight:V?"28px":"32px"},children:[y.jsx(nV,{size:V?12:14})," ראה הזמנות"]}),y.jsxs("div",{style:{display:"flex",gap:"0.4rem",width:"100%"},children:[y.jsxs("button",{onClick:()=>{Y(Ne),e(Ne.name),r(Ne.quantity.toString()),_(zz(Ne)||""),m(null),C(!0),P(Ne.publicComment||""),R(Ne.internalComment||"")},style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:V?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:V?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:V?"28px":"32px"},children:[y.jsx(tV,{size:V?12:14})," עריכה"]}),y.jsxs("button",{onClick:()=>ve(Ne.id),style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:V?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:V?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:V?"28px":"32px"},children:[y.jsx(b4,{size:V?12:14})," מחיקה"]})]})]})]},Ne.id))}),y.jsx(_4,{currentPage:L,totalItems:Ae.length,itemsPerPage:Z,onPageChange:T})]}),N&&y.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},children:y.jsxs("div",{className:"modal-content",ref:G,style:{position:"relative",backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80%",overflowY:"auto",padding:"2rem",direction:"rtl"},children:[y.jsx("h2",{children:"מוצרים שנמחקו"}),y.jsx("button",{onClick:()=>j(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"×"}),y.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצרים שנמחקו...",value:h,onChange:Ne=>p(Ne.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",margin:"1rem 0",boxSizing:"border-box"}}),h&&y.jsx("div",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fca5a5"},children:y.jsxs("p",{style:{margin:0,color:"#dc2626"},children:["🔍 נמצאו ",_e.length,' מוצרים שנמחקו עבור "',h,'"']})}),y.jsx("div",{className:"products-grid-mobile",children:wt.length===0?y.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:h?`לא נמצאו מוצרים שנמחקו לחיפוש "${h}"`:"אין פריטים שנמחקו."}):wt.map(Ne=>y.jsxs("div",{className:"product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",boxSizing:"border-box"},children:[y.jsx(f1,{item:Ne,width:"100%",height:"120px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),y.jsx("h3",{style:{margin:"0.5rem 0"},children:Ne.name}),y.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",Ne.quantity]}),y.jsxs("button",{onClick:()=>ht(Ne.id),style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",marginTop:"auto"},children:[y.jsx(sV,{size:14})," השבה"]})]},Ne.id))}),y.jsx(_4,{currentPage:k,totalItems:_e.length,itemsPerPage:ne,onPageChange:B})]})}),I&&y.jsx(Hz,{editingItem:q,name:n,quantity:t,imageUrl:b,imageFile:g,publicComment:H,internalComment:E,onNameChange:Ne=>e(Ne.target.value.trimStart()),onQuantityChange:Ne=>r(Ne.target.value.trimStart()),onImageUrlChange:Ne=>_(Ne.target.value),onImageFileChange:Ne=>m(Ne.target.files[0]),onPublicCommentChange:Ne=>P(Ne.target.value),onInternalCommentChange:Ne=>R(Ne.target.value),onCancel:()=>C(!1),onSubmit:ct}),z&&y.jsx(lV,{item:te,onClose:()=>{U(!1),oe(null)}}),y.jsx(Iz,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},uV=()=>{const{user:n}=ou(),[e,t]=fe.useState([]),[r,i]=fe.useState(""),[a,o]=fe.useState(null);fe.useEffect(()=>{(async()=>{const m=An(Pt,"users"),_=(await sr(m)).docs.map(I=>({id:I.id,...I.data()}));t(_)})()},[]),fe.useEffect(()=>{(async()=>{try{const m=Er(Pt,"settings","onlineOrdering"),b=await Sd(m);b.exists()&&o(b.data().enabled)}catch(m){console.error("שגיאה בטעינת ההגדרה:",m)}})()},[]);const s=async(g,m)=>{const b=Er(Pt,"users",g);await Za(b,{role:m}),t(e.map(_=>_.id===g?{..._,role:m}:_))},c=async()=>{try{const g=!a;await Za(Er(Pt,"settings","onlineOrdering"),{enabled:g}),o(g)}catch(g){alert("שגיאה בעדכון ההגדרה: "+g.message)}},f={container:{padding:"1rem",direction:"rtl",maxWidth:"100%",overflow:"hidden"},header:{fontSize:"1.8rem",marginBottom:"2rem",textAlign:"center",color:"#333",fontWeight:"600"},toggleBox:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"2rem",backgroundColor:"#f8f9fa",padding:"16px 24px",borderRadius:"15px",border:"2px solid #e9ecef",maxWidth:"400px",margin:"0 auto 2rem auto",boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},toggleSwitch:{width:"50px",height:"28px",borderRadius:"50px",backgroundColor:a?"#4caf50":"#e74c3c",position:"relative",cursor:"pointer",transition:"0.3s",flexShrink:0},toggleCircle:{position:"absolute",top:"3px",left:a?"25px":"3px",width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"white",transition:"0.3s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},searchBox:{padding:"12px 16px",width:"100%",maxWidth:"500px",borderRadius:"10px",border:"2px solid #ddd",fontSize:"16px",marginBottom:"2rem",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s ease",display:"block",margin:"0 auto 2rem auto"},tableContainer:{overflowX:"auto",marginTop:"1rem",borderRadius:"12px",border:"1px solid #ddd",maxWidth:"1200px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},table:{width:"100%",borderCollapse:"collapse",minWidth:"600px",backgroundColor:"white"},th:{border:"1px solid #ddd",padding:"12px 8px",backgroundColor:"#f8f9fa",fontWeight:"600",fontSize:"0.9rem",textAlign:"center",whiteSpace:"nowrap"},td:{border:"1px solid #ddd",padding:"12px 8px",textAlign:"center",fontSize:"0.85rem",verticalAlign:"middle"},button:{padding:"8px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"100px",transition:"opacity 0.2s ease"},promoteBtn:{backgroundColor:"#28a745",color:"white"},demoteBtn:{backgroundColor:"#dc3545",color:"white"}};if(!n||n.role!=="MainAdmin")return y.jsx("div",{style:{padding:"2rem",textAlign:"center",direction:"rtl"},children:y.jsx("p",{children:"אין לך גישה לעמוד זה"})});const h=e.filter(g=>g.username&&g.username.toLowerCase().includes(r.toLowerCase())),p=({user:g})=>y.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[y.jsx("h4",{style:{margin:0,color:"#333",fontSize:"1.1rem"},children:g.username}),y.jsx("span",{style:{backgroundColor:g.role==="MainAdmin"?"#6f42c1":g.role==="GmachAdmin"?"#17a2b8":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"500"},children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role})]}),y.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"0.9rem",wordBreak:"break-all"},children:["📧 ",g.email]}),g.role!=="MainAdmin"&&y.jsx("div",{style:{marginTop:"1rem"},children:g.role==="User"?y.jsx("button",{style:{...f.button,...f.promoteBtn,width:"100%"},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):y.jsx("button",{style:{...f.button,...f.demoteBtn,width:"100%"},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})})]});return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-table {
              display: none !important;
            }
            .mobile-cards {
              display: block !important;
            }
            .container-mobile {
              padding: 1rem !important;
            }
            .header-mobile {
              font-size: 1.5rem !important;
              margin-bottom: 1.5rem !important;
            }
            .toggle-mobile {
              max-width: 100% !important;
              margin: 0 0 1.5rem 0 !important;
              padding: 12px 16px !important;
            }
            .search-mobile {
              margin: 0 0 1.5rem 0 !important;
              max-width: 100% !important;
            }
          }
          
          @media (min-width: 769px) {
            .desktop-table {
              display: table !important;
            }
            .mobile-cards {
              display: none !important;
            }
            .container-desktop {
              padding: 2rem !important;
              max-width: 1400px !important;
              margin: 0 auto !important;
            }
          }
          
          input:focus {
            border-color: #1976d2 !important;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
          }
          
          button:hover {
            opacity: 0.9;
          }
          
          button:active {
            transform: translateY(1px);
          }
        `}),y.jsxs("div",{style:f.container,className:"container-mobile container-desktop",children:[y.jsx("h2",{style:f.header,className:"header-mobile",children:"ניהול משתמשים"}),a!==null&&y.jsxs("div",{style:f.toggleBox,className:"toggle-mobile",children:[y.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"הזמנות דרך האתר:"}),y.jsx("div",{style:f.toggleSwitch,onClick:c,children:y.jsx("div",{style:f.toggleCircle})})]}),y.jsx("input",{type:"text",placeholder:"חיפוש משתמש...",value:r,onChange:g=>i(g.target.value),style:f.searchBox,className:"search-mobile",dir:"rtl"}),y.jsx("div",{style:f.tableContainer,className:"desktop-table",children:y.jsxs("table",{style:f.table,children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{style:f.th,children:"שם משתמש"}),y.jsx("th",{style:f.th,children:"אימייל"}),y.jsx("th",{style:f.th,children:"הרשאה"}),y.jsx("th",{style:f.th,children:"פעולה"})]})}),y.jsx("tbody",{children:h.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"לא נמצאו משתמשים תואמים"})}):h.map(g=>y.jsxs("tr",{children:[y.jsx("td",{style:f.td,children:g.username}),y.jsx("td",{style:f.td,children:g.email}),y.jsx("td",{style:f.td,children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role}),y.jsxs("td",{style:f.td,children:[g.role!=="MainAdmin"&&(g.role==="User"?y.jsx("button",{style:{...f.button,...f.promoteBtn},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):y.jsx("button",{style:{...f.button,...f.demoteBtn},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})),g.role==="MainAdmin"&&y.jsx("span",{style:{color:"#999",fontSize:"0.8rem"},children:"---"})]})]},g.id))})]})}),y.jsx("div",{className:"mobile-cards",style:{display:"none"},children:h.length===0?y.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",backgroundColor:"white",borderRadius:"12px",border:"1px solid #ddd"},children:"לא נמצאו משתמשים תואמים"}):h.map(g=>y.jsx(p,{user:g},g.id))})]})]})},fV=({item:n,isOpen:e,onClose:t})=>!e||!n?null:y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",direction:"rtl"},onClick:t,children:y.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative",padding:"1.5rem",boxShadow:"0 20px 40px rgba(0,0,0,0.3)"},onClick:r=>r.stopPropagation(),children:[y.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",left:"1rem",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1001,transition:"background 0.2s ease"},onMouseEnter:r=>r.target.style.background="#e5e7eb",onMouseLeave:r=>r.target.style.background="#f3f4f6",children:y.jsx(yx,{size:20})}),y.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"2rem",alignItems:"flex-start"},children:[y.jsx("div",{style:{flex:window.innerWidth<=768?"none":"1",width:window.innerWidth<=768?"100%":"400px"},children:y.jsx(f1,{item:n,width:"100%",height:window.innerWidth<=768?"300px":"400px",showNavigation:!0,style:{borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})}),y.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[y.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",textAlign:"center"},children:n.name}),y.jsx("div",{style:{backgroundColor:"#f8fafc",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:y.jsxs("p",{style:{fontSize:"1.1rem",color:"#4b5563",margin:0,textAlign:"center"},children:[y.jsx("strong",{children:"מזהה מוצר:"})," ",n.ItemId]})}),n.publicComment&&y.jsxs("div",{style:{backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[y.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#1e40af",fontSize:"1rem"},children:"📝 הערות"}),y.jsx("p",{style:{margin:0,color:"#1e3a8a",fontSize:"1rem"},children:n.publicComment})]})]})]})]})}),hV=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),b=Math.min(a,m+p-1);b-m+1<p&&(m=Math.max(1,b-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let I=m;I<=b;I++)_.push(I);return b<a&&(b<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,h=Math.min(n*t,e);return y.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[y.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:["מציג ",f,"-",h," מתוך ",e," מוצרים"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[y.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(R1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return y.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:y.jsx(mx,{size:o?16:20})},`dots-${g}`);const m=p===n;return y.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),y.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:y.jsx(T1,{size:o?16:20})})]})]})},dV=()=>{const[n,e]=fe.useState([]),[t,r]=fe.useState(""),[i,a]=fe.useState(!0),[o,s]=fe.useState(null),[c,f]=fe.useState(!1),[h,p]=fe.useState(1),[g,m]=fe.useState(window.innerWidth<=768),b=g?12:20;fe.useEffect(()=>{const Y=()=>{const H=window.innerWidth<=768;H!==g&&(m(H),p(1))};return window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[g]),fe.useEffect(()=>{p(1)},[t]),fe.useEffect(()=>{const Y=An(Pt,"items"),H=W8(Y,P=>{const E=P.docs.map(R=>{const L=R.data(),T=u1(L);return{id:R.id,...T}}).filter(R=>R.isDeleted!==!0);e(E),a(!1)});return()=>H()},[]);const _=(Y,H)=>{H.target.closest("button")||H.target.closest("[data-navigation]")||(s(Y),f(!0))},I=()=>{f(!1),s(null)};if(i)return y.jsxs("div",{style:{padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),y.jsx("h2",{children:"טוען קטלוג"}),y.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]});const C=n.filter(Y=>Y.name.toLowerCase().includes(t.toLowerCase())),N=(h-1)*b,j=N+b,q=C.slice(N,j);return y.jsxs("div",{style:{padding:"2rem",direction:"rtl",textAlign:"right",paddingLeft:"1rem",paddingRight:"1rem"},children:[y.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"2rem",color:"#1f2937"},children:"📋 קטלוג מוצרים"}),y.jsx("input",{type:"text",placeholder:"חיפוש פריט",value:t,onChange:Y=>r(Y.target.value),dir:"rtl",style:{padding:"12px 16px",width:"100%",marginBottom:"1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:Y=>Y.target.style.borderColor="#3b82f6",onBlur:Y=>Y.target.style.borderColor="#e5e7eb"}),t&&y.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #0ea5e9",textAlign:"center"},children:y.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"1rem"},children:["🔍 נמצאו ",C.length,' מוצרים עבור "',t,'"']})}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:q.length===0?y.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",marginTop:"3rem",padding:"2rem"},children:t?y.jsxs(y.Fragment,{children:[y.jsxs("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:['לא נמצאו פריטים עבור "',t,'"']}),y.jsx("p",{style:{color:"#9ca3af"},children:"נסה לחפש במילות מפתח אחרות"})]}):y.jsxs(y.Fragment,{children:[y.jsx("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:"לא נמצאו פריטים"}),y.jsx("p",{style:{color:"#9ca3af"},children:"אנא נסה לחפש שוב או צור קשר עם המנהלים"})]})}):q.map(Y=>y.jsxs("div",{style:{border:"1px solid #e5e7eb",padding:"0.8rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"all 0.3s ease-in-out",minHeight:"250px",maxWidth:"100%",cursor:"pointer"},onMouseEnter:H=>{H.currentTarget.style.transform="scale(1.05) translateY(-8px)",H.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.2)",H.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:H=>{H.currentTarget.style.transform="scale(1) translateY(0)",H.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",H.currentTarget.style.borderColor="#e5e7eb"},onClick:H=>_(Y,H),children:[y.jsx(f1,{item:Y,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem",borderRadius:"4px"}}),y.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[y.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"1.1rem",lineHeight:"1.3",textAlign:"center",color:"#1f2937",fontWeight:"700"},children:Y.name}),Y.publicComment&&y.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",margin:"0.3rem 0",fontStyle:"italic",background:"#f9fafb",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:["📝 ",Y.publicComment]}),y.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",textAlign:"center",marginTop:"auto",paddingTop:"0.5rem"},children:["מזהה: ",Y.ItemId]})]})]},Y.ItemId))}),y.jsx(hV,{currentPage:h,totalItems:C.length,itemsPerPage:b,onPageChange:p}),y.jsx(fV,{item:o,isOpen:c,onClose:I}),y.jsx("style",{jsx:!0,children:`
        @media (max-width: 768px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.8rem !important;
          }
        }
        
        @media (max-width: 480px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
          }
        }
      `})]})},pV="modulepreload",gV=function(n){return"/"+n},A4={},By=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(f=>{if(f=gV(f),f in A4)return;A4[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":pV,h||(g.as="script"),g.crossOrigin="",g.href=f,c&&g.setAttribute("nonce",c),document.head.appendChild(g),h)return new Promise((m,b)=>{g.addEventListener("load",m),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function lr(n){"@babel/helpers - typeof";return lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(n)}var Ma=Uint8Array,Xo=Uint16Array,wx=Int32Array,Um=new Ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zm=new Ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Fy=new Ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fS=function(n,e){for(var t=new Xo(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new wx(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},hS=fS(Um,2),dS=hS.b,Uy=hS.r;dS[28]=258,Uy[258]=28;var pS=fS(zm,0),mV=pS.b,E4=pS.r,zy=new Xo(32768);for(var Nr=0;Nr<32768;++Nr){var Gu=(Nr&43690)>>1|(Nr&21845)<<1;Gu=(Gu&52428)>>2|(Gu&13107)<<2,Gu=(Gu&61680)>>4|(Gu&3855)<<4,zy[Nr]=((Gu&65280)>>8|(Gu&255)<<8)>>1}var tc=function(n,e,t){for(var r=n.length,i=0,a=new Xo(e);i<r;++i)n[i]&&++a[n[i]-1];var o=new Xo(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(t){s=new Xo(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],h=e-n[i],p=o[n[i]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)s[zy[p]>>c]=f}else for(s=new Xo(r),i=0;i<r;++i)n[i]&&(s[i]=zy[o[n[i]-1]++]>>15-n[i]);return s},gf=new Ma(288);for(var Nr=0;Nr<144;++Nr)gf[Nr]=8;for(var Nr=144;Nr<256;++Nr)gf[Nr]=9;for(var Nr=256;Nr<280;++Nr)gf[Nr]=7;for(var Nr=280;Nr<288;++Nr)gf[Nr]=8;var h1=new Ma(32);for(var Nr=0;Nr<32;++Nr)h1[Nr]=5;var vV=tc(gf,9,0),yV=tc(gf,9,1),xV=tc(h1,5,0),bV=tc(h1,5,1),Dv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},el=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Ov=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},_x=function(n){return(n+7)/8|0},gS=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ma(n.subarray(e,t))},wV=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],il=function(n,e,t){var r=new Error(e||wV[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,il),!t)throw r;return r},_V=function(n,e,t,r){var i=n.length,a=0;if(!i||e.f&&!e.l)return t||new Ma(0);var o=!t,s=o||e.i!=2,c=e.i;o&&(t=new Ma(i*3));var f=function(qe){var at=t.length;if(qe>at){var lt=new Ma(Math.max(at*2,qe));lt.set(t),t=lt}},h=e.f||0,p=e.p||0,g=e.b||0,m=e.l,b=e.d,_=e.m,I=e.n,C=i*8;do{if(!m){h=el(n,p,1);var N=el(n,p+1,3);if(p+=3,N)if(N==1)m=yV,b=bV,_=9,I=5;else if(N==2){var H=el(n,p,31)+257,P=el(n,p+10,15)+4,E=H+el(n,p+5,31)+1;p+=14;for(var R=new Ma(E),L=new Ma(19),T=0;T<P;++T)L[Fy[T]]=el(n,p+T*3,7);p+=P*3;for(var k=Dv(L),B=(1<<k)-1,V=tc(L,k,1),T=0;T<E;){var Q=V[el(n,p,B)];p+=Q&15;var j=Q>>4;if(j<16)R[T++]=j;else{var z=0,U=0;for(j==16?(U=3+el(n,p,3),p+=2,z=R[T-1]):j==17?(U=3+el(n,p,7),p+=3):j==18&&(U=11+el(n,p,127),p+=7);U--;)R[T++]=z}}var te=R.subarray(0,H),oe=R.subarray(H);_=Dv(te),I=Dv(oe),m=tc(te,_,1),b=tc(oe,I,1)}else il(1);else{var j=_x(p)+4,q=n[j-4]|n[j-3]<<8,Y=j+q;if(Y>i){c&&il(0);break}s&&f(g+q),t.set(n.subarray(j,Y),g),e.b=g+=q,e.p=p=Y*8,e.f=h;continue}if(p>C){c&&il(0);break}}s&&f(g+131072);for(var X=(1<<_)-1,ge=(1<<I)-1,G=p;;G=p){var z=m[Ov(n,p)&X],Z=z>>4;if(p+=z&15,p>C){c&&il(0);break}if(z||il(2),Z<256)t[g++]=Z;else if(Z==256){G=p,m=null;break}else{var ne=Z-254;if(Z>264){var T=Z-257,ae=Um[T];ne=el(n,p,(1<<ae)-1)+dS[T],p+=ae}var pe=b[Ov(n,p)&ge],Ae=pe>>4;pe||il(3),p+=pe&15;var oe=mV[Ae];if(Ae>3){var ae=zm[Ae];oe+=Ov(n,p)&(1<<ae)-1,p+=ae}if(p>C){c&&il(0);break}s&&f(g+131072);var _e=g+ne;if(g<oe){var Ie=a-oe,$e=Math.min(oe,_e);for(Ie+g<0&&il(3);g<$e;++g)t[g]=r[Ie+g]}for(;g<_e;++g)t[g]=t[g-oe]}}e.l=m,e.p=G,e.b=g,e.f=h,m&&(h=1,e.m=_,e.d=b,e.n=I)}while(!h);return g!=t.length&&o?gS(t,0,g):t.subarray(0,g)},Vc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},N0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},kv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:vS,l:0};if(i==1){var o=new Ma(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(Y,H){return Y.f-H.f}),t.push({s:-1,f:25001});var s=t[0],c=t[1],f=0,h=1,p=2;for(t[0]={s:-1,f:s.f+c.f,l:s,r:c};h!=i-1;)s=t[t[f].f<t[p].f?f++:p++],c=t[f!=h&&t[f].f<t[p].f?f++:p++],t[h++]={s:-1,f:s.f+c.f,l:s,r:c};for(var g=a[0].s,r=1;r<i;++r)a[r].s>g&&(g=a[r].s);var m=new Xo(g+1),b=Vy(t[h-1],m,0);if(b>e){var r=0,_=0,I=b-e,C=1<<I;for(a.sort(function(H,P){return m[P.s]-m[H.s]||H.f-P.f});r<i;++r){var N=a[r].s;if(m[N]>e)_+=C-(1<<b-m[N]),m[N]=e;else break}for(_>>=I;_>0;){var j=a[r].s;m[j]<e?_-=1<<e-m[j]++-1:++r}for(;r>=0&&_;--r){var q=a[r].s;m[q]==e&&(--m[q],++_)}b=e}return{t:new Ma(m),l:b}},Vy=function(n,e,t){return n.s==-1?Math.max(Vy(n.l,e,t+1),Vy(n.r,e,t+1)):e[n.s]=t},S4=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Xo(++e),r=0,i=n[0],a=1,o=function(c){t[r++]=c},s=1;s<=e;++s)if(n[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=n[s]}return{c:t.subarray(0,r),n:e}},D0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},mS=function(n,e,t){var r=t.length,i=_x(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},C4=function(n,e,t,r,i,a,o,s,c,f,h){Vc(e,h++,t),++i[256];for(var p=kv(i,15),g=p.t,m=p.l,b=kv(a,15),_=b.t,I=b.l,C=S4(g),N=C.c,j=C.n,q=S4(_),Y=q.c,H=q.n,P=new Xo(19),E=0;E<N.length;++E)++P[N[E]&31];for(var E=0;E<Y.length;++E)++P[Y[E]&31];for(var R=kv(P,7),L=R.t,T=R.l,k=19;k>4&&!L[Fy[k-1]];--k);var B=f+5<<3,V=D0(i,gf)+D0(a,h1)+o,Q=D0(i,g)+D0(a,_)+o+14+3*k+D0(P,L)+2*P[16]+3*P[17]+7*P[18];if(c>=0&&B<=V&&B<=Q)return mS(e,h,n.subarray(c,c+f));var z,U,te,oe;if(Vc(e,h,1+(Q<V)),h+=2,Q<V){z=tc(g,m,0),U=g,te=tc(_,I,0),oe=_;var X=tc(L,T,0);Vc(e,h,j-257),Vc(e,h+5,H-1),Vc(e,h+10,k-4),h+=14;for(var E=0;E<k;++E)Vc(e,h+3*E,L[Fy[E]]);h+=3*k;for(var ge=[N,Y],G=0;G<2;++G)for(var Z=ge[G],E=0;E<Z.length;++E){var ne=Z[E]&31;Vc(e,h,X[ne]),h+=L[ne],ne>15&&(Vc(e,h,Z[E]>>5&127),h+=Z[E]>>12)}}else z=vV,U=gf,te=xV,oe=h1;for(var E=0;E<s;++E){var ae=r[E];if(ae>255){var ne=ae>>18&31;N0(e,h,z[ne+257]),h+=U[ne+257],ne>7&&(Vc(e,h,ae>>23&31),h+=Um[ne]);var pe=ae&31;N0(e,h,te[pe]),h+=oe[pe],pe>3&&(N0(e,h,ae>>5&8191),h+=zm[pe])}else N0(e,h,z[ae]),h+=U[ae]}return N0(e,h,z[256]),h+U[256]},AV=new wx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vS=new Ma(0),EV=function(n,e,t,r,i,a){var o=a.z||n.length,s=new Ma(r+o+5*(1+Math.ceil(o/7e3))+i),c=s.subarray(r,s.length-i),f=a.l,h=(a.r||0)&7;if(e){h&&(c[0]=a.r>>3);for(var p=AV[e-1],g=p>>13,m=p&8191,b=(1<<t)-1,_=a.p||new Xo(32768),I=a.h||new Xo(b+1),C=Math.ceil(t/3),N=2*C,j=function(wt){return(n[wt]^n[wt+1]<<C^n[wt+2]<<N)&b},q=new wx(25e3),Y=new Xo(288),H=new Xo(32),P=0,E=0,R=a.i||0,L=0,T=a.w||0,k=0;R+2<o;++R){var B=j(R),V=R&32767,Q=I[B];if(_[V]=Q,I[B]=V,T<=R){var z=o-R;if((P>7e3||L>24576)&&(z>423||!f)){h=C4(n,c,0,q,Y,H,E,L,k,R-k,h),L=P=E=0,k=R;for(var U=0;U<286;++U)Y[U]=0;for(var U=0;U<30;++U)H[U]=0}var te=2,oe=0,X=m,ge=V-Q&32767;if(z>2&&B==j(R-ge))for(var G=Math.min(g,z)-1,Z=Math.min(32767,R),ne=Math.min(258,z);ge<=Z&&--X&&V!=Q;){if(n[R+te]==n[R+te-ge]){for(var ae=0;ae<ne&&n[R+ae]==n[R+ae-ge];++ae);if(ae>te){if(te=ae,oe=ge,ae>G)break;for(var pe=Math.min(ge,ae-2),Ae=0,U=0;U<pe;++U){var _e=R-ge+U&32767,Ie=_[_e],$e=_e-Ie&32767;$e>Ae&&(Ae=$e,Q=_e)}}}V=Q,Q=_[V],ge+=V-Q&32767}if(oe){q[L++]=268435456|Uy[te]<<18|E4[oe];var qe=Uy[te]&31,at=E4[oe]&31;E+=Um[qe]+zm[at],++Y[257+qe],++H[at],T=R+te,++P}else q[L++]=n[R],++Y[n[R]]}}for(R=Math.max(R,T);R<o;++R)q[L++]=n[R],++Y[n[R]];h=C4(n,c,f,q,Y,H,E,L,k,R-k,h),f||(a.r=h&7|c[h/8|0]<<3,h-=7,a.h=I,a.p=_,a.i=R,a.w=T)}else{for(var R=a.w||0;R<o+f;R+=65535){var lt=R+65535;lt>=o&&(c[h/8|0]=f,lt=o),h=mS(c,h+1,n.subarray(R,lt))}a.i=o}return gS(s,0,r+_x(h)+i)},yS=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},SV=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new Ma(a.length+n.length);o.set(a),o.set(n,a.length),n=o,i.w=a.length}return EV(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},xS=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},CV=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=yS();i.p(e.dictionary),xS(n,2,i.d())}},IV=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&il(6,"invalid zlib data"),(n[1]>>5&1)==1&&il(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function qy(n,e){e||(e={});var t=yS();t.p(n);var r=SV(n,e,e.dictionary?6:2,4);return CV(r,e),xS(r,r.length-4,t.d()),r}function TV(n,e){return _V(n.subarray(IV(n),-4),{i:2},e,e)}var RV=typeof TextDecoder<"u"&&new TextDecoder,NV=0;try{RV.decode(vS,{stream:!0}),NV=1}catch{}var Gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Pv(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var br={log:Pv,warn:function(n){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):Pv.call(null,arguments))},error:function(n){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):Pv(n))}};function Lv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Yf(r.response,e,t)},r.onerror=function(){br.error("could not download file")},r.send()}function I4(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Hp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var X0,Hy,Yf=Gt.saveAs||((typeof window>"u"?"undefined":lr(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Gt.URL||Gt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?I4(i.href)?Lv(n,e,t):Hp(i,i.target="_blank"):Hp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Hp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(I4(n))Lv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Hp(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:lr(a)!=="object"&&(br.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Lv(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(Gt.HTMLElement)||Gt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":lr(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var h=s.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},s.readAsDataURL(n)}else{var c=Gt.URL||Gt.webkitURL,f=c.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function bS(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,o=i.exec(n);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return s.length==1&&(s="0"+s),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+s+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Mv(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Ta(t,r,i,a,e[0],7,-680876936),a=Ta(a,t,r,i,e[1],12,-389564586),i=Ta(i,a,t,r,e[2],17,606105819),r=Ta(r,i,a,t,e[3],22,-1044525330),t=Ta(t,r,i,a,e[4],7,-176418897),a=Ta(a,t,r,i,e[5],12,1200080426),i=Ta(i,a,t,r,e[6],17,-1473231341),r=Ta(r,i,a,t,e[7],22,-45705983),t=Ta(t,r,i,a,e[8],7,1770035416),a=Ta(a,t,r,i,e[9],12,-1958414417),i=Ta(i,a,t,r,e[10],17,-42063),r=Ta(r,i,a,t,e[11],22,-1990404162),t=Ta(t,r,i,a,e[12],7,1804603682),a=Ta(a,t,r,i,e[13],12,-40341101),i=Ta(i,a,t,r,e[14],17,-1502002290),t=Ra(t,r=Ta(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Ra(a,t,r,i,e[6],9,-1069501632),i=Ra(i,a,t,r,e[11],14,643717713),r=Ra(r,i,a,t,e[0],20,-373897302),t=Ra(t,r,i,a,e[5],5,-701558691),a=Ra(a,t,r,i,e[10],9,38016083),i=Ra(i,a,t,r,e[15],14,-660478335),r=Ra(r,i,a,t,e[4],20,-405537848),t=Ra(t,r,i,a,e[9],5,568446438),a=Ra(a,t,r,i,e[14],9,-1019803690),i=Ra(i,a,t,r,e[3],14,-187363961),r=Ra(r,i,a,t,e[8],20,1163531501),t=Ra(t,r,i,a,e[13],5,-1444681467),a=Ra(a,t,r,i,e[2],9,-51403784),i=Ra(i,a,t,r,e[7],14,1735328473),t=Na(t,r=Ra(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Na(a,t,r,i,e[8],11,-2022574463),i=Na(i,a,t,r,e[11],16,1839030562),r=Na(r,i,a,t,e[14],23,-35309556),t=Na(t,r,i,a,e[1],4,-1530992060),a=Na(a,t,r,i,e[4],11,1272893353),i=Na(i,a,t,r,e[7],16,-155497632),r=Na(r,i,a,t,e[10],23,-1094730640),t=Na(t,r,i,a,e[13],4,681279174),a=Na(a,t,r,i,e[0],11,-358537222),i=Na(i,a,t,r,e[3],16,-722521979),r=Na(r,i,a,t,e[6],23,76029189),t=Na(t,r,i,a,e[9],4,-640364487),a=Na(a,t,r,i,e[12],11,-421815835),i=Na(i,a,t,r,e[15],16,530742520),t=Da(t,r=Na(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Da(a,t,r,i,e[7],10,1126891415),i=Da(i,a,t,r,e[14],15,-1416354905),r=Da(r,i,a,t,e[5],21,-57434055),t=Da(t,r,i,a,e[12],6,1700485571),a=Da(a,t,r,i,e[3],10,-1894986606),i=Da(i,a,t,r,e[10],15,-1051523),r=Da(r,i,a,t,e[1],21,-2054922799),t=Da(t,r,i,a,e[8],6,1873313359),a=Da(a,t,r,i,e[15],10,-30611744),i=Da(i,a,t,r,e[6],15,-1560198380),r=Da(r,i,a,t,e[13],21,1309151649),t=Da(t,r,i,a,e[4],6,-145523070),a=Da(a,t,r,i,e[11],10,-1120210379),i=Da(i,a,t,r,e[2],15,718787259),r=Da(r,i,a,t,e[9],21,-343485551),n[0]=ef(t,n[0]),n[1]=ef(r,n[1]),n[2]=ef(i,n[2]),n[3]=ef(a,n[3])}function Vm(n,e,t,r,i,a){return e=ef(ef(e,n),ef(r,a)),ef(e<<i|e>>>32-i,t)}function Ta(n,e,t,r,i,a,o){return Vm(e&t|~e&r,n,e,i,a,o)}function Ra(n,e,t,r,i,a,o){return Vm(e&r|t&~r,n,e,i,a,o)}function Na(n,e,t,r,i,a,o){return Vm(e^t^r,n,e,i,a,o)}function Da(n,e,t,r,i,a,o){return Vm(t^(e|~r),n,e,i,a,o)}function wS(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Mv(r,DV(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Mv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Mv(r,i),r}function DV(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}X0=Gt.atob.bind(Gt),Hy=Gt.btoa.bind(Gt);var T4="0123456789abcdef".split("");function OV(n){for(var e="",t=0;t<4;t++)e+=T4[n>>8*t+4&15]+T4[n>>8*t&15];return e}function kV(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Wy(n){return wS(n).map(kV).join("")}var PV=function(n){for(var e=0;e<n.length;e++)n[e]=OV(n[e]);return n.join("")}(wS("hello"))!="5d41402abc4b2a76b9719d911017c592";function ef(n,e){if(PV){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Gy(n,e){var t,r,i,a;if(n!==t){for(var o=(i=n,a=1+(256/n.length>>0),new Array(a+1).join(i)),s=[],c=0;c<256;c++)s[c]=c;var f=0;for(c=0;c<256;c++){var h=s[c];f=(f+h+o.charCodeAt(c))%256,s[c]=s[f],s[f]=h}t=n,r=s}else s=r;var p=e.length,g=0,m=0,b="";for(c=0;c<p;c++)m=(m+(h=s[g=(g+1)%256]))%256,s[g]=s[m],s[m]=h,o=s[(s[g]+s[m])%256],b+=String.fromCharCode(e.charCodeAt(c)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var R4={print:4,modify:8,copy:16,"annot-forms":32};function nd(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(s){if(R4.perm!==void 0)throw new Error("Invalid permission: "+s);i+=R4[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=Wy(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Gy(this.encryptionKey,this.padding)}function rd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function N4(n){if(lr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var o=e[t][a];try{o[0].apply(n,r)}catch(s){Gt.console&&br.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yg(n){if(!(this instanceof Yg))return new Yg(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function _S(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Xf(n,e,t,r,i){if(!(this instanceof Xf))return new Xf(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,_S.call(this,r,i)}function ld(n,e,t,r,i){if(!(this instanceof ld))return new ld(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,_S.call(this,r,i)}function Wt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,c=16,f="S",h=null;lr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),s=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),f=n.defaultPathOperation||"S"),o=n.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=N4;var b="1.3",_=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(O){b=O};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return I};var C=m.__private__.getPageFormat=function(O){return I[O]};i=i||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},j=N.COMPAT;function q(){this.saveGraphicsState(),ve(new yt(ft,0,0,-ft,0,Vi()*ft).toString()+" cm"),this.setFontSize(this.getFontSize()/ft),f="n",j=N.ADVANCED}function Y(){this.restoreGraphicsState(),f="S",j=N.COMPAT}var H=m.__private__.combineFontStyleAndFontWeight=function(O,ee){if(O=="bold"&&ee=="normal"||O=="bold"&&ee==400||O=="normal"&&ee=="italic"||O=="bold"&&ee=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ee&&(O=ee==400||ee==="normal"?O==="italic"?"italic":"normal":ee!=700&&ee!=="bold"||O!=="normal"?(ee==700?"bold":ee)+""+O:"bold"),O};m.advancedAPI=function(O){var ee=j===N.COMPAT;return ee&&q.call(this),typeof O!="function"||(O(this),ee&&Y.call(this)),this},m.compatAPI=function(O){var ee=j===N.ADVANCED;return ee&&Y.call(this),typeof O!="function"||(O(this),ee&&q.call(this)),this},m.isAdvancedAPI=function(){return j===N.ADVANCED};var P,E=function(O){if(j!==N.ADVANCED)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(O,ee){var me=e||ee;if(isNaN(O)||isNaN(me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(me).replace(/0+$/,"")};P=m.hpf=m.__private__.hpf=typeof c=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,c)}:c==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,16)};var L=m.f2=m.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return R(O,2)},T=m.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return R(O,3)},k=m.scale=m.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return j===N.COMPAT?O*ft:j===N.ADVANCED?O:void 0},B=function(O){return j===N.COMPAT?Vi()-O:j===N.ADVANCED?O:void 0},V=function(O){return k(B(O))};m.__private__.setPrecision=m.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(e=parseInt(O,10))};var Q,z="00000000000000000000000000000000",U=m.__private__.getFileId=function(){return z},te=m.__private__.setFileId=function(O){return z=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(tr=new nd(h.userPermissions,h.userPassword,h.ownerPassword,z)),z};m.setFileId=function(O){return te(O),this},m.getFileId=function(){return U()};var oe=m.__private__.convertDateToPDFDate=function(O){var ee=O.getTimezoneOffset(),me=ee<0?"+":"-",xe=Math.floor(Math.abs(ee/60)),Te=Math.abs(ee%60),Ve=[me,ne(xe),"'",ne(Te),"'"].join("");return["D:",O.getFullYear(),ne(O.getMonth()+1),ne(O.getDate()),ne(O.getHours()),ne(O.getMinutes()),ne(O.getSeconds()),Ve].join("")},X=m.__private__.convertPDFDateToDate=function(O){var ee=parseInt(O.substr(2,4),10),me=parseInt(O.substr(6,2),10)-1,xe=parseInt(O.substr(8,2),10),Te=parseInt(O.substr(10,2),10),Ve=parseInt(O.substr(12,2),10),it=parseInt(O.substr(14,2),10);return new Date(ee,me,xe,Te,Ve,it,0)},ge=m.__private__.setCreationDate=function(O){var ee;if(O===void 0&&(O=new Date),O instanceof Date)ee=oe(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ee=O}return Q=ee},G=m.__private__.getCreationDate=function(O){var ee=Q;return O==="jsDate"&&(ee=X(Q)),ee};m.setCreationDate=function(O){return ge(O),this},m.getCreationDate=function(O){return G(O)};var Z,ne=m.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},ae=m.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},pe=0,Ae=[],_e=[],Ie=0,$e=[],qe=[],at=!1,lt=_e,wt=function(){pe=0,Ie=0,_e=[],Ae=[],$e=[],Ji=Dr(),gi=Dr()};m.__private__.setCustomOutputDestination=function(O){at=!0,lt=O};var Be=function(O){at||(lt=O)};m.__private__.resetCustomOutputDestination=function(){at=!1,lt=_e};var ve=m.__private__.out=function(O){return O=O.toString(),Ie+=O.length+1,lt.push(O),lt},ht=m.__private__.write=function(O){return ve(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},ct=m.__private__.getArrayBuffer=function(O){for(var ee=O.length,me=new ArrayBuffer(ee),xe=new Uint8Array(me);ee--;)xe[ee]=O.charCodeAt(ee);return me},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ne};var Ke=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(O){return Ke=j===N.ADVANCED?O/ft:O,this};var We,st=m.__private__.getFontSize=m.getFontSize=function(){return j===N.COMPAT?Ke:Ke*ft},nt=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(O){return nt=O,this},m.__private__.getR2L=m.getR2L=function(){return nt};var ut,At=m.__private__.setZoomMode=function(O){var ee=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))We=O;else if(isNaN(O)){if(ee.indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');We=O}else We=parseInt(O,10)};m.__private__.getZoomMode=function(){return We};var vt,_t=m.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');ut=O};m.__private__.getPageMode=function(){return ut};var Nt=m.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');vt=O};m.__private__.getLayoutMode=function(){return vt},m.__private__.setDisplayMode=m.setDisplayMode=function(O,ee,me){return At(O),Nt(ee),_t(me),this};var bt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(O){if(Object.keys(bt).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return bt[O]},m.__private__.getDocumentProperties=function(){return bt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(O){for(var ee in bt)bt.hasOwnProperty(ee)&&O[ee]&&(bt[ee]=O[ee]);return this},m.__private__.setDocumentProperty=function(O,ee){if(Object.keys(bt).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return bt[O]=ee};var Dt,ft,vn,Vt,Kn,Kt={},En={},pi=[],on={},pa={},In={},jr={},cr=null,yn=0,Tt=[],nn=new N4(m),Si=n.hotfixes||[],jn={},vr={},Ua=[],yt=function O(ee,me,xe,Te,Ve,it){if(!(this instanceof O))return new O(ee,me,xe,Te,Ve,it);isNaN(ee)&&(ee=1),isNaN(me)&&(me=0),isNaN(xe)&&(xe=0),isNaN(Te)&&(Te=1),isNaN(Ve)&&(Ve=0),isNaN(it)&&(it=0),this._matrix=[ee,me,xe,Te,Ve,it]};Object.defineProperty(yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),yt.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(O)},yt.prototype.multiply=function(O){var ee=O.sx*this.sx+O.shy*this.shx,me=O.sx*this.shy+O.shy*this.sy,xe=O.shx*this.sx+O.sy*this.shx,Te=O.shx*this.shy+O.sy*this.sy,Ve=O.tx*this.sx+O.ty*this.shx+this.tx,it=O.tx*this.shy+O.ty*this.sy+this.ty;return new yt(ee,me,xe,Te,Ve,it)},yt.prototype.decompose=function(){var O=this.sx,ee=this.shy,me=this.shx,xe=this.sy,Te=this.tx,Ve=this.ty,it=Math.sqrt(O*O+ee*ee),pt=(O/=it)*me+(ee/=it)*xe;me-=O*pt,xe-=ee*pt;var w=Math.sqrt(me*me+xe*xe);return pt/=w,O*(xe/=w)<ee*(me/=w)&&(O=-O,ee=-ee,pt=-pt,it=-it),{scale:new yt(it,0,0,w,0,0),translate:new yt(1,0,0,1,Te,Ve),rotate:new yt(O,ee,-ee,O,0,0),skew:new yt(1,0,pt,1,0,0)}},yt.prototype.toString=function(O){return this.join(" ")},yt.prototype.inversed=function(){var O=this.sx,ee=this.shy,me=this.shx,xe=this.sy,Te=this.tx,Ve=this.ty,it=1/(O*xe-ee*me),pt=xe*it,w=-ee*it,F=-me*it,$=O*it;return new yt(pt,w,F,$,-pt*Te-F*Ve,-w*Te-$*Ve)},yt.prototype.applyToPoint=function(O){var ee=O.x*this.sx+O.y*this.shx+this.tx,me=O.x*this.shy+O.y*this.sy+this.ty;return new Ps(ee,me)},yt.prototype.applyToRectangle=function(O){var ee=this.applyToPoint(O),me=this.applyToPoint(new Ps(O.x+O.w,O.y+O.h));return new bl(ee.x,ee.y,me.x-ee.x,me.y-ee.y)},yt.prototype.clone=function(){var O=this.sx,ee=this.shy,me=this.shx,xe=this.sy,Te=this.tx,Ve=this.ty;return new yt(O,ee,me,xe,Te,Ve)},m.Matrix=yt;var Gn=m.matrixMult=function(O,ee){return ee.multiply(O)},$n=new yt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=$n;var yr=function(O,ee){if(!pa[O]){var me=(ee instanceof Xf?"Sh":"P")+(Object.keys(on).length+1).toString(10);ee.id=me,pa[O]=me,on[me]=ee,nn.publish("addPattern",ee)}};m.ShadingPattern=Xf,m.TilingPattern=ld,m.addShadingPattern=function(O,ee){return E("addShadingPattern()"),yr(O,ee),this},m.beginTilingPattern=function(O){E("beginTilingPattern()"),os(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},m.endTilingPattern=function(O,ee){E("endTilingPattern()"),ee.stream=qe[Z].join(`
`),yr(O,ee),nn.publish("endTilingPattern",ee),Ua.pop().restore()};var Sr=m.__private__.newObject=function(){var O=Dr();return Gr(O,!0),O},Dr=m.__private__.newObjectDeferred=function(){return pe++,Ae[pe]=function(){return Ie},pe},Gr=function(O,ee){return ee=typeof ee=="boolean"&&ee,Ae[O]=Ie,ee&&ve(O+" 0 obj"),O},Is=m.__private__.newAdditionalObject=function(){var O={objId:Dr(),content:""};return $e.push(O),O},Ji=Dr(),gi=Dr(),ti=m.__private__.decodeColorString=function(O){var ee=O.split(" ");if(ee.length!==2||ee[1]!=="g"&&ee[1]!=="G")ee.length===5&&(ee[4]==="k"||ee[4]==="K")&&(ee=[(1-ee[0])*(1-ee[3]),(1-ee[1])*(1-ee[3]),(1-ee[2])*(1-ee[3]),"r"]);else{var me=parseFloat(ee[0]);ee=[me,me,me,"r"]}for(var xe="#",Te=0;Te<3;Te++)xe+=("0"+Math.floor(255*parseFloat(ee[Te])).toString(16)).slice(-2);return xe},$r=m.__private__.encodeColorString=function(O){var ee;typeof O=="string"&&(O={ch1:O});var me=O.ch1,xe=O.ch2,Te=O.ch3,Ve=O.ch4,it=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof me=="string"&&me.charAt(0)!=="#"){var pt=new bS(me);if(pt.ok)me=pt.toHex();else if(!/^\d*\.?\d*$/.test(me))throw new Error('Invalid color "'+me+'" passed to jsPDF.encodeColorString.')}if(typeof me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(me)&&(me="#"+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]),typeof me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(me)){var w=parseInt(me.substr(1),16);me=w>>16&255,xe=w>>8&255,Te=255&w}if(xe===void 0||Ve===void 0&&me===xe&&xe===Te)if(typeof me=="string")ee=me+" "+it[0];else switch(O.precision){case 2:ee=L(me/255)+" "+it[0];break;case 3:default:ee=T(me/255)+" "+it[0]}else if(Ve===void 0||lr(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return ee=["1.","1.","1.",it[1]].join(" ");if(typeof me=="string")ee=[me,xe,Te,it[1]].join(" ");else switch(O.precision){case 2:ee=[L(me/255),L(xe/255),L(Te/255),it[1]].join(" ");break;default:case 3:ee=[T(me/255),T(xe/255),T(Te/255),it[1]].join(" ")}}else if(typeof me=="string")ee=[me,xe,Te,Ve,it[2]].join(" ");else switch(O.precision){case 2:ee=[L(me),L(xe),L(Te),L(Ve),it[2]].join(" ");break;case 3:default:ee=[T(me),T(xe),T(Te),T(Ve),it[2]].join(" ")}return ee},ni=m.__private__.getFilters=function(){return o},ur=m.__private__.putStream=function(O){var ee=(O=O||{}).data||"",me=O.filters||ni(),xe=O.alreadyAppliedFilters||[],Te=O.addLength1||!1,Ve=ee.length,it=O.objectId,pt=function(Ut){return Ut};if(h!==null&&it===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(pt=tr.encryptor(it,0));var w={};me===!0&&(me=["FlateEncode"]);var F=O.additionalKeyValues||[],$=(w=Wt.API.processDataByFilters!==void 0?Wt.API.processDataByFilters(ee,me):{data:ee,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(w.data.length!==0&&(F.push({key:"Length",value:w.data.length}),Te===!0&&F.push({key:"Length1",value:Ve})),$.length!=0)if($.split("/").length-1==1)F.push({key:"Filter",value:$});else{F.push({key:"Filter",value:"["+$+"]"});for(var le=0;le<F.length;le+=1)if(F[le].key==="DecodeParms"){for(var Ce=[],Le=0;Le<w.reverseChain.split("/").length-1;Le+=1)Ce.push("null");Ce.push(F[le].value),F[le].value="["+Ce.join(" ")+"]"}}ve("<<");for(var ot=0;ot<F.length;ot++)ve("/"+F[ot].key+" "+F[ot].value);ve(">>"),w.data.length!==0&&(ve("stream"),ve(pt(w.data)),ve("endstream"))},Bn=m.__private__.putPage=function(O){var ee=O.number,me=O.data,xe=O.objId,Te=O.contentsObjId;Gr(xe,!0),ve("<</Type /Page"),ve("/Parent "+O.rootDictionaryObjId+" 0 R"),ve("/Resources "+O.resourceDictionaryObjId+" 0 R"),ve("/MediaBox ["+parseFloat(P(O.mediaBox.bottomLeftX))+" "+parseFloat(P(O.mediaBox.bottomLeftY))+" "+P(O.mediaBox.topRightX)+" "+P(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&ve("/CropBox ["+P(O.cropBox.bottomLeftX)+" "+P(O.cropBox.bottomLeftY)+" "+P(O.cropBox.topRightX)+" "+P(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&ve("/BleedBox ["+P(O.bleedBox.bottomLeftX)+" "+P(O.bleedBox.bottomLeftY)+" "+P(O.bleedBox.topRightX)+" "+P(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&ve("/TrimBox ["+P(O.trimBox.bottomLeftX)+" "+P(O.trimBox.bottomLeftY)+" "+P(O.trimBox.topRightX)+" "+P(O.trimBox.topRightY)+"]"),O.artBox!==null&&ve("/ArtBox ["+P(O.artBox.bottomLeftX)+" "+P(O.artBox.bottomLeftY)+" "+P(O.artBox.topRightX)+" "+P(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&ve("/UserUnit "+O.userUnit),nn.publish("putPage",{objId:xe,pageContext:Tt[ee],pageNumber:ee,page:me}),ve("/Contents "+Te+" 0 R"),ve(">>"),ve("endobj");var Ve=me.join(`
`);return j===N.ADVANCED&&(Ve+=`
Q`),Gr(Te,!0),ur({data:Ve,filters:ni(),objectId:Te}),ve("endobj"),xe},Co=m.__private__.putPages=function(){var O,ee,me=[];for(O=1;O<=yn;O++)Tt[O].objId=Dr(),Tt[O].contentsObjId=Dr();for(O=1;O<=yn;O++)me.push(Bn({number:O,data:qe[O],objId:Tt[O].objId,contentsObjId:Tt[O].contentsObjId,mediaBox:Tt[O].mediaBox,cropBox:Tt[O].cropBox,bleedBox:Tt[O].bleedBox,trimBox:Tt[O].trimBox,artBox:Tt[O].artBox,userUnit:Tt[O].userUnit,rootDictionaryObjId:Ji,resourceDictionaryObjId:gi}));Gr(Ji,!0),ve("<</Type /Pages");var xe="/Kids [";for(ee=0;ee<yn;ee++)xe+=me[ee]+" 0 R ";ve(xe+"]"),ve("/Count "+yn),ve(">>"),ve("endobj"),nn.publish("postPutPages")},Io=function(O){nn.publish("putFont",{font:O,out:ve,newObject:Sr,putStream:ur}),O.isAlreadyPutted!==!0&&(O.objectNumber=Sr(),ve("<<"),ve("/Type /Font"),ve("/BaseFont /"+rd(O.postScriptName)),ve("/Subtype /Type1"),typeof O.encoding=="string"&&ve("/Encoding /"+O.encoding),ve("/FirstChar 32"),ve("/LastChar 255"),ve(">>"),ve("endobj"))},Bi=function(){for(var O in Kt)Kt.hasOwnProperty(O)&&(p===!1||p===!0&&g.hasOwnProperty(O))&&Io(Kt[O])},ga=function(O){O.objectNumber=Sr();var ee=[];ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Form"}),ee.push({key:"BBox",value:"["+[P(O.x),P(O.y),P(O.x+O.width),P(O.y+O.height)].join(" ")+"]"}),ee.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var me=O.pages[1].join(`
`);ur({data:me,additionalKeyValues:ee,objectId:O.objectNumber}),ve("endobj")},Ts=function(){for(var O in jn)jn.hasOwnProperty(O)&&ga(jn[O])},fc=function(O,ee){var me,xe=[],Te=1/(ee-1);for(me=0;me<1;me+=Te)xe.push(me);if(xe.push(1),O[0].offset!=0){var Ve={offset:0,color:O[0].color};O.unshift(Ve)}if(O[O.length-1].offset!=1){var it={offset:1,color:O[O.length-1].color};O.push(it)}for(var pt="",w=0,F=0;F<xe.length;F++){for(me=xe[F];me>O[w+1].offset;)w++;var $=O[w].offset,le=(me-$)/(O[w+1].offset-$),Ce=O[w].color,Le=O[w+1].color;pt+=ae(Math.round((1-le)*Ce[0]+le*Le[0]).toString(16))+ae(Math.round((1-le)*Ce[1]+le*Le[1]).toString(16))+ae(Math.round((1-le)*Ce[2]+le*Le[2]).toString(16))}return pt.trim()},Rs=function(O,ee){ee||(ee=21);var me=Sr(),xe=fc(O.colors,ee),Te=[];Te.push({key:"FunctionType",value:"0"}),Te.push({key:"Domain",value:"[0.0 1.0]"}),Te.push({key:"Size",value:"["+ee+"]"}),Te.push({key:"BitsPerSample",value:"8"}),Te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ur({data:xe,additionalKeyValues:Te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:me}),ve("endobj"),O.objectNumber=Sr(),ve("<< /ShadingType "+O.type),ve("/ColorSpace /DeviceRGB");var Ve="/Coords ["+P(parseFloat(O.coords[0]))+" "+P(parseFloat(O.coords[1]))+" ";O.type===2?Ve+=P(parseFloat(O.coords[2]))+" "+P(parseFloat(O.coords[3])):Ve+=P(parseFloat(O.coords[2]))+" "+P(parseFloat(O.coords[3]))+" "+P(parseFloat(O.coords[4]))+" "+P(parseFloat(O.coords[5])),ve(Ve+="]"),O.matrix&&ve("/Matrix ["+O.matrix.toString()+"]"),ve("/Function "+me+" 0 R"),ve("/Extend [true true]"),ve(">>"),ve("endobj")},su=function(O,ee){var me=Dr(),xe=Sr();ee.push({resourcesOid:me,objectOid:xe}),O.objectNumber=xe;var Te=[];Te.push({key:"Type",value:"/Pattern"}),Te.push({key:"PatternType",value:"1"}),Te.push({key:"PaintType",value:"1"}),Te.push({key:"TilingType",value:"1"}),Te.push({key:"BBox",value:"["+O.boundingBox.map(P).join(" ")+"]"}),Te.push({key:"XStep",value:P(O.xStep)}),Te.push({key:"YStep",value:P(O.yStep)}),Te.push({key:"Resources",value:me+" 0 R"}),O.matrix&&Te.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),ur({data:O.stream,additionalKeyValues:Te,objectId:O.objectNumber}),ve("endobj")},za=function(O){var ee;for(ee in on)on.hasOwnProperty(ee)&&(on[ee]instanceof Xf?Rs(on[ee]):on[ee]instanceof ld&&su(on[ee],O))},Va=function(O){for(var ee in O.objectNumber=Sr(),ve("<<"),O)switch(ee){case"opacity":ve("/ca "+L(O[ee]));break;case"stroke-opacity":ve("/CA "+L(O[ee]))}ve(">>"),ve("endobj")},ri=function(){var O;for(O in In)In.hasOwnProperty(O)&&Va(In[O])},To=function(){for(var O in ve("/XObject <<"),jn)jn.hasOwnProperty(O)&&jn[O].objectNumber>=0&&ve("/"+O+" "+jn[O].objectNumber+" 0 R");nn.publish("putXobjectDict"),ve(">>")},lu=function(){tr.oid=Sr(),ve("<<"),ve("/Filter /Standard"),ve("/V "+tr.v),ve("/R "+tr.r),ve("/U <"+tr.toHexString(tr.U)+">"),ve("/O <"+tr.toHexString(tr.O)+">"),ve("/P "+tr.P),ve(">>"),ve("endobj")},Ja=function(){for(var O in ve("/Font <<"),Kt)Kt.hasOwnProperty(O)&&(p===!1||p===!0&&g.hasOwnProperty(O))&&ve("/"+O+" "+Kt[O].objectNumber+" 0 R");ve(">>")},pl=function(){if(Object.keys(on).length>0){for(var O in ve("/Shading <<"),on)on.hasOwnProperty(O)&&on[O]instanceof Xf&&on[O].objectNumber>=0&&ve("/"+O+" "+on[O].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),ve(">>")}},Ro=function(O){if(Object.keys(on).length>0){for(var ee in ve("/Pattern <<"),on)on.hasOwnProperty(ee)&&on[ee]instanceof m.TilingPattern&&on[ee].objectNumber>=0&&on[ee].objectNumber<O&&ve("/"+ee+" "+on[ee].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),ve(">>")}},hc=function(){if(Object.keys(In).length>0){var O;for(O in ve("/ExtGState <<"),In)In.hasOwnProperty(O)&&In[O].objectNumber>=0&&ve("/"+O+" "+In[O].objectNumber+" 0 R");nn.publish("putGStateDict"),ve(">>")}},fr=function(O){Gr(O.resourcesOid,!0),ve("<<"),ve("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ja(),pl(),Ro(O.objectOid),hc(),To(),ve(">>"),ve("endobj")},mi=function(){var O=[];Bi(),ri(),Ts(),za(O),nn.publish("putResources"),O.forEach(fr),fr({resourcesOid:gi,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources")},gl=function(){nn.publish("putAdditionalObjects");for(var O=0;O<$e.length;O++){var ee=$e[O];Gr(ee.objId,!0),ve(ee.content),ve("endobj")}nn.publish("postPutAdditionalObjects")},cu=function(O){En[O.fontName]=En[O.fontName]||{},En[O.fontName][O.fontStyle]=O.id},Qo=function(O,ee,me,xe,Te){var Ve={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:O,fontName:ee,fontStyle:me,encoding:xe,isStandardFont:Te||!1,metadata:{}};return nn.publish("addFont",{font:Ve,instance:this}),Kt[Ve.id]=Ve,cu(Ve),Ve.id},dc=function(O){for(var ee=0,me=Ne.length;ee<me;ee++){var xe=Qo.call(this,O[ee][0],O[ee][1],O[ee][2],Ne[ee][3],!0);p===!1&&(g[xe]=!0);var Te=O[ee][0].split("-");cu({id:xe,fontName:Te[0],fontStyle:Te[1]||""})}nn.publish("addFonts",{fonts:Kt,dictionary:En})},Ci=function(O){return O.foo=function(){try{return O.apply(this,arguments)}catch(xe){var ee=xe.stack||"";~ee.indexOf(" at ")&&(ee=ee.split(" at ")[1]);var me="Error in function "+ee.split(`
`)[0].split("<")[0]+": "+xe.message;if(!Gt.console)throw new Error(me);Gt.console.error(me,xe),Gt.alert&&alert(me)}},O.foo.bar=O,O.foo},ml=function(O,ee){var me,xe,Te,Ve,it,pt,w,F,$;if(Te=(ee=ee||{}).sourceEncoding||"Unicode",it=ee.outputEncoding,(ee.autoencode||it)&&Kt[Dt].metadata&&Kt[Dt].metadata[Te]&&Kt[Dt].metadata[Te].encoding&&(Ve=Kt[Dt].metadata[Te].encoding,!it&&Kt[Dt].encoding&&(it=Kt[Dt].encoding),!it&&Ve.codePages&&(it=Ve.codePages[0]),typeof it=="string"&&(it=Ve[it]),it)){for(w=!1,pt=[],me=0,xe=O.length;me<xe;me++)(F=it[O.charCodeAt(me)])?pt.push(String.fromCharCode(F)):pt.push(O[me]),pt[me].charCodeAt(0)>>8&&(w=!0);O=pt.join("")}for(me=O.length;w===void 0&&me!==0;)O.charCodeAt(me-1)>>8&&(w=!0),me--;if(!w)return O;for(pt=ee.noBOM?[]:[254,255],me=0,xe=O.length;me<xe;me++){if(($=(F=O.charCodeAt(me))>>8)>>8)throw new Error("Character at position "+me+" of string '"+O+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push($),pt.push(F-($<<8))}return String.fromCharCode.apply(void 0,pt)},Sn=m.__private__.pdfEscape=m.pdfEscape=function(O,ee){return ml(O,ee).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ii=m.__private__.beginPage=function(O){qe[++yn]=[],Tt[yn]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},eo(yn),Be(qe[Z])},Zo=function(O,ee){var me,xe,Te;switch(t=ee||t,typeof O=="string"&&(me=C(O.toLowerCase()),Array.isArray(me)&&(xe=me[0],Te=me[1])),Array.isArray(O)&&(xe=O[0]*ft,Te=O[1]*ft),isNaN(xe)&&(xe=i[0],Te=i[1]),(xe>14400||Te>14400)&&(br.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Te=Math.min(14400,Te)),i=[xe,Te],t.substr(0,1)){case"l":Te>xe&&(i=[Te,xe]);break;case"p":xe>Te&&(i=[Te,xe])}Ii(i),vc(ns),ve(Ti),yc!==0&&ve(yc+" J"),ks!==0&&ve(ks+" j"),nn.publish("addPage",{pageNumber:yn})},Jo=function(O){O>0&&O<=yn&&(qe.splice(O,1),Tt.splice(O,1),yn--,Z>yn&&(Z=yn),this.setPage(Z))},eo=function(O){O>0&&O<=yn&&(Z=O)},Fn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return qe.length-1},es=function(O,ee,me){var xe,Te=void 0;return me=me||{},O=O!==void 0?O:Kt[Dt].fontName,ee=ee!==void 0?ee:Kt[Dt].fontStyle,xe=O.toLowerCase(),En[xe]!==void 0&&En[xe][ee]!==void 0?Te=En[xe][ee]:En[O]!==void 0&&En[O][ee]!==void 0?Te=En[O][ee]:me.disableWarning===!1&&br.warn("Unable to look up font label for font '"+O+"', '"+ee+"'. Refer to getFontList() for available fonts."),Te||me.noFallback||(Te=En.times[ee])==null&&(Te=En.times.normal),Te},ma=m.__private__.putInfo=function(){var O=Sr(),ee=function(xe){return xe};for(var me in h!==null&&(ee=tr.encryptor(O,0)),ve("<<"),ve("/Producer ("+Sn(ee("jsPDF "+Wt.version))+")"),bt)bt.hasOwnProperty(me)&&bt[me]&&ve("/"+me.substr(0,1).toUpperCase()+me.substr(1)+" ("+Sn(ee(bt[me]))+")");ve("/CreationDate ("+Sn(ee(Q))+")"),ve(">>"),ve("endobj")},No=m.__private__.putCatalog=function(O){var ee=(O=O||{}).rootDictionaryObjId||Ji;switch(Sr(),ve("<<"),ve("/Type /Catalog"),ve("/Pages "+ee+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":ve("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ve("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ve("/OpenAction [3 0 R /Fit]");break;case"original":ve("/OpenAction [3 0 R /XYZ null null 1]");break;default:var me=""+We;me.substr(me.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&ve("/OpenAction [3 0 R /XYZ null null "+L(We)+"]")}switch(vt||(vt="continuous"),vt){case"continuous":ve("/PageLayout /OneColumn");break;case"single":ve("/PageLayout /SinglePage");break;case"two":case"twoleft":ve("/PageLayout /TwoColumnLeft");break;case"tworight":ve("/PageLayout /TwoColumnRight")}ut&&ve("/PageMode /"+ut),nn.publish("putCatalog"),ve(">>"),ve("endobj")},uu=m.__private__.putTrailer=function(){ve("trailer"),ve("<<"),ve("/Size "+(pe+1)),ve("/Root "+pe+" 0 R"),ve("/Info "+(pe-1)+" 0 R"),h!==null&&ve("/Encrypt "+tr.oid+" 0 R"),ve("/ID [ <"+z+"> <"+z+"> ]"),ve(">>")},pc=m.__private__.putHeader=function(){ve("%PDF-"+b),ve("%ºß¬à")},gc=m.__private__.putXRef=function(){var O="0000000000";ve("xref"),ve("0 "+(pe+1)),ve("0000000000 65535 f ");for(var ee=1;ee<=pe;ee++)typeof Ae[ee]=="function"?ve((O+Ae[ee]()).slice(-10)+" 00000 n "):Ae[ee]!==void 0?ve((O+Ae[ee]).slice(-10)+" 00000 n "):ve("0000000000 00000 n ")},Do=m.__private__.buildDocument=function(){wt(),Be(_e),nn.publish("buildDocument"),pc(),Co(),gl(),mi(),h!==null&&lu(),ma(),No();var O=Ie;return gc(),uu(),ve("startxref"),ve(""+O),ve("%%EOF"),Be(qe[Z]),_e.join(`
`)},vl=m.__private__.getBlob=function(O){return new Blob([ct(O)],{type:"application/pdf"})},Oo=m.output=m.__private__.output=Ci(function(O,ee){switch(typeof(ee=ee||{})=="string"?ee={filename:ee}:ee.filename=ee.filename||"generated.pdf",O){case void 0:return Do();case"save":m.save(ee.filename);break;case"arraybuffer":return ct(Do());case"blob":return vl(Do());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(vl(Do()))||void 0;br.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var me="",xe=Do();try{me=Hy(xe)}catch{me=Hy(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+ee.filename+";base64,"+me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var Te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ee.pdfObjectUrl&&(Te=ee.pdfObjectUrl,Ve="");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Te+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ee)+");<\/script></body></html>",pt=Gt.open();return pt!==null&&pt.document.write(it),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var w='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ee.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ee.filename+'" width="500px" height="400px" /></body></html>',F=Gt.open();if(F!==null){F.document.write(w);var $=this;F.document.documentElement.querySelector("#pdfViewer").onload=function(){F.document.title=ee.filename,F.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($.output("bloburl"))}}return F}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ee)+'"></iframe></body></html>',Ce=Gt.open();if(Ce!==null&&(Ce.document.write(le),Ce.document.title=ee.filename),Ce||typeof safari>"u")return Ce;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",ee);default:return null}}),to=function(O){return Array.isArray(Si)===!0&&Si.indexOf(O)>-1};switch(r){case"pt":ft=1;break;case"mm":ft=72/25.4;break;case"cm":ft=72/2.54;break;case"in":ft=72;break;case"px":ft=to("px_scaling")==1?.75:96/72;break;case"pc":case"em":ft=12;break;case"ex":ft=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ft=r}var tr=null;ge(),te();var ko=function(O){return h!==null?tr.encryptor(O,0):function(ee){return ee}},no=m.__private__.getPageInfo=m.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[O].objId,pageNumber:O,pageContext:Tt[O]}},Ft=m.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ee in Tt)if(Tt[ee].objId===O)break;return no(ee)},ro=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Tt[Z].objId,pageNumber:Z,pageContext:Tt[Z]}};m.addPage=function(){return Zo.apply(this,arguments),this},m.setPage=function(){return eo.apply(this,arguments),Be.call(this,qe[Z]),this},m.insertPage=function(O){return this.addPage(),this.movePage(Z,O),this},m.movePage=function(O,ee){var me,xe;if(O>ee){me=qe[O],xe=Tt[O];for(var Te=O;Te>ee;Te--)qe[Te]=qe[Te-1],Tt[Te]=Tt[Te-1];qe[ee]=me,Tt[ee]=xe,this.setPage(ee)}else if(O<ee){me=qe[O],xe=Tt[O];for(var Ve=O;Ve<ee;Ve++)qe[Ve]=qe[Ve+1],Tt[Ve]=Tt[Ve+1];qe[ee]=me,Tt[ee]=xe,this.setPage(ee)}return this},m.deletePage=function(){return Jo.apply(this,arguments),this},m.__private__.text=m.text=function(O,ee,me,xe,Te){var Ve,it,pt,w,F,$,le,Ce,Le,ot=(xe=xe||{}).scope||this;if(typeof O=="number"&&typeof ee=="number"&&(typeof me=="string"||Array.isArray(me))){var Ut=me;me=ee,ee=O,O=Ut}if(arguments[3]instanceof yt?(E("The transform parameter of text() with a Matrix value"),Le=Te):(pt=arguments[4],w=arguments[5],lr(le=arguments[3])==="object"&&le!==null||(typeof pt=="string"&&(w=pt,pt=null),typeof le=="string"&&(w=le,le=null),typeof le=="number"&&(pt=le,le=null),xe={flags:le,angle:pt,align:w})),isNaN(ee)||isNaN(me)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return ot;var dn="",Qt=!1,Un=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:hn,Qn=ot.internal.scaleFactor;function so(ln){return ln=ln.split("	").join(Array(xe.TabLen||9).join(" ")),Sn(ln,le)}function Br(ln){for(var cn,hr=ln.concat(),Fr=[],co=hr.length;co--;)typeof(cn=hr.shift())=="string"?Fr.push(cn):Array.isArray(ln)&&(cn.length===1||cn[1]===void 0&&cn[2]===void 0)?Fr.push(cn[0]):Fr.push([cn[0],cn[1],cn[2]]);return Fr}function ba(ln,cn){var hr;if(typeof ln=="string")hr=cn(ln)[0];else if(Array.isArray(ln)){for(var Fr,co,Dl=ln.concat(),Ol=[],Fs=Dl.length;Fs--;)typeof(Fr=Dl.shift())=="string"?Ol.push(cn(Fr)[0]):Array.isArray(Fr)&&typeof Fr[0]=="string"&&(co=cn(Fr[0],Fr[1],Fr[2]),Ol.push([co[0],co[1],co[2]]));hr=Ol}return hr}var ls=!1,_l=!0;if(typeof O=="string")ls=!0;else if(Array.isArray(O)){var pu=O.concat();it=[];for(var xc,ii=pu.length;ii--;)(typeof(xc=pu.shift())!="string"||Array.isArray(xc)&&typeof xc[0]!="string")&&(_l=!1);ls=_l}if(ls===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var Al=Ke/ot.internal.scaleFactor,bc=Al*(Un-1);switch(xe.baseline){case"bottom":me-=bc;break;case"top":me+=Al-bc;break;case"hanging":me+=Al-2*bc;break;case"middle":me+=Al/2-bc}if(($=xe.maxWidth||0)>0&&(typeof O=="string"?O=ot.splitTextToSize(O,$):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(ln,cn){return ln.concat(ot.splitTextToSize(cn,$))},[]))),Ve={text:O,x:ee,y:me,options:xe,mutex:{pdfEscape:Sn,activeFontKey:Dt,fonts:Kt,activeFontSize:Ke}},nn.publish("preProcessText",Ve),O=Ve.text,pt=(xe=Ve.options).angle,!(Le instanceof yt)&&pt&&typeof pt=="number"){pt*=Math.PI/180,xe.rotationDirection===0&&(pt=-pt),j===N.ADVANCED&&(pt=-pt);var wc=Math.cos(pt),gu=Math.sin(pt);Le=new yt(wc,gu,-gu,wc,0,0)}else pt&&pt instanceof yt&&(Le=pt);j!==N.ADVANCED||Le||(Le=$n),(F=xe.charSpace||Os)!==void 0&&(dn+=P(k(F))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ce=xe.horizontalScale)!==void 0&&(dn+=P(100*Ce)+` Tz
`),xe.lang;var wa=-1,jd=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,_f=ot.internal.getCurrentPageInfo().pageContext;switch(jd){case 0:case!1:case"fill":wa=0;break;case 1:case!0:case"stroke":wa=1;break;case 2:case"fillThenStroke":wa=2;break;case 3:case"invisible":wa=3;break;case 4:case"fillAndAddForClipping":wa=4;break;case 5:case"strokeAndAddPathForClipping":wa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":wa=6;break;case 7:case"addToPathForClipping":wa=7}var yh=_f.usedRenderingMode!==void 0?_f.usedRenderingMode:-1;wa!==-1?dn+=wa+` Tr
`:yh!==-1&&(dn+=`0 Tr
`),wa!==-1&&(_f.usedRenderingMode=wa),w=xe.align||"left";var lo,vi=Ke*Un,El=ot.internal.pageSize.getWidth(),Af=Kt[Dt];F=xe.charSpace||Os,$=xe.maxWidth||0,le=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var js=[],Sl=function(ln){return ot.getStringUnitWidth(ln,{font:Af,charSpace:F,fontSize:Ke,doKerning:!1})*Ke/Qn};if(Object.prototype.toString.call(O)==="[object Array]"){var ta;it=Br(O),w!=="left"&&(lo=it.map(Sl));var Ri,Cl=0;if(w==="right"){ee-=lo[0],O=[],ii=it.length;for(var _a=0;_a<ii;_a++)_a===0?(Ri=zi(ee),ta=Xr(me)):(Ri=k(Cl-lo[_a]),ta=-vi),O.push([it[_a],Ri,ta]),Cl=lo[_a]}else if(w==="center"){ee-=lo[0]/2,O=[],ii=it.length;for(var jo=0;jo<ii;jo++)jo===0?(Ri=zi(ee),ta=Xr(me)):(Ri=k((Cl-lo[jo])/2),ta=-vi),O.push([it[jo],Ri,ta]),Cl=lo[jo]}else if(w==="left"){O=[],ii=it.length;for(var cs=0;cs<ii;cs++)O.push(it[cs])}else if(w==="justify"&&Af.encoding==="Identity-H"){O=[],ii=it.length,$=$!==0?$:El;for(var Bo=0,Or=0;Or<ii;Or++)if(ta=Or===0?Xr(me):-vi,Ri=Or===0?zi(ee):Bo,Or<ii-1){var Fo=k(($-lo[Or])/(it[Or].split(" ").length-1)),Kr=it[Or].split(" ");O.push([Kr[0]+" ",Ri,ta]),Bo=0;for(var Aa=1;Aa<Kr.length;Aa++){var _c=(Sl(Kr[Aa-1]+" "+Kr[Aa])-Sl(Kr[Aa]))*Qn+Fo;Aa==Kr.length-1?O.push([Kr[Aa],_c,0]):O.push([Kr[Aa]+" ",_c,0]),Bo-=_c}}else O.push([it[Or],Ri,ta]);O.push(["",Bo,0])}else{if(w!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],ii=it.length,$=$!==0?$:El,Or=0;Or<ii;Or++)ta=Or===0?Xr(me):-vi,Ri=Or===0?zi(ee):0,Or<ii-1?js.push(P(k(($-lo[Or])/(it[Or].split(" ").length-1)))):js.push(0),O.push([it[Or],Ri,ta])}}var us=typeof xe.R2L=="boolean"?xe.R2L:nt;us===!0&&(O=ba(O,function(ln,cn,hr){return[ln.split("").reverse().join(""),cn,hr]})),Ve={text:O,x:ee,y:me,options:xe,mutex:{pdfEscape:Sn,activeFontKey:Dt,fonts:Kt,activeFontSize:Ke}},nn.publish("postProcessText",Ve),O=Ve.text,Qt=Ve.mutex.isHex||!1;var mu=Kt[Dt].encoding;mu!=="WinAnsiEncoding"&&mu!=="StandardEncoding"||(O=ba(O,function(ln,cn,hr){return[so(ln),cn,hr]})),it=Br(O),O=[];for(var Il,Tl,Rl,Ac=0,vu=1,Nl=Array.isArray(it[0])?vu:Ac,Bs="",Ec=function(ln,cn,hr){var Fr="";return hr instanceof yt?(hr=typeof xe.angle=="number"?Gn(hr,new yt(1,0,0,1,ln,cn)):Gn(new yt(1,0,0,1,ln,cn),hr),j===N.ADVANCED&&(hr=Gn(new yt(1,0,0,-1,0,0),hr)),Fr=hr.join(" ")+` Tm
`):Fr=P(ln)+" "+P(cn)+` Td
`,Fr},kr=0;kr<it.length;kr++){switch(Bs="",Nl){case vu:Rl=(Qt?"<":"(")+it[kr][0]+(Qt?">":")"),Il=parseFloat(it[kr][1]),Tl=parseFloat(it[kr][2]);break;case Ac:Rl=(Qt?"<":"(")+it[kr]+(Qt?">":")"),Il=zi(ee),Tl=Xr(me)}js!==void 0&&js[kr]!==void 0&&(Bs=js[kr]+` Tw
`),kr===0?O.push(Bs+Ec(Il,Tl,Le)+Rl):Nl===Ac?O.push(Bs+Rl):Nl===vu&&O.push(Bs+Ec(Il,Tl,Le)+Rl)}O=Nl===Ac?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var Ha=`BT
/`;return Ha+=Dt+" "+Ke+` Tf
`,Ha+=P(Ke*Un)+` TL
`,Ha+=Lo+`
`,Ha+=dn,Ha+=O,ve(Ha+="ET"),g[Dt]=!0,ot};var fu=m.__private__.clip=m.clip=function(O){return ve(O==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return fu("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ve("n"),this};var Fi=m.__private__.isValidStyle=function(O){var ee=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(ee=!0),ee};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(O){return Fi(O)&&(f=O),this};var va=m.__private__.getStyle=m.getStyle=function(O){var ee=f;switch(O){case"D":case"S":ee="S";break;case"F":ee="f";break;case"FD":case"DF":ee="B";break;case"f":case"f*":case"B":case"B*":ee=O}return ee},ea=m.close=function(){return ve("h"),this};m.stroke=function(){return ve("S"),this},m.fill=function(O){return io("f",O),this},m.fillEvenOdd=function(O){return io("f*",O),this},m.fillStroke=function(O){return io("B",O),this},m.fillStrokeEvenOdd=function(O){return io("B*",O),this};var io=function(O,ee){lr(ee)==="object"?Po(ee,O):ve(O)},ya=function(O){O===null||j===N.ADVANCED&&O===void 0||(O=va(O),ve(O))};function ts(O,ee,me,xe,Te){var Ve=new ld(ee||this.boundingBox,me||this.xStep,xe||this.yStep,this.gState,Te||this.matrix);Ve.stream=this.stream;var it=O+"$$"+this.cloneIndex+++"$$";return yr(it,Ve),Ve}var Po=function(O,ee){var me=pa[O.key],xe=on[me];if(xe instanceof Xf)ve("q"),ve(mc(ee)),xe.gState&&m.setGState(xe.gState),ve(O.matrix.toString()+" cm"),ve("/"+me+" sh"),ve("Q");else if(xe instanceof ld){var Te=new yt(1,0,0,-1,0,Vi());O.matrix&&(Te=Te.multiply(O.matrix||$n),me=ts.call(xe,O.key,O.boundingBox,O.xStep,O.yStep,Te).id),ve("q"),ve("/Pattern cs"),ve("/"+me+" scn"),xe.gState&&m.setGState(xe.gState),ve(ee),ve("Q")}},mc=function(O){switch(O){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xa=m.moveTo=function(O,ee){return ve(P(k(O))+" "+P(V(ee))+" m"),this},Ui=m.lineTo=function(O,ee){return ve(P(k(O))+" "+P(V(ee))+" l"),this},ao=m.curveTo=function(O,ee,me,xe,Te,Ve){return ve([P(k(O)),P(V(ee)),P(k(me)),P(V(xe)),P(k(Te)),P(V(Ve)),"c"].join(" ")),this};m.__private__.line=m.line=function(O,ee,me,xe,Te){if(isNaN(O)||isNaN(ee)||isNaN(me)||isNaN(xe)||!Fi(Te))throw new Error("Invalid arguments passed to jsPDF.line");return j===N.COMPAT?this.lines([[me-O,xe-ee]],O,ee,[1,1],Te||"S"):this.lines([[me-O,xe-ee]],O,ee,[1,1]).stroke()},m.__private__.lines=m.lines=function(O,ee,me,xe,Te,Ve){var it,pt,w,F,$,le,Ce,Le,ot,Ut,dn,Qt;if(typeof O=="number"&&(Qt=me,me=ee,ee=O,O=Qt),xe=xe||[1,1],Ve=Ve||!1,isNaN(ee)||isNaN(me)||!Array.isArray(O)||!Array.isArray(xe)||!Fi(Te)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xa(ee,me),it=xe[0],pt=xe[1],F=O.length,Ut=ee,dn=me,w=0;w<F;w++)($=O[w]).length===2?(Ut=$[0]*it+Ut,dn=$[1]*pt+dn,Ui(Ut,dn)):(le=$[0]*it+Ut,Ce=$[1]*pt+dn,Le=$[2]*it+Ut,ot=$[3]*pt+dn,Ut=$[4]*it+Ut,dn=$[5]*pt+dn,ao(le,Ce,Le,ot,Ut,dn));return Ve&&ea(),ya(Te),this},m.path=function(O){for(var ee=0;ee<O.length;ee++){var me=O[ee],xe=me.c;switch(me.op){case"m":xa(xe[0],xe[1]);break;case"l":Ui(xe[0],xe[1]);break;case"c":ao.apply(this,xe);break;case"h":ea()}}return this},m.__private__.rect=m.rect=function(O,ee,me,xe,Te){if(isNaN(O)||isNaN(ee)||isNaN(me)||isNaN(xe)||!Fi(Te))throw new Error("Invalid arguments passed to jsPDF.rect");return j===N.COMPAT&&(xe=-xe),ve([P(k(O)),P(V(ee)),P(k(me)),P(k(xe)),"re"].join(" ")),ya(Te),this},m.__private__.triangle=m.triangle=function(O,ee,me,xe,Te,Ve,it){if(isNaN(O)||isNaN(ee)||isNaN(me)||isNaN(xe)||isNaN(Te)||isNaN(Ve)||!Fi(it))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[me-O,xe-ee],[Te-me,Ve-xe],[O-Te,ee-Ve]],O,ee,[1,1],it,!0),this},m.__private__.roundedRect=m.roundedRect=function(O,ee,me,xe,Te,Ve,it){if(isNaN(O)||isNaN(ee)||isNaN(me)||isNaN(xe)||isNaN(Te)||isNaN(Ve)||!Fi(it))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return Te=Math.min(Te,.5*me),Ve=Math.min(Ve,.5*xe),this.lines([[me-2*Te,0],[Te*pt,0,Te,Ve-Ve*pt,Te,Ve],[0,xe-2*Ve],[0,Ve*pt,-Te*pt,Ve,-Te,Ve],[2*Te-me,0],[-Te*pt,0,-Te,-Ve*pt,-Te,-Ve],[0,2*Ve-xe],[0,-Ve*pt,Te*pt,-Ve,Te,-Ve]],O+Te,ee,[1,1],it,!0),this},m.__private__.ellipse=m.ellipse=function(O,ee,me,xe,Te){if(isNaN(O)||isNaN(ee)||isNaN(me)||isNaN(xe)||!Fi(Te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*me,it=4/3*(Math.SQRT2-1)*xe;return xa(O+me,ee),ao(O+me,ee-it,O+Ve,ee-xe,O,ee-xe),ao(O-Ve,ee-xe,O-me,ee-it,O-me,ee),ao(O-me,ee+it,O-Ve,ee+xe,O,ee+xe),ao(O+Ve,ee+xe,O+me,ee+it,O+me,ee),ya(Te),this},m.__private__.circle=m.circle=function(O,ee,me,xe){if(isNaN(O)||isNaN(ee)||isNaN(me)||!Fi(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,ee,me,me,xe)},m.setFont=function(O,ee,me){return me&&(ee=H(ee,me)),Dt=es(O,ee,{disableWarning:!1}),this};var Yr=m.__private__.getFont=m.getFont=function(){return Kt[es.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var O,ee,me={};for(O in En)if(En.hasOwnProperty(O))for(ee in me[O]=[],En[O])En[O].hasOwnProperty(ee)&&me[O].push(ee);return me},m.addFont=function(O,ee,me,xe,Te){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?Te=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(me=H(me,xe)),Te=Te||"Identity-H",Qo.call(this,O,ee,me,Te)};var hn,ns=n.lineWidth||.200025,oo=m.__private__.getLineWidth=m.getLineWidth=function(){return ns},vc=m.__private__.setLineWidth=m.setLineWidth=function(O){return ns=O,ve(P(k(O))+" w"),this};m.__private__.setLineDash=Wt.API.setLineDash=Wt.API.setLineDashPattern=function(O,ee){if(O=O||[],ee=ee||0,isNaN(ee)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(me){return P(k(me))}).join(" "),ee=P(k(ee)),ve("["+O+"] "+ee+" d"),this};var Ns=m.__private__.getLineHeight=m.getLineHeight=function(){return Ke*hn};m.__private__.getLineHeight=m.getLineHeight=function(){return Ke*hn};var Ds=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(hn=O),this},qa=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return hn};Ds(n.lineHeight);var zi=m.__private__.getHorizontalCoordinate=function(O){return k(O)},Xr=m.__private__.getVerticalCoordinate=function(O){return j===N.ADVANCED?O:Tt[Z].mediaBox.topRightY-Tt[Z].mediaBox.bottomLeftY-k(O)},hu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(O){return P(zi(O))},rs=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(O){return P(Xr(O))},Ti=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ti(Ti)},m.__private__.setStrokeColor=m.setDrawColor=function(O,ee,me,xe){return Ti=$r({ch1:O,ch2:ee,ch3:me,ch4:xe,pdfColorType:"draw",precision:2}),ve(Ti),this};var is=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ti(is)},m.__private__.setFillColor=m.setFillColor=function(O,ee,me,xe){return is=$r({ch1:O,ch2:ee,ch3:me,ch4:xe,pdfColorType:"fill",precision:2}),ve(is),this};var Lo=n.textColor||"0 g",yl=m.__private__.getTextColor=m.getTextColor=function(){return ti(Lo)};m.__private__.setTextColor=m.setTextColor=function(O,ee,me,xe){return Lo=$r({ch1:O,ch2:ee,ch3:me,ch4:xe,pdfColorType:"text",precision:3}),this};var Os=n.charSpace,xl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Os||0)};m.__private__.setCharSpace=m.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Os=O,this};var yc=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(O){var ee=m.CapJoinStyles[O];if(ee===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yc=ee,ve(ee+" J"),this};var ks=0;m.__private__.setLineJoin=m.setLineJoin=function(O){var ee=m.CapJoinStyles[O];if(ee===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ks=ee,ve(ee+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ve(P(k(O))+" M"),this},m.GState=Yg,m.setGState=function(O){(O=typeof O=="string"?In[jr[O]]:as(null,O)).equals(cr)||(ve("/"+O.id+" gs"),cr=O)};var as=function(O,ee){if(!O||!jr[O]){var me=!1;for(var xe in In)if(In.hasOwnProperty(xe)&&In[xe].equals(ee)){me=!0;break}if(me)ee=In[xe];else{var Te="GS"+(Object.keys(In).length+1).toString(10);In[Te]=ee,ee.id=Te}return O&&(jr[O]=ee.id),nn.publish("addGState",ee),ee}};m.addGState=function(O,ee){return as(O,ee),this},m.saveGraphicsState=function(){return ve("q"),pi.push({key:Dt,size:Ke,color:Lo}),this},m.restoreGraphicsState=function(){ve("Q");var O=pi.pop();return Dt=O.key,Ke=O.size,Lo=O.color,cr=null,this},m.setCurrentTransformationMatrix=function(O){return ve(O.toString()+" cm"),this},m.comment=function(O){return ve("#"+O),this};var Ps=function(O,ee){var me=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(Ve){isNaN(Ve)||(me=parseFloat(Ve))}});var xe=ee||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Ve){isNaN(Ve)||(xe=parseFloat(Ve))}});var Te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Te},set:function(Ve){Te=Ve.toString()}}),this},bl=function(O,ee,me,xe){Ps.call(this,O,ee),this.type="rect";var Te=me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Te},set:function(it){isNaN(it)||(Te=parseFloat(it))}});var Ve=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function(it){isNaN(it)||(Ve=parseFloat(it))}}),this},Ls=function(){this.page=yn,this.currentPage=Z,this.pages=qe.slice(0),this.pagesContext=Tt.slice(0),this.x=vn,this.y=Vt,this.matrix=Kn,this.width=ss(Z),this.height=Vi(Z),this.outputDestination=lt,this.id="",this.objectNumber=-1};Ls.prototype.restore=function(){yn=this.page,Z=this.currentPage,Tt=this.pagesContext,qe=this.pages,vn=this.x,Vt=this.y,Kn=this.matrix,Ms(Z,this.width),wl(Z,this.height),lt=this.outputDestination};var os=function(O,ee,me,xe,Te){Ua.push(new Ls),yn=Z=0,qe=[],vn=O,Vt=ee,Kn=Te,Ii([me,xe])},du=function(O){if(vr[O])Ua.pop().restore();else{var ee=new Ls,me="Xo"+(Object.keys(jn).length+1).toString(10);ee.id=me,vr[O]=me,jn[me]=ee,nn.publish("addFormObject",ee),Ua.pop().restore()}};for(var Mo in m.beginFormObject=function(O,ee,me,xe,Te){return os(O,ee,me,xe,Te),this},m.endFormObject=function(O){return du(O),this},m.doFormObject=function(O,ee){var me=jn[vr[O]];return ve("q"),ve(ee.toString()+" cm"),ve("/"+me.id+" Do"),ve("Q"),this},m.getFormObject=function(O){var ee=jn[vr[O]];return{x:ee.x,y:ee.y,width:ee.width,height:ee.height,matrix:ee.matrix}},m.save=function(O,ee){return O=O||"generated.pdf",(ee=ee||{}).returnPromise=ee.returnPromise||!1,ee.returnPromise===!1?(Yf(vl(Do()),O),typeof Yf.unload=="function"&&Gt.setTimeout&&setTimeout(Yf.unload,911),this):new Promise(function(me,xe){try{var Te=Yf(vl(Do()),O);typeof Yf.unload=="function"&&Gt.setTimeout&&setTimeout(Yf.unload,911),me(Te)}catch(Ve){xe(Ve.message)}})},Wt.API)Wt.API.hasOwnProperty(Mo)&&(Mo==="events"&&Wt.API.events.length?function(O,ee){var me,xe,Te;for(Te=ee.length-1;Te!==-1;Te--)me=ee[Te][0],xe=ee[Te][1],O.subscribe.apply(O,[me].concat(typeof xe=="function"?[xe]:xe))}(nn,Wt.API.events):m[Mo]=Wt.API[Mo]);var ss=m.getPageWidth=function(O){return(Tt[O=O||Z].mediaBox.topRightX-Tt[O].mediaBox.bottomLeftX)/ft},Ms=m.setPageWidth=function(O,ee){Tt[O].mediaBox.topRightX=ee*ft+Tt[O].mediaBox.bottomLeftX},Vi=m.getPageHeight=function(O){return(Tt[O=O||Z].mediaBox.topRightY-Tt[O].mediaBox.bottomLeftY)/ft},wl=m.setPageHeight=function(O,ee){Tt[O].mediaBox.topRightY=ee*ft+Tt[O].mediaBox.bottomLeftY};return m.internal={pdfEscape:Sn,getStyle:va,getFont:Yr,getFontSize:st,getCharSpace:xl,getTextColor:yl,getLineHeight:Ns,getLineHeightFactor:qa,getLineWidth:oo,write:ht,getHorizontalCoordinate:zi,getVerticalCoordinate:Xr,getCoordinateString:hu,getVerticalCoordinateString:rs,collections:{},newObject:Sr,newAdditionalObject:Is,newObjectDeferred:Dr,newObjectDeferredBegin:Gr,getFilters:ni,putStream:ur,events:nn,scaleFactor:ft,pageSize:{getWidth:function(){return ss(Z)},setWidth:function(O){Ms(Z,O)},getHeight:function(){return Vi(Z)},setHeight:function(O){wl(Z,O)}},encryptionOptions:h,encryption:tr,getEncryptor:ko,output:Oo,getNumberOfPages:Fn,pages:qe,out:ve,f2:L,f3:T,getPageInfo:no,getPageInfoByObjId:Ft,getCurrentPageInfo:ro,getPDFVersion:_,Point:Ps,Rectangle:bl,Matrix:yt,hasHotfix:to},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ss(Z)},set:function(O){Ms(Z,O)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Vi(Z)},set:function(O){wl(Z,O)},enumerable:!0,configurable:!0}),dc.call(m,Ne),Dt="F1",Zo(i,t),nn.publish("initialized"),m}nd.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},nd.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},nd.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},nd.prototype.processOwnerPassword=function(n,e){return Gy(Wy(e).substr(0,5),n)},nd.prototype.encryptor=function(n,e){var t=Wy(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Gy(t,r)}},Yg.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||lr(n)!==lr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Wt.API={events:[]},Wt.version="3.0.1";var ei=Wt.API,Ax=1,vh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Kh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(n){return n.toFixed(2)},$u=function(n){return n.toFixed(5)};ei.__acroform__={};var So=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},D4=function(n){return n*Ax},Wl=function(n){var e=new ES,t=It.internal.getHeight(n)||0,r=It.internal.getWidth(n)||0;return e.BBox=[0,0,Number(en(r)),Number(en(t))],e},LV=ei.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},MV=ei.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},jV=ei.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},fi=ei.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jV(n,e-1)},hi=ei.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return LV(n,e-1)},di=ei.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return MV(n,e-1)},BV=ei.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],o=n[2],s=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(a+s)||0,c.upperRight_X=t(i+o)||0,c.upperRight_Y=r(a)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},FV=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=$y(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+en(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Wl(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},$y=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var a=t,o=It.internal.getHeight(n)||0;o=o<0?-o:o;var s=It.internal.getWidth(n)||0;s=s<0?-s:s;var c=function(T,k,B){if(T+1<i.length){var V=k+" "+i[T+1][0];return Wp(V,n,B).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var f,h,p=Wp("3",n,a).height,g=n.multiline?o-a:(o-p)/2,m=g+=2,b=0,_=0,I=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Wp(e,n,a=12).width+", FieldWidth:"+s+`
`;break}for(var C="",N=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var q=!1;if(i[j].length!==1&&I!==i[j].length-1){if((p+2)*(N+2)+2>o)continue e;C+=i[j][I],q=!0,_=j,j--}else{C=(C+=i[j][I]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var Y=parseInt(j),H=c(Y,C,a),P=j>=i.length-1;if(H&&!P){C+=" ",I=0;continue}if(H||P){if(P)_=Y;else if(n.multiline&&(p+2)*(N+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(N+2)+2>o)continue e;_=Y}}for(var E="",R=b;R<=_;R++){var L=i[R];if(n.multiline){if(R===_){E+=L[I]+" ",I=(I+1)%L.length;continue}if(R===b){E+=L[L.length-1]+" ";continue}}E+=L[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,h=Wp(E,n,a).width,n.textAlign){case"right":f=s-h-2;break;case"center":f=(s-h)/2;break;case"left":default:f=2}e+=en(f)+" "+en(m)+` Td
`,e+="("+vh(E)+`) Tj
`,e+=-en(f)+` 0 Td
`,m=-(a+2),h=0,b=q?_:_+1,N++,C=""}break}return r.text=e,r.fontSize=a,r},Wp=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},UV={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zV=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},VV=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),lr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},qV=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(hl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(UV)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ax=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new SS,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&zV(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var s=r[o],c=[],f=s.Rect;if(s.Rect&&(s.Rect=BV(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=It.createDefaultAppearanceStream(s),lr(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(c=s.getKeyValueListForStream()),s.Rect=f,s.hasAppearanceStream&&!s.appearanceStreamContent){var h=FV(s);c.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(s.appearanceStreamContent){var p="";for(var g in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(g)){var m=s.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var b=m[o];typeof b=="function"&&(b=b.call(i,s)),p+="/"+o+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(i,s)),p+="/"+o+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:s.objId}),i.internal.out("endobj")}a&&VV(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},AS=ei.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),lr(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+vh(r(n[a].toString()))+")"):i+=n[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},jv=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+vh(r(n))+")"},Xl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xl.prototype.toString=function(){return this.objId+" 0 R"},Xl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Xl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:AS(i,this.objId,this.scope)}):i instanceof Xl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var ES=function(){Xl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};So(ES,Xl);var SS=function(){Xl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+vh(t(n))+")"}},set:function(t){n=t}})};So(SS,Xl);var hl=function n(){Xl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fi(e,3)},set:function(C){C?this.F=hi(e,3):this.F=di(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');t=C}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(C){r=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(C){r[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(C){r[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(C){r[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(C){r[3]=C}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Xg)return;a="FieldObject"+n.FieldNum++}var C=function(N){return N};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+vh(C(a))+")"},set:function(C){a=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(C){a=C}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(C){o=C}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(C){s=C}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Ax:f},set:function(C){f=C}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Xg||this instanceof rh))return jv(p,this.objId,this.scope)},set:function(C){C=C.toString(),p=C}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ki?g:jv(g,this.objId,this.scope)},set:function(C){C=C.toString(),g=this instanceof Ki?C:C.substr(0,1)==="("?Kh(C.substr(1,C.length-2)):Kh(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Kh(g.substr(1,g.length-1)):g},set:function(C){C=C.toString(),g=this instanceof Ki?"/"+C:C}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ki?m:jv(m,this.objId,this.scope)},set:function(C){C=C.toString(),m=this instanceof Ki?C:C.substr(0,1)==="("?Kh(C.substr(1,C.length-2)):Kh(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Kh(m.substr(1,m.length-1)):m},set:function(C){C=C.toString(),m=this instanceof Ki?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(C){C=!!C,_=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(C){b=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,1)},set:function(C){C?this.Ff=hi(this.Ff,1):this.Ff=di(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,2)},set:function(C){C?this.Ff=hi(this.Ff,2):this.Ff=di(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,3)},set:function(C){C?this.Ff=hi(this.Ff,3):this.Ff=di(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');I=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(I){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:I=2;break;case"center":case 1:I=1;break;case"left":case 0:default:I=0}}})};So(hl,Xl);var dd=function(){hl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return AS(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(a,o,s){s||(s=1);for(var c,f=[];c=o.exec(a);)f.push(c[s]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,18)},set:function(t){t?this.Ff=hi(this.Ff,18):this.Ff=di(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=hi(this.Ff,19):this.Ff=di(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,20)},set:function(t){t?(this.Ff=hi(this.Ff,20),e.sort()):this.Ff=di(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,22)},set:function(t){t?this.Ff=hi(this.Ff,22):this.Ff=di(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(t){t?this.Ff=hi(this.Ff,23):this.Ff=di(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,27)},set:function(t){t?this.Ff=hi(this.Ff,27):this.Ff=di(this.Ff,27)}}),this.hasAppearanceStream=!1};So(dd,hl);var pd=function(){dd.call(this),this.fontName="helvetica",this.combo=!1};So(pd,dd);var gd=function(){pd.call(this),this.combo=!0};So(gd,pd);var ug=function(){gd.call(this),this.edit=!0};So(ug,gd);var Ki=function(){hl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,15)},set:function(t){t?this.Ff=hi(this.Ff,15):this.Ff=di(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,16)},set:function(t){t?this.Ff=hi(this.Ff,16):this.Ff=di(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,17)},set:function(t){t?this.Ff=hi(this.Ff,17):this.Ff=di(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(t){t?this.Ff=hi(this.Ff,26):this.Ff=di(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+vh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){lr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};So(Ki,hl);var fg=function(){Ki.call(this),this.pushButton=!0};So(fg,Ki);var md=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};So(md,Ki);var Xg=function(){var n,e;hl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+vh(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){lr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=It.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};So(Xg,hl),md.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},md.prototype.createOption=function(n){var e=new Xg;return e.Parent=this,e.optionName=n,this.Kids.push(e),HV.call(this.scope,e),e};var hg=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=It.CheckBox.createAppearanceStream()};So(hg,Ki);var rh=function(){hl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,13)},set:function(e){e?this.Ff=hi(this.Ff,13):this.Ff=di(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,21)},set:function(e){e?this.Ff=hi(this.Ff,21):this.Ff=di(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(e){e?this.Ff=hi(this.Ff,23):this.Ff=di(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,24)},set:function(e){e?this.Ff=hi(this.Ff,24):this.Ff=di(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,25)},set:function(e){e?this.Ff=hi(this.Ff,25):this.Ff=di(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(e){e?this.Ff=hi(this.Ff,26):this.Ff=di(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};So(rh,hl);var dg=function(){rh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,14)},set:function(n){n?this.Ff=hi(this.Ff,14):this.Ff=di(this.Ff,14)}}),this.password=!0};So(dg,rh);var It={CheckBox:{createAppearanceStream:function(){return{N:{On:It.CheckBox.YesNormal},D:{On:It.CheckBox.YesPushDown,Off:It.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=$y(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+en(It.internal.getWidth(n))+" "+en(It.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+en(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Wl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=It.internal.getHeight(n),o=It.internal.getWidth(n),s=$y(n,n.caption);return i.push("1 g"),i.push("0 0 "+en(o)+" "+en(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+en(o-1)+" "+en(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+en(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(It.internal.getWidth(n))+" "+en(It.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:It.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=It.RadioButton.Circle.YesNormal,e.D[n]=It.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=It.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+$u(It.internal.getWidth(n)/2)+" "+$u(It.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*It.internal.Bezier_C).toFixed(5)),o=Number((r*It.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$u(It.internal.getWidth(n)/2)+" "+$u(It.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+$u(It.internal.getWidth(n)/2)+" "+$u(It.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*It.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$u(It.internal.getWidth(n)/2)+" "+$u(It.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:It.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=It.RadioButton.Cross.YesNormal,e.D[n]=It.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=It.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+en(It.internal.getWidth(n)-2)+" "+en(It.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),t.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),t.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),t.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=It.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+en(It.internal.getWidth(n))+" "+en(It.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+en(It.internal.getWidth(n)-2)+" "+en(It.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(en(t.x1.x)+" "+en(t.x1.y)+" m"),r.push(en(t.x2.x)+" "+en(t.x2.y)+" l"),r.push(en(t.x4.x)+" "+en(t.x4.y)+" m"),r.push(en(t.x3.x)+" "+en(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(It.internal.getWidth(n))+" "+en(It.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};It.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=It.internal.getWidth(n),t=It.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},It.internal.getWidth=function(n){var e=0;return lr(n)==="object"&&(e=D4(n.Rect[2])),e},It.internal.getHeight=function(n){var e=0;return lr(n)==="object"&&(e=D4(n.Rect[3])),e};var HV=ei.addField=function(n){if(qV(this,n),!(n instanceof hl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ei.AcroFormChoiceField=dd,ei.AcroFormListBox=pd,ei.AcroFormComboBox=gd,ei.AcroFormEditBox=ug,ei.AcroFormButton=Ki,ei.AcroFormPushButton=fg,ei.AcroFormRadioButton=md,ei.AcroFormCheckBox=hg,ei.AcroFormTextField=rh,ei.AcroFormPasswordField=dg,ei.AcroFormAppearance=It,ei.AcroForm={ChoiceField:dd,ListBox:pd,ComboBox:gd,EditBox:ug,Button:Ki,PushButton:fg,RadioButton:md,CheckBox:hg,TextField:rh,PasswordField:dg,Appearance:It},Wt.AcroForm={ChoiceField:dd,ListBox:pd,ComboBox:gd,EditBox:ug,Button:Ki,PushButton:fg,RadioButton:md,CheckBox:hg,TextField:rh,PasswordField:dg,Appearance:It};Wt.AcroForm;function CS(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(T,k){var B,V,Q,z,U,te=e;if((k=k||e)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(H(T))for(U in t)for(Q=t[U],B=0;B<Q.length;B+=1){for(z=!0,V=0;V<Q[B].length;V+=1)if(Q[B][V]!==void 0&&Q[B][V]!==T[V]){z=!1;break}if(z===!0){te=U;break}}else for(U in t)for(Q=t[U],B=0;B<Q.length;B+=1){for(z=!0,V=0;V<Q[B].length;V+=1)if(Q[B][V]!==void 0&&Q[B][V]!==T.charCodeAt(V)){z=!1;break}if(z===!0){te=U;break}}return te===e&&k!==e&&(te=k),te},i=function T(k){for(var B=this.internal.write,V=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var z=[];if(z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Image"}),z.push({key:"Width",value:k.width}),z.push({key:"Height",value:k.height}),k.colorSpace===I.INDEXED?z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(z.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===I.DEVICE_CMYK&&z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),z.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&z.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var U="",te=0,oe=k.transparency.length;te<oe;te++)U+=k.transparency[te]+" "+k.transparency[te]+" ";z.push({key:"Mask",value:"["+U+"]"})}k.sMask!==void 0&&z.push({key:"SMask",value:k.objectId+1+" 0 R"});var X=k.filter!==void 0?["/"+k.filter]:void 0;if(V({data:k.data,additionalKeyValues:z,alreadyAppliedFilters:X,objectId:k.objectId}),B("endobj"),"sMask"in k&&k.sMask!==void 0){var ge="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,G={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:ge,data:k.sMask};"filter"in k&&(G.filter=k.filter),T.call(this,G)}if(k.colorSpace===I.INDEXED){var Z=this.internal.newObject();V({data:E(new Uint8Array(k.palette)),objectId:Z}),B("endobj")}},a=function(){var T=this.internal.collections.addImage_images;for(var k in T)i.call(this,T[k])},o=function(){var T,k=this.internal.collections.addImage_images,B=this.internal.write;for(var V in k)B("/I"+(T=k[V]).index,T.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var T=this.internal.collections.addImage_images;return s.call(this),T},f=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(T){return typeof n["process"+T.toUpperCase()]=="function"},p=function(T){return lr(T)==="object"&&T.nodeType===1},g=function(T,k){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var B=""+T.getAttribute("src");if(B.indexOf("data:image/")===0)return X0(unescape(B).split("base64,").pop());var V=n.loadFile(B,!0);if(V!==void 0)return V}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var Q;switch(k){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;case"JPEG":case"JPG":default:Q="image/jpeg"}return X0(T.toDataURL(Q,1).split("base64,").pop())}},m=function(T){var k=this.internal.collections.addImage_images;if(k){for(var B in k)if(T===k[B].alias)return k[B]}},b=function(T,k,B){return T||k||(T=-96,k=-96),T<0&&(T=-1*B.width*72/T/this.internal.scaleFactor),k<0&&(k=-1*B.height*72/k/this.internal.scaleFactor),T===0&&(T=k*B.width/B.height),k===0&&(k=T*B.height/B.width),[T,k]},_=function(T,k,B,V,Q,z){var U=b.call(this,B,V,Q),te=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,X=c.call(this);if(B=U[0],V=U[1],X[Q.index]=Q,z){z*=Math.PI/180;var ge=Math.cos(z),G=Math.sin(z),Z=function(ae){return ae.toFixed(4)},ne=[Z(ge),Z(G),Z(-1*G),Z(ge),0,0,"cm"]}this.internal.write("q"),z?(this.internal.write([1,"0","0",1,te(T),oe(k+V),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([te(B),"0","0",te(V),"0","0","cm"].join(" "))):this.internal.write([te(B),"0","0",te(V),te(T),oe(k+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},I=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=n.__addimage__.sHashCode=function(T){var k,B,V=0;if(typeof T=="string")for(B=T.length,k=0;k<B;k++)V=(V<<5)-V+T.charCodeAt(k),V|=0;else if(H(T))for(B=T.byteLength/2,k=0;k<B;k++)V=(V<<5)-V+T[k],V|=0;return V},j=n.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var k=!0;return T.length===0&&(k=!1),T.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(k=!1),k},q=n.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var k=T.indexOf(",");return k<0?null:T.substring(0,k).trim().endsWith("base64")?T.substring(k+1):null},Y=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(T){return Y()&&T instanceof ArrayBuffer};var H=n.__addimage__.isArrayBufferView=function(T){return Y()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},P=n.__addimage__.binaryStringToUint8Array=function(T){for(var k=T.length,B=new Uint8Array(k),V=0;V<k;V++)B[V]=T.charCodeAt(V);return B},E=n.__addimage__.arrayBufferToBinaryString=function(T){for(var k="",B=H(T)?T:new Uint8Array(T),V=0;V<B.length;V+=8192)k+=String.fromCharCode.apply(null,B.subarray(V,V+8192));return k};n.addImage=function(){var T,k,B,V,Q,z,U,te,oe;if(typeof arguments[1]=="number"?(k=e,B=arguments[1],V=arguments[2],Q=arguments[3],z=arguments[4],U=arguments[5],te=arguments[6],oe=arguments[7]):(k=arguments[1],B=arguments[2],V=arguments[3],Q=arguments[4],z=arguments[5],U=arguments[6],te=arguments[7],oe=arguments[8]),lr(T=arguments[0])==="object"&&!p(T)&&"imageData"in T){var X=T;T=X.imageData,k=X.format||k||e,B=X.x||B||0,V=X.y||V||0,Q=X.w||X.width||Q,z=X.h||X.height||z,U=X.alias||U,te=X.compression||te,oe=X.rotation||X.angle||oe}var ge=this.internal.getFilters();if(te===void 0&&ge.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(B)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var G=R.call(this,T,k,U,te);return _.call(this,B,V,Q,z,G,oe),this};var R=function(T,k,B,V){var Q,z,U;if(typeof T=="string"&&r(T)===e){T=unescape(T);var te=L(T,!1);(te!==""||(te=n.loadFile(T,!0))!==void 0)&&(T=te)}if(p(T)&&(T=g(T,k)),k=r(T,k),!h(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((U=B)==null||U.length===0)&&(B=function(oe){return typeof oe=="string"||H(oe)?N(oe):H(oe.data)?N(oe.data):null}(T)),(Q=m.call(this,B))||(Y()&&(T instanceof Uint8Array||k==="RGBA"||(z=T,T=P(T))),Q=this["process"+k.toUpperCase()](T,f.call(this),B,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in n.image_compression?oe:C.NONE}(V),z)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},L=n.__addimage__.convertBase64ToBinaryString=function(T,k){k=typeof k!="boolean"||k;var B,V="";if(typeof T=="string"){var Q;B=(Q=q(T))!==null&&Q!==void 0?Q:T;try{V=X0(B)}catch(z){if(k)throw j(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};n.getImageProperties=function(T){var k,B,V="";if(p(T)&&(T=g(T)),typeof T=="string"&&r(T)===e&&((V=L(T,!1))===""&&(V=n.loadFile(T)||""),T=V),B=r(T),!h(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!Y()||T instanceof Uint8Array||(T=P(T)),!(k=this["process"+B.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=B,k}})(Wt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Wt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,h=!1,p=0;p<f.length&&!h;p++)switch((r=f[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var g=0;g<f.length;g++){r=f[g];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(_.objId),N=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+m(C(r.contents))+")",a+=" /Popup "+I.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(C(N))+") >>",_.content=a;var j=_.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(a+=" /Open true"),a+=" >>",I.content=a,this.internal.write(_.objId,"0 R",I.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var q=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(b(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var H=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+H+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,o){var s=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:c(t),y:f(r),w:c(t+i),h:f(r+a)},options:o,type:"link"})},n.textWithLink=function(t,r,i,a){var o,s,c=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var h=this.splitTextToSize(t,s).length;o=Math.ceil(f*h)}else s=c,o=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=c/2),a.align==="right"&&(r-=c),this.link(r,i-f,s,o,a),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Wt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},s=n.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&i.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(_){var I=0,C=t,N="",j=0;for(I=0;I<_.length;I+=1)C[_.charCodeAt(I)]!==void 0?(j++,typeof(C=C[_.charCodeAt(I)])=="number"&&(N+=String.fromCharCode(C),C=t,j=0),I===_.length-1&&(C=t,N+=_.charAt(I-(j-1)),I-=j-1,j=0)):(C=t,N+=_.charAt(I-j),I-=j,j=0);return N};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(_,I,C){return o(_)?a(_)===!1?-1:!f(_)||!o(I)&&!o(C)||!o(C)&&s(I)||s(_)&&!o(I)||s(_)&&c(I)||s(_)&&s(I)?0:h(_)&&o(I)&&!s(I)&&o(C)&&f(C)?3:s(_)||!o(C)?1:2:-1},m=function(_){var I=0,C=0,N=0,j="",q="",Y="",H=(_=_||"").split("\\s+"),P=[];for(I=0;I<H.length;I+=1){for(P.push(""),C=0;C<H[I].length;C+=1)j=H[I][C],q=H[I][C-1],Y=H[I][C+1],o(j)?(N=g(j,q,Y),P[I]+=N!==-1?String.fromCharCode(e[j.charCodeAt(0)][N]):j):P[I]+=j;P[I]=p(P[I])}return P.join(" ")},b=n.__arabicParser__.processArabic=n.processArabic=function(){var _,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(I)){var N=0;for(C=[],N=0;N<I.length;N+=1)Array.isArray(I[N])?C.push([m(I[N][0]),I[N][1],I[N][2]]):C.push([m(I[N])]);_=C}else _=m(I);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",b])}(Wt.API),Wt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(s){t=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Wt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(_){h=_}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(_){b=_}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,f){r.call(this);var h=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),g=f.scaleFactor||this.internal.scaleFactor,m=0,b=0,_=0,I=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var C=f.maxWidth;C>0?typeof c=="string"?c=this.splitTextToSize(c,C):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,q){return j.concat(I.splitTextToSize(q,C))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(_=this.getStringUnitWidth(c[N],{font:p})*h)&&(m=_);return m!==0&&(b=c.length),{w:m/=g,h:Math.max((b*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,m&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};n.table=function(c,f,h,p,g){if(r.call(this),!h)throw new Error("No data for PDF table.");var m,b,_,I,C=[],N=[],j=[],q={},Y={},H=[],P=[],E=(g=g||{}).autoSize||!1,R=g.printHeaders!==!1,L=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,T=g.margins||Object.assign({width:this.getPageWidth()},e),k=typeof g.padding=="number"?g.padding:3,B=g.headerBackgroundColor||"#c8c8c8",V=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=V,this.setFontSize(L),p==null)N=C=Object.keys(h[0]),j=C.map(function(){return"left"});else if(Array.isArray(p)&&lr(p[0])==="object")for(C=p.map(function(X){return X.name}),N=p.map(function(X){return X.prompt||X.name||""}),j=p.map(function(X){return X.align||"left"}),m=0;m<p.length;m+=1)Y[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(N=C=p,j=C.map(function(){return"left"}));if(E||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<C.length;m+=1){for(q[I=C[m]]=h.map(function(X){return X[I]}),this.setFont(void 0,"bold"),H.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=q[I],this.setFont(void 0,"normal"),_=0;_<b.length;_+=1)H.push(this.getTextDimensions(b[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[I]=Math.max.apply(null,H)+k+k,H=[]}if(R){var Q={};for(m=0;m<C.length;m+=1)Q[C[m]]={},Q[C[m]].text=N[m],Q[C[m]].align=j[m];var z=s.call(this,Q,Y);P=C.map(function(X){return new a(c,f,Y[X],z,Q[X].text,void 0,Q[X].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var U=p.reduce(function(X,ge){return X[ge.name]=ge.align,X},{});for(m=0;m<h.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:h[m]},this);var te=s.call(this,h[m],Y);for(_=0;_<C.length;_+=1){var oe=h[m][C[_]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:_,data:oe},this),o.call(this,new a(c,f,Y[C[_]],te,oe,m+2,U[C[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var s=function(c,f){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(m){var b=c[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,f[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+h+h},this).reduce(function(m,b){return Math.max(m,b)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(h.y=this.internal.__cell__.margins.top||0,g.push(h)),h.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(b)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Wt.API);var IS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},TS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Yy=CS(TS),RS=[100,200,300,400,500,600,700,800,900],WV=CS(RS);function Xy(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return IS[a=a||"normal"]?a:"normal"}(n.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(a){return typeof Yy[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function O4(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var GV={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},k4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function P4(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function $V(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},GV,t.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=Xy(e[s])).family]&&(a.family=i[a.family]),n.hasOwnProperty(a.family)){o=n[a.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+P4(a)+"' and default family '"+r+"'.");if(o=function(c,f){if(f[c])return f[c];var h=Yy[c],p=h<=Yy.normal?-1:1,g=O4(f,TS,h,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(a.stretch,o),o=function(c,f){if(f[c])return f[c];for(var h=IS[c],p=0;p<h.length;++p)if(f[h[p]])return f[h[p]];throw new Error("Could not find a matching font-style for "+c)}(a.style,o),!(o=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var h=WV[c],p=O4(f,RS,h,c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+P4(a)+"'.");return o}function L4(n){return n.trimLeft()}function YV(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function XV(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Gp,M4,j4,Bv=["times"];(function(n){var e,t,r,i,a,o,s,c,f,h=function(G){return G=G||{},this.isStrokeTransparent=G.isStrokeTransparent||!1,this.strokeOpacity=G.strokeOpacity||1,this.strokeStyle=G.strokeStyle||"#000000",this.fillStyle=G.fillStyle||"#000000",this.isFillTransparent=G.isFillTransparent||!1,this.fillOpacity=G.fillOpacity||1,this.font=G.font||"10px sans-serif",this.textBaseline=G.textBaseline||"alphabetic",this.textAlign=G.textAlign||"left",this.lineWidth=G.lineWidth||1,this.lineJoin=G.lineJoin||"miter",this.lineCap=G.lineCap||"butt",this.path=G.path||[],this.transform=G.transform!==void 0?G.transform.clone():new c,this.globalCompositeOperation=G.globalCompositeOperation||"normal",this.globalAlpha=G.globalAlpha||1,this.clip_path=G.clip_path||[],this.currentPoint=G.currentPoint||new o,this.miterLimit=G.miterLimit||10,this.lastPoint=G.lastPoint||new o,this.lineDashOffset=G.lineDashOffset||0,this.lineDash=G.lineDash||[],this.margin=G.margin||[0,0,0,0],this.prevPageLastElemOffset=G.prevPageLastElemOffset||0,this.ignoreClearRect=typeof G.ignoreClearRect!="boolean"||G.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,c=this.internal.Matrix,f=new h}]);var p=function(G){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Z=G;Object.defineProperty(this,"pdf",{get:function(){return Z}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(Be){ne=!!Be}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(Be){ae=!!Be}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(Be){isNaN(Be)||(pe=Be)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(Be){isNaN(Be)||(Ae=Be)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Be){var ve;typeof Be=="number"?ve=[Be,Be,Be,Be]:((ve=new Array(4))[0]=Be[0],ve[1]=Be.length>=2?Be[1]:ve[0],ve[2]=Be.length>=3?Be[2]:ve[0],ve[3]=Be.length>=4?Be[3]:ve[1]),f.margin=ve}});var _e=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _e},set:function(Be){_e=Be}});var Ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ie},set:function(Be){Ie=Be}});var $e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $e},set:function(Be){$e=Be}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Be){Be instanceof h&&(f=Be)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Be){f.path=Be}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(Be){qe=Be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Be){var ve;ve=g(Be),this.ctx.fillStyle=ve.style,this.ctx.isFillTransparent=ve.a===0,this.ctx.fillOpacity=ve.a,this.pdf.setFillColor(ve.r,ve.g,ve.b,{a:ve.a}),this.pdf.setTextColor(ve.r,ve.g,ve.b,{a:ve.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Be){var ve=g(Be);this.ctx.strokeStyle=ve.style,this.ctx.isStrokeTransparent=ve.a===0,this.ctx.strokeOpacity=ve.a,ve.a===0?this.pdf.setDrawColor(255,255,255):(ve.a,this.pdf.setDrawColor(ve.r,ve.g,ve.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Be){["butt","round","square"].indexOf(Be)!==-1&&(this.ctx.lineCap=Be,this.pdf.setLineCap(Be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Be){isNaN(Be)||(this.ctx.lineWidth=Be,this.pdf.setLineWidth(Be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Be){["bevel","round","miter"].indexOf(Be)!==-1&&(this.ctx.lineJoin=Be,this.pdf.setLineJoin(Be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Be){isNaN(Be)||(this.ctx.miterLimit=Be,this.pdf.setMiterLimit(Be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Be){this.ctx.textBaseline=Be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Be){["right","end","center","left","start"].indexOf(Be)!==-1&&(this.ctx.textAlign=Be)}});var at=null;function lt(Be,ve){if(at===null){var ht=function(ct){var Ne=[];return Object.keys(ct).forEach(function(Ke){ct[Ke].forEach(function(We){var st=null;switch(We){case"bold":st={family:Ke,weight:"bold"};break;case"italic":st={family:Ke,style:"italic"};break;case"bolditalic":st={family:Ke,weight:"bold",style:"italic"};break;case"":case"normal":st={family:Ke}}st!==null&&(st.ref={name:Ke,style:We},Ne.push(st))})}),Ne}(Be.getFontList());at=function(ct){for(var Ne={},Ke=0;Ke<ct.length;++Ke){var We=Xy(ct[Ke]),st=We.family,nt=We.stretch,ut=We.style,At=We.weight;Ne[st]=Ne[st]||{},Ne[st][nt]=Ne[st][nt]||{},Ne[st][nt][ut]=Ne[st][nt][ut]||{},Ne[st][nt][ut][At]=We}return Ne}(ht.concat(ve))}return at}var wt=null;Object.defineProperty(this,"fontFaces",{get:function(){return wt},set:function(Be){at=null,wt=Be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Be){var ve;if(this.ctx.font=Be,(ve=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Be))!==null){var ht=ve[1];ve[2];var ct=ve[3],Ne=ve[4];ve[5];var Ke=ve[6],We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(We==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var st=function(bt){var Dt,ft,vn=[],Vt=bt.trim();if(Vt==="")return Bv;if(Vt in k4)return[k4[Vt]];for(;Vt!=="";){switch(ft=null,Dt=(Vt=L4(Vt)).charAt(0)){case'"':case"'":ft=YV(Vt.substring(1),Dt);break;default:ft=XV(Vt)}if(ft===null||(vn.push(ft[0]),(Vt=L4(ft[1]))!==""&&Vt.charAt(0)!==","))return Bv;Vt=Vt.replace(/^,/,"")}return vn}(Ke);if(this.fontFaces){var nt=$V(lt(this.pdf,this.fontFaces),st.map(function(bt){return{family:bt,stretch:"normal",weight:ct,style:ht}}));this.pdf.setFont(nt.ref.name,nt.ref.style)}else{var ut="";(ct==="bold"||parseInt(ct,10)>=700||ht==="bold")&&(ut="bold"),ht==="italic"&&(ut+="italic"),ut.length===0&&(ut="normal");for(var At="",vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<st.length;_t++){if(this.pdf.internal.getFont(st[_t],ut,{noFallback:!0,disableWarning:!0})!==void 0){At=st[_t];break}if(ut==="bolditalic"&&this.pdf.internal.getFont(st[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=st[_t],ut="bold";else if(this.pdf.internal.getFont(st[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=st[_t],ut="normal";break}}if(At===""){for(var Nt=0;Nt<st.length;Nt++)if(vt[st[Nt]]){At=vt[st[Nt]];break}}At=At===""?"Times":At,this.pdf.setFont(At,ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Be){this.ctx.globalCompositeOperation=Be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Be){this.ctx.globalAlpha=Be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Be){this.ctx.lineDashOffset=Be,ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Be){this.ctx.lineDash=Be,ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Be){this.ctx.ignoreClearRect=!!Be}})};p.prototype.setLineDash=function(G){this.lineDash=G},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){q.call(this,"fill",!1)},p.prototype.stroke=function(){q.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(G,Z){if(isNaN(G)||isNaN(Z))throw br.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new o(G,Z));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(G,Z)},p.prototype.closePath=function(){var G=new o(0,0),Z=0;for(Z=this.path.length-1;Z!==-1;Z--)if(this.path[Z].type==="begin"&&lr(this.path[Z+1])==="object"&&typeof this.path[Z+1].x=="number"){G=new o(this.path[Z+1].x,this.path[Z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.lineTo=function(G,Z){if(isNaN(G)||isNaN(Z))throw br.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new o(G,Z));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),q.call(this,null,!0)},p.prototype.quadraticCurveTo=function(G,Z,ne,ae){if(isNaN(ne)||isNaN(ae)||isNaN(G)||isNaN(Z))throw br.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new o(ne,ae)),Ae=this.ctx.transform.applyToPoint(new o(G,Z));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},p.prototype.bezierCurveTo=function(G,Z,ne,ae,pe,Ae){if(isNaN(pe)||isNaN(Ae)||isNaN(G)||isNaN(Z)||isNaN(ne)||isNaN(ae))throw br.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _e=this.ctx.transform.applyToPoint(new o(pe,Ae)),Ie=this.ctx.transform.applyToPoint(new o(G,Z)),$e=this.ctx.transform.applyToPoint(new o(ne,ae));this.path.push({type:"bct",x1:Ie.x,y1:Ie.y,x2:$e.x,y2:$e.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new o(_e.x,_e.y)},p.prototype.arc=function(G,Z,ne,ae,pe,Ae){if(isNaN(G)||isNaN(Z)||isNaN(ne)||isNaN(ae)||isNaN(pe))throw br.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var _e=this.ctx.transform.applyToPoint(new o(G,Z));G=_e.x,Z=_e.y;var Ie=this.ctx.transform.applyToPoint(new o(0,ne)),$e=this.ctx.transform.applyToPoint(new o(0,0));ne=Math.sqrt(Math.pow(Ie.x-$e.x,2)+Math.pow(Ie.y-$e.y,2))}Math.abs(pe-ae)>=2*Math.PI&&(ae=0,pe=2*Math.PI),this.path.push({type:"arc",x:G,y:Z,radius:ne,startAngle:ae,endAngle:pe,counterclockwise:Ae})},p.prototype.arcTo=function(G,Z,ne,ae,pe){throw new Error("arcTo not implemented.")},p.prototype.rect=function(G,Z,ne,ae){if(isNaN(G)||isNaN(Z)||isNaN(ne)||isNaN(ae))throw br.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(G,Z),this.lineTo(G+ne,Z),this.lineTo(G+ne,Z+ae),this.lineTo(G,Z+ae),this.lineTo(G,Z),this.lineTo(G+ne,Z),this.lineTo(G,Z)},p.prototype.fillRect=function(G,Z,ne,ae){if(isNaN(G)||isNaN(Z)||isNaN(ne)||isNaN(ae))throw br.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(G,Z,ne,ae),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},p.prototype.strokeRect=function(G,Z,ne,ae){if(isNaN(G)||isNaN(Z)||isNaN(ne)||isNaN(ae))throw br.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(G,Z,ne,ae),this.stroke())},p.prototype.clearRect=function(G,Z,ne,ae){if(isNaN(G)||isNaN(Z)||isNaN(ne)||isNaN(ae))throw br.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(G,Z,ne,ae))},p.prototype.save=function(G){G=typeof G!="boolean"||G;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(Z),G){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},p.prototype.restore=function(G){G=typeof G!="boolean"||G;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(Z),G&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(G){var Z,ne,ae,pe;if(G.isCanvasGradient===!0&&(G=G.getColor()),!G)return{r:0,g:0,b:0,a:0,style:G};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(G))Z=0,ne=0,ae=0,pe=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(G);if(Ae!==null)Z=parseInt(Ae[1]),ne=parseInt(Ae[2]),ae=parseInt(Ae[3]),pe=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(G))!==null)Z=parseInt(Ae[1]),ne=parseInt(Ae[2]),ae=parseInt(Ae[3]),pe=parseFloat(Ae[4]);else{if(pe=1,typeof G=="string"&&G.charAt(0)!=="#"){var _e=new bS(G);G=_e.ok?_e.toHex():"#000000"}G.length===4?(Z=G.substring(1,2),Z+=Z,ne=G.substring(2,3),ne+=ne,ae=G.substring(3,4),ae+=ae):(Z=G.substring(1,3),ne=G.substring(3,5),ae=G.substring(5,7)),Z=parseInt(Z,16),ne=parseInt(ne,16),ae=parseInt(ae,16)}}return{r:Z,g:ne,b:ae,a:pe,style:G}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(G,Z,ne,ae){if(isNaN(Z)||isNaN(ne)||typeof G!="string")throw br.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!m.call(this)){var pe=te(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;k.call(this,{text:G,x:Z,y:ne,scale:Ae,angle:pe,align:this.textAlign,maxWidth:ae})}},p.prototype.strokeText=function(G,Z,ne,ae){if(isNaN(Z)||isNaN(ne)||typeof G!="string")throw br.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){ae=isNaN(ae)?void 0:ae;var pe=te(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;k.call(this,{text:G,x:Z,y:ne,scale:Ae,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:ae})}},p.prototype.measureText=function(G){if(typeof G!="string")throw br.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Z=this.pdf,ne=this.pdf.internal.scaleFactor,ae=Z.internal.getFontSize(),pe=Z.getStringUnitWidth(G)*ae/Z.internal.scaleFactor,Ae=function(_e){var Ie=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ie}}),this};return new Ae({width:pe*=Math.round(96*ne/72*1e4)/1e4})},p.prototype.scale=function(G,Z){if(isNaN(G)||isNaN(Z))throw br.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new c(G,0,0,Z,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},p.prototype.rotate=function(G){if(isNaN(G))throw br.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Z=new c(Math.cos(G),Math.sin(G),-Math.sin(G),Math.cos(G),0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.translate=function(G,Z){if(isNaN(G)||isNaN(Z))throw br.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new c(1,0,0,1,G,Z);this.ctx.transform=this.ctx.transform.multiply(ne)},p.prototype.transform=function(G,Z,ne,ae,pe,Ae){if(isNaN(G)||isNaN(Z)||isNaN(ne)||isNaN(ae)||isNaN(pe)||isNaN(Ae))throw br.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _e=new c(G,Z,ne,ae,pe,Ae);this.ctx.transform=this.ctx.transform.multiply(_e)},p.prototype.setTransform=function(G,Z,ne,ae,pe,Ae){G=isNaN(G)?1:G,Z=isNaN(Z)?0:Z,ne=isNaN(ne)?0:ne,ae=isNaN(ae)?1:ae,pe=isNaN(pe)?0:pe,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new c(G,Z,ne,ae,pe,Ae)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(G,Z,ne,ae,pe,Ae,_e,Ie,$e){var qe=this.pdf.getImageProperties(G),at=1,lt=1,wt=1,Be=1;ae!==void 0&&Ie!==void 0&&(wt=Ie/ae,Be=$e/pe,at=qe.width/ae*Ie/ae,lt=qe.height/pe*$e/pe),Ae===void 0&&(Ae=Z,_e=ne,Z=0,ne=0),ae!==void 0&&Ie===void 0&&(Ie=ae,$e=pe),ae===void 0&&Ie===void 0&&(Ie=qe.width,$e=qe.height);for(var ve,ht=this.ctx.transform.decompose(),ct=te(ht.rotate.shx),Ne=new c,Ke=(Ne=(Ne=(Ne=Ne.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale)).applyToRectangle(new s(Ae-Z*wt,_e-ne*Be,ae*at,pe*lt)),We=I.call(this,Ke),st=[],nt=0;nt<We.length;nt+=1)st.indexOf(We[nt])===-1&&st.push(We[nt]);if(j(st),this.autoPaging)for(var ut=st[0],At=st[st.length-1],vt=ut;vt<At+1;vt++){this.pdf.setPage(vt);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=vt===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=vt===1?0:bt+(vt-2)*Dt;if(this.ctx.clip_path.length!==0){var vn=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ve,this.posX+this.margin[3],-ft+Nt+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=vn}var Vt=JSON.parse(JSON.stringify(Ke));Vt=N([Vt],this.posX+this.margin[3],-ft+Nt+this.ctx.prevPageLastElemOffset)[0];var Kn=(vt>ut||vt<At)&&_.call(this);Kn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Dt,null).clip().discardPath()),this.pdf.addImage(G,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,ct),Kn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(G,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,ct)};var I=function(G,Z,ne){var ae=[];Z=Z||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(G.type){default:case"mt":case"lt":ae.push(Math.floor((G.y+pe)/ne)+1);break;case"arc":ae.push(Math.floor((G.y+pe-G.radius)/ne)+1),ae.push(Math.floor((G.y+pe+G.radius)/ne)+1);break;case"qct":var Ae=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x,G.y);ae.push(Math.floor((Ae.y+pe)/ne)+1),ae.push(Math.floor((Ae.y+Ae.h+pe)/ne)+1);break;case"bct":var _e=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x2,G.y2,G.x,G.y);ae.push(Math.floor((_e.y+pe)/ne)+1),ae.push(Math.floor((_e.y+_e.h+pe)/ne)+1);break;case"rect":ae.push(Math.floor((G.y+pe)/ne)+1),ae.push(Math.floor((G.y+G.h+pe)/ne)+1)}for(var Ie=0;Ie<ae.length;Ie+=1)for(;this.pdf.internal.getNumberOfPages()<ae[Ie];)C.call(this);return ae},C=function(){var G=this.fillStyle,Z=this.strokeStyle,ne=this.font,ae=this.lineCap,pe=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=G,this.strokeStyle=Z,this.font=ne,this.lineCap=ae,this.lineWidth=pe,this.lineJoin=Ae},N=function(G,Z,ne){for(var ae=0;ae<G.length;ae++)switch(G[ae].type){case"bct":G[ae].x2+=Z,G[ae].y2+=ne;case"qct":G[ae].x1+=Z,G[ae].y1+=ne;case"mt":case"lt":case"arc":default:G[ae].x+=Z,G[ae].y+=ne}return G},j=function(G){return G.sort(function(Z,ne){return Z-ne})},q=function(G,Z){for(var ne,ae,pe=this.fillStyle,Ae=this.strokeStyle,_e=this.lineCap,Ie=this.lineWidth,$e=Math.abs(Ie*this.ctx.transform.scaleX),qe=this.lineJoin,at=JSON.parse(JSON.stringify(this.path)),lt=JSON.parse(JSON.stringify(this.path)),wt=[],Be=0;Be<lt.length;Be++)if(lt[Be].x!==void 0)for(var ve=I.call(this,lt[Be]),ht=0;ht<ve.length;ht+=1)wt.indexOf(ve[ht])===-1&&wt.push(ve[ht]);for(var ct=0;ct<wt.length;ct++)for(;this.pdf.internal.getNumberOfPages()<wt[ct];)C.call(this);if(j(wt),this.autoPaging)for(var Ne=wt[0],Ke=wt[wt.length-1],We=Ne;We<Ke+1;We++){this.pdf.setPage(We),this.fillStyle=pe,this.strokeStyle=Ae,this.lineCap=_e,this.lineWidth=$e,this.lineJoin=qe;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=We===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vt=We===1?0:ut+(We-2)*At;if(this.ctx.clip_path.length!==0){var _t=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ne,this.posX+this.margin[3],-vt+nt+this.ctx.prevPageLastElemOffset),Y.call(this,G,!0),this.path=_t}if(ae=JSON.parse(JSON.stringify(at)),this.path=N(ae,this.posX+this.margin[3],-vt+nt+this.ctx.prevPageLastElemOffset),Z===!1||We===0){var Nt=(We>Ne||We<Ke)&&_.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,At,null).clip().discardPath()),Y.call(this,G,Z),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ie}else this.lineWidth=$e,Y.call(this,G,Z),this.lineWidth=Ie;this.path=at},Y=function(G,Z){if((G!=="stroke"||Z||!b.call(this))&&(G==="stroke"||Z||!m.call(this))){for(var ne,ae,pe=[],Ae=this.path,_e=0;_e<Ae.length;_e++){var Ie=Ae[_e];switch(Ie.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:Ie,deltas:[],abs:[]});break;case"lt":var $e=pe.length;if(Ae[_e-1]&&!isNaN(Ae[_e-1].x)&&(ne=[Ie.x-Ae[_e-1].x,Ie.y-Ae[_e-1].y],$e>0)){for(;$e>=0;$e--)if(pe[$e-1].close!==!0&&pe[$e-1].begin!==!0){pe[$e-1].deltas.push(ne),pe[$e-1].abs.push(Ie);break}}break;case"bct":ne=[Ie.x1-Ae[_e-1].x,Ie.y1-Ae[_e-1].y,Ie.x2-Ae[_e-1].x,Ie.y2-Ae[_e-1].y,Ie.x-Ae[_e-1].x,Ie.y-Ae[_e-1].y],pe[pe.length-1].deltas.push(ne);break;case"qct":var qe=Ae[_e-1].x+2/3*(Ie.x1-Ae[_e-1].x),at=Ae[_e-1].y+2/3*(Ie.y1-Ae[_e-1].y),lt=Ie.x+2/3*(Ie.x1-Ie.x),wt=Ie.y+2/3*(Ie.y1-Ie.y),Be=Ie.x,ve=Ie.y;ne=[qe-Ae[_e-1].x,at-Ae[_e-1].y,lt-Ae[_e-1].x,wt-Ae[_e-1].y,Be-Ae[_e-1].x,ve-Ae[_e-1].y],pe[pe.length-1].deltas.push(ne);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(Ie)}}ae=Z?null:G==="stroke"?"stroke":"fill";for(var ht=!1,ct=0;ct<pe.length;ct++)if(pe[ct].arc)for(var Ne=pe[ct].abs,Ke=0;Ke<Ne.length;Ke++){var We=Ne[Ke];We.type==="arc"?E.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,Z,!ht):B.call(this,We.x,We.y),ht=!0}else if(pe[ct].close===!0)this.pdf.internal.out("h"),ht=!1;else if(pe[ct].begin!==!0){var st=pe[ct].start.x,nt=pe[ct].start.y;V.call(this,pe[ct].deltas,st,nt),ht=!0}ae&&R.call(this,ae),Z&&L.call(this)}},H=function(G){var Z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=Z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return G-ne;case"top":return G+Z-ne;case"hanging":return G+Z-2*ne;case"middle":return G+Z/2-ne;case"ideographic":return G;case"alphabetic":default:return G}},P=function(G){return G+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var G=function(){};return G.colorStops=[],G.addColorStop=function(Z,ne){this.colorStops.push([Z,ne])},G.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},G.isCanvasGradient=!0,G},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(G,Z,ne,ae,pe,Ae,_e,Ie,$e){for(var qe=z.call(this,ne,ae,pe,Ae),at=0;at<qe.length;at++){var lt=qe[at];at===0&&($e?T.call(this,lt.x1+G,lt.y1+Z):B.call(this,lt.x1+G,lt.y1+Z)),Q.call(this,G,Z,lt.x2,lt.y2,lt.x3,lt.y3,lt.x4,lt.y4)}Ie?L.call(this):R.call(this,_e)},R=function(G){switch(G){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(G,Z){this.pdf.internal.out(t(G)+" "+r(Z)+" m")},k=function(G){var Z;switch(G.align){case"right":case"end":Z="right";break;case"center":Z="center";break;case"left":case"start":default:Z="left"}var ne=this.pdf.getTextDimensions(G.text),ae=H.call(this,G.y),pe=P.call(this,ae)-ne.h,Ae=this.ctx.transform.applyToPoint(new o(G.x,ae)),_e=this.ctx.transform.decompose(),Ie=new c;Ie=(Ie=(Ie=Ie.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var $e,qe,at,lt=this.ctx.transform.applyToRectangle(new s(G.x,ae,ne.w,ne.h)),wt=Ie.applyToRectangle(new s(G.x,pe,ne.w,ne.h)),Be=I.call(this,wt),ve=[],ht=0;ht<Be.length;ht+=1)ve.indexOf(Be[ht])===-1&&ve.push(Be[ht]);if(j(ve),this.autoPaging)for(var ct=ve[0],Ne=ve[ve.length-1],Ke=ct;Ke<Ne+1;Ke++){this.pdf.setPage(Ke);var We=Ke===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[2],ut=nt-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],vt=At-this.margin[3],_t=Ke===1?0:st+(Ke-2)*ut;if(this.ctx.clip_path.length!==0){var Nt=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N($e,this.posX+this.margin[3],-1*_t+We),Y.call(this,"fill",!0),this.path=Nt}var bt=N([JSON.parse(JSON.stringify(wt))],this.posX+this.margin[3],-_t+We+this.ctx.prevPageLastElemOffset)[0];G.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*G.scale),at=this.lineWidth,this.lineWidth=at*G.scale);var Dt=this.autoPaging!=="text";if(Dt||bt.y+bt.h<=nt){if(Dt||bt.y>=We&&bt.x<=At){var ft=Dt?G.text:this.pdf.splitTextToSize(G.text,G.maxWidth||At-bt.x)[0],vn=N([JSON.parse(JSON.stringify(lt))],this.posX+this.margin[3],-_t+We+this.ctx.prevPageLastElemOffset)[0],Vt=Dt&&(Ke>ct||Ke<Ne)&&_.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,ut,null).clip().discardPath()),this.pdf.text(ft,vn.x,vn.y,{angle:G.angle,align:Z,renderingMode:G.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else bt.y<nt&&(this.ctx.prevPageLastElemOffset+=nt-bt.y);G.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=at)}else G.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*G.scale),at=this.lineWidth,this.lineWidth=at*G.scale),this.pdf.text(G.text,Ae.x+this.posX,Ae.y+this.posY,{angle:G.angle,align:Z,renderingMode:G.renderingMode,maxWidth:G.maxWidth}),G.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=at)},B=function(G,Z,ne,ae){ne=ne||0,ae=ae||0,this.pdf.internal.out(t(G+ne)+" "+r(Z+ae)+" l")},V=function(G,Z,ne){return this.pdf.lines(G,Z,ne,null,null)},Q=function(G,Z,ne,ae,pe,Ae,_e,Ie){this.pdf.internal.out([e(i(ne+G)),e(a(ae+Z)),e(i(pe+G)),e(a(Ae+Z)),e(i(_e+G)),e(a(Ie+Z)),"c"].join(" "))},z=function(G,Z,ne,ae){for(var pe=2*Math.PI,Ae=Math.PI/2;Z>ne;)Z-=pe;var _e=Math.abs(ne-Z);_e<pe&&ae&&(_e=pe-_e);for(var Ie=[],$e=ae?-1:1,qe=Z;_e>1e-5;){var at=qe+$e*Math.min(_e,Ae);Ie.push(U.call(this,G,qe,at)),_e-=Math.abs(at-qe),qe=at}return Ie},U=function(G,Z,ne){var ae=(ne-Z)/2,pe=G*Math.cos(ae),Ae=G*Math.sin(ae),_e=pe,Ie=-Ae,$e=_e*_e+Ie*Ie,qe=$e+_e*pe+Ie*Ae,at=4/3*(Math.sqrt(2*$e*qe)-qe)/(_e*Ae-Ie*pe),lt=_e-at*Ie,wt=Ie+at*_e,Be=lt,ve=-wt,ht=ae+Z,ct=Math.cos(ht),Ne=Math.sin(ht);return{x1:G*Math.cos(Z),y1:G*Math.sin(Z),x2:lt*ct-wt*Ne,y2:lt*Ne+wt*ct,x3:Be*ct-ve*Ne,y3:Be*Ne+ve*ct,x4:G*Math.cos(ne),y4:G*Math.sin(ne)}},te=function(G){return 180*G/Math.PI},oe=function(G,Z,ne,ae,pe,Ae){var _e=G+.5*(ne-G),Ie=Z+.5*(ae-Z),$e=pe+.5*(ne-pe),qe=Ae+.5*(ae-Ae),at=Math.min(G,pe,_e,$e),lt=Math.max(G,pe,_e,$e),wt=Math.min(Z,Ae,Ie,qe),Be=Math.max(Z,Ae,Ie,qe);return new s(at,wt,lt-at,Be-wt)},X=function(G,Z,ne,ae,pe,Ae,_e,Ie){var $e,qe,at,lt,wt,Be,ve,ht,ct,Ne,Ke,We,st,nt,ut=ne-G,At=ae-Z,vt=pe-ne,_t=Ae-ae,Nt=_e-pe,bt=Ie-Ae;for(qe=0;qe<41;qe++)ct=(ve=(at=G+($e=qe/40)*ut)+$e*((wt=ne+$e*vt)-at))+$e*(wt+$e*(pe+$e*Nt-wt)-ve),Ne=(ht=(lt=Z+$e*At)+$e*((Be=ae+$e*_t)-lt))+$e*(Be+$e*(Ae+$e*bt-Be)-ht),qe==0?(Ke=ct,We=Ne,st=ct,nt=Ne):(Ke=Math.min(Ke,ct),We=Math.min(We,Ne),st=Math.max(st,ct),nt=Math.max(nt,Ne));return new s(Math.round(Ke),Math.round(We),Math.round(st-Ke),Math.round(nt-We))},ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var G,Z,ne=(G=this.ctx.lineDash,Z=this.ctx.lineDashOffset,JSON.stringify({lineDash:G,lineDashOffset:Z}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(Wt.API),function(n){var e=function(a){var o,s,c,f,h,p,g,m,b,_;for(s=[],c=0,f=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;f>c;c+=4)(h=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(p=(h=((h=((h=((h=(h-(_=h%85))/85)-(b=h%85))/85)-(m=h%85))/85)-(g=h%85))/85)%85,s.push(p+33,g+33,m+33,b+33,_+33)):s.push(122);return function(I,C){for(var N=C;N>0;N--)I.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},t=function(a){var o,s,c,f,h,p=String,g="length",m=255,b="charCodeAt",_="slice",I="replace";for(a[_](-2),a=a[_](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),c=[],f=0,h=(a+=o="uuuuu"[_](a[g]%5||5))[g];h>f;f+=5)s=52200625*(a[b](f)-33)+614125*(a[b](f+1)-33)+7225*(a[b](f+2)-33)+85*(a[b](f+3)-33)+(a[b](f+4)-33),c.push(m&s>>24,m&s>>16,m&s>>8,m&s);return function(C,N){for(var j=N;j>0;j--)C.pop()}(c,o[g]),p.fromCharCode.apply(p,c)},r=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",c=0;c<a.length;c+=2)s+=String.fromCharCode("0x"+(a[c]+a[c+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=qy(o)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};n.processDataByFilters=function(a,o){var s=0,c=a||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(Wt.API),function(n){n.loadFile=function(e,t,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(c,f,h){var p=new XMLHttpRequest,g=0,m=function(b){var _=b.length,I=[],C=String.fromCharCode;for(g=0;g<_;g+=1)I.push(C(255&b.charCodeAt(g)));return I.join("")};if(p.open("GET",c,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)}(i,a,o)}catch{}return s}(e,t,r)},n.loadImageFile=n.loadFile}(Wt.API),function(n){function e(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):By(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):By(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var s=lr(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var c=document.createElement(o);for(var f in s.className&&(c.className=s.className),s.innerHTML&&s.dompurify&&(c.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)c.style[f]=s.style[f];return c},a=function o(s){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function c(f,h){for(var p=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),g=f.firstChild;g;g=g.nextSibling)h!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(c(g,h));return f.nodeType===1&&(f.nodeName==="CANVAS"?(p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(p.value=f.value),p.addEventListener("load",function(){p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,s(this.prop.container,c)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var c=this.opt.jsPDF,f=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var m=f[g],b=m.src.find(function(_){return _.format==="truetype"});b&&c.addFont(b.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),s(this.prop.container,p)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var s=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(o=o||Wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,c,f){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,c,f){return this.setProgress(o?this.progress.val+o:null,s||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(o,s){var c=this;return this.thenCore(o,s,function(f,h){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,f),p}).then(f,h).then(function(p){return c.updateProgress(1),p})})},a.prototype.thenCore=function(o,s,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),h=c.call(f,o,s);return a.convert(h,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(c){s=s.thenCore(c)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Wt.getPageSize=function(o,s,c){if(lr(o)==="object"){var f=o;o=f.orientation,s=f.unit||s,c=f.format||c}s=s||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+s}var m,b=0,_=0;if(g.hasOwnProperty(p))b=g[p][1]/h,_=g[p][0]/h;else try{b=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",_>b&&(m=_,_=b,b=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>_&&(m=_,_=b,b=m)}return{width:_,height:b,unit:s,k:h,orientation:o}},n.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(Xy):null;var c=new a(s);return s.worker?c:c.from(o).doCallback()}}(Wt.API),Wt.API.addJS=function(n){return j4=n,this.internal.events.subscribe("postPutResources",function(){Gp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Gp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),M4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+j4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Gp!==void 0&&M4!==void 0&&this.internal.out("/Names <</JavaScript "+Gp+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=r.exec(o);if(s!=null){var c=s[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,h=[];for(a=0;a<f;a++){var p=t.internal.newObject();h.push(p);var g=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<h.length;a++)t.internal.write("(page_"+(a+1)+")"+h[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var c=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(Wt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,o,s){var c,f=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),b=p.length,_={width:0,height:0,numcomponents:1},I=4;I<b;I+=2){if(I+=m,e.indexOf(p.charCodeAt(I+1))!==-1){g=256*p.charCodeAt(I+5)+p.charCodeAt(I+6),_={width:256*p.charCodeAt(I+7)+p.charCodeAt(I+8),height:g,numcomponents:p.charCodeAt(I+9)};break}m=256*p.charCodeAt(I+2)+p.charCodeAt(I+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}h={data:t,width:c.width,height:c.height,colorSpace:s,bitsPerComponent:8,filter:f,index:r,alias:i}}return h}}(Wt.API);var Qh,$p,B4,F4,U4,KV=function(){var n,e,t;function r(a){var o,s,c,f,h,p,g,m,b,_,I,C,N,j;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),b=(function(){var q,Y;for(Y=[],q=0;q<4;++q)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),f=this.readUInt16()||100,p.delay=1e3*h/f,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),a=(p!=null?p.data:void 0)||this.imgData,C=0;0<=o?C<o:C>o;0<=o?++C:--C)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(N=0;0<=_?N<_:N>_;0<=_?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(I=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,I.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,I.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),c=0,f=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function h(p,g,m,b){var _,I,C,N,j,q,Y,H,P,E,R,L,T,k,B,V,Q,z,U,te,oe,X=Math.ceil((f.width-p)/m),ge=Math.ceil((f.height-g)/b),G=f.width==X&&f.height==ge;for(k=o*X,L=G?s:new Uint8Array(k*ge),q=a.length,T=0,I=0;T<ge&&c<q;){switch(a[c++]){case 0:for(N=Q=0;Q<k;N=Q+=1)L[I++]=a[c++];break;case 1:for(N=z=0;z<k;N=z+=1)_=a[c++],j=N<o?0:L[I-o],L[I++]=(_+j)%256;break;case 2:for(N=U=0;U<k;N=U+=1)_=a[c++],C=(N-N%o)/o,B=T&&L[(T-1)*k+C*o+N%o],L[I++]=(B+_)%256;break;case 3:for(N=te=0;te<k;N=te+=1)_=a[c++],C=(N-N%o)/o,j=N<o?0:L[I-o],B=T&&L[(T-1)*k+C*o+N%o],L[I++]=(_+Math.floor((j+B)/2))%256;break;case 4:for(N=oe=0;oe<k;N=oe+=1)_=a[c++],C=(N-N%o)/o,j=N<o?0:L[I-o],T===0?B=V=0:(B=L[(T-1)*k+C*o+N%o],V=C&&L[(T-1)*k+(C-1)*o+N%o]),Y=j+B-V,H=Math.abs(Y-j),E=Math.abs(Y-B),R=Math.abs(Y-V),P=H<=E&&H<=R?j:E<=R?B:V,L[I++]=(_+P)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!G){var Z=((g+T*b)*f.width+p)*o,ne=T*k;for(N=0;N<X;N+=1){for(var ae=0;ae<o;ae+=1)s[Z++]=L[ne++];Z+=(m-1)*o}}T++}}return a=TV(a),f.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),s},r.prototype.decodePalette=function(){var a,o,s,c,f,h,p,g,m;for(s=this.palette,h=this.transparency.indexed||[],f=new Uint8Array((h.length||0)+s.length),c=0,a=0,o=p=0,g=s.length;p<g;o=p+=3)f[c++]=s[o],f[c++]=s[o+1],f[c++]=s[o+2],f[c++]=(m=h[a++])!=null?m:255;return f},r.prototype.copyToImageData=function(a,o){var s,c,f,h,p,g,m,b,_,I,C;if(c=this.colors,_=null,s=this.hasAlphaChannel,this.palette.length&&(_=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),c=4,s=!0),b=(f=a.data||a).length,p=_||o,h=g=0,c===1)for(;h<b;)m=_?4*o[h/4]:g,I=p[m++],f[h++]=I,f[h++]=I,f[h++]=I,f[h++]=s?p[m++]:255,g=m;else for(;h<b;)m=_?4*o[h/4]:g,f[h++]=p[m++],f[h++]=p[m++],f[h++]=p[m++],f[h++]=s?p[m++]:255,g=m},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Gt)==="[object Window]"){try{e=Gt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(a){var o;if(i()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var o,s,c,f,h,p,g,m;if(this.animation){for(m=[],s=h=0,p=(g=this.animation.frames).length;h<p;s=++h)o=g[s],c=a.createImageData(o.width,o.height),f=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,f),o.imageData=c,m.push(o.image=n(c));return m}},r.prototype.renderFrame=function(a,o){var s,c,f;return s=(c=this.animation.frames)[o],f=c[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?a.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&a.putImageData(f.imageData,f.xOffset,f.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(a){var o,s,c,f,h,p,g=this;return s=0,p=this.animation,f=p.numFrames,c=p.frames,h=p.numPlays,(o=function(){var m,b;if(m=s++%f,b=c[m],g.renderFrame(a,m),f>1&&s/f<h)return g.animation._timeout=setTimeout(o,b.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function QV(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var s=null,c=null;a&&(s=e,c=o,e+=3*o);var f=!0,h=[],p=0,g=null,m=0,b=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,b=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];p=n[e++]|n[e++]<<8,g=n[e++],(1&_)==0&&(g=null),m=_>>2&7,e++;break;case 254:for(;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var I=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,N=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,q=n[e++],Y=q>>6&1,H=1<<(7&q)+1,P=s,E=c,R=!1;q>>7&&(R=!0,P=e,E=H,e+=3*H);var L=e;for(e++;;){var T;if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}h.push({x:I,y:C,width:N,height:j,has_local_palette:R,palette_offset:P,palette_size:E,data_offset:L,data_length:e-L,transparent_index:g,interlaced:!!Y,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return b},this.frameInfo=function(k){if(k<0||k>=h.length)throw new Error("Frame index out of range.");return h[k]},this.decodeAndBlitFrameBGRA=function(k,B){var V=this.frameInfo(k),Q=V.width*V.height,z=new Uint8Array(Q);z4(n,V.data_offset,z,Q);var U=V.palette_offset,te=V.transparent_index;te===null&&(te=256);var oe=V.width,X=t-oe,ge=oe,G=4*(V.y*t+V.x),Z=4*((V.y+V.height)*t+V.x),ne=G,ae=4*X;V.interlaced===!0&&(ae+=4*t*7);for(var pe=8,Ae=0,_e=z.length;Ae<_e;++Ae){var Ie=z[Ae];if(ge===0&&(ge=oe,(ne+=ae)>=Z&&(ae=4*X+4*t*(pe-1),ne=G+(oe+X)*(pe<<1),pe>>=1)),Ie===te)ne+=4;else{var $e=n[U+3*Ie],qe=n[U+3*Ie+1],at=n[U+3*Ie+2];B[ne++]=at,B[ne++]=qe,B[ne++]=$e,B[ne++]=255}--ge}},this.decodeAndBlitFrameRGBA=function(k,B){var V=this.frameInfo(k),Q=V.width*V.height,z=new Uint8Array(Q);z4(n,V.data_offset,z,Q);var U=V.palette_offset,te=V.transparent_index;te===null&&(te=256);var oe=V.width,X=t-oe,ge=oe,G=4*(V.y*t+V.x),Z=4*((V.y+V.height)*t+V.x),ne=G,ae=4*X;V.interlaced===!0&&(ae+=4*t*7);for(var pe=8,Ae=0,_e=z.length;Ae<_e;++Ae){var Ie=z[Ae];if(ge===0&&(ge=oe,(ne+=ae)>=Z&&(ae=4*X+4*t*(pe-1),ne=G+(oe+X)*(pe<<1),pe>>=1)),Ie===te)ne+=4;else{var $e=n[U+3*Ie],qe=n[U+3*Ie+1],at=n[U+3*Ie+2];B[ne++]=$e,B[ne++]=qe,B[ne++]=at,B[ne++]=255}--ge}}}function z4(n,e,t,r){for(var i=n[e++],a=1<<i,o=a+1,s=o+1,c=i+1,f=(1<<c)-1,h=0,p=0,g=0,m=n[e++],b=new Int32Array(4096),_=null;;){for(;h<16&&m!==0;)p|=n[e++]<<h,h+=8,m===1?m=n[e++]:--m;if(h<c)break;var I=p&f;if(p>>=c,h-=c,I!==a){if(I===o)break;for(var C=I<s?I:_,N=0,j=C;j>a;)j=b[j]>>8,++N;var q=j;if(g+N+(C!==I?1:0)>r)return void br.log("Warning, gif stream longer than expected.");t[g++]=q;var Y=g+=N;for(C!==I&&(t[g++]=q),j=C;N--;)j=b[j],t[--Y]=255&j,j>>=8;_!==null&&s<4096&&(b[s++]=_<<8|q,s>=f+1&&c<12&&(++c,f=f<<1|1)),_=I}else s=o+1,f=(1<<(c=i+1))-1,_=null}return g!==r&&br.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Fv(n){var e,t,r,i,a,o=Math.floor,s=new Array(64),c=new Array(64),f=new Array(64),h=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),b=new Array(64),_=[],I=0,C=7,N=new Array(64),j=new Array(64),q=new Array(64),Y=new Array(256),H=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(G,Z){for(var ne=0,ae=0,pe=new Array,Ae=1;Ae<=16;Ae++){for(var _e=1;_e<=G[Ae];_e++)pe[Z[ae]]=[],pe[Z[ae]][0]=ne,pe[Z[ae]][1]=Ae,ae++,ne++;ne*=2}return pe}function U(G){for(var Z=G[0],ne=G[1]-1;ne>=0;)Z&1<<ne&&(I|=1<<C),ne--,--C<0&&(I==255?(te(255),te(0)):te(I),C=7,I=0)}function te(G){_.push(G)}function oe(G){te(G>>8&255),te(255&G)}function X(G,Z,ne,ae,pe){for(var Ae,_e=pe[0],Ie=pe[240],$e=function(Ne,Ke){var We,st,nt,ut,At,vt,_t,Nt,bt,Dt,ft=0;for(bt=0;bt<8;++bt){We=Ne[ft],st=Ne[ft+1],nt=Ne[ft+2],ut=Ne[ft+3],At=Ne[ft+4],vt=Ne[ft+5],_t=Ne[ft+6];var vn=We+(Nt=Ne[ft+7]),Vt=We-Nt,Kn=st+_t,Kt=st-_t,En=nt+vt,pi=nt-vt,on=ut+At,pa=ut-At,In=vn+on,jr=vn-on,cr=Kn+En,yn=Kn-En;Ne[ft]=In+cr,Ne[ft+4]=In-cr;var Tt=.707106781*(yn+jr);Ne[ft+2]=jr+Tt,Ne[ft+6]=jr-Tt;var nn=.382683433*((In=pa+pi)-(yn=Kt+Vt)),Si=.5411961*In+nn,jn=1.306562965*yn+nn,vr=.707106781*(cr=pi+Kt),Ua=Vt+vr,yt=Vt-vr;Ne[ft+5]=yt+Si,Ne[ft+3]=yt-Si,Ne[ft+1]=Ua+jn,Ne[ft+7]=Ua-jn,ft+=8}for(ft=0,bt=0;bt<8;++bt){We=Ne[ft],st=Ne[ft+8],nt=Ne[ft+16],ut=Ne[ft+24],At=Ne[ft+32],vt=Ne[ft+40],_t=Ne[ft+48];var Gn=We+(Nt=Ne[ft+56]),$n=We-Nt,yr=st+_t,Sr=st-_t,Dr=nt+vt,Gr=nt-vt,Is=ut+At,Ji=ut-At,gi=Gn+Is,ti=Gn-Is,$r=yr+Dr,ni=yr-Dr;Ne[ft]=gi+$r,Ne[ft+32]=gi-$r;var ur=.707106781*(ni+ti);Ne[ft+16]=ti+ur,Ne[ft+48]=ti-ur;var Bn=.382683433*((gi=Ji+Gr)-(ni=Sr+$n)),Co=.5411961*gi+Bn,Io=1.306562965*ni+Bn,Bi=.707106781*($r=Gr+Sr),ga=$n+Bi,Ts=$n-Bi;Ne[ft+40]=Ts+Co,Ne[ft+24]=Ts-Co,Ne[ft+8]=ga+Io,Ne[ft+56]=ga-Io,ft++}for(bt=0;bt<64;++bt)Dt=Ne[bt]*Ke[bt],m[bt]=Dt>0?Dt+.5|0:Dt-.5|0;return m}(G,Z),qe=0;qe<64;++qe)b[P[qe]]=$e[qe];var at=b[0]-ne;ne=b[0],at==0?U(ae[0]):(U(ae[g[Ae=32767+at]]),U(p[Ae]));for(var lt=63;lt>0&&b[lt]==0;)lt--;if(lt==0)return U(_e),ne;for(var wt,Be=1;Be<=lt;){for(var ve=Be;b[Be]==0&&Be<=lt;)++Be;var ht=Be-ve;if(ht>=16){wt=ht>>4;for(var ct=1;ct<=wt;++ct)U(Ie);ht&=15}Ae=32767+b[Be],U(pe[(ht<<4)+g[Ae]]),U(p[Ae]),Be++}return lt!=63&&U(_e),ne}function ge(G){G=Math.min(Math.max(G,1),100),a!=G&&(function(Z){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var pe=o((ne[ae]*Z+50)/100);pe=Math.min(Math.max(pe,1),255),s[P[ae]]=pe}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_e=0;_e<64;_e++){var Ie=o((Ae[_e]*Z+50)/100);Ie=Math.min(Math.max(Ie,1),255),c[P[_e]]=Ie}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,at=0;at<8;at++)for(var lt=0;lt<8;lt++)f[qe]=1/(s[P[qe]]*$e[at]*$e[lt]*8),h[qe]=1/(c[P[qe]]*$e[at]*$e[lt]*8),qe++}(G<50?Math.floor(5e3/G):Math.floor(200-2*G)),a=G)}this.encode=function(G,Z){Z&&ge(Z),_=new Array,I=0,C=7,oe(65496),oe(65504),oe(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),oe(1),oe(1),te(0),te(0),function(){oe(65499),oe(132),te(0);for(var st=0;st<64;st++)te(s[st]);te(1);for(var nt=0;nt<64;nt++)te(c[nt])}(),function(st,nt){oe(65472),oe(17),te(8),oe(nt),oe(st),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(G.width,G.height),function(){oe(65476),oe(418),te(0);for(var st=0;st<16;st++)te(E[st+1]);for(var nt=0;nt<=11;nt++)te(R[nt]);te(16);for(var ut=0;ut<16;ut++)te(L[ut+1]);for(var At=0;At<=161;At++)te(T[At]);te(1);for(var vt=0;vt<16;vt++)te(k[vt+1]);for(var _t=0;_t<=11;_t++)te(B[_t]);te(17);for(var Nt=0;Nt<16;Nt++)te(V[Nt+1]);for(var bt=0;bt<=161;bt++)te(Q[bt])}(),oe(65498),oe(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var ne=0,ae=0,pe=0;I=0,C=7,this.encode.displayName="_encode_";for(var Ae,_e,Ie,$e,qe,at,lt,wt,Be,ve=G.data,ht=G.width,ct=G.height,Ne=4*ht,Ke=0;Ke<ct;){for(Ae=0;Ae<Ne;){for(qe=Ne*Ke+Ae,lt=-1,wt=0,Be=0;Be<64;Be++)at=qe+(wt=Be>>3)*Ne+(lt=4*(7&Be)),Ke+wt>=ct&&(at-=Ne*(Ke+1+wt-ct)),Ae+lt>=Ne&&(at-=Ae+lt-Ne+4),_e=ve[at++],Ie=ve[at++],$e=ve[at++],N[Be]=(H[_e]+H[Ie+256>>0]+H[$e+512>>0]>>16)-128,j[Be]=(H[_e+768>>0]+H[Ie+1024>>0]+H[$e+1280>>0]>>16)-128,q[Be]=(H[_e+1280>>0]+H[Ie+1536>>0]+H[$e+1792>>0]>>16)-128;ne=X(N,f,ne,e,r),ae=X(j,h,ae,t,i),pe=X(q,h,pe,t,i),Ae+=32}Ke+=8}if(C>=0){var We=[];We[1]=C+1,We[0]=(1<<C+1)-1,U(We)}return oe(65497),new Uint8Array(_)},n=n||50,function(){for(var G=String.fromCharCode,Z=0;Z<256;Z++)Y[Z]=G(Z)}(),e=z(E,R),t=z(k,B),r=z(L,T),i=z(V,Q),function(){for(var G=1,Z=2,ne=1;ne<=15;ne++){for(var ae=G;ae<Z;ae++)g[32767+ae]=ne,p[32767+ae]=[],p[32767+ae][1]=ne,p[32767+ae][0]=ae;for(var pe=-(Z-1);pe<=-G;pe++)g[32767+pe]=ne,p[32767+pe]=[],p[32767+pe][1]=ne,p[32767+pe][0]=Z-1+pe;G<<=1,Z<<=1}}(),function(){for(var G=0;G<256;G++)H[G]=19595*G,H[G+256>>0]=38470*G,H[G+512>>0]=7471*G+32768,H[G+768>>0]=-11059*G,H[G+1024>>0]=-21709*G,H[G+1280>>0]=32768*G+8421375,H[G+1536>>0]=-27439*G,H[G+1792>>0]=-5329*G}(),ge(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function tl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function V4(n){function e(E){if(!E)throw Error("assert :P")}function t(E,R,L){for(var T=0;4>T;T++)if(E[R+T]!=L.charCodeAt(T))return!0;return!1}function r(E,R,L,T,k){for(var B=0;B<k;B++)E[R+B]=L[T+B]}function i(E,R,L,T){for(var k=0;k<T;k++)E[R+k]=L}function a(E){return new Int32Array(E)}function o(E,R){for(var L=[],T=0;T<E;T++)L.push(new R);return L}function s(E,R){var L=[];return function T(k,B,V){for(var Q=V[B],z=0;z<Q&&(k.push(V.length>B+1?[]:new R),!(V.length<B+1));z++)T(k[z],B+1,V)}(L,0,E),L}var c=function(){var E=this;function R(x,S){for(var M=1<<S-1>>>0;x&M;)M>>>=1;return M?(x&M-1)+M:x}function L(x,S,M,W,J){e(!(W%M));do x[S+(W-=M)]=J;while(0<W)}function T(x,S,M,W,J){if(e(2328>=J),512>=J)var re=a(512);else if((re=a(J))==null)return 0;return function(ie,se,ue,de,be,Pe){var Oe,Re,Ze=se,ze=1<<ue,we=a(16),Se=a(16);for(e(be!=0),e(de!=null),e(ie!=null),e(0<ue),Re=0;Re<be;++Re){if(15<de[Re])return 0;++we[de[Re]]}if(we[0]==be)return 0;for(Se[1]=0,Oe=1;15>Oe;++Oe){if(we[Oe]>1<<Oe)return 0;Se[Oe+1]=Se[Oe]+we[Oe]}for(Re=0;Re<be;++Re)Oe=de[Re],0<de[Re]&&(Pe[Se[Oe]++]=Re);if(Se[15]==1)return(de=new k).g=0,de.value=Pe[0],L(ie,Ze,1,ze,de),ze;var Ge,Je=-1,Xe=ze-1,xt=0,dt=1,Ot=1,gt=1<<ue;for(Re=0,Oe=1,be=2;Oe<=ue;++Oe,be<<=1){if(dt+=Ot<<=1,0>(Ot-=we[Oe]))return 0;for(;0<we[Oe];--we[Oe])(de=new k).g=Oe,de.value=Pe[Re++],L(ie,Ze+xt,be,gt,de),xt=R(xt,Oe)}for(Oe=ue+1,be=2;15>=Oe;++Oe,be<<=1){if(dt+=Ot<<=1,0>(Ot-=we[Oe]))return 0;for(;0<we[Oe];--we[Oe]){if(de=new k,(xt&Xe)!=Je){for(Ze+=gt,Ge=1<<(Je=Oe)-ue;15>Je&&!(0>=(Ge-=we[Je]));)++Je,Ge<<=1;ze+=gt=1<<(Ge=Je-ue),ie[se+(Je=xt&Xe)].g=Ge+ue,ie[se+Je].value=Ze-se-Je}de.g=Oe-ue,de.value=Pe[Re++],L(ie,Ze+(xt>>ue),be,gt,de),xt=R(xt,Oe)}}return dt!=2*Se[15]-1?0:ze}(x,S,M,W,J,re)}function k(){this.value=this.g=0}function B(){this.value=this.g=0}function V(){this.G=o(5,k),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ii,B)}function Q(x,S,M,W){e(x!=null),e(S!=null),e(2147483648>W),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=S,x.pa=M,x.Jd=S,x.Yc=M+W,x.Zc=4<=W?M+W-4+1:M,Ae(x)}function z(x,S){for(var M=0;0<S--;)M|=Ie(x,128)<<S;return M}function U(x,S){var M=z(x,S);return _e(x)?-M:M}function te(x,S,M,W){var J,re=0;for(e(x!=null),e(S!=null),e(4294967288>W),x.Sb=W,x.Ra=0,x.u=0,x.h=0,4<W&&(W=4),J=0;J<W;++J)re+=S[M+J]<<8*J;x.Ra=re,x.bb=W,x.oa=S,x.pa=M}function oe(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<wc-8>>>0,++x.bb,x.u-=8;ne(x)&&(x.h=1,x.u=0)}function X(x,S){if(e(0<=S),!x.h&&S<=bc){var M=Z(x)&Al[S];return x.u+=S,oe(x),M}return x.h=1,x.u=0}function ge(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(x){return x.Ra>>>(x.u&wc-1)>>>0}function ne(x){return e(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>wc}function ae(x,S){x.u=S,x.h=ne(x)}function pe(x){x.u>=gu&&(e(x.u>=gu),oe(x))}function Ae(x){e(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(e(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function _e(x){return z(x,1)}function Ie(x,S){var M=x.Ca;0>x.b&&Ae(x);var W=x.b,J=M*S>>>8,re=(x.I>>>W>J)+0;for(re?(M-=J,x.I-=J+1<<W>>>0):M=J+1,W=M,J=0;256<=W;)J+=8,W>>=8;return W=7^J+wa[W],x.b-=W,x.Ca=(M<<W)-1,re}function $e(x,S,M){x[S+0]=M>>24&255,x[S+1]=M>>16&255,x[S+2]=M>>8&255,x[S+3]=M>>0&255}function qe(x,S){return x[S+0]<<0|x[S+1]<<8}function at(x,S){return qe(x,S)|x[S+2]<<16}function lt(x,S){return qe(x,S)|qe(x,S+2)<<16}function wt(x,S){var M=1<<S;return e(x!=null),e(0<S),x.X=a(M),x.X==null?0:(x.Mb=32-S,x.Xa=S,1)}function Be(x,S){e(x!=null),e(S!=null),e(x.Xa==S.Xa),r(S.X,0,x.X,0,1<<S.Xa)}function ve(){this.X=[],this.Xa=this.Mb=0}function ht(x,S,M,W){e(M!=null),e(W!=null);var J=M[0],re=W[0];return J==0&&(J=(x*re+S/2)/S),re==0&&(re=(S*J+x/2)/x),0>=J||0>=re?0:(M[0]=J,W[0]=re,1)}function ct(x,S){return x+(1<<S)-1>>>S}function Ne(x,S){return((4278255360&x)+(4278255360&S)>>>0&4278255360)+((16711935&x)+(16711935&S)>>>0&16711935)>>>0}function Ke(x,S){E[S]=function(M,W,J,re,ie,se,ue){var de;for(de=0;de<ie;++de){var be=E[x](se[ue+de-1],J,re+de);se[ue+de]=Ne(M[W+de],be)}}}function We(){this.ud=this.hd=this.jd=0}function st(x,S){return((4278124286&(x^S))>>>1)+(x&S)>>>0}function nt(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function ut(x,S){return nt(x+(x-S+.5>>1))}function At(x,S,M){return Math.abs(S-M)-Math.abs(x-M)}function vt(x,S,M,W,J,re,ie){for(W=re[ie-1],M=0;M<J;++M)re[ie+M]=W=Ne(x[S+M],W)}function _t(x,S,M,W,J){var re;for(re=0;re<M;++re){var ie=x[S+re],se=ie>>8&255,ue=16711935&(ue=(ue=16711935&ie)+((se<<16)+se));W[J+re]=(4278255360&ie)+ue>>>0}}function Nt(x,S){S.jd=x>>0&255,S.hd=x>>8&255,S.ud=x>>16&255}function bt(x,S,M,W,J,re){var ie;for(ie=0;ie<W;++ie){var se=S[M+ie],ue=se>>>8,de=se,be=255&(be=(be=se>>>16)+((x.jd<<24>>24)*(ue<<24>>24)>>>5));de=255&(de=(de=de+((x.hd<<24>>24)*(ue<<24>>24)>>>5))+((x.ud<<24>>24)*(be<<24>>24)>>>5)),J[re+ie]=(4278255360&se)+(be<<16)+de}}function Dt(x,S,M,W,J){E[S]=function(re,ie,se,ue,de,be,Pe,Oe,Re){for(ue=Pe;ue<Oe;++ue)for(Pe=0;Pe<Re;++Pe)de[be++]=J(se[W(re[ie++])])},E[x]=function(re,ie,se,ue,de,be,Pe){var Oe=8>>re.b,Re=re.Ea,Ze=re.K[0],ze=re.w;if(8>Oe)for(re=(1<<re.b)-1,ze=(1<<Oe)-1;ie<se;++ie){var we,Se=0;for(we=0;we<Re;++we)we&re||(Se=W(ue[de++])),be[Pe++]=J(Ze[Se&ze]),Se>>=Oe}else E["VP8LMapColor"+M](ue,de,Ze,ze,be,Pe,ie,se,Re)}}function ft(x,S,M,W,J){for(M=S+M;S<M;){var re=x[S++];W[J++]=re>>16&255,W[J++]=re>>8&255,W[J++]=re>>0&255}}function vn(x,S,M,W,J){for(M=S+M;S<M;){var re=x[S++];W[J++]=re>>16&255,W[J++]=re>>8&255,W[J++]=re>>0&255,W[J++]=re>>24&255}}function Vt(x,S,M,W,J){for(M=S+M;S<M;){var re=(ie=x[S++])>>16&240|ie>>12&15,ie=ie>>0&240|ie>>28&15;W[J++]=re,W[J++]=ie}}function Kn(x,S,M,W,J){for(M=S+M;S<M;){var re=(ie=x[S++])>>16&248|ie>>13&7,ie=ie>>5&224|ie>>3&31;W[J++]=re,W[J++]=ie}}function Kt(x,S,M,W,J){for(M=S+M;S<M;){var re=x[S++];W[J++]=re>>0&255,W[J++]=re>>8&255,W[J++]=re>>16&255}}function En(x,S,M,W,J,re){if(re==0)for(M=S+M;S<M;)$e(W,((re=x[S++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),J+=32;else r(W,J,x,S,M)}function pi(x,S){E[S][0]=E[x+"0"],E[S][1]=E[x+"1"],E[S][2]=E[x+"2"],E[S][3]=E[x+"3"],E[S][4]=E[x+"4"],E[S][5]=E[x+"5"],E[S][6]=E[x+"6"],E[S][7]=E[x+"7"],E[S][8]=E[x+"8"],E[S][9]=E[x+"9"],E[S][10]=E[x+"10"],E[S][11]=E[x+"11"],E[S][12]=E[x+"12"],E[S][13]=E[x+"13"],E[S][14]=E[x+"0"],E[S][15]=E[x+"0"]}function on(x){return x==Sf||x==kl||x==zs||x==xu}function pa(){this.eb=[],this.size=this.A=this.fb=0}function In(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function jr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pa,this.f.kb=new In,this.sd=null}function cr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Tt(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function nn(x,S){var M=x.T,W=S.ba.f.RGBA,J=W.eb,re=W.fb+x.ka*W.A,ie=xi[S.ba.S],se=x.y,ue=x.O,de=x.f,be=x.N,Pe=x.ea,Oe=x.W,Re=S.cc,Ze=S.dc,ze=S.Mc,we=S.Nc,Se=x.ka,Ge=x.ka+x.T,Je=x.U,Xe=Je+1>>1;for(Se==0?ie(se,ue,null,null,de,be,Pe,Oe,de,be,Pe,Oe,J,re,null,null,Je):(ie(S.ec,S.fc,se,ue,Re,Ze,ze,we,de,be,Pe,Oe,J,re-W.A,J,re,Je),++M);Se+2<Ge;Se+=2)Re=de,Ze=be,ze=Pe,we=Oe,be+=x.Rc,Oe+=x.Rc,re+=2*W.A,ie(se,(ue+=2*x.fa)-x.fa,se,ue,Re,Ze,ze,we,de,be,Pe,Oe,J,re-W.A,J,re,Je);return ue+=x.fa,x.j+Ge<x.o?(r(S.ec,S.fc,se,ue,Je),r(S.cc,S.dc,de,be,Xe),r(S.Mc,S.Nc,Pe,Oe,Xe),M--):1&Ge||ie(se,ue,null,null,de,be,Pe,Oe,de,be,Pe,Oe,J,re+W.A,null,null,Je),M}function Si(x,S,M){var W=x.F,J=[x.J];if(W!=null){var re=x.U,ie=S.ba.S,se=ie==Cc||ie==zs;S=S.ba.f.RGBA;var ue=[0],de=x.ka;ue[0]=x.T,x.Kb&&(de==0?--ue[0]:(--de,J[0]-=x.width),x.j+x.ka+x.T==x.o&&(ue[0]=x.o-x.j-de));var be=S.eb;de=S.fb+de*S.A,x=cn(W,J[0],x.width,re,ue,be,de+(se?0:3),S.A),e(M==ue),x&&on(ie)&&Ha(be,de,se,re,ue,S.A)}return 0}function jn(x){var S=x.ma,M=S.ba.S,W=11>M,J=M==yu||M==Ef||M==Cc||M==Us||M==12||on(M);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!_l(S.Oa,x,J?11:12))return 0;if(J&&on(M)&&it(),x.da)alert("todo:use_scaling");else{if(W){if(S.Ib=Tt,x.Kb){if(M=x.U+1>>1,S.memory=a(x.U+2*M),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+x.U,S.Mc=S.cc,S.Nc=S.dc+M,S.Ib=nn,it()}}else alert("todo:EmitYUV");J&&(S.Jb=Si,W&&Te())}if(W&&!j1){for(x=0;256>x;++x)Wm[x]=89858*(x-128)+oi>>gs,Tf[x]=-22014*(x-128)+oi,Fd[x]=-45773*(x-128),si[x]=113618*(x-128)+oi>>gs;for(x=Ml;x<Sh;++x)S=76283*(x-16)+oi>>gs,Rf[x-Ml]=Un(S,255),Ud[x-Ml]=Un(S+8>>4,15);j1=1}return 1}function vr(x){var S=x.ma,M=x.U,W=x.T;return e(!(1&x.ka)),0>=M||0>=W?0:(M=S.Ib(x,S),S.Jb!=null&&S.Jb(x,S,M),S.Dc+=M,1)}function Ua(x){x.ma.memory=null}function yt(x,S,M,W){return X(x,8)!=47?0:(S[0]=X(x,14)+1,M[0]=X(x,14)+1,W[0]=X(x,1),X(x,3)!=0?0:!x.h)}function Gn(x,S){if(4>x)return x+1;var M=x-2>>1;return(2+(1&x)<<M)+X(S,M)+1}function $n(x,S){return 120<S?S-120:1<=(M=((M=qs[S-1])>>4)*x+(8-(15&M)))?M:1;var M}function yr(x,S,M){var W=Z(M),J=x[S+=255&W].g-8;return 0<J&&(ae(M,M.u+8),W=Z(M),S+=x[S].value,S+=W&(1<<J)-1),ae(M,M.u+x[S].g),x[S].value}function Sr(x,S,M){return M.g+=x.g,M.value+=x.value<<S>>>0,e(8>=M.g),x.g}function Dr(x,S,M){var W=x.xc;return e((S=W==0?0:x.vc[x.md*(M>>W)+(S>>W)])<x.Wb),x.Ya[S]}function Gr(x,S,M,W){var J=x.ab,re=x.c*S,ie=x.C;S=ie+S;var se=M,ue=W;for(W=x.Ta,M=x.Ua;0<J--;){var de=x.gc[J],be=ie,Pe=S,Oe=se,Re=ue,Ze=(ue=W,se=M,de.Ea);switch(e(be<Pe),e(Pe<=de.nc),de.hc){case 2:yh(Oe,Re,(Pe-be)*Ze,ue,se);break;case 0:var ze=be,we=Pe,Se=ue,Ge=se,Je=(gt=de).Ea;ze==0&&(jd(Oe,Re,null,null,1,Se,Ge),vt(Oe,Re+1,0,0,Je-1,Se,Ge+1),Re+=Je,Ge+=Je,++ze);for(var Xe=1<<gt.b,xt=Xe-1,dt=ct(Je,gt.b),Ot=gt.K,gt=gt.w+(ze>>gt.b)*dt;ze<we;){var Tn=Ot,zn=gt,sn=1;for(_f(Oe,Re,Se,Ge-Je,1,Se,Ge);sn<Je;){var rn=(sn&~xt)+Xe;rn>Je&&(rn=Je),(0,js[Tn[zn++]>>8&15])(Oe,Re+ +sn,Se,Ge+sn-Je,rn-sn,Se,Ge+sn),sn=rn}Re+=Je,Ge+=Je,++ze&xt||(gt+=dt)}Pe!=de.nc&&r(ue,se-Ze,ue,se+(Pe-be-1)*Ze,Ze);break;case 1:for(Ze=Oe,we=Re,Je=(Oe=de.Ea)-(Ge=Oe&~(Se=(Re=1<<de.b)-1)),ze=ct(Oe,de.b),Xe=de.K,de=de.w+(be>>de.b)*ze;be<Pe;){for(xt=Xe,dt=de,Ot=new We,gt=we+Ge,Tn=we+Oe;we<gt;)Nt(xt[dt++],Ot),Sl(Ot,Ze,we,Re,ue,se),we+=Re,se+=Re;we<Tn&&(Nt(xt[dt++],Ot),Sl(Ot,Ze,we,Je,ue,se),we+=Je,se+=Je),++be&Se||(de+=ze)}break;case 3:if(Oe==ue&&Re==se&&0<de.b){for(we=ue,Oe=Ze=se+(Pe-be)*Ze-(Ge=(Pe-be)*ct(de.Ea,de.b)),Re=ue,Se=se,ze=[],Ge=(Je=Ge)-1;0<=Ge;--Ge)ze[Ge]=Re[Se+Ge];for(Ge=Je-1;0<=Ge;--Ge)we[Oe+Ge]=ze[Ge];lo(de,be,Pe,ue,Ze,ue,se)}else lo(de,be,Pe,Oe,Re,ue,se)}se=W,ue=M}ue!=M&&r(W,M,se,ue,re)}function Is(x,S){var M=x.V,W=x.Ba+x.c*x.C,J=S-x.C;if(e(S<=x.l.o),e(16>=J),0<J){var re=x.l,ie=x.Ta,se=x.Ua,ue=re.width;if(Gr(x,J,M,W),J=se=[se],e((M=x.C)<(W=S)),e(re.v<re.va),W>re.o&&(W=re.o),M<re.j){var de=re.j-M;M=re.j,J[0]+=de*ue}if(M>=W?M=0:(J[0]+=4*re.v,re.ka=M-re.j,re.U=re.va-re.v,re.T=W-M,M=1),M){if(se=se[0],11>(M=x.ca).S){var be=M.f.RGBA,Pe=(W=M.S,J=re.U,re=re.T,de=be.eb,be.A),Oe=re;for(be=be.fb+x.Ma*be.A;0<Oe--;){var Re=ie,Ze=se,ze=J,we=de,Se=be;switch(W){case qi:ta(Re,Ze,ze,we,Se);break;case yu:Ri(Re,Ze,ze,we,Se);break;case Sf:Ri(Re,Ze,ze,we,Se),Ha(we,Se,0,ze,1,0);break;case fs:jo(Re,Ze,ze,we,Se);break;case Ef:En(Re,Ze,ze,we,Se,1);break;case kl:En(Re,Ze,ze,we,Se,1),Ha(we,Se,0,ze,1,0);break;case Cc:En(Re,Ze,ze,we,Se,0);break;case zs:En(Re,Ze,ze,we,Se,0),Ha(we,Se,1,ze,1,0);break;case Us:Cl(Re,Ze,ze,we,Se);break;case xu:Cl(Re,Ze,ze,we,Se),ln(we,Se,ze,1,0);break;case bh:_a(Re,Ze,ze,we,Se);break;default:e(0)}se+=ue,be+=Pe}x.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");e(x.Ma<=M.height)}}x.C=S,e(x.C<=x.i)}function Ji(x){var S;if(0<x.ua)return 0;for(S=0;S<x.Wb;++S){var M=x.Ya[S].G,W=x.Ya[S].H;if(0<M[1][W[1]+0].g||0<M[2][W[2]+0].g||0<M[3][W[3]+0].g)return 0}return 1}function gi(x,S,M,W,J,re){if(x.Z!=0){var ie=x.qd,se=x.rd;for(e(ds[x.Z]!=null);S<M;++S)ds[x.Z](ie,se,W,J,W,J,re),ie=W,se=J,J+=re;x.qd=ie,x.rd=se}}function ti(x,S){var M=x.l.ma,W=M.Z==0||M.Z==1?x.l.j:x.C;if(W=x.C<W?W:x.C,e(S<=x.l.o),S>W){var J=x.l.width,re=M.ca,ie=M.tb+J*W,se=x.V,ue=x.Ba+x.c*W,de=x.gc;e(x.ab==1),e(de[0].hc==3),El(de[0],W,S,se,ue,re,ie),gi(M,W,S,re,ie,J)}x.C=x.Ma=S}function $r(x,S,M,W,J,re,ie){var se=x.$/W,ue=x.$%W,de=x.m,be=x.s,Pe=M+x.$,Oe=Pe;J=M+W*J;var Re=M+W*re,Ze=280+be.ua,ze=x.Pb?se:16777216,we=0<be.ua?be.Wa:null,Se=be.wc,Ge=Pe<Re?Dr(be,ue,se):null;e(x.C<re),e(Re<=J);var Je=!1;e:for(;;){for(;Je||Pe<Re;){var Xe=0;if(se>=ze){var xt=Pe-M;e((ze=x).Pb),ze.wd=ze.m,ze.xd=xt,0<ze.s.ua&&Be(ze.s.Wa,ze.s.vb),ze=se+P1}if(ue&Se||(Ge=Dr(be,ue,se)),e(Ge!=null),Ge.Qb&&(S[Pe]=Ge.qb,Je=!0),!Je)if(pe(de),Ge.jc){Xe=de,xt=S;var dt=Pe,Ot=Ge.pd[Z(Xe)&ii-1];e(Ge.jc),256>Ot.g?(ae(Xe,Xe.u+Ot.g),xt[dt]=Ot.value,Xe=0):(ae(Xe,Xe.u+Ot.g-256),e(256<=Ot.value),Xe=Ot.value),Xe==0&&(Je=!0)}else Xe=yr(Ge.G[0],Ge.H[0],de);if(de.h)break;if(Je||256>Xe){if(!Je)if(Ge.nd)S[Pe]=(Ge.qb|Xe<<8)>>>0;else{if(pe(de),Je=yr(Ge.G[1],Ge.H[1],de),pe(de),xt=yr(Ge.G[2],Ge.H[2],de),dt=yr(Ge.G[3],Ge.H[3],de),de.h)break;S[Pe]=(dt<<24|Je<<16|Xe<<8|xt)>>>0}if(Je=!1,++Pe,++ue>=W&&(ue=0,++se,ie!=null&&se<=re&&!(se%16)&&ie(x,se),we!=null))for(;Oe<Pe;)Xe=S[Oe++],we.X[(506832829*Xe&4294967295)>>>we.Mb]=Xe}else if(280>Xe){if(Xe=Gn(Xe-256,de),xt=yr(Ge.G[4],Ge.H[4],de),pe(de),xt=$n(W,xt=Gn(xt,de)),de.h)break;if(Pe-M<xt||J-Pe<Xe)break e;for(dt=0;dt<Xe;++dt)S[Pe+dt]=S[Pe+dt-xt];for(Pe+=Xe,ue+=Xe;ue>=W;)ue-=W,++se,ie!=null&&se<=re&&!(se%16)&&ie(x,se);if(e(Pe<=J),ue&Se&&(Ge=Dr(be,ue,se)),we!=null)for(;Oe<Pe;)Xe=S[Oe++],we.X[(506832829*Xe&4294967295)>>>we.Mb]=Xe}else{if(!(Xe<Ze))break e;for(Je=Xe-280,e(we!=null);Oe<Pe;)Xe=S[Oe++],we.X[(506832829*Xe&4294967295)>>>we.Mb]=Xe;Xe=Pe,e(!(Je>>>(xt=we).Xa)),S[Xe]=xt.X[Je],Je=!0}Je||e(de.h==ne(de))}if(x.Pb&&de.h&&Pe<J)e(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&Be(x.s.vb,x.s.Wa);else{if(de.h)break e;ie!=null&&ie(x,se>re?re:se),x.a=0,x.$=Pe-M}return 1}return x.a=3,0}function ni(x){e(x!=null),x.vc=null,x.yc=null,x.Ya=null;var S=x.Wa;S!=null&&(S.X=null),x.vb=null,e(x!=null)}function ur(){var x=new du;return x==null?null:(x.a=0,x.xb=bu,pi("Predictor","VP8LPredictors"),pi("Predictor","VP8LPredictors_C"),pi("PredictorAdd","VP8LPredictorsAdd"),pi("PredictorAdd","VP8LPredictorsAdd_C"),yh=_t,Sl=bt,ta=ft,Ri=vn,Cl=Vt,_a=Kn,jo=Kt,E.VP8LMapColor32b=vi,E.VP8LMapColor8b=Af,x)}function Bn(x,S,M,W,J){var re=1,ie=[x],se=[S],ue=W.m,de=W.s,be=null,Pe=0;e:for(;;){if(M)for(;re&&X(ue,1);){var Oe=ie,Re=se,Ze=W,ze=1,we=Ze.m,Se=Ze.gc[Ze.ab],Ge=X(we,2);if(Ze.Oc&1<<Ge)re=0;else{switch(Ze.Oc|=1<<Ge,Se.hc=Ge,Se.Ea=Oe[0],Se.nc=Re[0],Se.K=[null],++Ze.ab,e(4>=Ze.ab),Ge){case 0:case 1:Se.b=X(we,3)+2,ze=Bn(ct(Se.Ea,Se.b),ct(Se.nc,Se.b),0,Ze,Se.K),Se.K=Se.K[0];break;case 3:var Je,Xe=X(we,8)+1,xt=16<Xe?0:4<Xe?1:2<Xe?2:3;if(Oe[0]=ct(Se.Ea,xt),Se.b=xt,Je=ze=Bn(Xe,1,0,Ze,Se.K)){var dt,Ot=Xe,gt=Se,Tn=1<<(8>>gt.b),zn=a(Tn);if(zn==null)Je=0;else{var sn=gt.K[0],rn=gt.w;for(zn[0]=gt.K[0][0],dt=1;dt<1*Ot;++dt)zn[dt]=Ne(sn[rn+dt],zn[dt-1]);for(;dt<4*Tn;++dt)zn[dt]=0;gt.K[0]=null,gt.K[0]=zn,Je=1}}ze=Je;break;case 2:break;default:e(0)}re=ze}}if(ie=ie[0],se=se[0],re&&X(ue,1)&&!(re=1<=(Pe=X(ue,4))&&11>=Pe)){W.a=3;break e}var Zn;if(Zn=re)t:{var Vn,Zt,nr,Lt=W,Ht=ie,Cn=se,Rn=Pe,bi=M,li=Lt.m,Ur=Lt.s,zr=[null],Qr=1,ho=0,qn=Tc[Rn];n:for(;;){if(bi&&X(li,1)){var Zr=X(li,3)+2,Uo=ct(Ht,Zr),jl=ct(Cn,Zr),Dc=Uo*jl;if(!Bn(Uo,jl,0,Lt,zr))break n;for(zr=zr[0],Ur.xc=Zr,Vn=0;Vn<Dc;++Vn){var Bl=zr[Vn]>>8&65535;zr[Vn]=Bl,Bl>=Qr&&(Qr=Bl+1)}}if(li.h)break n;for(Zt=0;5>Zt;++Zt){var wr=Wa[Zt];!Zt&&0<Rn&&(wr+=1<<Rn),ho<wr&&(ho=wr)}var Nf=o(Qr*qn,k),Ch=Qr,ra=o(Ch,V);if(ra==null)var Cr=null;else e(65536>=Ch),Cr=ra;var Oc=a(ho);if(Cr==null||Oc==null||Nf==null){Lt.a=1;break n}var Fl=Nf;for(Vn=nr=0;Vn<Qr;++Vn){var Ea=Cr[Vn],Ul=Ea.G,Sa=Ea.H,Df=0,_u=1,Ih=0;for(Zt=0;5>Zt;++Zt){wr=Wa[Zt],Ul[Zt]=Fl,Sa[Zt]=nr,!Zt&&0<Rn&&(wr+=1<<Rn);i:{var Of,Th=wr,kf=Lt,Au=Oc,U1=Fl,z1=nr,Pf=0,$s=kf.m,$m=X($s,1);if(i(Au,0,0,Th),$m){var V1=X($s,1)+1,q1=X($s,1),zd=X($s,q1==0?1:8);Au[zd]=1,V1==2&&(Au[zd=X($s,8)]=1);var Eu=1}else{var Vd=a(19),qd=X($s,4)+4;if(19<qd){kf.a=3;var Lf=0;break i}for(Of=0;Of<qd;++Of)Vd[Vs[Of]]=X($s,3);var Rh=void 0,Su=void 0,H1=kf,W1=Vd,Ys=Th,Mf=Au,Nh=0,zo=H1.m,Cu=8,Hd=o(128,k);r:for(;T(Hd,0,7,W1,19);){if(X(zo,1)){var G1=2+2*X(zo,3);if((Rh=2+X(zo,G1))>Ys)break r}else Rh=Ys;for(Su=0;Su<Ys&&Rh--;){pe(zo);var Wd=Hd[0+(127&Z(zo))];ae(zo,zo.u+Wd.g);var kc=Wd.value;if(16>kc)Mf[Su++]=kc,kc!=0&&(Cu=kc);else{var $1=kc==16,Gd=kc-16,$d=fo[Gd],Yd=X(zo,wh[Gd])+$d;if(Su+Yd>Ys)break r;for(var Y1=$1?Cu:0;0<Yd--;)Mf[Su++]=Y1}}Nh=1;break r}Nh||(H1.a=3),Eu=Nh}(Eu=Eu&&!$s.h)&&(Pf=T(U1,z1,8,Au,Th)),Eu&&Pf!=0?Lf=Pf:(kf.a=3,Lf=0)}if(Lf==0)break n;if(_u&&Ic[Zt]==1&&(_u=Fl[nr].g==0),Df+=Fl[nr].g,nr+=Lf,3>=Zt){var Pc,Dh=Oc[0];for(Pc=1;Pc<wr;++Pc)Oc[Pc]>Dh&&(Dh=Oc[Pc]);Ih+=Dh}}if(Ea.nd=_u,Ea.Qb=0,_u&&(Ea.qb=(Ul[3][Sa[3]+0].value<<24|Ul[1][Sa[1]+0].value<<16|Ul[2][Sa[2]+0].value)>>>0,Df==0&&256>Ul[0][Sa[0]+0].value&&(Ea.Qb=1,Ea.qb+=Ul[0][Sa[0]+0].value<<8)),Ea.jc=!Ea.Qb&&6>Ih,Ea.jc){var jf,Xs=Ea;for(jf=0;jf<ii;++jf){var ms=jf,Ks=Xs.pd[ms],Bf=Xs.G[0][Xs.H[0]+ms];256<=Bf.value?(Ks.g=Bf.g+256,Ks.value=Bf.value):(Ks.g=0,Ks.value=0,ms>>=Sr(Bf,8,Ks),ms>>=Sr(Xs.G[1][Xs.H[1]+ms],16,Ks),ms>>=Sr(Xs.G[2][Xs.H[2]+ms],0,Ks),Sr(Xs.G[3][Xs.H[3]+ms],24,Ks))}}}Ur.vc=zr,Ur.Wb=Qr,Ur.Ya=Cr,Ur.yc=Nf,Zn=1;break t}Zn=0}if(!(re=Zn)){W.a=3;break e}if(0<Pe){if(de.ua=1<<Pe,!wt(de.Wa,Pe)){W.a=1,re=0;break e}}else de.ua=0;var Ff=W,Xd=ie,X1=se,Kd=Ff.s,Qd=Kd.xc;if(Ff.c=Xd,Ff.i=X1,Kd.md=ct(Xd,Qd),Kd.wc=Qd==0?-1:(1<<Qd)-1,M){W.xb=M1;break e}if((be=a(ie*se))==null){W.a=1,re=0;break e}re=(re=$r(W,be,0,ie,se,se,null))&&!ue.h;break e}return re?(J!=null?J[0]=be:(e(be==null),e(M)),W.$=0,M||ni(de)):ni(de),re}function Co(x,S){var M=x.c*x.i,W=M+S+16*S;return e(x.c<=S),x.V=a(W),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+M+S,1)}function Io(x,S){var M=x.C,W=S-M,J=x.V,re=x.Ba+x.c*M;for(e(S<=x.l.o);0<W;){var ie=16<W?16:W,se=x.l.ma,ue=x.l.width,de=ue*ie,be=se.ca,Pe=se.tb+ue*M,Oe=x.Ta,Re=x.Ua;Gr(x,ie,J,re),hr(Oe,Re,be,Pe,de),gi(se,M,M+ie,be,Pe,ue),W-=ie,J+=ie*x.c,M+=ie}e(M==S),x.C=x.Ma=S}function Bi(){this.ub=this.yd=this.td=this.Rb=0}function ga(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ts(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function fc(){this.Yb=function(){var x=[];return function S(M,W,J){for(var re=J[W],ie=0;ie<re&&(M.push(J.length>W+1?[]:0),!(J.length<W+1));ie++)S(M[ie],W+1,J)}(x,0,[3,11]),x}()}function Rs(){this.jb=a(3),this.Wc=s([4,8],fc),this.Xc=s([4,17],fc)}function su(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function za(){this.ld=this.La=this.dd=this.tc=0}function Va(){this.Na=this.la=0}function ri(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function To(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function lu(){this.uc=this.M=this.Nb=0,this.wa=Array(new za),this.Y=0,this.ya=Array(new To),this.aa=0,this.l=new Ro}function Ja(){this.y=a(16),this.f=a(8),this.ea=a(8)}function pl(){this.cb=this.a=0,this.sc="",this.m=new ge,this.Od=new Bi,this.Kc=new ga,this.ed=new su,this.Qa=new Ts,this.Ic=this.$c=this.Aa=0,this.D=new lu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ge),this.ia=0,this.pb=o(4,ri),this.Pa=new Rs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ja),this.Hd=0,this.rb=Array(new Va),this.sb=0,this.wa=Array(new za),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new To),this.L=this.aa=0,this.gd=s([4,2],za),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ro(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function hc(){var x=new pl;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,ai||(ai=cu)),x}function fr(x,S,M){return x.a==0&&(x.a=S,x.sc=M,x.cb=0),0}function mi(x,S,M){return 3<=M&&x[S+0]==157&&x[S+1]==1&&x[S+2]==42}function gl(x,S){if(x==null)return 0;if(x.a=0,x.sc="OK",S==null)return fr(x,2,"null VP8Io passed to VP8GetHeaders()");var M=S.data,W=S.w,J=S.ha;if(4>J)return fr(x,7,"Truncated header.");var re=M[W+0]|M[W+1]<<8|M[W+2]<<16,ie=x.Od;if(ie.Rb=!(1&re),ie.td=re>>1&7,ie.yd=re>>4&1,ie.ub=re>>5,3<ie.td)return fr(x,3,"Incorrect keyframe parameters.");if(!ie.yd)return fr(x,4,"Frame not displayable.");W+=3,J-=3;var se=x.Kc;if(ie.Rb){if(7>J)return fr(x,7,"cannot parse picture header");if(!mi(M,W,J))return fr(x,3,"Bad code word");se.c=16383&(M[W+4]<<8|M[W+3]),se.Td=M[W+4]>>6,se.i=16383&(M[W+6]<<8|M[W+5]),se.Ud=M[W+6]>>6,W+=7,J-=7,x.za=se.c+15>>4,x.Ub=se.i+15>>4,S.width=se.c,S.height=se.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((re=x.Pa).jb,0,255,re.jb.length),e((re=x.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,i(re.Zb,0,0,re.Zb.length),i(re.Lb,0,0,re.Lb)}if(ie.ub>J)return fr(x,7,"bad partition length");Q(re=x.m,M,W,ie.ub),W+=ie.ub,J-=ie.ub,ie.Rb&&(se.Ld=_e(re),se.Kd=_e(re)),se=x.Qa;var ue,de=x.Pa;if(e(re!=null),e(se!=null),se.Cb=_e(re),se.Cb){if(se.Bb=_e(re),_e(re)){for(se.Fb=_e(re),ue=0;4>ue;++ue)se.Zb[ue]=_e(re)?U(re,7):0;for(ue=0;4>ue;++ue)se.Lb[ue]=_e(re)?U(re,6):0}if(se.Bb)for(ue=0;3>ue;++ue)de.jb[ue]=_e(re)?z(re,8):255}else se.Bb=0;if(re.Ka)return fr(x,3,"cannot parse segment header");if((se=x.ed).zd=_e(re),se.Tb=z(re,6),se.wb=z(re,3),se.Pc=_e(re),se.Pc&&_e(re)){for(de=0;4>de;++de)_e(re)&&(se.vd[de]=U(re,6));for(de=0;4>de;++de)_e(re)&&(se.od[de]=U(re,6))}if(x.L=se.Tb==0?0:se.zd?1:2,re.Ka)return fr(x,3,"cannot parse filter header");var be=J;if(J=ue=W,W=ue+be,se=be,x.Xb=(1<<z(x.m,2))-1,be<3*(de=x.Xb))M=7;else{for(ue+=3*de,se-=3*de,be=0;be<de;++be){var Pe=M[J+0]|M[J+1]<<8|M[J+2]<<16;Pe>se&&(Pe=se),Q(x.Jc[+be],M,ue,Pe),ue+=Pe,se-=Pe,J+=3}Q(x.Jc[+de],M,ue,se),M=ue<W?0:5}if(M!=0)return fr(x,M,"cannot parse partitions");for(M=z(ue=x.m,7),J=_e(ue)?U(ue,4):0,W=_e(ue)?U(ue,4):0,se=_e(ue)?U(ue,4):0,de=_e(ue)?U(ue,4):0,ue=_e(ue)?U(ue,4):0,be=x.Qa,Pe=0;4>Pe;++Pe){if(be.Cb){var Oe=be.Zb[Pe];be.Fb||(Oe+=M)}else{if(0<Pe){x.pb[Pe]=x.pb[0];continue}Oe=M}var Re=x.pb[Pe];Re.Sc[0]=Cf[Un(Oe+J,127)],Re.Sc[1]=If[Un(Oe+0,127)],Re.Eb[0]=2*Cf[Un(Oe+W,127)],Re.Eb[1]=101581*If[Un(Oe+se,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=Cf[Un(Oe+de,117)],Re.Qc[1]=If[Un(Oe+ue,127)],Re.lc=Oe+ue}if(!ie.Rb)return fr(x,4,"Not a key frame.");for(_e(re),ie=x.Pa,M=0;4>M;++M){for(J=0;8>J;++J)for(W=0;3>W;++W)for(se=0;11>se;++se)de=Ie(re,Rc[M][J][W][se])?z(re,8):hs[M][J][W][se],ie.Wc[M][J].Yb[W][se]=de;for(J=0;17>J;++J)ie.Xc[M][J]=ie.Wc[M][L1[J]]}return x.kc=_e(re),x.kc&&(x.Bd=z(re,8)),x.cb=1}function cu(x,S,M,W,J,re,ie){var se=S[J].Yb[M];for(M=0;16>J;++J){if(!Ie(x,se[M+0]))return J;for(;!Ie(x,se[M+1]);)if(se=S[++J].Yb[0],M=0,J==16)return 16;var ue=S[J+1].Yb;if(Ie(x,se[M+2])){var de=x,be=0;if(Ie(de,(Oe=se)[(Pe=M)+3]))if(Ie(de,Oe[Pe+6])){for(se=0,Pe=2*(be=Ie(de,Oe[Pe+8]))+(Oe=Ie(de,Oe[Pe+9+be])),be=0,Oe=Pr[Pe];Oe[se];++se)be+=be+Ie(de,Oe[se]);be+=3+(8<<Pe)}else Ie(de,Oe[Pe+7])?(be=7+2*Ie(de,165),be+=Ie(de,145)):be=5+Ie(de,159);else be=Ie(de,Oe[Pe+4])?3+Ie(de,Oe[Pe+5]):2;se=ue[2]}else be=1,se=ue[1];ue=ie+Pn[J],0>(de=x).b&&Ae(de);var Pe,Oe=de.b,Re=(Pe=de.Ca>>1)-(de.I>>Oe)>>31;--de.b,de.Ca+=Re,de.Ca|=1,de.I-=(Pe+1&Re)<<Oe,re[ue]=((be^Re)-Re)*W[(0<J)+0]}return 16}function Qo(x){var S=x.rb[x.sb-1];S.la=0,S.Na=0,i(x.zc,0,0,x.zc.length),x.ja=0}function dc(x,S){if(x==null)return 0;if(S==null)return fr(x,2,"NULL VP8Io parameter in VP8Decode().");if(!x.cb&&!gl(x,S))return 0;if(e(x.cb),S.ac==null||S.ac(S)){S.ob&&(x.L=0);var M=Gs[x.L];if(x.L==2?(x.yb=0,x.zb=0):(x.yb=S.v-M>>4,x.zb=S.j-M>>4,0>x.yb&&(x.yb=0),0>x.zb&&(x.zb=0)),x.Va=S.o+15+M>>4,x.Hb=S.va+15+M>>4,x.Hb>x.za&&(x.Hb=x.za),x.Va>x.Ub&&(x.Va=x.Ub),0<x.L){var W=x.ed;for(M=0;4>M;++M){var J;if(x.Qa.Cb){var re=x.Qa.Lb[M];x.Qa.Fb||(re+=W.Tb)}else re=W.Tb;for(J=0;1>=J;++J){var ie=x.gd[M][J],se=re;if(W.Pc&&(se+=W.vd[0],J&&(se+=W.od[0])),0<(se=0>se?0:63<se?63:se)){var ue=se;0<W.wb&&(ue=4<W.wb?ue>>2:ue>>1)>9-W.wb&&(ue=9-W.wb),1>ue&&(ue=1),ie.dd=ue,ie.tc=2*se+ue,ie.ld=40<=se?2:15<=se?1:0}else ie.tc=0;ie.La=J}}}M=0}else fr(x,6,"Frame setup failed"),M=x.a;if(M=M==0){if(M){x.$c=0,0<x.Aa||(x.Ic=B1);e:{M=x.Ic,W=4*(ue=x.za);var de=32*ue,be=ue+1,Pe=0<x.L?ue*(0<x.Aa?2:1):0,Oe=(x.Aa==2?2:1)*ue;if((ie=W+832+(J=3*(16*M+Gs[x.L])/2*de)+(re=x.Fa!=null&&0<x.Fa.length?x.Kc.c*x.Kc.i:0))!=ie)M=0;else{if(ie>x.Vb){if(x.Vb=0,x.Ec=a(ie),x.Fc=0,x.Ec==null){M=fr(x,1,"no memory during frame initialization.");break e}x.Vb=ie}ie=x.Ec,se=x.Fc,x.Ac=ie,x.Bc=se,se+=W,x.Gd=o(de,Ja),x.Hd=0,x.rb=o(be+1,Va),x.sb=1,x.wa=Pe?o(Pe,za):null,x.Y=0,x.D.Nb=0,x.D.wa=x.wa,x.D.Y=x.Y,0<x.Aa&&(x.D.Y+=ue),e(!0),x.oc=ie,x.pc=se,se+=832,x.ya=o(Oe,To),x.aa=0,x.D.ya=x.ya,x.D.aa=x.aa,x.Aa==2&&(x.D.aa+=ue),x.R=16*ue,x.B=8*ue,ue=(de=Gs[x.L])*x.R,de=de/2*x.B,x.sa=ie,x.ta=se+ue,x.qa=x.sa,x.ra=x.ta+16*M*x.R+de,x.Ha=x.qa,x.Ia=x.ra+8*M*x.B+de,x.$c=0,se+=J,x.mb=re?ie:null,x.nb=re?se:null,e(se+re<=x.Fc+x.Vb),Qo(x),i(x.Ac,x.Bc,0,W),M=1}}if(M){if(S.ka=0,S.y=x.sa,S.O=x.ta,S.f=x.qa,S.N=x.ra,S.ea=x.Ha,S.Vd=x.Ia,S.fa=x.R,S.Rc=x.B,S.F=null,S.J=0,!Fs){for(M=-255;255>=M;++M)Fr[255+M]=0>M?-M:M;for(M=-1020;1020>=M;++M)co[1020+M]=-128>M?-128:127<M?127:M;for(M=-112;112>=M;++M)Dl[112+M]=-16>M?-16:15<M?15:M;for(M=-255;510>=M;++M)Ol[255+M]=0>M?0:255<M?255:M;Fs=1}cs=ma,Bo=Jo,Fo=eo,Kr=Fn,Aa=es,Or=Zo,_c=is,us=Lo,mu=xl,Il=yc,Tl=yl,Rl=Os,Ac=ks,vu=as,Nl=qa,Bs=zi,Ec=Xr,kr=hu,na[0]=Fi,na[1]=uu,na[2]=ro,na[3]=fu,na[4]=va,na[5]=io,na[6]=ea,na[7]=ya,na[8]=Po,na[9]=ts,Hs[0]=to,Hs[1]=gc,Hs[2]=Do,Hs[3]=vl,Hs[4]=tr,Hs[5]=ko,Hs[6]=no,Ga[0]=ao,Ga[1]=pc,Ga[2]=mc,Ga[3]=xa,Ga[4]=hn,Ga[5]=Yr,Ga[6]=ns,M=1}else M=0}M&&(M=function(Re,Ze){for(Re.M=0;Re.M<Re.Va;++Re.M){var ze,we=Re.Jc[Re.M&Re.Xb],Se=Re.m,Ge=Re;for(ze=0;ze<Ge.za;++ze){var Je=Se,Xe=Ge,xt=Xe.Ac,dt=Xe.Bc+4*ze,Ot=Xe.zc,gt=Xe.ya[Xe.aa+ze];if(Xe.Qa.Bb?gt.$b=Ie(Je,Xe.Pa.jb[0])?2+Ie(Je,Xe.Pa.jb[2]):Ie(Je,Xe.Pa.jb[1]):gt.$b=0,Xe.kc&&(gt.Ad=Ie(Je,Xe.Bd)),gt.Za=!Ie(Je,145)+0,gt.Za){var Tn=gt.Ob,zn=0;for(Xe=0;4>Xe;++Xe){var sn,rn=Ot[0+Xe];for(sn=0;4>sn;++sn){rn=Bd[xt[dt+sn]][rn];for(var Zn=Pl[Ie(Je,rn[0])];0<Zn;)Zn=Pl[2*Zn+Ie(Je,rn[Zn])];rn=-Zn,xt[dt+sn]=rn}r(Tn,zn,xt,dt,4),zn+=4,Ot[0+Xe]=rn}}else rn=Ie(Je,156)?Ie(Je,128)?1:3:Ie(Je,163)?2:0,gt.Ob[0]=rn,i(xt,dt,rn,4),i(Ot,0,rn,4);gt.Dd=Ie(Je,142)?Ie(Je,114)?Ie(Je,183)?1:3:2:0}if(Ge.m.Ka)return fr(Re,7,"Premature end-of-partition0 encountered.");for(;Re.ja<Re.za;++Re.ja){if(Ge=we,Je=(Se=Re).rb[Se.sb-1],xt=Se.rb[Se.sb+Se.ja],ze=Se.ya[Se.aa+Se.ja],dt=Se.kc?ze.Ad:0)Je.la=xt.la=0,ze.Za||(Je.Na=xt.Na=0),ze.Hc=0,ze.Gc=0,ze.ia=0;else{var Vn,Zt;if(Je=xt,xt=Ge,dt=Se.Pa.Xc,Ot=Se.ya[Se.aa+Se.ja],gt=Se.pb[Ot.$b],Xe=Ot.ad,Tn=0,zn=Se.rb[Se.sb-1],rn=sn=0,i(Xe,Tn,0,384),Ot.Za)var nr=0,Lt=dt[3];else{Zn=a(16);var Ht=Je.Na+zn.Na;if(Ht=ai(xt,dt[1],Ht,gt.Eb,0,Zn,0),Je.Na=zn.Na=(0<Ht)+0,1<Ht)cs(Zn,0,Xe,Tn);else{var Cn=Zn[0]+3>>3;for(Zn=0;256>Zn;Zn+=16)Xe[Tn+Zn]=Cn}nr=1,Lt=dt[0]}var Rn=15&Je.la,bi=15&zn.la;for(Zn=0;4>Zn;++Zn){var li=1&bi;for(Cn=Zt=0;4>Cn;++Cn)Rn=Rn>>1|(li=(Ht=ai(xt,Lt,Ht=li+(1&Rn),gt.Sc,nr,Xe,Tn))>nr)<<7,Zt=Zt<<2|(3<Ht?3:1<Ht?2:Xe[Tn+0]!=0),Tn+=16;Rn>>=4,bi=bi>>1|li<<7,sn=(sn<<8|Zt)>>>0}for(Lt=Rn,nr=bi>>4,Vn=0;4>Vn;Vn+=2){for(Zt=0,Rn=Je.la>>4+Vn,bi=zn.la>>4+Vn,Zn=0;2>Zn;++Zn){for(li=1&bi,Cn=0;2>Cn;++Cn)Ht=li+(1&Rn),Rn=Rn>>1|(li=0<(Ht=ai(xt,dt[2],Ht,gt.Qc,0,Xe,Tn)))<<3,Zt=Zt<<2|(3<Ht?3:1<Ht?2:Xe[Tn+0]!=0),Tn+=16;Rn>>=2,bi=bi>>1|li<<5}rn|=Zt<<4*Vn,Lt|=Rn<<4<<Vn,nr|=(240&bi)<<Vn}Je.la=Lt,zn.la=nr,Ot.Hc=sn,Ot.Gc=rn,Ot.ia=43690&rn?0:gt.ia,dt=!(sn|rn)}if(0<Se.L&&(Se.wa[Se.Y+Se.ja]=Se.gd[ze.$b][ze.Za],Se.wa[Se.Y+Se.ja].La|=!dt),Ge.Ka)return fr(Re,7,"Premature end-of-file encountered.")}if(Qo(Re),Se=Ze,Ge=1,ze=(we=Re).D,Je=0<we.L&&we.M>=we.zb&&we.M<=we.Va,we.Aa==0)e:{if(ze.M=we.M,ze.uc=Je,ba(we,ze),Ge=1,ze=(Zt=we.D).Nb,Je=(rn=Gs[we.L])*we.R,xt=rn/2*we.B,Zn=16*ze*we.R,Cn=8*ze*we.B,dt=we.sa,Ot=we.ta-Je+Zn,gt=we.qa,Xe=we.ra-xt+Cn,Tn=we.Ha,zn=we.Ia-xt+Cn,bi=(Rn=Zt.M)==0,sn=Rn>=we.Va-1,we.Aa==2&&ba(we,Zt),Zt.uc)for(li=(Ht=we).D.M,e(Ht.D.uc),Zt=Ht.yb;Zt<Ht.Hb;++Zt){nr=Zt,Lt=li;var Ur=(zr=(wr=Ht).D).Nb;Vn=wr.R;var zr=zr.wa[zr.Y+nr],Qr=wr.sa,ho=wr.ta+16*Ur*Vn+16*nr,qn=zr.dd,Zr=zr.tc;if(Zr!=0)if(e(3<=Zr),wr.L==1)0<nr&&Bs(Qr,ho,Vn,Zr+4),zr.La&&kr(Qr,ho,Vn,Zr),0<Lt&&Nl(Qr,ho,Vn,Zr+4),zr.La&&Ec(Qr,ho,Vn,Zr);else{var Uo=wr.B,jl=wr.qa,Dc=wr.ra+8*Ur*Uo+8*nr,Bl=wr.Ha,wr=wr.Ia+8*Ur*Uo+8*nr;Ur=zr.ld,0<nr&&(us(Qr,ho,Vn,Zr+4,qn,Ur),Il(jl,Dc,Bl,wr,Uo,Zr+4,qn,Ur)),zr.La&&(Rl(Qr,ho,Vn,Zr,qn,Ur),vu(jl,Dc,Bl,wr,Uo,Zr,qn,Ur)),0<Lt&&(_c(Qr,ho,Vn,Zr+4,qn,Ur),mu(jl,Dc,Bl,wr,Uo,Zr+4,qn,Ur)),zr.La&&(Tl(Qr,ho,Vn,Zr,qn,Ur),Ac(jl,Dc,Bl,wr,Uo,Zr,qn,Ur))}}if(we.ia&&alert("todo:DitherRow"),Se.put!=null){if(Zt=16*Rn,Rn=16*(Rn+1),bi?(Se.y=we.sa,Se.O=we.ta+Zn,Se.f=we.qa,Se.N=we.ra+Cn,Se.ea=we.Ha,Se.W=we.Ia+Cn):(Zt-=rn,Se.y=dt,Se.O=Ot,Se.f=gt,Se.N=Xe,Se.ea=Tn,Se.W=zn),sn||(Rn-=rn),Rn>Se.o&&(Rn=Se.o),Se.F=null,Se.J=null,we.Fa!=null&&0<we.Fa.length&&Zt<Rn&&(Se.J=wl(we,Se,Zt,Rn-Zt),Se.F=we.mb,Se.F==null&&Se.F.length==0)){Ge=fr(we,3,"Could not decode alpha data.");break e}Zt<Se.j&&(rn=Se.j-Zt,Zt=Se.j,e(!(1&rn)),Se.O+=we.R*rn,Se.N+=we.B*(rn>>1),Se.W+=we.B*(rn>>1),Se.F!=null&&(Se.J+=Se.width*rn)),Zt<Rn&&(Se.O+=Se.v,Se.N+=Se.v>>1,Se.W+=Se.v>>1,Se.F!=null&&(Se.J+=Se.v),Se.ka=Zt-Se.j,Se.U=Se.va-Se.v,Se.T=Rn-Zt,Ge=Se.put(Se))}ze+1!=we.Ic||sn||(r(we.sa,we.ta-Je,dt,Ot+16*we.R,Je),r(we.qa,we.ra-xt,gt,Xe+8*we.B,xt),r(we.Ha,we.Ia-xt,Tn,zn+8*we.B,xt))}if(!Ge)return fr(Re,6,"Output aborted.")}return 1}(x,S)),S.bc!=null&&S.bc(S),M&=1}return M?(x.cb=0,M):0}function Ci(x,S,M,W,J){J=x[S+M+32*W]+(J>>3),x[S+M+32*W]=-256&J?0>J?0:255:J}function ml(x,S,M,W,J,re){Ci(x,S,0,M,W+J),Ci(x,S,1,M,W+re),Ci(x,S,2,M,W-re),Ci(x,S,3,M,W-J)}function Sn(x){return(20091*x>>16)+x}function Ii(x,S,M,W){var J,re=0,ie=a(16);for(J=0;4>J;++J){var se=x[S+0]+x[S+8],ue=x[S+0]-x[S+8],de=(35468*x[S+4]>>16)-Sn(x[S+12]),be=Sn(x[S+4])+(35468*x[S+12]>>16);ie[re+0]=se+be,ie[re+1]=ue+de,ie[re+2]=ue-de,ie[re+3]=se-be,re+=4,S++}for(J=re=0;4>J;++J)se=(x=ie[re+0]+4)+ie[re+8],ue=x-ie[re+8],de=(35468*ie[re+4]>>16)-Sn(ie[re+12]),Ci(M,W,0,0,se+(be=Sn(ie[re+4])+(35468*ie[re+12]>>16))),Ci(M,W,1,0,ue+de),Ci(M,W,2,0,ue-de),Ci(M,W,3,0,se-be),re++,W+=32}function Zo(x,S,M,W){var J=x[S+0]+4,re=35468*x[S+4]>>16,ie=Sn(x[S+4]),se=35468*x[S+1]>>16;ml(M,W,0,J+ie,x=Sn(x[S+1]),se),ml(M,W,1,J+re,x,se),ml(M,W,2,J-re,x,se),ml(M,W,3,J-ie,x,se)}function Jo(x,S,M,W,J){Ii(x,S,M,W),J&&Ii(x,S+16,M,W+4)}function eo(x,S,M,W){Bo(x,S+0,M,W,1),Bo(x,S+32,M,W+128,1)}function Fn(x,S,M,W){var J;for(x=x[S+0]+4,J=0;4>J;++J)for(S=0;4>S;++S)Ci(M,W,S,J,x)}function es(x,S,M,W){x[S+0]&&Kr(x,S+0,M,W),x[S+16]&&Kr(x,S+16,M,W+4),x[S+32]&&Kr(x,S+32,M,W+128),x[S+48]&&Kr(x,S+48,M,W+128+4)}function ma(x,S,M,W){var J,re=a(16);for(J=0;4>J;++J){var ie=x[S+0+J]+x[S+12+J],se=x[S+4+J]+x[S+8+J],ue=x[S+4+J]-x[S+8+J],de=x[S+0+J]-x[S+12+J];re[0+J]=ie+se,re[8+J]=ie-se,re[4+J]=de+ue,re[12+J]=de-ue}for(J=0;4>J;++J)ie=(x=re[0+4*J]+3)+re[3+4*J],se=re[1+4*J]+re[2+4*J],ue=re[1+4*J]-re[2+4*J],de=x-re[3+4*J],M[W+0]=ie+se>>3,M[W+16]=de+ue>>3,M[W+32]=ie-se>>3,M[W+48]=de-ue>>3,W+=64}function No(x,S,M){var W,J=S-32,re=yi,ie=255-x[J-1];for(W=0;W<M;++W){var se,ue=re,de=ie+x[S-1];for(se=0;se<M;++se)x[S+se]=ue[de+x[J+se]];S+=32}}function uu(x,S){No(x,S,4)}function pc(x,S){No(x,S,8)}function gc(x,S){No(x,S,16)}function Do(x,S){var M;for(M=0;16>M;++M)r(x,S+32*M,x,S-32,16)}function vl(x,S){var M;for(M=16;0<M;--M)i(x,S,x[S-1],16),S+=32}function Oo(x,S,M){var W;for(W=0;16>W;++W)i(S,M+32*W,x,16)}function to(x,S){var M,W=16;for(M=0;16>M;++M)W+=x[S-1+32*M]+x[S+M-32];Oo(W>>5,x,S)}function tr(x,S){var M,W=8;for(M=0;16>M;++M)W+=x[S-1+32*M];Oo(W>>4,x,S)}function ko(x,S){var M,W=8;for(M=0;16>M;++M)W+=x[S+M-32];Oo(W>>4,x,S)}function no(x,S){Oo(128,x,S)}function Ft(x,S,M){return x+2*S+M+2>>2}function ro(x,S){var M,W=S-32;for(W=new Uint8Array([Ft(x[W-1],x[W+0],x[W+1]),Ft(x[W+0],x[W+1],x[W+2]),Ft(x[W+1],x[W+2],x[W+3]),Ft(x[W+2],x[W+3],x[W+4])]),M=0;4>M;++M)r(x,S+32*M,W,0,W.length)}function fu(x,S){var M=x[S-1],W=x[S-1+32],J=x[S-1+64],re=x[S-1+96];$e(x,S+0,16843009*Ft(x[S-1-32],M,W)),$e(x,S+32,16843009*Ft(M,W,J)),$e(x,S+64,16843009*Ft(W,J,re)),$e(x,S+96,16843009*Ft(J,re,re))}function Fi(x,S){var M,W=4;for(M=0;4>M;++M)W+=x[S+M-32]+x[S-1+32*M];for(W>>=3,M=0;4>M;++M)i(x,S+32*M,W,4)}function va(x,S){var M=x[S-1+0],W=x[S-1+32],J=x[S-1+64],re=x[S-1-32],ie=x[S+0-32],se=x[S+1-32],ue=x[S+2-32],de=x[S+3-32];x[S+0+96]=Ft(W,J,x[S-1+96]),x[S+1+96]=x[S+0+64]=Ft(M,W,J),x[S+2+96]=x[S+1+64]=x[S+0+32]=Ft(re,M,W),x[S+3+96]=x[S+2+64]=x[S+1+32]=x[S+0+0]=Ft(ie,re,M),x[S+3+64]=x[S+2+32]=x[S+1+0]=Ft(se,ie,re),x[S+3+32]=x[S+2+0]=Ft(ue,se,ie),x[S+3+0]=Ft(de,ue,se)}function ea(x,S){var M=x[S+1-32],W=x[S+2-32],J=x[S+3-32],re=x[S+4-32],ie=x[S+5-32],se=x[S+6-32],ue=x[S+7-32];x[S+0+0]=Ft(x[S+0-32],M,W),x[S+1+0]=x[S+0+32]=Ft(M,W,J),x[S+2+0]=x[S+1+32]=x[S+0+64]=Ft(W,J,re),x[S+3+0]=x[S+2+32]=x[S+1+64]=x[S+0+96]=Ft(J,re,ie),x[S+3+32]=x[S+2+64]=x[S+1+96]=Ft(re,ie,se),x[S+3+64]=x[S+2+96]=Ft(ie,se,ue),x[S+3+96]=Ft(se,ue,ue)}function io(x,S){var M=x[S-1+0],W=x[S-1+32],J=x[S-1+64],re=x[S-1-32],ie=x[S+0-32],se=x[S+1-32],ue=x[S+2-32],de=x[S+3-32];x[S+0+0]=x[S+1+64]=re+ie+1>>1,x[S+1+0]=x[S+2+64]=ie+se+1>>1,x[S+2+0]=x[S+3+64]=se+ue+1>>1,x[S+3+0]=ue+de+1>>1,x[S+0+96]=Ft(J,W,M),x[S+0+64]=Ft(W,M,re),x[S+0+32]=x[S+1+96]=Ft(M,re,ie),x[S+1+32]=x[S+2+96]=Ft(re,ie,se),x[S+2+32]=x[S+3+96]=Ft(ie,se,ue),x[S+3+32]=Ft(se,ue,de)}function ya(x,S){var M=x[S+0-32],W=x[S+1-32],J=x[S+2-32],re=x[S+3-32],ie=x[S+4-32],se=x[S+5-32],ue=x[S+6-32],de=x[S+7-32];x[S+0+0]=M+W+1>>1,x[S+1+0]=x[S+0+64]=W+J+1>>1,x[S+2+0]=x[S+1+64]=J+re+1>>1,x[S+3+0]=x[S+2+64]=re+ie+1>>1,x[S+0+32]=Ft(M,W,J),x[S+1+32]=x[S+0+96]=Ft(W,J,re),x[S+2+32]=x[S+1+96]=Ft(J,re,ie),x[S+3+32]=x[S+2+96]=Ft(re,ie,se),x[S+3+64]=Ft(ie,se,ue),x[S+3+96]=Ft(se,ue,de)}function ts(x,S){var M=x[S-1+0],W=x[S-1+32],J=x[S-1+64],re=x[S-1+96];x[S+0+0]=M+W+1>>1,x[S+2+0]=x[S+0+32]=W+J+1>>1,x[S+2+32]=x[S+0+64]=J+re+1>>1,x[S+1+0]=Ft(M,W,J),x[S+3+0]=x[S+1+32]=Ft(W,J,re),x[S+3+32]=x[S+1+64]=Ft(J,re,re),x[S+3+64]=x[S+2+64]=x[S+0+96]=x[S+1+96]=x[S+2+96]=x[S+3+96]=re}function Po(x,S){var M=x[S-1+0],W=x[S-1+32],J=x[S-1+64],re=x[S-1+96],ie=x[S-1-32],se=x[S+0-32],ue=x[S+1-32],de=x[S+2-32];x[S+0+0]=x[S+2+32]=M+ie+1>>1,x[S+0+32]=x[S+2+64]=W+M+1>>1,x[S+0+64]=x[S+2+96]=J+W+1>>1,x[S+0+96]=re+J+1>>1,x[S+3+0]=Ft(se,ue,de),x[S+2+0]=Ft(ie,se,ue),x[S+1+0]=x[S+3+32]=Ft(M,ie,se),x[S+1+32]=x[S+3+64]=Ft(W,M,ie),x[S+1+64]=x[S+3+96]=Ft(J,W,M),x[S+1+96]=Ft(re,J,W)}function mc(x,S){var M;for(M=0;8>M;++M)r(x,S+32*M,x,S-32,8)}function xa(x,S){var M;for(M=0;8>M;++M)i(x,S,x[S-1],8),S+=32}function Ui(x,S,M){var W;for(W=0;8>W;++W)i(S,M+32*W,x,8)}function ao(x,S){var M,W=8;for(M=0;8>M;++M)W+=x[S+M-32]+x[S-1+32*M];Ui(W>>4,x,S)}function Yr(x,S){var M,W=4;for(M=0;8>M;++M)W+=x[S+M-32];Ui(W>>3,x,S)}function hn(x,S){var M,W=4;for(M=0;8>M;++M)W+=x[S-1+32*M];Ui(W>>3,x,S)}function ns(x,S){Ui(128,x,S)}function oo(x,S,M){var W=x[S-M],J=x[S+0],re=3*(J-W)+xh[1020+x[S-2*M]-x[S+M]],ie=Sc[112+(re+4>>3)];x[S-M]=yi[255+W+Sc[112+(re+3>>3)]],x[S+0]=yi[255+J-ie]}function vc(x,S,M,W){var J=x[S+0],re=x[S+M];return uo[255+x[S-2*M]-x[S-M]]>W||uo[255+re-J]>W}function Ns(x,S,M,W){return 4*uo[255+x[S-M]-x[S+0]]+uo[255+x[S-2*M]-x[S+M]]<=W}function Ds(x,S,M,W,J){var re=x[S-3*M],ie=x[S-2*M],se=x[S-M],ue=x[S+0],de=x[S+M],be=x[S+2*M],Pe=x[S+3*M];return 4*uo[255+se-ue]+uo[255+ie-de]>W?0:uo[255+x[S-4*M]-re]<=J&&uo[255+re-ie]<=J&&uo[255+ie-se]<=J&&uo[255+Pe-be]<=J&&uo[255+be-de]<=J&&uo[255+de-ue]<=J}function qa(x,S,M,W){var J=2*W+1;for(W=0;16>W;++W)Ns(x,S+W,M,J)&&oo(x,S+W,M)}function zi(x,S,M,W){var J=2*W+1;for(W=0;16>W;++W)Ns(x,S+W*M,1,J)&&oo(x,S+W*M,1)}function Xr(x,S,M,W){var J;for(J=3;0<J;--J)qa(x,S+=4*M,M,W)}function hu(x,S,M,W){var J;for(J=3;0<J;--J)zi(x,S+=4,M,W)}function rs(x,S,M,W,J,re,ie,se){for(re=2*re+1;0<J--;){if(Ds(x,S,M,re,ie))if(vc(x,S,M,se))oo(x,S,M);else{var ue=x,de=S,be=M,Pe=ue[de-2*be],Oe=ue[de-be],Re=ue[de+0],Ze=ue[de+be],ze=ue[de+2*be],we=27*(Ge=xh[1020+3*(Re-Oe)+xh[1020+Pe-Ze]])+63>>7,Se=18*Ge+63>>7,Ge=9*Ge+63>>7;ue[de-3*be]=yi[255+ue[de-3*be]+Ge],ue[de-2*be]=yi[255+Pe+Se],ue[de-be]=yi[255+Oe+we],ue[de+0]=yi[255+Re-we],ue[de+be]=yi[255+Ze-Se],ue[de+2*be]=yi[255+ze-Ge]}S+=W}}function Ti(x,S,M,W,J,re,ie,se){for(re=2*re+1;0<J--;){if(Ds(x,S,M,re,ie))if(vc(x,S,M,se))oo(x,S,M);else{var ue=x,de=S,be=M,Pe=ue[de-be],Oe=ue[de+0],Re=ue[de+be],Ze=Sc[112+((ze=3*(Oe-Pe))+4>>3)],ze=Sc[112+(ze+3>>3)],we=Ze+1>>1;ue[de-2*be]=yi[255+ue[de-2*be]+we],ue[de-be]=yi[255+Pe+ze],ue[de+0]=yi[255+Oe-Ze],ue[de+be]=yi[255+Re-we]}S+=W}}function is(x,S,M,W,J,re){rs(x,S,M,1,16,W,J,re)}function Lo(x,S,M,W,J,re){rs(x,S,1,M,16,W,J,re)}function yl(x,S,M,W,J,re){var ie;for(ie=3;0<ie;--ie)Ti(x,S+=4*M,M,1,16,W,J,re)}function Os(x,S,M,W,J,re){var ie;for(ie=3;0<ie;--ie)Ti(x,S+=4,1,M,16,W,J,re)}function xl(x,S,M,W,J,re,ie,se){rs(x,S,J,1,8,re,ie,se),rs(M,W,J,1,8,re,ie,se)}function yc(x,S,M,W,J,re,ie,se){rs(x,S,1,J,8,re,ie,se),rs(M,W,1,J,8,re,ie,se)}function ks(x,S,M,W,J,re,ie,se){Ti(x,S+4*J,J,1,8,re,ie,se),Ti(M,W+4*J,J,1,8,re,ie,se)}function as(x,S,M,W,J,re,ie,se){Ti(x,S+4,1,J,8,re,ie,se),Ti(M,W+4,1,J,8,re,ie,se)}function Ps(){this.ba=new jr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function bl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ls(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function os(){this.ua=0,this.Wa=new ve,this.vb=new ve,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new k}function du(){this.xb=this.a=0,this.l=new Ro,this.ca=new jr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new os,this.ab=0,this.gc=o(4,Ls),this.Oc=0}function Mo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ro,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ss(x,S,M,W,J,re,ie){for(x=x==null?0:x[S+0],S=0;S<ie;++S)J[re+S]=x+M[W+S]&255,x=J[re+S]}function Ms(x,S,M,W,J,re,ie){var se;if(x==null)ss(null,null,M,W,J,re,ie);else for(se=0;se<ie;++se)J[re+se]=x[S+se]+M[W+se]&255}function Vi(x,S,M,W,J,re,ie){if(x==null)ss(null,null,M,W,J,re,ie);else{var se,ue=x[S+0],de=ue,be=ue;for(se=0;se<ie;++se)de=be+(ue=x[S+se])-de,be=M[W+se]+(-256&de?0>de?0:255:de)&255,de=ue,J[re+se]=be}}function wl(x,S,M,W){var J=S.width,re=S.o;if(e(x!=null&&S!=null),0>M||0>=W||M+W>re)return null;if(!x.Cc){if(x.ga==null){var ie;if(x.ga=new Mo,(ie=x.ga==null)||(ie=S.width*S.o,e(x.Gb.length==0),x.Gb=a(ie),x.Uc=0,x.Gb==null?ie=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,ie=1),ie=!ie),!ie){ie=x.ga;var se=x.Fa,ue=x.P,de=x.qc,be=x.mb,Pe=x.nb,Oe=ue+1,Re=de-1,Ze=ie.l;if(e(se!=null&&be!=null&&S!=null),ds[0]=null,ds[1]=ss,ds[2]=Ms,ds[3]=Vi,ie.ca=be,ie.tb=Pe,ie.c=S.width,ie.i=S.height,e(0<ie.c&&0<ie.i),1>=de)S=0;else if(ie.$a=se[ue+0]>>0&3,ie.Z=se[ue+0]>>2&3,ie.Lc=se[ue+0]>>4&3,ue=se[ue+0]>>6&3,0>ie.$a||1<ie.$a||4<=ie.Z||1<ie.Lc||ue)S=0;else if(Ze.put=vr,Ze.ac=jn,Ze.bc=Ua,Ze.ma=ie,Ze.width=S.width,Ze.height=S.height,Ze.Da=S.Da,Ze.v=S.v,Ze.va=S.va,Ze.j=S.j,Ze.o=S.o,ie.$a)e:{e(ie.$a==1),S=ur();t:for(;;){if(S==null){S=0;break e}if(e(ie!=null),ie.mc=S,S.c=ie.c,S.i=ie.i,S.l=ie.l,S.l.ma=ie,S.l.width=ie.c,S.l.height=ie.i,S.a=0,te(S.m,se,Oe,Re),!Bn(ie.c,ie.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&Ji(S.s)?(ie.ic=1,se=S.c*S.i,S.Ta=null,S.Ua=0,S.V=a(se),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(ie.ic=0,S=Co(S,ie.c)),!S))break t;S=1;break e}ie.mc=null,S=0}else S=Re>=ie.c*ie.i;ie=!S}if(ie)return null;x.ga.Lc!=1?x.Ga=0:W=re-M}e(x.ga!=null),e(M+W<=re);e:{if(S=(se=x.ga).c,re=se.l.o,se.$a==0){if(Oe=x.rc,Re=x.Vc,Ze=x.Fa,ue=x.P+1+M*S,de=x.mb,be=x.nb+M*S,e(ue<=x.P+x.qc),se.Z!=0)for(e(ds[se.Z]!=null),ie=0;ie<W;++ie)ds[se.Z](Oe,Re,Ze,ue,de,be,S),Oe=de,Re=be,be+=S,ue+=S;else for(ie=0;ie<W;++ie)r(de,be,Ze,ue,S),Oe=de,Re=be,be+=S,ue+=S;x.rc=Oe,x.Vc=Re}else{if(e(se.mc!=null),S=M+W,e((ie=se.mc)!=null),e(S<=ie.i),ie.C>=S)S=1;else if(se.ic||Te(),se.ic){se=ie.V,Oe=ie.Ba,Re=ie.c;var ze=ie.i,we=(Ze=1,ue=ie.$/Re,de=ie.$%Re,be=ie.m,Pe=ie.s,ie.$),Se=Re*ze,Ge=Re*S,Je=Pe.wc,Xe=we<Ge?Dr(Pe,de,ue):null;e(we<=Se),e(S<=ze),e(Ji(Pe));t:for(;;){for(;!be.h&&we<Ge;){if(de&Je||(Xe=Dr(Pe,de,ue)),e(Xe!=null),pe(be),256>(ze=yr(Xe.G[0],Xe.H[0],be)))se[Oe+we]=ze,++we,++de>=Re&&(de=0,++ue<=S&&!(ue%16)&&ti(ie,ue));else{if(!(280>ze)){Ze=0;break t}ze=Gn(ze-256,be);var xt,dt=yr(Xe.G[4],Xe.H[4],be);if(pe(be),!(we>=(dt=$n(Re,dt=Gn(dt,be)))&&Se-we>=ze)){Ze=0;break t}for(xt=0;xt<ze;++xt)se[Oe+we+xt]=se[Oe+we+xt-dt];for(we+=ze,de+=ze;de>=Re;)de-=Re,++ue<=S&&!(ue%16)&&ti(ie,ue);we<Ge&&de&Je&&(Xe=Dr(Pe,de,ue))}e(be.h==ne(be))}ti(ie,ue>S?S:ue);break t}!Ze||be.h&&we<Se?(Ze=0,ie.a=be.h?5:3):ie.$=we,S=Ze}else S=$r(ie,ie.V,ie.Ba,ie.c,ie.i,S,Io);if(!S){W=0;break e}}M+W>=re&&(x.Cc=1),W=1}if(!W)return null;if(x.Cc&&((W=x.ga)!=null&&(W.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+M*J}function O(x,S,M,W,J,re){for(;0<J--;){var ie,se=x,ue=S+(M?1:0),de=x,be=S+(M?0:3);for(ie=0;ie<W;++ie){var Pe=de[be+4*ie];Pe!=255&&(Pe*=32897,se[ue+4*ie+0]=se[ue+4*ie+0]*Pe>>23,se[ue+4*ie+1]=se[ue+4*ie+1]*Pe>>23,se[ue+4*ie+2]=se[ue+4*ie+2]*Pe>>23)}S+=re}}function ee(x,S,M,W,J){for(;0<W--;){var re;for(re=0;re<M;++re){var ie=x[S+2*re+0],se=15&(de=x[S+2*re+1]),ue=4369*se,de=(240&de|de>>4)*ue>>16;x[S+2*re+0]=(240&ie|ie>>4)*ue>>16&240|(15&ie|ie<<4)*ue>>16>>4&15,x[S+2*re+1]=240&de|se}S+=J}}function me(x,S,M,W,J,re,ie,se){var ue,de,be=255;for(de=0;de<J;++de){for(ue=0;ue<W;++ue){var Pe=x[S+ue];re[ie+4*ue]=Pe,be&=Pe}S+=M,ie+=se}return be!=255}function xe(x,S,M,W,J){var re;for(re=0;re<J;++re)M[W+re]=x[S+re]>>8}function Te(){Ha=O,ln=ee,cn=me,hr=xe}function Ve(x,S,M){E[x]=function(W,J,re,ie,se,ue,de,be,Pe,Oe,Re,Ze,ze,we,Se,Ge,Je){var Xe,xt=Je-1>>1,dt=se[ue+0]|de[be+0]<<16,Ot=Pe[Oe+0]|Re[Ze+0]<<16;e(W!=null);var gt=3*dt+Ot+131074>>2;for(S(W[J+0],255&gt,gt>>16,ze,we),re!=null&&(gt=3*Ot+dt+131074>>2,S(re[ie+0],255&gt,gt>>16,Se,Ge)),Xe=1;Xe<=xt;++Xe){var Tn=se[ue+Xe]|de[be+Xe]<<16,zn=Pe[Oe+Xe]|Re[Ze+Xe]<<16,sn=dt+Tn+Ot+zn+524296,rn=sn+2*(Tn+Ot)>>3;gt=rn+dt>>1,dt=(sn=sn+2*(dt+zn)>>3)+Tn>>1,S(W[J+2*Xe-1],255&gt,gt>>16,ze,we+(2*Xe-1)*M),S(W[J+2*Xe-0],255&dt,dt>>16,ze,we+(2*Xe-0)*M),re!=null&&(gt=sn+Ot>>1,dt=rn+zn>>1,S(re[ie+2*Xe-1],255&gt,gt>>16,Se,Ge+(2*Xe-1)*M),S(re[ie+2*Xe+0],255&dt,dt>>16,Se,Ge+(2*Xe+0)*M)),dt=Tn,Ot=zn}1&Je||(gt=3*dt+Ot+131074>>2,S(W[J+Je-1],255&gt,gt>>16,ze,we+(Je-1)*M),re!=null&&(gt=3*Ot+dt+131074>>2,S(re[ie+Je-1],255&gt,gt>>16,Se,Ge+(Je-1)*M)))}}function it(){xi[qi]=Ws,xi[yu]=ps,xi[fs]=Ll,xi[Ef]=_h,xi[Cc]=Ah,xi[Us]=wu,xi[bh]=Eh,xi[Sf]=ps,xi[kl]=_h,xi[zs]=Ah,xi[xu]=wu}function pt(x){return x&-16384?0>x?0:255:x>>Hm}function w(x,S){return pt((19077*x>>8)+(26149*S>>8)-14234)}function F(x,S,M){return pt((19077*x>>8)-(6419*S>>8)-(13320*M>>8)+8708)}function $(x,S){return pt((19077*x>>8)+(33050*S>>8)-17685)}function le(x,S,M,W,J){W[J+0]=w(x,M),W[J+1]=F(x,S,M),W[J+2]=$(x,S)}function Ce(x,S,M,W,J){W[J+0]=$(x,S),W[J+1]=F(x,S,M),W[J+2]=w(x,M)}function Le(x,S,M,W,J){var re=F(x,S,M);S=re<<3&224|$(x,S)>>3,W[J+0]=248&w(x,M)|re>>5,W[J+1]=S}function ot(x,S,M,W,J){var re=240&$(x,S)|15;W[J+0]=240&w(x,M)|F(x,S,M)>>4,W[J+1]=re}function Ut(x,S,M,W,J){W[J+0]=255,le(x,S,M,W,J+1)}function dn(x,S,M,W,J){Ce(x,S,M,W,J),W[J+3]=255}function Qt(x,S,M,W,J){le(x,S,M,W,J),W[J+3]=255}function Un(x,S){return 0>x?0:x>S?S:x}function Qn(x,S,M){E[x]=function(W,J,re,ie,se,ue,de,be,Pe){for(var Oe=be+(-2&Pe)*M;be!=Oe;)S(W[J+0],re[ie+0],se[ue+0],de,be),S(W[J+1],re[ie+0],se[ue+0],de,be+M),J+=2,++ie,++ue,be+=2*M;1&Pe&&S(W[J+0],re[ie+0],se[ue+0],de,be)}}function so(x,S,M){return M==0?x==0?S==0?6:5:S==0?4:0:M}function Br(x,S,M,W,J){switch(x>>>30){case 3:Bo(S,M,W,J,0);break;case 2:Or(S,M,W,J);break;case 1:Kr(S,M,W,J)}}function ba(x,S){var M,W,J=S.M,re=S.Nb,ie=x.oc,se=x.pc+40,ue=x.oc,de=x.pc+584,be=x.oc,Pe=x.pc+600;for(M=0;16>M;++M)ie[se+32*M-1]=129;for(M=0;8>M;++M)ue[de+32*M-1]=129,be[Pe+32*M-1]=129;for(0<J?ie[se-1-32]=ue[de-1-32]=be[Pe-1-32]=129:(i(ie,se-32-1,127,21),i(ue,de-32-1,127,9),i(be,Pe-32-1,127,9)),W=0;W<x.za;++W){var Oe=S.ya[S.aa+W];if(0<W){for(M=-1;16>M;++M)r(ie,se+32*M-4,ie,se+32*M+12,4);for(M=-1;8>M;++M)r(ue,de+32*M-4,ue,de+32*M+4,4),r(be,Pe+32*M-4,be,Pe+32*M+4,4)}var Re=x.Gd,Ze=x.Hd+W,ze=Oe.ad,we=Oe.Hc;if(0<J&&(r(ie,se-32,Re[Ze].y,0,16),r(ue,de-32,Re[Ze].f,0,8),r(be,Pe-32,Re[Ze].ea,0,8)),Oe.Za){var Se=ie,Ge=se-32+16;for(0<J&&(W>=x.za-1?i(Se,Ge,Re[Ze].y[15],4):r(Se,Ge,Re[Ze+1].y,0,4)),M=0;4>M;M++)Se[Ge+128+M]=Se[Ge+256+M]=Se[Ge+384+M]=Se[Ge+0+M];for(M=0;16>M;++M,we<<=2)Se=ie,Ge=se+Nc[M],na[Oe.Ob[M]](Se,Ge),Br(we,ze,16*+M,Se,Ge)}else if(Se=so(W,J,Oe.Ob[0]),Hs[Se](ie,se),we!=0)for(M=0;16>M;++M,we<<=2)Br(we,ze,16*+M,ie,se+Nc[M]);for(M=Oe.Gc,Se=so(W,J,Oe.Dd),Ga[Se](ue,de),Ga[Se](be,Pe),we=ze,Se=ue,Ge=de,255&(Oe=M>>0)&&(170&Oe?Fo(we,256,Se,Ge):Aa(we,256,Se,Ge)),Oe=be,we=Pe,255&(M>>=8)&&(170&M?Fo(ze,320,Oe,we):Aa(ze,320,Oe,we)),J<x.Ub-1&&(r(Re[Ze].y,0,ie,se+480,16),r(Re[Ze].f,0,ue,de+224,8),r(Re[Ze].ea,0,be,Pe+224,8)),M=8*re*x.B,Re=x.sa,Ze=x.ta+16*W+16*re*x.R,ze=x.qa,Oe=x.ra+8*W+M,we=x.Ha,Se=x.Ia+8*W+M,M=0;16>M;++M)r(Re,Ze+M*x.R,ie,se+32*M,16);for(M=0;8>M;++M)r(ze,Oe+M*x.B,ue,de+32*M,8),r(we,Se+M*x.B,be,Pe+32*M,8)}}function ls(x,S,M,W,J,re,ie,se,ue){var de=[0],be=[0],Pe=0,Oe=ue!=null?ue.kd:0,Re=ue??new bl;if(x==null||12>M)return 7;Re.data=x,Re.w=S,Re.ha=M,S=[S],M=[M],Re.gb=[Re.gb];e:{var Ze=S,ze=M,we=Re.gb;if(e(x!=null),e(ze!=null),e(we!=null),we[0]=0,12<=ze[0]&&!t(x,Ze[0],"RIFF")){if(t(x,Ze[0]+8,"WEBP")){we=3;break e}var Se=lt(x,Ze[0]+4);if(12>Se||4294967286<Se){we=3;break e}if(Oe&&Se>ze[0]-8){we=7;break e}we[0]=Se,Ze[0]+=12,ze[0]-=12}we=0}if(we!=0)return we;for(Se=0<Re.gb[0],M=M[0];;){e:{var Ge=x;ze=S,we=M;var Je=de,Xe=be,xt=Ze=[0];if((gt=Pe=[Pe])[0]=0,8>we[0])we=7;else{if(!t(Ge,ze[0],"VP8X")){if(lt(Ge,ze[0]+4)!=10){we=3;break e}if(18>we[0]){we=7;break e}var dt=lt(Ge,ze[0]+8),Ot=1+at(Ge,ze[0]+12);if(2147483648<=Ot*(Ge=1+at(Ge,ze[0]+15))){we=3;break e}xt!=null&&(xt[0]=dt),Je!=null&&(Je[0]=Ot),Xe!=null&&(Xe[0]=Ge),ze[0]+=18,we[0]-=18,gt[0]=1}we=0}}if(Pe=Pe[0],Ze=Ze[0],we!=0)return we;if(ze=!!(2&Ze),!Se&&Pe)return 3;if(re!=null&&(re[0]=!!(16&Ze)),ie!=null&&(ie[0]=ze),se!=null&&(se[0]=0),ie=de[0],Ze=be[0],Pe&&ze&&ue==null){we=0;break}if(4>M){we=7;break}if(Se&&Pe||!Se&&!Pe&&!t(x,S[0],"ALPH")){M=[M],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{dt=x,we=S,Se=M;var gt=Re.gb;Je=Re.na,Xe=Re.P,xt=Re.Sa,Ot=22,e(dt!=null),e(Se!=null),Ge=we[0];var Tn=Se[0];for(e(Je!=null),e(xt!=null),Je[0]=null,Xe[0]=null,xt[0]=0;;){if(we[0]=Ge,Se[0]=Tn,8>Tn){we=7;break e}var zn=lt(dt,Ge+4);if(4294967286<zn){we=3;break e}var sn=8+zn+1&-2;if(Ot+=sn,0<gt&&Ot>gt){we=3;break e}if(!t(dt,Ge,"VP8 ")||!t(dt,Ge,"VP8L")){we=0;break e}if(Tn[0]<sn){we=7;break e}t(dt,Ge,"ALPH")||(Je[0]=dt,Xe[0]=Ge+8,xt[0]=zn),Ge+=sn,Tn-=sn}}if(M=M[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],we!=0)break}M=[M],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(gt=x,we=S,Se=M,Je=Re.gb[0],Xe=Re.Ja,xt=Re.xa,dt=we[0],Ge=!t(gt,dt,"VP8 "),Ot=!t(gt,dt,"VP8L"),e(gt!=null),e(Se!=null),e(Xe!=null),e(xt!=null),8>Se[0])we=7;else{if(Ge||Ot){if(gt=lt(gt,dt+4),12<=Je&&gt>Je-12){we=3;break e}if(Oe&&gt>Se[0]-8){we=7;break e}Xe[0]=gt,we[0]+=8,Se[0]-=8,xt[0]=Ot}else xt[0]=5<=Se[0]&&gt[dt+0]==47&&!(gt[dt+4]>>5),Xe[0]=Se[0];we=0}if(M=M[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],S=S[0],we!=0)break;if(4294967286<Re.Ja)return 3;if(se==null||ze||(se[0]=Re.xa?2:1),ie=[ie],Ze=[Ze],Re.xa){if(5>M){we=7;break}se=ie,Oe=Ze,ze=re,x==null||5>M?x=0:5<=M&&x[S+0]==47&&!(x[S+4]>>5)?(Se=[0],gt=[0],Je=[0],te(Xe=new G,x,S,M),yt(Xe,Se,gt,Je)?(se!=null&&(se[0]=Se[0]),Oe!=null&&(Oe[0]=gt[0]),ze!=null&&(ze[0]=Je[0]),x=1):x=0):x=0}else{if(10>M){we=7;break}se=Ze,x==null||10>M||!mi(x,S+3,M-3)?x=0:(Oe=x[S+0]|x[S+1]<<8|x[S+2]<<16,ze=16383&(x[S+7]<<8|x[S+6]),x=16383&(x[S+9]<<8|x[S+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Re.Ja||!ze||!x?x=0:(ie&&(ie[0]=ze),se&&(se[0]=x),x=1))}if(!x||(ie=ie[0],Ze=Ze[0],Pe&&(de[0]!=ie||be[0]!=Ze)))return 3;ue!=null&&(ue[0]=Re,ue.offset=S-ue.w,e(4294967286>S-ue.w),e(ue.offset==ue.ha-M));break}return we==0||we==7&&Pe&&ue==null?(re!=null&&(re[0]|=Re.na!=null&&0<Re.na.length),W!=null&&(W[0]=ie),J!=null&&(J[0]=Ze),0):we}function _l(x,S,M){var W=S.width,J=S.height,re=0,ie=0,se=W,ue=J;if(S.Da=x!=null&&0<x.Da,S.Da&&(se=x.cd,ue=x.bd,re=x.v,ie=x.j,11>M||(re&=-2,ie&=-2),0>re||0>ie||0>=se||0>=ue||re+se>W||ie+ue>J))return 0;if(S.v=re,S.j=ie,S.va=re+se,S.o=ie+ue,S.U=se,S.T=ue,S.da=x!=null&&0<x.da,S.da){if(!ht(se,ue,M=[x.ib],re=[x.hb]))return 0;S.ib=M[0],S.hb=re[0]}return S.ob=x!=null&&x.ob,S.Kb=x==null||!x.Sd,S.da&&(S.ob=S.ib<3*W/4&&S.hb<3*J/4,S.Kb=0),1}function pu(x){if(x==null)return 2;if(11>x.S){var S=x.f.RGBA;S.fb+=(x.height-1)*S.A,S.A=-S.A}else S=x.f.kb,x=x.height,S.O+=(x-1)*S.fa,S.fa=-S.fa,S.N+=(x-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(x-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(x-1)*S.lb,S.lb=-S.lb);return 0}function xc(x,S,M,W){if(W==null||0>=x||0>=S)return 2;if(M!=null){if(M.Da){var J=M.cd,re=M.bd,ie=-2&M.v,se=-2&M.j;if(0>ie||0>se||0>=J||0>=re||ie+J>x||se+re>S)return 2;x=J,S=re}if(M.da){if(!ht(x,S,J=[M.ib],re=[M.hb]))return 2;x=J[0],S=re[0]}}W.width=x,W.height=S;e:{var ue=W.width,de=W.height;if(x=W.S,0>=ue||0>=de||!(x>=qi&&13>x))x=2;else{if(0>=W.Rd&&W.sd==null){ie=re=J=S=0;var be=(se=ue*F1[x])*de;if(11>x||(re=(de+1)/2*(S=(ue+1)/2),x==12&&(ie=(J=ue)*de)),(de=a(be+2*re+ie))==null){x=1;break e}W.sd=de,11>x?((ue=W.f.RGBA).eb=de,ue.fb=0,ue.A=se,ue.size=be):((ue=W.f.kb).y=de,ue.O=0,ue.fa=se,ue.Fd=be,ue.f=de,ue.N=0+be,ue.Ab=S,ue.Cd=re,ue.ea=de,ue.W=0+be+re,ue.Db=S,ue.Ed=re,x==12&&(ue.F=de,ue.J=0+be+2*re),ue.Tc=ie,ue.lb=J)}if(S=1,J=W.S,re=W.width,ie=W.height,J>=qi&&13>J)if(11>J)x=W.f.RGBA,S&=(se=Math.abs(x.A))*(ie-1)+re<=x.size,S&=se>=re*F1[J],S&=x.eb!=null;else{x=W.f.kb,se=(re+1)/2,be=(ie+1)/2,ue=Math.abs(x.fa),de=Math.abs(x.Ab);var Pe=Math.abs(x.Db),Oe=Math.abs(x.lb),Re=Oe*(ie-1)+re;S&=ue*(ie-1)+re<=x.Fd,S&=de*(be-1)+se<=x.Cd,S=(S&=Pe*(be-1)+se<=x.Ed)&ue>=re&de>=se&Pe>=se,S&=x.y!=null,S&=x.f!=null,S&=x.ea!=null,J==12&&(S&=Oe>=re,S&=Re<=x.Tc,S&=x.F!=null)}else S=0;x=S?0:2}}return x!=0||M!=null&&M.fd&&(x=pu(W)),x}var ii=64,Al=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bc=24,wc=32,gu=8,wa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(x){return x},E.Predictor2=function(x,S,M){return S[M+0]},E.Predictor3=function(x,S,M){return S[M+1]},E.Predictor4=function(x,S,M){return S[M-1]},E.Predictor5=function(x,S,M){return st(st(x,S[M+1]),S[M+0])},E.Predictor6=function(x,S,M){return st(x,S[M-1])},E.Predictor7=function(x,S,M){return st(x,S[M+0])},E.Predictor8=function(x,S,M){return st(S[M-1],S[M+0])},E.Predictor9=function(x,S,M){return st(S[M+0],S[M+1])},E.Predictor10=function(x,S,M){return st(st(x,S[M-1]),st(S[M+0],S[M+1]))},E.Predictor11=function(x,S,M){var W=S[M+0];return 0>=At(W>>24&255,x>>24&255,(S=S[M-1])>>24&255)+At(W>>16&255,x>>16&255,S>>16&255)+At(W>>8&255,x>>8&255,S>>8&255)+At(255&W,255&x,255&S)?W:x},E.Predictor12=function(x,S,M){var W=S[M+0];return(nt((x>>24&255)+(W>>24&255)-((S=S[M-1])>>24&255))<<24|nt((x>>16&255)+(W>>16&255)-(S>>16&255))<<16|nt((x>>8&255)+(W>>8&255)-(S>>8&255))<<8|nt((255&x)+(255&W)-(255&S)))>>>0},E.Predictor13=function(x,S,M){var W=S[M-1];return(ut((x=st(x,S[M+0]))>>24&255,W>>24&255)<<24|ut(x>>16&255,W>>16&255)<<16|ut(x>>8&255,W>>8&255)<<8|ut(x>>0&255,W>>0&255))>>>0};var jd=E.PredictorAdd0;E.PredictorAdd1=vt,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var _f=E.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var yh,lo=E.ColorIndexInverseTransform,vi=E.MapARGB,El=E.VP8LColorIndexInverseTransformAlpha,Af=E.MapAlpha,js=E.VP8LPredictorsAdd=[];js.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Sl,ta,Ri,Cl,_a,jo,cs,Bo,Or,Fo,Kr,Aa,_c,us,mu,Il,Tl,Rl,Ac,vu,Nl,Bs,Ec,kr,Ha,ln,cn,hr,Fr=a(511),co=a(2041),Dl=a(225),Ol=a(767),Fs=0,xh=co,Sc=Dl,yi=Ol,uo=Fr,qi=0,yu=1,fs=2,Ef=3,Cc=4,Us=5,bh=6,Sf=7,kl=8,zs=9,xu=10,wh=[2,3,7],fo=[3,3,11],Wa=[280,256,256,256,40],Ic=[0,1,1,1,0],Vs=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qs=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Tc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],P1=8,Cf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],If=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ai=null,Pr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Pn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Pl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],hs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Bd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Rc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],L1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hs=[],na=[],Ga=[],M1=1,bu=2,ds=[],xi=[];Ve("UpsampleRgbLinePair",le,3),Ve("UpsampleBgrLinePair",Ce,3),Ve("UpsampleRgbaLinePair",Qt,4),Ve("UpsampleBgraLinePair",dn,4),Ve("UpsampleArgbLinePair",Ut,4),Ve("UpsampleRgba4444LinePair",ot,2),Ve("UpsampleRgb565LinePair",Le,2);var Ws=E.UpsampleRgbLinePair,Ll=E.UpsampleBgrLinePair,ps=E.UpsampleRgbaLinePair,_h=E.UpsampleBgraLinePair,Ah=E.UpsampleArgbLinePair,wu=E.UpsampleRgba4444LinePair,Eh=E.UpsampleRgb565LinePair,gs=16,oi=1<<gs-1,Ml=-227,Sh=482,Hm=6,j1=0,Wm=a(256),si=a(256),Fd=a(256),Tf=a(256),Rf=a(Sh-Ml),Ud=a(Sh-Ml);Qn("YuvToRgbRow",le,3),Qn("YuvToBgrRow",Ce,3),Qn("YuvToRgbaRow",Qt,4),Qn("YuvToBgraRow",dn,4),Qn("YuvToArgbRow",Ut,4),Qn("YuvToRgba4444Row",ot,2),Qn("YuvToRgb565Row",Le,2);var Nc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Gs=[0,2,8],Gm=[8,7,6,4,4,2,2,2,1,1,1,1],B1=1;this.WebPDecodeRGBA=function(x,S,M,W,J){var re=yu,ie=new Ps,se=new jr;ie.ba=se,se.S=re,se.width=[se.width],se.height=[se.height];var ue=se.width,de=se.height,be=new cr;if(be==null||x==null)var Pe=2;else e(be!=null),Pe=ls(x,S,M,be.width,be.height,be.Pd,be.Qd,be.format,null);if(Pe!=0?ue=0:(ue!=null&&(ue[0]=be.width[0]),de!=null&&(de[0]=be.height[0]),ue=1),ue){se.width=se.width[0],se.height=se.height[0],W!=null&&(W[0]=se.width),J!=null&&(J[0]=se.height);e:{if(W=new Ro,(J=new bl).data=x,J.w=S,J.ha=M,J.kd=1,S=[0],e(J!=null),((x=ls(J.data,J.w,J.ha,null,null,null,S,null,J))==0||x==7)&&S[0]&&(x=4),(S=x)==0){if(e(ie!=null),W.data=J.data,W.w=J.w+J.offset,W.ha=J.ha-J.offset,W.put=vr,W.ac=jn,W.bc=Ua,W.ma=ie,J.xa){if((x=ur())==null){ie=1;break e}if(function(Oe,Re){var Ze=[0],ze=[0],we=[0];t:for(;;){if(Oe==null)return 0;if(Re==null)return Oe.a=2,0;if(Oe.l=Re,Oe.a=0,te(Oe.m,Re.data,Re.w,Re.ha),!yt(Oe.m,Ze,ze,we)){Oe.a=3;break t}if(Oe.xb=bu,Re.width=Ze[0],Re.height=ze[0],!Bn(Ze[0],ze[0],1,Oe,null))break t;return 1}return e(Oe.a!=0),0}(x,W)){if(W=(S=xc(W.width,W.height,ie.Oa,ie.ba))==0){t:{W=x;n:for(;;){if(W==null){W=0;break t}if(e(W.s.yc!=null),e(W.s.Ya!=null),e(0<W.s.Wb),e((M=W.l)!=null),e((J=M.ma)!=null),W.xb!=0){if(W.ca=J.ba,W.tb=J.tb,e(W.ca!=null),!_l(J.Oa,M,Ef)){W.a=2;break n}if(!Co(W,M.width)||M.da)break n;if((M.da||on(W.ca.S))&&Te(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&Te()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!wt(W.s.vb,W.s.Wa.Xa)){W.a=1;break n}W.xb=0}if(!$r(W,W.V,W.Ba,W.c,W.i,M.o,Is))break n;J.Dc=W.Ma,W=1;break t}e(W.a!=0),W=0}W=!W}W&&(S=x.a)}else S=x.a}else{if((x=new hc)==null){ie=1;break e}if(x.Fa=J.na,x.P=J.P,x.qc=J.Sa,gl(x,W)){if((S=xc(W.width,W.height,ie.Oa,ie.ba))==0){if(x.Aa=0,M=ie.Oa,e((J=x)!=null),M!=null){if(0<(ue=0>(ue=M.Md)?0:100<ue?255:255*ue/100)){for(de=be=0;4>de;++de)12>(Pe=J.pb[de]).lc&&(Pe.ia=ue*Gm[0>Pe.lc?0:Pe.lc]>>3),be|=Pe.ia;be&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=M.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}dc(x,W)||(S=x.a)}}else S=x.a}S==0&&ie.Oa!=null&&ie.Oa.fd&&(S=pu(ie.ba))}ie=S}re=ie!=0?null:11>re?se.f.RGBA.eb:se.f.kb.y}else re=null;return re};var F1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(E,R){for(var L="",T=0;T<4;T++)L+=String.fromCharCode(E[R++]);return L}function h(E,R){return(E[R+0]<<0|E[R+1]<<8|E[R+2]<<16)>>>0}function p(E,R){return(E[R+0]<<0|E[R+1]<<8|E[R+2]<<16|E[R+3]<<24)>>>0}new c;var g=[0],m=[0],b=[],_=new c,I=n,C=function(E,R){var L={},T=0,k=!1,B=0,V=0;if(L.frames=[],!function(Z,ne,ae,pe){for(var Ae=0;Ae<pe;Ae++)if(Z[ne+Ae]!=ae.charCodeAt(Ae))return!0;return!1}(E,R,"RIFF",4)){for(p(E,R+=4),R+=8;R<E.length;){var Q=f(E,R),z=p(E,R+=4);R+=4;var U=z+(1&z);switch(Q){case"VP8 ":case"VP8L":L.frames[T]===void 0&&(L.frames[T]={}),(X=L.frames[T]).src_off=k?V:R-8,X.src_size=B+z+8,T++,k&&(k=!1,B=0,V=0);break;case"VP8X":(X=L.header={}).feature_flags=E[R];var te=R+4;X.canvas_width=1+h(E,te),te+=3,X.canvas_height=1+h(E,te),te+=3;break;case"ALPH":k=!0,B=U+8,V=R-8;break;case"ANIM":(X=L.header).bgcolor=p(E,R),te=R+4,X.loop_count=(ge=E)[(G=te)+0]<<0|ge[G+1]<<8,te+=2;break;case"ANMF":var oe,X;(X=L.frames[T]={}).offset_x=2*h(E,R),R+=3,X.offset_y=2*h(E,R),R+=3,X.width=1+h(E,R),R+=3,X.height=1+h(E,R),R+=3,X.duration=h(E,R),R+=3,oe=E[R++],X.dispose=1&oe,X.blend=oe>>1&1}Q!="ANMF"&&(R+=U)}var ge,G;return L}}(I,0);C.response=I,C.rgbaoutput=!0,C.dataurl=!1;var N=C.header?C.header:null,j=C.frames?C.frames:null;if(N){N.loop_counter=N.loop_count,g=[N.canvas_height],m=[N.canvas_width];for(var q=0;q<j.length&&j[q].blend!=0;q++);}var Y=j[0],H=_.WebPDecodeRGBA(I,Y.src_off,Y.src_size,m,g);Y.rgba=H,Y.imgwidth=m[0],Y.imgheight=g[0];for(var P=0;P<m[0]*g[0]*4;P++)b[P]=H[P];return this.width=m,this.height=g,this.data=b,this}(function(n){var e=function(){return typeof qy=="function"},t=function(g,m,b,_){var I=4,C=o;switch(_){case n.image_compression.FAST:I=1,C=a;break;case n.image_compression.MEDIUM:I=6,C=s;break;case n.image_compression.SLOW:I=9,C=c}g=r(g,m,b,C);var N=qy(g,{level:I});return n.__addimage__.arrayBufferToBinaryString(N)},r=function(g,m,b,_){for(var I,C,N,j=g.length/m,q=new Uint8Array(g.length+j),Y=h(),H=0;H<j;H+=1){if(N=H*m,I=g.subarray(N,N+m),_)q.set(_(I,b,C),N+H);else{for(var P,E=Y.length,R=[];P<E;P+=1)R[P]=Y[P](I,b,C);var L=p(R.concat());q.set(R[L],N+H)}C=I}return q},i=function(g){var m=Array.apply([],g);return m.unshift(0),m},a=function(g,m){var b,_=[],I=g.length;_[0]=1;for(var C=0;C<I;C+=1)b=g[C-m]||0,_[C+1]=g[C]-b+256&255;return _},o=function(g,m,b){var _,I=[],C=g.length;I[0]=2;for(var N=0;N<C;N+=1)_=b&&b[N]||0,I[N+1]=g[N]-_+256&255;return I},s=function(g,m,b){var _,I,C=[],N=g.length;C[0]=3;for(var j=0;j<N;j+=1)_=g[j-m]||0,I=b&&b[j]||0,C[j+1]=g[j]+256-(_+I>>>1)&255;return C},c=function(g,m,b){var _,I,C,N,j=[],q=g.length;j[0]=4;for(var Y=0;Y<q;Y+=1)_=g[Y-m]||0,I=b&&b[Y]||0,C=b&&b[Y-m]||0,N=f(_,I,C),j[Y+1]=g[Y]-N+256&255;return j},f=function(g,m,b){if(g===m&&m===b)return g;var _=Math.abs(m-b),I=Math.abs(g-b),C=Math.abs(g+m-b-b);return _<=I&&_<=C?g:I<=C?m:b},h=function(){return[i,a,o,s,c]},p=function(g){var m=g.map(function(b){return b.reduce(function(_,I){return _+Math.abs(I)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(g,m,b,_){var I,C,N,j,q,Y,H,P,E,R,L,T,k,B,V,Q=this.decode.FLATE_DECODE,z="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(N=new KV(g)).imgData,C=N.bits,I=N.colorSpace,q=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){E=(P=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,L=new Uint8Array(E*N.colors),R=new Uint8Array(E);var U,te=N.pixelBitlength-N.bits;for(B=0,V=0;B<E;B++){for(k=P[B],U=0;U<te;)L[V++]=k>>>U&255,U+=N.bits;R[B]=k>>>U&255}}if(N.bits===16){E=(P=new Uint32Array(N.decodePixels().buffer)).length,L=new Uint8Array(E*(32/N.pixelBitlength)*N.colors),R=new Uint8Array(E*(32/N.pixelBitlength)),T=N.colors>1,B=0,V=0;for(var oe=0;B<E;)k=P[B++],L[V++]=k>>>0&255,T&&(L[V++]=k>>>16&255,k=P[B++],L[V++]=k>>>0&255),R[oe++]=k>>>16&255;C=8}_!==n.image_compression.NONE&&e()?(g=t(L,N.width*N.colors,N.colors,_),H=t(R,N.width,1,_)):(g=L,H=R,Q=void 0)}if(N.colorType===3&&(I=this.color_spaces.INDEXED,Y=N.palette,N.transparency.indexed)){var X=N.transparency.indexed,ge=0;for(B=0,E=X.length;B<E;++B)ge+=X[B];if((ge/=255)===E-1&&X.indexOf(0)!==-1)j=[X.indexOf(0)];else if(ge!==E){for(P=N.decodePixels(),R=new Uint8Array(P.length),B=0,E=P.length;B<E;B++)R[B]=X[P[B]];H=t(R,N.width,1)}}var G=function(Z){var ne;switch(Z){case n.image_compression.FAST:ne=11;break;case n.image_compression.MEDIUM:ne=13;break;case n.image_compression.SLOW:ne=14;break;default:ne=12}return ne}(_);return Q===this.decode.FLATE_DECODE&&(z="/Predictor "+G+" "),z+="/Colors "+q+" /BitsPerComponent "+C+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(H&&this.__addimage__.isArrayBuffer(H)||this.__addimage__.isArrayBufferView(H))&&(H=this.__addimage__.arrayBufferToBinaryString(H)),{alias:b,data:g,index:m,filter:Q,decodeParameters:z,transparency:j,palette:Y,sMask:H,predictor:G,width:N.width,height:N.height,bitsPerComponent:C,colorSpace:I}}}})(Wt.API),function(n){n.processGIF89A=function(e,t,r,i){var a=new QV(e),o=a.width,s=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:o,height:s},h=new Fv(100).encode(f,100);return n.processJPEG.call(this,h,t,r,i)},n.processGIF87A=n.processGIF89A}(Wt.API),tl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},tl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){br.log("bit decode error:"+t)}},tl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var c=this.palette[a>>7-s&1];this.data[o+4*s]=c.blue,this.data[o+4*s+1]=c.green,this.data[o+4*s+2]=c.red,this.data[o+4*s+3]=255}t!==0&&(this.pos+=4-t)}},tl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,s=a>>4,c=15&a,f=this.palette[s];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},tl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},tl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,c=(a>>10&e)/e*255|0,f=a>>15?255:0,h=r*this.width*4+4*i;this.data[h]=c,this.data[h+1]=s,this.data[h+2]=o,this.data[h+3]=f}this.pos+=n}},tl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,c=(o>>5&t)/t*255|0,f=(o>>11)/e*255|0,h=i*this.width*4+4*a;this.data[h]=f,this.data[h+1]=c,this.data[h+2]=s,this.data[h+3]=255}this.pos+=n}},tl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},tl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=o}},tl.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var a=new tl(e,!1),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},f=new Fv(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(Wt.API),V4.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var a=new V4(e),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},f=new Fv(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(Wt.API),Wt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,c=0,f=0;f<i;f+=4){var h=r[f],p=r[f+1],g=r[f+2],m=r[f+3];a[s++]=h,a[s++]=p,a[s++]=g,o[c++]=m}var b=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Wt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qh=Wt.API,$p=Qh.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,c=s.fof?s.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=f.fof?f.fof:1,p=e.doKerning!==!1,g=0,m=n.length,b=0,_=s[0]||c,I=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?I.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(g=p&&lr(f[r])==="object"&&!isNaN(parseInt(f[r][b],10))?f[r][b]/h:0,I.push((s[r]||_)/c+g)),b=r;return I},B4=Qh.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Qh.processArabic&&(n=Qh.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:$p.apply(this,arguments).reduce(function(a,o){return a+o},0)},F4=function(n,e,t,r){for(var i=[],a=0,o=n.length,s=0;a!==o&&s+e[a]<t;)s+=e[a],a++;i.push(n.slice(0,a));var c=a;for(s=0;a!==o;)s+e[a]>r&&(i.push(n.slice(c,a)),s=0,c=a),s+=e[a],a++;return c!==a&&i.push(n.slice(c,a)),i},U4=function(n,e,t){t||(t={});var r,i,a,o,s,c,f,h=[],p=[h],g=t.textIndent||0,m=0,b=0,_=n.split(" "),I=$p.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var C=Array(c).join(" "),N=[];_.map(function(q){(q=q.split(/\s*\n/)).length>1?N=N.concat(q.map(function(Y,H){return(H&&Y.length?`
`:"")+Y})):N.push(q[0])}),_=N,c=B4.apply(this,[C,t])}for(a=0,o=_.length;a<o;a++){var j=0;if(r=_[a],c&&r[0]==`
`&&(r=r.substr(1),j=1),g+m+(b=(i=$p.apply(this,[r,t])).reduce(function(q,Y){return q+Y},0))>e||j){if(b>e){for(s=F4.apply(this,[r,i,e-(g+m),e]),h.push(s.shift()),h=[s.pop()];s.length;)p.push([s.shift()]);b=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(q,Y){return q+Y},0)}else h=[r];p.push(h),g=b+c,m=I}else h.push(r),g+=m+b,m=I}return f=c?function(q,Y){return(Y?C:"")+q.join(" ")}:function(q){return q.join(" ")},p.map(f)},Qh.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var s,c,f=[];for(s=0,c=r.length;s<c;s++)f=f.concat(U4.apply(this,[r[s],o,a]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var g,m,b,_,I=["{"];for(var C in p){if(g=p[C],isNaN(parseInt(C,10))?m="'"+C+"'":(C=parseInt(C,10),m=(m=a(C).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof g=="number")g<0?(b=a(g).slice(3),_="-"):(b=a(g).slice(2),_=""),b=_+b.slice(0,-1)+r[b.slice(-1)];else{if(lr(g)!=="object")throw new Error("Don't know what to do with value type "+lr(g)+".");b=o(g)}I.push(m+b)}return I.push("}"),I.join("")},s=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,b,_,I={},C=1,N=I,j=[],q="",Y="",H=p.length-1,P=1;P<H;P+=1)(_=p[P])=="'"?g?(b=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(j.push([N,b]),N={},b=void 0):_=="}"?((m=j.pop())[0][m[1]]=N,b=void 0,N=m[0]):_=="-"?C=-1:b===void 0?t.hasOwnProperty(_)?(q+=t[_],b=parseInt(q,16)*C,C=1,q=""):q+=_:t.hasOwnProperty(_)?(Y+=t[_],N[b]=parseInt(Y,16)*C,C=1,b=void 0,Y=""):Y+=_;return I},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},h={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var g=p.font,m=h.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var b=f.Unicode[g.postScriptName];b&&(g.metadata.Unicode.encoding=b,g.encoding=b.codePages[0])}])}(Wt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(X0(s)),o.metadata=n.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Wt),function(n){function e(){return(Gt.canvg?Promise.resolve(Gt.canvg):By(()=>import("./index.es-CuslHVgg.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Wt.API.addSvgAsImage=function(t,r,i,a,o,s,c,f){if(isNaN(r)||isNaN(i))throw br.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw br.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(b){return b.fromString(p,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(g)}).then(function(){m.addImage(h.toDataURL("image/jpeg",1),r,i,a,o,c,f)})}}(),Wt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Wt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),c=[],f=0,h=0,p=0;function g(b,_){var I,C=!1;for(I=0;I<b.length;I+=1)b[I]===_&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=s.length;for(p=0;p<m;p+=1)t[s[p]].value=t[s[p]].defaultValue,t[s[p]].explicitSet=!1}if(lr(n)==="object"){for(i in n)if(a=n[i],g(s,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&g(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")c.push(String(a[f]-1));else if(a[f].length>1){for(h=0;h<a[f].length;h+=1)typeof a[f][h]!="number"&&(r=!1);r===!0&&c.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,_=[];for(b in t)t[b].explicitSet===!0&&(t[b].type==="name"?_.push("/"+b+" /"+t[b].value):_.push("/"+b+" "+t[b].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+o.length+s.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Wt.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,o){for(var s,c=o.metadata.Unicode.widths,f=["","0","00","000","0000"],h=[""],p=0,g=a.length;p<g;++p){if(s=o.metadata.characterToGlyph(a.charCodeAt(p)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(p),c.indexOf(s)==-1&&(c.push(s),c.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return h.join("");s=s.toString(16),h.push(f[4-s.length],s)}return h.join("")},r=function(a){var o,s,c,f,h,p,g;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,g=(s=Object.keys(a).sort(function(m,b){return m-b})).length;p<g;p++)o=s[p],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(f=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+f+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,f=o.newObject,h=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="Identity-H"){for(var p=s.metadata.Unicode.widths,g=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),m="",b=0;b<g.length;b++)m+=String.fromCharCode(g[b]);var _=f();h({data:m,addLength1:!0,objectId:_}),c("endobj");var I=f();h({data:r(s.metadata.toUnicode),addLength1:!0,objectId:I}),c("endobj");var C=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+rd(s.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),c("/Flags "+s.metadata.flags),c("/StemV "+s.metadata.stemV),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c(">>"),c("endobj");var N=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+rd(s.fontName)),c("/FontDescriptor "+C+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+s.encoding+")"),c(">>"),c(">>"),c("endobj"),s.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+I+" 0 R"),c("/BaseFont /"+rd(s.fontName)),c("/Encoding /"+s.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,f=o.newObject,h=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var p=s.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var b=f();h({data:g,addLength1:!0,objectId:b}),c("endobj");var _=f();h({data:r(s.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var I=f();c("<<"),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c("/StemV "+s.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),c("/FontName /"+rd(s.fontName)),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c(">>"),c("endobj"),s.objectNumber=f();for(var C=0;C<s.metadata.hmtx.widths.length;C++)s.metadata.hmtx.widths[C]=parseInt(s.metadata.hmtx.widths[C]*(1e3/s.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+rd(s.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",c=a.x,f=a.y,h=a.options||{},p=a.mutex||{},g=p.pdfEscape,m=p.activeFontKey,b=p.fonts,_=m,I="",C=0,N="",j=b[_].encoding;if(b[_].encoding!=="Identity-H")return{text:s,x:c,y:f,options:h,mutex:p};for(N=s,_=m,Array.isArray(s)&&(N=s[0]),C=0;C<N.length;C+=1)b[_].metadata.hasOwnProperty("cmap")&&(o=b[_].metadata.cmap.unicode.codeMap[N[C].charCodeAt(0)]),o||N[C].charCodeAt(0)<256&&b[_].metadata.hasOwnProperty("Unicode")?I+=N[C]:I+="";var q="";return parseInt(_.slice(1))<14||j==="WinAnsiEncoding"?q=g(I,_).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(q=t(I,b[_])),p.isHex=!0,{text:q,x:c,y:f,options:h,mutex:p}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?s.push([i(Object.assign({},c,{text:o[f][0]})).text,o[f][1],o[f][2]]):s.push(i(Object.assign({},c,{text:o[f]})).text);a.text=s}else a.text=i(Object.assign({},c,{text:o})).text}])}(Wt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Wt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,o,s,c,f,h,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,j=0;this.__bidiEngine__={};var q=function(T){var k=T.charCodeAt(),B=k>>8,V=_[B];return V!==void 0?p[256*V+(255&k)]:B===252||B===253?"AL":C.test(B)?"L":B===8?"R":"N"},Y=function(T){for(var k,B=0;B<T.length;B++){if((k=q(T.charAt(B)))==="L")return!1;if(k==="R")return!0}return!1},H=function(T,k,B,V){var Q,z,U,te,oe=k[V];switch(oe){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(oe="AN");break;case"AL":N=!0,oe="R";break;case"WS":oe="N";break;case"CS":V<1||V+1>=k.length||(Q=B[V-1])!=="EN"&&Q!=="AN"||(z=k[V+1])!=="EN"&&z!=="AN"?oe="N":N&&(z="AN"),oe=z===Q?z:"N";break;case"ES":oe=(Q=V>0?B[V-1]:"B")==="EN"&&V+1<k.length&&k[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&B[V-1]==="EN"){oe="EN";break}if(N){oe="N";break}for(U=V+1,te=k.length;U<te&&k[U]==="ET";)U++;oe=U<te&&k[U]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(te=k.length,U=V+1;U<te&&k[U]==="NSM";)U++;if(U<te){var X=T[V],ge=X>=1425&&X<=2303||X===64286;if(Q=k[U],ge&&(Q==="R"||Q==="AL")){oe="R";break}}}oe=V<1||(Q=k[V-1])==="B"?"N":B[V-1];break;case"B":N=!1,i=!0,oe=j;break;case"S":a=!0,oe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":oe="N"}return oe},P=function(T,k,B){var V=T.split("");return B&&E(V,B,{hiLevel:j}),V.reverse(),k&&k.reverse(),V.join("")},E=function(T,k,B){var V,Q,z,U,te,oe=-1,X=T.length,ge=0,G=[],Z=j?m:g,ne=[];for(N=!1,i=!1,a=!1,Q=0;Q<X;Q++)ne[Q]=q(T[Q]);for(z=0;z<X;z++){if(te=ge,G[z]=H(T,ne,G,z),V=240&(ge=Z[te][b[G[z]]]),ge&=15,k[z]=U=Z[ge][5],V>0)if(V===16){for(Q=oe;Q<z;Q++)k[Q]=1;oe=-1}else oe=-1;if(Z[ge][6])oe===-1&&(oe=z);else if(oe>-1){for(Q=oe;Q<z;Q++)k[Q]=U;oe=-1}ne[z]==="B"&&(k[z]=0),B.hiLevel|=U}a&&function(ae,pe,Ae){for(var _e=0;_e<Ae;_e++)if(ae[_e]==="S"){pe[_e]=j;for(var Ie=_e-1;Ie>=0&&ae[Ie]==="WS";Ie--)pe[Ie]=j}}(ne,k,X)},R=function(T,k,B,V,Q){if(!(Q.hiLevel<T)){if(T===1&&j===1&&!i)return k.reverse(),void(B&&B.reverse());for(var z,U,te,oe,X=k.length,ge=0;ge<X;){if(V[ge]>=T){for(te=ge+1;te<X&&V[te]>=T;)te++;for(oe=ge,U=te-1;oe<U;oe++,U--)z=k[oe],k[oe]=k[U],k[U]=z,B&&(z=B[oe],B[oe]=B[U],B[U]=z);ge=te}ge++}}},L=function(T,k,B){var V=T.split(""),Q={hiLevel:j};return B||(B=[]),E(V,B,Q),function(z,U,te){if(te.hiLevel!==0&&h)for(var oe,X=0;X<z.length;X++)U[X]===1&&(oe=I.indexOf(z[X]))>=0&&(z[X]=I[oe+1])}(V,B,Q),R(2,V,k,B,Q),R(1,V,k,B,Q),V.join("")};return this.__bidiEngine__.doBidiReorder=function(T,k,B){if(function(Q,z){if(z)for(var U=0;U<Q.length;U++)z[U]=U;s===void 0&&(s=Y(Q)),f===void 0&&(f=Y(Q))}(T,k),o||!c||f)if(o&&c&&s^f)j=s?1:0,T=P(T,k,B);else if(!o&&c&&f)j=s?1:0,T=L(T,k,B),T=P(T,k);else if(!o||s||c||f){if(o&&!c&&s^f)T=P(T,k),s?(j=0,T=L(T,k,B)):(j=1,T=L(T,k,B),T=P(T,k));else if(o&&s&&!c&&f)j=1,T=L(T,k,B),T=P(T,k);else if(!o&&!c&&s^f){var V=h;s?(j=1,T=L(T,k,B),j=0,h=!1,T=L(T,k,B),h=V):(j=0,T=L(T,k,B),T=P(T,k),j=1,h=!1,T=L(T,k,B),h=V,T=P(T,k))}}else j=0,T=L(T,k,B);else j=s?1:0,T=L(T,k,B);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,s=T.isInputRtl,f=T.isOutputRtl,h=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([t.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([t.doBidiReorder(i[s])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Wt),Wt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new mf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new hq(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new ZV(this.contents),this.head=new eq(this),this.name=new aq(this),this.cmap=new NS(this),this.toUnicode={},this.hhea=new tq(this),this.maxp=new oq(this),this.hmtx=new sq(this),this.post=new rq(this),this.os2=new nq(this),this.loca=new fq(this),this.glyf=new lq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,c,f;for(f=[],o=0,s=(c=this.bbox).length;o<s;o++)e=c[o],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var dl,mf=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,o,s,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*o+256*s+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n}(),ZV=function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,o,s,c,f,h,p,g,m,b,_;for(_ in m=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(m)/c),o=Math.floor(p/c),h=16*m-p,(i=new mf).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(h),a=16*m,f=i.pos+a,s=null,b=[],t)for(g=t[_],i.writeString(_),i.writeInt(n(g)),i.writeInt(f),i.writeInt(g.length),b=b.concat(g),_==="head"&&(s=f),f+=g.length;f%4;)b.push(0),f++;return i.write(b),r=2981146554-n(i.data),i.pos=s+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,o;for(t=DS.call(t);t.length%4;)t.push(0);for(a=new mf(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),JV={}.hasOwnProperty,uc=function(n,e){for(var t in e)JV.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};dl=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var eq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new mf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),q4=function(){function n(e,t){var r,i,a,o,s,c,f,h,p,g,m,b,_,I,C,N,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,a=function(){var q,Y;for(Y=[],c=q=0;0<=g?q<g:q>g;c=0<=g?++q:--q)Y.push(e.readUInt16());return Y}(),e.pos+=2,_=function(){var q,Y;for(Y=[],c=q=0;0<=g?q<g:q>g;c=0<=g?++q:--q)Y.push(e.readUInt16());return Y}(),f=function(){var q,Y;for(Y=[],c=q=0;0<=g?q<g:q>g;c=0<=g?++q:--q)Y.push(e.readUInt16());return Y}(),h=function(){var q,Y;for(Y=[],c=q=0;0<=g?q<g:q>g;c=0<=g?++q:--q)Y.push(e.readUInt16());return Y}(),i=(this.length-e.pos+this.offset)/2,s=function(){var q,Y;for(Y=[],c=q=0;0<=i?q<i:q>i;c=0<=i?++q:--q)Y.push(e.readUInt16());return Y}(),c=C=0,j=a.length;C<j;c=++C)for(I=a[c],r=N=b=_[c];b<=I?N<=I:N>=I;r=b<=I?++N:--N)h[c]===0?o=r+f[c]:(o=s[h[c]/2+(r-b)-(g-c)]||0)!==0&&(o+=f[c]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,a,o,s,c,f,h,p,g,m,b,_,I,C,N,j,q,Y,H,P,E,R,L,T,k,B,V,Q,z,U,te,oe,X,ge,G,Z,ne,ae,pe,Ae,_e,Ie,$e,qe,at;switch(V=new mf,o=Object.keys(e).sort(function(lt,wt){return lt-wt}),t){case"macroman":for(_=0,I=function(){var lt=[];for(b=0;b<256;++b)lt.push(0);return lt}(),N={0:0},a={},Q=0,oe=o.length;Q<oe;Q++)N[Ie=e[i=o[Q]]]==null&&(N[Ie]=++_),a[i]={old:e[i],new:N[e[i]]},I[i]=N[e[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(I),{charMap:a,subtable:V.data,maxGlyphID:_+1};case"unicode":for(k=[],p=[],j=0,N={},r={},C=f=null,z=0,X=o.length;z<X;z++)N[Y=e[i=o[z]]]==null&&(N[Y]=++j),r[i]={old:Y,new:N[Y]},s=N[Y]-i,C!=null&&s===f||(C&&p.push(C),k.push(i),f=s),C=i;for(C&&p.push(C),p.push(65535),k.push(65535),L=2*(R=k.length),E=2*Math.pow(Math.log(R)/Math.LN2,2),g=Math.log(E/2)/Math.LN2,P=2*R-E,c=[],H=[],m=[],b=U=0,ge=k.length;U<ge;b=++U){if(T=k[b],h=p[b],T===65535){c.push(0),H.push(0);break}if(T-(B=r[T].new)>=32768)for(c.push(0),H.push(2*(m.length+R-b)),i=te=T;T<=h?te<=h:te>=h;i=T<=h?++te:--te)m.push(r[i].new);else c.push(B-T),H.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*R+2*m.length),V.writeUInt16(0),V.writeUInt16(L),V.writeUInt16(E),V.writeUInt16(g),V.writeUInt16(P),Ae=0,G=p.length;Ae<G;Ae++)i=p[Ae],V.writeUInt16(i);for(V.writeUInt16(0),_e=0,Z=k.length;_e<Z;_e++)i=k[_e],V.writeUInt16(i);for($e=0,ne=c.length;$e<ne;$e++)s=c[$e],V.writeUInt16(s);for(qe=0,ae=H.length;qe<ae;qe++)q=H[qe],V.writeUInt16(q);for(at=0,pe=m.length;at<pe;at++)_=m[at],V.writeUInt16(_);return{charMap:r,subtable:V.data,maxGlyphID:j+1}}},n}(),NS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new q4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,a;return r==null&&(r="macroman"),i=q4.encode(t,r),(a=new mf).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),tq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),nq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),rq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var s,c,f;for(f=[],o=s=0,c=this.file.maxp.numGlyphs;0<=c?s<c:s>c;o=0<=c?++s:--s)f.push(t.readUInt32());return f}).call(this)}},e}(),iq=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},aq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,a,o,s,c,f,h,p,g,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(f={},o=p=0,g=i.length;p<g;o=++p)a=i[o],t.pos=a.offset,h=t.readString(a.length),s=new iq(h,a),f[m=a.nameID]==null&&(f[m]=[]),f[a.nameID].push(s);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),oq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),sq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,a,o,s,c,f;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=a?h<a:h>a;r=0<=a?++h:--h)p.push(t.readInt16());return p}(),this.widths=(function(){var h,p,g,m;for(m=[],h=0,p=(g=this.metrics).length;h<p;h++)o=g[h],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],f=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),DS=[].slice,lq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,a,o,s,c,f,h,p,g;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(a=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,s=(c=new mf(r.read(a))).readShort(),h=c.readShort(),g=c.readShort(),f=c.readShort(),p=c.readShort(),this.cache[t]=s===-1?new uq(c,h,g,f,p):new cq(c,s,h,g,f,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var a,o,s,c,f;for(s=[],o=[],c=0,f=r.length;c<f;c++)a=t[r[c]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),cq=function(){function n(e,t,r,i,a,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),uq=function(){function n(e,t,r,i,a){var o,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new mf(DS.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),fq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return uc(e,dl),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<r.length&&r[o]==s){++o,i[s]=a;var c=this.offsets[s],f=this.offsets[s+1]-c;f>0&&(a+=f)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),hq=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,o,s,c;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in c=this.glyphsFor(t))r=c[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,o,s,c,f,h,p,g,m,b,_,I,C;for(i in r=NS.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},C=r.charMap)m[(c=C[i]).old]=c.new;for(b in g=r.maxGlyphID,o)b in m||(m[b]=g++);return h=function(N){var j,q;for(j in q={},N)q[N[j]]=j;return q}(m),p=Object.keys(h).sort(function(N,j){return N-j}),_=function(){var N,j,q;for(q=[],N=0,j=p.length;N<j;N++)s=p[N],q.push(h[s]);return q}(),a=this.font.glyf.encode(o,_,m),f=this.font.loca.encode(a.offsets,_),I={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},n}();Wt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,o;if(Array.isArray(t))return"["+function(){var s,c,f;for(f=[],s=0,c=t.length;s<c;s++)r=t[s],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)o=t[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+t},e}();function OS(n,e,t,r,i){r=r||{};var a=1.15,o=i.internal.scaleFactor,s=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():a,f=s*c,h=/\r\n|\r|\n/g,p="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(h):n,g=p.length||1),t+=s*(2-a),r.valign==="middle"?t-=g/2*f:r.valign==="bottom"&&(t-=g*f),r.halign==="center"||r.halign==="right"){var m=s;if(r.halign==="center"&&(m*=.5),p&&g>=1){for(var b=0;b<p.length;b++)i.text(p[b],e-i.getStringUnitWidth(p[b])*m,t),t+=f;return i}e-=i.getStringUnitWidth(n)*m}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var H4={},vd=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:H4=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){s=e.fontStyle;var f=this.getFontList()[c];f&&f.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),s=f[0])}if(this.jsPDFDocument.setFont(c,s),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var h=n.unifyColor(e.fillColor);h&&(r=this.jsPDFDocument).setFillColor.apply(r,h),h=n.unifyColor(e.textColor),h&&(i=this.jsPDFDocument).setTextColor.apply(i,h),h=n.unifyColor(e.lineColor),h&&(a=this.jsPDFDocument).setDrawColor.apply(a,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return H4||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),Ky=function(n,e){return Ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Ky(n,e)};function kS(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ky(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var PS=function(n){kS(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function dq(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function pq(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Kg(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function LS(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var o=MS(i,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,o)}function MS(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function qm(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function jS(n,e){var t=qm(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function gq(n,e,t,r,i){var a={},o=1.3333333333333333,s=Uv(e,function(j){return i.getComputedStyle(j).backgroundColor});s!=null&&(a.fillColor=s);var c=Uv(e,function(j){return i.getComputedStyle(j).color});c!=null&&(a.textColor=c);var f=vq(r,t);f&&(a.cellPadding=f);var h="borderTopColor",p=o*t,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},a.lineWidth.top||(a.lineWidth.right?h="borderRightColor":a.lineWidth.bottom?h="borderBottomColor":a.lineWidth.left&&(h="borderLeftColor"));var b=Uv(e,function(j){return i.getComputedStyle(j)[h]});b!=null&&(a.lineColor=b);var _=["left","right","center","justify"];_.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),_=["middle","bottom","top"],_.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var I=parseInt(r.fontSize||"");isNaN(I)||(a.fontSize=I/o);var C=mq(r);C&&(a.fontStyle=C);var N=(r.fontFamily||"").toLowerCase();return n.indexOf(N)!==-1&&(a.font=N),a}function mq(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Uv(n,e){var t=BS(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function BS(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:BS(n.parentElement,e):t}function vq(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(s){return parseInt(s||"0")/r}),o=qm(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function FS(n,e,t,r,i){var a,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var s;typeof e=="string"?s=t.document.querySelector(e):s=e;var c=Object.keys(n.getFontList()),f=n.scaleFactor(),h=[],p=[],g=[];if(!s)return console.error("Html table could not be found with input: ",e),{head:h,body:p,foot:g};for(var m=0;m<s.rows.length;m++){var b=s.rows[m],_=(o=(a=b==null?void 0:b.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),I=yq(c,f,t,b,r,i);I&&(_==="thead"?h.push(I):_==="tfoot"?g.push(I):p.push(I))}return{head:h,body:p,foot:g}}function yq(n,e,t,r,i,a){for(var o=new PS(r),s=0;s<r.cells.length;s++){var c=r.cells[s],f=t.getComputedStyle(c);if(i||f.display!=="none"){var h=void 0;a&&(h=gq(n,c,e,f,t)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:h,_element:c,content:xq(c)})}}var p=t.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function xq(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function bq(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Wc(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c])}return a}function wq(n,e){var t=new vd(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();bq(i,r,e);var a=Wc({},i,r,e),o;typeof window<"u"&&(o=window);var s=_q(i,r,e),c=Aq(i,r,e),f=Eq(t,a),h=Cq(t,a,o);return{id:e.tableId,content:h,hooks:c,styles:s,settings:f}}function _q(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var f=n[c],h=e[c],p=t[c];r.columnStyles=Wc({},f,h,p)}else{var g=[n,e,t],m=g.map(function(b){return b[c]||{}});r[c]=Wc({},m[0],m[1],m[2])}},a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];i(s)}return r}function Aq(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=r;a<o.length;a++){var s=o[a];s.didParseCell&&i.didParseCell.push(s.didParseCell),s.willDrawCell&&i.willDrawCell.push(s.willDrawCell),s.didDrawCell&&i.didDrawCell.push(s.didDrawCell),s.willDrawPage&&i.willDrawPage.push(s.willDrawPage),s.didDrawPage&&i.didDrawPage.push(s.didDrawPage)}return i}function Eq(n,e){var t,r,i,a,o,s,c,f,h,p,g,m,b=qm(e.margin,40/n.scaleFactor()),_=(t=Sq(n,e.startY))!==null&&t!==void 0?t:b.top,I;e.showFoot===!0?I="everyPage":e.showFoot===!1?I="never":I=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var C;e.showHead===!0?C="everyPage":e.showHead===!1?C="never":C=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var N=(a=e.useCss)!==null&&a!==void 0?a:!1,j=e.theme||(N?"plain":"striped"),q=!!e.horizontalPageBreak,Y=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(s=e.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:N,theme:j,startY:_,margin:b,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:C,showFoot:I,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:q,horizontalPageBreakRepeat:Y,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Sq(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;a=o===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function Cq(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var s=FS(n,e.html,t,o,e.useCss)||{};r=s.head||r,i=s.body||r,a=s.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||Iq(r,i,a);return{columns:c,head:r,body:i,foot:a}}function Iq(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,s;Array.isArray(r)?s=r[parseInt(a)]:s=r[a],typeof s=="object"&&!Array.isArray(s)&&(o=(s==null?void 0:s.colSpan)||1);for(var c=0;c<o;c++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(c>0?"_".concat(c):"");var h={dataKey:f};i.push(h)}}),i}var Qy=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),Tq=function(n){kS(e,n);function e(t,r,i,a,o,s){var c=n.call(this,t,r,s)||this;return c.cell=i,c.row=a,c.column=o,c.section=a.section,c}return e}(Qy),Rq=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,o){for(var s=0,c=t;s<c.length;s++){var f=c[s],h=new Tq(e,this,r,i,a,o),p=f(h)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new Qy(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new Qy(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),US=function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof PS&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var o=r.cells[a.index];if(!o)return 0;var s=t.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),f=c+s;return f>i?f:i},0)},n}(),zS=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=o.split(s)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=qm(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),Nq=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n}();function Dq(n,e){Oq(n,e);var t=[],r=0;e.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(e);o?a.width=o:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=Zy(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=Zy(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Pq(e),Lq(e,n),kq(e)}function Oq(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=jS(n,e);e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f){var h=e.hooks.didParseCell;e.callCellHooks(n,h,f,a,c,null);var p=f.padding("horizontal");f.contentWidth=Kg(f.text,f.styles,n)+p;var g=Kg(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=g+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var m=10/t;f.minWidth=f.styles.minCellWidth||m,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f&&f.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,f.wrappedWidth),c.minWidth=Math.max(c.minWidth,f.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,f.minReadableWidth);else{var h=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},p=h.cellWidth||h.minCellWidth;p&&typeof p=="number"&&(c.minWidth=p,c.wrappedWidth=p)}f&&(f.colSpan>1&&!c.minWidth&&(c.minWidth=f.minWidth),f.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=f.minWidth))}})}function Zy(n,e,t){for(var r=e,i=n.reduce(function(m,b){return m+b.wrappedWidth},0),a=0;a<n.length;a++){var o=n[a],s=o.wrappedWidth/i,c=r*s,f=o.width+c,h=t(o),p=f<h?h:f;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=n.filter(function(m){return e<0?m.width>t(m):!0});g.length&&(e=Zy(g,e,t))}return e}function kq(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],o=0,s=n.columns;o<s.length;o++){var c=s[o],f=e[c.index];if(t>1)t--,delete a.cells[c.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[c.index],f.left--,f.left<=1&&delete e[c.index];else{var h=a.cells[c.index];if(!h)continue;if(h.height=a.height,h.rowSpan>1){var p=r.length-i,g=h.rowSpan>p?p:h.rowSpan;e[c.index]={cell:h,left:g,row:a}}}}}function Pq(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,o=0,s=0;s<n.columns.length;s++){var c=n.columns[s];if(o-=1,o>1&&n.columns[s+1])a+=c.width,delete r.cells[c.index];else if(i){var f=i;delete r.cells[c.index],i=null,f.width=c.width+a}else{var f=r.cells[c.index];if(!f)continue;if(o=f.colSpan,a=0,f.colSpan>1){i=f,a+=c.width;continue}f.width=c.width+a}}}function Lq(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],o=0,s=n.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f){e.applyStyles(f.styles,!0);var h=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,h+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=W4(f.text,h,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=W4(f.text,h,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var p=f.styles.overflow(f.text,h);typeof p=="string"?f.text=[p]:f.text=p}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<g*f.rowSpan?t={height:g,count:f.rowSpan}:t&&t.count>0&&t.height>g&&(g=t.height),g>a.height&&(a.height=g)}}t.count--}}function W4(n,e,t,r,i){return n.map(function(a){return Mq(a,e,t,r,i)})}function Mq(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Kg(n,t,r))return n;for(;e<Kg(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function jq(n,e){var t=new vd(n),r=Bq(e,t.scaleFactor()),i=new Rq(e,r);return Dq(t,i),t.applyStyles(t.userStyles),i}function Bq(n,e){var t=n.content,r=Uq(t.columns);if(t.head.length===0){var i=G4(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=G4(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,o=n.styles;return{columns:r,head:zv("head",t.head,r,o,a,e),body:zv("body",t.body,r,o,a,e),foot:zv("foot",t.foot,r,o,a,e)}}function zv(n,e,t,r,i,a){var o={},s=e.map(function(c,f){for(var h=0,p={},g=0,m=0,b=0,_=t;b<_.length;b++){var I=_[b];if(o[I.index]==null||o[I.index].left===0)if(m===0){var C=void 0;Array.isArray(c)?C=c[I.index-g-h]:C=c[I.dataKey];var N={};typeof C=="object"&&!Array.isArray(C)&&(N=(C==null?void 0:C.styles)||{});var j=zq(n,I,f,i,r,a,N),q=new zS(C,j,n);p[I.dataKey]=q,p[I.index]=q,m=q.colSpan-1,o[I.index]={left:q.rowSpan-1,times:m}}else m--,g++;else o[I.index].left--,m=o[I.index].times,h++}return new US(c,f,n,p)});return s}function G4(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=Fq(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function Fq(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function Uq(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new Nq(i,e,t)})}function zq(n,e,t,r,i,a,o){var s=pq(r),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var f=Wc({},s.table,s[n],i.styles,c),h=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?h:{},g=n==="body"&&t%2===0?Wc({},s.alternateRow,i.alternateRowStyles):{},m=dq(a),b=Wc({},m,f,g,p);return Wc(b,o)}function Vq(n,e,t){var r;t===void 0&&(t={});var i=jS(n,e),a=new Map,o=[],s=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var m=e.columns.find(function(b){return b.dataKey===g||b.index===g});m&&!a.has(m.index)&&(a.set(m.index,!0),o.push(m.index),s.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var f=!0,h=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;h<e.columns.length;){if(a.has(h)){h++;continue}var p=e.columns[h].wrappedWidth;if(f||i>=p)f=!1,o.push(h),s.push(e.columns[h]),i-=p;else break;h++}return{colIndexes:o,columns:s,lastIndex:h-1}}function qq(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=Vq(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function Hq(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),s=r+i.bottom+o;if(t.pageBreak==="avoid"){var c=e.body,f=c.reduce(function(g,m){return g+m.height},0);s+=f}var h=new vd(n);(t.pageBreak==="always"||t.startY!=null&&s>h.pageSize().height)&&(qS(h),a.y=i.top),e.callWillDrawPageHooks(h,a);var p=Wc({},a);e.startPageNumber=h.pageNumber(),t.horizontalPageBreak?Wq(h,e,p,a):(h.applyStyles(h.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(g){return nu(h,e,g,a,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(g,m){var b=m===e.body.length-1;Qg(h,e,g,b,p,a,e.columns)}),h.applyStyles(h.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(g){return nu(h,e,g,a,e.columns)})),LS(h,e,p,a),e.callEndPageHooks(h,a),e.finalY=a.y,n.lastAutoTable=e,h.applyStyles(h.userStyles)}function Wq(n,e,t,r){var i=qq(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,h){n.applyStyles(n.userStyles),h>0?K0(n,e,t,r,f.columns,!0):$4(n,e,r,f.columns),Gq(n,e,t,r,f.columns),Vv(n,e,r,f.columns)});else for(var o=-1,s=i[0],c=function(){var f=o;if(s){n.applyStyles(n.userStyles);var h=s.columns;o>=0?K0(n,e,t,r,h,!0):$4(n,e,r,h),f=Y4(n,e,o+1,r,h),Vv(n,e,r,h)}var p=f-o;i.slice(1).forEach(function(g){n.applyStyles(n.userStyles),K0(n,e,t,r,g.columns,!0),Y4(n,e,o+1,r,g.columns,p),Vv(n,e,r,g.columns)}),o=f};o<e.body.length-1;)c()}function $4(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return nu(n,e,a,t,r)})}function Gq(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,o){var s=o===e.body.length-1;Qg(n,e,a,s,t,r,i)})}function Y4(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var o=Math.min(t+a,e.body.length),s=-1;return e.body.slice(t,o).forEach(function(c,f){var h=t+f===e.body.length-1,p=VS(n,e,h,r);c.canEntireRowFit(p,i)&&(nu(n,e,c,r,i),s=t+f)}),s}function Vv(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return nu(n,e,a,t,r)})}function $q(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function Yq(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,o=0,s=t.columns;o<s.length;o++){var c=s[o],f=n.cells[c.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var h=new zS(f.raw,f.styles,f.section);h=Wc(h,f),h.text=[];var p=$q(f,e,r);f.text.length>p&&(h.text=f.text.splice(p,f.text.length));var g=r.scaleFactor(),m=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(g,m),f.contentHeight>=e&&(f.contentHeight=e,h.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),h.contentHeight=h.getContentHeight(g,m),h.contentHeight>a&&(a=h.contentHeight),i[c.index]=h}}var b=new US(n.raw,-1,n.section,i,!0);b.height=a;for(var _=0,I=t.columns;_<I.length;_++){var c=I[_],h=b.cells[c.index];h&&(h.height=b.height);var f=n.cells[c.index];f&&(f.height=n.height)}return b}function Xq(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,o=a.top+a.bottom,s=i-o;e.section==="body"&&(s-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,n),f=c<t;if(c>s)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var h=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>s;return p?(h&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||r.settings.rowPageBreak==="avoid")}function Qg(n,e,t,r,i,a,o){var s=VS(n,e,r,a);if(t.canEntireRowFit(s,o))nu(n,e,t,a,o);else if(Xq(n,t,s,e)){var c=Yq(t,s,e,n);nu(n,e,t,a,o),K0(n,e,i,a,o),Qg(n,e,c,r,i,a,o)}else K0(n,e,i,a,o),Qg(n,e,t,r,i,a,o)}function nu(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var s=o[a],c=t.cells[s.index];if(!c){r.x+=s.width;continue}n.applyStyles(c.styles),c.x=r.x,c.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,c,t,s,r);if(f===!1){r.x+=s.width;continue}Kq(n,c,r);var h=c.getTextPos();OS(c.text,h.x,h.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,s,r),r.x+=s.width}r.y+=t.height}function Kq(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=MS(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),Qq(n,e,t,r.lineWidth))}function Qq(n,e,t,r){var i,a,o,s;r.top&&(i=t.x,a=t.y,o=t.x+e.width,s=t.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.top,i,a,o,s)),r.bottom&&(i=t.x,a=t.y+e.height,o=t.x+e.width,s=t.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.bottom,i,a,o,s)),r.left&&(i=t.x,a=t.y,o=t.x,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.left,i,a,o,s)),r.right&&(i=t.x+e.width,a=t.y,o=t.x+e.width,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.right,i,a,o,s));function c(f,h,p,g,m){n.getDocument().setLineWidth(f),n.getDocument().line(h,p,g,m,"S")}}function VS(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function K0(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(s){return nu(n,e,s,r,i)}),e.callEndPageHooks(n,r);var o=e.settings.margin;LS(n,e,t,r),qS(n),e.pageNumber++,r.x=o.left,r.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(s){return nu(n,e,s,r,i)}),n.applyStyles(n.userStyles))}function qS(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function Zq(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=wq(this,r),a=jq(this,i);return Hq(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){OS(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return vd.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){vd.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new vd(this),a=FS(i,e,window,t,!1),o=a.head,s=a.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:c,rows:s,data:s}}}var qv;try{if(typeof window<"u"&&window){var X4=window,K4=X4.jsPDF||((qv=X4.jspdf)===null||qv===void 0?void 0:qv.jsPDF);K4&&Zq(K4)}}catch(n){console.error("Could not apply autoTable plugin",n)}const Jq=({showStatsModal:n,setShowStatsModal:e,loanHistory:t})=>{const r=fe.useMemo(()=>{if(!t||t.length===0)return null;const i=V=>V?V.seconds?new Date(V.seconds*1e3):new Date(V):null,a=t.length,o=a,s=0,c=t.flatMap(V=>V.items||[]),f=c.reduce((V,Q)=>V+(Q.quantity||1),0),h={};c.forEach(V=>{const Q=V.name;h[Q]=(h[Q]||0)+(V.quantity||1)});const p=Object.entries(h).sort(([,V],[,Q])=>Q-V).slice(0,5).map(([V,Q])=>({name:V,count:Q})),g={};t.forEach(V=>{const Q=V.clientName||"לא צוין";g[Q]=(g[Q]||0)+1});const m=Object.entries(g).sort(([,V],[,Q])=>Q-V).slice(0,5).map(([V,Q])=>({name:V,count:Q})),b={};t.forEach(V=>{const Q=V.volunteerName||"לא צוין";b[Q]=(b[Q]||0)+1});const _=Object.entries(b).sort(([,V],[,Q])=>Q-V).slice(0,5).map(([V,Q])=>({name:V,count:Q})),I=new Date().getMonth(),C=new Date().getFullYear(),N=t.filter(V=>{const Q=i(V.pickupDate);return Q?Q.getMonth()===I&&Q.getFullYear()===C:!1}).length,j=I===0?11:I-1,q=I===0?C-1:C,Y=t.filter(V=>{const Q=i(V.pickupDate);return Q?Q.getMonth()===j&&Q.getFullYear()===q:!1}).length,H=t.filter(V=>V.pickupDate&&V.returnDate);let P=0;if(H.length>0){const V=H.reduce((Q,z)=>{const U=i(z.pickupDate),te=i(z.returnDate);if(!U||!te)return Q;const oe=Math.ceil((te-U)/(1e3*60*60*24));return Q+Math.max(0,oe)},0);P=Math.round(V/H.length)}const E=t.filter(V=>V.returnInspection),R=E.reduce((V,Q)=>{var z;return(z=Q.returnInspection)!=null&&z.itemInspections?V+Q.returnInspection.itemInspections.reduce((U,te)=>U+(te.quantityReturned||0),0):V},0),L=E.reduce((V,Q)=>{var z;return(z=Q.returnInspection)!=null&&z.itemInspections?V+Q.returnInspection.itemInspections.filter(U=>U.condition==="damaged").reduce((U,te)=>U+(te.quantityReturned||0),0):V},0),T=E.reduce((V,Q)=>{var z;return(z=Q.returnInspection)!=null&&z.itemInspections?V+Q.returnInspection.itemInspections.filter(U=>U.condition==="lost").reduce((U,te)=>U+Math.max(0,(te.quantityExpected||0)-(te.quantityReturned||0)),0):V},0),k={};t.forEach(V=>{const Q=V.eventType||"לא צוין";k[Q]=(k[Q]||0)+1});const B=Object.entries(k).sort(([,V],[,Q])=>Q-V).slice(0,5).map(([V,Q])=>({name:V,count:Q}));return{totalLoans:a,activeLoans:s,completedLoans:o,totalItemsLoaned:f,totalItemsReturned:R,damagedItems:L,lostItems:T,mostPopularItems:p,topBorrowers:m,topVolunteers:_,topEventTypes:B,thisMonthLoans:N,lastMonthLoans:Y,averageDuration:P,loansWithInspection:E.length}},[t]);return n?r?y.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:y.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[y.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2196F3"},children:"📊 סטטיסטיקות השאלות"}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📈 נתונים כלליים"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[y.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1976d2"},children:r.totalLoans}),y.jsx("div",{children:'סה"כ השאלות'})]}),y.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#388e3c"},children:r.completedLoans}),y.jsx("div",{children:"השאלות שהושלמו"})]}),y.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f57c00"},children:r.totalItemsLoaned}),y.jsx("div",{children:"פריטים הושאלו"})]}),y.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),y.jsx("div",{children:"פריטים הוחזרו"})]})]})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📅 השוואה חודשית"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[y.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.thisMonthLoans}),y.jsx("div",{children:"השאלות החודש"})]}),y.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#666"},children:r.lastMonthLoans}),y.jsx("div",{children:"השאלות החודש שעבר"})]})]}),r.lastMonthLoans>0&&y.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.9rem"},children:r.thisMonthLoans>r.lastMonthLoans?y.jsxs("span",{style:{color:"#388e3c"},children:["⬆️ עלייה של ",((r.thisMonthLoans-r.lastMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):r.thisMonthLoans<r.lastMonthLoans?y.jsxs("span",{style:{color:"#d32f2f"},children:["⬇️ ירידה של ",((r.lastMonthLoans-r.thisMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):y.jsx("span",{style:{color:"#666"},children:"➡️ ללא שינוי"})})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📦 סטטיסטיקות פריטים"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[y.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.totalItemsLoaned}),y.jsx("div",{children:'סה"כ פריטים הושאלו'})]}),y.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),y.jsx("div",{children:"פריטים הוחזרו"})]}),r.damagedItems>0&&y.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:r.damagedItems}),y.jsx("div",{children:"פריטים פגומים"})]}),r.lostItems>0&&y.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:r.lostItems}),y.jsx("div",{children:"פריטים אבודים"})]})]}),r.mostPopularItems.length>0&&y.jsxs("div",{children:[y.jsx("h4",{style:{marginBottom:"0.5rem"},children:"🏆 הפריטים הפופולריים ביותר:"}),r.mostPopularItems.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#fff3e0":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[y.jsxs("span",{children:[a+1,". ",i.name]}),y.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," פעמים"]})]},a))]})]}),r.topBorrowers.length>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"👥 הלקוחות הפעילים ביותר"}),r.topBorrowers.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e8f5e8":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[y.jsxs("span",{children:[a+1,". ",i.name]}),y.jsxs("span",{style:{fontWeight:"bold",color:"#388e3c"},children:[i.count," השאלות"]})]},a))]}),r.topVolunteers.length>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🌟 המתנדבות הפעילות ביותר"}),r.topVolunteers.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e3f2fd":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[y.jsxs("span",{children:[a+1,". ",i.name]}),y.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," השאלות"]})]},a))]}),r.topEventTypes.length>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🎉 סוגי האירועים הפופולריים"}),r.topEventTypes.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#f0fdf4":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[y.jsxs("span",{children:[a+1,". ",i.name]}),y.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[i.count," פעמים"]})]},a))]}),r.averageDuration>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"⏱️ משך השאלה ממוצע"}),y.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[r.averageDuration," ימים"]}),y.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["(מבוסס על ",t.filter(i=>i.pickupDate&&i.returnDate).length," השאלות)"]})]})]}),r.loansWithInspection>0&&y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🔍 סיכום בדיקות החזרה"}),y.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.loansWithInspection}),y.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["השאלות עם בדיקת החזרה מתוך ",r.totalLoans,' סה"כ']}),y.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:["(",(r.loansWithInspection/r.totalLoans*100).toFixed(1),"% מהשאלות נבדקו)"]})]})]}),y.jsx("div",{className:"modal-actions",children:y.jsx("button",{className:"btn btn-blue",onClick:()=>e(!1),children:"✔️ סגור"})})]})}):y.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:y.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),children:[y.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"📊 סטטיסטיקות השאלות"}),y.jsx("p",{style:{textAlign:"center"},children:"אין נתונים זמינים"}),y.jsx("div",{className:"modal-actions",children:y.jsx("button",{className:"btn btn-gray",onClick:()=>e(!1),children:"סגור"})})]})}):null};class k1{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const eH=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ua={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:eH()},Ex=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},tH=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=Ex(n);ua.publicKey=t.publicKey,ua.blockHeadless=t.blockHeadless,ua.storageProvider=t.storageProvider,ua.blockList=t.blockList,ua.limitRate=t.limitRate,ua.origin=t.origin||e},HS=async(n,e,t={})=>{const r=await fetch(ua.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),a=new k1(r.status,i);if(r.ok)return a;throw a},WS=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},nH=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},GS=n=>n.webdriver||!n.languages||n.languages.length===0,$S=()=>new k1(451,"Unavailable For Headless Browser"),rH=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},iH=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},aH=(n,e)=>n instanceof FormData?n.get(e):n[e],YS=(n,e)=>{if(iH(n))return!1;rH(n.list,n.watchVariable);const t=aH(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},XS=()=>new k1(403,"Forbidden"),oH=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},sH=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},KS=async(n,e,t)=>{if(!e.throttle||!t)return!1;oH(e.throttle,e.id);const r=e.id||n;return await sH(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},QS=()=>new k1(429,"Too Many Requests"),lH=async(n,e,t,r)=>{const i=Ex(r),a=i.publicKey||ua.publicKey,o=i.blockHeadless||ua.blockHeadless,s=i.storageProvider||ua.storageProvider,c={...ua.blockList,...i.blockList},f={...ua.limitRate,...i.limitRate};return o&&GS(navigator)?Promise.reject($S()):(WS(a,n,e),nH(t),t&&YS(c,t)?Promise.reject(XS()):await KS(location.pathname,f,s)?Promise.reject(QS()):HS("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},cH=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},uH=n=>typeof n=="string"?document.querySelector(n):n,fH=async(n,e,t,r)=>{const i=Ex(r),a=i.publicKey||ua.publicKey,o=i.blockHeadless||ua.blockHeadless,s=ua.storageProvider||i.storageProvider,c={...ua.blockList,...i.blockList},f={...ua.limitRate,...i.limitRate};if(o&&GS(navigator))return Promise.reject($S());const h=uH(t);WS(a,n,e),cH(h);const p=new FormData(h);return YS(c,p)?Promise.reject(XS()):await KS(location.pathname,f,s)?Promise.reject(QS()):(p.append("lib_version","4.4.1"),p.append("service_id",n),p.append("template_id",e),p.append("user_id",a),HS("/api/v1.0/email/send-form",p))},Q4={init:tH,send:lH,sendForm:fH,EmailJSResponseStatus:k1},Hv={serviceId:"service_zbzqfa3",templateId:"template_02cqfdn",publicKey:"gJHtAe_l22dY8tKju"},hH=()=>{const[n,e]=fe.useState(!1),[t,r]=fe.useState(null),[i,a]=fe.useState(null);fe.useEffect(()=>{Q4.init(Hv.publicKey),s();const f=setInterval(()=>{new Date().getHours()===9&&s()},60*60*1e3);return()=>clearInterval(f)},[]);const o=f=>f?new Date(f).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):"",s=async()=>{var f,h;e(!0),a(null);try{const p=new Date,g=new Date(p);g.setDate(p.getDate()+2);const m=g.toISOString().split("T")[0];console.log(`📅 Checking for orders returning on: ${m}`);const b=ec(An(Pt,"orders"),ic("status","in",["active","confirmed","picked_up","open"]),ic("returnDate","==",m)),_=await sr(b),I={totalFound:_.size,emailsSent:0,alreadySent:0,errors:[]};if(_.empty){a({...I,message:"לא נמצאו הזמנות הדורשות תזכורת היום"}),r(new Date);return}for(const C of _.docs){const N=C.data(),j=C.id;if(N.reminderSent){I.alreadySent++;continue}try{const q={to_email:N.email,to_name:N.clientName,client_name:N.clientName,return_date:o(N.returnDate),volunteer_name:N.volunteerName||"צוות הארגון",volunteer_phone:N.phone||"לא צוין",organization_name:"גמח שמחת זקנתי",items_list:((f=N.items)==null?void 0:f.map(H=>`• ${H.name} - כמות: ${H.quantity}`).join(`
`))||"לא צוינו פריטים",total_items:((h=N.items)==null?void 0:h.reduce((H,P)=>H+P.quantity,0))||0,event_type:N.eventType||"כללי",pickup_date:o(N.pickupDate),order_id:j},Y=await Q4.send(Hv.serviceId,Hv.templateId,q);console.log("✅ Email sent successfully:",Y),await Za(Er(Pt,"orders",j),{reminderSent:!0,reminderSentAt:Ei.now(),emailSentResult:{status:Y.status,text:Y.text,sentAt:new Date().toISOString()}}),I.emailsSent++}catch(q){console.error(`❌ Failed to send reminder for order ${j}:`,q),I.errors.push({orderId:j,email:N.email,clientName:N.clientName,error:q.message})}}a({...I,message:`בדיקה הושלמה: ${I.emailsSent} תזכורות נשלחו`})}catch(p){console.error("❌ Error in reminder check:",p),a({totalFound:0,emailsSent:0,errors:[{error:p.message}],message:"שגיאה בבדיקת תזכורות"})}finally{e(!1),r(new Date)}},c=()=>{s()};return y.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[y.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[y.jsx("h1",{style:{margin:0,fontSize:"1.8rem"},children:"📧 מערכת תזכורות אוטומטית"}),y.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"תזכורות להחזרת פריטים - 2 ימים לפני תאריך החזרה"})]}),y.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[y.jsx("h2",{style:{margin:0,color:"#1f2937"},children:"סטטוס המערכת"}),y.jsx("button",{onClick:c,disabled:n,style:{background:n?"#9ca3af":"#10b981",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:n?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"},children:n?"🔄 בודק...":"🔍 בדוק תזכורות"})]}),t&&y.jsxs("div",{style:{background:"#f3f4f6",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#6b7280"},children:[y.jsx("strong",{children:"בדיקה אחרונה:"})," ",t.toLocaleString("he-IL")]}),i&&y.jsxs("div",{style:{background:i.errors.length>0?"#fef2f2":"#f0fdf4",border:`1px solid ${i.errors.length>0?"#fecaca":"#bbf7d0"}`,borderRadius:"8px",padding:"1.5rem"},children:[y.jsx("h3",{style:{margin:"0 0 1rem 0",color:i.errors.length>0?"#dc2626":"#059669"},children:i.message}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#3b82f6"},children:i.totalFound}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נמצאו"})]}),y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:i.emailsSent}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נשלחו"})]}),y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:i.alreadySent}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"כבר נשלחו"})]}),y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:i.errors.length}),y.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"שגיאות"})]})]}),i.errors.length>0&&y.jsxs("div",{style:{background:"white",border:"1px solid #fecaca",borderRadius:"6px",padding:"1rem"},children:[y.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc2626"},children:"שגיאות:"}),i.errors.map((f,h)=>y.jsxs("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",marginBottom:"0.25rem"},children:[f.clientName?`${f.clientName} (${f.email})`:"שגיאה כללית",": ",f.error]},h))]})]})]}),y.jsxs("div",{style:{background:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"12px",padding:"2rem"},children:[y.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#92400e"},children:"🔧 הוראות למנהלי המערכת"}),y.jsxs("ul",{style:{color:"#92400e",paddingRight:"1.5rem"},children:[y.jsx("li",{children:"המערכת בודקת אוטומטית כל יום ב-9:00 בבוקר"}),y.jsx("li",{children:"ניתן להפעיל בדיקה ידנית בכל עת באמצעות הכפתור למעלה"}),y.jsx("li",{children:"תזכורות נשלחות רק פעם אחת לכל הזמנה"}),y.jsx("li",{children:"המערכת שולחת תזכורות 2 ימים לפני תאריך ההחזרה"}),y.jsx("li",{children:"כל התזכורות נרשמות במסד הנתונים למעקב"})]})]})]})},dH=({item:n,size:e=60})=>{const t=n.imageUrl||(n.images&&n.images.length>0?n.images[0]:null);return t?y.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",overflow:"hidden",flexShrink:0,background:"#f9fafb"},children:y.jsx("img",{src:t,alt:n.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{r.target.parentNode.innerHTML=`
            <div style="
              width: 100%; 
              height: 100%; 
              display: flex; 
              align-items: center; 
              justify-content: center;
              background: #f9fafb;
            ">
              <svg width="${e*.4}" height="${e*.4}" viewBox="0 0 24 24" fill="#9ca3af">
                <path d="M20 7h-3V6a4 4 0 0 0-4-4h-2a4 4 0 0 0-4 4v1H4a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM9 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1H9V6zm8 15H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v11a1 1 0 0 1-1 1z"/>
              </svg>
            </div>
          `}})}):y.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",flexShrink:0},children:y.jsx(Es,{size:e*.4,style:{color:"#9ca3af"}})})},pH=()=>{var q,Y;const[n,e]=fe.useState([]),[t,r]=fe.useState([]),[i,a]=fe.useState(null),[o,s]=fe.useState(""),[c,f]=fe.useState(""),[h,p]=fe.useState(""),[g,m]=fe.useState(!0),[b,_]=fe.useState(!1);fe.useEffect(()=>{(async()=>{try{m(!0),console.log("🔍 מחפש את כל ההזמנות...");const P=ec(An(Pt,"orders")),R=(await sr(P)).docs.map(z=>({id:z.id,...z.data()}));console.log("📋 כל ההזמנות:",R),console.log("📊 סטטוסים:",R.map(z=>({id:z.id,client:z.clientName,status:z.status}))),console.log("🔍 מחפש הזמנות סגורות...");const L=ec(An(Pt,"orders"),ic("status","==","closed")),k=(await sr(L)).docs.map(z=>({id:z.id,...z.data()}));console.log("✅ הזמנות סגורות:",k),e(k),console.log("🔍 מחפש הזמנות שהוחזרו...");const B=ec(An(Pt,"orders"),ic("status","==","returned")),Q=(await sr(B)).docs.map(z=>({id:z.id,...z.data()}));console.log("🔄 הזמנות שהוחזרו:",Q)}catch(P){console.error("❌ שגיאה בטעינת ההזמנות:",P)}finally{m(!1)}})()},[]);const I=H=>H?(H.seconds?new Date(H.seconds*1e3):new Date(H)).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"}):"",C=H=>H?(H.seconds?new Date(H.seconds*1e3):new Date(H)).toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",N=H=>{var B;if(!((B=H.returnInspection)!=null&&B.itemInspections))return{totalItemsExpected:0,totalItemsReturned:0,totalItemsNotReturned:0,totalDamagedItems:0,totalLostItems:0};const P=H.returnInspection.itemInspections,E=P.reduce((V,Q)=>V+(Q.quantityExpected||0),0),R=P.reduce((V,Q)=>V+(Q.quantityReturned||0),0),L=P.reduce((V,Q)=>V+Math.max(0,(Q.quantityExpected||0)-(Q.quantityReturned||0)),0),T=P.filter(V=>V.condition==="damaged").reduce((V,Q)=>V+(Q.quantityReturned||0),0),k=P.filter(V=>V.condition==="lost").reduce((V,Q)=>V+Math.max(0,(Q.quantityExpected||0)-(Q.quantityReturned||0)),0);return{totalItemsExpected:E,totalItemsReturned:R,totalItemsNotReturned:L,totalDamagedItems:T,totalLostItems:k}};fe.useEffect(()=>{const H=c?new Date(c):null,P=h?new Date(h):null,E=n.filter(R=>{var Q,z,U;const L=((Q=R.clientName)==null?void 0:Q.toLowerCase().includes(o.toLowerCase()))||"",T=((z=R.phone)==null?void 0:z.includes(o))||"",k=L||T,B=(U=R.pickupDate)!=null&&U.seconds?new Date(R.pickupDate.seconds*1e3):new Date(R.pickupDate),V=(!H||B>=H)&&(!P||B<=P);return k&&V});r(E)},[o,c,h,n]);const j=H=>{var L,T;const P=N(H),E=`
      <!DOCTYPE html>
      <html dir="rtl" lang="he">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>דוח השאלה - ${H.clientName}</title>
          <style>
              body { 
                  font-family: Arial, sans-serif; 
                  direction: rtl; 
                  text-align: right;
                  margin: 20px;
                  line-height: 1.6;
                  padding-bottom: 100px;
              }
              .header { 
                  text-align: center; 
                  margin-bottom: 30px;
                  border-bottom: 2px solid #333;
                  padding-bottom: 15px;
              }
              .header h1 {
                  font-size: 24px;
                  color: #2c5aa0;
                  margin: 0 0 5px 0;
              }
              .header h2 {
                  font-size: 20px;
                  color: #333;
                  margin: 0 0 10px 0;
              }
              .info-grid { 
                  display: grid; 
                  grid-template-columns: 1fr 1fr; 
                  gap: 20px; 
                  margin-bottom: 30px;
              }
              .info-item { 
                  margin-bottom: 10px; 
              }
              .label { 
                  font-weight: bold; 
                  color: #333;
              }
              table { 
                  width: 100%; 
                  border-collapse: collapse; 
                  margin-bottom: 30px;
              }
              th, td { 
                  border: 1px solid #ddd; 
                  padding: 8px; 
                  text-align: center;
              }
              th { 
                  background-color: #f5f5f5; 
                  font-weight: bold;
              }
              .summary { 
                  background-color: #f9f9f9; 
                  padding: 20px; 
                  border-radius: 5px;
                  margin-top: 20px;
              }
              .summary h3 {
                  margin-top: 0;
                  color: #2c5aa0;
              }
              
              .download-btn {
                  position: fixed;
                  bottom: 20px;
                  right: 20px;
                  background: linear-gradient(45deg, #2196F3, #21CBF3);
                  color: white;
                  border: none;
                  padding: 15px 25px;
                  border-radius: 50px;
                  cursor: pointer;
                  font-size: 16px;
                  font-weight: bold;
                  box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
                  transition: all 0.3s ease;
                  z-index: 1000;
                  display: flex;
                  align-items: center;
                  gap: 8px;
              }
              
              .download-btn:hover {
                  transform: translateY(-2px);
                  box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
              }
              
              .download-btn:active {
                  transform: translateY(0);
              }
              
              @media print {
                  body { margin: 0; font-size: 14px; }
                  .header { page-break-after: avoid; }
                  .download-btn { display: none !important; }
              }
          </style>
      </head>
      <body>
          <button class="download-btn" onclick="window.print(); return false;">
              📥 הורדת דוח
          </button>
          
          <div class="header">
              <h1>גמ"ח שמחת זקנתי</h1>
              <h2>דוח השאלה - ${H.clientName}</h2>
              <p>נוצר בתאריך: ${new Date().toLocaleDateString("he-IL")}</p>
          </div>
          
          <div class="info-grid">
              <div>
                  <div class="info-item">
                      <span class="label">מתנדבת:</span> ${H.volunteerName}
                  </div>
                  <div class="info-item">
                      <span class="label">טלפון:</span> ${H.phone}
                  </div>
                  <div class="info-item">
                      <span class="label">כתובת:</span> ${H.address}
                  </div>
              </div>
              <div>
                  <div class="info-item">
                      <span class="label">תאריך איסוף:</span> ${I(H.pickupDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">תאריך החזרה:</span> ${I(H.returnDate)}
                  </div>
                  <div class="info-item">
                      <span class="label">סוג אירוע:</span> ${H.eventType}
                  </div>
              </div>
          </div>

          <h3>פריטים בהזמנה</h3>
          <table>
              <thead>
                  <tr>
                      <th>#</th>
                      <th>שם פריט</th>
                      <th>כמות שהושאלה</th>
                      <th>תקין</th>
                      <th>אבד/לא הוחזר</th>
                  </tr>
              </thead>
              <tbody>
                  ${((L=H.items)==null?void 0:L.map((k,B)=>{var X,ge;const V=(ge=(X=H.returnInspection)==null?void 0:X.itemInspections)==null?void 0:ge.find(G=>G.itemId===k.id||G.name===k.name),Q=k.quantity,z=(V==null?void 0:V.quantityReturned)||0,U=Math.max(0,Q-z);let te=0,oe=U;return V&&z>0&&(V.condition==="good"?te=z:V.condition==="damaged"?oe+=z:te=z),`
                      <tr>
                          <td>${B+1}</td>
                          <td>${k.name}</td>
                          <td>${Q}</td>
                          <td>${te}</td>
                          <td>${oe}</td>
                      </tr>
                    `}).join(""))||'<tr><td colspan="5">אין פריטים</td></tr>'}
              </tbody>
          </table>

          ${H.returnInspection?`
          <div class="summary">
              <h3 style="text-align: center;">סיכום בדיקת החזרה</h3>
              <div style="text-align: center;">
                  <div class="info-item">
                      <span class="label">סה"כ פריטים שהושאלו:</span> ${P.totalItemsExpected}
                  </div>
                  <div class="info-item">
                      <span class="label">סה"כ פריטים שהוחזרו:</span> ${P.totalItemsReturned}
                  </div>
                  <div class="info-item">
                      <span class="label">פריטים שלא הוחזרו:</span> ${P.totalItemsNotReturned}
                  </div>
              </div>
              
              ${(T=H.returnInspection.summary)!=null&&T.managerNotes?`
              <div class="info-item" style="margin-top: 20px; text-align: center;">
                  <span class="label">הערות מנהל:</span><br>
                  ${H.returnInspection.summary.managerNotes}
              </div>
              `:""}
          </div>
          `:""}
      </body>
      </html>
    `,R=window.open("","_blank","width=800,height=900,scrollbars=yes,resizable=yes");R.document.write(E),R.document.close(),R.focus()};return g?y.jsx("div",{className:"flex items-center justify-center min-h-screen",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-600",children:"טוען היסטוריית השאלות..."})]})}):y.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[y.jsx("style",{children:`
        @media (max-width: 768px) {
          .date-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            background: white !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            text-align: center !important;
            direction: ltr !important;
            width: 100% !important;
            box-sizing: border-box !important;
            cursor: pointer !important;
            letter-spacing: 1px !important;
          }
          
          .date-input::-webkit-calendar-picker-indicator {
            opacity: 0 !important;
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            height: 100% !important;
            cursor: pointer !important;
            background: transparent !important;
          }
          
          .date-input::-webkit-inner-spin-button,
          .date-input::-webkit-outer-spin-button {
            opacity: 0 !important;
            -webkit-appearance: none !important;
            margin: 0 !important;
          }
        }
      `}),y.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"1.5rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[y.jsxs("div",{style:{textAlign:window.innerWidth<768?"center":"right",flex:"1"},children:[y.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",margin:0,marginBottom:"0.5rem"},children:"📚 היסטוריית השאלות"}),y.jsx("p",{style:{fontSize:"0.95rem",opacity:.9,margin:0},children:"כל ההזמנות שהושלמו עם פרטי בדיקת החזרה"})]}),y.jsxs("button",{onClick:()=>_(!0),style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",backdropFilter:"blur(10px)",whiteSpace:"nowrap"},onMouseEnter:H=>{H.currentTarget.style.background="rgba(255, 255, 255, 0.3)",H.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:H=>{H.currentTarget.style.background="rgba(255, 255, 255, 0.2)",H.currentTarget.style.transform="translateY(0)"},children:[y.jsx($F,{size:20}),"📊 סטטיסטיקות"]})]}),!i&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[y.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem",alignItems:window.innerWidth<768?"stretch":"end"},children:[y.jsxs("div",{style:{flex:window.innerWidth<768?"none":"2"},children:[y.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[y.jsx(BE,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"חיפוש לפי שם לקוח או טלפון"]}),y.jsx("input",{type:"text",value:o,onChange:H=>s(H.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"},placeholder:"הקלד שם או טלפון..."})]}),y.jsxs("div",{style:{flex:"1"},children:[y.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[y.jsx(uh,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"מתאריך"]}),y.jsx("input",{type:"date",value:c,onChange:H=>f(H.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]}),y.jsxs("div",{style:{flex:"1"},children:[y.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[y.jsx(uh,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"עד תאריך"]}),y.jsx("input",{type:"date",value:h,onChange:H=>p(H.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]})]}),y.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem",color:"#374151"},children:["נמצאו ",t.length," השאלות מתוך ",n.length,' סה"כ']})]}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":window.innerWidth<1024?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:window.innerWidth<768?"1rem":"1.5rem"},children:t.length===0?y.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[y.jsx(Es,{size:48,style:{color:"#9ca3af",marginBottom:"1rem"}}),y.jsx("h3",{style:{fontSize:"1.25rem",color:"#6b7280",margin:0},children:"לא נמצאו השאלות"}),y.jsx("p",{style:{color:"#9ca3af",margin:"0.5rem 0 0 0"},children:"נסה לשנות את פרמטרי החיפוש"})]}):t.map(H=>{var P;return y.jsxs("div",{onClick:()=>a(H),style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box"},onMouseEnter:E=>{E.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",E.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:E=>{E.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",E.currentTarget.style.transform="translateY(0)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[y.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[y.jsx("h3",{style:{fontSize:window.innerWidth<768?"1rem":"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937",wordBreak:"break-word"},children:H.clientName}),y.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0",display:"flex",alignItems:"center",gap:"0.25rem"},children:[y.jsx(zE,{size:window.innerWidth<768?12:14}),H.volunteerName]})]}),y.jsx("div",{style:{background:"#10b981",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:window.innerWidth<768?"0.6rem":"0.75rem",fontWeight:"bold",whiteSpace:"nowrap"},children:"הושלם"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem",fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(th,{size:window.innerWidth<768?12:14}),y.jsx("span",{style:{wordBreak:"break-all"},children:H.phone})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(gx,{size:window.innerWidth<768?12:14}),y.jsxs("span",{style:{fontSize:window.innerWidth<768?"0.7rem":"0.875rem"},children:[I(H.pickupDate)," ← ",I(H.returnDate)]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(Es,{size:window.innerWidth<768?12:14}),(P=H.items)==null?void 0:P.reduce((E,R)=>E+R.quantity,0)," פריטים"]})]})]},H.id)})})]}),i&&y.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e5e7eb",flexWrap:"wrap",gap:"1rem"},children:[y.jsxs("div",{children:[y.jsxs("h2",{style:{fontSize:window.innerWidth<768?"1.25rem":"2rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:["השאלה - ",i.clientName]}),y.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:["הושלמה ב-",C((q=i.returnInspection)==null?void 0:q.completedAt)]})]}),y.jsxs("button",{onClick:()=>a(null),style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:window.innerWidth<768?"0.875rem":"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[y.jsx(VF,{size:16}),"חזרה לרשימה"]})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"לקוח"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.clientName})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"מתנדבת"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.volunteerName})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.phone})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.address})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),y.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:[I(i.pickupDate)," ← ",I(i.returnDate)]})]}),y.jsxs("div",{children:[y.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),y.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.eventType})]})]}),y.jsxs("div",{style:{marginBottom:"2rem"},children:[y.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#1f2937"},children:"📦 פריטים וסטטוס החזרה"}),y.jsx("div",{style:{display:"grid",gap:"1rem"},children:(Y=i.items)==null?void 0:Y.map((H,P)=>{var R,L;const E=(L=(R=i.returnInspection)==null?void 0:R.itemInspections)==null?void 0:L.find(T=>T.itemId===H.id||T.name===H.name);return y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",flexWrap:window.innerWidth<768?"wrap":"nowrap",gap:"0.5rem"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:"1",minWidth:"200px"},children:[y.jsx(dH,{item:H,size:window.innerWidth<768?50:60}),y.jsxs("div",{children:[y.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:H.name}),y.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["הושאל: ",H.quantity," | תקין: ",(()=>{const T=(E==null?void 0:E.quantityReturned)||0;return E&&T>0&&E.condition==="good"||E&&T>0&&E.condition!=="damaged"?T:0})()," | אבד/פגום: ",(()=>{const T=H.quantity,k=(E==null?void 0:E.quantityReturned)||0;let V=Math.max(0,T-k);return E&&k>0&&E.condition==="damaged"&&(V+=k),V})()]})]})]}),y.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const T=H.quantity,k=(E==null?void 0:E.quantityReturned)||0;let V=Math.max(0,T-k);return E&&k>0&&E.condition==="damaged"&&(V+=k),V===0?y.jsxs(y.Fragment,{children:[y.jsx(Md,{size:16,style:{color:"#10b981"}}),y.jsx("span",{style:{color:"#10b981",fontWeight:"bold",fontSize:"0.875rem"},children:"הכל תקין"})]}):y.jsxs(y.Fragment,{children:[y.jsx(N1,{size:16,style:{color:"#ef4444"}}),y.jsxs("span",{style:{color:"#ef4444",fontWeight:"bold",fontSize:"0.875rem"},children:[V," חסר/פגום"]})]})})()})]},P)})})]}),y.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:y.jsxs("button",{onClick:()=>j(i),style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"1rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",fontSize:"1.2rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",minWidth:window.innerWidth<768?"100%":"250px",justifyContent:"center"},onMouseEnter:H=>{H.currentTarget.style.transform="translateY(-2px)",H.currentTarget.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.4)"},onMouseLeave:H=>{H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:[y.jsx(oU,{size:20}),"🖨️ הדפס דוח עברית"]})})]}),y.jsx(Jq,{showStatsModal:b,setShowStatsModal:_,loanHistory:n}),y.jsx(hH,{})]})},gH=()=>{const{user:n}=ou(),[e,t]=fe.useState(!1),[r,i]=fe.useState(!1),[a,o]=fe.useState("phone"),[s,c]=fe.useState("fade-in"),f=fe.useRef(null),h="054-257-5886",p="0542575886",g="054-4473-388",m="0544473388",b="972542575886";if(fe.useEffect(()=>{const q=Y=>{f.current&&!f.current.contains(Y.target)&&e&&N()};return e&&document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[e]),n&&n.role!=="User")return null;const _=()=>{window.open(`tel:${p}`,"_self")},I=()=>{window.open(`tel:${m}`,"_self")},C=()=>{const q=encodeURIComponent("שלום, אני מעוניין לקבל מידע נוסף על השירות"),Y=`https://wa.me/${b}?text=${q}`;window.open(Y,"_blank")},N=()=>{i(!0),c("fade-out"),setTimeout(()=>{o("phone"),c("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},j=()=>{e?N():(t(!0),c("fade-out"),setTimeout(()=>{o("close"),c("fade-in")},150))};return y.jsxs(y.Fragment,{children:[y.jsx("style",{jsx:!0,children:`
        .contact-bubble {
          position: fixed;
          bottom: 20px;
          right: 20px;
          z-index: 9999;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .bubble-main {
          background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
          color: white;
          border-radius: 50px;
          box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          cursor: pointer;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          border: none;
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 12px 20px;
          font-weight: 500;
          font-size: 14px;
          overflow: hidden;
          position: relative;
        }

        .bubble-main:hover {
          transform: translateY(-2px);
          box-shadow: 0 12px 35px rgba(37, 99, 235, 0.4);
          background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
        }

        .bubble-main.collapsed {
          width: 56px;
          height: 56px;
          padding: 0;
          justify-content: center;
          border-radius: 50%;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .bubble-content {
          display: flex;
          align-items: center;
          gap: 8px;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .bubble-content.fade-out {
          opacity: 0;
          transform: scale(0.8);
        }

        .bubble-content.fade-in {
          opacity: 1;
          transform: scale(1);
        }

        .expanded-menu {
          position: absolute;
          bottom: 70px;
          right: 0;
          background: white;
          border-radius: 12px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
          padding: 16px;
          min-width: 260px;
          border: 1px solid #e5e7eb;
          animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(10px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        @keyframes slideDown {
          from {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
          to {
            opacity: 0;
            transform: translateY(10px) scale(0.95);
          }
        }

        .expanded-menu.closing {
          animation: slideDown 0.25s ease forwards;
        }

        .menu-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px;
          border-radius: 8px;
          cursor: pointer;
          transition: background-color 0.2s;
          border: none;
          width: 100%;
          text-align: right;
          background: none;
          color: #374151;
          font-size: 14px;
          margin-bottom: 4px;
        }

        .menu-item:hover {
          background-color: #f3f4f6;
        }

        .menu-item.phone {
          color: #2563eb;
        }

        .menu-item.phone2 {
          color: #7c3aed;
        }

        .menu-item.whatsapp {
          color: #10b981;
        }

        .menu-header {
          text-align: center;
          margin-bottom: 12px;
          color: #1f2937;
          font-weight: 600;
          font-size: 16px;
        }

        .pulse {
          animation: pulse 2s infinite;
        }

        @keyframes pulse {
          0% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          }
          50% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.5);
          }
          100% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          }
        }

        @media (max-width: 768px) {
          .contact-bubble {
            bottom: 80px;
            right: 15px;
          }
          
          .expanded-menu {
            width: 240px;
            right: 10px;
            bottom: 65px;
            padding: 14px;
            border-radius: 10px;
          }
          
          .bubble-main {
            padding: 12px 18px;
            font-size: 14px;
            min-height: 48px;
          }
          
          .bubble-main.collapsed {
            width: 56px;
            height: 56px;
            padding: 0;
          }
          
          .menu-item {
            padding: 12px;
            font-size: 14px;
            min-height: 50px;
          }
          
          .menu-header {
            font-size: 16px;
            margin-bottom: 12px;
          }
        }
      `}),y.jsxs("div",{className:"contact-bubble",ref:f,children:[(e||r)&&y.jsxs("div",{className:`expanded-menu ${r?"closing":""}`,dir:"rtl",children:[y.jsx("div",{className:"menu-header",children:"צור קשר"}),y.jsxs("button",{onClick:_,className:"menu-item phone",children:[y.jsx(th,{size:20}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:"500"},children:"לתיאום והגעה"}),y.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:h})]})]}),y.jsxs("button",{onClick:I,className:"menu-item phone2",children:[y.jsx(th,{size:20}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:"500"},children:'למנהלת הגמ"ח'}),y.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:g})]})]}),y.jsxs("button",{onClick:C,className:"menu-item whatsapp",children:[y.jsx(fU,{size:20}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:"500"},children:"WhatsApp"}),y.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"שלח הודעה מהירה"})]})]})]}),y.jsx("button",{onClick:j,className:`bubble-main ${e?"":"collapsed pulse"}`,"aria-label":"צור קשר",children:y.jsx("div",{className:`bubble-content ${s}`,children:a==="close"?y.jsxs(y.Fragment,{children:[y.jsx(yx,{size:20}),y.jsx("span",{children:"סגור"})]}):y.jsx(th,{size:24})})})]})]})},mH=()=>{const[n,e]=fe.useState(""),t="054-4773388",r=async(o,s)=>{try{await navigator.clipboard.writeText(o),e(s),setTimeout(()=>e(""),2e3)}catch(c){console.error("Failed to copy text: ",c)}},i=()=>{const o=t.replace(/-/g,"");r(o,"bit-app"),setTimeout(()=>{if(confirm(`המספר הועתק! 📋

📱 הנחיות לתרומה בביט:
1. פתח את אפליקציית ביט
2. לחץ על "העבר כסף"
3. בחר "למספר טלפון"
4. הדבק את המספר (או הקלד: `+t+`)
5. הכנס סכום לתרומה
6. אשר את התרומה 💚

לחץ "אישור" כדי לפתוח את ביט עכשיו`))try{window.location.href="bit://"}catch{window.open("https://bit.co.il/","_blank")}},500)},a=()=>{const o=t.replace(/-/g,"");r(o,"paybox-app"),setTimeout(()=>{alert(`המספר הועתק! 📋

📱 הנחיות לתרומה בפייבוקס:
1. פתח את אפליקציית פייבוקס
2. לחץ על "שלח כסף"
3. בחר "למספר טלפון"
4. הדבק את המספר (או הקלד: `+t+`)
5. הכנס סכום לתרומה
6. אשר את התרומה 💜

המספר כבר הועתק ומוכן להדבקה!`)},500)};return y.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",padding:"2rem 1rem",direction:"rtl"},children:[y.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",backgroundColor:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[y.jsxs("div",{style:{background:"linear-gradient(135deg, #d97706 0%, #c2410c 100%)",padding:"3rem 2rem",textAlign:"center",color:"white"},children:[y.jsx("div",{style:{fontSize:"4rem"},children:"❤️"}),y.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",margin:"0 0 1rem 0",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:'תרומות לגמ"ח'}),y.jsx("p",{style:{fontSize:"1.2rem",opacity:"0.95",margin:0,fontWeight:"700"},children:"עזרו לנו להמשיך לעזור לכם"})]}),y.jsxs("div",{style:{padding:"3rem 2rem"},children:[y.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"2rem",borderRadius:"15px",marginBottom:"3rem",border:"2px solid #e9ecef"},children:[y.jsx("h2",{style:{fontSize:"1.5rem",color:"#2c3e50",marginBottom:"1rem",textAlign:"center"},children:'🏠 הגמ"ח נשען על תרומות בלבד'}),y.jsx("p",{style:{fontSize:"1.1rem",lineHeight:"1.6",color:"#495057",textAlign:"center",margin:0},children:'עם החזרת הציוד נשמח לתרומתכם על מנת שנוכל להמשיך להחזיק ולחדש את הציוד בגמ"ח לטובת כולנו.'})]}),y.jsx("h3",{style:{fontSize:"2rem",textAlign:"center",marginBottom:"2rem",color:"#2c3e50"},children:"🎯 אפשרויות לתרומה"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[y.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #1d4ed8",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(29, 78, 216, 0.2)"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 8px 25px rgba(29, 78, 216, 0.3)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(29, 78, 216, 0.2)"},children:[y.jsx(wU,{size:48,color:"#1d4ed8",style:{marginBottom:"1rem"}}),y.jsx("h4",{style:{fontSize:"1.3rem",color:"#1d4ed8",marginBottom:"1rem",fontWeight:"700"},children:"ביט / פייבוקס"}),y.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",marginBottom:"1rem"},children:[y.jsx("p",{style:{fontSize:"1.2rem",fontWeight:"800",color:"#1d4ed8",margin:"0 0 0.5rem 0"},children:t}),y.jsxs("button",{onClick:()=>r(t,"bit"),style:{background:"#1d4ed8",border:"2px solid #1d4ed8",color:"white",padding:"8px 15px",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",margin:"0 auto 10px auto",fontWeight:"600"},children:[n==="bit"?y.jsx(XF,{size:16}):y.jsx(iU,{size:16}),n==="bit"?"הועתק!":"העתק מספר"]})]}),y.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[y.jsx("button",{style:{background:"linear-gradient(135deg, #4a90e2 0%, #357abd 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:o=>o.target.style.transform="scale(1.05)",onMouseLeave:o=>o.target.style.transform="scale(1)",onClick:i,children:"🤍 ביט"}),y.jsx("button",{style:{background:"linear-gradient(135deg, #0a84ff 0%, #005cbf 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:o=>o.target.style.transform="scale(1.05)",onMouseLeave:o=>o.target.style.transform="scale(1)",onClick:a,children:"🤍 פייבוקס"})]})]}),y.jsxs("div",{style:{backgroundColor:"#fff",border:"2px solid #27ae60",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(39, 174, 96, 0.1)"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 8px 25px rgba(39, 174, 96, 0.2)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(39, 174, 96, 0.1)"},children:[y.jsx(HF,{size:48,color:"#27ae60",style:{marginBottom:"1rem"}}),y.jsx("h4",{style:{fontSize:"1.3rem",color:"#27ae60",marginBottom:"1rem",fontWeight:"600"},children:"תרומה במזומן"}),y.jsx("p",{style:{color:"#7f8c8d",marginBottom:"1.5rem",fontSize:"1rem",fontWeight:"600",lineHeight:"1.4"},children:'למתנדבות הגמ"ח בעת החזרת הציוד'}),y.jsx("div",{style:{display:"flex",justifyContent:"center"},children:y.jsx("div",{style:{background:"linear-gradient(135deg, #27ae60 0%, #229954 100%)",color:"white",padding:"12px 24px",borderRadius:"25px",fontSize:"1rem",fontWeight:"600"},children:"💰 בעת החזרה"})})]})]}),y.jsxs("div",{style:{background:"linear-gradient(135deg, #d97706 0%, #c2410c 100%)",padding:"2.5rem",borderRadius:"20px",textAlign:"center",color:"white",boxShadow:"0 10px 30px rgba(217, 119, 6, 0.3)"},children:[y.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"1rem",fontWeight:"600"},children:"🙏 תודה מראש"}),y.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"1rem",opacity:"0.95"},children:"התרומה שלכם עוזרת לנו להמשיך לספק שירות איכותי לקהילה"}),y.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"🎉 נתראה בשמחות!"})]})]})]}),y.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        
        @media (max-width: 768px) {
          h1 {
            font-size: 2rem !important;
          }
          
          h3 {
            font-size: 1.5rem !important;
          }
          
          .donation-cards {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})},vH=()=>{const n={maxWidth:"900px",margin:"20px auto",padding:"40px",backgroundColor:"#ffffff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",fontFamily:"system-ui, -apple-system, sans-serif",direction:"rtl",lineHeight:"1.7"},e={textAlign:"center",marginBottom:"50px",padding:"30px 20px",backgroundColor:"#fafbfc",borderRadius:"6px",border:"3px solid #718096",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.12)"},t={fontSize:"32px",fontWeight:"600",color:"#1a202c",marginBottom:"12px"},r={fontSize:"18px",color:"#4a5568",fontWeight:"400"},i={marginBottom:"40px",padding:"32px",backgroundColor:"#ffffff",borderRadius:"8px",border:"3px solid #a0aec0",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.12)"},a={fontSize:"24px",fontWeight:"600",color:"#2d3748",marginBottom:"24px",display:"flex",alignItems:"center",gap:"12px"},o={display:"flex",alignItems:"flex-start",marginBottom:"24px",padding:"24px",backgroundColor:"#ffffff",borderRadius:"8px",border:"2px solid #a0aec0",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.1)"},s={backgroundColor:"#4299e1",color:"white",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"16px",marginLeft:"20px",flexShrink:0},c={flex:1,fontSize:"16px",color:"#4a5568",lineHeight:"1.6"},f={backgroundColor:"#f7fafc",border:"3px solid #718096",borderRadius:"8px",padding:"24px",marginBottom:"20px",textAlign:"center",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.1)"},h={backgroundColor:"#fffaf0",border:"3px solid #b7791f",borderRadius:"8px",padding:"24px",marginBottom:"20px",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.1)"},p={padding:"20px",backgroundColor:"#ffffff",borderRadius:"8px",border:"2px solid #a0aec0",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.1)"},g={fontSize:"20px",marginLeft:"8px"};return y.jsxs("div",{style:n,children:[y.jsxs("div",{style:e,children:[y.jsxs("h1",{style:t,children:[y.jsx("span",{style:g,children:"📋"}),"נוהל השאלה"]}),y.jsx("p",{style:r,children:'שואלים יקרים - אנא קראו בעיון את נוהל הגמ"ח'})]}),y.jsxs("div",{style:{...i,backgroundColor:"#f8fafc",borderRadius:"8px",padding:"32px",border:"1px solid #e2e8f0"},children:[y.jsxs("h2",{style:a,children:[y.jsx("span",{style:g,children:"🔄"}),"התהליך המלא - איך זה עובד?"]}),y.jsxs("div",{style:o,children:[y.jsx("div",{style:s,children:"1"}),y.jsxs("div",{style:c,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"17px"},children:"הזמנה ורישום בלוח:"}),y.jsx("br",{}),'מתקשרים/מגיעים לגמ"ח בזמני הפתיחה ומשריינים תאריך לארוע. רושמים אתכם ביומן השמחות לפי סדר הרישום.',y.jsx("br",{}),y.jsx("strong",{children:"הזמנת רשימת ציוד:"})," משריינים עם המתנדבות רשימה של הציוד הנדרש ומסכמים מתי לקחת."]})]}),y.jsxs("div",{style:o,children:[y.jsx("div",{style:s,children:"2"}),y.jsxs("div",{style:c,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"17px"},children:"איסוף הציוד:"}),y.jsx("br",{}),"מגיעים לקחת את הציוד שהוזמן מראש.",y.jsx("strong",{style:{color:"#e53e3e"},children:" חשוב להיצמד לרשימה"})," - זה מקל על המתנדבות לתת שירות לכולם."]})]}),y.jsxs("div",{style:o,children:[y.jsx("div",{style:s,children:"3"}),y.jsxs("div",{style:c,children:[y.jsx("strong",{style:{color:"#2d3748",fontSize:"17px"},children:"החזרת הציוד:"}),y.jsx("br",{}),"לאחר הארוע מחזירים את הציוד. המתנדבות יבדקו את ההחזרה וידריכו איך להחזיר הכל למקומו."]})]}),y.jsx("div",{style:{...f,backgroundColor:"#edf2f7",border:"3px solid #718096"},children:y.jsxs("p",{style:{fontSize:"16px",margin:0,fontWeight:"500",color:"#2d3748"},children:["🏆 ",y.jsx("strong",{children:"עדיפויות:"})," ההשאלה היא לפי סדר הרישום - מי שנרשם ראשון לתאריך מסוים, משאיל ראשון!"]})})]}),y.jsxs("div",{style:i,children:[y.jsxs("h2",{style:a,children:[y.jsx("span",{style:g,children:"📝"}),"כללים חשובים לזכור"]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[y.jsxs("div",{style:p,children:[y.jsx("strong",{style:{color:"#2d3748"},children:"⏰ זמני פתיחה:"}),y.jsx("br",{}),'הגמ"ח פתוח רק בשעות המפורסמות. הטלפון זמין בשעות הפתיחה.',y.jsx("br",{}),y.jsx("span",{style:{color:"#4a5568",fontSize:"14px",fontStyle:"italic"},children:"המתנדבות עסוקות בנתינת שירות - הן עונות כשהן פנויות, אנא האזרו בסבלנות."})]}),y.jsxs("div",{style:p,children:[y.jsx("strong",{style:{color:"#2d3748"},children:"📅 החזרה בזמן:"}),y.jsx("br",{}),"הקפידו להחזיר את הציוד ביום שנקבע מראש."]}),y.jsxs("div",{style:p,children:[y.jsx("strong",{style:{color:"#e53e3e"},children:"🚗 איסור חמור:"}),y.jsx("br",{}),"אין לשמור חפצים ברכב לפני ואחרי האירוע!"]}),y.jsxs("div",{style:p,children:[y.jsx("strong",{style:{color:"#2d3748"},children:"📸 המלצה:"}),y.jsx("br",{}),"צלמו את החפצים שלוקחים כדי לזכור מה להחזיר.",y.jsx("br",{}),y.jsx("span",{style:{color:"#4a5568",fontSize:"14px",fontStyle:"italic"},children:"החפצים יקרים ומאוד עדינים - אנא שימרו עליהם כשלכם."})]})]})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"24px",marginBottom:"40px"},children:[y.jsxs("div",{style:{...f,backgroundColor:"#f7fafc",border:"3px solid #718096"},children:[y.jsxs("h3",{style:{color:"#2d3748",marginBottom:"12px",fontSize:"18px",fontWeight:"600"},children:[y.jsx("span",{style:g,children:"💝"}),"תרומות"]}),y.jsx("p",{style:{fontSize:"15px",margin:0,color:"#4a5568"},children:'הגמ"ח מאפשר השאלה ללא תשלום. בכדי שנוכל להרחיב ולהעשיר אותו נשמח מאוד לתרומתכם.'})]}),y.jsxs("div",{style:h,children:[y.jsxs("h3",{style:{color:"#2d3748",marginBottom:"12px",fontSize:"18px",fontWeight:"600"},children:[y.jsx("span",{style:g,children:"🔧"}),"במקרה של נזק"]}),y.jsx("p",{style:{fontSize:"15px",margin:0,color:"#4a5568"},children:"אם נגרם נזק בטעות - הפנו את תשומת ליבנו ונאמר כמה לשלם בכדי שנוכל לקנות חדש."})]})]}),y.jsxs("div",{style:i,children:[y.jsxs("h2",{style:a,children:[y.jsx("span",{style:g,children:"🧽"}),"הוראות ניקוי והחזרה"]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[y.jsxs("div",{style:{...p,textAlign:"center",padding:"24px"},children:[y.jsx("div",{style:{fontSize:"36px",marginBottom:"12px"},children:"🧺"}),y.jsx("strong",{style:{color:"#2d3748",fontSize:"16px"},children:"מפות"}),y.jsx("br",{}),y.jsxs("span",{style:{color:"#4a5568",fontSize:"14px"},children:["נקיות, מקופלות ויבשות",y.jsx("br",{}),"(מסיר כתמים לפני כביסה)",y.jsx("br",{}),y.jsx("em",{children:"עדיף לייבש בשמש, אם לא - במייבש"})]})]}),y.jsxs("div",{style:{...p,textAlign:"center",padding:"24px"},children:[y.jsx("div",{style:{fontSize:"36px",marginBottom:"12px"},children:"🕯️"}),y.jsx("strong",{style:{color:"#2d3748",fontSize:"16px"},children:"מעמדי נרות"}),y.jsx("br",{}),y.jsx("span",{style:{color:"#4a5568",fontSize:"14px"},children:"נקיים משעווה"})]}),y.jsxs("div",{style:{...p,textAlign:"center",padding:"24px"},children:[y.jsx("div",{style:{fontSize:"36px",marginBottom:"12px"},children:"☕"}),y.jsx("strong",{style:{color:"#2d3748",fontSize:"16px"},children:"ערכת קפה ומגשים"}),y.jsx("br",{}),y.jsx("span",{style:{color:"#4a5568",fontSize:"14px"},children:"חובה לשטוף ולנגב"})]})]})]}),y.jsxs("div",{style:{...f,backgroundColor:"#f7fafc",border:"3px solid #718096",marginTop:"40px"},children:[y.jsx("h3",{style:{color:"#2d3748",fontSize:"20px",marginBottom:"12px",fontWeight:"600"},children:"מזל טוב, שפע ברכה ושמחה"}),y.jsx("p",{style:{fontSize:"16px",fontStyle:"italic",margin:0,color:"#4a5568"},children:"תודה על שיתוף הפעולה ועל שמירת הכללים"})]})]})},yH=()=>y.jsxs(xE,{children:[y.jsx(UL,{}),y.jsxs(eT,{children:[y.jsx(Xa,{path:"/",element:y.jsx(VL,{})}),y.jsx(Xa,{path:"/login",element:y.jsx(qL,{})}),y.jsx(Xa,{path:"/register",element:y.jsx(HL,{})}),y.jsx(Xa,{path:"/catalog",element:y.jsx(dV,{})}),y.jsx(Xa,{path:"/donations",element:y.jsx(mH,{})}),y.jsx(Xa,{path:"/borrowing-guidelines",element:y.jsx(vH,{})}),y.jsx(Xa,{path:"/request",element:y.jsx(TU,{})}),y.jsx(Xa,{path:"/my-orders",element:y.jsx(DU,{})}),y.jsx(Xa,{path:"/requests",element:y.jsx(RU,{})}),y.jsx(Xa,{path:"/new-loan",element:y.jsx(IU,{})}),y.jsx(Xa,{path:"/calendar",element:y.jsx(GU,{})}),y.jsx(Xa,{path:"/manage-product",element:y.jsx(cV,{})}),y.jsx(Xa,{path:"/manage-users",element:y.jsx(uV,{})}),y.jsx(Xa,{path:"/history",element:y.jsx(pH,{})})]}),y.jsx(gH,{})]});cI.createRoot(document.getElementById("root")).render(y.jsx(Mn.StrictMode,{children:y.jsx(xE,{children:y.jsx(ET,{children:y.jsx(yH,{})})})}));export{lr as _,xH as c,Z4 as g};
